{"version":3,"sources":["webpack:///./src/components/DrillPatientIds.vue?6669","webpack:///./src/components/DrillPatientIds.vue","webpack:///./src/components/DrillPatientIds.vue?2c3e","webpack:///./src/apps/CxCa/views/reports/clinic/TableView.vue?4bd1","webpack:///./src/apps/CxCa/views/reports/clinic/TableView.vue","webpack:///./src/apps/CxCa/views/reports/clinic/TableView.vue?0fa2","webpack:///./src/apps/CxCa/views/reports/clinic/TableView.vue?5a30","webpack:///./src/components/DataViews/tables/v2PocDatatable/TableView.vue?8c9c","webpack:///./src/components/DataViews/tables/v2PocDatatable/TableView.vue","webpack:///./src/components/DataViews/tables/v2PocDatatable/TableView.vue?d314","webpack:///./src/apps/CxCa/services/reports/cxca_report_service.ts","webpack:///./src/components/DataViews/tables/v2PocDatatable/TableView.vue?02d6"],"names":["render","_ctx","_cache","$props","$setup","$data","$options","_component_v2Datatable","_resolveComponent","_component_ion_page","_openBlock","_createBlock","default","_withCtx","_createVNode","title","subtitle","columnData","reportData","columns","onFinish","rowsPerPage","ITEMS_PER_PAGE","_","cachedPatientIDs","defineComponent","props","type","String","patientIdentifiers","Object","Function","components","IonPage","v2Datatable","setup","ref","router","useRouter","label","exportable","tdClick","data","push","path","patient_id","value","watch","async","length","backlog","chunk","log","id","patient","Patientservice","findByID","getID","getNationalID","getGivenName","getFamilyName","toDate","getBirthdate","e","console","error","delayPromise","immediate","__exports__","_hoisted_1","key","_hoisted_2","class","_hoisted_3","_hoisted_4","_hoisted_5","_hoisted_6","_hoisted_7","colspan","_hoisted_8","_hoisted_9","_hoisted_10","_hoisted_11","_hoisted_12","_hoisted_13","_hoisted_14","_hoisted_15","_hoisted_16","_hoisted_17","_hoisted_18","_hoisted_19","_hoisted_20","_hoisted_21","_hoisted_22","_hoisted_23","_hoisted_24","_component_ion_title","_component_ion_icon","_component_ion_button","_component_ion_buttons","_component_ion_toolbar","_component_ion_header","_component_ion_label","_component_ion_item","_component_ion_content","_component_ion_footer","_createElementBlock","_Fragment","_createTextVNode","_toDisplayString","_createCommentVNode","_createElementVNode","slot","onConfigure","onClick","size","icon","document","onRefresh","color","sync","_renderList","columnsMinusOne","column","index","item","i","span","thColspan","rowspan","thRowspan","$event","sortColumn","lines","columnSorted","sortOrder","arrowUp","arrowDown","sectionOne","row","info","k","onClickTablecell","_normalizeClass","sectionTwo","sectionThree","sectionTotals","toCSV","toPDF","finish","IonToolbar","IonItem","IonIcon","IonLabel","IonTitle","IonHeader","IonButton","IonFooter","IonContent","IonButtons","required","Array","csvQuarter","headers","order","csvSpacing","Number","csvSubHeader","route","computed","slice","temp","forEach","record","map","isEmpty","searchIndex","d","join","cell","getExpandedColumns","reduce","a","c","concat","filter","col","html","window","getElementById","toPDFfromHTML","innerHTML","convertDataToIntegerArray","result","subList","obj","isArray","undefined","arr","convertTotalToArray","totals","totalObj","keys","count","tuple","convertedData","convertedTotals","rows","flat","filename","Service","getLocationName","getSessionDate","addSubHeaders","modifiedArray","subHeaderRows","subHeadersLength","rowIndex","subHeaderRow","splice","toCsv","dayjs","format","getCoreVersion","getApiVersion","getSiteUUID","getUserName","mapcolumnValues","deep","search","close","_component_ion_chip","searchTerm","searchTable","page","totalPages","first","disabled","currentPage","prev","canPrev","selectPage","next","canNext","last","IonImg","IonThumbnail","IonChip","enablePagination","Boolean","logo","Img","pageComputedReportData","tableData","sort","fuse","Fuse","threshold","useExtendedSearch","limit","paginated","numericKeypad","v","num","parseInt","keyboard","helpText","FieldType","TT_TEXT","setTimeout","prepExportObj","exportableColumns","canExport","every","exportedValue","secondaryLabel","columnRefs","allRows","includes","dataValue","toTablePDF","from","CxCaReportService","constructor","super","this","endDate","startDate","date","programID","getProgramID","getPepfarReport","reportName","getReport","getClinicReport","getMohReport","getDateIntervalPeriod","HisDate","toStandardHisDisplayFormat","setStartDate","setEndDate","getReportPeriod","url","params","getJson","buildRequest","config","payload","minDuration","quarters","year","getCurrentYear","name","start","end"],"mappings":"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","file":"js/chunk-f4316e34.c940ec60.js","sourcesContent":["import { resolveComponent as _resolveComponent, createVNode as _createVNode, withCtx as _withCtx, openBlock as _openBlock, createBlock as _createBlock } from \"vue\"\n\nexport function render(_ctx: any,_cache: any,$props: any,$setup: any,$data: any,$options: any) {\n  const _component_v2Datatable = _resolveComponent(\"v2Datatable\")!\n  const _component_ion_page = _resolveComponent(\"ion-page\")!\n\n  return (_openBlock(), _createBlock(_component_ion_page, null, {\n    default: _withCtx(() => [\n      _createVNode(_component_v2Datatable, {\n        title: _ctx.title,\n        subtitle: _ctx.subtitle,\n        columnData: _ctx.reportData,\n        columns: _ctx.columns,\n        \"on-finish\": _ctx.onFinish,\n        rowsPerPage: _ctx.ITEMS_PER_PAGE\n      }, null, 8, [\"title\", \"subtitle\", \"columnData\", \"columns\", \"on-finish\", \"rowsPerPage\"])\n    ]),\n    _: 1\n  }))\n}","\nimport { defineComponent, ref, PropType, watch } from 'vue';\nimport { IonPage } from \"@ionic/vue\"\nimport  v2Datatable from \"@/components/DataViews/tables/v2PocDatatable/TableView.vue\"\nimport { v2ColumnDataInterface, v2ColumnInterface } from '@/components/DataViews/tables/v2PocDatatable/types';\nimport { useRouter } from \"vue-router\"\nimport { chunk } from 'lodash';\nimport { delayPromise } from '@/utils/Timers';\nimport { Patientservice } from '@/services/patient_service';\nimport { toDate } from '@/utils/Strs';\n\nconst ITEMS_PER_PAGE = 20\nconst cachedPatientIDs: Record<number, any> = {}\nexport default defineComponent({ \n    props: {\n        title: {\n            type: String,\n            default: 'Drilldown'\n        },\n        patientIdentifiers: {\n            type: Object as PropType<number[]>\n        },\n        onFinish: {\n            type: Function\n        }\n    },\n    components: {\n        IonPage,\n        v2Datatable\n    },\n    setup(props) {\n        const subtitle = ref('-')\n        const reportData = ref<any>([])\n        const router = useRouter()\n        const columns: Array<v2ColumnInterface[]> = [\n            [\n                {\n                    label: 'National ID',\n                    ref: 'national_id'\n                },\n                {\n                    label: 'First name',\n                    ref: 'given_name'\n                },\n                {\n                    label: 'Last name',\n                    ref: 'family_name'\n                },\n                {\n                    label: 'Birthdate',\n                    ref: 'birthdate'\n                },\n                {\n                    label: 'Action',\n                    ref: 'patient_id',\n                    exportable: false,\n                    tdClick: ({data}: v2ColumnDataInterface) => router.push({ path: `/patient/dashboard/${data.patient_id}`}) ,\n                    value: () => 'View client'\n                }\n            ]\n        ]\n        watch(() => props.patientIdentifiers, async (data) => {\n            reportData.value = []\n            subtitle.value = `Total: 0`\n            if (!(data && data.length)) return\n            const backlog = chunk(data, ITEMS_PER_PAGE)\n            for(const log of backlog) {\n                for (const id of log) {\n                    try {\n                        let patient = null\n                        if (cachedPatientIDs[id]) {\n                            patient = cachedPatientIDs[id]\n                        } else {\n                            patient = new Patientservice((await Patientservice.findByID(id)))\n                            cachedPatientIDs[id] = patient\n                        }\n                        reportData.value.push({\n                            'patient_id': patient.getID(),\n                            'national_id': patient.getNationalID(),\n                            'given_name': patient.getGivenName(),\n                            'family_name': patient.getFamilyName(),\n                            'birthdate': toDate(patient.getBirthdate())\n                        })\n                    } catch (e) {\n                        console.error(e)\n                        reportData.value.push({})\n                    }\n                    subtitle.value = `Total: ${reportData.value.length} of ${(data||[]).length}`\n                }\n                await delayPromise(500)\n            }\n        }, { immediate: true })\n\n        return  {\n            columns,\n            subtitle,\n            reportData,\n            ITEMS_PER_PAGE\n        }\n    }\n})\n","import { render } from \"./DrillPatientIds.vue?vue&type=template&id=77912af7&ts=true\"\nimport script from \"./DrillPatientIds.vue?vue&type=script&lang=ts\"\nexport * from \"./DrillPatientIds.vue?vue&type=script&lang=ts\"\n\nimport exportComponent from \"/home/brian/projects/HIS-Core/node_modules/vue-loader-v16/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","import { toDisplayString as _toDisplayString, openBlock as _openBlock, createElementBlock as _createElementBlock, createCommentVNode as _createCommentVNode, createElementVNode as _createElementVNode, createTextVNode as _createTextVNode, resolveComponent as _resolveComponent, withCtx as _withCtx, createVNode as _createVNode, createBlock as _createBlock, renderList as _renderList, Fragment as _Fragment, normalizeClass as _normalizeClass, pushScopeId as _pushScopeId, popScopeId as _popScopeId } from \"vue\"\n\nconst _withScopeId = n => (_pushScopeId(\"data-v-08e3fef8\"),n=n(),_popScopeId(),n)\nconst _hoisted_1 = { key: 0 }\nconst _hoisted_2 = { class: \"his-sm-text\" }\nconst _hoisted_3 = { id: \"report-content\" }\nconst _hoisted_4 = { class: \"art-report-theme\" }\nconst _hoisted_5 = { class: \"stick-report-header\" }\nconst _hoisted_6 = [\"colspan\", \"rowspan\", \"onClick\"]\nconst _hoisted_7 = { colspan: 7 }\nconst _hoisted_8 = { class: \"his-sm-text\" }\nconst _hoisted_9 = [\"onClick\"]\nconst _hoisted_10 = { class: \"his-sm-text\" }\nconst _hoisted_11 = { colspan: 7 }\nconst _hoisted_12 = { class: \"his-sm-text\" }\nconst _hoisted_13 = [\"onClick\"]\nconst _hoisted_14 = { class: \"his-sm-text\" }\nconst _hoisted_15 = { colspan: 7 }\nconst _hoisted_16 = { class: \"his-sm-text\" }\nconst _hoisted_17 = [\"onClick\"]\nconst _hoisted_18 = { class: \"his-sm-text\" }\nconst _hoisted_19 = { colspan: 7 }\nconst _hoisted_20 = { class: \"his-sm-text\" }\nconst _hoisted_21 = { colspan: \"2\" }\nconst _hoisted_22 = { class: \"his-sm-text\" }\nconst _hoisted_23 = { colspan: \"6\" }\nconst _hoisted_24 = [\"onClick\"]\n\nexport function render(_ctx: any,_cache: any,$props: any,$setup: any,$data: any,$options: any) {\n  const _component_ion_title = _resolveComponent(\"ion-title\")!\n  const _component_ion_icon = _resolveComponent(\"ion-icon\")!\n  const _component_ion_button = _resolveComponent(\"ion-button\")!\n  const _component_ion_buttons = _resolveComponent(\"ion-buttons\")!\n  const _component_ion_toolbar = _resolveComponent(\"ion-toolbar\")!\n  const _component_ion_header = _resolveComponent(\"ion-header\")!\n  const _component_ion_label = _resolveComponent(\"ion-label\")!\n  const _component_ion_item = _resolveComponent(\"ion-item\")!\n  const _component_ion_content = _resolveComponent(\"ion-content\")!\n  const _component_ion_footer = _resolveComponent(\"ion-footer\")!\n\n  return (_openBlock(), _createElementBlock(_Fragment, null, [\n    _createVNode(_component_ion_header, null, {\n      default: _withCtx(() => [\n        _createVNode(_component_ion_toolbar, null, {\n          default: _withCtx(() => [\n            _createVNode(_component_ion_title, { class: \"his-md-text\" }, {\n              default: _withCtx(() => [\n                _createTextVNode(_toDisplayString(_ctx.title) + \" \", 1),\n                (_ctx.subtitle)\n                  ? (_openBlock(), _createElementBlock(\"br\", _hoisted_1))\n                  : _createCommentVNode(\"\", true),\n                _createElementVNode(\"span\", _hoisted_2, _toDisplayString(_ctx.subtitle), 1)\n              ]),\n              _: 1\n            }),\n            _createVNode(_component_ion_buttons, { slot: \"end\" }, {\n              default: _withCtx(() => [\n                (typeof _ctx.onConfigure === 'function')\n                  ? (_openBlock(), _createBlock(_component_ion_button, {\n                      key: 0,\n                      onClick: _ctx.onConfigure\n                    }, {\n                      default: _withCtx(() => [\n                        _createVNode(_component_ion_icon, {\n                          size: \"large\",\n                          icon: _ctx.document\n                        }, null, 8, [\"icon\"])\n                      ]),\n                      _: 1\n                    }, 8, [\"onClick\"]))\n                  : _createCommentVNode(\"\", true),\n                (typeof _ctx.onRefresh === 'function')\n                  ? (_openBlock(), _createBlock(_component_ion_button, {\n                      key: 1,\n                      onClick: _ctx.onRefresh,\n                      color: \"success\",\n                      size: \"large\"\n                    }, {\n                      default: _withCtx(() => [\n                        _createVNode(_component_ion_icon, {\n                          size: \"large\",\n                          icon: _ctx.sync\n                        }, null, 8, [\"icon\"])\n                      ]),\n                      _: 1\n                    }, 8, [\"onClick\"]))\n                  : _createCommentVNode(\"\", true)\n              ]),\n              _: 1\n            })\n          ]),\n          _: 1\n        })\n      ]),\n      _: 1\n    }),\n    _createVNode(_component_ion_content, {\n      \"scroll-y\": \"\",\n      \"scroll-x\": \"\"\n    }, {\n      default: _withCtx(() => [\n        _createElementVNode(\"div\", _hoisted_3, [\n          _createElementVNode(\"table\", _hoisted_4, [\n            _createElementVNode(\"thead\", _hoisted_5, [\n              (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(_ctx.columnsMinusOne, (column, index) => {\n                return (_openBlock(), _createElementBlock(\"tr\", { key: index }, [\n                  (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(column, (item, i) => {\n                    return (_openBlock(), _createElementBlock(\"th\", {\n                      key: i,\n                      colspan: item?.span?.thColspan || 1,\n                      rowspan: item?.span?.thRowspan || 1,\n                      onClick: ($event: any) => (_ctx.sortColumn(item.ref))\n                    }, [\n                      _createVNode(_component_ion_item, { lines: \"none\" }, {\n                        default: _withCtx(() => [\n                          (_ctx.columnSorted && _ctx.columnSorted === item.ref)\n                            ? (_openBlock(), _createBlock(_component_ion_icon, {\n                                key: 0,\n                                icon: _ctx.sortOrder === 'asc' ? _ctx.arrowUp : _ctx.arrowDown\n                              }, null, 8, [\"icon\"]))\n                            : _createCommentVNode(\"\", true),\n                          (index < _ctx.columns.length - 1)\n                            ? (_openBlock(), _createBlock(_component_ion_label, {\n                                key: 1,\n                                class: \"ion-text-center\"\n                              }, {\n                                default: _withCtx(() => [\n                                  _createElementVNode(\"b\", null, _toDisplayString(item.label), 1)\n                                ]),\n                                _: 2\n                              }, 1024))\n                            : _createCommentVNode(\"\", true)\n                        ]),\n                        _: 2\n                      }, 1024)\n                    ], 8, _hoisted_6))\n                  }), 128))\n                ]))\n              }), 128))\n            ]),\n            _createElementVNode(\"tbody\", null, [\n              _createElementVNode(\"tr\", null, [\n                _createElementVNode(\"td\", _hoisted_7, [\n                  _createElementVNode(\"span\", _hoisted_8, _toDisplayString(_ctx.columns[4][0].label), 1)\n                ])\n              ]),\n              (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(_ctx.sectionOne, (data, i) => {\n                return (_openBlock(), _createElementBlock(\"tr\", { key: i }, [\n                  (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(data.row || [], (info, k) => {\n                    return (_openBlock(), _createElementBlock(\"td\", {\n                      key: k,\n                      onClick: () => _ctx.onClickTablecell(info),\n                      class: _normalizeClass({\n                                'clickable-cell': info?.column?.tdClick\n                            })\n                    }, [\n                      _createElementVNode(\"b\", _hoisted_10, _toDisplayString(info.value), 1)\n                    ], 10, _hoisted_9))\n                  }), 128))\n                ]))\n              }), 128)),\n              _createElementVNode(\"tr\", null, [\n                _createElementVNode(\"td\", _hoisted_11, [\n                  _createElementVNode(\"span\", _hoisted_12, _toDisplayString(_ctx.columns[5][0].label), 1)\n                ])\n              ]),\n              (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(_ctx.sectionTwo, (data, i) => {\n                return (_openBlock(), _createElementBlock(\"tr\", { key: i }, [\n                  (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(data.row, (info, k) => {\n                    return (_openBlock(), _createElementBlock(\"td\", {\n                      key: k,\n                      onClick: () => _ctx.onClickTablecell(info),\n                      class: _normalizeClass({\n                                'clickable-cell': info?.column?.tdClick\n                            })\n                    }, [\n                      _createElementVNode(\"span\", _hoisted_14, _toDisplayString(info.value), 1)\n                    ], 10, _hoisted_13))\n                  }), 128))\n                ]))\n              }), 128)),\n              _createElementVNode(\"tr\", null, [\n                _createElementVNode(\"td\", _hoisted_15, [\n                  _createElementVNode(\"span\", _hoisted_16, _toDisplayString(_ctx.columns[6][0].label), 1)\n                ])\n              ]),\n              (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(_ctx.sectionThree, (data, i) => {\n                return (_openBlock(), _createElementBlock(\"tr\", { key: i }, [\n                  (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(data.row, (info, k) => {\n                    return (_openBlock(), _createElementBlock(\"td\", {\n                      key: k,\n                      onClick: () => _ctx.onClickTablecell(info),\n                      class: _normalizeClass({\n                                'clickable-cell': info?.column?.tdClick\n                            })\n                    }, [\n                      _createElementVNode(\"span\", _hoisted_18, _toDisplayString(info.value), 1)\n                    ], 10, _hoisted_17))\n                  }), 128))\n                ]))\n              }), 128)),\n              _createElementVNode(\"tr\", null, [\n                _createElementVNode(\"td\", _hoisted_19, [\n                  _createElementVNode(\"span\", _hoisted_20, _toDisplayString(_ctx.columns[7][0].label), 1)\n                ])\n              ]),\n              (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(_ctx.sectionTotals, (data, i) => {\n                return (_openBlock(), _createElementBlock(\"tr\", { key: i }, [\n                  (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(data.row, (info, k) => {\n                    return (_openBlock(), _createElementBlock(_Fragment, { key: k }, [\n                      _createElementVNode(\"td\", _hoisted_21, [\n                        _createElementVNode(\"span\", _hoisted_22, _toDisplayString(info.column.label), 1)\n                      ]),\n                      _createElementVNode(\"td\", _hoisted_23, [\n                        _createElementVNode(\"span\", {\n                          class: _normalizeClass([\"his-sm-text\", {\n                                        'clickable-cell': info?.column?.tdClick\n                                 }]),\n                          onClick: () => _ctx.onClickTablecell(info)\n                        }, _toDisplayString(info.value), 11, _hoisted_24)\n                      ])\n                    ], 64))\n                  }), 128))\n                ]))\n              }), 128))\n            ])\n          ])\n        ])\n      ]),\n      _: 1\n    }),\n    _createVNode(_component_ion_footer, null, {\n      default: _withCtx(() => [\n        _createVNode(_component_ion_toolbar, { color: \"dark\" }, {\n          default: _withCtx(() => [\n            _createVNode(_component_ion_button, {\n              onClick: _cache[0] || (_cache[0] = ($event: any) => (_ctx.toCSV())),\n              size: \"large\"\n            }, {\n              default: _withCtx(() => [\n                _createTextVNode(\" CSV \")\n              ]),\n              _: 1\n            }),\n            _createVNode(_component_ion_button, {\n              onClick: _cache[1] || (_cache[1] = ($event: any) => (_ctx.toPDF())),\n              size: \"large\"\n            }, {\n              default: _withCtx(() => [\n                _createTextVNode(\" PDF \")\n              ]),\n              _: 1\n            }),\n            _createVNode(_component_ion_button, {\n              onClick: _ctx.finish,\n              color: \"success\",\n              size: \"large\",\n              slot: \"end\"\n            }, {\n              default: _withCtx(() => [\n                _createTextVNode(\" Finish \")\n              ]),\n              _: 1\n            }, 8, [\"onClick\"])\n          ]),\n          _: 1\n        })\n      ]),\n      _: 1\n    })\n  ], 64))\n}","\nimport {\n  IonLabel,\n  IonIcon,\n  IonItem,\n  IonTitle,\n  IonToolbar,\n  IonHeader,\n  IonButton,\n  IonFooter,\n  IonContent,\n  IonButtons\n} from \"@ionic/vue\"\nimport { \n    sync,\n    search, \n    close, \n    arrowUp, \n    arrowDown, \n    document\n} from \"ionicons/icons\"\nimport { computed, defineComponent, PropType, ref, watch } from \"vue\";\nimport { isEmpty } from \"lodash\";\nimport { v2ColumnDataInterface, v2ColumnInterface } from \"@/components/DataViews/tables/v2PocDatatable/types\";\nimport { toCsv, toPDFfromHTML } from \"@/utils/Export\"\nimport { Service } from \"@/services/service\";\nimport { useRouter } from \"vue-router\";\nimport dayjs from \"dayjs\";\n\nexport default defineComponent({\n    components: {\n        IonToolbar,\n        IonItem,\n        IonIcon,\n        IonLabel,\n        IonTitle,\n        IonHeader,\n        IonButton,\n        IonFooter,\n        IonContent,\n        IonButtons,\n    },\n    props: {\n        title: {\n            type: String,\n            default: 'Report'\n        },\n        subtitle: {\n            type: String,\n        },\n        columns: {\n            type: Object as PropType<Array<v2ColumnInterface[]>>,\n            required: true\n        },\n        columnData: {\n            type: Array as PropType<Array<Array<any>>>,\n            default: () => []\n        },\n        onFinish: {\n            type: Function\n        },\n        onRefresh: {\n            type: Function\n        },\n        onConfigure: {\n            type: Function\n        },\n        csvQuarter: {\n            type: String\n        },\n        headers: {\n            type: Array as PropType<Array<Array<any>>>,\n            default: () => []\n        },\n        order: {\n            type: Array as PropType<Array<Array<any>>>,\n            default: () => []\n        },\n        csvSpacing: {\n            type: Number\n        },\n        csvSubHeader: {\n            type: Array as PropType<Array<Array<any>>>,\n            default: () => []\n        }\n    },\n    setup(props) {\n        const route = useRouter()\n        const reportData = ref<any>([])\n        const columnSorted = ref<string>('')\n        const sortOrder = ref<'asc'|'desc'>('desc')\n        const columnsMinusOne = computed(() => props.columns.slice(0, 2))\n\n        const sectionOne = computed(() => {\n            /**\n             * Used to retrieve element of the array (1st time scfeened)\n             */\n            \n            const temp: Array<any> = [] \n            props.columnData[0]?.forEach((record: any)=> {\n                    const row = props.columns[1].map((column: v2ColumnInterface) => {\n                        let value = ''\n                        try {\n                            if (isEmpty(record)) {\n                                value = \"...\"\n                            }else if (typeof column.value === 'function') {\n                                value = column.value(record) as string\n                            } else {\n                                // Use the ref to map to a value inside the record\n                                value = record[column.ref] || ''\n                            }\n                        } catch (e) {\n                            value = '_ERROR_'\n                            console.error(e)\n                        }\n                        return {\n                            column,\n                            data: record,\n                            value: value,\n                            [column.ref || 'nada']: value\n                        }\n                    })\n                    temp.push({ \n                        row, \n                        data: record, \n                        searchIndex: [...row, row.map((d: any) => d.value).join(' ')]\n                    })\n                })\n            return temp\n        })\n\n\n        const sectionTwo = computed(() => {\n            /**\n             * Used to retrieve element of the array (1st time scfeened)\n             */\n             const temp: Array<any> = [] \n            props.columnData[1]?.forEach((record: any)=> {\n                    const row = props.columns[2].map((column: v2ColumnInterface) => {\n                        let value = ''\n                        try {\n                            if (isEmpty(record)) {\n                                value = \"...\"\n                            }else if (typeof column.value === 'function') {\n                                value = column.value(record) as string\n                            } else {\n                                // Use the ref to map to a value inside the record\n                                value = record[column.ref] || ''\n                            }\n                        } catch (e) {\n                            value = '_ERROR_'\n                            console.error(e)\n                        }\n                        return {\n                            column,\n                            data: record,\n                            value: value,\n                            [column.ref || 'nada']: value\n                        }\n                    })\n                    temp.push({ \n                        row, \n                        data: record, \n                        searchIndex: [...row, row.map((d: any) => d.value).join(' ')]\n                    })\n                })\n            return temp\n        })\n        const sectionThree = computed(() => {\n            /**\n             * Used to retrieve element of the array (1st time scfeened)\n             */\n            const temp: Array<any> = [] \n            props.columnData[2]?.forEach((record: any)=> {\n                    const row = props.columns[3].map((column: v2ColumnInterface) => {\n                        let value = ''\n                        try {\n                            if (isEmpty(record)) {\n                                value = \"...\"\n                            }else if (typeof column.value === 'function') {\n                                value = column.value(record) as string\n                            } else {\n                                // Use the ref to map to a value inside the record\n                                value = record[column.ref] || ''\n                            }\n                        } catch (e) {\n                            value = '_ERROR_'\n                            console.error(e)\n                        }\n                        return {\n                            column,\n                            data: record,\n                            value: value,\n                            [column.ref || 'nada']: value\n                        }\n                    })\n                    temp.push({ \n                        row, \n                        data: record, \n                        searchIndex: [...row, row.map((d: any) => d.value).join(' ')]\n                    })\n                })\n            return temp\n        })\n\n        const sectionTotals = computed(() => {\n            /**\n             * Used to retrieve element of the array (1st time scfeened)\n             */\n            const temp: Array<any> = [] \n            props.columnData[3]?.forEach((record: any, i: number)=> {\n                const row = props.columns[8 + i].map((column: v2ColumnInterface) => {\n                        let value = ''\n                        try {\n                            if (isEmpty(record)) {\n                                value = \"...\"\n                            }else if (typeof column.value === 'function') {\n                                value = column.value(record) as string\n                            } else {\n                                // Use the ref to map to a value inside the record\n                                value = record[column.ref] || ''\n                            }\n                        } catch (e) {\n                            value = '_ERROR_'\n                            console.error(e)\n                        }\n                        return {\n                            column,\n                            data: record,\n                            value: value,\n                            [column.ref || 'nada']: value\n                        }\n                    })\n                    temp.push({ \n                        row, \n                        data: record, \n                        searchIndex: [...row, row.map((d: any) => d.value).join(' ')]\n                    })\n                })\n            return temp\n        })\n\n        const sortColumn = (column: string) => {\n            columnSorted.value = column\n            sortOrder.value = sortOrder.value === 'asc' ? 'desc' : 'asc'\n        }\n    \n        const finish = () => {\n            if (typeof props.onFinish === 'function') {\n                props.onFinish()\n            } else {\n                route.push('/')\n            }\n        }\n\n        /**\n         * Event handler when TD on HTML report is clicked\n         * @param cell \n         */\n        const onClickTablecell = (cell: v2ColumnDataInterface) => {\n            try {\n                if (typeof cell.column?.tdClick === 'function') {\n                    cell.column?.tdClick(cell)\n                }   \n                return\n            } catch (e) {\n                console.error(e)\n            }\n        }\n\n        const getExpandedColumns = () => props.columns.reduce((a: any, c: v2ColumnInterface[]) => a.concat(c), [])\n            .filter((col: v2ColumnInterface) => col.value || col.ref)\n        \n        const toPDF = () => {\n            const html: any = window?.document?.getElementById(\"report-content\")\n            toPDFfromHTML(`\n                <html>\n                    <head> \n                        <style> \n                        table {\n                            border-collapse: collapse;\n                        }\n                        th, td {\n                            width: 4%;\n                            text-align: center;\n                            border: solid 1px black;\n                        }\n                        td {\n                            border-bottom: 1px solid rgb(165, 165, 165);\n                            padding: 0.6em;\n                            font-weight: 500;\n                            font-size: .8em;\n                        }\n                        </style>    \n                    </head>\n                <body> \n                 ${html.innerHTML}    \n                </body>\n                </html>\n            `)\n        }\n\n        const toCSV = () => {\n            const convertDataToIntegerArray = (data: any[]) => {\n        \n\n                const result = data.map((subList: any[]) => {\n                    return subList\n                        .map((obj: { [key: string]: any }) => {\n                            return props.order.map(key => {\n                                const value = obj[key as unknown as keyof typeof obj];\n                                if (Array.isArray(value)) {\n                                    return value.length;\n                                }\n                                return value;\n                            }).filter((value) => value !== undefined);\n                        })\n                        .filter((arr) => arr.length > 0);\n                }).filter((subList) => subList.length > 0);\n\n                return result;\n            };\n\n            const convertTotalToArray = (totals: any[]): any => {\n                return totals.map((totalObj) => {\n                    const [key] = Object.keys(totalObj);\n                    const value = totalObj[key];\n                    const count = Array.isArray(value) ? value.length : 0;\n                    const tuple = [key, count];\n                    for (let i = 0; i < 5; i++) {\n                    tuple.push(\"\");\n                    }\n                    return tuple;\n                });\n            };\n\n\n\n            const convertedData = convertDataToIntegerArray(props.columnData)\n            const convertedTotals = convertTotalToArray(props.columnData[3])\n            const rows = convertedData.flat(); \n            \n            convertedTotals.forEach((tuple: any) => {\n                rows.push(tuple)\n            });\n\n            const filename = `${Service.getLocationName()||'Unknown site'}-${props.title}-${props.subtitle}-${Service.getSessionDate()}`\n\n            const addSubHeaders = () => {\n                const modifiedArray = [...rows]; // Create a copy of the existing array\n\n                const subHeaderRows = [0, 9, 18, 27]; // Rows where subheaders should be inserted\n                const subHeadersLength = props.csvSubHeader.length;\n\n                subHeaderRows.forEach((rowIndex, index) => {\n                    const subHeaderRow = props.csvSubHeader[index % subHeadersLength];\n\n                    // Insert subheader row at the specified index\n                    modifiedArray.splice(rowIndex, 0, [...subHeaderRow]);\n                });\n\n                return modifiedArray;\n            };\n\n            toCsv(\n                [props.headers],\n                [\n                    ...addSubHeaders(),\n                    [`Date Created: ${dayjs().format('DD/MMM/YYYY HH:MM:ss')}`],\n                    [`Quarter: ${props.csvQuarter || props.subtitle}`],\n                    [`HIS-Core Version: ${Service.getCoreVersion()}`],\n                    [`API Version: ${Service.getApiVersion()}`],\n                    [`Site UUID: ${Service.getSiteUUID()}`],\n                    [`Generated by: ${Service.getUserName()}`]\n                ],\n                filename\n            )\n        }\n\n        /**\n         * Create a table header and cell mapping\n         * @param data \n         */\n        const mapcolumnValues = (data: any) => {\n            data.forEach((record: any)=> {\n                const row = getExpandedColumns().map((column: v2ColumnInterface) => {\n                    let value = ''\n                    try {\n                        if (isEmpty(record)) {\n                            value = \"...\"\n                        }else if (typeof column.value === 'function') {\n                            value = column.value(record) as string\n                        } else {\n                            // Use the ref to map to a value inside the record\n                            value = record[column.ref] || ''\n                        }\n                    } catch (e) {\n                        value = '_ERROR_'\n                        console.error(e)\n                    }\n                    return {\n                        column,\n                        data: record,\n                        value: value,\n                        [column.ref || 'nada']: value\n                    }\n                })\n                reportData.value.push({ \n                    row, \n                    data: record, \n                    searchIndex: [...row, row.map((d: any) => d.value).join(' ')]\n                })\n            })\n        }\n\n        /**\n         * Initiates generation of table data through column data prop\n         */\n        watch(() => props.columnData, (data) => {\n            reportData.value = [];\n            if (Array.isArray(data)) {\n                mapcolumnValues(data)\n            }\n        }, { immediate: true, deep: true })\n\n        return {\n            sortColumn,\n            onClickTablecell,\n            toPDF,\n            toCSV,\n            finish,\n            columnsMinusOne,\n            sync, \n            search, \n            close, \n            arrowUp, \n            arrowDown, \n            document,\n            sortOrder,\n            sectionOne,\n            sectionTwo,\n            sectionThree,\n            sectionTotals,\n            columnSorted\n        }\n    }\n})\n","import { render } from \"./TableView.vue?vue&type=template&id=08e3fef8&scoped=true&ts=true\"\nimport script from \"./TableView.vue?vue&type=script&lang=ts\"\nexport * from \"./TableView.vue?vue&type=script&lang=ts\"\n\nimport \"./TableView.vue?vue&type=style&index=0&id=08e3fef8&scoped=true&lang=css\"\n\nimport exportComponent from \"/home/brian/projects/HIS-Core/node_modules/vue-loader-v16/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-08e3fef8\"]])\n\nexport default __exports__","export * from \"-!../../../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../../../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./TableView.vue?vue&type=style&index=0&id=08e3fef8&scoped=true&lang=css\"","import { toDisplayString as _toDisplayString, openBlock as _openBlock, createElementBlock as _createElementBlock, createCommentVNode as _createCommentVNode, createElementVNode as _createElementVNode, createTextVNode as _createTextVNode, resolveComponent as _resolveComponent, withCtx as _withCtx, createVNode as _createVNode, createBlock as _createBlock, renderList as _renderList, Fragment as _Fragment, normalizeClass as _normalizeClass, pushScopeId as _pushScopeId, popScopeId as _popScopeId } from \"vue\"\n\nconst _withScopeId = n => (_pushScopeId(\"data-v-6bdc361e\"),n=n(),_popScopeId(),n)\nconst _hoisted_1 = { key: 0 }\nconst _hoisted_2 = { class: \"his-sm-text\" }\nconst _hoisted_3 = { class: \"art-report-theme\" }\nconst _hoisted_4 = { class: \"stick-report-header\" }\nconst _hoisted_5 = [\"colspan\", \"rowspan\", \"onClick\"]\nconst _hoisted_6 = [\"onClick\"]\nconst _hoisted_7 = { class: \"his-sm-text\" }\n\nexport function render(_ctx: any,_cache: any,$props: any,$setup: any,$data: any,$options: any) {\n  const _component_ion_title = _resolveComponent(\"ion-title\")!\n  const _component_ion_icon = _resolveComponent(\"ion-icon\")!\n  const _component_ion_button = _resolveComponent(\"ion-button\")!\n  const _component_ion_label = _resolveComponent(\"ion-label\")!\n  const _component_ion_chip = _resolveComponent(\"ion-chip\")!\n  const _component_ion_buttons = _resolveComponent(\"ion-buttons\")!\n  const _component_ion_toolbar = _resolveComponent(\"ion-toolbar\")!\n  const _component_ion_header = _resolveComponent(\"ion-header\")!\n  const _component_ion_item = _resolveComponent(\"ion-item\")!\n  const _component_ion_content = _resolveComponent(\"ion-content\")!\n  const _component_ion_footer = _resolveComponent(\"ion-footer\")!\n\n  return (_openBlock(), _createElementBlock(_Fragment, null, [\n    _createVNode(_component_ion_header, null, {\n      default: _withCtx(() => [\n        _createVNode(_component_ion_toolbar, null, {\n          default: _withCtx(() => [\n            _createVNode(_component_ion_title, { class: \"his-md-text\" }, {\n              default: _withCtx(() => [\n                _createTextVNode(_toDisplayString(_ctx.title) + \" \", 1),\n                (_ctx.subtitle)\n                  ? (_openBlock(), _createElementBlock(\"br\", _hoisted_1))\n                  : _createCommentVNode(\"\", true),\n                _createElementVNode(\"span\", _hoisted_2, _toDisplayString(_ctx.subtitle), 1)\n              ]),\n              _: 1\n            }),\n            _createVNode(_component_ion_buttons, { slot: \"end\" }, {\n              default: _withCtx(() => [\n                (typeof _ctx.onConfigure === 'function')\n                  ? (_openBlock(), _createBlock(_component_ion_button, {\n                      key: 0,\n                      onClick: _ctx.onConfigure\n                    }, {\n                      default: _withCtx(() => [\n                        _createVNode(_component_ion_icon, {\n                          size: \"large\",\n                          icon: _ctx.document\n                        }, null, 8, [\"icon\"])\n                      ]),\n                      _: 1\n                    }, 8, [\"onClick\"]))\n                  : _createCommentVNode(\"\", true),\n                (_ctx.searchTerm)\n                  ? (_openBlock(), _createBlock(_component_ion_chip, {\n                      key: 1,\n                      onClick: _cache[0] || (_cache[0] = ($event: any) => (_ctx.searchTerm = '')),\n                      class: \"his-md-text\",\n                      color: \"primary\"\n                    }, {\n                      default: _withCtx(() => [\n                        _createVNode(_component_ion_label, null, {\n                          default: _withCtx(() => [\n                            _createTextVNode(_toDisplayString(_ctx.searchTerm), 1)\n                          ]),\n                          _: 1\n                        }),\n                        _createVNode(_component_ion_icon, { icon: _ctx.close }, null, 8, [\"icon\"])\n                      ]),\n                      _: 1\n                    }))\n                  : _createCommentVNode(\"\", true),\n                _createVNode(_component_ion_button, {\n                  onClick: _ctx.searchTable,\n                  size: \"large\"\n                }, {\n                  default: _withCtx(() => [\n                    _createVNode(_component_ion_icon, {\n                      size: \"large\",\n                      icon: _ctx.search\n                    }, null, 8, [\"icon\"])\n                  ]),\n                  _: 1\n                }, 8, [\"onClick\"]),\n                (typeof _ctx.onRefresh === 'function')\n                  ? (_openBlock(), _createBlock(_component_ion_button, {\n                      key: 2,\n                      onClick: _ctx.onRefresh,\n                      color: \"success\",\n                      size: \"large\"\n                    }, {\n                      default: _withCtx(() => [\n                        _createVNode(_component_ion_icon, {\n                          size: \"large\",\n                          icon: _ctx.sync\n                        }, null, 8, [\"icon\"])\n                      ]),\n                      _: 1\n                    }, 8, [\"onClick\"]))\n                  : _createCommentVNode(\"\", true)\n              ]),\n              _: 1\n            })\n          ]),\n          _: 1\n        })\n      ]),\n      _: 1\n    }),\n    _createVNode(_component_ion_content, {\n      \"scroll-y\": \"\",\n      \"scroll-x\": \"\"\n    }, {\n      default: _withCtx(() => [\n        _createElementVNode(\"table\", _hoisted_3, [\n          _createElementVNode(\"thead\", _hoisted_4, [\n            (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(_ctx.columns, (column, index) => {\n              return (_openBlock(), _createElementBlock(\"tr\", { key: index }, [\n                (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(column, (item, i) => {\n                  return (_openBlock(), _createElementBlock(\"th\", {\n                    key: i,\n                    colspan: item?.span?.thColspan || 1,\n                    rowspan: item?.span?.thRowspan || 1,\n                    onClick: ($event: any) => (_ctx.sortColumn(item.ref))\n                  }, [\n                    _createVNode(_component_ion_item, { lines: \"none\" }, {\n                      default: _withCtx(() => [\n                        (_ctx.columnSorted && _ctx.columnSorted === item.ref)\n                          ? (_openBlock(), _createBlock(_component_ion_icon, {\n                              key: 0,\n                              icon: _ctx.sortOrder === 'asc' ? _ctx.arrowUp : _ctx.arrowDown\n                            }, null, 8, [\"icon\"]))\n                          : _createCommentVNode(\"\", true),\n                        _createVNode(_component_ion_label, { class: \"ion-text-center\" }, {\n                          default: _withCtx(() => [\n                            _createElementVNode(\"b\", null, _toDisplayString(item.label), 1)\n                          ]),\n                          _: 2\n                        }, 1024)\n                      ]),\n                      _: 2\n                    }, 1024)\n                  ], 8, _hoisted_5))\n                }), 128))\n              ]))\n            }), 128))\n          ]),\n          _createElementVNode(\"tbody\", null, [\n            (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(_ctx.page, (data, i) => {\n              return (_openBlock(), _createElementBlock(\"tr\", { key: i }, [\n                (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(data.row, (info, k) => {\n                  return (_openBlock(), _createElementBlock(\"td\", {\n                    key: k,\n                    onClick: () => _ctx.onClickTablecell(info),\n                    class: _normalizeClass({\n                            'clickable-cell': info?.column?.tdClick\n                        })\n                  }, [\n                    _createElementVNode(\"span\", _hoisted_7, _toDisplayString(info.value), 1)\n                  ], 10, _hoisted_6))\n                }), 128))\n              ]))\n            }), 128))\n          ])\n        ])\n      ]),\n      _: 1\n    }),\n    _createVNode(_component_ion_footer, null, {\n      default: _withCtx(() => [\n        _createVNode(_component_ion_toolbar, { color: \"dark\" }, {\n          default: _withCtx(() => [\n            _createVNode(_component_ion_button, {\n              onClick: _cache[1] || (_cache[1] = ($event: any) => (_ctx.toCSV())),\n              size: \"large\"\n            }, {\n              default: _withCtx(() => [\n                _createTextVNode(\" CSV \")\n              ]),\n              _: 1\n            }),\n            _createVNode(_component_ion_button, {\n              onClick: _cache[2] || (_cache[2] = ($event: any) => (_ctx.toPDF())),\n              size: \"large\"\n            }, {\n              default: _withCtx(() => [\n                _createTextVNode(\" PDF \")\n              ]),\n              _: 1\n            }),\n            (_ctx.totalPages > 1)\n              ? (_openBlock(), _createBlock(_component_ion_button, {\n                  key: 0,\n                  onClick: _ctx.first,\n                  disabled: _ctx.currentPage === 0 || _ctx.totalPages <= 2,\n                  size: \"large\",\n                  slot: \"end\"\n                }, {\n                  default: _withCtx(() => [\n                    _createTextVNode(\" First \")\n                  ]),\n                  _: 1\n                }, 8, [\"onClick\", \"disabled\"]))\n              : _createCommentVNode(\"\", true),\n            (_ctx.totalPages > 1)\n              ? (_openBlock(), _createBlock(_component_ion_button, {\n                  key: 1,\n                  onClick: _ctx.prev,\n                  disabled: !_ctx.canPrev,\n                  color: \"light\",\n                  size: \"large\",\n                  slot: \"end\"\n                }, {\n                  default: _withCtx(() => [\n                    _createTextVNode(\" Prev \")\n                  ]),\n                  _: 1\n                }, 8, [\"onClick\", \"disabled\"]))\n              : _createCommentVNode(\"\", true),\n            (_ctx.totalPages > 1)\n              ? (_openBlock(), _createBlock(_component_ion_button, {\n                  key: 2,\n                  onClick: _ctx.selectPage,\n                  size: \"large\",\n                  slot: \"end\",\n                  color: \"light\"\n                }, {\n                  default: _withCtx(() => [\n                    _createTextVNode(_toDisplayString(_ctx.currentPage) + \" / \" + _toDisplayString(_ctx.totalPages - 1), 1)\n                  ]),\n                  _: 1\n                }, 8, [\"onClick\"]))\n              : _createCommentVNode(\"\", true),\n            (_ctx.totalPages > 1)\n              ? (_openBlock(), _createBlock(_component_ion_button, {\n                  key: 3,\n                  onClick: _ctx.next,\n                  disabled: !_ctx.canNext,\n                  color: \"light\",\n                  size: \"large\",\n                  slot: \"end\"\n                }, {\n                  default: _withCtx(() => [\n                    _createTextVNode(\" Next \")\n                  ]),\n                  _: 1\n                }, 8, [\"onClick\", \"disabled\"]))\n              : _createCommentVNode(\"\", true),\n            (_ctx.totalPages > 1)\n              ? (_openBlock(), _createBlock(_component_ion_button, {\n                  key: 4,\n                  onClick: _ctx.last,\n                  disabled: _ctx.currentPage+1 >= _ctx.totalPages || _ctx.totalPages <= 2,\n                  size: \"large\",\n                  slot: \"end\"\n                }, {\n                  default: _withCtx(() => [\n                    _createTextVNode(\" Last \")\n                  ]),\n                  _: 1\n                }, 8, [\"onClick\", \"disabled\"]))\n              : _createCommentVNode(\"\", true),\n            _createVNode(_component_ion_button, {\n              onClick: _ctx.finish,\n              color: \"success\",\n              size: \"large\",\n              slot: \"end\"\n            }, {\n              default: _withCtx(() => [\n                _createTextVNode(\" Finish \")\n              ]),\n              _: 1\n            }, 8, [\"onClick\"])\n          ]),\n          _: 1\n        })\n      ]),\n      _: 1\n    })\n  ], 64))\n}","\nimport {\n\tIonImg,\n\tIonThumbnail,\n\tIonLabel,\n\tIonIcon,\n\tIonItem,\n\tIonTitle,\n\tIonChip,\n\tIonToolbar,\n\tIonHeader,\n\tIonButton,\n\tIonFooter,\n\tIonContent,\n\tIonButtons\n} from \"@ionic/vue\"\nimport {\n\tsync,\n\tsearch,\n\tclose,\n\tarrowUp,\n\tarrowDown,\n\tdocument\n} from \"ionicons/icons\"\nimport { Option } from \"@/components/Forms/FieldInterface\"\nimport { computed, defineComponent, PropType, ref, watch } from \"vue\";\nimport keyboard from \"@/utils/PopupKeyboard\"\nimport { chunk, isEmpty } from \"lodash\";\nimport { sort } from \"fast-sort\";\nimport { numericKeypad } from \"@/utils/PopupKeyboard\";\nimport { FieldType } from \"@/components/Forms/BaseFormElements\";\nimport Fuse from \"fuse.js\"\nimport { v2ColumnDataInterface, v2ColumnInterface } from \"./types\";\nimport { toCsv, toTablePDF } from \"@/utils/Export\"\nimport { Service } from \"@/services/service\";\nimport { useRouter } from \"vue-router\";\nimport dayjs from \"dayjs\";\nimport Img from \"@/utils/Img\"\n\nexport default defineComponent({\n\tcomponents: {\n\t\tIonImg,\n\t\tIonThumbnail,\n\t\tIonToolbar,\n\t\tIonItem,\n\t\tIonIcon,\n\t\tIonLabel,\n\t\tIonTitle,\n\t\tIonHeader,\n\t\tIonButton,\n\t\tIonFooter,\n\t\tIonContent,\n\t\tIonButtons,\n\t\tIonChip\n\t},\n\tprops: {\n\t\ticon: {\n\t\t\ttype: String\n\t\t},\n\t\ttitle: {\n\t\t\ttype: String,\n\t\t\tdefault: 'Report'\n\t\t},\n\t\tsubtitle: {\n\t\t\ttype: String,\n\t\t},\n\t\tcolumns: {\n\t\t\ttype: Object as PropType<Array<v2ColumnInterface[]>>,\n\t\t\trequired: true\n\t\t},\n\t\tcolumnData: {\n\t\t\ttype: Array,\n\t\t\tdefault: () => []\n\t\t},\n\t\tenablePagination: {\n\t\t\ttype: Boolean,\n\t\t\tdefault: true\n\t\t},\n\t\trowsPerPage: {\n\t\t\ttype: Number,\n\t\t\tdefault: 10\n\t\t},\n\t\tonFinish: {\n\t\t\ttype: Function\n\t\t},\n\t\tonRefresh: {\n\t\t\ttype: Function\n\t\t},\n\t\tonConfigure: {\n\t\t\ttype: Function\n\t\t},\n\t\tcsvQuarter: {\n\t\t\ttype: String\n\t\t}\n\t},\n\tsetup(props) {\n\t\tconst route = useRouter()\n\t\tconst reportData = ref<any>([])\n\t\tconst currentPage = ref<number>(0)\n\t\tconst searchTerm = ref<string>('')\n\t\tconst columnSorted = ref<string>('')\n\t\tconst sortOrder = ref<'asc' | 'desc'>('desc')\n\n\t\tconst logo = computed(() => props.icon ? Img(props.icon) : '')\n\n\t\t/**\n\t\t * This computed object exist to allow for transformation\n\t\t * of \"reportData\" without mutations when doing\n\t\t * things like search or sorting... \n\t\t */\n\t\tconst pageComputedReportData = computed(() => {\n\t\t\t/**\n\t\t\t * Data transformations for table happen here. i.e. searching or sorting\n\t\t\t*/\n\t\t\tconst tableData = sort(reportData.value)[sortOrder.value]((d: any) => d.data[columnSorted.value])\n\t\t\tif (searchTerm.value) {\n\t\t\t\tconst fuse = new Fuse(tableData, {\n\t\t\t\t\tthreshold: 0.3,\n\t\t\t\t\tkeys: ['searchIndex'],\n\t\t\t\t\tuseExtendedSearch: true\n\t\t\t\t})\n\t\t\t\treturn fuse.search(searchTerm.value, { limit: props.rowsPerPage }).map((i: any) => i.item)\n\t\t\t}\n\t\t\treturn tableData\n\t\t})\n\n\t\tconst totalPages = computed(() => chunk(pageComputedReportData.value, props.rowsPerPage).length)\n\n\t\tconst canNext = computed(() => currentPage.value + 2 <= totalPages.value)\n\n\t\tconst canPrev = computed(() => currentPage.value > 0)\n\t\t/**\n\t\t * returns current page data based on page index\n\t\t */\n\t\tconst page = computed(() => {\n\t\t\t/**\n\t\t\t * Paginated data that ends up on the template.\n\t\t\t */\n\t\t\tconst paginated = chunk(pageComputedReportData.value, props.rowsPerPage)\n\t\t\treturn paginated[currentPage.value] as any\n\t\t})\n\n\t\tconst sortColumn = (column: string) => {\n\t\t\tcolumnSorted.value = column\n\t\t\tsortOrder.value = sortOrder.value === 'asc' ? 'desc' : 'asc'\n\t\t}\n\t\t/**\n\t\t * Launches numeric input to allow the user to skip to any page\n\t\t */\n\t\tconst selectPage = () => numericKeypad((v: string) => {\n\t\t\tconst num = parseInt(v)\n\t\t\tif (parseInt(v) <= totalPages.value) currentPage.value = num\n\t\t}, { title: 'Select page' })\n\t\t/**\n\t\t * Launches search input to filter page\n\t\t */\n\t\tconst searchTable = () => {\n\t\t\tkeyboard({\n\t\t\t\tid: \"search\",\n\t\t\t\thelpText: \"Find\",\n\t\t\t\ttype: FieldType.TT_TEXT,\n\t\t\t},\n\t\t\t\t(v: Option) => {\n\t\t\t\t\t// This has been wrapped in a slight delay to improve responsiveness of the page\n\t\t\t\t\tsetTimeout(() => {\n\t\t\t\t\t\tsearchTerm.value = v ? v.value as string : ''\n\t\t\t\t\t\tcurrentPage.value = 0\n\t\t\t\t\t}, 3)\n\t\t\t\t})\n\t\t}\n\t\t/**\n\t\t * Reset current page to initial\n\t\t */\n\t\tconst first = () => currentPage.value = 0\n\t\t/**\n\t\t * Goes to the last page\n\t\t */\n\t\tconst last = () => currentPage.value = (totalPages.value - 1) || 0\n\t\t/**\n\t\t * Go to next page relative to the current page\n\t\t */\n\t\tconst next = () => currentPage.value += 1\n\t\t/**\n\t\t * Go to previous page relateive to the current page\n\t\t */\n\t\tconst prev = () => currentPage.value -= 1\n\n\t\tconst finish = () => {\n\t\t\tif (typeof props.onFinish === 'function') {\n\t\t\t\tprops.onFinish()\n\t\t\t} else {\n\t\t\t\troute.push('/')\n\t\t\t}\n\t\t}\n\n\t\t/**\n\t\t * Event handler when TD on HTML report is clicked\n\t\t * @param cell \n\t\t */\n\t\tconst onClickTablecell = (cell: v2ColumnDataInterface) => {\n\t\t\ttry {\n\t\t\t\tif (typeof cell.column?.tdClick === 'function') {\n\t\t\t\t\tcell.column?.tdClick(cell)\n\t\t\t\t}\n\t\t\t\treturn\n\t\t\t} catch (e) {\n\t\t\t\tconsole.error(e)\n\t\t\t}\n\t\t}\n\n\t\tconst getExpandedColumns = () => props.columns.reduce((a: any, c: v2ColumnInterface[]) => a.concat(c), [])\n\t\t\t.filter((col: v2ColumnInterface) => col.value || col.ref)\n\n\t\t/**\n\t\t * Defines export object\n\t\t */\n\t\tconst prepExportObj = (format: 'pdf' | 'csv') => {\n\t\t\tconst exportableColumns = getExpandedColumns().filter((column: v2ColumnInterface) => {\n\t\t\t\treturn [\n\t\t\t\t\tcolumn.canExport ? column?.canExport[format] : true,\n\t\t\t\t\ttypeof column.exportable === 'boolean' ? column.exportable : true\n\t\t\t\t].every(Boolean)\n\t\t\t})\n\t\t\t// Generates string headers. The final value will be determined by configuration of column\n\t\t\tconst headers = exportableColumns.map((column: v2ColumnInterface) => {\n\t\t\t\treturn column.exportedValue && column.exportedValue.column\n\t\t\t\t\t? column.exportedValue.column(column)\n\t\t\t\t\t: column.secondaryLabel || column.label\n\t\t\t})\n\n\t\t\t/**\n\t\t\t * Exported rows are based on exportable columns\n\t\t\t */\n\t\t\tconst columnRefs = exportableColumns.map((column: v2ColumnInterface) => column.ref)\n\t\t\tconst rows = reportData.value.reduce((allRows: any, data: any) => {\n\t\t\t\tconst row = data.row.filter(({ column }: v2ColumnDataInterface) => {\n\t\t\t\t\treturn columnRefs.includes(column.ref)\n\t\t\t\t}).map((data: v2ColumnDataInterface) => {\n\t\t\t\t\t// Final value will be determined by optional configuration or static value\n\t\t\t\t\treturn data.column.exportedValue && data.column.exportedValue.dataValue\n\t\t\t\t\t\t? data.column.exportedValue.dataValue(data)\n\t\t\t\t\t\t: data.value\n\t\t\t\t})\n\t\t\t\treturn [...allRows, row]\n\t\t\t}, [])\n\n\t\t\tconst filename = `${Service.getLocationName() || 'Unknown site'}-${props.title}-${props.subtitle}-${Service.getSessionDate()}`\n\t\t\treturn {\n\t\t\t\theaders,\n\t\t\t\trows,\n\t\t\t\tfilename\n\t\t\t}\n\t\t}\n\n\t\tconst toPDF = () => {\n\t\t\tconst { headers, rows, filename } = prepExportObj('pdf')\n\t\t\ttoTablePDF([headers], rows, filename, true)\n\t\t}\n\n\t\tconst toCSV = () => {\n\t\t\tconst { headers, rows, filename } = prepExportObj('csv')\n\t\t\ttoCsv(\n\t\t\t\t[headers],\n\t\t\t\t[\n\t\t\t\t\t...rows,\n\t\t\t\t\t[`Date Created: ${dayjs().format('DD/MMM/YYYY HH:MM:ss')}`],\n\t\t\t\t\t[`Quarter: ${props.csvQuarter || props.subtitle}`],\n\t\t\t\t\t[`HIS-Core Version: ${Service.getCoreVersion()}`],\n\t\t\t\t\t[`API Version: ${Service.getApiVersion()}`],\n\t\t\t\t\t[`Site UUID: ${Service.getSiteUUID()}`],\n\t\t\t\t\t[`Generated by: ${Service.getUserName()}`]\n\t\t\t\t],\n\t\t\t\tfilename\n\t\t\t)\n\t\t}\n\n\t\t/**\n\t\t * Create a table header and cell mapping\n\t\t * @param data \n\t\t */\n\t\tconst mapcolumnValues = (data: any) => {\n\t\t\tdata.forEach((record: any) => {\n\t\t\t\tconst row = getExpandedColumns().map((column: v2ColumnInterface) => {\n\t\t\t\t\tlet value = ''\n\t\t\t\t\ttry {\n\t\t\t\t\t\tif (isEmpty(record)) {\n\t\t\t\t\t\t\tvalue = \"...\"\n\t\t\t\t\t\t} else if (typeof column.value === 'function') {\n\t\t\t\t\t\t\tvalue = column.value(record) as string\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t// Use the ref to map to a value inside the record\n\t\t\t\t\t\t\tvalue = record[column.ref] || ''\n\t\t\t\t\t\t}\n\t\t\t\t\t} catch (e) {\n\t\t\t\t\t\tvalue = '_ERROR_'\n\t\t\t\t\t\tconsole.error(e)\n\t\t\t\t\t}\n\t\t\t\t\treturn {\n\t\t\t\t\t\tcolumn,\n\t\t\t\t\t\tdata: record,\n\t\t\t\t\t\tvalue: value,\n\t\t\t\t\t\t[column.ref || 'nada']: value\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t\treportData.value.push({\n\t\t\t\t\trow,\n\t\t\t\t\tdata: record,\n\t\t\t\t\tsearchIndex: [...row, row.map((d: any) => d.value).join(' ')]\n\t\t\t\t})\n\t\t\t})\n\t\t}\n\n\t\t/**\n\t\t * Initiates generation of table data through column data prop\n\t\t */\n\t\twatch(() => props.columnData, (data) => {\n\t\t\treportData.value = [];\n\t\t\tif (!Array.isArray(data) || !data.length) {\n\t\t\t\tcurrentPage.value = 0\n\t\t\t\tsearchTerm.value = ''\n\t\t\t\tcolumnSorted.value = ''\n\t\t\t\tmapcolumnValues(Array.from({ length: props.rowsPerPage }).map(() => ({})))\n\t\t\t\treturn\n\t\t\t}\n\t\t\tmapcolumnValues(data)\n\t\t}, { immediate: true, deep: true })\n\n\t\treturn {\n\t\t\tfirst,\n\t\t\tlast,\n\t\t\tnext,\n\t\t\tprev,\n\t\t\tselectPage,\n\t\t\tsortColumn,\n\t\t\tsearchTable,\n\t\t\tonClickTablecell,\n\t\t\ttoPDF,\n\t\t\ttoCSV,\n\t\t\tfinish,\n\t\t\tlogo,\n\t\t\tsync,\n\t\t\tsearch,\n\t\t\tclose,\n\t\t\tarrowUp,\n\t\t\tarrowDown,\n\t\t\tdocument,\n\t\t\tpage,\n\t\t\tcanNext,\n\t\t\tsearchTerm,\n\t\t\ttotalPages,\n\t\t\tsortOrder,\n\t\t\tcanPrev,\n\t\t\tcurrentPage,\n\t\t\tcolumnSorted\n\t\t}\n\t}\n})\n","import { render } from \"./TableView.vue?vue&type=template&id=6bdc361e&scoped=true&ts=true\"\nimport script from \"./TableView.vue?vue&type=script&lang=ts\"\nexport * from \"./TableView.vue?vue&type=script&lang=ts\"\n\nimport \"./TableView.vue?vue&type=style&index=0&id=6bdc361e&scoped=true&lang=css\"\n\nimport exportComponent from \"/home/brian/projects/HIS-Core/node_modules/vue-loader-v16/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-6bdc361e\"]])\n\nexport default __exports__","import { Service } from \"@/services/service\";\nimport HisDate from \"@/utils/Date\"\n\nexport interface QuarterInterface {\n    name: string;\n    start: string;\n    end: string;\n}\n\n\n\nexport const AGE_GROUPS = [\n    '15-19 years', '20-24 years',\n    '25-29 years', '30-34 years',\n    '35-39 years', '40-44 years',\n    '45-49 years', '50 plus years'\n]\n\n\nexport class CxCaReportService extends Service {\n    programID: number;\n    startDate: string;\n    endDate: string;\n    date: string;\n    constructor() {\n        super()\n        this.endDate = ''\n        this.startDate = ''\n        this.date = Service.getSessionDate()\n        this.programID = Service.getProgramID()\n    }\n\n    getPepfarReport(reportName: string) {\n        return this.getReport('pepfar_cxca', {'report_name': reportName})\n    }\n    getClinicReport(reportName: string) {\n        return this.getReport('screened_for_cxca', {'report_name': reportName})\n    }\n    getMohReport(reportName: string) {\n        return this.getReport('screened_for_cxca', {'report_name': reportName})\n    }\n    \n    getDateIntervalPeriod() {\n        return `${HisDate.toStandardHisDisplayFormat(this.startDate)} - ${HisDate.toStandardHisDisplayFormat(this.endDate)}`\n    }\n\n    setStartDate(startDate: string) {\n        this.startDate = startDate\n    }  \n\n    setEndDate(endDate: string) {\n        this.endDate = endDate\n    }\n\n   \n\n    getReportPeriod() {\n        return this.startDate && this.endDate\n         ? `${HisDate.toStandardHisDisplayFormat(this.startDate)} - ${HisDate.toStandardHisDisplayFormat(this.endDate)}`\n         : '-'\n    }\n\n    getReport(url: string, params={}) {\n        return Service.getJson(url, this.buildRequest(params))\n    }\n\n    buildRequest(config: Record<string, any> = {}) {\n        const payload: any = {'date': this.date, 'program_id': 24}\n        if (this.startDate && this.endDate) {\n            payload['start_date'] = this.startDate\n            payload['end_date'] = this.endDate\n        }\n        return { ...payload, ...config }\n    }\n\n    static getReportQuarters(minDuration= 4) {\n        const quarters: Array<QuarterInterface> = []\n        let year = HisDate.getCurrentYear()\n        for(let i=0; i < minDuration; ++i) {\n            quarters.push({ name: `Q4 ${year}`, start: `${year}-10-01`, end: `${year}-12-31` })\n            quarters.push({ name: `Q3 ${year}`, start: `${year}-07-01`, end: `${year}-09-30` })\n            quarters.push({ name: `Q2 ${year}`, start: `${year}-04-01`, end: `${year}-06-30` })\n            quarters.push({ name: `Q1 ${year}`, start: `${year}-01-01`, end: `${year}-03-31` })\n            --year\n        }\n        return quarters\n    }\n\n}","export * from \"-!../../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./TableView.vue?vue&type=style&index=0&id=6bdc361e&scoped=true&lang=css\""],"sourceRoot":""}