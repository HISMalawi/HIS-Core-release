(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-a235e810"],{"4db6":function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var i=n("cc6f");class o extends i["a"]{constructor(e,t=-1){super(e,158,t)}getRecentCircumcisionStatus(){return this.getFirstValueCoded("Circumcision status")}}},7920:function(e,t,n){"use strict";var i=n("7a23");function o(e,t,n,o,s,a){return Object(i["openBlock"])(),Object(i["createBlock"])(Object(i["resolveDynamicComponent"])(e.formType),{fields:e.fields,skipSummary:e.skipSummary,activeField:e.activeField,cancelDestinationPath:e.cancelDestinationPath,onOnFinish:e.onFinish,onFinish:e.onFinishAction,onOnIndex:e.onIndex},null,40,["fields","skipSummary","activeField","cancelDestinationPath","onOnFinish","onFinish","onOnIndex"])}var s=n("9441"),a=Object(i["defineComponent"])({name:"HisStandardForm",components:{TouchScreenForm:s["a"]},emits:["onFinish","onIndex"],data:()=>({formType:"touch-screen-form"}),props:{onFinishAction:{type:Function},skipSummary:{type:Boolean,default:!1},activeField:{type:String},fields:{type:Object,required:!0},cancelDestinationPath:{type:String,required:!1}},methods:{onFinish(e,t){this.$emit("onFinish",e,t)},onIndex(e){this.$emit("onIndex",e)}}}),c=n("6b0d"),r=n.n(c);const l=r()(a,[["render",o]]);t["a"]=l},d76a:function(e,t,n){"use strict";n.r(t);var i=n("7a23");function o(e,t,n,o,s,a){const c=Object(i["resolveComponent"])("his-standard-form"),r=Object(i["resolveComponent"])("ion-page");return Object(i["openBlock"])(),Object(i["createBlock"])(r,null,{default:Object(i["withCtx"])(()=>[Object(i["createVNode"])(c,{formLabel:"Referral",skipSummary:!0,fields:e.fields,onFinishAction:e.onFinish,cancelDestinationPath:e.patientDashboardUrl()},null,8,["fields","onFinishAction","cancelDestinationPath"])]),_:1})}n("14d9");var s=n("d95e"),a=n("d867"),c=n("cc6f");class r extends c["a"]{constructor(e,t=-1){super(e,114,t)}}var l=n("4db6"),u=n("b432"),d=n("0011"),p=n("7920"),f=n("e9be"),h=Object(i["defineComponent"])({components:{IonPage:a["D"],HisStandardForm:p["a"]},setup(){const e=new r(-1),t=Object(i["ref"])([]),n=Object(i["ref"])(!1),{visitID:o,getEncounter:a,saveEncounter:c,patientDashboardUrl:p,htsClient:h}=Object(f["a"])({onInitVisit:()=>{t.value=[b(),C()]}});function m(t,n){c({encounterTypeID:e.encounterTypeID,encounterName:"REFERRAL",computedData:n})}function v(e){return r.getFirstValueCoded(o.value,e)}function b(){let t=!1;const i=[];return{id:"services",helpText:"Refer Client to other Services?",type:s["b"].TT_MULTIPLE_SELECT,isRequired:()=>!0,init:async()=>{const e=h.age;if("M"===h.gender){const n=a("CIRCUMCISION");if(n)t=/no/i.test(n["Circumcision status"])&&e>14&&e<64;else if(!Object(u["a"])().isOfflineMode.value){const n=new l["a"](o.value),i=await n.getRecentCircumcisionStatus();t=["No"===i,e>14&&e<64].every(Boolean)}}const s=["Hepatitis B Test Result","Syphilis Test Result"],c=a("Testing");if(c)s.forEach(e=>{"Positive"===c[e]&&i.push(e)}),n.value=/positive/i.test(""+c["HIV status"]);else if(!Object(u["a"])().isOfflineMode.value){for(const e of s)"Positive"===await v(e)&&i.push(e);n.value=["Positive","Positive Initial Professional"].includes(await v("HIV status"))}return!0},finalComputedValue:t=>({obs:t.map(t=>e.buildValueText("Referrals ordered",""+t.value))}),onValueUpdate(e,t){return e.map(e=>("None"===t.value&&"None"!=e.value&&(e.isChecked=!1),"None"!=t.value&&t.isChecked&&"None"===e.value&&(e.isChecked=!1),e))},options:e=>{const o=[],s=(t,n={})=>{const i=!!e.services&&e.services.some(e=>e.value===t);return{label:t,value:t,isChecked:i,...n}};return o.push(s("STI",i.length?{description:{text:`Client tested positive for ${Object(d["b"])(i)}. Please recommend this option if client has not started yet`}}:{})),o.push(s("TB")),"M"===h.gender&&o.push(s("VMMC",t?{description:{text:"Client is not circumcised, please recommend this option"}}:{})),o.push(s("PrEP ",n.value?{disabled:n.value,description:{text:"Client is HIV positive, cannot refer for PrEP"}}:{})),o.push(s("PEP ",n.value?{disabled:n.value,description:{text:"Client is HIV positive, cannot refer for PEP"}}:{})),o.push(s("Other")),o.push(s("None")),o},config:{footerBtns:[{name:"None",slot:"end",onClickComponentEvents:{refreshOptions:(e,t)=>t.map(e=>(e.isChecked="None"===e.label,e))},onClick:()=>"None"}]}}}function C(){return{id:"comment",helpText:"Comments (Optional)",type:s["b"].TT_NOTE,finalComputedValue:t=>t&&!/^\s*$/gi.test(""+t.value)?{obs:e.buildValueText("Comments",""+t.value)}:null}}return{patientDashboardUrl:p,onFinish:m,fields:t}}}),m=n("6b0d"),v=n.n(m);const b=v()(h,[["render",o]]);t["default"]=b}}]);
//# sourceMappingURL=chunk-a235e810.5cdd5268.js.map