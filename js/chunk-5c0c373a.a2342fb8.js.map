{"version":3,"sources":["webpack:///./src/apps/EMC/views/tools/DataVerification.vue?8110","webpack:///./src/apps/ART/services/reports/art_report_service.ts","webpack:///./src/apps/EMC/utils/form.ts","webpack:///./src/apps/EMC/views/tools/DataVerification.vue?bd8d","webpack:///./src/apps/EMC/views/tools/DataVerification.vue","webpack:///./src/apps/EMC/views/tools/DataVerification.vue?5c6d","webpack:///./src/utils/loader.ts","webpack:///./src/apps/ART/services/reports/data_cleaning_report_service.ts"],"names":["ArtReportService","endDate","startDate","quarter","date","Service","getSessionDate","programID","getProgramID","HisDate","toStandardHisDisplayFormat","this","url","params","getJson","buildRequest","config","payload","year","daysInMonth","m","dayjs","startMonth","endMonth","qtr","start","end","qtrBounds","getQuarterBounds","getFullYear","Date","qtrName","name","maxQuarters","qtrs","currDate","currYear","curYr","getMonth","getDate","currentQtr","getQtrByDate","i","push","buildQtrObj","isValidForm","form","key","required","isEmpty","value","error","validation","label","errs","length","toString","console","log","Object","values","every","resolveFormValues","underscoreKeys","formData","computedFormData","fKey","toUnderscores","computedValue","resolveObs","obs","tag","filter","d","reduce","accum","cur","data","Array","isArray","concat","Promise","all","optionsToGroupObs","conceptName","options","map","option","ObservationService","buildGroupValueCoded","isChecked","submitForm","callback","showloader","loader","show","hide","toastWarning","_hoisted_1","_createTextVNode","_hoisted_2","_hoisted_3","_hoisted_4","render","_ctx","_cache","$props","$setup","$data","$options","_component_ion_title","_resolveComponent","_component_yes_no_input","_component_ion_col","_component_DateInput","_component_text_input","_component_ion_row","_component_ion_button","_component_ion_grid","_component_Layout","_openBlock","_createBlock","default","_withCtx","_createVNode","class","size","offset","_","modelValue","cleaningDone","$event","inline","_Fragment","today","provider","_createCommentVNode","onClick","onSubmit","color","onClear","$router","back","defineComponent","components","Layout","IonGrid","IonRow","IonCol","IonButton","IonTitle","YesNoInput","DateInput","TextInput","setup","router","useRouter","format","reactive","StandardValidations","DataCleaningReportService","saveDataCleaningVerification","success","alertConfirmation","EventBus","emit","EmcEvents","ON_CLEAR","__exports__","message","loadingController","create","spinner","translucent","present","dismiss","CtIndicator","postJson","indicator","getReport"],"mappings":"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","file":"js/chunk-5c0c373a.a2342fb8.js","sourcesContent":["export * from \"-!../../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../../../node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/index.js??ref--0-1!./DataVerification.vue?vue&type=style&index=0&id=83341f92&lang=css\"","import { Service } from \"@/services/service\";\nimport HisDate from \"@/utils/Date\"\nimport dayjs from \"dayjs\";\n\nexport interface QuarterInterface {\n    name: string;\n    start: string;\n    end: string;\n}\n\nexport class ArtReportService extends Service {\n    programID: number;\n    startDate: string;\n    endDate: string;\n    date: string;\n    quarter: string\n    constructor() {\n        super()\n        this.endDate = ''\n        this.startDate = ''\n        this.quarter = ''\n        this.date = Service.getSessionDate()\n        this.programID = Service.getProgramID()\n    }\n\n    getDateIntervalPeriod() {\n        return `${HisDate.toStandardHisDisplayFormat(this.startDate)} - ${HisDate.toStandardHisDisplayFormat(this.endDate)}`\n    }\n\n    setStartDate(startDate: string) {\n        this.startDate = startDate\n    }  \n\n    setEndDate(endDate: string) {\n        this.endDate = endDate\n    }\n\n    setQuarter(quarter: string) {\n        this.quarter = quarter\n    }\n\n    getReport(url: string, params={}) {\n        return Service.getJson(url, this.buildRequest(params))\n    }\n\n    buildRequest(config: Record<string, any> = {}) {\n        const payload: any = {'date': this.date, 'program_id': this.programID}\n        if (this.startDate && this.endDate) {\n            payload['start_date'] = this.startDate\n            payload['end_date'] = this.endDate\n        }\n        if (this.quarter) {\n            payload['quarter'] = this.quarter\n        }\n        return { ...payload, ...config }\n    }\n\n    static getQuarterBounds(year: number) {\n        const daysInMonth = (m: string) => dayjs(`${year}-${m}-01`).daysInMonth()\n        const startMonth = (m: string) => `${year}-${m}-01 00:00`\n        const endMonth = (m: string) => `${year}-${m}-${daysInMonth(m)} 00:00`\n\n        return {\n            'Q1': {\n                qtr: 1,\n                start: startMonth('01'),\n                end: endMonth('03')\n            },\n            'Q2': {\n                qtr: 2,\n                start: startMonth('04'),\n                end: endMonth('06')\n            },\n            'Q3': {\n                qtr: 3,\n                start: startMonth('07'),\n                end: endMonth('09')\n            },\n            'Q4': {\n                qtr: 4,\n                start: startMonth('10'),\n                end: endMonth('12')\n            }\n        }\n    }\n\n    static getQtrByDate(date: Date) {\n        const qtrBounds: any = this.getQuarterBounds(date.getFullYear())\n        for(const qtr in qtrBounds) {\n            const { start, end } = qtrBounds[qtr]\n            if (date >= new Date(start) && date <= new Date(end)) {\n                return qtrBounds[qtr]\n            }\n        }\n        return null\n    }\n\n    static buildQtrObj(qtrName: string, year: number): QuarterInterface {\n        const qtrBounds: any = this.getQuarterBounds(year)\n        const { start, end } = qtrBounds[qtrName]\n        return {\n            start,\n            end,\n            name: `${qtrName} ${year}`,\n        }\n    }\n\n    static getReportQuarters(maxQuarters=5) {\n        const qtrs: QuarterInterface[] = [];\n        let currDate = new Date();\n        let currYear = currDate.getFullYear();\n        const curYr = currYear\n        \n        currDate = new Date(`${curYr}-${currDate.getMonth() + 1}-${currDate.getDate()} 00:00`);\n        const currentQtr = this.getQtrByDate(currDate);\n        let qtr = currentQtr.qtr;\n        let i = 0;\n\n        if (qtr === 4) qtrs.push(this.buildQtrObj('Q1', currYear + 1))\n\n        while (i < maxQuarters) {\n          // Add following quarter\n          if (i === 0 && qtr < 4) qtrs.push(this.buildQtrObj(`Q${qtr + 1}`, currYear))\n\n          qtrs.push(this.buildQtrObj(`Q${qtr}`, currYear))\n          qtr = qtr > 0 ? (qtr -= 1) : qtr;\n          currYear = qtr == 0 ? currYear - 1 : currYear;\n          qtr =  qtr == 0 ? ( qtr += 4) : qtr;\n          i++;\n        }\n        return qtrs;\n    }\n}\n","import { ObsValue, ObservationService } from \"@/services/observation_service\"\nimport { DTForm } from \"../interfaces/dt_form_field\"\nimport { Option } from \"@/components/Forms/FieldInterface\";\nimport { toUnderscores } from \"@/utils/Strs\";\nimport { isEmpty } from \"lodash\";\nimport { loader } from \"@/utils/loader\";\nimport { toastWarning } from '@/utils/Alerts';\n\nexport async function isValidForm (form: DTForm) {\n  for (const key in form) {\n    if (form[key].required && isEmpty(form[key].value)) {\n      form[key].error = \"This field is required\";\n      continue;\n    }\n    if(typeof form[key].validation !== 'function') {\n      form[key].error = ''\n      continue\n    }\n    const payload = typeof form[key].value === 'object'\n        ? form[key].value\n        : { label: form[key].value, value: form[key].value }\n\n    const errs = await form[key].validation!(payload as Option, form)\n    if(errs && errs.length > 0) {\n      form[key].error = errs.toString()\n      console.log(key, form[key].error)\n    } else {\n      form[key].error = ''\n    }       \n  }\n  return Object.values(form).every(({ error }) => !error)\n}\n\nexport function resolveFormValues(form: DTForm, underscoreKeys = false) {\n  const formData: any = {}\n  const computedFormData: any = {}\n  for (const key in form) {\n    if(form[key].value) {\n      const fKey = underscoreKeys ? toUnderscores(key) : key\n      formData[fKey] = form[key].value\n      if(typeof form[key].computedValue === 'function') {\n        computedFormData[fKey] = form[key].computedValue!(form[key].value, form)\n      }\n    }\n  }\n  return { formData, computedFormData }\n}\n\nexport function resolveObs (obs: any, tag=''): Promise<ObsValue[]> {\n  const values: any = Object.values(obs)\n    .filter((d: any) => d && (d.tag === tag || tag === ''))\n    .reduce((accum: any, cur: any) => { \n      const data = cur.obs ? cur.obs : cur\n      if (Array.isArray(data)) {\n        accum = accum.concat(data)\n      } else {\n          accum.push(data)\n      }\n      return accum\n    }, [])\n  return Promise.all(values)\n}\n\nexport async function optionsToGroupObs (conceptName: string, options: Option[]) {\n  return await Promise.all(options.map(async (option) => {\n    return ObservationService.buildGroupValueCoded(conceptName, option.label, option.isChecked ? 'Yes' : 'No')\n  }))\n}\n\ntype SubmitFormCallback = (formData: Record<string, any>, computedData: Record<string, any>) => Promise<void> | void\ninterface SubmitOptios {\n  showloader?: boolean;\n  underscoreKeys?: boolean;\n}\n\nexport async function submitForm (form: DTForm, callback: SubmitFormCallback, options?: SubmitOptios) {\n  if(!await isValidForm(form)) return\n  try {\n    const showloader = options?.showloader || false\n    if (showloader) loader.show()\n    const {formData, computedFormData} = resolveFormValues(form, options?.underscoreKeys)\n    await callback(formData, computedFormData)\n    if(showloader) await loader.hide()\n  } catch (error) {\n    toastWarning(`${error}`)\n    loader.hide()\n  }\n}","import { createTextVNode as _createTextVNode, resolveComponent as _resolveComponent, withCtx as _withCtx, createVNode as _createVNode, Fragment as _Fragment, openBlock as _openBlock, createBlock as _createBlock, createCommentVNode as _createCommentVNode } from \"vue\"\n\nconst _hoisted_1 = /*#__PURE__*/_createTextVNode(\" Data Cleaning Verification \")\nconst _hoisted_2 = /*#__PURE__*/_createTextVNode(\"Submit\")\nconst _hoisted_3 = /*#__PURE__*/_createTextVNode(\"Clear\")\nconst _hoisted_4 = /*#__PURE__*/_createTextVNode(\"Back\")\n\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  const _component_ion_title = _resolveComponent(\"ion-title\")\n  const _component_yes_no_input = _resolveComponent(\"yes-no-input\")\n  const _component_ion_col = _resolveComponent(\"ion-col\")\n  const _component_DateInput = _resolveComponent(\"DateInput\")\n  const _component_text_input = _resolveComponent(\"text-input\")\n  const _component_ion_row = _resolveComponent(\"ion-row\")\n  const _component_ion_button = _resolveComponent(\"ion-button\")\n  const _component_ion_grid = _resolveComponent(\"ion-grid\")\n  const _component_Layout = _resolveComponent(\"Layout\")\n\n  return (_openBlock(), _createBlock(_component_Layout, null, {\n    default: _withCtx(() => [\n      _createVNode(_component_ion_grid, { class: \"ion-margin-vertical\" }, {\n        default: _withCtx(() => [\n          _createVNode(_component_ion_row, null, {\n            default: _withCtx(() => [\n              _createVNode(_component_ion_col, {\n                class: \"his-card ion-padding\",\n                size: \"10\",\n                offset: \"1\"\n              }, {\n                default: _withCtx(() => [\n                  _createVNode(_component_ion_title, { class: \"ion-text-center ion-margin-vertical ion-padding-bottom bold\" }, {\n                    default: _withCtx(() => [\n                      _hoisted_1\n                    ]),\n                    _: 1\n                  }),\n                  _createVNode(_component_ion_row, { class: \"ion-margin-top ion-margin-bottom\" }, {\n                    default: _withCtx(() => [\n                      _createVNode(_component_ion_col, {\n                        size: \"12\",\n                        class: \"ion-margin-top ion-margin-bottom\"\n                      }, {\n                        default: _withCtx(() => [\n                          _createVNode(_component_yes_no_input, {\n                            modelValue: _ctx.form.cleaningDone,\n                            \"onUpdate:modelValue\": _cache[1] || (_cache[1] = $event => (_ctx.form.cleaningDone = $event)),\n                            inline: \"\"\n                          }, null, 8, [\"modelValue\"])\n                        ]),\n                        _: 1\n                      }),\n                      (_ctx.form.cleaningDone.value === 'Yes')\n                        ? (_openBlock(), _createBlock(_Fragment, { key: 0 }, [\n                            _createVNode(_component_ion_col, {\n                              size: \"12\",\n                              class: \"ion-margin-top ion-margin-bottom\"\n                            }, {\n                              default: _withCtx(() => [\n                                _createVNode(_component_DateInput, {\n                                  modelValue: _ctx.form.date,\n                                  \"onUpdate:modelValue\": _cache[2] || (_cache[2] = $event => (_ctx.form.date = $event)),\n                                  \"max-date\": _ctx.today,\n                                  form: _ctx.form\n                                }, null, 8, [\"modelValue\", \"max-date\", \"form\"])\n                              ]),\n                              _: 1\n                            }),\n                            _createVNode(_component_ion_col, {\n                              size: \"12\",\n                              class: \"ion-margin-top ion-margin-bottom\"\n                            }, {\n                              default: _withCtx(() => [\n                                _createVNode(_component_text_input, {\n                                  modelValue: _ctx.form.provider,\n                                  \"onUpdate:modelValue\": _cache[3] || (_cache[3] = $event => (_ctx.form.provider = $event)),\n                                  form: _ctx.form\n                                }, null, 8, [\"modelValue\", \"form\"])\n                              ]),\n                              _: 1\n                            })\n                          ], 64 /* STABLE_FRAGMENT */))\n                        : _createCommentVNode(\"\", true)\n                    ]),\n                    _: 1\n                  }),\n                  _createVNode(_component_ion_button, {\n                    class: \"ion-margin-top \",\n                    onClick: _ctx.onSubmit,\n                    color: \"success\"\n                  }, {\n                    default: _withCtx(() => [\n                      _hoisted_2\n                    ]),\n                    _: 1\n                  }, 8, [\"onClick\"]),\n                  _createVNode(_component_ion_button, {\n                    class: \"ion-margin-top\",\n                    onClick: _ctx.onClear,\n                    color: \"warning\"\n                  }, {\n                    default: _withCtx(() => [\n                      _hoisted_3\n                    ]),\n                    _: 1\n                  }, 8, [\"onClick\"]),\n                  _createVNode(_component_ion_button, {\n                    class: \"ion-margin-top\",\n                    onClick: _cache[4] || (_cache[4] = $event => (_ctx.$router.back())),\n                    color: \"light\"\n                  }, {\n                    default: _withCtx(() => [\n                      _hoisted_4\n                    ]),\n                    _: 1\n                  })\n                ]),\n                _: 1\n              })\n            ]),\n            _: 1\n          })\n        ]),\n        _: 1\n      })\n    ]),\n    _: 1\n  }))\n}","\nimport { defineComponent, reactive } from \"vue\";\nimport Layout from \"@/apps/EMC/Components/Layout.vue\";\nimport { IonGrid, IonRow, IonCol, IonButton, IonTitle } from \"@ionic/vue\";\nimport { useRouter } from \"vue-router\";\nimport { DTForm } from \"../../interfaces/dt_form_field\";\nimport dayjs from \"dayjs\";\nimport StandardValidations from \"@/components/Forms/validations/StandardValidations\";\nimport { isValidForm, resolveFormValues } from \"../../utils/form\";\nimport { loader } from \"@/utils/loader\";\nimport { DataCleaningReportService } from \"@/apps/ART/services/reports/data_cleaning_report_service\";\nimport TextInput from \"@/apps/EMC/Components/inputs/TextInput.vue\";\nimport DateInput from \"@/apps/EMC/Components/inputs/DateInput.vue\"\nimport YesNoInput from \"@/apps/EMC/Components/inputs/YesNoInput.vue\"; \nimport { alertConfirmation } from \"@/utils/Alerts\";\nimport EventBus from \"@/utils/EventBus\";\nimport { EmcEvents } from \"../../interfaces/emc_event\";\n\nexport default defineComponent({\n  components: {\n    Layout,\n    IonGrid,\n    IonRow,\n    IonCol,\n    IonButton,\n    IonTitle,\n    YesNoInput,\n    DateInput,\n    TextInput\n  },\n  setup() {\n    const router = useRouter();\n    const today = dayjs().format(\"YYYY-MM-DD\");\n    const form = reactive<DTForm>({\n      cleaningDone: {\n        value: \"\",\n        label: \"Cleaning Done\",\n        required: true,\n      },\n      date: {\n        value: \"\",\n        label: \"Date of Cleaning\",\n        validation: async (date, form) => {\n          return form.cleaningDone.value === \"Yes\" &&\n            StandardValidations.required(date)\n        },\n      },\n      provider: {\n        value: \"\",\n        label: \"Verified By\",\n        validation: async (provider, form) => {\n          return form.cleaningDone.value === \"Yes\" &&\n            StandardValidations.required(provider)\n        },\n      },\n    })\n\n    const onSubmit = async () => {\n      if (!(await isValidForm(form))) return\n      loader.show();\n      const data = resolveFormValues(form).formData;\n      const success = await new DataCleaningReportService().saveDataCleaningVerification({\n        'data_cleaning_datetime': data.date,\n        'supervisors': [data.provider],\n      });\n      loader.hide();\n      if (success) {\n        router.back();\n      }\n    }\n\n    const onClear = async () => {\n      if((await alertConfirmation('Are you sure you want to clear all fields?'))) {\n        for(const key in form) {\n          form[key].value = \"\";\n        }\n        EventBus.emit(EmcEvents.ON_CLEAR);\n      }\n    }\n\n    return {\n      form,\n      today,\n      onSubmit,\n      onClear,\n    };\n  },\n});\n","import { render } from \"./DataVerification.vue?vue&type=template&id=83341f92&ts=true\"\nimport script from \"./DataVerification.vue?vue&type=script&lang=ts\"\nexport * from \"./DataVerification.vue?vue&type=script&lang=ts\"\n\nimport \"./DataVerification.vue?vue&type=style&index=0&id=83341f92&lang=css\"\n\nimport exportComponent from \"/home/daniel/local-repos/HIS-Core/node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","import { loadingController } from \"@ionic/vue\";\n\nexport const loader = {\n  /**\n   * show loading spinner\n   * \n   * @param message message to display while loading. default is 'Loading...'\n   * @returns {Promise<void>}\n   */\n  async show(message?: string): Promise<void> {\n    return (await loadingController.create({\n      message: message || \"Loading...\",\n      spinner: 'crescent',\n      translucent: true\n    })).present();\n  },\n\n  /**\n   * hide loading spinner\n   * \n   * @returns {Promise<boolean>}\n   * */\n  async hide(): Promise<boolean> {\n    return loadingController.dismiss();\n  }\n}\n","import { ArtReportService } from \"./art_report_service\";\n\nexport enum CtIndicator {\n    DobMoreThanEnrolledDate = 'DOB MORE THAN DATE ENROLLED',\n    ClientsWithEncountersAfterDeath = 'CLIENTS WITH ENCOUNTERS AFTER DECLARED DEAD',\n    DateEnrolledLessThanEarliestStartDate = 'DATE ENROLLED LESS THAN EARLIEST START DATE',\n    MalesWithFemaleObs = 'MALE CLIENTS WITH FEMALE OBS',\n    PrescriptionWithoutDispensation = 'PRESCRIPTION WITHOUT DISPENSATION',\n    MissingDemographics = 'MISSING DEMOGRAPHICS',\n    MissingStartReasons = 'MISSING START REASONS',\n    MultipleStartReasons = 'MULTIPLE START REASONS',\n    PreArtOrUnknownOutcomes ='PRE ART OR UNKNOWN OUTCOMES',\n}\n\nexport interface DataCleaningVerificationData {\n    'data_cleaning_datetime': string;\n    'supervisors': string[];\n}\n\nexport class DataCleaningReportService extends ArtReportService {\n    constructor() {\n        super()\n    }\n    \n    saveDataCleaningVerification(data: DataCleaningVerificationData) {\n        return ArtReportService.postJson('data_cleaning_confirmation', data)\n    }\n\n    getCleaningToolReport(indicator: CtIndicator) {\n        return this.getReport('art_data_cleaning_tools', { \n            'report_name' : indicator \n        })\n    }\n\n    getEnrolledOnArtBeforeBirth() {\n        return ArtReportService.getJson('enrolled_on_art_before_birth')\n    }\n\n    getIncompleteVisits() {\n        return this.getReport('incomplete_visits', {\n            'tool_name': 'INCOMPLETE VISITS'\n        })\n    }\n}\n"],"sourceRoot":""}