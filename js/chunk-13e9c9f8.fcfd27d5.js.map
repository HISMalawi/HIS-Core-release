{"version":3,"sources":["webpack:///./src/components/Keyboard/KbLayouts.ts","webpack:///./src/components/Keyboard/HisKbConfigurations.ts","webpack:///./src/guidelines/encounter_guidelines.ts","webpack:///./node_modules/cache-loader/dist/cjs.js","webpack:///./src/views/EncounterMixin.vue","webpack:///./node_modules/vue-loader-v16/dist/templateLoader.js","webpack:///./src/components/Forms/HisStandardForm.vue","webpack:///./node_modules/eslint-loader/index.js","webpack:///./src/utils/GuidelineEngine.ts","webpack:///./src/apps/ART/guidelines/staging_guidelines.ts","webpack:///./src/apps/ART/views/encounters/StagingMixin.vue"],"names":["DEFAULT_KEYPAD","VITALS_KEYPAD","DRUG_DISPENSER_KEYPAD","CD4_COUNT_PAD_LO","SYMBOLS","NUMBER_PAD_LO","MONTHLY_DAYS_LO","ALPHABETICAL_LO","QWERTY_LO","CHARACTERS_AND_NUMBERS_LO","NOTE_PAD_KEYBOARD","LOGIN_KEYBOARD","SYMBOLS_CONFIG","NUMBERS_ONLY","NUMBERS_WITH_UNKNOWN","NUMBERS_WITH_ESTIMATE","NUMBERS_WITHOUT_NA_UNKNOWN","NUMBERS","MONTHLY_DAYS","A_TO_Z","QWERTY","KEY_BTN_NAV","btn","keyboard","FlowState","dformat","d","HisDate","toStandardHisDisplayFormat","ENCOUNTER_GUIDELINES","priority","actions","alert","outcomeStartDate","infoActionSheet","name","slot","color","action","GO_TO_PATIENT_DASHBOARD","CHANGE_PATIENT_OUTCOME","CONTINUE","conditions","outcome","startDate","sessionDate","birthDate","CHANGE_SESSION_DATE","selection","providers","encounterName","apiDate","optionsActionSheet","role","modal","value","flowState","SET_PROVIDER","isBdeMode","isBDE","defineComponent","components","HisStandardForm","data","patient","fields","patientID","providerID","facts","ready","watch","handler","route","params","patient_id","parseInt","Store","get","then","patientData","setEncounterFacts","checkEncounterGuidelines","immediate","deep","computed","cancelDestination","patientDashboardUrl","methods","runflowState","state","states","username","split","provider","find","person_id","$router","push","EXIT","gotoPatientDashboard","findings","matchToGuidelines","index","finding","status","program","e","console","error","toastDanger","ProgramService","getSessionDate","getCachedApiDate","getBirthdate","$route","toString","toUpperCase","sort","a","b","usernameA","usernameB","map","p","isEmpty","person","names","latestName","given_name","family_name","toOption","label","other","mapStrToOptions","items","i","path","nextTask","yesNoOptions","toYesNoOption","values","mapOptions","options","option","yesNoUnknownOptions","resolveObs","obs","tag","Object","filter","reduce","accum","cur","Array","isArray","concat","Promise","all","inArray","arr","expression","length","validateSeries","condition","__exports__","render","_ctx","_cache","$props","$setup","$data","$options","_openBlock","_createBlock","_resolveDynamicComponent","formType","skipSummary","activeField","cancelDestinationPath","onOnFinish","onFinish","onFinishAction","onOnIndex","onIndex","TouchScreenForm","emits","props","type","Function","Boolean","default","String","required","formData","computedData","$emit","EstimationFieldType","getYearField","id","showUnknown","primaryFunctions","helpText","appearInSummary","FieldType","TT_TEXT","config","customKeyboard","getMonthField","TT_SELECT","MonthOptions","getDayField","TT_MONTHLY_DAYS","getMonthDurationEstimateField","getAgeEstimateField","TT_NUMBER","keypad","appendLeadingZero","s","getDefaultDate","form","field","datePart","defaultValue","date","year","month","day","validateMinMax","minDate","min","Date","maxDate","max","generateDateFields","refDate","fullDate","yearValue","monthValue","dayValue","dateIsEstimated","yearID","monthID","dayID","ageEstimateID","durationEstimateID","estimation","allowUnknown","ageEstimate","durationEstimate","estimateMonthOrDay","allowUnknownMonthDay","datePartCondition","f","includes","buildHelpTextDate","part","parts","partValues","dpart","wl","undefined","join","init","updateHelpTextOnValue","proxyID","unload","v","validation","c","StandardValidations","match","isNaN","minYear","getYear","summaryMapValue","summaryLabel","_","ref","computedValue","val","computeValue","beforeNext","keyboardActions","valueEstimateCondition","estimateType","estimationFieldType","every","ageEstimateRegex","dayjs","Service","subtract","AGE_ESTIMATE_FIELD","format","STANDARD_DATE_FORMAT","MONTH_ESTIMATE_FIELD","isCondition","ignored","prop","sortByRelevance","guidelines","target","targetEvent","matches","guidelineIndex","targetValidations","some","title","description","text","info","StagingCategory","ADULT_WHO_STAGE_CRITERIA","concept","stage","reasonForArt","reason","CHILD_WHO_STAGE_CRITERIA","CONTRADICTING_STAGE_DEFINITIONS_ALERTS","alertConfirmation","bmi","confirmBtnLabel","cancelBtnLabel","selectedCondition","keepAsymptomatic","selectedConditions","stageThreeConditions","stageFourConditions","stageTwoConditions","RECOMMENDED_CHILD_STAGING_CONDITIONS","isChecked","show","weightPercentile","disabled","RECOMMENDED_ADULT_STAGING_CONDITIONS","CHILD_ART_ELIGIBILITY","ageInMonths","age","pshdConditions","ConceptService","getConceptsByCategory","pshdCondition","testType","cd4","cd4Modifier","modifier","ADULT_ART_ELIGIBILITY","severeSymp","found","total","symp","gender","breastFeeding","answer","pregnant","StagingService","AppEncounterService","constructor","confirmatoryTest","isAdult","isPedaid","setAge","getFacilities","LocationService","getConfirmatoryTestType","cd4CountIsValid","getAlertGuidelines","getWhoStageGuidelines","getProgramEligibilityGuidelines","getRecommendedConditionGuidelines","getStagingConditions","category","getStagingCategoryByNum","buildWhoStageObs","buildValueCoded","buildWhoCriteriaObs","buildReasonForArtObs","stageNumber","ADULT_STAGE_1","PEDAID_STAGE_1","ADULT_STAGE_2","PEDAID_STAGE_2","ADULT_STAGE_3","PEDAID_STAGE_3","ADULT_STAGE_4","PEDAID_STAGE_4","test","getFirstValueCoded","mixins","EncounterMixinVue","staging","showStagingWeightChart","canShowStagingFields","bmiObj","stagingFacts","isChildBearing","stageOneConditions","whoStage","this","getID","getAge","loadHivConfirmatoryTestType","getBMI","isMale","getAgeInMonths","calculateWeightPercentile","computedValues","encounter","createEncounter","stagingObservations","derivedObservations","saveObservationList","ok","updateStagingFacts","curIndex","buildStagingOptions","previouslySelected","conceptFinding","concept_id","setWhoStage","setReasonForArt","notAsymptomatic","stageOneC","stage_1_conditions","asymptomatics","hasTransferLater","has_transfer_letter","hasStaging","getStagingSummaryField","TT_ART_STAGING_SUMMARY","onload","hiddenFooterBtns","isANCclient","getSuspendedProgram","getStagingFields","TT_MULTIPLE_YES_NO","Validation","anyEmpty","factID","pregnancy_status","TT_WEIGHT_CHART","async","getWeightHistory","x","y","weight","TT_MULTIPLE_SELECT","onValue","onStagingCondition","onConditionFalse","charAt","count","substring","buildValueNumber","isCd4","cd4_available","getDate","isEstimate","buildValueDate","getLocationName","buildValueText","showKeyboard","isFilterDataViaApi","facilities","trim","facility","location_id","getLabFacilities","getLabs","getFacilityWards","wards","ward","getSpecialistClinics","clinics","clinic","getRegions","regions","region","region_id","getDistricts","regionID","districts","district","district_id","getTraditionalAuthorities","districtID","TAs","TA","traditional_authority_id","getVillages","traditionalAuthorityID","villages","village","village_id"],"mappings":"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","file":"js/chunk-13e9c9f8.fcfd27d5.js","sourcesContent":["export const DEFAULT_KEYPAD = [\n    ['1', '2', '3'],\n    ['4', '5', '6'],\n    ['7', '8', '9'],\n    ['.', '0', 'Del'],\n    ['',  'Done', '']\n]\nexport const VITALS_KEYPAD = [\n    ['1', '2', '3'],\n    ['4', '5', '6'],\n    ['7', '8', '9'],\n    ['.', '0', 'Del'],\n    ['Clear',  '%', '/']\n]\nexport const DRUG_DISPENSER_KEYPAD = [\n    ['1', '2', '3'],\n    ['4', '5', '6'],\n    ['7', '8', '9'],\n    ['Del.', '0', 'Clear'],\n    // ['Reset',  'Close', 'Dispense']\n]\nexport const CD4_COUNT_PAD_LO = [\n    ['1', '2', '3', '<'],\n    ['4', '5', '6', '>'],\n    ['7', '8', '9', '='],\n    ['',  '0', '']\n]\n\nexport const SYMBOLS = [\n    ['1', '2', '3', '+', '-', '/', '*'],\n    ['4', '5', '6', '%', '=', '<', '>', 'Qwerty'],\n    ['7', '8', '9', '.', ','],\n    ['',  '0', '']\n]\n\nexport const NUMBER_PAD_LO = [\n    ['1', '2', '3'],\n    ['4', '5', '6'],\n    ['7', '8', '9'],\n    ['',  '0', '']\n]\n\nexport const MONTHLY_DAYS_LO = [\n    ['1', '2', '3', '4', '5', '6', '7'],\n    ['8', '9', '10', '11', '12', '13', '14'],\n    ['15', '16', '17', '18', '19', '20', '21'],\n    ['22', '23', '24', '25', '26', '27', '28'],\n    ['29', '30', '31']\n]\n\nexport const ALPHABETICAL_LO = [\n    ['a', 'b', 'c', 'd', 'e', 'f', 'g', 'h', '.'],\n    ['i', 'j', 'k', 'l', 'm', 'n', 'o', 'p', 'q'],\n    ['r', 's', 't', 'u', 'v', 'w', 'x', 'y', 'z']\n]\n\nexport const QWERTY_LO = [\n    ['q', 'w', 'e', 'r', 't', 'y', 'u', 'i', 'o', 'p'],\n    ['a', 's', 'd', 'f', 'g', 'h', 'j', 'k', 'l', \"'\"],\n    ['z', 'x', 'c', 'v', 'b', 'n', 'm',',', '.', 'A-Z']\n]\n\nexport const CHARACTERS_AND_NUMBERS_LO = [\n    ['1', '2', '3', '4', '5', '6', '7', '8', '9', '0'],\n    ['a', 'b', 'c', 'd', 'e', 'f', 'g', 'h', '-', '.'],\n    ['i', 'j', 'k', 'l', 'm', 'n', 'o', 'p', 'q'],\n    ['r', 's', 't', 'u', 'v', 'w', 'x', 'y', 'z']\n]\nexport const NOTE_PAD_KEYBOARD = [\n    ['1', '2', '3', '4', '5', '6', '7', '8', '9', '0', 'Del'],\n    [\"q\", \"w\", \"e\", \"r\", \"t\", \"y\", \"u\", \"i\", \"o\", \"p\", 'Clear'],\n    [\"a\", \"s\", \"d\", \"f\", \"g\", \"h\", \"j\", \"k\", \"l\", \".\", \"Caps\"],\n    [\"z\", \"x\", \"c\", \"v\", \"b\", \"n\", \"m\", \"<\", \">\", \"/\", \"Enter\"], \n]\n\nexport const LOGIN_KEYBOARD =  [\n    [\"1\", \"2\", \"3\", \"4\", \"5\", \"6\", \"7\", \"8\", \"9\", \"0\"],\n    [\"q\", \"w\", \"e\", \"r\", \"t\", \"y\", \"u\", \"i\", \"o\", \"p\"],\n    [\"a\", \"s\", \"d\", \"f\", \"g\", \"h\", \"j\", \"k\", \"l\", \"Del.\"],\n    [\"z\", \"x\", \"c\", \"v\", \"b\", \"n\", \"m\", \"Caps\", \"Login\"],\n];\n","/**\n * Default keyboard configurations.\n * \n * Configuration consists of one or two keyboard layouts\n * to be displayed at once.\n */\n\nimport {\n    NUMBER_PAD_LO,\n    MONTHLY_DAYS_LO,\n    ALPHABETICAL_LO,\n    QWERTY_LO,\n    SYMBOLS,\n} from \"@/components/Keyboard/KbLayouts\";\n\nexport const SYMBOLS_CONFIG = [\n    SYMBOLS,\n    [\n        ['', 'Delete']\n    ]\n]\n\nexport const NUMBERS_ONLY = [\n    NUMBER_PAD_LO,\n    [\n        ['Delete']\n    ]\n]\n\nexport const NUMBERS_WITH_UNKNOWN = [\n    NUMBER_PAD_LO,\n    [\n        ['Delete', 'Unknown']\n    ]\n]\n\nexport const NUMBERS_WITH_ESTIMATE = [\n    NUMBER_PAD_LO,\n    [\n        ['N/A'],\n        ['Delete', 'Unknown']\n    ]\n]\n\nexport const NUMBERS_WITHOUT_NA_UNKNOWN = [\n    NUMBER_PAD_LO,\n    [\n        ['Delete']\n    ]\n]\n\nexport const NUMBERS = [\n    NUMBER_PAD_LO,\n    [\n        ['Unknown', 'Delete'],\n        ['Qwerty', 'A-Z'],\n    ]\n]\n\nexport const MONTHLY_DAYS = [\n    MONTHLY_DAYS_LO,\n    [\n        ['Unknown']\n    ]\n]\n\nexport const A_TO_Z = [\n    ALPHABETICAL_LO,\n    [\n        ['0-9', 'Delete'],\n        ['Qwerty', 'Unknown'],\n        ['', 'Space']\n    ]\n]\n\nexport const QWERTY = [\n    QWERTY_LO,\n    [\n        ['', 'Delete'],\n        ['?123', '0-9'],\n        ['Space', 'Unknown']\n    ]\n]\n\n/**\n * Navigation map for switching between different keyboard layouts\n */\nexport const KEY_BTN_NAV = [\n    {\n        btn: '0-9',\n        keyboard: NUMBERS\n    },\n    {\n        btn: '?123',\n        keyboard: SYMBOLS_CONFIG\n    },\n    {   \n        btn: 'A-Z',\n        keyboard: A_TO_Z \n    },\n    {\n        btn: 'Qwerty',\n        keyboard: QWERTY\n    }\n]\n","import { infoActionSheet, optionsActionSheet } from \"@/utils/ActionSheets\";\nimport { GuideLineInterface } from \"@/utils/GuidelineEngine\";\nimport HisDate from '@/utils/Date'\n\nexport enum FlowState {\n    SET_PROVIDER = 'SET_PROVIDER',\n    CHANGE_SESSION_DATE = 'change_session_date',\n    GO_TO_PATIENT_DASHBOARD = 'go_to_patient_dashboard',\n    CHANGE_PATIENT_OUTCOME = 'change_outcome',\n    CONTINUE = 'continue',\n    EXIT = 'exit'\n}\nconst dformat = (d: string) => HisDate.toStandardHisDisplayFormat(d)\n\nexport const ENCOUNTER_GUIDELINES: Record<string, GuideLineInterface> = {\n    \"Warn if attempting to create new encounters for a deceased patient\": {\n        priority: 1,\n        actions: {\n            alert: async ({ outcomeStartDate }: any) => {\n                const action = await infoActionSheet(\n                    'Data Integrity Issue Found',\n                    `Patient died on ${dformat(outcomeStartDate)}`,\n                    'Proceeding with this outcome might affect accuracy of some reports',\n                    [\n                        { name: 'Cancel', slot: 'end', color: 'primary'},\n                        { name: 'Change outcome', slot: 'end', color: 'primary'},\n                        { name: 'Continue Anyway', slot: 'end', color: 'danger'}\n                    ]\n                )\n                return action === 'Cancel'\n                    ? FlowState.GO_TO_PATIENT_DASHBOARD\n                    : action === 'Change outcome'\n                    ? FlowState.CHANGE_PATIENT_OUTCOME\n                    : FlowState.CONTINUE\n            }\n        },\n        conditions: {\n            outcome(outcome: string) {\n                return outcome === 'Patient died'\n            },\n            outcomeStartDate(startDate: string, { sessionDate }: any) {\n                return sessionDate >= startDate\n            }\n        }\n    },\n    \"A patient's date of birth must not be less than Session Date\": {\n        priority: 2,\n        actions: {\n            alert: async ({ birthDate, sessionDate}: any) => {\n                const action = await infoActionSheet(\n                    'Data integrity issue found', '',\n                    `Session date ${dformat(sessionDate)} is less than birth date of ${dformat(birthDate)}`,\n                    [\n                        { name: 'Cancel', slot: 'end', color: 'danger'},\n                        { name: 'Change session date', slot: 'end', color: 'success'}\n                    ]\n                )\n                return action === 'Change session date'\n                    ? FlowState.CHANGE_SESSION_DATE\n                    : FlowState.GO_TO_PATIENT_DASHBOARD\n            }\n        },\n        conditions: {\n            birthDate(birthDate: string, { sessionDate }: any) {\n                return sessionDate < birthDate\n            }\n        }\n    },\n    \"Select Encounter provider when in back data entry\": {\n        priority: 3,\n        actions: {\n            selection: async ({ providers, encounterName, sessionDate, apiDate }: any) => {\n                const modal = await optionsActionSheet(\n                    `Please select a provider for ${encounterName}`,\n                    `BDE: ${dformat(sessionDate)} | Current: ${dformat(apiDate)}`,\n                    providers,\n                    [\n                        { name: 'Cancel', color: 'danger', slot: 'start', role: 'default'},\n                        { name: 'Confirm', slot: 'end', role: 'action' }\n                    ]\n                )\n                return modal.action === 'Cancel' \n                    ? { value: -1, flowState: FlowState.GO_TO_PATIENT_DASHBOARD }\n                    : { value: modal.selection, flowState: FlowState.SET_PROVIDER }\n            }\n        },\n        conditions: {\n            isBdeMode(isBDE: boolean) {\n                return isBDE\n            }\n        }\n    }\n}","\nimport { defineComponent } from 'vue'\nimport { FieldType } from \"@/components/Forms/BaseFormElements\"\nimport { Field, Option } from \"@/components/Forms/FieldInterface\"\nimport { StagingService } from \"@/apps/ART/services/staging_service\"\nimport EncounterMixinVue from '../../../../views/EncounterMixin.vue'\nimport Validation from \"@/components/Forms/validations/StandardValidations\"\nimport { generateDateFields } from \"@/utils/HisFormHelpers/MultiFieldDateHelper\"\nimport HisDate from \"@/utils/Date\"\nimport { isEmpty } from \"lodash\"\nimport { CD4_COUNT_PAD_LO } from \"@/components/Keyboard/KbLayouts\"\nimport { matchToGuidelines } from \"@/utils/GuidelineEngine\"\nimport {\n    getFacilities\n} from '@/utils/HisFormHelpers/LocationFieldOptions'\n\nexport default defineComponent({\n    mixins: [EncounterMixinVue],\n    data: () => ({\n        staging: {} as any,\n        showStagingWeightChart: true,\n        canShowStagingFields: true as boolean,\n        bmiObj: {} as any, \n        stagingFacts : {\n            age: -1 as number,\n            bmi: -1 as number,\n            gender: '' as 'M' | 'F',\n            stage: -1 as number,\n            cd4: -1 as number,\n            date: '' as string,\n            isChildBearing: false as boolean,\n            stageOneConditions: [] as Array<string>,\n            stageTwoConditions: [] as Array<string>,\n            stageThreeConditions: [] as Array<string>,\n            stageFourConditions: [] as Array<string>,\n            reasonForArt: '' as string,\n            testType: '' as string,\n            pregnant: '' as 'Yes' | 'No',\n            breastFeeding: '' as 'Yes' | 'No',\n            selectedCondition: '' as string,\n            selectedConditions: [] as Array<string>,\n            weightPercentile: -1 as number,\n            ageInMonths: -1 as number,\n            cd4Modifier: '' as string,\n            whoStage: '' as string\n        }\n    }),\n    watch: {\n        ready : {\n            handler(v) {\n                if (v) {\n                    this.staging = new StagingService(this.patient.getID(), this.patient.getAge(), this.providerID)\n                }\n            },\n            immediate: true\n        }\n    },\n    methods: {\n        async initStaging(patient: any) {\n            await this.staging.loadHivConfirmatoryTestType()\n            this.bmiObj = await patient.getBMI()\n            this.stagingFacts.age = patient.getAge()\n            this.stagingFacts.bmi = this.bmiObj['index']\n            this.stagingFacts.date = StagingService.getSessionDate()\n            this.stagingFacts.gender = patient.isMale() ? 'M' : 'F' \n            this.stagingFacts.testType = this.staging.getConfirmatoryTestType()\n            this.stagingFacts.ageInMonths = patient.getAgeInMonths()\n            this.stagingFacts.isChildBearing = patient.isChildBearing()\n\n            if (this.staging.isPedaid()) {\n                this.stagingFacts.weightPercentile = await patient.calculateWeightPercentile()\n            }\n        },\n        async submitStaging(computedValues: any) {\n            const encounter = await this.staging.createEncounter()\n\n            if (!encounter) throw 'Unable to create staging encounter'\n\n            const stagingObservations = await this.resolveObs(computedValues, 'staging')\n            const derivedObservations = await Promise.all([\n                this.buildReasonForArtObs(), this.buildWhoStageObs()\n            ])\n\n            const obs = await this.staging.saveObservationList([\n                ...stagingObservations, ...derivedObservations\n            ])\n\n            if (!obs) throw 'Unable to save patient observations'\n        },\n        async onStagingCondition({ label }: Option) {\n            this.stagingFacts.selectedCondition = label\n \n            const guidelines =  this.staging.getAlertGuidelines()\n            const findings = matchToGuidelines(this.stagingFacts, guidelines)\n\n            if (isEmpty(findings)) \n                return true\n\n            if (findings[0]?.actions && findings[0]?.actions.alert) {\n                const ok = await findings[0]?.actions.alert(this.stagingFacts)\n                return ok ? true : false\n            }\n            return true\n        },\n        getFacilities(filter='') {\n            return getFacilities(filter)\n        },\n        updateStagingFacts() {\n            const conditions = [\n                this.stagingFacts.stageOneConditions,\n                this.stagingFacts.stageTwoConditions,\n                this.stagingFacts.stageThreeConditions,\n                this.stagingFacts.stageFourConditions, \n            ]\n            this.stagingFacts.stage = conditions.reduce(\n                (stage, conditions: string[], curIndex) =>\n                    isEmpty(conditions) ? stage : curIndex + 1\n                , 0)\n            this.stagingFacts.selectedConditions = conditions.reduce(\n                (accum, cur) => accum.concat(cur), []\n            )\n        },\n        buildReasonForArtObs() {\n            return this.staging.buildReasonForArtObs(this.stagingFacts.reasonForArt)\n        },\n        buildWhoStageObs() {\n            return this.staging.buildWhoStageObs(this.stagingFacts.whoStage)\n        },\n        buildStagingOptions(stage: number, previouslySelected=[] as Array<string>) {\n            const guidelines = this.staging.getRecommendedConditionGuidelines()\n\n            return this.staging.getStagingConditions(stage).map((concept: any) => {\n                let disabled = false\n                let description: unknown\n                let isChecked = previouslySelected.includes(concept.name)\n                this.stagingFacts.selectedCondition = concept.name\n\n                const findings = matchToGuidelines(this.stagingFacts, guidelines)\n\n                if (!isEmpty(findings)) {\n                    const conceptFinding = findings[0] //get the first item only\n                    if (conceptFinding?.actions?.isChecked) {\n                        isChecked = true\n                    }\n                    if (conceptFinding?.actions?.disabled) {\n                        disabled = true\n                    }\n                    description = conceptFinding.description\n                }\n                return {\n                    label: concept.name,\n                    value: concept.concept_id,\n                    isChecked,\n                    disabled,\n                    description\n                }\n            })\n        },\n        setWhoStage() {\n            const guidelines = this.staging.getWhoStageGuidelines()\n            const findings = matchToGuidelines(this.stagingFacts, guidelines)\n            this.stagingFacts.whoStage = findings[0]?.concept || ''\n        },\n        setReasonForArt() {\n            const guidelines = this.staging.getProgramEligibilityGuidelines()\n            const findings = matchToGuidelines(this.stagingFacts, guidelines)\n            this.stagingFacts.reasonForArt = findings[0]?.concept || ''\n        },\n        notAsymptomatic(f: any) {\n            const stageOneC = f.stage_1_conditions\n            if (stageOneC) {\n                const asymptomatics = stageOneC.filter((i: Option) => {\n                    return i.label.match(/asymptomatic/i) && i.isChecked\n                })\n                return isEmpty(asymptomatics)\n            }\n            return true\n        },\n        hasTransferLater(f: Record<string, any>): boolean {\n            if ('has_transfer_letter' in f) {\n                return f.has_transfer_letter && f.has_transfer_letter.value === 'Yes'\n            }\n            return false\n        },\n        hasStaging(f: Record<string, any>) {\n            // For components that have Optional staging\n            if (this.hasTransferLater(f)) {\n                return true\n            }\n            return this.canShowStagingFields\n        },\n        getStagingSummaryField(helpText=\"Summary\" as string) {\n            return {\n                id: 'summary',\n                helpText,\n                type: FieldType.TT_ART_STAGING_SUMMARY,\n                condition: (f: any) => this.hasStaging(f),\n                onload: () => {\n                    this.setReasonForArt()\n                    this.setWhoStage()\n                },\n                options: () => [\n                    { \n                        label: 'WHO Stage', \n                        value: this.stagingFacts.whoStage,\n                        other: {\n                            type: 'title-section'\n                        }\n                    },\n                    { \n                        label: 'Condition on starting ART', \n                        value: this.stagingFacts.reasonForArt,\n                        other: {\n                            type: 'title-section'\n                        } \n                    },\n                    ...this.stagingFacts.selectedConditions.map((i: string) => ({ label: i, value: i }))\n                ],\n                config: {\n                    title: 'Selected stage defining conditions',\n                    hiddenFooterBtns: [\n                        'Clear'\n                    ]\n                }\n            }\n        },\n        isANCclient() {\n            return StagingService.getSuspendedProgram() === 'ANC'\n        },\n        getStagingFields(): Array<Field> {\n            return [\n                {\n                    id: 'pregnancy_status',\n                    helpText: 'Pregnant / Breastfeeding',\n                    type: FieldType.TT_MULTIPLE_YES_NO,\n                    validation: (v: any) => Validation.anyEmpty(v),\n                    summaryMapValue: (d: Option) => ({ \n                        label: d.label, \n                        value: d.value \n                    }),\n                    computedValue: (data: Array<Option>, f: Record<string, any>) => {\n                        let obs = []\n                        // For ANC clients, mark pregnancy status as 'Yes' always!!\n                        // The assumption here is also that the pregnancy option is not available for selection\n                        if (this.isANCclient() && !this.hasTransferLater(f)) {\n                            this.stagingFacts['pregnant'] = 'Yes' \n                            obs.push(this.staging.buildValueCoded('Is patient pregnant', 'Yes'))\n                        }\n                        obs = obs.concat(data.map(d => {\n                            const  { value, other } = d\n\n                            const factID: 'pregnant' | 'breastFeeding' = other.factID\n\n                            this.stagingFacts[factID] = `${value}`.match(/Yes/i) ? 'Yes' : 'No'\n\n                            return this.staging.buildValueCoded(other.concept, value)\n                        }))\n                        return {\n                            obs,\n                            tag: 'staging'\n                        }\n                    },\n                    options: (f: any) => {\n                        if (!isEmpty(f.pregnancy_status)) {\n                            return f.pregnancy_status\n                        } else {\n                            const options = []\n                            // Hide pregnancy option for ANC clients who are not transferr in\n                            if (!this.isANCclient() || this.hasTransferLater(f)) {\n                                options.push({\n                                    label: 'Pregnant?',\n                                    value: '',\n                                    other: {\n                                        values: this.yesNoOptions(),\n                                        concept: 'Is patient pregnant',\n                                        factID: 'pregnant'\n                                    }\n                                })\n                            }\n                            options.push({\n                                label: 'Breastfeeding?',\n                                value: '',\n                                other: {\n                                    values: this.yesNoOptions(),\n                                    concept: 'Is patient breast feeding',\n                                    factID: 'breastFeeding'\n                                }\n                            })\n                            return options\n                        }\n                    },\n                    condition: (f: any) => this.hasStaging(f) && this.stagingFacts.isChildBearing,\n                },\n                {\n                    id: 'patient_weight_chart',\n                    helpText: 'Weight history',\n                    type: FieldType.TT_WEIGHT_CHART,\n                    options: async () => {\n                        let values = await this.patient.getWeightHistory()\n                        values = values.map((d: any) => ({ \n                            x: HisDate.toStandardHisDisplayFormat(d.date), \n                            y: d.weight\n                        }))\n                        return [\n                            {\n                                label: \"Weight for patient\",\n                                value: \"Weight trail\",\n                                other: {\n                                    values,\n                                    age: this.patient.getAge(),\n                                    bmi: this.bmiObj\n                                }\n                            }\n                        ]\n                    },\n                    config: {\n                        hiddenFooterBtns: [\n                            'Clear'\n                        ]\n                    },\n                    condition: (f: any) => this.hasStaging(f) && this.showStagingWeightChart\n                },\n                {\n                    id: 'stage_4_conditions',\n                    helpText: 'Stage 4 conditions',\n                    type: FieldType.TT_MULTIPLE_SELECT,\n                    options: () => this.buildStagingOptions(4, this.stagingFacts.stageFourConditions),\n                    onValue: (v: Option) => this.onStagingCondition(v),\n                    computedValue: (d: Array<Option>) => {\n                        return {\n                            tag: 'staging',\n                            obs: d.map(i => this.staging.buildWhoCriteriaObs(i.label))\n                        }\n                    },\n                    unload: (d: Option[]) => {\n                        this.stagingFacts.stageFourConditions = d.map(i => i.label)\n                        this.updateStagingFacts()\n                    },\n                    onConditionFalse: () => {\n                        this.stagingFacts.stageFourConditions = []\n                        this.updateStagingFacts()\n                    },\n                    condition: (f: any) => this.hasStaging(f) && this.notAsymptomatic(f),\n                },\n                {\n                    id: 'stage_3_conditions',\n                    helpText: 'Stage 3 conditions',\n                    type: FieldType.TT_MULTIPLE_SELECT,\n                    options: () => this.buildStagingOptions(3, this.stagingFacts.stageThreeConditions),\n                    onValue: (v: Option) => this.onStagingCondition(v),\n                    computedValue: (d: Array<Option>) => {\n                        return {\n                            tag: 'staging',\n                            obs: d.map(i => this.staging.buildWhoCriteriaObs(i.label))\n                        }\n                    },\n                    unload: (d: Option[]) => {\n                        this.stagingFacts.stageThreeConditions = d.map(i => i.label)\n                        this.updateStagingFacts()\n                    },\n                    onConditionFalse: () => {\n                        this.stagingFacts.stageThreeConditions = []\n                        this.updateStagingFacts()\n                    },\n                    condition: (f: any) => this.hasStaging(f) && this.notAsymptomatic(f),\n                },\n                {\n                    id: 'stage_2_conditions',\n                    helpText: 'Stage 2 conditions',\n                    type: FieldType.TT_MULTIPLE_SELECT,\n                    options: () => this.buildStagingOptions(2, this.stagingFacts.stageTwoConditions),\n                    onValue: (v: Option) => this.onStagingCondition(v),\n                    computedValue: (d: Option[]) => {\n                        return {\n                            tag: 'staging',\n                            obs: d.map(i => this.staging.buildWhoCriteriaObs(i.label))\n                        }\n                    },\n                    unload: (d: Option[]) => {\n                        this.stagingFacts.stageTwoConditions = d.map(i => i.label)\n                        this.updateStagingFacts()\n                    },\n                    onConditionFalse: () => {\n                        this.stagingFacts.stageTwoConditions = []\n                        this.updateStagingFacts()\n                    },\n                    condition: (f: any) => this.hasStaging(f) && this.notAsymptomatic(f),\n                },\n                {\n                    id: 'stage_1_conditions',\n                    helpText: 'Stage 1 conditions',\n                    type: FieldType.TT_MULTIPLE_SELECT,\n                    validation: (val: any) => {\n                        if (isEmpty(val) && isEmpty(this.stagingFacts.selectedConditions))\n                            return ['Please provide atleast one staging condition']\n                    },\n                    options: () => this.buildStagingOptions(1, this.stagingFacts.stageOneConditions),\n                    onValue: (v: Option) => this.onStagingCondition(v),\n                    computedValue: (d: Array<Option>) => {\n                        const data = d.map(i => i.label)\n                        this.stagingFacts.stageOneConditions = data\n                        this.updateStagingFacts()\n                        return {\n                            tag: 'staging',\n                            obs: data.map(i => this.staging.buildWhoCriteriaObs(i))\n                        }\n                    },\n                    condition: (f: any) => this.hasStaging(f),\n                },\n                {\n                    id: 'cd4_available',\n                    helpText: 'Recent CD4 count results available?',\n                    type: FieldType.TT_SELECT,\n                    condition: (f: any) => this.hasStaging(f),\n                    validation: (val: any) => Validation.required(val),\n                    options: () => this.yesNoOptions()\n                },\n                {\n                    id: 'cd4_count',\n                    helpText: 'CD4 Count',\n                    type: FieldType.TT_TEXT,\n                    computedValue: (d: Option) => {\n                        const value = d.value.toString()\n                        const modifier = value.charAt(0)\n                        const count = parseInt(value.substring(1))\n                        return {\n                            tag: 'staging',\n                            modifier,\n                            count,\n                            obs: this.staging.buildValueNumber(\n                                'CD4 count', count, modifier\n                            )\n                        }\n                    },\n                    unload: (d: any, s: any, f: any, computedData: any) => {\n                        const { count, modifier } = computedData['cd4_count']\n                        this.stagingFacts.cd4 = count\n                        this.stagingFacts.cd4Modifier = modifier\n                    },\n                    onConditionFalse: () => {\n                        this.stagingFacts.cd4 = -1\n                        this.stagingFacts.cd4Modifier = ''\n                    },\n                    validation: (val: any) => {\n                        const isCd4 = () => this.staging.cd4CountIsValid(val.value)\n                        return this.validateSeries([\n                            () => Validation.required(val),\n                            () => !isCd4() ? ['Please start with either modifier first: >, <, or ='] : null\n                        ])\n                    },\n                    config: {\n                        customKeyboard: [\n                            CD4_COUNT_PAD_LO,\n                            [\n                                ['Unknown', 'Delete']\n                            ]\n                        ]\n                    },\n                    condition: (f: any) => this.hasStaging(f) && f.cd4_available.value === 'Yes',\n                },\n                ...generateDateFields({\n                    id: 'cd4_result_date',\n                    helpText: 'Cd4 Results',\n                    required: true,\n                    minDate: () => this.patient.getBirthdate(),\n                    maxDate: () => this.staging.getDate(),\n                    condition: (f: any) =>  this.hasStaging(f) && f.cd4_available.value === 'Yes',\n                    estimation: {\n                        allowUnknown: false\n                    },\n                    computeValue: (date: string, isEstimate: boolean) => {\n                        return {\n                            date,\n                            tag: 'staging',\n                            isEstimate,\n                            obs: this.staging.buildValueDate('Cd4 count datetime', date) \n                        }\n                    }\n                }, this.staging.getDate()),\n                {\n                    id: 'location',\n                    helpText: 'CD4 Location',\n                    type: FieldType.TT_SELECT,\n                    defaultValue: () => StagingService.getLocationName(),\n                    computedValue: ({ label }: Option) => ({\n                        tag: 'staging',\n                        obs: this.staging.buildValueText('Cd4 count location', label)\n                    }),\n                    validation: (val: any) => Validation.required(val),\n                    options: (_, filter='') => this.getFacilities(filter),\n                    config: {\n                        showKeyboard: true,\n                        isFilterDataViaApi: true\n                    },\n                    condition: (f: any) => this.hasStaging(f) && f.cd4_available.value === 'Yes',\n                }\n            ]\n        }\n    }\n})\n","import script from \"./EncounterMixin.vue?vue&type=script&lang=ts\"\nexport * from \"./EncounterMixin.vue?vue&type=script&lang=ts\"\n\nconst __exports__ = script;\n\nexport default __exports__","import { resolveDynamicComponent as _resolveDynamicComponent, openBlock as _openBlock, createBlock as _createBlock } from \"vue\"\n\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  return (_openBlock(), _createBlock(_resolveDynamicComponent(_ctx.formType), {\n    fields: _ctx.fields,\n    skipSummary: _ctx.skipSummary,\n    activeField: _ctx.activeField,\n    cancelDestinationPath: _ctx.cancelDestinationPath,\n    onOnFinish: _ctx.onFinish,\n    onFinish: _ctx.onFinishAction,\n    onOnIndex: _ctx.onIndex\n  }, null, 8, [\"fields\", \"skipSummary\", \"activeField\", \"cancelDestinationPath\", \"onOnFinish\", \"onFinish\", \"onOnIndex\"]))\n}","import { render } from \"./HisStandardForm.vue?vue&type=template&id=6daa0375&ts=true\"\nimport script from \"./HisStandardForm.vue?vue&type=script&lang=ts\"\nexport * from \"./HisStandardForm.vue?vue&type=script&lang=ts\"\n\nimport exportComponent from \"/home/andrew-dev/Projects/HIS-Core/node_modules/vue-loader-v16/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","import {LocationService} from \"@/services/location_service\"\nimport { Option } from \"@/components/Forms/FieldInterface\"\nimport { isEmpty } from \"lodash\"\n\nexport async function getFacilities(filter=''): Promise<Option[]> {\n    const facilities = await LocationService.getFacilities({name: filter})\n    return facilities.filter((f: any) => !isEmpty(f) && f.name.trim() !='')\n        .map((facility: any) => ({\n            label: facility.name,\n            value: facility.location_id,\n            other: facility\n        }))\n}\n\nexport async function getLabFacilities(filter=''): Promise<Option[]> {\n    const facilities = await LocationService.getLabs({'search_name': filter})\n    return facilities.map((facility: any) => ({\n            label: facility,\n            value: facility\n        }))\n}\n\nexport async function getFacilityWards(filter=''): Promise<Option[]> {\n    const wards = await LocationService.getFacilities({\n        name: filter,\n        tag: 'Facility adult sections'\n    })\n\n    return wards.map((ward: any) => ({\n        label: ward.name,\n        value: ward.name,\n        other: ward\n    }))\n}\n\nexport async function getSpecialistClinics(): Promise<Option[]> {\n    const clinics = await LocationService.getSpecialistClinics()\n    return clinics.map((clinic: any) => ({\n        label: clinic.name,\n        value: clinic.name,\n        other: clinic\n    }))\n}\n\nexport async function getRegions(): Promise<Option[]> {\n    const regions = await LocationService.getRegions()\n    return regions.map((region: any) => ({\n        label: region.name,\n        value: region.region_id,\n        other: region\n    }))\n}\n\nexport async function getDistricts(regionID: number): Promise<Option[]> {\n    const districts = await LocationService.getDistricts(regionID)\n    return districts.map((district: any) => ({\n        label: district.name,\n        value: district.district_id,\n        other: district\n    }))\n}\n\nexport async function getTraditionalAuthorities(districtID: number, name=''): Promise<Option[]> {\n    const TAs = await LocationService.getTraditionalAuthorities(districtID, name)\n    return TAs.map((TA: any) => ({\n        label: TA.name,\n        value: TA.traditional_authority_id,\n        other: TA\n    }))\n}\n\nexport async function getVillages(traditionalAuthorityID: number, name=''): Promise<Option[]> {\n    const villages = await LocationService.getVillages(traditionalAuthorityID, name)\n    return villages.map((village: any) => ({\n        label: village.name,\n        value: village.village_id,\n        other: village\n    }))\n}\n","/**\n * Compares patient facts against a predefined guideline Object.\n*/\nexport interface DescriptionInterface {\n    color?: 'primary' | 'secondary' | 'danger' | 'warning';\n    info: Function;\n    text?: string;\n    show: 'onChecked' | 'always';\n}\n\nexport interface GuideLineInterface {\n    title?: string;\n    concept?: string;\n    priority: number;\n    conditions: Record<string, Function>;\n    actions?: Record<string, any>; //TODO: should <key, Function>\n    data?: Record<string, any>;\n    description?: DescriptionInterface;\n    target?: string;\n    targetEvent?: string;\n}\n\n/**\n * Match the facts with guidelines\n * @param facts \n * @param conditions \n * @returns \n */\nfunction isCondition(facts: Record<string, any>, conditions: Record<string, Function>): boolean {\n    const state = [] \n    const ignored = [-1, '', null, undefined]\n\n    for(const prop in conditions) {\n        if (!(prop in facts)) \n            continue\n        \n        const value = facts[prop]\n        if (ignored.includes(value)) {\n            state.push(false)\n            continue\n        }\n\n        state.push(conditions[prop](value, facts))\n    }\n    return state.every(Boolean)\n}\n\n/**\n * Sort guidelines in the order of importance/relevance\n * @param findings \n * @returns \n */\nfunction sortByRelevance(findings: Array<GuideLineInterface>) {\n    return findings.sort((a, b) => a.priority < b.priority ? -1 : 1)\n}\n\n/**\n * Check the guideline for matching facts and return matching object \n * @param facts: key value pair for used for searching in guidelines\n * @param guidelines: A dictionary containing fixed rules/validations that conforms to GuideLineInterface\n * @param target: Used for matching a target defined in a guidlines before executing conditions\n * @param targetEvent: used for matching a target event in a guideline before executing conditions\n * @returns\n */\nexport function matchToGuidelines(\n    facts: Record<string, any>, \n    guidelines: Record<string, GuideLineInterface>,\n    target='', \n    targetEvent=''): Array<GuideLineInterface> {\n\n    const matches = []\n    for(const guidelineIndex in guidelines) {\n        const data: GuideLineInterface = guidelines[guidelineIndex]\n \n        const targetValidations = [\n            (data.target && target && data.target != target),\n            (data.targetEvent && targetEvent \n                && data.targetEvent != targetEvent)\n        ]\n\n        if (targetValidations.some(Boolean)) {\n            continue\n        }\n\n        if (isCondition(facts, data.conditions)) {\n            data.title = guidelineIndex\n            if (data.description) {\n                data.description.text = data.description.info(facts)\n            }\n            matches.push(data)\n        }\n    }\n    return sortByRelevance(matches)\n}\n","import { ConceptService } from \"@/services/concept_service\"\nimport { alertConfirmation } from \"@/utils/Alerts\"\nimport { GuideLineInterface } from \"@/utils/GuidelineEngine\"\n\nexport const ADULT_WHO_STAGE_CRITERIA: Record<string, GuideLineInterface> = {\n    'Adults with stage 4 conditions': {\n        concept: 'WHO STAGE IV ADULT',\n        priority: 1,\n        conditions: {\n            stage: (stage: number) => stage === 4,\n        }\n    },\n    'Classify as stage 4 when reason for ART is WHO STAGE 4': {\n        concept: 'WHO STAGE IV ADULT',\n        priority: 2,\n        conditions: {\n            reasonForArt: (reason: string) => reason === 'WHO STAGE IV ADULT'\n        }\n    },\n    'Adults with stage 3 conditions': {\n        concept: 'WHO STAGE III ADULT',\n        priority: 3,\n        conditions: {\n            stage: (stage: number) => stage === 3\n        }\n    },\n    'Adults with stage 2 conditions': {\n        concept: 'WHO STAGE II ADULT',\n        priority: 4,\n        conditions: {\n            stage: (stage: number) => stage === 2,\n        }\n    },\n    'Adults with stage 1 conditions': {\n        concept: 'WHO STAGE I ADULT',\n        priority: 5,\n        conditions: {\n            stage: (stage: number) => stage === 1\n        }\n    }\n}\n\nexport const CHILD_WHO_STAGE_CRITERIA: Record<string, GuideLineInterface> = {\n    'Children with stage 4 conditions': {\n        concept: 'WHO STAGE IV PEDS',\n        priority: 1,\n        conditions: {\n            stage: (stage: number) => stage === 4,\n        }\n    },\n    'Classify as stage 4 when reason for ART is WHO STAGE 4': {\n        concept: 'WHO STAGE IV PEDS',\n        priority: 2,\n        conditions: {\n            reasonForArt: (reason: string) => reason === 'WHO STAGE IV PEDS'\n        }\n    },\n    'For children with stage 3 conditions': {\n        concept: 'WHO STAGE III PEDS',\n        priority: 3,\n        conditions: {\n            stage: (stage: number) => stage === 3\n        }\n    },\n    'Children with stage 2 conditions': {\n        concept: 'WHO STAGE II PEDS',\n        priority: 4,\n        conditions: {\n            stage: (stage: number) => stage === 2\n        }\n    },\n    'Children with stage 1 conditions': {\n        concept: 'WHO STAGE I PEDS',\n        priority: 5,\n        conditions: {\n            stage: (stage: number) => stage === 1\n        }\n    }\n}\n\nexport const CONTRADICTING_STAGE_DEFINITIONS_ALERTS: Record<string, GuideLineInterface> = {\n    \"Warn if Severe weight loss is selected when actual patient BMI is acceptable\": {\n        priority: 1,\n        actions: {\n            alert: async (facts: any) => await alertConfirmation(`Patient's BMI of ${facts.bmi} greater than 18.5, do you wish to proceed?`, {\n                confirmBtnLabel: 'Yes, keep severe weightloss',\n                cancelBtnLabel: 'No, cancel'\n            }),\n        },\n        conditions: {\n            selectedCondition (condition: string) {\n                return condition === 'Severe weight loss >10% and/or BMI <18.5kg/m^2, unexplained'\n            },\n            bmi:(bmi: number) => bmi > 18.5\n        }\n    },\n    \"Warn for contradicting stage defining conditions\": {\n        priority: 1,\n        actions: {\n            alert: async (facts: any) => {\n                const keepAsymptomatic = await alertConfirmation('CONTRADICTING STAGE DEFINING CONDITIONS', {\n                    confirmBtnLabel: \"Keep Asymptomatic\",\n                    cancelBtnLabel: 'Keep other(s)'\n                })\n                if(keepAsymptomatic) {\n                    facts.stage = 1\n                    facts.selectedConditions = []\n                    facts.stageThreeConditions = []\n                    facts.stageFourConditions = []\n                    facts.stageTwoConditions = []\n                    return true\n                }\n                return false\n            },\n        },\n        conditions: {\n            selectedCondition(condition: string){\n                return condition === 'Asymptomatic HIV infection'\n            },\n            stage: (stage: number) => stage >= 2\n        }\n    },\n}\n\nexport const RECOMMENDED_CHILD_STAGING_CONDITIONS: Record<string, GuideLineInterface> = {\n    'For children whose current weight percentile is less than 70' : {\n        priority: 1,\n        actions: {\n            isChecked: true\n        },\n        description: {\n            color: 'danger',\n            show: 'always',\n            info: (facts: any) => `Child has a low weight percentile of ${facts.weightPercentile}`\n        },\n        conditions: {\n            selectedCondition(condition: string) {\n                return condition === 'Severe unexplained wasting or malnutrition not responding to treatment (weight-for-height/ -age <70% or MUAC less than 11cm or oedema)'\n            },\n            weightPercentile(weightPercentile: number){\n                return weightPercentile < 70\n            }\n        }\n    },\n    'Enable Moderate unexplained malnutrition for children whose weight for height is 70-79%': {\n        priority: 1,\n        actions: {\n            isChecked: true\n        },\n        description: {\n            color: 'danger',\n            show: 'always',\n            info: (facts: any) => `Child has weight percentile of ${facts.weightPercentile}`\n        },\n        conditions: {\n            selectedCondition(condition: string) {\n                return condition === 'Moderate unexplained wasting/malnutrition not responding to treatment (weight-for-height/ -age 70-79% or muac 11-12 cm)'\n            },\n            weightPercentile(weightPercentile: number){\n                return weightPercentile >= 70 && weightPercentile <= 79\n            }\n        }\n    },\n    'Disable moderate weight loss when Severe unexplained weight loss is chosen': {\n        priority: 2,\n        actions: {\n            isChecked: false,\n            disabled: true\n        },\n        description: {\n            color: 'secondary',\n            show: 'always',\n            info: () => 'Severe weight loss/manutrition was already selected',\n        },\n        conditions: {\n            selectedCondition(condition: string) {\n                return condition === 'Moderate unexplained wasting/malnutrition not responding to treatment (weight-for-height/ -age 70-79% or muac 11-12 cm)'\n            },\n            selectedConditions(conditions: Array<string>) {\n                return conditions.includes('Severe unexplained wasting or malnutrition not responding to treatment (weight-for-height/ -age <70% or MUAC less than 11cm or oedema)')\n            }\n        }\n    }\n}\n\nexport const RECOMMENDED_ADULT_STAGING_CONDITIONS: Record<string, GuideLineInterface> = {\n    'Adults with a BMI less than 16': {\n        priority: 1,\n        actions: {\n            isChecked: true\n        },\n        description: {\n            color: 'danger',\n            show: 'always',\n            info: (facts: any) => `Adult has a low BMI of ${facts.bmi}`\n        },\n        conditions: {\n            selectedCondition(condition: string) {\n                return condition === 'Severe weight loss >10% and/or BMI <18.5kg/m^2, unexplained'\n            },\n            bmi: (bmi: number) => bmi < 16\n        }\n    },\n    'Adults whose BMI is between 16 and 18': {\n        priority: 3,\n        actions: {\n            isChecked: true\n        },\n        description: {\n            color: 'warning',\n            show: 'onChecked',\n            info: (facts: any) => `BMI of ${facts.bmi} is between 16 and 18`,\n        },\n        conditions: {\n            selectedCondition: (condition: string) => condition === 'Moderate weight loss less than or equal to 10 percent, unexplained',\n            bmi: (bmi: number) => bmi >= 16.0 && bmi <= 18.5\n        }\n    },\n    \"Disable Moderate weight loss if severe weightloss is selected\": {\n        priority: 2,\n        actions: {\n            isChecked: false,\n            disabled: true\n        },\n        description: {\n            color: 'secondary',\n            show: 'always',\n            info: () => 'Severe weight loss was already selected',\n        },\n        conditions: {\n            selectedCondition(condition: string) {\n                return condition === 'Moderate weight loss less than or equal to 10 percent, unexplained'\n            },\n            selectedConditions(conditions: Array<string>) {\n                return conditions.includes('Severe weight loss >10% and/or BMI <18.5kg/m^2, unexplained')\n            }\n        }\n    }\n}\n\nexport const CHILD_ART_ELIGIBILITY: Record<string, GuideLineInterface> = {\n    'Has stage 4 conditions': {\n        concept: 'WHO STAGE IV PEDS',\n        priority: 1,\n        conditions: {\n            stage: (stage: number) => stage === 4\n        }\n    },\n    'Has stage 3 conditions': {\n        concept: 'WHO STAGE III PEDS',\n        priority: 2,\n        conditions: {\n            stage: (stage: number) => stage === 3,\n        }\n    },\n    'Children under twelve months who tested positive on Rapid test and have presumed severe HIV': {\n        concept: 'PRESUMED SEVERE HIV',\n        priority: 3,\n        conditions: {\n            ageInMonths(age: number){\n                return age < 12 \n            },\n            selectedConditions: (conditions: Array<string>) => {\n                const pshdConditions = ConceptService.getConceptsByCategory('pshd_condition')\n                for (const pshdCondition in pshdConditions) {\n                    if (conditions.includes(pshdCondition)) return true\n                }\n                return false\n            },\n            testType(testType: string){\n                return testType === 'HIV rapid test'\n            },\n        }\n    },\n    \"Children under twelve who tested positive via HIV DNA Polymerase Chain Reaction test\": {\n        concept: 'HIV DNA POLYMERASE CHAIN REACTION',\n        priority: 4,\n        conditions: {\n            ageInMonths: (age: number) => age < 12,\n            testType: (testType: string) => testType === \"HIV DNA POLYMERASE CHAIN REACTION\",\n        }\n    },\n    \"Children who are less than 24 months\": {\n        concept: 'HIV infected',\n        priority: 5,\n        conditions: {\n            ageInMonths: (age: number) => age < 24\n        }\n    },\n    \"Children between 24 and 56 months who have stage 2 or 1 conditions\": {\n        concept: 'CD4 COUNT LESS THAN OR EQUAL TO 750',\n        priority: 6,\n        conditions: {\n            ageInMonths(age: number) {\n                return age >= 24 && age <= 56\n            },\n            cd4(cd4: number) {\n                return cd4 <= 750\n            },\n            cd4Modifier(modifier: string) {\n                return modifier === '<' || modifier === '='\n            },\n            stage(stage: number) {\n                return stage <= 2\n            }\n        }\n    },\n    \"Children with CD4 count less than 500 and have stage 1 and stage 2 conditions\": {\n        concept: 'CD4 COUNT LESS THAN OR EQUAL TO 500',\n        priority: 7,\n        conditions: {\n            cd4(cd4: number){\n                return cd4 <= 500\n            },\n            cd4Modifier(modifier: string){\n                return modifier === '<' || modifier === '='\n            },\n            stage(stage: number) {\n                return stage <= 2\n            }\n        }\n    },\n    \"Children over the date 2014-04-01 who are more than five years old and have cd4 count less than 500\": {\n        concept: 'CD4 COUNT LESS THAN OR EQUAL TO 500',\n        priority: 9,\n        conditions: {\n            date(date: string) {\n                return date >= '2014-04-01'\n            },\n            age(age: number) {\n                return age > 5\n            },\n            cd4(cd4: number) {\n                return cd4 <= 500\n            },\n            cd4Modifier(modifier: string) {\n                return modifier === '<' || modifier === '='\n            }\n        }\n    },\n    \"Children over date 2014-04-01 and less than Five years old\": {\n        concept: 'HIV infected',\n        priority: 10,\n        conditions: {\n            date(date: string) {\n                return date >= '2014-04-01'\n            },\n            age(age: number) {\n                return age <= 5\n            }\n        }\n    },\n    \"Asymptomatic patient with either stage one or stage two conditions\": {\n        concept: 'Asymptomatic',\n        priority: 11,\n        conditions: {\n            stage: (stage: number) => stage <= 2\n        }\n    }\n}\n\nexport const ADULT_ART_ELIGIBILITY: Record<string, GuideLineInterface> = {\n    'Has stage 4 conditions': {\n        concept: 'WHO STAGE IV ADULT',\n        priority: 1,\n        conditions: {\n            stage: (stage: number) => stage === 4\n        }\n    },\n    'Has HIV wasting syndrome identified in stage 3': {\n        concept: 'WHO STAGE IV ADULT',\n        priority: 2,\n        conditions: {\n            selectedConditions: (conditions: Array<string>) => {\n                const severeSymp = ConceptService.getConceptsByCategory('severe_hiv_wasting_syndrome')\n                const found = severeSymp.reduce((total, symp) => conditions.includes(symp.name) ? total + 1 : 0, 0)\n                return found >= 2\n            }\n        }\n    },\n    'Has stage 3 conditions': {\n        concept: 'WHO STAGE III ADULT',\n        priority: 3,\n        conditions: {\n            stage: (stage: number) => stage === 3,\n        }\n    },\n    'CD4 less than 350 for adults before 2014': {\n        concept: 'cd4 less than or equal to 350',\n        priority: 4,\n        conditions: {\n            date(date: string) {\n                return date < '2014-04-01'\n            },\n            cd4(cd4: number) {\n                return cd4 <= 350\n            },\n            cd4Modifier(modifier: string) {\n                return modifier === '<' || modifier === '='\n            }\n        }\n    },\n    'CD4 less than 250 for adults after 2014': {\n        concept: 'cd4 less than or equal to 250',\n        priority: 4,\n        conditions: {\n            date(date: string) {\n                return date >= '2014-04-01'\n            },\n            cd4(cd4: number) {\n                return cd4 <= 250\n            },\n            cd4Modifier(modifier: string) {\n                return modifier === '<' || modifier === '='\n            }\n        }\n    },\n    'CD4 less than 350 for adults after 2014': {\n        concept: 'cd4 less than or equal to 350',\n        priority: 5,\n        conditions: {\n            date(date: string) {\n                return date >= '2014-04-01'\n            },\n            cd4(cd4: number) {\n                return cd4 <= 350\n            },\n            cd4Modifier(modifier: string) {\n                return modifier === '<' || modifier === '='\n            }\n        }\n    },\n    'CD4 less than 500 for adults after 2014': {\n        concept: 'cd4 less than or equal to 500',\n        priority: 6,\n        conditions: {\n            date(date: string) {\n                return date >= '2014-04-01'\n            },\n            cd4(cd4: number){\n                return cd4 <= 500\n            },\n            cd4Modifier(modifier: string) {\n                return modifier === '<' || modifier === '='\n            }\n        }\n    },\n    'Women who are breast feeding': {\n        concept: 'BREASTFEEDING',\n        priority: 8,\n        conditions: {\n            gender(gender: string){\n                return gender === 'F'\n            },\n            breastFeeding(answer: string){\n                return  answer === 'Yes'\n            },\n            stage: (stage: number) => stage <= 2\n        }\n    },\n    'Women who are pregnant': {\n        concept: 'PATIENT PREGNANT',\n        priority: 7,\n        conditions: {\n            gender(gender: string) {\n                return gender === 'F'\n            },\n            pregnant(answer: string){\n                return answer === 'Yes'\n            },\n            stage(stage: number) {\n                return stage <= 2\n            },\n        }\n    },\n    \"Asymptomatic patient with either stage one or stage two conditions\": {\n        concept: 'Asymptomatic',\n        priority: 9,\n        conditions: {\n            stage: (stage: number) => stage <= 2,\n        }\n    }\n}\n","import script from \"./StagingMixin.vue?vue&type=script&lang=ts\"\nexport * from \"./StagingMixin.vue?vue&type=script&lang=ts\"\n\nconst __exports__ = script;\n\nexport default __exports__"],"sourceRoot":""}