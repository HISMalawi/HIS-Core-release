(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-88ff8d72"],{"38e6":function(e,t,l){"use strict";var a=l("7a23");const n={id:"report-content"},i={id:"moh_template"},o={key:0,class:"main-title"},s={key:1,class:"main-title"},c={key:2,class:"main-title"},r={key:3,class:"table-section"},d={key:4,colspan:2,class:"table-section"},u={key:5},b=["onClick"];function m(e,t,l,m,_,p){const v=Object(a["resolveComponent"])("layout");return Object(a["openBlock"])(),Object(a["createBlock"])(v,{logo:"login-logos/Malawi-Coat_of_arms_of_arms.png",title:e.data.title,toCSV:e.exportCsv,toPDF:e.exportPdf,period:e.data.period,dateGenerated:e.data.dateGenerated,refreshReport:e.generate,configure:e.configure},{default:Object(a["withCtx"])(()=>[Object(a["createElementVNode"])("div",n,[Object(a["createElementVNode"])("table",i,[(Object(a["openBlock"])(!0),Object(a["createElementBlock"])(a["Fragment"],null,Object(a["renderList"])(e.indicators,(t,l)=>(Object(a["openBlock"])(),Object(a["createElementBlock"])("tr",{key:l},[t.isMainTitle?(Object(a["openBlock"])(),Object(a["createElementBlock"])("td",o,"#")):Object(a["createCommentVNode"])("",!0),t.isMainTitle?(Object(a["openBlock"])(),Object(a["createElementBlock"])("td",s,Object(a["toDisplayString"])(t.label),1)):Object(a["createCommentVNode"])("",!0),t.isMainTitle?(Object(a["openBlock"])(),Object(a["createElementBlock"])("td",c,"#")):Object(a["createCommentVNode"])("",!0),t.isSectionTitle?(Object(a["openBlock"])(),Object(a["createElementBlock"])("td",r)):Object(a["createCommentVNode"])("",!0),t.isSectionTitle?(Object(a["openBlock"])(),Object(a["createElementBlock"])("td",d,Object(a["toDisplayString"])(t.label),1)):Object(a["createCommentVNode"])("",!0),t.isMainTitle||t.isSectionTitle?Object(a["createCommentVNode"])("",!0):(Object(a["openBlock"])(),Object(a["createElementBlock"])("td",u,Object(a["toDisplayString"])(t.index),1)),t.isMainTitle||t.isSectionTitle?Object(a["createCommentVNode"])("",!0):(Object(a["openBlock"])(),Object(a["createElementBlock"])("td",{key:6,style:Object(a["normalizeStyle"])(t.style||{}),class:"table-key"},Object(a["toDisplayString"])(t.label),5)),t.isMainTitle||t.isSectionTitle?Object(a["createCommentVNode"])("",!0):(Object(a["openBlock"])(),Object(a["createElementBlock"])("td",{key:7,class:"table-value",onClick:l=>e.drill(t)},Object(a["toDisplayString"])(t._value),9,b))]))),128))])])]),_:1},8,["title","toCSV","toPDF","period","dateGenerated","refreshReport","configure"])}var _=l("954d"),p=l("d20e"),v=l("1c74"),x=l("b5e4"),f=l("ba82"),O=l("6179"),y=l("cf9e"),j=l("d867"),h=l("5a0c"),g=l.n(h),C=l("2ef0");const T=Object(a["reactive"])({model:[],indicators:{},dateGenerated:"",startDate:"",endDate:"",title:"",period:""}),M=Object(a["computed"])(()=>T.model.map(e=>{if("function"===typeof e.value){const t=e.value(T.indicators);Array.isArray(t)?(e._value=""+t.length,e._drill=t):e._value=t}return e})),F=Object(a["computed"])(()=>{const[e,...t]=M.value.map(e=>[e.index||"",e.label,e.index?e._value||0:""]);return{rows:t,columns:[["#",M.value[0].label,"#"]]}});function V(e){e.title!=T.title&&(T.indicators={}),T.title=e.title,T.model=e.indicators;const t=async(t="",l="")=>{(await j["X"].create({message:"Please wait .."})).present();try{const a=new p["a"](e.name);a.startDate=t||T.startDate,a.endDate=l||T.endDate,T.indicators=await a.requestReport({type:"moh"}),T.dateGenerated=g()(v["e"].getSessionDate()).format("DD/MMM/YYYY HH:mm:ss")}catch(a){Object(x["e"])("Unable to generate report")}j["X"].dismiss()},l=()=>Object(y["a"])({title:T.title,onFinish:(e,l,a)=>{T.period=a,T.startDate=e,T.endDate=l,t()}}),n=e=>{Array.isArray(e._drill)&&Object(O["a"])(e.label,e._drill)},i=()=>{const e=document.getElementById("report-content");e&&Object(f["c"])(`\n                <html>\n                <head>\n                    <link rel="stylesheet" media="print"  href="/assets/css/hts-report-style-print.css"/>\n                    <style> \n                        #moh_template { border: solid 1px #3333; width: 100%; } td { font-size: var(--his-sm-font-size); padding: 0.3em; } .main-title { background: #8EAADB; font-weight: bold; border: solid 3px black; } .table-value { padding: 1em; text-align: center; color: #337ab7; font-weight: bold; font-size: var(--his-md-font-size); border: solid 2px black; } .table-section { font-weight: bold; background: #D9E2F3; border: solid 3px black; }\n                    </style>\n                </head>\n                <body>\n                    ${e.innerHTML}\n                </body>\n                </html>\n            `,50)},o=()=>{const{rows:e,columns:t}=F.value;Object(f["b"])(t,Object(f["a"])(e,T),`MOH-${T.title}-${v["e"].getLocationName()}-${T.period}`)};return Object(a["onMounted"])(()=>Object(C["isEmpty"])(T.indicators)&&l()),{drill:n,data:T,indicators:M,exportable:F,generate:t,exportPdf:i,exportCsv:o,configure:l}}var k=Object(a["defineComponent"])({components:{Layout:_["a"]},props:{params:{type:Object,required:!0}},setup(e){return V(e.params)}}),S=(l("7b22"),l("d959")),N=l.n(S);const w=N()(k,[["render",m],["__scopeId","data-v-5c21aaf2"]]);t["a"]=w},5454:function(e,t,l){},6179:function(e,t,l){"use strict";l.d(t,"a",(function(){return d}));l("14d9");var a=l("d867"),n=l("d6aa"),i=l("9ceb"),o=l("7a23"),s=l("23e6"),c=l("afbc");const r=Object(o["reactive"])({});function d(e,t){u({title:e,columns:[[i["a"].thTxt("National ID"),i["a"].thTxt("First name"),i["a"].thTxt("Last name"),i["a"].thTxt("Gender"),i["a"].thTxt("Birthdate"),i["a"].thTxt("Action")]],data:t,generator:async e=>{const t=e.map(async e=>{let t=null;return r[e]?t=r[e]:(t=new s["a"](await s["a"].findByID(e)),r[e]=t),[i["a"].td(t.getNationalID()),i["a"].td(t.getGivenName()),i["a"].td(t.getFamilyName()),i["a"].td(t.getGender()),i["a"].tdDate(""+t.getBirthdate()),i["a"].tdBtn("Show",()=>{c["a"].push({path:"/patient/dashboard/"+e}),a["Z"].dismiss({})})]});return Promise.all(t)}})}async function u(e={}){(await a["Z"].create({component:n["a"],cssClass:"large-modal",componentProps:{title:e.title,columns:e.columns,rows:e.data,footerColor:"light",rowParser:t=>e.generator(t),paginated:!0,showFilters:!0,rowsPerPage:20,showReportStamp:!1,onFinish:()=>a["Z"].dismiss()}})).present()}},"7b22":function(e,t,l){"use strict";l("bdcc")},"954d":function(e,t,l){"use strict";var a=l("7a23");const n={class:"header-text-list"},i={key:0},o={id:"report-content"};function s(e,t,l,s,c,r){const d=Object(a["resolveComponent"])("ion-img"),u=Object(a["resolveComponent"])("ion-thumbnail"),b=Object(a["resolveComponent"])("ion-label"),m=Object(a["resolveComponent"])("ion-item"),_=Object(a["resolveComponent"])("ion-toolbar"),p=Object(a["resolveComponent"])("ion-header"),v=Object(a["resolveComponent"])("ion-content"),x=Object(a["resolveComponent"])("ion-chip"),f=Object(a["resolveComponent"])("ion-footer"),O=Object(a["resolveComponent"])("his-footer"),y=Object(a["resolveComponent"])("ion-page");return Object(a["openBlock"])(),Object(a["createBlock"])(y,null,{default:Object(a["withCtx"])(()=>[Object(a["createVNode"])(p,null,{default:Object(a["withCtx"])(()=>[Object(a["createVNode"])(_,null,{default:Object(a["withCtx"])(()=>[Object(a["createVNode"])(m,null,{default:Object(a["withCtx"])(()=>[e.reportLogo?(Object(a["openBlock"])(),Object(a["createBlock"])(u,{key:0},{default:Object(a["withCtx"])(()=>[Object(a["createVNode"])(d,{src:e.reportLogo},null,8,["src"])]),_:1})):Object(a["createCommentVNode"])("",!0),Object(a["createVNode"])(b,null,{default:Object(a["withCtx"])(()=>[Object(a["createElementVNode"])("ul",n,[Object(a["createElementVNode"])("li",null,[Object(a["createElementVNode"])("b",null,Object(a["toDisplayString"])(e.title),1)]),e.period?(Object(a["openBlock"])(),Object(a["createElementBlock"])("li",i,[Object(a["createElementVNode"])("b",null,Object(a["toDisplayString"])(e.period),1)])):Object(a["createCommentVNode"])("",!0)])]),_:1})]),_:1})]),_:1})]),_:1}),Object(a["createVNode"])(v,{"scroll-y":"","scroll-x":""},{default:Object(a["withCtx"])(()=>[Object(a["createElementVNode"])("div",o,[Object(a["renderSlot"])(e.$slots,"default",{},void 0,!0)])]),_:3}),Object(a["createVNode"])(f,null,{default:Object(a["withCtx"])(()=>[Object(a["createVNode"])(_,null,{default:Object(a["withCtx"])(()=>[Object(a["createVNode"])(x,{color:"primary"},{default:Object(a["withCtx"])(()=>[Object(a["createTextVNode"])("Date Generated: "),Object(a["createElementVNode"])("b",null,Object(a["toDisplayString"])(e.dateGenerated),1)]),_:1}),Object(a["createVNode"])(x,{color:"primary"},{default:Object(a["withCtx"])(()=>[Object(a["createTextVNode"])("APP version: "),Object(a["createElementVNode"])("b",null,Object(a["toDisplayString"])(e.appVersion),1)]),_:1}),Object(a["createVNode"])(x,{color:"primary"},{default:Object(a["withCtx"])(()=>[Object(a["createTextVNode"])("API version: "),Object(a["createElementVNode"])("b",null,Object(a["toDisplayString"])(e.apiVersion),1)]),_:1})]),_:1})]),_:1}),Object(a["createVNode"])(O,{color:"dark",btns:e.buttons},null,8,["btns"])]),_:3})}l("14d9");var c=l("d867"),r=l("1718"),d=l("0f25"),u=l("6605"),b=l("1c74"),m=Object(a["defineComponent"])({components:{IonLabel:c["x"],IonItem:c["w"],HisFooter:d["a"],IonPage:c["D"],IonHeader:c["q"],IonContent:c["n"],IonToolbar:c["S"],IonChip:c["l"],IonFooter:c["o"],IonThumbnail:c["Q"],IonImg:c["s"]},props:{title:{type:String},period:{type:String},logo:{type:String},toCSV:{type:Function,required:!1},toPDF:{type:Function,required:!1},configure:{type:Function,required:!1},refreshReport:{type:Function,required:!0},dateGenerated:{type:String,default:"-"}},setup(e){const t=Object(u["i"])(),l=[],n=b["e"].getCoreVersion(),i=b["e"].getApiVersion(),o=Object(a["computed"])(()=>e.logo?Object(r["a"])(e.logo):null);function s(e,t){return{name:e.name||"Btn",size:e.size||"large",slot:e.slot||"start",color:e.color||"primary",visible:e.visible||!0,onClick:t}}return"function"===typeof e.toCSV&&l.push(s({name:"CSV"},e.toCSV)),"function"===typeof e.toPDF&&l.push(s({name:"PDF"},e.toPDF)),"function"===typeof e.configure&&l.push(s({name:"Set Date",slot:"end",color:"primary"},()=>e.configure&&e.configure())),l.push(s({name:"Refresh",slot:"end",color:"warning"},()=>e.refreshReport())),l.push(s({name:"Finish",slot:"end",color:"success"},()=>t.push("/"))),{buttons:l,appVersion:n,apiVersion:i,reportLogo:o}}}),_=(l("f47e"),l("d959")),p=l.n(_);const v=p()(m,[["render",s],["__scopeId","data-v-3e4a390e"]]);t["a"]=v},bdcc:function(e,t,l){},d6c9:function(e,t,l){"use strict";l.r(t);var a=l("7a23");function n(e,t,l,n,i,o){const s=Object(a["resolveComponent"])("moh-template"),c=Object(a["resolveComponent"])("ion-page");return Object(a["openBlock"])(),Object(a["createBlock"])(c,null,{default:Object(a["withCtx"])(()=>[Object(a["createVNode"])(s,{params:e.params},null,8,["params"])]),_:1})}var i=l("d867"),o=l("38e6"),s=Object(a["defineComponent"])({components:{IonPage:i["D"],MohTemplate:o["a"]},setup(){const e={title:"Self-Test Summary",name:"SELF TEST SUMMARY",indicators:[{isMainTitle:!0,label:"HIV Self-Test Recipient Details"},{label:"Total recipients",index:"!",value:e=>e["total_recipients"]},{isMainTitle:!0,label:"Distribution point"},{label:"Total recipients at the facility",index:"2",isSectionTitle:!0,value:e=>e["total_recipients_at_the_facility"]},{label:"Facility: VCT",index:"3",value:e=>e["facility_vct"]},{label:"Facility: ANC first visit",index:"4",value:e=>e["facility_anc_first_visit"]},{label:"Facility: Inpatient",index:"5",value:e=>e["facility_inpatient"]},{label:"Facility: STI",index:"6",value:e=>e["facility_sti"]},{label:"Facility: PMTCT-FUP",index:"7",value:e=>e["facility_pmtctfup"]},{label:"Facility: Index",index:"8",value:e=>e["facility_index"]},{label:"Facility: Paediatric",index:"9",value:e=>e["facility_paediatric"]},{label:"Facility: VMMC",index:"10",value:e=>e["facility_vmmc"]},{label:"Facility: Malnutrition",index:"11",value:e=>e["facility_malnutrition"]},{label:"Facility: TB",index:"12",value:e=>e["facility_tb"]},{label:"Facility: OPD",index:"13",value:e=>e["facility_opd"]},{label:"Facility: Other PITC",index:"14",value:e=>e["facility_other_pitc"]},{label:"Facility: SNS",index:"15",value:e=>e["facility_sns"]},{label:"Total recipients in the community",index:"16",isSectionTitle:!0,value:e=>e["total_recipients_in_the_community"]},{label:"Community: VMMC",index:"17",value:e=>e["community_vmmc"]},{label:"Community: Index",index:"18",value:e=>e["community_index"]},{label:"Community: Mobile",index:"19",value:e=>e["community_mobile"]},{label:"Community: VCT",index:"20",value:e=>e["community_vct"]},{label:"Community: Other",index:"21",value:e=>e["community_other"]},{label:"Community: SNS",index:"22",value:e=>e["community_sns"]},{label:"Invalid entry",index:"23",value:e=>e["invalid_entry"]},{label:"Missing",index:"24",value:e=>e["missing"]},{isMainTitle:!0,label:"Recipient sex / pregnancy"},{label:"Male",index:"25",value:e=>e["male"]},{label:"Female non-pregnant",index:"26",value:e=>e["female_non_pregnant"]},{label:"Female pregnant",index:"27",value:e=>e["female_pregnant"]},{label:"Invalid entry",index:"28",value:e=>e["invalid_entry"]},{label:"Missing",index:"29",value:e=>e["missing"]},{isMainTitle:!0,label:"Recipient age group years"},{label:"Total male recipients",index:"29",isSectionTitle:!0,value:e=>e["total_male_recipients"]},{label:"Males <13",index:"30",value:e=>e["males_less_than_13"]},{label:"Males 13-14",index:"31",value:e=>e["males_13_to_14"]},{label:"Males 15-19",index:"32",value:e=>e["males_15_to_19"]},{label:"Males 20-24",index:"33",value:e=>e["males_20_to_24"]},{label:"Males 25-29",index:"34",value:e=>e["males_25_to_29"]},{label:"Males 30-34",index:"35",value:e=>e["males_30_to_34"]},{label:"Males 35-39",index:"36",value:e=>e["males_35_to_39"]},{label:"Males 40-44",index:"37",value:e=>e["males_40_to_44"]},{label:"Males 45-49",index:"38",value:e=>e["males_45_to_49"]},{label:"Males 50+",index:"39",value:e=>e["males_50_plus"]},{label:"Total female recipients",index:"40",isSectionTitle:!0,value:e=>e["total_female_recipients"]},{label:"Females <13",index:"41",value:e=>e["females_less_than_13"]},{label:"Females 13-14",index:"42",value:e=>e["females_13_to_14"]},{label:"Females 15-19",index:"43",value:e=>e["females_15_to_19"]},{label:"Females 20-24",index:"44",value:e=>e["females_20_to_24"]},{label:"Females 25-29",index:"45",value:e=>e["females_25_to_29"]},{label:"Females 30-34",index:"46",value:e=>e["females_30_to_34"]},{label:"Females 35-39",index:"47",value:e=>e["females_35_to_39"]},{label:"Females 40-44",index:"48",value:e=>e["females_40_to_44"]},{label:"Females 45-49",index:"49",value:e=>e["females_45_to_49"]},{label:"Females 50+",index:"50",value:e=>e["females_50_plus"]},{label:"Invalid entry",index:"51",value:e=>e["invalid_entry"]},{label:"Missing",index:"52",value:e=>e["missing"]},{isMainTitle:!0,label:"Last HIV test"},{label:"Never tested",index:"53",value:e=>e["never_tested"]},{label:"Negative",index:"54",value:e=>e["negative"]},{label:"Positive, not on ART",index:"55",value:e=>e["positive_not_on_art"]},{label:"Positive, on ART",index:"56",value:e=>e["positive_on_art"]},{label:"Inconclusive",index:"57",value:e=>e["inconclusive"]},{label:"Invalid entry",index:"58",value:e=>e["invalid_entry"]},{label:"Missing",index:"59",value:e=>e["missing"]},{isMainTitle:!0,label:"Time since last HIV test"},{label:"12+ months",index:"60",value:e=>e["last_hiv_result_12_plus_months"]},{label:"6-11 months",index:"61",value:e=>e["last_hiv_result_6_to_11_months"]},{label:"3-5 months",index:"62",value:e=>e["last_hiv_result_3_to_5_months"]},{label:"14 days – 2 months",index:"63",value:e=>e["last_hiv_result_14_days_to_2_months"]},{label:"1 – 13 days",index:"64",value:e=>e["last_hiv_result_1_to_13_days"]},{label:"Same day",index:"65",value:e=>e["last_hiv_result_same_day"]},{label:"Invalid entry",index:"66",value:e=>e["invalid_entry"]},{label:"Not applicable / missing",index:"67",value:e=>e["not_applicable_or_missing"]},{isMainTitle:!0,label:"Male condoms given"},{label:"Male condoms: sum",index:"68",value:e=>e["male_condoms_sum"]},{isMainTitle:!0,label:"Female condoms given"},{label:"Female condoms: sum",index:"69",value:e=>e["female_condoms_sum"]},{isMainTitle:!0,label:"HIV self-test end-user details"},{label:"Total end-users",index:"70",value:e=>e["total_endusers"]},{isMainTitle:!0,label:"End-user type"},{label:"Self",index:"71",value:e=>e["self"]},{label:"Sex-Partner",index:"72",value:e=>e["sexpartner"]},{label:"Other",index:"73",value:e=>e["other"]},{isMainTitle:!0,label:"End-user sex and age"},{label:"Total male end-users",index:"74",isSectionTitle:!0,value:e=>e["total_male_end_users"]},{label:"Males <13",index:"75",value:e=>e["end_user_males_less_than_13"]},{label:"Males 13-14",index:"76",value:e=>e["end_user_males_13_to_14"]},{label:"Males 15-19",index:"77",value:e=>e["end_user_males_15_to_19"]},{label:"Males 20-24",index:"78",value:e=>e["end_user_males_20_to_24"]},{label:"Males 25-29",index:"79",value:e=>e["end_user_males_25_to_29"]},{label:"Males 30-34",index:"80",value:e=>e["end_user_males_30_to_34"]},{label:"Males 35-39",index:"81",value:e=>e["end_user_males_35_to_39"]},{label:"Males 40-44",index:"82",value:e=>e["end_user_males_40_to_44"]},{label:"Males 45-49",index:"83",value:e=>e["end_user_males_45_to_49"]},{label:"Males 50+",index:"84",value:e=>e["end_user_males_50_plus"]},{label:"Total female end-users",index:"85",isSectionTitle:!0,value:e=>e["end_user_total_female_end_users"]},{label:"Females <13",index:"86",value:e=>e["end_user_females_less_than_13"]},{label:"Females 13-14",index:"87",value:e=>e["end_user_females_13_to_14"]},{label:"Females 15-19",index:"88",value:e=>e["end_user_females_15_to_19"]},{label:"Females 20-24",index:"89",value:e=>e["end_user_females_20_to_24"]},{label:"Females 25-29",index:"90",value:e=>e["end_user_females_25_to_29"]},{label:"Females 30-34",index:"91",value:e=>e["end_user_females_30_to_34"]},{label:"Females 35-39",index:"92",value:e=>e["end_user_females_35_to_39"]},{label:"Females 40-44",index:"93",value:e=>e["end_user_females_40_to_44"]},{label:"Females 45-49",index:"94",value:e=>e["end_user_females_45_to_49"]},{label:"Females 50+",index:"95",value:e=>e["end_user_females_50_plus"]},{label:"Invalid entry",index:"96",value:e=>e["invalid_entry"]},{label:"Missing",index:"97",value:e=>e["missing"]}]};return{params:e}}}),c=l("d959"),r=l.n(c);const d=r()(s,[["render",n]]);t["default"]=d},f47e:function(e,t,l){"use strict";l("5454")}}]);
//# sourceMappingURL=chunk-88ff8d72.c9d31a45.js.map