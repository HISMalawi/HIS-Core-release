{"version":3,"sources":["webpack:///./node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/templateLoader.js","webpack:///./node_modules/cache-loader/dist/cjs.js","webpack:///./src/apps/ART/views/encounters/BPManagement.vue","webpack:///./node_modules/eslint-loader/index.js"],"names":["_hoisted_1","key","style","_hoisted_2","slot","_hoisted_3","_createTextVNode","_hoisted_4","_createVNode","_hoisted_5","_hoisted_6","_hoisted_7","_hoisted_8","_hoisted_9","render","_ctx","_cache","$props","$setup","$data","$options","_component_ion_title","_resolveComponent","_component_ion_button","_component_ion_toolbar","_component_ion_header","_component_data_table","_component_ion_content","_component_ion_label","_component_ion_radio","_component_ion_item","_component_ion_col","_component_ion_row","_component_ion_grid","_component_ion_radio_group","_component_ion_footer","_component_ion_page","_openBlock","_createBlock","default","_withCtx","_toDisplayString","date","patientOnBPDrugs","_createCommentVNode","_","totalRiskFactors","color","onClick","showRiskFactors","config","showIndex","columns","rows","modelValue","action","$event","_Fragment","_renderList","items","item","index","size","label","value","gotoPatientDashboard","showClinicianButton","referPatient","patientHasHyperTensionObs","goToDiagnosis","isEnrolledInHTN","enrollInHTN","onFinish","HEADER_STYLE","background","defineComponent","mixins","EncounterMixinVue","components","DataTable","IonTitle","IonToolbar","IonHeader","IonContent","IonGrid","IonRow","IonButton","IonRadioGroup","IonRadio","IonCol","IonFooter","IonPage","IonItem","IonLabel","data","htn","hasARVNumber","suggestedNumber","table","thTxt","bpGradeColorMap","riskFactors","trail","patientFirstVisit","normatensive","currentDrugs","isAliveOnHTN","HTNProgramID","aliveState","refer","watch","ready","loading","loadingController","create","message","backdropDismiss","present","this","BPManagementService","patientID","providerID","getBPTrail","formatBpTrailRows","isBpNormotensive","getRiskFactors","HisDate","toStandardHisDisplayFormat","Service","getSessionDate","isTransfered","hasHyperTenstion","getTreatmentStatus","getProgramStatus","dismiss","alertTransferIn","getItems","immediate","computed","filter","d","length","UserService","isClinician","isDoctor","methods","encounter","createEncounter","toastWarning","obs","saveValueCodedObs","saveValueTextObs","patientState","state","enrollPatient","other","nextTask","$router","push","path","ob","ObservationService","getFirstValueCoded","match","getFirstValueText","programs","ProgramService","getPatientPrograms","program","name","programState","getPatientStates","concepts","ConceptService","getConceptsByCategory","j","map","async","val","concept","Promise","all","Object","keys","m","concat","colorGrade","grade","getBpGrade","parseInt","sbp","dbp","tdDate","td","join","note","modal","modalController","component","RiskFactorModal","cssClass","componentProps","factors","onDidDismiss","isEmpty","isChecked","infoActionSheet","setHtnTransferred","PatientProgramService","setProgramId","setStateDate","setStateId","enrollProgram","updateState","toastSuccess","e","console","error","transferred","vitals","VitalsService","__exports__","AppEncounterService","constructor","super","isNotEmptyandNumber","vital","isNotEmptyandFloat","modifier","checkMinMax","min","max","p","parseFloat","validateAll","validator","isArray","mergeErrors","errors","holder","forEach","element","isValidBPReading","isValidBP","split","bpSystolic","bpDiastolic","values","emptyErrors","minErrors","v"],"mappings":"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","file":"js/chunk-03e87f92.4cb0d0e3.js","sourcesContent":["import { toDisplayString as _toDisplayString, createVNode as _createVNode, openBlock as _openBlock, createBlock as _createBlock, createCommentVNode as _createCommentVNode, resolveComponent as _resolveComponent, withCtx as _withCtx, createTextVNode as _createTextVNode, renderList as _renderList, Fragment as _Fragment } from \"vue\"\n\nconst _hoisted_1 = {\n  key: 0,\n  style: {\"color\":\"green\"}\n}\nconst _hoisted_2 = { slot: \"end\" }\nconst _hoisted_3 = /*#__PURE__*/_createTextVNode(\"add riskfactors\")\nconst _hoisted_4 = /*#__PURE__*/_createVNode(\"h1\", { style: {\"text-align\":\"center\"} }, \"Actions\", -1)\nconst _hoisted_5 = /*#__PURE__*/_createTextVNode(\" cancel \")\nconst _hoisted_6 = /*#__PURE__*/_createTextVNode(\" Refer to clinician \")\nconst _hoisted_7 = /*#__PURE__*/_createTextVNode(\" Hypertension Diagnosis \")\nconst _hoisted_8 = /*#__PURE__*/_createTextVNode(\" Enroll in HTN \")\nconst _hoisted_9 = /*#__PURE__*/_createTextVNode(\" Finish \")\n\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  const _component_ion_title = _resolveComponent(\"ion-title\")\n  const _component_ion_button = _resolveComponent(\"ion-button\")\n  const _component_ion_toolbar = _resolveComponent(\"ion-toolbar\")\n  const _component_ion_header = _resolveComponent(\"ion-header\")\n  const _component_data_table = _resolveComponent(\"data-table\")\n  const _component_ion_content = _resolveComponent(\"ion-content\")\n  const _component_ion_label = _resolveComponent(\"ion-label\")\n  const _component_ion_radio = _resolveComponent(\"ion-radio\")\n  const _component_ion_item = _resolveComponent(\"ion-item\")\n  const _component_ion_col = _resolveComponent(\"ion-col\")\n  const _component_ion_row = _resolveComponent(\"ion-row\")\n  const _component_ion_grid = _resolveComponent(\"ion-grid\")\n  const _component_ion_radio_group = _resolveComponent(\"ion-radio-group\")\n  const _component_ion_footer = _resolveComponent(\"ion-footer\")\n  const _component_ion_page = _resolveComponent(\"ion-page\")\n\n  return (_openBlock(), _createBlock(_component_ion_page, null, {\n    default: _withCtx(() => [\n      _createVNode(_component_ion_header, null, {\n        default: _withCtx(() => [\n          _createVNode(_component_ion_toolbar, null, {\n            default: _withCtx(() => [\n              _createVNode(_component_ion_title, null, {\n                default: _withCtx(() => [\n                  _createVNode(\"span\", null, \"BP management screening on \" + _toDisplayString(_ctx.date), 1),\n                  (_ctx.patientOnBPDrugs)\n                    ? (_openBlock(), _createBlock(\"small\", _hoisted_1, \" (Patient already on BP drugs)\"))\n                    : _createCommentVNode(\"\", true)\n                ]),\n                _: 1\n              }),\n              _createVNode(\"span\", _hoisted_2, [\n                (_ctx.totalRiskFactors > 0)\n                  ? (_openBlock(), _createBlock(_component_ion_button, {\n                      key: 0,\n                      color: \"danger\",\n                      onClick: _ctx.showRiskFactors\n                    }, {\n                      default: _withCtx(() => [\n                        _createTextVNode(\"View/Edit risk factors \" + _toDisplayString(_ctx.totalRiskFactors), 1 /* TEXT */)\n                      ]),\n                      _: 1\n                    }, 8, [\"onClick\"]))\n                  : _createCommentVNode(\"\", true),\n                (_ctx.totalRiskFactors === 0)\n                  ? (_openBlock(), _createBlock(_component_ion_button, {\n                      key: 1,\n                      onClick: _ctx.showRiskFactors\n                    }, {\n                      default: _withCtx(() => [\n                        _hoisted_3\n                      ]),\n                      _: 1\n                    }, 8, [\"onClick\"]))\n                  : _createCommentVNode(\"\", true)\n              ])\n            ]),\n            _: 1\n          })\n        ]),\n        _: 1\n      }),\n      _createVNode(_component_ion_content, null, {\n        default: _withCtx(() => [\n          _createVNode(_component_data_table, {\n            config: {showIndex: false},\n            columns: _ctx.columns,\n            rows: _ctx.rows\n          }, null, 8, [\"columns\", \"rows\"])\n        ]),\n        _: 1\n      }),\n      _createVNode(_component_ion_footer, null, {\n        default: _withCtx(() => [\n          _createVNode(_component_ion_toolbar, null, {\n            default: _withCtx(() => [\n              _hoisted_4,\n              _createVNode(_component_ion_radio_group, {\n                modelValue: _ctx.action,\n                \"onUpdate:modelValue\": _cache[1] || (_cache[1] = $event => (_ctx.action = $event))\n              }, {\n                default: _withCtx(() => [\n                  _createVNode(_component_ion_grid, null, {\n                    default: _withCtx(() => [\n                      _createVNode(_component_ion_row, null, {\n                        default: _withCtx(() => [\n                          (_openBlock(true), _createBlock(_Fragment, null, _renderList(_ctx.items, (item, index) => {\n                            return (_openBlock(), _createBlock(_component_ion_col, {\n                              size: \"4\",\n                              key: index\n                            }, {\n                              default: _withCtx(() => [\n                                _createVNode(_component_ion_item, null, {\n                                  default: _withCtx(() => [\n                                    _createVNode(_component_ion_label, { style: {\"font-size\":\"1.0rem\",\"font-weight\":\"bold\"} }, {\n                                      default: _withCtx(() => [\n                                        _createTextVNode(_toDisplayString(item.label), 1 /* TEXT */)\n                                      ]),\n                                      _: 2\n                                    }, 1024),\n                                    _createVNode(_component_ion_radio, { value: item }, null, 8, [\"value\"])\n                                  ]),\n                                  _: 2\n                                }, 1024)\n                              ]),\n                              _: 2\n                            }, 1024))\n                          }), 128 /* KEYED_FRAGMENT */))\n                        ]),\n                        _: 1\n                      })\n                    ]),\n                    _: 1\n                  })\n                ]),\n                _: 1\n              }, 8, [\"modelValue\"])\n            ]),\n            _: 1\n          }),\n          _createVNode(_component_ion_toolbar, { color: \"dark\" }, {\n            default: _withCtx(() => [\n              _createVNode(_component_ion_button, {\n                size: \"large\",\n                color: \"danger\",\n                slot: \"start\",\n                onClick: _ctx.gotoPatientDashboard\n              }, {\n                default: _withCtx(() => [\n                  _hoisted_5\n                ]),\n                _: 1\n              }, 8, [\"onClick\"]),\n              (_ctx.showClinicianButton)\n                ? (_openBlock(), _createBlock(_component_ion_button, {\n                    key: 0,\n                    size: \"large\",\n                    color: \"danger\",\n                    slot: \"start\",\n                    onClick: _ctx.referPatient\n                  }, {\n                    default: _withCtx(() => [\n                      _hoisted_6\n                    ]),\n                    _: 1\n                  }, 8, [\"onClick\"]))\n                : _createCommentVNode(\"\", true),\n              (!_ctx.patientHasHyperTensionObs)\n                ? (_openBlock(), _createBlock(_component_ion_button, {\n                    key: 1,\n                    size: \"large\",\n                    slot: \"end\",\n                    onClick: _ctx.goToDiagnosis\n                  }, {\n                    default: _withCtx(() => [\n                      _hoisted_7\n                    ]),\n                    _: 1\n                  }, 8, [\"onClick\"]))\n                : _createCommentVNode(\"\", true),\n              (_ctx.patientHasHyperTensionObs && !_ctx.isEnrolledInHTN)\n                ? (_openBlock(), _createBlock(_component_ion_button, {\n                    key: 2,\n                    size: \"large\",\n                    slot: \"end\",\n                    onClick: _ctx.enrollInHTN\n                  }, {\n                    default: _withCtx(() => [\n                      _hoisted_8\n                    ]),\n                    _: 1\n                  }, 8, [\"onClick\"]))\n                : _createCommentVNode(\"\", true),\n              (_ctx.patientHasHyperTensionObs)\n                ? (_openBlock(), _createBlock(_component_ion_button, {\n                    key: 3,\n                    size: \"large\",\n                    color: \"success\",\n                    slot: \"end\",\n                    onClick: _ctx.onFinish\n                  }, {\n                    default: _withCtx(() => [\n                      _hoisted_9\n                    ]),\n                    _: 1\n                  }, 8, [\"onClick\"]))\n                : _createCommentVNode(\"\", true)\n            ]),\n            _: 1\n          })\n        ]),\n        _: 1\n      })\n    ]),\n    _: 1\n  }))\n}","\nimport { defineComponent } from \"vue\";\nimport {\n  IonToolbar,\n  IonTitle,\n  IonHeader,\n  IonContent,\n  IonGrid,\n  IonRow,\n  IonCol,\n  IonRadioGroup,\n  IonRadio,\n  IonButton,\n  modalController,\n  IonFooter,\n  IonPage,\n  IonItem,\n  IonLabel,\n  loadingController\n} from \"@ionic/vue\";\nimport { toastWarning, toastSuccess } from \"@/utils/Alerts\";\nimport EncounterMixinVue from \"../../../../views/EncounterMixin.vue\";\nimport RiskFactorModal from \"@/components/DataViews/RiskFactorModal.vue\";\nimport { ObservationService } from \"@/services/observation_service\";\nimport { ConceptService } from \"@/services/concept_service\";\nimport { Service } from \"@/services/service\";\nimport HisDate from \"@/utils/Date\";\nimport { isEmpty } from \"lodash\";\nimport { BPManagementService } from \"../../services/htn_service\";\nimport { UserService } from \"@/services/user_service\";\nimport { ProgramService } from \"@/services/program_service\";\nimport { VitalsService } from \"@/apps/ART/services/vitals_service\"\nimport { PatientProgramService } from \"@/services/patient_program_service\";\nimport DataTable from \"@/components/DataViews/tables/ReportDataTable.vue\"\nimport table from \"@/components/DataViews/tables/ReportDataTable\"\nimport { infoActionSheet } from \"@/utils/ActionSheets\";\n\nconst HEADER_STYLE = {\n  background: '#444444',\n}\nexport default defineComponent({\n  mixins: [EncounterMixinVue],\n  components: {\n    DataTable,\n    IonTitle,\n    IonToolbar,\n    IonHeader,\n    IonContent,\n    IonGrid,\n    IonRow,\n    IonButton,\n    IonRadioGroup,\n    IonRadio,\n    IonCol,\n    IonFooter,\n    IonPage,\n    IonItem,\n    IonLabel,\n  },\n  data: () => ({\n    htn: {} as any,\n    hasARVNumber: true,\n    suggestedNumber: \"\" as any,\n    columns: [\n      [\n        table.thTxt(\"Date\", { style: HEADER_STYLE }),\n        table.thTxt(\"Systolic\", { style: HEADER_STYLE }),\n        table.thTxt(\"Diastolic\", { style: HEADER_STYLE }),\n        table.thTxt(\"BP Drugs\", { style: HEADER_STYLE }),\n        table.thTxt(\"Action / Note\", { style: HEADER_STYLE })\n      ]\n    ] as any,\n    bpGradeColorMap: {\n      'N/A': '#ffffff',\n      'normal': '#ffffff',\n      'grade 1': '#FFC3CE',\n      'grade 2': '#F20056',\n      'grade 3': '#FF3333'\n    } as any,\n    rows: [] as any,\n    riskFactors: [] as any,\n    action: null as any,\n    trail: [] as any,\n    date: null as any,\n    patientOnBPDrugs: false,\n    patientFirstVisit: false,\n    normatensive: false,\n    patientHasHyperTensionObs: false,\n    currentDrugs: [],\n    items: [] as any,\n    isEnrolledInHTN: false,\n    isAliveOnHTN: false,\n    HTNProgramID: 20,\n    aliveState: 160,\n    refer: false,\n  }),\n  watch: {\n    ready: {\n      async handler(ready: boolean) {\n        if (!ready) return\n        const loading = await loadingController.create({\n          message: 'Please wait...',\n          backdropDismiss: false\n        })\n        await loading.present()\n               \n        this.htn = new BPManagementService(this.patientID, this.providerID);\n        this.trail = await this.htn.getBPTrail();\n        this.rows = this.formatBpTrailRows(this.trail);\n        this.normatensive = BPManagementService.isBpNormotensive(this.trail)\n        this.riskFactors = await this.getRiskFactors();\n        this.date = HisDate.toStandardHisDisplayFormat(Service.getSessionDate());\n        await this.isTransfered()\n        await this.hasHyperTenstion()\n        await this.getTreatmentStatus()\n        await this.getProgramStatus()\n        loadingController.dismiss()\n        if (this.patientFirstVisit && this.patientOnBPDrugs) await this.alertTransferIn()\n        this.getItems();\n      },\n      immediate: true,\n    },\n  },\n  computed: {\n    totalRiskFactors(): any {\n      return this.riskFactors.filter((d: any) => d.value === \"Yes\").length;\n    },\n    showClinicianButton() {\n      return !(UserService.isClinician() && UserService.isDoctor());\n    },\n  },\n  methods: {\n    async onFinish() {\n      if (this.action || this.refer) {\n        const encounter = await this.htn.createEncounter();\n        if (!encounter) return toastWarning(\"Unable to create encounter\");\n        if (this.refer) {\n          const obs = await this.htn.saveValueCodedObs(\n            \"Refer patient to clinician\",\n            \"Yes\"\n          )\n          if (!obs) return toastWarning(\"Unable to create Obs\");\n          this.gotoPatientDashboard();\n        } else {\n          const obs = await this.htn.saveValueTextObs(\n            \"Plan\",\n            this.action.label\n          );\n\n          if (!obs) return toastWarning(\"Unable to create Obs\")\n          const patientState = {\n            state: this.action.value,\n          }\n          \n          await this.htn.enrollPatient(patientState);\n\n          if (typeof this.action?.other?.action === 'function') {\n            return this.action.other.action()\n          } else {\n            this.nextTask()\n          }\n        }\n      } else {\n        toastWarning(\"Please select an action\");\n      }\n    },\n    referPatient() {\n      this.refer = true;\n      this.onFinish();\n    },\n    goToDiagnosis() {\n      return this.$router.push({\n        path: `/art/encounters/hypertension_diagnosis/${this.patientID}`,\n      })\n    },\n    async hasHyperTenstion() {\n      const ob = await ObservationService.getFirstValueCoded(\n        this.patientID,\n        \"Patient has hypertension\"\n      );\n      this.patientHasHyperTensionObs = `${ob}`.match(/yes|no/i) ? true : false\n    },\n    async isTransfered() {\n      const ob = await ObservationService.getFirstValueCoded(\n        this.patientID,\n        \"Transferred\"\n      );\n      this.patientFirstVisit = !ob\n    },\n    async getTreatmentStatus() {\n      const ob = await ObservationService.getFirstValueText(\n        this.patientID,\n        \"Treatment status\"\n      );\n      this.patientOnBPDrugs = ob && ob.match(/BP Drugs started/i) ? true : false;\n    },\n    async getProgramStatus() {\n      const programs: any[] = await ProgramService.getPatientPrograms(\n        this.patientID\n      );\n      this.isEnrolledInHTN =\n        programs.filter(\n          (program) => program.program.name === \"HYPERTENSION PROGRAM\"\n        ).length > 0;\n      if (this.isEnrolledInHTN) {\n        await this.programState();\n      }\n    },\n    async programState() {\n      const programs: any[] = await ProgramService.getPatientStates(\n        this.patientID, this.HTNProgramID\n      );\n      this.isAliveOnHTN =\n        programs.filter((program) => program.name === \"Alive\").length > 0;\n    },\n    async getRiskFactors() {\n      const concepts = ConceptService.getConceptsByCategory(\"risk factors\");\n      const j = concepts.map(async (concept) => {\n        const val = await ObservationService.getFirstValueCoded(\n          this.patientID,\n          concept.name\n        );\n        return {\n          concept: concept.name,\n          value: val,\n        }\n      })\n      return Promise.all(j);\n    },\n    formatBpTrailRows(trail: any) {\n      return Object.keys(trail).map(m => {\n        const date = HisDate.toStandardHisDisplayFormat(m);\n        this.currentDrugs = this.currentDrugs.concat(trail[m][\"drugs\"]);\n        const colorGrade = () => {\n          const grade: string = BPManagementService.getBpGrade(\n            parseInt(trail[m].sbp),\n            parseInt(trail[m].dbp)\n          )\n          return this.bpGradeColorMap[grade]\n        }\n        const style = {\n          background: colorGrade()\n        }\n        return [\n          table.tdDate(date, { style }),\n          table.td(trail[m].sbp, { style }),\n          table.td(trail[m].dbp, { style }),\n          table.td(trail[m][\"drugs\"].join(\", \"), { style }),\n          table.td(trail[m].note, { style })\n        ]\n      })\n    },\n    async showRiskFactors() {\n      const modal = await modalController.create({\n        component: RiskFactorModal,\n        backdropDismiss: false,\n        cssClass: \"large-modal\",\n        componentProps: {\n          factors: this.riskFactors,\n        },\n      });\n      modal.present();\n      const { data } = await modal.onDidDismiss();\n      if (!isEmpty(data)) {\n        this.riskFactors = data.map((d: any) => {\n          const val = d.isChecked === true ? \"Yes\" : \"No\";\n          return {\n            concept: d.concept,\n            value: val,\n          };\n        });\n      }\n    },\n    async alertTransferIn() {\n      const action = await infoActionSheet(\n        'Transfer in',\n        \"Does the patient want to transfer in for HTN management?\",\n        '',\n        [\n          { \n            name: 'Yes', \n            slot: 'end', \n            color: 'success'\n          },\n          { \n            name: 'No',  \n            slot: 'start', \n            color: 'danger'\n          }\n        ]\n      )\n      if(action === 'Yes') {\n        await this.enrollInHTN();\n        await this.setHtnTransferred('Yes')\n        this.patientFirstVisit = false;\n        await this.getItems();\n      } else {\n        await this.setHtnTransferred('No')\n        this.nextTask()\n      }\n    },\n    async enrollInHTN() {\n      try {\n        const program  = new PatientProgramService(this.patientID)\n        program.setProgramId(this.HTNProgramID)\n        program.setStateDate(ProgramService.getSessionDate())\n        program.setStateId(this.aliveState)\n        await program.enrollProgram()\n        await program.updateState()\n        this.isEnrolledInHTN = true\n        toastSuccess('Patient is now enrolled in HTN')\n      } catch (e) {\n        console.error(e)\n        toastWarning(e)\n      }\n    },\n    async setHtnTransferred(transferred: 'Yes' | 'No'){\n      const vitals = new VitalsService(this.patientID, this.providerID)\n      const encounter = await vitals.createEncounter()\n      if (!encounter) {\n        toastWarning('Unable to create patient transfer encounter')\n      } else {\n        const obs = await vitals.saveValueCodedObs('Transferred', transferred)\n        if (!obs) {\n          toastWarning('Unable to create observation Transferred for patient')\n        }\n      }\n    },\n    async getItems() {\n      if (this.currentDrugs.length > 0) {\n        this.items = [\n          {\n            label: \"Did not take prescribed drugs\",\n            value: \"on treatment\",\n            other: {\n              action: () => this.$router.push(`/art/encounters/bp_adherence/${this.patientID}`)\n            }\n          },\n          {\n            label: \"Continue drugs\",\n            value: \"on treatment\",\n            other: {\n              action: () => this.$router.push(`/art/encounters/bp_adherence/${this.patientID}`)\n            }\n          },\n          {\n            label: \"Review drugs\",\n            value: \"on treatment\",\n            other: {\n              action: () => this.$router.push(\n                `/art/encounters/bp_adherence/${this.patientID}?review=true`\n              )\n            }\n          },\n        ];\n      } else {\n        this.items = [\n          {\n            label: \"Lifestyle advice given\",\n            value: \"Lifestyle changes only\",\n          },\n          {\n            label: \"Not yet stable on ART\",\n            value: \"Symptomatic but not in treatment\",\n          },\n          {\n            label: \"Patient declining BP drugs \",\n            value: \"Symptomatic but not in treatment\",\n          },\n        ]\n        if (this.normatensive) {\n          this.items.push({\n            label: \"Return to annual screening\",\n            value: \"Alive\",\n          })\n        }\n        this.items.push({\n          label: \"Start anti hypertensives\",\n          value: \"On treatment\",\n          other: {\n            action: () => this.$router.push(\n              `/art/encounters/bp_prescription/${this.patientID}`\n            )\n          }\n        })\n      }\n    }\n  }\n})\n","import { render } from \"./BPManagement.vue?vue&type=template&id=35c7efac&ts=true\"\nimport script from \"./BPManagement.vue?vue&type=script&lang=ts\"\nexport * from \"./BPManagement.vue?vue&type=script&lang=ts\"\n\nimport exportComponent from \"/home/andrew-dev/Projects/HIS-Core/node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","import { AppEncounterService } from \"@/services/app_encounter_service\";\nimport { isArray } from \"lodash\";\nimport { Option } from '@/components/Forms/FieldInterface';\nexport class VitalsService extends AppEncounterService{\n  constructor(patientID: number, providerID: number) {\n    super(patientID, 6, providerID);\n  }\n  isNotEmptyandNumber(vital: Option) {\n    return `${vital.value}`.match(/^-?\\d+\\.?\\d*$/) ? null : [`Invalid entry for ${vital.label}`]\n  }\n  isNotEmptyandFloat(vital: Option) {\n    return `${vital.value}`.match(/^\\d{1,3}\\.\\d{1,5}$/) \n      ? null \n      : [`Invalid entry for ${vital.label}. Don't forget to add a decimal. e.g. 56.2 ${vital.other.modifier}`]\n  }\n  checkMinMax(val: Option, min: number, max: number) {\n    const p = [];\n    if (parseFloat(`${val.value}`) < min) {\n      p.push([`${val.label} entered is less than minimum ${min} ${val?.other?.modifier || ''}`])\n    }\n    if (parseFloat(`${val.value}`) > max) {\n      p.push([`${val.label} entered is greater than maximum ${max} ${val?.other?.modifier || ''}`])\n    }\n    return p.length > 0 ? p : null;\n  }\n  validateAll(vitals: Option[]) {\n    const p: any = [];\n    vitals.map((vital: any) => {\n      const j = this.validator(vital);\n      return isArray(j) ? p.push(j) : null\n    })\n    return p.length > 0 ? p : null;\n  }\n\n  mergeErrors(errors: any[]) {\n    const holder: any = [];\n    errors.forEach(element => {\n      if (isArray(element)) {\n        holder.push(element)\n      }\n    });\n    return holder.length > 0 ? holder : null\n  }\n  isValidBPReading(vital: any) {\n    const p = [];\n    const isValidBP =  `${vital.value}`.match(/^\\d{1,3}\\/\\d{1,3}$/g) ? null : ['Invalid BP reading']\n    p.push(isValidBP);\n    if(isValidBP == null) {\n      const value = `${vital.value}`.split('/');\n      \n      const bpSystolic = {\n        label: 'Systolic',\n        value: value[0]\n      };\n      const bpDiastolic = {\n        label: 'Diastolic',\n        value: value[1]\n      };\n      p.push(this.checkMinMax(bpDiastolic, 30, 200))\n      p.push(this.checkMinMax(bpSystolic, 40, 250))\n    }\n    return this.mergeErrors(p)\n  }\n  validator(vital: Option) {\n    const values = [\n      {\n        name: \"Weight\",\n        validator: (val: Option) => {\n          const emptyErrors = this.isNotEmptyandFloat(val);\n          const minErrors = this.checkMinMax(val, 2.0, 250.0);\n          return this.mergeErrors([emptyErrors, minErrors]); \n        },\n      },\n      {\n        name: \"Height\",\n        validator: (val: Option) => {\n          const errors = []\n          errors.push(this.isNotEmptyandNumber(val))\n          errors.push(this.checkMinMax(val, 40, 220))\n          return this.mergeErrors(errors); \n        },\n      }, {\n        name: \"BP\",\n        validator: (val: any) => {\n          return this.isValidBPReading(val)\n        },\n      }, {\n        name: \"Temp\",\n        validator: (val: any) => {\n          const emptyErrors = this.isNotEmptyandNumber(val);\n          const minErrors = this.checkMinMax(val, 30, 42);\n          return this.mergeErrors([emptyErrors, minErrors]); \n        },\n      }, {\n        name: \"SP02\",\n        validator: (val: any) => {\n          const minErrors = this.checkMinMax(val, 40, 100);\n          return this.mergeErrors([minErrors]); \n        },\n      }, {\n        name: \"Pulse\",\n        validator: (val: any) => {\n          const minErrors = this.checkMinMax(val, 50, 120);\n          return this.mergeErrors([minErrors]); \n        },\n      }\n    ]\n    const v = values.filter(element => {\n      return element.name === vital.label;\n    });\n    if (v.length > 0) {\n      return v[0].validator(vital);\n    }\n    return null\n  }\n}"],"sourceRoot":""}