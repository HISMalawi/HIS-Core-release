(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-25a8a20c"],{2679:function(e,t,n){},3822:function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var a=n("b85c"),r=n("2909"),o=n("3835"),c=n("d4ec"),i=n("bee2"),s=n("262e"),d=n("2caf"),l=(n("4fad"),n("99af"),n("b0c0"),n("fcd5")),u=function(e){Object(s["a"])(n,e);var t=Object(d["a"])(n);function n(){var e;return Object(c["a"])(this,n),e=t.call(this),e.regenerate=!1,e}return Object(i["a"])(n,[{key:"setRegenerate",value:function(e){this.regenerate=e}},{key:"requestHMIS15",value:function(){return this.getReport("generate_hmis_15_report",{request:"true"})}},{key:"requestHMIS17",value:function(){return this.getReport("generate_hmis_17_report",{request:"true"})}},{key:"renderResults",value:function(e){for(var t=[],n=1,a=0,c=Object.entries(e);a<c.length;a++){var i=Object(o["a"])(c[a],2),s=i[0],d=i[1],l=[],u=d,p={id:0,name:"",total:0,totalPatientIds:""};p.name=s;var b=0;p.id=n,n+=1;for(var m=0,f=Object.entries(u);m<f.length;m++){var O=Object(o["a"])(f[m],2),j=(O[0],O[1]),g=j;null!=g&&(b+=g.length,p.total=b,g.length&&(l.push.apply(l,Object(r["a"])(g)),p.totalPatientIds=l))}t.push(p)}return t}},{key:"getCSVString",value:function(e){var t,n="Diseases/Events/Conditions, #,\n",r=Object(a["a"])(e);try{for(r.s();!(t=r.n()).done;){var o=t.value,c="".concat(o.name,",").concat(o.total,",\n");n+=c}}catch(i){r.e(i)}finally{r.f()}return{CSVString:n}}}]),n}(l["d"])},"45d5":function(e,t,n){"use strict";n("ed57")},4974:function(e,t,n){"use strict";n("d221")},"7a8e":function(e,t,n){"use strict";n("2679")},8410:function(e,t,n){"use strict";n.r(t);var a=n("7a23"),r={id:"report-content"},o=Object(a["createVNode"])("div",{id:"print"},null,-1);function c(e,t,n,c,i,s){var d=Object(a["resolveComponent"])("ion-loading"),l=Object(a["resolveComponent"])("his-standard-form"),u=Object(a["resolveComponent"])("hmis-header"),p=Object(a["resolveComponent"])("hmis-template"),b=Object(a["resolveComponent"])("ion-content"),m=Object(a["resolveComponent"])("his-footer"),f=Object(a["resolveComponent"])("ion-page");return Object(a["openBlock"])(),Object(a["createBlock"])(a["Fragment"],null,[Object(a["createVNode"])(d,{"is-open":e.isLoading,message:"Please wait..."},null,8,["is-open"]),e.reportReady?Object(a["createCommentVNode"])("",!0):(Object(a["openBlock"])(),Object(a["createBlock"])(l,{key:0,onOnFinish:e.onPeriod,skipSummary:!0,fields:e.fields},null,8,["onOnFinish","fields"])),e.reportReady?(Object(a["openBlock"])(),Object(a["createBlock"])(f,{key:1},{default:Object(a["withCtx"])((function(){return[Object(a["createVNode"])(b,null,{default:Object(a["withCtx"])((function(){return[Object(a["createVNode"])("div",r,[Object(a["createVNode"])(u,{key:e.componentKey,reportName:e.reportName,ref:"header",periodLabel:e.periodLabel,periodDates:e.periodDates,clinicName:e.clinicName,totalOPDVisits:e.TotalOPDVisits},null,8,["reportName","periodLabel","periodDates","clinicName","totalOPDVisits"]),Object(a["createVNode"])(p,{key:e.componentKey,reportName:e.reportName,onDrillDown:e.onDrillDown,params:e.hmis15Data,periodDates:e.periodDates,ref:"rep"},null,8,["reportName","onDrillDown","params","periodDates"])])]})),_:1}),Object(a["createVNode"])(m,{btns:e.btns},null,8,["btns"])]})),_:1})):Object(a["createCommentVNode"])("",!0),o],64)}var i=n("1da1"),s=(n("96cf"),n("0f25")),d=n("8a30"),l=n("7920"),u=n("c2b0"),p=n("3822"),b=n("cda1"),m=n("9d7f"),f=n("9283"),O=Object(a["defineComponent"])({mixins:[u["a"]],components:{IonLoading:d["z"],HmisHeader:b["a"],HmisTemplate:m["a"],HisStandardForm:l["a"],HisFooter:s["a"],IonPage:d["D"],IonContent:d["n"]},data:function(){return{formData:{},componentKey:0,computedFormData:{},hmis15Data:{},btns:[],isLoading:!1,fields:[],reportID:-1,periodLabel:"Period",periodDates:"",reportName:"HMIS 17",TotalOPDVisits:0,clinicName:p["a"].getLocationName(),reportReady:!1}},created:function(){this.btns=this.getBtns(),this.fields=this.getDateDurationFields()},methods:{onPeriod:function(e,t){var n=arguments,a=this;return Object(i["a"])(regeneratorRuntime.mark((function r(){var o,c,i;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return o=n.length>2&&void 0!==n[2]&&n[2],a.componentKey+=1,a.formData=e,a.computedFormData=t,a.reportReady=!0,a.isLoading=!0,a.report=new p["a"],a.report.setRegenerate(o),a.report.setStartDate(f["b"].toStandardHisFormat(t.start_date)),a.report.setEndDate(f["b"].toStandardHisFormat(t.end_date)),a.periodDates=a.report.getReportPeriod(),r.prev=11,r.next=14,a.report.requestHMIS17();case 14:return c=r.sent,r.next=17,a.report.getClinicRegistrations();case 17:i=r.sent,c&&i&&(a.reportID="data",a.TotalOPDVisits=i.length,a.hmis15Data=c),r.next=24;break;case 21:r.prev=21,r.t0=r["catch"](11),console.log(r.t0);case 24:return r.prev=24,a.isLoading=!1,r.finish(24);case 27:case"end":return r.stop()}}),r,null,[[11,21,24,27]])})))()},getBtns:function(){var e=this;return[{name:"CSV",size:"large",slot:"start",color:"primary",visible:!0,onClick:function(){var t=Object(i["a"])(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:n=e.$refs.rep,n.onDownload();case 2:case"end":return t.stop()}}),t)})));function n(){return t.apply(this,arguments)}return n}()},{name:"PDF",size:"large",slot:"start",color:"primary",visible:!0,onClick:function(){return e.exportToCustomPDF(e.reportName)}},{name:"Back",size:"large",slot:"end",color:"warning",visible:!0,onClick:function(){return e.reportReady=!1}},{name:"Refresh",size:"large",slot:"end",color:"warning",visible:!0,onClick:function(){var t=Object(i["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.onPeriod(e.formData,e.computedFormData,!0);case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)})));function n(){return t.apply(this,arguments)}return n}()},{name:"Finish",size:"large",slot:"end",color:"success",visible:!0,onClick:function(){return e.$router.push({path:"/"})}}]}}}),j=n("d959"),g=n.n(j);const h=g()(O,[["render",c]]);t["default"]=h},"9d7f":function(e,t,n){"use strict";n("b0c0");var a=n("7a23"),r=Object(a["withScopeId"])("data-v-33698d3c");Object(a["pushScopeId"])("data-v-33698d3c");var o={class:"my-table",style:{margin:"auto",width:"95%","margin-top":"3%","margin-bottom":"3%"}},c=Object(a["createVNode"])("tr",null,[Object(a["createVNode"])("td",{colspan:"2",class:"td-text-align-left",style:{width:"min-content",padding:"1.5%"}},"Diseases/Events/Conditions"),Object(a["createVNode"])("td",{class:"td-text-align-left",style:{"text-align":"center"}},"UNVERIFIED"),Object(a["createVNode"])("td",{class:"td-text-align-left",style:{"text-align":"center"}},"VERIFIED")],-1),i={class:"td-wd"},s={class:"td-text-align-left",style:{width:"60.3%",padding:"1.5%"}},d=Object(a["createVNode"])("td",null,null,-1);Object(a["popScopeId"])();var l=r((function(e,t,n,r,l,u){var p=Object(a["resolveComponent"])("hmis-dummy");return Object(a["openBlock"])(),Object(a["createBlock"])("table",o,[c,e.show?(Object(a["openBlock"])(),Object(a["createBlock"])(p,{key:0})):Object(a["createCommentVNode"])("",!0),(Object(a["openBlock"])(!0),Object(a["createBlock"])(a["Fragment"],null,Object(a["renderList"])(e.conditions,(function(t,n){return Object(a["openBlock"])(),Object(a["createBlock"])("tr",{key:n},[Object(a["createVNode"])("td",i,Object(a["toDisplayString"])(t.id),1),Object(a["createVNode"])("td",s,Object(a["toDisplayString"])(t.name),1),Object(a["createVNode"])("td",{id:"total",onClick:function(n){e.onDrillDown(t.name,t.totalPatientIds)}},[Object(a["createVNode"])("a",null,Object(a["toDisplayString"])(t.total),1)],8,["onClick"]),d])})),128))])})),u=(n("99af"),n("d3b7"),n("3ca3"),n("ddb0"),n("2b3d"),n("9861"),Object(a["withScopeId"])("data-v-783c8a37"));Object(a["pushScopeId"])("data-v-783c8a37");var p={class:"td-text-align-left",style:{width:"60.3%",padding:"1.5%"}},b=Object(a["createVNode"])("td",null,"0",-1),m=Object(a["createVNode"])("td",null,null,-1);Object(a["popScopeId"])();var f=u((function(e,t,n,r,o,c){return Object(a["openBlock"])(!0),Object(a["createBlock"])(a["Fragment"],null,Object(a["renderList"])(e.conditions,(function(e,t){return Object(a["openBlock"])(),Object(a["createBlock"])("tr",{key:t},[Object(a["createVNode"])("td",null,Object(a["toDisplayString"])(t),1),Object(a["createVNode"])("td",p,Object(a["toDisplayString"])(e),1),b,m])})),128)})),O=Object(a["defineComponent"])({data:function(){return{conditions:["Sexually transmitted infections-new cases","Syphilis in pregnancy","Opportunistic infection - new cases","Acute respiratory infections - new cases (U5)","Diarrhoea non - bloody -new cases (under5)","Malnutrition - new case (under 5)","Cholera - confirmed new cases","Malnutrition  U/5","Measles - confirmed new cases","Acute Flaccid paralysis -confirmed new cases","Ebola - confirmed new cases","Meningococal meningitis - confimed new cases","Plague - confirmed new cases","Rabies - confirmed new cases","Yellow fever - confirmed new cases","Dysentery - new cases","Eye infections - new cases","Ear infections - new cases","Skin infections - new cases","Oral conditions","Schistosomiasis - new cases","Leprosy - new cases","Common injuries and woulds (except RTA)","Number of road traffic accidents"]}}}),j=(n("45d5"),n("d959")),g=n.n(j);const h=g()(O,[["render",f],["__scopeId","data-v-783c8a37"]]);var v=h,y=n("3822"),D=n("1c74"),w=n("5a0c"),N=n.n(w),V=Object(a["defineComponent"])({components:{HmisDummy:v},data:function(){return{show:!0,conditions:[]}},props:["params","periodDates","quarter","onDrillDown","reportName"],methods:{renderResults:function(){var e=new y["a"],t=e.renderResults(this.params);t.length&&(this.conditions=t,this.show=!1)},onDownload:function(){var e=new y["a"],t=e.getCSVString(this.conditions),n=t.CSVString;n+="\n          Date Created: ".concat(N()().format("DD/MMM/YYYY HH:MM:ss"),"\n          His-Core Version: ").concat(D["e"].getCoreVersion(),"\n          API Version: ").concat(D["e"].getApiVersion(),"\n          Report Period: ").concat(this.periodDates,"\n          Site: ").concat(D["e"].getLocationName(),"\n          Site UUID: ").concat(D["e"].getSiteUUID());var a=new Blob([n],{type:"text/csv;charset=utf-8;"}),r="".concat(D["e"].getLocationName()," ").concat(this.reportName," ").concat(this.quarter);if(navigator.msSaveBlob)navigator.msSaveBlob(a,"exportFilename");else{var o=document.createElement("a");o.href=window.URL.createObjectURL(a),o.setAttribute("download","".concat(r,".csv")),document.body.appendChild(o),o.click(),document.body.removeChild(o)}}},watch:{params:{immediate:!0,handler:function(){this.renderResults()}}}});n("4974");const k=g()(V,[["render",l],["__scopeId","data-v-33698d3c"]]);t["a"]=k},cda1:function(e,t,n){"use strict";var a=n("7a23"),r=Object(a["withScopeId"])("data-v-3f7e6ba6");Object(a["pushScopeId"])("data-v-3f7e6ba6");var o={style:{margin:"auto",width:"95%","margin-top":"1%"}},c={id:""},i={colspan:"5",id:"",style:{"border-right-style":"solid","font-weight":"bold","text-align":"center"}},s=Object(a["createVNode"])("tr",null,[Object(a["createVNode"])("td",{class:"td-text-align-left"},"Country:"),Object(a["createVNode"])("td",{class:"td-text-align-left"},"Malawi")],-1),d=Object(a["createVNode"])("td",{class:"td-text-align-left"},"Reporting Facility Name:",-1),l={class:"td-text-align-left"},u={class:"td-text-align-left"},p={class:"td-text-align-left"},b=Object(a["createVNode"])("td",{class:"td-text-align-left"},"Total OPD Visits: ",-1),m={class:"td-text-align-left"},f={id:"total_visits"};Object(a["popScopeId"])();var O=r((function(e,t,n,r,O,j){return Object(a["openBlock"])(),Object(a["createBlock"])("table",o,[Object(a["createVNode"])("tr",c,[Object(a["createVNode"])("td",i,Object(a["toDisplayString"])(n.reportName),1)]),s,Object(a["createVNode"])("tr",null,[d,Object(a["createVNode"])("td",l,Object(a["toDisplayString"])(n.clinicName),1)]),Object(a["createVNode"])("tr",null,[Object(a["createVNode"])("td",u,Object(a["toDisplayString"])(n.periodLabel),1),Object(a["createVNode"])("td",p,Object(a["toDisplayString"])(n.periodDates),1)]),Object(a["createVNode"])("tr",null,[b,Object(a["createVNode"])("td",m,[Object(a["createVNode"])("span",f,Object(a["toDisplayString"])(n.totalOPDVisits),1)])])])})),j=(n("a9e3"),{props:{clinicName:{type:String,default:""},reportparams:{type:Object,required:!0},totalOPDVisits:{type:Number,required:!0},reportName:{type:String,required:!0},periodLabel:{type:String,required:!0},periodDates:{type:String,required:!0}}}),g=(n("7a8e"),n("d959")),h=n.n(g);const v=h()(j,[["render",O],["__scopeId","data-v-3f7e6ba6"]]);t["a"]=v},d221:function(e,t,n){},ed57:function(e,t,n){}}]);
//# sourceMappingURL=chunk-25a8a20c.f2418852.js.map