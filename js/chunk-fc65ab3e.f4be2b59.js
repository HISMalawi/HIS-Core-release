(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-fc65ab3e"],{"1d25":function(e,t,o){"use strict";o.r(t);var a=o("7a23");const n={class:" his-lg-text ion-padding-start"},c=Object(a["createTextVNode"])(" Dashboard "),r=Object(a["createTextVNode"])(" Refresh ");function l(e,t,o,l,i,d){const s=Object(a["resolveComponent"])("ion-button"),u=Object(a["resolveComponent"])("dashboard-card"),b=Object(a["resolveComponent"])("ion-col"),p=Object(a["resolveComponent"])("ion-row"),O=Object(a["resolveComponent"])("line-chart"),j=Object(a["resolveComponent"])("ion-grid"),h=Object(a["resolveComponent"])("layout");return Object(a["openBlock"])(),Object(a["createBlock"])(h,null,{default:Object(a["withCtx"])(()=>[Object(a["createVNode"])("h1",n,[c,Object(a["createVNode"])(s,{class:"ion-margin-end ion-float-right",onClick:t[1]||(t[1]=()=>e.loadData(!0))},{default:Object(a["withCtx"])(()=>[r]),_:1})]),Object(a["createVNode"])(j,null,{default:Object(a["withCtx"])(()=>[Object(a["createVNode"])(p,null,{default:Object(a["withCtx"])(()=>[Object(a["createVNode"])(b,{"size-lg":"3"},{default:Object(a["withCtx"])(()=>[Object(a["createVNode"])(u,{value:e.missedAppointments,label:"Missed Appointments",color:"primary",icon:e.calendar},null,8,["value","icon"])]),_:1}),Object(a["createVNode"])(b,{"size-lg":"3"},{default:Object(a["withCtx"])(()=>[Object(a["createVNode"])(u,{value:e.appointmentsDue,label:"Appointments Due",color:"success",icon:e.alarm},null,8,["value","icon"])]),_:1}),Object(a["createVNode"])(b,{"size-lg":"3"},{default:Object(a["withCtx"])(()=>[Object(a["createVNode"])(u,{value:e.dueForVL,label:"Due for Viral Load",color:"secondary",icon:e.time},null,8,["value","icon"])]),_:1}),Object(a["createVNode"])(b,{"size-lg":"3"},{default:Object(a["withCtx"])(()=>[Object(a["createVNode"])(u,{value:e.defaulters,label:"Defaulters (this Quarter)",color:"danger",icon:e.people},null,8,["value","icon"])]),_:1})]),_:1}),Object(a["createVNode"])(p,null,{default:Object(a["withCtx"])(()=>[Object(a["createVNode"])(b,{"size-lg":"3"},{default:Object(a["withCtx"])(()=>[Object(a["createVNode"])(u,{label:"Patients on DTG",value:e.patientsOnDTG,class:"his-card"},null,8,["value"]),Object(a["createVNode"])(u,{label:"TX Current (30 Days)",value:e.txCurrent30,class:"his-card"},null,8,["value"]),Object(a["createVNode"])(u,{label:"TX Current (60 Days)",value:e.txCurrent60,class:"his-card"},null,8,["value"])]),_:1}),Object(a["createVNode"])(b,{"size-lg":"9"},{default:Object(a["withCtx"])(()=>[Object(a["createVNode"])(O,{options:e.chartOptions,series:e.chartSeries},null,8,["options","series"])]),_:1})]),_:1})]),_:1})]),_:1})}var i=o("8d56"),d=o("8a30");const s=Object(a["withScopeId"])("data-v-4e012de6"),u=s((function(e,t,o,n,c,r){const l=Object(a["resolveComponent"])("ion-card-title"),i=Object(a["resolveComponent"])("ion-spinner"),d=Object(a["resolveComponent"])("ion-card-subtitle"),u=Object(a["resolveComponent"])("ion-icon"),b=Object(a["resolveComponent"])("ion-card-content"),p=Object(a["resolveComponent"])("ion-card");return Object(a["openBlock"])(),Object(a["createBlock"])(p,{color:e.color},{default:s(()=>[Object(a["createVNode"])(b,{class:"ion-padding"},{default:s(()=>[Object(a["createVNode"])(l,{class:"ion-padding"},{default:s(()=>[Object(a["createTextVNode"])(Object(a["toDisplayString"])(e.label),1)]),_:1}),e.isLoading?(Object(a["openBlock"])(),Object(a["createBlock"])(d,{key:0,class:"ion-padding"},{default:s(()=>[Object(a["createVNode"])(i,{name:"bubbles",color:e.loaderColor},null,8,["color"])]),_:1})):(Object(a["openBlock"])(),Object(a["createBlock"])(d,{key:1,class:"ion-padding"},{default:s(()=>[Object(a["createTextVNode"])(Object(a["toDisplayString"])(e.value),1)]),_:1})),e.canShowIcon?(Object(a["openBlock"])(),Object(a["createBlock"])(u,{key:2,icon:e.icon,class:"ion-float-right"},null,8,["icon"])):Object(a["createCommentVNode"])("",!0)]),_:1})]),_:1},8,["color"])}));var b=Object(a["defineComponent"])({name:"DashboardCard",props:{value:{type:Number,default:-1},label:{type:String,required:!0},icon:{type:String},color:{type:String,default:"light"}},components:{IonCard:d["IonCard"],IonCardContent:d["IonCardContent"],IonCardTitle:d["IonCardTitle"],IonCardSubtitle:d["IonCardSubtitle"],IonSpinner:d["IonSpinner"],IonIcon:d["IonIcon"]},setup(e){const t=Object(a["computed"])(()=>-1===e.value),o=Object(a["computed"])(()=>{var t;return!(null===(t=e.icon)||void 0===t||!t.length)}),n=Object(a["computed"])(()=>"light"===e.color?"primary":"light");return{isLoading:t,canShowIcon:o,loaderColor:n}}}),p=(o("7d1e"),o("d959")),O=o.n(p);const j=O()(b,[["render",u],["__scopeId","data-v-4e012de6"]]);var h=j,m=o("ff79"),C=o("9283"),f=o("8e8b"),g=o("2845"),v=o("c5be"),N=o("2ef0"),I=Object(a["defineComponent"])({name:"Dashboard",inheritAttrs:!1,components:{Layout:i["a"],IonGrid:d["IonGrid"],IonRow:d["IonRow"],IonCol:d["IonCol"],DashboardCard:h,LineChart:v["a"],IonButton:d["IonButton"]},setup(){const e=C["c"].toStandardHisFormat(new Date),t=C["c"].getDateQuarter(e),o=C["c"].add(e,"day",1).format(C["b"]),n=Object(a["ref"])(),c=Object(a["ref"])(),r=Object(a["ref"])(),l=Object(a["ref"])(),i=Object(a["ref"])(),d=Object(a["ref"])(),s=Object(a["ref"])(),u=Object(a["ref"])([]),b=Object(a["ref"])({}),p=e=>{if(Object(N["isEmpty"])(e))return;const t=Object.keys(e),o=[],a=[],n=[];t.forEach(t=>{n.push(C["c"].toStandardHisDisplayFormat(t)),o.push(e[t].complete),a.push(e[t].incomplete)}),b.value={title:{text:"Complete / incomplete visits",align:"left"},xaxis:{categories:n,tickAmount:30,labels:{show:!0,rotate:-75}}},u.value=[{name:"Complete Visits",data:o},{name:"Incomplete Visits",data:a}]},O=async(a=!1)=>{i.value=(await f["a"].get(g["a"].PATIENT_ON_DTG,{quarter:t,reload:a})).length,p(await f["a"].get(g["a"].PATIENT_VISITS,{quarter:t,reload:a})),c.value=(await f["a"].get(g["a"].APPOINTMENTS_DUE,{date:o,reload:a})).length,n.value=(await f["a"].get(g["a"].MISSED_APPOINTMENTS,{date:e,quarter:t,reload:a})).length,d.value=(await f["a"].get(g["a"].TX_CURRENT_30,{quarter:t,reload:a})).length,s.value=(await f["a"].get(g["a"].TX_CURRENT_60,{quarter:t,reload:a})).length,r.value=(await f["a"].get(g["a"].DUE_FOR_VL,{quarter:t,reload:a})).length,l.value=(await f["a"].get(g["a"].DEFAULTERS,{date:e,quarter:{...t,end:e},reload:a})).length};return Object(a["onMounted"])(async()=>O()),{people:m["people"],calendar:m["calendar"],alarm:m["alarm"],time:m["time"],missedAppointments:n,appointmentsDue:c,dueForVL:r,defaulters:l,patientsOnDTG:i,txCurrent30:d,txCurrent60:s,chartOptions:b,chartSeries:u,loadData:O}}});const w=O()(I,[["render",l]]);t["default"]=w},"4e17":function(e,t,o){},"7d1e":function(e,t,o){"use strict";o("4e17")},c5be:function(e,t,o){"use strict";var a=o("7a23");function n(e,t,o,n,c,r){const l=Object(a["resolveComponent"])("apex-chart"),i=Object(a["resolveComponent"])("ion-card-content"),d=Object(a["resolveComponent"])("ion-card");return Object(a["openBlock"])(),Object(a["createBlock"])(d,{class:"his-card",style:{height:"100%"}},{default:Object(a["withCtx"])(()=>[Object(a["createVNode"])(i,null,{default:Object(a["withCtx"])(()=>[Object(a["createVNode"])(l,{width:"100%",height:e.height,type:"line",options:e.chartOptions,series:e.series,onClick:t[1]||(t[1]=(t,o,a)=>e.$emit("pointSelection",a))},null,8,["height","options","series"])]),_:1})]),_:1})}var c=o("8a30"),r=o("ae27"),l=o.n(r),i=Object(a["defineComponent"])({name:"LineChart",props:{series:{type:Array,default:()=>[]},options:{type:Object,default:()=>[]},height:{type:[String,Number],default:560},placeholder:{type:String,default:"Loading data..."}},components:{IonCard:c["IonCard"],IonCardContent:c["IonCardContent"],ApexChart:l.a},emits:["pointSelection"],setup(e){const t=Object(a["computed"])(()=>{const t={chart:{id:"line-chart",type:"line"},xaxis:{type:"datetime",tickAmount:2,labels:{show:!0,rotate:-75}},tooltip:{x:{format:"dd/MMM/yyyy"}},title:{text:"Line Chart",align:"left"},noData:{text:e.placeholder,align:"center",verticalAlign:"middle",offsetX:0,offsetY:0,style:{color:"#a7a7a7",fontSize:"25px",fontFamily:"Helvetica"}}};for(const o in e.options)t[o]={...t[o],...e.options[o]};return t});return{chartOptions:t}}}),d=o("d959"),s=o.n(d);const u=s()(i,[["render",n]]);t["a"]=u}}]);
//# sourceMappingURL=chunk-fc65ab3e.f4be2b59.js.map