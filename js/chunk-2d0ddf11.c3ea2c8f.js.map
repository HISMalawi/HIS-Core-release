{"version":3,"sources":["webpack:///./src/apps/OPD/views/reports/moh/HMIS/HMIS17.vue?95ad","webpack:///./src/apps/OPD/views/reports/moh/HMIS/HMIS17.vue","webpack:///./src/apps/OPD/views/reports/moh/HMIS/HMIS17.vue?3be5"],"names":["_hoisted_1","id","_hoisted_2","_createVNode","render","_ctx","_cache","$props","$setup","$data","$options","_component_ion_loading","_resolveComponent","_component_his_standard_form","_component_hmis_header","_component_hmis_template","_component_ion_content","_component_his_footer","_component_ion_page","_openBlock","_createBlock","_Fragment","isLoading","message","reportReady","_createCommentVNode","key","onOnFinish","onPeriod","skipSummary","fields","default","_withCtx","componentKey","reportName","ref","periodLabel","periodDates","clinicName","totalOPDVisits","TotalOPDVisits","onDrillDown","params","hmis15Data","_","btns","defineComponent","mixins","ReportMixinVue","components","IonLoading","HmisHeader","HmisTemplate","HisStandardForm","HisFooter","IonPage","IonContent","data","formData","computedFormData","reportID","HMISReportService","getLocationName","created","this","getBtns","getDateDurationFields","methods","form","config","regenerate","report","setRegenerate","setStartDate","HisDate","toStandardHisFormat","start_date","setEndDate","end_date","getReportPeriod","requestHMIS17","hmis","getClinicRegistrations","visits","length","console","log","name","size","slot","color","visible","onClick","rep","$refs","onDownload","exportToCustomPDF","$router","push","path","__exports__"],"mappings":"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","file":"js/chunk-2d0ddf11.c3ea2c8f.js","sourcesContent":["import { resolveComponent as _resolveComponent, createVNode as _createVNode, openBlock as _openBlock, createBlock as _createBlock, createCommentVNode as _createCommentVNode, withCtx as _withCtx, Fragment as _Fragment } from \"vue\"\n\nconst _hoisted_1 = { id: \"report-content\" }\nconst _hoisted_2 = /*#__PURE__*/_createVNode(\"div\", { id: \"print\" }, null, -1)\n\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  const _component_ion_loading = _resolveComponent(\"ion-loading\")\n  const _component_his_standard_form = _resolveComponent(\"his-standard-form\")\n  const _component_hmis_header = _resolveComponent(\"hmis-header\")\n  const _component_hmis_template = _resolveComponent(\"hmis-template\")\n  const _component_ion_content = _resolveComponent(\"ion-content\")\n  const _component_his_footer = _resolveComponent(\"his-footer\")\n  const _component_ion_page = _resolveComponent(\"ion-page\")\n\n  return (_openBlock(), _createBlock(_Fragment, null, [\n    _createVNode(_component_ion_loading, {\n      \"is-open\": _ctx.isLoading,\n      message: \"Please wait...\"\n    }, null, 8, [\"is-open\"]),\n    (!_ctx.reportReady)\n      ? (_openBlock(), _createBlock(_component_his_standard_form, {\n          key: 0,\n          onOnFinish: _ctx.onPeriod,\n          skipSummary: true,\n          fields: _ctx.fields\n        }, null, 8, [\"onOnFinish\", \"fields\"]))\n      : _createCommentVNode(\"\", true),\n    (_ctx.reportReady)\n      ? (_openBlock(), _createBlock(_component_ion_page, { key: 1 }, {\n          default: _withCtx(() => [\n            _createVNode(_component_ion_content, null, {\n              default: _withCtx(() => [\n                _createVNode(\"div\", _hoisted_1, [\n                  _createVNode(_component_hmis_header, {\n                    key: _ctx.componentKey,\n                    reportName: _ctx.reportName,\n                    ref: \"header\",\n                    periodLabel: _ctx.periodLabel,\n                    periodDates: _ctx.periodDates,\n                    clinicName: _ctx.clinicName,\n                    totalOPDVisits: _ctx.TotalOPDVisits\n                  }, null, 8, [\"reportName\", \"periodLabel\", \"periodDates\", \"clinicName\", \"totalOPDVisits\"]),\n                  _createVNode(_component_hmis_template, {\n                    key: _ctx.componentKey,\n                    reportName: _ctx.reportName,\n                    onDrillDown: _ctx.onDrillDown,\n                    params: _ctx.hmis15Data,\n                    periodDates: _ctx.periodDates,\n                    ref: \"rep\"\n                  }, null, 8, [\"reportName\", \"onDrillDown\", \"params\", \"periodDates\"])\n                ])\n              ]),\n              _: 1\n            }),\n            _createVNode(_component_his_footer, { btns: _ctx.btns }, null, 8, [\"btns\"])\n          ]),\n          _: 1\n        }))\n      : _createCommentVNode(\"\", true),\n    _hoisted_2\n  ], 64 /* STABLE_FRAGMENT */))\n}","\nimport { defineComponent } from \"vue\";\nimport HisFooter from \"@/components/HisDynamicNavFooter.vue\";\nimport { IonPage, IonContent, IonLoading } from \"@ionic/vue\"\nimport { Field } from '@/components/Forms/FieldInterface'\nimport HisStandardForm from \"@/components/Forms/HisStandardForm.vue\";\nimport ReportMixinVue from \"../../ReportMixin.vue\";\nimport { HMISReportService } from \"@/apps/OPD/services/hmis_report_service\"\nimport HmisHeader from \"@/apps/OPD/views/reports/moh/HMIS/HMISHeader.vue\"\nimport HmisTemplate from \"@/apps/OPD/views/reports/moh/HMIS/HMISTemplate.vue\"\nimport HisDate from \"@/utils/Date\"\n\nexport default defineComponent({\n  mixins: [ReportMixinVue],\n  components: { IonLoading, HmisHeader, HmisTemplate, HisStandardForm, HisFooter, IonPage, IonContent },\n  data: () => ({\n    formData: {} as any,\n    componentKey: 0 as number,\n    computedFormData: {} as any,\n    hmis15Data: {} as any,\n    btns: [] as Array<any>,\n    isLoading: false as boolean,\n    fields: [] as Array<Field>,\n    reportID: -1 as any,\n    periodLabel: 'Period',\n    periodDates: '' as string,\n    reportName: 'HMIS 17',\n    TotalOPDVisits: 0 as number,\n    clinicName: HMISReportService.getLocationName(),\n    reportReady: false as boolean,\n  }),\n  created() {\n    this.btns = this.getBtns()\n    this.fields = this.getDateDurationFields()\n  },\n  methods: {\n    async onPeriod(form: any, config: any, regenerate=false) {\n      this.componentKey += 1\n      this.formData = form\n      this.computedFormData = config\n      this.reportReady = true \n      this.isLoading = true\n      this.report = new HMISReportService()\n      this.report.setRegenerate(regenerate)\n      this.report.setStartDate(HisDate.toStandardHisFormat(config.start_date))\n      this.report.setEndDate(HisDate.toStandardHisFormat(config.end_date))\n      this.periodDates = this.report.getReportPeriod()\n      try {\n        const hmis = await this.report.requestHMIS17()\n        const visits = await this.report.getClinicRegistrations()\n        if(hmis && visits) {\n          this.reportID = \"data\"\n          this.TotalOPDVisits = visits.length\n          this.hmis15Data = hmis\n        }\n      } catch (error) {\n        console.log(error)\n      } finally {\n        this.isLoading = false\n      }\n    },\n    getBtns() {\n      return  [\n        {\n          name: \"CSV\",\n          size: \"large\",\n          slot: \"start\",\n          color: \"primary\",\n          visible: true,\n          onClick: async () => {\n            const rep = this.$refs.rep as any\n            rep.onDownload()\n          }\n        },\n        {\n          name: \"PDF\",\n          size: \"large\",\n          slot: \"start\",\n          color: \"primary\",\n          visible: true,\n          onClick: () => this.exportToCustomPDF(this.reportName)\n        },\n        {\n          name: \"Back\",\n          size: \"large\",\n          slot: \"end\",\n          color: \"warning\",\n          visible: true,\n          onClick: () => this.reportReady = false\n        },\n        {\n          name: \"Refresh\",\n          size: \"large\",\n          slot: \"end\",\n          color: \"warning\",\n          visible: true,\n          onClick: async () => await this.onPeriod(this.formData, this.computedFormData, true)\n        },\n        {\n          name: \"Finish\",\n          size: \"large\",\n          slot: \"end\",\n          color: \"success\",\n          visible: true,\n          onClick: () => this.$router.push({ path:'/' })\n        }\n      ]   \n    }\n  }\n})\n","import { render } from \"./HMIS17.vue?vue&type=template&id=09a54a77&ts=true\"\nimport script from \"./HMIS17.vue?vue&type=script&lang=ts\"\nexport * from \"./HMIS17.vue?vue&type=script&lang=ts\"\n\nimport exportComponent from \"/home/daniel/local-repos/HIS-Core/node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__"],"sourceRoot":""}