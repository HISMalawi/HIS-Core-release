(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-5d6cf758","chunk-8a6e8a76"],{"0481":function(e,t,n){"use strict";var r=n("23e7"),a=n("a2bf"),o=n("7b0b"),u=n("50c4"),i=n("a691"),c=n("65f0");r({target:"Array",proto:!0},{flat:function(){var e=arguments.length?arguments[0]:void 0,t=o(this),n=u(t.length),r=c(t,0);return r.length=a(r,t,t,n,0,void 0===e?1:i(e)),r}})},"0690":function(e,t,n){"use strict";n.d(t,"a",(function(){return m}));var r=n("1da1"),a=n("d4ec"),o=n("bee2"),u=n("262e"),i=n("2caf"),c=(n("96cf"),n("d3b7"),n("d81d"),n("4de4"),n("caad"),n("2532"),n("25f0"),n("cc6f")),l=n("9283"),s=n("2ef0"),d=n("32b3"),p=n("5a0c"),f=n.n(p),m=function(e){Object(u["a"])(n,e);var t=Object(i["a"])(n);function n(e,r){var o;return Object(a["a"])(this,n),o=t.call(this,e,68,r),o.lastDrugs=[],o.lastReceiptDate="",o}return Object(o["a"])(n,[{key:"loadPreviousDrugs",value:function(){var e=Object(r["a"])(regeneratorRuntime.mark((function e(){var t,n,r,a,o=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t=new Date(this.date),t.setDate(t.getDate()-1),n=function(e){return l["c"].toStandardHisFormat(e)},e.next=5,c["a"].getJson("patients/".concat(this.patientID,"/drugs_received"),{date:n(t)});case 5:r=e.sent,r&&(this.lastReceiptDate=r.reduce((function(e,t){return!e||new Date(n(t.order.start_date))>new Date(e)?n(t.order.start_date):e}),null),a=d["a"].htnDrugReferences().map((function(e){return e.drug_id})),this.lastDrugs=r.filter((function(e){return!a.includes(e.drug["drug_id"])&&n(e.order.start_date)===o.lastReceiptDate})));case 7:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"getReceiptDate",value:function(){return this.lastReceiptDate}},{key:"getLastDrugs",value:function(){return this.lastDrugs}},{key:"receivedDrugsBefore",value:function(){return!Object(s["isEmpty"])(this.lastDrugs)}},{key:"buildPillCountObs",value:function(e,t){return this.buildValueNumber("Number of tablets brought to clinic",t,null,e)}},{key:"buildAdherenceObs",value:function(){var e=Object(r["a"])(regeneratorRuntime.mark((function e(t,n,r){var a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,c["a"].getConceptID("Drug adherence",!0);case 2:return a=e.sent,e.abrupt("return",{concept_id:a,value_numeric:r,value_drug:n,value_modifier:"%",order_id:t,person_id:this.patientID,obs_datetime:c["a"].getSessionDate()});case 4:case"end":return e.stop()}}),e,this)})));function t(t,n,r){return e.apply(this,arguments)}return t}()},{key:"isAdherenceGood",value:function(e){return e>=95&&e<=105}},{key:"calculateAdherence",value:function(e,t,n){return Math.round(100*(e-t)/(e-n))}},{key:"calculateExpected",value:function(e,t,n,r){var a="QW"===r?"week":"day",o=this.calcTimeElapsed(n,a);return e-o*parseFloat(t.toString())}},{key:"calcTimeElapsed",value:function(e,t){return f()(this.date).diff(e,t)}},{key:"calculateUnaccountedOrMissed",value:function(e,t){var n=parseFloat(e)-parseFloat(t);return n<0?-1*n+" missed":n+" unacc"}}]),n}(c["a"])},"0cb1":function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var r=n("bee2"),a=n("d4ec"),o=n("262e"),u=n("2caf"),i=n("cc6f"),c=function(e){Object(o["a"])(n,e);var t=Object(u["a"])(n);function n(e,r){return Object(a["a"])(this,n),t.call(this,e,57,r)}return Object(r["a"])(n)}(i["a"])},"1f9a":function(e,t,n){"use strict";n.d(t,"a",(function(){return v}));var r=n("5530"),a=n("1da1"),o=n("d4ec"),u=n("bee2"),i=n("262e"),c=n("2caf"),l=(n("d3b7"),n("ddb0"),n("96cf"),n("1c74")),s=n("ad60"),d=n("d10e"),p=n("45eb"),f=n("7e84"),m=function(e){Object(i["a"])(n,e);var t=Object(c["a"])(n);function n(){return Object(o["a"])(this,n),t.call(this)}return Object(u["a"])(n,null,[{key:"create",value:function(e){return Object(p["a"])(Object(f["a"])(n),"postJson",this).call(this,"/person_attributes",e)}}]),n}(l["e"]),b=n("4db7"),v=function(e){Object(i["a"])(n,e);var t=Object(c["a"])(n);function n(){var e;return Object(o["a"])(this,n),e=t.call(this),e.personId=0,e}return Object(u["a"])(n,[{key:"getPersonID",value:function(){return this.personId}},{key:"setPersonID",value:function(e){this.personId=e}},{key:"registerPatient",value:function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(t,n){var r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.createPerson(t);case 2:return e.next=4,this.createPersonAttributes(n);case 4:return e.next=6,this.createPatient();case 6:return r=e.sent,e.next=9,this.printPatient();case 9:return e.abrupt("return",r);case 10:case"end":return e.stop()}}),e,this)})));function t(t,n){return e.apply(this,arguments)}return t}()},{key:"registerGuardian",value:function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",this.createPerson(t));case 1:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"updatePerson",value:function(e){return new d["a"](e).update(this.personId)}},{key:"createPerson",value:function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,new d["a"](t).create();case 2:return n=e.sent,this.personId=n.person_id,e.abrupt("return",n);case 5:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"createPatient",value:function(){return s["a"].createPatient(this.personId)}},{key:"createPersonAttributes",value:function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:e.t0=regeneratorRuntime.keys(t);case 1:if((e.t1=e.t0()).done){e.next=7;break}return n=e.t1.value,e.next=5,m.create(Object(r["a"])(Object(r["a"])({},t[n]),{},{person_id:this.personId}));case 5:e.next=1;break;case 7:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"printPatient",value:function(){return new b["a"](this.personId).printNidLbl()}}]),n}(l["e"])},"2cef":function(e,t,n){"use strict";n.d(t,"a",(function(){return d}));var r=n("1da1"),a=n("d4ec"),o=n("bee2"),u=n("45eb"),i=n("7e84"),c=n("262e"),l=n("2caf"),s=(n("96cf"),n("99af"),n("1c74")),d=function(e){Object(c["a"])(n,e);var t=Object(l["a"])(n);function n(){return Object(a["a"])(this,n),t.call(this)}return Object(o["a"])(n,null,[{key:"voidRelation",value:function(e,t,n){return s["e"].void("people/".concat(e,"/relationships/").concat(t),{reason:n})}},{key:"amendRelation",value:function(){var e=Object(r["a"])(regeneratorRuntime.mark((function e(t,r,a,o){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,n.voidRelation(t,a,"Updating guardian relationship");case 2:return e.abrupt("return",n.createRelation(t,r,o));case 3:case"end":return e.stop()}}),e)})));function t(t,n,r,a){return e.apply(this,arguments)}return t}()},{key:"getRelations",value:function(){return Object(u["a"])(Object(i["a"])(n),"getJson",this).call(this,"types/relationships")}},{key:"createRelation",value:function(e,t,r){return Object(u["a"])(Object(i["a"])(n),"postJson",this).call(this,"people/".concat(e,"/relationships"),{relationship_type_id:r,relation_id:t})}}]),n}(s["e"])},"32b3":function(e,t,n){"use strict";n.d(t,"b",(function(){return r})),n.d(t,"a",(function(){return p}));var r,a=n("3835"),o=n("1da1"),u=n("d4ec"),i=n("bee2"),c=n("262e"),l=n("2caf"),s=(n("d81d"),n("4e82"),n("07ac"),n("96cf"),n("cc6f")),d=n("7957");(function(e){e["Prescription"]="htnPrescription"})(r||(r={}));var p=function(e){Object(c["a"])(n,e);var t=Object(l["a"])(n);function n(e,r){return Object(u["a"])(this,n),t.call(this,e,48,r)}return Object(i["a"])(n,[{key:"getSystolicBp",value:function(){return d["a"].getFirstValueNumber(this.patientID,"Systolic blood pressure")}},{key:"getDiastolicBp",value:function(){return d["a"].getFirstValueNumber(this.patientID,"Diastolic blood pressure")}},{key:"onBpDrugs",value:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,d["a"].getFirstValueCoded(this.patientID,"Treatment status");case 2:return t=e.sent,e.abrupt("return",!!t&&"Yes"===t);case 4:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"getBPTrail",value:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,s["a"].getJson("/patients/".concat(this.patientID,"/bp_trail"));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"getCurrentDrugs",value:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,s["a"].getJson("/patients/".concat(this.patientID,"/current_bp_drugs"));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"getLastDrugs",value:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,s["a"].getJson("/patients/".concat(this.patientID,"/last_bp_drugs_dispensation"));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"getAdherence",value:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(t,n){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,s["a"].postJson("/patients/".concat(this.patientID,"/remaining_bp_drugs"),{drug_id:t,pills:n});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));function t(t,n){return e.apply(this,arguments)}return t}()},{key:"enrollPatient",value:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,s["a"].postJson("/patients/".concat(this.patientID,"/update_or_create_htn_state"),t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"getDrugs",value:function(){return{HCZ:{drugs:[{drugName:"HCZ (25mg tablet)",drugID:275,amount:"25mg",current:!1,selected:!1,isChecked:!1,dispensed:null,expectedRemaining:null,adherence:null}],selected:null,notes:[]},Enalapril:{drugs:[{drugName:"Enalapril (5mg tablet)",drugID:942,amount:"5mg",current:!1,selected:!1,isChecked:!1,dispensed:null,expectedRemaining:null,adherence:null,remaining:null},{drugName:"Enalapril (10mg tablet)",drugID:943,amount:"10mg",current:!1,selected:!1,isChecked:!1,dispensed:null,expectedRemaining:null,adherence:null,remaining:null}],selected:null,notes:[]},Amlodipine:{drugs:[{drugName:"Amlodipine (5mg tablet)",drugID:558,amount:"5mg",current:!1,selected:!1,isChecked:!1,dispensed:null,expectedRemaining:null,adherence:null,remaining:null},{drugName:"Amlodipine (10mg tablet)",drugID:559,amount:"10mg",current:!1,selected:!1,isChecked:!1,dispensed:null,expectedRemaining:null,adherence:null,remaining:null}],selected:null,notes:[]},Atenolol:{drugs:[{drugName:"Atenolol (50mg tablet)",drugID:117,amount:"50mg",current:!1,selected:!1,isChecked:!1,dispensed:null,expectedRemaining:null,adherence:null,remaining:null},{drugName:"Atenolol(100mg tablet)",drugID:11,amount:"100mg",current:!1,selected:!1,isChecked:!1,dispensed:null,expectedRemaining:null,adherence:null,remaining:null}],selected:null,notes:[]}}}}],[{key:"getBpGrade",value:function(e,t){return e<140&&t<90?"normal":e>=140&&e<160||t>=100&&t<110?"grade 1":e>=180&&t>110||e>=180?"grade 3":e>=160&&e<180||t>=110?"grade 2":"N/A"}},{key:"isBpNormotensive",value:function(e){var t=this,n=Object.values(e).sort((function(e,t){return e.date<t.date?1:0})).map((function(e){return t.getBpGrade(e.sbp,e.dbp)})),r=Object(a["a"])(n,2),o=r[0],u=r[1];return"normal"===o&&"normal"===u}},{key:"htnDrugReferences",value:function(){return[{drug_id:275,drug_name:"HCZ (25mg tablet)",units:"tab(s)",am:0,noon:0,pm:1,frequency:"Daily (QOD)"},{drug_id:942,drug_name:"Enalapril (5mg tablet)",units:"tab(s)",am:0,noon:0,pm:1,frequency:"Daily (QOD)"},{drug_id:943,drug_name:"Enalapril (10mg tablet)",units:"tab(s)",am:0,noon:0,pm:1,frequency:"Daily (QOD)"},{drug_id:558,drug_name:"Amlodipine (5mg tablet)",units:"tab(s)",am:0,noon:0,pm:1,frequency:"Daily (QOD)"},{drug_id:559,drug_name:"Amlodipine (10mg tablet)",units:"tab(s)",am:0,noon:0,pm:1,frequency:"Daily (QOD)"},{drug_id:117,drug_name:"Atenolol (50mg tablet)",units:"tab(s)",am:0,noon:0,pm:1,frequency:"Daily (QOD)"},{drug_id:11,drug_name:"Atenolol(100mg tablet)",units:"tab(s)",am:0,noon:0,pm:1,frequency:"Daily (QOD)"}]}}]),n}(s["a"])},"3b8c":function(e,t,n){"use strict";n.d(t,"a",(function(){return f}));var r=n("1da1"),a=n("d4ec"),o=n("bee2"),u=n("262e"),i=n("2caf"),c=(n("ac1f"),n("466d"),n("99af"),n("d3b7"),n("159b"),n("d81d"),n("96cf"),n("cc6f")),l=n("7957"),s=n("5a0c"),d=n.n(s),p=n("2ef0"),f=function(e){Object(u["a"])(n,e);var t=Object(i["a"])(n);function n(e,r){return Object(a["a"])(this,n),t.call(this,e,53,r)}return Object(o["a"])(n,[{key:"getFamilyPlanningMethods",value:function(){return["ORAL CONTRACEPTIVE PILLS","DEPO-PROVERA","INTRAUTERINE CONTRACEPTION","CONTRACEPTIVE IMPLANT","MALE CONDOMS","FEMALE CONDOMS","TUBAL LIGATION","NONE"]}},{key:"getTptTreatmentStatus",value:function(){var e=Object(r["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",c["a"].getJson("/patients/".concat(this.patientID,"/tpt_status")));case 1:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"patientHitMenopause",value:function(){var e=Object(r["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,l["a"].getFirstObs(this.patientID,"Why does the woman not use birth control");case 2:return t=e.sent,e.abrupt("return",!(!t||"string"!==typeof(null===t||void 0===t?void 0:t.value_text))&&(!!t.value_text.match(/menopause/i)&&c["a"].obsInValidPeriod(t)));case 4:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"hasTreatmentHistoryObs",value:function(){var e=Object(r["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,l["a"].getFirstObs(this.patientID,"Previous TB treatment history");case 2:return t=e.sent,e.abrupt("return",t&&c["a"].obsInValidPeriod(t));case 4:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"getDrugSideEffects",value:function(){return c["a"].getJson("programs/".concat(c["a"].getProgramID(),"/patients/").concat(this.patientID,"/medication_side_effects"),{date:this.date})}},{key:"getClient",value:function(){return c["a"].getFirstValueCoded(this.patientID,"Patient present")}},{key:"clientDueForCxCa",value:function(){var e=Object(r["a"])(regeneratorRuntime.mark((function e(){var t,n,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,c["a"].getJson("last_cxca_screening_details",{id:this.patientID,date:this.date});case 2:if(t=e.sent,Object(p["isEmpty"])(t)){e.next=7;break}return n=t["date_screened"],r=d()(this.date).diff(n,"years"),e.abrupt("return",r>=1);case 7:return e.abrupt("return",!0);case 8:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"clientHasHadAHysterectomy",value:function(){var e=Object(r["a"])(regeneratorRuntime.mark((function e(){var t,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,c["a"].getFirstValueCoded(this.patientID,"Reason for NOT offering CxCa");case 2:if(t=e.sent,"Hysterectomy"!==t){e.next=5;break}return e.abrupt("return",!0);case 5:return e.next=7,c["a"].getFirstValueText(this.patientID,"Treatment");case 7:if(n=e.sent,"Hysterectomy"!==n){e.next=10;break}return e.abrupt("return",!0);case 10:return e.abrupt("return",!1);case 11:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"getTLObs",value:function(){var e=Object(r["a"])(regeneratorRuntime.mark((function e(){var t,n,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t=function(e){return e&&"Tubal ligation"===e.value_coded&&c["a"].obsInValidPeriod(e)},e.next=3,c["a"].getFirstObs(this.patientID,"Family planning");case 3:if(n=e.sent,!t(n)){e.next=8;break}return e.abrupt("return",t(n));case 8:return e.next=10,c["a"].getFirstObs(this.patientID,"Method of family planning");case 10:return r=e.sent,e.abrupt("return",t(r));case 12:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"getPreviousDrugs",value:function(){var e=Object(r["a"])(regeneratorRuntime.mark((function e(){var t,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,c["a"].getJson("patients/".concat(this.patientID,"/drugs_received"));case 2:if(t=e.sent,t){e.next=5;break}return e.abrupt("return");case 5:return n={},t.forEach((function(e){n[e.drug_inventory_id]=e})),e.abrupt("return",n);case 8:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"familyPlanningMethods",value:function(e,t){var n={"ORAL CONTRACEPTIVE PILLS":{"DEPO-PROVERA":"N","INTRAUTERINE CONTRACEPTION":"N","CONTRACEPTIVE IMPLANT":"N","MALE CONDOMS":"Y","FEMALE CONDOMS":"Y","RYTHM METHOD":"N","TUBAL LIGATION":"N",VASECTOMY:"N"},"DEPO-PROVERA":{"ORAL CONTRACEPTIVE PILLS":"N","INTRAUTERINE CONTRACEPTION":"N","CONTRACEPTIVE IMPLANT":"N","MALE CONDOMS":"Y","FEMALE CONDOMS":"Y","RYTHM METHOD":"N","TUBAL LIGATION":"N",VASECTOMY:"N"},"INTRAUTERINE CONTRACEPTION":{"ORAL CONTRACEPTIVE PILLS":"N","DEPO-PROVERA":"N","CONTRACEPTIVE IMPLANT":"N","MALE CONDOMS":"Y","FEMALE CONDOMS":"Y","RYTHM METHOD":"N","TUBAL LIGATION":"N",VASECTOMY:"N"},"CONTRACEPTIVE IMPLANT":{"ORAL CONTRACEPTIVE PILLS":"N","DEPO-PROVERA":"N","INTRAUTERINE CONTRACEPTION":"N","MALE CONDOMS":"Y","FEMALE CONDOMS":"Y","RYTHM METHOD":"N","TUBAL LIGATION":"N",VASECTOMY:"N"},"MALE CONDOMS":{"ORAL CONTRACEPTIVE PILLS":"Y","DEPO-PROVERA":"Y","INTRAUTERINE CONTRACEPTION":"Y","CONTRACEPTIVE IMPLANT":"Y","FEMALE CONDOMS":"Y","RYTHM METHOD":"Y","TUBAL LIGATION":"N",VASECTOMY:"Y"},"FEMALE CONDOMS":{"ORAL CONTRACEPTIVE PILLS":"Y","DEPO-PROVERA":"Y","INTRAUTERINE CONTRACEPTION":"Y","CONTRACEPTIVE IMPLANT":"Y","MALE CONDOMS":"Y","RYTHM METHOD":"Y","TUBAL LIGATION":"N",VASECTOMY:"Y"},"RYTHM METHOD":{"ORAL CONTRACEPTIVE PILLS":"N","DEPO-PROVERA":"N","INTRAUTERINE CONTRACEPTION":"N","MALE CONDOMS":"Y","FEMALE CONDOMS":"Y","CONTRACEPTIVE IMPLANT":"N","TUBAL LIGATION":"N",VASECTOMY:"N"},"TUBAL LIGATION":{"ORAL CONTRACEPTIVE PILLS":"N","DEPO-PROVERA":"N","INTRAUTERINE CONTRACEPTION":"N","MALE CONDOMS":"N","FEMALE CONDOMS":"N","CONTRACEPTIVE IMPLANT":"N","RYTHM METHOD":"N",VASECTOMY:"N"},VASECTOMY:{"ORAL CONTRACEPTIVE PILLS":"N","DEPO-PROVERA":"Y","INTRAUTERINE CONTRACEPTION":"N","MALE CONDOMS":"Y","FEMALE CONDOMS":"N","CONTRACEPTIVE IMPLANT":"Y","RYTHM METHOD":"N","TUBAL LIGATION":"N"},NONE:{"ORAL CONTRACEPTIVE PILLS":"N","DEPO-PROVERA":"N","INTRAUTERINE CONTRACEPTION":"N","MALE CONDOMS":"N","FEMALE CONDOMS":"N","CONTRACEPTIVE IMPLANT":"N","RYTHM METHOD":"N","TUBAL LIGATION":"N"}},r=n[e];return t.map((function(e){return"N"===r[e.label]?{label:e.label,value:e.value,isChecked:!1,disabled:!0}:{label:e.label,value:e.value,isChecked:e.isChecked,disabled:!1}}))}}]),n}(c["a"])},"403e":function(e,t,n){"use strict";n.d(t,"d",(function(){return a})),n.d(t,"b",(function(){return o})),n.d(t,"c",(function(){return u})),n.d(t,"a",(function(){return i})),n.d(t,"e",(function(){return c}));var r=n("2909");n("d81d");function a(e){return e.map((function(e){return{value:e,label:e}}))}var o=[{label:"Male",value:"M"},{label:"Female",value:"F"}],u=(Object(r["a"])(a(["TB NOT suspected","TB suspected","Confirmed TB NOT on treatment","Confirmed TB on treatment"])),Object(r["a"])(a(["Current","Last 2 years","More than 2 years","Never"]))),i=[{label:"Rapid antibody test",value:"HIV rapid test"},{label:"DNA PCR",value:"HIV DNA polymerase chain reaction"},{label:"Not done",value:"Not done"}],c=a(["Currently on IPT","Currently on 3HP (RFP + INH)","Currently on INH 300 / RFP 300 (3HP)","Complete course of 3HP in the past (3 months RFP+INH)","Complete course of IPT in the past (min. 6 months of INH)","Aborted course of 3HP (RFP + INH) in the past","Aborted course of INH 300 / RFP 300 (3HP) in the past","Aborted course of IPT in the past","Never taken IPT or 3HP"])},4069:function(e,t,n){var r=n("44d2");r("flat")},"44d7":function(e,t,n){"use strict";n("68c9")},"5b71":function(e,t,n){"use strict";n.d(t,"a",(function(){return l}));var r=n("d4ec"),a=n("bee2"),o=n("262e"),u=n("2caf"),i=n("9b7c"),c=n("cc6f"),l=function(e){Object(o["a"])(n,e);var t=Object(u["a"])(n);function n(e){var a;return Object(r["a"])(this,n),a=t.call(this,e,57),a.patientID=e,a.testTypeID=-1,a.resultDate="",a.testID=-1,a}return Object(a["a"])(n,[{key:"createLabResult",value:function(e){return c["a"].postJson("lab/tests/".concat(this.testID,"/results"),{encounter_id:this.encounterID,date:this.resultDate,measures:e})}},{key:"getTestID",value:function(){return this.testID}},{key:"getTestTypeID",value:function(){return this.testTypeID}},{key:"setTestTypeID",value:function(e){this.testTypeID=e}},{key:"setResultDate",value:function(e){this.resultDate=e}},{key:"setTestID",value:function(e){this.testID=e}},{key:"getTestsWithoutResults",value:function(){return i["a"].getOrders(this.patientID,{status:"drawn"})}},{key:"getTestIndicators",value:function(){return i["a"].getJson("lab/test_result_indicators",{test_type_id:this.testTypeID})}}]),n}(c["a"])},"5e76":function(e,t,n){"use strict";n.d(t,"a",(function(){return s})),n.d(t,"c",(function(){return p})),n.d(t,"d",(function(){return f})),n.d(t,"b",(function(){return m})),n.d(t,"e",(function(){return v}));var r=n("53ca"),a=n("1da1"),o=(n("96cf"),n("d3b7"),n("4de4"),n("07ac"),n("99af"),n("3ca3"),n("ddb0"),n("25f0"),n("d81d"),n("7957")),u=n("0011"),i=n("2ef0"),c=n("b211"),l=n("b5e4");function s(e){return d.apply(this,arguments)}function d(){return d=Object(a["a"])(regeneratorRuntime.mark((function e(t){var n,a,o;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:e.t0=regeneratorRuntime.keys(t);case 1:if((e.t1=e.t0()).done){e.next=16;break}if(n=e.t1.value,!t[n].required||!Object(i["isEmpty"])(t[n].value)){e.next=6;break}return t[n].error="This field is required",e.abrupt("continue",1);case 6:if("function"===typeof t[n].validation){e.next=9;break}return t[n].error="",e.abrupt("continue",1);case 9:return a="object"===Object(r["a"])(t[n].value)?t[n].value:{label:t[n].value,value:t[n].value},e.next=12,t[n].validation(a,t);case 12:o=e.sent,o&&o.length>0?(t[n].error=o.toString(),console.log(n,t[n].error)):t[n].error="",e.next=1;break;case 16:return e.abrupt("return",Object.values(t).every((function(e){var t=e.error;return!t})));case 17:case"end":return e.stop()}}),e)}))),d.apply(this,arguments)}function p(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n={},r={};for(var a in e)if(e[a].value){var o=t?Object(u["i"])(a):a;n[o]=e[a].value,"function"===typeof e[a].computedValue&&(r[o]=e[a].computedValue(e[a].value,e))}return{formData:n,computedFormData:r}}function f(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=Object.values(e).filter((function(e){return e&&(e.tag===t||""===t)})).reduce((function(e,t){var n=t.obs?t.obs:t;return Array.isArray(n)?e=e.concat(n):e.push(n),e}),[]);return Promise.all(n)}function m(e,t){return b.apply(this,arguments)}function b(){return b=Object(a["a"])(regeneratorRuntime.mark((function e(t,n){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Promise.all(n.map(function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(n){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",o["a"].buildGroupValueCoded(t,n.label,n.isChecked?"Yes":"No"));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)}))),b.apply(this,arguments)}function v(e,t,n){return h.apply(this,arguments)}function h(){return h=Object(a["a"])(regeneratorRuntime.mark((function e(t,n,r){var a,o,u,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,s(t);case 2:if(e.sent){e.next=4;break}return e.abrupt("return");case 4:return e.prev=4,a=(null===r||void 0===r?void 0:r.showloader)||!1,a&&c["a"].show(),o=p(t,null===r||void 0===r?void 0:r.underscoreKeys),u=o.formData,i=o.computedFormData,e.next=10,n(u,i);case 10:if(!a){e.next=13;break}return e.next=13,c["a"].hide();case 13:e.next=19;break;case 15:e.prev=15,e.t0=e["catch"](4),Object(l["e"])("".concat(e.t0)),c["a"].hide();case 19:case"end":return e.stop()}}),e,null,[[4,15]])}))),h.apply(this,arguments)}},"5f2c":function(e,t,n){"use strict";n.d(t,"a",(function(){return m}));var r=n("1da1"),a=n("d4ec"),o=n("bee2"),u=n("262e"),i=n("2caf"),c=(n("d81d"),n("d3b7"),n("3ca3"),n("ddb0"),n("4e82"),n("96cf"),n("cc6f")),l=n("71c3"),s=n("1c74"),d=function(e){Object(u["a"])(n,e);var t=Object(i["a"])(n);function n(){return Object(a["a"])(this,n),t.call(this)}return Object(o["a"])(n,null,[{key:"fetchAvailableDrugStock",value:function(){var e=Object(r["a"])(regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.getJson("pharmacy/items",{drug_id:t});case 2:if(n=e.sent,!(n&&n.length>0)){e.next=5;break}return e.abrupt("return",n.reduce((function(e,t){return e+t.current_quantity}),0));case 5:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()}]),n}(s["e"]),p=n("d1ca"),f={11:[30],21:[25],22:[60],24:[30,60,90,100],30:[90],39:[60],73:[120],74:[60],76:[1e3],297:[30,60,90],576:[30,60,90],613:[60],731:[60],732:[60],733:[60],734:[30],735:[30],736:[60],738:[60],931:[12,30,60],932:[30],954:[60],963:[30,60,90],968:[60],969:[30],971:[30,60,90],976:[60],977:[30],982:[30],983:[30,90],1039:[30,60,90],1043:[60],1044:[30],1056:[24],1216:[3,6,12]},m=function(e){Object(u["a"])(n,e);var t=Object(i["a"])(n);function n(e,r){var o;return Object(a["a"])(this,n),o=t.call(this,e,54,r),o.drugHistory=[],o.currentDrugOrder=[],o.useDrugManagement=!1,o}return Object(o["a"])(n,[{key:"setIsDrugManagementEnabled",value:function(e){this.useDrugManagement=e}},{key:"loadDrugManagementEnabled",value:function(){var e=Object(r["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,p["b"].drugManagementEnabled();case 2:this.useDrugManagement=e.sent;case 3:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"getDrugHistory",value:function(){return this.drugHistory}},{key:"getCurrentOrder",value:function(){return this.currentDrugOrder}},{key:"buildDispensations",value:function(e,t,n){for(var r=[],a=0;a<n;a++)r.push({drug_order_id:e,date:this.date,quantity:t/n});return r}},{key:"saveDispensations",value:function(e){return c["a"].postJson("/dispensations",{dispensations:e,program_id:c["a"].getProgramID()})}},{key:"voidOrder",value:function(){var e=Object(r["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",c["a"].void("/dispensations/".concat(t),{}));case 1:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"loadDrugHistory",value:function(){var e=Object(r["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,l["a"].getDrugOrderHistory(this.patientID);case 3:t=e.sent,t&&(this.drugHistory=t),e.next=10;break;case 7:e.prev=7,e.t0=e["catch"](0),console.warn(e.t0);case 10:case"end":return e.stop()}}),e,this,[[0,7]])})));function t(){return e.apply(this,arguments)}return t}()},{key:"loadCurrentDrugOrder",value:function(){var e=Object(r["a"])(regeneratorRuntime.mark((function e(){var t,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,l["a"].getDrugOrders(this.patientID);case 2:if(t=e.sent,!t){e.next=11;break}if(!this.useDrugManagement){e.next=10;break}return n=t.map(function(){var e=Object(r["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,d.fetchAvailableDrugStock(t.drug.drug_id);case 2:return t["available_stock"]=e.sent,e.abrupt("return",t);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),e.next=8,Promise.all(n);case 8:return this.currentDrugOrder=e.sent,e.abrupt("return");case 10:this.currentDrugOrder=t;case 11:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"getDrugPackSizes",value:function(e){return e in f?f[e]:[30,60,90]}},{key:"calcCompletePack",value:function(e,t){var n=e.barcodes.sort((function(e,t){return e.tabs-t.tabs}));if(0==n.length||0==t)return t;for(var r in n){var a=n[r].tabs;if(parseInt(a)>=t)return a}var o=parseInt(n[n.length-1].tabs);return o}}]),n}(c["a"])},"66c5":function(e,t,n){"use strict";n.d(t,"a",(function(){return d}));var r=n("1da1"),a=n("d4ec"),o=n("bee2"),u=n("262e"),i=n("2caf"),c=(n("99af"),n("96cf"),n("cc6f")),l=n("ad60"),s=n("cc74"),d=function(e){Object(u["a"])(n,e);var t=Object(i["a"])(n);function n(e,r){var o;return Object(a["a"])(this,n),o=t.call(this,e,51,r),o.sitePrefix="",o}return Object(o["a"])(n,[{key:"getSitePrefix",value:function(){return this.sitePrefix}},{key:"loadSitePrefix",value:function(){var e=Object(r["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,s["b"].sitePrefix();case 2:this.sitePrefix=e.sent;case 3:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"createArvNumber",value:function(e){return l["a"].postJson("/patient_identifiers/",{patient_id:this.patientID,identifier_type:4,identifier:e})}},{key:"buildArvNumber",value:function(e){return"".concat(this.sitePrefix,"-ARV-").concat(e)}}]),n}(c["a"])},"68c9":function(e,t,n){},"6d32":function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var r=n("d4ec"),a=n("bee2"),o=n("262e"),u=n("2caf"),i=(n("99af"),n("1c74")),c=function(e){Object(o["a"])(n,e);var t=Object(u["a"])(n);function n(){return Object(r["a"])(this,n),t.call(this)}return Object(a["a"])(n,null,[{key:"getAllArvRegimens",value:function(){return this.getJson("programs/".concat(this.getProgramID(),"/all_arv_regimens"))}},{key:"getRegimens",value:function(e){return this.getJson("programs/".concat(this.getProgramID(),"/regimens"),{patient_id:e})}},{key:"getRegimensByWeight",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return this.getJson("programs/".concat(this.getProgramID(),"/regimens"),{weight:e,tb_dosage:t})}},{key:"getCustomIngridients",value:function(){return this.getJson("programs/".concat(this.getProgramID(),"/custom_regimen_ingredients"))}},{key:"getCurrentRegimen",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.getSessionDate();return this.getJson("programs/".concat(this.getProgramID(),"/").concat(e),{date:t})}},{key:"getRegimenExtras",value:function(e,t){return this.getJson("programs/".concat(this.getProgramID(),"/regimen_extras"),{name:e,weight:t})}}]),n}(i["e"])},"71c3":function(e,t,n){"use strict";n.d(t,"a",(function(){return l}));var r=n("5530"),a=n("d4ec"),o=n("bee2"),u=n("262e"),i=n("2caf"),c=(n("d81d"),n("99af"),n("1c74")),l=function(e){Object(u["a"])(n,e);var t=Object(i["a"])(n);function n(){return Object(a["a"])(this,n),t.call(this)}return Object(o["a"])(n,null,[{key:"create",value:function(e){return this.postJson("drug_orders",e)}},{key:"updateDispensationOrders",value:function(e){var t=this;return this.postJson("dispensations",{program_id:this.getProgramID(),dispensations:e.map((function(e){return{date:t.getSessionDate(),drug_order_id:e["order_id"],quantity:e["quantity"]}}))})}},{key:"getDrugOrderHistory",value:function(e){return this.getJson("drug_orders",{patient_id:e})}},{key:"getDrugOrders",value:function(e){return this.getJson("drug_orders",{patient_id:e,date:this.getSessionDate(),program_id:this.getProgramID()})}},{key:"getAllDrugOrders",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1e3;return this.getJson("drug_orders",{patient_id:e,program_id:c["e"].getProgramID(),page_size:t})}},{key:"getLastDrugsReceived",value:function(e){return this.getJson("patients/".concat(e,"/last_drugs_received"),{date:this.getSessionDate(),program_id:this.getProgramID()})}},{key:"getDrugDosages",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.getSessionDate(),r={drug_id:t,date:n};return this.getJson("programs/".concat(this.getProgramID(),"/patients/").concat(e,"/drug_doses"),r)}},{key:"getOrderByPatient",value:function(e,t){return this.getJson("/drug_orders",Object(r["a"])({patient_id:e,program_id:this.getProgramID()},t))}}]),n}(c["e"])},"76df":function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var r=n("1da1"),a=(n("96cf"),n("7f35"));function o(e){return u.apply(this,arguments)}function u(){return u=Object(r["a"])(regeneratorRuntime.mark((function e(t){var n,r,o=arguments;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=o.length>1&&void 0!==o[1]?o[1]:"action-sheet-modal",e.next=3,Object(a["c"])("Are you sure you want to void record?","Please specify reason for voiding this record",["Mistake/ Wrong Entry","Duplicate","System Error"],[{name:"Cancel",slot:"start"},{name:"Void",color:"danger",slot:"end",role:"action"}],"",n);case 3:if(r=e.sent,!r.selection||"Void"!==r.action){e.next=7;break}return e.next=7,t(r.selection);case 7:case"end":return e.stop()}}),e)}))),u.apply(this,arguments)}},"7e33":function(e,t,n){"use strict";n("bcd6")},"7f12":function(e,t,n){"use strict";var r=n("7a23"),a={key:0},o={key:1},u=Object(r["createTextVNode"])(" Close ");function i(e,t,n,i,c,l){var s=Object(r["resolveComponent"])("ion-title"),d=Object(r["resolveComponent"])("ion-toolbar"),p=Object(r["resolveComponent"])("ion-header"),f=Object(r["resolveComponent"])("his-basic-table"),m=Object(r["resolveComponent"])("text-skeloton"),b=Object(r["resolveComponent"])("ion-content"),v=Object(r["resolveComponent"])("ion-button"),h=Object(r["resolveComponent"])("ion-footer");return Object(r["openBlock"])(),Object(r["createBlock"])(r["Fragment"],null,[Object(r["createVNode"])(p,null,{default:Object(r["withCtx"])((function(){return[Object(r["createVNode"])(d,null,{default:Object(r["withCtx"])((function(){return[Object(r["createVNode"])(s,null,{default:Object(r["withCtx"])((function(){return[Object(r["createTextVNode"])(Object(r["toDisplayString"])(e.title),1)]})),_:1})]})),_:1})]})),_:1}),Object(r["createVNode"])(b,null,{default:Object(r["withCtx"])((function(){return[e.ready?(Object(r["openBlock"])(),Object(r["createBlock"])("div",a,[Object(r["createVNode"])(f,{columns:e.columns,rows:e.rows},null,8,["columns","rows"])])):(Object(r["openBlock"])(),Object(r["createBlock"])("div",o,[Object(r["createVNode"])(m)]))]})),_:1}),Object(r["createVNode"])(h,null,{default:Object(r["withCtx"])((function(){return[Object(r["createVNode"])(d,null,{default:Object(r["withCtx"])((function(){return[Object(r["createVNode"])(v,{color:"danger",onClick:e.closeModal,slot:"end"},{default:Object(r["withCtx"])((function(){return[u]})),_:1},8,["onClick"])]})),_:1})]})),_:1})],64)}var c=n("1da1"),l=(n("96cf"),n("a3a5")),s=n("8a30"),d=n("ded6"),p=Object(r["defineComponent"])({components:{HisBasicTable:l["a"],IonHeader:s["IonHeader"],IonToolbar:s["IonToolbar"],IonContent:s["IonContent"],IonFooter:s["IonFooter"],IonButton:s["IonButton"],TextSkeloton:d["a"]},props:{title:{type:String,required:!0},columns:{type:Object,required:!0},onRows:{type:Function,required:!0}},data:function(){return{rows:[],ready:!1}},watch:{onRows:{handler:function(e){var t=this;return Object(c["a"])(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(!e){n.next=5;break}return n.next=3,e();case 3:t.rows=n.sent,t.ready=!0;case 5:case"end":return n.stop()}}),n)})))()},immediate:!0,deep:!0}},methods:{closeModal:function(){return Object(c["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,s["modalController"].dismiss({});case 2:case"end":return e.stop()}}),e)})))()}}}),f=n("d959"),m=n.n(f);const b=m()(p,[["render",i]]);t["a"]=b},"83af":function(e,t,n){"use strict";n.d(t,"a",(function(){return l}));var r=n("1da1"),a=n("d4ec"),o=n("bee2"),u=n("262e"),i=n("2caf"),c=(n("96cf"),n("99af"),n("cc6f")),l=function(e){Object(u["a"])(n,e);var t=Object(i["a"])(n);function n(e,r){return Object(a["a"])(this,n),t.call(this,e,7,r)}return Object(o["a"])(n,[{key:"getNextAppointment",value:function(){var e=Object(r["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t=c["a"].getProgramID(),e.abrupt("return",c["a"].getJson("/programs/".concat(t,"/patients/").concat(this.patientID,"/next_appointment_date"),{date:this.date}));case 2:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()}],[{key:"getDailiyAppointments",value:function(){var e=Object(r["a"])(regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=c["a"].getProgramID(),e.abrupt("return",c["a"].getJson("/programs/".concat(n,"/booked_appointments"),{date:t,paginate:!1}));case 2:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}()}]),n}(c["a"])},"99e7":function(e,t,n){"use strict";n.r(t);var r=n("7a23");function a(e,t,n,a,o,u){var i=Object(r["resolveComponent"])("information-header"),c=Object(r["resolveComponent"])("ion-col"),l=Object(r["resolveComponent"])("ion-row"),s=Object(r["resolveComponent"])("visits-summary"),d=Object(r["resolveComponent"])("ion-grid"),p=Object(r["resolveComponent"])("layout");return Object(r["openBlock"])(),Object(r["createBlock"])(p,null,{default:Object(r["withCtx"])((function(){return[e.isReady?(Object(r["openBlock"])(),Object(r["createBlock"])(d,{key:0,class:"ion-no-margin ion-no-padding"},{default:Object(r["withCtx"])((function(){return[Object(r["createVNode"])(l,null,{default:Object(r["withCtx"])((function(){return[Object(r["createVNode"])(c,{size:"12"},{default:Object(r["withCtx"])((function(){return[e.patient?(Object(r["openBlock"])(),Object(r["createBlock"])(i,{key:0,patient:e.patient,guardians:e.guardians,artStartDate:e.artStartDate,onUpdateARVNumber:e.updateARVNumber,onAddGuardian:e.addGuardian,onUpdatePatient:e.updateDemographics},null,8,["patient","guardians","artStartDate","onUpdateARVNumber","onAddGuardian","onUpdatePatient"])):Object(r["createCommentVNode"])("",!0)]})),_:1})]})),_:1}),Object(r["createVNode"])(l,null,{default:Object(r["withCtx"])((function(){return[Object(r["createVNode"])(c,null,{default:Object(r["withCtx"])((function(){return[e.patient?(Object(r["openBlock"])(),Object(r["createBlock"])(s,{key:0,patient:e.patient,startDate:e.artStartDate},null,8,["patient","startDate"])):Object(r["createCommentVNode"])("",!0)]})),_:1})]})),_:1})]})),_:1})):Object(r["createCommentVNode"])("",!0)]})),_:1})}var o=n("1da1"),u=(n("96cf"),n("d3b7"),n("25f0"),n("a15b"),n("d81d"),n("99af"),n("b0c0"),n("9283")),i=n("7def"),c=n("8d56"),l=Object(r["withScopeId"])("data-v-17e9b721");Object(r["pushScopeId"])("data-v-17e9b721");var s=Object(r["createVNode"])("span",{class:"title"},"Summary of Visits",-1),d={class:"ion-float-right ion-margin-end ion-margin-bottom"};Object(r["popScopeId"])();var p=l((function(e,t,n,a,o,u){var i=Object(r["resolveComponent"])("ion-icon"),c=Object(r["resolveComponent"])("ion-button"),p=Object(r["resolveComponent"])("ion-card-title"),f=Object(r["resolveComponent"])("ion-card-header"),m=Object(r["resolveComponent"])("report-table"),b=Object(r["resolveComponent"])("ion-card-content"),v=Object(r["resolveComponent"])("ion-card");return Object(r["openBlock"])(),Object(r["createBlock"])(v,{class:"his-card",style:{padding:"0 !important"}},{default:l((function(){return[Object(r["createVNode"])(f,null,{default:l((function(){return[Object(r["createVNode"])(p,null,{default:l((function(){return[s,Object(r["createVNode"])("span",d,[(Object(r["openBlock"])(!0),Object(r["createBlock"])(r["Fragment"],null,Object(r["renderList"])(e.actionButtons,(function(e){return Object(r["openBlock"])(),Object(r["createBlock"])(c,{key:e.label,onClick:e.action,color:e.color||"primary"},{default:l((function(){return[e.icon?(Object(r["openBlock"])(),Object(r["createBlock"])(i,{key:0,icon:e.icon,class:"ion-margin-right"},null,8,["icon"])):Object(r["createCommentVNode"])("",!0),Object(r["createTextVNode"])(" "+Object(r["toDisplayString"])(e.label),1)]})),_:2},1032,["onClick","color"])})),128))])]})),_:1})]})),_:1}),Object(r["createVNode"])(b,{class:"ion-no-padding",style:{"min-height":"45vh"}},{default:l((function(){return[Object(r["createVNode"])(m,{rows:e.rows,columns:e.columns,config:e.tableConfig},null,8,["rows","columns","config"])]})),_:1})]})),_:1})})),f=n("b85c"),m=(n("159b"),n("a434"),n("3ca3"),n("ddb0"),n("ac1f"),n("466d"),n("7f12")),b=n("9ceb"),v=n("80e3"),h=n("ec2a"),g=n("7957"),O=n("23e6"),j=n("ad60"),w=n("76df"),x=n("8a30"),k=n("5a0c"),y=n.n(k),C=Object(r["createTextVNode"])("Viral Load Results"),N=Object(r["createTextVNode"])("Other Results Options: "),R=Object(r["createTextVNode"])("LDL"),V=Object(r["createTextVNode"])("Close"),I=Object(r["createTextVNode"])("Reset"),D=Object(r["createTextVNode"])("Save");function _(e,t,n,a,o,u){var i=Object(r["resolveComponent"])("ion-title"),c=Object(r["resolveComponent"])("ion-toolbar"),l=Object(r["resolveComponent"])("ion-header"),s=Object(r["resolveComponent"])("DateInput"),d=Object(r["resolveComponent"])("ion-col"),p=Object(r["resolveComponent"])("SelectInput"),f=Object(r["resolveComponent"])("NumberInput"),m=Object(r["resolveComponent"])("ion-row"),b=Object(r["resolveComponent"])("ion-label"),v=Object(r["resolveComponent"])("ion-checkbox"),h=Object(r["resolveComponent"])("ion-item"),g=Object(r["resolveComponent"])("ion-grid"),O=Object(r["resolveComponent"])("ion-content"),j=Object(r["resolveComponent"])("ion-button"),w=Object(r["resolveComponent"])("ion-footer");return Object(r["openBlock"])(),Object(r["createBlock"])(r["Fragment"],null,[Object(r["createVNode"])(l,null,{default:Object(r["withCtx"])((function(){return[Object(r["createVNode"])(c,null,{default:Object(r["withCtx"])((function(){return[Object(r["createVNode"])(i,null,{default:Object(r["withCtx"])((function(){return[C]})),_:1})]})),_:1})]})),_:1}),Object(r["createVNode"])(O,{class:"ion-padding"},{default:Object(r["withCtx"])((function(){return[Object(r["createVNode"])(g,{style:{width:"100%"}},{default:Object(r["withCtx"])((function(){return[Object(r["createVNode"])(m,null,{default:Object(r["withCtx"])((function(){return[Object(r["createVNode"])(d,{size:"12",class:"ion-margin-vertical"},{default:Object(r["withCtx"])((function(){return[Object(r["createVNode"])(s,{modelValue:e.form.orderDate,"onUpdate:modelValue":t[1]||(t[1]=function(t){return e.form.orderDate=t}),form:e.form,minDate:e.birthdate,maxDate:e.today},null,8,["modelValue","form","minDate","maxDate"])]})),_:1}),Object(r["createVNode"])(d,{size:"6",class:"ion-margin-vertical"},{default:Object(r["withCtx"])((function(){return[Object(r["createVNode"])(p,{modelValue:e.form.reason,"onUpdate:modelValue":t[2]||(t[2]=function(t){return e.form.reason=t}),options:e.reasons},null,8,["modelValue","options"])]})),_:1}),Object(r["createVNode"])(d,{size:"6",class:"ion-margin-vertical"},{default:Object(r["withCtx"])((function(){return[Object(r["createVNode"])(p,{modelValue:e.form.specimenConcept,"onUpdate:modelValue":t[3]||(t[3]=function(t){return e.form.specimenConcept=t}),options:e.specimens},null,8,["modelValue","options"])]})),_:1}),Object(r["createVNode"])(d,{size:"12",class:"ion-margin-vertical"},{default:Object(r["withCtx"])((function(){return[Object(r["createVNode"])(s,{modelValue:e.form.resultDate,"onUpdate:modelValue":t[4]||(t[4]=function(t){return e.form.resultDate=t}),form:e.form,minDate:e.form.orderDate.value,"max-date":e.today},null,8,["modelValue","form","minDate","max-date"])]})),_:1}),Object(r["createVNode"])(d,{size:"6",class:"ion-margin-vertical"},{default:Object(r["withCtx"])((function(){return[Object(r["createVNode"])(p,{modelValue:e.form.modifier,"onUpdate:modelValue":t[5]||(t[5]=function(t){return e.form.modifier=t}),options:e.modifiers},null,8,["modelValue","options"])]})),_:1}),Object(r["createVNode"])(d,{size:"6",class:"ion-margin-vertical"},{default:Object(r["withCtx"])((function(){return[Object(r["createVNode"])(f,{modelValue:e.form.result,"onUpdate:modelValue":t[6]||(t[6]=function(t){return e.form.result=t}),form:e.form,min:1},null,8,["modelValue","form"])]})),_:1})]})),_:1}),Object(r["createVNode"])(m,{class:"ion-margin-top"},{default:Object(r["withCtx"])((function(){return[Object(r["createVNode"])(d,{size:"12"},{default:Object(r["withCtx"])((function(){return[Object(r["createVNode"])(b,{class:"ion-padding-vertical bold"},{default:Object(r["withCtx"])((function(){return[N]})),_:1}),Object(r["createVNode"])(h,null,{default:Object(r["withCtx"])((function(){return[Object(r["createVNode"])(b,null,{default:Object(r["withCtx"])((function(){return[R]})),_:1}),Object(r["createVNode"])(v,{slot:"start",modelValue:e.ldl,"onUpdate:modelValue":t[7]||(t[7]=function(t){return e.ldl=t})},null,8,["modelValue"])]})),_:1})]})),_:1})]})),_:1})]})),_:1})]})),_:1}),Object(r["createVNode"])(w,null,{default:Object(r["withCtx"])((function(){return[Object(r["createVNode"])(c,null,{default:Object(r["withCtx"])((function(){return[Object(r["createVNode"])(j,{color:"primary",onClick:t[8]||(t[8]=function(t){return e.modal.hide()}),slot:"end"},{default:Object(r["withCtx"])((function(){return[V]})),_:1}),Object(r["createVNode"])(j,{color:"warning",onClick:e.resetResults,slot:"end"},{default:Object(r["withCtx"])((function(){return[I]})),_:1},8,["onClick"]),Object(r["createVNode"])(j,{color:"success",onClick:e.saveResults,slot:"end"},{default:Object(r["withCtx"])((function(){return[D]})),_:1},8,["onClick"])]})),_:1})]})),_:1})],64)}var T=n("5ab5"),A=n("be95"),P=n("f27f"),E=n("403e"),S=n("9b7c"),B=n("0cb1"),M=n("5e76"),L=n("5b71"),F=n("8158"),H=n("0ba8"),G=n("b5b2"),U=n("da44"),q=n("b5e4"),Y=Object(r["defineComponent"])({components:{IonContent:x["IonContent"],IonFooter:x["IonFooter"],IonHeader:x["IonHeader"],IonTitle:x["IonTitle"],IonToolbar:x["IonToolbar"],IonButton:x["IonButton"],IonLabel:x["IonLabel"],IonGrid:x["IonGrid"],IonRow:x["IonRow"],IonCol:x["IonCol"],IonCheckbox:x["IonCheckbox"],IonItem:x["IonItem"],DateInput:T["a"],SelectInput:A["a"],NumberInput:P["a"]},props:{patient:{type:Object,required:!0}},setup:function(e){var t=Object(r["ref"])(!1),n=Object(E["d"])(["=",">","<",">=","<="]),a=Object(E["d"])(["Routine","Targeted","Confirmatory","Stat","Repeat / Missing"]),i=Object(r["ref"])([]),c=y()().format(u["b"]),l=y()(e.patient.getBirthdate()).format(u["b"]),s=Object(r["reactive"])({orderDate:{value:"",label:"Order Date",required:!0,validation:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(y()(t.value).isValid()){e.next=2;break}return e.abrupt("return",["Invalid date"]);case 2:if(!y()(t.value).isAfter(c)){e.next=4;break}return e.abrupt("return",["Order date cannot be in the future"]);case 4:if(!y()(t.value).isBefore(l)){e.next=6;break}return e.abrupt("return",["Order date cannot be before patient's date of birth"]);case 6:return e.abrupt("return",null);case 7:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}()},resultDate:{value:"",label:"Result Date",required:!0,validation:function(){var t=Object(o["a"])(regeneratorRuntime.mark((function t(n,r){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(y()(n.value).isValid()){t.next=2;break}return t.abrupt("return",["Invalid date"]);case 2:if(!y()(n.value).isAfter(c)){t.next=4;break}return t.abrupt("return",["Result date cannot be in the future"]);case 4:if(!y()(n.value).isBefore(y()(r.orderDate.value))){t.next=6;break}return t.abrupt("return",["Result date cannot be before order date"]);case 6:if(!y()(n.value).isBefore(y()(e.patient.getBirthdate()))){t.next=8;break}return t.abrupt("return",["Result date cannot be before patient's date of birth"]);case 8:return t.abrupt("return",null);case 9:case"end":return t.stop()}}),t)})));function n(e,n){return t.apply(this,arguments)}return n}()},specimenConcept:{value:"",label:"Specimen",placeholder:"Select a specimen",required:!0},modifier:{value:"",label:"Modifier",placeholder:"Select a modifier",required:!0},reason:{value:"",label:"Reason",placeholder:"Select a reason",required:!0},result:{value:"",label:"Result Value",placeholder:"Enter a result value",required:!0}}),d=function(){var n=Object(o["a"])(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.abrupt("return",Object(M["e"])(s,function(){var n=Object(o["a"])(regeneratorRuntime.mark((function n(r){var a,o,u,i,c,l,s;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.next=2,B["a"].setSessionDate(r.orderDate);case 2:return a=new B["a"](e.patient.getID(),-1),n.next=5,F["a"].getConceptID("HIV viral load");case 5:return o=n.sent,n.next=8,a.createEncounter();case 8:if(u=n.sent,u){n.next=11;break}throw new Error("Unable to create lab order encounter");case 11:return n.next=13,S["a"].buildLabOrders(u,[{specimenConcept:r.specimenConcept.value,reason:r.reason.value,concept_id:o}]);case 13:return i=n.sent,n.next=16,S["a"].saveOrdersArray(u.encounter_id,i);case 16:if(c=n.sent,c){n.next=19;break}throw new Error("Unable to save lab orders");case 19:return n.next=21,L["a"].setSessionDate(r.resultDate);case 21:return l=new L["a"](e.patient.getID()),l.setTestID(c[0].tests[0].id),l.setResultDate(r.resultDate),n.next=26,l.createEncounter();case 26:if(s=n.sent,s){n.next=29;break}throw new Error("Unable to create lab result encounter");case 29:return n.next=31,l.createLabResult([{indicator:{concept_id:o},value:t.value?"LDL":parseInt(r.result),value_modifier:t.value?"=":r.modifier.value,value_type:t.value?"text":"numeric"}]);case 31:return n.next=33,L["a"].resetSessionDate();case 33:return n.next=35,U["a"].hide();case 35:H["b"].emit(G["a"].RELOAD_LATEST_VL_RESULT),H["b"].emit(G["a"].RELOAD_PATIENT_VISIT_DATA);case 37:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()));case 1:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}}(),p=function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(q["a"])("Are you sure you want to clear all fields?");case 2:if(!e.sent){e.next=6;break}for(n in t.value=!1,s)s[n].value="",s[n].error="";H["b"].emit(G["a"].ON_CLEAR);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(r["watch"])(t,(function(e){e&&(s.modifier.value="",s.result.value=void 0,s.modifier.error="",s.result.error=""),s.modifier.disabled=e,s.modifier.required=!e,s.result.disabled=e,s.result.required=!e})),Object(r["onMounted"])(Object(o["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,S["a"].getSpecimens("HIV viral load");case 2:i.value=e.sent.map((function(e){return{label:e.name,value:e["concept_id"]}}));case 3:case"end":return e.stop()}}),e)})))),{today:c,birthdate:l,form:s,modifiers:n,reasons:a,specimens:i,ldl:t,modal:U["a"],resetResults:p,saveResults:d}}}),z=n("d959"),J=n.n(z);const W=J()(Y,[["render",_]]);var Q=W,K=Object(r["createTextVNode"])("Patient Outcomes"),X=Object(r["createTextVNode"])("Close"),Z=Object(r["createTextVNode"])("Void Program");function $(e,t,n,a,o,u){var i=Object(r["resolveComponent"])("ion-title"),c=Object(r["resolveComponent"])("ion-toolbar"),l=Object(r["resolveComponent"])("ion-header"),s=Object(r["resolveComponent"])("ion-badge"),d=Object(r["resolveComponent"])("ion-col"),p=Object(r["resolveComponent"])("ion-row"),f=Object(r["resolveComponent"])("enrollment-form"),m=Object(r["resolveComponent"])("outcome-form"),b=Object(r["resolveComponent"])("outcomes-table"),v=Object(r["resolveComponent"])("ion-grid"),h=Object(r["resolveComponent"])("ion-content"),g=Object(r["resolveComponent"])("ion-button"),O=Object(r["resolveComponent"])("ion-footer");return Object(r["openBlock"])(),Object(r["createBlock"])(r["Fragment"],null,[Object(r["createVNode"])(l,null,{default:Object(r["withCtx"])((function(){return[Object(r["createVNode"])(c,null,{default:Object(r["withCtx"])((function(){return[Object(r["createVNode"])(i,null,{default:Object(r["withCtx"])((function(){return[K]})),_:1})]})),_:1})]})),_:1}),Object(r["createVNode"])(h,null,{default:Object(r["withCtx"])((function(){return[Object(r["createVNode"])(v,{style:{width:"100%"}},{default:Object(r["withCtx"])((function(){return[Object(r["createVNode"])(p,null,{default:Object(r["withCtx"])((function(){return[Object(r["createVNode"])(d,null,{default:Object(r["withCtx"])((function(){return[Object(r["createVNode"])(s,{color:"lightblue",class:"ion-padding",style:{width:"100%"},disabled:""},{default:Object(r["withCtx"])((function(){return[Object(r["createTextVNode"])(Object(r["toDisplayString"])(e.enrollmentStatus),1)]})),_:1})]})),_:1})]})),_:1}),e.isEnrolled?(Object(r["openBlock"])(),Object(r["createBlock"])(r["Fragment"],{key:1},[e.outcomes?(Object(r["openBlock"])(),Object(r["createBlock"])(p,{key:0,class:"his-card",style:{"margin-bottom":".4rem"}},{default:Object(r["withCtx"])((function(){return[Object(r["createVNode"])(m,{"date-enrolled":e.enrollDate,birthdate:e.birthdate,outcomes:e.outcomes,onSaveOutcome:e.saveOutcome},null,8,["date-enrolled","birthdate","outcomes","onSaveOutcome"])]})),_:1})):Object(r["createCommentVNode"])("",!0),Object(r["createVNode"])(p,{class:"his-card",style:[{padding:"0 !important"},{minHeight:e.totalStates?"0":"30vh"}]},{default:Object(r["withCtx"])((function(){return[Object(r["createVNode"])(d,{size:"12",class:"ion-no-padding"},{default:Object(r["withCtx"])((function(){var t;return[Object(r["createVNode"])(b,{patientStates:null===(t=e.program)||void 0===t?void 0:t.patient_states,onVoidOutcome:e.voidOutcome},null,8,["patientStates","onVoidOutcome"])]})),_:1})]})),_:1},8,["style"])],64)):(Object(r["openBlock"])(),Object(r["createBlock"])(p,{key:0,class:"his-card",style:{"margin-bottom":".4rem"}},{default:Object(r["withCtx"])((function(){return[Object(r["createVNode"])(d,{size:"12"},{default:Object(r["withCtx"])((function(){return[Object(r["createVNode"])(f,{patientProgram:e.patientProgram,birthdate:e.birthdate,onEnrollProgram:e.enrollProgram},null,8,["patientProgram","birthdate","onEnrollProgram"])]})),_:1})]})),_:1}))]})),_:1})]})),_:1}),Object(r["createVNode"])(O,null,{default:Object(r["withCtx"])((function(){return[Object(r["createVNode"])(c,null,{default:Object(r["withCtx"])((function(){return[Object(r["createVNode"])(g,{color:"primary",onClick:t[1]||(t[1]=function(t){return e.modal.hide()}),slot:"end"},{default:Object(r["withCtx"])((function(){return[X]})),_:1}),e.isEnrolled?(Object(r["openBlock"])(),Object(r["createBlock"])(g,{key:0,color:"danger",onClick:e.voidProgram,slot:"end"},{default:Object(r["withCtx"])((function(){return[Z]})),_:1},8,["onClick"])):Object(r["createCommentVNode"])("",!0)]})),_:1})]})),_:1})],64)}n("7db0");var ee=n("74f4"),te=n("2ef0"),ne=Object(r["createVNode"])("p",{class:"ion-padding-horizontal ion-margin-vertical bold ion-margin-top"},"Previous Outcomes",-1);function re(e,t,n,a,o,u){var i=Object(r["resolveComponent"])("data-table");return Object(r["openBlock"])(),Object(r["createBlock"])(r["Fragment"],null,[ne,Object(r["createVNode"])(i,{rows:e.rows,columns:e.columns,config:e.tableConfig,"row-actions-buttons":e.TableRowActions,color:"custom"},null,8,["rows","columns","config","row-actions-buttons"])],64)}var ae=n("5530"),oe=n("4971"),ue=Object(r["defineComponent"])({name:"OutcomesTable",props:{patientStates:{type:Array,required:!0}},components:{DataTable:oe["DataTable"]},emits:["voidOutcome"],setup:function(e,t){var n=t.emit,a=[{path:"name",label:"Outcome"},{path:"start_date",label:"Start Date",formatter:function(e){return y()(e).format(u["a"])}},{path:"end_date",label:"End Date",formatter:function(e){return y()(e).format(u["a"])}}],i={showSearchField:!1,showSubmitButton:!1},c=Object(r["computed"])((function(){return e.patientStates.map((function(e,t){return Object(ae["a"])(Object(ae["a"])({},e),{},{index:t})}))})),l=[{label:"void",color:"danger",action:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(q["a"])("Are you sure you want to void this outcome?");case 2:if(!e.sent){e.next=4;break}n("voidOutcome",{stateId:t.patient_state_id,index:t.index});case 4:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}()}];return{rows:c,columns:a,tableConfig:i,TableRowActions:l}}});const ie=J()(ue,[["render",re]]);var ce=ie,le=Object(r["createTextVNode"])("Reset"),se=Object(r["createTextVNode"])("Enroll");function de(e,t,n,a,o,u){var i=Object(r["resolveComponent"])("DateInput"),c=Object(r["resolveComponent"])("ion-col"),l=Object(r["resolveComponent"])("ion-button"),s=Object(r["resolveComponent"])("ion-row"),d=Object(r["resolveComponent"])("ion-grid");return Object(r["openBlock"])(),Object(r["createBlock"])(d,null,{default:Object(r["withCtx"])((function(){return[Object(r["createVNode"])(s,null,{default:Object(r["withCtx"])((function(){return[Object(r["createVNode"])(c,{size:"12"},{default:Object(r["withCtx"])((function(){return[Object(r["createVNode"])(i,{modelValue:e.form.date,"onUpdate:modelValue":t[1]||(t[1]=function(t){return e.form.date=t}),form:e.form,minDate:e.birthdate,"max-date":e.today},null,8,["modelValue","form","minDate","max-date"])]})),_:1}),Object(r["createVNode"])(c,null,{default:Object(r["withCtx"])((function(){return[Object(r["createVNode"])(l,{color:"warning",onClick:e.onReset},{default:Object(r["withCtx"])((function(){return[le]})),_:1},8,["onClick"]),Object(r["createVNode"])(l,{color:"success",onClick:e.enrollProgram},{default:Object(r["withCtx"])((function(){return[se]})),_:1},8,["onClick"])]})),_:1})]})),_:1})]})),_:1})}var pe=Object(r["defineComponent"])({name:"EnrollmentForm",components:{DateInput:T["a"],IonGrid:x["IonGrid"],IonRow:x["IonRow"],IonCol:x["IonCol"],IonButton:x["IonButton"]},props:["birthdate"],emits:["enrollProgram"],setup:function(e,t){var n=t.emit,a=y()().format("YYYY-MM-DD"),u=Object(r["reactive"])({date:{value:"",label:"Date of Enrollment",required:!0,validation:function(){var t=Object(o["a"])(regeneratorRuntime.mark((function t(n){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!y()(n.value).isBefore(e.birthdate)){t.next=2;break}return t.abrupt("return",["Date of enrollment cannot be before date of birth"]);case 2:if(!y()(n.value).isAfter(a)){t.next=4;break}return t.abrupt("return",["Date of enrollment cannot be in the future"]);case 4:return t.abrupt("return",null);case 5:case"end":return t.stop()}}),t)})));function n(e){return t.apply(this,arguments)}return n}()}}),i=function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(q["a"])("Are you sure you want to clear all fields");case 2:if(!e.sent){e.next=6;break}u.date.value="",u.date.error="",H["b"].emit(G["a"].ON_CLEAR);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),c=function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(M["e"])(u,(function(e){var t=e.date;return n("enrollProgram",t)})));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return{form:u,today:a,onReset:i,enrollProgram:c}}});const fe=J()(pe,[["render",de]]);var me=fe,be=Object(r["createVNode"])("p",null,"Add New Outcome",-1),ve=Object(r["createTextVNode"])("Reset"),he=Object(r["createTextVNode"])("Save");function ge(e,t,n,a,o,u){var i=Object(r["resolveComponent"])("ion-col"),c=Object(r["resolveComponent"])("DateInput"),l=Object(r["resolveComponent"])("SelectInput"),s=Object(r["resolveComponent"])("ion-button"),d=Object(r["resolveComponent"])("ion-row"),p=Object(r["resolveComponent"])("ion-grid");return Object(r["openBlock"])(),Object(r["createBlock"])(p,null,{default:Object(r["withCtx"])((function(){return[Object(r["createVNode"])(d,null,{default:Object(r["withCtx"])((function(){return[Object(r["createVNode"])(i,{size:"12"},{default:Object(r["withCtx"])((function(){return[be]})),_:1}),Object(r["createVNode"])(i,{size:"6",class:"ion-margin-top-vertical"},{default:Object(r["withCtx"])((function(){return[Object(r["createVNode"])(c,{modelValue:e.form.date,"onUpdate:modelValue":t[1]||(t[1]=function(t){return e.form.date=t}),form:e.form,minDate:e.dateEnrolled,"max-date":e.today},null,8,["modelValue","form","minDate","max-date"])]})),_:1}),Object(r["createVNode"])(i,{size:"6",class:"ion-margin-top-vertical"},{default:Object(r["withCtx"])((function(){return[Object(r["createVNode"])(l,{modelValue:e.form.status,"onUpdate:modelValue":t[2]||(t[2]=function(t){return e.form.status=t}),form:e.form,options:e.outcomes},null,8,["modelValue","form","options"])]})),_:1}),e.isTransferredOut?(Object(r["openBlock"])(),Object(r["createBlock"])(i,{key:0,size:"12",class:"ion-margin-top-vertical"},{default:Object(r["withCtx"])((function(){return[Object(r["createVNode"])(l,{modelValue:e.form.nextFacility,"onUpdate:modelValue":t[3]||(t[3]=function(t){return e.form.nextFacility=t}),form:e.form,asyncOptions:e.getFacilities},null,8,["modelValue","form","asyncOptions"])]})),_:1})):Object(r["createCommentVNode"])("",!0),Object(r["createVNode"])(i,{size:"12",class:"ion-margin-top"},{default:Object(r["withCtx"])((function(){return[Object(r["createVNode"])(s,{color:"warning",onClick:e.onReset},{default:Object(r["withCtx"])((function(){return[ve]})),_:1},8,["onClick"]),Object(r["createVNode"])(s,{color:"success",onClick:e.onSave},{default:Object(r["withCtx"])((function(){return[he]})),_:1},8,["onClick"])]})),_:1})]})),_:1})]})),_:1})}var Oe=n("2706"),je=n("e86e"),we=Object(r["defineComponent"])({name:"OutcomeForm",props:{outcomes:{type:Array,required:!0},dateEnrolled:{type:String,required:!0},birthdate:{type:String,required:!0}},components:{DateInput:T["a"],IonGrid:x["IonGrid"],IonRow:x["IonRow"],IonCol:x["IonCol"],IonButton:x["IonButton"],SelectInput:A["a"]},emits:["saveOutcome"],setup:function(e,t){var n=t.emit,a=y()().format("YYYY-MM-DD"),i=Object(r["reactive"])({date:{value:"",label:"Outcome Date",required:!0,validation:function(){var t=Object(o["a"])(regeneratorRuntime.mark((function t(n){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!y()(n.value).isBefore(e.birthdate)){t.next=2;break}return t.abrupt("return",["Outcome date cannot be before date of birth - ".concat(y()(e.birthdate).format(u["a"]))]);case 2:if(!y()(n.value).isBefore(e.dateEnrolled)){t.next=4;break}return t.abrupt("return",["Outcome date cannot be before enrollment date- ".concat(y()(e.dateEnrolled).format(u["a"]))]);case 4:return t.abrupt("return",null);case 5:case"end":return t.stop()}}),t)})));function n(e){return t.apply(this,arguments)}return n}()},status:{value:"",label:"Outcome",required:!0},nextFacility:{value:"",label:"Next Facility",validation:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(t,n){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return","Patient transferred out"===n.status.value.label&&Oe["a"].required(t));case 1:case"end":return e.stop()}}),e)})));function t(t,n){return e.apply(this,arguments)}return t}()}}),c=Object(r["computed"])((function(){var e;return"Patient transferred out"===(null===(e=i.status.value)||void 0===e?void 0:e.label)})),l=function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(q["a"])("are you sure you want to clear all fields");case 2:if(!e.sent){e.next=5;break}for(t in i)i[t].value="",i[t].error="";H["b"].emit(G["a"].ON_CLEAR);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),s=function(){return Object(M["e"])(i,(function(e){return n("saveOutcome",e)}))};return{form:i,today:a,isTransferredOut:c,onSave:s,onReset:l,getFacilities:je["b"]}}});const xe=J()(we,[["render",ge]]);var ke=xe,ye=Object(r["defineComponent"])({components:{IonContent:x["IonContent"],IonFooter:x["IonFooter"],IonHeader:x["IonHeader"],IonTitle:x["IonTitle"],IonToolbar:x["IonToolbar"],IonButton:x["IonButton"],IonGrid:x["IonGrid"],IonRow:x["IonRow"],IonCol:x["IonCol"],IonBadge:x["IonBadge"],OutcomesTable:ce,EnrollmentForm:me,OutcomeForm:ke},props:{patient:{type:Object,required:!0}},setup:function(e){var t=u["c"].toStandardHisDisplayFormat,n=u["c"].toStandardHisFormat,a=new ee["a"](e.patient.getID()),i=Object(r["computed"])((function(){return n(e.patient.getBirthdate())})),c=Object(r["ref"])(),l=Object(r["computed"])((function(){return!Object(te["isEmpty"])(c.value)})),s=Object(r["ref"])(""),d=Object(r["ref"])(),p=Object(r["computed"])((function(){var e,t,n;return null!==(e=null===(t=c.value)||void 0===t||null===(n=t.patient_states)||void 0===n?void 0:n.length)&&void 0!==e?e:0})),f=Object(r["computed"])((function(){return l.value&&s.value?"Patient enrolled in this porgram on ".concat(t(s.value)):"Patient is not enrolled in this program"})),m=function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(t){var n,r,o;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(n=t.date,r=t.status,o=t.nextFacility,a.setStateDate(n),a.setStateId(r.value),!o){e.next=6;break}return e.next=6,a.transferOutEncounter(o.other);case 6:return e.next=8,a.updateState();case 8:return e.next=10,Object(q["d"])("Outcome saved successfully",1e3);case 10:return e.next=12,U["a"].hide();case 12:H["b"].emit(G["a"].RELOAD_PATIENT_VISIT_DATA);case 13:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),b=function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a.setProgramDate(t),e.next=3,a.enrollProgram();case 3:return e.next=5,Object(q["d"])("Program enrolled successfully",1e3);case 5:return e.next=7,U["a"].hide();case 7:H["b"].emit(G["a"].RELOAD_PATIENT_VISIT_DATA);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),v=function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a.setPatientProgramId((null===(t=c.value)||void 0===t?void 0:t.patient_program_id)||-1),e.next=3,a.voidProgram("duplicate / system error");case 3:return e.next=5,Object(q["d"])("Patient voided from program successfully",1e3);case 5:return e.next=7,U["a"].hide();case 7:H["b"].emit(G["a"].RELOAD_PATIENT_VISIT_DATA);case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),h=function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(t){var n,r,o;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r=t.stateId,o=t.index,a.setStateId(r),e.next=4,a.voidState("duplicate / system error");case 4:Object(q["d"])("Outcome voided successfully"),null===(n=c.value)||void 0===n||n.patient_states.splice(o,1),H["b"].emit(G["a"].RELOAD_PATIENT_VISIT_DATA);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(r["onMounted"])(Object(o["a"])(regeneratorRuntime.mark((function e(){var t,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,a.getPrograms();case 2:if(t=e.sent,c.value=t.find((function(e){return"HIV PROGRAM"===e.program.name})),!c.value){e.next=10;break}return s.value=c.value.date_enrolled,e.next=8,a.getProgramOutcomes();case 8:n=e.sent,d.value=n.map((function(e){return{label:e.name,value:e.program_workflow_state_id,other:e}}));case 10:case"end":return e.stop()}}),e)})))),{modal:U["a"],patientProgram:a,isEnrolled:l,enrollDate:s,birthdate:i,enrollmentStatus:f,outcomes:d,program:c,totalStates:p,toStandardHisDisplayFormat:t,saveOutcome:m,enrollProgram:b,voidProgram:v,voidOutcome:h}}});const Ce=J()(ye,[["render",$]]);var Ne=Ce,Re=Object(r["withScopeId"])("data-v-09db14b0");Object(r["pushScopeId"])("data-v-09db14b0");var Ve=Object(r["createTextVNode"])("Patient Visit"),Ie=Object(r["createTextVNode"])("Close"),De=Object(r["createTextVNode"])("Reset"),_e=Object(r["createTextVNode"])("Save");Object(r["popScopeId"])();var Te=Re((function(e,t,n,a,o,u){var i=Object(r["resolveComponent"])("ion-title"),c=Object(r["resolveComponent"])("ion-toolbar"),l=Object(r["resolveComponent"])("ion-header"),s=Object(r["resolveComponent"])("DateInput"),d=Object(r["resolveComponent"])("ion-col"),p=Object(r["resolveComponent"])("NumberInput"),f=Object(r["resolveComponent"])("SelectInput"),m=Object(r["resolveComponent"])("yes-no-input"),b=Object(r["resolveComponent"])("ion-label"),v=Object(r["resolveComponent"])("ion-checkbox"),h=Object(r["resolveComponent"])("ion-item"),g=Object(r["resolveComponent"])("multi-column-view"),O=Object(r["resolveComponent"])("ion-row"),j=Object(r["resolveComponent"])("ion-grid"),w=Object(r["resolveComponent"])("ion-content"),x=Object(r["resolveComponent"])("ion-button"),k=Object(r["resolveComponent"])("ion-footer");return Object(r["openBlock"])(),Object(r["createBlock"])(r["Fragment"],null,[Object(r["createVNode"])(l,null,{default:Re((function(){return[Object(r["createVNode"])(c,null,{default:Re((function(){return[Object(r["createVNode"])(i,null,{default:Re((function(){return[Ve]})),_:1})]})),_:1})]})),_:1}),Object(r["createVNode"])(w,{class:" ion-padding"},{default:Re((function(){return[Object(r["createVNode"])(j,{style:{width:"100%"}},{default:Re((function(){return[Object(r["createVNode"])(O,null,{default:Re((function(){return[Object(r["createVNode"])(d,{size:"6",class:"ion-margin-vertical"},{default:Re((function(){return[Object(r["createVNode"])(s,{modelValue:e.form.visitDate,"onUpdate:modelValue":t[1]||(t[1]=function(t){return e.form.visitDate=t}),form:e.form,minDate:e.birthdate,maxDate:e.today},null,8,["modelValue","form","minDate","maxDate"])]})),_:1}),Object(r["createVNode"])(d,{size:"6",class:"ion-margin-vertical"},{default:Re((function(){return[Object(r["createVNode"])(p,{modelValue:e.form.weight,"onUpdate:modelValue":t[2]||(t[2]=function(t){return e.form.weight=t}),form:e.form,min:1},null,8,["modelValue","form"])]})),_:1}),e.showHeightField?(Object(r["openBlock"])(),Object(r["createBlock"])(d,{key:0,size:"6",class:"ion-margin-vertical"},{default:Re((function(){return[Object(r["createVNode"])(p,{modelValue:e.form.height,"onUpdate:modelValue":t[3]||(t[3]=function(t){return e.form.height=t}),form:e.form,min:1},null,8,["modelValue","form"])]})),_:1})):Object(r["createCommentVNode"])("",!0),Object(r["createVNode"])(d,{class:"ion-margin-vertical",size:e.showHeightField?6:12},{default:Re((function(){return[Object(r["createVNode"])(f,{modelValue:e.form.tbStatus,"onUpdate:modelValue":t[4]||(t[4]=function(t){return e.form.tbStatus=t}),options:e.tbStatuses},null,8,["modelValue","options"])]})),_:1},8,["size"]),e.isFemale?(Object(r["openBlock"])(),Object(r["createBlock"])(r["Fragment"],{key:1},[Object(r["createVNode"])(d,{size:"6",class:"ion-margin-vertical ion-padding-vertical"},{default:Re((function(){return[Object(r["createVNode"])(m,{modelValue:e.form.isPregnant,"onUpdate:modelValue":t[5]||(t[5]=function(t){return e.form.isPregnant=t}),inline:""},null,8,["modelValue"])]})),_:1}),Object(r["createVNode"])(d,{size:"6",class:"ion-margin-vertical ion-padding-vertical"},{default:Re((function(){return[Object(r["createVNode"])(m,{modelValue:e.form.isBreastfeeding,"onUpdate:modelValue":t[6]||(t[6]=function(t){return e.form.isBreastfeeding=t}),inline:""},null,8,["modelValue"])]})),_:1})],64)):Object(r["createCommentVNode"])("",!0),Object(r["createVNode"])(d,{size:"6",class:"ion-margin-vertical"},{default:Re((function(){return[Object(r["createVNode"])(m,{modelValue:e.form.hasContraindications,"onUpdate:modelValue":t[7]||(t[7]=function(t){return e.form.hasContraindications=t}),inline:""},null,8,["modelValue"]),e.hasContraindications?(Object(r["openBlock"])(),Object(r["createBlock"])(g,{key:0,items:e.contraIndications,numberOfColumns:2},{default:Re((function(e){var t=e.entries;return[(Object(r["openBlock"])(!0),Object(r["createBlock"])(r["Fragment"],null,Object(r["renderList"])(t,(function(e){return Object(r["openBlock"])(),Object(r["createBlock"])(h,{lines:"none",key:e.value},{default:Re((function(){return[Object(r["createVNode"])(b,null,{default:Re((function(){return[Object(r["createTextVNode"])(Object(r["toDisplayString"])(e.label),1)]})),_:2},1024),Object(r["createVNode"])(v,{slot:"start",modelValue:e.isChecked,"onUpdate:modelValue":function(t){return e.isChecked=t}},null,8,["modelValue","onUpdate:modelValue"])]})),_:2},1024)})),128))]})),_:1},8,["items"])):Object(r["createCommentVNode"])("",!0)]})),_:1}),Object(r["createVNode"])(d,{class:"ion-padding-start",size:"6"},{default:Re((function(){return[Object(r["createVNode"])(m,{modelValue:e.form.hasSideEffects,"onUpdate:modelValue":t[8]||(t[8]=function(t){return e.form.hasSideEffects=t}),inline:""},null,8,["modelValue"]),e.hasSideEffects?(Object(r["openBlock"])(),Object(r["createBlock"])(g,{key:0,items:e.sideEffects,numberOfColumns:2},{default:Re((function(e){var t=e.entries;return[(Object(r["openBlock"])(!0),Object(r["createBlock"])(r["Fragment"],null,Object(r["renderList"])(t,(function(e){return Object(r["openBlock"])(),Object(r["createBlock"])(h,{lines:"none",key:e.value},{default:Re((function(){return[Object(r["createVNode"])(b,null,{default:Re((function(){return[Object(r["createTextVNode"])(Object(r["toDisplayString"])(e.label),1)]})),_:2},1024),Object(r["createVNode"])(v,{slot:"start",modelValue:e.isChecked,"onUpdate:modelValue":function(t){return e.isChecked=t}},null,8,["modelValue","onUpdate:modelValue"])]})),_:2},1024)})),128))]})),_:1},8,["items"])):Object(r["createCommentVNode"])("",!0)]})),_:1}),Object(r["createVNode"])(d,{size:"6",class:"ion-margin-vertical"},{default:Re((function(){return[Object(r["createVNode"])(f,{modelValue:e.form.regimen,"onUpdate:modelValue":t[9]||(t[9]=function(t){return e.form.regimen=t}),options:e.regimens},null,8,["modelValue","options"])]})),_:1}),Object(r["createVNode"])(d,{size:"6",class:"ion-margin-vertical"},{default:Re((function(){return[Object(r["createVNode"])(p,{modelValue:e.form.totalArvsGiven,"onUpdate:modelValue":t[10]||(t[10]=function(t){return e.form.totalArvsGiven=t}),form:e.form,min:1},null,8,["modelValue","form"])]})),_:1}),Object(r["createVNode"])(d,{size:"6",class:"ion-margin-vertical"},{default:Re((function(){return[Object(r["createVNode"])(p,{modelValue:e.form.totalCPTGiven,"onUpdate:modelValue":t[11]||(t[11]=function(t){return e.form.totalCPTGiven=t}),form:e.form,min:1},null,8,["modelValue","form"])]})),_:1}),Object(r["createVNode"])(d,{size:"6",class:"ion-margin-vertical"},{default:Re((function(){return[Object(r["createVNode"])(f,{modelValue:e.form.tbMed,"onUpdate:modelValue":t[12]||(t[12]=function(t){return e.form.tbMed=t}),options:e.tbMeds},null,8,["modelValue","options"])]})),_:1}),e.hasGiven6H||e.hasGivenRFP?(Object(r["openBlock"])(),Object(r["createBlock"])(d,{key:2,size:"6"},{default:Re((function(){return[Object(r["createVNode"])(p,{modelValue:e.form.totalIPTGiven,"onUpdate:modelValue":t[13]||(t[13]=function(t){return e.form.totalIPTGiven=t}),form:e.form,min:1},null,8,["modelValue","form"])]})),_:1})):Object(r["createCommentVNode"])("",!0),e.hasGivenRFP?(Object(r["openBlock"])(),Object(r["createBlock"])(d,{key:3,size:"6"},{default:Re((function(){return[Object(r["createVNode"])(p,{modelValue:e.form.totalRFPGiven,"onUpdate:modelValue":t[14]||(t[14]=function(t){return e.form.totalRFPGiven=t}),form:e.form,min:1},null,8,["modelValue","form"])]})),_:1})):Object(r["createCommentVNode"])("",!0),e.hasGiven3HP?(Object(r["openBlock"])(),Object(r["createBlock"])(d,{key:4,size:"6"},{default:Re((function(){return[Object(r["createVNode"])(p,{modelValue:e.form.total3HPGiven,"onUpdate:modelValue":t[15]||(t[15]=function(t){return e.form.total3HPGiven=t}),form:e.form,min:1},null,8,["modelValue","form"])]})),_:1})):Object(r["createCommentVNode"])("",!0),e.hasGiven3HP||e.hasGivenRFP||e.hasGiven6H?(Object(r["openBlock"])(),Object(r["createBlock"])(d,{key:5,size:"6"},{default:Re((function(){return[Object(r["createVNode"])(p,{modelValue:e.form.totalPyridoxineGiven,"onUpdate:modelValue":t[16]||(t[16]=function(t){return e.form.totalPyridoxineGiven=t}),form:e.form,min:1},null,8,["modelValue","form"])]})),_:1})):Object(r["createCommentVNode"])("",!0),Object(r["createVNode"])(d,{size:"6",class:"ion-margin-vertical"},{default:Re((function(){return[Object(r["createVNode"])(m,{modelValue:e.form.patientPresent,"onUpdate:modelValue":t[17]||(t[17]=function(t){return e.form.patientPresent=t}),inline:"",disabled:e.form.patientPresent.disabled},null,8,["modelValue","disabled"])]})),_:1}),Object(r["createVNode"])(d,{size:"6",class:"ion-margin-vertical"},{default:Re((function(){return[Object(r["createVNode"])(m,{modelValue:e.form.guardianPresent,"onUpdate:modelValue":t[18]||(t[18]=function(t){return e.form.guardianPresent=t}),inline:""},null,8,["modelValue"])]})),_:1}),e.prevDrugs.length>0?(Object(r["openBlock"])(),Object(r["createBlock"])(d,{key:6,size:"6",class:"ion-margin-vertical"},{default:Re((function(){return[Object(r["createVNode"])(p,{modelValue:e.form.pillCount,"onUpdate:modelValue":t[19]||(t[19]=function(t){return e.form.pillCount=t}),form:e.form,min:1},null,8,["modelValue","form"])]})),_:1})):Object(r["createCommentVNode"])("",!0),Object(r["createVNode"])(d,{size:e.prevDrugs.length>0?6:12,class:"ion-margin-vertical"},{default:Re((function(){return[Object(r["createVNode"])(s,{modelValue:e.form.nextAppointmentDate,"onUpdate:modelValue":t[20]||(t[20]=function(t){return e.form.nextAppointmentDate=t}),form:e.form,minDate:e.form.visitDate.value,maxDate:e.drugRunOutDate},null,8,["modelValue","form","minDate","maxDate"])]})),_:1},8,["size"])]})),_:1})]})),_:1})]})),_:1}),Object(r["createVNode"])(k,null,{default:Re((function(){return[Object(r["createVNode"])(c,null,{default:Re((function(){return[Object(r["createVNode"])(x,{color:"primary",onClick:t[21]||(t[21]=function(t){return e.modal.hide()}),slot:"end"},{default:Re((function(){return[Ie]})),_:1}),Object(r["createVNode"])(x,{color:"warning",onClick:e.onClear,slot:"end"},{default:Re((function(){return[De]})),_:1},8,["onClick"]),Object(r["createVNode"])(x,{color:"success",onClick:e.onSubmit,slot:"end"},{default:Re((function(){return[_e]})),_:1},8,["onClick"])]})),_:1})]})),_:1})],64)})),Ae=n("2909"),Pe=(n("b64b"),n("4de4"),n("0481"),n("4069"),n("13ea")),Ee=n.n(Pe),Se=n("6b6c"),Be=n("92c1"),Me=n("d4ec"),Le=n("bee2"),Fe=n("262e"),He=n("2caf"),Ge=(n("aff5"),n("a9e3"),n("1c74")),Ue=n("71c3"),qe=function(e){Object(Fe["a"])(n,e);var t=Object(He["a"])(n);function n(e){return Object(Me["a"])(this,n),t.call(this,e)}return Object(Le["a"])(n,[{key:"isPregnant",value:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,g["a"].getFirstObs(this.getID(),"Is patient pregnant");case 2:return t=e.sent,e.abrupt("return",t&&!!t.value_coded.match(/Yes/i)&&g["a"].obsInValidPeriod(t));case 4:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"hasPregnancyObsToday",value:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,g["a"].getFirstObsDatetime(this.getID(),"Is patient pregnant");case 2:return t=e.sent,e.abrupt("return",t&&u["c"].toStandardHisFormat(t)===Ge["e"].getSessionDate()&&this.isFemale());case 4:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"hasPregnancyAtARTInitiation",value:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,g["a"].getLastValueCoded(this.getID(),"Is patient pregnant");case 2:if(t=e.sent,e.t0=t,!e.t0){e.next=8;break}return e.next=7,g["a"].getConceptName(t);case 7:e.t0=e.sent;case 8:return e.abrupt("return",e.t0);case 9:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"breastFeedingAtARTInitiation",value:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,g["a"].getLastValueCoded(this.getID(),"Is patient breast feeding");case 2:if(t=e.sent,e.t0=t,!e.t0){e.next=8;break}return e.next=7,g["a"].getConceptName(t);case 7:e.t0=e.sent;case 8:return e.abrupt("return",e.t0);case 9:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"getInitialWeight",value:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",g["a"].getLastValueNumber(this.getID(),"weight"));case 1:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"getRecentWeight",value:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",g["a"].getFirstValueNumber(this.getID(),"weight")||-1);case 1:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"getInitialHeight",value:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",g["a"].getLastValueNumber(this.getID(),"Height"));case 1:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"getInitialTBStatus",value:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,g["a"].getLastValueCoded(this.getID(),"TB Status at Initiation");case 2:if(t=e.sent,!t){e.next=5;break}return e.abrupt("return",g["a"].getConceptName(t));case 5:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"getRecentHeight",value:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",g["a"].getFirstValueNumber(this.getID(),"Height")||-1);case 1:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"getWeightHistory",value:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,g["a"].getAll(this.getID(),"weight");case 3:return t=e.sent,e.abrupt("return",t.map((function(e){return{weight:e.value_numeric,date:e.obs_datetime}})));case 7:return e.prev=7,e.t0=e["catch"](0),console.warn(e.t0),e.abrupt("return",[]);case 11:case"end":return e.stop()}}),e,this,[[0,7]])})));function t(){return e.apply(this,arguments)}return t}()},{key:"getCompleteTBTherapyHistory",value:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,g["a"].getAll(this.getID(),"TB treatment history");case 2:return t=e.sent,e.abrupt("return",t.filter((function(e){return e.value_text.match(/Complete/i)})));case 4:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"getInitialBMI",value:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",g["a"].getLastValueNumber(this.getID(),"BMI"));case 1:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"everReceivedART",value:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",g["a"].getFirstValueCoded(this.getID(),"Ever received ART"));case 1:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"agreesToFollowUp",value:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",g["a"].getFirstValueCoded(this.getID(),"Agrees to followup"));case 1:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"getHIVTestDate",value:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,g["a"].getFirstObs(this.getID(),"Confirmatory HIV test date");case 2:if(t=e.sent,!t||!t.value_datetime){e.next=5;break}return e.abrupt("return",t.value_datetime);case 5:if(!t||!t.value_text){e.next=7;break}return e.abrupt("return",t.value_text);case 7:return e.abrupt("return",null);case 8:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"getARTStartDate",value:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(){var t,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,g["a"].getFirstObs(this.getID(),"Date ART started");case 2:if(t=e.sent,!t||!t.value_datetime){e.next=5;break}return e.abrupt("return",t.value_datetime);case 5:if(!t||!t.value_text){e.next=7;break}return e.abrupt("return",t.value_text);case 7:return e.next=9,Ue["a"].getAllDrugOrders(this.getID(),Number.MAX_SAFE_INTEGER);case 9:if(n=e.sent,Object(te["isEmpty"])(n)){e.next=12;break}return e.abrupt("return",n[0].order["start_date"]);case 12:return e.abrupt("return",null);case 13:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"getHIVTestLocation",value:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",g["a"].getFirstValueText(this.getID(),"Confirmatory HIV test location"));case 1:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"getReasonForStartingART",value:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",g["a"].getFirstValueCoded(this.getID(),"Reason for ART eligibility"));case 1:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"getStagingCondition",value:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",g["a"].getFirstValueCoded(this.getID(),"Who stages criteria present"));case 1:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"getWhoStage",value:function(){return g["a"].getFirstValueCoded(this.getID(),"Who stage")}}]),n}(O["a"]),Ye=n("6d32"),ze=n("b515"),Je=n("3b8c"),We=n("66c5"),Qe=n("0690"),Ke=n("83af"),Xe=n("dac2"),Ze=n("aee2"),$e=n("5f2c");n("4ec9");function et(e,t){return Object(Ae["a"])(new Map(e.filter(Boolean).map((function(e){var n=Array.isArray(t)?t.map((function(t){return e[t]})).join("_"):e[t];return[n,e]}))).values())}var tt=Object(r["defineComponent"])({components:{IonContent:x["IonContent"],IonFooter:x["IonFooter"],IonHeader:x["IonHeader"],IonTitle:x["IonTitle"],IonToolbar:x["IonToolbar"],IonButton:x["IonButton"],IonItem:x["IonItem"],IonLabel:x["IonLabel"],IonGrid:x["IonGrid"],IonRow:x["IonRow"],IonCol:x["IonCol"],IonCheckbox:x["IonCheckbox"],SelectInput:A["a"],NumberInput:P["a"],DateInput:T["a"],YesNoInput:Se["a"],MultiColumnView:Be["a"]},props:{patient:{type:Object,required:!0}},setup:function(e){var t=Object(r["computed"])((function(){return e.patient.getID()})),n=new ze["a"](t.value,-1),a=new Je["a"](t.value,-1),i=new Xe["a"](t.value,-1),c=new $e["a"](t.value,-1),l=new We["a"](t.value,-1),s=new Qe["a"](t.value,-1),d=new Ke["a"](t.value,-1),p=Object(r["ref"])(),f=Object(r["ref"])([]),m=Object(r["ref"])([]),b=Object(r["ref"])([]),v=Object(r["ref"])([]),h=Object(r["computed"])((function(){return!(p.value&&e.patient.getAge()>18)})),g=Object(r["computed"])((function(){return e.patient.isFemale()})),O=Object(r["ref"])(""),j=y()().format(u["b"]),w=y()(e.patient.getBirthdate()).format(u["b"]),x=Object(r["reactive"])({visitDate:{value:y()().format("YYYY-MM-DD"),label:"Visit Date",required:!0,validation:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!y()(t.value).isAfter(j)){e.next=2;break}return e.abrupt("return",["Visit date cannot be after today's date"]);case 2:if(!y()(t.value).isBefore(w)){e.next=4;break}return e.abrupt("return",["Visit date cannot be before patient's birth date"]);case 4:return e.abrupt("return",null);case 5:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}()},weight:{value:void 0,label:"Weight",required:!0,computedValue:function(e){return{tag:"vitals",obs:n.buildValueNumber("Weight",e)}},validation:function(e){return n.validator(Object(ae["a"])(Object(ae["a"])({},e),{},{label:"Weight"}))}},height:{value:void 0,label:"Height",computedValue:function(e){return{tag:"vitals",obs:n.buildValueNumber("Height",e)}},validation:function(e){return h.value&&n.validator(Object(ae["a"])(Object(ae["a"])({},e),{},{label:"Height"}))}},isPregnant:{value:void 0,label:"Is the patient pregnant?",computedValue:function(e){return{tag:"consultation",obs:a.buildValueCoded("Is patient pregnant",e)}},validation:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",g.value&&Oe["a"].required(t));case 1:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}()},isBreastfeeding:{value:void 0,label:"Is the patient breastfeeding?",computedValue:function(e){return{tag:"consultation",obs:a.buildValueCoded("Is patient breast feeding",e)}},validation:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",g.value&&Oe["a"].required(t));case 1:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}()},nextAppointmentDate:{value:void 0,label:"Next Appointment Date",required:!0,computedValue:function(e){return{tag:"appointment",obs:d.buildValueDate("Appointment date",e)}},validation:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(t,n){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!y()(t.value).isBefore(n.visitDate.value)){e.next=2;break}return e.abrupt("return",["Appointment date cannot be before visit date"]);case 2:if(!y()(t.value).isAfter(O.value)){e.next=4;break}return e.abrupt("return",["Appointment date cannot be after drug run out date"]);case 4:return e.abrupt("return",null);case 5:case"end":return e.stop()}}),e)})));function t(t,n){return e.apply(this,arguments)}return t}()},patientPresent:{value:void 0,label:"Is the patient present?",required:!0,computedValue:function(e){return{tag:"reception",obs:l.buildValueCoded("Patient present",e)}}},guardianPresent:{value:void 0,label:"Is the guardian present?",required:!0,computedValue:function(e){return{tag:"reception",obs:l.buildValueCoded("Guardian present",e)}}},pillCount:{value:void 0,label:"Pill Count",required:v.value.length>0,validation:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",v.value.length>0&&Oe["a"].isNumber(t));case 1:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}()},regimen:{value:void 0,label:"Regimen",placeholder:"Select a regimen",computedValue:function(){return{tag:"consultation",obs:i.buildValueCoded("Medication orders","Antiretroviral drugs")}}},totalCPTGiven:{value:void 0,label:"Total CPT Given",computedValue:function(){return{tag:"consultation",obs:i.buildValueCoded("Medication orders","CPT")}}},totalIPTGiven:{value:void 0,label:"Total IPT Given",computedValue:function(){return{tag:"consultation",obs:i.buildValueCoded("Medication orders","INH")}},validation:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(t,n){var r,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",("6H"===(null===(r=n.tbMed.value)||void 0===r?void 0:r.label)||"3HP (RFP + INH)"===(null===(a=n.tbMed.value)||void 0===a?void 0:a.label))&&Oe["a"].isNumber(t));case 1:case"end":return e.stop()}}),e)})));function t(t,n){return e.apply(this,arguments)}return t}()},totalRFPGiven:{value:void 0,label:"Total RFP Given",computedValue:function(){return{tag:"consultation",obs:i.buildValueCoded("Medication orders","3HP (RFP + INH)")}},validation:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(t,n){var r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return","3HP (RFP + INH)"===(null===(r=n.tbMed.value)||void 0===r?void 0:r.label)&&Oe["a"].isNumber(t));case 1:case"end":return e.stop()}}),e)})));function t(t,n){return e.apply(this,arguments)}return t}()},total3HPGiven:{value:void 0,label:"Total 3HP Given",computedValue:function(){return{tag:"consultation",obs:i.buildValueCoded("Medication orders","INH 300 / RFP 300 (3HP)")}},validation:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(t,n){var r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return","3HP (INH 300 / RFP 300)"===(null===(r=n.tbMed.value)||void 0===r?void 0:r.label)&&Oe["a"].isNumber(t));case 1:case"end":return e.stop()}}),e)})));function t(t,n){return e.apply(this,arguments)}return t}()},totalArvsGiven:{value:void 0,label:"Total ARVs Given",validation:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(t,n){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",!Ee()(n.regimen.value)&&Oe["a"].isNumber(t));case 1:case"end":return e.stop()}}),e)})));function t(t,n){return e.apply(this,arguments)}return t}()},totalPyridoxineGiven:{value:void 0,label:"Total Pyridoxine Given",validation:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(t,n){var r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",(null===(r=n.tbMed.value)||void 0===r?void 0:r.label)&&Oe["a"].isNumber(t));case 1:case"end":return e.stop()}}),e)})));function t(t,n){return e.apply(this,arguments)}return t}()},tbMed:{value:void 0,label:"TB Medication",placeholder:"Select a TB medication"},hasContraindications:{value:"No",label:"Has Side Effects / Contraindications ?",validation:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(t,n){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",Oe["a"].validateSeries([function(){return Oe["a"].required(t)},function(){return"No"===t.value||b.value.some((function(e){return e.isChecked}))?null:["Please select at least one side effect"]}]));case 1:case"end":return e.stop()}}),e)})));function t(t,n){return e.apply(this,arguments)}return t}()},hasSideEffects:{value:"No",label:"Has Other Side Effects ?",validation:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(t,n){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",Oe["a"].validateSeries([function(){return Oe["a"].required(t)},function(){return"No"===t.value||b.value.some((function(e){return e.isChecked}))?null:["Please select at least one side effect"]}]));case 1:case"end":return e.stop()}}),e)})));function t(t,n){return e.apply(this,arguments)}return t}()},tbStatus:{value:void 0,label:"TB Status",computedValue:function(e){return{tag:"consultation",obs:a.buildValueCoded("TB Status",e.value)}},validation:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",Oe["a"].required(t));case 1:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}()}});Object(r["watch"])(x.patientPresent,(function(e){"No"===e.value&&(x.guardianPresent.value="Yes")})),Object(r["watch"])(x.guardianPresent,(function(e){"No"===e.value&&(x.patientPresent.value="Yes")})),Object(r["watch"])([x.weight,x.tbStatus],Object(o["a"])(regeneratorRuntime.mark((function e(){var t,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!x.weight.value){e.next=8;break}return t=!Ee()(x.tbStatus.value)&&!x.tbStatus.value.label.match(/TB Not Suspected/i),e.next=4,Ye["a"].getRegimensByWeight(x.weight.value,t);case 4:n=e.sent,Ee()(n)||(f.value=Object.keys(n).map((function(e){return{label:e,value:e,other:n[e]}}))),x.patientPresent.value="Yes",x.patientPresent.disabled=!0;case 8:case"end":return e.stop()}}),e)})))),Object(r["watch"])([function(){return x.totalArvsGiven.value},function(){return x.pillCount.value}],(function(){var e=parseInt(x.totalArvsGiven.value)||0,t=parseInt(x.pillCount.value)||0;O.value=y()(x.visitDate.value).add(e+t,"days").format(u["b"]),x.nextAppointmentDate.label="Next Appointment Date (Drug run out date: ".concat(y()(O.value).format(u["a"]),")"),x.nextAppointmentDate.value=O.value}));var k=Object(r["computed"])((function(){var e;return"3HP (INH 300 / RFP 300)"===(null===(e=x.tbMed.value)||void 0===e?void 0:e.label)})),C=Object(r["computed"])((function(){var e;return"3HP (RFP + INH)"===(null===(e=x.tbMed.value)||void 0===e?void 0:e.label)})),N=Object(r["computed"])((function(){var e;return"6H"===(null===(e=x.tbMed.value)||void 0===e?void 0:e.label)})),R=Object(r["computed"])((function(){return"Yes"===x.hasContraindications.value})),V=Object(r["computed"])((function(){return"Yes"===x.hasSideEffects.value})),I=Object(E["d"])(["Confirmed TB Not on treatment","Confirmed TB on treatment","TB Not Suspected","TB Suspected"]),D=Object(E["d"])(["6H","3HP (RFP + INH)","3HP (INH 300 / RFP 300)"]),_=function(e){x.patientPresent.value=e,"No"===e&&(x.guardianPresent.value="Yes")},T=function(e){x.guardianPresent.value=e,"No"===e&&(x.patientPresent.value="Yes")},A=function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(t){var r,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r=t.height||p.value,a=Ze["a"].calculateBMI(t.weight,r),e.abrupt("return",n.buildValueNumber("BMI",a));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),P=function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(){var t,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,a.buildValueCoded("Patient using family planning","No");case 2:return e.t0=e.sent,t=[e.t0],n=a.getFamilyPlanningMethods(),n.forEach(function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(n){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.t0=t,e.next=3,a.buildValueCoded(n,"No");case 3:e.t1=e.sent,e.t0.push.call(e.t0,e.t1);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),e.abrupt("return",t);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),S=function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",Promise.all(F["a"].getConceptsByCategory("tb_symptom",!0).map(function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",a.buildGroupValueCoded(t.name,t.name,"No"));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),B=function(e,t,n,r){return{drug_inventory_id:e.drug_id,equivalent_daily_dose:i.calculateEquivalentDosage(e.am,e.pm),dose:i.calculateDosage(e.am,e.pm),start_date:r,auto_expire_date:y()(r).add(n,"days").format("YYYY-MM-DD"),units:e.units,qty:t,frequency:e.frequency,instructions:i.getInstructions(e.drug_name,e.am,e.pm,e.units)}},L=function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,qe.setSessionDate(x.visitDate.value);case 2:return n.setDate(x.visitDate.value),a.setDate(x.visitDate.value),i.setDate(x.visitDate.value),l.setDate(x.visitDate.value),s.setDate(x.visitDate.value),d.setDate(x.visitDate.value),c.setDate(x.visitDate.value),e.next=11,Object(M["e"])(x,function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(t,r){var u,p,f,h,O,j,w,x,y,I,D,_,T,E,L,F,Y;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,n.createEncounter();case 2:return e.next=4,Object(M["d"])(r,"vitals");case 4:return p=e.sent,e.next=7,A(t);case 7:return f=e.sent,e.next=10,n.saveObservationList([].concat(Object(Ae["a"])(p),[f]));case 10:return e.next=12,a.createEncounter();case 12:return e.next=14,Object(M["d"])(r,"consultation");case 14:if(h=e.sent,!g.value){e.next=21;break}return e.t0=h,e.next=19,P();case 19:e.t1=e.sent,e.t0.concat.call(e.t0,e.t1);case 21:if(!R.value){e.next=27;break}return e.t2=h,e.next=25,Object(M["b"])("Malawi ART side effects",m.value);case 25:e.t3=e.sent,e.t2.concat.call(e.t2,e.t3);case 27:if(!V.value){e.next=33;break}return e.t4=h,e.next=31,Object(M["b"])("Other side effect",b.value);case 31:e.t5=e.sent,e.t4.concat.call(e.t4,e.t5);case 33:return e.t6=h,e.next=36,S();case 36:return e.t7=e.sent,e.t6.concat.call(e.t6,e.t7),e.next=40,a.saveObservationList(h);case 40:return e.next=42,i.createEncounter();case 42:if(O=[],j=0,!Ee()(t.regimen)&&t.totalArvsGiven&&(w=t.regimen.other,j=Math.min.apply(Math,Object(Ae["a"])(w.map((function(e){return t.totalArvsGiven/(e.am+e.pm)+2})))),w.forEach((function(e){return O.push(B(e,t.totalArvsGiven,j,t.visitDate))}))),!t.totalCPTGiven){e.next=51;break}return e.t8=et,e.next=49,Ye["a"].getRegimenExtras("Cotrimoxazole",t.weight);case 49:e.t9=e.sent,(0,e.t8)(e.t9,"concept_name").filter((function(e){return"Daily (QOD)"===e.frequency})).forEach((function(e){return O.push(B(e,t.totalCPTGiven,j,t.visitDate))}));case 51:if(null===(u=t.tbMed)||void 0===u||!u.value){e.next=71;break}return e.t10=et,e.next=55,Ye["a"].getRegimenExtras("INH",t.weight);case 55:if(e.t11=e.sent,e.t12=["concept_name","frequency"],x=(0,e.t10)(e.t11,e.t12),y=x.find((function(e){return"Pyridoxine"===e["concept_name"]})),y&&t.totalPyridoxineGiven&&O.push(B(y,t.totalPyridoxineGiven,j,t.visitDate)),t.totalIPTGiven&&(I=x.find((function(e){return"Isoniazid"===e["concept_name"]&&(N.value&&"Daily (QOD)"===e.frequency||C.value&&"Weekly (QW)"===e.frequency)})),O.push(B(I,t.totalIPTGiven,j,t.visitDate))),!t.totalRFPGiven||!C.value){e.next=66;break}return e.next=64,Ye["a"].getRegimenExtras("Rifapentine",t.weight);case 64:D=e.sent,D.length&&O.push(B(D[0],t.totalRFPGiven,j,t.visitDate));case 66:if(!t.total3HPGiven||!k.value){e.next=71;break}return e.next=69,Ye["a"].getRegimenExtras("INH / RFP",t.weight);case 69:_=e.sent,O.push(B(_[0],t.total3HPGiven,j,t.visitDate));case 71:return e.next=73,i.createDrugOrder(O);case 73:return T=e.sent,E=T.map((function(e){var t=O.find((function(t){return t.drug_inventory_id===e.drug_inventory_id}));return c.buildDispensations(e.order_id,t.qty,1)})),e.next=77,c.saveDispensations(E.flat(1));case 77:return e.next=79,l.createEncounter();case 79:return e.next=81,Object(M["d"])(r,"reception");case 81:return L=e.sent,e.next=84,l.saveObservationList(L);case 84:if(!(v.value.length>0)){e.next=92;break}return e.next=87,s.createEncounter();case 87:return e.next=89,Promise.all(v.value.map(function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(n){var r,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r=s.calculateExpected(n.quantity,n.equivalent_daily_dose,n.order.start_date,n.frequency),a=s.calculateAdherence(n.quantity,t.pillCount,r),e.next=4,s.buildAdherenceObs(n.order_id,n.drug_inventory_id,a);case 4:return e.t0=e.sent,e.next=7,s.buildPillCountObs(n.order_id,t.pillCount);case 7:return e.t1=e.sent,e.abrupt("return",[e.t0,e.t1]);case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 89:return F=e.sent,e.next=92,s.saveObservationList(F.flat(1));case 92:return e.next=94,d.createEncounter();case 94:return e.next=96,Object(M["d"])(r,"appointment");case 96:return Y=e.sent,e.next=99,d.saveObservationList(Y);case 99:return e.next=101,Object(q["d"])("Patient visit saved successfully");case 101:return e.next=103,qe.resetSessionDate();case 103:return e.next=105,U["a"].hide();case 105:H["b"].emit(G["a"].RELOAD_PATIENT_VISIT_DATA),H["b"].emit(G["a"].RELOAD_STAGING_INFORMATION);case 107:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}());case 11:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Y=function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(q["a"])("Are you sure you want to clear all fields?");case 2:if(!e.sent){e.next=5;break}for(t in x)x[t].value="",x[t].error="",x[t].disabled=!1;H["b"].emit(G["a"].ON_CLEAR);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(r["onMounted"])(Object(o["a"])(regeneratorRuntime.mark((function t(){var n,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.patient.getRecentHeight();case 2:return p.value=t.sent,t.next=5,e.patient.getRecentWeight();case 5:if(n=t.sent,!n){t.next=11;break}return t.next=9,Ye["a"].getRegimensByWeight(n);case 9:r=t.sent,Ee()(r)||(f.value=Object.keys(r).map((function(e){return{label:e,value:e,other:r[e]}})));case 11:return t.next=13,Ue["a"].getLastDrugsReceived(e.patient.getID());case 13:v.value=t.sent,x.pillCount.required=v.value.length>0,m.value=F["a"].getConceptsByCategory("contraindication",!0).map((function(e){return{value:e.concept_id,label:e.name,other:e}})),b.value=F["a"].getConceptsByCategory("side_effect",!0).map((function(e){return{value:e.concept_id,label:e.name,other:e}}));case 17:case"end":return t.stop()}}),t)})))),{today:j,form:x,regimens:f,contraIndications:m,sideEffects:b,tbStatuses:I,tbMeds:D,hasGiven3HP:k,hasGivenRFP:C,hasGiven6H:N,showHeightField:h,isFemale:g,modal:U["a"],hasContraindications:R,hasSideEffects:V,prevDrugs:v,drugRunOutDate:O,birthdate:w,onSubmit:L,setPatientPresent:_,setGuardianPresent:T,onClear:Y}}});n("9c9e");const nt=J()(tt,[["render",Te],["__scopeId","data-v-09db14b0"]]);var rt=nt,at=Object(r["defineComponent"])({props:{patient:{type:Object,required:!0},startDate:{type:String,required:!0}},components:{ReportTable:v["a"],IonCard:x["IonCard"],IonCardHeader:x["IonCardHeader"],IonCardTitle:x["IonCardTitle"],IonCardContent:x["IonCardContent"],IonButton:x["IonButton"]},setup:function(e){var t=Object(r["ref"])([]),n=Object(r["computed"])((function(){return e.patient.getID()})),a=Object(r["reactive"])({showIndex:!1,tableCssTheme:"emc-datatable-theme"}),i=Object(r["ref"])([{label:"Add Visit",action:function(){var t=Object(o["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.abrupt("return",U["a"].show(rt,{patient:e.patient}));case 1:case"end":return t.stop()}}),t)})));function n(){return t.apply(this,arguments)}return n}()},{label:"Update Outcome",action:function(){var t=Object(o["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.abrupt("return",U["a"].show(Ne,{patient:e.patient}));case 1:case"end":return t.stop()}}),t)})));function n(){return t.apply(this,arguments)}return n}()},{label:"Enter VL Results",action:function(){var t=Object(o["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.abrupt("return",U["a"].show(Q,{patient:e.patient}));case 1:case"end":return t.stop()}}),t)})));function n(){return t.apply(this,arguments)}return n}()}]),c=Object(r["ref"])([[b["a"].thTxt("Visit Date"),b["a"].thTxt("Given To"),b["a"].thTxt("Weight (Kg)"),b["a"].thTxt("Height (cm)"),b["a"].thTxt("BMI"),b["a"].thTxt("Preg"),b["a"].thTxt("B/F"),b["a"].thTxt("TB STATUS"),b["a"].thTxt("Side Effects"),b["a"].thTxt("ART Regimen"),b["a"].thTxt("Next Appointment"),b["a"].thTxt("Outcome"),b["a"].thTxt("Viral Load"),b["a"].thTxt("Void Visit")]]),l=function(t){var n="N/A"!==e.startDate?"("+y()(t).diff(e.startDate,"months")+"M)":"";return"".concat(u["c"].toStandardHisDisplayFormat(t)," ").concat(n)},s=function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(){var t,n,r=arguments;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t=r.length>0&&void 0!==r[0]?r[0]:[],n=r.length>1?r[1]:void 0,e.next=4,x["modalController"].create({component:m["a"],cssClass:"custom-modal",componentProps:{title:"Drugs dispensed on ".concat(u["c"].toStandardHisDisplayFormat(n)),columns:["DRUG NAME","QUANTITY","UNITS"],onRows:function(){return t.map((function(e){return[e[0],e[1],"tab(s)"]}))}}});case 4:e.sent.present();case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),d=function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(t,r,a){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:Object(w["a"])(function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(u){var i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,h["a"].getEncounters(n.value,{date:t});case 2:i=e.sent,i.forEach(function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,h["a"].voidEncounter(t.encounter_id,u);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),a.splice(r,1);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),"small-modal");case 1:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),p=function(){O["a"].getPatientVisits(n.value,!0).then(function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(r){var a,o,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:t.value=[],a=Object(f["a"])(r),e.prev=2,i=regeneratorRuntime.mark((function e(){var r,a,i,c,p,f,m,v;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r=o.value,e.next=3,j["a"].getCurrentProgramInformation(n.value,r);case 3:if(a=e.sent,i="",c="",p="",f="","Defaulted"===a.outcome){e.next=27;break}return e.next=11,g["a"].getFirstValueDatetime(n.value,"appointment date",r);case 11:return m=e.sent,m&&(i=u["c"].toStandardHisDisplayFormat(m)),e.next=15,g["a"].getFirstValueCoded(n.value,"Is patient pregnant",r);case 15:return c=e.sent,e.next=18,g["a"].getFirstValueCoded(n.value,"Is patient breast feeding",r);case 18:if(p=e.sent,"N/A"!==a["viral_load"]){e.next=26;break}return e.next=22,g["a"].getFirstObs(n.value,"HIV viral load",r);case 22:v=e.sent,v&&v.value_text&&v.value_numeric&&(f=1===v.value_numeric?"LDL":v.value_text+v.value_numeric.toString()),e.next=27;break;case 26:f=a["viral_load"];case 27:if(e.t0=a,!e.t0){e.next=58;break}if(e.t1=t.value,e.t2=b["a"].td(l(r)),e.t3=b["a"].td(a["visit_by"].match(/Unk/i)?"":a["visit_by"]),e.t4=b["a"].td("Defaulted"===a.outcome?"":a.weight),e.t5=b["a"].td("Defaulted"===a.outcome?"":a.height),e.t6=b["a"].td("Defaulted"===a.outcome?"":a.bmi),e.t7=b["a"].td(c||""),e.t8=b["a"].td(p||""),e.t9=b["a"],!a["tb_status"].match(/Unknown/i)&&"Defaulted"!==a.outcome){e.next=42;break}e.t10="",e.next=48;break;case 42:return e.next=44,F["a"].getCachedConceptName(a["tb_status"]);case 44:if(e.t11=e.sent,e.t11){e.next=47;break}e.t11="";case 47:e.t10=e.t11;case 48:e.t12=e.t10,e.t13=e.t9.td.call(e.t9,e.t12),e.t14=b["a"].td(a["side_effects"].length?"Yes":"Defaulted"!==a.outcome?"No":""),e.t15=b["a"].tdLink("Defaulted"===a.outcome?"":a.regimen,(function(){return s(a.pills_dispensed,r)})),e.t16=b["a"].td(i||""),e.t17=b["a"].td(a.outcome.match(/Unk/i)?"":a.outcome),e.t18=b["a"].td(f),e.t19=b["a"].tdBtn("X",(function(e,t){return d(r,e,t)}),{},"danger"),e.t20=[e.t2,e.t3,e.t4,e.t5,e.t6,e.t7,e.t8,e.t13,e.t14,e.t15,e.t16,e.t17,e.t18,e.t19],e.t1.push.call(e.t1,e.t20);case 58:case"end":return e.stop()}}),e)})),a.s();case 5:if((o=a.n()).done){e.next=9;break}return e.delegateYield(i(),"t0",7);case 7:e.next=5;break;case 9:e.next=14;break;case 11:e.prev=11,e.t1=e["catch"](2),a.e(e.t1);case 14:return e.prev=14,a.f(),e.finish(14);case 17:case"end":return e.stop()}}),e,null,[[2,11,14,17]])})));return function(t){return e.apply(this,arguments)}}())};return H["b"].on(G["a"].RELOAD_PATIENT_VISIT_DATA,(function(){return p()})),Object(r["onMounted"])((function(){p()})),{actionButtons:i,tableConfig:a,columns:c,rows:t}}});n("7e33");const ot=J()(at,[["render",p],["__scopeId","data-v-17e9b721"]]);var ut=ot,it=Object(r["withScopeId"])("data-v-22f18bd2");Object(r["pushScopeId"])("data-v-22f18bd2");var ct={style:{width:"100%",display:"flex",justifyContent:"space-between"}},lt={key:0},st={key:1},dt={key:3};Object(r["popScopeId"])();var pt=it((function(e,t,n,a,o,u){var i=Object(r["resolveComponent"])("ion-item"),c=Object(r["resolveComponent"])("ion-list"),l=Object(r["resolveComponent"])("multi-column-view");return Object(r["openBlock"])(),Object(r["createBlock"])(l,{items:e.patientInfo,numberOfColumns:3},{default:it((function(t){var n=t.entries;return[Object(r["createVNode"])(c,{class:"his-card ion-margin-end"},{default:it((function(){return[(Object(r["openBlock"])(!0),Object(r["createBlock"])(r["Fragment"],null,Object(r["renderList"])(n,(function(t,a){return Object(r["openBlock"])(),Object(r["createBlock"])(i,{key:a,lines:a===n.length-1?"none":"",button:e.clickable(t),onClick:function(n){return e.onClickHandler(t)}},{default:it((function(){return[Object(r["createVNode"])("div",ct,[t.label?(Object(r["openBlock"])(),Object(r["createBlock"])("span",lt,Object(r["toDisplayString"])(t.label)+": ",1)):(Object(r["openBlock"])(),Object(r["createBlock"])("span",st)),t.other&&"function"===typeof t.other.onClickHandler?(Object(r["openBlock"])(),Object(r["createBlock"])("span",{key:2,onClick:t.other.onClickHandler},[Object(r["createVNode"])("a",null,[Object(r["createVNode"])("b",null,Object(r["toDisplayString"])(t.value||"N/A"),1)])],8,["onClick"])):(Object(r["openBlock"])(),Object(r["createBlock"])("span",dt,[Object(r["createVNode"])("b",null,Object(r["toDisplayString"])(t.value||"N/A"),1)]))])]})),_:2},1032,["lines","button","onClick"])})),128))]})),_:2},1024)]})),_:1},8,["items"])})),ft=(n("4e82"),n("afbc")),mt=n("8e8b"),bt=n("0011"),vt=Object(r["defineComponent"])({components:{MultiColumnView:Be["a"]},props:{patient:{type:Object,required:!0},artStartDate:{type:String,required:!0},guardians:{type:String,default:""}},emits:["updatePatient","updateARVNumber","addGuardian"],setup:function(e,t){var n=t.emit,a=Object(r["ref"])(0),i=Object(r["ref"])(0),c=Object(r["ref"])(0),l=Object(r["ref"])(""),s=Object(r["ref"])(""),d=Object(r["ref"])(""),p=Object(r["ref"])(""),f=Object(r["ref"])(""),m=Object(r["ref"])(""),b=Object(r["ref"])(""),v=Object(r["ref"])(""),h=Object(r["ref"])(""),g=Object(r["ref"])(""),O=Object(r["ref"])(""),j=function(e){return e.other&&"function"===typeof e.other.onClickHandler},w=function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!j(t)){e.next=3;break}return e.next=3,null===(n=t.other)||void 0===n?void 0:n.onClickHandler();case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),x=function(){var t=e.patient.getBirthdate(),n="N/A"!==e.artStartDate?y()(e.artStartDate).diff(t,"years"):"";return"".concat(u["c"].toStandardHisDisplayFormat(t)," (").concat(n,")")},k=function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];t&&mt["a"].invalidate("PATIENT_LAB_ORDERS"),mt["a"].get("PATIENT_LAB_ORDERS",{patientID:e.patient.getID()}).then((function(e){var t=e.reduce((function(e,t){var n=t.tests.filter((function(e){return e.name.match(/hiv/i)&&!Object(te["isEmpty"])(e.result)})).map((function(e){return e.result}));return e.concat(n.reduce((function(e,t){return e.concat(t)}),[]))}),[]).sort((function(e,t){return new Date(e.date)>new Date(t.date)?-1:1}));g.value=Object(te["isEmpty"])(t)?"":"".concat(t[0].value_modifier).concat(t[0].value," (").concat(u["c"].toStandardHisDisplayFormat(t[0].date),")")}))},C=Object(r["computed"])((function(){return[{label:"ARV Number",value:e.patient.getArvNumber(),other:{onClickHandler:function(){return n("updateARVNumber")}}},{label:"National Patient ID",value:e.patient.getNationalID()},{label:"Name",value:e.patient.getGivenName()+" "+e.patient.getFamilyName(),other:{onClickHandler:function(){return n("updatePatient","given_name")}}},{label:"DOB and Age at Initiation",value:x(),other:{onClickHandler:function(){return n("updatePatient","birthdate")}}},{label:"Sex",value:Object(bt["f"])(e.patient.getGender()),other:{onClickHandler:function(){n("updatePatient","gender")}}},{label:"Location",value:e.patient.getCurrentVillage(),other:{onClickHandler:function(){n("updatePatient","home_village")}}},{label:"Landmark",value:e.patient.getClosestLandmark(),other:{onClickHandler:function(){n("updatePatient","landmarks")}}},{label:"Phone Number",value:e.patient.getPhoneNumber(),other:{onClickHandler:function(){n("updatePatient","phone_number")}}},{label:"Guardian",value:e.guardians?e.guardians:"add",other:Object(ae["a"])({},Object(te["isEmpty"])(e.guardians)?{onClickHandler:function(){n("addGuardian")}}:{})},{label:"Agrees to follow up",value:f.value,other:{onClickHandler:function(){return ft["a"].push("/emc/registration/".concat(e.patient.getID(),"/false"))}}},{label:"Date of starting first line ARV Regimen",value:e.artStartDate,other:{onClickHandler:function(){return ft["a"].push("/emc/registration/".concat(e.patient.getID(),"/false"))}}},{label:"Initial Weight (KG)",value:a.value,other:{onClickHandler:function(){return ft["a"].push("/emc/registration/".concat(e.patient.getID(),"/false"))}}},{label:"Initial Height (CM)",value:i.value,other:{onClickHandler:function(){return ft["a"].push("/emc/registration/".concat(e.patient.getID(),"/false"))}}},{label:"Initial BMI",value:c.value,other:{onClickHandler:function(){return ft["a"].push("/emc/registration/".concat(e.patient.getID(),"/false"))}}},{label:"Initial TB Status",value:l.value,other:{onClickHandler:function(){return ft["a"].push("/emc/registration/".concat(e.patient.getID(),"/false"))}}},{label:"Pregnant at Initiation",value:d.value,other:{onClickHandler:function(){return ft["a"].push("/emc/registration/".concat(e.patient.getID(),"/false"))}}},{label:"Breastfeeding at Initiation",value:s.value,other:{onClickHandler:function(){return ft["a"].push("/emc/registration/".concat(e.patient.getID(),"/false"))}}},{label:"Latest VL Result and Result Date",value:g.value},{label:"TI",value:p.value,other:{onClickHandler:function(){return ft["a"].push("/emc/registration/".concat(e.patient.getID(),"/false"))}}},{label:"HIV test place",value:v.value,other:{onClickHandler:function(){return ft["a"].push("/emc/registration/".concat(e.patient.getID(),"/false"))}}},{label:"HIV test date",value:b.value,other:{onClickHandler:function(){return ft["a"].push("/emc/registration/".concat(e.patient.getID(),"/false"))}}},{label:"WHO stage",value:O.value,other:{onClickHandler:function(){return ft["a"].push("/emc/registration/".concat(e.patient.getID(),"/false"))}}},{label:"Reason for starting ART",value:m.value,other:{onClickHandler:function(){return ft["a"].push("/emc/registration/".concat(e.patient.getID(),"/false"))}}},{label:"Staging codition",value:h.value,other:{onClickHandler:function(){return ft["a"].push("/emc/registration/".concat(e.patient.getID(),"/false"))}}}]})),N=function(){var t=Object(o["a"])(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.patient.getHIVTestDate();case 2:n=t.sent,n&&(b.value=u["c"].toStandardHisDisplayFormat(n));case 4:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),R=function(){e.patient.getInitialWeight().then((function(e){return a.value=e})),e.patient.getInitialHeight().then((function(e){return i.value=e})),e.patient.getInitialBMI().then((function(e){return c.value=e})),e.patient.getInitialTBStatus().then((function(e){return l.value=e})),e.patient.hasPregnancyAtARTInitiation().then((function(e){return d.value=e})),e.patient.breastFeedingAtARTInitiation().then((function(e){return s.value=e})),e.patient.everReceivedART().then((function(e){return p.value=e})),e.patient.agreesToFollowUp().then((function(e){return f.value=e})),e.patient.getReasonForStartingART().then((function(e){return m.value=e})),e.patient.getHIVTestLocation().then((function(e){return v.value=e})),e.patient.getStagingCondition().then((function(e){return h.value=e})),e.patient.getWhoStage().then((function(e){return O.value=e})),k(),N()};return Object(r["onMounted"])((function(){R(),H["b"].on(G["a"].RELOAD_LATEST_VL_RESULT,(function(){return k()})),H["b"].on(G["a"].RELOAD_STAGING_INFORMATION,(function(){return R()}))})),{patientInfo:C,onClickHandler:w,clickable:j}}});n("ddc8");const ht=J()(vt,[["render",pt],["__scopeId","data-v-22f18bd2"]]);var gt=ht,Ot=Object(r["createTextVNode"])("Edit Patient Demographics"),jt=Object(r["createTextVNode"])("Close"),wt=Object(r["createTextVNode"])("Save");function xt(e,t,n,a,o,u){var i=Object(r["resolveComponent"])("ion-title"),c=Object(r["resolveComponent"])("ion-icon"),l=Object(r["resolveComponent"])("ion-button"),s=Object(r["resolveComponent"])("ion-buttons"),d=Object(r["resolveComponent"])("ion-toolbar"),p=Object(r["resolveComponent"])("ion-header"),f=Object(r["resolveComponent"])("TextInput"),m=Object(r["resolveComponent"])("ion-col"),b=Object(r["resolveComponent"])("DateInput"),v=Object(r["resolveComponent"])("SelectInput"),h=Object(r["resolveComponent"])("ion-row"),g=Object(r["resolveComponent"])("ion-grid"),O=Object(r["resolveComponent"])("ion-content"),j=Object(r["resolveComponent"])("ion-footer");return Object(r["openBlock"])(),Object(r["createBlock"])(r["Fragment"],null,[Object(r["createVNode"])(p,null,{default:Object(r["withCtx"])((function(){return[Object(r["createVNode"])(d,null,{default:Object(r["withCtx"])((function(){return[Object(r["createVNode"])(i,null,{default:Object(r["withCtx"])((function(){return[Ot]})),_:1}),Object(r["createVNode"])(s,{slot:"end"},{default:Object(r["withCtx"])((function(){return[Object(r["createVNode"])(l,{onClick:t[1]||(t[1]=function(t){return e.modal.hide()})},{default:Object(r["withCtx"])((function(){return[Object(r["createVNode"])(c,{slot:"icon-only",name:"close"})]})),_:1})]})),_:1})]})),_:1})]})),_:1}),Object(r["createVNode"])(O,{class:"ion-padding"},{default:Object(r["withCtx"])((function(){return[Object(r["createVNode"])(g,null,{default:Object(r["withCtx"])((function(){return[Object(r["createVNode"])(h,null,{default:Object(r["withCtx"])((function(){return[Object(r["createVNode"])(m,{size:"4",class:"ion-margin-top ion-margin-bottom"},{default:Object(r["withCtx"])((function(){return[Object(r["createVNode"])(f,{modelValue:e.patient.givenName,"onUpdate:modelValue":t[2]||(t[2]=function(t){return e.patient.givenName=t})},null,8,["modelValue"])]})),_:1}),Object(r["createVNode"])(m,{size:"4",class:"ion-margin-top ion-margin-bottom"},{default:Object(r["withCtx"])((function(){return[Object(r["createVNode"])(f,{modelValue:e.patient.middleName,"onUpdate:modelValue":t[3]||(t[3]=function(t){return e.patient.middleName=t})},null,8,["modelValue"])]})),_:1}),Object(r["createVNode"])(m,{size:"4",class:"ion-margin-top ion-margin-bottom"},{default:Object(r["withCtx"])((function(){return[Object(r["createVNode"])(f,{modelValue:e.patient.familyName,"onUpdate:modelValue":t[4]||(t[4]=function(t){return e.patient.familyName=t})},null,8,["modelValue"])]})),_:1}),Object(r["createVNode"])(m,{size:"12",class:"ion-margin-top ion-margin-bottom"},{default:Object(r["withCtx"])((function(){return[Object(r["createVNode"])(b,{modelValue:e.patient.birthdate,"onUpdate:modelValue":t[5]||(t[5]=function(t){return e.patient.birthdate=t}),allowEstimation:!0,estimationLabel:"Estimate Age",minDate:"1900-01-01",maxDate:e.today,onIsEstimated:t[6]||(t[6]=function(t){return e.isBirthdateEstimated=t})},null,8,["modelValue","maxDate"])]})),_:1}),Object(r["createVNode"])(m,{size:"12",class:"ion-margin-top ion-margin-bottom"},{default:Object(r["withCtx"])((function(){return[Object(r["createVNode"])(v,{modelValue:e.patient.gender,"onUpdate:modelValue":t[7]||(t[7]=function(t){return e.patient.gender=t}),options:e.genderOptions},null,8,["modelValue","options"])]})),_:1}),Object(r["createVNode"])(m,{size:"12",class:"ion-margin-top ion-margin-bottom"},{default:Object(r["withCtx"])((function(){return[Object(r["createVNode"])(f,{modelValue:e.patient.cellPhoneNumber,"onUpdate:modelValue":t[8]||(t[8]=function(t){return e.patient.cellPhoneNumber=t}),allowUnknown:""},null,8,["modelValue"])]})),_:1}),Object(r["createVNode"])(m,{size:"12",class:"ion-margin-top ion-margin-bottom"},{default:Object(r["withCtx"])((function(){return[Object(r["createVNode"])(v,{modelValue:e.patient.homeVillage,"onUpdate:modelValue":t[9]||(t[9]=function(t){return e.patient.homeVillage=t}),asyncOptions:e.getVillagesByName,allowCustom:""},null,8,["modelValue","asyncOptions"])]})),_:1}),Object(r["createVNode"])(m,{size:"12",class:"ion-margin-top ion-margin-bottom"},{default:Object(r["withCtx"])((function(){return[Object(r["createVNode"])(v,{modelValue:e.patient.landmark,"onUpdate:modelValue":t[10]||(t[10]=function(t){return e.patient.landmark=t}),asyncOptions:e.getLandmarks,allowCustom:""},null,8,["modelValue","asyncOptions"])]})),_:1})]})),_:1})]})),_:1})]})),_:1}),Object(r["createVNode"])(j,null,{default:Object(r["withCtx"])((function(){return[Object(r["createVNode"])(d,null,{default:Object(r["withCtx"])((function(){return[Object(r["createVNode"])(l,{color:"primary",onClick:t[11]||(t[11]=function(t){return e.modal.hide()}),slot:"end"},{default:Object(r["withCtx"])((function(){return[jt]})),_:1}),Object(r["createVNode"])(l,{class:"ion-margin-end",color:"success",onClick:e.onFinish,slot:"end"},{default:Object(r["withCtx"])((function(){return[wt]})),_:1},8,["onClick"])]})),_:1})]})),_:1})],64)}var kt=n("5713"),yt=n("1f9a"),Ct=n("0db2"),Nt=Object(r["defineComponent"])({components:{IonGrid:x["IonGrid"],IonRow:x["IonRow"],IonCol:x["IonCol"],TextInput:Ct["a"],DateInput:T["a"],SelectInput:A["a"]},props:{patientService:{type:Object,required:!0}},setup:function(e){var t=y()().format(u["b"]),n=Object(r["ref"])(!1),a=Object(r["reactive"])({givenName:{label:"First Name",value:e.patientService.getGivenName(),placeholder:"First Name",required:!0,error:""},familyName:{label:"last Name",value:e.patientService.getFamilyName(),placeholder:"Last Name",required:!0},middleName:{label:"middle Name",value:e.patientService.getMiddleName(),placeholder:"middle Name"},gender:{value:e.patientService.getGender(),required:!0,label:"Gender",placeholder:"select gender"},birthdate:{value:e.patientService.getBirthdate(),label:"Date of Birth",placeholder:"Date of Birth",required:!0},cellPhoneNumber:{value:e.patientService.getPhoneNumber(),required:!0,label:"Cellphone Number",placeholder:"cellphone number e.g. 0991234567",validation:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",!("Unknown"===t.value||"N/A"===t.value)&&Oe["a"].isMWPhoneNumber(t));case 1:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}()},homeVillage:{value:e.patientService.getCurrentVillage(),label:"Home Village",placeholder:"Home Village",required:!0},landmark:{value:e.patientService.getClosestLandmark(),label:"Landmark",placeholder:"Closest Landmark or Plot Number",required:!0}}),i=function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(t){var n,r,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n={current_district:"N/A",current_traditional_authority:"N/A",current_village:t.label},e.next=3,kt["a"].getTraditionalAuthorityById(t.other.traditional_authority_id);case 3:if(r=e.sent,!(r.length>0)){e.next=10;break}return n["current_traditional_authority"]=r[0].name,e.next=8,kt["a"].getDistrictByID(r[0].district_id);case 8:a=e.sent,Object(te["isEmpty"])(a)||(n["current_district"]=a[0].name);case 10:return e.abrupt("return",n);case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),c=function(){var t=Object(o["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.abrupt("return",Object(M["e"])(a,function(){var t=Object(o["a"])(regeneratorRuntime.mark((function t(n){var r,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(r={},n.givenName!==e.patientService.getGivenName()&&(r["given_name"]=n.givenName),n.familyName!==e.patientService.getFamilyName()&&(r["family_name"]=n.familyName),n.middleName!==e.patientService.getMiddleName()&&(r["middle_name"]=n.middleName),n.birthdate!==e.patientService.getBirthdate()&&(r["birthdate"]=n.birthdate),n.gender.value!==e.patientService.getGender()&&(r["gender"]=n.gender.value),n.cellPhoneNumber!==e.patientService.getPhoneNumber()&&(r["cell_phone_number"]=n.cellPhoneNumber),n.landmark.label!==e.patientService.getClosestLandmark()&&(r["landmark"]=n.landmark.label),n.homeVillage===e.patientService.getCurrentVillage()){t.next=18;break}return t.t0=Object,t.t1=r,t.t2=ae["a"],t.t3=Object(ae["a"])({},r),t.next=15,i(n.homeVillage);case 15:t.t4=t.sent,t.t5=(0,t.t2)(t.t3,t.t4),t.t0.assign.call(t.t0,t.t1,t.t5);case 18:if(Object(te["isEmpty"])(r)){t.next=23;break}return a=new yt["a"],a.setPersonID(e.patientService.getID()),t.next=23,a.updatePerson(r);case 23:return t.next=25,U["a"].hide();case 25:H["b"].emit(G["a"].RELOAD_PATIENT_DATA);case 26:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()));case 1:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();return{today:t,patient:a,getLandmarks:je["e"],genderOptions:E["b"],isBirthdateEstimated:n,modal:U["a"],onFinish:c,getVillagesByName:je["j"]}}});const Rt=J()(Nt,[["render",xt]]);var Vt=Rt,It=Object(r["createTextVNode"])("Add Guadian Demographics"),Dt=Object(r["createTextVNode"])("Close"),_t=Object(r["createTextVNode"])("Save");function Tt(e,t,n,a,o,u){var i=Object(r["resolveComponent"])("ion-title"),c=Object(r["resolveComponent"])("ion-icon"),l=Object(r["resolveComponent"])("ion-button"),s=Object(r["resolveComponent"])("ion-buttons"),d=Object(r["resolveComponent"])("ion-toolbar"),p=Object(r["resolveComponent"])("ion-header"),f=Object(r["resolveComponent"])("TextInput"),m=Object(r["resolveComponent"])("ion-col"),b=Object(r["resolveComponent"])("ion-row"),v=Object(r["resolveComponent"])("ion-grid"),h=Object(r["resolveComponent"])("ion-content"),g=Object(r["resolveComponent"])("ion-footer");return Object(r["openBlock"])(),Object(r["createBlock"])(r["Fragment"],null,[Object(r["createVNode"])(p,null,{default:Object(r["withCtx"])((function(){return[Object(r["createVNode"])(d,null,{default:Object(r["withCtx"])((function(){return[Object(r["createVNode"])(i,null,{default:Object(r["withCtx"])((function(){return[It]})),_:1}),Object(r["createVNode"])(s,{slot:"end"},{default:Object(r["withCtx"])((function(){return[Object(r["createVNode"])(l,{onClick:e.closeModal},{default:Object(r["withCtx"])((function(){return[Object(r["createVNode"])(c,{slot:"icon-only",name:"close"})]})),_:1},8,["onClick"])]})),_:1})]})),_:1})]})),_:1}),Object(r["createVNode"])(h,{class:"ion-padding"},{default:Object(r["withCtx"])((function(){return[Object(r["createVNode"])(v,null,{default:Object(r["withCtx"])((function(){return[Object(r["createVNode"])(b,null,{default:Object(r["withCtx"])((function(){return[Object(r["createVNode"])(m,{size:"12",class:"ion-margin-top ion-margin-bottom"},{default:Object(r["withCtx"])((function(){return[Object(r["createVNode"])(f,{modelValue:e.guardian.givenName,"onUpdate:modelValue":t[1]||(t[1]=function(t){return e.guardian.givenName=t})},null,8,["modelValue"])]})),_:1}),Object(r["createVNode"])(m,{size:"12",class:"ion-margin-top ion-margin-bottom"},{default:Object(r["withCtx"])((function(){return[Object(r["createVNode"])(f,{modelValue:e.guardian.familyName,"onUpdate:modelValue":t[2]||(t[2]=function(t){return e.guardian.familyName=t})},null,8,["modelValue"])]})),_:1}),Object(r["createVNode"])(m,{size:"12",class:"ion-margin-top ion-margin-bottom"},{default:Object(r["withCtx"])((function(){return[Object(r["createVNode"])(f,{modelValue:e.guardian.cellPhoneNumber,"onUpdate:modelValue":t[3]||(t[3]=function(t){return e.guardian.cellPhoneNumber=t}),allowUnknown:""},null,8,["modelValue"])]})),_:1})]})),_:1})]})),_:1})]})),_:1}),Object(r["createVNode"])(g,null,{default:Object(r["withCtx"])((function(){return[Object(r["createVNode"])(d,null,{default:Object(r["withCtx"])((function(){return[Object(r["createVNode"])(l,{color:"primary",onClick:t[4]||(t[4]=function(t){return e.modal.hide()}),slot:"end"},{default:Object(r["withCtx"])((function(){return[Dt]})),_:1}),Object(r["createVNode"])(l,{class:"ion-margin-end",color:"success",onClick:e.onFinish,slot:"end"},{default:Object(r["withCtx"])((function(){return[_t]})),_:1},8,["onClick"])]})),_:1})]})),_:1})],64)}var At=n("2cef"),Pt=Object(r["defineComponent"])({components:{IonGrid:x["IonGrid"],IonRow:x["IonRow"],IonCol:x["IonCol"],TextInput:Ct["a"]},props:{patientId:{type:Number,required:!0}},setup:function(e){var t=Object(r["reactive"])({givenName:{label:"First Name",value:"",placeholder:"First Name",required:!0},familyName:{label:"Last Name",value:"",placeholder:"Last Name",required:!0},cellPhoneNumber:{value:"",required:!0,label:"Cellphone Number",validation:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return","Unknown"!==t.value&&Oe["a"].isMWPhoneNumber(t));case 1:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}()}}),n=function(){var n=Object(o["a"])(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.abrupt("return",Object(M["e"])(t,function(){var t=Object(o["a"])(regeneratorRuntime.mark((function t(n){var r,a,o;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return r=Object(ae["a"])({home_district:"N/A",home_traditional_authority:"N/A",home_village:"N/A",current_district:"N/A",current_traditional_authority:"N/A",current_village:"N/A",middle_name:"",gender:"N/A",birthdate:"N/A",birthdate_estimated:"N/A",landmark:"N/A",relationship:"N/A",patient_type:"",isPatient:!1,patient_id:e.patientId},n),a=new yt["a"],t.next=4,a.registerGuardian(r);case 4:return o=a.getPersonID(),t.next=7,At["a"].createRelation(e.patientId,o,13);case 7:return t.next=9,U["a"].hide();case 9:H["b"].emit(G["a"].RELOAD_GUARDIAN_DATA);case 10:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),{underscoreKeys:!0}));case 1:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}}();return{guardian:t,modal:U["a"],onFinish:n}}});const Et=J()(Pt,[["render",Tt]]);var St=Et,Bt=Object(r["createTextVNode"])("ARV NUMBER"),Mt=Object(r["createTextVNode"])("Close"),Lt=Object(r["createTextVNode"])("Void ARV Number"),Ft=Object(r["createTextVNode"])("Save");function Ht(e,t,n,a,o,u){var i=Object(r["resolveComponent"])("ion-title"),c=Object(r["resolveComponent"])("ion-icon"),l=Object(r["resolveComponent"])("ion-button"),s=Object(r["resolveComponent"])("ion-buttons"),d=Object(r["resolveComponent"])("ion-toolbar"),p=Object(r["resolveComponent"])("ion-header"),f=Object(r["resolveComponent"])("text-input"),m=Object(r["resolveComponent"])("ion-col"),b=Object(r["resolveComponent"])("ion-row"),v=Object(r["resolveComponent"])("ion-grid"),h=Object(r["resolveComponent"])("ion-content"),g=Object(r["resolveComponent"])("ion-footer");return Object(r["openBlock"])(),Object(r["createBlock"])(r["Fragment"],null,[Object(r["createVNode"])(p,null,{default:Object(r["withCtx"])((function(){return[Object(r["createVNode"])(d,null,{default:Object(r["withCtx"])((function(){return[Object(r["createVNode"])(i,null,{default:Object(r["withCtx"])((function(){return[Bt]})),_:1}),Object(r["createVNode"])(s,{slot:"end"},{default:Object(r["withCtx"])((function(){return[Object(r["createVNode"])(l,{onClick:t[1]||(t[1]=function(t){return e.modal.hide()})},{default:Object(r["withCtx"])((function(){return[Object(r["createVNode"])(c,{slot:"icon-only",name:"close"})]})),_:1})]})),_:1})]})),_:1})]})),_:1}),Object(r["createVNode"])(h,{class:"ion-padding"},{default:Object(r["withCtx"])((function(){return[Object(r["createVNode"])(v,null,{default:Object(r["withCtx"])((function(){return[Object(r["createVNode"])(b,null,{default:Object(r["withCtx"])((function(){return[Object(r["createVNode"])(m,null,{default:Object(r["withCtx"])((function(){return[Object(r["createVNode"])(f,{modelValue:e.form.arvNumber,"onUpdate:modelValue":t[2]||(t[2]=function(t){return e.form.arvNumber=t}),form:e.form,prefix:"".concat(e.sitePrefix,"-ARV-")},null,8,["modelValue","form","prefix"])]})),_:1})]})),_:1})]})),_:1})]})),_:1}),Object(r["createVNode"])(g,{class:"ion-padding-horizontal"},{default:Object(r["withCtx"])((function(){return[Object(r["createVNode"])(d,null,{default:Object(r["withCtx"])((function(){return[Object(r["createVNode"])(l,{color:"primary",onClick:t[3]||(t[3]=function(t){return e.modal.hide()}),slot:"end"},{default:Object(r["withCtx"])((function(){return[Mt]})),_:1}),e.hasValidARVNumber?(Object(r["openBlock"])(),Object(r["createBlock"])(l,{key:0,color:"danger",onClick:e.voidARV,slot:"start"},{default:Object(r["withCtx"])((function(){return[Lt]})),_:1},8,["onClick"])):Object(r["createCommentVNode"])("",!0),Object(r["createVNode"])(l,{color:"success",onClick:e.onFinish,slot:"end"},{default:Object(r["withCtx"])((function(){return[Ft]})),_:1},8,["onClick"])]})),_:1})]})),_:1})],64)}n("1276"),n("5319");var Gt=n("b211"),Ut=n("cc74"),qt=Object(r["defineComponent"])({components:{IonGrid:x["IonGrid"],IonRow:x["IonRow"],IonCol:x["IonCol"],TextInput:Ct["a"]},props:{patient:{type:Object,required:!0}},setup:function(e){var t=Object(r["ref"])(""),n=Object(r["computed"])((function(){return e.patient.getArvNumber()})),a=Object(r["computed"])((function(){return!Object(te["isEmpty"])(n.value)&&"Unknown"!==n.value})),u=Object(r["reactive"])({arvNumber:{value:a.value?n.value.split("-")[2]:"",label:"".concat(a.value?"Edit":"Add New"," ARV Number"),placeholder:"Enter ARV Number",required:!0,validation:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(r){var a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(r.value!==n.value.split("-")[2]){e.next=2;break}return e.abrupt("return",null);case 2:return e.next=4,O["a"].findByOtherID(4,"".concat(t.value,"-ARV-").concat(r.value));case 4:return a=e.sent,e.abrupt("return",Object(te["isEmpty"])(a)?null:["ARV Number already exists"]);case 6:case"end":return e.stop()}}),e)})));function r(t){return e.apply(this,arguments)}return r}()}}),i=function(){var r=Object(o["a"])(regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.abrupt("return",Object(M["e"])(u,function(){var r=Object(o["a"])(regeneratorRuntime.mark((function r(o){return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:if(o.arvNumber===n.value.split("-")[2]){r.next=11;break}if(!a.value){r.next=6;break}return r.next=4,e.patient.updateARVNumber("".concat(t.value,"-ARV-").concat(o.arvNumber));case 4:r.next=8;break;case 6:return r.next=8,e.patient.createArvNumber("".concat(t.value,"-ARV-").concat(o.arvNumber));case 8:return r.next=10,U["a"].hide();case 10:H["b"].emit(G["a"].RELOAD_PATIENT_DATA);case 11:case"end":return r.stop()}}),r)})));return function(e){return r.apply(this,arguments)}}()));case 1:case"end":return r.stop()}}),r)})));return function(){return r.apply(this,arguments)}}(),c=function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(q["a"])("Are you sure you want to void this ARV Number ".concat(n.value,"?"));case 2:if(t=e.sent,t){e.next=5;break}return e.abrupt("return");case 5:return e.next=7,Gt["a"].show("Voiding ARV Number...");case 7:return e.prev=7,e.next=10,j["a"].voidARVNumber(n.value);case 10:return e.next=12,Gt["a"].hide();case 12:return e.next=14,U["a"].hide();case 14:H["b"].emit(G["a"].RELOAD_PATIENT_DATA),e.next=22;break;case 17:return e.prev=17,e.t0=e["catch"](7),e.next=21,Gt["a"].hide();case 21:console.log(e.t0);case 22:case"end":return e.stop()}}),e,null,[[7,17]])})));return function(){return e.apply(this,arguments)}}();return Object(r["onMounted"])(Object(o["a"])(regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Ut["b"].sitePrefix();case 2:if(t.value=e.sent,a.value){e.next=8;break}return e.next=6,j["a"].getNextSuggestedARVNumber();case 6:n=e.sent,u.arvNumber.value=n.arv_number.replace(/^\D+|\s/g,"");case 8:case"end":return e.stop()}}),e)})))),{form:u,modal:U["a"],sitePrefix:t,arvNumber:n,hasValidARVNumber:a,onFinish:i,voidARV:c}}});const Yt=J()(qt,[["render",Ht]]);var zt=Yt,Jt=n("6c02"),Wt=Object(r["defineComponent"])({components:{Layout:c["a"],VisitsSummary:ut,InformationHeader:gt},setup:function(){var e=Object(Jt["e"])(),t=parseInt(e.params.patientId.toString())||0,n=Object(r["ref"])(),a=Object(r["ref"])(""),c=Object(r["ref"])(""),l=Object(r["computed"])((function(){return!Object(te["isEmpty"])(n.value)})),s=function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(){var r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!t){e.next=5;break}return e.next=3,qe.findByID(t);case 3:r=e.sent,r&&(n.value=new qe(r));case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),d=function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,i["a"].getGuardianDetails(t);case 2:n=e.sent,c.value=n.map((function(e){return" ".concat(e.name," (").concat(e.relationshipType,")")})).join(", ");case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),p=function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,U["a"].show(Vt,{patientService:n.value,attribute:t});case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),f=function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,U["a"].show(St,{patientId:t});case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),m=function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,U["a"].show(zt,{patient:n.value});case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return H["b"].on(G["a"].RELOAD_PATIENT_DATA,Object(o["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,s();case 2:case"end":return e.stop()}}),e)})))),H["b"].on(G["a"].RELOAD_GUARDIAN_DATA,Object(o["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,d();case 2:case"end":return e.stop()}}),e)})))),Object(r["onMounted"])(Object(o["a"])(regeneratorRuntime.mark((function e(){var t,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,s();case 2:return e.next=4,null===(t=n.value)||void 0===t?void 0:t.getARTStartDate();case 4:return r=e.sent,a.value=r?u["c"].toStandardHisDisplayFormat(r):"N/A",e.next=8,d();case 8:case"end":return e.stop()}}),e)})))),{patient:n,artStartDate:a,guardians:c,isReady:l,updateDemographics:p,addGuardian:f,updateARVNumber:m}}});const Qt=J()(Wt,[["render",a]]);t["default"]=Qt},"9c9e":function(e,t,n){"use strict";n("cb26")},a2bf:function(e,t,n){"use strict";var r=n("e8b5"),a=n("50c4"),o=n("0366"),u=function(e,t,n,i,c,l,s,d){var p,f=c,m=0,b=!!s&&o(s,d,3);while(m<i){if(m in n){if(p=b?b(n[m],m,t):n[m],l>0&&r(p))f=u(e,t,p,a(p.length),f,l-1)-1;else{if(f>=9007199254740991)throw TypeError("Exceed the acceptable array length");e[f]=p}f++}m++}return f};e.exports=u},aff5:function(e,t,n){var r=n("23e7");r({target:"Number",stat:!0},{MAX_SAFE_INTEGER:9007199254740991})},b515:function(e,t,n){"use strict";n.d(t,"a",(function(){return l}));var r=n("d4ec"),a=n("bee2"),o=n("262e"),u=n("2caf"),i=(n("ac1f"),n("466d"),n("99af"),n("d81d"),n("d3b7"),n("159b"),n("1276"),n("4de4"),n("b0c0"),n("cc6f")),c=n("2ef0"),l=function(e){Object(o["a"])(n,e);var t=Object(u["a"])(n);function n(e,a){return Object(r["a"])(this,n),t.call(this,e,6,a)}return Object(a["a"])(n,[{key:"isNotEmptyandNumber",value:function(e){return"".concat(e.value).match(/^-?\d+\.?\d*$/)?null:["Invalid entry for ".concat(e.label)]}},{key:"isNotEmptyandFloat",value:function(e){var t;return"".concat(e.value).match(/^\d{1,3}\.\d{1,5}$/)?null:["Invalid entry for ".concat(e.label,". Don't forget to add a decimal. e.g. 56.2 ").concat((null===(t=e.other)||void 0===t?void 0:t.modifier)||"")]}},{key:"checkMinMax",value:function(e,t,n){var r,a,o=[];parseFloat("".concat(e.value))<t&&o.push(["".concat(e.label," entered is less than minimum ").concat(t," ").concat((null===e||void 0===e||null===(r=e.other)||void 0===r?void 0:r.modifier)||"")]);parseFloat("".concat(e.value))>n&&o.push(["".concat(e.label," entered is greater than maximum ").concat(n," ").concat((null===e||void 0===e||null===(a=e.other)||void 0===a?void 0:a.modifier)||"")]);return o.length>0?o:null}},{key:"validateAll",value:function(e){var t=this,n=[];return e.map((function(e){var r=t.validator(e);return Object(c["isArray"])(r)?n.push(r):null})),n.length>0?n:null}},{key:"mergeErrors",value:function(e){var t=[];return e.forEach((function(e){Object(c["isArray"])(e)&&t.push(e)})),t.length>0?t:null}},{key:"isValidBPReading",value:function(e){var t=[],n="".concat(e.value).match(/^\d{1,3}\/\d{1,3}$/g)?null:["Invalid BP reading"];if(t.push(n),null==n){var r="".concat(e.value).split("/"),a={label:"Systolic",value:r[0]},o={label:"Diastolic",value:r[1]};t.push(this.checkMinMax(o,30,200)),t.push(this.checkMinMax(a,40,250))}return this.mergeErrors(t)}},{key:"validator",value:function(e){var t=this,n=[{name:"Weight",validator:function(e){var n=t.isNotEmptyandFloat(e),r=t.checkMinMax(e,2,250);return t.mergeErrors([n,r])}},{name:"Height",validator:function(e){var n=[];return n.push(t.isNotEmptyandNumber(e)),n.push(t.checkMinMax(e,40,220)),t.mergeErrors(n)}},{name:"BP",validator:function(e){return t.isValidBPReading(e)}},{name:"Temp",validator:function(e){var n=t.isNotEmptyandNumber(e),r=t.checkMinMax(e,30,42);return t.mergeErrors([n,r])}},{name:"SP02",validator:function(e){var n=t.checkMinMax(e,40,100);return t.mergeErrors([n])}},{name:"Pulse",validator:function(e){var n=t.checkMinMax(e,50,120);return t.mergeErrors([n])}}],r=n.filter((function(t){return t.name===e.label}));return r.length>0?r[0].validator(e):null}}]),n}(i["a"])},bcd6:function(e,t,n){},be95:function(e,t,n){"use strict";n("4de4"),n("d3b7");var r=n("7a23"),a=Object(r["withScopeId"])("data-v-66a24b01");Object(r["pushScopeId"])("data-v-66a24b01");var o={key:0,class:"ion-float-right ion-margin-end checkbox-label"},u={class:"inner-input-box"},i={key:0,class:"input-options"},c={class:"input-icon"};Object(r["popScopeId"])();var l=a((function(e,t,n,l,s,d){var p=Object(r["resolveComponent"])("ion-checkbox"),f=Object(r["resolveComponent"])("ion-label"),m=Object(r["resolveComponent"])("ion-input"),b=Object(r["resolveComponent"])("ion-icon"),v=Object(r["resolveComponent"])("ion-chip"),h=Object(r["resolveComponent"])("ion-item"),g=Object(r["resolveComponent"])("ion-list"),O=Object(r["resolveComponent"])("ion-note");return Object(r["openBlock"])(),Object(r["createBlock"])(r["Fragment"],null,[e.model.label?(Object(r["openBlock"])(),Object(r["createBlock"])(f,{key:0,class:"ion-padding-bottom bold"},{default:a((function(){return[Object(r["createVNode"])("span",null,Object(r["toDisplayString"])(e.model.label),1),e.allowCustom?(Object(r["openBlock"])(),Object(r["createBlock"])("span",o,[Object(r["createTextVNode"])(" Add Custom "+Object(r["toDisplayString"])(e.model.label)+"? ",1),Object(r["createVNode"])(p,{modelValue:e.isCustom,"onUpdate:modelValue":t[1]||(t[1]=function(t){return e.isCustom=t}),onIonChange:t[2]||(t[2]=function(t){return e.model.value=""})},null,8,["modelValue"])])):Object(r["createCommentVNode"])("",!0)]})),_:1})):Object(r["createCommentVNode"])("",!0),e.isCustom?(Object(r["openBlock"])(),Object(r["createBlock"])(m,{key:1,class:["box-input",{"box-input-error":e.model.error,"ion-margin-top":e.model.label}],modelValue:e.customOption,"onUpdate:modelValue":t[3]||(t[3]=function(t){return e.customOption=t}),placeholder:e.model.placeholder||e.model.label,disabled:e.model.disabled,onIonFocus:t[4]||(t[4]=function(){return e.model.error=""}),onIonBlur:e.validate,onIonInput:e.onCustomValue},null,8,["class","modelValue","placeholder","disabled","onIonBlur","onIonInput"])):(Object(r["openBlock"])(),Object(r["createBlock"])("div",{key:2,class:["outer-input-box box-input",{"box-input-error":e.model.error,"ion-margin-top":e.model.label}]},[Object(r["createVNode"])("div",u,[Object(r["createVNode"])("div",{style:{display:"flex","flex-wrap":"wrap",width:"100%"},onClick:t[6]||(t[6]=function(){return e.onShowOptions.apply(e,arguments)})},[(Object(r["openBlock"])(!0),Object(r["createBlock"])(r["Fragment"],null,Object(r["renderList"])(e.tags,(function(t,n){return Object(r["openBlock"])(),Object(r["createBlock"])(v,{key:n},{default:a((function(){return[Object(r["createVNode"])(f,null,{default:a((function(){return[Object(r["createTextVNode"])(Object(r["toDisplayString"])(t.label),1)]})),_:2},1024),Object(r["createVNode"])(b,{icon:e.closeCircle,color:"danger",onClick:function(n){return e.diselect(t)},style:{"z-index":"20"}},null,8,["icon","onClick"])]})),_:2},1024)})),128)),Object(r["createVNode"])(m,{disabled:e.model.disabled,placeholder:e.showPlaceholder?e.model.placeholder||"select option":"",modelValue:e.filter,"onUpdate:modelValue":t[5]||(t[5]=function(t){return e.filter=t}),class:"search-input",ref:"searchInput"},null,8,["disabled","placeholder","modelValue"])]),e.showOptions?(Object(r["openBlock"])(),Object(r["createBlock"])("div",i,[Object(r["createVNode"])(g,null,{default:a((function(){return[(Object(r["openBlock"])(!0),Object(r["createBlock"])(r["Fragment"],null,Object(r["renderList"])(e.filteredOptions,(function(t,n){return Object(r["openBlock"])(),Object(r["createBlock"])(h,{key:n,lines:n+1===e.filteredOptions.length?"none":"",onClick:function(n){return e.onSelect(t)}},{default:a((function(){return[e.multiple?(Object(r["openBlock"])(),Object(r["createBlock"])(p,{key:0,class:"input-option-checkbox",slot:"start",modelValue:t.isChecked,"onUpdate:modelValue":function(e){return t.isChecked=e}},null,8,["modelValue","onUpdate:modelValue"])):Object(r["createCommentVNode"])("",!0),Object(r["createVNode"])(f,null,{default:a((function(){return[Object(r["createTextVNode"])(Object(r["toDisplayString"])(t.label),1)]})),_:2},1024)]})),_:2},1032,["lines","onClick"])})),128))]})),_:1})])):Object(r["createCommentVNode"])("",!0),Object(r["createVNode"])("div",c,[e.filter||e.tags.length>0?(Object(r["openBlock"])(),Object(r["createBlock"])(b,{key:0,icon:e.close,onClick:e.onReset},null,8,["icon","onClick"])):Object(r["createCommentVNode"])("",!0),Object(r["createVNode"])(b,{icon:e.showOptions?e.chevronUp:e.chevronDown,onClick:t[7]||(t[7]=function(t){return e.showOptions?e.onCloseOptions():e.onShowOptions()})},null,8,["icon"])])])],2)),e.model.error?(Object(r["openBlock"])(),Object(r["createBlock"])(O,{key:3,color:"danger"},{default:a((function(){return[Object(r["createTextVNode"])(Object(r["toDisplayString"])(e.model.error),1)]})),_:1})):Object(r["createCommentVNode"])("",!0)],64)})),s=n("2909"),d=n("1da1"),p=n("5530"),f=(n("96cf"),n("159b"),n("c740"),n("7db0"),n("caad"),n("2532"),n("99af"),n("25f0"),n("8a30")),m=n("ff79"),b=n("2ef0"),v=Object(r["defineComponent"])({name:"SelectInput",props:{modelValue:{type:Object,default:function(){return{}}},form:{type:Object,default:function(){return{}}},options:{type:Array,default:function(){return[]}},asyncOptions:{type:Function,required:!1},allowCustom:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},multiple:{type:Boolean,default:!1},infiniteScrolling:{type:Boolean,default:!1}},components:{IonLabel:f["IonLabel"],IonInput:f["IonInput"],IonNote:f["IonNote"],IonIcon:f["IonIcon"],IonCheckbox:f["IonCheckbox"],IonList:f["IonList"],IonChip:f["IonChip"],IonItem:f["IonItem"]},emits:["update:modelValue"],setup:function(e,t){var n=t.emit,a=Object(r["ref"])(!1),o=Object(r["ref"])(""),u=Object(r["ref"])(),i=Object(r["ref"])(!1),c=Object(r["ref"])(""),l=Object(r["ref"])([]),f=Object(r["ref"])(1),v=Object(r["computed"])((function(){return e.multiple?l.value.filter((function(e){var t=e.isChecked;return t})):u.value?[u.value]:[]})),h=Object(r["computed"])((function(){return!c.value&&Object(b["isEmpty"])(v.value)&&!i.value})),g=Object(r["computed"])({get:function(){return e.modelValue},set:function(e){return n("update:modelValue",e)}}),O=function(){if(u.value=void 0,!Object(b["isEmpty"])(g.value.value)){if(Array.isArray(g.value.value)&&e.multiple)return console.log(g.value.value),g.value.value.forEach((function(e){var t=l.value.findIndex((function(t){var n=t.value;return n===e.value}));-1===t?l.value.push(Object(p["a"])(Object(p["a"])({},e),{},{isChecked:!0})):l.value[t].isChecked=!0}));var t=l.value.find((function(e){return e.value===g.value.value}));u.value=t||{label:g.value.value,value:g.value.value}}},j=function(){var t=Object(d["a"])(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if("function"!==typeof e.asyncOptions){t.next=6;break}return t.next=3,e.asyncOptions(c.value,f.value);case 3:t.t0=t.sent,t.next=7;break;case 6:t.t0=e.options.filter((function(e){var t=e.label;return t.toLowerCase().includes(c.value.toLowerCase())}));case 7:n=t.t0,v.value.forEach((function(e){var t=n.findIndex((function(t){return t.value===e.value}));-1===t?n.push(e):n[t].isChecked=!0})),l.value=n;case 10:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),w=function(){var t=Object(d["a"])(regeneratorRuntime.mark((function t(n){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!e.infiniteScrolling||"function"!==typeof e.asyncOptions){t.next=6;break}return f.value++,t.next=4,e.asyncOptions(c.value,f.value);case 4:r=t.sent,r.length>0?l.value=[].concat(Object(s["a"])(l.value),Object(s["a"])(r.filter((function(e){return!l.value.find((function(t){return t.value===e.value}))})))):n.target.disabled=!0;case 6:n.target.complete();case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),x=function(){var t=Object(d["a"])(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!g.value.required||!Object(b["isEmpty"])(g.value.value)){t.next=2;break}return t.abrupt("return",g.value.error="This field is required");case 2:if(!g.value.validation){t.next=8;break}return t.next=5,g.value.validation({label:g.value.value,value:g.value.value},e.form);case 5:if(n=t.sent,!n||!n.length){t.next=8;break}return t.abrupt("return",g.value.error+=n.toString());case 8:return t.abrupt("return",g.value.error="");case 9:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),k=function(){i.value=!1,g.value.value=e.multiple?v.value:Object(b["isEmpty"])(v.value)?void 0:v.value[0],c.value="",x()},y=function(){g.value.disabled||(i.value=!0,g.value.error="")},C=function(){g.value.value={label:o.value,value:o.value}},N=function(t){e.multiple||(u.value=t,k()),g.value.value=e.multiple?v.value:Object(b["isEmpty"])(v.value)?void 0:v.value[0],c.value=""},R=function(t){return e.multiple?t.isChecked=!1:u.value=void 0},V=function(){c.value="",u.value=void 0,l.value.forEach((function(e){return e.isChecked=!1}))};return Object(r["watch"])(c,Object(d["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return f.value++,e.next=3,j();case 3:case"end":return e.stop()}}),e)})))),Object(r["watch"])([function(){return e.options},function(){return e.asyncOptions}],Object(d["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",j());case 1:case"end":return e.stop()}}),e)})))),Object(r["watch"])((function(){return e.modelValue.value}),(function(e){return Object(b["isEmpty"])(e)&&O()})),Object(r["onMounted"])(Object(d["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,j();case 2:O(),addEventListener("click",(function(e){var t=e.target.closest(".inner-input-box");!t&&i.value&&k()}));case 4:case"end":return e.stop()}}),e)})))),Object(r["onBeforeUnmount"])((function(){return removeEventListener("click",(function(e){return console.log(e)}))})),{validate:x,onSelect:N,onReset:V,onShowOptions:y,onCloseOptions:k,diselect:R,pushMoreOptions:w,onCustomValue:C,model:g,customOption:o,isCustom:a,chevronDown:m["chevronDown"],chevronUp:m["chevronUp"],close:m["close"],closeCircle:m["closeCircle"],selectedOption:u,showOptions:i,showPlaceholder:h,filteredOptions:l,filter:c,tags:v}}}),h=(n("44d7"),n("d959")),g=n.n(h);const O=g()(v,[["render",l],["__scopeId","data-v-66a24b01"]]);t["a"]=O},c740:function(e,t,n){"use strict";var r=n("23e7"),a=n("b727").findIndex,o=n("44d2"),u=n("ae40"),i="findIndex",c=!0,l=u(i);i in[]&&Array(1)[i]((function(){c=!1})),r({target:"Array",proto:!0,forced:c||!l},{findIndex:function(e){return a(this,e,arguments.length>1?arguments[1]:void 0)}}),o(i)},cb26:function(e,t,n){},d10e:function(e,t,n){"use strict";n.d(t,"a",(function(){return p}));var r=n("1da1"),a=n("5530"),o=n("d4ec"),u=n("bee2"),i=n("45eb"),c=n("7e84"),l=n("262e"),s=n("2caf"),d=(n("96cf"),n("1c74")),p=function(e){Object(l["a"])(n,e);var t=Object(s["a"])(n);function n(e){var r;return Object(o["a"])(this,n),r=t.call(this),r.person=e,r}return Object(u["a"])(n,[{key:"create",value:function(){return d["e"].postJson("/people",this.person)}},{key:"update",value:function(e){return d["e"].putJson("people/".concat(e),Object(a["a"])(Object(a["a"])({},this.person),{},{program_id:d["e"].getProgramID()}))}}],[{key:"searchFamilyName",value:function(e){return Object(i["a"])(Object(c["a"])(n),"getJson",this).call(this,"/search/family_name",{search_string:e})}},{key:"searchGivenName",value:function(e){return Object(i["a"])(Object(c["a"])(n),"getJson",this).call(this,"/search/given_name",{search_string:e})}},{key:"getPersonFullName",value:function(){var e=Object(r["a"])(regeneratorRuntime.mark((function e(t){var r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(i["a"])(Object(c["a"])(n),"getJson",this).call(this,"/people/".concat(t,"/names"));case 2:return r=e.sent,e.abrupt("return",r&&r.length?r[0].given_name+" "+r[0].family_name:"");case 4:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()}]),n}(d["e"])},da44:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var r=n("1da1"),a=(n("96cf"),n("8a30")),o={show:function(e,t){var n=arguments;return Object(r["a"])(regeneratorRuntime.mark((function r(){var o,u,i,c,l;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return o=n.length>2&&void 0!==n[2]?n[2]:"custom-modal",u=!(n.length>3&&void 0!==n[3])||n[3],r.next=4,a["modalController"].create({component:e,cssClass:o,backdropDismiss:u,componentProps:t});case 4:return i=r.sent,i.present(),r.next=8,i.onWillDismiss();case 8:if(c=r.sent,l=c.data,!l){r.next=12;break}return r.abrupt("return",l);case 12:case"end":return r.stop()}}),r)})))()},hide:function(e){return Object(r["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,a["modalController"].dismiss(e);case 2:case"end":return t.stop()}}),t)})))()}}},dac2:function(e,t,n){"use strict";n.d(t,"a",(function(){return b}));var r,a=n("2909"),o=n("1da1"),u=n("d4ec"),i=n("bee2"),c=n("262e"),l=n("2caf"),s=(n("96cf"),n("d81d"),n("caad"),n("2532"),n("d3b7"),n("99af"),n("159b"),n("07ac"),n("4de4"),n("b0c0"),n("3ca3"),n("ddb0"),n("25f0"),n("71c3")),d=n("9283"),p=n("6d32"),f=n("2ef0"),m=n("cc6f");(function(e){e["CONTRAINDICATION"]="contraindication",e["SIDE_EFFECT"]="side_effect"})(r||(r={}));var b=function(e){Object(c["a"])(n,e);var t=Object(l["a"])(n);function n(e,r){var a;return Object(u["a"])(this,n),a=t.call(this,e,25,r),a.nextVisitInterval=0,a.fastTrack=!1,a.regimenExtras=[],a.fastTrackMedications=[],a.hangingPills=[],a.medicationOrders=[],a.treatmentState="",a.contraindications={},a.sideEffects={},a.tptPrescriptionCount=0,a.lastSideEffectDate="",a}return Object(i["a"])(n,[{key:"setNextVisitInterval",value:function(e){this.nextVisitInterval=e}},{key:"getHangingPills",value:function(){return this.hangingPills}},{key:"getMedicationOrders",value:function(){return this.medicationOrders.map((function(e){return m["a"].getCachedConceptName(e)}))}},{key:"getTptPrescriptionCount",value:function(){return this.tptPrescriptionCount}},{key:"getLastSideEffectDate",value:function(){return this.lastSideEffectDate}},{key:"getContraindications",value:function(){return this.contraindications}},{key:"getSideEffects",value:function(){return this.sideEffects}},{key:"getRegimenExtras",value:function(){return this.regimenExtras}},{key:"getPatientRegimens",value:function(){return p["a"].getRegimens(this.patientID)}},{key:"getARVs",value:function(){return p["a"].getJson("arv_drugs")}},{key:"getCustomIngridients",value:function(){return p["a"].getCustomIngridients()}},{key:"getFastTrackMedications",value:function(){return this.fastTrackMedications}},{key:"getTreatmentState",value:function(){return this.treatmentState}},{key:"isFastTrack",value:function(){return this.fastTrack}},{key:"medicationOrdersAvailable",value:function(){return!Object(f["isEmpty"])(this.medicationOrders)}},{key:"shouldPrescribeArvs",value:function(){var e=m["a"].getCachedConceptID("Antiretroviral drugs");return this.medicationOrders.includes(e)}},{key:"shouldPrescribeExtras",value:function(){var e=this,t=m["a"].getConceptsByCategory("art_extra_medication_order"),n=t.map((function(t){return e.medicationOrders.includes(t.concept_id)}));return n.some(Boolean)}},{key:"getRegimenStarterpack",value:function(e,t){var n={weight:t,regimen:e};return m["a"].getJson("programs/".concat(m["a"].getProgramID(),"/regimen_starter_packs"),n)}},{key:"getLvpDrugsByType",value:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(t,n){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",m["a"].getJson("programs/".concat(m["a"].getProgramID(),"/regimens/").concat(n),{patient_id:this.patientID,lpv_drug_type:t}));case 1:case"end":return e.stop()}}),e,this)})));function t(t,n){return e.apply(this,arguments)}return t}()},{key:"loadContraindications",value:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(){var t,n,r=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,m["a"].getConceptID("Contraindications");case 2:return t=e.sent,e.next=5,m["a"].getObs({concept_id:t,person_id:this.patientID});case 5:n=e.sent,n.forEach((function(e){var t=d["c"].toStandardHisFormat(e.obs_datetime);r.contraindications[t]||(r.contraindications[t]=[]);var n=m["a"].getCachedConceptName(e.value_coded);r.contraindications[t].push(n)}));case 7:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"loadDrugInduced",value:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(){var t,n,r=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,m["a"].getConceptID("Drug induced");case 2:return t=e.sent,e.next=5,m["a"].getObs({concept_id:t,person_id:this.patientID});case 5:if(n=e.sent,n){e.next=8;break}return e.abrupt("return");case 8:n.forEach((function(e){var t=d["c"].toStandardHisFormat(e.obs_datetime);if(r.lastSideEffectDate||(r.lastSideEffectDate=t),e.value_drug&&e.value_coded){r.sideEffects[t]||(r.sideEffects[t]={}),r.sideEffects[t][e.value_drug]||(r.sideEffects[t][e.value_drug]=[]);var n=m["a"].getCachedConceptName(e.value_coded);r.sideEffects[t][e.value_drug].push(n)}}));case 9:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"loadTptPrescriptionCount",value:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(){var t,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,m["a"].getJson("tpt_prescription_count",{patient_id:this.patientID,date:this.date});case 2:t=e.sent,t&&(n=t.count+1,this.tptPrescriptionCount=n>3?3:n);case 4:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"loadFastTrackStatus",value:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(){var t,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,m["a"].getFirstValueCoded(this.patientID,"Fast track");case 2:return t=e.sent,e.next=5,m["a"].getConceptID("yes");case 5:n=e.sent,t&&(this.fastTrack=t===n);case 7:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"loadRegimenExtras",value:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(){var t,n,r=arguments;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t=r.length>0&&void 0!==r[0]?r[0]:this.date,e.next=3,p["a"].getJson("programs/".concat(p["a"].getProgramID(),"/patients/").concat(this.patientID,"/dosages"),{date:t});case 3:n=e.sent,n&&(this.regimenExtras=Object.values(n));case 5:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"loadMedicationOrders",value:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(){var t,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,m["a"].getConceptID("Medication orders");case 2:return t=e.sent,e.next=5,m["a"].getObs({concept_id:t,date:this.date,person_id:this.patientID,page_size:5});case 5:n=e.sent,this.medicationOrders=n.map((function(e){return e.value_coded}));case 7:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"loadHangingPills",value:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,m["a"].getAll(this.patientID,"Pills brought");case 2:t=e.sent,t&&(this.hangingPills=t.filter((function(e){return e.value_numeric>=1&&e.order})).map((function(e){return e.order.drug_order.drug_inventory_id})));case 4:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"loadFastTrackMedications",value:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(){var t,n,r=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,s["a"].getLastDrugsReceived(this.patientID);case 2:return t=e.sent,n=t.map(function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(t){var n,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=t.drug,e.next=3,s["a"].getDrugDosages(r.patientID,n.drug_id);case 3:return a=e.sent,e.abrupt("return",{drug_id:n.drug_id,drug_name:n.name,units:n.units,am:a.am,noon:a.noon,pm:a.pm,frequency:t.frequency});case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),e.next=6,Promise.all(n);case 6:this.fastTrackMedications=e.sent;case 7:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"loadTreatmentState",value:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(){var t,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t={date:this.date},e.next=3,m["a"].getJson("programs/".concat(m["a"].getProgramID(),"/patients/").concat(this.patientID,"/status"),t);case 3:n=e.sent,n&&(this.treatmentState=n["status"]);case 5:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"findAndGroupDrugSideEffects",value:function(e){var t={};for(var n in this.sideEffects){var r=this.sideEffects[n];for(var o in r)e.includes(parseInt(o))&&(t[n]||(t[n]=[]),t[n]=[].concat(Object(a["a"])(t[n]),Object(a["a"])(r[o])))}return t}},{key:"calculatePillsPerDay",value:function(e,t,n){return parseFloat(e.toString())+t+n}},{key:"estimatePackSize",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=e*this.nextVisitInterval/t,r=Math.round(n);return r<=0&&(r+=1),r}},{key:"calculateDosage",value:function(e,t){var n=0;return 0===t&&(n=e),0==e&&(n=t),e>0&&t>0&&(n=(e+t)/2),n}},{key:"calculateEquivalentDosage",value:function(e,t){return e+t}},{key:"calculateDateFromInterval",value:function(){var e=new Date(this.date);return e.setDate(e.getDate()+this.nextVisitInterval),d["c"].toStandardHisFormat(e)}},{key:"getDrugPackSize",value:function(e){if(e.pack_size)return e.pack_size;try{return e.barcodes[0].tabs}catch(t){return 30}}},{key:"getInstructions",value:function(e,t,n,r){return"".concat(e," :- Morning: ").concat(t," ").concat(r,", Evening: ").concat(n," ").concat(r)}},{key:"toOrderObj",value:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"";return{drug_inventory_id:e,equivalent_daily_dose:this.calculateEquivalentDosage(r,a),start_date:this.date,auto_expire_date:this.calculateDateFromInterval(),units:n,instructions:this.getInstructions(t,r,a,n),dose:this.calculateDosage(r,a),frequency:o}}},{key:"getReasonForRegimenSwitch",value:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,m["a"].getFirstValueText(this.patientID,"Reason for ARV switch");case 2:return t=e.sent,e.abrupt("return",t||"N/A");case 4:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"createDrugOrder",value:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",s["a"].create({encounter_id:this.encounterID,drug_orders:t}));case 1:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"createHangingPillsObs",value:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",this.saveValueTextObs("appointment type",t));case 1:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"createRegimenSwitchObs",value:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",this.saveValueTextObs("Reason for ARV switch",t));case 1:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()}]),n}(m["a"])},ddc8:function(e,t,n){"use strict";n("df34")},df34:function(e,t,n){},e86e:function(e,t,n){"use strict";n.d(t,"b",(function(){return u})),n.d(t,"d",(function(){return c})),n.d(t,"c",(function(){return s})),n.d(t,"g",(function(){return p})),n.d(t,"f",(function(){return m})),n.d(t,"a",(function(){return v})),n.d(t,"h",(function(){return g})),n.d(t,"i",(function(){return j})),n.d(t,"j",(function(){return x})),n.d(t,"e",(function(){return y}));var r=n("1da1"),a=(n("96cf"),n("d81d"),n("4de4"),n("d3b7"),n("498a"),n("b0c0"),n("5713")),o=n("2ef0");function u(){return i.apply(this,arguments)}function i(){return i=Object(r["a"])(regeneratorRuntime.mark((function e(){var t,n,r=arguments;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t=r.length>0&&void 0!==r[0]?r[0]:"",e.next=3,a["a"].getFacilities({name:t});case 3:return n=e.sent,e.abrupt("return",n.filter((function(e){return!Object(o["isEmpty"])(e)&&""!=e.name.trim()})).map((function(e){return{label:e.name,value:e.location_id,other:e}})));case 5:case"end":return e.stop()}}),e)}))),i.apply(this,arguments)}function c(){return l.apply(this,arguments)}function l(){return l=Object(r["a"])(regeneratorRuntime.mark((function e(){var t,n,r=arguments;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t=r.length>0&&void 0!==r[0]?r[0]:"",e.next=3,a["a"].getLabs({search_name:t});case 3:return n=e.sent,e.abrupt("return",n.map((function(e){return{label:e,value:e}})));case 5:case"end":return e.stop()}}),e)}))),l.apply(this,arguments)}function s(){return d.apply(this,arguments)}function d(){return d=Object(r["a"])(regeneratorRuntime.mark((function e(){var t,n,r=arguments;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t=r.length>0&&void 0!==r[0]?r[0]:"",e.next=3,a["a"].getFacilities({name:t,tag:"Facility adult sections"});case 3:return n=e.sent,e.abrupt("return",n.map((function(e){return{label:e.name,value:e.name,other:e}})));case 5:case"end":return e.stop()}}),e)}))),d.apply(this,arguments)}function p(){return f.apply(this,arguments)}function f(){return f=Object(r["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,a["a"].getSpecialistClinics();case 2:return t=e.sent,e.abrupt("return",t.map((function(e){return{label:e.name,value:e.name,other:e}})));case 4:case"end":return e.stop()}}),e)}))),f.apply(this,arguments)}function m(){return b.apply(this,arguments)}function b(){return b=Object(r["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,a["a"].getRegions();case 2:return t=e.sent,e.abrupt("return",t.map((function(e){return{label:e.name,value:e.region_id,other:e}})));case 4:case"end":return e.stop()}}),e)}))),b.apply(this,arguments)}function v(e){return h.apply(this,arguments)}function h(){return h=Object(r["a"])(regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,a["a"].getDistricts(t);case 2:return n=e.sent,e.abrupt("return",n.map((function(e){return{label:e.name,value:e.district_id,other:e}})));case 4:case"end":return e.stop()}}),e)}))),h.apply(this,arguments)}function g(e){return O.apply(this,arguments)}function O(){return O=Object(r["a"])(regeneratorRuntime.mark((function e(t){var n,r,o=arguments;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=o.length>1&&void 0!==o[1]?o[1]:"",e.next=3,a["a"].getTraditionalAuthorities(t,n);case 3:return r=e.sent,e.abrupt("return",r.map((function(e){return{label:e.name,value:e.traditional_authority_id,other:e}})));case 5:case"end":return e.stop()}}),e)}))),O.apply(this,arguments)}function j(e){return w.apply(this,arguments)}function w(){return w=Object(r["a"])(regeneratorRuntime.mark((function e(t){var n,r,o=arguments;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=o.length>1&&void 0!==o[1]?o[1]:"",e.next=3,a["a"].getVillages(t,n);case 3:return r=e.sent,e.abrupt("return",r.map((function(e){return{label:e.name,value:e.village_id,other:e}})));case 5:case"end":return e.stop()}}),e)}))),w.apply(this,arguments)}function x(){return k.apply(this,arguments)}function k(){return k=Object(r["a"])(regeneratorRuntime.mark((function e(){var t,n,r,o=arguments;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t=o.length>0&&void 0!==o[0]?o[0]:"a",n=o.length>1&&void 0!==o[1]?o[1]:1,e.next=4,a["a"].getVillagesByName(t,n);case 4:return r=e.sent,e.abrupt("return",r.map((function(e){return{label:e.name,value:e.village_id,other:e}})));case 6:case"end":return e.stop()}}),e)}))),k.apply(this,arguments)}function y(){var e=["Catholic Church","CCAP","Seventh Day","Mosque","Primary School","Borehole","Secondary School","College","Market","Football Ground","Other"];return e.map((function(e){return{label:e,value:e,other:{code:e}}}))}},f27f:function(e,t,n){"use strict";var r=n("7a23");function a(e,t,n,a,o,u){var i=Object(r["resolveComponent"])("ion-label"),c=Object(r["resolveComponent"])("ion-input"),l=Object(r["resolveComponent"])("ion-note");return Object(r["openBlock"])(),Object(r["createBlock"])(r["Fragment"],null,[e.model.label?(Object(r["openBlock"])(),Object(r["createBlock"])(i,{key:0,class:" ion-padding-bottom bold"},{default:Object(r["withCtx"])((function(){return[Object(r["createTextVNode"])(Object(r["toDisplayString"])(e.model.label),1)]})),_:1})):Object(r["createCommentVNode"])("",!0),Object(r["createVNode"])(c,{type:"number",class:["ion-margin-top",e.model.error?"box-input-error":"box-input"],modelValue:e.model.value,"onUpdate:modelValue":t[1]||(t[1]=function(t){return e.model.value=t}),placeholder:e.model.placeholder,disabled:e.model.disabled,onIonFocus:t[2]||(t[2]=function(t){return e.model.error=""}),onIonBlur:e.validate,min:e.min,max:e.max},null,8,["class","modelValue","placeholder","disabled","onIonBlur","min","max"]),e.model.error?(Object(r["openBlock"])(),Object(r["createBlock"])(l,{key:1,color:"danger"},{default:Object(r["withCtx"])((function(){return[Object(r["createTextVNode"])(Object(r["toDisplayString"])(e.model.error),1)]})),_:1})):Object(r["createCommentVNode"])("",!0)],64)}var o=n("1da1"),u=(n("96cf"),n("a9e3"),n("d3b7"),n("25f0"),n("8a30")),i=Object(r["defineComponent"])({name:"NumberInput",props:{modelValue:{type:Object,default:function(){return{}}},form:{type:Object,default:function(){return{}}},min:{type:Number,default:null},max:{type:Number,default:null}},components:{IonLabel:u["IonLabel"],IonInput:u["IonInput"],IonNote:u["IonNote"]},emits:["update:modelValue"],setup:function(e,t){var n=t.emit,a=Object(r["computed"])({get:function(){return e.modelValue},set:function(e){return n("update:modelValue",e)}}),u=function(){var t=Object(o["a"])(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!a.value.required||a.value.value){t.next=2;break}return t.abrupt("return",a.value.error="This field is required");case 2:if(!a.value.validation){t.next=8;break}return t.next=5,a.value.validation({label:a.value.value,value:a.value.value},e.form);case 5:if(n=t.sent,!n||!n.length){t.next=8;break}return t.abrupt("return",a.value.error+=n.toString());case 8:return t.abrupt("return",a.value.error="");case 9:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();return{validate:u,model:a}}}),c=n("d959"),l=n.n(c);const s=l()(i,[["render",a]]);t["a"]=s}}]);
//# sourceMappingURL=chunk-5d6cf758.e1190645.js.map