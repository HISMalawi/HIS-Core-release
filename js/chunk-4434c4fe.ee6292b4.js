(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-4434c4fe"],{"303d":function(e,t,n){"use strict";n("afc1")},3171:function(e,t,n){"use strict";n.r(t);n("d3b7"),n("ddb0");var r=n("7a23"),a=Object(r["withScopeId"])("data-v-0492b742");Object(r["pushScopeId"])("data-v-0492b742");var i={class:"tool-bar-medium-card"},c={class:"his-sm-text"},o=Object(r["createTextVNode"])("Patient Name: "),s=Object(r["createTextVNode"])(),u=Object(r["createVNode"])("p",null,null,-1),l={class:"his-sm-text"},d=Object(r["createTextVNode"])("Birthdate: "),p=Object(r["createTextVNode"])(),f=Object(r["createVNode"])("p",null,null,-1),m={class:"his-sm-text"},h=Object(r["createTextVNode"])("Gender: "),g={class:"tool-bar-medium-card"},b={class:"his-sm-text"},N=Object(r["createTextVNode"])("Ancestry district: "),O=Object(r["createVNode"])("p",null,null,-1),v={class:"his-sm-text"},D=Object(r["createTextVNode"])("Ancestry TA: "),w=Object(r["createVNode"])("p",null,null,-1),E={class:"his-sm-text"},I=Object(r["createTextVNode"])("Ancestry village: "),R=Object(r["createVNode"])("p",null,null,-1),y={class:"tool-bar-medium-card"},j={class:"his-sm-text"},x=Object(r["createTextVNode"])("Current District:"),A=Object(r["createVNode"])("p",null,null,-1),P={class:"his-sm-text"},_=Object(r["createTextVNode"])("Current TA: "),T=Object(r["createVNode"])("p",null,null,-1),C={class:"his-sm-text"},k=Object(r["createTextVNode"])("Current Village: "),V=Object(r["createVNode"])("p",null,null,-1),L=Object(r["createTextVNode"])(" Cancel "),F=Object(r["createTextVNode"])("Void Client"),S=Object(r["createTextVNode"])(" New Pregnancy "),U=Object(r["createTextVNode"])(" Continue ");Object(r["popScopeId"])();var M,H,G=a((function(e,t,n,M,H,G){var B=Object(r["resolveComponent"])("ion-col"),X=Object(r["resolveComponent"])("ion-row"),Y=Object(r["resolveComponent"])("ion-toolbar"),W=Object(r["resolveComponent"])("ion-header"),$=Object(r["resolveComponent"])("confirmation-card"),z=Object(r["resolveComponent"])("ion-content"),K=Object(r["resolveComponent"])("ion-button"),J=Object(r["resolveComponent"])("ion-spinner"),q=Object(r["resolveComponent"])("ion-footer"),Q=Object(r["resolveComponent"])("ion-page");return Object(r["openBlock"])(),Object(r["createBlock"])(Q,null,{default:a((function(){return[Object(r["createVNode"])(W,{translucent:!0},{default:a((function(){return[Object(r["createVNode"])(Y,null,{default:a((function(){return[Object(r["createVNode"])(X,null,{default:a((function(){return[Object(r["createVNode"])(B,null,{default:a((function(){return[Object(r["createVNode"])("div",i,[Object(r["createVNode"])("span",c,[o,Object(r["createVNode"])("b",null,Object(r["toDisplayString"])(e.demographics.patientName),1)]),s,u,Object(r["createVNode"])("span",l,[d,Object(r["createVNode"])("b",null,Object(r["toDisplayString"])(e.birthdate),1)]),p,f,Object(r["createVNode"])("span",m,[h,Object(r["createVNode"])("b",null,Object(r["toDisplayString"])(e.demographics.gender),1)])])]})),_:1}),Object(r["createVNode"])(B,null,{default:a((function(){return[Object(r["createVNode"])("div",g,[Object(r["createVNode"])("span",b,[N,Object(r["createVNode"])("b",null,Object(r["toDisplayString"])(e.demographics.ancestryDistrict),1)]),O,Object(r["createVNode"])("span",v,[D,Object(r["createVNode"])("b",null,Object(r["toDisplayString"])(e.demographics.ancestryTA),1)]),w,Object(r["createVNode"])("span",E,[I,Object(r["createVNode"])("b",null,Object(r["toDisplayString"])(e.demographics.ancestryVillage),1)]),R])]})),_:1}),Object(r["createVNode"])(B,null,{default:a((function(){return[Object(r["createVNode"])("div",y,[Object(r["createVNode"])("span",j,[x,Object(r["createVNode"])("b",null,Object(r["toDisplayString"])(e.demographics.currentDistrict),1),A]),Object(r["createVNode"])("span",P,[_,Object(r["createVNode"])("b",null,Object(r["toDisplayString"])(e.demographics.currentTA),1),T]),Object(r["createVNode"])("span",C,[k,Object(r["createVNode"])("b",null,Object(r["toDisplayString"])(e.demographics.currentVillage),1),V])])]})),_:1})]})),_:1})]})),_:1})]})),_:1}),Object(r["createVNode"])(z,null,{default:a((function(){return[Object(r["createVNode"])(X,null,{default:a((function(){return[(Object(r["openBlock"])(!0),Object(r["createBlock"])(r["Fragment"],null,Object(r["renderList"])(e.cards,(function(e,t){return Object(r["openBlock"])(),Object(r["createBlock"])(B,{"size-md":"4","size-sm":"12",key:t},{default:a((function(){return[Object(r["createVNode"])($,{key:"card-".concat(t),title:e.label,items:e.values,isLoading:e.isLoading},null,8,["title","items","isLoading"])]})),_:2},1024)})),128))]})),_:1})]})),_:1}),Object(r["createVNode"])(q,null,{default:a((function(){return[Object(r["createVNode"])(Y,{color:"dark"},{default:a((function(){return[Object(r["createVNode"])(K,{color:"danger",size:"large","router-link":"/"},{default:a((function(){return[L]})),_:1}),Object(r["createVNode"])(K,{disabled:!(e.facts.patientFound&&e.isAdmin),color:"danger left",size:"large",onClick:e.onVoid},{default:a((function(){return[F]})),_:1},8,["disabled","onClick"]),e.facts.anc.canInitiateNewPregnancy?(Object(r["openBlock"])(),Object(r["createBlock"])(K,{key:0,slot:"end",size:"large",onClick:e.onInitiateNewAncPregnancy},{default:a((function(){return[S]})),_:1},8,["onClick"])):Object(r["createCommentVNode"])("",!0),Object(r["createVNode"])(K,{disabled:!e.facts.patientFound||e.facts.patientFound&&!e.isReady,slot:"end",color:"success",size:"large",onClick:e.nextTask},{default:a((function(){return[e.isReady?Object(r["createCommentVNode"])("",!0):(Object(r["openBlock"])(),Object(r["createBlock"])(J,{key:0,name:"crescent"})),U]})),_:1},8,["disabled","onClick"])]})),_:1})]})),_:1})]})),_:1})})),B=n("4f96"),X=n("53ca"),Y=n("1da1"),W=(n("96cf"),n("3ca3"),n("b64b"),n("fb6a"),n("d81d"),n("4fad"),n("a15b"),n("b0c0"),n("ac1f"),n("466d"),n("2ef0")),$=n("9283"),z=n("3e53"),K=n("0fa1"),J=n("c1e4"),q=n("c21d"),Q=n("23e6"),Z=n("74f4"),ee=n("b5e4"),te=n("8a30"),ne=n("2909"),re=(n("99af"),n("caad"),n("2532"),n("4d63"),n("2c3e"),n("25f0"),n("7f35")),ae=n("0011");(function(e){e["ON_CONTINUE"]="oncontinue",e["ONLOAD"]="onload"})(M||(M={})),function(e){e["FORCE_EXIT"]="forceExit",e["GO_HOME"]="gotoHome",e["GO_BACK"]="goBack",e["CONTINUE"]="continue",e["ENROLL"]="enroll",e["EXIT"]="exit",e["ACTIVATE_FN"]="activateFn",e["ASSIGN_NPID"]="assignNpid",e["UPDATE_DMG"]="updateDemographics",e["PRINT_NPID"]="printNPID",e["CREATE_NPID_WITH_REMOTE_DIFF"]="createNpiDWithRemote",e["REFRESH_DDE_DEMOGRAPHICS"]="refreshDemographicsDDE",e["UPDATE_LOCAL_DDE_DIFFS"]="updateLocalDiffs",e["RESOLVE_DUPLICATE_NPIDS"]="resolveDuplicateNpids",e["ADD_AS_DRUG_REFILL"]="addAsDrugRefill",e["ADD_AS_NEW_PATIENT"]="addAsNewPatient",e["ADD_AS_EXTERNAL_CONSULTATION"]="addAsExternalConsultation",e["INITIATE_ANC_PREGNANCY"]="initiateNewAncPregnancy",e["VIEW_MERGE_AUDIT_FOR_NPID"]="viewMergeAuditForNpid",e["SEARCH_BY_NAME"]="searchByName"}(H||(H={}));var ie={"[DDE NOT ENABLED] Do not proceed if patient is not found in the system":{weight:98,targetEvent:M.ONLOAD,actions:{alert:function(){var e=Object(Y["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(re["a"])(" 0 Search results","Patient has not been found","Choose how to proceed",[{name:"Close",slot:"start",color:"primary"},{name:"Search by name",slot:"end",color:"success"}],"his-danger-color");case 2:return t=e.sent,e.abrupt("return","Search by name"===t?H.SEARCH_BY_NAME:H.GO_HOME);case 4:case"end":return e.stop()}}),e)})));function t(){return e.apply(this,arguments)}return t}()},conditions:{globalProperties:function(e){var t=e.ddeEnabled;return!1===t},patientFound:function(e){return!1===e}}},"[DDE ENABLED] Show invalid attributes for a patient whose remote":{weight:78,targetEvent:M.ONLOAD,actions:{alert:function(){var e=Object(Y["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(re["d"])("DDE Entity Error","Remote patient has invalid attributes",["Attribute","Errors"],t.demographics.invalidDemographics,[{name:"Close",slot:"start",color:"danger"}],"his-danger-color");case 2:return e.abrupt("return",H.GO_BACK);case 3:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}()},conditions:{demographics:function(e){var t=e.hasInvalidDemographics;return!0===t}}},"[DDE ENABLED] Do not proceed if NPID is not found and Provide history of voided NPIDS":{weight:98,targetEvent:M.ONLOAD,actions:{alert:function(){var e=Object(Y["a"])(regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(re["d"])("Voided patients with ID ".concat(t.scannedNpid),"NPID was not found. Please review available patient with similar ID",t.dde.voidedNpids.cols,t.dde.voidedNpids.rows,[{name:"Close",slot:"start",color:"primary"},{name:"Merge history",slot:"end",color:"primary"},{name:"Search by name",slot:"end",color:"success"}],"his-danger-color");case 2:return n=e.sent,e.abrupt("return","Merge history"===n?H.VIEW_MERGE_AUDIT_FOR_NPID:"Search by name"===n?H.SEARCH_BY_NAME:H.GO_HOME);case 4:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}()},conditions:{globalProperties:function(e){var t=e.ddeEnabled;return!0===t},patientFound:function(e){return!1===e}}},"[DDE NOT ENABLED] Notify the user to proceed with Remote NPID if local NPID does not match remote":{weight:77,targetEvent:M.ONLOAD,actions:{alert:function(){var e=Object(Y["a"])(regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=t.dde,e.next=3,Object(re["a"])("Missing Local NPID",'Local NPID of "'.concat(n.localNpidDiff,'" does not match remote "').concat(n.remoteNpidDiff,'"'),"Proceed to Fix issue",[{name:"Resolve issue",slot:"start",color:"danger"}],"his-danger-color");case 3:return e.abrupt("return",H.CREATE_NPID_WITH_REMOTE_DIFF);case 4:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}()},conditions:{dde:function(e){var t=e.localNpidDiff,n=e.remoteNpidDiff;return t!=n},globalProperties:function(e){var t=e.ddeEnabled;return!0===t}}},"Warn if patient is missing National ID and assign them one":{weight:75,targetEvent:M.ONLOAD,actions:{alert:function(){var e=Object(Y["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(re["a"])("Missing National ID","Patient was found BUT has no National ID","The system is going to assign the patient with a new ID",[{name:"OK",slot:"start",color:"primary"}],"his-danger-color");case 2:return e.abrupt("return",H.ASSIGN_NPID);case 3:case"end":return e.stop()}}),e)})));function t(){return e.apply(this,arguments)}return t}()},conditions:{currentNpid:function(e){return Object(ae["c"])(e)}}},"Detect NPID over 5 duplicates and prompt the user to resolve them":{weight:76,targetEvent:M.ONLOAD,actions:{alert:function(){var e=Object(Y["a"])(regeneratorRuntime.mark((function e(t){var n,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=t.scannedNpid,e.next=3,Object(re["a"])("More than 5 duplicates found","There are more than 5 duplicates for this NPID (".concat(n,"). Please search by name and gender"),"Choose how to proceed",[{name:"Close",slot:"start",color:"danger"},{name:"Search by name",slot:"start",color:"primary"}],"his-danger-color");case 3:return r=e.sent,e.abrupt("return","Search by name"===r?H.SEARCH_BY_NAME:H.GO_HOME);case 5:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}()},conditions:{npidHasOverFiveDuplicates:function(e){return e}}},"Detect NPID duplicates and prompt the user to resolve them":{weight:99,targetEvent:M.ONLOAD,actions:{alert:function(){var e=Object(Y["a"])(regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=t.scannedNpid,e.next=3,Object(re["a"])("DUPLICATE NPID","NPID ".concat(n," is currently assigned to multiple patients"),"Proceed to resolve the issue",[{name:"Resolve Duplicate NPIDs",slot:"start",color:"danger"}],"his-danger-color");case 3:return e.abrupt("return",H.RESOLVE_DUPLICATE_NPIDS);case 4:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}()},conditions:{npidHasDuplicates:function(e){return e}}},"Warn before proceeding if patient is deceased based on current Patient state":{weight:50,targetEvent:M.ON_CONTINUE,actions:{alert:function(){var e=Object(Y["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(re["a"])("Deceased Patient","Patient outcome is Died!","Do you want to continue?",[{name:"Yes",slot:"start",color:"danger"},{name:"No",slot:"end",color:"success"}],"his-warning-color");case 2:return t=e.sent,e.abrupt("return","Yes"===t?H.CONTINUE:H.FORCE_EXIT);case 4:case"end":return e.stop()}}),e)})));function t(){return e.apply(this,arguments)}return t}()},conditions:{currentOutcome:function(e){return"Patient died"===e}}},"Warn before proceeding if patient stopped treatment based on current Patient state":{weight:49,targetEvent:M.ON_CONTINUE,actions:{alert:function(){var e=Object(Y["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(re["a"])("Stopped Treatment","Patient outcome is Stopped Treatment ","Do you want to continue?",[{name:"Yes",slot:"start",color:"danger"},{name:"No",slot:"end",color:"success"}],"his-warning-color");case 2:return t=e.sent,e.abrupt("return","Yes"===t?H.CONTINUE:H.FORCE_EXIT);case 4:case"end":return e.stop()}}),e)})));function t(){return e.apply(this,arguments)}return t}()},conditions:{currentOutcome:function(e){return"Treatment stopped"===e}}},"[ART patient visit purpose] Select purpose of visit if patient is Transferred out or Drug refill":{weight:70,targetEvent:M.ON_CONTINUE,actions:{alert:function(){var e=Object(Y["a"])(regeneratorRuntime.mark((function e(t){var n,r,a,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=t.patientType,r=t.currentOutcome,a=[],"External consultation"!==n&&"Patient transferred out"!==r||(a=[{name:"Drug refill",slot:"start",color:"primary"},{name:"New Patient",slot:"end",color:"primary"}]),"Drug Refill"===n&&(a=[{name:"External Consultation",slot:"start",color:"primary"},{name:"New Patient",slot:"end",color:"primary"}]),"New patient"===n&&(a=[{name:"External Consultation",slot:"start",color:"primary"},{name:"Drug refill",slot:"start",color:"primary"}]),e.next=7,Object(re["a"])("Purpose of visit","Patient type: ".concat(n," | State: ").concat(r),"Please select purspose of the visit",[].concat(Object(ne["a"])(a),[{name:"Continue",slot:"end",color:"success"}]));case 7:i=e.sent,e.t0=i,e.next="Drug refill"===e.t0?11:"External Consultation"===e.t0?12:"New Patient"===e.t0?13:14;break;case 11:return e.abrupt("return",H.ADD_AS_DRUG_REFILL);case 12:return e.abrupt("return",H.ADD_AS_EXTERNAL_CONSULTATION);case 13:return e.abrupt("return",H.ADD_AS_NEW_PATIENT);case 14:return e.abrupt("return",H.CONTINUE);case 15:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}()},conditions:{programName:function(e){return"ART"===e},patientType:function(e,t){var n=t.currentOutcome;return["Drug Refill","External consultation"].includes(e)||"Patient transferred out"===n}}},"Prompt patient enrollment in current programme if not enrolled":{weight:30,targetEvent:M.ONLOAD,actions:{alert:function(){var e=Object(Y["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(re["a"])("Programme Enrollment","Patient is not enrolled in current programme, do you want to enroll?","",[{name:"Yes",slot:"start",color:"success"},{name:"No",slot:"end",color:"danger"}]);case 2:return t=e.sent,e.abrupt("return","Yes"===t?H.ENROLL:H.EXIT);case 4:case"end":return e.stop()}}),e)})));function t(){return e.apply(this,arguments)}return t}()},conditions:{enrolledInProgram:function(e){return!1===e}}},"(ART Filing numbers) Prompt dormant filing number reactivation if patient has a dormant filing number":{weight:25,targetEvent:M.ONLOAD,actions:{alert:function(){var e=Object(Y["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(re["a"])("Filing Numbers","Activate dormant #?","",[{name:"Yes",slot:"start",color:"success"},{name:"No",slot:"end",color:"danger"}]);case 2:return t=e.sent,e.abrupt("return","Yes"===t?H.ACTIVATE_FN:H.EXIT);case 4:case"end":return e.stop()}}),e)})));function t(){return e.apply(this,arguments)}return t}()},conditions:{programName:function(e){return"ART"===e},identifiers:function(e){return e.includes("Archived filing number")},currentOutcome:function(e){return!["Treatment stopped","Patient transferred out","Patient died"].includes(e)},globalProperties:function(e){var t=e.useFilingNumbers;return t}}},"[DDE OFF] Prompt the user to update patient demographics when data is incomplete":{weight:92,targetEvent:M.ONLOAD,actions:{alert:function(){var e=Object(Y["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(re["a"])("Demographics","Patient data is incomplete","Do you want to review and update now?",[{name:"Yes",slot:"start",color:"success"},{name:"No",slot:"end",color:"danger"}],"his-danger-color");case 2:return t=e.sent,e.abrupt("return","Yes"===t?H.UPDATE_DMG:H.EXIT);case 4:case"end":return e.stop()}}),e)})));function t(){return e.apply(this,arguments)}return t}()},conditions:{globalProperties:function(e){var t=e.ddeEnabled;return!1===t},demographics:function(e){var t=e.patientIsComplete;return!1===t},patientFound:function(e){return!0===e}}},"[DDE] Alert When remote Patient demographics dont match Local Demographics ":{weight:93,targetEvent:M.ONLOAD,actions:{alert:function(){var e=Object(Y["a"])(regeneratorRuntime.mark((function e(t){var n,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=t.dde,e.next=3,Object(re["d"])("Demographics Mismatch","Local Demographics do not match Remote Demographics",["Attributes","Local","Remote"],n.diffRows,[{name:"Use Local",slot:"start",color:"primary"},{name:"Use Remote",slot:"start",color:"primary"}],"his-danger-color",n.diffRowColors);case 3:return r=e.sent,e.abrupt("return","Use Local"===r?H.UPDATE_LOCAL_DDE_DIFFS:H.REFRESH_DDE_DEMOGRAPHICS);case 5:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}()},conditions:{dde:function(e){var t=e.hasDemographicConflict;return t}}},"[DDE] Alert to print newer NPID when the scanned NPID doesnt match active NPID":{weight:69,targetEvent:M.ONLOAD,actions:{alert:function(){var e=Object(Y["a"])(regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=t.currentNpid,e.next=3,Object(re["a"])("[DDE] NATIONAL ID","Patient has a newer National Identifier ".concat(n),"Print and proceed",[{name:"Print",slot:"start",color:"primary"}]);case 3:return e.abrupt("return",H.PRINT_NPID);case 4:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}()},conditions:{globalProperties:function(e){var t=e.ddeEnabled;return!0===t},scannedNpid:function(e,t){var n=t.currentNpid;return!e.match(new RegExp(n,"i"))}}},"assign newer NPID when the current one is invalid":{weight:68,targetEvent:M.ONLOAD,actions:{alert:function(){var e=Object(Y["a"])(regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=t.currentNpid,e.next=3,Object(re["a"])("NATIONAL ID","Current NPID ".concat(n," is invalid"),"Reasign and Print",[{name:"Reassign",slot:"start",color:"primary"}]);case 3:return e.abrupt("return",H.ASSIGN_NPID);case 4:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}()},conditions:{demographics:function(e){var t=e.patientIsComplete;return!0===t},patientFound:function(e){return!0===e},hasInvalidNpid:function(e){return e}}},"[DDE ON] Warn program managers when Patient has incomplete demographics. Dont force them to update though":{weight:91,targetEvent:M.ONLOAD,actions:{alert:function(){var e=Object(Y["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(re["a"])("Demographics","Patient data is incomplete data","Do you want to review and update now?",[{name:"Yes",slot:"start",color:"success"},{name:"No",slot:"end",color:"danger"}],"his-danger-color");case 2:return t=e.sent,e.abrupt("return","Yes"===t?H.UPDATE_DMG:H.CONTINUE);case 4:case"end":return e.stop()}}),e)})));function t(){return e.apply(this,arguments)}return t}()},conditions:{globalProperties:function(e){var t=e.ddeEnabled;return!0===t},demographics:function(e){var t=e.patientIsComplete;return!1===t},patientFound:function(e){return!0===e},userRoles:function(e){return!0===e.includes("Program Manager")}}},"[DDE ON] Force Users to update Incomplete Patient demographics":{weight:92,targetEvent:M.ONLOAD,actions:{alert:function(){var e=Object(Y["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(re["a"])("Patient Demographics","Demographic data is incomplete","Continue to update",[{name:"Update",slot:"start",color:"success"},{name:"Cancel",slot:"start",color:"danger"}],"his-warning-color");case 2:return t=e.sent,e.abrupt("return","Cancel"===t?H.GO_HOME:H.UPDATE_DMG);case 4:case"end":return e.stop()}}),e)})));function t(){return e.apply(this,arguments)}return t}()},conditions:{globalProperties:function(e){var t=e.ddeEnabled;return!0===t},demographics:function(e){var t=e.patientIsComplete;return!1===t},userRoles:function(e){return!1===e.includes("Program Manager")}}},"Warn the user when patient has high viral load":{weight:45,targetEvent:M.ONLOAD,actions:{alert:function(){var e=Object(Y["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(re["a"])("High Viral Load","Patient has a high viral load, please take immediate action!","",[{name:"OK",slot:"end",color:"danger"}],"his-danger-color");case 2:return e.abrupt("return",H.CONTINUE);case 3:case"end":return e.stop()}}),e)})));function t(){return e.apply(this,arguments)}return t}()},conditions:{hasHighViralLoad:function(e){return!0===e}}},"[ANC] Warn last LMP is more than 8 months ago and ask to initiate new pregnancy":{weight:32,targetEvent:M.ON_CONTINUE,actions:{alert:function(){var e=Object(Y["a"])(regeneratorRuntime.mark((function e(t){var n,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=t.anc,e.next=3,Object(re["a"])("Pregancy overdue","Last menstrual period was ".concat(n.lmpMonths," months ago!"),"Would you like to initiate new pregnancy?",[{name:"Yes",slot:"end",color:"success"},{name:"No",slot:"end",color:"danger"}],"his-danger-color");case 3:return r=e.sent,e.abrupt("return","Yes"===r?H.INITIATE_ANC_PREGNANCY:H.CONTINUE);case 5:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}()},conditions:{programName:function(e){return"ANC"===e},anc:function(e){return!0===e.currentPregnancyIsOverdue}}},"[ANC] Exit if client is NOT ELIGIBLE for ANC":{weight:89,targetEvent:M.ONLOAD,actions:{alert:function(){var e=Object(Y["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(re["a"])("Client not eligible for ANC","This program is for women eligible for ANC only","If this is a mistake, please update client Demographics or Exit",[{name:"EXIT",slot:"end",color:"success"},{name:"EDIT DEMOGRAPHICS",slot:"end",color:"danger"}],"his-danger-color");case 2:return t=e.sent,e.abrupt("return","EXIT"===t?H.GO_HOME:H.UPDATE_DMG);case 4:case"end":return e.stop()}}),e)})));function t(){return e.apply(this,arguments)}return t}()},conditions:{demographics:function(e){var t=e.gender,n=t.toLowerCase();return"m"===n||"male"===n},programName:function(e){return"ANC"===e}}}},ce=n("4db7"),oe=n("fa73"),se=n("1c74"),ue=n("9b7c"),le=n("8df6"),de=n("7957"),pe=n("8734"),fe=n("d4ec"),me=n("bee2"),he=n("262e"),ge=n("2caf"),be=n("cc6f"),Ne=n("ad60"),Oe=n("5a0c"),ve=n.n(Oe),De=function(e){Object(he["a"])(n,e);var t=Object(ge["a"])(n);function n(e,r){return Object(fe["a"])(this,n),t.call(this,e,111,r)}return Object(me["a"])(n,[{key:"getLmpInMonths",value:function(){var e=Object(Y["a"])(regeneratorRuntime.mark((function e(){var t,n,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Ne["a"].getProgramInformation(this.patientID);case 2:if(t=e.sent,!t.date_of_lnmp){e.next=7;break}return n=ve()(t.date_of_lnmp),r=ve()(this.date),e.abrupt("return",r.diff(n,"months"));case 7:return e.abrupt("return",-1);case 8:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"pregnancyIsOverdue",value:function(){var e=Object(Y["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.getLmpInMonths();case 2:return e.t0=e.sent,e.abrupt("return",e.t0>9);case 4:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"canInitiateNewPregnancy",value:function(){var e=Object(Y["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.getLmpInMonths();case 2:return e.t0=e.sent,e.abrupt("return",e.t0>=7);case 4:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"createNewPregnancyStatus",value:function(){var e=Object(Y["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.createEncounter();case 2:return e.abrupt("return",this.saveValueCodedObs("Pregnancy status","New"));case 3:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()}]),n}(be["a"]),we=n("76df"),Ee=n("8e8b"),Ie=Object(r["defineComponent"])({name:"Patient Confirmation",components:{IonContent:te["IonContent"],IonHeader:te["IonHeader"],IonFooter:te["IonFooter"],IonPage:te["IonPage"],IonToolbar:te["IonToolbar"],IonSpinner:te["IonSpinner"],IonRow:te["IonRow"],IonCol:te["IonCol"],IonButton:te["IonButton"],ConfirmationCard:Object(r["defineAsyncComponent"])((function(){return n.e("chunk-1f0442db").then(n.bind(null,"8ee9"))}))},data:function(){return{app:{},program:{},patient:{},localPatient:{},ddeInstance:{},useDDE:!1,programInfo:{},isReady:!1,cards:[],facts:{hasHighViralLoad:!1,patientFound:!1,npidHasDuplicates:!1,npidHasOverFiveDuplicates:!1,userRoles:[],scannedNpid:"",currentNpid:"",hasInvalidNpid:!1,enrolledInProgram:!1,programName:"N/A",currentOutcome:"",programs:[],identifiers:[],patientType:"N/A",anc:{lmpMonths:-1,canInitiateNewPregnancy:!1,currentPregnancyIsOverdue:!1},dde:{localNpidDiff:"",remoteNpidDiff:"",voidedNpids:{cols:[],rows:[]},hasDemographicConflict:!1,localDiffs:{},diffRows:[],diffRowColors:[]},demographics:{patientIsComplete:!1,hasInvalidDemographics:!1,invalidDemographics:[],givenName:"",familyName:"",patientName:"",landmark:"",phoneNumber:"",currentDistrict:"",currentTA:"",currentVillage:"",ancestryDistrict:"",ancestryTA:"",ancestryVillage:"",gender:"",birthdate:""},globalProperties:{useFilingNumbers:!1,ddeEnabled:!1}}}},created:function(){this.initCards(),this.app=z["a"].getActiveApp()||{}},mounted:function(){var e=this;this.app&&(this.updateCards(),this.ddeInstance=new oe["a"],this.setGlobalPropertyFacts().then((function(){var t=e.$route.query;Object(W["isEmpty"])(t)||!t.person_id&&!t.patient_barcode||e.findAndSetPatient(t.person_id,t.patient_barcode)})))},computed:{demographics:function(){return this.facts.demographics},birthdate:function(){return $["c"].toStandardHisDisplayFormat(this.facts.demographics.birthdate)},isAdmin:function(){return J["a"].isAdmin()}},methods:{initCards:function(){for(var e=0;e<6;e++)this.cards[e]={label:"-",isLoading:!0,values:[]}},updateCards:function(){var e=this;return Object(Y["a"])(regeneratorRuntime.mark((function t(){var n,r,a,i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if("function"!==typeof e.app.confirmationSummary){t.next=10;break}n=e.app.confirmationSummary(e.patient,e.program,e.facts),r=Object.keys(n),a=regeneratorRuntime.mark((function t(a){var i,c,o;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(i=r[a]?n[r[a]]():[],e.cards[a]={label:r[a]||"-",isLoading:!1,values:i},"object"!==Object(X["a"])(i)||!i.then){t.next=7;break}e.cards[a].isLoading=!0,Object(W["isEmpty"])(e.patient)||i.then((function(t){e.cards[a].isLoading=!1,e.cards[a].values=t})).catch((function(t){e.cards[a].isLoading=!1,console.error("".concat(t))})),t.next=14;break;case 7:c=regeneratorRuntime.mark((function t(n){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(r=i[n],e.cards[a].values[n]=r,Object(W["isEmpty"])(e.patient)){t.next=7;break}if("function"!==typeof r.init){t.next=6;break}return t.next=6,r.init();case 6:"function"===typeof r.asyncValue?r.asyncValue().then((function(t){e.cards[a].values[n].value=t})).catch((function(t){e.cards[a].values[n].value="_ERROR_",console.error("".concat(t))})):"function"===typeof r.staticValue&&(e.cards[a].values[n].value=r.staticValue());case 7:case"end":return t.stop()}}),t)})),o=0;case 9:if(!(o<i.length)){t.next=14;break}return t.delegateYield(c(o),"t0",11);case 11:++o,t.next=9;break;case 14:case"end":return t.stop()}}),t)})),i=0;case 5:if(!(i<e.cards.length)){t.next=10;break}return t.delegateYield(a(i),"t0",7);case 7:i++,t.next=5;break;case 10:case"end":return t.stop()}}),t)})))()},setViralLoadStatus:function(){var e=this;return Object(Y["a"])(regeneratorRuntime.mark((function t(){var n,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,ue["a"].getOrders(e.patient.getID());case 2:n=t.sent,Object(W["isEmpty"])(n)||(r=ue["a"].getViralLoadOrders(n),Object(W["isEmpty"])(r)||(e.facts.hasHighViralLoad=ue["a"].isHighViralLoadResult(r[0].tests[0].result[0])));case 4:case"end":return t.stop()}}),t)})))()},findAndSetPatient:function(e,t){var n=this;return Object(Y["a"])(regeneratorRuntime.mark((function r(){var a;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:a=null,n.isReady=!1,n.localPatient={},n.facts.scannedNpid||(n.facts.scannedNpid=t||""),a=n.useDDE&&t?n.ddeInstance.searchNpid(t):e?Q["a"].findByID(e):Q["a"].findByNpid(t),n.handleSearchResults(a).then((function(){return n.isReady=!0})).catch((function(e){return Object(ee["c"])("".concat(e),3e5)}));case 6:case"end":return r.stop()}}),r)})))()},handleSearchResults:function(e){var t=this;return Object(Y["a"])(regeneratorRuntime.mark((function n(){var r,a,i,c,o;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return r=[],n.prev=1,n.next=4,e;case 4:r=n.sent,n.next=10;break;case 7:n.prev=7,n.t0=n["catch"](1),n.t0 instanceof se["b"]&&!Object(W["isEmpty"])(n.t0.entity)?r=n.t0.entity:n.t0 instanceof se["a"]&&Array.isArray(n.t0.errors)?(a=Object(B["a"])(n.t0.errors),i=a[0],c=a.slice(1),"string"===typeof i&&"Invalid parameter(s)"===i&&t.setInvalidParametersFacts(c)):Object(ee["c"])("".concat(n.t0),3e5);case 10:if(Object(W["isEmpty"])(r)&&!Object(W["isEmpty"])(t.localPatient)&&(r=t.localPatient),Array.isArray(r)&&r.length>1?(t.facts.npidHasDuplicates=r.length<=5,t.facts.npidHasOverFiveDuplicates=r.length>5):t.facts.patientFound=!Object(W["isEmpty"])(r),!t.facts.patientFound){n.next=28;break}return t.patient=new Q["a"](Array.isArray(r)?r[0]:r),t.updateCards(),Ee["a"].set("ACTIVE_PATIENT",t.patient),t.setPatientFacts(),o=[],o.push(t.setProgramFacts()),t.useDDE&&o.push(t.setDDEFacts()),"ANC"===t.facts.programName&&o.push(t.setAncFacts()),"ART"===t.facts.programName&&o.push(t.setViralLoadStatus()),t.facts.currentNpid=t.patient.getNationalID(),o.push(t.validateNpid()),n.next=26,Promise.all(o);case 26:n.next=29;break;case 28:t.facts.scannedNpid&&t.setVoidedNpidFacts(t.facts.scannedNpid);case 29:t.onEvent(M.ONLOAD).then((function(){return t.isReady=!0})).catch((function(e){Object(ee["c"])("".concat(e),3e5),t.isReady=!0}));case 30:case"end":return n.stop()}}),n,null,[[1,7]])})))()},validateNpid:function(){var e=this;return Object(Y["a"])(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!e.useDDE){t.next=4;break}e.facts.hasInvalidNpid=!e.patient.getDocID()||e.patient.getDocID()&&Object(ae["c"])(e.patient.getNationalID()),t.next=8;break;case 4:return t.next=6,Q["a"].findByNpid(e.facts.currentNpid,{page_size:2});case 6:n=t.sent,e.facts.hasInvalidNpid=Array.isArray(n)&&n.length>1;case 8:case"end":return t.stop()}}),t)})))()},setInvalidParametersFacts:function(e){this.facts.demographics.hasInvalidDemographics=!0,this.facts.demographics.invalidDemographics=e.map((function(e){var t=Object.entries(e),n=t[0][0],r=t[0][1];return[n,r.join(", ")]}))},reloadPatient:function(){return this.findAndSetPatient(this.patient.getID(),void 0)},setPatientFacts:function(){this.facts.demographics.patientIsComplete=this.patient.patientIsComplete(),this.facts.demographics.patientName=this.patient.getFullName(),this.facts.demographics.givenName=this.patient.getGivenName(),this.facts.demographics.familyName=this.patient.getFamilyName(),this.facts.demographics.landmark=this.patient.getAttribute(19),this.facts.demographics.phoneNumber=this.patient.getAttribute(12),this.facts.demographics.gender=this.patient.getGender(),this.facts.demographics.birthdate=this.patient.getBirthdate(),this.facts.demographics.ancestryDistrict=this.patient.getHomeDistrict(),this.facts.demographics.ancestryTA=this.patient.getHomeTA(),this.facts.demographics.ancestryVillage=this.patient.getHomeVillage(),this.facts.demographics.currentDistrict=this.patient.getCurrentDistrict(),this.facts.demographics.currentTA=this.patient.getCurrentTA(),this.facts.demographics.currentVillage=this.patient.getCurrentVillage(),this.facts.identifiers=this.patient.getIdentifiers().map((function(e){return e.type.name}))},setGlobalPropertyFacts:function(){var e=this;return Object(Y["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Ee["a"].get("IS_DDE_ENABLED");case 2:if(e.facts.globalProperties.ddeEnabled=t.sent,e.useDDE=e.facts.globalProperties.ddeEnabled,"ART"!==e.app.applicationName){t.next=8;break}return t.next=7,Ee["a"].get("IS_ART_FILING_NUMBER_ENABLED");case 7:e.facts.globalProperties.useFilingNumbers=t.sent;case 8:case"end":return t.stop()}}),t)})))()},setAncFacts:function(){var e=this;return Object(Y["a"])(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n=new De(e.patient.getID(),-1),t.next=3,n.canInitiateNewPregnancy();case 3:return e.facts.anc.canInitiateNewPregnancy=t.sent,t.next=6,n.pregnancyIsOverdue();case 6:return e.facts.anc.currentPregnancyIsOverdue=t.sent,t.next=9,n.getLmpInMonths();case 9:e.facts.anc.lmpMonths=t.sent;case 10:case"end":return t.stop()}}),t)})))()},buildDDEDiffs:function(e){var t=[],n={givenName:{label:"First Name",ref:"given_name"},familyName:{label:"Last Name",ref:"family_name"},birthdate:{label:"Birthdate",ref:"birthdate"},gender:{label:"Gender",ref:"gender"},phoneNumber:{label:"Phone number",ref:"phone_number"},ancestryDistrict:{label:"Home District",ref:"home_district"},ancestryTA:{label:"Home TA",ref:"home_traditional_authority"},ancestryVillage:{label:"Home Village",ref:"home_village"},currentDistrict:{label:"Current District",ref:"current_district"},currentTA:{label:"Current TA",ref:"current_traditional_authority"},currentVillage:{label:"Current Village",ref:"current_village"}},r=0,a={indexes:[],class:"his-empty-set-color"};for(var i in n){var c=this.facts.demographics[i],o=c;n[i].ref in e&&(a.indexes.push(r),c=e[n[i].ref].local,o=e[n[i].ref].remote),t.push([n[i].label,c,o]),++r}return{comparisons:t,rowColors:[a]}},setProgramFacts:function(){var e=this;return Object(Y["a"])(regeneratorRuntime.mark((function t(){var n,r,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.facts.programName=e.app.applicationName,t.prev=1,e.program=new Z["a"](e.patient.getID()),t.next=5,e.program.getProgram();case 5:return e.programInfo=t.sent,Ee["a"].set("PATIENT_PROGRAM",e.programInfo),n=e.programInfo,r=n.program,a=n.outcome,e.facts.enrolledInProgram=!(Object(ae["d"])(r)||r.match(/n\/a/i)),e.facts.currentOutcome=a,e.facts.userRoles=J["a"].getUserRoles().map((function(e){return e.role})),t.next=13,de["a"].getFirstValueCoded(e.patient.getID(),"Type of patient");case 13:if(t.t0=t.sent,t.t0){t.next=16;break}t.t0="N/A";case 16:e.facts.patientType=t.t0,t.next=22;break;case 19:t.prev=19,t.t1=t["catch"](1),console.error("".concat(t.t1));case 22:case"end":return t.stop()}}),t,null,[[1,19]])})))()},setDDEFacts:function(){var e=this;return Object(Y["a"])(regeneratorRuntime.mark((function t(){var n,r,a,i,c,o,s,u;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.ddeInstance.getLocalAndRemoteDiffs();case 3:if(t.t1=n=t.sent,t.t0=null===t.t1,t.t0){t.next=7;break}t.t0=void 0===n;case 7:if(!t.t0){t.next=11;break}t.t2=void 0,t.next=12;break;case 11:t.t2=n.diff;case 12:r=t.t2,e.facts.dde.localDiffs=e.ddeInstance.formatDiffValuesByType(r,"local"),a=e.buildDDEDiffs(r),i=a.comparisons,c=a.rowColors,e.facts.dde.diffRows=i,e.facts.dde.diffRowColors=c,r.npid&&(o=r.npid,s=o.local,u=o.remote,e.facts.dde.localNpidDiff=s,e.facts.dde.remoteNpidDiff=u,delete r.npid),e.facts.dde.hasDemographicConflict=!Object(W["isEmpty"])(r),t.next=24;break;case 21:t.prev=21,t.t3=t["catch"](0),console.warn(t.t3);case 24:case"end":return t.stop()}}),t,null,[[0,21]])})))()},setVoidedNpidFacts:function(e){var t=this;return Object(Y["a"])(regeneratorRuntime.mark((function n(){var r,a,i;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return r=["Name","Birthdate","Gender","Ancestry Home","CurrentID","Action"],a=[],n.next=4,t.ddeInstance.findVoidedIdentifier(e);case 4:i=n.sent,i&&(a=i.map((function(e){var n=new Q["a"](e);return[n.getFullName(),n.getBirthdate(),n.getGender(),n.getHomeTA(),n.getNationalID(),{type:"button",name:"Select",action:function(){var e=Object(Y["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(n.patientIsComplete()){e.next=4;break}return e.abrupt("return",t.$router.push("/patient/registration?edit_person=".concat(n.getID())));case 4:if(!n.getNationalID().match(/unknown/i)&&n.getDocID()){e.next=17;break}return e.prev=5,e.next=8,n.assignNpid();case 8:return e.next=10,t.findAndSetPatient(n.getID(),void 0);case 10:return e.abrupt("return",te["modalController"].dismiss());case 13:return e.prev=13,e.t0=e["catch"](5),Object(ee["e"])("Failed to assign npid to patient with unknown npid."),e.abrupt("return",console.error(e.t0));case 17:return e.next=19,te["modalController"].dismiss();case 19:return e.next=21,t.findAndSetPatient(void 0,n.getNationalID());case 21:case"end":return e.stop()}}),e,null,[[5,13]])})));function r(){return e.apply(this,arguments)}return r}()}]})),t.facts.dde.voidedNpids.cols=r,t.facts.dde.voidedNpids.rows=a);case 6:case"end":return n.stop()}}),n)})))()},onEvent:function(e){var t=arguments,n=this;return Object(Y["a"])(regeneratorRuntime.mark((function r(){var a,i,c,o,s,u,l;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:a=t.length>1&&void 0!==t[1]?t[1]:{},i=Object(q["a"])(n.facts,ie,"",e,"weight"),r.t0=regeneratorRuntime.keys(i);case 3:if((r.t1=r.t0()).done){r.next=18;break}if(c=r.t1.value,s=i[c],null===s||void 0===s||null===(o=s.actions)||void 0===o||!o.alert){r.next=16;break}return r.next=9,null===s||void 0===s||null===(u=s.actions)||void 0===u?void 0:u.alert(n.facts);case 9:return l=r.sent,r.next=12,n.runFlowState(l);case 12:if(r.t2=r.sent,r.t3=H.FORCE_EXIT,r.t2!==r.t3){r.next=16;break}return r.abrupt("return",!1);case 16:r.next=3;break;case 18:"function"===typeof a&&a();case 19:case"end":return r.stop()}}),r)})))()},onInitiateNewAncPregnancy:function(){var e=this;return Object(Y["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(ee["a"])("Are you sure you want to initiate new pregnancy?");case 2:if(!t.sent){t.next=12;break}return t.next=5,e.initiateNewAncPregnancy();case 5:if(!t.sent){t.next=11;break}e.facts.anc.canInitiateNewPregnancy=!1,e.facts.anc.currentPregnancyIsOverdue=!1,e.nextTask(),t.next=12;break;case 11:Object(ee["e"])("Unable to initiate new pregnancy");case 12:case"end":return t.stop()}}),t)})))()},initiateNewAncPregnancy:function(){return new De(this.patient.getID(),-1).createNewPregnancyStatus()},runFlowState:function(e){var t=this;return Object(Y["a"])(regeneratorRuntime.mark((function n(){var r;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(r={},r[H.GO_HOME]=function(){return t.$router.push("/"),H.FORCE_EXIT},r[H.GO_BACK]=function(){return t.$router.back(),H.FORCE_EXIT},r[H.ENROLL]=function(){return t.program.enrollProgram()},r[H.ACTIVATE_FN]=function(){return t.$router.push("/art/filing_numbers/".concat(t.patient.getID(),"?assign=true")),H.FORCE_EXIT},r[H.UPDATE_DMG]=function(){return t.$router.push("/patient/registration?edit_person=".concat(t.patient.getID())),H.FORCE_EXIT},r[H.PRINT_NPID]=Object(Y["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.ddeInstance.printNpid(t.patient.getID());case 2:return e.next=4,Object(pe["a"])(1800);case 4:return e.abrupt("return",H.CONTINUE);case 5:case"end":return e.stop()}}),e)}))),r[H.CREATE_NPID_WITH_REMOTE_DIFF]=Object(Y["a"])(regeneratorRuntime.mark((function e(){var n,r,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(n=t.facts.dde.remoteNpidDiff,e.prev=1,e.t0=n,!e.t0){e.next=7;break}return e.next=6,t.ddeInstance.createNPID(n);case 6:e.t0=e.sent;case 7:if(!e.t0){e.next=19;break}return t.facts.scannedNpid=n,t.facts.currentNpid=n,t.facts.dde.localNpidDiff=n,Object(ee["d"])("Remote NPID successfully updated"),e.next=14,Object(pe["a"])(300);case 14:return e.next=16,t.ddeInstance.printNpid();case 16:return e.next=18,t.findAndSetPatient(void 0,n);case 18:return e.abrupt("return",H.FORCE_EXIT);case 19:e.next=39;break;case 21:if(e.prev=21,e.t1=e["catch"](1),r=/Identifier already assigned to another patient/i,!(e.t1 instanceof se["a"]&&e.t1.errors.join(",").match(r))){e.next=38;break}return e.next=27,t.ddeInstance.reassignNpid(t.patient.getDocID());case 27:if(a=e.sent,!a){e.next=38;break}return t.patient=new Q["a"](a),Object(ee["d"])("Patient has been reassigned NPID"),e.next=33,Object(pe["a"])(300);case 33:return e.next=35,t.ddeInstance.printNpid();case 35:return e.next=37,t.findAndSetPatient(void 0,t.patient.getNationalID());case 37:return e.abrupt("return",H.FORCE_EXIT);case 38:Object(ee["c"])("Unable to assign NPID: ".concat(e.t1));case 39:case"end":return e.stop()}}),e,null,[[1,21]])}))),r[H.ASSIGN_NPID]=Object(Y["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.patient.assignNpid();case 2:return e.next=4,new ce["a"](t.patient.getID()).printNidLbl();case 4:return e.next=6,Object(pe["a"])(300);case 6:return e.next=8,t.reloadPatient();case 8:return e.abrupt("return",H.FORCE_EXIT);case 9:case"end":return e.stop()}}),e)}))),r[H.INITIATE_ANC_PREGNANCY]=Object(Y["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.initiateNewAncPregnancy();case 2:return e.abrupt("return",H.CONTINUE);case 3:case"end":return e.stop()}}),e)}))),r[H.VIEW_MERGE_AUDIT_FOR_NPID]=function(){return t.$router.push("/merge/rollback/".concat(t.facts.scannedNpid)),H.FORCE_EXIT},r[H.RESOLVE_DUPLICATE_NPIDS]=function(){return t.$router.push("/npid/duplicates/".concat(t.facts.scannedNpid)),H.FORCE_EXIT},r[H.REFRESH_DDE_DEMOGRAPHICS]=Object(Y["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.ddeInstance.refreshDemographics();case 2:return e.next=4,t.reloadPatient();case 4:return e.abrupt("return",H.FORCE_EXIT);case 5:case"end":return e.stop()}}),e)}))),r[H.ADD_AS_DRUG_REFILL]=Object(Y["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.createPatientType("Drug Refill");case 2:return e.abrupt("return",H.CONTINUE);case 3:case"end":return e.stop()}}),e)}))),r[H.ADD_AS_NEW_PATIENT]=Object(Y["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.createPatientType("New patient");case 2:return e.abrupt("return",H.CONTINUE);case 3:case"end":return e.stop()}}),e)}))),r[H.ADD_AS_EXTERNAL_CONSULTATION]=Object(Y["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.createPatientType("External consultation");case 2:return e.abrupt("return",H.CONTINUE);case 3:case"end":return e.stop()}}),e)}))),r[H.SEARCH_BY_NAME]=function(){return t.$router.push("/patient/registration"),H.FORCE_EXIT},r[H.UPDATE_LOCAL_DDE_DIFFS]=Object(Y["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.ddeInstance.updateLocalDifferences(t.facts.dde.localDiffs);case 2:return e.next=4,t.reloadPatient();case 4:return e.abrupt("return",H.FORCE_EXIT);case 5:case"end":return e.stop()}}),e)}))),!(e in r)){n.next=27;break}return n.prev=18,n.next=21,r[e]();case 21:return n.abrupt("return",n.sent);case 24:n.prev=24,n.t0=n["catch"](18),Object(ee["c"])("".concat(n.t0));case 27:return n.abrupt("return",e);case 28:case"end":return n.stop()}}),n,null,[[18,24]])})))()},createPatientType:function(e){var t=this;return Object(Y["a"])(regeneratorRuntime.mark((function n(){var r;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return r=new le["a"](t.patient.getID(),-1),n.next=3,r.createEncounter();case 3:return n.next=5,r.savePatientType(e);case 5:case"end":return n.stop()}}),n)})))()},onVoid:function(){var e=this;return Object(Y["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:Object(we["a"])(function(){var t=Object(Y["a"])(regeneratorRuntime.mark((function t(n){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Q["a"].voidPatient(e.patient.getID(),n);case 3:e.$router.push("/"),t.next=9;break;case 6:t.prev=6,t.t0=t["catch"](0),Object(ee["c"])("".concat(t.t0));case 9:case"end":return t.stop()}}),t,null,[[0,6]])})));return function(e){return t.apply(this,arguments)}}(),"void-modal");case 1:case"end":return t.stop()}}),t)})))()},nextTask:function(){var e=this;this.onEvent(M.ON_CONTINUE,(function(){Object(K["b"])(e.patient.getID(),e.$router)}))}}}),Re=(n("303d"),n("d959")),ye=n.n(Re);const je=ye()(Ie,[["render",G],["__scopeId","data-v-0492b742"]]);t["default"]=je},"76df":function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var r=n("1da1"),a=(n("96cf"),n("7f35"));function i(e){return c.apply(this,arguments)}function c(){return c=Object(r["a"])(regeneratorRuntime.mark((function e(t){var n,r,i=arguments;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=i.length>1&&void 0!==i[1]?i[1]:"action-sheet-modal",e.next=3,Object(a["c"])("Are you sure you want to void record?","Please specify reason for voiding this record",["Mistake/ Wrong Entry","Duplicate","System Error"],[{name:"Cancel",slot:"start"},{name:"Void",color:"danger",slot:"end",role:"action"}],"",n);case 3:if(r=e.sent,!r.selection||"Void"!==r.action){e.next=7;break}return e.next=7,t(r.selection);case 7:case"end":return e.stop()}}),e)}))),c.apply(this,arguments)}},afc1:function(e,t,n){},c21d:function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));n("caad"),n("d3b7"),n("4e82"),n("d81d"),n("b64b"),n("99af"),n("b0c0"),n("a4d3"),n("e01a");function r(e,t){var n=[],r=[-1,"",null,void 0];for(var a in t)if(a in e){var i=e[a];r.includes(i)?n.push(!1):n.push(t[a](i,e))}return n.every(Boolean)}function a(e){return e.sort((function(e,t){return e.priority&&t.priority&&e.priority<t.priority?-1:1}))}function i(e){return e.sort((function(e,t){return e.weight&&t.weight&&e.weight>t.weight?-1:1}))}function c(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",c=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"",o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"priority",s=[];for(var u in t){var l=t[u],d=[l.target&&n&&l.target!=n,l.targetEvent&&c&&l.targetEvent!=c];d.some(Boolean)||r(e,l.conditions)&&(l.title=u,l.description&&(l.description.text=l.description.info(e)),s.push(l))}return"priority"===o?a(s):i(s)}}}]);
//# sourceMappingURL=chunk-4434c4fe.ee6292b4.js.map