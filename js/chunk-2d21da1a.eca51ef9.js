(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d21da1a"],{d1b9:function(t,e,s){"use strict";s.r(e);var a=s("7a23");function n(t,e,s,n,i,o){const r=Object(a["resolveComponent"])("his-standard-form");return Object(a["openBlock"])(),Object(a["createBlock"])(r,{fields:t.fields,onFinishAction:t.onFinish,skipSummary:!0,cancelDestinationPath:t.cancelDestination},null,8,["fields","onFinishAction","cancelDestinationPath"])}var i=s("d95e"),o=s("7920"),r=s("2706"),c=s("7365"),l=s("cc6f");class d extends l["a"]{constructor(t,e){super(t,156,e)}getAssessmentValues(){return l["a"].getConceptsByCategory("fast_track")}}var u=s("b5e4"),h=Object(a["defineComponent"])({mixins:[c["a"]],components:{HisStandardForm:o["a"]},data:()=>({fields:[],fastTrack:{},options:[],values:[],gender:null}),watch:{ready:{async handler(t){t&&this.init(this.patient)},immediate:!0}},methods:{async onFinish(t){const e=await this.fastTrack.createEncounter();if(!e)return Object(u["e"])("Unable to create fast track encounter");{const e=await this.buildObs(t),s=await this.fastTrack.saveObservationList(e);if(!s)return Object(u["e"])("Unable to save patient observations");Object(u["d"])("Observations and encounter created!"),this.nextTask()}},async init(t){this.gender=t.getGender(),this.fastTrack=new d(t.getID(),this.providerID),this.values=await this.getYesNo(),this.options=await this.getOptions(),this.fields=this.getFields()},async buildObs(t){const e=[];return e.push(await this.fastTrack.buildValueCoded("Assess for fast track",t.ft_assessment.value)),t.ft_questions&&(await t.ft_questions.forEach(async t=>{e.push(await this.fastTrack.buildValueCoded(t.label,t.value))}),e.push(await this.fastTrack.buildValueCoded("Fast track",t.book_client.value))),e},async getOptions(){const t=this.getYesNo(),e=await this.fastTrack.getAssessmentValues("fast_track").map(e=>({label:e.name,value:"",other:{values:t}}));return"M"===this.gender?e.filter(t=>!t.label.match(/Pregnant/i)):e},getYesNo(){return[{label:"yes",value:"Yes"},{label:"no",value:"No"}]},getFields(){return[{id:"ft_assessment",helpText:"Assess client for FT",type:i["b"].TT_SELECT,validation:t=>r["a"].required(t),options:()=>this.getYesNo()},{id:"ft_questions",helpText:"Assess client for FT",type:i["b"].TT_MULTIPLE_YES_NO,condition(t){return"Yes"===t.ft_assessment.value},validation:t=>r["a"].anyEmpty(t),options:()=>this.options},{id:"book_client",helpText:"Select type of visit to book",type:i["b"].TT_SELECT,condition(t){return"Yes"===t.ft_assessment.value},validation:t=>r["a"].required(t),options:()=>[{label:"Fast track",value:"No"},{label:"Normal visit",value:"No"}]}]}}}),f=s("6b0d"),b=s.n(f);const p=b()(h,[["render",n]]);e["default"]=p}}]);
//# sourceMappingURL=chunk-2d21da1a.eca51ef9.js.map