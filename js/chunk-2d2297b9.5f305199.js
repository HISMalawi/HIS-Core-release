(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d2297b9"],{de46:function(e,t,r){"use strict";r.r(t);var a=r("7a23");function n(e,t,r,n,o,s){var i=Object(a["resolveComponent"])("report-template");return Object(a["openBlock"])(),Object(a["createBlock"])(i,{title:e.title,period:e.period,rows:e.rows,fields:e.fields,columns:e.columns,canExportCsv:!0,canExportPDf:!0,reportReady:e.reportReady,onReportConfiguration:e.onPeriod},null,8,["title","period","rows","fields","columns","reportReady","onReportConfiguration"])}var o=r("2909"),s=r("1da1"),i=(r("99af"),r("d3b7"),r("159b"),r("d81d"),r("4de4"),r("a15b"),r("96cf"),r("1497")),u=r("44e3"),d=r("4ba2"),c=r("ad8d"),l=r("d95e"),p=r("9ceb"),h=Object(a["defineComponent"])({mixins:[u["a"]],components:{ReportTemplate:d["a"]},data:function(){return{title:"Tests requested",rows:[],cohort:[],reportType:"",reportReady:!1,columns:[],patientLevelColumns:[[p["a"].thTxt("ARV#"),p["a"].thTxt("Gender"),p["a"].thTxt("Birthdate"),p["a"].thTxt("Ordered Date"),p["a"].thTxt("Test"),p["a"].thTxt("Reason")]],disaggregatedColumns:[p["a"].thTxt("Age group"),p["a"].thTxt("Gender")]}},created:function(){this.report=new i["a"],this.fields=this.getFormFields()},methods:{onPeriod:function(e){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function r(){var a,n;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:a=e.type,n=e.tests,t.reportReady=!0,t.rows=[],t.period=t.report.getDateIntervalPeriod(),t.reportType=a.value,"disaggregated"===t.reportType?t.setDisaggregatedRows(n):"patient_level"===t.reportType&&t.setPatientLevelRows(n);case 6:case"end":return r.stop()}}),r)})))()},getFormFields:function(){var e=this;return[].concat(Object(o["a"])(this.getDateDurationFields()),[{id:"tests",helpText:"Test(s) Requested",type:l["b"].TT_MULTIPLE_SELECT,options:function(){var t=Object(s["a"])(regeneratorRuntime.mark((function t(r,a,n){var o,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.report.setStartDate(n.start_date),e.report.setEndDate(n.end_date),t.next=4,e.report.getSamplesDrawnReport();case 4:return o=t.sent,s=e.buildAvailableTests(o),t.abrupt("return",e.buildAvailableTestOptions(s));case 7:case"end":return t.stop()}}),t)})));function r(e,r,a){return t.apply(this,arguments)}return r}()},{id:"type",helpText:"Select report type",type:l["b"].TT_SELECT,options:function(){return[{label:"Disaggregated",value:"disaggregated"},{label:"Patient level",value:"patient_level"}]}}])},buildAvailableTests:function(e){var t={};return e.forEach((function(e){e.tests.forEach((function(r){r in t||(t[r]=[]),t[r].push(e)}))})),t},buildAvailableTestOptions:function(e){var t=[];for(var r in e){var a=e[r];t.push({label:r,value:a.length,other:a})}return t},setDisaggregatedRows:function(e){var t=this,r=[],a=[];this.columns=[this.disaggregatedColumns.concat(e.map((function(e){return p["a"].thTxt(e.label)})))];var n=function(n){var o=c["a"][n],s=[p["a"].td(o),p["a"].td("M")],i=[p["a"].td(o),p["a"].td("F")];e.forEach((function(e){var r=e.other,a=function(e){return r.filter((function(t){return t.gender===e&&t.age_group===o})).map((function(e){return e.patient_id}))};s.push(t.drill(a("M"),"Males of ".concat(o))),i.push(t.drill(a("F"),"Females of ".concat(o)))})),r.push(s),a.push(i),t.rows=[].concat(a,r)};for(var o in c["a"])n(o)},setPatientLevelRows:function(e){var t=this;this.columns=this.patientLevelColumns,e.forEach((function(e){var r=e.other;t.sortByArvNumber(r).forEach((function(e){t.rows.push([p["a"].td(e.arv_number),p["a"].td(e.gender),p["a"].tdDate(e.birthdate),p["a"].tdDate(e.order_date),p["a"].td(e.tests.join(",")),p["a"].td(e.reason_for_test)])}))}))}}}),f=r("d959"),v=r.n(f);const g=v()(h,[["render",n]]);t["default"]=g}}]);
//# sourceMappingURL=chunk-2d2297b9.5f305199.js.map