(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d0a36f9"],{"01bd":function(e,t,a){"use strict";a.r(t);var n=a("7a23");function o(e,t,a,o,c,i){const r=Object(n["resolveComponent"])("his-standard-form");return Object(n["openBlock"])(),Object(n["createBlock"])(r,{fields:e.fields,onFinishAction:e.onFinish,skipSummary:!0,cancelDestinationPath:e.cancelDestination},null,8,["fields","onFinishAction","cancelDestinationPath"])}var c=a("d95e"),i=a("7920"),r=a("2706"),s=a("7365"),l=a("b5e4"),u=a("ad60"),d=a("cc6f");class m extends d["a"]{constructor(e,t){super(e,184,t)}}var h=Object(n["defineComponent"])({mixins:[s["a"]],components:{HisStandardForm:i["a"]},data:()=>({outcome:{}}),watch:{patient:{async handler(){this.outcome=new m(this.patientID,this.providerID),this.fields=this.getFields()},deep:!0}},methods:{async onFinish(e){const t=await this.outcome.createEncounter();if(!t)return Object(l["e"])("Unable to create encounter");const a=u["a"].getProgramID(),n=await u["a"].getProgramWorkflows(u["a"].getProgramID()),o=e.select_referral_outcome.value,c={};n.forEach(e=>{e.states.forEach(e=>{const t=e.program_workflow_state_id,a=e.concept.concept_names[0].name;c[a]=t})});const i={location_id:u["a"].getLocationName(),state:c[o],date:u["a"].getSessionDate()},r=await u["a"].createState(this.patientID,a,i);if(!r)return Object(l["e"])("Unable to update state");const s=e.select_referral_outcome.value,d=e.select_cancer_treatment.value,m=await this.outcome.buildValueCoded("Outcome",s),h=[m];if(d.match(/cancer/)){const e=await this.outcome.buildValueCoded("Cancer treatment",d);h.push(e)}await this.outcome.saveObservationList(h);Object(l["d"])("Observations and encounter created!"),this.nextTask()},getFields(){return[{id:"select_referral_outcome",helpText:"Referral outcome",type:c["b"].TT_SELECT,validation:e=>r["a"].required(e),options:()=>[{label:"Cancer of cervix",value:"Cancer of cervix"},{label:"Continue follow-up",value:"Continue follow-up"},{label:"Discharged uninfected",value:"Discharged uninfected"},{label:"Treatment complete",value:"Treatment complete"}]},{id:"select_cancer_treatment",helpText:"Select cancer treatment",type:c["b"].TT_SELECT,validation:e=>r["a"].required(e),options:()=>[{label:"Surgery",value:"Surgery"},{label:"Palliative Care",value:"Palliative Care"},{label:"Discharged",value:"Discharged"},{label:"Other",value:"Other"}]}]}}}),p=a("6b0d"),b=a.n(p);const f=b()(h,[["render",o]]);t["default"]=f}}]);
//# sourceMappingURL=chunk-2d0a36f9.23609e95.js.map