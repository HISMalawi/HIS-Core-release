(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-f23a2b2c"],{"9e35":function(t,e,r){"use strict";r.r(e);var a=r("7a23");function s(t,e,r,s,n,o){const i=Object(a["resolveComponent"])("report-template"),d=Object(a["resolveComponent"])("ion-page");return Object(a["openBlock"])(),Object(a["createBlock"])(d,null,{default:Object(a["withCtx"])(()=>[Object(a["createVNode"])(i,{title:t.title,rows:t.rows,fields:t.fields,columns:t.columns,period:t.period,onReportConfiguration:t.init},null,8,["title","rows","fields","columns","period","onReportConfiguration"])]),_:1})}var n=r("552a"),o=r("9ceb"),i=r("44e3"),d=r("8a30"),c=r("ad9e"),p=Object(a["defineComponent"])({components:{ReportTemplate:n["a"],IonPage:d["D"]},mixins:[i["a"]],data:()=>({title:"Visit reasons",rows:[],reportService:{},columns:[[o["a"].thTxt(""),o["a"].thTxt("Reason"),o["a"].thTxt("Number")]]}),created(){this.fields=this.getDateDurationFields()},methods:{async init(t,e){this.reportService=new c["a"],this.reportService.setStartDate(e.start_date),this.reportService.setEndDate(e.end_date);const r=await this.reportService.getClinicReport("VISIT REASONS");this.rows=this.buildRows(r)},buildRows(t){const e=[],r={},a=["Initial Screening","Postponed treatment","One year subsequent check-up after treatment","Subsequent screening","Problem visit after treatment","Referral"];let s=1;for(const n of a){void 0==r[n]&&(r[n]=[]);for(const e of t){const t=e.reason,a=e.patient_id;t==n&&r[t].push(a)}}for(const n in r)e.push([o["a"].td(s++),o["a"].td(n),o["a"].td(r[n].length)]);return e}}}),u=r("6b0d"),h=r.n(u);const l=h()(p,[["render",s]]);e["default"]=l},ad9e:function(t,e,r){"use strict";r.d(e,"a",(function(){return n}));var a=r("1c74"),s=r("9283");class n extends a["e"]{constructor(){super(),this.endDate="",this.startDate="",this.date=a["e"].getSessionDate(),this.programID=a["e"].getProgramID()}getPepfarReport(t){return this.getReport("pepfar_cxca",{report_name:t})}getClinicReport(t){return this.getReport("screened_for_cxca",{report_name:t})}getDateIntervalPeriod(){return`${s["b"].toStandardHisDisplayFormat(this.startDate)} - ${s["b"].toStandardHisDisplayFormat(this.endDate)}`}setStartDate(t){this.startDate=t}setEndDate(t){this.endDate=t}getReportPeriod(){return this.startDate&&this.endDate?`${s["b"].toStandardHisDisplayFormat(this.startDate)} - ${s["b"].toStandardHisDisplayFormat(this.endDate)}`:"-"}getReport(t,e={}){return a["e"].getJson(t,this.buildRequest(e))}buildRequest(t={}){const e={date:this.date,program_id:this.programID};return this.startDate&&this.endDate&&(e["start_date"]=this.startDate,e["end_date"]=this.endDate),{...e,...t}}static getReportQuarters(t=4){const e=[];let r=s["b"].getCurrentYear();for(let a=0;a<t;++a)e.push({name:"Q4 "+r,start:r+"-10-01",end:r+"-12-31"}),e.push({name:"Q3 "+r,start:r+"-07-01",end:r+"-09-30"}),e.push({name:"Q2 "+r,start:r+"-04-01",end:r+"-06-30"}),e.push({name:"Q1 "+r,start:r+"-01-01",end:r+"-03-31"}),--r;return e}}}}]);
//# sourceMappingURL=chunk-f23a2b2c.cb592c9d.js.map