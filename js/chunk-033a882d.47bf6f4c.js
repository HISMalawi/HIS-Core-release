(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-033a882d"],{"8ee8":function(e,t,n){"use strict";n.d(t,"b",(function(){return p})),n.d(t,"a",(function(){return l}));var r=n("1da1"),a=n("d4ec"),i=n("bee2"),u=n("262e"),c=n("2caf"),s=(n("d81d"),n("d3b7"),n("159b"),n("96cf"),n("cc6f")),o=n("71c3"),d=n("2ef0"),f=n("9283"),p={"Once a day (OD)":1,"Twice a day (BD)":2,"Three a day (TDS)":3,"Four times a day (QID)":4,"Five times a day (5X/D)":5,"Six times a day (Q4HRS)":6,"In the morning (QAM)":.5,"Once a week (QWK)":.14,"Once a month":.03,"Twice a month":.071},l=function(e){Object(u["a"])(n,e);var t=Object(c["a"])(n);function n(e,r){return Object(a["a"])(this,n),t.call(this,e,25,r)}return Object(i["a"])(n,[{key:"ttvDrugObj",value:function(){return{drug_inventory_id:609,dose:.5,equivalent_daily_dose:.5,frequency:"Once a day (od)",start_date:this.date,auto_expire_date:this.date,instructions:"Once a day",units:"ml"}}},{key:"updateTTvOrder",value:function(){var e=Object(r["a"])(regeneratorRuntime.mark((function e(){var t,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.dispenseTTV();case 2:if(t=e.sent,Object(d["isEmpty"])(t)){e.next=6;break}return n=t[0].order_id,e.abrupt("return",o["a"].updateDispensationOrders([{order_id:n,quantity:1}]));case 6:throw"Unable to dispense";case 7:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"dispenseTTV",value:function(){return this.createOrders([this.ttvDrugObj()])}},{key:"createOrders",value:function(e){return o["a"].create({drug_orders:e,encounter_id:this.getEncounterID()})}},{key:"submitTreatment",value:function(){var e=Object(r["a"])(regeneratorRuntime.mark((function e(t){var n,r,a=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.createEncounter();case 2:return e.next=4,this.createOrders(t.map((function(e){return a.buildDrugOrderObj(e)})));case 4:return n=e.sent,r=new s["a"](this.patientID,54,this.providerID),e.next=8,r.createEncounter();case 8:return t.forEach((function(e){var t=p[e.frequency]*e.duration;n.forEach((function(n){n.drug_inventory_id===e.id&&(n.quantity=t)}))})),e.next=11,o["a"].updateDispensationOrders(n);case 11:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"buildDrugOrderObj",value:function(e){var t=new Date(this.date),n=t.setDate(t.getDate()+parseInt("".concat(e.duration))),r=e.dose||p[e.frequency],a=parseFloat(r)*p[e.frequency];return{drug_inventory_id:e.id,dose:r,equivalent_daily_dose:a,frequency:e.frequency,start_date:this.date,auto_expire_date:f["b"].toStandardHisFormat(new Date(n)),instructions:e.drug_name+":"+e.dose+" "+e.units+" "+e.frequency+"days",units:e.units}}}]),n}(s["a"])},dc52:function(e,t,n){"use strict";n.r(t);var r=n("7a23");function a(e,t,n,a,i,u){var c=Object(r["resolveComponent"])("his-standard-form"),s=Object(r["resolveComponent"])("ion-page");return Object(r["openBlock"])(),Object(r["createBlock"])(s,null,{default:Object(r["withCtx"])((function(){return[Object(r["createVNode"])(c,{fields:e.formFields,skipSummary:!0,onFinishAction:e.onFinish,cancelDestinationPath:e.cancelDestination},null,8,["fields","onFinishAction","cancelDestinationPath"])]})),_:1})}var i=n("1da1"),u=(n("ac1f"),n("466d"),n("96cf"),n("7365")),c=n("d95e"),s=n("d4ec"),o=n("bee2"),d=n("262e"),f=n("2caf"),p=n("cc6f"),l=function(e){Object(d["a"])(n,e);var t=Object(f["a"])(n);function n(e,r){return Object(s["a"])(this,n),t.call(this,e,54,r)}return Object(o["a"])(n,[{key:"saveNoDispensationObs",value:function(){return this.saveValueTextObs("Tetanus toxoid vaccine","Not dispensed")}}]),n}(p["a"]),h=n("8ee8"),v=n("8a30"),b=Object(r["defineComponent"])({components:{IonPage:v["D"]},mixins:[u["a"]],data:function(){return{formFields:[],service:{}}},watch:{ready:{handler:function(e){e&&(this.formFields=this.getFields())},immediate:!0}},methods:{onFinish:function(e,t){var n=this;return Object(i["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t["prescription"].action();case 2:n.nextTask();case 3:case"end":return e.stop()}}),e)})))()},getFields:function(){var e=this;return[{id:"prescription",helpText:"Prescription",type:c["b"].TT_YES_NO,validation:function(e){return e?null:["Value is required"]},computedValue:function(t){return t.match(/true/i)?{action:function(){var t=Object(i["a"])(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n=new h["a"](e.patientID,e.providerID),t.next=3,n.createEncounter();case 3:return t.next=5,n.updateTTvOrder();case 5:case"end":return t.stop()}}),t)})));function n(){return t.apply(this,arguments)}return n}()}:{action:function(){var t=Object(i["a"])(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n=new l(e.patientID,e.providerID),t.next=3,n.createEncounter();case 3:return t.next=5,n.saveNoDispensationObs();case 5:case"end":return t.stop()}}),t)})));function n(){return t.apply(this,arguments)}return n}()}},options:function(){return[{label:"TTV has been given today",values:[{label:"yes",value:"true"},{label:"no",value:"false"}]}]}}]}}}),m=n("6b0d"),O=n.n(m);const y=O()(b,[["render",a]]);t["default"]=y}}]);
//# sourceMappingURL=chunk-033a882d.47bf6f4c.js.map