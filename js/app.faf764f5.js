(function(e){function t(t){for(var n,o,s=t[0],c=t[1],l=t[2],d=0,u=[];d<s.length;d++)o=s[d],Object.prototype.hasOwnProperty.call(i,o)&&i[o]&&u.push(i[o][0]),i[o]=0;for(n in c)Object.prototype.hasOwnProperty.call(c,n)&&(e[n]=c[n]);p&&p(t);while(u.length)u.shift()();return r.push.apply(r,l||[]),a()}function a(){for(var e,t=0;t<r.length;t++){for(var a=r[t],n=!0,o=1;o<a.length;o++){var s=a[o];0!==i[s]&&(n=!1)}n&&(r.splice(t--,1),e=c(c.s=a[0]))}return e}var n={},o={app:0},i={app:0},r=[];function s(e){return c.p+"js/"+({"polyfills-core-js":"polyfills-core-js","polyfills-dom":"polyfills-dom"}[e]||e)+"."+{"chunk-008cd3d6":"116a20a6","chunk-02c995b5":"2002efe2","chunk-033a882d":"59378ef6","chunk-08704c19":"84c94e4d","chunk-09155df3":"383b4f5c","chunk-09162720":"e0708d85","chunk-097e0872":"46d6f809","chunk-0ced981c":"a6446075","chunk-0e93a01c":"f38abca4","chunk-17bf2c46":"11a21bac","chunk-1b5b3d32":"b579e468","chunk-1dbc15a2":"b279b1ac","chunk-1f3fa45a":"0188149f","chunk-21a76241":"41f3b7d4","chunk-25d83ca8":"3de6bfb7","chunk-297f5928":"1c9069ed","chunk-2c083610":"26e3d9be","chunk-2d0a36f9":"1f905518","chunk-2d0a3ffc":"f91d7cb3","chunk-2d0a4381":"5779b34b","chunk-2d0a463b":"180d7eff","chunk-2d0a4819":"00d2f276","chunk-2d0a4d35":"a72ea863","chunk-2d0aa91b":"6cad90cd","chunk-2d0aaf0b":"d3215f2d","chunk-2d0ab079":"be02e6ec","chunk-2d0ab2c7":"92fee47c","chunk-2d0b347d":"1234f174","chunk-2d0b5f74":"aa91d662","chunk-2d0c073f":"2a274d8d","chunk-2d0c4c38":"1938eea9","chunk-2d0c77ae":"73ef4d57","chunk-2d0cb702":"a2998043","chunk-2d0cc7e7":"f3bb05df","chunk-2d0ccf55":"e3968ea3","chunk-2d0cedec":"c9a51409","chunk-2d0cf669":"42e1f3f2","chunk-2d0d43da":"bbe11993","chunk-2d0d5c2c":"ec7355bc","chunk-2d0d6098":"d6cc7fe6","chunk-2d0d6ec8":"423df720","chunk-2d0d6f0e":"3e51394f","chunk-2d0da04a":"0d8bf6a3","chunk-2d0dd6ae":"a741864d","chunk-2d0de126":"42f9ad99","chunk-2d0de711":"1bffcf94","chunk-2d0deeb6":"534962a8","chunk-2d0e2514":"cafcad60","chunk-2d0e5812":"b22a16d9","chunk-2d0e8851":"62a407fb","chunk-2d0e8890":"126ee658","chunk-2d0f0d90":"4381d16d","chunk-2d208702":"83444ebe","chunk-2d2089fc":"c1f409a7","chunk-2d209573":"671331cb","chunk-2d20957d":"5be7184f","chunk-2d20ebf7":"54d27ead","chunk-2d2102e3":"e3e7b9d2","chunk-2d210591":"57dded2d","chunk-2d213189":"2a5e549d","chunk-2d216214":"828bff03","chunk-2d216257":"9647437a","chunk-2d218068":"48472bfd","chunk-2d21a0bf":"6a367cef","chunk-2d21da73":"2051f9e9","chunk-2d21e7b5":"07e1954f","chunk-2d21f489":"2d2494ba","chunk-2d226508":"58583ab4","chunk-2d226ccc":"075abc11","chunk-2d228961":"ba0503bb","chunk-2d229093":"6e1fe386","chunk-2d2297b9":"b41ac004","chunk-2d2304d2":"90afb700","chunk-2d237731":"54005b19","chunk-2d238053":"2ba5495e","chunk-30dd9750":"931c75d5","chunk-34f7327c":"a1f5492a","chunk-36aa428b":"5b7a2d4b","chunk-37f2300e":"4135ef2a","chunk-3b1a42fa":"627b3afe","chunk-3ed29de3":"b06e9870","chunk-405c9842":"7918b3e3","chunk-41c0f7a4":"8df89a1a","chunk-453836da":"075d2bf9","chunk-462c869e":"2bb01a8e","chunk-4734f41a":"c65c735e","chunk-504c4825":"1e6e5218","chunk-528252d8":"8d98b57c","chunk-541ea42d":"4a361441","chunk-54bbd082":"83ac21ba","chunk-56a17156":"aba9c34d","chunk-590f9388":"b1400dac","chunk-59d4c87c":"1764ccf2","chunk-5a8ac886":"1a665d62","chunk-6357648c":"aa3720f8","chunk-69eb8776":"b391b552","chunk-6b3e685a":"064b1d30","chunk-6d375f34":"d360aa0a","chunk-6d4bfe7a":"0e1b2eac","chunk-72632c0e":"9faaa247","chunk-73f2f583":"97097f39","chunk-7548ca2d":"759145d5","chunk-76ee8285":"cd23c74c","chunk-770d622c":"ebc5890f","chunk-77126da4":"60c42f0f","chunk-79f1dac7":"a171ac3f","chunk-858cd918":"1f62db04","chunk-8bb7f81e":"c8ce37bd","chunk-a1cd6b92":"b0ac38db","chunk-a279802a":"e19c1f5a","chunk-a8f00460":"e633ebb7","chunk-a9395c36":"48d41261","chunk-ae9bd206":"96763e11","chunk-b14c2520":"8f9beaab","chunk-b28e0d76":"a9e89e69","chunk-b5456e0e":"47879ca5","chunk-bed78cd2":"bb398091","chunk-c326e570":"6037f50a","chunk-c3f36d04":"99037b20","chunk-c53d26f0":"3257c5ac","chunk-c567cc2a":"2b28d48b","chunk-c7215964":"7c2c2dea","chunk-d0e8aa0a":"14b1d1c1","chunk-d2a20e8a":"89a456db","chunk-d56df1c4":"a876ea3f","chunk-d8413eac":"097c6eca","chunk-e1b2290e":"b23dd290","chunk-e7b46f9a":"219cc8bf","chunk-eaa2b130":"61a8b686","chunk-f858ef4e":"cd0777e9","chunk-fa4614d4":"a8736d86","polyfills-core-js":"ada8da51","polyfills-dom":"aae81a66","chunk-7460fd43":"3f055c56","chunk-2d0b33e3":"3ccf2dd4","chunk-2d0e19fd":"7fb760c7","chunk-2d0e528a":"5f2630bd","chunk-2d0f1533":"fda44b67","chunk-2d230101":"ea888524","chunk-2d2376e6":"d962d94b"}[e]+".js"}function c(t){if(n[t])return n[t].exports;var a=n[t]={i:t,l:!1,exports:{}};return e[t].call(a.exports,a,a.exports,c),a.l=!0,a.exports}c.e=function(e){var t=[],a={"chunk-08704c19":1,"chunk-17bf2c46":1,"chunk-1b5b3d32":1,"chunk-297f5928":1,"chunk-2c083610":1,"chunk-3b1a42fa":1,"chunk-453836da":1,"chunk-4734f41a":1,"chunk-56a17156":1,"chunk-6357648c":1,"chunk-6b3e685a":1,"chunk-6d4bfe7a":1,"chunk-73f2f583":1,"chunk-a1cd6b92":1,"chunk-a279802a":1,"chunk-b28e0d76":1,"chunk-b5456e0e":1,"chunk-bed78cd2":1,"chunk-c326e570":1,"chunk-c3f36d04":1,"chunk-c7215964":1,"chunk-e1b2290e":1,"chunk-e7b46f9a":1};o[e]?t.push(o[e]):0!==o[e]&&a[e]&&t.push(o[e]=new Promise((function(t,a){for(var n="css/"+({"polyfills-core-js":"polyfills-core-js","polyfills-dom":"polyfills-dom"}[e]||e)+"."+{"chunk-008cd3d6":"31d6cfe0","chunk-02c995b5":"31d6cfe0","chunk-033a882d":"31d6cfe0","chunk-08704c19":"d41614ec","chunk-09155df3":"31d6cfe0","chunk-09162720":"31d6cfe0","chunk-097e0872":"31d6cfe0","chunk-0ced981c":"31d6cfe0","chunk-0e93a01c":"31d6cfe0","chunk-17bf2c46":"d41614ec","chunk-1b5b3d32":"d41614ec","chunk-1dbc15a2":"31d6cfe0","chunk-1f3fa45a":"31d6cfe0","chunk-21a76241":"31d6cfe0","chunk-25d83ca8":"31d6cfe0","chunk-297f5928":"d41614ec","chunk-2c083610":"09c3dee7","chunk-2d0a36f9":"31d6cfe0","chunk-2d0a3ffc":"31d6cfe0","chunk-2d0a4381":"31d6cfe0","chunk-2d0a463b":"31d6cfe0","chunk-2d0a4819":"31d6cfe0","chunk-2d0a4d35":"31d6cfe0","chunk-2d0aa91b":"31d6cfe0","chunk-2d0aaf0b":"31d6cfe0","chunk-2d0ab079":"31d6cfe0","chunk-2d0ab2c7":"31d6cfe0","chunk-2d0b347d":"31d6cfe0","chunk-2d0b5f74":"31d6cfe0","chunk-2d0c073f":"31d6cfe0","chunk-2d0c4c38":"31d6cfe0","chunk-2d0c77ae":"31d6cfe0","chunk-2d0cb702":"31d6cfe0","chunk-2d0cc7e7":"31d6cfe0","chunk-2d0ccf55":"31d6cfe0","chunk-2d0cedec":"31d6cfe0","chunk-2d0cf669":"31d6cfe0","chunk-2d0d43da":"31d6cfe0","chunk-2d0d5c2c":"31d6cfe0","chunk-2d0d6098":"31d6cfe0","chunk-2d0d6ec8":"31d6cfe0","chunk-2d0d6f0e":"31d6cfe0","chunk-2d0da04a":"31d6cfe0","chunk-2d0dd6ae":"31d6cfe0","chunk-2d0de126":"31d6cfe0","chunk-2d0de711":"31d6cfe0","chunk-2d0deeb6":"31d6cfe0","chunk-2d0e2514":"31d6cfe0","chunk-2d0e5812":"31d6cfe0","chunk-2d0e8851":"31d6cfe0","chunk-2d0e8890":"31d6cfe0","chunk-2d0f0d90":"31d6cfe0","chunk-2d208702":"31d6cfe0","chunk-2d2089fc":"31d6cfe0","chunk-2d209573":"31d6cfe0","chunk-2d20957d":"31d6cfe0","chunk-2d20ebf7":"31d6cfe0","chunk-2d2102e3":"31d6cfe0","chunk-2d210591":"31d6cfe0","chunk-2d213189":"31d6cfe0","chunk-2d216214":"31d6cfe0","chunk-2d216257":"31d6cfe0","chunk-2d218068":"31d6cfe0","chunk-2d21a0bf":"31d6cfe0","chunk-2d21da73":"31d6cfe0","chunk-2d21e7b5":"31d6cfe0","chunk-2d21f489":"31d6cfe0","chunk-2d226508":"31d6cfe0","chunk-2d226ccc":"31d6cfe0","chunk-2d228961":"31d6cfe0","chunk-2d229093":"31d6cfe0","chunk-2d2297b9":"31d6cfe0","chunk-2d2304d2":"31d6cfe0","chunk-2d237731":"31d6cfe0","chunk-2d238053":"31d6cfe0","chunk-30dd9750":"31d6cfe0","chunk-34f7327c":"31d6cfe0","chunk-36aa428b":"31d6cfe0","chunk-37f2300e":"31d6cfe0","chunk-3b1a42fa":"d41614ec","chunk-3ed29de3":"31d6cfe0","chunk-405c9842":"31d6cfe0","chunk-41c0f7a4":"31d6cfe0","chunk-453836da":"d41614ec","chunk-462c869e":"31d6cfe0","chunk-4734f41a":"d41614ec","chunk-504c4825":"31d6cfe0","chunk-528252d8":"31d6cfe0","chunk-541ea42d":"31d6cfe0","chunk-54bbd082":"31d6cfe0","chunk-56a17156":"d41614ec","chunk-590f9388":"31d6cfe0","chunk-59d4c87c":"31d6cfe0","chunk-5a8ac886":"31d6cfe0","chunk-6357648c":"b2499045","chunk-69eb8776":"31d6cfe0","chunk-6b3e685a":"d41614ec","chunk-6d375f34":"31d6cfe0","chunk-6d4bfe7a":"af4f97f0","chunk-72632c0e":"31d6cfe0","chunk-73f2f583":"d41614ec","chunk-7548ca2d":"31d6cfe0","chunk-76ee8285":"31d6cfe0","chunk-770d622c":"31d6cfe0","chunk-77126da4":"31d6cfe0","chunk-79f1dac7":"31d6cfe0","chunk-858cd918":"31d6cfe0","chunk-8bb7f81e":"31d6cfe0","chunk-a1cd6b92":"d41614ec","chunk-a279802a":"9c71c637","chunk-a8f00460":"31d6cfe0","chunk-a9395c36":"31d6cfe0","chunk-ae9bd206":"31d6cfe0","chunk-b14c2520":"31d6cfe0","chunk-b28e0d76":"d41614ec","chunk-b5456e0e":"d41614ec","chunk-bed78cd2":"5a864c85","chunk-c326e570":"cbe9a55f","chunk-c3f36d04":"d41614ec","chunk-c53d26f0":"31d6cfe0","chunk-c567cc2a":"31d6cfe0","chunk-c7215964":"d41614ec","chunk-d0e8aa0a":"31d6cfe0","chunk-d2a20e8a":"31d6cfe0","chunk-d56df1c4":"31d6cfe0","chunk-d8413eac":"31d6cfe0","chunk-e1b2290e":"d41614ec","chunk-e7b46f9a":"011b4baf","chunk-eaa2b130":"31d6cfe0","chunk-f858ef4e":"31d6cfe0","chunk-fa4614d4":"31d6cfe0","polyfills-core-js":"31d6cfe0","polyfills-dom":"31d6cfe0","chunk-7460fd43":"31d6cfe0","chunk-2d0b33e3":"31d6cfe0","chunk-2d0e19fd":"31d6cfe0","chunk-2d0e528a":"31d6cfe0","chunk-2d0f1533":"31d6cfe0","chunk-2d230101":"31d6cfe0","chunk-2d2376e6":"31d6cfe0"}[e]+".css",i=c.p+n,r=document.getElementsByTagName("link"),s=0;s<r.length;s++){var l=r[s],d=l.getAttribute("data-href")||l.getAttribute("href");if("stylesheet"===l.rel&&(d===n||d===i))return t()}var u=document.getElementsByTagName("style");for(s=0;s<u.length;s++){l=u[s],d=l.getAttribute("data-href");if(d===n||d===i)return t()}var p=document.createElement("link");p.rel="stylesheet",p.type="text/css",p.onload=t,p.onerror=function(t){var n=t&&t.target&&t.target.src||i,r=new Error("Loading CSS chunk "+e+" failed.\n("+n+")");r.code="CSS_CHUNK_LOAD_FAILED",r.request=n,delete o[e],p.parentNode.removeChild(p),a(r)},p.href=i;var h=document.getElementsByTagName("head")[0];h.appendChild(p)})).then((function(){o[e]=0})));var n=i[e];if(0!==n)if(n)t.push(n[2]);else{var r=new Promise((function(t,a){n=i[e]=[t,a]}));t.push(n[2]=r);var l,d=document.createElement("script");d.charset="utf-8",d.timeout=120,c.nc&&d.setAttribute("nonce",c.nc),d.src=s(e);var u=new Error;l=function(t){d.onerror=d.onload=null,clearTimeout(p);var a=i[e];if(0!==a){if(a){var n=t&&("load"===t.type?"missing":t.type),o=t&&t.target&&t.target.src;u.message="Loading chunk "+e+" failed.\n("+n+": "+o+")",u.name="ChunkLoadError",u.type=n,u.request=o,a[1](u)}i[e]=void 0}};var p=setTimeout((function(){l({type:"timeout",target:d})}),12e4);d.onerror=d.onload=l,document.head.appendChild(d)}return Promise.all(t)},c.m=e,c.c=n,c.d=function(e,t,a){c.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},c.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},c.t=function(e,t){if(1&t&&(e=c(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(c.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)c.d(a,n,function(t){return e[t]}.bind(null,n));return a},c.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return c.d(t,"a",t),t},c.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},c.p="/",c.oe=function(e){throw console.error(e),e};var l=window["webpackJsonp"]=window["webpackJsonp"]||[],d=l.push.bind(l);l.push=t,l=l.slice();for(var u=0;u<l.length;u++)t(l[u]);var p=d;r.push([0,"chunk-vendors"]),a()})({0:function(e,t,a){e.exports=a("cd49")},"0011":function(e,t,a){"use strict";function n(e){try{return!!(""+e).match(/(^\s*$|undefined|null)/i)}catch(t){return!0}}function o(e){return!!(""+e).match(/(^\s*$|Unknown|None|undefined|null)/i)}function i(e){const t=["th","st","nd","rd"],a=e%100;return t[(a-20)%10]||t[a]||t[0]}function r(e){return e<10?"0"+e:e}a.d(t,"d",(function(){return n})),a.d(t,"c",(function(){return o})),a.d(t,"b",(function(){return i})),a.d(t,"a",(function(){return r}))},"0047":function(e,t,a){},"0207":function(e,t,a){"use strict";a("cc99")},"03b0":function(e,t,a){},"054e":function(e,t,a){"use strict";a("6547")},"068b":function(e,t,a){},"071f":function(e,t,a){},"0734":function(e,t,a){"use strict";var n=a("7a23");const o=Object(n["withScopeId"])("data-v-9daf63b8"),i=o((function(e,t,a,i,r,s){const c=Object(n["resolveComponent"])("ion-label"),l=Object(n["resolveComponent"])("ion-item"),d=Object(n["resolveComponent"])("ion-list"),u=Object(n["resolveComponent"])("ion-col"),p=Object(n["resolveComponent"])("ion-row"),h=Object(n["resolveComponent"])("ion-grid"),b=Object(n["resolveComponent"])("view-port");return Object(n["openBlock"])(),Object(n["createBlock"])(b,null,{default:o(()=>[Object(n["createVNode"])(d,{class:"view-port-content"},{default:o(()=>[Object(n["createVNode"])(h,null,{default:o(()=>[Object(n["createVNode"])(p,null,{default:o(()=>[(Object(n["openBlock"])(!0),Object(n["createBlock"])(n["Fragment"],null,Object(n["renderList"])(e.filtered,(t,a)=>(Object(n["openBlock"])(),Object(n["createBlock"])(u,{size:"4",key:a},{default:o(()=>[Object(n["createVNode"])("div",{class:["his-card clickable",{"active-card-color":e.selected===t.label}],onClick:a=>e.onselect(t)},[Object(n["createVNode"])(d,null,{default:o(()=>[(Object(n["openBlock"])(!0),Object(n["createBlock"])(n["Fragment"],null,Object(n["renderList"])(t.other.list,(e,t)=>(Object(n["openBlock"])(),Object(n["createBlock"])(l,{key:t},{default:o(()=>[Object(n["createVNode"])(c,null,{default:o(()=>[Object(n["createVNode"])("b",null,Object(n["toDisplayString"])(e.label),1)]),_:2},1024),Object(n["createVNode"])("span",{style:e.style||{}},Object(n["toDisplayString"])(e.value),5)]),_:2},1024))),128))]),_:2},1024)],10,["onClick"])]),_:2},1024))),128))]),_:1})]),_:1})]),_:1})]),_:1})}));var r=a("82a9"),s=a("2ef0"),c=Object(n["defineComponent"])({name:"HisSelect",mixins:[r["a"]],watch:{clear(){this.clearSelection()}},async activated(){this.$emit("onFieldActivated",this),this.listData=await this.options(this.fdata),await this.setDefaultValue()},methods:{async setDefaultValue(){if(this.defaultValue){const e=await this.defaultValue(this.fdata,this.cdata,this.selected);if(e){const t=Object(s["find"])(this.listData,{label:e})||Object(s["find"])(this.listData,{value:e});t&&this.onselect(t)}}},async onselect(e){if(this.selected=e.label,this.onValue){const t=await this.onValue(e,this);if(!t)return void(this.selected="")}this.onValueUpdate&&(this.listData=await this.onValueUpdate(e,this.listData)),this.$emit("onValue",e)}}}),l=(a("e2ee"),a("6b0d")),d=a.n(l);const u=d()(c,[["render",i],["__scopeId","data-v-9daf63b8"]]);t["a"]=u},"0a4e":function(e,t,a){},"0a79":function(e,t,a){"use strict";var n=a("7a23");const o=Object(n["withScopeId"])("data-v-7c293cad"),i=o((function(e,t,a,o,i,r){return Object(n["openBlock"])(),Object(n["createBlock"])("div",{id:"view-port",class:e.showFull?"":"half"},[Object(n["renderSlot"])(e.$slots,"default")],2)}));var r=Object(n["defineComponent"])({name:"ViewPort",props:{showFull:{type:Boolean,default:()=>!0}}}),s=(a("a4d3"),a("6b0d")),c=a.n(s);const l=c()(r,[["render",i],["__scopeId","data-v-7c293cad"]]);t["a"]=l},"0ac8":function(e,t,a){"use strict";a("c8b2")},"0ba8":function(e,t,a){"use strict";a.d(t,"a",(function(){return n}));var n,o=a("c0e2");t["b"]=new o["TinyEmitter"],function(e){e["SHOW_MODAL"]="show-modal"}(n||(n={}))},"0c79":function(e,t,a){},"0f25":function(e,t,a){"use strict";var n=a("7a23");function o(e,t,a,o,i,r){const s=Object(n["resolveComponent"])("ion-button"),c=Object(n["resolveComponent"])("ion-toolbar"),l=Object(n["resolveComponent"])("ion-footer");return Object(n["openBlock"])(),Object(n["createBlock"])(l,null,{default:Object(n["withCtx"])(()=>[Object(n["createVNode"])(c,{color:e.color},{default:Object(n["withCtx"])(()=>[(Object(n["openBlock"])(!0),Object(n["createBlock"])(n["Fragment"],null,Object(n["renderList"])(e.footerBtns,(e,t)=>Object(n["withDirectives"])((Object(n["openBlock"])(),Object(n["createBlock"])(s,{key:t,slot:e.slot,onClick:t=>e.onClick(e),color:e.color,class:e.styleClass,size:e.size},{default:Object(n["withCtx"])(()=>[Object(n["createTextVNode"])(Object(n["toDisplayString"])(e.name),1)]),_:2},1032,["slot","onClick","color","class","size"])),[[n["vShow"],e.visible]])),128))]),_:1},8,["color"])]),_:1})}var i=a("8a30"),r=Object(n["defineComponent"])({name:"HisNavFooter",data:()=>({footerBtns:[]}),created(){this.$emit("onFooterInstance",this)},props:{color:{type:String,default:"dark"},state:{type:Object},btns:{type:Object,required:!0}},components:{IonButton:i["d"],IonFooter:i["o"],IonToolbar:i["Q"]},watch:{state:{handler(e){e&&(this.footerBtns=this.footerBtns.map(t=>(t.visibleOnStateChange&&(t.visible=t.visibleOnStateChange(e)),t)))},deep:!0,immediate:!0},btns:{handler(e){e&&(this.footerBtns=[...e])},deep:!0,immediate:!0}}}),s=a("6b0d"),c=a.n(s);const l=c()(r,[["render",o]]);t["a"]=l},"0fa1":function(e,t,a){"use strict";a.d(t,"a",(function(){return v})),a.d(t,"b",(function(){return w})),a.d(t,"c",(function(){return N}));var n=a("7a23");const o=Object(n["withScopeId"])("data-v-433be29f");Object(n["pushScopeId"])("data-v-433be29f");const i=Object(n["createTextVNode"])("Select activities"),r=Object(n["createTextVNode"])("finish");Object(n["popScopeId"])();const s=o((function(e,t,a,s,c,l){const d=Object(n["resolveComponent"])("ion-title"),u=Object(n["resolveComponent"])("ion-toolbar"),p=Object(n["resolveComponent"])("ion-header"),h=Object(n["resolveComponent"])("ion-checkbox"),b=Object(n["resolveComponent"])("ion-col"),m=Object(n["resolveComponent"])("ion-row"),g=Object(n["resolveComponent"])("multi-column-view"),f=Object(n["resolveComponent"])("ion-content"),O=Object(n["resolveComponent"])("ion-button"),j=Object(n["resolveComponent"])("ion-footer");return Object(n["openBlock"])(),Object(n["createBlock"])(n["Fragment"],null,[Object(n["createVNode"])(p,null,{default:o(()=>[Object(n["createVNode"])(u,null,{default:o(()=>[Object(n["createVNode"])(d,null,{default:o(()=>[i]),_:1})]),_:1})]),_:1}),Object(n["createVNode"])(f,null,{default:o(()=>[Object(n["createVNode"])(g,{items:e.appActivities,numberOfColumns:2},{default:o(({entries:e})=>[(Object(n["openBlock"])(!0),Object(n["createBlock"])(n["Fragment"],null,Object(n["renderList"])(e,(e,t)=>(Object(n["openBlock"])(),Object(n["createBlock"])("div",{class:"his-card clickable",key:t,onClick:t=>e.selected=!e.selected},[Object(n["createVNode"])(m,null,{default:o(()=>[Object(n["createVNode"])(b,{size:"1"},{default:o(()=>[Object(n["createVNode"])(h,{modelValue:e.selected,"onUpdate:modelValue":t=>e.selected=t,onClick:t=>e.selected=!e.selected},null,8,["modelValue","onUpdate:modelValue","onClick"])]),_:2},1024),Object(n["createVNode"])(b,{class:"ion-text-center his-md-text"},{default:o(()=>[Object(n["createTextVNode"])(Object(n["toDisplayString"])(e.value),1)]),_:2},1024)]),_:2},1024)],8,["onClick"]))),128))]),_:1},8,["items"])]),_:1}),Object(n["createVNode"])(j,null,{default:o(()=>[Object(n["createVNode"])(u,null,{default:o(()=>[Object(n["createVNode"])(O,{onClick:e.postActivities,color:"success",disabled:0==e.selectedActivities.length,size:"large",style:{float:"right"}},{default:o(()=>[r]),_:1},8,["onClick","disabled"])]),_:1})]),_:1})],64)}));var c=a("8a30"),l=a("b5e4"),d=a("1c74"),u=a("2ef0"),p=a("92c1"),h=Object(n["defineComponent"])({name:"Modal",props:{activities:{type:Object,required:!0},property:{type:String,default:"activities"}},watch:{activities:{handler(e){e&&(this.appActivities=[...e],this.getActivities())},immediate:!0}},methods:{async getActivities(){const e=await d["e"].getJson("user_properties",{property:this.property});Object(u["isEmpty"])(e)?Object(l["e"])("Activities not found"):this.appActivities=this.appActivities.map(t=>(e.property_value.search(t.value)>=0&&(t.selected=!0),t))},async postActivities(){const e={property:this.property,property_value:this.selectedActivities},t=await d["e"].postJson("user_properties",e);t?await c["X"].dismiss():Object(l["e"])("Could not save activities")}},computed:{selectedActivities(){return this.appActivities.filter(e=>1==e.selected).map(e=>e.value).join(",")}},data(){return{content:"Content",appActivities:[]}},components:{IonButton:c["d"],IonContent:c["n"],IonHeader:c["q"],IonTitle:c["P"],IonToolbar:c["Q"],IonCheckbox:c["k"],MultiColumnView:p["a"]}}),b=(a("d77d"),a("6b0d")),m=a.n(b);const g=m()(h,[["render",s],["__scopeId","data-v-433be29f"]]);var f,O=g,j=a("50e7"),_=a("3e53");function v(e,t){sessionStorage.getItem(f.NextTask)||sessionStorage.setItem(f.NextTask,JSON.stringify({patientID:e,tasks:[]}));const a=JSON.parse(sessionStorage.getItem(f.NextTask));e===a.patientID?a.tasks.push(t):(a.patientID=e,a.tasks=[t]),sessionStorage.setItem(f.NextTask,JSON.stringify(a))}function y(e,t,a){const n=sessionStorage.getItem(f.NextTask);if(!n)return-1;const o=JSON.parse(n);if(e!=o.patientID)return-1;let i="",r=-1;return o.tasks.forEach((e,t)=>{e.from===a.name&&(i=e.to,r=t)}),i?(o.tasks.splice(r,1),sessionStorage.setItem(f.NextTask,JSON.stringify(o)),t.push(i),1):-1}async function w(e,t,a={}){try{if(!Object(u["isEmpty"])(a)){const n=y(e,t,a);if(-1!=n)return}const{name:n}=await j["a"].nextTask(e);if(n){const a=n.toLowerCase(),o=_["a"].getActiveApp();if(o){const n=o.primaryPatientActivites.filter(e=>e.name.toLowerCase()===a);if(n.length&&"function"===typeof n[0].action)return n[0].action({patientID:e,router:t})}return void t.push({name:a,params:{patient_id:e}})}}catch(n){console.warn(n)}t.push("/patient/dashboard/"+e)}async function N(e,t="activities"){const a=e.filter(e=>"boolean"===typeof e.availableOnActivitySelection&&e.availableOnActivitySelection||"boolean"!==typeof e.availableOnActivitySelection).map(e=>({value:e.workflowID||e.name,selected:!1})),n=await c["X"].create({component:O,cssClass:"large-modal",backdropDismiss:!1,componentProps:{activities:a,property:t}});n.present(),await n.onDidDismiss()}(function(e){e["NextTask"]="next-task"})(f||(f={}))},1028:function(e,t,a){"use strict";a("28c5")},"10be":function(e,t,a){"use strict";var n=a("7a23");const o=Object(n["withScopeId"])("data-v-7454247c");Object(n["pushScopeId"])("data-v-7454247c");const i={class:"keypad"};Object(n["popScopeId"])();const r=o((function(e,t,a,r,s,c){const l=Object(n["resolveComponent"])("ion-input"),d=Object(n["resolveComponent"])("ion-chip"),u=Object(n["resolveComponent"])("center"),p=Object(n["resolveComponent"])("base-keyboard"),h=Object(n["resolveComponent"])("ion-content");return Object(n["openBlock"])(),Object(n["createBlock"])(h,null,{default:o(()=>[Object(n["createVNode"])("div",i,[Object(n["createVNode"])(l,{value:e.value,disabled:!0,class:"keypad-input"},null,8,["value"]),Object(n["createVNode"])(u,null,{default:o(()=>[Object(n["createVNode"])(d,null,{default:o(()=>[Object(n["createTextVNode"])(Object(n["toDisplayString"])(e.title||"keypad"),1)]),_:1})]),_:1}),Object(n["createVNode"])(p,{btnSize:"96px",layout:e.keypad,onKeyPress:e.keypress},null,8,["layout","onKeyPress"])])]),_:1})}));a("caad");var s=a("c924"),c=a("3800"),l=a("2345"),d=a("fe70"),u=Object(n["defineComponent"])({components:{BaseKeyboard:s["a"]},props:{title:{type:String},preset:{type:String},onKeyPress:{type:Function,required:!0},strictNumbers:{type:Boolean,default:!1}},data:()=>({value:"0",keypad:c["d"]}),watch:{preset:{handler(e){e&&(this.value=e.toString())},immediate:!0}},methods:{async keypress(e){if(e.match(/done/i))await d["g"].dismiss(this.value);else if(this.strictNumbers){if(e.includes(".")&&this.value.includes("."))return;e.includes(".")||"0"!==this.value||(this.value=""),this.value=Object(l["a"])(e,this.value),this.value||(this.value="0"),""+parseInt(this.value)===this.value?this.onKeyPress(parseInt(this.value)):this.onKeyPress(this.value)}else this.value=Object(l["a"])(e,this.value),this.onKeyPress(this.value)}}}),p=(a("27f1"),a("6b0d")),h=a.n(p);const b=h()(u,[["render",r],["__scopeId","data-v-7454247c"]]);t["a"]=b},"113a":function(e,t,a){},"133b":function(e,t,a){"use strict";a("9582")},"133d":function(e,t,a){"use strict";a("d6d4")},1406:function(e,t,a){},1497:function(e,t,a){"use strict";a.d(t,"a",(function(){return o}));var n=a("5969");class o extends n["a"]{constructor(){super(),this.programID=23}getSamplesDrawnReport(){return this.getReport("samples_drawn")}getLabResultsReport(){return this.getReport("lab_test_results")}}},"14e3":function(e,t,a){},"14f6":function(e,t,a){"use strict";a("0047")},"156d":function(e,t,a){"use strict";a.d(t,"a",(function(){return n}));a("caad");var n,o=a("0ba8");(function(e){e["BEFORE_API_REQUEST"]="before_api_request",e["AFTER_API_REQUEST"]="after_api_request",e["ON_API_CRASH"]="un_reachable_api"})(n||(n={}));const i=(()=>{async function e(){const e=await fetch("/config.json");if(!e.ok)throw"Unable to retrieve configuration file/ Invalid config.json";try{const{apiURL:t,apiPort:a,apiProtocol:n,appConf:o,apps:i,thirdpartyApps:r}=await e.json();return sessionStorage.setItem("apiURL",t),sessionStorage.setItem("apiPort",a),sessionStorage.setItem("apiProtocol",n),sessionStorage.setItem("appConf",JSON.stringify(o)),sessionStorage.setItem("apps",JSON.stringify(i)),sessionStorage.setItem("thirdpartyApps",JSON.stringify(r)),{host:t,port:a,protocol:n,thirdpartyapps:r}}catch(t){throw console.error(t),'API Configuration file "/config.json" has errors. Please check console log for more details'}}function t(){const e=localStorage.apiURL,t=localStorage.apiPort,a=localStorage.apiProtocol,n=localStorage.thirdpartyApps;if(e&&t&&a)return{host:e,port:t,protocol:a,thirdpartyapps:n}}function a(){const e=sessionStorage.apiURL,t=sessionStorage.apiPort,a=sessionStorage.apiProtocol,n=sessionStorage.thirdpartyApps;if(e&&t&&a)return{host:e,port:t,protocol:a,thirdpartyapps:n}}function i(){const n=t(),o=a();return localStorage.useLocalStorage&&n?n:o||e()}async function r(e){const t=await i();return`${t.protocol}://${t.host}:${t.port}/api/v1/${e}`}function s(){return{Authorization:sessionStorage.apiKey,"Content-Type":"application/json"}}function c(e,t,a){localStorage.setItem("useLocalStorage","true"),localStorage.setItem("apiURL",t),localStorage.setItem("apiPort",a),localStorage.setItem("apiProtocol",e)}function l(e){e.forEach(t=>{e.includes(t)&&localStorage.removeItem(t)})}async function d(e,t){t={...t,mode:"cors"},"headers"in t||(t={...t,headers:s()});const a=await r(e);try{o["b"].emit(n.BEFORE_API_REQUEST,e);const i=await fetch(a,t);return o["b"].emit(n.AFTER_API_REQUEST,i),i}catch(i){console.error(i),(""+i).match(/NetworkError|Failed to fetch/i)?o["b"].emit(n.ON_API_CRASH,i):o["b"].emit(n.AFTER_API_REQUEST,{})}}const u=e=>d(e,{method:"GET"}),p=(e,t)=>d(e,{method:"POST",body:JSON.stringify(t)}),h=(e,t)=>d(e,{method:"DELETE",body:JSON.stringify(t)}),b=(e,t)=>d(e,{method:"PUT",body:JSON.stringify(t)}),m=()=>u("_health");return{get:u,post:p,put:b,remove:h,getConfig:i,setLocalStorage:c,removeOnly:l,expandPath:r,healthCheck:m,getFileConfig:e}})();t["b"]=i},1718:function(e,t,a){"use strict";function n(e){return"/assets/images/"+e}a.d(t,"a",(function(){return n}))},"177d":function(e,t,a){},1799:function(e,t,a){"use strict";var n=a("7a23");const o=Object(n["withScopeId"])("data-v-04a5a269");Object(n["pushScopeId"])("data-v-04a5a269");const i={class:"pagination"},r={class:"btn-group"},s=Object(n["createTextVNode"])(" First "),c=Object(n["createTextVNode"])(" Last ");Object(n["popScopeId"])();const l=o((function(e,t,a,l,d,u){const p=Object(n["resolveComponent"])("ion-button"),h=Object(n["resolveComponent"])("ion-icon");return Object(n["openBlock"])(),Object(n["createBlock"])("div",i,[Object(n["createVNode"])("div",r,[Object(n["createVNode"])(p,{color:"light",onClick:e.setFirstPage,disabled:e.isInFirstPage},{default:o(()=>[s]),_:1},8,["onClick","disabled"]),Object(n["createVNode"])(p,{color:"light",onClick:e.prevPage},{default:o(()=>[Object(n["createVNode"])(h,{icon:e.caretBack},null,8,["icon"])]),_:1},8,["onClick"]),(Object(n["openBlock"])(!0),Object(n["createBlock"])(n["Fragment"],null,Object(n["renderList"])(e.pages,e=>(Object(n["openBlock"])(),Object(n["createBlock"])(p,{onClick:t=>e.show(),color:e.isActive?"primary":"light",key:e.index},{default:o(()=>[Object(n["createTextVNode"])(Object(n["toDisplayString"])(e.name),1)]),_:2},1032,["onClick","color"]))),128)),Object(n["createVNode"])(p,{color:"light",onClick:e.nextPage},{default:o(()=>[Object(n["createVNode"])(h,{icon:e.caretForward},null,8,["icon"])]),_:1},8,["onClick"]),Object(n["createVNode"])(p,{color:"light",onClick:e.setLastPage,disabled:e.isInLastPage},{default:o(()=>[c]),_:1},8,["onClick","disabled"])]),Object(n["createVNode"])("h6",null,"Page "+Object(n["toDisplayString"])(e.currentPage+1)+" of "+Object(n["toDisplayString"])(e.totalPages),1)])}));var d=a("ff79"),u=a("8a30"),p=Object(n["defineComponent"])({components:{IonIcon:u["r"],IonButton:u["d"]},props:{maxVisibleButtons:{type:Number,required:!1,default:3},totalPages:{type:Number,required:!0}},emits:["onChangePage"],setup(e,{emit:t}){const a=Object(n["ref"])(0),o=Object(n["computed"])(()=>0===a.value),i=Object(n["computed"])(()=>a.value===e.totalPages),r=Object(n["computed"])(()=>0===a.value?0:a.value===e.totalPages?e.totalPages-e.maxVisibleButtons:a.value-1),s=e=>t("onChangePage",e),c=Object(n["computed"])(()=>{const t=[];for(let n=r.value;n<=Math.min(r.value+e.maxVisibleButtons-1,e.totalPages-1);n++)t.push({index:n,name:n+1,show:()=>a.value=n,isActive:n===a.value});return t});Object(n["watch"])(e,({totalPages:e})=>{"number"===typeof e&&(a.value=0)},{immediate:!0,deep:!0}),Object(n["watch"])(a,e=>s(e));const l=()=>a.value=0,u=()=>a.value=e.totalPages-1,p=()=>{a.value>0&&(a.value-=1)},h=()=>{a.value+1<e.totalPages&&(a.value+=1)};return{currentPage:a,caretBack:d["k"],caretForward:d["m"],startPage:r,pages:c,isInFirstPage:o,isInLastPage:i,nextPage:h,prevPage:p,setPage:s,setFirstPage:l,setLastPage:u}}}),h=(a("f099"),a("6b0d")),b=a.n(h);const m=b()(p,[["render",l],["__scopeId","data-v-04a5a269"]]);t["a"]=m},"18aa":function(e,t,a){},"18ab":function(e,t,a){},"19ff":function(e,t,a){},"1a5e":function(e,t,a){},"1afa":function(e,t,a){},"1b47":function(e,t,a){"use strict";var n=a("7a23");const o=Object(n["withScopeId"])("data-v-23709ba4"),i=o((function(e,t,a,i,r,s){const c=Object(n["resolveComponent"])("action-header"),l=Object(n["resolveComponent"])("ion-radio"),d=Object(n["resolveComponent"])("ion-label"),u=Object(n["resolveComponent"])("ion-item"),p=Object(n["resolveComponent"])("ion-radio-group"),h=Object(n["resolveComponent"])("ion-list"),b=Object(n["resolveComponent"])("ion-content"),m=Object(n["resolveComponent"])("action-footer");return Object(n["openBlock"])(),Object(n["createBlock"])(n["Fragment"],null,[Object(n["createVNode"])(c,{title:e.title,subtitle:e.subtitle,color:e.color},null,8,["title","subtitle","color"]),Object(n["createVNode"])(b,{class:"ion-text-center"},{default:o(()=>[Object(n["createVNode"])(h,null,{default:o(()=>[Object(n["createVNode"])(p,{value:e.activeLabel},{default:o(()=>[(Object(n["openBlock"])(!0),Object(n["createBlock"])(n["Fragment"],null,Object(n["renderList"])(e.list,(t,a)=>(Object(n["openBlock"])(),Object(n["createBlock"])(u,{class:"his-md-text",onClick:a=>e.onclick(t),key:a},{default:o(()=>[Object(n["createVNode"])(l,{slot:"start",value:t},null,8,["value"]),Object(n["createVNode"])(d,null,{default:o(()=>[Object(n["createTextVNode"])(Object(n["toDisplayString"])(t),1)]),_:2},1024)]),_:2},1032,["onClick"]))),128))]),_:1},8,["value"])]),_:1})]),_:1}),Object(n["createVNode"])(m,{buttons:e.buttons},null,8,["buttons"])],64)}));var r=a("8efc"),s=a("8a30"),c=a("b5e4"),l=Object(n["defineComponent"])({components:{IonList:s["y"],IonItem:s["w"],IonContent:s["n"],IonRadio:s["E"],IonRadioGroup:s["F"]},mixins:[r["a"]],data:()=>({activeLabel:""}),props:{list:{type:Object,required:!0}},methods:{onclick(e){this.activeLabel=e}},computed:{buttons(){return this.actionButtons.map(e=>({...e,onClick:async()=>e.role&&e.role.match(/default/i)?s["X"].dismiss({action:e.name}):e.role&&e.role.match(/action/i)&&!this.activeLabel?Object(c["e"])("Please select one of the options"):void await s["X"].dismiss({selection:this.activeLabel,action:e.name})}))}}}),d=(a("bdcb"),a("6b0d")),u=a.n(d);const p=u()(l,[["render",i],["__scopeId","data-v-23709ba4"]]);t["a"]=p},"1b4f":function(e,t,a){"use strict";a("2658")},"1bb3":function(e,t,a){"use strict";a("c54c")},"1bc0":function(e,t,a){},"1c3d":function(e,t,a){},"1c70":function(e,t,a){},"1c74":function(e,t,a){"use strict";a.d(t,"b",(function(){return d})),a.d(t,"d",(function(){return u})),a.d(t,"c",(function(){return p})),a.d(t,"a",(function(){return h})),a.d(t,"e",(function(){return g}));a("caad");var n=a("156d"),o=a("bef6"),i=a("3e53"),r=a("5d6c"),s=a("89b4"),c=a("f768"),l=a("2ef0");class d extends Error{constructor(e,t){super("ENTITY Error: "+e),this.entity=t}}class u extends Error{constructor(e,t){super(e),this.errors=t}}class p extends Error{constructor(e){super("RECORD NOT FOUND: "+e)}}class h extends Error{constructor(e,t){super(e),this.errors=t}}class b extends Error{constructor(e){super("API SERVICE_ERROR: "+e)}}class m extends Error{constructor(e){super("API ERROR: "+e)}}class g{static ajxGet(e,t={}){return n["b"].get(`${e}?${o["a"].parameterizeObjToString(t)}`)}static async getText(e){const t=await n["b"].get(e);if(t&&t.ok)return null===t||void 0===t?void 0:t.text()}static getJsonSWR(e,t={}){const a=`${e}?${o["a"].parameterizeObjToString(t)}`,{data:n,error:i}=Object(r["a"])(a,e=>this.getJson(e));return n}static async getJson(e,t={}){const a=`${e}?${o["a"].parameterizeObjToString(t)}`;return this.jsonResponseHandler(n["b"].get(a))}static async postJson(e,t){return this.jsonResponseHandler(n["b"].post(e,t))}static putJson(e,t){return this.jsonResponseHandler(n["b"].put(e,t))}static async void(e,t){return this.jsonResponseHandler(n["b"].remove(e,t))}static async getThirdpartyApps(){return JSON.parse((await n["b"].getConfig()).thirdpartyapps)}static async jsonResponseHandler(e){const t=await e;if(t){if([200,201].includes(t.status))return null===t||void 0===t?void 0:t.json();if(400===t.status){const{errors:e}=await(null===t||void 0===t?void 0:t.json());throw new h(t.statusText,e)}if(404===t.status){const{errors:e}=await(null===t||void 0===t?void 0:t.json());throw new p(e)}if(422===t.status){const{errors:e,entity:a}=await(null===t||void 0===t?void 0:t.json());throw new d(e,a)}if(502===t.status){const{errors:e}=await(null===t||void 0===t?void 0:t.json());throw new b(e||"Getway Error")}if(409===t.status){const{errors:e}=await(null===t||void 0===t?void 0:t.json());throw new u(t.statusText,e)}if(500===t.status)throw new m("An internal server errror has occured")}}static async getApiDate(){const e=await this.getJson("current_time");if(e)return e.date}static getApiVersion(){return sessionStorage.getItem("APIVersion")||"-"}static getActiveApp(){return i["a"].getActiveApp()||{}}static getUserID(){const e=sessionStorage.getItem("userID");return e?parseInt(e):null}static getUserLocation(){return sessionStorage.getItem("userLocation")}static getLocationName(){return sessionStorage.getItem("locationName")}static getSessionDate(){return sessionStorage.getItem("sessionDate")||""}static getCachedApiDate(){return sessionStorage.getItem("apiDate")}static async setSessionDate(e){const t=await this.getApiDate();if(t)return sessionStorage.setItem("apiDate",t),void sessionStorage.setItem("sessionDate",e);throw"Unable to set api date"}static async resetSessionDate(){const e=await this.getApiDate();if(e)return sessionStorage.removeItem("apiDate"),void sessionStorage.setItem("sessionDate",e);throw"Unable to reset session date"}static isBDE(){const e=sessionStorage.getItem("apiDate"),t=sessionStorage.getItem("sessionDate");return e&&e!=t}static getSiteUUID(){return sessionStorage.siteUUID||""}static getProgramName(){const e=this.getActiveApp();return"applicationName"in e?e.applicationName:""}static getSuspendedProgram(){return sessionStorage.getItem("suspendedApp")||""}static getProgramID(){const e=this.getActiveApp();return"programID"in e?e.programID:0}static getUserRoles(){const e=sessionStorage.getItem("userRoles");return e?JSON.parse(e):[]}static getUserName(){return sessionStorage.username}static getCoreVersion(){return localStorage.getItem(s["b"].CORE_VERSION)||"-"}static getAppVersion(){return localStorage.getItem(s["b"].CORE_VERSION)||"-"}static getFullVersion(){return`${this.getCoreVersion()} / ${this.getApiVersion()}`}static getAvailableApps(){const e=JSON.parse(sessionStorage.getItem("userPrograms")||"[]").map(e=>e["program_id"]),t=[];for(const a of JSON.parse(sessionStorage.getItem("apps")||"[]")){const n=Object(l["find"])(c["a"],{applicationName:a.name})||{},o=Object(l["isEmpty"])(e)||e.includes(n.programID);a.available&&!Object(l["isEmpty"])(n)&&t.push({...n,hasPriviledge:o})}return t}}g.delay=e=>new Promise(t=>setTimeout(t,e))},"1ea3":function(e,t,a){},"1eb2":function(e,t,a){},"20a4":function(e,t,a){"use strict";a("068b")},"20d7":function(e,t,a){},"221a":function(e,t,a){"use strict";a("b625")},2240:function(e,t,a){},2345:function(e,t,a){"use strict";function n(e,t,a){let n=t;if(e.match(/enter/i))return n+"\r\n";if(e.match(/clear/i))return"";if(n=e.match(/delete|del/i)?n.match(/unknown/i)||n.match(/n\/a/i)?"":n.substring(0,n.length-1):e.match(/space/i)?t+" ":e.match(/unknown/i)?"Unknown":e.match(/n\/a/i)?"N/A":n.match(/unknown/i)||n.match(/n\/a/i)?e:`${t}${e}`,"string"===typeof n&&n)switch(a){case"lowercase":n=n.toLowerCase();break;case"uppercase":n=n.toUpperCase();break;default:n=n.charAt(0).toUpperCase()+n.slice(1);break}return n}a.d(t,"a",(function(){return n}))},"236c":function(e,t,a){"use strict";a("c144")},"23e6":function(e,t,a){"use strict";a.d(t,"a",(function(){return g}));a("caad"),a("13d5");var n=a("7941");const o=(e,t)=>{const a=e.filter(e=>e.type.patient_identifier_type_id===t);return a.length>0?a[0].identifier:""};var i=a("7957"),r=a("8158"),s=a("1c74"),c=a("9283"),l=a("aee2"),d=a("2ef0"),u=a("0011");class p extends s["e"]{constructor(){super()}static create(e,t,a){return super.postJson("patient_identifiers",{identifier:a,identifier_type:t,patient_id:e})}}var h=a("4db7"),b=a("5a0c"),m=a.n(b);class g extends s["e"]{constructor(e){super(),this.patient=e}static mergePatients(e){return e["program_id"]=super.getProgramID(),super.postJson("dde/patients/merge",e)}static voidPatient(e,t=""){return super.void("patients/"+e,{reason:t})}static async search(e){return super.getJson("/search/patients",e)}static findByNpid(e,t={}){return super.getJson("search/patients/by_npid",{npid:e,...t})}static findByOtherID(e,t){return super.getJson("search/patients/by_identifier",{type_id:e,identifier:t})}static async findByID(e){return super.getJson("/patients/"+e)}static async assignNHID(e,t){return super.postJson(`/patients/${e}/npid`,{program_id:t})}static reassignARVNumber(e,t){return super.putJson("patient_identifiers/"+e,t)}static toPatient(e){return JSON.parse(e)}static patientToJson(e){return JSON.stringify(e)}static async getPatientVisits(e,t){const a=await super.getJson(`patients/${e}/visits`,{program_id:super.getProgramID(),include_defaulter_dates:1==t});return a?a.sort((e,t)=>new Date(e)<new Date(t)?1:0):[]}getWeightLossPercentageFromTrail(e){const[t,a]=e.map(e=>e.weight);if(!t||!a)return!1;const n=parseFloat(a)-parseFloat(t),o=n/a*100;return Math.round(o)}getGuardian(){return g.getJson(`people/${this.getID()}/relationships`)}assignNpid(){return g.assignNHID(this.getID(),s["e"].getProgramID())}createArvNumber(e){return p.create(this.getID(),4,e)}updateARVNumber(e){var t;const a=(null===(t=this.getIdentifiers().find(e=>"ARV Number"===e.type.name))||void 0===t?void 0:t.patient_identifier_id)||"";return g.reassignARVNumber(a,{identifier:e})}updateMWNationalId(e){return p.create(this.getID(),28,e)}isMale(){return["Male","M"].includes(this.getGender())}isFemale(){return["Female","F"].includes(this.getGender())}async isPregnant(){const e=await i["a"].getFirstObs(this.getID(),"Is patient pregnant");return e&&!!e.value_coded.match(/Yes/i)&&i["a"].obsInValidPeriod(e)}async hasPregnancyObsToday(){const e=await i["a"].getFirstObsDatetime(this.getID(),"Is patient pregnant");return e&&c["b"].toStandardHisFormat(e)===s["e"].getSessionDate()&&this.isFemale()}isChildBearing(){const e=this.getAge();return this.isFemale()&&e>=12&&e<=50}async getInitialObs(e){try{const t=await i["a"].getAll(this.getID(),e),a=t.length-1;return t[a].value_numeric}catch(t){console.error(t)}}async getInitialWeight(){return this.getInitialObs("weight")}async getRecentWeight(){const e=await r["a"].getConceptID("weight",!0),t=await i["a"].getObs({person_id:this.getID(),concept_id:e,page_size:1});return t.length>=1?t[0].value_numeric:-1}async getInitialHeight(){return this.getInitialObs("Height")}getRecentHeightObs(){return i["a"].getFirstObs(this.getID(),"Height")}async getRecentHeight(){const e=await r["a"].getConceptID("Height",!0),t=await i["a"].getObs({person_id:this.getID(),concept_id:e,page_size:1});return t.length>=1?t[0].value_numeric:-1}async getWeightHistory(){try{const e=await i["a"].getAll(this.getID(),"weight");return e.map(e=>({weight:e.value_numeric,date:e.obs_datetime}))}catch(e){return console.warn(e),[]}}async getCompleteTBTherapyHistory(){const e=await i["a"].getAll(this.getID(),"TB treatment history");return e.filter(e=>e.value_text.match(/Complete/i))}async getInitialBMI(){return this.getInitialObs("BMI")}async getBMI(){const e=await this.getRecentWeight(),t=await this.getRecentHeight();if(!e||!t)return 0;const a=this.isMale()?"M":"F",n=await l["a"].getBMI(e,t,a,this.getAge());return n}async calculateWeightPercentile(){const e=await this.getRecentWeight(),t=await this.getMedianWeightHeight();try{return parseFloat(e)/parseFloat(t["weight"])*100}catch(a){return 0}}async getMedianWeightHeight(){return s["e"].getJson(`patients/${this.getID()}/median_weight_height`,{date:s["e"].getSessionDate()})}getObj(){return this.patient}getID(){return this.patient.patient_id}getPatientInfoString(){const e=[this.getFullName(),`(${this.getGender()})`,this.getBirthdate(),", "+this.getCurrentDistrict()];return e.join(" ")}getCurrentDistrict(){return this.getAddresses().currentDistrict}getGender(){return this.patient.person.gender}getAge(){return m()(s["e"].getSessionDate()).diff(this.patient.person.birthdate,"years")}getAgeInMonths(){return 12*this.getAge()}getBirthdate(){return this.patient.person.birthdate}getGivenName(){return this.patient.person.names[0].given_name}getFamilyName(){return this.patient.person.names[0].family_name}normaliseName(e){return e.replace(/n\/a|unknown|null|undefined/gi,"").trim()}async printNationalID(){return new h["a"](this.getID()).printNidLbl()}getFullName(){try{const e=this.patient.person.names[0],t=e.given_name,a=e.family_name,n=e.middle_name;return this.normaliseName(`${t} ${n} ${a}`)}catch(e){return console.error(e),"Unknown"}}getDocID(){const e=this.findIdentifierByType("DDE person document ID");return e.match(/unknown/i)?null:e}getNationalID(){return this.findIdentifierByType("National id")}getMWNationalID(){return this.findIdentifierByType("Malawi National ID")}getArvNumber(){return this.findIdentifierByType("ARV Number")}hasActiveFilingNumber(){return this.hasIdentifierType("Filing number")}hasDormantFilingNumber(){return this.hasIdentifierType("Archived filing number")}hasIdentifierType(e){const t=Object(d["find"])(this.patient.patient_identifiers,{type:{name:e}});return!!t}getFilingNumber(){const e=this.patient.patient_identifiers.filter(e=>"Filing number"===e.type.name||"Archived filing number"===e.type.name);return Object(d["isEmpty"])(e)?"N/A":e[0].identifier}findIdentifierByType(e){return this.patient.patient_identifiers.filter(t=>t.type.name===e).sort((e,t)=>e["date_created"]<t["date_created"]?1:0).reduce((e,t)=>"Unknown"===e?t.identifier:e,"Unknown")}getIdentifiers(){return this.patient.patient_identifiers}getHomeDistrict(){return this.getAddresses().ancestryDistrict}getHomeTA(){return this.getAddresses().ancestryTA}getHomeVillage(){return this.getAddresses().ancestryVillage}getCurrentVillage(){return this.getAddresses().currentVillage}getCurrentTA(){return this.getAddresses().currentTA}getClosestLandmark(){return this.getAttribute(19)}getPhoneNumber(){return this.getAttribute(12)}getAttribute(e){return Object(n["a"])(this.patient.person.person_attributes,e)}getPatientIdentifier(e){return o(this.patient.patient_identifiers,e)}patientIsComplete(){return[this.getGender(),this.getBirthdate(),this.getGivenName(),this.getFamilyName(),...Object.values(this.getAddresses())].every(e=>!Object(u["d"])(e))}getAddresses(){const e={ancestryDistrict:"",ancestryTA:"",ancestryVillage:"",currentDistrict:"",currentTA:"",currentVillage:""};if(this.patient.person.addresses.length>0){const t=this.patient.person.addresses[0];e.ancestryDistrict=t.address2,e.ancestryTA=t.county_district,e.ancestryVillage=t.neighborhood_cell,e.currentDistrict=t.state_province,e.currentTA=t.township_division,e.currentVillage=t.city_village}return e}}},2414:function(e,t,a){"use strict";a("5979")},"24f9":function(e,t,a){},2658:function(e,t,a){},2706:function(e,t,a){"use strict";var n=a("2ef0");function o(e){try{for(const t in e){const a=e[t]();if(a)return a}}catch(t){return[t]}}function i(e){return Object(n["isEmpty"])(e)?["Value is required"]:null}function r(e){const t=/^(\+?265|0)(((88|9[89])\d{7})|(1\d{6})|(2\d{8})|(31\d{8}))$/;return e&&e.value.match(t)?null:["Not a valid phone number"]}function s(e){const t=/^(?=[a-zA-Z0-9]*$)(?=\d+[a-zA-Z]|[a-zA-Z]+\d)([a-zA-Z\d]){8}$/;return Object(n["isEmpty"])(e)||!e.value.toString().match(t)?["Not a valid Malawi National ID number"]:null}function c(e){const t=/\b(?:(?:2(?:[0-4][0-9]|5[0-5])|[0-1]?[0-9]?[0-9])\.){3}(?:(?:2([0-4][0-9]|5[0-5])|[0-1]?[0-9]?[0-9]))\b/;return e&&e.value.match(t)?null:["Not a valid IP address"]}function l(e){const t=/^(?=.{2,100}$)[a-z!A-Z]+(?:['_.\-!\][a-z]+[a-z!A-Z])*$/;return e&&e.label.match(t)?null:["Invalid name Input"]}function d(e){return isNaN(parseInt(e.value))?["Value must be a number"]:null}function u(e,t,a){const n=e?e.label.length:0;return n>=t&&n<=a?null:[`Value length not within range of ${t} - ${a}`]}function p(e,t,a){const n=parseInt(e.label);return n>=t&&n<=a?null:[`${n} not within range of ${t} - ${a}`]}function h(e){const t=e.filter(e=>{const t=e.value||e.other.value;return"No"===t});return t.length==e.length?["All values can not be no"]:null}function b(e){const t=["all must be selected"];if(!e)return t;const a=e.filter(e=>""===e.value);return a.length>0?t:null}function m(e,t){return e===t?["Values can not be the same"]:null}t["a"]={validateSeries:o,required:i,isMWPhoneNumber:r,isName:l,isNumber:d,hasLengthRangeOf:u,rangeOf:p,neitherOr:h,anyEmpty:b,notTheSame:m,isIPAddress:c,isMWNationalID:s}},"279d":function(e,t,a){"use strict";a("4fc5")},"27f1":function(e,t,a){"use strict";a("a3fb")},"28ac":function(e,t,a){},"28c5":function(e,t,a){},2989:function(e,t,a){"use strict";a.d(t,"a",(function(){return i}));var n=a("cc6f"),o=a("b89f");class i extends n["a"]{constructor(e,t){super(e,84,t)}printSocialHistory(){return(new o["a"]).printLbl(`/programs/${this.programID}/patients/${this.patientID}/labels/history`)}}},"2a52":function(e,t,a){},"2a82":function(e,t,a){"use strict";var n=a("7a23");const o=Object(n["withScopeId"])("data-v-6cb84542"),i=o((function(e,t,a,i,r,s){const c=Object(n["resolveComponent"])("ion-input"),l=Object(n["resolveComponent"])("ion-col"),d=Object(n["resolveComponent"])("ion-row"),u=Object(n["resolveComponent"])("ion-grid"),p=Object(n["resolveComponent"])("view-port"),h=Object(n["resolveComponent"])("his-keyboard");return Object(n["openBlock"])(),Object(n["createBlock"])(n["Fragment"],null,[Object(n["createVNode"])(p,{showFull:!1},{default:o(()=>[Object(n["createVNode"])(u,null,{default:o(()=>[Object(n["createVNode"])(d,null,{default:o(()=>[(Object(n["openBlock"])(!0),Object(n["createBlock"])(n["Fragment"],null,Object(n["renderList"])(e.addressInputs,(t,a)=>(Object(n["openBlock"])(),Object(n["createBlock"])(l,{key:a},{default:o(()=>[Object(n["createVNode"])(c,{mode:"md",inputmode:"numeric",type:"number",max:255,class:[{"highlighted-input":a===e.activeIndex},"input_display"],modelValue:e.addressInputs[a],"onUpdate:modelValue":t=>e.addressInputs[a]=t,onIonFocus:t=>e.onAddressClick(a),style:{textAlign:"center"},placeholder:"0"},null,8,["class","modelValue","onUpdate:modelValue","onIonFocus"])]),_:2},1024))),128))]),_:1})]),_:1})]),_:1}),e.showKeyboard?(Object(n["openBlock"])(),Object(n["createBlock"])(h,{key:0,onKeyPress:e.keypress,kbConfig:e.numbers},null,8,["onKeyPress","kbConfig"])):Object(n["createCommentVNode"])("",!0)],64)}));var r=a("db10"),s=a("3800"),c=a("0a79"),l=a("51c8"),d=a("2345"),u=a("8a30"),p=a("2ef0"),h=Object(n["defineComponent"])({components:{IonInput:u["v"],IonRow:u["H"],IonCol:u["m"],IonGrid:u["p"],HisKeyboard:r["a"],ViewPort:c["a"]},mixins:[l["a"]],watch:{clear(){this.addressInputs={first:"",second:"",third:"",fourth:""}}},setup(e,{emit:t}){Object(n["onActivated"])(()=>t("onFieldActivated",this));const a=Object(n["ref"])(!1),o=Object(n["ref"])(""),i=Object(n["ref"])({first:"",second:"",third:"",fourth:""});function r(e){if(!o.value)return;const t=o.value,a=Object(d["a"])(e,i.value[t]);if(a.length>3)switch(o.value){case"first":o.value="second";break;case"second":o.value="third";break;case"third":o.value="fourth";break;case"fourth":o.value=""}else i.value[t]="0"===a.charAt(0)&&a.length>1?a.substring(1):a}function c(e){o.value=e,a.value=!0}return Object(n["watch"])(i,e=>{if(!e)return;const a=Object.values(e).map(e=>!Object(p["isEmpty"])(e));if(a.every(Boolean)){const a=Object.values(e).map(e=>e).join(".");t("onValue",{label:a,value:a})}else t("onValue",null)},{deep:!0,immediate:!0}),{keypress:r,activeIndex:o,onAddressClick:c,showKeyboard:a,addressInputs:i,numbers:[s["i"],[["Delete"],["Clear"]]]}}}),b=(a("b913"),a("6b0d")),m=a.n(b);const g=m()(h,[["render",i],["__scopeId","data-v-6cb84542"]]);t["a"]=g},"2b07":function(e,t,a){"use strict";a("0c79")},"2b3a":function(e,t,a){"use strict";var n=a("7a23");const o=Object(n["withScopeId"])("data-v-150d2bf2");Object(n["pushScopeId"])("data-v-150d2bf2");const i=Object(n["createTextVNode"])("Select Module"),r=Object(n["createTextVNode"])(" Close ");Object(n["popScopeId"])();const s=o((function(e,t,a,s,c,l){const d=Object(n["resolveComponent"])("ion-title"),u=Object(n["resolveComponent"])("ion-label"),p=Object(n["resolveComponent"])("ion-toolbar"),h=Object(n["resolveComponent"])("ion-header"),b=Object(n["resolveComponent"])("application-card"),m=Object(n["resolveComponent"])("ion-col"),g=Object(n["resolveComponent"])("ion-row"),f=Object(n["resolveComponent"])("ion-content"),O=Object(n["resolveComponent"])("ion-button"),j=Object(n["resolveComponent"])("ion-footer");return Object(n["openBlock"])(),Object(n["createBlock"])(n["Fragment"],null,[Object(n["createVNode"])(h,null,{default:o(()=>[Object(n["createVNode"])(p,null,{default:o(()=>[Object(n["createVNode"])(d,null,{default:o(()=>[i]),_:1}),Object(n["createVNode"])(u,{style:{"font-weight":"bold",padding:"0.5em"},slot:"end"},{default:o(()=>[Object(n["createTextVNode"])(" Version: "+Object(n["toDisplayString"])(e.appVersion),1)]),_:1})]),_:1})]),_:1}),Object(n["createVNode"])(f,null,{default:o(()=>[Object(n["createVNode"])(g,null,{default:o(()=>[(Object(n["openBlock"])(!0),Object(n["createBlock"])(n["Fragment"],null,Object(n["renderList"])(e.apps,(t,a)=>(Object(n["openBlock"])(),Object(n["createBlock"])(m,{key:a,"size-md":"4","size-sm":"12"},{default:o(()=>[Object(n["createVNode"])(b,{class:{inactive:!t.hasPriviledge,clickable:t.hasPriviledge},onClick:a=>e.setApplication(t),name:t.applicationName,details:t.applicationDescription,programID:t.programID,iconURL:e.img(t.applicationIcon)},null,8,["class","onClick","name","details","programID","iconURL"])]),_:2},1024))),128))]),_:1})]),_:1}),Object(n["createVNode"])(j,null,{default:o(()=>[Object(n["createVNode"])(p,null,{default:o(()=>[e.noAppPriviledges||e.canClose?(Object(n["openBlock"])(),Object(n["createBlock"])(O,{key:0,color:"danger",size:"large",onClick:e.closeModal},{default:o(()=>[r]),_:1},8,["onClick"])):Object(n["createCommentVNode"])("",!0)]),_:1})]),_:1})],64)})),c=Object(n["withScopeId"])("data-v-1e3d0694");Object(n["pushScopeId"])("data-v-1e3d0694");const l={class:"his-md-text"};Object(n["popScopeId"])();const d=c((function(e,t,a,o,i,r){const s=Object(n["resolveComponent"])("ion-img"),d=Object(n["resolveComponent"])("ion-card-title"),u=Object(n["resolveComponent"])("ion-card-header"),p=Object(n["resolveComponent"])("ion-card-content"),h=Object(n["resolveComponent"])("center"),b=Object(n["resolveComponent"])("ion-card");return Object(n["openBlock"])(),Object(n["createBlock"])(b,{class:"his-card"},{default:c(()=>[Object(n["createVNode"])(h,null,{default:c(()=>[Object(n["createVNode"])(s,{src:e.iconURL},null,8,["src"]),Object(n["createVNode"])(u,null,{default:c(()=>[Object(n["createVNode"])(d,null,{default:c(()=>[Object(n["createTextVNode"])(Object(n["toDisplayString"])(e.name),1)]),_:1})]),_:1}),Object(n["createVNode"])(p,null,{default:c(()=>[Object(n["createVNode"])("b",l,Object(n["toDisplayString"])(e.details),1)]),_:1})]),_:1})]),_:1})}));var u=a("8a30"),p=Object(n["defineComponent"])({props:["name","details","programID","iconURL"],components:{IonCard:u["f"],IonCardContent:u["g"],IonCardTitle:u["j"],IonCardHeader:u["h"],IonImg:u["s"]}}),h=(a("1bb3"),a("6b0d")),b=a.n(h);const m=b()(p,[["render",d],["__scopeId","data-v-1e3d0694"]]);var g=m,f=a("1718"),O=Object(n["defineComponent"])({name:"Modal",props:{title:{type:String,default:""},apps:{type:Array,default:()=>[]},appVersion:{type:String},canClose:{type:Boolean,default:()=>!1}},computed:{noAppPriviledges(){return this.apps.every(e=>!e.hasPriviledge)}},methods:{closeModal(){this.noAppPriviledges?this.$router.push("/login"):u["X"].dismiss()},img(e){return Object(f["a"])(e)},setApplication(e){e.hasPriviledge&&u["X"].dismiss(e)}},components:{IonFooter:u["o"],IonContent:u["n"],IonHeader:u["q"],IonTitle:u["P"],IonToolbar:u["Q"],ApplicationCard:g,IonButton:u["d"],IonCol:u["m"],IonRow:u["H"]}});a("7cfc");const j=b()(O,[["render",s],["__scopeId","data-v-150d2bf2"]]);t["a"]=j},"2b47":function(e,t,a){"use strict";var n=a("7a23");const o={class:"tool-bar-medium-card"};function i(e,t,a,i,r,s){return Object(n["openBlock"])(),Object(n["createBlock"])("div",o,[Object(n["renderSlot"])(e.$slots,"default")])}var r=Object(n["defineComponent"])({name:"ToolBarMediumCard"}),s=a("6b0d"),c=a.n(s);const l=c()(r,[["render",i]]);t["a"]=l},"2b75":function(e,t,a){"use strict";a("397b")},"2be2":function(e,t,a){},"2d93":function(e,t,a){"use strict";a("14e3")},"2ed9":function(e,t,a){"use strict";a.d(t,"a",(function(){return c}));a("caad");var n,o=a("8a30"),i=a("7a23");(function(e){e["ACTIVE_PLATFORM"]="cur_platform"})(n||(n={}));const r=["ios","iphone","android","tablet","mobileweb","ipad"],s=["desktop","electron"];function c(){const e=e=>Object(o["U"])().map(t=>e.includes(t)).some(Boolean),t=()=>e(r)||!e(s),a=()=>e(s)||!t(),c=localStorage.getItem(n.ACTIVE_PLATFORM),l=Object(i["ref"])(null!=c?c:a()?"desktop":"mobile"),d=Object(i["computed"])(()=>"mobile"===l.value),u=e=>{l.value=e,localStorage.setItem(n.ACTIVE_PLATFORM,e)};return{platformType:l,useVirtualInput:d,isMobile:t,isDesktop:a,setPlatformType:u}}},"2ee9":function(e,t,a){"use strict";a("beb6")},"2f2a":function(e,t,a){"use strict";var n=a("7a23");const o=Object(n["withScopeId"])("data-v-075ff202"),i=o((function(e,t,a,i,r,s){const c=Object(n["resolveComponent"])("ion-col"),l=Object(n["resolveComponent"])("ion-input"),d=Object(n["resolveComponent"])("ion-row");return Object(n["openBlock"])(),Object(n["createBlock"])(d,{style:{"border-top":"solid 1px rgb(196 190 196)"}},{default:o(()=>[e.showPerPageFilter?(Object(n["openBlock"])(),Object(n["createBlock"])(c,{key:0},{default:o(()=>[Object(n["withDirectives"])(Object(n["createVNode"])("select",{class:"input_display","onUpdate:modelValue":t[1]||(t[1]=t=>e.itemsPerPage=t),disabled:e.disablePerPageFilter},[Object(n["createVNode"])("option",{selected:5===e.itemsPerPage,value:5},"5 rows/page",8,["selected"]),Object(n["createVNode"])("option",{selected:10===e.itemsPerPage,value:10},"10 rows/page",8,["selected"]),Object(n["createVNode"])("option",{selected:20===e.itemsPerPage,value:20},"20 rows/page",8,["selected"]),Object(n["createVNode"])("option",{selected:50===e.itemsPerPage,value:50},"50 rows/page",8,["selected"]),Object(n["createVNode"])("option",{selected:100===e.itemsPerPage,value:100},"100 rows/page",8,["selected"]),Object(n["createVNode"])("option",{selected:1e3===e.itemsPerPage,value:1e3},"1000 rows/page",8,["selected"]),Object(n["createVNode"])("option",{selected:e.itemsPerPage===e.totalRowCount,value:e.totalRowCount},"Show all rows("+Object(n["toDisplayString"])(e.totalRowCount)+")",9,["selected","value"])],8,["disabled"]),[[n["vModelSelect"],e.itemsPerPage]])]),_:1})):Object(n["createCommentVNode"])("",!0),Object(n["createVNode"])(c,null,{default:o(()=>[Object(n["createVNode"])(l,{disabled:e.disableSearchFilter,class:"input_display search_input",value:e.searchFilter,onClick:e.launchSearcher,placeholder:"Search here..."},null,8,["disabled","value","onClick"])]),_:1})]),_:1})}));var r=a("8a30"),s=a("e6e9"),c=a("d95e"),l=Object(n["defineComponent"])({emits:["onItemsPerPage","onSearchFilter"],components:{IonCol:r["m"],IonRow:r["H"],IonInput:r["v"]},props:{totalRowCount:{type:Number,default:15e3},disableSearchFilter:{type:Boolean,default:!1},disablePerPageFilter:{type:Boolean,default:!1},showPerPageFilter:{type:Boolean,default:!1}},setup(e,{emit:t}){const a=Object(n["ref"])(50),o=Object(n["ref"])("");async function i(e,t){const a=await r["X"].create({component:s["a"],backdropDismiss:!1,cssClass:"full-modal",componentProps:{dismissType:"modal",currentField:e,onFinish:t}});a.present()}function l(){i({id:"search",helpText:"Search table data",defaultValue:()=>o.value,type:c["b"].TT_TEXT},e=>{o.value=e?e.value:"",t("onSearchFilter",o.value)})}return Object(n["watch"])(a,e=>{"number"===typeof e&&t("onItemsPerPage",e)},{immediate:!0}),{itemsPerPage:a,searchFilter:o,launchKeyboard:i,launchSearcher:l}}}),d=(a("a430"),a("6b0d")),u=a.n(d);const p=u()(l,[["render",i],["__scopeId","data-v-075ff202"]]);t["a"]=p},"2fd5":function(e,t,a){"use strict";var n=a("7a23");function o(e,t,a,o,i,r){const s=Object(n["resolveComponent"])("his-text-input"),c=Object(n["resolveComponent"])("ion-chip"),l=Object(n["resolveComponent"])("ion-text"),d=Object(n["resolveComponent"])("ion-label"),u=Object(n["resolveComponent"])("ion-checkbox"),p=Object(n["resolveComponent"])("ion-item"),h=Object(n["resolveComponent"])("ion-list"),b=Object(n["resolveComponent"])("view-port"),m=Object(n["resolveComponent"])("his-keyboard");return Object(n["openBlock"])(),Object(n["createBlock"])(n["Fragment"],null,[Object(n["createVNode"])(b,{showFull:!e.showKeyboard},{default:Object(n["withCtx"])(()=>[e.showKeyboard?(Object(n["openBlock"])(),Object(n["createBlock"])(s,{key:0,value:e.selected,onOnValue:t[1]||(t[1]=t=>e.onKbValue(t,e.showKeyboard)),disabled:!1},null,8,["value"])):Object(n["createCommentVNode"])("",!0),(Object(n["openBlock"])(!0),Object(n["createBlock"])(n["Fragment"],null,Object(n["renderList"])(e.checkedItems,(t,a)=>(Object(n["openBlock"])(),Object(n["createBlock"])("span",{key:a},[Object(n["createVNode"])(c,{color:"danger",onClick:a=>e.uncheck(t.label)},{default:Object(n["withCtx"])(()=>[Object(n["createTextVNode"])(Object(n["toDisplayString"])(t.label),1)]),_:2},1032,["onClick"])]))),128)),Object(n["createVNode"])(h,{class:"view-port-content"},{default:Object(n["withCtx"])(()=>[(Object(n["openBlock"])(!0),Object(n["createBlock"])(n["Fragment"],null,Object(n["renderList"])(e.filtered,(t,a)=>(Object(n["openBlock"])(),Object(n["createBlock"])(p,{key:a,color:t.isChecked?"lightblue":"",lines:t.isChecked?"none":""},{default:Object(n["withCtx"])(()=>[Object(n["createVNode"])(d,null,{default:Object(n["withCtx"])(()=>[Object(n["createVNode"])(l,{class:"his-md-text"},{default:Object(n["withCtx"])(()=>[Object(n["createTextVNode"])(Object(n["toDisplayString"])(t.label),1)]),_:2},1024),e.isDescription(t.description,t.isChecked)?(Object(n["openBlock"])(),Object(n["createBlock"])(l,{key:0,color:t.description.color},{default:Object(n["withCtx"])(()=>[Object(n["createVNode"])("p",null,[Object(n["createVNode"])("i",null,Object(n["toDisplayString"])(t.description.text),1)])]),_:2},1032,["color"])):Object(n["createCommentVNode"])("",!0)]),_:2},1024),Object(n["createVNode"])(u,{slot:"start",modelValue:t.isChecked,"onUpdate:modelValue":e=>t.isChecked=e,onIonChange:a=>e.onselect(t,a),disabled:null===t||void 0===t?void 0:t.disabled},null,8,["modelValue","onUpdate:modelValue","onIonChange","disabled"])]),_:2},1032,["color","lines"]))),128))]),_:1})]),_:1},8,["showFull"]),e.showKeyboard?(Object(n["openBlock"])(),Object(n["createBlock"])(m,{key:0,kbConfig:e.keyboard,onKeyPress:e.keypress},null,8,["kbConfig","onKeyPress"])):Object(n["createCommentVNode"])("",!0)],64)}var i=a("8a30"),r=a("82a9"),s=a("2ef0"),c=Object(n["defineComponent"])({components:{IonCheckbox:i["k"],IonText:i["M"],IonChip:i["l"]},name:"HisMultipleSelect",mixins:[r["a"]],methods:{async onselect(e,t){this.$nextTick(async()=>{var a;const n={...e};if(n.isChecked=t.target.checked,"function"===typeof(null===n||void 0===n||null===(a=n.other)||void 0===a?void 0:a.onEvent)&&await n.other.onEvent(n.isChecked),this.onValue&&n.isChecked){const e=await this.onValue(n,this.fdata,this.cdata);if(!e)return t.target.checked=!1}this.onValueUpdate&&(this.listData=await this.onValueUpdate([...this.listData],n,this.fdata,this.cdata)),this.$emit("onValue",this.getChecked(this.listData))})},uncheck(e){this.listData.forEach(t=>{t.label===e&&(t.isChecked=!1)})},getChecked(e){return e.filter(e=>e.isChecked)},isDescription(e,t=!1){return!!e&&(null===e||void 0===e||!e.show||("onChecked"===e.show&&t||"always"===e.show))}},computed:{checkedItems(){return this.getChecked(this.listData)}},watch:{clear(){this.listData=this.listData.map(e=>(e.isChecked=!1,e))},footerButtonEvent:{async handler(e){var t,a;e&&"function"===typeof(null===(t=e.onClickComponentEvents)||void 0===t?void 0:t.refreshOptions)&&(this.listData=await(null===(a=e.onClickComponentEvents)||void 0===a?void 0:a.refreshOptions(e,this.listData,this.fdata,this.cdata)),this.$emit("onValue",this.getChecked(this.listData)))},deep:!0,immediate:!0}},async activated(){this.$emit("onFieldActivated",this),!Object(s["isEmpty"])(this.listData)&&this.config.buildOptionsOnce||(this.listData=await this.options(this.fdata,this.getChecked(this.listData),this.cdata,this.listData),this.$emit("onValue",this.getChecked(this.listData)))}}),l=a("6b0d"),d=a.n(l);const u=d()(c,[["render",o]]);t["a"]=u},"2fdd":function(e,t,a){},3063:function(e,t,a){},3130:function(e,t,a){"use strict";a("78dc")},"318c":function(e,t,a){},"32b3":function(e,t,a){"use strict";a.d(t,"b",(function(){return n})),a.d(t,"a",(function(){return r}));var n,o=a("cc6f"),i=a("7957");(function(e){e["Prescription"]="htnPrescription"})(n||(n={}));class r extends o["a"]{constructor(e,t){super(e,48,t)}static getBpGrade(e,t){return e<140&&t<90?"normal":e>=140&&e<160||t>=100&&t<110?"grade 1":e>=180&&t>110||e>=180?"grade 3":e>=160&&e<180||t>=110?"grade 2":"N/A"}static isBpNormotensive(e){const[t,a]=Object.values(e).sort((e,t)=>e.date<t.date?1:0).map(e=>this.getBpGrade(e.sbp,e.dbp));return"normal"===t&&"normal"===a}getSystolicBp(){return i["a"].getFirstValueNumber(this.patientID,"Systolic blood pressure")}getDiastolicBp(){return i["a"].getFirstValueNumber(this.patientID,"Diastolic blood pressure")}async onBpDrugs(){const e=await i["a"].getFirstValueCoded(this.patientID,"Treatment status");return!!e&&"Yes"===e}async getBPTrail(){return await o["a"].getJson(`/patients/${this.patientID}/bp_trail`)}async getCurrentDrugs(){return await o["a"].getJson(`/patients/${this.patientID}/current_bp_drugs`)}async getLastDrugs(){return await o["a"].getJson(`/patients/${this.patientID}/last_bp_drugs_dispensation`)}async getAdherence(e,t){return await o["a"].postJson(`/patients/${this.patientID}/remaining_bp_drugs`,{drug_id:e,pills:t})}async enrollPatient(e){return await o["a"].postJson(`/patients/${this.patientID}/update_or_create_htn_state`,e)}static htnDrugReferences(){return[{drug_id:275,drug_name:"HCZ (25mg tablet)",units:"tab(s)",am:0,noon:0,pm:1,frequency:"Daily (QOD)"},{drug_id:942,drug_name:"Enalapril (5mg tablet)",units:"tab(s)",am:0,noon:0,pm:1,frequency:"Daily (QOD)"},{drug_id:943,drug_name:"Enalapril (10mg tablet)",units:"tab(s)",am:0,noon:0,pm:1,frequency:"Daily (QOD)"},{drug_id:558,drug_name:"Amlodipine (5mg tablet)",units:"tab(s)",am:0,noon:0,pm:1,frequency:"Daily (QOD)"},{drug_id:559,drug_name:"Amlodipine (10mg tablet)",units:"tab(s)",am:0,noon:0,pm:1,frequency:"Daily (QOD)"},{drug_id:117,drug_name:"Atenolol (50mg tablet)",units:"tab(s)",am:0,noon:0,pm:1,frequency:"Daily (QOD)"},{drug_id:11,drug_name:"Atenolol(100mg tablet)",units:"tab(s)",am:0,noon:0,pm:1,frequency:"Daily (QOD)"}]}getDrugs(){return{HCZ:{drugs:[{drugName:"HCZ (25mg tablet)",drugID:275,amount:"25mg",current:!1,selected:!1,isChecked:!1,dispensed:null,expectedRemaining:null,adherence:null}],selected:null,notes:[]},Enalapril:{drugs:[{drugName:"Enalapril (5mg tablet)",drugID:942,amount:"5mg",current:!1,selected:!1,isChecked:!1,dispensed:null,expectedRemaining:null,adherence:null,remaining:null},{drugName:"Enalapril (10mg tablet)",drugID:943,amount:"10mg",current:!1,selected:!1,isChecked:!1,dispensed:null,expectedRemaining:null,adherence:null,remaining:null}],selected:null,notes:[]},Amlodipine:{drugs:[{drugName:"Amlodipine (5mg tablet)",drugID:558,amount:"5mg",current:!1,selected:!1,isChecked:!1,dispensed:null,expectedRemaining:null,adherence:null,remaining:null},{drugName:"Amlodipine (10mg tablet)",drugID:559,amount:"10mg",current:!1,selected:!1,isChecked:!1,dispensed:null,expectedRemaining:null,adherence:null,remaining:null}],selected:null,notes:[]},Atenolol:{drugs:[{drugName:"Atenolol (50mg tablet)",drugID:117,amount:"50mg",current:!1,selected:!1,isChecked:!1,dispensed:null,expectedRemaining:null,adherence:null,remaining:null},{drugName:"Atenolol(100mg tablet)",drugID:11,amount:"100mg",current:!1,selected:!1,isChecked:!1,dispensed:null,expectedRemaining:null,adherence:null,remaining:null}],selected:null,notes:[]}}}}},"331e":function(e,t,a){"use strict";a.d(t,"a",(function(){return i}));var n=a("cc6f"),o=a("8158");class i extends n["a"]{constructor(e,t){super(e,122,t)}static async getComplaintsList(e,t=""){return o["a"].getConceptSet(e,t)}async fetchLatestTriageEncounter(){return await i.getObs({concept_id:o["a"].getConceptID("History of COVID-19 contact"),start_date:this.date,end_date:this.date,person_id:this.patientID})}}},3385:function(e,t,a){"use strict";a("44a7")},"341d":function(e,t,a){"use strict";a("b6f2")},3437:function(e,t,a){},3612:function(e,t,a){"use strict";a("6dff")},"369d":function(e,t,a){"use strict";a("88b2")},"36ad":function(e,t,a){"use strict";var n=a("7a23");const o=Object(n["withScopeId"])("data-v-729e92ae"),i=o((function(e,t,a,o,i,r){const s=Object(n["resolveComponent"])("ion-input");return Object(n["openBlock"])(),Object(n["createBlock"])(s,{ref:"input",class:"input_display",modelValue:e.text,"onUpdate:modelValue":t[1]||(t[1]=t=>e.text=t),type:e.type,disabled:e.disabled,readonly:e.useVirtualInput,autocapitalize:"sentences"},null,8,["modelValue","type","disabled","readonly"])}));var r=a("8a30"),s=a("2ed9"),c=Object(n["defineComponent"])({name:"HisInput",components:{IonInput:r["v"]},setup(){const{useVirtualInput:e}=Object(s["a"])();return{useVirtualInput:e}},data:()=>({text:""}),watch:{value(e){this.text=e},text(e){this.$emit("onValue",e)}},props:{value:{required:!1},type:{type:String,default:()=>"text"},disabled:{type:Boolean,default:()=>!1}}}),l=(a("7b79"),a("6b0d")),d=a.n(l);const u=d()(c,[["render",i],["__scopeId","data-v-729e92ae"]]);t["a"]=u},"374c":function(e,t,a){"use strict";var n=a("7a23");const o=Object(n["createVNode"])("b",null,"TODAY",-1),i=Object(n["createVNode"])("b",null,"Unknown",-1);function r(e,t,a,r,s,c){const l=Object(n["resolveComponent"])("ion-input"),d=Object(n["resolveComponent"])("view-port"),u=Object(n["resolveComponent"])("picker-selector"),p=Object(n["resolveComponent"])("ion-col"),h=Object(n["resolveComponent"])("ion-row"),b=Object(n["resolveComponent"])("ion-button"),m=Object(n["resolveComponent"])("ion-grid");return Object(n["openBlock"])(),Object(n["createBlock"])(n["Fragment"],null,[Object(n["createVNode"])(d,{showFull:!1},{default:Object(n["withCtx"])(()=>[Object(n["createVNode"])(l,{class:"input_display",readonly:!0,value:e.value},null,8,["value"]),Object(n["renderSlot"])(e.$slots,"default",{date:e.value})]),_:3}),Object(n["createVNode"])(m,{class:"his-floating-keyboard"},{default:Object(n["withCtx"])(()=>[Object(n["createVNode"])(h,null,{default:Object(n["withCtx"])(()=>[Object(n["createVNode"])(p,{"sm-size":"12"},{default:Object(n["withCtx"])(()=>[Object(n["createVNode"])(u,{value:e.getYear,onOnIncrement:t[1]||(t[1]=t=>e.add("year")),onOnDecrement:t[2]||(t[2]=t=>e.subtract("year"))},null,8,["value"])]),_:1}),Object(n["createVNode"])(p,{"sm-size":"12"},{default:Object(n["withCtx"])(()=>[Object(n["createVNode"])(u,{value:e.getMonth,onOnIncrement:t[3]||(t[3]=t=>e.add("month")),onOnDecrement:t[4]||(t[4]=t=>e.subtract("month"))},null,8,["value"])]),_:1}),Object(n["createVNode"])(p,{"sm-size":"12"},{default:Object(n["withCtx"])(()=>[Object(n["createVNode"])(u,{value:e.getDay,onOnIncrement:t[5]||(t[5]=t=>e.add("day")),onOnDecrement:t[6]||(t[6]=t=>e.subtract("day"))},null,8,["value"])]),_:1})]),_:1}),Object(n["createVNode"])(h,null,{default:Object(n["withCtx"])(()=>[Object(n["createVNode"])(p,{class:"ion-text-center"},{default:Object(n["withCtx"])(()=>[Object(n["createVNode"])(b,{color:"success",style:{width:"100%",height:"6vh"},onClick:e.today},{default:Object(n["withCtx"])(()=>[o]),_:1},8,["onClick"])]),_:1}),Object(n["createVNode"])(p,null,{default:Object(n["withCtx"])(()=>[Object(n["createVNode"])(b,{disabled:!e.config.allowUnknown,color:"warning",style:{width:"100%",height:"6vh"},onClick:t[7]||(t[7]=t=>e.value="Unknown")},{default:Object(n["withCtx"])(()=>[i]),_:1},8,["disabled"])]),_:1})]),_:1})]),_:1})],64)}var s=a("0a79"),c=a("51c8"),l=a("9283"),d=a("1c74");const u=Object(n["withScopeId"])("data-v-0a5e8d79");Object(n["pushScopeId"])("data-v-0a5e8d79");const p=Object(n["createTextVNode"])(" + "),h=Object(n["createTextVNode"])(" - ");Object(n["popScopeId"])();const b=u((function(e,t,a,o,i,r){const s=Object(n["resolveComponent"])("ion-button"),c=Object(n["resolveComponent"])("ion-col"),l=Object(n["resolveComponent"])("ion-row"),d=Object(n["resolveComponent"])("ion-grid");return Object(n["openBlock"])(),Object(n["createBlock"])(d,{class:"his-card"},{default:u(()=>[Object(n["createVNode"])(l,null,{default:u(()=>[Object(n["createVNode"])(c,{size:"12"},{default:u(()=>[Object(n["createVNode"])(s,{onClick:e.onIncrement,color:"light",class:"w-button"},{default:u(()=>[p]),_:1},8,["onClick"])]),_:1})]),_:1}),Object(n["createVNode"])(l,null,{default:u(()=>[Object(n["createVNode"])(c,{class:"ion-text-center ion-margin-vertical large-text"},{default:u(()=>[Object(n["createTextVNode"])(Object(n["toDisplayString"])(e.value),1)]),_:1})]),_:1}),Object(n["createVNode"])(l,null,{default:u(()=>[Object(n["createVNode"])(c,{size:"12"},{default:u(()=>[Object(n["createVNode"])(s,{onClick:e.onDecrement,color:"light",class:"w-button"},{default:u(()=>[h]),_:1},8,["onClick"])]),_:1})]),_:1})]),_:1})}));var m=a("8a30"),g=Object(n["defineComponent"])({components:{IonGrid:m["p"],IonRow:m["H"],IonCol:m["m"],IonButton:m["d"]},props:{value:{type:String,required:!0}},emits:["onIncrement","onDecrement"],setup(e,t){const a=()=>t.emit("onIncrement"),n=()=>t.emit("onDecrement");return{onIncrement:a,onDecrement:n}}}),f=(a("5b4a"),a("6b0d")),O=a.n(f);const j=O()(g,[["render",b],["__scopeId","data-v-0a5e8d79"]]);var _=j,v=Object(n["defineComponent"])({components:{PickerSelector:_,IonInput:m["v"],ViewPort:s["a"],IonGrid:m["p"],IonCol:m["m"],IonRow:m["H"],IonButton:m["d"]},mixins:[c["a"]],data:()=>({value:"",date:"",isInit:!0}),async activated(){this.$emit("onFieldActivated",this),"function"===typeof this.config.initialDate?this.date=new Date(this.config.initialDate()):this.date=new Date,await this.setDefaultValue(),this.isInit=!1},methods:{async setDefaultValue(){if(this.defaultValue&&!this.value){const e=await this.defaultValue(this.fdata,this.cdata);e&&(this.isInit=!1,this.date=new Date(e))}},add(e){this.date=l["b"].add(this.fmt(this.date),e,1)},subtract(e){this.date=l["b"].subtract(this.fmt(this.date),e,1)},today(){this.date=new Date(d["e"].getSessionDate())},fmt(e){return l["b"].toStandardHisFormat(e)}},computed:{getYear(){return l["b"].getYear(this.fmt(this.date))},getMonth(){return l["b"].getMonth(this.fmt(this.date))},getDay(){return l["b"].getDay(this.fmt(this.date))}},watch:{date(e){this.isInit||(this.value=l["b"].toStandardHisFormat(e))},value(e){e?this.$emit("onValue",{label:e,value:this.value}):this.$emit("onValue",null)},clear(){this.value=""}}});const y=O()(v,[["render",r]]);t["a"]=y},3800:function(e,t,a){"use strict";a.d(t,"d",(function(){return n})),a.d(t,"l",(function(){return o})),a.d(t,"e",(function(){return i})),a.d(t,"b",(function(){return r})),a.d(t,"k",(function(){return s})),a.d(t,"i",(function(){return c})),a.d(t,"g",(function(){return l})),a.d(t,"a",(function(){return d})),a.d(t,"j",(function(){return u})),a.d(t,"c",(function(){return p})),a.d(t,"h",(function(){return h})),a.d(t,"f",(function(){return b}));const n=[["1","2","3"],["4","5","6"],["7","8","9"],[".","0","Del"],["","Done",""]],o=[["1","2","3"],["4","5","6"],["7","8","9"],[".","0","Del"],["Clear","%","/"]],i=[["1","2","3"],["4","5","6"],["7","8","9"],["Del.","0","Clear"]],r=[["1","2","3","<"],["4","5","6",">"],["7","8","9","="],["","0",""]],s=[["1","2","3","+","-","/","*"],["4","5","6","%","=","<",">","Qwerty"],["7","8","9",".",","],["","0",""]],c=[["1","2","3"],["4","5","6"],["7","8","9"],["","0",""]],l=[["1","2","3","4","5","6","7"],["8","9","10","11","12","13","14"],["15","16","17","18","19","20","21"],["22","23","24","25","26","27","28"],["29","30","31"]],d=[["a","b","c","d","e","f","g","h","."],["i","j","k","l","m","n","o","p","q"],["r","s","t","u","v","w","x","y","z"]],u=[["q","w","e","r","t","y","u","i","o","p"],["a","s","d","f","g","h","j","k","l","'"],["z","x","c","v","b","n","m",",",".","A-Z"]],p=[["1","2","3","4","5","6","7","8","9","0"],["a","b","c","d","e","f","g","h","-","."],["i","j","k","l","m","n","o","p","q"],["r","s","t","u","v","w","x","y","z"]],h=[["1","2","3","4","5","6","7","8","9","0","Del"],["q","w","e","r","t","y","u","i","o","p","Clear"],["a","s","d","f","g","h","j","k","l",".","Caps"],["z","x","c","v","b","n","m","<",">","/","Enter"]],b=[["1","2","3","4","5","6","7","8","9","0"],["q","w","e","r","t","y","u","i","o","p"],["a","s","d","f","g","h","j","k","l","Del."],["z","x","c","v","b","n","m","Caps","Login"]]},"397b":function(e,t,a){},"3a89":function(e,t,a){},"3aa1":function(e,t,a){},"3c35":function(e,t,a){},"3d6c":function(e,t,a){"use strict";a.d(t,"a",(function(){return i}));a("caad");var n=a("1c74");const o=[{drugID:105,shortName:"Acyclovir 200mg",fullName:"Acyclovir 200mg",packSizes:[30]},{drugID:1044,shortName:"ABC 120 /3TC 300mg",fullName:"Abacavir and Lamivudine 120mg pack of 60 tablets",packSizes:[60],categories:["p"]},{drugID:969,shortName:"ABC 600 / 3TC 300mg",fullName:"Abacavir sulfate 600mg / Lamivudine 300mg, tin of 30 tablets",packSizes:[30],categories:["a"]},{drugID:932,shortName:"ATV 300 / r 100mg",fullName:"Atazanavir / Ritonavir 300 / 100mg, tin of 30 tablets",packSizes:[30],categories:["a"]},{drugID:39,shortName:"AZT 300 /3TC 150mg",fullName:"Zidovudine / lamivudine 300 / 150mg, tin of 60 tablets",packSizes:[60],categories:["a"]},{drugID:731,shortName:"AZT 300 / 3TC 150 / NVP 200mg",fullName:"Zidovudine / lamivudine /Nevirapine 300 / 150 / 200mg, tin of 60 tablets",packSizes:[60],categories:["a"]},{drugID:732,shortName:"AZT 60 / 3TC 30 / NVP 50mg",fullName:"Zidovudine / lamivudine /Nevirapine 60 / 30 / 50mg, tin of 60 tablets",packSizes:[60],categories:["p"]},{drugID:736,shortName:"AZT 60 / 3TC 30mg",fullName:"Zidovudine / lamivudine 60 / 30mg, tin of 60 tablets",packSizes:[60],categories:["p"]},{drugID:963,shortName:"CPT 120mg",fullName:"Cotrimoxazole 120mg, blister pack of 1000 dispersible tablets",packSizes:[1e3],categories:["p"]},{drugID:297,shortName:"CPT 480mg",fullName:"Cotrimoxazole 480mg, tin of 1000 tablets",packSizes:[1e3],categories:["a"]},{drugID:576,shortName:"CPT 960mg",fullName:"Cotrimoxazole 960mg, blister pack of 1000 tablets",packSizes:[1e3],categories:["a"]},{drugID:976,shortName:"DRV 600mg",fullName:"Darunavir 600mg pack of 60 tablets",packSizes:[60],categories:["a"]},{drugID:980,shortName:"DTG 10mg",fullName:"Dolutegravir 10mg pack of 90 tablets",packSizes:[90]},{drugID:982,shortName:"DTG 50mg",fullName:"Dolutegravir 50mg pack of 30 tablets",packSizes:[30],categories:["a"]},{drugID:30,shortName:"EFV 200mg",fullName:"Efavirenz 200mg, tin of 90 tablets",packSizes:[90],categories:["p"]},{drugID:11,shortName:"EFV 600mg",fullName:"Efavirenz 600mg, tin of 30 tablets",packSizes:[30],categories:["a"]},{drugID:978,shortName:"ETV 100mg",fullName:"Etravirine 100mg, tin of 120 tablets",packSizes:[120],categories:["a"]},{drugID:24,shortName:"Isoniazid 100mg",fullName:"Isoniazid (H) 100mg, blist packs of 100 tablets",packSizes:[100],categories:["p"]},{drugID:991,shortName:"Isoniazid 300mg",fullName:"Isoniazid (H) 300mg, blist packs of 1000 tablets",packSizes:[1e3,672]},{drugID:74,shortName:"LPV 100 / r 25mg",fullName:"Lopinavir / Ritonavir 100 / 25mg, tin of 60 tablets",packSizes:[60],categories:["p"]},{drugID:73,shortName:"LPV 200 / r 50mg",fullName:"Lopinavir / Ritonavir 200 / 50mg, tin of 120 tablets",packSizes:[120],categories:["a"]},{drugID:1045,shortName:"LPV 40 / r 10mg granules",fullName:"Lopinavir/Ritonavir(LPV/r ), 40/10mg granules, pack of 120 sachets",packSizes:[120]},{drugID:979,shortName:"LPV 40 / r 10mg pellets",fullName:"Lopinavir/Ritonavir(LPV/r ), 40/10mg granules, pack of 120 pellets",packSizes:[120],categories:["p"]},{drugID:22,shortName:"NVP 200mg",fullName:"Nevirapine 200mg, tin of 60 tablets",packSizes:[60],categories:["a"]},{drugID:968,shortName:"NVP 50mg",fullName:"Nevirapine 50mg, tin of 60 tablets",packSizes:[60],categories:["p"]},{drugID:1039,shortName:"Pyridoxine 25mg",fullName:"Pyridoxine (25mg)",packSizes:[1e3],categories:["a"]},{drugID:977,shortName:"r 100mg",fullName:"Ritonavir 100mg pack of 60 tablets",packSizes:[60],categories:["a"]},{drugID:1043,shortName:"RAL 25mg",fullName:"Raltegravir 25mg pack of 60 tablets",packSizes:[60],categories:["p"]},{drugID:954,shortName:"RAL 400mg",fullName:"Raltegravir 400mg pack of 60 tablets",packSizes:[60],categories:["a"]},{drugID:1056,shortName:"Rifapentine 150mg",fullName:"Rifapentine 150mg pack of 24 tablets",packSizes:[24],categories:["a"]},{drugID:734,shortName:"TDF 300 / 3TC 300mg ",fullName:"Lamivudine / Tenofovir disoproxil fumarate 300 / 300mg, tin of 30 tablets",packSizes:[30],categories:["a"]},{drugID:735,shortName:"TDF 300 / 3TC 300 / EFV 600mg",fullName:"Tenofovir disoproxil fumarate / Lamivudine / Efavirenz 300 / 300 / 600mg, tin of 30 tablets",packSizes:[30],categories:["a"]},{drugID:983,shortName:"TDF 300 / 3TC 300 / DTG 50mg",fullName:"Tenofovir Disoproxil Fumarate/Lamivudine/Dolutegravir (TDF/3TC /DTG), 300/300/50mg, pack of 90 tablets",packSizes:[90],categories:["a"]}];class i extends n["e"]{constructor(){super()}postItems(e){return n["e"].postJson("/pharmacy/batches",e)}getItems(){return n["e"].getJson("pharmacy/items",{paginate:!1})}getItem(e){return n["e"].getJson("pharmacy/items",{drug_id:e})}updateItem(e,t){return n["e"].putJson("pharmacy/items/"+e,t)}relocateItems(e,t){return n["e"].postJson(`pharmacy/items/${e}/reallocate`,t)}disposeItems(e,t){return n["e"].postJson(`pharmacy/items/${e}/dispose`,t)}getConsumptionRate(e){return n["e"].getJson("pharmacy/drug_consumption",{drug_id:e})}drugList(){return o}static getShortName(e){const t=o.filter(t=>t.drugID===e);return t.length>0?t[0].shortName:""}static getPackSize(e){const t=o.filter(t=>t.drugID===e);return t.length>0?t[0].packSizes[0]:30}static getPaedeatricDrugs(){return console.log(o.filter(e=>{var t;return null===(t=e.categories)||void 0===t?void 0:t.includes("p")})),o.filter(e=>{var t;return null===(t=e.categories)||void 0===t?void 0:t.includes("p")})}static getAdultDrugs(){return o.filter(e=>{var t;return null===(t=e.categories)||void 0===t?void 0:t.includes("a")})}}},"3db2":function(e,t,a){"use strict";a("d26c")},"3e2c":function(e,t,a){"use strict";a("ffe1")},"3e53":function(e,t,a){"use strict";var n=a("f768"),o=a("2b3a"),i=a("8a30"),r=a("2ef0"),s=a("4db7"),c=a("c1e4"),l=a("cc74"),d=a("7a23");const u=Object(d["createTextVNode"])(" Refresh "),p=Object(d["createTextVNode"])(" Close ");function h(e,t,a,n,o,i){const r=Object(d["resolveComponent"])("ion-title"),s=Object(d["resolveComponent"])("ion-toolbar"),c=Object(d["resolveComponent"])("ion-header"),l=Object(d["resolveComponent"])("text-skeleton"),h=Object(d["resolveComponent"])("ion-label"),b=Object(d["resolveComponent"])("ion-item"),m=Object(d["resolveComponent"])("ion-list"),g=Object(d["resolveComponent"])("ion-content"),f=Object(d["resolveComponent"])("ion-button"),O=Object(d["resolveComponent"])("ion-footer"),j=Object(d["resolveComponent"])("ion-page");return Object(d["openBlock"])(),Object(d["createBlock"])(j,null,{default:Object(d["withCtx"])(()=>[Object(d["createVNode"])(c,null,{default:Object(d["withCtx"])(()=>[Object(d["createVNode"])(s,null,{default:Object(d["withCtx"])(()=>[Object(d["createVNode"])(r,{class:"his-lg-text"},{default:Object(d["withCtx"])(()=>[Object(d["createTextVNode"])(Object(d["toDisplayString"])(e.dialogTitle),1)]),_:1})]),_:1})]),_:1}),Object(d["createVNode"])(g,null,{default:Object(d["withCtx"])(()=>[e.isLoading?(Object(d["openBlock"])(),Object(d["createBlock"])(l,{key:0,itemCount:5})):Object(d["createCommentVNode"])("",!0),e.isLoading?Object(d["createCommentVNode"])("",!0):(Object(d["openBlock"])(),Object(d["createBlock"])(m,{key:1},{default:Object(d["withCtx"])(()=>[(Object(d["openBlock"])(!0),Object(d["createBlock"])(d["Fragment"],null,Object(d["renderList"])(e.items,(e,t)=>(Object(d["openBlock"])(),Object(d["createBlock"])(b,{class:"his-md-text",key:t},{default:Object(d["withCtx"])(()=>[Object(d["createVNode"])(h,null,{default:Object(d["withCtx"])(()=>[Object(d["createTextVNode"])(Object(d["toDisplayString"])(e.label),1)]),_:2},1024),Object(d["createVNode"])("b",{style:{backgroundColor:e.color||"",padding:"0.4em"},innerHTML:e.value},null,12,["innerHTML"])]),_:2},1024))),128))]),_:1}))]),_:1}),Object(d["createVNode"])(O,null,{default:Object(d["withCtx"])(()=>[Object(d["createVNode"])(s,null,{default:Object(d["withCtx"])(()=>[Object(d["createVNode"])(f,{disabled:e.isLoading,onClick:e.updateData,color:"success",size:"large",slot:"end"},{default:Object(d["withCtx"])(()=>[u]),_:1},8,["disabled","onClick"]),Object(d["createVNode"])(f,{disabled:e.isLoading,onClick:e.onClose,size:"large",slot:"end"},{default:Object(d["withCtx"])(()=>[p]),_:1},8,["disabled","onClick"])]),_:1})]),_:1})]),_:1})}var b=a("b5e4"),m=a("ded6"),g=Object(d["defineComponent"])({setup:e=>{const t=Object(d["ref"])(e.title),a=Object(d["ref"])(!1),n=Object(d["ref"])([]);async function o(){if(a.value=!0,"function"===typeof e.loadData)try{n.value=await e.loadData(t)}catch(o){Object(b["c"])(""+o)}a.value=!1}return Object(d["onMounted"])(()=>{o()}),{items:n,dialogTitle:t,isLoading:a,updateData:o}},props:{title:{type:String,default:""},loadData:{type:Function,required:!0},onClose:{type:Function,required:!0}},components:{TextSkeleton:m["a"],IonPage:i["D"],IonTitle:i["P"],IonHeader:i["q"],IonContent:i["n"],IonFooter:i["o"],IonToolbar:i["Q"],IonButton:i["d"],IonItem:i["w"],IonList:i["y"]}}),f=a("6b0d"),O=a.n(f);const j=O()(g,[["render",h]]);var _,v=j,y=a("fa73"),w=a("5a0c"),N=a.n(w),C=a("8734"),V={GlobalAppSettings:[{name:"Session Management",icon:"time.png",files:[{name:"Change session date",pathUrl:"/session/date"}]},{name:"Portal Settings",icon:"portal.png",condition:()=>c["a"].isAdmin(),files:[{name:"Portal settings",pathUrl:"/portal/config"}]},{name:"Network",icon:"portal.png",condition:()=>c["a"].isAdmin(),files:[{name:"IP Configuration",pathUrl:"/settings/host"}]},{name:"Location",icon:"location.png",files:[{name:"Print Location",pathUrl:"/print/location"},{name:"Set Site Location",condition:()=>c["a"].isAdmin(),pathUrl:"/location/update/site"},{name:"Set Site Code",condition:()=>c["a"].isAdmin(),pathUrl:"/location/update/code"}]},{name:"User management",icon:"edit-user.png",files:[{name:"New user",condition:()=>c["a"].isAdmin(),pathUrl:"/user?activity=add"},{name:"Edit Users",condition:()=>c["a"].isAdmin(),pathUrl:"/user?activity=edit"},{name:"Change Password",pathUrl:"/user?activity=edit&update_password=true"},{name:"System usage report",pathUrl:"/users/usage",condition:()=>c["a"].isAdmin()}]},{name:"Data Management",icon:"list.png",condition:()=>c["a"].isAdmin(),files:[{name:"View Duplicates",pathUrl:"/view_duplicates"},{name:"Manage Drug Sets",pathUrl:"/anc/drugset",condition:()=>{var e;return!!R.getActiveApp()&&"ANC"===(null===(e=R.getActiveApp())||void 0===e?void 0:e.applicationName)}},{name:"Data Cleaning",pathUrl:"/anc/datacleaning",condition:()=>{var e;return!!R.getActiveApp()&&"ANC"===(null===(e=R.getActiveApp())||void 0===e?void 0:e.applicationName)}},{name:"Data Cleaning",pathUrl:"/data_cleaning",condition:()=>{var e;return!!R.getActiveApp()&&"ART"===(null===(e=R.getActiveApp())||void 0===e?void 0:e.applicationName)}},{name:"Merge patients",pathUrl:"/patients/merge",condition:()=>{var e;return!!R.getActiveApp()&&"ART"===(null===(e=R.getActiveApp())||void 0===e?void 0:e.applicationName)}},{name:"Patient visit stats",pathUrl:"/art/patient_visits",condition:()=>{var e;return!!R.getActiveApp()&&"ART"===(null===(e=R.getActiveApp())||void 0===e?void 0:e.applicationName)}},{name:"Data cleaning verification",pathUrl:"/art/data_cleaning_verification",condition:()=>{var e;return!!R.getActiveApp()&&"ART"===(null===(e=R.getActiveApp())||void 0===e?void 0:e.applicationName)}}]},{name:"DDE Settings",icon:"programs.png",condition:()=>c["a"].isAdmin(),files:[{name:"DDE Activation",pathUrl:"/preferences?label=Activate DDE&property="+l["a"].DDE_ENABLED},{name:"DDE NPID Status",action:async()=>{(await i["X"].create({component:v,backdropDismiss:!1,componentProps:{title:"DDE NPID Status",loadData:async e=>{await Object(C["a"])(400);const t=await y["a"].getRemainingNpids();if(t){const a=t["npid_status"][0],n=a["location_id"],o=a["avg_consumption_rate_per_day"]||1,i=a["unassigned"],r=a["assigned"],s=Math.floor(i/o),c=N()(a["date_last_updated"]).format("DD/MMM/YYYY HH:mm:ss");return e.value=a["location_name"]+" DDE NPID Status",[{label:"Location ID",value:n},{label:"Estimated days left",value:s,color:(()=>{let e="";return s<=30&&(e="#FFFF00"),s<=20&&(e="#FFA500"),s<=15&&(e="#ff0000"),e})()},{label:"Unassigned",value:i},{label:"Assigned",value:r},{label:"Average consumption per day",value:o},{label:"Last update",value:c}]}return[]},onClose:()=>i["X"].dismiss()}})).present()}}]},{name:"Malawi National ID Settings",icon:"card.png",condition:()=>c["a"].isAdmin(),files:[{name:"Malawi National ID Scanner Activation",pathUrl:"/preferences?label=Activate Scanning of Malawi National ID&property="+l["a"].MALAWI_NATIONAL_ID_SCANNER_ENABLED}]}],GlobalProgramActivities:[{id:"npid",name:"National Health ID (Print)",description:"Print Patient National Health ID",action({patient:e}){const t=new s["a"](e.patient_id);return t.printNidLbl()},icon:"barcode.svg"},{id:"lab activities",name:"Lab activities",description:"Do lab orders",icon:"lab.png"},{id:"demographics",name:"Demographics (Print)",description:"Print Patient Demographics",action:({patient:e})=>{const t=new s["a"](e.patient_id);return t.printDemographicsLbl()},icon:"print.png",condition:()=>{var e;return"CxCa"!==(null===(e=R.getActiveApp())||void 0===e?void 0:e.applicationName)}},{id:"demographics_edit",name:"Demographics (Edit)",description:"Edit Patient Demographics",action:({patient:e},t)=>{t.push({path:"/patient/registration",query:{edit_person:e.patient_id}})},icon:"print.png"},{id:"guardian_edit",name:"Edit Guardians",description:"Edit guardian information",action:({patient:e},t)=>{t.push({path:"/guardian/registration/"+e.patient_id,query:{edit_guardian:!0}})},icon:"print.png"},{id:"change_session_Date",name:"Change session date",action:({patient:e},t)=>{t.push({path:"/session/date",query:{patient_id:e.patient_id}})},description:"Change session date (for retrospective entry)",icon:"time.png"},{id:"program_management",name:"Program(s)",description:"View / update patient's programs",action:({patient:e},t)=>{t.push({path:"/patient/programs/"+e.patient_id})},icon:"programs.png"},{id:"visit_summary",name:"Visit Summary (Print)",description:"Print Patient Visit Summary",action({patient:e,visitDate:t}){const a=new s["a"](e.patient_id);return a.printVisitSummaryLbl(t)},icon:"folder.png",condition:()=>{var e;return"CxCa"!==(null===(e=R.getActiveApp())||void 0===e?void 0:e.applicationName)}},{id:"enter_lab_result",name:"Enter Lab Result",description:"Enter Lab Test Result",action:({patient:e},t)=>{t.push({path:"/lab/results/"+e.patient_id})},icon:"enter.png"}]},D=a("1c74"),k=a("0fa1");function T(e){const t={...e};return t.secondaryPatientActivites=[...V.GlobalProgramActivities,...t.secondaryPatientActivites],t.globalPropertySettings?t.globalPropertySettings=[...V.GlobalAppSettings,...t.globalPropertySettings]:t.globalPropertySettings=V.GlobalAppSettings,t}function I(){const e=sessionStorage.getItem(_.APPLICATION_NAME);if(e){const t=Object(r["find"])(n["a"],{applicationName:e});if(t)return T(t)}}function x(){const e=I();e&&sessionStorage.setItem(_.SUSPENDED_APP,e.applicationName)}async function S(e,t="",a=!1){sessionStorage.setItem(_.APPLICATION_NAME,e.applicationName);const n=T(e);return"function"!==typeof e.init||a||await e.init(t),n}function P(){const e=sessionStorage.getItem(_.SUSPENDED_APP);if(e){const t=Object(r["find"])(n["a"],{applicationName:e});t&&(sessionStorage.removeItem(_.SUSPENDED_APP),S(t,"",!0))}}async function A(e,t,a,o){const i=Object(r["find"])(n["a"],{applicationName:e});i&&(x(),await S(i),"function"===typeof o&&await o(),Object(k["b"])(t,a))}async function E(e="",t=!1){const a=await i["X"].create({component:o["a"],cssClass:"large-modal",backdropDismiss:!1,componentProps:{appVersion:D["e"].getFullVersion(),apps:D["e"].getAvailableApps(),canClose:t}});a.present();const{data:n}=await a.onDidDismiss();if(n&&!Object(r["isEmpty"])(n))return sessionStorage.getItem(_.SUSPENDED_APP)&&sessionStorage.removeItem(_.SUSPENDED_APP),S(n,e)}async function B(){const e=sessionStorage.getItem(_.SUSPENDED_APP);if(e){const t=await Object(b["a"])("Do you want to resume "+e+" application?");if(t)return P()}}(function(e){e["SUSPENDED_APP"]="suspendedApp",e["APPLICATION_NAME"]="applicationName"})(_||(_={}));var R=t["a"]={doAppManagementTasks:B,resumeSuspendedApp:P,startApplication:S,switchAppWorkflow:A,selectApplication:E,getActiveApp:I}},4108:function(e,t,a){},"41b4":function(e,t,a){},4366:function(e,t,a){},4445:function(e,t,a){"use strict";a("24f9")},4469:function(e,t,a){},"44a7":function(e,t,a){},"44e3":function(e,t,a){"use strict";var n=a("1c74"),o=a("7a23"),i=a("b446"),r=a("23e6"),s=a("9283"),c=a("8a30"),l=a("d6aa"),d=a("5969"),u=a("d95e"),p=a("2706"),h=a("9ceb"),b=a("2ef0"),m=Object(o["defineComponent"])({data:()=>({fields:[],report:{},reportReady:!1,period:"",startDate:"",endDate:"",customFileName:"",drillDownCache:{}}),methods:{toDate(e){return s["b"].toStandardHisDisplayFormat(e)},sortByArvNumber(e,t="arv_number"){try{return e.sort((e,a)=>this.getArvInt(e[t])>this.getArvInt(a[t])?1:-1)}catch(a){return console.error(a),e}},getArvInt(e){if("string"===typeof e){const[t,a,n]=e.split("-"),o=parseInt(n);return"number"===typeof o?o:0}return 0},tdARV(e,t={}){return h["a"].td(e,{sortValue:this.getArvInt(e),...t})},confirmPatient(e){return this.$router.push("/patients/confirm?person_id="+e)},async drilldownAsyncRows(e,t,a,n=!0){const o=await c["X"].create({component:l["a"],cssClass:"large-modal",componentProps:{title:e,columns:t,asyncRows:a,canExport:n,showFilters:!0,rowsPerPage:50,paginated:!0,showReportStamp:!1,footerColor:"light",onFinish:()=>c["X"].dismiss()}});o.present()},async drilldownData(e,t,a,n){const o=await c["X"].create({component:l["a"],cssClass:"large-modal",componentProps:{title:e,columns:t,rows:a,rowParser:n,rowsPerPage:50,showFilters:!0,paginated:!0,showReportStamp:!1,footerColor:"light",onFinish:()=>c["X"].dismiss()}});o.present()},getDefaultDrillDownTable(){const e=[[h["a"].thTxt("ARV number"),h["a"].thTxt("Gender"),h["a"].thTxt("Birth Date"),h["a"].thTxt("Actions")]],t=async e=>{let t=0;const a=e.map(async e=>{let a=null,n=null;if(Object(b["isArray"])(e)){const[t,a]=e;if(n=t,a in this.drillDownCache){const[e,...t]=this.drillDownCache[a];return[n,...t]}}else if(a=e,a in this.drillDownCache)return this.drillDownCache[a];const o=await r["a"].findByID(a),i=new r["a"](o),s=[];return n&&(t=1,s.push(n)),s.push(this.tdARV(i.getArvNumber())),s.push(h["a"].td(i.getGender())),s.push(h["a"].tdDate(i.getBirthdate().toString())),s.push(h["a"].tdBtn("Show",async()=>{await c["X"].dismiss({}),this.$router.push({path:"/patient/dashboard/"+a})})),this.drillDownCache[a]=s,s}),n=await Promise.all(a);return n.sort((e,a)=>e[t].sortValue>a[t].sortValue?1:-1)};return{rowParser:t,columns:e}},runTableDrill(e,t="Drilldown patients"){const{columns:a,rowParser:n}=this.getDefaultDrillDownTable();this.drilldownData(t,a,e,n)},drill(e,t="Drill table"){return e&&e.length>0?h["a"].tdLink(e.length,()=>this.runTableDrill(e,t)):h["a"].td(0)},getQuaterOptions(){const e=d["a"].getReportQuarters();return e.map(e=>({label:e.name,value:e.start,other:e}))},getDateDurationFields(e=!1,t=!1,a=5,o=n["e"].getSessionDate()){const r="2000-01-01";return[{id:"quarter",helpText:"Select Quarter",type:u["b"].TT_SELECT,condition:()=>e,validation:e=>p["a"].required(e),options:()=>{const e=d["a"].getReportQuarters(a);let n=e.map(e=>({label:e.name,value:e.start,other:e}));return t&&(n=[{label:"Set custom period",value:"custom_period",other:{}},...n]),n}},...Object(i["b"])({id:"start_date",helpText:"Start",required:!0,condition:t=>t.quarter&&"custom_period"===t.quarter.value||!e,minDate:()=>r,maxDate:()=>o,estimation:{allowUnknown:!1},computeValue:e=>e}),...Object(i["b"])({id:"end_date",helpText:"End",required:!0,condition:t=>t.quarter&&"custom_period"===t.quarter.value||!e,unload:(e,t,a,n)=>{"next"===t&&(this.endDate=n.end_date)},minDate:(e,t)=>t.start_date,maxDate:()=>o,estimation:{allowUnknown:!1},computeValue:e=>e})]}}});const g=m;t["a"]=g},4582:function(e,t,a){},"48de":function(e,t,a){},"4a46":function(e,t,a){"use strict";a("41b4")},"4ba2":function(e,t,a){"use strict";var n=a("7a23");const o=Object(n["withScopeId"])("data-v-47b6d7e8");Object(n["pushScopeId"])("data-v-47b6d7e8");const i={class:"header-text-list"},r=Object(n["createTextVNode"])("Title "),s=Object(n["createTextVNode"])("Period "),c={key:1},l={key:0},d=Object(n["createTextVNode"])(" Error(s) found. Click for more "),u=Object(n["createTextVNode"])(" Report is Consistent "),p={class:"report-content"},h=Object(n["createTextVNode"])("Date Created: "),b=Object(n["createTextVNode"])("His-Core Version: "),m=Object(n["createTextVNode"])("API Version: ");Object(n["popScopeId"])();const g=o((function(e,t,a,g,f,O){const j=Object(n["resolveComponent"])("his-standard-form"),_=Object(n["resolveComponent"])("ion-title"),v=Object(n["resolveComponent"])("ion-img"),y=Object(n["resolveComponent"])("ion-thumbnail"),w=Object(n["resolveComponent"])("ion-chip"),N=Object(n["resolveComponent"])("ion-label"),C=Object(n["resolveComponent"])("ion-item"),V=Object(n["resolveComponent"])("ion-toolbar"),D=Object(n["resolveComponent"])("ion-header"),k=Object(n["resolveComponent"])("report-table"),T=Object(n["resolveComponent"])("ion-content"),I=Object(n["resolveComponent"])("ion-footer"),x=Object(n["resolveComponent"])("his-footer"),S=Object(n["resolveComponent"])("ion-page");return Object(n["openBlock"])(),Object(n["createBlock"])(n["Fragment"],null,[Object(n["withDirectives"])(Object(n["createVNode"])(j,{onOnFinish:e.onFinish,skipSummary:!0,fields:e.fields},null,8,["onOnFinish","fields"]),[[n["vShow"],!e.canShowReport]]),e.canShowReport?(Object(n["openBlock"])(),Object(n["createBlock"])(S,{key:0},{default:o(()=>[Object(n["createVNode"])(D,null,{default:o(()=>[Object(n["createVNode"])(V,null,{default:o(()=>[e.showtitleOnly?(Object(n["openBlock"])(),Object(n["createBlock"])(_,{key:0},{default:o(()=>[Object(n["createVNode"])("span",{innerHTML:e.title},null,8,["innerHTML"])]),_:1})):Object(n["createCommentVNode"])("",!0),e.showtitleOnly?Object(n["createCommentVNode"])("",!0):(Object(n["openBlock"])(),Object(n["createBlock"])(C,{key:1},{default:o(()=>[Object(n["createVNode"])(y,{slot:"start"},{default:o(()=>[Object(n["createVNode"])(v,{src:e.logo},null,8,["src"])]),_:1}),Object(n["createVNode"])(N,null,{default:o(()=>[Object(n["createVNode"])("ul",i,[Object(n["createVNode"])("li",null,[r,Object(n["createVNode"])("b",null,Object(n["toDisplayString"])(e.title),1)]),Object(n["createVNode"])("li",null,[s,Object(n["createVNode"])("b",null,Object(n["toDisplayString"])(e.period),1)]),(Object(n["openBlock"])(!0),Object(n["createBlock"])(n["Fragment"],null,Object(n["renderList"])(e.headerInfoList,(e,t)=>{var a,o;return Object(n["openBlock"])(),Object(n["createBlock"])("li",{key:t},[Object(n["createTextVNode"])(Object(n["toDisplayString"])(e.label)+" ",1),e&&null!==e&&void 0!==e&&null!==(a=e.other)&&void 0!==a&&a.onclick?(Object(n["openBlock"])(),Object(n["createBlock"])("a",{key:0,href:"#",onClick:Object(n["withModifiers"])(t=>e.other.onclick(),["prevent"])},Object(n["toDisplayString"])(e.value),9,["onClick"])):Object(n["createCommentVNode"])("",!0),!e||null!==e&&void 0!==e&&null!==(o=e.other)&&void 0!==o&&o.onclick?Object(n["createCommentVNode"])("",!0):(Object(n["openBlock"])(),Object(n["createBlock"])("b",c,[Object(n["createVNode"])("span",{innerHTML:e.value},null,8,["innerHTML"])]))])}),128)),e.showValidationStatus?(Object(n["openBlock"])(),Object(n["createBlock"])("li",l,[e.hasErrors?(Object(n["openBlock"])(),Object(n["createBlock"])(w,{key:0,onClick:e.showErrors,color:"danger"},{default:o(()=>[Object(n["createVNode"])("b",null,Object(n["toDisplayString"])(e.errorCount),1),d]),_:1},8,["onClick"])):Object(n["createCommentVNode"])("",!0),e.hasErrors?Object(n["createCommentVNode"])("",!0):(Object(n["openBlock"])(),Object(n["createBlock"])(w,{key:1,color:"success"},{default:o(()=>[u]),_:1}))])):Object(n["createCommentVNode"])("",!0)])]),_:1})]),_:1}))]),_:1})]),_:1}),Object(n["createVNode"])(T,null,{default:o(()=>[Object(n["createVNode"])("div",p,[Object(n["createVNode"])(k,{rows:e.rows,columns:e.columns,showFilters:e.showFilters,config:{...e.config,tableCssTheme:e.tableCssTheme},onOnActiveColumns:e.onActiveColumns,onOnActiveRows:e.onActiveRows},null,8,["rows","columns","showFilters","config","onOnActiveColumns","onOnActiveRows"])])]),_:1}),Object(n["createVNode"])(I,null,{default:o(()=>[Object(n["createVNode"])(V,null,{default:o(()=>[Object(n["createVNode"])(w,{color:"primary"},{default:o(()=>[h,Object(n["createVNode"])("b",null,Object(n["toDisplayString"])(e.date),1)]),_:1}),Object(n["createVNode"])(w,{color:"primary"},{default:o(()=>[b,Object(n["createVNode"])("b",null,Object(n["toDisplayString"])(e.coreVersion),1)]),_:1}),Object(n["createVNode"])(w,{color:"primary"},{default:o(()=>[m,Object(n["createVNode"])("b",null,Object(n["toDisplayString"])(e.apiVersion),1)]),_:1})]),_:1})]),_:1}),Object(n["createVNode"])(x,{btns:e.btns},null,8,["btns"])]),_:1})):Object(n["createCommentVNode"])("",!0)],64)}));var f=a("0f25"),O=a("80e3"),j=a("ba82"),_=a("9ceb"),v=a("7920"),y=a("8a30"),w=a("b5e4"),N=a("1718"),C=a("1c74"),V=a("5a0c"),D=a.n(V),k=a("2ef0");const T=Object(n["withScopeId"])("data-v-0ed0c7a2");Object(n["pushScopeId"])("data-v-0ed0c7a2");const I=Object(n["createTextVNode"])(" Close ");Object(n["popScopeId"])();const x=T((function(e,t,a,o,i,r){const s=Object(n["resolveComponent"])("ion-title"),c=Object(n["resolveComponent"])("ion-toolbar"),l=Object(n["resolveComponent"])("ion-header"),d=Object(n["resolveComponent"])("ion-item"),u=Object(n["resolveComponent"])("ion-list"),p=Object(n["resolveComponent"])("ion-grid"),h=Object(n["resolveComponent"])("ion-button"),b=Object(n["resolveComponent"])("ion-footer");return Object(n["openBlock"])(),Object(n["createBlock"])(n["Fragment"],null,[Object(n["createVNode"])(l,null,{default:T(()=>[Object(n["createVNode"])(c,null,{default:T(()=>[Object(n["createVNode"])(s,null,{default:T(()=>[Object(n["createTextVNode"])(Object(n["toDisplayString"])(e.title),1)]),_:1})]),_:1})]),_:1}),Object(n["createVNode"])(p,{class:"selector"},{default:T(()=>[Object(n["createVNode"])(u,null,{default:T(()=>[(Object(n["openBlock"])(!0),Object(n["createBlock"])(n["Fragment"],null,Object(n["renderList"])(e.errors,(e,t)=>(Object(n["openBlock"])(),Object(n["createBlock"])(d,{class:"his-md-text ion-padding",key:t},{default:T(()=>[Object(n["createVNode"])("span",{innerHTML:`(${t+1}) ${e}`},null,8,["innerHTML"])]),_:2},1024))),128))]),_:1})]),_:1}),Object(n["createVNode"])(b,null,{default:T(()=>[Object(n["createVNode"])(c,null,{default:T(()=>[Object(n["createVNode"])(h,{class:"close-btn",color:"danger",size:"large",onClick:e.closeModal,slot:"end"},{default:T(()=>[I]),_:1},8,["onClick"])]),_:1})]),_:1})],64)}));var S=Object(n["defineComponent"])({components:{IonGrid:y["p"],IonList:y["y"],IonItem:y["w"],IonFooter:y["o"],IonButton:y["d"],IonToolbar:y["Q"],IonHeader:y["q"],IonTitle:y["P"]},props:{title:{type:String,default:"Report Errors"},errors:{type:Array,required:!0}},methods:{async closeModal(){await y["X"].dismiss({})}}}),P=(a("054e"),a("6b0d")),A=a.n(P);const E=A()(S,[["render",x],["__scopeId","data-v-0ed0c7a2"]]);var B=E,R=Object(n["defineComponent"])({components:{HisStandardForm:v["a"],IonHeader:y["q"],ReportTable:O["a"],HisFooter:f["a"],IonPage:y["D"],IonContent:y["n"],IonToolbar:y["Q"],IonChip:y["l"],IonFooter:y["o"],IonLabel:y["x"],IonThumbnail:y["O"],IonItem:y["w"],IonImg:y["s"]},props:{showValidationStatus:{type:Boolean,default:!1},validationErrors:{type:Array,default:()=>[]},config:{type:Object},headerInfoList:{type:Array,default:()=>[]},reportPrefix:{type:String,default:"HIS-Core"},reportLogo:{type:String},showtitleOnly:{type:Boolean,default:!1},title:{type:String,required:!0},period:{type:String},showFilters:{type:Boolean,default:!1},fields:{type:Object},columns:{type:Object,required:!0},rows:{type:Object,required:!0},customBtns:{type:Array,default:()=>[]},hasServerSideCaching:{type:Boolean,default:!1},canExportPDf:{type:Boolean,default:!0},canExportCsv:{type:Boolean,default:!0},enabledPDFHorizontalPageBreak:{type:Boolean,default:!1},onFinishBtnAction:{type:Function},onReportConfiguration:{type:Function,required:!0},onDefaultConfiguration:{type:Function},customFileName:{type:String,default:""}},data:()=>({date:"",formData:{},btns:[],computeFormData:{},activeColumns:[],activeRows:[],isLoadingData:!1,canShowReport:!1,siteUUID:C["e"].getSiteUUID(),apiVersion:C["e"].getApiVersion(),coreVersion:C["e"].getCoreVersion(),artVersion:C["e"].getAppVersion(),tableCssTheme:"art-report-theme"}),watch:{validationErrors:{handler(e){Object(k["isEmpty"])(e)||this.showErrors()},deep:!0,immediate:!0},fields:{handler(e){Object(k["isEmpty"])(e)||this.btns.forEach(e=>{"Back"===e.name&&(e.visible=!0)})},immediate:!0}},computed:{logo(){if(!this.reportLogo&&"string"===typeof this.reportPrefix){if(this.reportPrefix.match(/pepfar/i))return Object(N["a"])("login-logos/PEPFAR.png");if(this.reportPrefix.match(/moh/i))return Object(N["a"])("login-logos/Malawi-Coat_of_arms_of_arms.png")}return Object(N["a"])("reports.png")},hasErrors(){return!Object(k["isEmpty"])(this.validationErrors)},errorCount(){return this.validationErrors?this.validationErrors.length:0}},methods:{async showErrors(){const e=await y["X"].create({component:B,backdropDismiss:!1,cssClass:"large-modal",componentProps:{errors:this.validationErrors}});e.present()},refreshTimeStamp(){this.date=D()().format("DD/MMM/YYYY HH:MM:ss")},onActiveColumns(e){this.activeColumns=e},onActiveRows(e){this.activeRows=e},getFileName(){return this.customFileName?this.customFileName:`${this.reportPrefix} ${C["e"].getLocationName()} ${this.title} ${this.period}`},async onLoadDefault(){this.canShowReport=!0,await this.presentLoading();try{this.refreshTimeStamp(),this.onDefaultConfiguration&&await this.onDefaultConfiguration(),y["V"].dismiss()}catch(e){Object(w["c"])(e),console.error(e),y["V"].dismiss()}},async onFinish(e,t,a=!1){this.formData=e,this.computeFormData=t,this.canShowReport=!0,await this.presentLoading();try{this.refreshTimeStamp(),await this.onReportConfiguration(this.formData,this.computeFormData,a),y["V"].dismiss()}catch(n){Object(w["c"])(n),console.error(n),y["V"].dismiss()}},async reloadReport(e=!1){Object(k["isEmpty"])(this.formData)&&Object(k["isEmpty"])(this.computeFormData)?this.onDefaultConfiguration&&await this.onLoadDefault():await this.onFinish(this.formData,this.computeFormData,e)},async presentLoading(){const e=await y["V"].create({message:"Please wait...",backdropDismiss:!1});await e.present()}},created(){this.onDefaultConfiguration&&this.onLoadDefault(),this.btns=this.customBtns,this.btns.push({name:"CSV",size:"large",slot:"start",color:"primary",visible:this.canExportCsv,onClick:async()=>{const{columns:e,rows:t}=Object(_["b"])(this.activeColumns,this.activeRows);Object(j["a"])(e,[...t,["Date Created: "+this.date],["Quarter: "+this.period],["HIS-Core Version: "+this.coreVersion],["API Version: "+this.apiVersion],["Site UUID: "+this.siteUUID]],this.getFileName())}}),this.btns.push({name:"PDF",size:"large",slot:"start",color:"primary",visible:this.canExportPDf,onClick:async()=>{const{columns:e,rows:t}=Object(_["b"])(this.activeColumns,this.activeRows);Object(j["b"])(e,t,this.getFileName(),this.enabledPDFHorizontalPageBreak)}}),this.btns.push({name:"Refresh/Rebuild",size:"large",slot:"end",color:"warning",visible:!0,onClick:async()=>{let e=!1;this.hasServerSideCaching&&(e=await Object(w["a"])("Do you want to rebuild report cache?",{header:"Rebuild Report"})),this.reloadReport(e)}}),this.btns.push({name:"Back",size:"large",slot:"end",color:"primary",visible:!Object(k["isEmpty"])(this.fields),onClick:()=>this.canShowReport=!1}),this.btns.push({name:"Finish",size:"large",slot:"end",color:"success",visible:!0,onClick:()=>{this.onFinishBtnAction?this.onFinishBtnAction():this.$router.push({path:"/"})}})}});a("4a46");const F=A()(R,[["render",g],["__scopeId","data-v-47b6d7e8"]]);t["a"]=F},"4ccf":function(e,t,a){},"4cf3":function(e,t,a){"use strict";a("1afa")},"4db7":function(e,t,a){"use strict";a.d(t,"a",(function(){return i}));var n=a("b89f"),o=a("bef6");class i extends n["a"]{constructor(e){super(),this.patient=e,this.baseUrl=`patients/${this.patient}/labels/`}getLblUrl(e,t={}){const a=o["a"].parameterizeObjToString(t);return`${this.baseUrl}${e}${a?"?"+a:""}`}printPatientLbl(e,t={}){return this.printLbl(this.getLblUrl(e,t))}printFilingNumberLbl(){return this.printPatientLbl("filing_number")}printNidLbl(){return this.printPatientLbl("national_health_id")}printVisitSummaryLbl(e=n["a"].getSessionDate()){const t=`programs/${n["a"].getProgramID()}/${this.baseUrl}/visits?date=${e}`;return this.printLbl(t)}printDemographicsLbl(){const e=`programs/${n["a"].getProgramID()}/${this.baseUrl}/patient_history`;return this.printLbl(e)}printTransferOutLbl(){return this.printPatientLbl("transfer_out")}printLabOrderLbl(e){return this.printLbl("lab/labels/order?order_id="+e)}}},"4e4d":function(e,t,a){"use strict";a("4e77")},"4e77":function(e,t,a){},"4f45":function(e,t,a){},"4fc5":function(e,t,a){},"50e0":function(e,t,a){},"50e7":function(e,t,a){"use strict";a.d(t,"a",(function(){return o}));var n=a("1c74");class o extends n["e"]{constructor(){super()}static nextTask(e){return super.getJson(`/workflows/${super.getProgramID()}/${e}`,{date:super.getSessionDate()})}static async getNextTaskParams(e,t=""){let a=t;try{if(!a){const{name:t}=await o.nextTask(e);a=t}}catch(n){a=""}return{name:a.toLowerCase(),params:{patient_id:e}}}}},"51c8":function(e,t,a){"use strict";var n=a("fe70"),o=a("7a23"),i=Object(o["defineComponent"])({data:()=>({isReadyOnly:!1}),created(){this.isReadyOnly=!Object(n["d"])("desktop")},emits:["onValue","onFieldActivated"],props:{config:{type:Object,default:()=>({})},preset:{type:Object,default:()=>({label:"",value:""})},defaultValue:{type:Function},fdata:{type:Object,required:!0},cdata:{type:Object,required:!0},clear:{type:Number,required:!0},options:{type:Function,default:()=>[]},activationState:{type:String,default:""},onValue:{type:Function},onValueUpdate:{type:Function},footerButtonEvent:{type:Object}}});const r=i;t["a"]=r},5245:function(e,t,a){"use strict";a("6ec4")},"52f5":function(e,t,a){"use strict";a("da4d")},5357:function(e,t,a){"use strict";a("5b1c")},"55ff":function(e,t,a){"use strict";a("f085")},5713:function(e,t,a){"use strict";a.d(t,"a",(function(){return i}));var n=a("1c74"),o=a("8158");class i extends n["e"]{constructor(){super()}static createAddress(e,t,a){return this.postJson("addresses",{address_type:e,addresses_name:t,parent_location:a})}static getFacilities(e={}){return super.getJson("/locations",e)}static async getSpecialistClinics(){const e=await o["a"].getConceptID("Specialist clinic");return super.getJson("/concept_set",{id:e})}static getRegions(){return super.getJson("/regions")}static getDistricts(e){return super.getJson("/districts",{region_id:e,page_size:1e3})}static getVillages(e,t=""){return super.getJson("/villages",{traditional_authority_id:e,name:t})}static getTraditionalAuthorities(e,t=""){return super.getJson("/traditional_authorities",{district_id:e,name:t})}}},5969:function(e,t,a){"use strict";a.d(t,"a",(function(){return s}));var n=a("1c74"),o=a("9283"),i=a("5a0c"),r=a.n(i);class s extends n["e"]{constructor(){super(),this.endDate="",this.startDate="",this.quarter="",this.date=n["e"].getSessionDate(),this.programID=n["e"].getProgramID()}getDateIntervalPeriod(){return`${o["b"].toStandardHisDisplayFormat(this.startDate)} - ${o["b"].toStandardHisDisplayFormat(this.endDate)}`}setStartDate(e){this.startDate=e}setEndDate(e){this.endDate=e}setQuarter(e){this.quarter=e}getReport(e,t={}){return n["e"].getJson(e,this.buildRequest(t))}buildRequest(e={}){const t={date:this.date,program_id:this.programID};return this.startDate&&this.endDate&&(t["start_date"]=this.startDate,t["end_date"]=this.endDate),this.quarter&&(t["quarter"]=this.quarter),{...t,...e}}static getQuarterBounds(e){const t=t=>r()(`${e}-${t}-01`).daysInMonth(),a=t=>`${e}-${t}-01 00:00`,n=a=>`${e}-${a}-${t(a)} 00:00`;return{Q1:{qtr:1,start:a("01"),end:n("03")},Q2:{qtr:2,start:a("04"),end:n("06")},Q3:{qtr:3,start:a("07"),end:n("09")},Q4:{qtr:4,start:a("10"),end:n("12")}}}static getQtrByDate(e){const t=this.getQuarterBounds(e.getFullYear());for(const a in t){const{start:n,end:o}=t[a];if(e>=new Date(n)&&e<=new Date(o))return t[a]}return null}static buildQtrObj(e,t){const a=this.getQuarterBounds(t),{start:n,end:o}=a[e];return{start:n,end:o,name:`${e} ${t}`}}static getReportQuarters(e=5){const t=[];let a=new Date,n=a.getFullYear();const o=n;a=new Date(`${o}-${a.getMonth()+1}-${a.getDate()} 00:00`);const i=this.getQtrByDate(a);let r=i.qtr,s=0;4===r&&t.push(this.buildQtrObj("Q1",n+1));while(s<e)0===s&&r<4&&t.push(this.buildQtrObj("Q"+(r+1),n)),t.push(this.buildQtrObj("Q"+r,n)),r=r>0?r-=1:r,n=0==r?n-1:n,r=0==r?r+=4:r,s++;return t}}},5979:function(e,t,a){},"59cf":function(e,t,a){"use strict";a("9ad3")},"5a7d":function(e,t,a){},"5b1c":function(e,t,a){},"5b4a":function(e,t,a){"use strict";a("1ea3")},"5ba0":function(e,t,a){"use strict";a("b46d")},"5e75":function(e,t,a){"use strict";var n=a("7a23");function o(e,t,a,o,i,r){const s=Object(n["resolveComponent"])("base-input"),c=Object(n["resolveComponent"])("view-port"),l=Object(n["resolveComponent"])("his-keyboard");return Object(n["openBlock"])(),Object(n["createBlock"])(n["Fragment"],null,[Object(n["createVNode"])(c,null,{default:Object(n["withCtx"])(()=>[Object(n["createVNode"])(s,{value:e.value,onOnValue:e.onKbValue},null,8,["value","onOnValue"])]),_:1}),Object(n["createVNode"])(l,{kbConfig:e.keyboard,onKeyPress:e.keypress,disabled:!1},null,8,["kbConfig","onKeyPress"])],64)}var i=a("36ad"),r=a("db10"),s=a("2345"),c=a("6be2"),l=a("0a79"),d=a("51c8"),u=Object(n["defineComponent"])({components:{BaseInput:i["a"],HisKeyboard:r["a"],ViewPort:l["a"]},mixins:[d["a"]],data:()=>({value:"",keyboard:c["d"]}),activated(){this.$emit("onFieldActivated",this),"boolean"===typeof this.config.noChars&&(this.keyboard=this.config.noChars?c["d"]:c["f"])},async mounted(){this.setDefaultValue(),this.config.keypad&&(this.keyboard=this.config.keypad),await this.setDefaultValue()},methods:{async setDefaultValue(){if("function"===typeof this.defaultValue){const e=await this.defaultValue(this.fdata,this.cdata);e&&(this.value=""+e)}},onKbValue(e){this.value=e},keypress(e){this.value=Object(s["a"])(e,this.value)}},watch:{value(e){this.$emit("onValue",e?{label:e,value:e}:null)},clear(){this.value=""}}}),p=a("6b0d"),h=a.n(p);const b=h()(u,[["render",o]]);t["a"]=b},"5fd1":function(e,t,a){"use strict";var n=a("7a23");const o=Object(n["withScopeId"])("data-v-85e67da8");Object(n["pushScopeId"])("data-v-85e67da8");const i={class:"his-lg-text"};Object(n["popScopeId"])();const r=o((function(e,t,a,r,s,c){const l=Object(n["resolveComponent"])("ion-col"),d=Object(n["resolveComponent"])("ion-label"),u=Object(n["resolveComponent"])("ion-segment-button"),p=Object(n["resolveComponent"])("ion-segment"),h=Object(n["resolveComponent"])("ion-row"),b=Object(n["resolveComponent"])("ion-grid"),m=Object(n["resolveComponent"])("view-port");return Object(n["openBlock"])(),Object(n["createBlock"])("div",null,[Object(n["createVNode"])(m,{showFull:!0},{default:o(()=>[Object(n["createVNode"])(b,{class:"view-port-content"},{default:o(()=>[Object(n["createVNode"])(h,null,{default:o(()=>[(Object(n["openBlock"])(!0),Object(n["createBlock"])(n["Fragment"],null,Object(n["renderList"])(e.listData,(t,a)=>(Object(n["openBlock"])(),Object(n["createBlock"])(l,{size:e.getSize,key:a},{default:o(()=>[Object(n["createVNode"])(b,null,{default:o(()=>[Object(n["createVNode"])(h,null,{default:o(()=>[Object(n["createVNode"])(l,{size:"6",class:"ion-col"},{default:o(()=>[Object(n["createVNode"])("span",i,Object(n["toDisplayString"])(t.label),1)]),_:2},1024),Object(n["createVNode"])(l,{size:"6"},{default:o(()=>[Object(n["createVNode"])(p,{mode:"ios",modelValue:t.value,"onUpdate:modelValue":e=>t.value=e,onIonChange:()=>e.onChange(t)},{default:o(()=>[(Object(n["openBlock"])(!0),Object(n["createBlock"])(n["Fragment"],null,Object(n["renderList"])(t.other.values,(e,t)=>(Object(n["openBlock"])(),Object(n["createBlock"])(u,{class:"yes-no his-lg-text",key:t,value:e.value},{default:o(()=>[Object(n["createVNode"])(d,null,{default:o(()=>[Object(n["createTextVNode"])(Object(n["toDisplayString"])(e.label),1)]),_:2},1024)]),_:2},1032,["value"]))),128))]),_:2},1032,["modelValue","onUpdate:modelValue","onIonChange"])]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1032,["size"]))),128))]),_:1})]),_:1})]),_:1})])}));var s=a("82a9"),c=a("8a30"),l=a("2ef0"),d=Object(n["defineComponent"])({components:{IonRow:c["H"],IonGrid:c["p"],IonLabel:c["x"],IonCol:c["m"],IonSegmentButton:c["J"],IonSegment:c["I"]},name:"HisMultiYesNo",mixins:[s["a"]],watch:{footerButtonEvent:{handler(e){var t,a;e&&"function"===typeof(null===(t=e.onClickComponentEvents)||void 0===t?void 0:t.refreshOptions)&&(this.listData=null===(a=e.onClickComponentEvents)||void 0===a?void 0:a.refreshOptions(e,this.listData,this.fdata,this.cdata),this.$emit("onValue",Object(l["isEmpty"])(this.listData)?null:this.listData))},deep:!0,immediate:!0},clear(){this.listData=this.listData.map(e=>(e.value="",e))}},computed:{getSize(){return this.listData.length>6?"6":"12"}},async activated(){this.$emit("onFieldActivated",this);const e=this.listData.filter(e=>""!=e.value);this.listData=await this.options(this.fdata,e)},methods:{onChange(e){this.$nextTick(async()=>{const t=this.listData.map(e=>""!=e.value);if("function"===typeof this.onValue){const t=await this.onValue(e,this.fdata,this.cdata);if(!t)return void(e.value="")}"function"===typeof this.onValueUpdate&&(this.listData=await this.onValueUpdate(this.listData,e)),t.every(Boolean)&&this.$emit("onValue",this.listData)})}}}),u=(a("3db2"),a("6b0d")),p=a.n(u);const h=p()(d,[["render",r],["__scopeId","data-v-85e67da8"]]);t["a"]=h},6460:function(e,t,a){},6547:function(e,t,a){},"65d1":function(e,t,a){"use strict";a("19ff")},"66fd":function(e,t,a){"use strict";a.d(t,"a",(function(){return n}));var n,o=a("ad49");function i(e){return o["a"].set(n.PACS_ENABLED,""+e)}function r(){return o["a"].isProp(n.PACS_ENABLED+"=true")}(function(e){e["PACS_ENABLED"]="enable_pacs"})(n||(n={})),t["b"]={enablePACs:i,isPACsEnabled:r}},6967:function(e,t,a){"use strict";a("0a4e")},"69b6":function(e,t,a){"use strict";a("03b0")},"69c8":function(e,t,a){},"69cf":function(e,t,a){"use strict";var n=a("7a23");const o={key:0,style:{color:"red","font-weight":"bold"}};function i(e,t,a,i,r,s){const c=Object(n["resolveComponent"])("base-input"),l=Object(n["resolveComponent"])("view-port"),d=Object(n["resolveComponent"])("his-keyboard");return Object(n["openBlock"])(),Object(n["createBlock"])(n["Fragment"],null,[Object(n["createVNode"])(l,null,{default:Object(n["withCtx"])(()=>[Object(n["createVNode"])(c,{value:e.value,onOnValue:e.onKbValue},null,8,["value","onOnValue"]),e.errors?(Object(n["openBlock"])(),Object(n["createBlock"])("span",o," **"+Object(n["toDisplayString"])(e.errors)+"** ",1)):Object(n["createCommentVNode"])("",!0)]),_:1}),Object(n["createVNode"])(d,{kbConfig:e.keyboard,onKeyPress:e.keypress,disabled:!1},null,8,["kbConfig","onKeyPress"])],64)}var r=a("36ad"),s=a("db10"),c=a("2345"),l=a("6be2"),d=a("0a79"),u=a("3800"),p=a("51c8"),h=Object(n["defineComponent"])({components:{BaseInput:r["a"],HisKeyboard:s["a"],ViewPort:d["a"]},mixins:[p["a"]],data:()=>({value:"",errors:"",minDays:1,maxDays:30,keyboard:[]}),async activated(){this.$emit("onFieldActivated",this);let e=u["g"];this.config?(this.config.year&&this.config.month&&(e=this.generateKeypad(this.config.year(this.fdata),this.config.month(this.fdata))),this.config.keyboardActions?this.keyboard=[e,this.config.keyboardActions]:this.keyboard=[e,[["Unknown"]]]):this.keyboard=l["b"],await this.setDefaultValue()},methods:{onKbValue(e){this.value=e,this.emitValue()},keypress(e){this.value=Object(c["a"])(e,""),this.emitValue()},emitValue(){this.errors="";let e=this.value;if(e)if(e.toString().match(/unknown/i))this.$emit("onValue",{label:"Unknown",value:"Unknown"});else{if(isNaN(e))return this.errors="Invalid number",void this.$emit("onValue",null);e=parseInt(e),e<this.minDays||e>this.maxDays?(this.errors="Value number is out of range",this.$emit("onValue",null)):this.$emit("onValue",{label:e,value:e})}else this.$emit("onValue",null)},generateKeypad(e,t){const a=[[]];this.maxDays=new Date(e,t,0).getDate();let n=0,o=0;for(let i=0;i<this.maxDays;++i)o>7&&(++n,a[n]=[],o=0),a[n].push(""+(i+1)),++o;return a},async setDefaultValue(){if(this.defaultValue&&!this.value){const e=await this.defaultValue(this.fdata,this.cdata);e&&(this.value=e,this.emitValue())}}},watch:{clear(){this.value=""}}}),b=a("6b0d"),m=a.n(b);const g=m()(h,[["render",i]]);t["a"]=g},"6ba7":function(e,t,a){"use strict";a("1bc0")},"6be2":function(e,t,a){"use strict";a.d(t,"d",(function(){return i})),a.d(t,"g",(function(){return r})),a.d(t,"f",(function(){return s})),a.d(t,"e",(function(){return c})),a.d(t,"c",(function(){return l})),a.d(t,"b",(function(){return d})),a.d(t,"h",(function(){return p})),a.d(t,"a",(function(){return h}));var n=a("3800");const o=[n["k"],[["","Delete"]]],i=[n["i"],[["Delete"]]],r=[n["i"],[["Delete","Unknown"]]],s=[n["i"],[["N/A"],["Delete","Unknown"]]],c=[n["i"],[["Delete"]]],l=[n["i"],[["Unknown","Delete"],["Qwerty","A-Z"]]],d=[n["g"],[["Unknown"]]],u=[n["a"],[["0-9","Delete"],["Qwerty","Unknown"],["","Space"]]],p=[n["j"],[["","Delete"],["?123","0-9"],["Space","Unknown"]]],h=[{btn:"0-9",keyboard:l},{btn:"?123",keyboard:o},{btn:"A-Z",keyboard:u},{btn:"Qwerty",keyboard:p}]},"6dce":function(e,t,a){"use strict";a("c481")},"6dff":function(e,t,a){},"6ec4":function(e,t,a){},"6ef9":function(e,t,a){"use strict";var n=a("7a23");const o=Object(n["withScopeId"])("data-v-59175e58"),i=o((function(e,t,a,i,r,s){const c=Object(n["resolveComponent"])("ion-input"),l=Object(n["resolveComponent"])("ion-col"),d=Object(n["resolveComponent"])("base-input"),u=Object(n["resolveComponent"])("ion-row"),p=Object(n["resolveComponent"])("ion-grid"),h=Object(n["resolveComponent"])("ion-label"),b=Object(n["resolveComponent"])("ion-item"),m=Object(n["resolveComponent"])("ion-list"),g=Object(n["resolveComponent"])("view-port"),f=Object(n["resolveComponent"])("his-keyboard");return Object(n["openBlock"])(),Object(n["createBlock"])(n["Fragment"],null,[Object(n["createVNode"])(g,{showFull:!1},{default:o(()=>[Object(n["createVNode"])(p,null,{default:o(()=>[Object(n["createVNode"])(u,null,{default:o(()=>[e.prependValue?(Object(n["openBlock"])(),Object(n["createBlock"])(l,{key:0,"size-md":"4"},{default:o(()=>[Object(n["createVNode"])(c,{readonly:e.isReadOnly,value:e.prependValue,class:"input_display",disabled:!0},null,8,["readonly","value"])]),_:1})):Object(n["createCommentVNode"])("",!0),Object(n["createVNode"])(l,{"size-md":""},{default:o(()=>[Object(n["createVNode"])(d,{type:e.inputType,value:e.value,onOnValue:e.onKbValue},null,8,["type","value","onOnValue"])]),_:1})]),_:1})]),_:1}),e.listData.length>0?(Object(n["openBlock"])(),Object(n["createBlock"])(m,{key:0,class:"view-port-content"},{default:o(()=>[(Object(n["openBlock"])(!0),Object(n["createBlock"])(n["Fragment"],null,Object(n["renderList"])(e.listData,(t,a)=>(Object(n["openBlock"])(),Object(n["createBlock"])(b,{class:"his-md-text",button:"",key:a,onClick:a=>e.onselect(t)},{default:o(()=>[Object(n["createVNode"])(h,null,{default:o(()=>[Object(n["createTextVNode"])(Object(n["toDisplayString"])(t.label),1)]),_:2},1024)]),_:2},1032,["onClick"]))),128))]),_:1})):Object(n["createCommentVNode"])("",!0)]),_:1}),Object(n["createVNode"])(f,{initalKeyboardName:e.initalKeyboardName,kbConfig:e.keyboard,onKeyPress:e.keypress,disabled:!1},null,8,["initalKeyboardName","kbConfig","onKeyPress"])],64)}));var r=a("36ad"),s=a("db10"),c=a("2345"),l=a("6be2"),d=a("0a79"),u=a("51c8"),p=a("2ef0"),h=a("8a30"),b=Object(n["defineComponent"])({components:{IonInput:h["v"],IonRow:h["H"],IonCol:h["m"],IonGrid:h["p"],BaseInput:r["a"],HisKeyboard:s["a"],ViewPort:d["a"],IonList:h["y"],IonItem:h["w"],IonLabel:h["x"]},mixins:[u["a"]],data:()=>({value:"",prependValue:"",initalKeyboardName:"",keyboard:{},listData:[]}),computed:{inputType(){return this.config&&"inputType"in this.config?this.config.inputType:"text"}},async created(){var e;this.keyboard=(null===(e=this.config)||void 0===e?void 0:e.customKeyboard)||l["h"],this.config&&this.config.initialKb&&(this.initalKeyboardName=this.config.initialKb)},async activated(){this.$emit("onFieldActivated",this),this.config&&this.config.prependValue&&(this.prependValue=await this.config.prependValue(this.fdata)),await this.setDefaultValue()},methods:{async setDefaultValue(){if(this.defaultValue&&!this.value){const e=await this.defaultValue(this.fdata,this.cdata);e&&(Object(p["isPlainObject"])(e)?(this.emitValue(e),this.value=e.value.toString()):(this.value=e,this.emitValue({label:e,value:e})))}},async emitValue(e){if(""===e.value)return this.value="",this.$emit("onValue",null);if(this.onValue){const t=await this.onValue(e);if(!t)return}e.value=this.prependValue?`${this.prependValue}${e.value}`:e.value,this.value=e.label,this.$emit("onValue",e)},async onselect(e){await this.emitValue(e)},async onKbValue(e){await this.emitValue({label:e,value:e})},async keypress(e){var t;const a=Object(c["a"])(e,this.value,null===(t=this.config)||void 0===t?void 0:t.casing);await this.emitValue({label:a,value:a})}},watch:{value:{async handler(){this.options&&(this.listData=await this.options(this.fdata))},deep:!0},clear(){this.value=""}}}),m=(a("3385"),a("6b0d")),g=a.n(m);const f=g()(b,[["render",i],["__scopeId","data-v-59175e58"]]);t["a"]=f},"6f40":function(e,t,a){},"6f4a":function(e,t,a){},"70b0":function(e,t,a){"use strict";a("f329")},"71c3":function(e,t,a){"use strict";a.d(t,"a",(function(){return o}));var n=a("1c74");class o extends n["e"]{constructor(){super()}static create(e){return this.postJson("drug_orders",e)}static updateDispensationOrders(e){return this.postJson("dispensations",{program_id:this.getProgramID(),dispensations:e.map(e=>({date:this.getSessionDate(),drug_order_id:e["order_id"],quantity:e["quantity"]}))})}static getDrugOrderHistory(e){return this.getJson("drug_orders",{patient_id:e})}static getDrugOrders(e){return this.getJson("drug_orders",{patient_id:e,date:this.getSessionDate(),program_id:this.getProgramID()})}static getAllDrugOrders(e,t=1e3){return this.getJson("drug_orders",{patient_id:e,program_id:n["e"].getProgramID(),page_size:t})}static getLastDrugsReceived(e){return this.getJson(`patients/${e}/last_drugs_received`,{date:this.getSessionDate(),program_id:this.getProgramID()})}static getDrugDosages(e,t,a=this.getSessionDate()){const n={drug_id:t,date:a};return this.getJson(`programs/${this.getProgramID()}/patients/${e}/drug_doses`,n)}static getOrderByPatient(e,t){return this.getJson("/drug_orders",{patient_id:e,program_id:this.getProgramID(),...t})}}},"71f2":function(e,t,a){"use strict";var n=a("7a23");const o=Object(n["withScopeId"])("data-v-1c88efd0"),i=o((function(e,t,a,i,r,s){const c=Object(n["resolveComponent"])("ion-col"),l=Object(n["resolveComponent"])("ion-label"),d=Object(n["resolveComponent"])("ion-segment-button"),u=Object(n["resolveComponent"])("ion-segment"),p=Object(n["resolveComponent"])("ion-row"),h=Object(n["resolveComponent"])("ion-grid"),b=Object(n["resolveComponent"])("view-port");return Object(n["openBlock"])(),Object(n["createBlock"])("div",null,[Object(n["createVNode"])(b,{showFull:!1},{default:o(()=>[Object(n["createVNode"])(h,null,{default:o(()=>[(Object(n["openBlock"])(!0),Object(n["createBlock"])(n["Fragment"],null,Object(n["renderList"])(e.filtered,(a,i)=>(Object(n["openBlock"])(),Object(n["createBlock"])(p,{button:"",key:i},{default:o(()=>[Object(n["createVNode"])(c,{size:"6"},{default:o(()=>[Object(n["createVNode"])("h1",null,Object(n["toDisplayString"])(a.label),1)]),_:2},1024),Object(n["createVNode"])(c,{size:"6"},{default:o(()=>[Object(n["createVNode"])(u,{class:"his-sm-text",mode:"ios",onIonChange:t[1]||(t[1]=t=>e.segmentChanged(t)),modelValue:e.value,"onUpdate:modelValue":t[2]||(t[2]=t=>e.value=t)},{default:o(()=>[(Object(n["openBlock"])(!0),Object(n["createBlock"])(n["Fragment"],null,Object(n["renderList"])(a.values,(e,t)=>(Object(n["openBlock"])(),Object(n["createBlock"])(d,{class:"yes-no",key:t,value:e.value},{default:o(()=>[Object(n["createVNode"])(l,null,{default:o(()=>[Object(n["createTextVNode"])(Object(n["toDisplayString"])(e.label),1)]),_:2},1024)]),_:2},1032,["value"]))),128))]),_:2},1032,["modelValue"])]),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1})])}));var r=a("82a9"),s=a("8a30"),c=Object(n["defineComponent"])({components:{IonRow:s["H"],IonGrid:s["p"],IonLabel:s["x"],IonCol:s["m"],IonSegmentButton:s["J"],IonSegment:s["I"]},name:"HisSelect",mixins:[r["a"]],watch:{clear(){this.value=""},value:{handler(e){this.$emit("onValue",e)},immediate:!0}},data:()=>({value:""}),async activated(){this.$emit("onFieldActivated",this),this.listData=await this.options(this.fdata)},async mounted(){if("function"===typeof this.defaultValue){const e=await this.defaultValue(this.fdata,this.cdata);null==e&&void 0==e||(this.value=""+e)}},methods:{onselect(e){this.$emit("onValue",e)},segmentChanged(e){this.onselect(e.detail.value)}}}),l=(a("1028"),a("6b0d")),d=a.n(l);const u=d()(c,[["render",i],["__scopeId","data-v-1c88efd0"]]);t["a"]=u},7365:function(e,t,a){"use strict";a("13d5");var n,o=a("7a23"),i=a("23e6"),r=a("ad60"),s=a("74f4"),c=a("c1e4"),l=a("2ef0"),d=a("0fa1"),u=a("7f35"),p=a("9283");(function(e){e["SET_PROVIDER"]="SET_PROVIDER",e["CHANGE_SESSION_DATE"]="change_session_date",e["GO_TO_PATIENT_DASHBOARD"]="go_to_patient_dashboard",e["CHANGE_PATIENT_OUTCOME"]="change_outcome",e["CONTINUE"]="continue",e["EXIT"]="exit"})(n||(n={}));const h=e=>p["b"].toStandardHisDisplayFormat(e),b={"Warn if attempting to create new encounters for a deceased patient":{priority:1,actions:{alert:async({outcomeStartDate:e})=>{const t=await Object(u["a"])("Data Integrity Issue Found","Patient died on "+h(e),"Proceeding with this outcome might affect accuracy of some reports",[{name:"Cancel",slot:"end",color:"primary"},{name:"Change outcome",slot:"end",color:"primary"},{name:"Continue Anyway",slot:"end",color:"danger"}]);return"Cancel"===t?n.GO_TO_PATIENT_DASHBOARD:"Change outcome"===t?n.CHANGE_PATIENT_OUTCOME:n.CONTINUE}},conditions:{outcome(e){return"Patient died"===e},outcomeStartDate(e,{sessionDate:t}){return t>=e}}},"A patient's date of birth must not be less than Session Date":{priority:2,actions:{alert:async({birthDate:e,sessionDate:t})=>{const a=await Object(u["a"])("Data integrity issue found","",`Session date ${h(t)} is less than birth date of ${h(e)}`,[{name:"Cancel",slot:"end",color:"danger"},{name:"Change session date",slot:"end",color:"success"}]);return"Change session date"===a?n.CHANGE_SESSION_DATE:n.GO_TO_PATIENT_DASHBOARD}},conditions:{birthDate(e,{sessionDate:t}){return t<e}}},"Select Encounter provider when in back data entry":{priority:3,actions:{selection:async({providers:e,encounterName:t,sessionDate:a,apiDate:o})=>{const i=await Object(u["c"])("Please select a provider for "+t,`BDE: ${h(a)} | Current: ${h(o)}`,e,[{name:"Cancel",color:"danger",slot:"start",role:"default"},{name:"Confirm",slot:"end",role:"action"}]);return"Cancel"===i.action?{value:-1,flowState:n.GO_TO_PATIENT_DASHBOARD}:{value:i.selection,flowState:n.SET_PROVIDER}}},conditions:{isBdeMode(e){return e}}}};var m=a("c21d"),g=a("7920"),f=a("8734"),O=a("b5e4"),j=Object(o["defineComponent"])({components:{HisStandardForm:g["a"]},data:()=>({patient:{},fields:[],patientID:"",providerID:-1,providers:[],facts:{sessionDate:"",apiDate:"",encounterName:"N/A",providers:[],isBdeMode:!1,birthDate:"",outcome:"",outcomeStartDate:""},ready:!1}),watch:{$route:{async handler(e){if(e.params.patient_id&&this.patientID!=e.params.patient_id){this.patientID=e.params.patient_id;const t=await i["a"].findByID(this.patientID);this.patient=new i["a"](t),await this.setEncounterFacts(),await this.checkEncounterGuidelines(),this.ready=!0}},immediate:!0,deep:!0}},computed:{cancelDestination(){return this.patientDashboardUrl()}},methods:{runflowState(e,t=null){const a={};if(a[n.SET_PROVIDER]=e=>{const[t]=e.split(" "),a=Object(l["find"])(this.providers,{username:t});return a&&(this.providerID=a.person_id),n.CONTINUE},a[n.CHANGE_SESSION_DATE]=()=>(this.$router.push("/session/date?patient_dashboard_redirection_id="+this.patientID),n.EXIT),a[n.CHANGE_PATIENT_OUTCOME]=()=>(this.$router.push("/patient/programs/"+this.patientID),n.EXIT),a[n.GO_TO_PATIENT_DASHBOARD]=()=>(this.gotoPatientDashboard(),n.EXIT),e in a)return a[e](t)},async checkEncounterGuidelines(){const e=Object(m["a"])(this.facts,b);await Object(f["a"])(200);for(const r in e){var t,a;const s=e[r];if(null!==s&&void 0!==s&&null!==(t=s.actions)&&void 0!==t&&t.alert){var o;const e=this.runflowState(await(null===s||void 0===s||null===(o=s.actions)||void 0===o?void 0:o.alert(this.facts)));if(e===n.EXIT)return}if(null!==s&&void 0!==s&&null!==(a=s.actions)&&void 0!==a&&a.selection){var i;const e=await(null===s||void 0===s||null===(i=s.actions)||void 0===i?void 0:i.selection(this.facts));this.runflowState(e.flowState,e.value)}}},async setEncounterFacts(){try{const e=await new s["a"](this.patientID).getProgram();this.facts.outcome=e.outcome,this.facts.outcomeStartDate=e.startDate}catch(e){console.error(e),Object(O["c"])(""+e)}this.facts.sessionDate=r["a"].getSessionDate(),this.facts.apiDate=r["a"].getCachedApiDate(),this.facts.isBdeMode=r["a"].isBDE(),this.facts.birthDate=this.patient.getBirthdate(),this.facts.encounterName=this.$route.name?this.$route.name.toString().toUpperCase():"N/A",r["a"].isBDE()&&(this.providers=await c["a"].getUsers(),this.facts.providers=this.providers.sort((e,t)=>{const a=e.username.toUpperCase(),n=t.username.toUpperCase();return a<n?-1:a>n?1:0}).map(e=>{var t;let a=""+e.username;if(!Object(l["isEmpty"])(null===e||void 0===e||null===(t=e.person)||void 0===t?void 0:t.names)){var n;const[t]=(null===(n=e.person)||void 0===n?void 0:n.names)||[];a+=` (${t.given_name} ${t.family_name})`}return a}))},toOption(e,t={}){return{label:e,value:e,other:t}},mapStrToOptions(e){return e.map(e=>({label:e,value:e}))},patientDashboardUrl(){return"/patient/dashboard/"+this.patientID},gotoPatientDashboard(){return this.$router.push({path:this.patientDashboardUrl()})},nextTask(){return Object(d["b"])(this.patientID,this.$router)},yesNoOptions(){return[{label:"Yes",value:"Yes"},{label:"No",value:"No"}]},toYesNoOption(e,t={}){return{label:e,value:"",other:{...t,values:this.yesNoOptions()}}},mapOptions(e){return e.map(e=>({label:e,value:e}))},yesNoUnknownOptions(){return[{label:"Yes",value:"Yes"},{label:"No",value:"No"},{label:"Unknown",value:"Unknown"}]},resolveObs(e,t=""){const a=Object.values(e).filter(e=>e&&(e.tag===t||""===t)).reduce((e,t)=>{const a=t.obs?t.obs:t;return Array.isArray(a)?e=e.concat(a):"function"===typeof a?e.push(a()):e.push(a),e},[]);return Promise.all(a)},inArray(e,t){try{return e.filter(e=>t(e)).length>0}catch(a){return!1}},validateSeries(e){try{for(const t in e){const a=e[t]();if(a)return a}}catch(t){return[t]}}}});const _=j;t["a"]=_},"749f":function(e,t,a){},"74f4":function(e,t,a){"use strict";a.d(t,"a",(function(){return s}));var n=a("ad60"),o=a("cc6f"),i=a("b89f"),r=a("2ef0");class s extends n["a"]{constructor(e){super(),this.patientId=e,this.patientProgramId=-1,this.programId=n["a"].getProgramID(),this.stateId=-1,this.programDate=n["a"].getSessionDate(),this.stateDate=""}getProgramId(){return this.programId}getStateDate(){return this.stateDate}getProgramDate(){return this.programDate}getPatientProgramId(){return this.patientProgramId}getPrograms(){return n["a"].getPatientPrograms(this.patientId)}async getProgram(){const e={program:"N/A",outcome:"N/A",startDate:"",endDate:""},t=await this.getPrograms();if(Object(r["isEmpty"])(t))return e;const a=t.filter(e=>e.program.program_id===n["a"].getProgramID()).map(e=>{const t=e.patient_states;let a="",n="",o="N/A";if(!Object(r["isEmpty"])(t)){const e=t.length-1;a=t[e].start_date,n=t[e].end_date,o=t[e].name}return{program:e.program.name,outcome:o,startDate:a,endDate:n}});return Object(r["isEmpty"])(a)?e:a[0]}getProgramStates(){return n["a"].getPatientStates(this.patientId,this.programId)}voidProgram(e){return n["a"].voidProgram(this.patientProgramId,e)}voidState(e){return n["a"].voidState(this.patientId,this.programId,this.stateId,e)}enrollProgram(){return n["a"].enrollProgram(this.patientId,this.programId,this.programDate)}printTransferout(e){const t=new i["a"];return t.printLbl(`/programs/${this.programId}/patients/${this.patientId}/labels/transfer_out?date=${e}`)}async transferOutEncounter(e){const t=new o["a"](this.patientId,119);t.setDate(this.stateDate);const a=await t.createEncounter();if(!a)throw"Unable to transfer out encounter";return t.saveValueTextObs("Transfer to",e.name)}updateState(){return n["a"].createState(this.patientId,this.programId,{state:this.stateId,date:this.stateDate})}setProgramDate(e){this.programDate=e}setStateDate(e){this.stateDate=e}setPatientProgramId(e){this.patientProgramId=e}setProgramId(e){this.programId=e}setStateId(e){this.stateId=e}}},7510:function(e,t,a){"use strict";a("c18c")},"76f1":function(e,t,a){"use strict";a.d(t,"a",(function(){return o}));var n=a("1c74");class o extends n["e"]{constructor(){super()}static getDrugs(e={}){return super.getJson("/drugs",e)}}},7708:function(e,t,a){},"77fd":function(e,t,a){"use strict";var n=a("7a23");const o=Object(n["withScopeId"])("data-v-1b2b2db4");Object(n["pushScopeId"])("data-v-1b2b2db4");const i=Object(n["createTextVNode"])("Risk Factors"),r=Object(n["createTextVNode"])(" Close "),s=Object(n["createTextVNode"])(" Manage BP "),c=Object(n["createTextVNode"])(" Save ");Object(n["popScopeId"])();const l=o((function(e,t,a,l,d,u){const p=Object(n["resolveComponent"])("ion-title"),h=Object(n["resolveComponent"])("ion-toolbar"),b=Object(n["resolveComponent"])("ion-header"),m=Object(n["resolveComponent"])("ion-label"),g=Object(n["resolveComponent"])("ion-checkbox"),f=Object(n["resolveComponent"])("ion-item"),O=Object(n["resolveComponent"])("ion-list"),j=Object(n["resolveComponent"])("ion-col"),_=Object(n["resolveComponent"])("ion-row"),v=Object(n["resolveComponent"])("ion-grid"),y=Object(n["resolveComponent"])("ion-content"),w=Object(n["resolveComponent"])("ion-button"),N=Object(n["resolveComponent"])("ion-footer");return Object(n["openBlock"])(),Object(n["createBlock"])(n["Fragment"],null,[Object(n["createVNode"])(b,null,{default:o(()=>[Object(n["createVNode"])(h,null,{default:o(()=>[Object(n["createVNode"])(p,null,{default:o(()=>[i]),_:1})]),_:1})]),_:1}),Object(n["createVNode"])(y,{style:{overflowY:"hidden",background:"grey"}},{default:o(()=>[Object(n["createVNode"])(v,null,{default:o(()=>[Object(n["createVNode"])(_,null,{default:o(()=>[Object(n["createVNode"])(j,null,{default:o(()=>[Object(n["createVNode"])(O,{style:{overflowY:"auto",height:"78vh"}},{default:o(()=>[(Object(n["openBlock"])(!0),Object(n["createBlock"])(n["Fragment"],null,Object(n["renderList"])(e.riskFactors,e=>(Object(n["openBlock"])(),Object(n["createBlock"])(f,{key:e},{default:o(()=>[Object(n["createVNode"])(m,null,{default:o(()=>[Object(n["createTextVNode"])(Object(n["toDisplayString"])(e.name),1)]),_:2},1024),Object(n["createVNode"])(g,{modelValue:e.isChecked,"onUpdate:modelValue":t=>e.isChecked=t,slot:"start"},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024))),128))]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),Object(n["createVNode"])(N,null,{default:o(()=>[Object(n["createVNode"])(h,null,{default:o(()=>[Object(n["createVNode"])(w,{size:"large",onClick:e.exit,slot:"start",color:"danger"},{default:o(()=>[r]),_:1},8,["onClick"]),e.showManageBPButton?(Object(n["openBlock"])(),Object(n["createBlock"])(w,{key:0,size:"large",onClick:e.manageBP,slot:"start"},{default:o(()=>[s]),_:1},8,["onClick"])):Object(n["createCommentVNode"])("",!0),Object(n["createVNode"])(w,{size:"large",color:"success",onClick:e.postActivities,slot:"end"},{default:o(()=>[c]),_:1},8,["onClick"])]),_:1})]),_:1})],64)}));var d=a("8a30"),u=a("cc6f");class p extends u["a"]{constructor(e,t){super(e,30,t)}}var h=a("8158"),b=Object(n["defineComponent"])({name:"Modal",props:{factors:{type:Object,required:!0},title:{type:String,default:""}},computed:{showManageBPButton(){return"bp_management"!=this.$route.name}},created(){this.patientID=parseInt(""+this.$route.params.patient_id)},methods:{async postActivities(){const e=new p(this.patientID,-1),t=await e.createEncounter();if(t){const t=await this.buildObs();await e.saveObservationList(t),await this.closeModal()}},manageBP(){this.$router.push("/art/encounters/bp_management/"+this.patientID)},exit(){d["X"].dismiss([])},async closeModal(){await d["X"].dismiss(this.riskFactors)},async buildObs(){return this.riskFactors.map(e=>{const t=!0===e.isChecked?"Yes":"No",a=h["a"].getConceptID(t,!0),n=h["a"].getConceptID(e.concept,!0);return{concept_id:n,value_coded:a}})}},data(){return{patientID:-1,riskFactors:[{name:"Diabetes",isChecked:!1,concept:"Diabetes"},{name:"Cronic kidney disease",isChecked:!1,concept:"CKD"},{name:"Past history of IHD or CVD",isChecked:!1,concept:"history of CVD"},{name:"First degree relative with IHD or CVD <65",isChecked:!1,concept:"relative with CVD"},{name:"Patient currently smokes",isChecked:!1,concept:"patient smokes"}]}},mounted(){this.factors.forEach(e=>{if("Yes"===e.value){const t=this.riskFactors.findIndex(t=>t.concept===e.concept);this.riskFactors[t].isChecked=!0}})},components:{IonButton:d["d"],IonContent:d["n"],IonHeader:d["q"],IonTitle:d["P"],IonToolbar:d["Q"],IonLabel:d["x"],IonList:d["y"],IonItem:d["w"],IonCheckbox:d["k"],IonRow:d["H"],IonFooter:d["o"],IonGrid:d["p"],IonCol:d["m"]}}),m=(a("9719"),a("6b0d")),g=a.n(m);const f=g()(b,[["render",l],["__scopeId","data-v-1b2b2db4"]]);t["a"]=f},"78dc":function(e,t,a){},7920:function(e,t,a){"use strict";var n=a("7a23");function o(e,t,a,o,i,r){return Object(n["openBlock"])(),Object(n["createBlock"])(Object(n["resolveDynamicComponent"])(e.formType),{fields:e.fields,skipSummary:e.skipSummary,activeField:e.activeField,cancelDestinationPath:e.cancelDestinationPath,onOnFinish:e.onFinish,onFinish:e.onFinishAction,onOnIndex:e.onIndex},null,8,["fields","skipSummary","activeField","cancelDestinationPath","onOnFinish","onFinish","onOnIndex"])}var i=a("9441"),r=Object(n["defineComponent"])({name:"HisStandardForm",components:{TouchScreenForm:i["a"]},emits:["onFinish","onIndex"],data:()=>({formType:"touch-screen-form"}),props:{onFinishAction:{type:Function},skipSummary:{type:Boolean,default:!1},activeField:{type:String},fields:{type:Object,required:!0},cancelDestinationPath:{type:String,required:!1}},methods:{onFinish(e,t){this.$emit("onFinish",e,t)},onIndex(e){this.$emit("onIndex",e)}}}),s=a("6b0d"),c=a.n(s);const l=c()(r,[["render",o]]);t["a"]=l},7941:function(e,t,a){"use strict";a.d(t,"a",(function(){return n}));const n=(e,t)=>{const a=e.filter(e=>e.person_attribute_type_id==t);return a.length>0?a[0].value:""}},7957:function(e,t,a){"use strict";a.d(t,"a",(function(){return r}));var n=a("8158"),o=a("9283"),i=a("2ef0");class r extends n["a"]{constructor(){super()}static get(e){return super.getJson("/observations/"+e)}static create(e){return super.postJson("/observations",e)}static voidObs(e){return super.void("observations/"+e,{})}static saveObs(e,t){return this.create({encounter_id:e,observations:[t]})}static saveObsArray(e,t){return this.create({encounter_id:e,observations:t})}static async buildValueCoded(e,t,a=this.getSessionDate()){const o=await n["a"].getConceptID(e,!0),i="number"===typeof t?t:await n["a"].getConceptID(t,!0);return{concept_id:o,value_coded:i,obs_datetime:a}}static async buildValueCodedFromConceptId(e,t,a=this.getSessionDate()){const o=await n["a"].getConceptID(e,!0);return{concept_id:o,value_coded:t,obs_datetime:a}}static async buildValueText(e,t,a=this.getSessionDate()){const o=await n["a"].getConceptID(e,!0);return{concept_id:o,value_text:t,obs_datetime:a}}static async buildValueNumber(e,t,a=null,o=null,i=this.getSessionDate()){const r=await n["a"].getConceptID(e,!0),s={concept_id:r,value_numeric:t,obs_datetime:i};return a&&Object.assign(s,{value_modifier:a}),o&&Object.assign(s,{order_id:o}),s}static async buildValueDate(e,t,a=this.getSessionDate()){const o=await n["a"].getConceptID(e,!0);return{concept_id:o,value_datetime:t,obs_datetime:a}}static getObservations(e,t){return super.getJson(`/observations?person_id=${e}&concept_id=${t}`)}static getObs(e){return super.getJson("/observations",e)}static async getFirstObs(e,t,a=this.getSessionDate(),o=!0){const s=await n["a"].getConceptID(t,o),c=await r.getObs({person_id:e,concept_id:s,date:a,page_size:1});if(!Object(i["isEmpty"])(c)){const[e]=c;return"number"===typeof e["value_coded"]&&(e["value_coded"]=await n["a"].getConceptName(e["value_coded"])),e}}static obsInValidPeriod(e){return e&&n["a"].getSessionDate()>=o["b"].toStandardHisFormat(e.obs_datetime)}static async getFirstObsValue(e,t,a,n=this.getSessionDate(),o=!0){const r=await this.getFirstObs(e,t,n,o);if(!Object(i["isEmpty"])(r))return r[a]}static async getAll(e,t,a=this.getSessionDate(),o=!0){const r=await n["a"].getConceptID(t,o),s=await this.getObs({person_id:e,concept_id:r,date:a});if(!Object(i["isEmpty"])(s))return s}static async getAllValueCoded(e,t,a=this.getSessionDate(),o=!0){const r=await this.getAll(e,t,a,o);return Object(i["isEmpty"])(r)?[]:Promise.all(r.map(e=>n["a"].getConceptName(e["value_coded"])))}static getFirstValueText(e,t,a=this.getSessionDate(),n=!0){return this.getFirstObsValue(e,t,"value_text",a,n)}static getFirstValueCoded(e,t,a=this.getSessionDate(),n=!0){return this.getFirstObsValue(e,t,"value_coded",a,n)}static getFirstValueNumber(e,t,a=this.getSessionDate(),n=!0){return this.getFirstObsValue(e,t,"value_numeric",a,n)}static getFirstValueDatetime(e,t,a=this.getSessionDate(),n=!0){return this.getFirstObsValue(e,t,"value_datetime",a,n)}static getFirstObsDatetime(e,t,a=this.getSessionDate(),n=!0){return this.getFirstObsValue(e,t,"obs_datetime",a,n)}static async resolvePrimaryValue(e){let t="";return null!=e.value_datetime&&(t=o["b"].toStandardHisDisplayFormat(e.value_datetime)),null!=e.value_text&&(t=e.value_text),null!=e.value_numeric&&(t=e.value_numeric),null!=e.value_coded&&(t=await super.getConceptName(e.value_coded)),null!=e.value_modifier&&(t=`${t} ${e.value_modifier}`),t}}},"79af":function(e,t,a){},"79fe":function(e,t,a){},"7ac4":function(e,t,a){},"7b3a":function(e,t,a){},"7b79":function(e,t,a){"use strict";a("20d7")},"7cf4":function(e,t,a){},"7cfc":function(e,t,a){"use strict";a("2a52")},"7d28":function(e,t,a){"use strict";a("6f40")},"7d9b":function(e,t,a){"use strict";a("28ac")},"7def":function(e,t,a){"use strict";a.d(t,"a",(function(){return s}));var n=a("1c74");const o=e=>{const t=e.given_name,a=e.family_name,n=e.middle_name?e.middle_name:"";return`${t} ${n} ${a}`};var i=a("7941"),r=a("2ef0");class s extends n["e"]{constructor(){super()}static getRelationships(e){return super.getJson(`/people/${e}/relationships`)}static async getGuardianDetails(e){return await this.getRelationships(e).then(e=>e.map(e=>{const t=Object(r["get"])(e,"relation.names[0]");return{name:t?o(t):"",relationshipType:Object(r["get"])(e,"type.b_is_to_a",""),phoneNumber:Object(i["a"])(Object(r["get"])(e,"relation.person_attributes",[]),12)}}))}}},"7e31":function(e,t,a){"use strict";a("8ccc")},"7e73":function(e,t,a){"use strict";a("13d5");function n(e,t=2){return e.reduce((a,n,o)=>(o%t===0&&a.push(e.slice(o,o+t)),a),[])}function o(e,t){return Object.keys(e).sort((e,a)=>t(e,a)).reduce((t,a)=>(t[a]=e[a],t),{})}t["a"]={convertArrayToTurples:n,orderObj:o}},"7f35":function(e,t,a){"use strict";a.d(t,"d",(function(){return C})),a.d(t,"b",(function(){return V})),a.d(t,"a",(function(){return D})),a.d(t,"c",(function(){return k}));var n=a("7a23");function o(e,t,a,o,i,r){const s=Object(n["resolveComponent"])("action-header"),c=Object(n["resolveComponent"])("his-table"),l=Object(n["resolveComponent"])("ion-content"),d=Object(n["resolveComponent"])("action-footer");return Object(n["openBlock"])(),Object(n["createBlock"])(n["Fragment"],null,[Object(n["createVNode"])(s,{title:e.title,subtitle:e.subtitle,color:e.color},null,8,["title","subtitle","color"]),Object(n["createVNode"])(l,null,{default:Object(n["withCtx"])(()=>[Object(n["createVNode"])(c,{columns:e.columns,rowColors:e.rowColors,rows:e.rows},null,8,["columns","rowColors","rows"])]),_:1}),Object(n["createVNode"])(d,{buttons:e.actionButtons},null,8,["buttons"])],64)}var i=a("a3a5"),r=a("8efc"),s=Object(n["defineComponent"])({mixins:[r["a"]],components:{HisTable:i["a"]},props:{rowColors:{type:Object},columns:{type:Object,required:!0},rows:{type:Object,required:!0}}}),c=a("6b0d"),l=a.n(c);const d=l()(s,[["render",o]]);var u=d;const p=Object(n["withScopeId"])("data-v-1c798292");Object(n["pushScopeId"])("data-v-1c798292");const h={class:"info-content his-md-text"};Object(n["popScopeId"])();const b=p((function(e,t,a,o,i,r){const s=Object(n["resolveComponent"])("action-header"),c=Object(n["resolveComponent"])("ion-content"),l=Object(n["resolveComponent"])("action-footer");return Object(n["openBlock"])(),Object(n["createBlock"])(n["Fragment"],null,[Object(n["createVNode"])(s,{title:e.title,subtitle:e.subtitle,color:e.color},null,8,["title","subtitle","color"]),Object(n["createVNode"])(c,null,{default:p(()=>[Object(n["createVNode"])("div",h,[Object(n["createVNode"])("h2",{class:e.color},Object(n["toDisplayString"])(e.bodyTitle),3),Object(n["createVNode"])("p",{class:"description",innerHTML:e.bodyText},null,8,["innerHTML"])])]),_:1}),Object(n["createVNode"])(l,{buttons:e.actionButtons},null,8,["buttons"])],64)}));var m=Object(n["defineComponent"])({mixins:[r["a"]],props:{bodyTitle:{type:String,required:!0},bodyText:{type:String,required:!1}}});a("55ff");const g=l()(m,[["render",b],["__scopeId","data-v-1c798292"]]);var f=g,O=a("1b47");const j=Object(n["withScopeId"])("data-v-d609962e"),_=j((function(e,t,a,o,i,r){const s=Object(n["resolveComponent"])("action-header"),c=Object(n["resolveComponent"])("ion-content"),l=Object(n["resolveComponent"])("action-footer");return Object(n["openBlock"])(),Object(n["createBlock"])(n["Fragment"],null,[Object(n["createVNode"])(s,{title:e.title,subtitle:e.subtitle,color:e.color},null,8,["title","subtitle","color"]),Object(n["createVNode"])(c,null,{default:j(()=>[Object(n["createVNode"])("ul",null,[(Object(n["openBlock"])(!0),Object(n["createBlock"])(n["Fragment"],null,Object(n["renderList"])(e.list,(e,t)=>(Object(n["openBlock"])(),Object(n["createBlock"])("li",{key:t},[Object(n["createVNode"])("span",{class:"his-md-text",innerHTML:e},null,8,["innerHTML"])]))),128))])]),_:1}),Object(n["createVNode"])(l,{buttons:e.actionButtons},null,8,["buttons"])],64)}));var v=Object(n["defineComponent"])({mixins:[r["a"]],props:{list:{type:Array,required:!0}}});a("4cf3");const y=l()(v,[["render",_],["__scopeId","data-v-d609962e"]]);var w=y,N=a("8a30");async function C(e,t,a,n,o,i="",r=[]){const s=await N["X"].create({component:u,backdropDismiss:!1,cssClass:"action-sheet-modal",componentProps:{title:e,subtitle:t,columns:a,rows:n,rowColors:r,actionButtons:o,color:i}});s.present();const{data:c}=await s.onDidDismiss();return c.action}async function V(e,t,a,n,o=""){const i=await N["X"].create({component:w,backdropDismiss:!1,cssClass:"action-sheet-modal",componentProps:{title:e,subtitle:t,actionButtons:n,list:a,color:o}});i.present();const{data:r}=await i.onDidDismiss();return r.action}async function D(e,t,a,n,o=""){const i=await N["X"].create({component:f,backdropDismiss:!1,cssClass:"action-sheet-modal",componentProps:{title:e,bodyTitle:t,bodyText:a,actionButtons:n,color:o}});i.present();const{data:r}=await i.onDidDismiss();return r.action}async function k(e,t,a,n,o="darkred",i="action-sheet-modal"){const r=await N["X"].create({component:O["a"],backdropDismiss:!1,cssClass:i,componentProps:{title:e,subtitle:t,color:o,list:a,actionButtons:n}});r.present();const{data:s}=await r.onDidDismiss();return s}},"7fe8":function(e,t,a){"use strict";a("2240")},8081:function(e,t,a){"use strict";a("da71")},"80b5":function(e,t,a){"use strict";a("13d5");var n=a("e86e"),o=a("d95e"),i=a("2706"),r=a("d10e"),s=a("b446"),c=a("9283"),l=a("23e6"),d=a("2ef0"),u=a("b5e4"),p=a("5713"),h=a("1c74");function b(e){return e.map(e=>({label:e,value:e}))}t["a"]={resolvePerson(e){let t={};for(const a in e){const n=e[a];Object(d["isPlainObject"])(n)&&"person"in n&&(Object(d["isPlainObject"])(n.person)?t={...t,...n.person}:t[a]=n["person"])}return t},getGivenNameField(){return{id:"given_name",helpText:"First name",type:o["b"].TT_TEXT,computedValue:e=>({person:e.value}),validation:e=>i["a"].isName(e),options:async e=>{if(e.given_name){const t=await r["a"].searchGivenName(e.given_name.value);return b(t)}return[]}}},getFamilyNameField(){return{id:"family_name",helpText:"Last name",type:o["b"].TT_TEXT,computedValue:e=>({person:e.value}),validation:e=>i["a"].isName(e),options:async e=>{if(e.family_name){const t=await r["a"].searchFamilyName(e.family_name.value);return b(t)}return[]}}},getGenderField(){return{id:"gender",helpText:"Gender",type:o["b"].TT_SELECT,computedValue:e=>({person:e.value}),validation:e=>i["a"].required(e),options:()=>[{label:"Female",value:"F"},{label:"Male",value:"M"}]}},getDobConfig(){return{id:"birth_date",summaryLabel:"Date of Birth",helpText:"Birth",required:!0,minDate:()=>c["b"].estimateDateFromAge(100),maxDate:()=>r["a"].getSessionDate(),estimation:{allowUnknown:!0,allowUnknownMonthDay:!0,estimationFieldType:s["a"].AGE_ESTIMATE_FIELD},computeValue:(e,t)=>({date:e,isEstimate:t,person:{birthdate:e,birthdate_estimated:t}})}},getHomeRegionField(){return{id:"home_region",helpText:"Region of origin",type:o["b"].TT_SELECT,group:"person",requireNext:!1,computedValue:e=>({person:e.label}),validation:e=>i["a"].required(e),options:()=>Object(n["d"])()}},getHomeDistrictField(){return{id:"home_district",helpText:"Home District",type:o["b"].TT_SELECT,requireNext:!1,dynamicHelpText:e=>e.home_region&&e.home_region.label.match(/foreign/i)?"Home Country":"Home District",computedValue:e=>({person:e.label}),options:e=>Object(n["a"])(e.home_region.value)}},addCustomLocationBtnForTAorVillage(e,t){return{name:"Add "+e,slot:"end",color:"success",onClick:async(a,n,o)=>{if("string"!=typeof o.filter||o.filter.length<3)return Object(u["e"])("Please enter a valid "+e);if(!Object(d["isEmpty"])(o.filtered))return Object(u["e"])("Can't add existing "+e);const i=await Object(u["a"])(`Do you want to add ${e} ${o.filter}?`);if(!i)return;const r=await p["a"].createAddress(e,o.filter,a[t].value);if(!r)return Object(u["e"])("Unable to add "+e);o.filter=o.filter.toUpperCase()}}},getHomeTaField(){return{id:"home_traditional_authority",helpText:"Home TA",type:o["b"].TT_SELECT,requireNext:!1,config:{showKeyboard:!0,isFilterDataViaApi:!0,footerBtns:[this.addCustomLocationBtnForTAorVillage("TA","home_district")]},defaultOutput:()=>({label:"N/A",value:"N/A"}),defaultComputedOutput:e=>e.home_region&&e.home_region.label.match(/foreign/i)?{person:"Unknown"}:null,computedValue:e=>({person:e.label}),validation:e=>i["a"].required(e),options:(e,t)=>Object(n["f"])(e.home_district.value,t)}},getHomeVillageField(){return{id:"home_village",helpText:"Home Village",type:o["b"].TT_SELECT,config:{showKeyboard:!0,isFilterDataViaApi:!0,footerBtns:[this.addCustomLocationBtnForTAorVillage("Village","home_traditional_authority")]},requireNext:!1,defaultOutput:()=>({label:"N/A",value:"N/A"}),defaultComputedOutput:e=>e.home_region&&e.home_region.label.match(/foreign/i)?{person:"Unknown"}:null,computedValue:e=>({person:e.label}),validation:e=>i["a"].required(e),options:(e,t)=>Object(n["g"])(e.home_traditional_authority.value,t)}},getCurrentRegionField(){return{id:"current_region",helpText:"Current Region",requireNext:!1,type:o["b"].TT_SELECT,computedValue:e=>({person:e.label}),validation:e=>i["a"].required(e),options:()=>Object(n["d"])()}},getCurrentDistrictField(){return{id:"current_district",helpText:"District",requireNext:!1,type:o["b"].TT_SELECT,dynamicHelpText:e=>e.current_region&&e.current_region.label.match(/foreign/i)?"Current Country":"Current District",computedValue:e=>({person:e.label}),validation:e=>i["a"].required(e),options:e=>Object(n["a"])(e.current_region.value)}},getCurrentTAfield(){return{id:"current_traditional_authority",helpText:"Current TA",requireNext:!1,type:o["b"].TT_SELECT,config:{showKeyboard:!0,isFilterDataViaApi:!0,footerBtns:[this.addCustomLocationBtnForTAorVillage("TA","current_district")]},defaultOutput:()=>({label:"N/A",value:"N/A"}),defaultComputedOutput:e=>e.current_region&&e.current_region.label.match(/foreign/i)?{person:"Unknown"}:null,computedValue:e=>({person:e.label}),validation:e=>i["a"].required(e),options:(e,t)=>Object(n["f"])(e.current_district.value,t)}},getCurrentVillageField(){return{id:"current_village",helpText:"Current Village",requireNext:!1,type:o["b"].TT_SELECT,config:{showKeyboard:!0,isFilterDataViaApi:!0,footerBtns:[this.addCustomLocationBtnForTAorVillage("Village","current_traditional_authority")]},defaultOutput:()=>({label:"N/A",value:"N/A"}),defaultComputedOutput:e=>e.current_region&&e.current_region.label.match(/foreign/i)?{person:"Unknown"}:null,computedValue:e=>({person:e.label}),validation:e=>i["a"].required(e),options:(e,t)=>Object(n["g"])(e.current_traditional_authority.value,t)}},getCellNumberField(){return{id:"cell_phone_number",helpText:"Cell phone number",group:"person",type:o["b"].TT_NUMBER,computedValue:e=>({person:e.label}),validation:e=>{if(!e||!e.value.match(/Unknown/i)&&!e.value.match(/n\/a/i))return i["a"].isMWPhoneNumber(e)},config:{noChars:!1}}},getLandmarkFields(){return[{id:"default_landmarks",proxyID:"landmark",helpText:"Closest Landmark or Plot Number",type:o["b"].TT_SELECT,appearInSummary:e=>"Other"!=e.default_landmarks.value,computedValue:e=>({person:e.value}),validation:e=>i["a"].required(e),options:()=>b(["Catholic Church","CCAP","Seventh Day","Mosque","Primary School","Borehole","Secondary School","College","Market","Football Ground","Other"])},{id:"other_landmark",proxyID:"landmark",helpText:"Closest Landmark or Plot Number",type:o["b"].TT_NOTE,condition:e=>"Other"===e.default_landmarks.value,computedValue:e=>({person:e.value}),validation:e=>i["a"].required(e)}]},getFacilityLocationField(){return{id:"location",helpText:"Please select facility name",type:o["b"].TT_SELECT,computedValue:e=>({person:e.label}),validation:e=>i["a"].required(e),options:(e,t="")=>Object(n["b"])(t),config:{showKeyboard:!0,isFilterDataViaApi:!0}}},getPersonNameFromPersonObj(e,t){return e.names.length?e.names[0][t]:""},getAttrFromPersonObj(e,t){return Array.isArray(e.person_attributes)&&e.person_attributes.length?e.person_attributes.reduce((e,a)=>a.type.name===t?a.value:e,""):""},getAddressFromPersonObj(e,t){if(Array.isArray(e.addresses)&&e.addresses.length){const a=e.addresses[0],n={home_district:"address2",home_village:"neighborhood_cell",home_traditional_authority:"county_district",current_village:"city_village",current_traditional_authority:"township_division",current_district:"state_province"};return a[n[t]]}return""},mapPersonData(e){const t=this.getPersonNameFromPersonObj(e,"given_name"),a=this.getPersonNameFromPersonObj(e,"family_name"),n=this.getAddressFromPersonObj(e,"home_district"),o=this.getAddressFromPersonObj(e,"home_village"),i=this.getAddressFromPersonObj(e,"home_traditional_authority");return{id:e.person_id,name:`${t} ${a}`,given_name:t,family_name:a,gender:e.gender,birth_date:e.birthdate,birthdate_estimated:e.birthdate_estimated,home_district:n,home_village:o,home_traditional_authority:i,home_address:`${n} ${o}`,current_district:this.getAddressFromPersonObj(e,"current_district"),current_traditional_authority:this.getAddressFromPersonObj(e,"current_traditional_authority"),cell_phone_number:this.getAttrFromPersonObj(e,"Cell Phone Number"),landmark:this.getAttrFromPersonObj(e,"Landmark Or Plot Number")}},getPersonAttributeOptions(e){const t=new l["a"](e),a=(e,t)=>t in e?e[t]():"-";return{label:t.getPatientInfoString(),value:t.getID()||t.getNationalID(),other:{npid:t.getNationalID(),person:e,options:[{label:"National ID",value:a(t,"getNationalID")},{label:"ARV Number",value:a(t,"getArvNumber"),other:{show:()=>"ART"===h["e"].getProgramName()}},{label:"Name",value:a(t,"getFullName")},{label:"Gender",value:a(t,"getGender")},{label:"Birthdate",value:a(t,"getBirthdate")},{label:"Home District",value:a(t,"getHomeDistrict")},{label:"Home Village",value:a(t,"getHomeVillage")},{label:"Current District",value:a(t,"getCurrentDistrict")},{label:"Current T/A",value:a(t,"getCurrentTA")},{label:"Cellphone",value:a(t,"getPhoneNumber")}]}}}}},"80e3":function(e,t,a){"use strict";var n=a("7a23");const o=Object(n["withScopeId"])("data-v-167dda79");Object(n["pushScopeId"])("data-v-167dda79");const i={key:0,class:"stick-report-header"},r={key:1},s={key:2},c={key:0},l={key:1},d={key:0,class:"no-data-section vertically-align"},u={key:0},p={key:1};Object(n["popScopeId"])();const h=o((function(e,t,a,h,b,m){const g=Object(n["resolveComponent"])("ion-icon"),f=Object(n["resolveComponent"])("ion-skeleton-text"),O=Object(n["resolveComponent"])("ion-button");return Object(n["openBlock"])(),Object(n["createBlock"])(n["Fragment"],null,[Object(n["createVNode"])("table",{class:["report-table",e.config.tableCssTheme||""]},[e.tableColumns?(Object(n["openBlock"])(),Object(n["createBlock"])("thead",i,[(Object(n["openBlock"])(!0),Object(n["createBlock"])(n["Fragment"],null,Object(n["renderList"])(e.tableColumns,(t,a)=>(Object(n["openBlock"])(),Object(n["createBlock"])("tr",{key:a},[(Object(n["openBlock"])(!0),Object(n["createBlock"])(n["Fragment"],null,Object(n["renderList"])(t,(t,o)=>(Object(n["openBlock"])(),Object(n["createBlock"])("th",{key:o,colspan:t.colspan||0,onClick:a=>e.sort(o,t),style:t.style,class:t.cssClass},[Object(n["createTextVNode"])(Object(n["toDisplayString"])(t.th)+" ",1),e.sortedIndex===o&&t.sortable&&a+1===e.tableColumns.length?(Object(n["openBlock"])(),Object(n["createBlock"])(g,{key:0,icon:"ascSort"===e.sortOrder?e.arrowUp:e.arrowDown},null,8,["icon"])):Object(n["createCommentVNode"])("",!0)],14,["colspan","onClick"]))),128))]))),128))])):Object(n["createCommentVNode"])("",!0),e.isLoading?(Object(n["openBlock"])(),Object(n["createBlock"])("tbody",r,[(Object(n["openBlock"])(!0),Object(n["createBlock"])(n["Fragment"],null,Object(n["renderList"])(e.skeletonRows,(t,a)=>(Object(n["openBlock"])(),Object(n["createBlock"])("tr",{key:a},[Object(n["createVNode"])("td",{colspan:e.columnLength},[Object(n["createVNode"])(f,{animated:"",style:{width:"100%",height:"30px"}})],8,["colspan"])]))),128))])):Object(n["createCommentVNode"])("",!0),e.noData?Object(n["createCommentVNode"])("",!0):(Object(n["openBlock"])(),Object(n["createBlock"])("tbody",s,[(Object(n["openBlock"])(!0),Object(n["createBlock"])(n["Fragment"],null,Object(n["renderList"])(e.activeRows,(e,t)=>(Object(n["openBlock"])(),Object(n["createBlock"])("tr",{key:t},[(Object(n["openBlock"])(!0),Object(n["createBlock"])(n["Fragment"],null,Object(n["renderList"])(e,(e,t)=>{var a,i,r;return Object(n["openBlock"])(),Object(n["createBlock"])("td",{key:t,colspan:e.colspan||0,class:e.cssClass,style:e.style},[e.event?(Object(n["openBlock"])(),Object(n["createBlock"])("div",c,["link"===(null===e||void 0===e||null===(a=e.event)||void 0===a?void 0:a.obj)?(Object(n["openBlock"])(),Object(n["createBlock"])("a",{key:0,href:"#",class:["his-sm-text",e.cssClass],style:e.style,onClick:Object(n["withModifiers"])(t=>e.event.click(),["prevent"])},Object(n["toDisplayString"])(e.td),15,["onClick"])):Object(n["createCommentVNode"])("",!0),"button"===e.event.obj?(Object(n["openBlock"])(),Object(n["createBlock"])(O,{key:1,color:(null===e||void 0===e||null===(i=e.event)||void 0===i?void 0:i.color)||"",class:e.cssClass,style:e.style,disabled:void 0!=(null===e||void 0===e||null===(r=e.event)||void 0===r?void 0:r.disabled)&&!0===e.event.disabled,onClick:t=>e.event.click()},{default:o(()=>[Object(n["createTextVNode"])(Object(n["toDisplayString"])(e.td),1)]),_:2},1032,["color","class","style","disabled","onClick"])):Object(n["createCommentVNode"])("",!0)])):(Object(n["openBlock"])(),Object(n["createBlock"])("div",l,[Object(n["createVNode"])("span",{class:"his-sm-text",innerHTML:e.td},null,8,["innerHTML"])]))],14,["colspan"])}),128))]))),128))]))],2),e.noData?(Object(n["openBlock"])(),Object(n["createBlock"])("h1",d,[e.errorMessage?(Object(n["openBlock"])(),Object(n["createBlock"])("span",u,Object(n["toDisplayString"])(e.errorMessage),1)):(Object(n["openBlock"])(),Object(n["createBlock"])("span",p," No data available in table "))])):Object(n["createCommentVNode"])("",!0)],64)}));var b=a("ff79"),m=a("9ceb"),g=a("2ef0"),f=a("8734"),O=a("b5e4"),j=a("8a30"),_=Object(n["defineComponent"])({emits:["onActiveRows","onActiveColumns","onPagination","onIsLoading","onTableRows"],components:{IonButton:j["d"],IonIcon:j["r"],IonSkeletonText:j["K"]},props:{config:{type:Object,default:{}},columns:{type:Object,required:!0},rows:{type:Object,default:()=>[]},newPage:{type:Number},rowsPerPage:{type:Number},asyncRows:{type:Function},rowParser:{type:Function},searchFilter:{type:String},showFilters:{type:Boolean,default:!1},paginated:{type:Boolean,default:!1}},data:()=>({arrowUp:b["h"],arrowDown:b["g"],caretBack:b["k"],caretForward:b["m"],sortedIndex:-1,sortOrder:"descSort",tableColumns:[],tableRows:[],paginatedRows:[],activeRows:[],currentPage:0,itemsPerPage:20,isLoading:!1,errorMessage:""}),watch:{isLoading:{handler(e){"boolean"===typeof e&&this.$emit("onIsLoading",e)},immediate:!0},newPage:{handler(e){"number"===typeof e&&this.onChangePage(e)},immediate:!0},rowsPerPage:{handler(e){"number"===typeof e&&(this.itemsPerPage=e)},immediate:!0},async itemsPerPage(e){Object(g["isEmpty"])(this.tableRows)||(this.currentPage=0,await Object(f["a"])(100),this.paginateTableRows(e),await this.setPage(this.currentPage))},tableRows:{handler(e){Object(g["isEmpty"])(e)||this.$emit("onTableRows",e)},immediate:!0,deep:!0},searchFilter(e){e?this.activeRows=this.searchDataSet(e,this.paginated?this.activeRows:this.tableRows):this.paginated?this.setPage(this.currentPage):this.activeRows=this.tableRows},activeRows:{handler(e){this.$emit("onActiveRows",e)},immediate:!0,deep:!0},columns:{handler(e){if(!Object(g["isEmpty"])(e)){if(this.showIndex()){const e=[...this.columns],t=this.columns.length-1;e[t]=[m["a"].thNum("#"),...e[t]],this.tableColumns=e}else this.tableColumns=e;this.$emit("onActiveColumns",this.tableColumns)}},immediate:!0,deep:!0},asyncRows:{async handler(e){if(this.errorMessage="","function"===typeof e){this.isLoading=!0;try{this.tableRows=this.addColumnIndexes(await e()),this.paginated?(this.paginateTableRows(),await this.setPage(0)):this.activeRows=this.tableRows}catch(t){this.errorMessage=""+t,Object(O["c"])(t),console.error(t)}this.isLoading=!1}},immediate:!0,deep:!0},rows:{async handler(e){if(this.errorMessage="",!e||Object(g["isEmpty"])(e))return this.activeRows=[],void(this.tableRows=[]);this.tableRows=this.addColumnIndexes(e),this.paginated?(this.paginateTableRows(),await this.setPage(0)):this.activeRows=this.tableRows},immediate:!0,deep:!0}},methods:{showIndex(){return!(!this.config||!("showIndex"in this.config))&&this.config.showIndex},addColumnIndexes(e){return this.showIndex()?e.map((e,t)=>{const a=[m["a"].td(t+1)];return Array.isArray(e)?a.concat(e):[...a,e]}):e},paginateTableRows(e=0){this.paginatedRows=Object(g["chunk"])(this.tableRows,e||this.itemsPerPage),this.$emit("onPagination",this.paginatedRows)},async setPage(e){this.activeRows=[];const t=this.paginatedRows[e];if(t){try{this.isLoading=!0,this.activeRows="function"===typeof this.rowParser?await this.rowParser(t):t}catch(a){Object(O["c"])(a),this.errorMessage=""+a,console.error(a)}this.isLoading=!1}},async sort(e,t){this.showIndex()&&"function"===typeof this.rowParser&&0!=e||(e===this.sortedIndex?this.sortOrder="ascSort"===this.sortOrder?"descSort":"ascSort":this.sortOrder="ascSort",this.sortedIndex=e,this.sortOrder in t&&(this.paginated?(this.tableRows=t[this.sortOrder](e,this.tableRows),this.paginateTableRows(),await this.setPage(this.currentPage)):this.activeRows=t[this.sortOrder](e,this.tableRows)))},searchDataSet(e,t){return t.filter(t=>{const a=t.filter(t=>"object"===typeof t&&null!=t&&"td"in t&&(("string"===typeof t.td||"number"===typeof t.td)&&t.td.toString().match(new RegExp(e,"i"))));return!Object(g["isEmpty"])(a)})},async onChangePage(e){this.currentPage=e,await this.setPage(e)}},computed:{noData(){return!this.isLoading&&Object(g["isEmpty"])(this.activeRows)},columnLength(){try{return this.tableColumns[0].length}catch(e){return console.warn(e),5}},skeletonRows(){const e=[],t=this.config.skeletonTextRows?this.config.skeletonTextRows:10;for(let a=0;a<t;++a)e.push(a);return e}}}),v=(a("bd75"),a("6b0d")),y=a.n(v);const w=y()(_,[["render",h],["__scopeId","data-v-167dda79"]]);t["a"]=w},8158:function(e,t,a){"use strict";a.d(t,"a",(function(){return i}));a("caad");var n=a("1c74"),o=[{categories:[],concept_id:6328,name:"New"},{categories:[],concept_id:7977,name:"Hemorrhage"},{categories:[],concept_id:7156,name:"Eclampsia"},{categories:[],concept_id:8758,name:"Episiotomy"},{categories:[],concept_id:228,name:"APH"},{categories:[],concept_id:230,name:"PPH"},{categories:[],concept_id:2895,name:"Alive"},{categories:[],concept_id:9656,name:"Previous HIV Test Results"},{categories:[],concept_id:2473,name:"B-HCG"},{categories:[],concept_id:9655,name:"Previous HIV Test Done"},{categories:[],concept_id:9657,name:"Previous HIV Test Date"},{categories:[],concept_id:3340,name:"Currently taking alcohol"},{categories:[],concept_id:1057,name:"Never Married"},{categories:[],concept_id:5555,name:"Married"},{categories:[],concept_id:1056,name:"Seperated"},{categories:[],concept_id:1058,name:"Divorced"},{categories:[],concept_id:6686,name:"Ultrasound"},{categories:[],concept_id:7433,name:"Presentation"},{categories:[],concept_id:7979,name:"Fetal Heart Beat"},{categories:[],concept_id:9637,name:"Fetal movement heard"},{categories:[],concept_id:9562,name:"Fetal movement felt"},{categories:[],concept_id:7835,name:"Fundus"},{categories:[],concept_id:7837,name:"Position"},{categories:[],concept_id:7142,name:"Multiple gestation"},{categories:[],concept_id:7919,name:"LIQUOR"},{categories:[],concept_id:9563,name:"Last Fetal movement felt"},{categories:[],concept_id:7836,name:"Lie"},{categories:[],concept_id:9654,name:"Fetal heart movement seen"},{categories:[],concept_id:7839,name:"Fetal heart rate"},{categories:["anc_medical_history"],concept_id:5,name:"Asthma"},{categories:["anc_medical_history"],concept_id:155,name:"Epilepsy"},{categories:["anc_medical_history"],concept_id:174,name:"Sexually transmitted infection"},{categories:["anc_medical_history"],concept_id:1063,name:"Blood transfusion"},{categories:["anc_medical_history"],concept_id:6033,name:"Renal disease"},{categories:["anc_medical_history"],concept_id:7978,name:"Spine/Leg Deformity"},{categories:["anc_medical_history"],concept_id:8809,name:"Hypertension"},{categories:[],concept_id:7439,name:"Procedure done"},{categories:["anc_surgical_history"],concept_id:1171,name:"Caesarean section"},{categories:["anc_surgical_history"],concept_id:1719,name:"Tubal ligation"},{categories:["anc_surgical_history"],concept_id:3593,name:"Biopsy"},{categories:["anc_surgical_history","reason_for_no_cxca"],concept_id:5276,name:"Hysterectomy"},{categories:["anc_surgical_history"],concept_id:7440,name:"Uterine evacuation"},{categories:["anc_surgical_history"],concept_id:7441,name:"Exam under anaesthesia"},{categories:["anc_surgical_history"],concept_id:7443,name:"Total abdominal hysterectomy +/- adnexectomy"},{categories:["anc_surgical_history"],concept_id:7444,name:"Subtotal abdominal hysterectomy +/- adnexectomy"},{categories:["anc_surgical_history"],concept_id:7462,name:"Suturing of cervical or vaginal injury under anaesthesia"},{categories:["anc_surgical_history"],concept_id:7469,name:"Vaginal Reconstruction"},{categories:["anc_surgical_history"],concept_id:7470,name:"Exploratory laparatomy +/- adnexectomy"},{categories:["anc_surgical_history"],concept_id:7471,name:"Cauterization of vulva or perineal warts"},{categories:["anc_surgical_history"],concept_id:7472,name:"Marsupilisation"},{categories:["anc_surgical_history"],concept_id:7474,name:"Salpingectomy"},{categories:["anc_surgical_history"],concept_id:7475,name:"Dilation and curettage"},{categories:["anc_medical_history","anc_surgical_history"],concept_id:7477,name:"Fistula repair"},{categories:["anc_surgical_history"],concept_id:7478,name:"Myomectomy"},{categories:["anc_surgical_history"],concept_id:7480,name:"Hysterescopy"},{categories:["anc_surgical_history"],concept_id:7481,name:"Cystoscopy"},{categories:["anc_surgical_history"],concept_id:7482,name:"Vulvectomy"},{categories:["anc_surgical_history"],concept_id:8380,name:"Suturing of perineum"},{categories:["anc_surgical_history"],concept_id:8381,name:"Repair of uterus"},{categories:["anc_surgical_history"],concept_id:8765,name:"Cystectomy"},{categories:["anc_surgical_history"],concept_id:8766,name:"Ceclage"},{categories:["anc_surgical_history"],concept_id:8767,name:"Bilateral tubal ligation"},{categories:["anc_surgical_history"],concept_id:8773,name:"Excision"},{categories:["anc_surgical_history"],concept_id:9058,name:"Evacuation/Manual Vacuum Aspiration"},{categories:["anc_surgical_history"],concept_id:9304,name:"Polypectomy"},{categories:["anc_surgical_history"],concept_id:9305,name:"Decapitation"},{categories:["anc_surgical_history"],concept_id:9306,name:"Abdominal Washout"},{categories:["anc_surgical_history"],concept_id:9307,name:"Vaginal hysterectomy"},{categories:["anc_surgical_history"],concept_id:9308,name:"Gaped episiotomy repair"},{categories:["anc_surgical_history"],concept_id:9309,name:"Macdonald suture"},{categories:["anc_surgical_history"],concept_id:9314,name:"Oophorectomy"},{categories:[],concept_id:7124,name:"Tetanus toxoid vaccine"},{categories:[],concept_id:6408,name:"Other conditions"},{categories:[],concept_id:10546,name:"Punch Biopsy"},{categories:[],concept_id:10547,name:"LLETZ sample"},{categories:[],concept_id:1115,name:"Normal"},{categories:[],concept_id:10551,name:"CIN 1"},{categories:[],concept_id:10552,name:"CIN 2"},{categories:[],concept_id:10553,name:"CIN 3"},{categories:[],concept_id:10554,name:"Carcinoma in Situ"},{categories:[],concept_id:2588,name:"Invasive cancer of cervix"},{categories:[],concept_id:10550,name:"Benign cervical warts"},{categories:[],concept_id:1107,name:"Not available"},{categories:[],concept_id:7918,name:"Bleeding"},{categories:[],concept_id:5276,name:"Hysterectomy"},{categories:[],concept_id:10521,name:"Cryotherapy"},{categories:[],concept_id:10002,name:"Leep"},{categories:[],concept_id:9053,name:"Palliative Care"},{categories:[],concept_id:10560,name:"LLETZ"},{categories:[],concept_id:10557,name:"Conisation"},{categories:[],concept_id:9996,name:"Thermocoagulation"},{categories:[],concept_id:10549,name:"Chronic cervicitis"},{categories:[],concept_id:3580,name:"Patient refused"},{categories:[],concept_id:10556,name:"Hysyrectomy"},{categories:[],concept_id:10558,name:"Trachelectomy"},{categories:[],concept_id:3626,name:"Discharged"},{categories:[],concept_id:8882,name:"Continue follow-up"},{categories:[],concept_id:10559,name:"No Dysplasia/Cancer"},{categories:[],concept_id:1742,name:"Patient died"},{categories:[],concept_id:8739,name:"Cervical cancer stage 1"},{categories:[],concept_id:8787,name:"Cervical cancer stage 2"},{categories:[],concept_id:8788,name:"Cervical cancer stage 3"},{categories:[],concept_id:8740,name:"Cervical cancer stage 4"},{categories:[],concept_id:10041,name:"VIA Negative"},{categories:[],concept_id:10032,name:"Suspect Cancer"},{categories:[],concept_id:10023,name:"PAP Smear Normal"},{categories:[],concept_id:10025,name:"HPV negative"},{categories:[],concept_id:10028,name:"No visible Lesion"},{categories:[],concept_id:6537,name:"Other Gynae"},{categories:[],concept_id:10042,name:"VIA Positive"},{categories:[],concept_id:10024,name:"PAP Smear Abnormal"},{categories:[],concept_id:10026,name:"HPV Positive"},{categories:[],concept_id:10027,name:"Visible Lesion"},{categories:[],concept_id:174,name:"STI"},{categories:[],concept_id:149,name:"Cervicitis"},{categories:[],name:"Result Given to Client",concept_id:9764},{categories:[],name:"INH 300 / RFP 300 (3HP)",concept_id:10565},{categories:[],concept_id:10563,name:"Drug received from previous facility"},{categories:[],concept_id:10564,name:"Date drug received from previous facility"},{categories:[],concept_id:6397,name:"Height for age percent of median"},{categories:[],concept_id:6969,name:"Refer to clinician"},{categories:[],concept_id:10031,name:"Further Investigation and Management"},{categories:[],concept_id:9066,name:"Cancer of cervix"},{categories:[],concept_id:10030,name:"Large Lesion (Greater than 75 percent)"},{categories:[],concept_id:1739,name:"Referral reason"},{categories:[],concept_id:9514,name:"VIA Results"},{categories:[],concept_id:9522,name:"Patient went for VIA?"},{concept_id:2690,name:"TB treatment"},{categories:[],concept_id:7458,name:"Confirmed TB on treatment"},{categories:[],concept_id:7456,name:"Confirmed TB NOT on treatment"},{categories:[],concept_id:9195,name:"Discuss with spouse"},{categories:[],concept_id:7951,name:"Other side effect"},{categories:[],concept_id:7755,name:"Malawi ART side effects"},{categories:[],concept_id:9994,name:"CxCa test date"},{categories:[],concept_id:10008,name:"Reason for NOT offering CxCa"},{categories:[],concept_id:9992,name:"Offer CxCa"},{categories:["reason_for_no_cxca"],concept_id:8387,name:"Not due for screening"},{categories:["reason_for_no_cxca"],concept_id:10007,name:"Client preferred counseling"},{categories:["reason_for_no_cxca"],concept_id:1175,name:"Not applicable"},{categories:["reason_for_no_cxca"],concept_id:3580,name:"Patient refused"},{categories:["reason_for_no_cxca"],concept_id:10001,name:"Chemotherapy"},{categories:["reason_for_no_cxca"],concept_id:10543,name:"Services not available"},{categories:["reason_for_no_cxca"],concept_id:10544,name:"Provider not available"},{categories:[],concept_id:7215,name:"Other (Specify)"},{categories:[],concept_id:1618,name:"Family planning"},{categories:[],concept_id:374,name:"Method of family planning"},{categories:[],concept_id:2431,name:"Other reason for not seeking services"},{categories:[],concept_id:2592,name:"Clinician notes"},{categories:[],concept_id:6986,name:"Transferred"},{categories:[],concept_id:1588,name:"Previous TB treatment history"},{categories:["bp_measures"],concept_id:5085,name:"Systolic blood pressure"},{categories:["bp_measures"],concept_id:5086,name:"Diastolic blood pressure"},{categories:[],concept_id:7054,name:"Art clinic location"},{categories:[],concept_id:8677,name:"Specific presenting complaint"},{categories:[],concept_id:8578,name:"Presenting complaint"},{categories:[],concept_id:10319,name:"Presenting complaint group"},{categories:[],concept_id:6266,name:"Trauma"},{categories:[],concept_id:7027,name:"General"},{categories:[],concept_id:7411,name:"ILI"},{categories:[],concept_id:7644,name:"Respiratory"},{categories:[],concept_id:7661,name:"Gastrointestinal"},{categories:[],concept_id:9546,name:"Haema"},{categories:[],concept_id:9551,name:"Nephro"},{categories:[],concept_id:9560,name:"Cardiovascular"},{categories:["art_patient_type"],order:1,concept_id:7572,name:"New patient"},{categories:["art_patient_type"],order:2,concept_id:10522,name:"Drug Refill"},{categories:["risk factors","anc_medical_history"],concept_id:3720,name:"Diabetes"},{categories:["risk factors"],concept_id:7623,name:"CKD"},{categories:["risk factors"],concept_id:9499,name:"history of CVD"},{categories:["risk factors"],concept_id:9501,name:"relative with CVD"},{categories:["risk factors"],concept_id:3339,name:"patient smokes"},{categories:["risk factors"],concept_id:2318,name:"Patient drinks alcohol"},{categories:[],concept_id:9675,name:"Referral"},{categories:[],concept_id:1054,name:"Marital status"},{categories:[],concept_id:8366,name:"Religion"},{categories:[],concept_id:6541,name:"Referred"},{categories:[],concept_id:8717,name:"Specialist clinic"},{categories:[],concept_id:6734,name:"Admit to ward"},{categories:[],concept_id:9674,name:"Re-visiting"},{categories:[],concept_id:3753,name:"HIV status"},{categories:[],concept_id:7878,name:"HIV test location"},{categories:[],concept_id:7409,name:"Qech outpatient diagnosis list"},{categories:["anc_diagnosis"],concept_id:123,name:"Malaria"},{categories:["anc_diagnosis"],concept_id:3,name:"Anaemia"},{categories:["anc_diagnosis"],concept_id:7941,name:"Pre-eclampsia"},{categories:["anc_diagnosis"],concept_id:9665,name:"Vaginal bleeding"},{categories:["anc_diagnosis"],concept_id:9664,name:"Early rupture of membranes"},{categories:["anc_diagnosis"],concept_id:7883,name:"Premature labour"},{categories:["anc_diagnosis"],concept_id:43,name:"Pneumonia"},{categories:[],concept_id:9227,name:"Malaria Test Result"},{categories:[],concept_id:703,name:"Positive"},{categories:[],concept_id:9436,name:"Inconclusive"},{categories:[],concept_id:6698,name:"Trace"},{categories:[],concept_id:664,name:"Negative"},{categories:[],concept_id:6542,name:"Primary diagnosis"},{categories:[],concept_id:6543,name:"Secondary diagnosis"},{categories:[],concept_id:2688,name:"Clinical notes construct"},{categories:[],concept_id:1837,name:"HIV test date"},{categories:[],concept_id:6189,name:"Type of visit"},{categories:[],concept_id:3003,name:"Transfer to"},{categories:[],concept_id:7414,name:"Transfer from"},{categories:[],concept_id:1744,name:"Patient transferred out"},{categories:[],concept_id:9144,name:"Repeat / Missing"},{categories:[],concept_id:3280,name:"Targeted"},{categories:[],concept_id:1345,name:"Confirmatory"},{categories:[],concept_id:6368,name:"Stat"},{categories:[],concept_id:432,name:"Routine"},{categories:[],concept_id:730,name:"CD4 percent"},{categories:[],concept_id:2552,name:"Agrees to followup"},{categories:[],concept_id:7882,name:"Confirmatory HIV test date"},{categories:[],concept_id:2516,name:"Date ART started"},{categories:[],concept_id:1499,name:"Drug start date"},{categories:[],concept_id:7750,name:"Location of ART initiation"},{categories:[],concept_id:6394,name:"Has the patient taken ART in the last two weeks"},{categories:[],concept_id:7752,name:"Has the patient taken ART in the last two months"},{categories:[],concept_id:7751,name:"Date ART last taken"},{categories:[],concept_id:6981,name:"ART number at previous location"},{categories:[],concept_id:7881,name:"Confirmatory HIV test location"},{categories:[],concept_id:7754,name:"Ever received ART"},{categories:[],concept_id:7937,name:"Ever registered at ART clinic"},{categories:[],concept_id:6393,name:"Has transfer letter"},{categories:[],concept_id:9685,name:"Phone"},{categories:[],concept_id:9686,name:"Home visit"},{categories:["art_extra_medication_order"],concept_id:9974,name:"3HP (RFP + INH)"},{categories:[],concept_id:656,name:"IPT"},{categories:["side_effect"],sortIndex:{side_effect:10},concept_id:1773,name:"Heavy alcohol use"},{categories:["tb_symptom","side_effect"],sortIndex:{side_effect:4,tb_symptom:4},concept_id:8260,name:"Weight loss / Failure to thrive / malnutrition"},{categories:[],concept_id:9661,name:"Contraindications"},{categories:[],concept_id:7567,name:"Drug induced"},{categories:["tb_symptom","side_effect","adverse_effect"],sortIndex:{side_effect:9,tb_symptom:3},concept_id:6029,name:"Night sweats"},{categories:["tb_symptom","0_art_regimen_side_effect","9_art_regimen_side_effect","14_art_regimen_side_effect","side_effect","adverse_effect"],sortIndex:{side_effect:1,tb_symptom:2},concept_id:5945,name:"Fever"},{categories:["0_art_regimen_side_effect","2_art_regimen_side_effect","4_art_regimen_side_effect","8_art_regimen_side_effect","9_art_regimen_side_effect","10_art_regimen_side_effect","11_art_regimen_side_effect","12_art_regimen_side_effect","13_art_regimen_side_effect","14_art_regimen_side_effect","16_art_regimen_side_effect","17_art_regimen_side_effect","side_effect","adverse_effect"],sortIndex:{side_effect:3},concept_id:5980,name:"Vomiting"},{categories:["5_art_regimen_side_effect","9_art_regimen_side_effect","10_art_regimen_side_effect","11_art_regimen_side_effect","side_effect","adverse_effect"],sortIndex:{side_effect:5},concept_id:877,name:"Dizziness"},{categories:["9_art_regimen_side_effect","10_art_regimen_side_effect","11_art_regimen_side_effect","13_art_regimen_side_effect","14_art_regimen_side_effect","side_effect","adverse_effect"],sortIndex:{side_effect:7},concept_id:620,name:"Headache"},{categories:["13_art_regimen_side_effect","14_art_regimen_side_effect","side_effect","adverse_effect"],sortIndex:{side_effect:2},concept_id:5978,name:"Nausea"},{categories:["0_art_regimen_side_effect","2_art_regimen_side_effect","4_art_regimen_side_effect","5_art_regimen_side_effect","6_art_regimen_side_effect","7_art_regimen_side_effect","8_art_regimen_side_effect","9_art_regimen_side_effect","10_art_regimen_side_effect","11_art_regimen_side_effect","12_art_regimen_side_effect","13_art_regimen_side_effect","14_art_regimen_side_effect","adverse_effect"],concept_id:843,name:"Treatment failure"},{categories:["2_art_regimen_side_effect","4_art_regimen_side_effect","8_art_regimen_side_effect","11_art_regimen_side_effect","side_effect","adverse_effect"],sortIndex:{side_effect:6},concept_id:1458,name:"Lactic acidosis"},{categories:["tb_symptom","0_art_regimen_side_effect","9_art_regimen_side_effect","15_art_regimen_side_effect","16_art_regimen_side_effect","17_art_regimen_side_effect","side_effect","adverse_effect"],sortIndex:{side_effect:8,tb_symptom:1},concept_id:107,name:"Cough"},{categories:["11_art_regimen_contraindication","contraindication","adverse_effect"],sortIndex:{contraindication:1},concept_id:821,name:"Peripheral neuropathy"},{categories:["0_art_regimen_contraindication","2_art_regimen_contraindication","6_art_regimen_contraindication","7_art_regimen_contraindication","8_art_regimen_contraindication","contraindication","adverse_effect"],sortIndex:{contraindication:3},concept_id:215,name:"Jaundice"},{categories:["2_art_regimen_contraindication","4_art_regimen_contraindication","8_art_regimen_contraindication","11_art_regimen_contraindication","contraindication","adverse_effect"],sortIndex:{contraindication:5},concept_id:2148,name:"Lipodystrophy"},{categories:["5_art_regimen_contraindication","6_art_regimen_contraindication","7_art_regimen_contraindication","10_art_regimen_contraindication","contraindication","adverse_effect"],sortIndex:{contraindication:7},concept_id:9242,name:"Kidney Failure"},{categories:["4_art_regimen_contraindication","5_art_regimen_contraindication","contraindication","adverse_effect"],sortIndex:{contraindication:2},concept_id:219,name:"Psychosis"},{categories:["4_art_regimen_contraindication","5_art_regimen_contraindication","contraindication","adverse_effect"],sortIndex:{contraindication:4},concept_id:9440,name:"Gynaecomastia"},{categories:["2_art_regimen_contraindication","4_art_regimen_contraindication","8_art_regimen_contraindication","11_art_regimen_contraindication","contraindication","adverse_effect"],sortIndex:{contraindication:6},concept_id:3,name:"Anemia"},{categories:["0_art_regimen_contraindication","contraindication","adverse_effect"],sortIndex:{contraindication:9},concept_id:512,name:"Skin rash"},{categories:["contraindication","adverse_effect"],sortIndex:{contraindication:8},concept_id:867,name:"Insomnia"},{categories:[],concept_id:1588,name:"TB treatment history"},{categories:["fast_track"],concept_id:9533,name:"Adult 18 years +"},{categories:["fast_track"],concept_id:9534,name:"On ART for 12 months "},{categories:["fast_track"],concept_id:9535,name:"On 1st line ART"},{categories:["fast_track"],concept_id:9537,name:"Good current adherence"},{categories:["fast_track"],concept_id:9536,name:"Last VL <1000"},{categories:["fast_track"],concept_id:9538,name:"Pregnant / Breastfeeding"},{categories:["fast_track"],concept_id:9539,name:"Side effects / HIV-rel. diseases"},{categories:["fast_track"],concept_id:9540,name:"Needs BP / diabetes treatment"},{categories:["fast_track"],concept_id:9527,name:"Started IPT <12m ago"},{categories:["fast_track"],concept_id:2186,name:"Any sign for TB"},{categories:["reasons_for_art","stage_1_conditions_adults_who_reason"],concept_id:7561,name:"WHO STAGE I ADULT"},{categories:["reasons_for_art","stage_1_conditions_pedaids_who_reason","stage_1_conditions_adults_who_reason"],concept_id:7041,name:"WHO STAGE I ADULT AND PEDS"},{categories:["reasons_for_art","stage_1_conditions_pedaids_who_reason"],concept_id:7049,name:"WHO STAGE I PEDS"},{categories:["reasons_for_art","stage_2_conditions_adults_who_reason"],concept_id:7046,name:"WHO STAGE II ADULT"},{categories:["reasons_for_art","stage_2_conditions_pedaids_who_reason","stage_2_conditions_adults_who_reason"],concept_id:7042,name:"WHO STAGE II ADULT AND PEDS"},{categories:["reasons_for_art","stage_2_conditions_pedaids_who_reason"],concept_id:7050,name:"WHO STAGE II PEDS"},{categories:["reasons_for_art","stage_3_conditions_adults_who_reason"],concept_id:7047,name:"WHO STAGE III ADULT"},{categories:["reasons_for_art","stage_3_conditions_pedaids_who_reason","stage_3_conditions_adults_who_reason"],concept_id:7043,name:"WHO STAGE III ADULT AND PEDS"},{categories:["reasons_for_art","stage_3_conditions_pedaids_who_reason"],concept_id:7051,name:"WHO STAGE III PEDS"},{categories:["reasons_for_art","stage_4_conditions_adults_who_reason"],concept_id:7048,name:"WHO STAGE IV ADULT"},{categories:["reasons_for_art","stage_4_conditions_pedaids_who_reason","stage_4_conditions_adults_who_reason"],concept_id:7044,name:"WHO STAGE IV ADULT AND PEDS"},{categories:["reasons_for_art","stage_4_conditions_pedaids_who_reason"],concept_id:7052,name:"WHO STAGE IV PEDS"},{categories:[],concept_id:1805,name:"Patient present"},{categories:[],concept_id:2122,name:"Guardian present"},{categories:[],concept_id:5092,name:"SP02"},{categories:[],concept_id:5087,name:"Pulse"},{categories:[],concept_id:5088,name:"Temp"},{categories:[],concept_id:1484,name:"Treatment status"},{categories:[],concept_id:3140,name:"Reason for poor treatment adherence"},{categories:[],concept_id:6987,name:"Drug adherence"},{categories:[],concept_id:2540,name:"Number of tablets brought to clinic"},{categories:[],concept_id:7880,name:"Confirmatory hiv test type"},{categories:["hiv_test_types"],concept_id:1040,name:"HIV rapid test"},{categories:["hiv_test_types"],concept_id:844,name:"HIV DNA polymerase chain reaction"},{categories:["hiv_test_types"],concept_id:1118,name:"Not done"},{categories:["hiv_test_types"],concept_id:1067,name:"Unknown"},{categories:["reason_for_art"],concept_id:8263,name:"PRESUMED SEVERE HIV"},{categories:["reason_for_art"],concept_id:844,name:"HIV DNA POLYMERASE CHAIN REACTION"},{categories:["reason_for_art"],concept_id:1169,name:"HIV infected"},{categories:["reason_for_art"],concept_id:1755,name:"PATIENT PREGNANT"},{categories:["reason_for_art"],concept_id:5632,name:"BREASTFEEDING"},{categories:["reason_for_art"],concept_id:5006,name:"Asymptomatic"},{categories:["reason_for_art"],concept_id:8376,name:"LYMPHOCYTE COUNT BELOW THRESHOLD WITH WHO STAGE 1"},{categories:["reason_for_art"],concept_id:7559,name:"LYMPHOCYTE COUNT BELOW THRESHOLD WITH WHO STAGE 2"},{categories:[""],concept_id:2743,name:"Who stages criteria present"},{categories:[""],concept_id:7965,name:"Is patient breast feeding"},{categories:[""],concept_id:6131,name:"Is patient pregnant"},{categories:[""],concept_id:7563,name:"Reason for ART eligibility"},{categories:[""],concept_id:7562,name:"Who stage"},{categories:[""],concept_id:2540,name:"Pills brought"},{categories:[""],concept_id:5089,name:"weight"},{categories:[],concept_id:5090,name:"Height"},{categories:["art_medication_order"],concept_id:9974,name:"Rifapentine"},{categories:["art_medication_order","art_extra_medication_order"],concept_id:916,name:"CPT"},{categories:["art_medication_order","art_extra_medication_order"],concept_id:656,name:"INH"},{categories:[""],concept_id:6784,name:"Appointment type"},{categories:[""],concept_id:1779,name:"Reason for ARV switch"},{categories:[""],concept_id:9561,name:"Assess for fast track"},{categories:[""],concept_id:1282,name:"Medication orders"},{categories:[""],concept_id:8471,name:"Fast track"},{categories:[""],concept_id:7755,name:"Art Side effects"},{categories:["art_medication_order"],concept_id:1085,name:"Antiretroviral drugs"},{categories:[""],concept_id:1066,name:"No"},{categories:[""],concept_id:1065,name:"Yes"},{categories:[""],concept_id:5096,name:"Appointment date"},{categories:[""],concept_id:3289,name:"Type of patient"},{categories:["art_patient_type"],concept_id:9684,order:3,name:"External consultation"},{categories:[""],concept_id:6830,name:"Cd4 count location"},{categories:[""],concept_id:6831,name:"Cd4 count datetime"},{categories:[""],concept_id:5497,name:"CD4 count"},{categories:["cd4_count"],concept_id:8208,name:"cd4 less than or equal to 750"},{categories:["cd4_count"],concept_id:8262,name:"cd4 less than or equal to 250"},{categories:["cd4_count"],concept_id:8207,name:"cd4 less than or equal to 350"},{categories:["cd4_count"],concept_id:9389,name:"cd4 less than or equal to 500"},{categories:["whole_staging_numbers"],concept_id:9145,name:"WHO STAGE 1"},{categories:["whole_staging_numbers"],concept_id:9146,name:"WHO STAGE 2"},{categories:["whole_staging_numbers"],concept_id:2932,name:"WHO STAGE 3"},{categories:["whole_staging_numbers"],concept_id:2933,name:"WHO STAGE 4"},{categories:["whole_staging_numbers"],concept_id:7561,name:"WHO STAGE I ADULT"},{categories:["whole_staging_numbers"],concept_id:7041,name:"WHO STAGE I ADULT AND PEDS"},{categories:["whole_staging_numbers"],concept_id:7049,name:"WHO STAGE I PEDS"},{categories:["whole_staging_numbers"],concept_id:7046,name:"WHO STAGE II ADULT"},{categories:["whole_staging_numbers"],concept_id:7042,name:"WHO STAGE II ADULT AND PEDS"},{categories:["whole_staging_numbers"],concept_id:7050,name:"WHO STAGE II PEDS"},{categories:["whole_staging_numbers"],concept_id:7047,name:"WHO STAGE III ADULT"},{categories:["whole_staging_numbers"],concept_id:7043,name:"WHO STAGE III ADULT AND PEDS"},{categories:["whole_staging_numbers"],concept_id:7051,name:"WHO STAGE III PEDS"},{categories:["whole_staging_numbers"],concept_id:7048,name:"WHO STAGE IV ADULT"},{categories:["whole_staging_numbers"],concept_id:7044,name:"WHO STAGE IV ADULT AND PEDS"},{categories:["whole_staging_numbers"],concept_id:7052,name:"WHO STAGE IV PEDS"},{categories:["pshd_condition","stage_4_conditions_pedaids","stage_4_conditions_adults","who_staging_conditions","staging_4_conditions"],concept_id:7548,name:"Cryptococcal meningitis or other extrapulmonary cryptococcosis"},{categories:["pshd_condition","stage_4_conditions_pedaids","stage_4_conditions_adults","who_staging_conditions","staging_4_conditions"],concept_id:5340,name:"Candidiasis of oseophagus, trachea and bronchi or lungs"},{categories:["stage_4_conditions_pedaids","stage_4_conditions_adults","who_staging_conditions","staging_4_conditions"],concept_id:1547,name:"Extrapulmonary tuberculosis (EPTB)"},{categories:["stage_4_conditions_pedaids","stage_4_conditions_adults","who_staging_conditions","staging_4_conditions"],concept_id:507,name:"Kaposis sarcoma"},{categories:["stage_3_conditions_pedaids","stage_4_conditions_adults","who_staging_conditions","staging_4_conditions"],concept_id:1215,name:"Bacterial pneumonia, severe recurrent"},{categories:["stage_4_conditions_adults","staging_4_conditions","who_staging_conditions"],concept_id:7959,name:"Non-typhoidal Salmonella bacteraemia, recurrent"},{categories:["stage_4_conditions_adults","stage_4_conditions_pedaids","who_staging_conditions","staging_4_conditions"],concept_id:7957,name:"Symptomatic HIV-associated nephropathy or cardiomyopathy"},{categories:["stage_4_conditions_pedaids","stage_4_conditions_adults","who_staging_conditions","staging_4_conditions"],concept_id:2587,name:"Cerebral or B-cell non Hodgkin lymphoma"},{categories:["pshd_condition","stage_4_conditions_pedaids","stage_4_conditions_adults","who_staging_conditions","staging_4_conditions"],concept_id:882,name:"Pneumocystis pneumonia"},{categories:["stage_4_conditions_adults","who_staging_conditions","staging_4_conditions"],concept_id:5344,name:"Chronic herpes simplex infection (orolabial, gential / anorectal >1 month or visceral at any site)"},{categories:["stage_4_conditions_adults","who_staging_conditions","staging_4_conditions"],concept_id:7551,name:"Cytomegalovirus infection (retinitis or infection or other organs)"},{categories:["pshd_condition","stage_4_conditions_adults","who_staging_conditions"],concept_id:2583,name:"Toxoplasmosis of the brain"},{categories:["stage_4_conditions_adults","who_staging_conditions","staging_4_conditions"],concept_id:2588,name:"Invasive cancer of cervix"},{categories:["stage_4_conditions_adults","who_staging_conditions","staging_4_conditions"],concept_id:7040,name:"Unspecified stage 4 condition"},{categories:["stage_4_conditions_adults","who_staging_conditions","staging_4_conditions"],concept_id:6408,name:"Other"},{categories:["stage_4_conditions_pedaids","who_staging_conditions"],concept_id:1362,name:"HIV encephalopathy"},{categories:["stage_4_conditions_pedaids","who_staging_conditions"],concept_id:2585,name:"Disseminated non-tuberculosis mycobacterial infection"},{categories:["stage_4_conditions_pedaids","who_staging_conditions"],concept_id:7549,name:"Cryptosporidiosis, chronic with diarroea"},{categories:["stage_4_conditions_pedaids","who_staging_conditions"],concept_id:7956,name:"Isosporiasis >1 month"},{categories:["stage_4_conditions_pedaids","who_staging_conditions"],concept_id:7550,name:"Disseminated mycosis (coccidiomycosis or histoplasmosis)"},{categories:["stage_4_conditions_pedaids","who_staging_conditions"],concept_id:5046,name:"Progressive multifocal leukoencephalopathy"},{categories:["pshd_condition","stage_4_conditions_pedaids","who_staging_conditions"],concept_id:3068,name:"Severe unexplained wasting or malnutrition not responding to treatment (weight-for-height/ -age <70% or MUAC less than 11cm or oedema)"},{categories:["who_staging_conditions"],concept_id:2894,name:"Bacterial infections, severe recurrent  (empyema, pyomyositis, meningitis, bone/joint infections but EXCLUDING pneumonia)"},{categories:["stage_4_conditions_pedaids","who_staging_conditions"],concept_id:7960,name:"Chronic herpes simplex infection (orolabial or cutaneous >1 month or visceral at any site)"},{categories:["stage_4_conditions_pedaids","who_staging_conditions"],concept_id:7552,name:"Cytomegalovirus infection: rentinitis or other organ (from age 1 month)"},{categories:["pshd_condition","stage_4_conditions_pedaids","who_staging_conditions","staging_4_conditions"],concept_id:5048,name:"Toxoplasmosis of the brain (from age 1 month)"},{categories:["stage_4_conditions_pedaids","who_staging_conditions"],concept_id:7961,name:"Recto-vaginal fistula, HIV-associated"},{categories:["severe_hiv_wasting_syndrome","stage_3_conditions_adults","who_staging_conditions"],concept_id:7540,name:"Severe weight loss >10% and/or BMI <18.5kg/m^2, unexplained"},{categories:["severe_hiv_wasting_syndrome","stage_3_conditions_adults","who_staging_conditions"],concept_id:5018,name:"Diarrhoea, chronic (>1 month) unexplained"},{categories:["severe_hiv_wasting_syndrome","stage_3_conditions_adults","stage_3_conditions_pedaids","who_staging_conditions"],concept_id:5027,name:"Fever, persistent unexplained, intermittent or constant, >1 month"},{categories:["stage_3_conditions_pedaids","stage_3_conditions_adults","who_staging_conditions"],concept_id:8206,name:"Pulmonary tuberculosis (current)"},{categories:["stage_3_conditions_pedaids","stage_3_conditions_adults","who_staging_conditions"],concept_id:7539,name:"Tuberculosis (PTB or EPTB) within the last 2 years"},{categories:["stage_3_conditions_adults","who_staging_conditions"],concept_id:5334,name:"Oral candidiasis"},{categories:["stage_3_conditions_adults","stage_3_conditions_pedaids","who_staging_conditions"],concept_id:7546,name:"Acute necrotizing ulcerative gingivitis or periodontitis"},{categories:["stage_3_conditions_pedaids","stage_3_conditions_adults","who_staging_conditions"],concept_id:2582,name:"Anaemia, unexplained < 8 g/dl"},{categories:["stage_3_conditions_pedaids","stage_3_conditions_adults","who_staging_conditions"],concept_id:7954,name:"Neutropaenia, unexplained < 500 /mm(cubed)"},{categories:["stage_3_conditions_adults","who_staging_conditions"],concept_id:7541,name:"Severe bacterial infections (pneumonia, empyema, pyomyositis, bone/joint, meningitis, bacteraemia)"},{categories:["stage_3_conditions_adults","stage_3_conditions_pedaids","who_staging_conditions"],concept_id:7955,name:"Thrombocytopaenia, chronic < 50,000 /mm(cubed)"},{categories:["stage_3_conditions_adults","who_staging_conditions"],concept_id:8205,name:"Hepatitis B or C infection"},{categories:["stage_3_conditions_pedaids","stage_3_conditions_adults","who_staging_conditions"],concept_id:5337,name:"Oral hairy leukoplakia"},{categories:["stage_3_conditions_adults","who_staging_conditions"],concept_id:7039,name:"Unspecified stage 3 condition"},{categories:["stage_3_conditions_pedaids","who_staging_conditions"],concept_id:7543,name:"Moderate unexplained wasting/malnutrition not responding to treatment (weight-for-height/ -age 70-79% or muac 11-12 cm)"},{categories:["stage_3_conditions_pedaids","who_staging_conditions"],concept_id:7544,name:"Diarrhoea, persistent unexplained (14 days or more)"},{categories:["pshd_condition","stage_3_conditions_pedaids","who_staging_conditions"],concept_id:7545,name:"Oral candidiasis (from age 2 months)"},{categories:["stage_3_conditions_pedaids","who_staging_conditions"],concept_id:7547,name:"Lymph node tuberculosis"},{categories:["stage_3_conditions_pedaids","who_staging_conditions"],concept_id:5024,name:"Symptomatic lymphoid interstitial pneumonia"},{categories:["stage_3_conditions_pedaids","who_staging_conditions"],concept_id:2889,name:"Chronic HIV-associated lung disease, including bronchiectasis"},{categories:["stage_2_conditions_adults","who_staging_conditions"],concept_id:5332,name:"Moderate weight loss less than or equal to 10 percent, unexplained"},{categories:["stage_2_conditions_pedaids","stage_2_conditions_adults","who_staging_conditions"],concept_id:5012,name:"Respiratory tract infections, recurrent (sinusitis, tonsilitus, otitis media, pharyngitis)"},{categories:["stage_2_conditions_adults","who_staging_conditions"],concept_id:2578,name:"Seborrhoeic dermatitis"},{categories:["stage_2_conditions_adults","stage_2_conditions_pedaids","who_staging_conditions"],concept_id:7536,name:"Papular pruritic eruptions / Fungal nail infections"},{categories:["stage_2_conditions_pedaids","stage_2_conditions_adults","who_staging_conditions"],concept_id:836,name:"Herpes zoster"},{categories:["stage_2_conditions_pedaids","stage_2_conditions_adults","who_staging_conditions"],concept_id:2575,name:"Angular cheilitis"},{categories:["stage_2_conditions_pedaids","stage_2_conditions_adults","who_staging_conditions"],concept_id:2576,name:"Oral ulcerations, recurrent"},{categories:["stage_2_conditions_adults","who_staging_conditions"],concept_id:7038,name:"Unspecified stage 2 condition"},{categories:["stage_2_conditions_pedaids","who_staging_conditions"],concept_id:7537,name:"Hepatosplenomegaly, persistent unexplained"},{categories:["stage_2_conditions_pedaids","who_staging_conditions"],concept_id:2891,name:"Lineal gingival erythema"},{categories:["anc_diagnosis","stage_2_conditions_pedaids","who_staging_conditions"],concept_id:6775,name:"Wart virus infection, extensive"},{categories:["stage_2_conditions_pedaids","who_staging_conditions"],concept_id:6776,name:"Molluscum contagiosum, extensive"},{categories:["stage_2_conditions_pedaids","who_staging_conditions"],concept_id:1210,name:"Parotid enlargement, persistent unexplained"},{categories:["stage_1_conditions_pedaids","stage_1_conditions_adults","who_staging_conditions"],concept_id:5327,name:"Asymptomatic HIV infection"},{categories:["stage_1_conditions_pedaids","stage_1_conditions_adults","who_staging_conditions"],concept_id:5328,name:"Persistent generalized lymphadenopathy"},{categories:[],concept_id:8426,name:"Radiology Orders"},{name:"Hand x-ray",concept_id:10337},{name:"Foot x-ray",concept_id:10334},{name:"Leg x-ray",concept_id:10342},{name:"Pelvis x-ray",concept_id:10343},{name:"Shoulder x-ray",concept_id:10344},{concept_id:10539,name:"History of COVID-19 contact"}];class i extends n["e"]{constructor(){super()}static getConceptsByCategory(e,t=!1){const a=o.filter(t=>{try{return t.categories.includes(e)}catch(a){return!1}});return t?a.sort((t,a)=>{try{return t.sortIndex[e]>a.sortIndex[e]?1:0}catch(n){return 0}}):a}static async getConceptSet(e,t=""){const a=await this.getConceptID(e),n=super.getJson("concept_set",{id:a,name:t});if(n)return n}static async getConceptName(e){const t=this.getCachedConceptName(e);return t||this.getConceptNameFromApi(e)}static getConceptID(e,t=!1){try{return this.getCachedConceptID(e,t)}catch(a){return this.getConceptIDFromApi(e)}}static getCachedConceptID(e,t=!1){const a=o.filter(a=>t?a.name===e:a.name.match(new RegExp(e,"i")));return this.resolveConcept(a,e)}static async getConceptIDFromApi(e){const t=await super.getJson("concepts",{name:e});return this.resolveConcept(t,e)}static async getConceptNameFromApi(e){const t=await super.getJson("concepts/"+e);if(t)return t.concept_names[0].name}static getCachedConceptName(e){const t=o.filter(t=>t.concept_id===e);if(t.length>=1)return t[0].name}static resolveConcept(e,t){if(1===e.length)return e[0].concept_id;throw`Concept name ${t} was not found or has a duplicates`}}},"82a9":function(e,t,a){"use strict";var n=a("7a23"),o=a("db10"),i=a("2345"),r=a("36ad"),s=a("6be2"),c=a("0a79"),l=a("51c8"),d=a("8a30"),u=a("2ef0"),p=Object(n["defineComponent"])({components:{IonList:d["y"],IonItem:d["w"],IonLabel:d["x"],HisTextInput:r["a"],HisKeyboard:o["a"],ViewPort:c["a"],IonGrid:d["p"],IonRow:d["H"],IonCol:d["m"],IonInfiniteScroll:d["t"],IonInfiniteScrollContent:d["u"],IonContent:d["n"]},mixins:[l["a"]],data:()=>({showKeyboard:!1,selected:"",filter:"",filtered:[],keyboard:s["h"],listData:[],infiniteScroll:{enabled:!1,page:1,limit:10,threshold:"100px",handler:async(e,t,a)=>[]}}),created(){var e,t,a,n,o,i,r,s,c,l,d;this.showKeyboard=!0===(null===(e=this.config)||void 0===e?void 0:e.showKeyboard),this.infiniteScroll.enabled=!0===(null===(t=this.config)||void 0===t||null===(a=t.infiniteScroll)||void 0===a?void 0:a.enabled),this.infiniteScroll.page=(null===(n=this.config)||void 0===n||null===(o=n.infiniteScroll)||void 0===o?void 0:o.page)||1,this.infiniteScroll.limit=(null===(i=this.config)||void 0===i||null===(r=i.infiniteScroll)||void 0===r?void 0:r.limit)||10,this.infiniteScroll.threshold=(null===(s=this.config)||void 0===s||null===(c=s.infiniteScroll)||void 0===c?void 0:c.threshold)||"100px",this.infiniteScroll.handler=null===(l=this.config)||void 0===l||null===(d=l.infiniteScroll)||void 0===d?void 0:d.handler},watch:{footerButtonEvent:{handler(e){if(Object(u["isPlainObject"])(e.onClickComponentEvents)){const t=(null===e||void 0===e?void 0:e.onClickComponentEvents)||{};if(t&&"function"===typeof t.setValue){const a=t.setValue(e);"string"===typeof a&&(this.filter=a,this.selected=a)}}},deep:!0},listData:{handler(e){e&&(this.filtered=e)},deep:!0,immediate:!0},filter:{async handler(e){var t;if(e)if(null!==(t=this.config)&&void 0!==t&&t.isFilterDataViaApi){if(this.filtered=await this.options(this.fdata,e),this.selected===this.filter){const e=Object(u["find"])(this.filtered,{label:this.filter});e&&this.$emit("onValue",e)}}else this.infiniteScroll.enabled&&(this.infiniteScroll.page=1),this.filtered=this.listData.filter(e=>this.isMatch(e.label,this.filter));else this.filtered=this.listData},immediate:!0}},methods:{isMatch(e,t){return e.match(new RegExp(t,"i"))},clearSelection(){this.filter="",this.selected=""},onKbValue(e,t=!0){t&&this.selected!==e&&(this.filter=e,this.selected=this.filter)},keypress(e){this.filter||(this.selected=""),this.filter=Object(i["a"])(e,this.selected),this.selected=this.filter},async pushData(e){if(this.infiniteScroll.enabled&&"function"===typeof this.infiniteScroll.handler){this.infiniteScroll.page++;const e=await this.infiniteScroll.handler(this.filter,this.infiniteScroll.page,this.infiniteScroll.limit);this.listData.push(...e)}e.target.complete()}}}),h=(a("7d28"),a("6b0d")),b=a.n(h);const m=b()(p,[["__scopeId","data-v-7b5e2256"]]);t["a"]=m},"83af":function(e,t,a){"use strict";a.d(t,"a",(function(){return o}));var n=a("cc6f");class o extends n["a"]{constructor(e,t){super(e,7,t)}async getNextAppointment(){const e=n["a"].getProgramID();return n["a"].getJson(`/programs/${e}/patients/${this.patientID}/next_appointment_date`,{date:this.date})}static async getDailiyAppointments(e){const t=n["a"].getProgramID();return n["a"].getJson(`/programs/${t}/booked_appointments`,{date:e,paginate:!1})}}},"84ef":function(e,t,a){},"866d":function(e,t,a){"use strict";a.d(t,"a",(function(){return i}));var n=a("1c74"),o=a("9283");class i extends n["e"]{constructor(e,t,a,o=n["e"].getSessionDate(),i=n["e"].getProgramID()){super(),this.startDate=t,this.endDate=a,this.date=o,this.name=e,this.programID=i}requestReport(e={}){return n["e"].getJson("radiology_reports",{program_id:this.programID,report_name:this.name,start_date:this.startDate,end_date:this.endDate,date:this.date,...e})}periodStr(){const e=e=>o["b"].toStandardHisDisplayFormat(e);return`${e(this.startDate)} - ${e(this.endDate)}`}}},8675:function(e,t,a){"use strict";a("ecea")},8734:function(e,t,a){"use strict";function n(e){return new Promise(t=>{setTimeout(()=>{t("")},e)})}a.d(t,"a",(function(){return n}))},"88b2":function(e,t,a){},8945:function(e,t,a){"use strict";a("5a7d")},"89b4":function(e,t,a){"use strict";a.d(t,"c",(function(){return s})),a.d(t,"b",(function(){return c})),a.d(t,"a",(function(){return l}));var n=a("156d"),o=a("9283");const i="4.15.23";class r extends Error{constructor(e){super(),this.message=`Your current API Version of "${e}" does not meet "${i}". Contact administrator to update your API Version`}}class s extends Error{constructor(){super(),this.message="Invalid username/password"}}var c;(function(e){e["CORE_VERSION"]="core_version"})(c||(c={}));class l{constructor(){this.token="",this.username="",this.roles=[],this.programs=[],this.userID=-1,this.sessionDate="",this.systemVersion="",this.coreVersion=""}setUsername(e){this.username=e}async loadConfig(){n["b"].getFileConfig()}async login(e){const t=await this.requestLogin(e);if(!t)throw"Unable to login";{const{authorization:{token:e,user:a}}=t;this.token=e,this.roles=a.roles,this.programs=a.programs,this.userID=a.user_id,this.sessionDate=await this.getSystemDate(),this.systemVersion=await this.getApiVersion(),this.coreVersion=await this.getHeadVersion()}}startSession(){sessionStorage.setItem("apiKey",this.token),sessionStorage.setItem("username",this.username),sessionStorage.setItem("userID",this.userID.toString()),sessionStorage.setItem("userRoles",JSON.stringify(this.roles)),sessionStorage.setItem("userPrograms",JSON.stringify(this.programs)),sessionStorage.setItem("sessionDate",this.sessionDate),sessionStorage.setItem("APIVersion",this.systemVersion),localStorage.setItem(c.CORE_VERSION,this.coreVersion)}clearSession(){sessionStorage.clear()}requestLogin(e){return this.postLogin("auth/login",{username:this.username,password:e})}async validateIfCorrectAPIVersion(){const e=await this.getApiVersion(),t=e=>e.replace("v","").split("-")[0].split(".").map(e=>parseInt(e||"0")),[a,n,o]=t(e),[s,c,l]=t(i);if(a>=s&&n>=c&&o>=l)return!0;throw new r(e)}async checkTimeIntegrity(){const e=await this.getSystemDate(),t=o["b"].currentDate();if(!e)throw"Unable to fetch server date";return t===e}initDateSync(e=1e3){setInterval(async()=>{const e=await this.getSystemDate();sessionStorage.getItem("apiDate")?sessionStorage.setItem("apiDate",e):sessionStorage.setItem("sessionDate",e)},e)}setActiveVersion(e){return localStorage.setItem(c.CORE_VERSION,e)}getActiveCoreVersion(){return localStorage.getItem(c.CORE_VERSION)}async getHeadVersion(){const e=await fetch("HEAD",{method:"GET"}),t=await(null===e||void 0===e?void 0:e.text());return t&&t.length<=25?t:"-"}versionLockingIsEnabled(){const e=this.getAppConf("enableVersionLocking");return"boolean"!==typeof e||e}getAppConf(e){const t=sessionStorage.getItem("appConf");if(t)try{const a=JSON.parse(t);return a[e]}catch(a){console.error(a)}return null}async getApiVersion(){const e=await this.getJson("version");return e&&e["System version"]?e["System version"]:"-"}async getSystemDate(){const{date:e}=await this.getJson("current_time");return e}async getJson(e){const t=await n["b"].get(e);if(t&&t.ok)return null===t||void 0===t?void 0:t.json()}async postLogin(e,t){const a=await n["b"].post(e,t);if(a){if(a.ok)return a.json();if(401===a.status)throw new s}}}},"8bc7":function(e,t,a){},"8c28":function(e,t,a){},"8ccc":function(e,t,a){},"8d25":function(e,t,a){"use strict";a("4ccf")},"8df6":function(e,t,a){"use strict";a.d(t,"a",(function(){return i}));a("caad");var n=a("cc6f"),o=a("8158");class i extends n["a"]{constructor(e,t){super(e,5,t),this.patientType="N/A",this.locationName=""}setLocationName(e){this.locationName=e}setPatientType(e){this.patientType=e}getType(){return this.patientType}static getPatientTypes(){return o["a"].getConceptsByCategory("art_patient_type").map(({name:e})=>({label:e,value:e}))}static async isDrugRefillPatient(e){const t=await n["a"].getFirstValueCoded(e,"Type of patient");return t&&"Drug Refill"===t}async loadPatientType(){const e=await this.getFirstValueCoded("Type of patient");e&&(this.patientType=e)}async save(){await this.savePatientType(this.patientType),this.locationName&&["External consultation","Drug Refill"].includes(this.patientType)&&await this.saveLocationClinic(this.locationName)}saveLocationClinic(e){return this.saveValueTextObs("Art clinic location",e)}savePatientType(e){return this.saveValueCodedObs("Type of patient",e)}}},"8efc":function(e,t,a){"use strict";var n=a("7a23");const o=Object(n["withScopeId"])("data-v-069a3628");Object(n["pushScopeId"])("data-v-069a3628");const i={key:0};Object(n["popScopeId"])();const r=o((function(e,t,a,r,s,c){const l=Object(n["resolveComponent"])("ion-title"),d=Object(n["resolveComponent"])("ion-toolbar"),u=Object(n["resolveComponent"])("ion-header");return Object(n["openBlock"])(),Object(n["createBlock"])(u,null,{default:o(()=>[Object(n["createVNode"])(d,null,{default:o(()=>[Object(n["createVNode"])(l,{class:"ion-text-center"},{default:o(()=>[Object(n["createVNode"])("span",{class:["his-lg-text",e.color]},Object(n["toDisplayString"])(e.title),3),e.subtitle?(Object(n["openBlock"])(),Object(n["createBlock"])("h1",i,Object(n["toDisplayString"])(e.subtitle),1)):Object(n["createCommentVNode"])("",!0)]),_:1})]),_:1})]),_:1})}));var s=a("8a30"),c=Object(n["defineComponent"])({components:{IonToolbar:s["Q"],IonTitle:s["P"],IonHeader:s["q"]},props:{title:{type:String,required:!0},subtitle:{type:String},color:{type:String}}}),l=(a("b744"),a("6b0d")),d=a.n(l);const u=d()(c,[["render",r],["__scopeId","data-v-069a3628"]]);var p=u;const h={style:{padding:"10px"}};function b(e,t,a,o,i,r){const s=Object(n["resolveComponent"])("dynamic-nav");return Object(n["openBlock"])(),Object(n["createBlock"])("div",h,[Object(n["createVNode"])(s,{color:"light",btns:e.btns},null,8,["btns"])])}var m=a("0f25"),g=Object(n["defineComponent"])({components:{DynamicNav:m["a"]},props:{buttons:{type:Object,default:()=>[]}},computed:{btns(){return this.buttons.map(e=>(e.size="large",e.color=e.color||"primary",e.visible=!0,e.styleClass="full-width-ion-btn",e.onClick||(e.onClick=async()=>{await s["X"].dismiss({action:e.name})}),e))}}});const f=d()(g,[["render",b]]);var O=f,j=Object(n["defineComponent"])({components:{ActionHeader:p,ActionFooter:O},props:{title:{type:String,required:!0},subtitle:{type:String},actionButtons:{type:Object,required:!0},color:{type:String}}});const _=j;t["a"]=_},9128:function(e,t,a){"use strict";a("b681")},"91e4":function(e,t,a){"use strict";a.d(t,"a",(function(){return o}));var n=a("5969");class o extends n["a"]{constructor(){super(),this.stock=[]}async loadStock(){this.stock=await n["a"].getJson("pharmacy/items",{paginate:!1})}async loadTrail(){return await n["a"].getJson("pharmacy/audit_trail",{paginate:!1})}groupStock(){const e={};for(const t in this.stock){const a=this.stock[t],n=a["drug_id"];e[n]||(e[n]={current_quantity:0,expiry_dates:[],pack_size:a.pack_size,drug_name:null===a["drug_name"]?a["drug_legacy_name"]:a["drug_name"]}),0!==a.current_quantity&&(e[n]["current_quantity"]+=parseFloat(a.current_quantity),e[n]["expiry_dates"].push(a["expiry_date"]))}return Object.values(e).map(e=>{let t="0";t=null==e.pack_size?e.current_quantity+"(tabs)":Math.trunc(e.current_quantity/e.pack_size);const a=e.expiry_dates.sort((e,t)=>+new Date(e)-+new Date(t))[0];return{drugName:e.drug_name,currentQuantity:t,expiryDate:a}})}}},"91ef":function(e,t,a){},9283:function(e,t,a){"use strict";a.d(t,"a",(function(){return i}));var n=a("5a0c"),o=a.n(n);const i="YYYY-MM-DD",r="DD/MMM/YYYY";function s(){return sessionStorage.getItem("sessionDate")||o()().format(i)}function c(){return o()().format(r)}function l(){return o()().format(i)}function d(e,t){return o()(e).diff(t,"days")}function u(e){return o()().diff(e,"years")}function p(e){return o()(e).format("HH:mm")}function h(e){const t=o()(e).format(r);return t.match(/invalid/i)?"":t}function b(e){const t=o()(e).format(i);return t.match(/invalid/i)?"":t}function m(e){const t=o()(s()).subtract(e,"years");return t.format(i)}function g(e){return o()(s()).subtract(e,"years").year()}function f(e){return o()(e).year()}function O(e){return o()(e).format("MMM")}function j(e){return o()(e).date()}function _(e,t,a){return o()(e).add(a,t)}function v(e,t,a){return o()(e).subtract(a,t)}function y(){return o()().year()}function w(e,t){const a=new Date(e);return a.setDate(a.getDate()-t),b(a)}function N(e){const[t]=m(e).split("-");return parseInt(t)}function C(e,t=-1,a=-1){let n=t.toString(),o=a.toString(),i=e;const r=e=>e.toString().match(/Unknown/i);return parseInt(i.toString())<1900&&(i="1900"),t&&!r(t)||(n="07"),a&&!r(a)||(o="15"),b(`${i}-${n}-${o}`)}t["b"]={currentDate:l,getYearOfAge:N,getYear:f,dateDiffInDays:d,getAgeInYears:u,toStandardHisTimeFormat:p,toStandardHisDisplayFormat:h,currentDisplayDate:c,stitchDate:C,toStandardHisFormat:b,estimateDateFromAge:m,getYearFromAge:g,getCurrentYear:y,getDateBeforeByDays:w,getMonth:O,getDay:j,add:_,subtract:v}},"92c1":function(e,t,a){"use strict";var n=a("7a23");function o(e,t,a,o,i,r){const s=Object(n["resolveComponent"])("ion-col"),c=Object(n["resolveComponent"])("ion-row"),l=Object(n["resolveComponent"])("ion-grid");return Object(n["openBlock"])(),Object(n["createBlock"])(l,null,{default:Object(n["withCtx"])(()=>[Object(n["createVNode"])(c,null,{default:Object(n["withCtx"])(()=>[(Object(n["openBlock"])(!0),Object(n["createBlock"])(n["Fragment"],null,Object(n["renderList"])(e.computedItems,(t,a)=>(Object(n["openBlock"])(),Object(n["createBlock"])(s,{key:a,size:e.grid[e.numberOfColumns]},{default:Object(n["withCtx"])(()=>[Object(n["renderSlot"])(e.$slots,"default",{entries:t})]),_:2},1032,["size"]))),128))]),_:1})]),_:1})}var i=a("8a30"),r=a("2ef0"),s=Object(n["defineComponent"])({name:"MultiColumnView",components:{IonGrid:i["p"],IonRow:i["H"],IonCol:i["m"]},props:{items:{type:Object,required:!0},numberOfColumns:{type:Number,default:1}},setup(e){const t={1:12,2:6,3:4,4:3,6:2},a=Object(n["computed"])(()=>Object(r["chunk"])(e.items,Math.ceil(e.items.length/e.numberOfColumns)));return{computedItems:a,grid:t}}}),c=a("6b0d"),l=a.n(c);const d=l()(s,[["render",o]]);t["a"]=d},9441:function(e,t,a){"use strict";var n=a("7a23");function o(e,t,a,o,i,r){const s=Object(n["resolveComponent"])("ion-title"),c=Object(n["resolveComponent"])("ion-col"),l=Object(n["resolveComponent"])("info-card"),d=Object(n["resolveComponent"])("ion-row"),u=Object(n["resolveComponent"])("ion-toolbar"),p=Object(n["resolveComponent"])("ion-header"),h=Object(n["resolveComponent"])("ion-content"),b=Object(n["resolveComponent"])("ion-button"),m=Object(n["resolveComponent"])("ion-footer"),g=Object(n["resolveComponent"])("ion-page");return Object(n["openBlock"])(),Object(n["createBlock"])(n["Fragment"],null,[Object(n["createTextVNode"])(Object(n["toDisplayString"])(e.currentField),1),Object(n["createVNode"])(g,null,{default:Object(n["withCtx"])(()=>[Object(n["createVNode"])(p,null,{default:Object(n["withCtx"])(()=>[Object(n["createVNode"])(u,null,{default:Object(n["withCtx"])(()=>[Object(n["createVNode"])(d,null,{default:Object(n["withCtx"])(()=>{var t,a;return[Object(n["createVNode"])(c,null,{default:Object(n["withCtx"])(()=>[Object(n["createVNode"])(s,{class:"his-lg-text"},{default:Object(n["withCtx"])(()=>[Object(n["createTextVNode"])(Object(n["toDisplayString"])(e.helpText),1)]),_:1})]),_:1}),null!==(t=e.currentField)&&void 0!==t&&null!==(a=t.config)&&void 0!==a&&a.toolbarInfo?(Object(n["openBlock"])(),Object(n["createBlock"])(c,{key:0},{default:Object(n["withCtx"])(()=>{var t,a;return[Object(n["createVNode"])(l,{style:{height:"100%"},items:null===(t=e.currentField)||void 0===t||null===(a=t.config)||void 0===a?void 0:a.toolbarInfo},null,8,["items"])]}),_:1})):Object(n["createCommentVNode"])("",!0)]}),_:1})]),_:1})]),_:1}),Object(n["createVNode"])(h,null,{default:Object(n["withCtx"])(()=>[(Object(n["openBlock"])(),Object(n["createBlock"])(n["KeepAlive"],null,[(Object(n["openBlock"])(),Object(n["createBlock"])(Object(n["resolveDynamicComponent"])(e.currentField.type),{key:e.currentField.id,config:e.currentField.config,options:e.currentField.options,preset:e.currentField.preset,clear:e.valueClearIndex,fdata:e.formData,cdata:e.computedFormData,activationState:e.state,onValue:e.currentField.onValue,defaultValue:e.currentField.defaultValue,onValueUpdate:e.currentField.onValueUpdate,footerButtonEvent:e.ftBtnEvent,onOnValue:e.onFieldValue,onOnFieldActivated:e.onFieldActivated},null,8,["config","options","preset","clear","fdata","cdata","activationState","onValue","defaultValue","onValueUpdate","footerButtonEvent","onOnValue","onOnFieldActivated"]))],1024))]),_:1}),Object(n["createVNode"])(m,null,{default:Object(n["withCtx"])(()=>[Object(n["createVNode"])(u,{color:"dark"},{default:Object(n["withCtx"])(()=>[(Object(n["openBlock"])(!0),Object(n["createBlock"])(n["Fragment"],null,Object(n["renderList"])(e.footerBtns,(t,a)=>Object(n["withDirectives"])((Object(n["openBlock"])(),Object(n["createBlock"])(b,{key:a,slot:t.slot||"start",class:t.styleClass,onClick:a=>e.onFtButtonClicked(t),color:t.color||"primary",size:t.size||"large",disabled:e.onDisabledBtnState(t,"disabled",!1)},{default:Object(n["withCtx"])(()=>[Object(n["createTextVNode"])(Object(n["toDisplayString"])(t.name),1)]),_:2},1032,["slot","class","onClick","color","size","disabled"])),[[n["vShow"],e.onVisibleBtnState(t,"visible")]])),128))]),_:1})]),_:1})]),_:1})],64)}a("caad");var i=a("d95e"),r=a("2ef0"),s=a("8a30"),c=a("b5e4");const l=Object(n["withScopeId"])("data-v-1842fa50"),d=l((function(e,t,a,o,i,r){const s=Object(n["resolveComponent"])("ion-col"),c=Object(n["resolveComponent"])("ion-row"),d=Object(n["resolveComponent"])("ion-grid"),u=Object(n["resolveComponent"])("tool-bar-medium-card");return Object(n["openBlock"])(),Object(n["createBlock"])(u,null,{default:l(()=>[Object(n["createVNode"])(d,null,{default:l(()=>[(Object(n["openBlock"])(!0),Object(n["createBlock"])(n["Fragment"],null,Object(n["renderList"])(e.rowItems,(e,t)=>(Object(n["openBlock"])(),Object(n["createBlock"])(c,{key:t},{default:l(()=>[(Object(n["openBlock"])(!0),Object(n["createBlock"])(n["Fragment"],null,Object(n["renderList"])(e,(e,t)=>(Object(n["openBlock"])(),Object(n["createBlock"])(s,{class:"col his-sm-text",key:t},{default:l(()=>[Object(n["createVNode"])("b",null,Object(n["toDisplayString"])(e.label)+":",1),Object(n["createTextVNode"])(" "+Object(n["toDisplayString"])(e.value),1)]),_:2},1024))),128))]),_:2},1024))),128))]),_:1})]),_:1})}));var u=a("2b47"),p=a("7e73"),h=Object(n["defineComponent"])({name:"HisResultCard",components:{ToolBarMediumCard:u["a"],IonGrid:s["p"],IonCol:s["m"],IonRow:s["H"]},props:{items:{type:Object,required:!0}},computed:{rowItems(){return p["a"].convertArrayToTurples(this.items,2)}}}),b=(a("369d"),a("6b0d")),m=a.n(b);const g=m()(h,[["render",d],["__scopeId","data-v-1842fa50"]]);var f=g,O=Object(n["defineComponent"])({name:"TouchscreenForm",components:{InfoCard:f,IonButtons:s["e"],IonPage:s["D"],IonContent:s["n"],IonFooter:s["o"],IonToolbar:s["Q"],IonButton:s["d"],IonHeader:s["q"],IonTitle:s["P"],IonCol:s["m"],IonRow:s["H"],...i["a"]},emits:["onFinish","onIndex"],props:{onFinish:{type:Function},skipSummary:{type:Boolean,default:!1},activeField:{type:String},fields:{type:Object,required:!0},cancelDestinationPath:{type:String}},data:()=>({ftBtnEvent:{eventIndex:0,btnName:"",btnOutput:null},helpText:"",valueClearIndex:0,currentIndex:0,currentField:{},currentFieldContext:null,formData:{},computedFormData:{},footerBtns:[],currentFields:[],state:""}),watch:{fields:{async handler(e){if(!Object(r["isEmpty"])(e)){this.buildFormData(e);let t=e;this.skipSummary||(t=[...t,this.getDefaultSummaryField()]),this.currentFields=t,this.activeField?this.mountField(this.activeField):await this.onNext()}},immediate:!0,deep:!0},state:{handler(e){["onValue","onClear","next","prev","onfinish","onload","unload"].includes(e)&&(s["V"].getTop().then(e=>e?s["V"].dismiss():null),s["X"].getTop().then(e=>e?s["X"].dismiss():null),s["T"].getTop().then(e=>e?s["T"].dismiss():null),s["Y"].getTop().then(e=>e?s["Y"].dismiss():null))},immediate:!0,deep:!0},activeField:{async handler(e){e&&this.mountField(e)}}},mounted(){this.footerBtns=[this.getCancelBtn()]},methods:{clearValue(){this.valueClearIndex+=1,this.setActiveFieldValue(null)},async onFtButtonClicked(e){this.ftBtnEvent.eventIndex+=1,this.ftBtnEvent.btnName=e.name,this.ftBtnEvent.btnOutput=await e.onClick(this.formData,this.computedFormData,this.currentFieldContext),e.onClickComponentEvents?this.ftBtnEvent.onClickComponentEvents=e.onClickComponentEvents:this.ftBtnEvent.onClickComponentEvents&&delete this.ftBtnEvent.onClickComponentEvents},async mountField(e){if("_NEXT_FIELD_"===e)return await this.goNext(),this.$emit("onIndex",this.currentIndex);const t=Object(r["findIndex"])(this.currentFields,{id:e});t>=0&&t<=this.currentFields.length&&(this.setActiveField(t),this.$emit("onIndex",t))},getCancelBtn(e={}){const t=e||{};return{name:t.name||"Cancel",color:t.color||"danger",onClick:async()=>{if(t.onClick)return t.onClick();const e=await Object(c["a"])("Are you sure you want to cancel?");e&&(this.cancelDestinationPath?this.$router.push(this.cancelDestinationPath):this.$router.back())}}},getClearBtn(e={}){const t=e||{};return{name:t.name||"Clear",color:t.color||"warning",slot:"end",onClick:async()=>{if(t.onClick)return t.onClick();const e=await Object(c["a"])("Are you sure you want to clear field data?");e&&this.clearValue()}}},getBackBtn(e={}){const t=e||{},a=()=>!(1===this.currentFields.length||this.currentIndex<=0);return{name:(null===t||void 0===t?void 0:t.name)||"Back",slot:"end",state:{disabled:{default:()=>!1,onsubmit:()=>!0},visible:{onload:()=>a(),default:()=>a()}},onClick:()=>t.onClick?t.onClick():this.goBack()}},getNextBtn(e={}){const t=e||{},a=()=>!(this.currentIndex+1>=this.currentFields.length||this.currentFields.length<=1);return{name:(null===t||void 0===t?void 0:t.name)||"Next",color:(null===t||void 0===t?void 0:t.color)||"success",slot:"end",state:{disabled:{onsubmit:()=>!0,default(e){return"requireNext"in e&&!e.requireNext}},visible:{onsubmit:()=>!1,onfinish:()=>!1,default:()=>a(),onload:()=>a()}},onClick:()=>t.onClick?t.onClick():this.goNext()}},getFinishBtn(e={}){const t=e||{},a=()=>this.currentIndex+1>=this.currentFields.length;return{name:(null===t||void 0===t?void 0:t.name)||"Finish",color:(null===t||void 0===t?void 0:t.color)||"success",slot:"end",state:{disabled:{default:()=>!1,onsubmit:()=>!0},visible:{onfinish:()=>!0,onsubmit:()=>!0,default:()=>a(),onload:()=>a()}},onClick:()=>t.onClick?t.onClick():this.goNext()}},onVisibleBtnState(e){var t;try{var a,n;if(null!==(a=this.currentField)&&void 0!==a&&null!==(n=a.config)&&void 0!==n&&n.hiddenFooterBtns.includes(e.name))return!1}catch(o){}if(null!==e&&void 0!==e&&null!==(t=e.state)&&void 0!==t&&t.visible){if(this.state in e.state.visible)return e.state.visible[this.state](this.currentField,this.formData);if("default"in e.state.visible)return e.state.visible["default"](this.currentField,this.formData)}return!0},onDisabledBtnState(e){var t;if(null!==e&&void 0!==e&&null!==(t=e.state)&&void 0!==t&&t.disabled){if(this.state in e.state.disabled)return e.state.disabled[this.state](this.currentField,this.formData);if("default"in e.state.disabled)return e.state.disabled["default"](this.currentField,this.formData)}return!1},getDefaultSummaryField(){return{id:"__form_summary__",helpText:"Summary",type:i["b"].TT_SUMMARY,config:{hiddenFooterBtns:["Clear"]},options:(e,t)=>{const a=[];for(const n in e){const o=this.currentFields.filter(e=>e.id===n||e.proxyID===n)[0],i=e[n];if(!i||void 0!=o.appearInSummary&&!o.appearInSummary(e,n))continue;const r=Array.isArray(i)?i:[i];r.forEach(i=>{o.summaryMapValue?a.push(o.summaryMapValue(i,e,t[n])):a.push({label:o.helpText,value:i.label})})}return a}}},resolveFormValues(e){const t={};for(const a in e)null!=e[a]&&(t[a]=e[a]);return t},async onFinishAction(){const e=this.resolveFormValues(this.formData),t=this.resolveFormValues(this.computedFormData);if(this.onFinish)try{this.state="onsubmit",await this.onFinish(e,t)}catch(a){console.error(a),Object(c["c"])(a)}this.state="onfinish",this.$emit("onFinish",e,t)},async goNext(){if(this.currentField.validation){const e=this.formData[this.currentField.id],t=this.currentField.validation(e,this.formData,this.computedFormData);if(t)return Object(c["e"])(t.join(", "),2e3)}this.currentField.beforeNext&&!await this.currentField.beforeNext(this.formData[this.currentField.id],this.formData,this.computedFormData,this)||await this.onNext()},async goBack(){for(let t=this.currentIndex;t>=0;--t){const a=this.currentFields[t];if(Object(r["isEmpty"])(this.currentField)||this.currentField.id!==a.id){try{if(!await this.checkFieldCondition(a))continue}catch(e){continue}return void await this.setActiveField(t,"prev")}}},async checkFieldCondition(e){return!(e.condition&&!await e.condition(this.formData,this.computedFormData))||("function"===typeof e.onConditionFalse&&e.onConditionFalse(),this.formData[e.id]=e.defaultOutput?e.defaultOutput(this.formData,this.computedFormData):null,e.computedValue&&(this.computedFormData[e.id]=e.defaultComputedOutput?e.defaultComputedOutput(this.formData,this.computedFormData):null),!1)},onFieldActivated(e){this.state="onload",this.currentFieldContext=e,this.currentField.onload&&this.currentField.onload(e)},async onUnload(e=""){try{if(this.state="unload",!Object(r["isEmpty"])(this.currentField)&&this.currentField.unload){const t=this.formData[this.currentField.id];await this.currentField.unload(t,e,this.formData,this.computedFormData,this)}}catch(t){console.error(t)}},buildFormData(e){this.formData={},e.forEach(e=>{e.proxyID&&(this.formData[e.proxyID]=null),this.formData[e.id]=null})},async setActiveFieldValue(e){this.state="onValue";const t=this.currentField.proxyID,a=this.currentField.id;t&&(this.formData[t]=e),this.formData[a]=e;let n=null;this.currentField.computedValue&&(e&&(n=this.currentField.computedValue(e,this.formData,this.computedFormData)),t?this.computedFormData[t]=n:this.computedFormData[a]=n),"function"===typeof this.currentField.updateHelpTextOnValue&&(this.helpText=this.currentField.updateHelpTextOnValue(e,n))},async onNext(){const e=this.currentFields.length;for(let a=this.currentIndex;a<e;++a){const e=this.currentFields[a];if(Object(r["isEmpty"])(this.currentField)||this.currentField.id!==e.id){try{if(!await this.checkFieldCondition(e))continue}catch(t){continue}if("function"===typeof this.currentField.exitsForm&&this.currentField.exitsForm(this.formData,this.computedFormData))break;return void await this.setActiveField(a,"next")}}await this.onFinishAction()},async setActiveField(e,t=""){var a;await this.onUnload(t),this.state=t,this.currentIndex=e,this.currentField=this.currentFields[this.currentIndex],this.helpText=this.currentField.dynamicHelpText?this.currentField.dynamicHelpText(this.formData):"function"===typeof this.currentField.updateHelpTextOnValue?this.currentField.updateHelpTextOnValue(this.formData[this.currentField.id],this.computedFormData[this.currentField.id]):this.currentField.helpText,this.footerBtns=[this.getCancelBtn()],this.currentField.config&&this.currentField.config.footerBtns&&(this.footerBtns=this.footerBtns.concat(this.currentField.config.footerBtns));const n=null===(a=this.currentField.config)||void 0===a?void 0:a.overrideDefaultFooterBtns;this.footerBtns.push(this.getClearBtn(null===n||void 0===n?void 0:n.clearBtn)),this.footerBtns.push(this.getBackBtn(null===n||void 0===n?void 0:n.backBtn)),this.footerBtns.push(this.getNextBtn(null===n||void 0===n?void 0:n.nextBtn)),this.footerBtns.push(this.getFinishBtn(null===n||void 0===n?void 0:n.finishBtn))},onFieldValue(e){this.setActiveFieldValue(e),"requireNext"in this.currentField&&!this.currentField.requireNext&&this.onNext()}}});const j=m()(O,[["render",o]]);t["a"]=j},9582:function(e,t,a){},"958b":function(e,t,a){"use strict";a("1406")},"95a0":function(e,t,a){"use strict";a("cf71")},"95cc":function(e,t,a){},9719:function(e,t,a){"use strict";a("6f4a")},"97ed":function(e,t,a){"use strict";a.d(t,"a",(function(){return d}));var n=a("cc6f"),o=a("8158"),i=a("b89f"),r=a("1c74"),s=a("5a0c"),c=a.n(s),l=a("2ef0");class d extends n["a"]{constructor(e,t){super(e,121,t)}static async getRadiologyList(e,t=""){return o["a"].getConceptSet(e,t)}async getRadiologyObs(e){const t="radiology/radiology_orders?patient_id="+e,a=await r["e"].getJson(t);return a}async showPreviousRadiolgy(e){return(await this.getRadiologyObs(e.getID())).length>0}async getPreviousRadiologyExaminations(e){const t=await r["e"].getThirdpartyApps();let a="";for(const o of t)"pacs"==o.name&&(a=o.url);Object(l["isEmpty"])(a)&&(a="opd/encounters/radiology/"+this.patientID);const n=await this.getRadiologyObs(e.getID());return n.length>0&&{data:n,url:a}}async submitToPacs(e,t){let a;for(const r of e)a=r.children[0].accession_number;const n=await Promise.all(e.map(async e=>({main_value_text:e.value_text,obs_id:e.obs_id,sub_value_text:e.children[0].value_text}))),o={patient_name:t.getFullName(),patientAge:t.getAge(),patientDOB:t.getBirthdate(),patientGender:t.getGender(),national_id:t.getNationalID(),person_id:t.getID(),encounter_id:this.getEncounterID(),date_created:this.getDate(),accession_number:a},i={username:r["e"].getUserName(),userID:r["e"].getUserID(),userRoles:r["e"].getUserRoles()};return r["e"].postJson("radiology/radiology_orders",{patient_details:o,physician_details:i,radiology_orders:n})}async getAccesionNumber(){return(await r["e"].getJson("sequences/next_accession_number"))["accession_number"]}async obsObj(e){const t=await this.getAccesionNumber(),a=[];for(const n of e)a.push({concept_id:n.concept_id,value_text:await o["a"].getConceptName(n.child.concept_id),child:{concept_id:n.child.concept_id,accession_number:t,value_text:await o["a"].getConceptName(n.child.value_coded)}});return a}async printOrders(e,t){const a=new i["a"],n=t.getNationalID(),r=t.getFullName(),s=[];for(const i of e)s.push("/radiology/barcode?accession_number="+await this.getAccesionNumber()+"&patient_national_id="+n+"&patient_name="+r+"&radio_order="+await o["a"].getConceptName(i.child.value_coded)+"&date_created="+c()(i.obs_datetime));await a.batchPrintLbls(s,!0)}}},"985a":function(e,t,a){"use strict";a("177d")},9877:function(e,t,a){},"996c":function(e,t,a){"use strict";a.d(t,"b",(function(){return s})),a.d(t,"a",(function(){return c})),a.d(t,"c",(function(){return l}));a("caad");var n=a("cc6f"),o=a("71c3"),i=a("9b7c"),r=a("76f1");const s=[{label:"ONCE A DAY (OD)",code:"OD",value:1},{label:"TWICE A DAY (BD)",code:"BD",value:2},{label:"THREE TIMES A DAY (TDS)",code:"TDS",value:3},{label:"FOUR TIMES A DAY (QID)",code:"QID",value:4},{label:"FIVE TIMES A DAY (5X/D)",code:"5X/D",value:5},{label:"SIX TIMES A DAY (Q4HRS)",code:"Q4HRS",value:6},{label:"IN THE MORNING (QAM)",code:"QAM",value:1},{label:"ONCE A DAY AT NOON (QNOON)",code:"QNOON",value:1},{label:"IN THE EVENING (QPM)",code:"QPM",value:1},{label:"ONCE A DAY AT NIGHT (QHS)",code:"QHS",value:1},{label:"EVERY OTHER DAY (QOD)",code:"QOD",value:.5},{label:"ONCE A WEEK (QWK)",code:"QWK",value:.14},{label:"ONCE A MONTH",code:"ONCE A MONTH",value:.03},{label:"TWICE A MONTH",code:"TWICE A MONTH",value:.071}],c=[{drug_id:236,duration:3,tabs:6,name:"Lumefantrine + Arthemether 1 x 6",dose_strength:1,units:"tabs",frequency:2},{drug_id:237,duration:3,tabs:12,name:"Lumefantrine + Arthemether 2 x 6",dose_strength:2,units:"tabs",frequency:2},{drug_id:238,duration:3,tabs:18,name:"Lumefantrine + Arthemether 3 x 6",dose_strength:3,units:"tabs",frequency:2},{drug_id:239,duration:3,tabs:24,name:"Lumefantrine + Arthemether 4 x 6",dose_strength:4,units:"tabs",frequency:2}];class l extends n["a"]{constructor(e,t){super(e,25,t)}async loadDrugs(e="",t=1,a=10){const n=await r["a"].getDrugs({name:e,page:t,page_size:a});return n.map(e=>({label:e.name,value:e.name,other:e}))}async hasMalaria(){const e=await i["a"].getLatestMalariaTestResult(this.patientID);if("No"===e){const e=await n["a"].getAllValueCoded(this.patientID,"Primary diagnosis");if(e.includes("Malaria"))return!0;const t=await n["a"].getAllValueCoded(this.patientID,"Secondary diagnosis");return!!t.includes("Malaria")}return"Positive"===e}createDrugOrder(e){return o["a"].create({encounter_id:this.encounterID,drug_orders:e})}}},"9ad3":function(e,t,a){},"9b7c":function(e,t,a){"use strict";a.d(t,"a",(function(){return d}));a("13d5");var n=a("1c74"),o=a("9283"),i=a("8158"),r=a("7957"),s=a("2ef0"),c=a("5a0c"),l=a.n(c);class d extends n["e"]{constructor(){super()}static create(e){return super.postJson("/lab/orders",e)}static getOrders(e,t={}){return super.getJson("/lab/orders",{patient_id:e,...t})}static async getOrdersIncludingGivenResultStatus(e,t={}){const a=(await this.getOrders(e,t)).map(async e=>{const t={...e,result_given:!1},a=e.tests.filter(e=>null!=e.result).map(e=>e.result).reduce((e,t)=>[...e,...t],[]).reduce((e,t)=>t.id,null);try{t["result_given"]=a?await(await r["a"].get(a)).children.reduce(async(e,t)=>await i["a"].getConceptID("Result Given to Client")===t.concept_id&&"Yes"===await i["a"].getConceptName(t.value_coded)?"Yes":e,"No"):"N/A"}catch(n){console.error(n)}return t});return await Promise.all(a)}static getTestTypes(){return super.getJson("/lab/test_types")}static getTestTypesBySpecimen(e=""){return super.getJson("/lab/test_types",{specimen_type:e})}static getSpecimens(e){return super.getJson("/lab/specimen_types",{test_type:e})}static getViralLoadOrders(e){return e.filter(e=>{try{const t=e.tests[0].result;return!!Array.isArray(t)&&(e.tests.length>0&&e.tests[0].result.length>0)}catch(t){console.log(t)}})}static async getLatestMalariaTestResult(e,t=this.getSessionDate()){const a=await this.getOrders(e),n=l()(t).subtract(7,"day"),o=a.filter(e=>{for(const t of e.tests)if(!Object(s["isEmpty"])(t.result)&&t.name.match(/Malaria/i)&&l()(e.order_date).isAfter(n))return!0;return!1});if(o.length>0){const e=o[0].tests.some(e=>e.result.some(e=>e.value.toString().match(/negative|no/i)));return e?"Negative":"Positive"}return"No"}static isDBSResult(e){return e.match(/DBS/i)}static isValidVLResult(e,t,a){return this.isDBSResult(e)?t.match(/</)&&a.match(/ldl|400|550|839/i)||t.match(/=/)&&parseFloat(a)>=400||">"!==t:t.match(/</)&&a.match(/ldl|20|40|150/i)||t.match(/=/)&&parseFloat(a)>=20}static isHighViralLoadResult(e){return"="===e.value_modifier&&parseFloat(e.value)>=1e3||(("<"===e.value_modifier||"&lt"===e.value_modifier)&&parseFloat(e.value)>1e3||(">"===e.value_modifier||"&gt"===e.value_modifier)&&(parseFloat(e.value)>=1e3||"LDL"==(""+e.value).toUpperCase().replace(/\s+/g,"")))}static formatLabs(e){const t=[];for(let a=0;a<e.length;a++){const n=e[a].accession_number,i="Unknown"==e[a].specimen.name?"N/A":e[a].specimen.name,r=e[a].order_date,s=e[a].tests;for(let c=0;c<s.length;c++){const l=s[c].result?s[c].result:[],d=[],u=[];let p="";for(let e=0;e<l.length;e++){p=null===l[e].date?"":""+l[e].date;const t=l[e].indicator.name,a=l[e].value,n=l[e].value_modifier.replace("&lt;","<").replace("&gt;",">");d.push(t+"   "+n+a),u.push(l[e].id)}t.push({encounter_id:e[a].encounter_id,order_id:e[a].order_id,result_given:e[a]["result_given"]||"N/A",accession_number:n,test_name:s[c].name,specimen:i,ordered:r?o["b"].toStandardHisFormat(r):"",result:d,resultIds:u,released:p?o["b"].toStandardHisFormat(p):""})}}return t}static buildLabOrders(e,t){return t.map(t=>{const a=i["a"].getCachedConceptID(t.reason,!0),n={encounter_id:e.encounter_id,tests:[{concept_id:t.concept_id}],reason_for_test_id:a,target_lab:super.getLocationName(),date:o["b"].toStandardHisFormat(super.getSessionDate()),requesting_clinician:super.getUserName()};return t.specimenConcept&&(n["specimen"]={concept_id:t.specimenConcept}),n})}static saveOrdersArray(e,t){return this.create({encounter_id:e,orders:t})}}},"9b7cc":function(e,t,a){},"9c73":function(e,t,a){"use strict";a.d(t,"a",(function(){return r}));var n=a("cc6f"),o=a("9b7c"),i=a("b89f");class r extends n["a"]{constructor(e){super(e,57)}getOrders(e){return o["a"].getOrders(this.patientID,{status:e})}voidOrder(e,t){return o["a"].void("lab/orders/"+e,{reason:t})}updateOrderSpecimen(e,t){return o["a"].putJson("lab/orders/"+e,{specimen:{concept_id:t}})}printSpecimenLabel(e){return(new i["a"]).printLbl("lab/labels/order?order_id="+e)}async placeOrder(e){let t=[];const a=await this.createEncounter();if(!a)throw"Unable to create encounter";const n={encounter_id:a.encounter_id,date:this.date,...e};return n.requesting_clinician||(n["requesting_clinician"]=o["a"].getUserName()),t=e.combine_tests?[n]:n.tests.map(e=>{const t={...n};return t.tests=[e],t}),o["a"].postJson("lab/orders",{orders:t})}static async getSpecimensForTests(e){const t=await Promise.all(e.map(e=>o["a"].getSpecimens(e.name)));return this.getCommonSpecimens(t)}static getCommonSpecimens(e){const t={},a=[];e.forEach(e=>{e.forEach(({name:e,...a})=>{const n={name:e,...a};t[e]?t[e].push(n):t[e]=[n]})});for(const n in t)t[n].length>=e.length&&a.push(t[n][0]);return a}}},"9ceb":function(e,t,a){"use strict";a.d(t,"b",(function(){return s}));var n=a("9283"),o=a("25da"),i=a("2ef0");function r(e){return"string"!==typeof e?e:e.replace(/,/gi," ").trim()}function s(e,t){const a=[],n=[];for(const o in t){const n=[];t[o].forEach((t,a)=>{const o=e[e.length-1][a];"exportable"in o&&o.exportable&&n.push(t.value?r(t.value):r(t.td))}),a.push(n)}for(const o in e){const t=[];e[o].forEach(e=>{e.exportable&&t.push(e.value?r(e.value):r(e.th))}),Object(i["isEmpty"])(t)||n.push(t)}return{columns:n,rows:a}}function c(e){const t={th:()=>e.th?e.th:"",td:()=>e.td?e.td:"",value:()=>e.value?e.value:"",type(){return e.type?e.type:"string"},exportable(){return!("exportable"in e)||e.exportable},sortable(){return!("sortable"in e)||e.sortable},colspan(){return e.colspan?e.colspan:0},cssClass(){return e.cssClass?e.cssClass:0},style(){return e.style?e.style:0},ascSort(){return e.ascSort?e.ascSort:(e,t)=>Object(o["a"])(t).asc(t=>{var a,n;return(null===(a=t[e])||void 0===a?void 0:a.sortValue)||(null===(n=t[e])||void 0===n?void 0:n.td)})},descSort(){return e.descSort?e.descSort:(e,t)=>Object(o["a"])(t).desc(t=>{var a,n;return(null===(a=t[e])||void 0===a?void 0:a.sortValue)||(null===(n=t[e])||void 0===n?void 0:n.td)})}},a={};for(const n in t)a[n]=t[n]();return a}function l(e,t={}){const a=t;return a.th=e,a.type="string",c(a)}function d(e,t={}){const a=t;return a.th=e,a.type="date",c(a)}function u(e,t={}){const a=t;return a.th=e,a.type="number",c(a)}function p(e,t={}){const a=t;return a.td=e?n["b"].toStandardHisDisplayFormat(e):"",c(a)}function h(e,t={}){return{td:e,...t}}function b(e,t,a={}){return{td:e,event:{click:t,obj:"link"},...a}}function m(e,t,a={},n=""){const o={td:e,event:{click:t,color:n,obj:"button"}};return a.event&&(o.event={...o.event,...a.event},delete a.event),Object.assign(o,a)}t["a"]={thTxt:l,thNum:u,thDate:d,td:h,tdBtn:m,tdDate:p,tdLink:b}},"9df8":function(e,t,a){},"9e49":function(e,t,a){"use strict";a.d(t,"a",(function(){return r}));var n=a("cc6f"),o=a("1c74"),i=a("b89f");class r extends n["a"]{constructor(e,t){super(e,32,t),this.hivStatus="",this.artStatus="",this.arvNumber="",this.arvStartDate="",this.isPregnancyTestDone=!1,this.isSubsequentVisit=!1}getHivStatus(){return this.hivStatus}getArtStatus(){return this.artStatus}getArvNumber(){return this.arvNumber}getArvStartDate(){return this.arvStartDate}isHivPositive(){return!!this.hivStatus.match(/positive/i)}async isAtRiskOfPreEclampsia(){const e=await n["a"].getFirstValueNumber(this.patientID,"Systolic blood pressure"),t=await n["a"].getFirstValueNumber(this.patientID,"Diastolic blood pressure");return e&&t&&e>=140&&t>=90}async loadSubsequentVisit(){const e=await o["e"].getJson(`programs/${this.programID}/patients/${this.patientID}/subsequent_visit`);if(e){if(this.hivStatus=e["hiv_status"],!this.hivStatus){const e=await this.getFirstValueCoded("HIV status");this.hivStatus=(""+e).match(/positive/i)?"Positive":""}this.isSubsequentVisit=e["subsequent_visit"],this.isPregnancyTestDone=e["pregnancy_test"]}}printLabResults(){return(new i["a"]).printLbl(`/programs/${this.programID}/patients/${this.patientID}/labels/lab_results?date=${this.date}`)}async loadArtStatus(){const e=await o["e"].getJson(`programs/${this.programID}/patients/${this.patientID}/art_hiv_status`);e&&(this.hivStatus=e["hiv_status"]||this.hivStatus,this.artStatus=e["art_status"]||"",this.arvNumber=e["arv_number"]||"",this.arvStartDate=e["arv_start_date"]||"")}}},"9ed9":function(e,t,a){"use strict";a("d4e7")},a039:function(e,t,a){"use strict";a("1c70")},a16a:function(e,t,a){"use strict";a("071f")},a246:function(e,t,a){},a3a5:function(e,t,a){"use strict";var n=a("7a23");const o={key:0},i={key:0},r={key:1},s={key:1},c={key:2};function l(e,t,a,l,d,u){const p=Object(n["resolveComponent"])("ion-button");return Object(n["openBlock"])(),Object(n["createBlock"])("table",{class:["his-md-text",e.classStyles]},[Object(n["createVNode"])("tr",null,[(Object(n["openBlock"])(!0),Object(n["createBlock"])(n["Fragment"],null,Object(n["renderList"])(e.columns,(e,t)=>(Object(n["openBlock"])(),Object(n["createBlock"])("th",{key:t},Object(n["toDisplayString"])(e),1))),128))]),(Object(n["openBlock"])(!0),Object(n["createBlock"])(n["Fragment"],null,Object(n["renderList"])(e.rows,(t,a)=>(Object(n["openBlock"])(),Object(n["createBlock"])("tr",{key:a},[(Object(n["openBlock"])(!0),Object(n["createBlock"])(n["Fragment"],null,Object(n["renderList"])(t,(l,d)=>(Object(n["openBlock"])(),Object(n["createBlock"])("td",{class:e.getColorCodeClass(a,d),key:d},[e.isLink(l)?(Object(n["openBlock"])(),Object(n["createBlock"])("div",o,[l.isActive?(Object(n["openBlock"])(),Object(n["createBlock"])("div",i,[Object(n["createVNode"])("a",{href:"#",onClick:Object(n["withModifiers"])(e=>l.action(t),["prevent"])},Object(n["toDisplayString"])(l.value),9,["onClick"])])):(Object(n["openBlock"])(),Object(n["createBlock"])("div",r,Object(n["toDisplayString"])(l.value),1))])):e.isActionButton(l)?(Object(n["openBlock"])(),Object(n["createBlock"])("div",s,[Object(n["createVNode"])(p,{color:(null===l||void 0===l?void 0:l.color)||"primary",style:l.style,onClick:e=>l.action(t)},{default:Object(n["withCtx"])(()=>[Object(n["createTextVNode"])(Object(n["toDisplayString"])(l.name),1)]),_:2},1032,["color","style","onClick"])])):(Object(n["openBlock"])(),Object(n["createBlock"])("div",c,[Object(n["createVNode"])("span",{innerHTML:l},null,8,["innerHTML"])]))],2))),128))]))),128))],2)}a("caad");var d=a("2ef0"),u=a("8a30"),p=Object(n["defineComponent"])({components:{IonButton:u["d"]},props:{styles:{type:Array},rowColors:{type:Array,default:()=>[]},cellColors:{type:Array,default:()=>[]},columns:{type:Object,required:!0},rows:{type:Object}},computed:{classStyles(){const e=this.styles?this.styles.join(" "):"";return"his-table "+e}},methods:{isLink(e){try{return"object"===typeof e&&"link"===e.type}catch(t){return e}},isActionButton(e){try{return"object"===typeof e&&"button"===e.type}catch(t){return e}},getColorCodeClass(e,t){let a="";if(!Object(d["isEmpty"])(this.rowColors)){const t=this.rowColors.filter(t=>t.indexes.includes(e));Object(d["isEmpty"])(t)||(a+=" "+t[0].class)}if(!Object(d["isEmpty"])(this.cellColors)){const n=this.cellColors.filter(a=>a.index===t&&a.row===e);Object(d["isEmpty"])(n)||(a+=" "+n[0].class)}return a}}}),h=a("6b0d"),b=a.n(h);const m=b()(p,[["render",l]]);t["a"]=m},a3fb:function(e,t,a){},a430:function(e,t,a){"use strict";a("95cc")},a4d3:function(e,t,a){"use strict";a("a6f7")},a542:function(e,t,a){"use strict";a("84ef")},a6f7:function(e,t,a){},a7b1:function(e,t,a){},a83d:function(e,t,a){"use strict";a("8bc7")},a981:function(e,t,a){"use strict";a("749f")},aa55:function(e,t,a){var n={"./ion-action-sheet.entry.js":["6618","chunk-504c4825"],"./ion-alert.entry.js":["f06c","chunk-008cd3d6"],"./ion-app_8.entry.js":["c215","chunk-34f7327c"],"./ion-avatar_3.entry.js":["cf12","chunk-59d4c87c"],"./ion-back-button.entry.js":["4b35","chunk-69eb8776"],"./ion-backdrop.entry.js":["429d","chunk-2d0c073f"],"./ion-button_2.entry.js":["4453","chunk-25d83ca8"],"./ion-card_5.entry.js":["070b","chunk-541ea42d"],"./ion-checkbox.entry.js":["dfd8","chunk-09162720"],"./ion-chip.entry.js":["430d","chunk-09155df3"],"./ion-col_3.entry.js":["6a8a","chunk-2d0da04a"],"./ion-datetime_3.entry.js":["c15b","chunk-21a76241"],"./ion-fab_3.entry.js":["dd47","chunk-3ed29de3"],"./ion-img.entry.js":["9588","chunk-2d0e5812"],"./ion-infinite-scroll_2.entry.js":["d1e5","chunk-2d21da73"],"./ion-input.entry.js":["d111","chunk-37f2300e"],"./ion-item-option_3.entry.js":["1bb3d","chunk-b14c2520"],"./ion-item_8.entry.js":["69da","chunk-5a8ac886"],"./ion-loading.entry.js":["53a5","chunk-6d375f34"],"./ion-menu_3.entry.js":["cb00","chunk-097e0872"],"./ion-modal.entry.js":["1ad0","chunk-f858ef4e"],"./ion-nav_2.entry.js":["e44f","chunk-c53d26f0"],"./ion-popover.entry.js":["4285","chunk-1f3fa45a"],"./ion-progress-bar.entry.js":["9b72","chunk-1dbc15a2"],"./ion-radio_2.entry.js":["beb3","chunk-0e93a01c"],"./ion-range.entry.js":["719f","chunk-54bbd082"],"./ion-refresher_2.entry.js":["0a47","chunk-d8413eac"],"./ion-reorder_2.entry.js":["6672","chunk-d0e8aa0a"],"./ion-ripple-effect.entry.js":["c8da","chunk-2d218068"],"./ion-route_4.entry.js":["10e8","chunk-858cd918"],"./ion-searchbar.entry.js":["8625","chunk-a9395c36"],"./ion-segment_2.entry.js":["0c02","chunk-462c869e"],"./ion-select_3.entry.js":["d25f","chunk-79f1dac7"],"./ion-slide_2.entry.js":["05dd","chunk-2d0a463b"],"./ion-spinner.entry.js":["e11b","chunk-8bb7f81e"],"./ion-split-pane.entry.js":["aae8","chunk-2d213189"],"./ion-tab-bar_2.entry.js":["a2bb","chunk-02c995b5"],"./ion-tab_2.entry.js":["6725","chunk-c567cc2a"],"./ion-text.entry.js":["ed3b","chunk-30dd9750"],"./ion-textarea.entry.js":["8798","chunk-eaa2b130"],"./ion-toast.entry.js":["c1a5","chunk-41c0f7a4"],"./ion-toggle.entry.js":["bef2","chunk-7548ca2d"],"./ion-virtual-scroll.entry.js":["5fd7","chunk-2d0d43da"]};function o(e){if(!a.o(n,e))return Promise.resolve().then((function(){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}));var t=n[e],o=t[0];return a.e(t[1]).then((function(){return a(o)}))}o.keys=function(){return Object.keys(n)},o.id="aa55",e.exports=o},aabe:function(e,t,a){"use strict";a("cdb4")},ab49:function(e,t,a){"use strict";a.r(t);var n=a("7a23");function o(e,t,a,o,i,r){const s=Object(n["resolveComponent"])("his-standard-form");return Object(n["openBlock"])(),Object(n["createBlock"])(s,{fields:e.fields,activeField:e.activeField,onOnskip:t[1]||(t[1]=t=>e.activeField=""),onFinishAction:e.onFinish,skipSummary:!0,cancelDestinationPath:e.cancelDestination},null,8,["fields","activeField","onFinishAction","cancelDestinationPath"])}a("caad");var i=a("d95e"),r=a("7920"),s=a("2706"),c=a("b515"),l=a("b5e4"),d=a("7365"),u=a("aee2"),p=a("ad60"),h=a("d1ca"),b=a("2ef0"),m=a("3e53"),g=a("7f35"),f=a("5a0c"),O=a.n(f),j=Object(n["defineComponent"])({mixins:[d["a"]],components:{HisStandardForm:r["a"]},data:()=>({app:m["a"].getActiveApp(),activeField:"",age:null,gender:null,hasBPinfo:!1,finalHeightValue:null,recentHeight:null,recentHeightObsID:-1,HTNEnabled:!1,optionWhiteList:[],hasHTNObs:!1,vitals:{},weightForHeight:{},medianWeightandHeight:{},canEditHeight:!1}),watch:{ready:{async handler(e){e&&await this.init(this.patient)},immediate:!0}},methods:{async init(e){const t=this.$route.query.vital_options;if(this.vitals=new c["a"](e.getID(),this.providerID),this.age=e.getAge(),this.gender=e.getGender(),t&&(this.optionWhiteList=t.split(",")),this.canCheckWeightHeight()){const t=await e.getRecentHeightObs();if(Object(b["isEmpty"])(t))this.canEditHeight=!0;else{const e=O()(t["obs_datetime"]).diff(this.patient.getBirthdate(),"year");this.recentHeight=t["value_numeric"],this.recentHeightObsID=t["obs_id"],this.canEditHeight=e<18||this.age<18}this.age<=14&&(this.medianWeightandHeight=await e.getMedianWeightHeight(),this.weightForHeight=await p["a"].getWeightForHeightValues())}await c["a"].getAll(e.getID(),"Treatment status").then(e=>{this.hasHTNObs=e&&e.length>0}),this.HTNEnabled=await h["b"].htnEnabled(),this.fields=this.getFields()},getOptions(){const e=this.recentHeight&&this.age>18?this.recentHeight:"",t=[{label:"Weight",value:"",other:{modifier:"KG",icon:"weight",required:!0}},{label:"Height",value:""+e,other:{modifier:"CM",icon:"height",recentHeight:this.recentHeight,visible:this.canEditHeight,required:this.canEditHeight}},{label:"BP",value:"",other:{modifier:"mmHG",icon:"bp"}},{label:"Temp",value:"",other:{modifier:"C",icon:"temp"}},{label:"SP02",value:"",other:{modifier:"%",icon:"spo2"}},{label:"Pulse",value:"",other:{modifier:"BPM",icon:"pulse-rate"}},{label:"Age",value:this.age,other:{modifier:"Years old",icon:"",visible:!1}}];return Object(b["isEmpty"])(this.optionWhiteList)?t:t.filter(e=>this.optionWhiteList.includes(e.label)).map(e=>(e.other.required=!0,e))},canCheckWeightHeight(){return Object(b["isEmpty"])(this.optionWhiteList)||this.optionWhiteList.includes("Height")&&this.optionWhiteList.includes("Weight")},canCheckBp(){return Object(b["isEmpty"])(this.optionWhiteList)||this.optionWhiteList.includes("BP")},async onFinish(e){const t=await this.vitals.createEncounter();if(!t)return Object(l["e"])("Unable to create treatment encounter");const a=await this.buildObs(e),n=await this.vitals.saveObservationList(a);if(!n)return Object(l["e"])("Unable to save patient observations");Object(l["d"])("Observations and encounter created!"),this.nextTask()},async buildObs(e){const t=await this.mapObs(this.sanitizeVitals(e.vitals).filter(e=>"BP"!==e.label).map(e=>("Height"===e.label&&e.other.visible&&this.finalHeightValue&&(e.value=this.finalHeightValue),e)));if(this.HTNEnabled&&!this.hasHTNObs&&e.on_htn_medication){const a=await this.vitals.buildValueText("Treatment status",e.on_htn_medication.value);t.push(a)}return t},splitBP(e){const t=[];return e.forEach(e=>{if("BP"===e.label){const a=(""+e.value).split("/"),n=a[0],o=a[1];t.push({label:"Systolic",value:n}),t.push({label:"Diastolic",value:o})}}),t},getBMI(e){const t=this.getVal(e,"Weight"),a=this.getVal(e,"Height"),n=[];if(this.age<=14){const e=(t/parseFloat(this.medianWeightandHeight["weight"])*100).toFixed(0),o=(a/parseFloat(this.medianWeightandHeight["height"])*100).toFixed(0),i=(a%Math.floor(a)<.5?0:.5)+Math.floor(a),r=this.weightForHeight[i.toFixed(1)],s=(t/r*100).toFixed(0);isNaN(parseFloat(s))||n.push({label:"Weight for height percent of median",value:s}),n.push({label:"Weight for age percent of median",value:e}),n.push({label:"Height for age percent of median",value:o})}else{const e=u["a"].calculateBMI(t,a);n.push({label:"BMI",value:e})}return n},getVal(e,t){const a=e.filter(e=>e.label===t);return""===a[0].value?0:parseFloat(""+a[0].value)},async mapObs(e){const t=e.map(async e=>{const t=await this.vitals.buildValueNumber(e.label,e.value);return t});return Promise.all(t)},validateVitals(e){const t=this.checkRequiredVitals(e);if(t.length>0)return t.map(e=>[e.label+" can not be empty"]);const a=this.sanitizeVitals(e);return this.vitals.validateAll(a)},sanitizeVitals(e){let t=e.filter(e=>("Height"!==e.label||0!=e.other.required)&&(""!==e.value&&"Age"!==e.label));return this.canCheckBp()&&(t=t.concat(this.splitBP(t))),this.canCheckWeightHeight()&&(t=t.concat(this.getBMI(e))),t},checkRequiredVitals(e){return e.filter(e=>""===e.value&&!0===e.other.required)},getFields(){const e=this.HTNEnabled,t=this.hasHTNObs;return[{id:"on_htn_medication",helpText:"Already taking drugs for blood pressure?",type:i["b"].TT_SELECT,validation:e=>s["a"].required(e),condition:()=>{var a;return e&&!t&&"ART"===(null===(a=this.app)||void 0===a?void 0:a.applicationName)},options:()=>[{label:"Yes",value:"BP Drugs started"},{label:"No",value:"Not on BP Drugs"}]},{id:"vitals",helpText:"Vitals entry",type:i["b"].TT_VITALS_ENTRY,validation:e=>this.validateVitals(e),beforeNext:async e=>{const t=Object(b["find"])(e,{label:"Height"});if(t&&this.recentHeight&&t.other.visible){const e=parseInt(""+(t.value||0)),a=parseInt(""+(this.recentHeight||0));if(e<a){const t=`Use ${a} CM`,n=`Use ${e} CM`,o=await Object(g["a"])(`Previous Height "${a} CM"`,`Current Height "${e} CM"`,`Inconsistent Height Reading (Height can not be lower than previous height of " ${this.recentHeight} "CM. Please SELECT the correct height.)`,[{name:t,slot:"start",color:"success"},{name:n,slot:"end",color:"danger"}]);o===n&&this.recentHeightObsID?await Object(l["a"])("Do you want to void height observation for "+a)&&await c["a"].voidObs(this.recentHeightObsID):this.finalHeightValue=a}}return!0},config:{hiddenFooterBtns:["Clear"],onUpdateAlertStatus:async e=>{const t=Object(b["find"])(e,{label:"Weight"}),a=Object(b["find"])(e,{label:"Height"});if(!t||!a)return;const n=parseFloat(t.value),o=parseFloat(a.value);if(n<=0||o<=0)return{label:"BMI",value:"N/A",color:"",status:""};const i=await u["a"].getBMI(n,o,this.gender,this.age);return{label:"BMI",value:i.index,color:i.color,status:i.result}},onChangeOption:e=>{if(!e.value&&e.other.required)throw`Value for ${e.label} is required`;if(e.value){const t=this.vitals.validator(e);if(t&&t.length)throw t}}},options:()=>this.getOptions()}]}}}),_=a("6b0d"),v=a.n(_);const y=v()(j,[["render",o]]);t["default"]=y},abd7:function(e,t,a){"use strict";a("b993")},acb4:function(e,t,a){},ad49:function(e,t,a){"use strict";a.d(t,"a",(function(){return o}));var n=a("1c74");class o extends n["e"]{constructor(){super()}static async get(e){try{const t=await super.getJson("global_properties",{property:e});if(t&&e in t)return t[e]}catch(t){console.error(t)}}static async isProp(e){try{const[t,a]=e.split("="),n=await this.get(t);if(n)return a===n}catch(t){console.error(t)}return!1}static set(e,t){return super.postJson("global_properties",{property:e,property_value:t})}}},ad60:function(e,t,a){"use strict";a.d(t,"a",(function(){return r}));var n=a("1c74"),o=a("2b3a"),i=a("8a30");class r extends n["e"]{constructor(){super()}static getAllPrograms(){return super.getJson("programs",{page_size:1e3})}static getPatientPrograms(e){return super.getJson(`patients/${e}/programs`)}static getPatientVLInfo(e){const t=super.getProgramID();return super.getJson(`programs/${t}/patients/${e}/vl_info`,{date:this.getSessionDate()})}static getProgramWorkflows(e){return super.getJson(`programs/${e}/workflows`)}static getPatientStates(e,t){return super.getJson(`programs/${t}/patients/${e}/states`)}static voidProgram(e,t=""){return super.void(`patient_programs/${e}/`,{reason:t})}static createState(e,t,a){return super.postJson(`programs/${t}/patients/${e}/states`,a)}static voidState(e,t,a,n=""){return super.void(`programs/${t}/patients/${e}/states/${a}`,{reason:n})}static async getProgramInformation(e){try{const t=await super.getJson(`/programs/${super.getProgramID()}/patients/${e}`);return t}catch(t){return{}}}static getCurrentProgramInformation(e,t){return super.getJson(`/programs/${super.getProgramID()}/patients/${e}/visit?date=${t}`)}static getMastercardDrugInformation(e,t){return super.getJson(`/programs/${super.getProgramID()}/patients/${e}/mastercard_data?date=${t}`)}static getNextTask(e){return super.getJson(`/workflows/${super.getProgramID()}/${e}`,{date:super.getSessionDate()})}static getNextSuggestedARVNumber(){return super.getJson("/programs/1/next_available_arv_number")}static getFastTrackStatus(e){return super.getJson("/on_fast_track",{person_id:e,date:super.getSessionDate()})}static createPatient(e){return super.postJson("/patients/",{program_id:super.getProgramID(),person_id:e})}static enrollPatient(e){return super.postJson(`/patients/${e}/programs`,{program_id:super.getProgramID(),date_enrolled:super.getSessionDate()})}static enrollProgram(e,t,a){return super.postJson(`/patients/${e}/programs`,{program_id:t,date_enrolled:a})}static getWeightForHeightValues(){return super.getJson("/patient_weight_for_height_values")}static async selectApplication(){const e=await i["X"].create({component:o["a"],cssClass:"my-custom-class",backdropDismiss:!1,componentProps:{appVersion:n["e"].getFullVersion()}});return e.present(),e}}},ad8d:function(e,t,a){"use strict";a.d(t,"a",(function(){return o})),a.d(t,"b",(function(){return i}));var n=a("5969");const o=["<1 year","1-4 years","5-9 years","10-14 years","15-19 years","20-24 years","25-29 years","30-34 years","35-39 years","40-44 years","45-49 years","50-54 years","55-59 years","60-64 years","65-69 years","70-74 years","75-79 years","80-84 years","85-89 years","90 plus years"];class i extends n["a"]{constructor(){super()}getBookedAppointments(e){return n["a"].getJson(`programs/${this.programID}/scheduled_appointments`,{date:e})}getViralLoadResults(e){return this.getReport(`/programs/${this.programID}/reports/high_vl_patients`,{range:e})}getOtherOutcome(e){return this.getReport("patient_outcome_list",{outcome:e})}getPatientVisitTypes(){return this.getReport("patient_visit_types")}getClientsDueForVl(){return this.getReport("clients_due_vl")}getClientRentention(){return this.getReport(`/programs/${this.programID}/reports/retention`)}getExternalConsultationClients(){return this.getReport(this.programID+"/external_consultation_clients")}getMissedAppointments(){return this.getReport("missed_appointments")}getPregnantWomen(){return this.getReport(`/programs/${this.programID}/reports/pregnant_patients`)}getArchivingCandidates(){return n["a"].getJson(`programs/${this.programID}/reports/archiving_candidates`,{start_date:this.date})}}},adc7:function(e,t,a){"use strict";var n=a("7a23");const o=Object(n["withScopeId"])("data-v-a497dcd2");Object(n["pushScopeId"])("data-v-a497dcd2");const i={style:{}};Object(n["popScopeId"])();const r=o((function(e,t,a,r,s,c){const l=Object(n["resolveComponent"])("ion-text"),d=Object(n["resolveComponent"])("ion-label"),u=Object(n["resolveComponent"])("ion-chip"),p=Object(n["resolveComponent"])("ion-col"),h=Object(n["resolveComponent"])("ion-row"),b=Object(n["resolveComponent"])("ion-item"),m=Object(n["resolveComponent"])("ion-list"),g=Object(n["resolveComponent"])("ion-checkbox"),f=Object(n["resolveComponent"])("ion-grid"),O=Object(n["resolveComponent"])("view-port");return Object(n["openBlock"])(),Object(n["createBlock"])("div",null,[Object(n["createVNode"])(O,{showFull:!e.showKeyboard,style:{padding:"0"}},{default:o(()=>[Object(n["createVNode"])(f,null,{default:o(()=>[Object(n["createVNode"])(h,null,{default:o(()=>[Object(n["createVNode"])(p,{size:"12"},{default:o(()=>[(Object(n["openBlock"])(!0),Object(n["createBlock"])(n["Fragment"],null,Object(n["renderList"])(e.checkedItems,(t,a)=>(Object(n["openBlock"])(),Object(n["createBlock"])("span",{key:a},[Object(n["createVNode"])(u,{color:"danger",onClick:a=>e.uncheck(t)},{default:o(()=>[Object(n["createVNode"])(d,null,{default:o(()=>[Object(n["createVNode"])(l,{class:"his-md-text"},{default:o(()=>[Object(n["createTextVNode"])(Object(n["toDisplayString"])(t.label),1)]),_:2},1024)]),_:2},1024)]),_:2},1032,["onClick"])]))),128))]),_:1})]),_:1}),Object(n["createVNode"])(h,null,{default:o(()=>[Object(n["createVNode"])(p,{size:"4"},{default:o(()=>[Object(n["createVNode"])(m,{style:{overflowY:"auto",height:"80vh",margin:0}},{default:o(()=>[(Object(n["openBlock"])(!0),Object(n["createBlock"])(n["Fragment"],null,Object(n["renderList"])(e.listData,(t,a)=>(Object(n["openBlock"])(),Object(n["createBlock"])(b,{key:a,onClick:a=>e.getSpecificRadiologyOrders(t.value),detail:!0,color:e.ActiveCategory===t.label?"lightblue":""},{default:o(()=>[Object(n["createVNode"])(d,null,{default:o(()=>[Object(n["createVNode"])(l,{class:"his-md-text"},{default:o(()=>[Object(n["createTextVNode"])(Object(n["toDisplayString"])(t.label),1)]),_:2},1024)]),_:2},1024)]),_:2},1032,["onClick","color"]))),128))]),_:1})]),_:1}),e.ActiveCategory?(Object(n["openBlock"])(),Object(n["createBlock"])(p,{key:0,style:{overflowY:"auto",height:"78vh"}},{default:o(()=>[Object(n["createVNode"])("div",i,[Object(n["createVNode"])(m,{class:"view-port-content"},{default:o(()=>[(Object(n["openBlock"])(!0),Object(n["createBlock"])(n["Fragment"],null,Object(n["renderList"])(e.activeCategoryItems,(t,a)=>(Object(n["openBlock"])(),Object(n["createBlock"])(b,{key:a,color:t.isChecked?"lightblue":""},{default:o(()=>[Object(n["createVNode"])(d,null,{default:o(()=>[Object(n["createVNode"])(l,{class:"his-md-text"},{default:o(()=>[Object(n["createTextVNode"])(Object(n["toDisplayString"])(t.label),1)]),_:2},1024)]),_:2},1024),Object(n["createVNode"])(g,{slot:"end",modelValue:t.isChecked,"onUpdate:modelValue":e=>t.isChecked=e,onIonChange:a=>e.onselect(t,a),disabled:null===t||void 0===t?void 0:t.disabled},null,8,["modelValue","onUpdate:modelValue","onIonChange","disabled"])]),_:2},1032,["color"]))),128))]),_:1})])]),_:1})):Object(n["createCommentVNode"])("",!0)]),_:1})]),_:1})]),_:1},8,["showFull"])])}));var s=a("8a30"),c=a("82a9"),l=a("97ed"),d=a("2ef0"),u=Object(n["defineComponent"])({components:{IonCheckbox:s["k"],IonText:s["M"],IonChip:s["l"]},name:"HisRadiologyPicker",mixins:[c["a"]],data:()=>({radiologyOrdersList:{},ActiveCategory:""}),methods:{async onselect(e,t){this.$nextTick(async()=>{const a={...e};if(a.isChecked=t.target.checked,this.onValue&&a.isChecked){const e=await this.onValue(a);if(!e)return t.target.checked=!1}this.onValueUpdate&&(this.radiologyOrdersList=await this.onValueUpdate({...this.radiologyOrdersList},a)),this.$emit("onValue",this.getChecked(this.radiologyOrdersList))})},async getSpecificRadiologyOrders(e){if(!(e in this.radiologyOrdersList)){const t=await l["a"].getRadiologyList(e);this.radiologyOrdersList[e]=this.mapListToOptions(t,e)}this.ActiveCategory=e},mapListToOptions(e,t=""){return Object(d["isEmpty"])(e)?[]:e.map(e=>{const a={label:e.name,value:e.name,isChecked:!1,other:e};return t&&(a.other.parent=t),a})},uncheck(e){this.radiologyOrdersList[e.other.parent].forEach(t=>{t.label===e.label&&(t.isChecked=!1)})},getChecked(e){const t=[];for(const a in e)t.push(...e[a].filter(e=>e.isChecked));return t}},computed:{checkedItems(){return this.getChecked(this.radiologyOrdersList)},activeCategoryItems(){return this.radiologyOrdersList[this.ActiveCategory]}},watch:{clear(){for(const e in this.radiologyOrdersList)this.radiologyOrdersList[e]=this.radiologyOrdersList[e].map(e=>(e.isChecked=!1,e))}},async mounted(){this.$emit("onFieldActivated",this);const e=await l["a"].getRadiologyList("Radiology Orders");this.listData=this.mapListToOptions(e),this.$emit("onValue",this.getChecked(this.radiologyOrdersList))}}),p=(a("7fe8"),a("6b0d")),h=a.n(p);const b=h()(u,[["render",r],["__scopeId","data-v-a497dcd2"]]);t["a"]=b},aee2:function(e,t,a){"use strict";a.d(t,"a",(function(){return n}));class n{static async getBMIData(){const e=await fetch("/bmi.json");return e.json()}static async getBMIResult(e,t,a){let n={result:"",color:"",index:a};if(a<=0)return n.index=0,n;if(t<5&&t>0)n.result="Use MUAC to calculate nutrition status",n.color="red";else{t>18&&(t=19);const o=await this.getBMIData(),i=o[e][t];i&&(n=this.buildBounds(Object.keys(i),i,a,o.colors))}return n}static buildBounds(e,t,a,n){const o={result:"",color:"",index:a};return e.forEach(e=>{if(e.indexOf("-")>=0){const i=e.split("-");a>=parseFloat(i[0])&&a<=parseFloat(i[1])&&(o.result=t[e],o.color=n[t[e]])}else if(e.indexOf("<")>=0){const i=e.replace("<","");a<parseFloat(i)&&(o.result=t[e],o.color=n[t[e]])}else if(e.indexOf(">=")>=0){const i=e.replace(">=","");a>=parseFloat(i)&&(o.result=t[e],o.color=n[t[e]])}}),o}static getBMI(e,t,a,n){const o=this.calculateBMI(e,t);return this.getBMIResult(a,n,o)}static calculateBMI(e,t){if(0==t||0==e)return 0;let a=e/t/t*1e4;return Math.round(10*a)/10}}},afa8:function(e,t,a){"use strict";a("c617")},afbc:function(e,t,a){"use strict";a("caad");var n=a("9f0e"),o=a("7a23");const i=Object(o["withScopeId"])("data-v-52eed022");Object(o["pushScopeId"])("data-v-52eed022");const r=Object(o["createVNode"])("b",{style:{color:"#8b4513"}},"National ",-1),s=Object(o["createVNode"])("b",{style:{color:"#cd853f"}},"EMR",-1),c=Object(o["createTextVNode"])(" Version: "),l=Object(o["createTextVNode"])(" Configuration ");Object(o["popScopeId"])();const d=i((function(e,t,a,n,d,u){const p=Object(o["resolveComponent"])("ion-label"),h=Object(o["resolveComponent"])("ion-title"),b=Object(o["resolveComponent"])("ion-toolbar"),m=Object(o["resolveComponent"])("ion-header"),g=Object(o["resolveComponent"])("inputs"),f=Object(o["resolveComponent"])("ion-content"),O=Object(o["resolveComponent"])("ion-button"),j=Object(o["resolveComponent"])("ion-footer"),_=Object(o["resolveComponent"])("ion-page");return Object(o["openBlock"])(),Object(o["createBlock"])(_,null,{default:i(()=>[Object(o["createVNode"])(m,null,{default:i(()=>[Object(o["createVNode"])(b,null,{default:i(()=>[Object(o["createVNode"])(h,null,{default:i(()=>[Object(o["createVNode"])(p,{style:{fontWeight:"bolder",fontSize:"1.9em"}},{default:i(()=>[r,s]),_:1})]),_:1}),Object(o["createVNode"])(p,{class:"ion-padding",slot:"end"},{default:i(()=>[c,Object(o["createVNode"])("b",null,Object(o["toDisplayString"])(n.version),1)]),_:1})]),_:1})]),_:1}),Object(o["createVNode"])(f,{fullscreen:"false"},{default:i(()=>[Object(o["createVNode"])(g,{useVirtualInput:n.useVirtualInput},null,8,["useVirtualInput"])]),_:1}),Object(o["createVNode"])(j,null,{default:i(()=>[Object(o["createVNode"])(b,null,{default:i(()=>[Object(o["createVNode"])("span",null,[Object(o["createVNode"])("img",{id:"coat",src:n.coatImg,alt:"Malawi Coat of Arms logo"},null,8,["src"]),Object(o["createVNode"])("img",{id:"pepfar",src:n.pepfarImg,alt:"PEPFAR logo"},null,8,["src"])]),Object(o["withDirectives"])(Object(o["createVNode"])("select",{"onUpdate:modelValue":t[1]||(t[1]=e=>n.platform=e),slot:"end",class:"devices"},[(Object(o["openBlock"])(!0),Object(o["createBlock"])(o["Fragment"],null,Object(o["renderList"])(n.devices,(e,t)=>(Object(o["openBlock"])(),Object(o["createBlock"])("option",{key:t,value:e.value,selected:e.value===n.platform},Object(o["toDisplayString"])(e.label),9,["value","selected"]))),128))],512),[[o["vModelSelect"],n.platform]]),n.showConfig?(Object(o["openBlock"])(),Object(o["createBlock"])(O,{key:0,slot:"end",class:"config","router-link":"/settings/host"},{default:i(()=>[l]),_:1})):Object(o["createCommentVNode"])("",!0)]),_:1})]),_:1})]),_:1})})),u=Object(o["withScopeId"])("data-v-fe1a1558");Object(o["pushScopeId"])("data-v-fe1a1558");const p={class:"main",ref:"main"},h={class:"rows"},b={class:"cells"},m={class:"rows input-rows"},g={class:"cells"},f={class:"rows"};Object(o["popScopeId"])();const O=u((function(e,t,a,n,i,r){const s=Object(o["resolveComponent"])("center");return Object(o["openBlock"])(),Object(o["createBlock"])(o["Fragment"],null,[Object(o["createVNode"])("div",p,[Object(o["createVNode"])("div",h,[Object(o["createVNode"])("div",b,[Object(o["withDirectives"])(Object(o["createVNode"])("input",{type:"text",name:"usename",autocomplete:"off",placeholder:"Username",id:"username",ref:"username","onUpdate:modelValue":t[1]||(t[1]=t=>e.userInput.username=t),onClick:t[2]||(t[2]=t=>e.renderKeyBoard(t)),class:"input-boxes",readonly:e.useVirtualInput},null,8,["readonly"]),[[o["vModelText"],e.userInput.username]])])]),Object(o["createVNode"])("div",m,[Object(o["createVNode"])("div",g,[Object(o["withDirectives"])(Object(o["createVNode"])("input",{"onUpdate:modelValue":t[3]||(t[3]=t=>e.userInput.password=t),type:"password",name:"password",ref:"password",id:"password",onClick:t[4]||(t[4]=t=>e.renderKeyBoard(t)),class:"input-boxes",placeholder:"Password",readonly:e.useVirtualInput},null,8,["readonly"]),[[o["vModelText"],e.userInput.password]])])])],512),Object(o["createVNode"])(s,null,{default:u(()=>[Object(o["createVNode"])("div",{id:"keyboard",style:e.btnStyles,class:"keyboard"},[(Object(o["openBlock"])(!0),Object(o["createBlock"])(o["Fragment"],null,Object(o["renderList"])(e.LOGIN_KEYBOARD,a=>(Object(o["openBlock"])(),Object(o["createBlock"])("span",{key:a},[Object(o["createVNode"])("div",f,[(Object(o["openBlock"])(!0),Object(o["createBlock"])(o["Fragment"],null,Object(o["renderList"])(a,a=>(Object(o["openBlock"])(),Object(o["createBlock"])("div",{class:"cells",key:a},["Next"===a||"Login"===a?(Object(o["openBlock"])(),Object(o["createBlock"])("button",{key:0,id:e.btnCaption,class:"keyboard-btn login-btn",onClick:t[5]||(t[5]=t=>e.keyPress(t))},Object(o["toDisplayString"])(e.btnCaption),9,["id"])):Object(o["createCommentVNode"])("",!0),"Login"!=a&&"Next"!=a?(Object(o["openBlock"])(),Object(o["createBlock"])("button",{key:1,id:e.Caps.on?a.toUpperCase():a.toLowerCase(),class:"keyboard-btn",onClick:t[6]||(t[6]=t=>e.keyPress(t))},Object(o["toDisplayString"])("Del."===a||"Caps"===a?a:e.Caps.on?a.toUpperCase():a.toLowerCase()),9,["id"])):Object(o["createCommentVNode"])("",!0)]))),128))])]))),128))],4)]),_:1})],64)}));var j=a("b5e4"),_=a("89b4"),v=a("3800"),y=Object(o["defineComponent"])({props:{useVirtualInput:{type:Boolean}},data:function(){return{LOGIN_KEYBOARD:v["f"],auth:{},userInput:{type:String,username:"",password:""},focusInput:{type:Object,value:"",id:""},display:"none",keyboardLeft:"",keyboardTop:"",btnCaption:"",Caps:{type:Boolean,on:!1}}},created(){this.auth=new _["a"]},methods:{renderKeyBoard(e){this.focusInput=e.currentTarget,"password"==this.focusInput.id?this.btnCaption="Login":this.btnCaption="Next";const t=document.getElementsByClassName("main")[0],a=t.getBoundingClientRect().width;let n=e.currentTarget.getBoundingClientRect().top;n=parseInt(n),this.keyboardLeft=a/2-447+"px;",this.keyboardTop=n+20+"px;",this.display="table",window.scrollTo(0,9999)},keyPress(e){const t=e.currentTarget.id;let a;try{t.match(/Del./i)?this.focusInput.value=this.focusInput.value.substring(0,this.focusInput.value.length-1):t.match(/Next/i)?(this.display="none",a=this.$refs.password,a.click()):t.match(/Login/i)?(this.display="none",this.doLogin()):t.match(/Caps/i)?(this.Caps.on=!this.Caps.on,this.display="none",a="username"===this.focusInput.id?this.$refs.username:this.$refs.password,a.click()):t.match(/Hide/i)?this.display="none":this.focusInput.value+=t,"username"==this.focusInput.id?this.userInput.username=this.focusInput.value:this.userInput.password=this.focusInput.value}catch(n){console.warn("input error")}},doLogin:async function(){if(this.userInput.username&&this.userInput.password){this.auth.setUsername(this.userInput.username);try{if(this.auth.versionLockingIsEnabled()&&await this.auth.validateIfCorrectAPIVersion(),!await this.auth.checkTimeIntegrity())throw"Local date does not match API date. Please Update your device's date";await this.auth.login(this.userInput.password),this.auth.startSession(),this.$router.push("/select_hc_location")}catch(e){e instanceof _["c"]?Object(j["e"])("Invalid username or password"):Object(j["c"])(e,5e4)}}else Object(j["e"])("Complete form to log in")}},computed:{btnStyles(){return`display: ${this.display}; top: ${this.keyboardTop}`}}}),w=(a("52f5"),a("6b0d")),N=a.n(w);const C=N()(y,[["render",O],["__scopeId","data-v-fe1a1558"]]);var V=C,D=a("8a30"),k=a("1718"),T=a("a1e9"),I=a("5c40"),x=a("2ed9"),S={name:"login",components:{Inputs:V,IonButton:D["d"],IonTitle:D["P"],IonLabel:D["x"],IonPage:D["D"],IonHeader:D["q"],IonToolbar:D["Q"],IonContent:D["n"],IonFooter:D["o"]},setup(){const{platformType:e,setPlatformType:t}=Object(x["a"])(),a=Object(o["computed"])(()=>"mobile"===e.value),n=Object(T["m"])(e.value||"Platform"),i=Object(T["m"])(""),r=Object(T["m"])([{label:"Mobile",value:"mobile"},{label:"Desktop",value:"desktop"}]);return Object(o["watch"])(n,e=>{["mobile","desktop"].includes(e)&&t(e)}),Object(I["U"])(async()=>{const e=new _["a"];await e.loadConfig();const t=await e.getHeadVersion();e.setActiveVersion(t);const a=await e.getApiVersion();i.value=`${t} / ${a}`}),{devices:r,version:i,platform:n,useVirtualInput:a,coatImg:Object(k["a"])("login-logos/Malawi-Coat_of_arms_of_arms.png"),pepfarImg:Object(k["a"])("login-logos/PEPFAR.png"),showConfig:"true"===localStorage.getItem("useLocalStorage")}}};a("b1e9");const P=N()(S,[["render",d],["__scopeId","data-v-52eed022"]]);var A=P;const E=Object(o["withScopeId"])("data-v-3b2b04a9");Object(o["pushScopeId"])("data-v-3b2b04a9");const B=Object(o["createVNode"])("p",null,"Click Here",-1),R=Object(o["createVNode"])("p",null,"To Scan QR code Or Barcode",-1),F=Object(o["createVNode"])("p",null," using Camera",-1),L={class:"tool-bar-medium-card"},M={class:"his-sm-text tool-bar-medium-content"},H=Object(o["createTextVNode"])("Facility name: "),$=Object(o["createTextVNode"])(),U=Object(o["createVNode"])("br",null,null,-1),q=Object(o["createTextVNode"])("Location: "),G=Object(o["createVNode"])("br",null,null,-1),z=Object(o["createTextVNode"])("User: "),Y=Object(o["createTextVNode"])(" | Date: "),W=Object(o["createVNode"])("br",null,null,-1),K=Object(o["createTextVNode"])("Overview"),X=Object(o["createTextVNode"])("Reports"),J=Object(o["createTextVNode"])("Administration"),Q=Object(o["createTextVNode"])(" Alerts "),Z={key:0},ee={key:0,id:"container",class:"his-card overview"},te=Object(o["createTextVNode"])(" Logout "),ae=Object(o["createTextVNode"])(" Find By "),ne=Object(o["createTextVNode"])(" Find or Register "),oe=Object(o["createTextVNode"])(" Applications ");Object(o["popScopeId"])();const ie=E((function(e,t,a,n,i,r){const s=Object(o["resolveComponent"])("ion-title"),c=Object(o["resolveComponent"])("ion-thumbnail"),l=Object(o["resolveComponent"])("ion-buttons"),d=Object(o["resolveComponent"])("ion-toolbar"),u=Object(o["resolveComponent"])("ion-col"),p=Object(o["resolveComponent"])("ion-row"),h=Object(o["resolveComponent"])("ion-label"),b=Object(o["resolveComponent"])("program-icon"),m=Object(o["resolveComponent"])("ion-header"),g=Object(o["resolveComponent"])("ion-icon"),f=Object(o["resolveComponent"])("ion-segment-button"),O=Object(o["resolveComponent"])("ion-segment"),j=Object(o["resolveComponent"])("home-folder"),_=Object(o["resolveComponent"])("home-notification"),v=Object(o["resolveComponent"])("ion-content"),y=Object(o["resolveComponent"])("ion-button"),w=Object(o["resolveComponent"])("ion-footer"),N=Object(o["resolveComponent"])("ion-page");return Object(o["openBlock"])(),Object(o["createBlock"])(N,null,{default:E(()=>[Object(o["createVNode"])(m,{translucent:!0},{default:E(()=>[Object(o["createVNode"])(d,{class:"mobile-component-view"},{default:E(()=>[Object(o["createVNode"])(s,null,{default:E(()=>[Object(o["createTextVNode"])(Object(o["toDisplayString"])(e.facilityName),1)]),_:1}),Object(o["createVNode"])(l,{slot:"end"},{default:E(()=>[Object(o["createVNode"])(c,null,{default:E(()=>[Object(o["createVNode"])("img",{src:e.appLogo,class:"logo",alt:"App Logo"},null,8,["src"])]),_:1})]),_:1})]),_:1}),Object(o["createVNode"])(d,{class:"full-component-view"},{default:E(()=>[Object(o["createVNode"])(p,null,{default:E(()=>[Object(o["createVNode"])(u,null,{default:E(()=>[Object(o["createVNode"])("div",{class:"tool-bar-medium-card",onClick:t[2]||(t[2]=(...t)=>e.openCamera(...t))},[Object(o["createVNode"])(p,null,{default:E(()=>[Object(o["createVNode"])(u,{"size-lg":"5","size-sm":"4"},{default:E(()=>[Object(o["createVNode"])("img",{style:{width:"230px",height:"90px",margin:"0"},src:e.barcodeLogo},null,8,["src"])]),_:1}),e.useVirtualInput?Object(o["createCommentVNode"])("",!0):(Object(o["openBlock"])(),Object(o["createBlock"])(u,{key:0,"size-lg":"7","size-sm":"8"},{default:E(()=>[Object(o["withDirectives"])(Object(o["createVNode"])("input",{readonly:e.useVirtualInput,"onUpdate:modelValue":t[1]||(t[1]=t=>e.patientBarcode=t),class:"barcode-input",ref:"scanBarcode"},null,8,["readonly"]),[[o["vModelText"],e.patientBarcode]])]),_:1})),e.useVirtualInput?(Object(o["openBlock"])(),Object(o["createBlock"])(u,{key:1,"size-lg":"6","size-sm":"6",style:{"text-align":"center",margin:"auto","line-height":"1.2"}},{default:E(()=>[B,R,F]),_:1})):Object(o["createCommentVNode"])("",!0)]),_:1})])]),_:1}),Object(o["createVNode"])(u,{size:"5"},{default:E(()=>[Object(o["createVNode"])("div",L,[Object(o["createVNode"])("div",M,[Object(o["createVNode"])("span",null,[H,Object(o["createVNode"])("b",null,Object(o["toDisplayString"])(e.facilityName),1)]),$,U,Object(o["createVNode"])("span",null,[q,Object(o["createVNode"])("b",null,Object(o["toDisplayString"])(e.userLocation),1)]),G,Object(o["createVNode"])("span",null,[z,Object(o["createVNode"])("b",null,Object(o["toDisplayString"])(e.userName),1),Y,Object(o["createVNode"])(h,{color:e.isBDE?"danger":"success"},{default:E(()=>[Object(o["createVNode"])("b",null,Object(o["toDisplayString"])(e.sessionDate),1)]),_:1},8,["color"])]),W])])]),_:1}),Object(o["createVNode"])(u,{size:"3"},{default:E(()=>[Object(o["createVNode"])(b,{icon:e.appLogo,version:e.appVersion},null,8,["icon","version"])]),_:1})]),_:1})]),_:1})]),_:1}),Object(o["createVNode"])(d,null,{default:E(()=>[Object(o["createVNode"])(O,{scrollable:"",value:e.activeTab,class:"ion-justify-content-center"},{default:E(()=>[Object(o["createVNode"])(f,{value:1,onClick:t[3]||(t[3]=t=>e.activeTab=1)},{default:E(()=>[Object(o["createVNode"])(g,{icon:e.statsChart},null,8,["icon"]),Object(o["createVNode"])(h,{class:"his-sm-text"},{default:E(()=>[K]),_:1})]),_:1}),e.canReport?(Object(o["openBlock"])(),Object(o["createBlock"])(f,{key:0,value:2,onClick:t[4]||(t[4]=t=>e.activeTab=2)},{default:E(()=>[Object(o["createVNode"])(g,{icon:e.pieChart},null,8,["icon"]),Object(o["createVNode"])(h,{class:"his-sm-text"},{default:E(()=>[X]),_:1})]),_:1})):Object(o["createCommentVNode"])("",!0),Object(o["createVNode"])(f,{value:3,onClick:t[5]||(t[5]=t=>e.activeTab=3)},{default:E(()=>[Object(o["createVNode"])(g,{icon:e.settings},null,8,["icon"]),Object(o["createVNode"])(h,{class:"his-sm-text"},{default:E(()=>[J]),_:1})]),_:1}),Object(o["createVNode"])(f,{value:4,onClick:t[6]||(t[6]=t=>e.activeTab=4)},{default:E(()=>[Object(o["createVNode"])(g,{color:e.hasUnreadNotifications?"danger":"",icon:e.notifications},null,8,["color","icon"]),Object(o["createVNode"])(h,{color:e.hasUnreadNotifications?"danger":"",class:"his-sm-text"},{default:E(()=>[Q,e.hasUnreadNotifications?(Object(o["openBlock"])(),Object(o["createBlock"])("b",Z,"("+Object(o["toDisplayString"])(e.notificationCount)+")",1)):Object(o["createCommentVNode"])("",!0)]),_:1},8,["color"])]),_:1})]),_:1},8,["value"])]),_:1}),Object(o["createVNode"])(v,{fullscreen:!0},{default:E(()=>[e.ready?(Object(o["openBlock"])(),Object(o["createBlock"])("div",ee,[1==e.activeTab?(Object(o["openBlock"])(),Object(o["createBlock"])(Object(o["resolveDynamicComponent"])(e.appOverview),{key:0})):Object(o["createCommentVNode"])("",!0),2==e.activeTab?(Object(o["openBlock"])(),Object(o["createBlock"])(j,{key:1,items:e.appReports},null,8,["items"])):Object(o["createCommentVNode"])("",!0),3==e.activeTab?(Object(o["openBlock"])(),Object(o["createBlock"])(j,{key:2,items:e.app.globalPropertySettings},null,8,["items"])):Object(o["createCommentVNode"])("",!0),4==e.activeTab?(Object(o["openBlock"])(),Object(o["createBlock"])(_,{key:3})):Object(o["createCommentVNode"])("",!0)])):Object(o["createCommentVNode"])("",!0)]),_:1}),Object(o["createVNode"])(w,null,{default:E(()=>[Object(o["createVNode"])(d,null,{default:E(()=>[Object(o["createVNode"])(p,null,{default:E(()=>[Object(o["createVNode"])(u,null,{default:E(()=>[Object(o["createVNode"])(y,{class:"xl-button mobile-component-view",color:"danger",onClick:e.signOut},{default:E(()=>[Object(o["createVNode"])(g,{icon:e.logOut},null,8,["icon"])]),_:1},8,["onClick"]),Object(o["createVNode"])(y,{class:"xl-button full-component-view",color:"danger",size:"large",onClick:e.signOut},{default:E(()=>[Object(o["createVNode"])(g,{icon:e.logOut},null,8,["icon"]),Object(o["createVNode"])(h,null,{default:E(()=>[te]),_:1})]),_:1},8,["onClick"])]),_:1}),Object(o["createVNode"])(u,null,{default:E(()=>[e.canFindByIdentifier?(Object(o["openBlock"])(),Object(o["createBlock"])(y,{key:0,class:"xl-button mobile-component-view",color:"primary","router-link":"/patients/search/id"},{default:E(()=>[Object(o["createVNode"])(g,{icon:e.search},null,8,["icon"])]),_:1})):Object(o["createCommentVNode"])("",!0),e.canFindByIdentifier?(Object(o["openBlock"])(),Object(o["createBlock"])(y,{key:1,class:"xl-button full-component-view",color:"primary",size:"large","router-link":"/patients/search/id"},{default:E(()=>[Object(o["createVNode"])(g,{icon:e.search},null,8,["icon"]),Object(o["createVNode"])(h,null,{default:E(()=>[ae]),_:1})]),_:1})):Object(o["createCommentVNode"])("",!0)]),_:1}),Object(o["createVNode"])(u,null,{default:E(()=>[Object(o["createVNode"])(y,{class:"xl-button mobile-component-view",color:"primary","router-link":"/patient/registration"},{default:E(()=>[Object(o["createVNode"])(g,{icon:e.person},null,8,["icon"])]),_:1}),Object(o["createVNode"])(y,{class:"xl-button full-component-view",color:"primary",size:"large","router-link":"/patient/registration"},{default:E(()=>[Object(o["createVNode"])(g,{icon:e.person},null,8,["icon"]),Object(o["createVNode"])(h,null,{default:E(()=>[ne]),_:1})]),_:1})]),_:1}),Object(o["createVNode"])(u,null,{default:E(()=>[Object(o["createVNode"])(y,{class:"xl-button mobile-component-view",color:"primary",onClick:e.openModal},{default:E(()=>[Object(o["createVNode"])(g,{icon:e.apps},null,8,["icon"])]),_:1},8,["onClick"]),Object(o["createVNode"])(y,{class:"xl-button full-component-view",color:"primary",size:"large",onClick:e.openModal},{default:E(()=>[Object(o["createVNode"])(g,{icon:e.apps},null,8,["icon"]),Object(o["createVNode"])(h,null,{default:E(()=>[oe]),_:1})]),_:1},8,["onClick"])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})}));a("5b81");var re=a("3e53"),se=a("ff79"),ce=a("156d"),le=a("9283"),de=a("1c74");const ue=Object(o["withScopeId"])("data-v-360fd8c4");Object(o["pushScopeId"])("data-v-360fd8c4");const pe={style:{"font-size":"0.7em","font-weight":"bold"},class:"ion-text-center"};Object(o["popScopeId"])();const he=ue((function(e,t,a,n,i,r){const s=Object(o["resolveComponent"])("ion-img"),c=Object(o["resolveComponent"])("tool-bar-medium-card");return Object(o["openBlock"])(),Object(o["createBlock"])(c,null,{default:ue(()=>[e.icon?(Object(o["openBlock"])(),Object(o["createBlock"])(s,{key:0,src:e.icon,id:"logo"},null,8,["src"])):Object(o["createCommentVNode"])("",!0),Object(o["createVNode"])("div",pe,Object(o["toDisplayString"])(e.version),1)]),_:1})}));var be=a("2b47"),me=Object(o["defineComponent"])({name:"AppIcon",components:{IonImg:D["s"],ToolBarMediumCard:be["a"]},props:{icon:{type:String,required:!0},version:{type:String,default:"-/-"}}});a("5357");const ge=N()(me,[["render",he],["__scopeId","data-v-360fd8c4"]]);var fe=ge;const Oe=Object(o["createTextVNode"])(" Back ");function je(e,t,a,n,i,r){const s=Object(o["resolveComponent"])("ion-icon"),c=Object(o["resolveComponent"])("ion-button"),l=Object(o["resolveComponent"])("task-card"),d=Object(o["resolveComponent"])("ion-col"),u=Object(o["resolveComponent"])("ion-row"),p=Object(o["resolveComponent"])("ion-grid");return Object(o["openBlock"])(),Object(o["createBlock"])(o["Fragment"],null,[e.showingChildNodes?(Object(o["openBlock"])(),Object(o["createBlock"])(c,{key:0,color:"light",onClick:e.onBack},{default:Object(o["withCtx"])(()=>[Object(o["createVNode"])(s,{icon:e.arrowBack},null,8,["icon"]),Oe]),_:1},8,["onClick"])):Object(o["createCommentVNode"])("",!0),Object(o["createVNode"])(p,null,{default:Object(o["withCtx"])(()=>[Object(o["createVNode"])(u,null,{default:Object(o["withCtx"])(()=>[(Object(o["openBlock"])(!0),Object(o["createBlock"])(o["Fragment"],null,Object(o["renderList"])(e.viewableItems,(t,a)=>(Object(o["openBlock"])(),Object(o["createBlock"])(d,{key:a,"size-lg":"4","size-sm":"12"},{default:Object(o["withCtx"])(()=>[Object(o["createVNode"])(l,{onClick:a=>e.onClick(t),title:t.name,icon:e.itemIcon(t)},null,8,["onClick","title","icon"])]),_:2},1024))),128))]),_:1})]),_:1})],64)}const _e=Object(o["withScopeId"])("data-v-c719b9ce");Object(o["pushScopeId"])("data-v-c719b9ce");const ve={key:0},ye={key:1};Object(o["popScopeId"])();const we=_e((function(e,t,a,n,i,r){const s=Object(o["resolveComponent"])("ion-thumbnail"),c=Object(o["resolveComponent"])("ion-label"),l=Object(o["resolveComponent"])("ion-item"),d=Object(o["resolveComponent"])("ion-card");return Object(o["openBlock"])(),Object(o["createBlock"])(d,{class:["his-card task-card",{clickable:!e.isDisabled,disabled:e.isDisabled}]},{default:_e(()=>[Object(o["createVNode"])(l,{lines:"none"},{default:_e(()=>[Object(o["createVNode"])(s,{slot:"start"},{default:_e(()=>[Object(o["createVNode"])("img",{src:e.activeIcon},null,8,["src"])]),_:1}),Object(o["createVNode"])(c,{class:"his-sm-text ion-text-wrap",style:{"font-weight":"600",color:"#333!important"}},{default:_e(()=>[e.isCompleted?Object(o["createCommentVNode"])("",!0):(Object(o["openBlock"])(),Object(o["createBlock"])("span",ve,Object(o["toDisplayString"])(e.title),1)),e.isCompleted?(Object(o["openBlock"])(),Object(o["createBlock"])("s",ye,Object(o["toDisplayString"])(e.title),1)):Object(o["createCommentVNode"])("",!0)]),_:1})]),_:1})]),_:1},8,["class"])}));var Ne=Object(o["defineComponent"])({components:{IonCard:D["f"],IonThumbnail:D["O"],IonItem:D["w"],IonLabel:D["x"]},props:{title:{type:String,required:!0},icon:{type:String,required:!0},description:{type:String,required:!1},taskDisabled:{type:Boolean,required:!1},taskCompleted:{type:Boolean,required:!1}},setup(e){const t="boolean"===typeof e.taskCompleted&&e.taskCompleted,a="boolean"===typeof e.taskDisabled&&e.taskDisabled,n=Object(o["computed"])(()=>a?Object(k["a"])("Disabled.svg"):t?Object(k["a"])("Checkmark.svg"):e.icon);return{activeIcon:n,isDisabled:a,isCompleted:t}}});a("cbbc");const Ce=N()(Ne,[["render",we],["__scopeId","data-v-c719b9ce"]]);var Ve=Ce,De=Object(o["defineComponent"])({setup(){return{arrowBack:se["e"]}},components:{IonIcon:D["r"],TaskCard:Ve,IonButton:D["d"],IonGrid:D["p"],IonRow:D["H"],IonCol:D["m"]},props:{items:{type:Object,required:!0}},data:()=>({defaultIcon:"sys-setting.png",viewableItems:[],showingChildNodes:!1}),watch:{items:{async handler(e){e&&this.setItems(e)},immediate:!0,deep:!0}},methods:{async setItems(e){this.viewableItems=await this.filterViewable(e)},async filterViewable(e){const t=e.map(async e=>{const t={...e};return t.canShow=!t.condition||await t.condition(),t});return(await Promise.all(t)).filter(e=>e.canShow)},async onClick(e){e.files?(this.showingChildNodes=!0,this.defaultIcon="sys-setting.png",e.defaultFilesIcon&&(this.defaultIcon=e.defaultFilesIcon),this.setItems(e.files)):"function"===typeof e.action?e.action():e.pathName?this.$router.push({name:e.pathName}):e.pathUrl&&this.$router.push(e.pathUrl)},onBack(){this.showingChildNodes=!1,this.setItems(this.items)},itemIcon(e){return Object(k["a"])(e.icon?e.icon:this.defaultIcon)}}});const ke=N()(De,[["render",je]]);var Te=ke,Ie=a("cc74");class xe extends de["e"]{static read(e){return this.putJson("notifications/update",{alerts:e})}static unread(){return this.getJson("notifications")}}var Se=a("2ef0"),Pe=a.n(Se);const Ae=Object(o["ref"])([]);function Ee(){const e=Object(o["computed"])(()=>Ae.value.filter(e=>!e.read)),t=Object(o["computed"])(()=>Ae.value.length>0),a=Object(o["computed"])(()=>e.value.length>0),n=Object(o["computed"])(()=>e.value.length),i=Object(o["computed"])(()=>Ae.value.sort((e,t)=>new Date(e.date)>new Date(t.date)?-1:1));async function r(){const e=await xe.unread();Object(Se["isEmpty"])(e)||(Ae.value=e.map(e=>{let t="General",a=e.text,n=null;try{const o=JSON.parse(e.text);o["Type"].match(/lims/i)&&(t=`${o["Test type"]} results for ${o["ARV-Number"]||o["Accession number"]}`,a=`Ordered by <b>${o["Ordered By"]||"N/A"}</b>`,n=()=>Ps.push("/art/encounters/lab/"+o["PatientID"]))}catch(o){console.warn(o)}return{handler:n,message:a,title:t,id:e.alert_id,date:le["b"].toStandardHisDisplayFormat(e.date_created)}}),Object(j["e"])(`You have ${e.length} unread notification(s)`))}async function s(){const e=Ae.value.filter(e=>!e.read);Object(Se["isEmpty"])(e)||await xe.read(e.map(e=>e.id))&&(Ae.value=Ae.value.map(e=>({...e,read:!0})))}function c(e){"function"===typeof e.handler&&e.handler()}return{markAllAsRead:s,openNotification:c,loadNotifications:r,sortedNotifications:i,hasUnreadNotifications:a,notificationCount:n,hasNotifications:t,notificationData:Ae}}const Be=Object(o["withScopeId"])("data-v-6e1be16e");Object(o["pushScopeId"])("data-v-6e1be16e");const Re={key:0,class:"his-card ion-text-center his-lg-text"};Object(o["popScopeId"])();const Fe=Be((function(e,t,a,n,i,r){const s=Object(o["resolveComponent"])("ion-label"),c=Object(o["resolveComponent"])("ion-chip"),l=Object(o["resolveComponent"])("ion-item"),d=Object(o["resolveComponent"])("ion-list");return Object(o["openBlock"])(),Object(o["createBlock"])(o["Fragment"],null,[e.hasNotifications?Object(o["createCommentVNode"])("",!0):(Object(o["openBlock"])(),Object(o["createBlock"])("div",Re," No notifications ")),e.hasNotifications?(Object(o["openBlock"])(),Object(o["createBlock"])(d,{key:1},{default:Be(()=>[(Object(o["openBlock"])(!0),Object(o["createBlock"])(o["Fragment"],null,Object(o["renderList"])(e.sortedNotifications,(t,a)=>(Object(o["openBlock"])(),Object(o["createBlock"])(l,{class:"his-md-text",button:"",detail:"",onClick:a=>e.openNotification(t),key:a},{default:Be(()=>[Object(o["createVNode"])(s,{class:"his-lg-text"},{default:Be(()=>[Object(o["createVNode"])("h1",null,Object(o["toDisplayString"])(t.title),1),Object(o["createVNode"])("p",{class:"his-lg-text",innerHTML:t.message},null,8,["innerHTML"])]),_:2},1024),Object(o["createVNode"])(c,{color:"success",class:"his-md-text"},{default:Be(()=>[Object(o["createTextVNode"])(Object(o["toDisplayString"])(t.date),1)]),_:2},1024)]),_:2},1032,["onClick"]))),128))]),_:1})):Object(o["createCommentVNode"])("",!0)],64)}));var Le=Object(o["defineComponent"])({components:{IonLabel:D["x"],IonItem:D["w"],IonList:D["y"],IonChip:D["l"]},setup(){const{openNotification:e,markAllAsRead:t,sortedNotifications:a,notificationData:n,hasNotifications:i}=Ee();return Object(o["watch"])(n,e=>{e&&t()},{deep:!0,immediate:!0}),{openNotification:e,sortedNotifications:a,hasNotifications:i}}});a("afa8");const Me=N()(Le,[["render",Fe],["__scopeId","data-v-6e1be16e"]]);var He=Me,$e=Object(o["defineComponent"])({name:"Home",components:{IonTitle:D["P"],IonThumbnail:D["O"],IonIcon:D["r"],ProgramIcon:fe,HomeFolder:Te,IonContent:D["n"],IonHeader:D["q"],IonPage:D["D"],IonButtons:D["e"],IonToolbar:D["Q"],IonRow:D["H"],IonCol:D["m"],IonButton:D["d"],IonFooter:D["o"],IonSegment:D["I"],IonSegmentButton:D["J"],IonLabel:D["x"],HomeNotification:He},setup(){const{useVirtualInput:e}=Object(x["a"])(),{notificationData:t,notificationCount:a,hasUnreadNotifications:n}=Ee();return{hasUnreadNotifications:n,notificationData:t,notificationCount:a,notifications:se["C"],barcode:se["i"],apps:se["c"],person:se["D"],search:se["I"],logOut:se["w"],statsChart:se["M"],pieChart:se["E"],settings:se["L"],useVirtualInput:e}},data(){return{app:{},facilityName:"",userLocation:"",sessionDate:"",userName:"",appVersion:"",activeTab:1,ready:!1,patientBarcode:"",overviewComponent:{},isBDE:!1}},computed:{barcodeLogo(){return Object(k["a"])("barcode.svg")},appOverview(){return this.app.homeOverviewComponent},appLogo(){return Object(k["a"])(this.app.applicationIcon)},appReports(){return this.app.programReports?this.app.programReports:[]},appAdministration(){return this.app.globalPropertySettings?this.app.globalPropertySettings:[]},canFindByIdentifier(){return!!this.app.programPatientIdentifiers},canReport(){return!!this.app.programReports}},methods:{fetchLocationID:async function(){const e=await Ie["b"].healthCenterID();e&&this.fetchLocationName(e)},async fetchLocationName(e){const t=await ce["b"].get("locations/"+e);if(!t||200!==t.status)return;const a=await t.json();this.facilityName=a.name,this.createSessionLocationName(a)},createSessionLocationName(e){sessionStorage.location=e.name,sessionStorage.locationName=e.name,sessionStorage.siteUUID=e.uuid},loadApplicationData(){this.ready=!0,this.isBDE=!0===de["e"].isBDE(),this.userLocation=sessionStorage.userLocation,this.userName=sessionStorage.username,this.fetchLocationID(),this.sessionDate=le["b"].toStandardHisDisplayFormat(de["e"].getSessionDate()),this.appVersion=de["e"].getFullVersion()},async openModal(){const e=await re["a"].selectApplication("HomePage");e&&(this.app=e,this.activeTab=1,this.loadApplicationData())},checkForbarcode(){if(null!=this.patientBarcode.match(/.+\$$/i)){const e=this.patientBarcode.replaceAll(/\$/gi,"");this.patientBarcode="",this.$router.push("/patients/confirm?patient_barcode="+e)}},async signOut(){const e=await Object(j["a"])("Are you sure you want to logout ?");if(!e)return;const t=new _["a"];try{if(await Ie["b"].portalEnabled()){const e=await Ie["b"].portalProperties();window.location=e}else this.$router.push("/login")}catch(a){console.warn(""+a)}t.clearSession()},openCamera(){this.useVirtualInput&&this.$router.push("/camera_scanner")}},async created(){const{loadNotifications:e}=Ee();await e(),setInterval(()=>{const e=this.$refs.scanBarcode;e&&e.focus()},1500)},async mounted(){await re["a"].doAppManagementTasks();const e=re["a"].getActiveApp();e?(this.app=e,this.loadApplicationData()):this.openModal()},watch:{patientBarcode:function(){this.checkForbarcode()}}});a("f059");const Ue=N()($e,[["render",ie],["__scopeId","data-v-3b2b04a9"]]);var qe=Ue;const Ge=Object(o["withScopeId"])("data-v-5bbd2d98");Object(o["pushScopeId"])("data-v-5bbd2d98");const ze={class:"tool-bar-medium-card"},Ye={class:"his-sm-text"},We=Object(o["createTextVNode"])("Patient Name: "),Ke=Object(o["createTextVNode"])(),Xe=Object(o["createVNode"])("p",null,null,-1),Je={class:"his-sm-text"},Qe=Object(o["createTextVNode"])("Birthdate: "),Ze=Object(o["createTextVNode"])(),et=Object(o["createVNode"])("p",null,null,-1),tt={class:"his-sm-text"},at=Object(o["createTextVNode"])("Gender: "),nt={class:"tool-bar-medium-card"},ot={class:"his-sm-text"},it=Object(o["createTextVNode"])("Ancestry district: "),rt=Object(o["createVNode"])("p",null,null,-1),st={class:"his-sm-text"},ct=Object(o["createTextVNode"])("Ancestry TA: "),lt=Object(o["createVNode"])("p",null,null,-1),dt={class:"his-sm-text"},ut=Object(o["createTextVNode"])("Ancestry village: "),pt=Object(o["createVNode"])("p",null,null,-1),ht={class:"tool-bar-medium-card"},bt={class:"his-sm-text"},mt=Object(o["createTextVNode"])("Current District:"),gt=Object(o["createVNode"])("p",null,null,-1),ft={class:"his-sm-text"},Ot=Object(o["createTextVNode"])("Current TA: "),jt=Object(o["createVNode"])("p",null,null,-1),_t={class:"his-sm-text"},vt=Object(o["createTextVNode"])("Current Village: "),yt=Object(o["createVNode"])("p",null,null,-1),wt={class:"card-content"},Nt={key:0},Ct=Object(o["createTextVNode"])("Cancel"),Vt=Object(o["createTextVNode"])("Void Client"),Dt=Object(o["createTextVNode"])(" New Pregnancy "),kt=Object(o["createTextVNode"])(" Continue ");Object(o["popScopeId"])();const Tt=Ge((function(e,t,a,n,i,r){const s=Object(o["resolveComponent"])("ion-col"),c=Object(o["resolveComponent"])("ion-row"),l=Object(o["resolveComponent"])("ion-toolbar"),d=Object(o["resolveComponent"])("ion-header"),u=Object(o["resolveComponent"])("ion-card-title"),p=Object(o["resolveComponent"])("ion-card-header"),h=Object(o["resolveComponent"])("ion-card-content"),b=Object(o["resolveComponent"])("ion-card"),m=Object(o["resolveComponent"])("ion-content"),g=Object(o["resolveComponent"])("ion-button"),f=Object(o["resolveComponent"])("ion-footer"),O=Object(o["resolveComponent"])("ion-page");return Object(o["openBlock"])(),Object(o["createBlock"])(O,null,{default:Ge(()=>[Object(o["createVNode"])(d,{translucent:!0},{default:Ge(()=>[Object(o["createVNode"])(l,null,{default:Ge(()=>[Object(o["createVNode"])(c,null,{default:Ge(()=>[Object(o["createVNode"])(s,null,{default:Ge(()=>[Object(o["createVNode"])("div",ze,[Object(o["createVNode"])("span",Ye,[We,Object(o["createVNode"])("b",null,Object(o["toDisplayString"])(e.demographics.patientName),1)]),Ke,Xe,Object(o["createVNode"])("span",Je,[Qe,Object(o["createVNode"])("b",null,Object(o["toDisplayString"])(e.birthdate),1)]),Ze,et,Object(o["createVNode"])("span",tt,[at,Object(o["createVNode"])("b",null,Object(o["toDisplayString"])(e.demographics.gender),1)])])]),_:1}),Object(o["createVNode"])(s,null,{default:Ge(()=>[Object(o["createVNode"])("div",nt,[Object(o["createVNode"])("span",ot,[it,Object(o["createVNode"])("b",null,Object(o["toDisplayString"])(e.demographics.ancestryDistrict),1)]),rt,Object(o["createVNode"])("span",st,[ct,Object(o["createVNode"])("b",null,Object(o["toDisplayString"])(e.demographics.ancestryTA),1)]),lt,Object(o["createVNode"])("span",dt,[ut,Object(o["createVNode"])("b",null,Object(o["toDisplayString"])(e.demographics.ancestryVillage),1)]),pt])]),_:1}),Object(o["createVNode"])(s,null,{default:Ge(()=>[Object(o["createVNode"])("div",ht,[Object(o["createVNode"])("span",bt,[mt,Object(o["createVNode"])("b",null,Object(o["toDisplayString"])(e.demographics.currentDistrict),1),gt]),Object(o["createVNode"])("span",ft,[Ot,Object(o["createVNode"])("b",null,Object(o["toDisplayString"])(e.demographics.currentTA),1),jt]),Object(o["createVNode"])("span",_t,[vt,Object(o["createVNode"])("b",null,Object(o["toDisplayString"])(e.demographics.currentVillage),1),yt])])]),_:1})]),_:1})]),_:1})]),_:1}),Object(o["createVNode"])(m,null,{default:Ge(()=>[Object(o["createVNode"])(c,null,{default:Ge(()=>[(Object(o["openBlock"])(!0),Object(o["createBlock"])(o["Fragment"],null,Object(o["renderList"])(e.cards,(e,t)=>(Object(o["openBlock"])(),Object(o["createBlock"])(s,{"size-md":"4","size-sm":"12",key:t},{default:Ge(()=>[Object(o["createVNode"])(b,{class:"his-card"},{default:Ge(()=>[Object(o["createVNode"])(p,{style:{background:"#708090 !important"}},{default:Ge(()=>[Object(o["createVNode"])(u,null,{default:Ge(()=>[Object(o["createTextVNode"])(Object(o["toDisplayString"])(e.title.toUpperCase()),1)]),_:2},1024)]),_:2},1024),Object(o["createVNode"])(h,null,{default:Ge(()=>[Object(o["createVNode"])("ul",wt,[(Object(o["openBlock"])(!0),Object(o["createBlock"])(o["Fragment"],null,Object(o["renderList"])(e.data,(e,t)=>(Object(o["openBlock"])(),Object(o["createBlock"])("li",{class:"li-item his-sm-text",key:t,style:{display:"flex","justify-content":"space-between"}},[e.label?(Object(o["openBlock"])(),Object(o["createBlock"])("span",Nt,Object(o["toDisplayString"])(e.label)+" ",1)):Object(o["createCommentVNode"])("",!0),Object(o["createVNode"])("strong",{innerHTML:e.value},null,8,["innerHTML"])]))),128))])]),_:2},1024)]),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1}),Object(o["createVNode"])(f,null,{default:Ge(()=>[Object(o["createVNode"])(l,{color:"dark"},{default:Ge(()=>[Object(o["createVNode"])(g,{color:"danger",size:"large","router-link":"/"},{default:Ge(()=>[Ct]),_:1}),e.facts.patientFound&&e.isAdmin?(Object(o["openBlock"])(),Object(o["createBlock"])(g,{key:0,color:"danger left",size:"large",onClick:e.onVoid},{default:Ge(()=>[Vt]),_:1},8,["onClick"])):Object(o["createCommentVNode"])("",!0),e.facts.anc.canInitiateNewPregnancy?(Object(o["openBlock"])(),Object(o["createBlock"])(g,{key:1,slot:"end",size:"large",onClick:e.onInitiateNewAncPregnancy},{default:Ge(()=>[Dt]),_:1},8,["onClick"])):Object(o["createCommentVNode"])("",!0),e.facts.patientFound?(Object(o["openBlock"])(),Object(o["createBlock"])(g,{key:2,slot:"end",color:"success",size:"large",onClick:e.nextTask},{default:Ge(()=>[kt]),_:1},8,["onClick"])):Object(o["createCommentVNode"])("",!0)]),_:1})]),_:1})]),_:1})}));var It,xt,St=a("0fa1"),Pt=a("c1e4"),At=a("c21d"),Et=a("23e6"),Bt=a("74f4"),Rt=a("7f35"),Ft=a("0011");(function(e){e["ON_CONTINUE"]="oncontinue",e["ONLOAD"]="onload"})(It||(It={})),function(e){e["FORCE_EXIT"]="forceExit",e["GO_HOME"]="gotoHome",e["GO_BACK"]="goBack",e["CONTINUE"]="continue",e["ENROLL"]="enroll",e["EXIT"]="exit",e["ACTIVATE_FN"]="activateFn",e["ASSIGN_NPID"]="assignNpid",e["UPDATE_DMG"]="updateDemographics",e["PRINT_NPID"]="printNPID",e["CREATE_NPID_WITH_REMOTE_DIFF"]="createNpiDWithRemote",e["REFRESH_DDE_DEMOGRAPHICS"]="refreshDemographicsDDE",e["UPDATE_LOCAL_DDE_DIFFS"]="updateLocalDiffs",e["RESOLVE_DUPLICATE_NPIDS"]="resolveDuplicateNpids",e["ADD_AS_DRUG_REFILL"]="addAsDrugRefill",e["ADD_AS_NEW_PATIENT"]="addAsNewPatient",e["ADD_AS_EXTERNAL_CONSULTATION"]="addAsExternalConsultation",e["INITIATE_ANC_PREGNANCY"]="initiateNewAncPregnancy",e["VIEW_MERGE_AUDIT_FOR_NPID"]="viewMergeAuditForNpid",e["SEARCH_BY_NAME"]="searchByName"}(xt||(xt={}));const Lt={"Do not proceed if patient is not found in the system":{priority:1,targetEvent:It.ONLOAD,actions:{alert:async()=>{const e=await Object(Rt["a"])(" 0 Search results","Patient has not been found","Choose how to proceed",[{name:"Close",slot:"start",color:"primary"},{name:"Search by name",slot:"end",color:"success"}],"his-danger-color");return"Search by name"===e?xt.SEARCH_BY_NAME:xt.GO_HOME}},conditions:{globalProperties({ddeEnabled:e}){return!1===e},patientFound(e){return!1===e}}},"[DDE] Show invalid attributes for a patient whose remote":{priority:2,targetEvent:It.ONLOAD,actions:{alert:async e=>(await Object(Rt["d"])("DDE Entity Error","Remote patient has invalid attributes",["Attribute","Errors"],e.demographics.invalidDemographics,[{name:"Close",slot:"start",color:"danger"}],"his-danger-color"),xt.GO_BACK)},conditions:{demographics({hasInvalidDemographics:e}){return!0===e}}},"[DDE] Do not proceed if NPID is not found and Provide history of voided NPIDS":{priority:1,targetEvent:It.ONLOAD,actions:{alert:async e=>{const t=await Object(Rt["d"])("Voided patients with ID "+e.scannedNpid,"NPID was not found. Please review available patient with similar ID",e.dde.voidedNpids.cols,e.dde.voidedNpids.rows,[{name:"Close",slot:"start",color:"primary"},{name:"Merge history",slot:"end",color:"primary"},{name:"Search by name",slot:"end",color:"success"}],"his-danger-color");return"Merge history"===t?xt.VIEW_MERGE_AUDIT_FOR_NPID:"Search by name"===t?xt.SEARCH_BY_NAME:xt.GO_HOME}},conditions:{globalProperties({ddeEnabled:e}){return!0===e},patientFound(e){return!1===e}}},"[DDE] Notify the user to proceed with Remote NPID if local NPID does not match remote":{priority:1,targetEvent:It.ONLOAD,actions:{alert:async({dde:e})=>(await Object(Rt["a"])("Missing Local NPID",`Local NPID of "${e.localNpidDiff}" does not match remote "${e.remoteNpidDiff}"`,"Proceed to Fix issue",[{name:"Resolve issue",slot:"start",color:"danger"}],"his-danger-color"),xt.CREATE_NPID_WITH_REMOTE_DIFF)},conditions:{dde({localNpidDiff:e,remoteNpidDiff:t}){return e!=t},globalProperties({ddeEnabled:e}){return!0===e}}},"Warn if patient is missing National ID and assign them one":{priority:2,targetEvent:It.ONLOAD,actions:{alert:async()=>(await Object(Rt["a"])("Missing National ID","Patient was found BUT has no National ID","The system is going to assign the patient with a new ID",[{name:"OK",slot:"start",color:"primary"}],"his-danger-color"),xt.ASSIGN_NPID)},conditions:{currentNpid:e=>Object(Ft["c"])(e)}},"Detect NPID over 5 duplicates and prompt the user to resolve them":{priority:1,targetEvent:It.ONLOAD,actions:{alert:async({scannedNpid:e})=>{const t=await Object(Rt["a"])("More than 5 duplicates found",`There are more than 5 duplicates for this NPID (${e}). Please search by name and gender`,"Choose how to proceed",[{name:"Close",slot:"start",color:"danger"},{name:"Search by name",slot:"start",color:"primary"}],"his-danger-color");return"Search by name"===t?xt.SEARCH_BY_NAME:xt.GO_HOME}},conditions:{npidHasOverFiveDuplicates(e){return e}}},"Detect NPID duplicates and prompt the user to resolve them":{priority:1,targetEvent:It.ONLOAD,actions:{alert:async({scannedNpid:e})=>(await Object(Rt["a"])("DUPLICATE NPID",`NPID ${e} is currently assigned to multiple patients`,"Proceed to resolve the issue",[{name:"Resolve Duplicate NPIDs",slot:"start",color:"danger"}],"his-danger-color"),xt.RESOLVE_DUPLICATE_NPIDS)},conditions:{npidHasDuplicates(e){return e}}},"Warn before proceeding if patient is deceased based on current Patient state":{priority:3,targetEvent:It.ON_CONTINUE,actions:{alert:async()=>{const e=await Object(Rt["a"])("Deceased Patient","Patient outcome is Died!","Do you want to continue?",[{name:"Yes",slot:"start",color:"danger"},{name:"No",slot:"end",color:"success"}],"his-warning-color");return"Yes"===e?xt.CONTINUE:xt.FORCE_EXIT}},conditions:{currentOutcome:e=>"Patient died"===e}},"Warn before proceeding if patient stopped treatment based on current Patient state":{priority:3,targetEvent:It.ON_CONTINUE,actions:{alert:async()=>{const e=await Object(Rt["a"])("Stopped Treatment","Patient outcome is Stopped Treatment ","Do you want to continue?",[{name:"Yes",slot:"start",color:"danger"},{name:"No",slot:"end",color:"success"}],"his-warning-color");return"Yes"===e?xt.CONTINUE:xt.FORCE_EXIT}},conditions:{currentOutcome:e=>"Treatment stopped"===e}},"[ART patient visit purpose] Select purpose of visit if patient is Transferred out or Drug refill":{priority:3,targetEvent:It.ON_CONTINUE,actions:{alert:async({patientType:e,currentOutcome:t})=>{let a=[];"External consultation"!==e&&"Patient transferred out"!==t||(a=[{name:"Drug refill",slot:"start",color:"primary"},{name:"New Patient",slot:"end",color:"primary"}]),"Drug Refill"===e&&(a=[{name:"External Consultation",slot:"start",color:"primary"},{name:"New Patient",slot:"end",color:"primary"}]),"New patient"===e&&(a=[{name:"External Consultation",slot:"start",color:"primary"},{name:"Drug refill",slot:"start",color:"primary"}]);const n=await Object(Rt["a"])("Purpose of visit",`Patient type: ${e} | State: ${t}`,"Please select purspose of the visit",[...a,{name:"Continue",slot:"end",color:"success"}]);switch(n){case"Drug refill":return xt.ADD_AS_DRUG_REFILL;case"External Consultation":return xt.ADD_AS_EXTERNAL_CONSULTATION;case"New Patient":return xt.ADD_AS_NEW_PATIENT;default:return xt.CONTINUE}}},conditions:{programName:e=>"ART"===e,patientType:(e,{currentOutcome:t})=>["Drug Refill","External consultation"].includes(e)||"Patient transferred out"===t}},"Prompt patient enrollment in current programme if not enrolled":{priority:4,targetEvent:It.ONLOAD,actions:{alert:async()=>{const e=await Object(Rt["a"])("Programme Enrollment","Patient is not enrolled in current programme, do you want to enroll?","",[{name:"Yes",slot:"start",color:"success"},{name:"No",slot:"end",color:"danger"}]);return"Yes"===e?xt.ENROLL:xt.EXIT}},conditions:{enrolledInProgram:e=>!1===e}},"(ART Filing numbers) Prompt dormant filing number reactivation if patient has a dormant filing number":{priority:3,targetEvent:It.ONLOAD,actions:{alert:async()=>{const e=await Object(Rt["a"])("Filing Numbers","Activate dormant #?","",[{name:"Yes",slot:"start",color:"success"},{name:"No",slot:"end",color:"danger"}]);return"Yes"===e?xt.ACTIVATE_FN:xt.EXIT}},conditions:{programName:e=>"ART"===e,identifiers:e=>e.includes("Archived filing number"),currentOutcome:e=>!["Treatment stopped","Patient transferred out","Patient died"].includes(e),globalProperties({useFilingNumbers:e}){return e}}},"[DDE OFF] Prompt the user to update patient demographics when data is incomplete":{priority:2,targetEvent:It.ONLOAD,actions:{alert:async()=>{const e=await Object(Rt["a"])("Demographics","Patient data is incomplete","Do you want to review and update now?",[{name:"Yes",slot:"start",color:"success"},{name:"No",slot:"end",color:"danger"}],"his-danger-color");return"Yes"===e?xt.UPDATE_DMG:xt.EXIT}},conditions:{globalProperties({ddeEnabled:e}){return!1===e},demographics:({patientIsComplete:e})=>!1===e,patientFound:e=>!0===e}},"[DDE] Alert When remote Patient demographics dont match Local Demographics ":{priority:3,targetEvent:It.ONLOAD,actions:{alert:async({dde:e})=>{const t=await Object(Rt["d"])("Demographics Mismatch","Local Demographics do not match Remote Demographics",["Attributes","Local","Remote"],e.diffRows,[{name:"Use Local",slot:"start",color:"primary"},{name:"Use Remote",slot:"start",color:"primary"}],"his-danger-color",e.diffRowColors);return"Use Local"===t?xt.UPDATE_LOCAL_DDE_DIFFS:xt.REFRESH_DDE_DEMOGRAPHICS}},conditions:{dde({hasDemographicConflict:e}){return e}}},"[DDE] Alert to print newer NPID when the scanned NPID doesnt match active NPID":{priority:2,targetEvent:It.ONLOAD,actions:{alert:async({currentNpid:e})=>(await Object(Rt["a"])("[DDE] NATIONAL ID","Patient has a newer National Identifier "+e,"Print and proceed",[{name:"Print",slot:"start",color:"primary"}]),xt.PRINT_NPID)},conditions:{globalProperties({ddeEnabled:e}){return!0===e},scannedNpid(e,{currentNpid:t}){return!e.match(new RegExp(t,"i"))}}},"assign newer NPID when the current one is invalid":{priority:3,targetEvent:It.ONLOAD,actions:{alert:async({currentNpid:e})=>(await Object(Rt["a"])("NATIONAL ID",`Current NPID ${e} is invalid`,"Reasign and Print",[{name:"Reassign",slot:"start",color:"primary"}]),xt.ASSIGN_NPID)},conditions:{demographics:({patientIsComplete:e})=>!0===e,patientFound:e=>!0===e,hasInvalidNpid(e){return e}}},"[DDE ON] Warn program managers when Patient has incomplete demographics. Dont force them to update though":{priority:2,targetEvent:It.ONLOAD,actions:{alert:async()=>{const e=await Object(Rt["a"])("Demographics","Patient data is incomplete data","Do you want to review and update now?",[{name:"Yes",slot:"start",color:"success"},{name:"No",slot:"end",color:"danger"}],"his-danger-color");return"Yes"===e?xt.UPDATE_DMG:xt.CONTINUE}},conditions:{globalProperties({ddeEnabled:e}){return!0===e},demographics:({patientIsComplete:e})=>!1===e,patientFound:e=>!0===e,userRoles(e){return!0===e.includes("Program Manager")}}},"[DDE ON] Force Users to update Incomplete Patient demographics":{priority:2,targetEvent:It.ONLOAD,actions:{alert:async()=>{const e=await Object(Rt["a"])("Patient Demographics","Demographic data is incomplete","Continue to update",[{name:"Update",slot:"start",color:"success"},{name:"Cancel",slot:"start",color:"danger"}],"his-warning-color");return"Cancel"===e?xt.GO_HOME:xt.UPDATE_DMG}},conditions:{globalProperties({ddeEnabled:e}){return!0===e},demographics:({patientIsComplete:e})=>!1===e,userRoles:e=>!1===e.includes("Program Manager")}},"Warn the user when patient has high viral load":{priority:6,targetEvent:It.ONLOAD,actions:{alert:async()=>(await Object(Rt["a"])("High Viral Load","Patient has a high viral load, please take immediate action!","",[{name:"OK",slot:"end",color:"danger"}],"his-danger-color"),xt.CONTINUE)},conditions:{hasHighViralLoad:e=>!0===e}},"[ANC] Warn last LMP is more than 8 months ago and ask to initiate new pregnancy":{priority:10,targetEvent:It.ON_CONTINUE,actions:{alert:async({anc:e})=>{const t=await Object(Rt["a"])("Pregancy overdue",`Last menstrual period was ${e.lmpMonths} months ago!`,"Would you like to initiate new pregnancy?",[{name:"Yes",slot:"end",color:"success"},{name:"No",slot:"end",color:"danger"}],"his-danger-color");return"Yes"===t?xt.INITIATE_ANC_PREGNANCY:xt.CONTINUE}},conditions:{programName:e=>"ANC"===e,anc:e=>!0===e.currentPregnancyIsOverdue}},"[ANC] Exit if client is NOT ELIGIBLE for ANC":{priority:1,targetEvent:It.ONLOAD,actions:{alert:async()=>{const e=await Object(Rt["a"])("Client not eligible for ANC","This program is for women eligible for ANC only","If this is a mistake, please update client Demographics or Exit",[{name:"EXIT",slot:"end",color:"success"},{name:"EDIT DEMOGRAPHICS",slot:"end",color:"danger"}],"his-danger-color");return"EXIT"===e?xt.GO_HOME:xt.UPDATE_DMG}},conditions:{demographics:({gender:e})=>{const t=e.toLowerCase();return"m"===t||"male"===t},programName:e=>"ANC"===e}}};var Mt=a("4db7"),Ht=a("ad49"),$t=a("fa73"),Ut=a("d1ca"),qt=a("9b7c"),Gt=a("8df6"),zt=a("7957"),Yt=a("8734"),Wt=a("cc6f"),Kt=a("ad60"),Xt=a("5a0c"),Jt=a.n(Xt);class Qt extends Wt["a"]{constructor(e,t){super(e,111,t)}async getLmpInMonths(){const e=await Kt["a"].getProgramInformation(this.patientID);if(e.date_of_lnmp){const t=Jt()(e.date_of_lnmp),a=Jt()(this.date);return a.diff(t,"months")}return-1}async pregnancyIsOverdue(){return await this.getLmpInMonths()>9}async canInitiateNewPregnancy(){return await this.getLmpInMonths()>=7}async createNewPregnancyStatus(){return await this.createEncounter(),this.saveValueCodedObs("Pregnancy status","New")}}async function Zt(e,t="action-sheet-modal"){const a=await Object(Rt["c"])("Are you sure you want to void record?","Please specify reason for voiding this record",["Mistake/ Wrong Entry","Duplicate","System Error"],[{name:"Cancel",slot:"start"},{name:"Void",color:"danger",slot:"end",role:"action"}],"",t);a.selection&&"Void"===a.action&&await e(a.selection)}var ea=Object(o["defineComponent"])({name:"Patient Confirmation",components:{IonContent:D["n"],IonHeader:D["q"],IonFooter:D["o"],IonPage:D["D"],IonToolbar:D["Q"],IonRow:D["H"],IonCol:D["m"],IonButton:D["d"],IonCard:D["f"],IonCardContent:D["g"],IonCardTitle:D["j"],IonCardHeader:D["h"]},data:()=>({app:{},program:{},patient:{},localPatient:{},cards:[],ddeInstance:{},useDDE:!1,programInfo:{},facts:{hasHighViralLoad:!1,patientFound:!1,npidHasDuplicates:!1,npidHasOverFiveDuplicates:!1,userRoles:[],scannedNpid:"",currentNpid:"",hasInvalidNpid:!1,enrolledInProgram:!1,programName:"N/A",currentOutcome:"",programs:[],identifiers:[],patientType:"N/A",anc:{lmpMonths:-1,canInitiateNewPregnancy:!1,currentPregnancyIsOverdue:!1},dde:{localNpidDiff:"",remoteNpidDiff:"",voidedNpids:{cols:[],rows:[]},hasDemographicConflict:!1,localDiffs:{},diffRows:[],diffRowColors:[]},demographics:{patientIsComplete:!1,hasInvalidDemographics:!1,invalidDemographics:[],givenName:"",familyName:"",patientName:"",landmark:"",phoneNumber:"",currentDistrict:"",currentTA:"",currentVillage:"",ancestryDistrict:"",ancestryTA:"",ancestryVillage:"",gender:"",birthdate:""},globalProperties:{useFilingNumbers:Ut["a"].FILING_NUMBERS+"=true",ddeEnabled:Ie["a"].DDE_ENABLED+"=true"}}}),async created(){const e=re["a"].getActiveApp();e&&(this.app=e),this.ddeInstance=new $t["a"],await this.ddeInstance.loadDDEStatus(),this.useDDE=this.ddeInstance.isEnabled()},computed:{demographics(){return this.facts.demographics},birthdate(){return le["b"].toStandardHisDisplayFormat(this.facts.demographics.birthdate)},isAdmin(){return Pt["a"].isAdmin()}},watch:{$route:{handler({query:e}){Object(Se["isEmpty"])(e)||!e.person_id&&!e.patient_barcode||this.findAndSetPatient(e.person_id,e.patient_barcode)},immediate:!0}},methods:{async setViralLoadStatus(){const e=await qt["a"].getOrders(this.patient.getID());if(!Object(Se["isEmpty"])(e)){const t=qt["a"].getViralLoadOrders(e);Object(Se["isEmpty"])(t)||(this.facts.hasHighViralLoad=qt["a"].isHighViralLoadResult(t[0].tests[0].result[0]))}},async findAndSetPatient(e,t){this.localPatient={},await this.presentLoading(),this.facts.scannedNpid||(this.facts.scannedNpid=t||""),await this.resolveGlobalPropertyFacts(),this.useDDE&&t?await this.handleSearchResults(this.ddeInstance.searchNpid(t)):e?await this.handleSearchResults(Et["a"].findByID(e)):await this.handleSearchResults(Et["a"].findByNpid(t)),await D["V"].dismiss(),await this.onEvent(It.ONLOAD)},async handleSearchResults(e){let t=[];try{t=await e}catch(a){if(a instanceof de["b"]&&!Object(Se["isEmpty"])(a.entity))t=a.entity;else if(a instanceof de["a"]&&Array.isArray(a.errors)){const[e,...t]=a.errors;"string"===typeof e&&"Invalid parameter(s)"===e&&this.setInvalidParametersFacts(t)}else Object(j["c"])(""+a,3e5)}Object(Se["isEmpty"])(t)&&!Object(Se["isEmpty"])(this.localPatient)&&(t=this.localPatient),Array.isArray(t)&&t.length>1?(this.facts.npidHasDuplicates=t.length<=5,this.facts.npidHasOverFiveDuplicates=t.length>5):this.facts.patientFound=!Object(Se["isEmpty"])(t),this.facts.patientFound?(this.patient=new Et["a"](Array.isArray(t)?t[0]:t),this.setPatientFacts(),await this.setProgramFacts(),this.useDDE&&await this.setDDEFacts(),"ANC"===this.facts.programName&&await this.setAncFacts(),"ART"===this.facts.programName&&await this.setViralLoadStatus(),this.facts.currentNpid=this.patient.getNationalID(),await this.validateNpid(),await this.drawPatientCards()):this.facts.scannedNpid&&await this.setVoidedNpidFacts(this.facts.scannedNpid)},async validateNpid(){if(this.useDDE)this.facts.hasInvalidNpid=!this.patient.getDocID()||this.patient.getDocID()&&Object(Ft["c"])(this.patient.getNationalID());else{const e=await Et["a"].findByNpid(this.facts.currentNpid,{page_size:2});this.facts.hasInvalidNpid=Array.isArray(e)&&e.length>1}},setInvalidParametersFacts(e){this.facts.demographics.hasInvalidDemographics=!0,this.facts.demographics.invalidDemographics=e.map(e=>{const t=Object.entries(e),a=t[0][0],n=t[0][1];return[a,n.join(", ")]})},reloadPatient(){return this.findAndSetPatient(this.patient.getID(),void 0)},setPatientFacts(){this.facts.demographics.patientIsComplete=this.patient.patientIsComplete(),this.facts.demographics.patientName=this.patient.getFullName(),this.facts.demographics.givenName=this.patient.getGivenName(),this.facts.demographics.familyName=this.patient.getFamilyName(),this.facts.demographics.landmark=this.patient.getAttribute(19),this.facts.demographics.phoneNumber=this.patient.getAttribute(12),this.facts.demographics.gender=this.patient.getGender(),this.facts.demographics.birthdate=this.patient.getBirthdate(),this.facts.demographics.ancestryDistrict=this.patient.getHomeDistrict(),this.facts.demographics.ancestryTA=this.patient.getHomeTA(),this.facts.demographics.ancestryVillage=this.patient.getHomeVillage(),this.facts.demographics.currentDistrict=this.patient.getCurrentDistrict(),this.facts.demographics.currentTA=this.patient.getCurrentTA(),this.facts.demographics.currentVillage=this.patient.getCurrentVillage(),this.facts.identifiers=this.patient.getIdentifiers().map(e=>e.type.name)},async setAncFacts(){const e=new Qt(this.patient.getID(),-1);this.facts.anc.canInitiateNewPregnancy=await e.canInitiateNewPregnancy(),this.facts.anc.currentPregnancyIsOverdue=await e.pregnancyIsOverdue(),this.facts.anc.lmpMonths=await e.getLmpInMonths()},buildDDEDiffs(e){const t=[],a={givenName:{label:"First Name",ref:"given_name"},familyName:{label:"Last Name",ref:"family_name"},birthdate:{label:"Birthdate",ref:"birthdate"},gender:{label:"Gender",ref:"gender"},phoneNumber:{label:"Phone number",ref:"phone_number"},ancestryDistrict:{label:"Home District",ref:"home_district"},ancestryTA:{label:"Home TA",ref:"home_traditional_authority"},ancestryVillage:{label:"Home Village",ref:"home_village"},currentDistrict:{label:"Current District",ref:"current_district"},currentTA:{label:"Current TA",ref:"current_traditional_authority"},currentVillage:{label:"Current Village",ref:"current_village"}};let n=0;const o={indexes:[],class:"his-empty-set-color"};for(const i in a){let r=this.facts.demographics[i],s=r;a[i].ref in e&&(o.indexes.push(n),r=e[a[i].ref].local,s=e[a[i].ref].remote),t.push([a[i].label,r,s]),++n}return{comparisons:t,rowColors:[o]}},async resolveGlobalPropertyFacts(){for(const e in this.facts.globalProperties)"string"===typeof this.facts.globalProperties[e]&&(this.facts.globalProperties[e]=await Ht["a"].isProp(this.facts.globalProperties[e]))},async setProgramFacts(){this.facts.programName=this.app.applicationName;try{this.program=new Bt["a"](this.patient.getID()),this.programInfo=await this.program.getProgram();const{program:e,outcome:t}=this.programInfo;this.facts.enrolledInProgram=!(Object(Ft["d"])(e)||e.match(/n\/a/i)),this.facts.currentOutcome=t,this.facts.userRoles=Pt["a"].getUserRoles().map(e=>e.role),this.facts.patientType=await zt["a"].getFirstValueCoded(this.patient.getID(),"Type of patient")||"N/A"}catch(e){console.error(""+e)}},async setDDEFacts(){try{var e;const t=null===(e=await this.ddeInstance.getLocalAndRemoteDiffs())||void 0===e?void 0:e.diff;this.facts.dde.localDiffs=this.ddeInstance.formatDiffValuesByType(t,"local");const{comparisons:a,rowColors:n}=this.buildDDEDiffs(t);if(this.facts.dde.diffRows=a,this.facts.dde.diffRowColors=n,t.npid){const{local:e,remote:a}=t.npid;this.facts.dde.localNpidDiff=e,this.facts.dde.remoteNpidDiff=a,delete t.npid}this.facts.dde.hasDemographicConflict=!Object(Se["isEmpty"])(t)}catch(t){console.warn(t)}},async drawPatientCards(){if(!this.app.confirmationSummary)return;this.cards=[];const e=await this.app.confirmationSummary(this.patient,this.programInfo);for(const t in e){const a=await e[t]();this.cards.push({title:t,data:a})}},async setVoidedNpidFacts(e){const t=["Name","Birthdate","Gender","Ancestry Home","CurrentID","Action"];let a=[];const n=await this.ddeInstance.findVoidedIdentifier(e);n&&(a=n.map(e=>{const t=new Et["a"](e);return[t.getFullName(),t.getBirthdate(),t.getGender(),t.getHomeTA(),t.getNationalID(),{type:"button",name:"Select",action:async()=>{if(!t.patientIsComplete())return this.$router.push("/patient/registration?edit_person="+t.getID());if(t.getNationalID().match(/unknown/i)||!t.getDocID())try{return await t.assignNpid(),await this.findAndSetPatient(t.getID(),void 0),D["X"].dismiss()}catch(e){return Object(j["e"])("Failed to assign npid to patient with unknown npid."),console.error(e)}await D["X"].dismiss(),await this.findAndSetPatient(void 0,t.getNationalID())}}]}),this.facts.dde.voidedNpids.cols=t,this.facts.dde.voidedNpids.rows=a)},async presentLoading(){const e=await D["V"].create({message:"Please wait...",backdropDismiss:!1});await e.present()},async onEvent(e,t={}){const a=Object(At["a"])(this.facts,Lt,"",e);for(const i in a){var n;const e=a[i];if(null!==e&&void 0!==e&&null!==(n=e.actions)&&void 0!==n&&n.alert){var o;const t=await(null===e||void 0===e||null===(o=e.actions)||void 0===o?void 0:o.alert(this.facts));if(await this.runFlowState(t)===xt.FORCE_EXIT)return!1}}"function"===typeof t&&t()},async onInitiateNewAncPregnancy(){await Object(j["a"])("Are you sure you want to initiate new pregnancy?")&&(await this.initiateNewAncPregnancy()?(this.facts.anc.canInitiateNewPregnancy=!1,this.facts.anc.currentPregnancyIsOverdue=!1,await this.nextTask()):Object(j["e"])("Unable to initiate new pregnancy"))},async initiateNewAncPregnancy(){return new Qt(this.patient.getID(),-1).createNewPregnancyStatus()},async runFlowState(e){const t={};if(t[xt.GO_HOME]=()=>(this.$router.push("/"),xt.FORCE_EXIT),t[xt.GO_BACK]=()=>(this.$router.back(),xt.FORCE_EXIT),t[xt.ENROLL]=()=>this.program.enrollProgram(),t[xt.ACTIVATE_FN]=()=>(this.$router.push(`/art/filing_numbers/${this.patient.getID()}?assign=true`),xt.FORCE_EXIT),t[xt.UPDATE_DMG]=()=>(this.$router.push("/patient/registration?edit_person="+this.patient.getID()),xt.FORCE_EXIT),t[xt.PRINT_NPID]=async()=>(await this.ddeInstance.printNpid(this.patient.getID()),await Object(Yt["a"])(1800),xt.CONTINUE),t[xt.CREATE_NPID_WITH_REMOTE_DIFF]=async()=>{const e=this.facts.dde.remoteNpidDiff;try{if(e&&await this.ddeInstance.createNPID(e))return this.facts.scannedNpid=e,this.facts.currentNpid=e,this.facts.dde.localNpidDiff=e,Object(j["d"])("Remote NPID successfully updated"),await Object(Yt["a"])(300),await this.ddeInstance.printNpid(),await this.findAndSetPatient(void 0,e),xt.FORCE_EXIT}catch(t){const e=/Identifier already assigned to another patient/i;if(t instanceof de["a"]&&t.errors.join(",").match(e)){const e=await this.ddeInstance.reassignNpid(this.patient.getDocID());if(e)return this.patient=new Et["a"](e),Object(j["d"])("Patient has been reassigned NPID"),await Object(Yt["a"])(300),await this.ddeInstance.printNpid(),await this.findAndSetPatient(void 0,this.patient.getNationalID()),xt.FORCE_EXIT}Object(j["c"])("Unable to assign NPID: "+t)}},t[xt.ASSIGN_NPID]=async()=>(await this.patient.assignNpid(),await new Mt["a"](this.patient.getID()).printNidLbl(),await Object(Yt["a"])(300),await this.reloadPatient(),xt.FORCE_EXIT),t[xt.INITIATE_ANC_PREGNANCY]=async()=>(await this.initiateNewAncPregnancy(),xt.CONTINUE),t[xt.VIEW_MERGE_AUDIT_FOR_NPID]=()=>(this.$router.push("/merge/rollback/"+this.facts.scannedNpid),xt.FORCE_EXIT),t[xt.RESOLVE_DUPLICATE_NPIDS]=()=>(this.$router.push("/npid/duplicates/"+this.facts.scannedNpid),xt.FORCE_EXIT),t[xt.REFRESH_DDE_DEMOGRAPHICS]=async()=>(await this.ddeInstance.refreshDemographics(),await this.reloadPatient(),xt.FORCE_EXIT),t[xt.ADD_AS_DRUG_REFILL]=async()=>(await this.createPatientType("Drug Refill"),xt.CONTINUE),t[xt.ADD_AS_NEW_PATIENT]=async()=>(await this.createPatientType("New patient"),xt.CONTINUE),t[xt.ADD_AS_EXTERNAL_CONSULTATION]=async()=>(await this.createPatientType("External consultation"),xt.CONTINUE),t[xt.SEARCH_BY_NAME]=()=>(this.$router.push("/patient/registration"),xt.FORCE_EXIT),t[xt.UPDATE_LOCAL_DDE_DIFFS]=async()=>(await this.ddeInstance.updateLocalDifferences(this.facts.dde.localDiffs),await this.reloadPatient(),xt.FORCE_EXIT),e in t)try{return await t[e]()}catch(a){Object(j["c"])(""+a)}return e},async createPatientType(e){const t=new Gt["a"](this.patient.getID(),-1);await t.createEncounter(),await t.savePatientType(e)},async onVoid(){Zt(async e=>{try{await Et["a"].voidPatient(this.patient.getID(),e),this.$router.push("/")}catch(t){Object(j["c"])(""+t)}},"void-modal")},async nextTask(){await this.onEvent(It.ON_CONTINUE,()=>{Object(St["b"])(this.patient.getID(),this.$router)})}}});a("dd35");const ta=N()(ea,[["render",Tt],["__scopeId","data-v-5bbd2d98"]]);var aa=ta;const na=Object(o["withScopeId"])("data-v-34bfc446");Object(o["pushScopeId"])("data-v-34bfc446");const oa=Object(o["createTextVNode"])("Scan work-station location"),ia=Object(o["createTextVNode"])(" Cancel "),ra=Object(o["createTextVNode"])(" Next ");Object(o["popScopeId"])();const sa=na((function(e,t,a,n,i,r){const s=Object(o["resolveComponent"])("ion-title"),c=Object(o["resolveComponent"])("ion-toolbar"),l=Object(o["resolveComponent"])("ion-header"),d=Object(o["resolveComponent"])("barcode-input"),u=Object(o["resolveComponent"])("ion-content"),p=Object(o["resolveComponent"])("his-keyboard"),h=Object(o["resolveComponent"])("ion-button"),b=Object(o["resolveComponent"])("ion-footer"),m=Object(o["resolveComponent"])("ion-page");return Object(o["openBlock"])(),Object(o["createBlock"])(m,null,{default:na(()=>[Object(o["createVNode"])(l,{translucent:!0},{default:na(()=>[Object(o["createVNode"])(c,null,{default:na(()=>[Object(o["createVNode"])(s,null,{default:na(()=>[oa]),_:1})]),_:1})]),_:1}),Object(o["createVNode"])(u,null,{default:na(()=>[Object(o["createVNode"])(d,{class:"his-card",clearValue:e.clearValue,virtualText:e.kbText,onOnValue:e.onbarcodeText,onOnScan:e.onScan},null,8,["clearValue","virtualText","onOnValue","onOnScan"])]),_:1}),e.useVirtualInput?(Object(o["openBlock"])(),Object(o["createBlock"])(p,{key:0,kbConfig:e.NUMBERS,onKeyPress:e.onKbClick},null,8,["kbConfig","onKeyPress"])):Object(o["createCommentVNode"])("",!0),Object(o["createVNode"])(b,null,{default:na(()=>[Object(o["createVNode"])(c,{color:"dark"},{default:na(()=>[Object(o["createVNode"])(h,{color:"danger",size:"large","router-link":"/login"},{default:na(()=>[ia]),_:1}),e.barcodeText?(Object(o["openBlock"])(),Object(o["createBlock"])(h,{key:0,slot:"end",color:"success",size:"large",onClick:e.searchLocation},{default:na(()=>[ra]),_:1},8,["onClick"])):Object(o["createCommentVNode"])("",!0)]),_:1})]),_:1})]),_:1})}));var ca=a("efaf"),la=a("db10"),da=a("6be2"),ua=Object(o["defineComponent"])({name:"HC location",components:{BarcodeInput:ca["a"],IonContent:D["n"],IonHeader:D["q"],IonPage:D["D"],IonTitle:D["P"],IonToolbar:D["Q"],IonButton:D["d"],IonFooter:D["o"],HisKeyboard:la["a"]},setup(){const{useVirtualInput:e}=Object(x["a"])(),t=Object(o["ref"])(""),a=Object(o["ref"])(""),n=Object(o["ref"])("");async function i(){t.value.includes("$")||(t.value+="$");const e=await de["e"].getJson("locations/"+t.value);if(Object(Se["isEmpty"])(e))Object(j["e"])("Invalid location");else{const t=e;sessionStorage.siteUUID=t.uuid,sessionStorage.userLocation=t.name,Ps.push("/")}a.value=t.value,t.value="",n.value=t.value}function r(e){t.value=e}function s(e){n.value=e}async function c(e){t.value=e,await i()}return{onbarcodeText:r,onScan:c,onKbClick:s,searchLocation:i,useVirtualInput:e,kbText:n,clearValue:a,barcodeText:t,NUMBERS:da["c"]}}});a("133b");const pa=N()(ua,[["render",sa],["__scopeId","data-v-34bfc446"]]);var ha=pa;function ba(e,t,a,n,i,r){const s=Object(o["resolveComponent"])("his-standard-form");return Object(o["openBlock"])(),Object(o["createBlock"])(s,{fields:e.fields,skipSummary:!0,onOnFinish:e.onFinish},null,8,["fields","onOnFinish"])}var ma=a("d95e"),ga=a("d10e"),fa=a("7920"),Oa=a("2706"),ja=Object(o["defineComponent"])({components:{HisStandardForm:fa["a"]},data:()=>({fields:[],form:{}}),created(){this.fields=this.getFields()},methods:{onFinish(e){const t=this.resolveData(e);this.$router.push({path:"/patient/search_results",query:t})},resolveData(e){const t={};for(const a in e){const n=e[a];n&&null!=n.value&&(t[a]=n.value)}return t},mapToOption(e){return e.map(e=>({label:e,value:e}))},getFields:function(){return[{id:"given_name",helpText:"First name",type:ma["b"].TT_TEXT,validation:e=>Oa["a"].isName(e),options:async e=>{if(!e.given_name||null===e.given_name.value)return[];const t=await ga["a"].searchGivenName(e.given_name.value);return this.mapToOption(t)}},{id:"family_name",helpText:"Last name",type:ma["b"].TT_TEXT,validation:e=>Oa["a"].isName(e),options:async e=>{if(!e.family_name||null===e.family_name.value)return[];const t=await ga["a"].searchFamilyName(e.family_name.value);return this.mapToOption(t)}},{id:"gender",helpText:"Gender",type:ma["b"].TT_SELECT,validation:e=>Oa["a"].required(e),options:()=>[{label:"Male",value:"M"},{label:"Female",value:"F"}]}]}}});const _a=N()(ja,[["render",ba]]);var va=_a;const ya=Object(o["withScopeId"])("data-v-416d2c6b");Object(o["pushScopeId"])("data-v-416d2c6b");const wa=Object(o["createTextVNode"])("HIS Core"),Na={id:"container"},Ca={id:"page0",class:"content-containers"},Va={id:"page1",class:"content-containers"},Da=Object(o["createTextVNode"])("Cancel"),ka=Object(o["createTextVNode"])("Next"),Ta=Object(o["createTextVNode"])("Back");Object(o["popScopeId"])();const Ia=ya((function(e,t,a,n,i,r){const s=Object(o["resolveComponent"])("ion-title"),c=Object(o["resolveComponent"])("ion-toolbar"),l=Object(o["resolveComponent"])("ion-header"),d=Object(o["resolveComponent"])("input-text"),u=Object(o["resolveComponent"])("input-text-keyboard"),p=Object(o["resolveComponent"])("ion-content"),h=Object(o["resolveComponent"])("ion-button"),b=Object(o["resolveComponent"])("ion-footer"),m=Object(o["resolveComponent"])("ion-page");return Object(o["openBlock"])(),Object(o["createBlock"])(m,null,{default:ya(()=>[Object(o["createVNode"])(l,{translucent:!0},{default:ya(()=>[Object(o["createVNode"])(c,null,{default:ya(()=>[Object(o["createVNode"])(s,null,{default:ya(()=>[Object(o["createTextVNode"])(Object(o["toDisplayString"])(e.helpText),1)]),_:1})]),_:1})]),_:1}),Object(o["createVNode"])(p,{fullscreen:!0},{default:ya(()=>[Object(o["createVNode"])(l,{collapse:"condense"},{default:ya(()=>[Object(o["createVNode"])(c,null,{default:ya(()=>[Object(o["createVNode"])(s,{size:"large"},{default:ya(()=>[wa]),_:1})]),_:1})]),_:1}),Object(o["createVNode"])("div",Na,[Object(o["createVNode"])("div",Ca,[Object(o["createVNode"])(d,{passedKey:e.passedKey},null,8,["passedKey"]),Object(o["createVNode"])(u,{onKeyPress:e.keyPressed},null,8,["onKeyPress"])]),Object(o["createVNode"])("div",Va,[Object(o["createVNode"])(d,{passedKey:e.passedKey},null,8,["passedKey"]),Object(o["createVNode"])(u,{onKeyPress:e.keyPressed},null,8,["onKeyPress"])])])]),_:1}),Object(o["createVNode"])(b,{translucent:!0,class:"loc-footer"},{default:ya(()=>[Object(o["createVNode"])(h,{class:"footer-btns",color:"danger"},{default:ya(()=>[Da]),_:1}),Object(o["createVNode"])(h,{class:"footer-btns",onClick:e.goNextPage,id:"nextButton",color:"success"},{default:ya(()=>[ka]),_:1},8,["onClick"]),Object(o["createVNode"])(h,{class:"footer-btns",onClick:e.goBack,id:"backButton",color:"primary"},{default:ya(()=>[Ta]),_:1},8,["onClick"])]),_:1})]),_:1})})),xa=Object(o["withScopeId"])("data-v-34f065e0");Object(o["pushScopeId"])("data-v-34f065e0");const Sa={id:"inputs-container"};Object(o["popScopeId"])();const Pa=xa((function(e,t,a,n,i,r){const s=Object(o["resolveComponent"])("ion-col"),c=Object(o["resolveComponent"])("ion-row"),l=Object(o["resolveComponent"])("ion-grid");return Object(o["openBlock"])(),Object(o["createBlock"])("div",Sa,[Object(o["createVNode"])(l,{class:"main-table"},{default:xa(()=>[Object(o["createVNode"])(c,null,{default:xa(()=>[Object(o["createVNode"])(s,{"size-md":"12"},{default:xa(()=>[Object(o["createVNode"])("input",{type:"text",id:"touchscreenInput",value:e.passedKey,autofocus:"",ref:"barcodeInputbox"},null,8,["value"])]),_:1})]),_:1})]),_:1})])}));var Aa=Object(o["defineComponent"])({props:["passedKey"],name:"InputSearchResult",components:{},data(){return{barcodeText:this.passedKey}},methods:{},mounted(){},watch:{barcodeText:function(){}}});a("ddb2");const Ea=N()(Aa,[["render",Pa],["__scopeId","data-v-34f065e0"]]);var Ba=Ea;const Ra=Object(o["withScopeId"])("data-v-5572eb86");Object(o["pushScopeId"])("data-v-5572eb86");const Fa={id:"inputs-container"},La=Object(o["createTextVNode"])("1"),Ma=Object(o["createTextVNode"])("2"),Ha=Object(o["createTextVNode"])("3"),$a=Object(o["createTextVNode"])("4"),Ua=Object(o["createTextVNode"])("5"),qa=Object(o["createTextVNode"])("6"),Ga=Object(o["createTextVNode"])("7"),za=Object(o["createTextVNode"])("8"),Ya=Object(o["createTextVNode"])("9"),Wa=Object(o["createTextVNode"])("0"),Ka=Object(o["createTextVNode"])("Q"),Xa=Object(o["createTextVNode"])("W"),Ja=Object(o["createTextVNode"])("E"),Qa=Object(o["createTextVNode"])("R"),Za=Object(o["createTextVNode"])("T"),en=Object(o["createTextVNode"])("Y"),tn=Object(o["createTextVNode"])("U"),an=Object(o["createTextVNode"])("I"),nn=Object(o["createTextVNode"])("O"),on=Object(o["createTextVNode"])("P"),rn=Object(o["createTextVNode"])("Caps"),sn=Object(o["createTextVNode"])("A"),cn=Object(o["createTextVNode"])("S"),ln=Object(o["createTextVNode"])("D"),dn=Object(o["createTextVNode"])("F"),un=Object(o["createTextVNode"])("G"),pn=Object(o["createTextVNode"])("H"),hn=Object(o["createTextVNode"])("J"),bn=Object(o["createTextVNode"])("K"),mn=Object(o["createTextVNode"])("L"),gn=Object(o["createTextVNode"])("Del"),fn=Object(o["createTextVNode"])("Z"),On=Object(o["createTextVNode"])("X"),jn=Object(o["createTextVNode"])("C"),_n=Object(o["createTextVNode"])("V"),vn=Object(o["createTextVNode"])("B"),yn=Object(o["createTextVNode"])("N"),wn=Object(o["createTextVNode"])("M"),Nn=Object(o["createTextVNode"])(">"),Cn=Object(o["createTextVNode"])("."),Vn=Object(o["createTextVNode"])("<"),Dn=Object(o["createTextVNode"])("Space");Object(o["popScopeId"])();const kn=Ra((function(e,t,a,n,i,r){const s=Object(o["resolveComponent"])("ion-button"),c=Object(o["resolveComponent"])("ion-col"),l=Object(o["resolveComponent"])("ion-row"),d=Object(o["resolveComponent"])("ion-grid");return Object(o["openBlock"])(),Object(o["createBlock"])("div",Fa,[Object(o["createVNode"])(d,{class:"main-table"},{default:Ra(()=>[Object(o["createVNode"])(l,null,{default:Ra(()=>[Object(o["createVNode"])(c,{"size-md":"12",id:"keyboard-elements"},{default:Ra(()=>[Object(o["createVNode"])(d,{class:"keyboard-table",ref:"keyboardElements"},{default:Ra(()=>[Object(o["createVNode"])(l,null,{default:Ra(()=>[Object(o["createVNode"])(c,null,{default:Ra(()=>[Object(o["createVNode"])(s,{onClick:t[1]||(t[1]=t=>e.keyPress("1")),class:"keyboard-btn",id:"btn-1",color:"primary"},{default:Ra(()=>[La]),_:1})]),_:1}),Object(o["createVNode"])(c,null,{default:Ra(()=>[Object(o["createVNode"])(s,{onClick:t[2]||(t[2]=t=>e.keyPress("2")),class:"keyboard-btn",id:"btn-2",color:"primary"},{default:Ra(()=>[Ma]),_:1})]),_:1}),Object(o["createVNode"])(c,null,{default:Ra(()=>[Object(o["createVNode"])(s,{onClick:t[3]||(t[3]=t=>e.keyPress("3")),class:"keyboard-btn",id:"btn-3",color:"primary"},{default:Ra(()=>[Ha]),_:1})]),_:1}),Object(o["createVNode"])(c,null,{default:Ra(()=>[Object(o["createVNode"])(s,{onClick:t[4]||(t[4]=t=>e.keyPress("4")),class:"keyboard-btn",id:"btn-4",color:"primary"},{default:Ra(()=>[$a]),_:1})]),_:1}),Object(o["createVNode"])(c,null,{default:Ra(()=>[Object(o["createVNode"])(s,{onClick:t[5]||(t[5]=t=>e.keyPress("5")),class:"keyboard-btn",id:"btn-5",color:"primary"},{default:Ra(()=>[Ua]),_:1})]),_:1}),Object(o["createVNode"])(c,null,{default:Ra(()=>[Object(o["createVNode"])(s,{onClick:t[6]||(t[6]=t=>e.keyPress("6")),class:"keyboard-btn",id:"btn-6",color:"primary"},{default:Ra(()=>[qa]),_:1})]),_:1}),Object(o["createVNode"])(c,null,{default:Ra(()=>[Object(o["createVNode"])(s,{onClick:t[7]||(t[7]=t=>e.keyPress("7")),class:"keyboard-btn",id:"btn-7",color:"primary"},{default:Ra(()=>[Ga]),_:1})]),_:1}),Object(o["createVNode"])(c,null,{default:Ra(()=>[Object(o["createVNode"])(s,{onClick:t[8]||(t[8]=t=>e.keyPress("8")),class:"keyboard-btn",id:"btn-8",color:"primary"},{default:Ra(()=>[za]),_:1})]),_:1}),Object(o["createVNode"])(c,null,{default:Ra(()=>[Object(o["createVNode"])(s,{onClick:t[9]||(t[9]=t=>e.keyPress("9")),class:"keyboard-btn",id:"btn-9",color:"primary"},{default:Ra(()=>[Ya]),_:1})]),_:1}),Object(o["createVNode"])(c,null,{default:Ra(()=>[Object(o["createVNode"])(s,{onClick:t[10]||(t[10]=t=>e.keyPress("0")),class:"keyboard-btn",id:"btn-0",color:"primary"},{default:Ra(()=>[Wa]),_:1})]),_:1})]),_:1}),Object(o["createVNode"])(l,null,{default:Ra(()=>[Object(o["createVNode"])(c,null,{default:Ra(()=>[Object(o["createVNode"])(s,{onClick:t[11]||(t[11]=t=>e.keyPress("Q")),class:"keyboard-btn",id:"btn-Q",color:"primary"},{default:Ra(()=>[Ka]),_:1})]),_:1}),Object(o["createVNode"])(c,null,{default:Ra(()=>[Object(o["createVNode"])(s,{onClick:t[12]||(t[12]=t=>e.keyPress("W")),class:"keyboard-btn",id:"btn-W",color:"primary"},{default:Ra(()=>[Xa]),_:1})]),_:1}),Object(o["createVNode"])(c,null,{default:Ra(()=>[Object(o["createVNode"])(s,{onClick:t[13]||(t[13]=t=>e.keyPress("E")),class:"keyboard-btn",id:"btn-E",color:"primary"},{default:Ra(()=>[Ja]),_:1})]),_:1}),Object(o["createVNode"])(c,null,{default:Ra(()=>[Object(o["createVNode"])(s,{onClick:t[14]||(t[14]=t=>e.keyPress("R")),class:"keyboard-btn",id:"btn-R",color:"primary"},{default:Ra(()=>[Qa]),_:1})]),_:1}),Object(o["createVNode"])(c,null,{default:Ra(()=>[Object(o["createVNode"])(s,{onClick:t[15]||(t[15]=t=>e.keyPress("T")),class:"keyboard-btn",id:"btn-T",color:"primary"},{default:Ra(()=>[Za]),_:1})]),_:1}),Object(o["createVNode"])(c,null,{default:Ra(()=>[Object(o["createVNode"])(s,{onClick:t[16]||(t[16]=t=>e.keyPress("Y")),class:"keyboard-btn",id:"btn-Y",color:"primary"},{default:Ra(()=>[en]),_:1})]),_:1}),Object(o["createVNode"])(c,null,{default:Ra(()=>[Object(o["createVNode"])(s,{onClick:t[17]||(t[17]=t=>e.keyPress("U")),class:"keyboard-btn",id:"btn-U",color:"primary"},{default:Ra(()=>[tn]),_:1})]),_:1}),Object(o["createVNode"])(c,null,{default:Ra(()=>[Object(o["createVNode"])(s,{onClick:t[18]||(t[18]=t=>e.keyPress("I")),class:"keyboard-btn",id:"btn-I",color:"primary"},{default:Ra(()=>[an]),_:1})]),_:1}),Object(o["createVNode"])(c,null,{default:Ra(()=>[Object(o["createVNode"])(s,{onClick:t[19]||(t[19]=t=>e.keyPress("O")),class:"keyboard-btn",id:"btn-O",color:"primary"},{default:Ra(()=>[nn]),_:1})]),_:1}),Object(o["createVNode"])(c,null,{default:Ra(()=>[Object(o["createVNode"])(s,{onClick:t[20]||(t[20]=t=>e.keyPress("P")),class:"keyboard-btn",id:"btn-P",color:"primary"},{default:Ra(()=>[on]),_:1})]),_:1})]),_:1}),Object(o["createVNode"])(l,null,{default:Ra(()=>[Object(o["createVNode"])(c,null,{default:Ra(()=>[Object(o["createVNode"])(s,{onClick:t[21]||(t[21]=t=>e.keyPress("Caps")),class:"keyboard-btn",id:"btn-A",color:"primary"},{default:Ra(()=>[rn]),_:1})]),_:1}),Object(o["createVNode"])(c,null,{default:Ra(()=>[Object(o["createVNode"])(s,{onClick:t[22]||(t[22]=t=>e.keyPress("A")),class:"keyboard-btn",id:"btn-A",color:"primary"},{default:Ra(()=>[sn]),_:1})]),_:1}),Object(o["createVNode"])(c,null,{default:Ra(()=>[Object(o["createVNode"])(s,{onClick:t[23]||(t[23]=t=>e.keyPress("S")),class:"keyboard-btn",id:"btn-S",color:"primary"},{default:Ra(()=>[cn]),_:1})]),_:1}),Object(o["createVNode"])(c,null,{default:Ra(()=>[Object(o["createVNode"])(s,{onClick:t[24]||(t[24]=t=>e.keyPress("D")),class:"keyboard-btn",id:"btn-D",color:"primary"},{default:Ra(()=>[ln]),_:1})]),_:1}),Object(o["createVNode"])(c,null,{default:Ra(()=>[Object(o["createVNode"])(s,{onClick:t[25]||(t[25]=t=>e.keyPress("F")),class:"keyboard-btn",id:"btn-F",color:"primary"},{default:Ra(()=>[dn]),_:1})]),_:1}),Object(o["createVNode"])(c,null,{default:Ra(()=>[Object(o["createVNode"])(s,{onClick:t[26]||(t[26]=t=>e.keyPress("G")),class:"keyboard-btn",id:"btn-G",color:"primary"},{default:Ra(()=>[un]),_:1})]),_:1}),Object(o["createVNode"])(c,null,{default:Ra(()=>[Object(o["createVNode"])(s,{onClick:t[27]||(t[27]=t=>e.keyPress("H")),class:"keyboard-btn",id:"btn-H",color:"primary"},{default:Ra(()=>[pn]),_:1})]),_:1}),Object(o["createVNode"])(c,null,{default:Ra(()=>[Object(o["createVNode"])(s,{onClick:t[28]||(t[28]=t=>e.keyPress("J")),class:"keyboard-btn",id:"btn-J",color:"primary"},{default:Ra(()=>[hn]),_:1})]),_:1}),Object(o["createVNode"])(c,null,{default:Ra(()=>[Object(o["createVNode"])(s,{onClick:t[29]||(t[29]=t=>e.keyPress("K")),class:"keyboard-btn",id:"btn-K",color:"primary"},{default:Ra(()=>[bn]),_:1})]),_:1}),Object(o["createVNode"])(c,null,{default:Ra(()=>[Object(o["createVNode"])(s,{onClick:t[30]||(t[30]=t=>e.keyPress("L")),class:"keyboard-btn",id:"btn-L",color:"primary"},{default:Ra(()=>[mn]),_:1})]),_:1}),Object(o["createVNode"])(c,null,{default:Ra(()=>[Object(o["createVNode"])(s,{onClick:t[31]||(t[31]=t=>e.keyPress("Del")),class:"keyboard-btn",id:"btn-backspace",color:"primary"},{default:Ra(()=>[gn]),_:1})]),_:1})]),_:1}),Object(o["createVNode"])(l,null,{default:Ra(()=>[Object(o["createVNode"])(c,null,{default:Ra(()=>[Object(o["createVNode"])(s,{onClick:t[32]||(t[32]=t=>e.keyPress("Z")),class:"keyboard-btn",id:"btn-A",color:"primary"},{default:Ra(()=>[fn]),_:1})]),_:1}),Object(o["createVNode"])(c,null,{default:Ra(()=>[Object(o["createVNode"])(s,{onClick:t[33]||(t[33]=t=>e.keyPress("X")),class:"keyboard-btn",id:"btn-S",color:"primary"},{default:Ra(()=>[On]),_:1})]),_:1}),Object(o["createVNode"])(c,null,{default:Ra(()=>[Object(o["createVNode"])(s,{onClick:t[34]||(t[34]=t=>e.keyPress("C")),class:"keyboard-btn",id:"btn-D",color:"primary"},{default:Ra(()=>[jn]),_:1})]),_:1}),Object(o["createVNode"])(c,null,{default:Ra(()=>[Object(o["createVNode"])(s,{onClick:t[35]||(t[35]=t=>e.keyPress("V")),class:"keyboard-btn",id:"btn-F",color:"primary"},{default:Ra(()=>[_n]),_:1})]),_:1}),Object(o["createVNode"])(c,null,{default:Ra(()=>[Object(o["createVNode"])(s,{onClick:t[36]||(t[36]=t=>e.keyPress("B")),class:"keyboard-btn",id:"btn-G",color:"primary"},{default:Ra(()=>[vn]),_:1})]),_:1}),Object(o["createVNode"])(c,null,{default:Ra(()=>[Object(o["createVNode"])(s,{onClick:t[37]||(t[37]=t=>e.keyPress("N")),class:"keyboard-btn",id:"btn-H",color:"primary"},{default:Ra(()=>[yn]),_:1})]),_:1}),Object(o["createVNode"])(c,null,{default:Ra(()=>[Object(o["createVNode"])(s,{onClick:t[38]||(t[38]=t=>e.keyPress("M")),class:"keyboard-btn",id:"btn-J",color:"primary"},{default:Ra(()=>[wn]),_:1})]),_:1}),Object(o["createVNode"])(c,null,{default:Ra(()=>[Object(o["createVNode"])(s,{onClick:t[39]||(t[39]=t=>e.keyPress("<")),class:"keyboard-btn",id:"btn-backspace",color:"primary"},{default:Ra(()=>[Nn]),_:1})]),_:1}),Object(o["createVNode"])(c,null,{default:Ra(()=>[Object(o["createVNode"])(s,{onClick:t[40]||(t[40]=t=>e.keyPress(".")),class:"keyboard-btn",id:"btn-backspace",color:"primary"},{default:Ra(()=>[Cn]),_:1})]),_:1}),Object(o["createVNode"])(c,null,{default:Ra(()=>[Object(o["createVNode"])(s,{onClick:t[41]||(t[41]=t=>e.keyPress(">")),class:"keyboard-btn",id:"btn-backspace",color:"primary"},{default:Ra(()=>[Vn]),_:1})]),_:1})]),_:1}),Object(o["createVNode"])(l,null,{default:Ra(()=>[Object(o["createVNode"])(c,null,{default:Ra(()=>[Object(o["createVNode"])(s,{onClick:t[42]||(t[42]=t=>e.keyPress("Space")),class:"keyboard-btn",id:"btn-backspace",color:"primary"},{default:Ra(()=>[Dn]),_:1})]),_:1})]),_:1})]),_:1},512)]),_:1})]),_:1})]),_:1})])}));var Tn=Object(o["defineComponent"])({props:["onKeyPress"],name:"InputSearchResult",components:{},data(){return{keyboardPressedKeys:""}},methods:{keyPress(e){const t=this.keyboardPressedKeys;try{e.match(/Del/i)?this.keyboardPressedKeys=t.substring(0,t.length-1):e.match(/Space/i)?this.keyboardPressedKeys+=" ":e.match(/Caps/i)?console.log(e):this.keyboardPressedKeys+=e}catch(a){this.keyboardPressedKeys=t}this.onKeyPress(this.keyboardPressedKeys)}},mounted(){this.keyPress(this.keyboardPressedKeys)}});a("a039");const In=N()(Tn,[["render",kn],["__scopeId","data-v-5572eb86"]]);var xn=In,Sn=Object(o["defineComponent"])({name:"Client search",components:{IonContent:D["n"],IonHeader:D["q"],IonPage:D["D"],IonTitle:D["P"],IonToolbar:D["Q"],IonFooter:D["o"],"input-text":Ba,"input-text-keyboard":xn},data(){return{helpText:"First Name",passedKey:"",containers:[],pageCount:0,helpTexts:["First Name","Last Name"]}},methods:{keyPressed(e){this.passedKey=e},goNextPage(){const e=this.containers;for(let o=0;o<e.length;o++)e[o].setAttribute("style","visibility: hidden;");this.pageCount+=1;let t=document.getElementById("page"+this.pageCount);const a=document.getElementById("backButton"),n=document.getElementById("nextButton");void 0==t?(this.pageCount-=1,t=document.getElementById("page"+this.pageCount)):a.setAttribute("style","display: inline;"),this.pageCount+1==this.helpTexts.length?n.innerHTML="Finish":n.innerHTML="Next",t.setAttribute("style","visibility: visible;"),this.helpText=this.helpTexts[this.pageCount]},goBack(){const e=this.containers;for(let o=0;o<e.length;o++)e[o].setAttribute("style","visibility: hidden;");this.pageCount-=1;let t=document.getElementById("page"+this.pageCount);const a=document.getElementById("backButton"),n=document.getElementById("nextButton");void 0==t?(this.pageCount+=1,t=document.getElementById("page"+this.pageCount)):(a.setAttribute("style","display: none;"),n.innerHTML="Next"),0==this.pageCount&&(a.setAttribute("style","display: none;"),n.innerHTML="Next"),t.setAttribute("style","visibility: visible;"),this.helpText=this.helpTexts[this.pageCount]}},mounted(){const e=document.getElementsByClassName("content-containers");for(let t=0;t<e.length;t++)this.containers.push(e[t])}});a("9ed9");const Pn=N()(Sn,[["render",Ia],["__scopeId","data-v-416d2c6b"]]);var An=Pn;function En(e,t,a,n,i,r){const s=Object(o["resolveComponent"])("his-standard-form"),c=Object(o["resolveComponent"])("ion-page");return Object(o["openBlock"])(),Object(o["createBlock"])(c,null,{default:Object(o["withCtx"])(()=>[Object(o["createVNode"])(s,{onOnIndex:t[1]||(t[1]=t=>e.fieldComponent=""),skipSummary:!0,activeField:e.fieldComponent,fields:e.fields,onFinishAction:e.onFinish},null,8,["activeField","fields","onFinishAction"])]),_:1})}var Bn=a("b446"),Rn=a("50e7"),Fn=a("80b5");class Ln extends de["e"]{constructor(){super()}static create(e){return super.postJson("/person_attributes",e)}}class Mn extends de["e"]{constructor(){super(),this.personId=0}getPersonID(){return this.personId}setPersonID(e){this.personId=e}async registerPatient(e,t){await this.createPerson(e),await this.createPersonAttributes(t),await this.createPatient(),await this.printPatient()}async registerGuardian(e){return this.createPerson(e)}updatePerson(e){return new ga["a"](e).update(this.personId)}async createPerson(e){const t=await new ga["a"](e).create();return this.personId=t.person_id,t}createPatient(){return Kt["a"].createPatient(this.personId)}async createPersonAttributes(e){for(const t in e)await Ln.create({...e[t],person_id:this.personId})}printPatient(){return new Mt["a"](this.personId).printNidLbl()}}var Hn=Object(o["defineComponent"])({components:{HisStandardForm:fa["a"],IonPage:D["D"]},data:()=>({app:re["a"].getActiveApp(),ddeInstance:{},ddeDocID:"",ddeIsReassign:!1,skipSummary:!1,currentAddressAttributes:["current_region","current_district","current_village","current_traditional_authority"],homeAddressAttributes:["home_region","home_district","home_traditional_authority","home_village"],hasIncompleteData:!1,patient:{},editPersonData:{},editPerson:-1,personAttribute:"",activeField:"",fieldComponent:"",fields:[],isMilitarySite:!1,presets:{},registrationSummary:{},form:{}}),watch:{$route:{async handler({query:e}){this.ddeInstance=new $t["a"],await this.ddeInstance.loadDDEStatus(),e.edit_person?(this.ddeIsReassign=e.dde_reassign,this.ddeDocID=e.doc_id,this.ddeInstance.setPatientID(e.edit_person),e.person_attribute&&(this.personAttribute=e.person_attribute),await this.initEditMode(e.edit_person)):this.presets=e,this.fields=this.getFields(),this.isMilitarySite=await Ie["b"].militarySiteEnabled()},immediate:!0,deep:!0}},methods:{getFields(){let e=[];return e.push(this.personIndexField()),e.push(this.givenNameField()),e.push(this.familyNameField()),e.push(this.genderField()),e.push(this.searchResultField()),e=e.concat(this.dobFields()),e.push(this.homeRegionField()),e.push(this.homeDistrictField()),e.push(this.homeTAField()),e.push(this.homeVillageField()),e.push(this.currentRegionField()),e.push(this.currentDistrictField()),e.push(this.currentTAField()),e.push(this.currentVillage()),e=e.concat(this.landmarkFields()),e.push(this.cellPhoneField()),e.push(this.patientTypeField()),e.push(this.facilityLocationField()),e.push(this.occupationField()),e.push(this.regimentField()),e=e.concat(this.dateJoinedMilitaryFields()),e.push(this.rankField()),e.push(this.relationshipField()),e.push(this.possibleDuplicatesField()),e.push(this.patientRegistrationSummary()),e},isEditMode(){return this.editPerson>=1},async initEditMode(e){this.editPerson=e;const t=await Et["a"].findByID(this.editPerson);if(!t)return;this.patient=new Et["a"](t);const{ancestryDistrict:a,ancestryTA:n,ancestryVillage:o,currentDistrict:i,currentTA:r}=this.patient.getAddresses();this.editPersonData={given_name:this.patient.getGivenName(),family_name:this.patient.getFamilyName(),gender:this.patient.getGender(),birthdate:this.patient.getBirthdate(),home_district:a,home_traditional_authority:n,home_village:o,current_district:i,current_traditional_authority:r,cell_phone_number:this.patient.getPhoneNumber(),landmark:this.patient.getClosestLandmark()},this.presets=this.editPersonData,this.skipSummary=!0,this.personAttribute&&(this.activeField=this.personAttribute,this.fieldComponent=this.activeField)},async onFinish(e,t){return this.isEditMode()?this.update(t):this.create(e,t)},async create(e,t){let a=Fn["a"].resolvePerson(t);a="true"==this.presets.nationalIDStatus?this.appendNationalIDData(a):a;const n=this.resolvePersonAttributes(t),o=new Mn;await o.registerPatient(a,n);const i=o.getPersonID();if("true"==this.presets.nationalIDStatus){const e=await Et["a"].findByID(i);this.patient=new Et["a"](e),await this.patient.updateMWNationalId(this.presets.malawiNationalID)}if(this.app.onRegisterPatient){const e=await this.app.onRegisterPatient(i,a,n,this.$router,this.$route);if(e)return}if("Yes"===a.relationship)return this.$router.push("/guardian/registration/"+i);await Object(St["b"])(i,this.$router)},appendNationalIDData(e){return Object.assign(e,{given_name:this.presets.given_name,family_name:this.presets.family_name,gender:this.presets.gender,birthdate:this.presets.birthdate,birthdate_estimated:!1})},async update(e){const t=Fn["a"].resolvePerson(e),a=new Mn;a.setPersonID(this.editPerson),await a.updatePerson(t);for(const n in t)n in this.editPersonData&&(this.editPersonData[n]=t[n]);if(!this.personAttribute)return this.fieldComponent="edit_user";this.$router.back()},editConditionCheck(e=[]){return!(this.isEditMode()&&!e.includes(this.activeField))},async confirmPatient(){if(this.ddeInstance.isEnabled()&&(!this.patient.getDocID()||this.patient.getDocID()&&this.patient.getNationalID().match(/unknown/i)))try{await this.patient.assignNpid(),await this.patient.printNationalID(),await Object(Yt["a"])(300)}catch(e){Object(j["c"])("Failed to assign new NPID: "+e)}this.$router.push("/patients/confirm?person_id="+this.patient.getID())},resolvePersonAttributes(e){return Object.values(e).filter(e=>Object(Se["isPlainObject"])(e)&&"personAttributes"in e).map(({personAttributes:e})=>e)},mapToOption(e){return e.map(e=>({label:e,value:e}))},givenNameField(){const e=Fn["a"].getGivenNameField();return e.condition=()=>this.editConditionCheck(["given_name"])&&"true"!=this.presets.nationalIDStatus,e.defaultValue=()=>this.presets.given_name,e},familyNameField(){const e=Fn["a"].getFamilyNameField();return e.condition=()=>this.editConditionCheck(["family_name"])&&"true"!=this.presets.nationalIDStatus,e.defaultValue=()=>this.presets.family_name,e},genderField(){const e="ANC"===this.app.applicationName,t="CxCa"===this.app.applicationName,a=Fn["a"].getGenderField();return a.requireNext=this.isEditMode(),a.defaultValue=()=>this.presets.gender,a.condition=()=>!(!this.isEditMode()&&(e||t))&&(this.editConditionCheck(["gender"])&&"true"!=this.presets.nationalIDStatus),!e&&!t||this.isEditMode()||(a.defaultOutput=()=>({label:"Female",value:"F"}),a.defaultComputedOutput=()=>({person:"F"})),a.beforeNext=async e=>{const t=e.value,a=this.presets.gender;if(this.isEditMode()&&t!=a){const e=await Object(Rt["a"])("Warning",`Changing gender from ${a} to ${t}`,"This change will cause data inconsistency and will affect alot of Reports.",[{name:"Cancel",slot:"start"},{name:"Change gender",slot:"end",color:"danger"}]);return"Change gender"===e}return!0},a},dobFields(){const e=Fn["a"].getDobConfig();if(e.defaultValue=()=>this.presets.birthdate,e.condition=()=>this.editConditionCheck(["year_birth_date","month_birth_date","day_birth_date"]),"ANC"===this.app.applicationName){const t=Et["a"].getSessionDate(),a=12;e.maxDate=()=>Jt()(t).subtract(a,"years").format(le["a"])}return Object(Bn["b"])(e)},homeRegionField(){const e=Fn["a"].getHomeRegionField();return e.condition=()=>this.editConditionCheck(this.homeAddressAttributes),e},homeDistrictField(){const e=Fn["a"].getHomeDistrictField();return e.condition=()=>this.editConditionCheck(this.homeAddressAttributes),e},homeTAField(){const e=Fn["a"].getHomeTaField();return e.condition=e=>this.editConditionCheck(this.homeAddressAttributes)&&!e.home_region.label.match(/foreign/i),e},homeVillageField(){const e=Fn["a"].getHomeVillageField();return e.condition=e=>this.editConditionCheck(this.homeAddressAttributes)&&!e.home_region.label.match(/foreign/i),e},currentRegionField(){const e=Fn["a"].getCurrentRegionField();return e.condition=()=>this.editConditionCheck(this.currentAddressAttributes),e},currentDistrictField(){const e=Fn["a"].getCurrentDistrictField();return e.condition=()=>this.editConditionCheck(this.currentAddressAttributes),e},currentTAField(){const e=Fn["a"].getCurrentTAfield();return e.condition=e=>this.editConditionCheck(this.currentAddressAttributes)&&!e.current_region.label.match(/foreign/i),e},currentVillage(){const e=Fn["a"].getCurrentVillageField();return e.condition=e=>this.editConditionCheck(this.currentAddressAttributes)&&!e.current_region.label.match(/foreign/i),e},cellPhoneField(){const e=Fn["a"].getCellNumberField();return e.condition=()=>this.editConditionCheck(["cell_phone_number"]),e.defaultValue=()=>this.presets.cell_phone_number,e},facilityLocationField(){const e=Fn["a"].getFacilityLocationField();return e.condition=e=>["Drug Refill","External consultation"].includes(e.patient_type.value),e},landmarkFields(){const e=Fn["a"].getLandmarkFields();return e[0].condition=()=>this.editConditionCheck(["default_landmarks"]),e},patientTypeField(){return{id:"patient_type",helpText:"Type of patient",type:ma["b"].TT_SELECT,computedValue:e=>({person:e.value}),condition:()=>this.editConditionCheck(["patient_type"])&&"ART"===this.app.applicationName,validation:e=>Oa["a"].required(e),options:()=>Gt["a"].getPatientTypes()}},occupationField(){return{id:"occupation",helpText:"Occupation",type:ma["b"].TT_SELECT,computedValue:e=>({person:e.value}),condition:()=>this.editConditionCheck(["occupation"])&&this.isMilitarySite,validation:e=>Oa["a"].required(e),options:()=>this.mapToOption(["Military","Civilian"])}},regimentField(){return{id:"person_regiment_id",helpText:"Regiment ID",type:ma["b"].TT_TEXT,computedValue:({value:e})=>({personAttributes:{person_attribute_type_id:35,value:e}}),condition:e=>this.editConditionCheck(["person_regiment_id"])&&e.occupation&&e.occupation.value.match(/Military/i),validation:e=>Oa["a"].required(e)}},rankField(){return{id:"rank",helpText:"Rank",type:ma["b"].TT_SELECT,validation:e=>Oa["a"].required(e),computedValue:({value:e})=>({personAttributes:{person_attribute_type_id:36,value:e}}),condition:e=>this.editConditionCheck(["rank"])&&e.occupation&&e.occupation.value.match(/Military/i),options:()=>this.mapToOption(["First Lieutenant","Captain","Major","Lieutenant Colonel","Colonel","Brigadier General","Lieutenant General","General","Private","Corporal","Lance Corporal","Seargent","Staff Seargent","Warrant Officer class 1","Warrant Officer class 2"])}},dateJoinedMilitaryFields(){return Object(Bn["b"])({id:"person_date_joined_military",helpText:"Joined Military",required:!0,condition:e=>this.editConditionCheck(["year_person_date_joined_military","month_person_date_joined_military","day_person_date_joined_military"])&&e.occupation&&e.occupation.value.match(/Military/i),minDate:()=>le["b"].estimateDateFromAge(100),maxDate:()=>Rn["a"].getSessionDate(),estimation:{allowUnknown:!1},computeValue:e=>({date:e,personAttributes:{person_attribute_type_id:37,value:e}})})},relationshipField(){const e="CxCa"===this.app.applicationName,t="OPD"===this.app.applicationName,a="Registration"===this.app.applicationName;return{id:"relationship",helpText:"Register guardian?",type:ma["b"].TT_SELECT,computedValue:e=>({person:e.value}),condition:()=>this.editConditionCheck(["relationship"])&&!e&&!t&&!a,validation:e=>Oa["a"].required(e),options:()=>this.mapToOption(["Yes","No"])}},searchResultField(){return{id:"results",helpText:"Search results",type:ma["b"].TT_PERSON_RESULT_VIEW,dynamicHelpText:e=>"true"==this.presets.nationalIDStatus?`Search results for "${this.presets.given_name} ${this.presets.family_name} | ${this.presets.gender}"`:`Search results for "${e.given_name.value} ${e.family_name.value} | ${e.gender.label}"`,appearInSummary:()=>!1,condition:()=>!this.isEditMode(),validation:e=>Oa["a"].required(e),options:async e=>{let t;if("true"==this.presets.nationalIDStatus?(this.presets.gender="Male"==this.presets.gender?"M":"F",t={given_name:this.presets.given_name,family_name:this.presets.family_name,gender:this.presets.gender}):t={given_name:e.given_name.value,family_name:e.family_name.value,gender:e.gender.value},this.ddeInstance.isEnabled()){const e=await this.ddeInstance.searchDemographics(t);return e.map(e=>{const t=Fn["a"].getPersonAttributeOptions(e);return t.other.options.push({label:"Patient Type",value:e.patient_type}),t.other.options.push({label:"Doc ID",value:e.doc_id}),t})}const a=await Et["a"].search(t);return a.map(e=>Fn["a"].getPersonAttributeOptions(e))},config:{hiddenFooterBtns:["Clear","Next","Back"],footerBtns:[{name:"Edit Search",slot:"end",onClick:()=>{this.fieldComponent="given_name"}},{name:"New Patient",slot:"end",onClick:()=>{"true"!=this.presets.nationalIDStatus?this.fieldComponent="year_birth_date":this.fieldComponent="home_region"}},{name:"Continue",color:"success",slot:"end",state:{disabled:{default:()=>!0,onValue(e,t){return Object(Se["isEmpty"])(t.results)}}},onClick:e=>this.$router.push("/patients/confirm?person_id="+e.results.value)}]}}},possibleDuplicatesField(){let e={},t={};return{id:"possible_duplicates",helpText:"Possible Duplicate(s)",type:ma["b"].TT_PERSON_MATCH_VIEW,condition:async(a,n)=>!(!this.ddeInstance.isEnabled()||this.editPerson)&&(e=Fn["a"].resolvePerson(n),t=await this.ddeInstance.checkPotentialDuplicates(e),t.length>=1),options:async()=>{const a=e=>le["b"].toStandardHisDisplayFormat(e);return t.map(({score:t,person:n})=>{const o=`${n.given_name} ${n.family_name}`;return{label:o,value:n.patient_id,other:{score:100*t+"%",newPerson:e,foundPerson:n,comparisons:[["Name",`${e.given_name} ${e.family_name}`,`${n.given_name} ${n.family_name}`],["Gender",e.gender,n.gender],["Birthdate",a(e.birthdate),a(n.birthdate)],["Home District",e.home_district,n.home_district],["Home TA",e.home_traditional_authority,n.home_traditional_authority]]}}})},config:{hiddenFooterBtns:["Clear","Next"],footerBtns:[{name:"Not Duplicate",slot:"start",state:{visible:{default:()=>!1,onValue:(e,t)=>!Object(Se["isEmpty"])(t.possible_duplicates)}},onClick:()=>{this.fieldComponent="_NEXT_FIELD_"}},{name:"Confirm",slot:"end",color:"warning",state:{visible:{default:()=>!1,onValue:(e,t)=>!Object(Se["isEmpty"])(t.possible_duplicates)}},onClick:e=>{this.$router.push("/patients/confirm?person_id="+e.possible_duplicates.value)}}]}}},personIndexField(){return{id:"edit_user",helpText:"Edit Demographics",type:ma["b"].TT_TABLE_VIEWER,condition:()=>this.isEditMode(),options:async()=>{const e=e=>({name:"Edit",type:"button",action:()=>{this.activeField=e,this.fieldComponent=this.activeField}}),t=["Attributes","Values","Edit"],a=[["Given Name",this.editPersonData.given_name,e("given_name")],["Family Name",this.editPersonData.family_name,e("family_name")],["Gender",this.editPersonData.gender,e("gender")],["Birthdate",le["b"].toStandardHisDisplayFormat(this.editPersonData.birthdate),e("year_birth_date")],["Cell Phone Number",this.editPersonData.cell_phone_number,e("cell_phone_number")],["Home District",this.editPersonData.home_district,e("home_region")],["Home TA",this.editPersonData.home_traditional_authority,e("home_region")],["Home Village",this.editPersonData.home_village,e("home_region")],["Current district",this.editPersonData.current_district,e("current_region")],["Current T/A",this.editPersonData.current_traditional_authority,e("current_region")],["Landmark",this.editPersonData.landmark,e("default_landmarks")]],n={indexes:[],class:"his-empty-set-color"};return a.forEach((e,t)=>{Object(Ft["d"])(e[1])&&n.indexes.push(t)}),this.hasIncompleteData=n.indexes.length>=1,[{label:"",value:"",other:{rows:a,columns:t,rowColors:[n]}}]},config:{footerBtns:[{name:"Reassign",slot:"end",color:"success",state:{visible:{default:()=>!1,onload:()=>this.ddeInstance.isEnabled()&&this.ddeIsReassign&&!this.hasIncompleteData}},onClick:async()=>{try{await this.ddeInstance.reassignNpid(this.ddeDocID,this.editPerson),await this.ddeInstance.printNpid(),this.$router.push("/patients/confirm?person_id="+this.editPerson)}catch(e){Object(j["e"])(""+e)}}},{name:"Confirm",slot:"end",color:"warning",state:{visible:{onload:()=>!this.ddeIsReassign&&!this.hasIncompleteData}},onClick:async()=>this.confirmPatient()}],hiddenFooterBtns:["Clear","Next"]}}},patientRegistrationSummary(){return{id:"registration_summary",helpText:"Summary",type:ma["b"].TT_SUMMARY,condition:()=>!this.skipSummary,options:(e,t)=>this.buildRegistrationSummary(t),config:{hiddenFooterBtns:["Clear"]}}},buildRegistrationSummary(e){e=Object.keys(e).map((function(t,a){if(null!=e[t])return{label:t.replace(/_/g," ").replace(/(^\w|\s\w)/g,e=>e.toUpperCase()),value:"birth_date"==t?e[t]["date"]:e[t]["person"]}})),e=e.filter(e=>void 0!=e);const t=[{label:"Given Name",value:this.presets.given_name},{label:"Family Name",value:this.presets.family_name},{label:"Gender",value:this.presets.gender},{label:"Birthdate",value:this.presets.birthdate},{label:"Malawi National ID",value:this.presets.malawiNationalID}];return"true"==this.presets.nationalIDStatus&&(e=t.concat(e)),e}}});const $n=N()(Hn,[["render",En]]);var Un=$n;function qn(e,t,a,n,i,r){const s=Object(o["resolveComponent"])("his-standard-form");return Object(o["openBlock"])(),Object(o["createBlock"])(s,{onOnIndex:t[1]||(t[1]=t=>e.fieldComponent=""),skipSummary:!0,activeField:e.fieldComponent,fields:e.fields,onFinishAction:e.onFinish,cancelDestinationPath:"/patient/dashboard/"+e.patientData.id},null,8,["activeField","fields","onFinishAction","cancelDestinationPath"])}class Gn extends de["e"]{constructor(){super()}static voidRelation(e,t,a){return de["e"].void(`people/${e}/relationships/${t}`,{reason:a})}static async amendRelation(e,t,a,n){return await Gn.voidRelation(e,a,"Updating guardian relationship"),Gn.createRelation(e,t,n)}static getRelations(){return super.getJson("types/relationships")}static createRelation(e,t,a){return super.postJson(`people/${e}/relationships`,{relationship_type_id:a,relation_id:t})}}var zn=a("7def"),Yn=Object(o["defineComponent"])({components:{HisStandardForm:fa["a"]},data:()=>({patientData:{},guardianData:{},fieldAction:"",fieldComponent:"",fields:[],form:{},redirectURL:"",activeField:"",currentAddressAttributes:["current_region","current_district","current_village","current_traditional_authority"],homeAddressAttributes:["home_region","home_district","home_traditional_authority","home_village"]}),watch:{$route:{async handler({params:e,query:t}){if(e.patient_id){const a=await Et["a"].findByID(e.patient_id);a&&(this.patientData=Fn["a"].mapPersonData(a.person),t.edit_guardian&&(this.fieldAction="edit"),this.fields=this.getFields())}t.source&&(this.redirectURL=t.source)},immediate:!0,deep:!0}},methods:{getFields(){let e=[];return e.push(this.guardianSelection()),e.push(this.guardianIndex()),e.push(this.scanGuardian()),e.push(this.givenNameField()),e.push(this.familyNameField()),e.push(this.genderField()),e.push(this.searchResultField()),e=e.concat(this.dobFields()),e.push(this.homeRegionField()),e.push(this.homeDistrictField()),e.push(this.homeTAField()),e.push(this.homeVillageField()),e.push(this.currentRegionField()),e.push(this.currentDistrictField()),e.push(this.currentTAField()),e.push(this.currentVillage()),e=e.concat(this.landmarkFields()),e.push(this.cellPhoneField()),e.push(this.relationsField()),e},async onFinish(e,t){if(this.isEditMode()){if("relations"!=this.activeField){const e=new Mn;e.setPersonID(this.guardianData.id),await e.updatePerson(Fn["a"].resolvePerson(t)),Object.keys(t).forEach(e=>{var a;e in this.guardianData&&(this.guardianData[e]=(null===(a=t[e])||void 0===a?void 0:a.date)||t[e].person)})}else{var a;if(null!==(a=this.guardianData)&&void 0!==a&&a.relation){const t=await Gn.amendRelation(this.patientData.id,this.guardianData.id,this.guardianData.relation.relationship_id,e.relations.other.relationship_type_id);t&&(this.guardianData.relation=t)}}this.fieldComponent="guardian_index"}else if(this.isSameAsPatient(t))Object(j["e"])("Guardian cannot be the same patient");else{let a=-1;if(this.isRegistrationMode()){const e=new Mn;await e.registerGuardian(Fn["a"].resolvePerson(t)),a=e.getPersonID()}else a=this.guardianData.id;await Gn.createRelation(this.patientData.id,a,e.relations.other.relationship_type_id),this.redirectURL?this.$router.push({name:this.redirectURL}):this.$route.query.edit_guardian?this.fieldComponent="select_guardian":await Object(St["b"])(this.patientData.id,this.$router,this.$route)}},isEditMode(){return"edit"===this.fieldAction},isSearchMode(){return["Search","Registration"].includes(this.fieldAction)},isRegistrationMode(){return"Registration"===this.fieldAction},canEdit(e,t=!0,a=!0){return this.isEditMode()?e.includes(this.activeField)&&a:t},isSameAsPatient(e){let t="",a="",n="";return this.isRegistrationMode()?(t=le["b"].toStandardHisDisplayFormat(e.birth_date.date),a=e.given_name.person&&e.family_name.person,n=e.gender.person):(t=this.guardianData.birth_date,a=this.guardianData.name,n=this.guardianData.gender),a.toLowerCase()===this.patientData.name.toLowerCase()&&t===this.patientData.birth_date&&n===this.patientData.gender},guardianSelection(){return{id:"select_guardian",helpText:"Select guardian to edit/view",type:ma["b"].TT_SELECT,condition:()=>this.isEditMode(),validation:e=>Oa["a"].required(e),options:async()=>{const e=await zn["a"].getRelationships(this.patientData.id);if(!Object(Se["isEmpty"])(e))return e.map(e=>{const t=Fn["a"].mapPersonData(e.relation);return{label:`${t.name} (${e.type.b_is_to_a})`,value:e.relation.person_id,other:{relations:e,details:t}}});{await Object(Yt["a"])(450);const e=await Object(Rt["a"])("Patient has no guardians","","Select option to proceed",[{name:"Cancel",slot:"start",color:"danger"},{name:"Register new",slot:"start",color:"success"}]);"Register new"===e?(this.guardianData={},this.fieldAction="Registration",this.fieldComponent="scan"):this.$router.back()}return[]},config:{footerBtns:[{name:"New Guardian",slot:"end",color:"primary",onClick:()=>{this.guardianData={},this.fieldAction="Registration",this.fieldComponent="scan"}}]}}},getDefaultVal(e){try{return this.guardianData[e]}catch(t){return""}},guardianIndex(){return{id:"guardian_index",helpText:"Guardian details",type:ma["b"].TT_TABLE_VIEWER,condition:e=>e.select_guardian.value,options:e=>{this.guardianData&&this.guardianData.id!=e.select_guardian.value&&(this.guardianData={...e.select_guardian.other.details,relation:e.select_guardian.other.relations});const t=e=>({name:"Edit",type:"button",action:()=>{this.activeField=e,this.fieldComponent=this.activeField}}),a=[["Given Name",this.guardianData.given_name,t("given_name")],["Family Name",this.guardianData.family_name,t("family_name")],["Gender",this.guardianData.gender,t("gender")],["Birthdate",le["b"].toStandardHisDisplayFormat(this.guardianData.birth_date),t("year_birth_date")],["Cell Phone Number",this.guardianData.cell_phone_number,t("cell_phone_number")],["Home District",this.guardianData.home_district,t("home_region")],["Home TA",this.guardianData.home_traditional_authority,t("home_region")],["Home Village",this.guardianData.home_village,t("home_region")],["Current district",this.guardianData.current_district,t("current_region")],["Current T/A",this.guardianData.current_traditional_authority,t("current_region")],["Landmark",this.guardianData.landmark,t("default_landmarks")],["Relation",this.guardianData.relation.type.b_is_to_a,t("relations")]];return[{label:"",value:"",other:{rows:a}}]},config:{overrideDefaultFooterBtns:{nextBtn:{name:"Finish",slot:"end",color:"success",onClick:()=>this.fieldComponent="select_guardian"}},footerBtns:[{name:"Void Relation",slot:"start",color:"danger",onClick:async()=>{Zt(async e=>{await Gn.voidRelation(this.patientData.id,this.guardianData.relation.relationship_id,e),this.fieldComponent="select_guardian"})}}],hiddenFooterBtns:["Clear","Back"]}}},givenNameField(){const e=Fn["a"].getGivenNameField();return e.helpText="Guardian First name",e.defaultValue=()=>this.getDefaultVal(e.id),e.condition=()=>this.canEdit([e.id],this.isSearchMode()),e},familyNameField(){const e=Fn["a"].getFamilyNameField();return e.helpText="Guardian Last name",e.defaultValue=()=>this.getDefaultVal(e.id),e.condition=()=>this.canEdit([e.id],this.isSearchMode()),e},genderField(){const e=Fn["a"].getGenderField();return e.defaultValue=()=>this.getDefaultVal(e.id),e.condition=()=>this.canEdit([e.id],this.isSearchMode()),e},dobFields(){const e=Fn["a"].getDobConfig();return e.defaultValue=()=>this.getDefaultVal("birth_date"),e.condition=()=>this.canEdit(["year_birth_date","month_birth_date","day_birth_date"],this.isRegistrationMode()),Object(Bn["b"])(e)},homeRegionField(){const e=Fn["a"].getHomeRegionField();return e.condition=()=>this.canEdit(this.homeAddressAttributes,this.isRegistrationMode()),e},homeDistrictField(){const e=Fn["a"].getHomeDistrictField();return e.condition=()=>this.canEdit(this.homeAddressAttributes,this.isRegistrationMode()),e},homeTAField(){const e=Fn["a"].getHomeTaField();return e.condition=e=>this.canEdit(this.homeAddressAttributes,this.isRegistrationMode()&&!e.home_region.label.match(/foreign/i),!e.home_region.label.match(/foreign/i)),e},homeVillageField(){const e=Fn["a"].getHomeVillageField();return e.condition=e=>this.canEdit(this.homeAddressAttributes,this.isRegistrationMode()&&!e.home_region.label.match(/foreign/i),!e.home_region.label.match(/foreign/i)),e},currentRegionField(){const e=Fn["a"].getCurrentRegionField();return e.condition=()=>this.canEdit(this.currentAddressAttributes,this.isRegistrationMode()),e},currentDistrictField(){const e=Fn["a"].getCurrentDistrictField();return e.condition=()=>this.canEdit(this.currentAddressAttributes,this.isRegistrationMode()),e},currentTAField(){const e=Fn["a"].getCurrentTAfield();return e.condition=e=>this.canEdit(this.currentAddressAttributes,this.isRegistrationMode()&&!e.current_region.label.match(/foreign/i),!e.current_region.label.match(/foreign/i)),e},currentVillage(){const e=Fn["a"].getCurrentVillageField();return e.condition=e=>this.canEdit(this.currentAddressAttributes,this.isRegistrationMode()&&!e.current_region.label.match(/foreign/i),!e.current_region.label.match(/foreign/i)),e},cellPhoneField(){const e=Fn["a"].getCellNumberField();return e.condition=()=>this.canEdit([e.id],this.isRegistrationMode()),e},landmarkFields(){const e=Fn["a"].getLandmarkFields(),t=e[0].proxyID||e[0].id;return e[0].defaultValue=()=>this.getDefaultVal(t),e[0].condition=()=>this.canEdit([t],this.isRegistrationMode()),e},relationsField(){return{id:"relations",helpText:"Select relationship type",type:ma["b"].TT_RELATION_SELECTION,defaultValue:()=>this.getDefaultVal("relations"),validation:e=>Oa["a"].required(e),condition:()=>this.canEdit(["relations"]),onload:e=>{if(e.patient=this.patientData,this.isRegistrationMode()){const t=Fn["a"].resolvePerson(e.cdata);e.guardian={name:`${t.given_name} ${t.family_name}`,birth_date:le["b"].toStandardHisDisplayFormat(t.birthdate),home_address:`${t.home_district} ${t.home_traditional_authority}`}}else e.guardian=this.guardianData},options:async()=>{const e=await Gn.getRelations();return e.map(e=>({label:e.b_is_to_a,value:e.description,other:e}))},config:{hiddenFooterBtns:["Clear"]}}},scanGuardian(){return{id:"scan",helpText:"Scan or Register Guardian",type:ma["b"].TT_BARCODE,requireNext:!1,condition:()=>!this.isEditMode(),onValue:async e=>{const t=await Et["a"].findByNpid(e);return Object(Se["isEmpty"])(t)||(this.guardianData=Fn["a"].mapPersonData(t[0].person),this.fieldComponent="relations",this.fieldAction="Scan"),!1},config:{hiddenFooterBtns:["Clear","Next","Back"],footerBtns:[{name:"Find or Register Guardian",color:"success",slot:"end",onClick:()=>{this.fieldAction="Search",this.fieldComponent="given_name"}}]}}},searchResultField(){return{id:"results",helpText:"Search results",type:ma["b"].TT_PERSON_RESULT_VIEW,dynamicHelpText:e=>`Search results for \n                "${e.given_name.value} ${e.family_name.value} | ${e.gender.label}"\n                `,appearInSummary:()=>!1,condition:()=>this.isSearchMode(),validation:e=>Oa["a"].required(e),options:async e=>{const t=await Et["a"].search({given_name:e.given_name.value,family_name:e.family_name.value,gender:e.gender.value});return t.map(e=>Fn["a"].getPersonAttributeOptions(e))},config:{hiddenFooterBtns:["Clear","Next","Back"],footerBtns:[{name:"Edit Search",slot:"end",onClick:()=>{this.fieldAction="Search",this.fieldComponent="given_name"}},{name:"New Guardian",slot:"end",onClick:()=>{this.fieldAction="Registration",this.fieldComponent="year_birth_date"}},{name:"Continue Guardian",color:"success",slot:"end",state:{disabled:{default:()=>!0,onValue(e,t){return Object(Se["isEmpty"])(t.results)}}},onClick:e=>{this.guardianData=Fn["a"].mapPersonData(e.results.other.person.person),this.fieldComponent="relations",this.fieldAction="Search"}}]}}}}});const Wn=N()(Yn,[["render",qn]]);var Kn=Wn;const Xn=Object(o["withScopeId"])("data-v-199121a4");Object(o["pushScopeId"])("data-v-199121a4");const Jn={class:"large-card"},Qn=Object(o["createVNode"])("h3",null," Patients: ",-1),Zn={class:"large-card"},eo=Object(o["createVNode"])("h3",null," Details: ",-1),to=Object(o["createTextVNode"])(" Cancel "),ao=Object(o["createTextVNode"])(" New Search "),no=Object(o["createTextVNode"])(" New Patient "),oo=Object(o["createTextVNode"])(" Continue ");Object(o["popScopeId"])();const io=Xn((function(e,t,a,n,i,r){const s=Object(o["resolveComponent"])("result-card"),c=Object(o["resolveComponent"])("ion-col"),l=Object(o["resolveComponent"])("ion-row"),d=Object(o["resolveComponent"])("ion-img"),u=Object(o["resolveComponent"])("ion-avatar"),p=Object(o["resolveComponent"])("ion-label"),h=Object(o["resolveComponent"])("ion-item"),b=Object(o["resolveComponent"])("ion-list"),m=Object(o["resolveComponent"])("ion-content"),g=Object(o["resolveComponent"])("ion-button"),f=Object(o["resolveComponent"])("ion-toolbar"),O=Object(o["resolveComponent"])("ion-footer"),j=Object(o["resolveComponent"])("ion-page");return Object(o["openBlock"])(),Object(o["createBlock"])(j,null,{default:Xn(()=>[Object(o["createVNode"])(m,null,{default:Xn(()=>[Object(o["createVNode"])(l,null,{default:Xn(()=>[Object(o["createVNode"])(c,null,{default:Xn(()=>[Object(o["createVNode"])(s,{title:e.resultTitle,subtitle:e.resultSubtitle,icon:e.genderIcon},null,8,["title","subtitle","icon"])]),_:1})]),_:1}),Object(o["createVNode"])(l,null,{default:Xn(()=>[Object(o["createVNode"])(c,{size:"5"},{default:Xn(()=>[Object(o["createVNode"])("div",Jn,[Qn,Object(o["createVNode"])(b,null,{default:Xn(()=>[(Object(o["openBlock"])(!0),Object(o["createBlock"])(o["Fragment"],null,Object(o["renderList"])(e.results,(t,a)=>(Object(o["openBlock"])(),Object(o["createBlock"])(h,{button:"",key:a,detail:!0,color:e.isActive(t.other)?"light":"",onClick:a=>e.onselect(t.other)},{default:Xn(()=>[Object(o["createVNode"])(u,null,{default:Xn(()=>[Object(o["createVNode"])(d,{src:"/assets/images/avatar.svg"})]),_:1}),Object(o["createVNode"])(p,null,{default:Xn(()=>[Object(o["createTextVNode"])(Object(o["toDisplayString"])(t.label),1)]),_:2},1024)]),_:2},1032,["color","onClick"]))),128))]),_:1})])]),_:1}),Object(o["createVNode"])(c,{size:"7"},{default:Xn(()=>[Object(o["createVNode"])("div",Zn,[eo,Object(o["createVNode"])(b,null,{default:Xn(()=>[(Object(o["openBlock"])(!0),Object(o["createBlock"])(o["Fragment"],null,Object(o["renderList"])(e.demographics,(e,t)=>(Object(o["openBlock"])(),Object(o["createBlock"])(h,{key:t,inset:"none"},{default:Xn(()=>[Object(o["createVNode"])(p,null,{default:Xn(()=>[Object(o["createTextVNode"])(Object(o["toDisplayString"])(e.label),1)]),_:2},1024),Object(o["createVNode"])(p,{slot:"end"},{default:Xn(()=>[Object(o["createTextVNode"])(Object(o["toDisplayString"])(e.value),1)]),_:2},1024)]),_:2},1024))),128))]),_:1})])]),_:1})]),_:1})]),_:1}),Object(o["createVNode"])(O,null,{default:Xn(()=>[Object(o["createVNode"])(f,{color:"dark"},{default:Xn(()=>[Object(o["createVNode"])(g,{color:"danger",size:"large","router-link":"/"},{default:Xn(()=>[to]),_:1}),Object(o["createVNode"])(g,{color:"primary",size:"large","router-link":"/search_patient",slot:"end"},{default:Xn(()=>[ao]),_:1}),Object(o["createVNode"])(g,{onClick:e.onRegisterAsNew,color:"primary",size:"large",slot:"end"},{default:Xn(()=>[no]),_:1},8,["onClick"]),e.isPersonSelected?(Object(o["openBlock"])(),Object(o["createBlock"])(g,{key:0,color:"success",size:"large","router-link":e.confirmationPageUrl,slot:"end"},{default:Xn(()=>[oo]),_:1},8,["router-link"])):Object(o["createCommentVNode"])("",!0)]),_:1})]),_:1})]),_:1})}));function ro(e,t,a,n,i,r){const s=Object(o["resolveComponent"])("ion-icon"),c=Object(o["resolveComponent"])("ion-card-title"),l=Object(o["resolveComponent"])("ion-card-header"),d=Object(o["resolveComponent"])("ion-card");return Object(o["openBlock"])(),Object(o["createBlock"])(d,null,{default:Object(o["withCtx"])(()=>[Object(o["createVNode"])(l,null,{default:Object(o["withCtx"])(()=>[Object(o["createVNode"])(c,null,{default:Object(o["withCtx"])(()=>[Object(o["createVNode"])("h2",null,Object(o["toDisplayString"])(e.title),1),Object(o["createVNode"])(s,{icon:e.icon,size:"medium"},null,8,["icon"]),Object(o["createTextVNode"])(" "+Object(o["toDisplayString"])(e.subtitle),1)]),_:1})]),_:1})]),_:1})}var so=Object(o["defineComponent"])({name:"HisResultCard",components:{IonCard:D["f"],IonIcon:D["r"],IonCardTitle:D["j"],IonCardHeader:D["h"]},props:{title:{required:!0,type:String},subtitle:{required:!0,type:String},icon:{required:!1}}});const co=N()(so,[["render",ro]]);var lo=co,uo=Object(o["defineComponent"])({components:{ResultCard:lo,IonLabel:D["x"],IonRow:D["H"],IonPage:D["D"],IonFooter:D["o"],IonContent:D["n"],IonButton:D["d"],IonCol:D["m"],IonToolbar:D["Q"],IonList:D["y"],IonItem:D["w"]},data:()=>({person:se["D"],gname:"",fname:"",gender:"",results:[],selectedPerson:{},isPersonSelected:!1,demographics:[]}),computed:{resultTitle(){return this.results.length+" Result(s) found"},resultSubtitle(){return`Search term "${this.gname} ${this.fname}"`},genderIcon(){return"M"===this.gender?se["y"]:se["S"]},confirmationPageUrl(){return"/patients/confirm?person_id="+this.selectedPerson.getID()}},watch:{$route:{async handler({query:e}){this.selectedPerson={},this.isPersonSelected=!1,this.gname=e.given_name,this.fname=e.family_name,this.gender=e.gender,this.results=await this.fetchResults(this.gname,this.fname,this.gender),this.showDetails({})},deep:!0,immediate:!0}},methods:{async fetchResults(e,t,a){const n=await Et["a"].search({given_name:e,family_name:t,gender:a});return n.map(e=>{const t=new Et["a"](e);return{label:t.getPatientInfoString(),value:t.getID(),other:t}})},async onRegisterAsNew(){const e=await Object(j["a"])("Do you want to register person as new patient?",{header:`Register ${this.gname} ${this.fname}`});if(e){const e="M"===this.gender?"Male":"Female";this.$router.push(`/patient/registration?given_name=${this.gname}&family_name=${this.fname}&gender=${e}`)}},isActive(e){try{return e.getID()===this.selectedPerson.getID()}catch(t){return!1}},onselect(e){this.isPersonSelected=!0,this.selectedPerson=e,this.showDetails(e)},getPatientProp(e,t){return t in e?e[t]():"-"},showDetails(e){this.demographics=[{label:"Patient ID",value:this.getPatientProp(e,"getNationalID")},{label:"Name",value:this.getPatientProp(e,"getFullName")},{label:"Gender",value:this.getPatientProp(e,"getGender")},{label:"Birthdate",value:this.getPatientProp(e,"getBirthdate")},{label:"Home District",value:this.getPatientProp(e,"getHomeDistrict")},{label:"Home Village",value:this.getPatientProp(e,"getHomeVillage")},{label:"Current District",value:this.getPatientProp(e,"getCurrentDistrict")},{label:"Current T/A",value:this.getPatientProp(e,"getCurrentTA")}]}}});a("ddd4");const po=N()(uo,[["render",io],["__scopeId","data-v-199121a4"]]);var ho=po;function bo(e,t,a,n,i,r){const s=Object(o["resolveComponent"])("his-standard-form");return Object(o["openBlock"])(),Object(o["createBlock"])(s,{fields:e.fields,activeField:e.activeField,onOnFinish:e.onFinish},null,8,["fields","activeField","onOnFinish"])}var mo=a("9441"),go=[{label:"Jan",value:1},{label:"Feb",value:2},{label:"Mar",value:3},{label:"Apr",value:4},{label:"May",value:5},{label:"Jun",value:6},{label:"Jul",value:7},{label:"Aug",value:8},{label:"Sep",value:9},{label:"Oct",value:10},{label:"Nov",value:11},{label:"Dec",value:12}],fo=Object(o["defineComponent"])({components:{HisStandardForm:mo["a"]},data:()=>({activeField:"",fields:[]}),created(){this.fields=this.getFields()},methods:{onFinish(e){console.log(e)},getFields(){return[{id:"dispense",helpText:"Dispensation",type:ma["b"].TT_DISPENSATION_INPUT,config:{toolbarInfo:[{label:"Name",value:"Test patient"},{label:"Gender",value:"Female"},{label:"Date Of Birth",value:"12/May/1994"}]},options:()=>[{label:"TDF300/3TC300/DTG50",value:0,other:{amounted_needed:30}},{label:"Cotrimoxazole (960mg)",value:0,other:{amounted_needed:30}},{label:"Rifapentine (150mg)",value:0,other:{amounted_needed:30}},{label:"INH or H (Isoniazid 100mg tablet)",value:0,other:{amounted_needed:30}}]},{id:"hello_world",helpText:"BeforeNext",type:ma["b"].TT_TEXT,beforeNext:()=>{const e=confirm("Do you want to continue");return e}},{id:"onvalue_hooks_multiple_select",helpText:"Dynamically toggling values",type:ma["b"].TT_MULTIPLE_SELECT,config:{showKeyboard:!1},onValueUpdate:(e,t)=>{if(t.isChecked&&"None"===t.label)return e.map(e=>("None"!=e.label&&(e.isChecked=!1),e));if("None"!=t.label&&t.isChecked){const t=Object(Se["findIndex"])(e,{label:"None"});e[t].isChecked=!1}if(t.isChecked&&"Disable"===t.label){const t=Object(Se["findIndex"])(e,{label:"Disable"});e[t].disabled=!0}if(t.isChecked&&"Enable"===t.label){const t=Object(Se["findIndex"])(e,{label:"Disable"});e[t].disabled=!1}return e},validation(e){return e?null:["Value is required"]},options:()=>[{label:"Foo",value:"Foo",description:{color:"danger",text:"Optional description"}},{label:"This is prechecked by default",value:"pre_checked"},{label:"Bar",value:"Bar",description:{color:"warning",text:"This has discription of different color"}},{label:"Enable",value:"enabled",description:{color:"secondary",text:"I only appear when checked",show:"onChecked"}},{label:"Disable",value:"disable"},{label:"None",value:"None"}]},{id:"name_field",helpText:"What is your name",type:ma["b"].TT_TEXT,validation(e){return e?null:["Value is required"]}},{id:"custom_btn",helpText:"Show custom button",type:ma["b"].TT_TEXT,config:{footerBtns:[{name:"Void",color:"danger",size:"large",visible:!1,slot:"",visibleOnStateChange:e=>1===e.index,onClick:()=>{alert("Record has been voided!")}},{name:"Custom Something",color:"primary",size:"large",visible:!1,slot:"end",visibleOnStateChange:e=>1===e.index,onClick:()=>{alert("YaY! Custom Button Clicked")}}]}},{id:"patient_chart",helpText:"Patient Chart",type:ma["b"].TT_WEIGHT_CHART,options:()=>[{label:"Patient weight",value:54,other:{labels:["10 Jan","11 June","8 Aug"],values:[65,38,89,57]}}]},{id:"hide_default_btns",helpText:"Default buttons have been hidden",type:ma["b"].TT_TEXT,config:{hiddenFooterBtns:["Clear","Cancel"]}},{id:"skip_next_field",helpText:"Skip Next Field with custom button",type:ma["b"].TT_TEXT,config:{footerBtns:[{name:"Skip Dates",color:"light",size:"large",visible:!1,slot:"end",visibleOnStateChange:e=>3===e.index,onClick:()=>{this.activeField="multiple_select"}}]}},{id:"year",helpText:"Year of birth",type:ma["b"].TT_NUMBER},{id:"month",helpText:"Month of birth",type:ma["b"].TT_SELECT,requireNext:!1,options:()=>go,config:{showKeyboard:!1}},{id:"day",helpText:"Day of birth",type:ma["b"].TT_MONTHLY_DAYS},{id:"multiple_select",helpText:"Select Multiple values",type:ma["b"].TT_MULTIPLE_SELECT,config:{showKeyboard:!1},validation(e){return e?null:["Value is required"]},options:()=>[{label:"Foo",value:"Foo",description:{color:"danger",text:"Optional description"}},{label:"This is prechecked by default",value:"pre_checked",isChecked:!0},{label:"Bar",value:"Bar",description:{color:"warning",text:"This has discription of different color"}},{label:"Baz",value:"Baz",description:{color:"secondary",text:"I only appear when checked",show:"onChecked"}},{label:"Bar",value:"Bar"}]},{id:"conditional_data",helpText:"Conditionally display next question",type:ma["b"].TT_SELECT,requireNext:!1,validation(e){return e?null:["Value is required"]},options:()=>[{label:"Show Games",value:"Show Games"},{label:"Show Music",value:"Show Music"}]},{id:"music_presentation",helpText:"Showing Music",type:ma["b"].TT_SELECT,validation(e){return e?null:["Value is required"]},condition(e){return"Show Music"===e.conditional_data.value},options:()=>[{label:"No Music",value:"No Music"}]},{id:"games_presentation",helpText:"Showing Games",type:ma["b"].TT_SELECT,validation(e){return e?null:["Value is required"]},condition(e){return"Show Games"===e.conditional_data.value},options:()=>[{label:"No Games",value:"No Games"}]},{id:"does_not_require_next",helpText:"Click on value to proceed",type:ma["b"].TT_SELECT,requireNext:!1,validation(e){return e?null:["Value is required"]},options:()=>[{label:"Duke",value:"Duke"},{label:"Dork",value:"Dork"}]},{id:"option_params",helpText:"Console.log Prop sent via options",type:ma["b"].TT_SELECT,options:e=>(console.log(e),[])},{id:"validated",helpText:"Value is Required before next",type:ma["b"].TT_SELECT,validation(e){return e?null:["Value is required"]},options:()=>[{label:"Fur",value:"Fur"},{label:"Fume",value:"Fame"}]}]}}});const Oo=N()(fo,[["render",bo]]);var jo=Oo;function _o(e,t,a,n,i,r){const s=Object(o["resolveComponent"])("his-standard-form");return Object(o["openBlock"])(),Object(o["createBlock"])(s,{fields:e.fields,onFinishAction:e.onFinish,skipSummary:!0,activeField:e.fieldComponent},null,8,["fields","onFinishAction","activeField"])}var vo=a("9ceb"),yo=a("fe70"),wo=Object(o["defineComponent"])({components:{HisStandardForm:fa["a"]},data:()=>({app:{},fields:[],fieldComponent:"",people:[],patient:{},assignNewARVNumber:!1,suggestedARVNumber:""}),created(){this.setApp(),this.fields=[this.getIdSelectionField(),this.getIdSearchField(),this.getARVDuplicatesField(),this.getReassignARVNumberField()]},methods:{getIdSelectionField(){return{id:"identifier_type",helpText:"Select identifier type",type:ma["b"].TT_SELECT,requireNext:!1,validation:e=>Oa["a"].required(e),options:async()=>{const e=this.app.programPatientIdentifiers?Object.values(this.app.programPatientIdentifiers):[],t=await Promise.all(e.map(async e=>!e.globalPropertySetting||await Ht["a"].isProp(e.globalPropertySetting)));return e.filter((e,a)=>e.useForSearch&&t[a]).map(e=>({label:e.name,value:e.id,other:e}))}}},getIdSearchField(){let e;return{id:"identifier",helpText:"Identifier",dynamicHelpText:e=>"Search by "+e.identifier_type.label,type:ma["b"].TT_TEXT,validation:t=>Oa["a"].validateSeries([()=>Oa["a"].required(t),()=>"function"===typeof e.validation?e.validation(t):null]),config:{casing:"uppercase",customKeyboard:[v["c"],[["Delete"]]],prependValue:t=>(e=t.identifier_type.other,e.prefix())}}},getARVDuplicatesField(){return{id:"arv_duplicates",helpText:"Duplicates",dynamicHelpText:e=>"Duplicate patients with identifer "+e.identifier.value,type:ma["b"].TT_DATA_TABLE,requireNext:!1,condition:async e=>await this.hasDuplicates(e)&&"ARV Number"===e.identifier_type.label,config:{hiddenFooterBtns:["Clear","Finish"],columns:()=>[[vo["a"].thTxt("First Name"),vo["a"].thTxt("Family Name"),vo["a"].thTxt("Gender"),vo["a"].thDate("Birthdate"),vo["a"].thTxt("Current Village"),vo["a"].thTxt("Actions",{colspan:2})]],rows:()=>this.people.map(e=>{const t=new Et["a"](e);return[vo["a"].td(t.getGivenName()),vo["a"].td(t.getFamilyName()),vo["a"].td(t.getGender()),vo["a"].tdDate(t.getBirthdate().toString()),vo["a"].td(t.getCurrentVillage()),vo["a"].tdBtn("Select patient",()=>this.selectPatient(t.getID()),{style:{fontSize:"12px",textTransform:"none"}},"warning"),vo["a"].tdBtn("Re-assign identifier",()=>this.reassignARVNumber(t),{style:{fontSize:"12px",textTransform:"none"}},"danger")]})}}},getReassignARVNumberField(){return{id:"arv_number",helpText:"ART number",type:ma["b"].TT_TEXT,computedValue:({value:e})=>e,validation:e=>Oa["a"].required(e),condition:e=>"arv_number"===this.fieldComponent&&this.assignNewARVNumber,defaultValue:()=>this.suggestedARVNumber,config:{initialKb:"0-9",prependValue:e=>e.identifier_type.other.prefix()}}},setApp(){const e=re["a"].getActiveApp();e&&(this.app=e)},async hasDuplicates(e){return this.people=await Et["a"].findByOtherID(e.identifier_type.value,e.identifier.value),this.people.length>1},selectPatient(e){this.$router.push("/patients/confirm?person_id="+e)},async reassignARVNumber(e){const t=await yo["e"].create({});t.present();const a=await Kt["a"].getNextSuggestedARVNumber();this.suggestedARVNumber=a.arv_number.replace(/^\D+|\s/g,""),this.patient=e,this.assignNewARVNumber=!0,this.fieldComponent="arv_number",t.dismiss()},async onFinish(e){if(Object(Se["isEmpty"])(this.people))Object(j["e"])("Client not found");else if(this.assignNewARVNumber&&!Object(Se["isEmpty"])(this.patient))try{await this.patient.updateARVNumber(e.arv_number.value),this.selectPatient(this.patient.getID())}catch(t){Object(j["e"])(""+t)}else{const e=new Et["a"](this.people[0]);this.selectPatient(e.getID())}}}});const No=N()(wo,[["render",_o]]);var Co=No;const Vo=Object(o["withScopeId"])("data-v-7eecfa92");Object(o["pushScopeId"])("data-v-7eecfa92");const Do=Object(o["createTextVNode"])("Visits"),ko=Object(o["createTextVNode"])("Patient"),To=Object(o["createTextVNode"])("Program"),Io=Object(o["createTextVNode"])("Dates"),xo={class:"mobile-component-view"},So=Object(o["createVNode"])("p",null,null,-1),Po={class:"his-card info-card-item"},Ao=Object(o["createTextVNode"])(" Today "),Eo={class:"his-card info-card-item"},Bo=Object(o["createTextVNode"])(" Session "),Ro={class:"his-card info-card-item"},Fo=Object(o["createTextVNode"])(" Current visit date "),Lo={class:"his-sm-text his-card"},Mo=Object(o["createTextVNode"])(" Today's Date: "),Ho={key:0},$o={key:1},Uo=Object(o["createTextVNode"])(" Next Task: "),qo=Object(o["createVNode"])("b",null,"NONE",-1),Go={key:0},zo={key:1},Yo=Object(o["createTextVNode"])(" Set Date: "),Wo={key:1},Ko=Object(o["createTextVNode"])(" Tasks "),Xo=Object(o["createTextVNode"])(" Printouts/Other "),Jo=Object(o["createTextVNode"])(" Applications "),Qo=Object(o["createTextVNode"])(" Finish ");Object(o["popScopeId"])();const Zo=Vo((function(e,t,a,n,i,r){const s=Object(o["resolveComponent"])("full-toolbar"),c=Object(o["resolveComponent"])("minimal-toolbar"),l=Object(o["resolveComponent"])("ion-icon"),d=Object(o["resolveComponent"])("ion-label"),u=Object(o["resolveComponent"])("ion-segment-button"),p=Object(o["resolveComponent"])("ion-segment"),h=Object(o["resolveComponent"])("ion-toolbar"),b=Object(o["resolveComponent"])("ion-button"),m=Object(o["resolveComponent"])("primary-card"),g=Object(o["resolveComponent"])("ion-col"),f=Object(o["resolveComponent"])("ion-row"),O=Object(o["resolveComponent"])("ion-grid"),j=Object(o["resolveComponent"])("ion-item"),_=Object(o["resolveComponent"])("ion-list"),v=Object(o["resolveComponent"])("visit-dates-card"),y=Object(o["resolveComponent"])("ion-chip"),w=Object(o["resolveComponent"])("ion-content"),N=Object(o["resolveComponent"])("ion-footer"),C=Object(o["resolveComponent"])("ion-page");return Object(o["openBlock"])(),Object(o["createBlock"])(C,null,{default:Vo(()=>[Object(o["createVNode"])(s,{class:"full-component-view",appVersion:e.appVersion,appIcon:e.app.applicationIcon,patientCardInfo:e.patientCardInfo,programCardInfo:e.programCardInfo},null,8,["appVersion","appIcon","patientCardInfo","programCardInfo"]),Object(o["createVNode"])(c,{class:"mobile-component-view",title:e.patientName,menuTitle:e.visitDatesTitle,menuItems:e.visitDates,appIcon:e.app.applicationIcon,onOnClickMenuItem:e.onActiveVisitDate},null,8,["title","menuTitle","menuItems","appIcon","onOnClickMenuItem"]),Object(o["createVNode"])(h,{class:"mobile-component-view"},{default:Vo(()=>[Object(o["createVNode"])(p,{value:e.activeTab,class:"ion-justify-content-center"},{default:Vo(()=>[Object(o["createVNode"])(u,{value:"1",onClick:t[1]||(t[1]=t=>e.activeTab=1)},{default:Vo(()=>[Object(o["createVNode"])(l,{icon:e.calendar},null,8,["icon"]),Object(o["createVNode"])(d,null,{default:Vo(()=>[Do]),_:1})]),_:1}),Object(o["createVNode"])(u,{value:"2",onClick:t[2]||(t[2]=t=>e.activeTab=2)},{default:Vo(()=>[Object(o["createVNode"])(l,{icon:e.person},null,8,["icon"]),Object(o["createVNode"])(d,null,{default:Vo(()=>[ko]),_:1})]),_:1}),Object(o["createVNode"])(u,{value:"3",onClick:t[3]||(t[3]=t=>e.activeTab=3)},{default:Vo(()=>[Object(o["createVNode"])(l,{icon:e.medical},null,8,["icon"]),Object(o["createVNode"])(d,null,{default:Vo(()=>[To]),_:1})]),_:1}),Object(o["createVNode"])(u,{value:"4",onClick:t[4]||(t[4]=t=>e.activeTab=4)},{default:Vo(()=>[Object(o["createVNode"])(l,{icon:e.time},null,8,["icon"]),Object(o["createVNode"])(d,null,{default:Vo(()=>[Io]),_:1})]),_:1})]),_:1},8,["value"])]),_:1}),e.nextTask.name?(Object(o["openBlock"])(),Object(o["createBlock"])(h,{key:0,class:"mobile-component-view"},{default:Vo(()=>[Object(o["createVNode"])(b,{style:{width:"100%"},color:"success",onClick:e.goToNextTask},{default:Vo(()=>[Object(o["createVNode"])(d,null,{default:Vo(()=>[Object(o["createVNode"])("b",null,"Next Task: "+Object(o["toDisplayString"])(e.nextTask.name.toUpperCase()),1)]),_:1}),Object(o["createVNode"])(l,{icon:e.alertCircle},null,8,["icon"])]),_:1},8,["onClick"])]),_:1})):Object(o["createCommentVNode"])("",!0),Object(o["createVNode"])(w,{id:"main-content"},{default:Vo(()=>[Object(o["createVNode"])("div",xo,[e.appHasCustomContent&&1===e.activeTab&&e.patientIsset?(Object(o["openBlock"])(),Object(o["createBlock"])(Object(o["resolveDynamicComponent"])(e.customDashboardContent),{key:0,patient:e.patient,visitDate:e.activeVisitDate,onOnProgramVisitDates:e.onProgramVisitDates},null,8,["patient","visitDate","onOnProgramVisitDates"])):Object(o["createCommentVNode"])("",!0),e.appHasCustomContent||1!==e.activeTab?Object(o["createCommentVNode"])("",!0):(Object(o["openBlock"])(),Object(o["createBlock"])(O,{key:1},{default:Vo(()=>[Object(o["createVNode"])(f,null,{default:Vo(()=>[(Object(o["openBlock"])(!0),Object(o["createBlock"])(o["Fragment"],null,Object(o["renderList"])(e.patientCards,(e,t)=>(Object(o["openBlock"])(),Object(o["createBlock"])(g,{size:"12",key:t},{default:Vo(()=>[Object(o["createVNode"])(m,{isEnabled:e.isEnabled,counter:e.items.length,icon:e.icon,title:e.label,titleColor:e.color,items:e.items,onClick:e.onClick},null,8,["isEnabled","counter","icon","title","titleColor","items","onClick"])]),_:2},1024))),128))]),_:1})]),_:1})),2===e.activeTab?(Object(o["openBlock"])(),Object(o["createBlock"])(_,{key:2},{default:Vo(()=>[(Object(o["openBlock"])(!0),Object(o["createBlock"])(o["Fragment"],null,Object(o["renderList"])(e.patientCardInfo,(e,t)=>(Object(o["openBlock"])(),Object(o["createBlock"])("div",{class:"his-card info-card-item",key:t},[Object(o["createVNode"])(j,{lines:"none"},{default:Vo(()=>[Object(o["createVNode"])(d,null,{default:Vo(()=>[Object(o["createTextVNode"])(Object(o["toDisplayString"])(e.label),1)]),_:2},1024),Object(o["createVNode"])(d,{slot:"end"},{default:Vo(()=>[Object(o["createVNode"])("b",null,Object(o["toDisplayString"])(e.value),1)]),_:2},1024)]),_:2},1024)]))),128))]),_:1})):Object(o["createCommentVNode"])("",!0),3===e.activeTab?(Object(o["openBlock"])(),Object(o["createBlock"])(_,{key:3},{default:Vo(()=>[(Object(o["openBlock"])(!0),Object(o["createBlock"])(o["Fragment"],null,Object(o["renderList"])(e.programCardInfo,(e,t)=>(Object(o["openBlock"])(),Object(o["createBlock"])("div",{class:"his-card info-card-item",key:t},[Object(o["createVNode"])(j,{lines:"none"},{default:Vo(()=>[Object(o["createVNode"])(d,null,{default:Vo(()=>[Object(o["createTextVNode"])(Object(o["toDisplayString"])(e.label),1)]),_:2},1024),Object(o["createVNode"])(d,{slot:"end"},{default:Vo(()=>[Object(o["createVNode"])("b",null,Object(o["toDisplayString"])(e.value),1)]),_:2},1024)]),_:2},1024),So]))),128))]),_:1})):Object(o["createCommentVNode"])("",!0),4===e.activeTab?(Object(o["openBlock"])(),Object(o["createBlock"])(_,{key:4},{default:Vo(()=>[Object(o["createVNode"])("div",Po,[Object(o["createVNode"])(j,{lines:"none"},{default:Vo(()=>[Object(o["createVNode"])(d,null,{default:Vo(()=>[Ao]),_:1}),Object(o["createVNode"])(d,{slot:"end"},{default:Vo(()=>[Object(o["createVNode"])("b",null,Object(o["toDisplayString"])(e.currentDate),1)]),_:1})]),_:1})]),Object(o["createVNode"])("div",Eo,[Object(o["createVNode"])(j,{lines:"none"},{default:Vo(()=>[Object(o["createVNode"])(d,null,{default:Vo(()=>[Bo]),_:1}),Object(o["createVNode"])(d,{slot:"end"},{default:Vo(()=>[Object(o["createVNode"])("b",null,Object(o["toDisplayString"])(e.sessionDate),1)]),_:1})]),_:1})]),Object(o["createVNode"])("div",Ro,[Object(o["createVNode"])(j,{lines:"none"},{default:Vo(()=>[Object(o["createVNode"])(d,null,{default:Vo(()=>[Fo]),_:1}),Object(o["createVNode"])(d,{slot:"end"},{default:Vo(()=>[Object(o["createVNode"])("b",null,Object(o["toDisplayString"])(e.activeVisitDate),1)]),_:1})]),_:1})])]),_:1})):Object(o["createCommentVNode"])("",!0)]),e.appHasCustomDashboard?Object(o["createCommentVNode"])("",!0):(Object(o["openBlock"])(),Object(o["createBlock"])(O,{key:0,class:"full-component-view grid-custom vertically-align"},{default:Vo(()=>[Object(o["createVNode"])(f,null,{default:Vo(()=>[Object(o["createVNode"])(g,{size:"2.4"},{default:Vo(()=>[Object(o["createVNode"])(v,{title:e.visitDatesTitle,items:e.visitDates,onOnselect:e.onActiveVisitDate},null,8,["title","items","onOnselect"])]),_:1}),Object(o["createVNode"])(g,{size:"9.6"},{default:Vo(()=>[Object(o["createVNode"])("div",Lo,[Object(o["createVNode"])(f,null,{default:Vo(()=>[Object(o["createVNode"])(g,{"size-md":"4","size-sm":"6"},{default:Vo(()=>[Mo,Object(o["createVNode"])("b",null,Object(o["toDisplayString"])(e.currentDate),1)]),_:1}),Object(o["createVNode"])(g,{"size-md":"4","size-sm":"6"},{default:Vo(()=>[e.nextTask.name?(Object(o["openBlock"])(),Object(o["createBlock"])("span",Ho,[Object(o["createVNode"])(y,{class:"next-task",color:"success",onClick:e.goToNextTask},{default:Vo(()=>[Object(o["createTextVNode"])("Next Task: "+Object(o["toDisplayString"])(e.nextTask.name.toUpperCase()),1)]),_:1},8,["onClick"])])):(Object(o["openBlock"])(),Object(o["createBlock"])("span",$o,[Uo,qo]))]),_:1}),Object(o["createVNode"])(g,{"size-md":"4","size-sm":"12"},{default:Vo(()=>[e.isBDE?(Object(o["openBlock"])(),Object(o["createBlock"])("span",Go,[Object(o["createVNode"])(y,{style:{marginTop:"-8px"},color:"danger",onClick:t[5]||(t[5]=t=>e.$router.push({name:"Session Date"}))},{default:Vo(()=>[Object(o["createVNode"])("b",null," BDE: "+Object(o["toDisplayString"])(e.sessionDate.toUpperCase()),1)]),_:1})])):(Object(o["openBlock"])(),Object(o["createBlock"])("span",zo,[Yo,Object(o["createVNode"])("b",null,Object(o["toDisplayString"])(e.sessionDate),1)]))]),_:1})]),_:1}),e.appHasCustomContent&&e.patientIsset?(Object(o["openBlock"])(),Object(o["createBlock"])(Object(o["resolveDynamicComponent"])(e.customDashboardContent),{key:0,patient:e.patient,visitDate:e.activeVisitDate,onOnProgramVisitDates:e.onProgramVisitDates},null,8,["patient","visitDate","onOnProgramVisitDates"])):Object(o["createCommentVNode"])("",!0),e.appHasCustomContent?Object(o["createCommentVNode"])("",!0):(Object(o["openBlock"])(),Object(o["createBlock"])("div",Wo,[Object(o["createVNode"])(f,null,{default:Vo(()=>[(Object(o["openBlock"])(!0),Object(o["createBlock"])(o["Fragment"],null,Object(o["renderList"])(e.patientCards,(e,t)=>(Object(o["openBlock"])(),Object(o["createBlock"])(g,{size:"6",key:t},{default:Vo(()=>[Object(o["createVNode"])(m,{isEnabled:e.isEnabled,counter:e.items.length,icon:e.icon,title:e.label,titleColor:e.color,items:e.items,onClick:e.onClick},null,8,["isEnabled","counter","icon","title","titleColor","items","onClick"])]),_:2},1024))),128))]),_:1})]))])]),_:1})]),_:1})]),_:1}))]),_:1}),Object(o["createVNode"])(N,null,{default:Vo(()=>[Object(o["createVNode"])(h,{color:"dark"},{default:Vo(()=>[Object(o["createVNode"])(b,{disabled:e.tasksDisabled,class:"full-component-view",color:"primary",size:"large",slot:"end",onClick:e.showTasks},{default:Vo(()=>[Object(o["createVNode"])(l,{icon:e.clipboardOutline},null,8,["icon"]),Ko]),_:1},8,["disabled","onClick"]),Object(o["createVNode"])(b,{class:"mobile-component-view",color:"primary",size:"medium",slot:"end",onClick:e.showTasks},{default:Vo(()=>[Object(o["createVNode"])(l,{icon:e.clipboard},null,8,["icon"])]),_:1},8,["onClick"]),Object(o["createVNode"])(b,{class:"full-component-view",color:"primary",size:"large",slot:"end",onClick:e.showOptions},{default:Vo(()=>[Object(o["createVNode"])(l,{icon:e.folderOutline},null,8,["icon"]),Xo]),_:1},8,["onClick"]),Object(o["createVNode"])(b,{class:"mobile-component-view",color:"primary",size:"medium",slot:"end",onClick:e.showOptions},{default:Vo(()=>[Object(o["createVNode"])(l,{icon:e.folder},null,8,["icon"])]),_:1},8,["onClick"]),Object(o["createVNode"])(b,{class:"full-component-view",color:"primary",size:"large",slot:"end",onClick:e.changeApp},{default:Vo(()=>[Object(o["createVNode"])(l,{icon:e.appsOutline},null,8,["icon"]),Jo]),_:1},8,["onClick"]),Object(o["createVNode"])(b,{class:"mobile-component-view",color:"primary",size:"medium",slot:"end",onClick:e.changeApp},{default:Vo(()=>[Object(o["createVNode"])(l,{icon:e.apps},null,8,["icon"])]),_:1},8,["onClick"]),Object(o["createVNode"])(b,{class:"full-component-view",color:"success",size:"large",slot:"end","router-link":"/"},{default:Vo(()=>[Object(o["createVNode"])(l,{icon:e.logOutOutline},null,8,["icon"]),Qo]),_:1}),Object(o["createVNode"])(b,{class:"mobile-component-view",color:"success",size:"medium",slot:"end",onClick:e.onCancel},{default:Vo(()=>[Object(o["createVNode"])(l,{icon:e.logOut},null,8,["icon"])]),_:1},8,["onClick"])]),_:1})]),_:1})]),_:1})}));a("13d5");const ei=Object(o["withScopeId"])("data-v-a346d65e"),ti=ei((function(e,t,a,n,i,r){const s=Object(o["resolveComponent"])("ion-badge"),c=Object(o["resolveComponent"])("ion-label"),l=Object(o["resolveComponent"])("ion-item"),d=Object(o["resolveComponent"])("ion-icon"),u=Object(o["resolveComponent"])("ion-chip"),p=Object(o["resolveComponent"])("ion-list");return Object(o["openBlock"])(),Object(o["createBlock"])("div",{class:["card",{inactive:!e.isEnabled,clickable:e.isEnabled}]},[Object(o["createVNode"])(l,{color:e.titleColor,lines:"none",class:"his-md-text title-card"},{default:ei(()=>[Object(o["createVNode"])(s,{slot:"start",class:"his-sm-text",color:"light"},{default:ei(()=>[Object(o["createVNode"])("b",null,Object(o["toDisplayString"])(e.counter),1)]),_:1}),Object(o["createVNode"])(c,null,{default:ei(()=>[Object(o["createTextVNode"])(Object(o["toDisplayString"])(e.title),1)]),_:1})]),_:1},8,["color"]),Object(o["createVNode"])(p,null,{default:ei(()=>[(Object(o["openBlock"])(!0),Object(o["createBlock"])(o["Fragment"],null,Object(o["renderList"])(e.items,(t,a)=>(Object(o["openBlock"])(),Object(o["createBlock"])(l,{key:a},{default:ei(()=>{var a;return[Object(o["createVNode"])(c,{class:null!==t&&void 0!==t&&null!==(a=t.other)&&void 0!==a&&a.wrapTxt?"ion-text-wrap":"",innerHTML:t.label},null,8,["class","innerHTML"]),t.value?(Object(o["openBlock"])(),Object(o["createBlock"])(u,{key:0,class:"his-sm-text",slot:"end"},{default:ei(()=>[Object(o["createVNode"])(d,{icon:e.icon},null,8,["icon"]),Object(o["createVNode"])(c,null,{default:ei(()=>[Object(o["createTextVNode"])(Object(o["toDisplayString"])(t.value),1)]),_:2},1024)]),_:2},1024)):Object(o["createCommentVNode"])("",!0)]}),_:2},1024))),128))]),_:1})],2)}));var ai=Object(o["defineComponent"])({components:{IonLabel:D["x"],IonList:D["y"],IonItem:D["w"],IonChip:D["l"],IonIcon:D["r"],IonBadge:D["c"]},data:()=>({time:se["N"]}),props:{isEnabled:{type:Boolean,default:()=>!0},counter:{type:Number,required:!1},icon:{type:Object},title:{type:String,required:!0},items:{type:Object},titleColor:{type:String,required:!1,default:()=>"#337ab7"}}});a("236c");const ni=N()(ai,[["render",ti],["__scopeId","data-v-a346d65e"]]);var oi=ni;const ii=Object(o["withScopeId"])("data-v-fb9fb750");Object(o["pushScopeId"])("data-v-fb9fb750");const ri={class:"card his-card"},si={class:"his-md-text header-section"},ci={class:"bottom-section"};Object(o["popScopeId"])();const li=ii((function(e,t,a,n,i,r){const s=Object(o["resolveComponent"])("ion-item"),c=Object(o["resolveComponent"])("ion-list");return Object(o["openBlock"])(),Object(o["createBlock"])("div",ri,[Object(o["createVNode"])("div",si,Object(o["toDisplayString"])(e.title),1),Object(o["createVNode"])("button",{class:"nav-btn nav-btn-top clickable",disabled:!e.showPrevButton,onClick:t[1]||(t[1]=(...t)=>e.goPrev(...t))},[Object(o["createVNode"])("img",{src:e.upbuttonImg,width:e.btnSize},null,8,["src","width"])],8,["disabled"]),Object(o["createVNode"])("div",{class:e.listAlignmentClass},[Object(o["createVNode"])(c,null,{default:ii(()=>[(Object(o["openBlock"])(!0),Object(o["createBlock"])(o["Fragment"],null,Object(o["renderList"])(e.activeListItems,(t,a)=>(Object(o["openBlock"])(),Object(o["createBlock"])(s,{class:"his-md-text",key:a,onClick:a=>e.onselect(t),detail:!0,color:e.isActive(t)?"primary":""},{default:ii(()=>[Object(o["createTextVNode"])(Object(o["toDisplayString"])(t.label),1)]),_:2},1032,["onClick","color"]))),128))]),_:1})],2),Object(o["createVNode"])("div",ci,[Object(o["createVNode"])("button",{class:"nav-btn nav-btn-bottom clickable",disabled:!e.showNextButton,onClick:t[2]||(t[2]=(...t)=>e.goNext(...t))},[Object(o["createVNode"])("img",{src:e.downbuttonImg,width:e.btnSize},null,8,["src","width"])],8,["disabled"])])])}));var di=Object(o["defineComponent"])({components:{IonList:D["y"],IonItem:D["w"]},props:{title:{type:String,default:()=>"Visits"},items:{type:Object,required:!0}},data:()=>({active:{},activeListItems:[],paginatedListItems:[],index:-1,perPage:6,btnSize:45}),computed:{listAlignmentClass(){return this.activeListItems&&this.activeListItems.length===this.perPage?"vertically-align":""},upbuttonImg(){return"/assets/images/drop-up-arrow.svg"},downbuttonImg(){return"/assets/images/drop-down-arrow.svg"},showNextButton(){return this.index+1<this.paginatedListItems.length},showPrevButton(){return this.index>=1}},watch:{items:{handler(e){if(!Object(Se["isEmpty"])(e)){this.index=0,this.paginatedListItems=Object(Se["chunk"])(e,this.perPage),this.activeListItems=this.paginatedListItems[0],this.active=this.activeListItems[0];for(const e in this.paginatedListItems){const t=Object(Se["findIndex"])(this.paginatedListItems[e],e=>!0===e.other.isActive,0);if(-1!=t){this.index=parseInt(e),this.activeListItems=this.paginatedListItems[e],this.active=this.activeListItems[t];break}}}},deep:!0,immediate:!0},index:{handler(e){this.activeListItems=this.paginatedListItems[e]},immediate:!0},active(e){this.$emit("onselect",e)}},methods:{onselect(e){this.active=e},isActive(e){return e.label===this.active.label},goNext(){const e=this.index+1;e<=this.paginatedListItems.length&&(this.index=e)},goPrev(){this.paginatedListItems.length>=1&&(this.index-=1)}}});a("2b07");const ui=N()(di,[["render",li],["__scopeId","data-v-fb9fb750"]]);var pi=ui,hi=a("71c3");const bi=Object(o["withScopeId"])("data-v-0f1e8a5b");Object(o["pushScopeId"])("data-v-0f1e8a5b");const mi=Object(o["createTextVNode"])(" Close ");Object(o["popScopeId"])();const gi=bi((function(e,t,a,n,i,r){const s=Object(o["resolveComponent"])("ion-title"),c=Object(o["resolveComponent"])("ion-toolbar"),l=Object(o["resolveComponent"])("ion-header"),d=Object(o["resolveComponent"])("task-card"),u=Object(o["resolveComponent"])("ion-col"),p=Object(o["resolveComponent"])("ion-row"),h=Object(o["resolveComponent"])("ion-grid"),b=Object(o["resolveComponent"])("ion-button"),m=Object(o["resolveComponent"])("ion-footer");return Object(o["openBlock"])(),Object(o["createBlock"])(o["Fragment"],null,[Object(o["createVNode"])(l,null,{default:bi(()=>[Object(o["createVNode"])(c,null,{default:bi(()=>[Object(o["createVNode"])(s,null,{default:bi(()=>[Object(o["createTextVNode"])(Object(o["toDisplayString"])(e.title),1)]),_:1})]),_:1})]),_:1}),Object(o["createVNode"])(h,{class:"selector"},{default:bi(()=>[Object(o["createVNode"])(p,null,{default:bi(()=>[(Object(o["openBlock"])(!0),Object(o["createBlock"])(o["Fragment"],null,Object(o["renderList"])(e.filteredItems,(t,a)=>(Object(o["openBlock"])(),Object(o["createBlock"])(u,{"size-lg":"4","size-sm":"6",key:a},{default:bi(()=>[Object(o["createVNode"])(d,{onClick:a=>e.doTask(t),title:t.name.toUpperCase(),description:t.description,taskCompleted:t.taskCompleted,taskDisabled:e.isDisabled(t.disabled),icon:e.img(t.icon)},null,8,["onClick","title","description","taskCompleted","taskDisabled","icon"])]),_:2},1024))),128))]),_:1})]),_:1}),Object(o["createVNode"])(m,null,{default:bi(()=>[Object(o["createVNode"])(c,null,{default:bi(()=>[Object(o["createVNode"])(b,{class:"close-btn",color:"danger",size:"large",onClick:e.closeModal,slot:"end"},{default:bi(()=>[mi]),_:1},8,["onClick"])]),_:1})]),_:1})],64)}));var fi=Object(o["defineComponent"])({components:{IonGrid:D["p"],IonRow:D["H"],IonCol:D["m"],TaskCard:Ve,IonFooter:D["o"],IonToolbar:D["Q"],IonButton:D["d"],IonHeader:D["q"],IonTitle:D["P"]},props:{title:{type:String,default:"Select Activity"},items:{type:Object,required:!0},taskParams:{type:Object,required:!1}},data:()=>({filteredItems:[]}),watch:{items:{async handler(e){if(e&&!Object(Se["isEmpty"])(e))for(const t in e){const a=e[t];a.globalProperty&&!await Ht["a"].isProp(a.globalProperty)||(a.condition&&!await a.condition(this.taskParams)||this.filteredItems.push(a))}},deep:!0,immediate:!0}},methods:{img(e){return Object(k["a"])(e)},isDisabled(e){return"function"===typeof e&&e(this.taskParams)},closeModal(){D["X"].dismiss({})},async doTask(e){if(this.isDisabled(e.disabled))return Object(j["e"])("This task is disabled");if("boolean"!==typeof e.taskCompleted||null===e||void 0===e||!e.taskCompleted||await Object(j["a"])("This task was already completed. Do you want to continue?")){if(e.action)e.action(this.taskParams,this.$router);else if(e.url)this.$router.push({path:e.url});else{var t;this.$router.push({name:e.id,params:{patient_id:null===(t=this.taskParams)||void 0===t?void 0:t.patient.patient_id}})}this.closeModal()}}}});a("6ba7");const Oi=N()(fi,[["render",gi],["__scopeId","data-v-0f1e8a5b"]]);var ji=Oi;const _i=Object(o["withScopeId"])("data-v-34154cb8");Object(o["pushScopeId"])("data-v-34154cb8");const vi={style:{float:"right"}},yi={class:"tb"},wi=Object(o["createTextVNode"])(" Void encounter"),Ni=Object(o["createTextVNode"])(" Close ");Object(o["popScopeId"])();const Ci=_i((function(e,t,a,n,i,r){const s=Object(o["resolveComponent"])("ion-title"),c=Object(o["resolveComponent"])("ion-toolbar"),l=Object(o["resolveComponent"])("ion-header"),d=Object(o["resolveComponent"])("ion-item"),u=Object(o["resolveComponent"])("ion-list"),p=Object(o["resolveComponent"])("ion-col"),h=Object(o["resolveComponent"])("his-basic-table"),b=Object(o["resolveComponent"])("ion-row"),m=Object(o["resolveComponent"])("ion-content"),g=Object(o["resolveComponent"])("ion-button"),f=Object(o["resolveComponent"])("ion-footer");return Object(o["openBlock"])(),Object(o["createBlock"])(o["Fragment"],null,[Object(o["createVNode"])(l,null,{default:_i(()=>[Object(o["createVNode"])(c,null,{default:_i(()=>[Object(o["createVNode"])(s,{class:"his-md-text"},{default:_i(()=>[Object(o["createVNode"])("span",null,Object(o["toDisplayString"])(e.title),1),Object(o["createVNode"])("span",vi,"Provider: "+Object(o["toDisplayString"])(e.active.provider),1)]),_:1})]),_:1})]),_:1}),Object(o["createVNode"])(m,null,{default:_i(()=>[Object(o["createVNode"])(b,null,{default:_i(()=>[Object(o["createVNode"])(p,{size:"4"},{default:_i(()=>[Object(o["createVNode"])(u,null,{default:_i(()=>[(Object(o["openBlock"])(!0),Object(o["createBlock"])(o["Fragment"],null,Object(o["renderList"])(e.encounters,(t,a)=>(Object(o["openBlock"])(),Object(o["createBlock"])(d,{class:"his-sm-text",key:a,color:t.other.id===e.active.id?"primary":"",detail:!0,onClick:()=>e.showDetails(t)},{default:_i(()=>[Object(o["createTextVNode"])(Object(o["toDisplayString"])(t.label),1)]),_:2},1032,["color","onClick"]))),128))]),_:1})]),_:1}),Object(o["createVNode"])(p,{size:"8"},{default:_i(()=>[Object(o["createVNode"])("div",yi,[Object(o["createVNode"])(h,{columns:e.active.columns,rows:e.active.rows},null,8,["columns","rows"])])]),_:1})]),_:1})]),_:1}),Object(o["createVNode"])(f,null,{default:_i(()=>[Object(o["createVNode"])(c,null,{default:_i(()=>[Object(o["createVNode"])(g,{color:"danger",onClick:e.voidActiveItem,disabled:!e.canVoid,size:"large"},{default:_i(()=>[wi]),_:1},8,["onClick","disabled"]),Object(o["createVNode"])(g,{onClick:e.closeModal,size:"large",slot:"end"},{default:_i(()=>[Ni]),_:1},8,["onClick"])]),_:1})]),_:1})],64)}));var Vi=a("a3a5"),Di=Object(o["defineComponent"])({components:{HisBasicTable:Vi["a"],IonButton:D["d"],IonToolbar:D["Q"],IonList:D["y"],IonFooter:D["o"],IonContent:D["n"],IonRow:D["H"],IonCol:D["m"],IonTitle:D["P"],IonHeader:D["q"],IonItem:D["w"]},data:()=>({active:{id:-1,name:"",provider:"",rows:[],columns:[]},encounters:[]}),computed:{canVoid(){return!Object(Se["isEmpty"])(this.active)&&!Object(Se["isEmpty"])(this.active.rows)}},watch:{items:{handler(e){Object(Se["isEmpty"])(e)||(this.encounters=e,this.showDetails(this.encounters[0]))},immediate:!0,deep:!0}},props:{title:{type:String,required:!0},items:{type:Object,required:!0}},methods:{closeModal(){D["X"].dismiss({})},removeEncounter(e){this.encounters=this.encounters.filter(t=>t.other.id!=e)},voidActiveItem(){Zt(async e=>{try{await this.active.onVoid(e),this.removeEncounter(this.active.id),this.active={},Object(Se["isEmpty"])(this.encounters)||this.showDetails(this.encounters[0])}catch(t){Object(j["c"])(t)}},"void-modal custom-modal-backdrop")},async showDetails(e){this.active.id=e.other.id,this.active.name=e.label,this.active.columns=e.other.columns,this.active.onVoid=e.other.onVoid,this.active.rows=await e.other.getRows(),this.active.provider=e.other.provider}}});a("d6f3");const ki=N()(Di,[["render",Ci],["__scopeId","data-v-34154cb8"]]);var Ti=ki;const Ii=Object(o["createTextVNode"])(" Close ");function xi(e,t,a,n,i,r){const s=Object(o["resolveComponent"])("ion-title"),c=Object(o["resolveComponent"])("ion-toolbar"),l=Object(o["resolveComponent"])("ion-header"),d=Object(o["resolveComponent"])("his-basic-table"),u=Object(o["resolveComponent"])("ion-content"),p=Object(o["resolveComponent"])("ion-button"),h=Object(o["resolveComponent"])("ion-footer");return Object(o["openBlock"])(),Object(o["createBlock"])(o["Fragment"],null,[Object(o["createVNode"])(l,null,{default:Object(o["withCtx"])(()=>[Object(o["createVNode"])(c,null,{default:Object(o["withCtx"])(()=>[Object(o["createVNode"])(s,{class:"his-md-text"},{default:Object(o["withCtx"])(()=>[Object(o["createTextVNode"])(Object(o["toDisplayString"])(e.title),1)]),_:1})]),_:1})]),_:1}),Object(o["createVNode"])(u,null,{default:Object(o["withCtx"])(()=>[Object(o["createVNode"])(d,{columns:e.columns,rows:e.rows},null,8,["columns","rows"])]),_:1}),Object(o["createVNode"])(h,null,{default:Object(o["withCtx"])(()=>[Object(o["createVNode"])(c,null,{default:Object(o["withCtx"])(()=>[Object(o["createVNode"])(p,{size:"large",onClick:e.closeModal,slot:"end"},{default:Object(o["withCtx"])(()=>[Ii]),_:1},8,["onClick"])]),_:1})]),_:1})],64)}var Si=Object(o["defineComponent"])({components:{HisBasicTable:Vi["a"],IonHeader:D["q"],IonToolbar:D["Q"],IonContent:D["n"],IonFooter:D["o"],IonButton:D["d"]},props:{title:{type:String,required:!0},columns:{type:Object,required:!0},rows:{type:Object,default:!0}},methods:{async closeModal(){await D["X"].dismiss({})}}});const Pi=N()(Si,[["render",xi]]);var Ai=Pi;function Ei(e,t,a,n,i,r){const s=Object(o["resolveComponent"])("ion-title"),c=Object(o["resolveComponent"])("ion-toolbar"),l=Object(o["resolveComponent"])("ion-header"),d=Object(o["resolveComponent"])("ion-label"),u=Object(o["resolveComponent"])("ion-item"),p=Object(o["resolveComponent"])("ion-list"),h=Object(o["resolveComponent"])("ion-content"),b=Object(o["resolveComponent"])("ion-menu"),m=Object(o["resolveComponent"])("ion-menu-button"),g=Object(o["resolveComponent"])("ion-buttons"),f=Object(o["resolveComponent"])("ion-thumbnail");return Object(o["openBlock"])(),Object(o["createBlock"])("div",null,[Object(o["createVNode"])(b,{"menu-id":"app-menu","content-id":"main-content",type:"overlay"},{default:Object(o["withCtx"])(()=>[Object(o["createVNode"])(l,null,{default:Object(o["withCtx"])(()=>[Object(o["createVNode"])(c,null,{default:Object(o["withCtx"])(()=>[Object(o["createVNode"])(s,null,{default:Object(o["withCtx"])(()=>[Object(o["createTextVNode"])(Object(o["toDisplayString"])(e.menuTitle),1)]),_:1})]),_:1})]),_:1}),Object(o["createVNode"])(h,null,{default:Object(o["withCtx"])(()=>[Object(o["createVNode"])(p,null,{default:Object(o["withCtx"])(()=>[(Object(o["openBlock"])(!0),Object(o["createBlock"])(o["Fragment"],null,Object(o["renderList"])(e.menuItems,(t,a)=>(Object(o["openBlock"])(),Object(o["createBlock"])(u,{key:a,detail:"true",class:"hydrated",onClick:a=>e.onClickItem(t)},{default:Object(o["withCtx"])(()=>[Object(o["createVNode"])(d,null,{default:Object(o["withCtx"])(()=>[Object(o["createTextVNode"])(Object(o["toDisplayString"])(t.label),1)]),_:2},1024)]),_:2},1032,["onClick"]))),128))]),_:1})]),_:1})]),_:1}),Object(o["createVNode"])(l,null,{default:Object(o["withCtx"])(()=>[Object(o["createVNode"])(c,null,{default:Object(o["withCtx"])(()=>[Object(o["createVNode"])(g,{slot:"start"},{default:Object(o["withCtx"])(()=>[Object(o["createVNode"])(m),Object(o["createVNode"])(s,null,{default:Object(o["withCtx"])(()=>[Object(o["createTextVNode"])(Object(o["toDisplayString"])(e.title),1)]),_:1})]),_:1}),Object(o["createVNode"])(g,{slot:"end"},{default:Object(o["withCtx"])(()=>[Object(o["createVNode"])(f,null,{default:Object(o["withCtx"])(()=>[Object(o["createVNode"])("img",{src:e.appIconPath,class:"logo",alt:"Master card logo"},null,8,["src"])]),_:1})]),_:1})]),_:1})]),_:1})])}var Bi=Object(o["defineComponent"])({name:"App",emits:["onClickMenuItem"],props:{title:String,menuTitle:String,menuItems:{type:Array,default:()=>[]},appIcon:{type:String,required:!0}},components:{IonContent:D["n"],IonItem:D["w"],IonList:D["y"],IonTitle:D["P"],IonMenu:D["A"],IonButtons:D["e"],IonMenuButton:D["B"],IonThumbnail:D["O"],IonToolbar:D["Q"],IonHeader:D["q"],IonLabel:D["x"]},setup(e,t){function a(e){D["W"].close("app-menu"),t.emit("onClickMenuItem",e)}return{onClickItem:a,appIconPath:Object(k["a"])(e.appIcon)}}});const Ri=N()(Bi,[["render",Ei]]);var Fi=Ri;function Li(e,t,a,n,i,r){const s=Object(o["resolveComponent"])("info-card"),c=Object(o["resolveComponent"])("ion-col"),l=Object(o["resolveComponent"])("icon-card"),d=Object(o["resolveComponent"])("ion-row"),u=Object(o["resolveComponent"])("ion-toolbar"),p=Object(o["resolveComponent"])("ion-header");return Object(o["openBlock"])(),Object(o["createBlock"])(p,{translucent:!0},{default:Object(o["withCtx"])(()=>[Object(o["createVNode"])(u,null,{default:Object(o["withCtx"])(()=>[Object(o["createVNode"])(d,null,{default:Object(o["withCtx"])(()=>[Object(o["createVNode"])(c,{size:e.hasProgramInfo?5:10},{default:Object(o["withCtx"])(()=>[Object(o["createVNode"])(s,{items:e.patientCardInfo},null,8,["items"])]),_:1},8,["size"]),e.hasProgramInfo?(Object(o["openBlock"])(),Object(o["createBlock"])(c,{key:0,size:"5"},{default:Object(o["withCtx"])(()=>[Object(o["createVNode"])(s,{items:e.programCardInfo},null,8,["items"])]),_:1})):Object(o["createCommentVNode"])("",!0),Object(o["createVNode"])(c,{size:"2"},{default:Object(o["withCtx"])(()=>[Object(o["createVNode"])(l,{version:e.appVersion,icon:e.logo},null,8,["version","icon"])]),_:1})]),_:1})]),_:1})]),_:1})}const Mi=Object(o["withScopeId"])("data-v-031d3d8c");Object(o["pushScopeId"])("data-v-031d3d8c");const Hi={class:"tool-bar-medium-card"};Object(o["popScopeId"])();const $i=Mi((function(e,t,a,n,i,r){const s=Object(o["resolveComponent"])("ion-icon");return Object(o["openBlock"])(),Object(o["createBlock"])("div",Hi,[(Object(o["openBlock"])(!0),Object(o["createBlock"])(o["Fragment"],null,Object(o["renderList"])(e.items,(t,a)=>(Object(o["openBlock"])(),Object(o["createBlock"])("div",{key:a},[e.hasIcon(t)?(Object(o["openBlock"])(),Object(o["createBlock"])(s,{key:0,icon:t.other.icon},null,8,["icon"])):Object(o["createCommentVNode"])("",!0),Object(o["createTextVNode"])(" "+Object(o["toDisplayString"])(t.label)+": ",1),Object(o["createVNode"])("b",null,Object(o["toDisplayString"])(t.value),1)]))),128))])}));var Ui=Object(o["defineComponent"])({name:"HisResultCard",components:{IonIcon:D["r"]},props:{icon:{required:!1},items:{type:Object,required:!0}},methods:{hasIcon(e){return"other"in e&&"icon"in e.other}}});a("eed0");const qi=N()(Ui,[["render",$i],["__scopeId","data-v-031d3d8c"]]);var Gi=qi,zi=Object(o["defineComponent"])({name:"PatientToolbar",components:{IonHeader:D["q"],IonToolbar:D["Q"],IonCol:D["m"],IonRow:D["H"],InfoCard:Gi,IconCard:fe},props:{appVersion:{type:String},patientCardInfo:{type:Array,required:!0},programCardInfo:{type:Array,required:!0},appIcon:{type:String,required:!0}},computed:{hasProgramInfo(){return this.programCardInfo.length>=1},logo(){return Object(k["a"])(this.appIcon)}}});const Yi=N()(zi,[["render",Li]]);var Wi=Yi,Ki=a("ec2a"),Xi=a("8158"),Ji=Object(o["defineComponent"])({components:{IonSegment:D["I"],IonSegmentButton:D["J"],FullToolbar:Wi,MinimalToolbar:Fi,VisitDatesCard:pi,PrimaryCard:oi,IonChip:D["l"],IonPage:D["D"],IonIcon:D["r"],IonFooter:D["o"],IonContent:D["n"],IonButton:D["d"],IonToolbar:D["Q"],IonGrid:D["p"],IonRow:D["H"],IonCol:D["m"]},setup(){return{time:se["N"],person:se["D"],calendar:se["j"],medical:se["z"],clipboard:se["p"],apps:se["c"],folder:se["u"],logOut:se["w"],clipboardOutline:se["q"],appsOutline:se["d"],folderOutline:se["v"],logOutOutline:se["x"],alertCircle:se["b"]}},data:()=>({activeTab:1,app:{},tasksDisabled:!0,dashboardComponent:{},isBDE:!1,currentDate:"",sessionDate:"",nextTask:{},patientId:0,programID:0,patient:{},patientProgram:{},patientCardInfo:[],programCardInfo:[],encounters:[],medications:[],visitDates:[],activeVisitDate:"",encountersCardItems:[],medicationCardItems:[],labOrderCardItems:[],alertCardItems:[],patientCards:[],appVersion:Kt["a"].getFullVersion(),sessionEncounters:[],savedEncounters:[],cardConfig:{labEnabled:!0,medicationsEnabled:!0,alertsEnabled:!0,activitiesEnabled:!0}}),computed:{patientIsset(){return!Object(Se["isEmpty"])(this.patient)},patientName(){return Object(Se["isEmpty"])(this.patient)?"N/A":this.patient.getFullName()},appHasCustomContent(){return!Pe.a.isEmpty(this.app.customPatientDashboardContentComponent)},customDashboardContent(){return this.app.customPatientDashboardContentComponent},visitDatesTitle(){return this.visitDates.length+" Visits"}},watch:{$route:{async handler({params:e}){e&&(this.patientId=parseInt(e.id),this.patientId&&await this.init())},deep:!0,immediate:!0},activeVisitDate(e){this.appHasCustomContent||this.loadCardData(e)}},mounted(){this.updateCards()},methods:{async init(){await re["a"].doAppManagementTasks(),this.app=re["a"].getActiveApp(),this.setProgramCardConfig(),this.patient=await this.fetchPatient(this.patientId);try{this.patientProgram=await Kt["a"].getProgramInformation(this.patientId)}catch(e){console.warn(e)}this.programCardInfo=await this.getProgramCardInfo(this.patientProgram)||[],this.patientCardInfo=this.getPatientCardInfo(this.patient),this.currentDate=le["b"].currentDisplayDate(),this.sessionDate=this.toDate(Kt["a"].getSessionDate()),this.isBDE=Kt["a"].isBDE()||!1,this.nextTask=await this.getNextTask(this.patientId),this.onProgramVisitDates(await this.getPatientVisitDates(this.patientId)),this.tasksDisabled=!1,this.cardConfig.alertsEnabled&&(this.alertCardItems=await this.getPatientAlertCardInfo()||[]),this.programID=Kt["a"].getProgramID(),await this.loadSavedEncounters(),this.updateCards()},setProgramCardConfig(){if(this.app.configDefaultPatientDashboardCards){const e=e=>"boolean"!==typeof e||e,t=this.app.configDefaultPatientDashboardCards;this.cardConfig.labEnabled=e(t.labEnabled),this.cardConfig.medicationsEnabled=e(t.medicationsEnabled),this.cardConfig.activitiesEnabled=e(t.activitiesEnabled),this.cardConfig.alertsEnabled=e(t.alertsEnabled)}},async showLoader(){const e=await D["V"].create({message:"Please wait....",backdropDismiss:!1});await e.present()},toDate(e){return le["b"].toStandardHisDisplayFormat(e)},toTime(e){return le["b"].toStandardHisTimeFormat(e)},async loadSavedEncounters(){try{this.savedEncounters=await Ki["a"].getSavedEncounters(this.patientId)}catch(e){console.warn("Program might not support saved encounters",e)}},async loadCardData(e){try{await this.showLoader(),this.cardConfig.activitiesEnabled&&(this.encounters=await Ki["a"].getEncounters(this.patientId,{date:e}),this.encountersCardItems=await this.getActivitiesCardInfo(this.encounters)),this.tasksDisabled=!1,D["V"].dismiss(),this.cardConfig.medicationsEnabled&&(this.medications=await hi["a"].getOrderByPatient(this.patientId,{start_date:e}),this.medicationCardItems=this.getMedicationCardInfo(this.medications)),this.cardConfig.labEnabled&&(this.labOrderCardItems=await this.getLabOrderCardInfo(e)),e===Kt["a"].getSessionDate()&&(this.sessionEncounters=this.encounters),this.updateCards()}catch(t){Object(j["c"])(""+t),this.tasksDisabled=!1,D["V"].getTop().then(e=>e?D["V"].dismiss():null)}},updateCards(){this.patientCards=[this.activitiesCard(),this.labOrderCard(),this.alertsCard(),this.medicationCard()]},activitiesCard(){return{label:"Activities",items:this.encountersCardItems,icon:se["O"],color:"primary",isEnabled:this.cardConfig.activitiesEnabled,onClick:()=>this.cardConfig.activitiesEnabled&&this.openModal(this.encountersCardItems,"Select Activities",Ti)}},labOrderCard(){const e="Lab Orders";return{label:e,color:"success",icon:se["O"],items:this.labOrderCardItems,isEnabled:this.cardConfig.labEnabled,onClick:()=>this.cardConfig.labEnabled&&this.$router.push("/art/encounters/lab/"+this.patient.getID())}},alertsCard(){return{label:"Alerts",color:"danger",icon:se["R"],items:this.alertCardItems,isEnabled:this.cardConfig.alertsEnabled,onClick:()=>{}}},medicationCard(){return{label:"Medications",color:"warning",icon:se["O"],items:this.medicationCardItems,isEnabled:this.cardConfig.medicationsEnabled,onClick:()=>{if(!this.cardConfig.medicationsEnabled)return;const e=["Medication","Start date","End date","Amount given"],t=this.medications.map(e=>[e.drug.name,this.toDate(e.order.start_date),this.toDate(e.order.auto_expire_date),e.quantity]);this.openTableModal(e,t,"Medication History")}}},async fetchPatient(e){const t=await Et["a"].findByID(e);return t?new Et["a"](t):{}},async getPatientVisitDates(e){const t=await Et["a"].getPatientVisits(e,!1);return t.map(e=>({label:this.toDate(e),value:e}))},onProgramVisitDates(e){const t=this.visitDates.concat(e).map(e=>e.value).sort((e,t)=>new Date(e)>new Date(t)?0:1);this.visitDates=Object(Se["uniq"])(t).map(e=>({label:this.toDate(e),value:e,other:{isActive:e===Kt["a"].getSessionDate()}}))},getNextTask(e){return Rn["a"].getNextTaskParams(e)},goToNextTask(){Object(St["b"])(this.patientId,this.$router)},onActiveVisitDate(e){this.activeVisitDate=e.value},getPatientCardInfo(e){const t=e.getBirthdate(),a="M"===e.getGender()?se["y"]:se["S"];return[{label:"Name",value:e.getFullName(),other:{icon:a}},{label:"Birthdate",value:`\n                    ${this.toDate(t)}\n                    (${e.getAge()}) \n                    (${e.getNationalID()})`},{label:"Current Village",value:e.getCurrentVillage()},{label:"Phone#",value:e.getPhoneNumber()}]},getProgramCardInfo(e){if("formatPatientProgramSummary"in this.app)return this.app.formatPatientProgramSummary(e,this.patientId)},getActivitiesCardInfo(e){const t=e.map(async e=>({label:e.type.name,value:this.toTime(e.encounter_datetime),other:{provider:await ga["a"].getPersonFullName(e.provider_id),id:e.encounter_id,columns:["Observation","Value","Time"],onVoid:async t=>{try{await this.showLoader(),await Ki["a"].voidEncounter(e.encounter_id,t),await this.loadSavedEncounters(),D["V"].dismiss(),await this.loadCardData(this.activeVisitDate),this.nextTask=await this.getNextTask(this.patientId),Object(j["d"])("Encounter has been voided!",2e3)}catch(a){Object(j["c"])(a)}},getRows:async()=>{const t=[],{observations:a}=e;for(const e in a){let i="<UNKNOWN CONCEPT>";const r=a[e];try{var n;i=null!==r&&void 0!==r&&null!==(n=r.concept)&&void 0!==n&&n.concept_names?r.concept.concept_names[0].name:await Xi["a"].getConceptName(r.concept_id)}catch(o){console.error(r,o)}const s=await zt["a"].resolvePrimaryValue(r),c=le["b"].toStandardHisTimeFormat(r.date_created);t.push([i,s,c])}return t}}}));return Promise.all(t)},getMedicationCardInfo(e){return e.map(e=>({label:e.drug.name,value:this.toTime(e.order.start_date)}))},async getLabOrderCardInfo(e){if("function"===typeof this.app.getPatientDashboardLabOrderCardItems)return this.app.getPatientDashboardLabOrderCardItems(this.patientId,e);const t=await qt["a"].getOrders(this.patientId,{date:e});return t.map(e=>({label:e.specimen.name,value:this.toTime(e.order_date)}))},async getPatientAlertCardInfo(){if("getPatientDashboardAlerts"in this.app)return this.app.getPatientDashboardAlerts(this.patient)},async changeApp(){const e=await re["a"].selectApplication("PatientDashboard",!0);if(e)return e.programID!=this.programID?this.$router.push("/patients/confirm?patient_barcode="+this.patient.getNationalID()):void await this.init()},async showTasks(){if("primaryPatientActivites"in this.app){const e=this.sessionEncounters.reduce((e,t)=>(e[t.type.name.toLowerCase()]=t.observations.reduce((e,t)=>e.concat(t.concept.concept_names),[]).map(e=>e.name.toLowerCase()),e),{}),t=[...this.app.primaryPatientActivites].map(t=>{const a=(t.encounterTypeName||t.name).toLowerCase();return"object"===typeof t.taskCompletionChecklist?t.taskCompleted=t.taskCompletionChecklist.every(t=>Object(Se["isArray"])(e[a])&&e[a].includes(t.toLowerCase())):t.taskCompleted=!Object(Se["isEmpty"])(e[a]),t});this.openModal(t,"Tasks for",ji,this.sessionDate)}},async showOptions(){if("secondaryPatientActivites"in this.app){const e=this.app.secondaryPatientActivites;this.openModal(e,"Select Activity",ji)}},async openModal(e,t,a,n=""){const o=n||this.toDate(this.activeVisitDate.toString()),i=await D["X"].create({component:a,backdropDismiss:!1,cssClass:"large-modal",componentProps:{items:e,title:`${t}: ${o}`,taskParams:{patient:this.patient.getObj(),program:this.patientProgram,visitDate:this.activeVisitDate,patientID:this.patientId,savedEncounters:this.savedEncounters}}});i.present()},async openTableModal(e,t,a){const n=this.toDate(this.activeVisitDate.toString()),o=await D["X"].create({component:Ai,backdropDismiss:!1,cssClass:"large-modal",componentProps:{columns:e,rows:t,title:`${a}: ${n}`}});o.present()},async onCancel(){const e=await Object(j["a"])("Are you sure you want to Finish?");if(e)return this.$router.push({path:"/"})}}});a("b77b");const Qi=N()(Ji,[["render",Zo],["__scopeId","data-v-7eecfa92"]]);var Zi=Qi;function er(e,t,a,n,i,r){const s=Object(o["resolveComponent"])("his-standard-form");return e.fields.length>0?(Object(o["openBlock"])(),Object(o["createBlock"])(s,{key:0,fields:e.fields,onOnSubmit:e.onSubmit,onOnFinish:e.onFinish,skipSummary:!0},null,8,["fields","onOnSubmit","onOnFinish"])):Object(o["createCommentVNode"])("",!0)}var tr=Object(o["defineComponent"])({components:{HisStandardForm:fa["a"]},methods:{onFinish(e){Ht["a"].set(this.property,e.preference).then(()=>Object(j["d"])("Property set")).then(()=>this.$router.push("/"))},async getFields(){this.fields=[{id:"preference",helpText:this.label,type:ma["b"].TT_YES_NO,defaultValue:()=>this.val,validation:e=>Oa["a"].required(e),options:()=>[{label:this.label,values:[{label:"yes",value:"true"},{label:"no",value:"false"}]}]}]}},data(){return{property:null,fields:[],label:null,val:""}},watch:{$route:{async handler({query:e}){if(e.label&&e.property){try{this.val=await Ht["a"].get(e.property)}catch(t){console.log("fixed global property not found error")}this.property=e.property,this.label=e.label,this.getFields()}},deep:!0,immediate:!0}}});const ar=N()(tr,[["render",er]]);var nr=ar,or=a("f768");function ir(e,t,a,n,i,r){const s=Object(o["resolveComponent"])("his-standard-form");return Object(o["openBlock"])(),Object(o["createBlock"])(s,{skipSummary:!0,fields:e.fields,onOnFinish:e.onSubmit},null,8,["fields","onOnFinish"])}var rr=Object(o["defineComponent"])({components:{HisStandardForm:fa["a"]},data:()=>({apiDate:"",fields:[]}),async created(){this.apiDate=await de["e"].getApiDate(),this.fields=Object(Bn["b"])({id:"session_date",helpText:"Session Date",required:!0,minDate:()=>"2000-01-01",maxDate:()=>this.apiDate,estimation:{allowUnknown:!1},computeValue:e=>e,config:{footerBtns:[{name:"Reset",slot:"end",color:"success",state:{visible:{default:()=>de["e"].isBDE()}},onClick:async()=>{await this.resetSessionDate()}}]}},"")},async mounted(){await Object(Yt["a"])(200),await this.showBdeNotice()},methods:{async showBdeNotice(){if(!de["e"].isBDE())return;const e=le["b"].toStandardHisDisplayFormat(de["e"].getCachedApiDate()||""),t=le["b"].toStandardHisDisplayFormat(de["e"].getSessionDate());await Object(Yt["a"])(200);const a=await Object(Rt["a"])("BDE Notice",`The system is currently in Back Data Entry Mode(BDE).                 Do you wish to reset the date to ${e}?`,"BDE Date: "+t,[{name:"Reset Date",slot:"start",color:"success"},{name:"Keep BDE Date",slot:"end",color:"danger"},{name:"New date",slot:"end"}]);if("Reset Date"===a)return await this.resetSessionDate();"Keep BDE Date"===a&&this.redirect()},async resetSessionDate(){try{await de["e"].resetSessionDate(),Object(j["d"])("Session date has been reset to "+this.formatDate(this.apiDate)),this.redirect()}catch(e){Object(j["e"])(e)}},redirect(){const e=this.$route.query.patient_dashboard_redirection_id;e?this.$router.push("/patient/dashboard/"+e):this.$router.back()},async onSubmit(e,t){const a=t.session_date;try{var n,o;await de["e"].setSessionDate(a),Object(j["d"])("Successfully Back dated to "+this.formatDate(a));const e=null===(n=this.$route)||void 0===n||null===(o=n.query)||void 0===o?void 0:o.patient_id;e?Object(St["b"])(e,this.$router):this.redirect()}catch(i){Object(j["e"])(i)}},formatDate(e){return le["b"].toStandardHisDisplayFormat(e)}}});const sr=N()(rr,[["render",ir]]);var cr=sr;function lr(e,t,a,n,i,r){const s=Object(o["resolveComponent"])("report-template"),c=Object(o["resolveComponent"])("ion-page");return Object(o["openBlock"])(),Object(o["createBlock"])(c,null,{default:Object(o["withCtx"])(()=>[Object(o["createVNode"])(s,{title:e.title,period:e.period,rows:e.rows,fields:e.fields,columns:e.columns,showtitleOnly:!0,customFileName:e.customFileName,onReportConfiguration:e.onPeriod},null,8,["title","period","rows","fields","columns","customFileName","onReportConfiguration"])]),_:1})}var dr=a("44e3"),ur=a("4ba2"),pr=Object(o["defineComponent"])({mixins:[dr["a"]],components:{ReportTemplate:ur["a"],IonPage:D["D"]},data:()=>({title:"User system usage",rows:[],columns:[[vo["a"].thTxt("First name"),vo["a"].thTxt("Last name"),vo["a"].thTxt("Role"),vo["a"].thDate("Registered on"),vo["a"].thDate("Encounters created")]]}),created(){this.fields=this.getDateDurationFields()},methods:{async onPeriod(e,t){this.rows=[];const a=await Pt["a"].getSystemUsageByUsers(t.start_date,t.end_date);this.period=`${le["b"].toStandardHisDisplayFormat(t.start_date)}-${le["b"].toStandardHisDisplayFormat(t.end_date)}`,this.title=`User system usage <b>${this.period}</b>`,this.customFileName=`${Pt["a"].getLocationName()} User system usage ${this.period}`,this.setRows(a)},async setRows(e){e.forEach(e=>{this.rows.push([vo["a"].td(e.given_name),vo["a"].td(e.family_name),vo["a"].td(e.role),vo["a"].tdDate(e.registered_on),vo["a"].td(e.encounters)])})}}});const hr=N()(pr,[["render",lr]]);var br=hr;function mr(e,t,a,n,i,r){const s=Object(o["resolveComponent"])("his-standard-form");return Object(o["openBlock"])(),Object(o["createBlock"])(s,{skipSummary:!0,fields:e.fields,onOnFinish:e.onSubmit},null,8,["fields","onOnFinish"])}var gr=a("5713"),fr=a("b89f"),Or=Object(o["defineComponent"])({components:{HisStandardForm:fa["a"]},data:()=>({fields:[]}),async created(){this.fields=[{id:"location",helpText:"Please select facility name",type:ma["b"].TT_SELECT,defaultValue:()=>gr["a"].getUserLocation(),validation:e=>Oa["a"].required(e),options:async(e,t="")=>{const a=await gr["a"].getFacilities({name:t});return a.map(e=>({label:e.name,value:e.location_id}))},config:{showKeyboard:!0,isFilterDataViaApi:!0}}]},methods:{async onSubmit(e){const t=new fr["a"];try{await t.printLocation(e.location.value),this.$router.push({path:"/"})}catch(a){console.log(a)}}}});const jr=N()(Or,[["render",mr]]);var _r=jr;function vr(e,t,a,n,i,r){const s=Object(o["resolveComponent"])("his-standard-form");return Object(o["openBlock"])(),Object(o["createBlock"])(s,{fields:e.fields,onOnFinish:e.onFinish,skipSummary:!0},null,8,["fields","onOnFinish"])}var yr=Object(o["defineComponent"])({components:{HisStandardForm:fa["a"]},methods:{async onFinish(e){const t=e.use_portal.value;if(await Ie["b"].setPortalEnabled(t),this.enablePortal){const t=e.ip_address.value,a=e.port.value,n=`http://${t}:${a}`;await Ie["b"].setPortalIP(n)}this.$router.back()},getFields(){this.fields=[{id:"use_portal",helpText:"Enable Portal?",type:ma["b"].TT_SELECT,requireNext:!0,validation:e=>Oa["a"].required(e),options:()=>[{label:"Yes",value:"true"},{label:"No",value:"false"}],computedValue:async e=>{this.enablePortal="true"===e.value}},{id:"ip_address",helpText:"Enter IP Address",type:ma["b"].TT_TEXT,condition:()=>this.enablePortal,validation:e=>Oa["a"].required(e)||Oa["a"].isIPAddress(e),config:{customKeyboard:[v["c"],[["Delete"]]]}},{id:"port",helpText:"Enter Port",condition:()=>this.enablePortal,validation:e=>Oa["a"].required(e),type:ma["b"].TT_TEXT,config:{customKeyboard:[v["i"],[["Delete"]]]}}]}},data(){return{fields:[],enablePortal:!1}},mounted(){this.getFields()}});const wr=N()(yr,[["render",vr]]);var Nr=wr;function Cr(e,t,a,n,i,r){const s=Object(o["resolveComponent"])("his-standard-form");return Object(o["openBlock"])(),Object(o["createBlock"])(s,{fields:e.fields,onFinishAction:e.onFinish,skipSummary:!0},null,8,["fields","onFinishAction"])}var Vr=Object(o["defineComponent"])({components:{HisStandardForm:fa["a"]},methods:{async onFinish(e){const t=e.protocol.value,a=e.ip_address.value,n=e.port.value;ce["b"].setLocalStorage(t,a,n);const o=await D["V"].create({message:"Please wait...",backdropDismiss:!1});await o.present();const i=await ce["b"].healthCheck();D["V"].dismiss(),i&&200===i.status&&i?this.$router.back():(Object(j["e"])(`\n          Unable to connect to: ${t}://${a}: ${n}\n        `),this.clearLocalStorage())},getFields(){this.fields=[{id:"protocol",helpText:"Select Protocol",type:ma["b"].TT_SELECT,requireNext:!1,validation:e=>Oa["a"].required(e),options:()=>[{label:"HTTP",value:"http"},{label:"HTTPS",value:"https"}]},{id:"ip_address",helpText:"Enter IP Address",type:ma["b"].TT_IP_ADDRESS,validation:e=>Oa["a"].required(e)||Oa["a"].isIPAddress(e)},{id:"port",helpText:"Enter Port",validation:e=>Oa["a"].required(e),type:ma["b"].TT_TEXT,config:{customKeyboard:[v["i"],[["Delete"]]]}}]},async showConfigNotice(){if(this.isUsingLocalStorage()){const e=await Object(Rt["a"])("Config notice","The system is currently using user specified configurations.                 Do you wish to reset back to server configurations?","",[{name:"Reset configurations",slot:"start",color:"success"},{name:"New configurations",slot:"end"}]);"Reset configurations"===e&&(this.clearLocalStorage(),this.$router.back())}},isUsingLocalStorage(){return"true"===localStorage.getItem("useLocalStorage")},clearLocalStorage(){const e=["useLocalStorage","apiURL","apiPort","apiProtocol"];ce["b"].removeOnly(e)}},data(){return{fields:[]}},async mounted(){await this.showConfigNotice(),this.getFields()}});const Dr=N()(Vr,[["render",Cr]]);var kr=Dr;function Tr(e,t,a,n,i,r){const s=Object(o["resolveComponent"])("his-standard-form");return Object(o["openBlock"])(),Object(o["createBlock"])(s,{key:e.hisFormKey,activeField:e.fieldComponent,skipSummary:!0,fields:e.fields,onOnIndex:t[1]||(t[1]=t=>e.fieldComponent=""),onOnFinish:e.onFinish},null,8,["activeField","fields","onOnFinish"])}var Ir=a("e86e"),xr=Object(o["defineComponent"])({components:{HisStandardForm:fa["a"]},data:()=>({hisFormKey:0,patient:{},patientProgram:{},fields:[],fieldComponent:"",activeField:"",activeProgram:{},programSelectionFieldContext:{}}),watch:{fieldComponent(e){e&&(this.activeField=e)},activeField(e){"program_selection"===e&&(this.hisFormKey+=1)},$route:{async handler({params:e}){e&&e.patient_id&&(this.patient=e.patient_id,this.patientProgram=new Bt["a"](this.patient),this.fields=[this.getProgramSelectionField(),this.getProgramEnrollmentField(),...this.getProgramOutcomeDateFields(),this.getProgramStateField(),this.getTransferOutFacilityFields(),...this.getStateOutcomeDateFields()])},deep:!0,immediate:!0}},methods:{async onFinish(e){switch(this.activeField){case"program_enrollment":await this.onEnrollProgram();break;case"program_state":await this.onProgramState(e);break}},async patientPrograms(){const e=await this.patientProgram.getPrograms();return e.map(e=>({label:e.program.name,value:e.program.program_id,other:{...e,programStates:e.patient_states.map(e=>({name:e.name,startDate:le["b"].toStandardHisDisplayFormat(e.start_date),endDate:e.end_date?le["b"].toStandardHisDisplayFormat(e.end_date):"N/A",actions:this.getStateActions(e)}))}}))},async allPrograms(){const e=this.programSelectionFieldContext.listData,t=await Kt["a"].getAllPrograms();return t.map(t=>({label:t.name,value:t.program_id,disabled:Object(Se["find"])(e,{value:t.program_id}),other:{...t}}))},async programWorkflows(){const e=await Kt["a"].getProgramWorkflows(this.patientProgram.getProgramId());if(!Object(Se["isEmpty"])(e))return e[0].states.map(e=>({label:e.name,value:e.program_workflow_state_id,other:{...e}}))},getStateActions(e){const t=[{name:"Void",color:"danger",action:async(t,a)=>{await this.onVoidState(e.patient_state_id,t,a)}}];return"Patient transferred out"===e.name&&t.push({name:"Print",color:"primary",action:async()=>await this.patientProgram.printTransferout(e.start_date)}),t},onUpdateState(){if(-1===this.patientProgram.getProgramId())return Object(j["e"])("Please select a program");this.fieldComponent="program_state"},async onProgramState(e){try{await this.patientProgram.updateState(),this.fieldComponent="program_selection",e.transfer_out_state&&await this.patientProgram.transferOutEncounter(e.transfer_out_state.other),Object(j["d"])("State has been updated")}catch(t){Object(j["c"])(t)}},async onEnrollProgram(){const e=this.patientProgram.getProgramId();if(-1===e)return Object(j["e"])("Please select a program");try{this.activeProgram=await this.patientProgram.enrollProgram(),this.fieldComponent="program_state",Object(j["d"])("Patient has been enrolled!")}catch(t){this.activeProgram={},Object(j["c"])(t)}},async onVoidState(e,t,a){await Zt(async n=>{try{this.patientProgram.setStateId(e),await this.patientProgram.voidState(n),this.patientProgram.setStateId(-1),t.other.programStates.splice(a,1),Object(j["d"])("State has been voided")}catch(o){Object(j["c"])(o)}})},async onVoidProgram(){const e=this.patientProgram.getPatientProgramId();if(-1===e)return Object(j["e"])("Please select a program");await Zt(async e=>{try{await this.patientProgram.voidProgram(e);const t=this.programSelectionFieldContext,a=Object(Se["findIndex"])(t.listData,{value:this.patientProgram.getProgramId()});t.listData.splice(a,1),t.activeProgram={},this.patientProgram.setPatientProgramId(-1),this.patientProgram.setProgramId(-1),Object(j["d"])("Program removed")}catch(t){console.error(t),Object(j["c"])(t)}})},getStateOutcomeDateFields(){return Object(Bn["b"])({id:"state_outcome_date",helpText:"State",condition:e=>e.program_state,required:!0,minDate:()=>this.patientProgram.getProgramDate(),maxDate:()=>Kt["a"].getSessionDate(),estimation:{allowUnknown:!0,estimationFieldType:Bn["a"].MONTH_ESTIMATE_FIELD},computeValue:e=>this.patientProgram.setStateDate(e)},this.patientProgram.getProgramDate()||Kt["a"].getSessionDate())},getTransferOutFacilityFields(){return{id:"transfer_out_state",helpText:"Please Select facility name",type:ma["b"].TT_SELECT,validation:e=>Oa["a"].required(e),condition:e=>"Patient transferred out"===e.program_state.label,options:(e,t="")=>Object(Ir["b"])(t),config:{showKeyboard:!0,isFilterDataViaApi:!0}}},getProgramStateField(){return{id:"program_state",helpText:"State",type:ma["b"].TT_SELECT,validation:e=>Oa["a"].required(e),options:()=>this.programWorkflows(),condition:()=>"program_state"===this.activeField,unload:e=>this.patientProgram.setStateId(e.value)}},getProgramEnrollmentField(){return{id:"program_enrollment",helpText:"Please select a programme",type:ma["b"].TT_SELECT,condition:()=>"program_enrollment"===this.activeField,unload:e=>this.patientProgram.setProgramId(e.value),options:()=>this.allPrograms(),validation:e=>Oa["a"].required(e),config:{showKeyboard:!0}}},getProgramOutcomeDateFields(){return Object(Bn["b"])({id:"program_outcome_date",helpText:"Outcome",required:!0,minDate:()=>le["b"].estimateDateFromAge(100),maxDate:()=>Kt["a"].getSessionDate(),condition:()=>"program_enrollment"===this.activeField,estimation:{allowUnknown:!0,estimationFieldType:Bn["a"].MONTH_ESTIMATE_FIELD},computeValue:e=>this.patientProgram.setProgramDate(e)},Kt["a"].getSessionDate())},getProgramSelectionField(){const e=e=>!Object(Se["isEmpty"])(e.program_selection);return{id:"program_selection",helpText:"Programs",type:ma["b"].TT_PROGRAM_SELECTION,onload:e=>{this.activeField="program_selection",this.programSelectionFieldContext=e},onValue:e=>(e&&(this.activeProgram=e.other,this.patientProgram.setProgramId(e.value),this.patientProgram.setPatientProgramId(e.other.patient_program_id),this.patientProgram.setProgramDate(le["b"].toStandardHisFormat(e.other.date_enrolled))),!0),validation:e=>Oa["a"].required(e),options:()=>this.patientPrograms(),config:{onVoidState:this.onVoidState,hiddenFooterBtns:["Back","Next","Clear"],footerBtns:[{name:"Void Program",slot:"end",color:"danger",state:{visible:{default:(t,a)=>e(a),onValue:(t,a)=>e(a)}},onClick:async()=>{await this.onVoidProgram()}},{name:"Update state",slot:"end",state:{visible:{default:(t,a)=>e(a),onValue:(t,a)=>e(a)}},onClick:async()=>{await this.onUpdateState()}},{name:"Enroll",color:"success",slot:"end",onClick:()=>{this.fieldComponent="program_enrollment"}}]}}}}});const Sr=N()(xr,[["render",Tr]]);var Pr=Sr;function Ar(e,t,a,n,i,r){const s=Object(o["resolveComponent"])("his-standard-form");return Object(o["openBlock"])(),Object(o["createBlock"])(s,{key:e.hisFormKey,fields:e.fields,activeField:e.fieldComponent,skipSummary:!0,onOnIndex:t[1]||(t[1]=t=>e.fieldComponent=""),onOnFinish:e.onFinish},null,8,["fields","activeField","onOnFinish"])}class Er extends Wt["a"]{constructor(e){super(e,57),this.patientID=e,this.testTypeID=-1,this.resultDate="",this.testID=-1}createLabResult(e){return Wt["a"].postJson(`lab/tests/${this.testID}/results`,{encounter_id:this.encounterID,date:this.resultDate,measures:e})}getTestID(){return this.testID}getTestTypeID(){return this.testTypeID}setTestTypeID(e){this.testTypeID=e}setResultDate(e){this.resultDate=e}setTestID(e){this.testID=e}getTestsWithoutResults(){return qt["a"].getOrders(this.patientID,{status:"drawn"})}getTestIndicators(){return qt["a"].getJson("lab/test_result_indicators",{test_type_id:this.testTypeID})}}var Br=Object(o["defineComponent"])({components:{HisStandardForm:fa["a"]},data:()=>({fieldComponent:"",labResult:{},hisFormKey:0,patient:{},fields:[],selectedTest:{},testOptions:[],testIndicators:[]}),watch:{$route:{async handler({params:e}){e&&e.patient_id&&(this.patient=e.patient_id,this.labResult=new Er(this.patient),await this.initData(),this.fields=this.getFields())},deep:!0,immediate:!0}},methods:{async onFinish(e,t){try{const e=Object.values(t).filter(e=>"result_indicator"===e.tag&&e.measures).map(e=>e.measures);this.labResult.setTestID(this.selectedTest.value),this.labResult.setResultDate(t.result_date),await this.labResult.createEncounter(),await this.labResult.createLabResult(e),this.testOptions=[],this.selectedTest={},this.testIndicators=[],await this.initData(),this.hisFormKey=Math.floor(5e3*Math.random()),Object(j["d"])("Lab result saved!")}catch(a){Object(j["c"])(a),console.error(a)}},generateTestIndicatorsFields(){let e=[];return this.testIndicators.forEach(t=>{e=[...e,...this.buildTestIndicatorFields(t.indicatorId,t.indicatorName,t.specimen,t.testId)]}),e},async validateVLresults(e,t,a){if("HIV viral load"!==e)return!0;const n=a.substring(0,1),o=a.substring(1,a.length);if(qt["a"].isValidVLResult(t,n,o))return!0;const i=await Object(j["a"])(`Invalid results for ${t} HIV viral load`,{cancelBtnLabel:"Process result",confirmBtnLabel:"Re-enter result"});return!i},alphaValueIsValid(e){try{return!!e.match(/^(>|<|=)(.*)/)}catch(t){return!1}},numericValueIsValid(e){try{return!!e.match(/^(=|<|>)([0-9]*)$/m)}catch(t){return!1}},isMalariaResult(e){return!!e.match(/mrdt|malaria/i)},buildTestIndicatorFields(e,t,a,n){const o=e=>[this.selectedTest.value===n,!!Object(Se["find"])(e.result_indicators,{label:t})].every(Boolean),i=e=>this.validateVLresults(t,a,e.value.toString()),r=(a,n)=>{if("Other"===a.value&&t.match(/HIV viral load/i))return{};const o=this.isMalariaResult(t)?"text":n["type_"+e].value,i=this.isMalariaResult(t)?"="+a.value:a.value.toString(),r=i.charAt(0),s="numeric"===o?parseInt(i.substring(1)):i.substring(1),c=n["result_indicators"].filter(t=>t.value===e)[0];return{tag:"result_indicator",measures:{indicator:{concept_id:c.value},value:s,value_modifier:r,value_type:o},result:s,modifier:r,test:c.label}};return[{id:"type_"+e,helpText:`Result type (${t})`,type:ma["b"].TT_SELECT,group:"test_indicator",condition:e=>o(e)&&!this.isMalariaResult(t),appearInSummary:()=>!1,validation:e=>Oa["a"].required(e),options:()=>[{label:"Numeric (numbers only)",value:"numeric"},{label:"Alphanumeric(text and numbers)",value:"text"}]},{id:"num_"+e,helpText:`Test Result (${t})`,type:ma["b"].TT_TEXT,group:"test_indicator",computedValue:r,beforeNext:i,onValue:e=>!(e&&e.value&&!this.numericValueIsValid(e.value.toString()))||(Object(j["e"])("You must enter a modifer and numbers only. i.e =90 / >19 / < 750"),!1),validation:e=>Oa["a"].required(e),condition:t=>o(t)&&"numeric"===t["type_"+e].value,config:{customKeyboard:[[["1","2","3"],["4","5","6","=","<",">"],["7","8","9","."],["","0",""]],[["Delete"]]]}},{id:"alpha_"+e,helpText:`Test Result (${t})`,type:ma["b"].TT_TEXT,group:"test_indicator",onValue:e=>!(e&&e.value&&!this.alphaValueIsValid(e.value.toString()))||(Object(j["e"])("You must enter a modifier plus result (for example =LDL)"),!1),computedValue:r,validation:e=>Oa["a"].required(e),condition:a=>o(a)&&"text"===a["type_"+e].value&&!t.match(/HIV viral load/i)},{id:"VL_alpha_"+e,helpText:`Select Test Result (${t})`,type:ma["b"].TT_SELECT,group:"test_indicator",computedValue:r,validation:e=>Oa["a"].required(e),condition:a=>o(a)&&"text"===a["type_"+e].value&&t.match(/HIV viral load/i),options:()=>[{label:"Collect Another Sample",value:"=Collect Another Sample"},{label:"<LDL",value:"<LDL"},{label:"=LDL",value:"=LDL"},{value:"Other",label:"Other"}]},{id:"other_VL_alpha_"+e,helpText:`Test Result (${t})`,type:ma["b"].TT_TEXT,group:"test_indicator",onValue:e=>!(e&&e.value&&!this.alphaValueIsValid(e.value.toString()))||(Object(j["e"])("You must enter a modifier plus result (for example =LDL)"),!1),computedValue:r,validation:e=>Oa["a"].required(e),condition:a=>o(a)&&"text"===a["type_"+e].value&&t.match(/HIV viral load/i)&&"Other"===a["VL_alpha_"+e].value},{id:"malaria_result_"+e,helpText:`Select Test Result (${t})`,type:ma["b"].TT_SELECT,group:"test_indicator",computedValue:r,validation:e=>Oa["a"].required(e),condition:e=>o(e)&&this.isMalariaResult(t),options:()=>t.match(/mrdt/i)?[{label:"Positive",value:"positive"},{label:"Negative",value:"negative"}]:[{label:"Parasites seen",value:"parasites seen"},{label:"No parasites seen",value:"no parasites seen"}]}]},async initData(){const e=await this.labResult.getTestsWithoutResults();for(const t in e){const a=e[t];for(const e in a.tests){const t=a.tests[e];if(!Object(Se["isEmpty"])(t.result))continue;this.labResult.setTestTypeID(t.concept_id);const n=await this.labResult.getTestIndicators(),o=n.map(e=>({testId:t.id,indicatorName:e.name,indicatorId:e.concept_id,specimen:a.specimen.name}));this.testIndicators=[...this.testIndicators,...o],this.testOptions.push({label:t.name,value:t.id,other:{accession:a.accession_number,specimen:a.specimen.name,test:t.name,orderDate:a.order_date,testIndicators:o}})}}},getFields(){return[{id:"test_type",helpText:"Tests without results",type:ma["b"].TT_TABLE_VIEWER,options:()=>{const e=this.testOptions.map(e=>[e.other.accession,e.other.specimen,e.other.test,le["b"].toStandardHisDisplayFormat(e.other.orderDate),{type:"button",name:"Select",action:()=>{this.selectedTest=e,this.$nextTick(()=>this.fieldComponent="year_result_date")}}]);return[{label:"",value:"",other:{rows:e,columns:["Acession#","Specimen","Test","Order date"]}}]},validation:e=>Oa["a"].required(e),config:{overrideDefaultFooterBtns:{nextBtn:{name:"Finish",onClick:()=>this.$router.back()}},hiddenFooterBtns:["Clear","Cancel"]}},...Object(Bn["b"])({id:"result_date",helpText:"Result",required:!0,estimation:{allowUnknown:!1},minDate:()=>le["b"].toStandardHisFormat(this.selectedTest.other.orderDate),maxDate:()=>de["e"].getSessionDate(),computeValue:e=>e}),{id:"result_indicators",helpText:"Select test result indicators",type:ma["b"].TT_MULTIPLE_SELECT,validation:e=>Oa["a"].required(e),options:()=>this.selectedTest.other.testIndicators.map(e=>({label:e.indicatorName,value:e.indicatorId}))},...this.generateTestIndicatorsFields(),{id:"entry_confirmation",helpText:"Confirm entry",type:ma["b"].TT_TABLE_VIEWER,options:(e,t)=>{const a=Object.values(t).filter(e=>"object"===typeof e&&null!=e&&"result_indicator"===e.tag).map(e=>[e.test,e.modifier,e.result]);return[{label:"",value:"",other:{rows:a,columns:["Test","Modifier","Result"]}}]}}]}}});const Rr=N()(Br,[["render",Ar]]);var Fr=Rr;function Lr(e,t,a,n,i,r){const s=Object(o["resolveComponent"])("his-standard-form");return Object(o["openBlock"])(),Object(o["createBlock"])(s,{key:e.formKey,fields:e.fields,skipSummary:!0,activeField:e.fieldComponent,onOnIndex:t[1]||(t[1]=t=>e.fieldComponent=""),onFinishAction:e.onFinish},null,8,["fields","activeField","onFinishAction"])}var Mr=Object(o["defineComponent"])({components:{HisStandardForm:fa["a"]},data:()=>({formKey:0,fields:[],activity:"",presets:{},programs:{},userData:{},fieldComponent:"",isSessionPasswordChange:!1,activeField:"",form:{}}),watch:{$route:{async handler(e){if(!e)return;const{query:t}=e;["edit","add"].includes(t.activity)?this.activity=t.activity:this.activity="add",t.update_password&&(this.userData=this.toUserData(await Pt["a"].getCurrentUser()),this.isSessionPasswordChange=!0,this.activeField="new_password",this.fieldComponent=this.activeField),this.programs=Pt["a"].getAvailableApps(),this.fields=this.getFields()},immediate:!0,deep:!0}},methods:{async onFinish(e,t){try{switch(this.activity){case"add":await this.create(t),this.activity="edit";break;case"edit":await this.update(t),this.isSessionPasswordChange&&this.$router.push("/");break}this.formKey+=1,this.activeField="user_info",this.$nextTick(()=>this.fieldComponent=this.activeField)}catch(a){a instanceof de["d"]&&!Object(Se["isEmpty"])(a.errors)?Object(j["e"])(a.errors):Object(j["c"])(""+a)}},async create(e){const{user:t}=await Pt["a"].createUser(e);if(t)return this.userData=this.toUserData(t);throw"Unable to create new user, Possibly the user already exists or incorrect info was entered"},async update(e){const t=await Pt["a"].updateUser(this.userData.id,e);if(t)return this.userData=this.toUserData(t);throw"Unable to update user, possibly server error or incorrect information entered"},getProgramName(e){const t=Object(Se["find"])(this.programs,{programID:e});return t?t.applicationName:""},mapToOption(e){return e.map(e=>({label:e,value:e}))},async getRoles(){return(await Pt["a"].getAllRoles()).filter(e=>{try{return!this.userData.role.split(",").includes(e.role)}catch(t){return!0}}).map(e=>({label:e.role,value:e.role,other:e}))},toUserData(e){const t=e.person.names[0];return{id:e.user_id,given_name:t.given_name,family_name:t.family_name,username:e.username,role:e.roles.map(e=>e.role),created:le["b"].toStandardHisDisplayFormat(e.date_created),status:e.deactivated_on?"Inactive":"Active",programs:e.programs.map(e=>e["program_id"])}},editConditionCheck(e=[]){return"edit"!==this.activity||e.includes(this.activeField)},toLcase(e){return e.value.toString().toLowerCase()},getFields:function(){return[{id:"select_user",helpText:"Select Username",type:ma["b"].TT_SELECT,condition:()=>"edit"===this.activity&&Pt["a"].isAdmin(),validation:e=>Oa["a"].required(e),unload:({other:e})=>this.userData=this.toUserData(e),options:async()=>{const e=await Pt["a"].getAllUsers();return e.map(e=>({label:e.username,value:e.user_id,other:e}))},config:{showKeyboard:!0}},{id:"user_info",helpText:"User information",type:ma["b"].TT_TABLE_VIEWER,dynamicHelpText:()=>`User: ${this.userData.username} | Added On: ${this.userData.created}`,condition:()=>"edit"===this.activity&&Pt["a"].isAdmin(),options:async(e,t,a)=>{const n=3,o=["Attributes","Values","Actions"],i=e=>({name:"Active"===e?"Deactivate":"Activate",type:"button",style:{width:"65%",fontWeight:"bold"},color:"Active"===e?"danger":"success",action:async()=>{try{"Active"===e&&(await Pt["a"].deactivateUser(this.userData.id),this.userData.status="Inactive",a.rows[n]=["Status","Inactive",i("Inactive")],Object(j["d"])("User has been deactivated",400)),"Inactive"===e&&(await Pt["a"].activateUser(this.userData.id),this.userData.status="Active",a.rows[n]=["Status","Active",i("Active")],Object(j["d"])("User has been activated",400))}catch(t){Object(j["e"])(t)}}}),r=(e,t)=>({name:e,type:"button",color:"light",style:{fontWeight:"bold",width:"65%"},action:()=>{this.activeField=t,this.fieldComponent=this.activeField}}),s=[r("Add/Append Role","roles")];this.userData.role.length>1&&s.push(r("Remove Role","remove_roles"));const c=[["<b>Name</b>",`${this.userData.given_name} ${this.userData.family_name}`,r("Edit Name","given_name"),""],["<b>Password</b>","*******",r("Change password","new_password"),""],["<b>Role</b>",this.userData.role.join("<br/>"),...s],["<b>Status</b>",this.userData.status,i(this.userData.status),""],["<b>Programs</b>",this.userData.programs.map(e=>this.getProgramName(e)).join("<br/>"),r("Edit Program","programs"),""]];return[{label:"",value:"",other:{columns:o,rows:c}}]},config:{hiddenFooterBtns:["Clear"],overrideDefaultFooterBtns:{nextBtn:{name:"Finish",onClick:()=>this.$router.back()}}}},{id:"given_name",helpText:"First name",type:ma["b"].TT_TEXT,computedValue:e=>e.value,defaultValue:()=>this.userData.given_name,condition:()=>this.editConditionCheck(["given_name"])&&Pt["a"].isAdmin(),validation:e=>Oa["a"].isName(e),options:async e=>{if(!e.given_name||null===e.given_name.value)return[];const t=await ga["a"].searchGivenName(e.given_name.value);return this.mapToOption(t)}},{id:"family_name",helpText:"Last name",type:ma["b"].TT_TEXT,computedValue:e=>e.value,defaultValue:()=>this.userData.family_name,validation:e=>Oa["a"].isName(e),condition:()=>this.editConditionCheck(["given_name"])&&Pt["a"].isAdmin(),options:async e=>{if(!e.family_name||null===e.family_name.value)return[];const t=await ga["a"].searchFamilyName(e.family_name.value);return this.mapToOption(t)}},{id:"roles",helpText:"Role",type:ma["b"].TT_SELECT,computedValue:e=>[e.value],condition:()=>this.editConditionCheck(["roles"])&&Pt["a"].isAdmin(),validation:e=>Oa["a"].required(e),options:()=>this.getRoles(),config:{showKeyboard:!0}},{id:"remove_roles",helpText:"Remove Roles",proxyID:"roles",type:ma["b"].TT_SELECT,validation:e=>Oa["a"].required(e),condition:()=>this.editConditionCheck(["remove_roles"])&&Pt["a"].isAdmin()&&"edit"===this.activity,computedValue:e=>this.userData.role.filter(t=>t!=e.label),options:()=>this.mapToOption(this.userData.role),config:{showKeyboard:!0}},{id:"must_append_roles",helpText:"Would you like to append role?",type:ma["b"].TT_SELECT,computedValue:e=>"Yes"===e.label,condition:()=>"edit"===this.activity&&this.editConditionCheck(["roles"])&&Pt["a"].isAdmin(),defaultComputedOutput:()=>!1,validation:e=>Oa["a"].required(e),options:()=>[{label:"Yes",value:"true"},{label:"No",value:"false"}]},{id:"programs",helpText:"Select Apps",type:ma["b"].TT_MULTIPLE_SELECT,condition:()=>Pt["a"].isAdmin()&&this.editConditionCheck(["programs"]),validation:e=>Oa["a"].required(e),computedValue:e=>e.map(e=>e.value),options:()=>this.programs.map(e=>{let t=!1;return"edit"===this.activity&&(t=this.userData.programs.includes(e.programID)),{label:e.applicationName,value:e.programID,isChecked:t}})},{id:"username",helpText:"Username",type:ma["b"].TT_TEXT,condition:()=>this.editConditionCheck(["nothing to see here"])&&Pt["a"].isAdmin(),computedValue:e=>this.toLcase(e),validation:e=>Oa["a"].validateSeries([()=>Oa["a"].required(e),()=>Oa["a"].hasLengthRangeOf(e,4,15)]),config:{casing:"lowercase"}},{id:"new_password",proxyID:"password",helpText:"New Password",type:ma["b"].TT_TEXT,computedValue:e=>this.toLcase(e),condition:()=>this.editConditionCheck(["new_password"]),validation:e=>Oa["a"].validateSeries([()=>Oa["a"].required(e),()=>Oa["a"].hasLengthRangeOf(e,4,15)]),config:{inputType:"password"}},{id:"verify_password",proxyID:"password",helpText:"Confirm Password",type:ma["b"].TT_TEXT,computedValue:e=>this.toLcase(e),condition:()=>this.editConditionCheck(["new_password"]),validation:(e,t)=>Oa["a"].validateSeries([()=>Oa["a"].required(e),()=>{if(this.toLcase(t.verify_password)!=this.toLcase(t.new_password))return["New password does not match current password"]}]),config:{inputType:"password"}}]}}});const Hr=N()(Mr,[["render",Lr]]);var $r=Hr;const Ur=Object(o["withScopeId"])("data-v-ef36ea1c");Object(o["pushScopeId"])("data-v-ef36ea1c");const qr=Object(o["createTextVNode"])("Merge Clients"),Gr={class:"result-section"},zr={class:"result-section"},Yr=Object(o["createTextVNode"])(" Cancel "),Wr=Object(o["createTextVNode"])(" Merge ");Object(o["popScopeId"])();const Kr=Ur((function(e,t,a,n,i,r){const s=Object(o["resolveComponent"])("ion-title"),c=Object(o["resolveComponent"])("ion-toolbar"),l=Object(o["resolveComponent"])("ion-header"),d=Object(o["resolveComponent"])("ion-input"),u=Object(o["resolveComponent"])("ion-col"),p=Object(o["resolveComponent"])("ion-row"),h=Object(o["resolveComponent"])("patient-card"),b=Object(o["resolveComponent"])("view-port"),m=Object(o["resolveComponent"])("his-keyboard"),g=Object(o["resolveComponent"])("ion-content"),f=Object(o["resolveComponent"])("ion-button"),O=Object(o["resolveComponent"])("ion-footer"),j=Object(o["resolveComponent"])("ion-page");return Object(o["openBlock"])(),Object(o["createBlock"])(j,null,{default:Ur(()=>[Object(o["createVNode"])(l,null,{default:Ur(()=>[Object(o["createVNode"])(c,null,{default:Ur(()=>[Object(o["createVNode"])(s,{class:"his-lg-text"},{default:Ur(()=>[qr]),_:1})]),_:1})]),_:1}),Object(o["createVNode"])(g,null,{default:Ur(()=>[Object(o["createVNode"])(b,null,{default:Ur(()=>[Object(o["createVNode"])(p,null,{default:Ur(()=>[Object(o["createVNode"])(u,null,{default:Ur(()=>[Object(o["createVNode"])(d,{onClick:t[1]||(t[1]=t=>e.inputFocus="inputA"),placeholder:"Primary patient",class:["input_display",{"input-focused":"inputA"===e.inputFocus}],modelValue:e.inputA,"onUpdate:modelValue":t[2]||(t[2]=t=>e.inputA=t)},null,8,["modelValue","class"])]),_:1}),Object(o["createVNode"])(u,null,{default:Ur(()=>[Object(o["createVNode"])(d,{onClick:t[3]||(t[3]=t=>e.inputFocus="inputB"),class:["input_display",{"input-focused":"inputB"===e.inputFocus}],placeholder:"Secondary patient",modelValue:e.inputB,"onUpdate:modelValue":t[4]||(t[4]=t=>e.inputB=t)},null,8,["modelValue","class"])]),_:1})]),_:1}),Object(o["createVNode"])(p,null,{default:Ur(()=>[Object(o["createVNode"])(u,null,{default:Ur(()=>[Object(o["createVNode"])("div",Gr,[(Object(o["openBlock"])(!0),Object(o["createBlock"])(o["Fragment"],null,Object(o["renderList"])(e.inputASearchResults,(t,a)=>(Object(o["openBlock"])(),Object(o["createBlock"])(h,{onClick:a=>e.onPrimaryPatient(t),key:a,patient:t,isActive:e.activeInputACard.index===a},null,8,["onClick","patient","isActive"]))),128))])]),_:1}),Object(o["createVNode"])(u,null,{default:Ur(()=>[Object(o["createVNode"])("div",zr,[(Object(o["openBlock"])(!0),Object(o["createBlock"])(o["Fragment"],null,Object(o["renderList"])(e.inputBSearchResults,(t,a)=>(Object(o["openBlock"])(),Object(o["createBlock"])(h,{onClick:a=>e.onSecondaryPatient(t),key:a,patient:t,isActive:t.isChecked},null,8,["onClick","patient","isActive"]))),128))])]),_:1})]),_:1})]),_:1}),e.inputFocus?(Object(o["openBlock"])(),Object(o["createBlock"])(m,{key:0,kbConfig:e.keyboard,onKeyPress:e.keypress},null,8,["kbConfig","onKeyPress"])):Object(o["createCommentVNode"])("",!0)]),_:1}),Object(o["createVNode"])(O,null,{default:Ur(()=>[Object(o["createVNode"])(c,{color:"dark"},{default:Ur(()=>[Object(o["createVNode"])(f,{color:"danger",size:"large","router-link":"/"},{default:Ur(()=>[Yr]),_:1}),e.canMerge?(Object(o["openBlock"])(),Object(o["createBlock"])(f,{key:0,disabled:e.isSubmitting,color:"success",size:"large",slot:"end",onClick:e.onMerge},{default:Ur(()=>[Wr]),_:1},8,["disabled","onClick"])):Object(o["createCommentVNode"])("",!0)]),_:1})]),_:1})]),_:1})}));var Xr=a("0a79"),Jr=a("2345");const Qr=Object(o["withScopeId"])("data-v-154d9c56");Object(o["pushScopeId"])("data-v-154d9c56");const Zr=Object(o["createTextVNode"])(" NPID : "),es=Object(o["createTextVNode"])(" Arv# : "),ts=Object(o["createTextVNode"])(" Name : "),as=Object(o["createTextVNode"])(" Birth date : "),ns=Object(o["createTextVNode"])(" Gender : "),os=Object(o["createTextVNode"])(" Home District : "),is=Object(o["createTextVNode"])(" Home Village : "),rs=Object(o["createTextVNode"])(" Current District : "),ss=Object(o["createTextVNode"])(" Current Village : ");Object(o["popScopeId"])();const cs=Qr((function(e,t,a,n,i,r){return Object(o["openBlock"])(),Object(o["createBlock"])("div",{class:["his-card clickable",e.stateClass]},[Object(o["createVNode"])("li",null,[Object(o["createVNode"])("ul",null,[Zr,Object(o["createVNode"])("b",null,Object(o["toDisplayString"])(e.patient.npid),1)]),Object(o["createVNode"])("ul",null,[es,Object(o["createVNode"])("b",null,Object(o["toDisplayString"])(e.patient.arvNum),1)]),Object(o["createVNode"])("ul",null,[ts,Object(o["createVNode"])("b",null,Object(o["toDisplayString"])(e.patient.name),1)]),Object(o["createVNode"])("ul",null,[as,Object(o["createVNode"])("b",null,Object(o["toDisplayString"])(e.patient.birthdate),1)]),Object(o["createVNode"])("ul",null,[ns,Object(o["createVNode"])("b",null,Object(o["toDisplayString"])(e.patient.gender),1)]),Object(o["createVNode"])("ul",null,[os,Object(o["createVNode"])("b",null,Object(o["toDisplayString"])(e.patient.homeDistrict),1)]),Object(o["createVNode"])("ul",null,[is,Object(o["createVNode"])("b",null,Object(o["toDisplayString"])(e.patient.homeVillage),1)]),Object(o["createVNode"])("ul",null,[rs,Object(o["createVNode"])("b",null,Object(o["toDisplayString"])(e.patient.currentDistrict),1)]),Object(o["createVNode"])("ul",null,[ss,Object(o["createVNode"])("b",null,Object(o["toDisplayString"])(e.patient.currentVillage),1)])])],2)}));var ls=Object(o["defineComponent"])({props:{patient:{type:Object,required:!0},isActive:{type:Boolean}},computed:{stateClass(){return{"active-card-color":this.isActive,"inactive-card-color":!this.isActive}}}});a("6967");const ds=N()(ls,[["render",cs],["__scopeId","data-v-154d9c56"]]);var us=ds,ps=Object(o["defineComponent"])({components:{PatientCard:us,IonPage:D["D"],IonInput:D["v"],IonButton:D["d"],IonContent:D["n"],IonRow:D["H"],IonCol:D["m"],IonFooter:D["o"],IonHeader:D["q"],ViewPort:Xr["a"],HisKeyboard:la["a"],IonTitle:D["P"]},data:()=>({inputA:"",inputB:"",isSubmitting:!1,inputFocus:"inputA",inputASearchResults:[],inputBSearchResults:[],activeInputACard:{},keyboard:[v["c"],[["","Hide"],["Space","Delete"],["inputA","inputB"],["Search","Clear"]]]}),computed:{canMerge(){return!Object(Se["isEmpty"])(this.activeInputACard)&&!Object(Se["isEmpty"])(this.inputBSearchResults.filter(e=>e.isChecked))}},methods:{async onMerge(){if(await Object(j["a"])("Are you sure you want to merge selected Persons?")){try{this.isSubmitting=!0;const e=await Et["a"].mergePatients({primary:{patient_id:this.activeInputACard.id,doc_id:this.activeInputACard.docID},secondary:this.inputBSearchResults.filter(e=>e.isChecked).map(e=>({patient_id:e.id,doc_id:e.docID}))});await new Mt["a"](e["patient_id"]).printNidLbl(),this.inputBSearchResults=this.inputBSearchResults.filter(e=>!e.isChecked);const t=await Rn["a"].getNextTaskParams(e["patient_id"]);this.$router.push(t.name?t:"/patient/dashboard/"+e["patient_id"])}catch(e){Object(j["c"])(""+e)}this.isSubmitting=!1}},onPrimaryPatient(e){this.inputBSearchResults.forEach(t=>{t.id===e.id&&(this.inputBSearchResults[t.index].isChecked=!1)}),this.activeInputACard=e},onSecondaryPatient(e){if(e.isChecked)return this.inputBSearchResults[e.index].isChecked=!1;Object(Se["isEmpty"])(this.activeInputACard)||e.id==this.activeInputACard.id||(this.inputBSearchResults[e.index].isChecked=!0)},async searchPatient(e){const[t,a]=e.split(" "),n=await Et["a"].search({given_name:t,family_name:a});return n.map((e,t)=>{const a=new Et["a"](e);return{index:t,id:a.getID(),name:a.getFullName(),docID:a.getDocID(),birthdate:a.getBirthdate(),arvNum:a.getArvNumber(),npid:a.getNationalID(),gender:a.getGender(),homeDistrict:a.getHomeDistrict(),homeVillage:a.getHomeVillage(),currentDistrict:a.getCurrentDistrict(),currentVillage:a.getCurrentVillage(),isChecked:!1}})},async keypress(e){if(!this.inputFocus)return;let t=Object(Jr["a"])(e,this[this.inputFocus]);t.match(/hide/i)?this.inputFocus="":t.match(/search/i)?(t=t.replace("Search",""),"inputA"===this.inputFocus?(this.inputASearchResults=await this.searchPatient(t),this.activeInputACard={}):this.inputBSearchResults=await this.searchPatient(t),this.inputFocus=""):t.match(/inputA/i)?this.inputFocus="inputA":t.match(/inputB/i)?this.inputFocus="inputB":t.match(/clear/i)?(this[this.inputFocus]="","inputA"===this.inputFocus?this.inputASearchResults=[]:this.inputBSearchResults=[]):this[this.inputFocus]=t}}});a("aabe");const hs=N()(ps,[["render",Kr],["__scopeId","data-v-ef36ea1c"]]);var bs=hs;const ms=Object(o["createVNode"])("br",null,null,-1),gs=Object(o["createTextVNode"])(" Current District: "),fs=Object(o["createTextVNode"])(" Home Village: "),Os=Object(o["createTextVNode"])(" Re-Assign "),js=Object(o["createTextVNode"])(" Update Missing Data "),_s=Object(o["createTextVNode"])(" Cancel "),vs=Object(o["createTextVNode"])(" Clear ");function ys(e,t,a,n,i,r){const s=Object(o["resolveComponent"])("ion-title"),c=Object(o["resolveComponent"])("ion-toolbar"),l=Object(o["resolveComponent"])("ion-header"),d=Object(o["resolveComponent"])("ion-checkbox"),u=Object(o["resolveComponent"])("ion-label"),p=Object(o["resolveComponent"])("ion-button"),h=Object(o["resolveComponent"])("ion-item"),b=Object(o["resolveComponent"])("ion-list"),m=Object(o["resolveComponent"])("ion-content"),g=Object(o["resolveComponent"])("ion-footer"),f=Object(o["resolveComponent"])("ion-page");return Object(o["openBlock"])(),Object(o["createBlock"])(f,null,{default:Object(o["withCtx"])(()=>[Object(o["createVNode"])(l,null,{default:Object(o["withCtx"])(()=>[Object(o["createVNode"])(c,null,{default:Object(o["withCtx"])(()=>[Object(o["createVNode"])(s,{class:"his-lg-text"},{default:Object(o["withCtx"])(()=>[Object(o["createTextVNode"])(Object(o["toDisplayString"])(e.title),1)]),_:1})]),_:1})]),_:1}),Object(o["createVNode"])(m,null,{default:Object(o["withCtx"])(()=>[Object(o["createVNode"])(b,null,{default:Object(o["withCtx"])(()=>[(Object(o["openBlock"])(!0),Object(o["createBlock"])(o["Fragment"],null,Object(o["renderList"])(e.items,(t,a)=>(Object(o["openBlock"])(),Object(o["createBlock"])(h,{class:"his-md-text",key:a},{default:Object(o["withCtx"])(()=>[e.ddeEnabled?(Object(o["openBlock"])(),Object(o["createBlock"])(d,{key:0,slot:"start",modelValue:t.isChecked,"onUpdate:modelValue":e=>t.isChecked=e},null,8,["modelValue","onUpdate:modelValue"])):Object(o["createCommentVNode"])("",!0),Object(o["createVNode"])(u,{color:t.isComplete?"":"danger"},{default:Object(o["withCtx"])(()=>[Object(o["createTextVNode"])(Object(o["toDisplayString"])(t.name)+" ("+Object(o["toDisplayString"])(t.gender)+") "+Object(o["toDisplayString"])(t.birthdate)+" ",1),ms,gs,Object(o["createVNode"])("b",null,Object(o["toDisplayString"])(t.curDistrict||"Unknown"),1),fs,Object(o["createVNode"])("b",null,Object(o["toDisplayString"])(t.homeVillage||"Unknown"),1)]),_:2},1032,["color"]),Object(o["createVNode"])(p,{size:"medium",onClick:()=>e.reassignIdentifier(t)},{default:Object(o["withCtx"])(()=>[Os]),_:1},8,["onClick"]),t.isComplete?Object(o["createCommentVNode"])("",!0):(Object(o["openBlock"])(),Object(o["createBlock"])(p,{key:1,size:"medium",color:"warning","router-link":"/patient/registration?edit_person="+t.patientID},{default:Object(o["withCtx"])(()=>[js]),_:2},1032,["router-link"]))]),_:2},1024))),128))]),_:1})]),_:1}),Object(o["createVNode"])(g,null,{default:Object(o["withCtx"])(()=>[Object(o["createVNode"])(c,{color:"dark"},{default:Object(o["withCtx"])(()=>[Object(o["createVNode"])(p,{"router-link":"/",color:"danger",slot:"start",size:"large"},{default:Object(o["withCtx"])(()=>[_s]),_:1}),e.itemsChecked.length>0?(Object(o["openBlock"])(),Object(o["createBlock"])(p,{key:0,onClick:e.clear,color:"warning",slot:"end",size:"large"},{default:Object(o["withCtx"])(()=>[vs]),_:1},8,["onClick"])):Object(o["createCommentVNode"])("",!0),e.itemsChecked.length>1?(Object(o["openBlock"])(),Object(o["createBlock"])(p,{key:1,onClick:t[1]||(t[1]=t=>e.onAction(e.mergeSelected,"merge")),color:"primary",size:"large",slot:"end"},{default:Object(o["withCtx"])(()=>[Object(o["createTextVNode"])(" Merge ("+Object(o["toDisplayString"])(e.itemsChecked.length)+") ",1)]),_:1})):Object(o["createCommentVNode"])("",!0)]),_:1})]),_:1})]),_:1})}var ws=Object(o["defineComponent"])({components:{IonPage:D["D"],IonCheckbox:D["k"],IonButton:D["d"],IonList:D["y"],IonItem:D["w"],IonToolbar:D["Q"],IonHeader:D["q"],IonTitle:D["P"],IonContent:D["n"],IonFooter:D["o"]},data:()=>({dde:{},ddeEnabled:!1,items:[],title:"",npid:""}),watch:{$route:{handler({params:e}){e&&(this.npid=e.npid,this.title=`Duplicates for NPID (${this.npid})`,this.init(this.npid))},deep:!0,immediate:!0}},computed:{itemsChecked(){return this.items.filter(e=>e.isChecked)}},methods:{async onAction(e,t="proceed"){const a=await Object(j["a"])(`\n                Are you sure you want to ${t}?\n            `);if(a)try{await e()}catch(n){Object(j["e"])(""+n),console.error(n)}},async mergeSelected(){if(!this.itemsChecked.every(e=>e.isComplete))return Object(j["e"])("One or more patients have missing data. Please update them before merging.",5e3);await this.dde.postMerge(this.itemsChecked)&&(await this.dde.printNpid(this.dde.patientID),Object(St["b"])(this.dde.patientID,this.$router))},async reassignIdentifier(e){if(!e.isComplete&&this.ddeEnabled){const t=await Object(j["a"])("Do you want to update missing information?",{header:"Incomplete Demographics"});if(t){let t="edit_person="+e.patientID;t+="&dde_reassign=true",t+="&doc_id="+e.docID,this.$router.push("/patient/registration?"+t)}}else this.onAction(async()=>{this.ddeEnabled?await this.dde.reassignNpid(e.docID,e.patientID)&&await this.dde.printNpid(e.patientID):"function"===typeof e.assignLocalNpidAndPrint&&await e.assignLocalNpidAndPrint(),Object(St["b"])(e.patientID,this.$router)},"Reassign")},buildItems(e){return e.map(e=>{try{const t=new Et["a"](e);return{isChecked:!1,patientID:t.getID(),name:t.getFullName(),gender:t.getGender(),birthdate:le["b"].toStandardHisDisplayFormat(t.getBirthdate()),curDistrict:t.getCurrentDistrict(),homeVillage:t.getHomeVillage(),docID:t.getPatientIdentifier(27),isComplete:t.patientIsComplete(),assignLocalNpidAndPrint:async()=>{await t.assignNpid(),await t.printNationalID()}}}catch(t){Object(j["c"])("An error has occured while building data"),console.error(t)}return{isChecked:!1,patientID:"N/A",name:"N/A",gender:"N/A",birthdate:"N/A",curDistrict:"N/A",homeVillage:"N/A",docID:"N/A",isComplete:!1}})},clear(){this.items=this.items.map(e=>(e.isChecked=!1,e))},async init(e){try{if(this.dde=new $t["a"],await this.dde.loadDDEStatus(),this.ddeEnabled=this.dde.isEnabled(),this.ddeEnabled){const{locals:t,remotes:a}=await this.dde.findNpid(e);this.items=[...this.buildItems(t),...this.buildItems(a)]}else{const t=await Et["a"].findByNpid(e);t&&(this.items=this.buildItems(t))}}catch(t){Object(j["c"])(""+t,5e3)}}}});const Ns=N()(ws,[["render",ys]]);var Cs=Ns,Vs=a("8642"),Ds=Object(o["defineComponent"])({name:"Scanner",data(){return{app:{},patientID:"",firstname:"",surname:"",gender:"",birthday:"",district:"",clientID:"",nationalID:"",patient:{},malawiNationalID:[],displayModal:!1}},async mounted(){this.scanBarcodeQRcode()},methods:{async scanBarcodeQRcode(){await Vs["a"].scan().then(async e=>{if(e.text.length>30)if(await Ie["b"].malawiNationalIDScannerEnabled()){this.filterNationalID(e);const t=await Et["a"].findByOtherID(28,this.clientID);if(0==t.length)this.searchPatientByNameGender();else{Object(j["d"])("Patient found");const e="person_id="+t[0].patient_id;this.$router.push("/patients/confirm?"+e)}}else Object(j["e"])("Scanning of Malawi National ID is disabled"),this.goHome();else{const t=await Et["a"].findByNpid(e.text);0==t.length?(Object(j["e"])("Patient not found"),this.goHome()):this.filterPatientData(t)}}).catch(e=>{Object(j["e"])("Fails to scan"),this.goHome()})},async filterPatientData(e){const t=await Et["a"].findByID(e[0].patient_id);t&&(this.patient=new Et["a"](t),this.firstname=this.patient.getGivenName(),this.surname=this.patient.getFamilyName(),this.gender=this.patient.getGender(),this.birthday=this.patient.getBirthdate(),this.clientID=this.patient.getMalawiNationalID())},async goHome(){this.$router.push("/home")},filterNationalID(e){this.malawiNationalID=e.text.split("<"),this.malawiNationalID=this.malawiNationalID.at(-1).split("~"),this.clientID=this.malawiNationalID[2],this.surname=this.capitaliseFirstLetter(this.malawiNationalID[1].toLowerCase()),this.firstname=this.capitaliseFirstLetter(this.malawiNationalID[3].split(",")[0].toLowerCase()),this.gender=this.malawiNationalID[5],this.birthday=this.malawiNationalID[6]},searchPatientByNameGender(){this.$router.push({path:"/patient/registration",query:{given_name:this.firstname,family_name:this.surname,gender:this.gender,birthdate:this.birthday,malawiNationalID:this.clientID,nationalIDStatus:"true"}})},capitaliseFirstLetter(e){return e.replace(/(^\w|\s\w)/g,e=>e.toUpperCase())}}});const ks=Ds;var Ts=ks;const Is=(()=>{let e=[];return or["a"].forEach(t=>{t.appRoutes&&(e=[...e,...t.appRoutes])}),e})(),xs=[...Is,{path:"/",redirect:"/home"},{path:"/npid/duplicates/:npid",name:"NPID Duplicates",component:Cs},{path:"/home",name:"Home",component:qe},{name:"Merge rollback",path:"/merge/rollback/:id",component:()=>a.e("chunk-a279802a").then(a.bind(null,"8eed"))},{name:"View Duplicates",path:"/view_duplicates",component:()=>a.e("chunk-d56df1c4").then(a.bind(null,"7bdc"))},{name:"Update site location",path:"/location/update/site",component:()=>a.e("chunk-2d0a4d35").then(a.bind(null,"07a9"))},{name:"Update site code",path:"/location/update/code",component:()=>a.e("chunk-2d0b347d").then(a.bind(null,"2867"))},{path:"/login",name:"Login",component:A},{path:"/search_patient",name:"Search Patient",component:va},{path:"/session/date",name:"Session Date",component:cr},{path:"/users/usage",name:"User system usage",component:br},{path:"/print/location",name:"Print Location",component:_r},{path:"/select_hc_location",name:"HC Location",component:ha},{path:"/search_client",name:"Search client",component:An},{path:"/patient/dashboard/:id",name:"Patient Dashboard",component:Zi},{path:"/patient/registration",name:"Patient Registration",component:Un},{path:"/guardian/registration/:patient_id",name:"Guardian Registration",component:Kn},{path:"/example",name:"Example",component:jo},{path:"/patient/search_results",name:"Patient Search results",component:ho},{path:"/patients/search/id",name:"ID Search",component:Co},{path:"/patients/confirm",name:"Patient confirmation",component:aa},{path:"/patients/merge",name:"Patient Merging",component:bs},{path:"/patient/programs/:patient_id",name:"Program(s)",component:Pr},{path:"/preferences",name:"Preferences",component:nr},{path:"/user",name:"User",component:$r},{path:"/settings/host",name:"API host settings",component:kr},{path:"/lab/results/:patient_id",name:"Lab Results",component:Fr},{path:"/portal/config",name:"Portal settings",component:Nr},{path:"/camera_scanner",name:"Camera scanner",component:Ts}],Ss=Object(n["a"])({history:Object(n["b"])("/"),routes:xs});Ss.beforeEach((e,t,a)=>{D["V"].getTop().then(e=>e?D["V"].dismiss():null),D["X"].getTop().then(e=>e?D["X"].dismiss():null),D["T"].getTop().then(e=>e?D["T"].dismiss():null),D["Y"].getTop().then(e=>e?D["Y"].dismiss():null);const n=["/login","/settings/host"];sessionStorage.getItem("apiKey")||n.includes(e.path)||a("/login"),a()});var Ps=t["a"]=Ss},b10e:function(e,t,a){},b1e9:function(e,t,a){"use strict";a("b10e")},b2c0:function(e,t,a){},b308:function(e,t,a){"use strict";a("b2c0")},b446:function(e,t,a){"use strict";a.d(t,"a",(function(){return n})),a.d(t,"b",(function(){return y}));a("caad"),a("13d5");var n,o=a("d95e"),i=[{label:"Jan",value:1},{label:"Feb",value:2},{label:"Mar",value:3},{label:"Apr",value:4},{label:"May",value:5},{label:"Jun",value:6},{label:"Jul",value:7},{label:"Aug",value:8},{label:"Sep",value:9},{label:"Oct",value:10},{label:"Nov",value:11},{label:"Dec",value:12}],r=a("9283"),s=a("2706"),c=a("3800"),l=a("6be2"),d=a("5a0c"),u=a.n(d),p=a("1c74");function h(e,t,a=!0){const n=[];return a&&n.push("UNKNOWN"),{id:e,helpText:t+" Year",appearInSummary:()=>!1,type:o["b"].TT_TEXT,config:{customKeyboard:[c["i"],[n,["DELETE"]]]}}}function b(e,t){return{id:e,helpText:t+" Month",appearInSummary:()=>!1,type:o["b"].TT_SELECT,options:()=>i}}function m(e,t){return{id:e,helpText:t+" Day",type:o["b"].TT_MONTHLY_DAYS,appearInSummary:()=>!1}}function g(e,t){return{id:e,helpText:t+" Estimated period",type:o["b"].TT_SELECT,appearInSummary:()=>!1,options:()=>[{label:"6 months ago",value:180},{label:"12 months ago",value:365},{label:"18 months ago",value:540},{label:"24 months ago",value:730},{label:"Over 2 years ago",value:730}]}}function f(e,t){return{id:e,helpText:t+" Age Estimate",type:o["b"].TT_NUMBER,appearInSummary:()=>!1,config:{keypad:l["e"]}}}function O(e){return parseInt(e)<10?"0"+e:e}async function j(e,t,a){if(t.defaultValue){const n=await t.defaultValue(e);if(n){const[e,t,o]=n.split("-");switch(a){case"Year":return e||"";case"Month":return parseInt(t)||"";case"Day":return parseInt(o)||""}}}return""}function _(e){return r["b"].toStandardHisDisplayFormat(e)}function v(e,t,a,n){if(t.minDate){const o=t.minDate(a,n);if(new Date(e)<new Date(o))return[`${_(e)} is less than minimum date of ${_(o)}`]}if(t.maxDate){const o=t.maxDate(a,n);if(o&&new Date(e)>new Date(o))return[`${_(e)} is greater than max date of  ${_(o)}`]}}function y(e,t=""){let a="",o="",c="",l="";const d="year_"+e.id,y="month_"+e.id,w="day_"+e.id,N="age_estimate_"+e.id,C="duration_estimate_"+e.id,V=h(d,e.helpText,e.estimation.allowUnknown),D=b(y,e.helpText),k=m(w,e.helpText),T=f(N,e.helpText),I=g(C,e.helpText),x="boolean"===typeof e.estimation.allowUnknownMonthDay&&e.estimation.allowUnknownMonthDay,S=t=>!(t[d]&&t[d].value&&["Unknown"].includes(t[d].value))&&(!e.condition||e.condition(t)),P=(e,t)=>{const a=[{type:"year",value:o,default:"YYYY"},{type:"month",value:c,default:"MM"},{type:"day",value:l,default:"DD"}];return a.reduce((a,n)=>{const o=[null,void 0,"Unknown",""];return t===n.type?o.includes(e)?a.push(n.default):a.push(e):o.includes(n.value)?a.push(n.default):a.push(n.value),a},[]).join("-")};V.updateHelpTextOnValue=e=>`${V.helpText} (${P(null===e||void 0===e?void 0:e.label,"year")})`,V.proxyID=e.id,V.unload=e=>o=e.value.toString(),V.config={...V.config,...e.config},V.defaultValue=t=>j(t,e,"Year"),V.condition=t=>!e.condition||e.condition(t),V.validation=(t,a,n)=>{if(e.required&&s["a"].required(t))return["Year cannot be empty"];const o=t?t.value:"";if(!e.estimation.allowUnknown&&o.toString().match(/unknown/i))return["Value unknown is not permitted"];if(o&&!["Unknown"].includes(o)&&isNaN(o)||o<1900)return["Invalid Year"];if(o&&"function"===typeof e.minDate){const t=r["b"].getYear(e.minDate(a,n));if(parseInt(o)<t)return[`Year of ${o} is less than Minimum year of ${t}`]}if(o&&"function"===typeof e.maxDate){const t=e.maxDate(a,n);if(t&&o>r["b"].getYear(t))return[`Year of ${o} exceeds Maximum year of ${r["b"].getYear(t)}`]}return null},V.summaryMapValue=()=>({label:e.summaryLabel||e.helpText,value:a?_(a):"Unknown"}),V.appearInSummary=(t,a)=>a===e.id,V.computedValue=t=>{if(a){const[n,o,i]=a.split("-");return a=`${t.value}-${o}-${i}`,e.computeValue(a,!1)}if(t&&"Unknown"===t.value)return a="",e.computeValue("Unknown",!1)},D.updateHelpTextOnValue=e=>`${D.helpText} (${P(null===e||void 0===e?void 0:e.label,"month")})`,D.proxyID=e.id,D.unload=e=>c=O(e.value.toString()),D.condition=e=>S(e),D.validation=e=>s["a"].required(e),D.defaultValue=t=>j(t,e,"Month"),x&&(D.options=()=>[...i,{label:"Unknown",value:"Unknown"}]),D.computedValue=(t,n)=>{if((""+t.value).match(/unknown/i))return a=n[d].value+"-07-15",e.computeValue(a,!0);if(a){const[n,o,i]=a.split("-"),r=O(""+t.value);return a=`${n}-${r}-${i}`,e.computeValue(a,!1)}},k.proxyID=e.id,k.updateHelpTextOnValue=e=>`${k.helpText} (${P(null===e||void 0===e?void 0:e.label,"day")})`,k.condition=e=>!(""+e[y].value).match(/unknown/i)&&S(e),k.validation=(t,n,o)=>s["a"].required(t)?["Day is required for date"]:v(a,e,n,o),k.defaultValue=t=>j(t,e,"Day"),k.computedValue=t=>{const n=!!(""+t.value).match(/unknown/i);return l=n?"15":O(""+t.value),a=`${o}-${c}-${l}`,e.computeValue(a,n)},k.unload=(t,a,n,o)=>{e.unload&&e.unload(t,a,n,o)},k.beforeNext=(t,n)=>!e.beforeNext||e.beforeNext(a,n),k.config={year:e=>e[d].value,month:e=>e[y].value},x||(k.config.keyboardActions=[]);const A=(t,a)=>{const n=["Unknown"===t[d].value,!e.condition||e.condition(t),e.estimation.estimationFieldType===a];return n.every(Boolean)};return T.proxyID=e.id,T.validation=(t,n,o)=>{if(t&&t.value>300)return["Age estimate is too high and exceeding hard limit of 300"];if(isNaN(parseInt(t.value.toString())))return["Please enter a valid number"];const i=/^(12[0-7]|1[01][0-9]|[1-9]?[0-9])$/;return t.value.toString().match(i)?v(a,e,n,o):["Not a valid age estimate"]},T.condition=e=>A(e,n.AGE_ESTIMATE_FIELD),T.computedValue=t=>{const n=u()(p["e"].getSessionDate()).subtract(t.value,"years").year();return a=n+"-07-15",e.computeValue(a,!0)},T.beforeNext=(t,n)=>!e.beforeNext||e.beforeNext(a,n),I.proxyID=e.id,I.validation=(t,n,o)=>s["a"].required(t)?["Please select an estimate"]:v(a,e,n,o),I.condition=e=>A(e,n.MONTH_ESTIMATE_FIELD),I.computedValue=t=>(a=u()(p["e"].getSessionDate()).subtract(t.value,"day").format(r["a"]),e.computeValue(a,!0)),I.beforeNext=(t,n)=>!e.beforeNext||e.beforeNext(a,n),[V,D,k,T,I]}(function(e){e["AGE_ESTIMATE_FIELD"]="age-estimate-field",e["MONTH_ESTIMATE_FIELD"]="month-period-estimate-field"})(n||(n={}))},b46d:function(e,t,a){},b515:function(e,t,a){"use strict";a.d(t,"a",(function(){return i}));var n=a("cc6f"),o=a("2ef0");class i extends n["a"]{constructor(e,t){super(e,6,t)}isNotEmptyandNumber(e){return(""+e.value).match(/^-?\d+\.?\d*$/)?null:["Invalid entry for "+e.label]}isNotEmptyandFloat(e){return(""+e.value).match(/^\d{1,3}\.\d{1,5}$/)?null:[`Invalid entry for ${e.label}. Don't forget to add a decimal. e.g. 56.2 ${e.other.modifier}`]}checkMinMax(e,t,a){const n=[];var o,i;parseFloat(""+e.value)<t&&n.push([`${e.label} entered is less than minimum ${t} ${(null===e||void 0===e||null===(o=e.other)||void 0===o?void 0:o.modifier)||""}`]);parseFloat(""+e.value)>a&&n.push([`${e.label} entered is greater than maximum ${a} ${(null===e||void 0===e||null===(i=e.other)||void 0===i?void 0:i.modifier)||""}`]);return n.length>0?n:null}validateAll(e){const t=[];return e.map(e=>{const a=this.validator(e);return Object(o["isArray"])(a)?t.push(a):null}),t.length>0?t:null}mergeErrors(e){const t=[];return e.forEach(e=>{Object(o["isArray"])(e)&&t.push(e)}),t.length>0?t:null}isValidBPReading(e){const t=[],a=(""+e.value).match(/^\d{1,3}\/\d{1,3}$/g)?null:["Invalid BP reading"];if(t.push(a),null==a){const a=(""+e.value).split("/"),n={label:"Systolic",value:a[0]},o={label:"Diastolic",value:a[1]};t.push(this.checkMinMax(o,30,200)),t.push(this.checkMinMax(n,40,250))}return this.mergeErrors(t)}validator(e){const t=[{name:"Weight",validator:e=>{const t=this.isNotEmptyandFloat(e),a=this.checkMinMax(e,2,250);return this.mergeErrors([t,a])}},{name:"Height",validator:e=>{const t=[];return t.push(this.isNotEmptyandNumber(e)),t.push(this.checkMinMax(e,40,220)),this.mergeErrors(t)}},{name:"BP",validator:e=>this.isValidBPReading(e)},{name:"Temp",validator:e=>{const t=this.isNotEmptyandNumber(e),a=this.checkMinMax(e,30,42);return this.mergeErrors([t,a])}},{name:"SP02",validator:e=>{const t=this.checkMinMax(e,40,100);return this.mergeErrors([t])}},{name:"Pulse",validator:e=>{const t=this.checkMinMax(e,50,120);return this.mergeErrors([t])}}],a=t.filter(t=>t.name===e.label);return a.length>0?a[0].validator(e):null}}},b53b:function(e,t,a){"use strict";a("3c35")},b5e4:function(e,t,a){"use strict";a.d(t,"e",(function(){return b})),a.d(t,"d",(function(){return m})),a.d(t,"c",(function(){return g})),a.d(t,"a",(function(){return O})),a.d(t,"b",(function(){return j}));var n=a("8a30"),o=a("7a23");const i={class:"vertically-align ion-padding-horizontal"};function r(e,t,a,n,r,s){const c=Object(o["resolveComponent"])("action-header"),l=Object(o["resolveComponent"])("ion-content"),d=Object(o["resolveComponent"])("action-footer");return Object(o["openBlock"])(),Object(o["createBlock"])(o["Fragment"],null,[Object(o["withDirectives"])(Object(o["createVNode"])(c,{title:e.title,subtitle:e.subtitle,color:e.color},null,8,["title","subtitle","color"]),[[o["vShow"],e.title||e.subtitle]]),Object(o["createVNode"])(l,{style:{"text-align":"center"}},{default:Object(o["withCtx"])(()=>[Object(o["createVNode"])("h2",i,Object(o["toDisplayString"])(e.body),1)]),_:1}),Object(o["createVNode"])(d,{buttons:e.actionButtons},null,8,["buttons"])],64)}var s=a("8efc"),c=Object(o["defineComponent"])({mixins:[s["a"]],props:{body:{type:String,require:!0}}}),l=a("6b0d"),d=a.n(l);const u=d()(c,[["render",r]]);var p=u;async function h(e,t="primary",a=2e3){const o=await n["Y"].create({message:e,position:"top",animated:!0,duration:a,color:t,cssClass:"his-md-text",keyboardClose:!0,buttons:[{side:"end",icon:"close",role:"cancel"}]});return o.present()}function b(e,t=2e3){return h(e,"warning",t)}function m(e,t=1e3){return h(e,"success",t)}function g(e,t=2e3){return h(e,"danger",t)}function f(e,t="",a=[]){return n["X"].create({component:p,backdropDismiss:!1,cssClass:"small-modal custom-modal-backdrop",componentProps:{subtitle:t,body:e,actionButtons:a}})}async function O(e,t={}){const a=await f(e,t.header||"Confirmation",[{name:t.cancelBtnLabel||"No",size:"large",slot:"start",color:"danger",visible:!0,role:"Cancel",onClick:({role:e})=>n["X"].dismiss(e)},{name:t.confirmBtnLabel||"Yes",size:"large",slot:"end",color:"success",visible:!0,role:"Confirm",onClick:({role:e})=>n["X"].dismiss(e)}]);a.present();const{data:o}=await a.onDidDismiss();return"Confirm"===o}async function j(e,t="Information"){const a=await f(e,t,[{name:"OK",size:"large",slot:"end",color:"success",visible:!0,role:"Confirm",onClick:()=>n["X"].dismiss()}]);a.present()}},b625:function(e,t,a){},b681:function(e,t,a){},b6f2:function(e,t,a){},b744:function(e,t,a){"use strict";a("bfda")},b77b:function(e,t,a){"use strict";a("7cf4")},b85a:function(e,t,a){},b89f:function(e,t,a){"use strict";a.d(t,"a",(function(){return c}));var n=a("1c74"),o=a("156d"),i=a("2ed9"),r=a("b5e4"),s=a("0ba8");class c extends n["e"]{constructor(){super()}async execPrint(e){const t=await n["e"].getText(e);if(!t)throw"Unable to print Label. Try again later";document.location=await o["b"].expandPath(e)}async batchPrintLbls(e,t=!0){const{platformType:a}=Object(i["a"])();if("desktop"===a.value){const a=[];t&&s["b"].emit(s["a"].SHOW_MODAL,"zebra-modal");for(const t of e)try{await this.execPrint(t)}catch(n){a.push(n)}t&&await c.delay(2e3),a.length>0&&await Object(r["e"])(a.filter((e,t,a)=>a.indexOf(e)===t).join(),3e3)}else Object(r["e"])("Sorry, your Platform does not support Label printing. Bye!")}async printLbl(e,t=!0){const{platformType:a}=Object(i["a"])();if("desktop"===a.value)try{t&&s["b"].emit(s["a"].SHOW_MODAL,"zebra-modal"),await this.execPrint(e)}catch(n){Object(r["e"])(n,3e3)}else Object(r["e"])("Sorry, your Platform does not support Label printing. Bye!")}async printLocation(e){await this.printLbl("labels/location?location_id="+e)}async printDrug(e,t){await this.printLbl(`drugs/${e}/barcode?quantity=${t}`)}}},b913:function(e,t,a){"use strict";a("a246")},b993:function(e,t,a){},ba82:function(e,t,a){"use strict";a.d(t,"a",(function(){return s})),a.d(t,"b",(function(){return c}));a("13d5");var n=a("8baf"),o=a("0da4"),i=a.n(o);function r(e){return e.reduce((e,t)=>e+t.map(e=>`"${e}"`).join(",")+"\n","")}function s(e,t,a="document"){const n=r(e.concat(t)),o=new Blob([n],{type:"text/csv;charset=utf-8;"}),i=document.createElement("a");i.setAttribute("id","csv"),i.href=window.URL.createObjectURL(o),i.setAttribute("download",a+".csv"),document.body.appendChild(i),i.click(),i.remove()}function c(e,t,a="document",o=!1){const r=new n["default"],s=r.splitTextToSize(a,180),c=s.length<=1?20:10*s.length;r.text(s,14,10);const l={startY:c,head:[e[e.length-1]],body:t};o&&(l.tableWidth="wrap",l.horizontalPageBreak=!0,l.horizontalPageBreakRepeat=0),i()(r,l),r.save(a+".pdf")}},bd75:function(e,t,a){"use strict";a("91ef")},bdcb:function(e,t,a){"use strict";a("69c8")},beb6:function(e,t,a){},bef6:function(e,t,a){"use strict";function n(e){let t="";for(const[a,n]of Object.entries(e))t+=`${a}=${n}&`;return t}t["a"]={parameterizeObjToString:n}},bfda:function(e,t,a){},c05f:function(e,t,a){"use strict";var n=a("7a23");function o(e,t,a,o,i,r){const s=Object(n["resolveComponent"])("base-input"),c=Object(n["resolveComponent"])("ion-radio"),l=Object(n["resolveComponent"])("ion-label"),d=Object(n["resolveComponent"])("ion-item"),u=Object(n["resolveComponent"])("ion-radio-group"),p=Object(n["resolveComponent"])("ion-list"),h=Object(n["resolveComponent"])("view-port"),b=Object(n["resolveComponent"])("his-keyboard");return Object(n["openBlock"])(),Object(n["createBlock"])(n["Fragment"],null,[Object(n["createVNode"])(h,null,{default:Object(n["withCtx"])(()=>[Object(n["createVNode"])(s,{value:e.value,onOnValue:e.onKbValue},null,8,["value","onOnValue"]),Object(n["createVNode"])(p,{class:"view-port-content"},{default:Object(n["withCtx"])(()=>[Object(n["createVNode"])(u,{modelValue:e.selectedTimeUnit,"onUpdate:modelValue":t[1]||(t[1]=t=>e.selectedTimeUnit=t)},{default:Object(n["withCtx"])(()=>[(Object(n["openBlock"])(!0),Object(n["createBlock"])(n["Fragment"],null,Object(n["renderList"])(e.timeUnits,(e,t)=>(Object(n["openBlock"])(),Object(n["createBlock"])(d,{class:"his-md-text",key:t},{default:Object(n["withCtx"])(()=>[Object(n["createVNode"])(c,{slot:"start",value:e},null,8,["value"]),Object(n["createVNode"])(l,null,{default:Object(n["withCtx"])(()=>[Object(n["createTextVNode"])(Object(n["toDisplayString"])(e),1)]),_:2},1024)]),_:2},1024))),128))]),_:1},8,["modelValue"])]),_:1})]),_:1}),Object(n["createVNode"])(b,{kbConfig:e.keyboard,onKeyPress:e.keypress},null,8,["kbConfig","onKeyPress"])],64)}var i=a("36ad"),r=a("db10"),s=a("2345"),c=a("6be2"),l=a("0a79"),d=a("51c8"),u=a("8a30"),p=Object(n["defineComponent"])({components:{BaseInput:i["a"],HisKeyboard:r["a"],ViewPort:l["a"],IonItem:u["w"],IonList:u["y"],IonLabel:u["x"],IonRadio:u["E"],IonRadioGroup:u["F"]},mixins:[d["a"]],data:()=>({value:"",selectedTimeUnit:"",timeUnits:["Hours","Days","Weeks","Months","Years"],keyboard:c["d"]}),activated(){this.$emit("onFieldActivated",this)},methods:{onKbValue(e){this.value=e},keypress(e){this.value=Object(s["a"])(e,this.value)},emitValue(e,t){if(e&&t){const a=`${e} ${t}`;this.$emit("onValue",e?{label:a,value:a,other:{value:e,timeUnit:t}}:null)}else this.$emit("onValue",null)}},watch:{value(e){this.emitValue(e,this.selectedTimeUnit)},selectedTimeUnit(e){this.emitValue(this.value,e)},clear(){this.value="",this.selectedTimeUnit=""}}}),h=a("6b0d"),b=a.n(h);const m=b()(p,[["render",o]]);t["a"]=m},c144:function(e,t,a){},c18c:function(e,t,a){},c1e4:function(e,t,a){"use strict";a.d(t,"a",(function(){return o}));var n=a("1c74");class o extends n["e"]{constructor(){super()}static getCurrentUser(){const e=n["e"].getUserID();if(e)return this.getUserByID(e)}static getUserByID(e){return this.getJson("users/"+e)}static createUser(e){return this.postJson("users",e)}static updateUser(e,t){return this.putJson("users/"+e,t)}static activateUser(e){return this.postJson(`users/${e}/activate`,{})}static deactivateUser(e){return this.postJson(`users/${e}/deactivate`,{})}static isAdmin(){const e=super.getUserRoles().filter(e=>e.role.match(/Program Manager|Superuser|System Developer/i));return e.length>0}static isNurse(){const e=super.getUserRoles().filter(e=>e.role.match(/Nurse/i));return e.length>0}static isDoctor(){const e=super.getUserRoles().filter(e=>e.role.match(/Doctor/i));return e.length>0}static isClinician(){const e=super.getUserRoles().filter(e=>e.role.match(/Clinician/i));return e.length>0}static getAllUsers(){return this.getJson("users",{page_size:100})}static getAllRoles(){return this.getJson("roles",{page_size:100})}static getUsers(){return super.getJson("users",{role:"Provider"})}static getSystemUsageByUsers(e,t){return super.getJson("user_system_usage",{start_date:e,end_date:t,program_id:super.getProgramID(),date:super.getSessionDate()})}}},c21d:function(e,t,a){"use strict";a.d(t,"a",(function(){return i}));a("caad");function n(e,t){const a=[],n=[-1,"",null,void 0];for(const o in t){if(!(o in e))continue;const i=e[o];n.includes(i)?a.push(!1):a.push(t[o](i,e))}return a.every(Boolean)}function o(e){return e.sort((e,t)=>e.priority<t.priority?-1:1)}function i(e,t,a="",i=""){const r=[];for(const o in t){const s=t[o],c=[s.target&&a&&s.target!=a,s.targetEvent&&i&&s.targetEvent!=i];c.some(Boolean)||n(e,s.conditions)&&(s.title=o,s.description&&(s.description.text=s.description.info(e)),r.push(s))}return o(r)}},c2f2:function(e,t,a){"use strict";a("4582")},c336:function(e,t,a){},c419:function(e,t,a){},c481:function(e,t,a){},c4e4:function(e,t,a){"use strict";var n=a("7a23");const o=Object(n["withScopeId"])("data-v-16757c08");Object(n["pushScopeId"])("data-v-16757c08");const i=Object(n["createTextVNode"])("Lab orders"),r={class:"ion-margin-bottom"},s=Object(n["createVNode"])("div",{class:"his-md-text side-title"}," Select specimen ",-1),c=Object(n["createVNode"])("div",{class:"his-md-text side-title"}," Main test(s) reason ",-1),l={style:{background:"lightyellow",height:"34vh"}},d={class:"his-sm-text"},u=Object(n["createVNode"])("thead",null,[Object(n["createVNode"])("tr",null,[Object(n["createVNode"])("th",null,"Test"),Object(n["createVNode"])("th",null,"Specimen"),Object(n["createVNode"])("th",null,"Reason"),Object(n["createVNode"])("th",null,"Action")])],-1),p=Object(n["createTextVNode"])("X"),h=Object(n["createTextVNode"])(" Place orders "),b=Object(n["createTextVNode"])(" Close ");Object(n["popScopeId"])();const m=o((function(e,t,a,m,g,f){const O=Object(n["resolveComponent"])("ion-title"),j=Object(n["resolveComponent"])("ion-toolbar"),_=Object(n["resolveComponent"])("ion-header"),v=Object(n["resolveComponent"])("ion-label"),y=Object(n["resolveComponent"])("ion-checkbox"),w=Object(n["resolveComponent"])("ion-item"),N=Object(n["resolveComponent"])("ion-list"),C=Object(n["resolveComponent"])("ion-col"),V=Object(n["resolveComponent"])("ion-radio"),D=Object(n["resolveComponent"])("ion-radio-group"),k=Object(n["resolveComponent"])("ion-button"),T=Object(n["resolveComponent"])("ion-row"),I=Object(n["resolveComponent"])("ion-grid"),x=Object(n["resolveComponent"])("ion-content"),S=Object(n["resolveComponent"])("ion-footer");return Object(n["openBlock"])(),Object(n["createBlock"])(n["Fragment"],null,[Object(n["createVNode"])(_,null,{default:o(()=>[Object(n["createVNode"])(j,null,{default:o(()=>[Object(n["createVNode"])(O,{class:"his-lg-text"},{default:o(()=>[i]),_:1})]),_:1})]),_:1}),Object(n["createVNode"])(x,{style:{overflow:"hidden",background:"grey",height:"70vh"}},{default:o(()=>[Object(n["createVNode"])(I,null,{default:o(()=>[Object(n["createVNode"])(T,null,{default:o(()=>[Object(n["createVNode"])(C,{size:"6"},{default:o(()=>[Object(n["createVNode"])(N,{style:{overflowY:"auto",height:"75vh"}},{default:o(()=>[(Object(n["openBlock"])(!0),Object(n["createBlock"])(n["Fragment"],null,Object(n["renderList"])(e.testTypes,(t,a)=>(Object(n["openBlock"])(),Object(n["createBlock"])(w,{class:"his-sm-text",key:t,disabled:null!==e.activeIndex&&e.activeIndex!==a&&!e.isOrderComplete,detail:""},{default:o(()=>[Object(n["createVNode"])(v,{"text-wrap":""},{default:o(()=>[Object(n["createTextVNode"])(Object(n["toDisplayString"])(t.name),1)]),_:2},1024),Object(n["createVNode"])(y,{modelValue:t.isChecked,"onUpdate:modelValue":e=>t.isChecked=e,slot:"start",onIonChange:n=>e.onSelectTest(t.name,a,n)},null,8,["modelValue","onUpdate:modelValue","onIonChange"])]),_:2},1032,["disabled"]))),128))]),_:1})]),_:1}),null!=e.activeIndex&&e.selectedOrders.length>0?(Object(n["openBlock"])(),Object(n["createBlock"])(C,{key:0,style:{overflowY:"auto",height:"79vh"}},{default:o(()=>[Object(n["createVNode"])("div",r,[e.extendedLabsEnabled?Object(n["createCommentVNode"])("",!0):(Object(n["openBlock"])(),Object(n["createBlock"])(N,{key:0},{default:o(()=>[Object(n["createVNode"])(D,{modelValue:e.testTypes[e.activeIndex]["specimen"],"onUpdate:modelValue":t[1]||(t[1]=t=>e.testTypes[e.activeIndex]["specimen"]=t)},{default:o(()=>[s,(Object(n["openBlock"])(!0),Object(n["createBlock"])(n["Fragment"],null,Object(n["renderList"])(e.specimens,t=>(Object(n["openBlock"])(),Object(n["createBlock"])(w,{key:t},{default:o(()=>[Object(n["createVNode"])(v,null,{default:o(()=>[Object(n["createTextVNode"])(Object(n["toDisplayString"])(t.name),1)]),_:2},1024),Object(n["createVNode"])(V,{slot:"start",value:t.name,onClick:a=>e.addSpecimen(t)},null,8,["value","onClick"])]),_:2},1024))),128))]),_:1},8,["modelValue"])]),_:1})),Object(n["createVNode"])(D,{modelValue:e.testTypes[e.activeIndex]["reason"],"onUpdate:modelValue":t[2]||(t[2]=t=>e.testTypes[e.activeIndex]["reason"]=t)},{default:o(()=>[c,(Object(n["openBlock"])(!0),Object(n["createBlock"])(n["Fragment"],null,Object(n["renderList"])(e.reasons,e=>(Object(n["openBlock"])(),Object(n["createBlock"])(w,{class:"his-sm-text",key:e},{default:o(()=>[Object(n["createVNode"])(v,null,{default:o(()=>[Object(n["createTextVNode"])(Object(n["toDisplayString"])(e),1)]),_:2},1024),Object(n["createVNode"])(V,{slot:"start",value:e},null,8,["value"])]),_:2},1024))),128))]),_:1},8,["modelValue"])]),Object(n["createVNode"])("div",l,[Object(n["createVNode"])("table",d,[u,Object(n["createVNode"])("tbody",null,[(Object(n["openBlock"])(!0),Object(n["createBlock"])(n["Fragment"],null,Object(n["renderList"])(e.finalOrders,(t,a)=>(Object(n["openBlock"])(),Object(n["createBlock"])("tr",{key:a},[Object(n["createVNode"])("td",null,Object(n["toDisplayString"])(t.name),1),Object(n["createVNode"])("td",null,Object(n["toDisplayString"])(t.specimen||"N/A"),1),Object(n["createVNode"])("td",null,Object(n["toDisplayString"])(t.reason),1),Object(n["createVNode"])("td",null,[Object(n["createVNode"])(k,{onClick:a=>e.removeOrder(t.currentIndex),slot:"end",color:"danger"},{default:o(()=>[p]),_:1},8,["onClick"])])]))),128))])])])]),_:1})):Object(n["createCommentVNode"])("",!0)]),_:1})]),_:1})]),_:1}),Object(n["createVNode"])(S,null,{default:o(()=>[Object(n["createVNode"])(j,null,{default:o(()=>[Object(n["createVNode"])(k,{onClick:e.postActivities,size:"large",slot:"end",disabled:0===e.finalOrders.length},{default:o(()=>[h]),_:1},8,["onClick","disabled"]),Object(n["createVNode"])(k,{onClick:t[3]||(t[3]=t=>e.closeModal([])),size:"large",slot:"start",color:"danger"},{default:o(()=>[b]),_:1})]),_:1})]),_:1})],64)}));a("caad");var g=a("8a30"),f=a("b5e4"),O=a("9b7c"),j=a("cc6f");class _ extends j["a"]{constructor(e,t){super(e,57,t)}}var v=a("b89f"),y=a("d1ca"),w=Object(n["defineComponent"])({name:"Modal",props:{activities:{type:Object,required:!0},testFilters:{type:Array},title:{type:String,default:""}},watch:{activities:{handler(e){e&&(this.appActivities=[...e],this.getActivities())},immediate:!0}},async created(){this.extendedLabsEnabled=await y["b"].extendedLabEnabled()},methods:{async onSelectTest(e,t,a){this.$nextTick(async()=>{this.testTypes[t]["isChecked"]=a.target.checked,this.testTypes[t]["isChecked"]?(this.specimens=await O["a"].getSpecimens(e),this.testTypes[t]["currentIndex"]=t,this.activeIndex=t):this.removeOrder(t)})},async getActivities(){const e=await O["a"].getTestTypes();this.testTypes=e.map((e,t)=>(e.index="HIV viral load"===e.name?e.index=0:e.index=t+1,e)).sort((e,t)=>e.index<t.index?0:1).filter(e=>!Array.isArray(this.testFilters)||this.testFilters.includes(e.name))},removeOrder(e){this.testTypes[e]["isChecked"]=!1,this.testTypes[e]["reason"]=null,this.testTypes[e]["specimen"]=null,this.testTypes[e]["specimenConcept"]=null,this.activeIndex=null,this.specimens=[]},addSpecimen(e){this.testTypes[this.activeIndex]["specimenConcept"]=e.concept_id},async postActivities(){const e=""+this.$route.params.patient_id,t=new _(parseInt(e),-1),a=await t.createEncounter();if(a){const e=await O["a"].buildLabOrders(a,this.finalOrders),t=await O["a"].saveOrdersArray(a.encounter_id,e);if(!t)return Object(f["e"])("Unable to save lab orders");const n=await Object(f["a"])("Lab orders and encounter created!, print out your last orders?",{confirmBtnLabel:"Yes",cancelBtnLabel:"No"});n?await this.printOrders(t):await this.closeModal(t)}},async closeModal(e){await g["X"].dismiss(e)},async printOrders(e){const t=new v["a"];await e.forEach(async e=>{const a="lab/labels/order?order_id="+e.order_id;await t.printLbl(a)}),await g["X"].dismiss(e)}},computed:{isOrderComplete(){return this.extendedLabsEnabled?!!this.testTypes[this.activeIndex]["reason"]:(this.testTypes[this.activeIndex]["specimenConcept"]||this.testTypes[this.activeIndex]["specimen"])&&this.testTypes[this.activeIndex]["reason"]},selectedOrders(){return this.testTypes.filter(e=>!0===e.isChecked)},finalOrders(){return this.selectedOrders.filter(e=>e.reason&&(e.specimen&&!this.extendedLabsEnabled||this.extendedLabsEnabled))}},mounted(){this.getActivities()},data(){return{content:"Content",extendedLabsEnabled:!1,appActivities:[],testTypes:[],specimens:[],reasons:["Routine","Targeted","Confirmatory","Stat","Repeat / Missing"],activeIndex:null}},components:{IonButton:g["d"],IonContent:g["n"],IonHeader:g["q"],IonTitle:g["P"],IonToolbar:g["Q"],IonLabel:g["x"],IonList:g["y"],IonItem:g["w"],IonCheckbox:g["k"],IonRadioGroup:g["F"],IonRow:g["H"]}}),N=(a("cac9"),a("6b0d")),C=a.n(N);const V=C()(w,[["render",m],["__scopeId","data-v-16757c08"]]);t["a"]=V},c54c:function(e,t,a){},c617:function(e,t,a){},c8b2:function(e,t,a){},c924:function(e,t,a){"use strict";var n=a("7a23");function o(e,t,a,o,i,r){const s=Object(n["resolveComponent"])("ion-button");return Object(n["openBlock"])(),Object(n["createBlock"])("table",null,[(Object(n["openBlock"])(!0),Object(n["createBlock"])(n["Fragment"],null,Object(n["renderList"])(e.layout,(t,a)=>(Object(n["openBlock"])(),Object(n["createBlock"])("tr",{key:a},[(Object(n["openBlock"])(!0),Object(n["createBlock"])(n["Fragment"],null,Object(n["renderList"])(t,(t,a)=>(Object(n["openBlock"])(),Object(n["createBlock"])("td",{class:"his-keyboard-margin",key:"btn-"+a},[t?(Object(n["openBlock"])(),Object(n["createBlock"])(s,{key:0,style:{width:e.btnSize},class:"his-keyboard-btn",onClick:()=>e.keyPress(t)},{default:Object(n["withCtx"])(()=>[Object(n["createTextVNode"])(Object(n["toDisplayString"])(t),1)]),_:2},1032,["style","onClick"])):Object(n["createCommentVNode"])("",!0)]))),128))]))),128))])}var i=a("8a30"),r=Object(n["defineComponent"])({components:{IonButton:i["d"]},props:{btnSize:{type:String,default:"90%"},layout:{type:Array,required:!0,default:()=>[]},onKeyPress:{type:Function,required:!0}},methods:{keyPress(e){this.onKeyPress(e)}}}),s=a("6b0d"),c=a.n(s);const l=c()(r,[["render",o]]);t["a"]=l},ca25:function(e,t,a){},ca96:function(e,t,a){"use strict";a("ca25")},cac9:function(e,t,a){"use strict";a("9df8")},cbbc:function(e,t,a){"use strict";a("d128")},cc6f:function(e,t,a){"use strict";a.d(t,"a",(function(){return r}));var n=a("7957"),o=a("ec2a"),i=a("8158");class r extends n["a"]{constructor(e,t,a=-1){super(),this.encounterTypeID=t,this.patientID=e,this.encounterID=0,this.date=n["a"].getSessionDate(),this.providerID=a,this.programID=n["a"].getProgramID()}getDate(){return this.date}setDate(e){this.date=e}setEncounterID(e){this.encounterID=e}getEncounterID(){return this.encounterID}getFirstValueCoded(e){return r.getFirstValueCoded(this.patientID,e,this.date)}getFirstValueNumber(e){return r.getFirstValueNumber(this.patientID,e,this.date)}async buildObs(e,t){const a={...t,person_id:this.patientID,obs_datetime:this.date};return a["concept_id"]=await i["a"].getConceptID(e),t.value_coded&&(a["value_coded"]=await i["a"].getConceptID(t.value_coded)),a}buildValueText(e,t){return r.buildValueText(e,t,this.date)}buildValueCoded(e,t){return r.buildValueCoded(e,t,this.date)}buildValueCodedFromConceptId(e,t){return r.buildValueCodedFromConceptId(e,t,this.date)}buildValueNumber(e,t,a=null,n=null){return r.buildValueNumber(e,t,a,n,this.date)}buildValueDate(e,t){return r.buildValueDate(e,t,this.date)}buildValueDateEstimated(e,t){return this.buildObs(e,{value_datetime:t,value_text:"Estimated"})}async saveObservationList(e){return n["a"].saveObsArray(this.encounterID,e)}async saveValueTextObs(e,t){const a=await n["a"].buildValueText(e,t);return this.saveObs(a)}async saveValueCodedObs(e,t){const a=await n["a"].buildValueCoded(e,t);return this.saveObs(a)}async saveValueNumericObs(e,t,a=null){const o=await n["a"].buildValueNumber(e,t,a);return this.saveObs(o)}async saveValueDatetimeObs(e,t){const a=await n["a"].buildValueDate(e,t,n["a"].getSessionDate());return this.saveObs(a)}async createEncounter(){const e={encounter_type_id:this.encounterTypeID,patient_id:this.patientID,encounter_datetime:this.date};-1!=this.providerID&&(e["provider_id"]=this.providerID);const t=await o["a"].create(e);if(t)return this.encounterID=t.encounter_id,t}saveObs(e){return r.saveObs(this.encounterID,e)}}},cc74:function(e,t,a){"use strict";a.d(t,"a",(function(){return n}));var n,o=a("ad49");function i(){return o["a"].isProp(n.DDE_ENABLED+"=true")}function r(){return o["a"].isProp(n.MALAWI_NATIONAL_ID_SCANNER_ENABLED+"=true")}function s(){return o["a"].isProp(n.MILITARY_SITE+"=true")}function c(){return o["a"].isProp(n.PORTAL_ENABLED+"=true")}function l(){return o["a"].get(n.SITE_UUID)}function d(){return o["a"].get(n.SITE_PREFIX)}function u(){return o["a"].get(n.PORTAL_PROPERTIES)}function p(){return o["a"].get(n.HEALTH_CENTER_ID)}function h(e){return o["a"].set(n.HEALTH_CENTER_ID,e)}function b(){return o["a"].get(n.SITE_PREFIX)}function m(e){return o["a"].set(n.SITE_PREFIX,e)}function g(e){return o["a"].set(n.PORTAL_PROPERTIES,e)}function f(e){return o["a"].set(n.PORTAL_ENABLED,""+e)}(function(e){e["MILITARY_SITE"]="military_site",e["HEALTH_CENTER_ID"]="current_health_center_id",e["SITE_PREFIX"]="site_prefix",e["SITE_UUID"]="site_uuid",e["PORTAL_ENABLED"]="portal.enabled",e["PORTAL_PROPERTIES"]="portal.properties",e["DDE_ENABLED"]="dde_enabled",e["MALAWI_NATIONAL_ID_SCANNER_ENABLED"]="malawi.nationalID.scanner.enabled"})(n||(n={})),t["b"]={setHealthCenterID:h,sitePrefix:d,siteUUID:l,portalProperties:u,ddeEnabled:i,militarySiteEnabled:s,healthCenterID:p,siteCode:b,portalEnabled:c,setSitePrefix:m,setPortalIP:g,setPortalEnabled:f,malawiNationalIDScannerEnabled:r}},cc99:function(e,t,a){},cd49:function(e,t,a){"use strict";a.r(t);var n=a("7a23");function o(e,t,a,o,i,r){const s=Object(n["resolveComponent"])("modal-container"),c=Object(n["resolveComponent"])("full-screen-notice"),l=Object(n["resolveComponent"])("update-notification"),d=Object(n["resolveComponent"])("ion-router-outlet"),u=Object(n["resolveComponent"])("connection-error"),p=Object(n["resolveComponent"])("ion-app");return Object(n["openBlock"])(),Object(n["createBlock"])(p,null,{default:Object(n["withCtx"])(()=>[Object(n["createVNode"])(s,{onModalDismissed:t[1]||(t[1]=t=>e.activeModal=""),modalName:e.activeModal},null,8,["modalName"]),e.checkFullScreen?(Object(n["openBlock"])(),Object(n["createBlock"])(c,{key:0})):Object(n["createCommentVNode"])("",!0),e.checkForUpdates?(Object(n["openBlock"])(),Object(n["createBlock"])(l,{key:1})):Object(n["createCommentVNode"])("",!0),Object(n["createVNode"])(d,{key:e.$route.fullPath}),!e.apiOk&&e.notConfigPage?(Object(n["openBlock"])(),Object(n["createBlock"])(u,{key:2})):Object(n["createCommentVNode"])("",!0)]),_:1})}var i=a("8a30"),r=a("156d"),s=a("0ba8"),c=a("b5e4"),l=a("6c02");const d=Object(n["withScopeId"])("data-v-fc78f992");Object(n["pushScopeId"])("data-v-fc78f992");const u={id:"api-error",class:"his-card"},p=Object(n["createVNode"])("p",null,[Object(n["createTextVNode"])(" Unable to connect to BHT-API. Please check: "),Object(n["createVNode"])("ul",{style:{listStyle:"none"}},[Object(n["createVNode"])("li",null," Check the HIS-Core configuration file "),Object(n["createVNode"])("li",null," Your configuration "),Object(n["createVNode"])("li",null," The service is running "),Object(n["createVNode"])("li",null," Your network cable is ok ")])],-1),h=Object(n["createTextVNode"])(" New Config "),b=Object(n["createTextVNode"])(" Refresh ");Object(n["popScopeId"])();const m=d((function(e,t,a,o,i,r){const s=Object(n["resolveComponent"])("ion-button");return Object(n["openBlock"])(),Object(n["createBlock"])("div",u,[p,Object(n["createVNode"])(s,{"router-link":"/settings/host",color:"warning"},{default:d(()=>[h]),_:1}),Object(n["createVNode"])(s,{onClick:e.refresh,color:"warning"},{default:d(()=>[b]),_:1},8,["onClick"])])}));var g=Object(n["defineComponent"])({components:{IonButton:i["d"]},setup(){const e=()=>location.reload();return{refresh:e}}}),f=(a("14f6"),a("6b0d")),O=a.n(f);const j=O()(g,[["render",m],["__scopeId","data-v-fc78f992"]]);var _=j;const v=Object(n["withScopeId"])("data-v-502ec2d8");Object(n["pushScopeId"])("data-v-502ec2d8");const y={key:0,id:"update-notification"},w=Object(n["createVNode"])("br",null,null,-1),N=Object(n["createTextVNode"])(" New Updates and fixes are available "),C=Object(n["createVNode"])("br",null,null,-1),V=Object(n["createTextVNode"])(" Update Now!! ");Object(n["popScopeId"])();const D=v((function(e,t,a,o,i,r){const s=Object(n["resolveComponent"])("ion-button");return e.hasUpdate?(Object(n["openBlock"])(),Object(n["createBlock"])("div",y,[Object(n["createTextVNode"])(Object(n["toDisplayString"])(e.newVersion)+" ",1),w,N,C,Object(n["createVNode"])(s,{onClick:e.onVersionUpdate,color:"success",size:"large"},{default:v(()=>[V]),_:1},8,["onClick"])])):Object(n["createCommentVNode"])("",!0)}));var k=a("89b4"),T=Object(n["defineComponent"])({components:{IonButton:i["d"]},props:{checkInterval:{type:Number,default:3e4}},setup(e){const t=Object(n["ref"])(!1),a=Object(n["ref"])(""),o=new k["a"];function i(){o.setActiveVersion(a.value),location.reload()}return setInterval(async()=>{if(!t.value){const e=await o.getHeadVersion(),n=o.getActiveCoreVersion();"-"!=e&&e!=n&&(a.value=e,t.value=!0)}},e.checkInterval),{onVersionUpdate:i,newVersion:a,hasUpdate:t}}});a("65d1");const I=O()(T,[["render",D],["__scopeId","data-v-502ec2d8"]]);var x=I,S=(a("a5d8"),a("323e")),P=a.n(S),A=a("afbc");const E=Object(n["withScopeId"])("data-v-56d02330");Object(n["pushScopeId"])("data-v-56d02330");const B=Object(n["createTextVNode"])(" Confirmation "),R=Object(n["createVNode"])("h1",{class:"vertically-align"},"Do you want to enter fullscreen mode?",-1),F=Object(n["createTextVNode"])(" No "),L=Object(n["createTextVNode"])(" Yes ");Object(n["popScopeId"])();const M=E((function(e,t,a,o,i,r){const s=Object(n["resolveComponent"])("ion-title"),c=Object(n["resolveComponent"])("ion-toolbar"),l=Object(n["resolveComponent"])("ion-header"),d=Object(n["resolveComponent"])("ion-content"),u=Object(n["resolveComponent"])("ion-button"),p=Object(n["resolveComponent"])("ion-footer"),h=Object(n["resolveComponent"])("ion-page"),b=Object(n["resolveComponent"])("ion-modal");return Object(n["openBlock"])(),Object(n["createBlock"])(b,{"is-open":e.showFullscreenNotice,cssClass:"void-modal"},{default:E(()=>[Object(n["createVNode"])(h,null,{default:E(()=>[Object(n["createVNode"])(l,null,{default:E(()=>[Object(n["createVNode"])(c,null,{default:E(()=>[Object(n["createVNode"])(s,{class:"ion-text-center"},{default:E(()=>[B]),_:1})]),_:1})]),_:1}),Object(n["createVNode"])(d,{class:"ion-padding ion-text-center"},{default:E(()=>[R]),_:1}),Object(n["createVNode"])(p,null,{default:E(()=>[Object(n["createVNode"])(c,null,{default:E(()=>[Object(n["createVNode"])(u,{slot:"start",onClick:e.closeModal,size:"large",color:"danger"},{default:E(()=>[F]),_:1},8,["onClick"]),Object(n["createVNode"])(u,{slot:"end",onClick:e.enterFullscreen,size:"large",color:"success"},{default:E(()=>[L]),_:1},8,["onClick"])]),_:1})]),_:1})]),_:1})]),_:1},8,["is-open"])}));var H=Object(n["defineComponent"])({components:{IonModal:i["C"],IonPage:i["D"],IonHeader:i["q"],IonTitle:i["P"],IonButton:i["d"],IonToolbar:i["Q"],IonContent:i["n"],IonFooter:i["o"]},setup(){const e=Object(n["ref"])(!document.fullscreenElement);function t(){i["X"].dismiss()}function a(){document.fullscreenElement||document.documentElement.requestFullscreen({navigationUI:"hide"}),e.value=!1}return document.addEventListener("fullscreenchange",()=>{e.value=!document.fullscreenElement}),{closeModal:t,enterFullscreen:a,showFullscreenNotice:e}}});a("cf0d");const $=O()(H,[["render",M],["__scopeId","data-v-56d02330"]]);var U=$;function q(e,t,a,o,i,r){const s=Object(n["resolveComponent"])("ion-modal");return Object(n["openBlock"])(),Object(n["createBlock"])(s,{"is-open":e.modalIsOpen},{default:Object(n["withCtx"])(()=>[(Object(n["openBlock"])(),Object(n["createBlock"])(Object(n["resolveDynamicComponent"])(e.activeModal),{onOnDismissModal:e.dismissModal},null,8,["onOnDismissModal"]))]),_:1},8,["is-open"])}const G=Object(n["withScopeId"])("data-v-4df5198c");Object(n["pushScopeId"])("data-v-4df5198c");const z=Object(n["createVNode"])("div",{class:"print-section ion-text-center"},[Object(n["createVNode"])("svg",{version:"1.1",xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",x:"0px",y:"0px",viewBox:"0 0 1000 1000","enable-background":"new 0 0 1000 1000","xml:space":"preserve"},[Object(n["createVNode"])("metadata",null," Svg Vector Icons : http://www.onlinewebfonts.com/icon "),Object(n["createVNode"])("g",null,[Object(n["createVNode"])("g",{transform:"translate(0.000000,511.000000) scale(0.100000,-0.100000)"},[Object(n["createVNode"])("path",{d:"M2918.3,4119.3c-303-51.3-610.8-284.4-753-568.8c-102.6-212.1-125.9-359-125.9-822.9v-380h-533.8c-575.8,0-720.3-16.3-899.8-104.9c-237.8-116.6-454.6-410.3-491.9-669l-14-109.6l258.8-128.2l258.8-130.5H5000h4382.5l258.7,130.5l258.8,128.2l-14,109.6c-37.3,261.1-247.1,550.1-487.2,666.7c-184.2,90.9-324,107.2-904.5,107.2h-533.8v380c0,463.9-23.3,610.8-125.9,822.9c-142.2,286.7-435.9,508.2-757.6,568.8C6927.8,4147.2,3088.5,4147.2,2918.3,4119.3z M7158.6,3776.6c79.3-25.6,156.2-81.6,256.4-179.5c216.8-216.8,219.1-230.8,219.1-1102.6v-729.6H5000H2365.8v729.6c0,871.8,2.3,885.8,219.1,1102.6c233.1,230.8,51.3,214.5,2405.7,216.8C6850.9,3816.2,7053.7,3811.5,7158.6,3776.6z"}),Object(n["createVNode"])("path",{d:"M109.3-267.9l7-1382.3l74.6-153.8c90.9-184.2,258.7-349.7,445.2-435.9c130.5-60.6,146.9-62.9,692.3-74.6l559.5-11.7l14-338c11.7-275.1,23.3-361.3,65.3-466.2c163.2-401,484.9-671.4,909.1-757.6c146.9-32.6,452.2-35,2202.9-30.3c2030.4,7,2030.4,7,2184.3,58.3c363.7,123.5,643.4,396.3,773.9,752.9c37.3,95.6,51.3,209.8,60.6,454.6l14,326.4l559.5,11.7l561.8,11.7l153.9,76.9c191.2,93.2,366,277.4,442.9,466.2l53.6,132.9l7,1370.7l7,1370.7l-209.8-107.2l-212.1-104.9H5000H524.3l-212.1,104.9l-209.8,107.2L109.3-267.9z M1107,121.4c207.5-107.2,167.8-435.9-60.6-498.9c-104.9-28-186.5-7-263.4,69.9C701.4-225.9,678.1-121,720.1-20.8C785.4,137.7,955.5,200.7,1107,121.4z M7487.3-368.1c139.9-42,223.8-128.2,268.1-275.1c23.3-72.3,30.3-370.7,30.3-1181.9c0-1079.3,0-1084-53.6-1216.8c-76.9-188.8-251.8-373-442.9-466.2l-156.2-76.9H5000H2867l-156.2,76.9c-191.1,93.2-366,277.4-442.9,466.2c-53.6,130.6-53.6,149.2-60.6,1135.3c-7,1046.7,4.7,1244.8,88.6,1382.3c51.3,86.3,135.2,144.5,240.1,167.8c39.6,11.7,1144.6,18.7,2454.7,21C7053.7-333.2,7384.7-337.8,7487.3-368.1z M1125.7-766.7c65.3-44.3,121.2-151.5,121.2-230.8c0-79.3-55.9-186.5-121.2-230.8c-67.6-48.9-216.8-46.6-298.4,2.4c-172.5,100.2-167.8,368.3,4.7,466.2C906.6-720.1,1062.8-722.5,1125.7-766.7z"}),Object(n["createVNode"])("path",{d:"M3149.1-927.6c-60.6-62.9-67.6-130.5-18.7-195.8l44.3-60.6h1708.7h1708.7l44.3,60.6c48.9,65.3,42,132.9-18.7,195.8c-32.6,30.3-251.8,35-1734.4,35C3400.9-892.6,3181.7-897.3,3149.1-927.6z"}),Object(n["createVNode"])("path",{d:"M3149.1-1860c-60.6-62.9-67.6-130.5-18.7-195.8l44.3-60.6h1708.7h1708.7l44.3,60.6c48.9,65.3,42,132.9-18.7,195.8c-32.6,30.3-251.8,35-1734.4,35C3400.9-1825.1,3181.7-1829.7,3149.1-1860z"}),Object(n["createVNode"])("path",{d:"M3149.1-2792.5c-60.6-62.9-67.6-130.5-18.7-195.8l44.3-60.6h1708.7h1708.7l44.3,60.6c48.9,65.3,42,132.9-18.7,195.8c-32.6,30.3-251.8,35-1734.4,35C3400.9-2757.5,3181.7-2762.2,3149.1-2792.5z"})])])]),Object(n["createVNode"])("h1",null," Printing in progress "),Object(n["createVNode"])("h3",null," Please wait.... ")],-1);Object(n["popScopeId"])();const Y=G((function(e,t,a,o,i,r){const s=Object(n["resolveComponent"])("ion-content"),c=Object(n["resolveComponent"])("ion-page");return Object(n["openBlock"])(),Object(n["createBlock"])(c,null,{default:G(()=>[Object(n["createVNode"])(s,null,{default:G(()=>[z]),_:1})]),_:1})}));var W=a("8734"),K=Object(n["defineComponent"])({components:{IonPage:i["D"],IonContent:i["n"]},emits:["onDismissModal"],setup(e,{emit:t}){Object(W["a"])(1500).then(()=>{t("onDismissModal")})}});a("8d25");const X=O()(K,[["render",Y],["__scopeId","data-v-4df5198c"]]);var J=X,Q=Object(n["defineComponent"])({components:{IonModal:i["C"],ZebraModal:J},emits:["modalDismissed"],props:{modalName:{type:String}},setup(e,{emit:t}){const a=Object(n["ref"])(!1),o=Object(n["ref"])("");function i(){a.value=!1,t("modalDismissed")}return Object(n["watch"])(e,({modalName:e})=>{e?(o.value=e,a.value=!0):a.value=!1},{deep:!0}),{dismissModal:i,modalIsOpen:a,activeModal:o}}});const Z=O()(Q,[["render",q]]);var ee=Z,te=Object(n["defineComponent"])({name:"App",components:{FullScreenNotice:U,ModalContainer:ee,IonApp:i["a"],IonRouterOutlet:i["G"],ConnectionError:_,UpdateNotification:x},setup(){const e=Object(n["ref"])(!0),t=Object(l["e"])(),a=Object(n["ref"])(!0),o=Object(n["ref"])(null),d=Object(n["ref"])(!1),u=Object(n["ref"])(!0),p=new k["a"],h=Object(n["ref"])("");return p.initDateSync(36e5),"boolean"===typeof p.getAppConf("promptFullScreenDialog")&&(d.value=p.getAppConf("promptFullScreenDialog")),"boolean"===typeof p.getAppConf("showUpdateNotifications")&&(u.value=p.getAppConf("showUpdateNotifications")),P.a.configure({easing:"ease",speed:870,trickleSpeed:5}),Object(n["watch"])(t,e=>a.value="API host settings"!=e.name,{immediate:!0}),Object(n["watch"])(o,t=>{e.value=!t}),s["b"].on(s["a"].SHOW_MODAL,e=>h.value=e),s["b"].on(r["a"].BEFORE_API_REQUEST,()=>P.a.start()),s["b"].on(r["a"].AFTER_API_REQUEST,async e=>{if(o.value){clearInterval(o.value),o.value=null;const e=await Object(c["a"])("Do you want to refresh the page?",{header:"API connection is back"});e&&location.reload()}e&&401===e.status&&"Login"!=t.name&&A["a"].push("/login"),P.a.done()}),s["b"].on(r["a"].ON_API_CRASH,()=>{o.value||(i["V"].dismiss(),o.value=setInterval(()=>{"API host settings"!=t.name&&r["b"].healthCheck()},2500),Object(c["e"])("Unable to reach api. You can fix the error below")),P.a.done()}),{apiOk:e,checkForUpdates:u,activeModal:h,notConfigPage:a,checkFullScreen:d}}});const ae=O()(te,[["render",o]]);var ne=ae,oe=a("ae27"),ie=a.n(oe),re=a("5a0c"),se=a.n(re);a("4b63"),a("4041"),a("51ef"),a("a237"),a("e09e"),a("46e5"),a("98b6"),a("2d22"),a("66b0"),a("ce1f"),a("1a5e"),a("7708"),a("1eb2"),a("2fdd"),a("6460"),a("8c28");const ce=Object(n["createApp"])(ne).use(i["R"]).use(A["a"]).use(ie.a);ce.config.globalProperties.$dayjs=se.a,A["a"].isReady().then(()=>{ce.mount("#app")})},cdb4:function(e,t,a){},cf0d:function(e,t,a){"use strict";a("4108")},cf71:function(e,t,a){},cfc5:function(e,t,a){"use strict";a("3a89")},cff5:function(e,t,a){"use strict";a("acb4")},d10e:function(e,t,a){"use strict";a.d(t,"a",(function(){return o}));var n=a("1c74");class o extends n["e"]{constructor(e){super(),this.person=e}create(){return n["e"].postJson("/people",this.person)}update(e){return n["e"].putJson("people/"+e,{...this.person,program_id:n["e"].getProgramID()})}static searchFamilyName(e){return super.getJson("/search/family_name",{search_string:e})}static searchGivenName(e){return super.getJson("/search/given_name",{search_string:e})}static async getPersonFullName(e){const t=await super.getJson(`/people/${e}/names`);return t&&t.length?t[0].given_name+" "+t[0].family_name:""}}},d11f:function(e,t,a){"use strict";var n=a("7a23");const o=Object(n["withScopeId"])("data-v-0ecac256"),i=o((function(e,t,a,i,r,s){const c=Object(n["resolveComponent"])("his-text-input"),l=Object(n["resolveComponent"])("ion-label"),d=Object(n["resolveComponent"])("ion-item"),u=Object(n["resolveComponent"])("ion-list"),p=Object(n["resolveComponent"])("view-port"),h=Object(n["resolveComponent"])("his-keyboard");return Object(n["openBlock"])(),Object(n["createBlock"])(n["Fragment"],null,[Object(n["createVNode"])(p,{showFull:!e.showKeyboard},{default:o(()=>[Object(n["createVNode"])(c,{readonly:!e.showKeyboard,value:e.selected,onOnValue:t[1]||(t[1]=t=>e.onKbValue(t,e.showKeyboard))},null,8,["readonly","value"]),Object(n["createVNode"])(u,{class:"view-port-content"},{default:o(()=>[(Object(n["openBlock"])(!0),Object(n["createBlock"])(n["Fragment"],null,Object(n["renderList"])(e.filtered,(t,a)=>(Object(n["openBlock"])(),Object(n["createBlock"])(d,{class:"his-md-text",button:"",color:t.label===e.selected?"lightblue":"",lines:t.isChecked?"none":"",key:a,disabled:!(!("disabled"in t)||!t.disabled),onClick:a=>e.onselect(t)},{default:o(()=>[Object(n["createVNode"])(l,null,{default:o(()=>[Object(n["createTextVNode"])(Object(n["toDisplayString"])(t.label),1)]),_:2},1024)]),_:2},1032,["color","lines","disabled","onClick"]))),128))]),_:1})]),_:1},8,["showFull"]),e.showKeyboard?(Object(n["openBlock"])(),Object(n["createBlock"])(h,{key:0,kbConfig:e.keyboard,onKeyPress:e.keypress},null,8,["kbConfig","onKeyPress"])):Object(n["createCommentVNode"])("",!0)],64)}));var r=a("82a9"),s=a("2ef0"),c=Object(n["defineComponent"])({name:"HisSelect",mixins:[r["a"]],data:()=>({isInit:!1}),watch:{clear(){this.clearSelection()}},async activated(){this.$emit("onFieldActivated",this),this.listData=await this.options(this.fdata),this.isInit||await this.setDefaultValue(),this.isInit=!0},methods:{async setDefaultValue(){if(this.defaultValue){const e=await this.defaultValue(this.fdata,this.cdata,this.selected);if(e){const t=Object(s["find"])(this.listData,{label:e})||Object(s["find"])(this.listData,{value:e});t?this.onselect(t):(this.selected=e,this.filter=e)}}},async onselect(e){if(this.selected=e.label,this.onValue){const t=await this.onValue(e,this);if(!t)return void(this.selected="")}this.$emit("onValue",e)}}}),l=(a("2d93"),a("6b0d")),d=a.n(l);const u=d()(c,[["render",i],["__scopeId","data-v-0ecac256"]]);t["a"]=u},d128:function(e,t,a){},d1ca:function(e,t,a){"use strict";a.d(t,"a",(function(){return n}));var n,o=a("ad49");function i(){return o["a"].isProp(n.CERVICAL_CANCER_SCREENING+"=true")}function r(){return o["a"].isProp(n.VL_ROUTINE_CHECK+"=true")}function s(){return o["a"].isProp(n.FAST_TRACK+"=true")}function c(){return o["a"].isProp(n.THREE_HP_AUTO_SELECT+"=true")}function l(){return o["a"].isProp(n.EXTENDED_LABS+"=true")}function d(){return o["a"].isProp(n.FILING_NUMBERS+"=true")}function u(){return o["a"].isProp(n.DRUG_MANAGEMENT+"=true")}function p(){return o["a"].get(n.HTN_SYSTOLIC_THRESHOLD)}function h(){return o["a"].get(n.HTN_DIASTOLIC_THRESHOLD)}function b(){return o["a"].isProp(n.HTN_ENHANCEMENT+"=true")}function m(){return o["a"].isProp(n.PILLS_REMAINING+"=true")}function g(){return o["a"].get(n.APPOINTMENT_LIMIT)}function f(){return o["a"].get(n.HTN_SCREENING_AGE_THRESHOLD)}async function O(){const e=await o["a"].get(n.CERVICAL_CANCER_AGE_BOUNDS);if(e){const[t,a]=e.split(":");return{start:t,end:a}}return{start:-1,end:-1}}function j(){return o["a"].get(n.FILING_NUMBER_LIMIT)}function _(){return o["a"].get(n.FILING_NUMBER_PREFIX)}function v(){return o["a"].get(n.ADULT_CLINIC_DAYS)}function y(){return o["a"].get(n.PEADS_CLINIC_DAYS)}function w(){return o["a"].get(n.CLINIC_HOLIDAYS)}function N(e){return o["a"].set(n.HTN_SCREENING_AGE_THRESHOLD,e)}function C(e){return o["a"].set(n.APPOINTMENT_LIMIT,e)}function V(e){return o["a"].set(n.ADULT_CLINIC_DAYS,e)}function D(e){return o["a"].set(n.PEADS_CLINIC_DAYS,e)}function k(e){return o["a"].set(n.FILING_NUMBER_LIMIT,e)}(function(e){e["EXTENDED_LABS"]="extended_labs",e["VL_ROUTINE_CHECK"]="activate.vl.routine.check",e["PILLS_REMAINING"]="ask.pills.remaining.at.home",e["FILING_NUMBERS"]="use.filing.number",e["DRUG_MANAGEMENT"]="activate.drug.management",e["HTN_ENHANCEMENT"]="activate.htn.enhancement",e["FAST_TRACK"]="enable_fast_track",e["THREE_HP_AUTO_SELECT"]="activate_3hp_auto_select",e["APPOINTMENT_LIMIT"]="clinic.appointment.limit",e["HTN_SCREENING_AGE_THRESHOLD"]="htn.screening.age.threshold",e["HTN_SYSTOLIC_THRESHOLD"]="htn.systolic.threshold",e["HTN_DIASTOLIC_THRESHOLD"]="htn.diastolic.threshold",e["PEADS_CLINIC_DAYS"]="peads.clinic.days",e["ADULT_CLINIC_DAYS"]="clinic.days",e["FILING_NUMBER_LIMIT"]="filing.number.limit",e["FILING_NUMBER_PREFIX"]="filing.number.prefix",e["CERVICAL_CANCER_SCREENING"]="activate.cervical.cancer.screening",e["CERVICAL_CANCER_AGE_BOUNDS"]="cervical.cancer.screening.age.bounds",e["CLINIC_HOLIDAYS"]="clinic.holidays",e["EXCLUDE_EXTERNAL_AND_DRUG_REFILLS"]="can.remove.external.and.drug.refills.from.data.cleaning"})(n||(n={})),t["b"]={cervicalCancerScreeningAgeBounds:O,systolicThreshold:p,diastolicThreshold:h,htnAgeThreshold:f,setHtnAgeThreshold:N,setFilingNumberLimit:k,setAppointmentLimit:C,filingNumberLimit:j,filingNumberPrefix:_,adultClinicDays:v,peadsClinicDays:y,setAdultClinicDays:V,setPeadsClinicDays:D,filingNumbersEnabled:d,drugManagementEnabled:u,htnEnabled:b,appointmentLimit:g,askPillsRemaining:m,extendedLabEnabled:l,threeHPAutoSelectEnabled:c,VLEnabled:r,fastTrackEnabled:s,cervicalCancerScreeningEnabled:i,clinicHolidays:w}},d26c:function(e,t,a){},d403:function(e,t,a){},d42f:function(e,t,a){"use strict";a("1c3d")},d4e7:function(e,t,a){},d6aa:function(e,t,a){"use strict";var n=a("7a23");const o={class:"report-content"},i=Object(n["createTextVNode"])("Date Generated: "),r=Object(n["createTextVNode"])("API version: ");function s(e,t,a,s,c,l){const d=Object(n["resolveComponent"])("ion-col"),u=Object(n["resolveComponent"])("ion-row"),p=Object(n["resolveComponent"])("ion-toolbar"),h=Object(n["resolveComponent"])("report-filter"),b=Object(n["resolveComponent"])("ion-header"),m=Object(n["resolveComponent"])("report-table"),g=Object(n["resolveComponent"])("ion-content"),f=Object(n["resolveComponent"])("pagination"),O=Object(n["resolveComponent"])("ion-chip"),j=Object(n["resolveComponent"])("ion-footer"),_=Object(n["resolveComponent"])("his-footer"),v=Object(n["resolveComponent"])("ion-page");return Object(n["openBlock"])(),Object(n["createBlock"])(v,null,{default:Object(n["withCtx"])(()=>[Object(n["createVNode"])(b,null,{default:Object(n["withCtx"])(()=>[Object(n["createVNode"])(p,null,{default:Object(n["withCtx"])(()=>[Object(n["createVNode"])(u,null,{default:Object(n["withCtx"])(()=>[Object(n["createVNode"])(d,null,{default:Object(n["withCtx"])(()=>[Object(n["createVNode"])("h1",null,Object(n["toDisplayString"])(e.title),1)]),_:1})]),_:1})]),_:1}),Object(n["createVNode"])(p,null,{default:Object(n["withCtx"])(()=>[Object(n["createVNode"])(h,{showPerPageFilter:e.showFilters||e.paginated,disableSearchFilter:e.isTableLoading,disablePerPageFilter:e.isTableLoading,totalRowCount:e.tableRows.length,onOnItemsPerPage:t[1]||(t[1]=t=>e.itemsPerPage=t),onOnSearchFilter:t[2]||(t[2]=t=>e.searchFilter=t)},null,8,["showPerPageFilter","disableSearchFilter","disablePerPageFilter","totalRowCount"])]),_:1})]),_:1}),Object(n["createVNode"])(g,null,{default:Object(n["withCtx"])(()=>[Object(n["createVNode"])("div",o,[Object(n["createVNode"])(m,{rows:e.rows,paginated:e.paginated,asyncRows:e.asyncRows,rowParser:e.rowParser,columns:e.columns,showFilters:e.showFilters,newPage:e.currentPage,searchFilter:e.searchFilter,rowsPerPage:e.itemsPerPage,onOnIsLoading:t[3]||(t[3]=t=>e.isTableLoading=t),onOnTableRows:t[4]||(t[4]=t=>e.tableRows=t),onOnPagination:t[5]||(t[5]=t=>e.totalPages=t.length),onOnActiveColumns:t[6]||(t[6]=t=>e.activeColumns=t),onOnActiveRows:t[7]||(t[7]=t=>e.activeRows=t)},null,8,["rows","paginated","asyncRows","rowParser","columns","showFilters","newPage","searchFilter","rowsPerPage"])])]),_:1}),Object(n["createVNode"])(j,null,{default:Object(n["withCtx"])(()=>[Object(n["createVNode"])(p,null,{default:Object(n["withCtx"])(()=>[!e.searchFilter&&e.paginated||!e.searchFilter&&e.totalPages>0&&e.paginated?(Object(n["openBlock"])(),Object(n["createBlock"])(f,{key:0,perPage:e.itemsPerPage,maxVisibleButtons:10,totalPages:e.totalPages,onOnChangePage:t[8]||(t[8]=t=>e.currentPage=t)},null,8,["perPage","totalPages"])):Object(n["createCommentVNode"])("",!0)]),_:1}),e.showReportStamp?(Object(n["openBlock"])(),Object(n["createBlock"])(p,{key:0},{default:Object(n["withCtx"])(()=>[Object(n["createVNode"])(O,{color:"primary"},{default:Object(n["withCtx"])(()=>[i,Object(n["createVNode"])("b",null,Object(n["toDisplayString"])(e.date),1)]),_:1}),Object(n["createVNode"])(O,{color:"primary"},{default:Object(n["withCtx"])(()=>[r,Object(n["createVNode"])("b",null,Object(n["toDisplayString"])(e.apiVersion),1)]),_:1})]),_:1})):Object(n["createCommentVNode"])("",!0)]),_:1}),Object(n["createVNode"])(_,{color:e.footerColor,btns:e.btns},null,8,["color","btns"])]),_:1})}var c=a("0f25"),l=a("9ceb"),d=a("80e3"),u=a("8a30"),p=a("ba82"),h=a("1c74"),b=a("9283"),m=a("2f2a"),g=a("1799"),f=Object(n["defineComponent"])({components:{IonCol:u["m"],IonRow:u["H"],Pagination:g["a"],ReportTable:d["a"],ReportFilter:m["a"],HisFooter:c["a"],IonPage:u["D"],IonHeader:u["q"],IonContent:u["n"],IonToolbar:u["Q"],IonChip:u["l"],IonFooter:u["o"]},props:{title:{type:String,required:!0},columns:{type:Object,required:!0},rows:{type:Object,default:()=>[]},rowParser:{type:Function},showFilters:{type:Boolean,default:!1},rowsPerPage:{type:Number},asyncRows:{type:Function},paginated:{type:Boolean,default:!1},customBtns:{type:Array,default:()=>[]},showReportStamp:{type:Boolean,default:!0},footerColor:{type:String,default:"dark"},customFileName:{type:String,default:""},canExport:{type:Boolean,default:!0},onFinish:{type:Function}},data:()=>({btns:[],isTableLoading:!1,searchFilter:"",itemsPerPage:50,currentPage:0,tableRows:[],totalPages:0,activeColumns:[],activeRows:[],date:b["b"].toStandardHisDisplayFormat(h["e"].getSessionDate()),apiVersion:h["e"].getApiVersion()}),methods:{getFileName(){return this.customFileName?this.customFileName:this.title}},created(){this.btns=[...this.customBtns,{name:"CSV",size:"large",slot:"start",color:"primary",visible:this.canExport,onClick:()=>{const{columns:e,rows:t}=Object(l["b"])(this.activeColumns,this.activeRows);Object(p["a"])(e,t,this.getFileName())}},{name:"PDF",size:"large",slot:"start",color:"primary",visible:this.canExport,onClick:()=>{const{columns:e,rows:t}=Object(l["b"])(this.activeColumns,this.activeRows);Object(p["b"])(e,t,this.getFileName())}},{name:"Finish",size:"large",slot:"end",color:"success",visible:!0,onClick:()=>{if("function"===typeof this.onFinish)return this.onFinish();this.$router.push({path:"/"})}}]}}),O=a("6b0d"),j=a.n(O);const _=j()(f,[["render",s]]);t["a"]=_},d6d4:function(e,t,a){},d6f3:function(e,t,a){"use strict";a("4469")},d77d:function(e,t,a){"use strict";a("18ab")},d8b0:function(e,t,a){"use strict";a("4f45")},d95e:function(e,t,a){"use strict";a.d(t,"b",(function(){return ts})),a.d(t,"a",(function(){return ns}));var n=a("7a23");const o=Object(n["withScopeId"])("data-v-33d9843e");Object(n["pushScopeId"])("data-v-33d9843e");const i={key:0,class:"his-card"};Object(n["popScopeId"])();const r=o((function(e,t,a,r,s,c){const l=Object(n["resolveComponent"])("ion-title"),d=Object(n["resolveComponent"])("ion-radio"),u=Object(n["resolveComponent"])("ion-label"),p=Object(n["resolveComponent"])("ion-item"),h=Object(n["resolveComponent"])("ion-radio-group"),b=Object(n["resolveComponent"])("ion-list"),m=Object(n["resolveComponent"])("ion-col"),g=Object(n["resolveComponent"])("ion-row"),f=Object(n["resolveComponent"])("ion-grid"),O=Object(n["resolveComponent"])("view-port");return Object(n["openBlock"])(),Object(n["createBlock"])(O,null,{default:o(()=>[Object(n["createVNode"])(f,{class:"view-port-content"},{default:o(()=>[Object(n["createVNode"])(g,null,{default:o(()=>[(Object(n["openBlock"])(!0),Object(n["createBlock"])(n["Fragment"],null,Object(n["renderList"])(e.listData,(t,a)=>(Object(n["openBlock"])(),Object(n["createBlock"])(m,{size:"6",key:a},{default:o(()=>{var a,r;return["boolean"!==typeof(null===t||void 0===t||null===(a=t.other)||void 0===a?void 0:a.visible)||(null===t||void 0===t||null===(r=t.other)||void 0===r?void 0:r.visible)?(Object(n["openBlock"])(),Object(n["createBlock"])("div",i,[Object(n["createVNode"])(l,{class:"his-md-text"},{default:o(()=>[Object(n["createTextVNode"])(Object(n["toDisplayString"])(t.label),1)]),_:2},1024),Object(n["createVNode"])(b,null,{default:o(()=>[Object(n["createVNode"])(h,{modelValue:t.value,"onUpdate:modelValue":e=>t.value=e},{default:o(()=>{var a;return[(Object(n["openBlock"])(!0),Object(n["createBlock"])(n["Fragment"],null,Object(n["renderList"])((null===t||void 0===t||null===(a=t.other)||void 0===a?void 0:a.options)||[],(a,i)=>(Object(n["openBlock"])(),Object(n["createBlock"])(p,{class:"his-md-text",key:i},{default:o(()=>[Object(n["createVNode"])(d,{slot:"start",value:a.value,onClick:n=>{var o;return"function"===typeof(null===t||void 0===t||null===(o=t.other)||void 0===o?void 0:o.onClick)?t.other.onClick(a,e.listData):null}},null,8,["value","onClick"]),Object(n["createVNode"])(u,null,{default:o(()=>[Object(n["createTextVNode"])(Object(n["toDisplayString"])(a.label),1)]),_:2},1024)]),_:2},1024))),128))]}),_:2},1032,["modelValue","onUpdate:modelValue"])]),_:2},1024)])):Object(n["createCommentVNode"])("",!0)]}),_:2},1024))),128))]),_:1})]),_:1})]),_:1})}));var s=a("51c8"),c=a("0a79"),l=a("8a30"),d=a("2ef0"),u=Object(n["defineComponent"])({name:"HisGridOptionSelect",mixins:[s["a"]],components:{IonTitle:l["P"],IonItem:l["w"],IonRadioGroup:l["F"],IonRadio:l["E"],IonGrid:l["p"],IonCol:l["m"],IonRow:l["H"],ViewPort:c["a"]},data:()=>({listData:[]}),async activated(){this.$emit("onFieldActivated",this),this.listData=await this.options(this.fdata)},watch:{listData:{handler(e){this.$emit("onValue",Object(d["isEmpty"])(e)?null:e.filter(e=>"boolean"!==typeof e.other.visible||e.other.visible))},deep:!0}}}),p=(a("20a4"),a("6b0d")),h=a.n(p);const b=h()(u,[["render",r],["__scopeId","data-v-33d9843e"]]);var m=b,g=a("c05f"),f=a("dd65");const O=Object(n["withScopeId"])("data-v-21ddefcc");Object(n["pushScopeId"])("data-v-21ddefcc");const j={class:"his-floating-keyboard"},_={class:"his-floating-keyboard-content"},v={style:{width:"99.9%"}},y=Object(n["createTextVNode"])(" Space ");Object(n["popScopeId"])();const w=O((function(e,t,a,o,i,r){const s=Object(n["resolveComponent"])("ion-textarea"),c=Object(n["resolveComponent"])("view-port"),l=Object(n["resolveComponent"])("ion-button");return Object(n["openBlock"])(),Object(n["createBlock"])(n["Fragment"],null,[Object(n["createVNode"])(c,{showFull:!1},{default:O(()=>[Object(n["createVNode"])(s,{rows:"6",cols:"20",readonly:"",value:e.value,placeholder:"Start typing....",class:"input_display"},null,8,["value"])]),_:1}),Object(n["createVNode"])("div",j,[Object(n["createVNode"])("div",_,[Object(n["createVNode"])("table",v,[(Object(n["openBlock"])(!0),Object(n["createBlock"])(n["Fragment"],null,Object(n["renderList"])(e.layout,(t,a)=>(Object(n["openBlock"])(),Object(n["createBlock"])("tr",{key:a},[(Object(n["openBlock"])(!0),Object(n["createBlock"])(n["Fragment"],null,Object(n["renderList"])(t,(t,a)=>(Object(n["openBlock"])(),Object(n["createBlock"])("td",{key:a},[Object(n["createVNode"])(l,{style:{"text-transform":"none"},strong:"",onClick:a=>e.keypress(t),class:`key__button ${t.toLowerCase()}_btn`},{default:O(()=>[Object(n["createTextVNode"])(Object(n["toDisplayString"])(t),1)]),_:2},1032,["onClick","class"])]))),128))]))),128))])]),Object(n["createVNode"])(l,{onClick:t[1]||(t[1]=t=>e.keypress("space")),strong:"",style:{width:"100%"},shape:"round",size:"large"},{default:O(()=>[y]),_:1})])],64)}));var N=a("2345"),C=a("3800"),V=Object(n["defineComponent"])({components:{ViewPort:c["a"],IonButton:l["d"],IonTextarea:l["N"]},mixins:[s["a"]],data:()=>({value:"",capsOn:!1,layout:C["h"]}),async activated(){this.$emit("onFieldActivated",this),await this.setDefaultValue()},methods:{async setDefaultValue(){if(this.defaultValue&&!this.value){const e=await this.defaultValue(this.fdata,this.cdata);e&&(Object(d["isPlainObject"])(e)?(this.emitValue(e),this.value=e.value.toString()):(this.value=e,this.emitValue({label:e,value:e})))}},updateKeyboardCaps(e=!1){this.layout=this.layout.map(t=>t.map(t=>e?t.toUpperCase():t.toLowerCase()))},async emitValue(e){if(this.onValue){const t=await this.onValue(e);if(!t)return}this.value=e.label,this.$emit("onValue",e)},async onKbValue(e){await this.emitValue({label:e,value:e})},async keypress(e){const t=Object(N["a"])(this.capsOn?e.toUpperCase():e.toLowerCase(),this.value);if(t.match(/caps/i))return this.capsOn=!this.capsOn,void this.updateKeyboardCaps(this.capsOn);await this.emitValue({label:t,value:t})}},watch:{clear(){this.value=""}}});a("a981");const D=h()(V,[["render",w],["__scopeId","data-v-21ddefcc"]]);var k=D,T=a("d11f"),I=a("0734"),x=a("2fd5"),S=a("6ef9"),P=a("5e75"),A=a("69cf");const E=Object(n["withScopeId"])("data-v-0383b783");Object(n["pushScopeId"])("data-v-0383b783");const B={class:"view-port-content"};Object(n["popScopeId"])();const R=E((function(e,t,a,o,i,r){const s=Object(n["resolveComponent"])("regimen-card"),c=Object(n["resolveComponent"])("ion-col"),l=Object(n["resolveComponent"])("ion-row"),d=Object(n["resolveComponent"])("view-port");return Object(n["openBlock"])(),Object(n["createBlock"])(d,null,{default:E(()=>[Object(n["createVNode"])("div",B,[Object(n["createVNode"])(l,null,{default:E(()=>[Object(n["createVNode"])(c,{"size-md":"6","size-sm":"12"},{default:E(()=>[(Object(n["openBlock"])(!0),Object(n["createBlock"])(n["Fragment"],null,Object(n["renderList"])(e.leftItems,(t,a)=>(Object(n["openBlock"])(),Object(n["createBlock"])(s,{class:"regimen-item",key:a,label:t.label,value:t.value,onOnclick:a=>e.onselect(t),color:t.label===e.selected?"active-card-color":"inactive-card-color"},null,8,["label","value","onOnclick","color"]))),128))]),_:1}),Object(n["createVNode"])(c,{"size-md":"6","size-sm":"12"},{default:E(()=>[(Object(n["openBlock"])(!0),Object(n["createBlock"])(n["Fragment"],null,Object(n["renderList"])(e.rightItems,(t,a)=>(Object(n["openBlock"])(),Object(n["createBlock"])(s,{class:"regimen-item",key:a,label:t.label,value:t.value,onOnclick:a=>e.onselect(t),color:t.label===e.selected?"active-card-color":"inactive-card-color"},null,8,["label","value","onOnclick","color"]))),128))]),_:1})]),_:1})])]),_:1})}));var F=a("82a9");const L=Object(n["withScopeId"])("data-v-63209aca");Object(n["pushScopeId"])("data-v-63209aca");const M={class:"title"},H={class:"his-sm-text",style:{textAlign:"center"}};Object(n["popScopeId"])();const $=L((function(e,t,a,o,i,r){return Object(n["openBlock"])(),Object(n["createBlock"])("div",{class:"his-card "+e.state,onClick:t[1]||(t[1]=(...t)=>e.onclick(...t))},[Object(n["createVNode"])("table",null,[Object(n["createVNode"])("td",M,Object(n["toDisplayString"])(e.value)+" ",1),Object(n["createVNode"])("td",H,Object(n["toDisplayString"])(e.label),1)])],2)}));var U=Object(n["defineComponent"])({props:{showTitle:{type:Boolean,default:!0},enabled:{type:Boolean,default:!0},color:{type:String},label:{type:String,required:!0},value:{type:String,required:!0}},computed:{state(){return this.enabled?this.color+" clickable":"disabled-card-color"}},methods:{onclick(){this.enabled&&this.$emit("onclick")}}});a("a83d");const q=h()(U,[["render",$],["__scopeId","data-v-63209aca"]]);var G=q,z=Object(n["defineComponent"])({components:{ViewPort:c["a"],RegimenCard:G,IonRow:l["H"],IonCol:l["m"]},mixins:[F["a"]],watch:{clear(e){e&&this.clearSelection()}},computed:{leftItems(){return Object(d["isEmpty"])(this.listData)?[]:this.listData[0]},rightItems(){return Object(d["isEmpty"])(this.listData)?[]:this.listData[1]}},async mounted(){this.init()},activated(){this.$emit("onFieldActivated",this)},methods:{async init(){const e=await this.options(this.fdata);this.listData=this.buildList(e)},buildList(e){const t=[[],[]],a=e=>e.sort((e,t)=>e.value>t.value?1:-1);return e.forEach(e=>{const a=parseInt(e.value.toString());a<10?t[0].push(e):t[1].push(e)}),[a(t[0]),a(t[1])]},async onselect(e){if(this.selected=e.label,this.onValue){const t=await this.onValue(e);if(!t)return this.selected="",void this.$emit("onValue",null)}this.onValueUpdate&&(this.listData=await this.onValueUpdate([...this.listData],e)),this.$emit("onValue",e)}}});a("6dce");const Y=h()(z,[["render",R],["__scopeId","data-v-0383b783"]]);var W=Y;const K=Object(n["withScopeId"])("data-v-417bb70a");Object(n["pushScopeId"])("data-v-417bb70a");const X={class:"view-port-content"},J={class:"his-md-text"},Q={class:"his-md-text"};Object(n["popScopeId"])();const Z=K((function(e,t,a,o,i,r){const s=Object(n["resolveComponent"])("interval-card"),c=Object(n["resolveComponent"])("ion-col"),l=Object(n["resolveComponent"])("ion-row"),d=Object(n["resolveComponent"])("ion-label"),u=Object(n["resolveComponent"])("ion-item"),p=Object(n["resolveComponent"])("ion-chip"),h=Object(n["resolveComponent"])("ion-list"),b=Object(n["resolveComponent"])("ion-card-content"),m=Object(n["resolveComponent"])("ion-card"),g=Object(n["resolveComponent"])("ion-grid"),f=Object(n["resolveComponent"])("view-port");return Object(n["openBlock"])(),Object(n["createBlock"])(f,null,{default:K(()=>[Object(n["createVNode"])("div",X,[Object(n["createVNode"])(g,null,{default:K(()=>[Object(n["createVNode"])(l,null,{default:K(()=>[Object(n["createVNode"])(c,{size:"4"},{default:K(()=>[(Object(n["openBlock"])(!0),Object(n["createBlock"])(n["Fragment"],null,Object(n["renderList"])(e.listData,(t,a)=>(Object(n["openBlock"])(),Object(n["createBlock"])(l,{key:a},{default:K(()=>[(Object(n["openBlock"])(!0),Object(n["createBlock"])(n["Fragment"],null,Object(n["renderList"])(t,(t,a)=>(Object(n["openBlock"])(),Object(n["createBlock"])(c,{"size-md":"6","size-sm":"12",key:a},{default:K(()=>[Object(n["createVNode"])(s,{showTitle:e.config.showRegimenCardTitle,label:t.label,onOnclick:a=>e.onselect(t),enabled:t.other.enabled,color:t.label===e.selected?"active-card-color":"inactive-card-color"},null,8,["showTitle","label","onOnclick","enabled","color"])]),_:2},1024))),128))]),_:2},1024))),128))]),_:1}),Object(n["createVNode"])(c,{size:"8"},{default:K(()=>[Object(n["createVNode"])(m,{style:{height:"65vh"}},{default:K(()=>[e.active.label?(Object(n["openBlock"])(),Object(n["createBlock"])(b,{key:0},{default:K(()=>[Object(n["createVNode"])("span",J,Object(n["toDisplayString"])(e.active.other.label),1),Object(n["createVNode"])(u,{class:"his-sm-text"},{default:K(()=>[Object(n["createVNode"])(d,null,{default:K(()=>[Object(n["createTextVNode"])(Object(n["toDisplayString"])(e.active.other.value),1)]),_:1})]),_:1}),Object(n["createVNode"])("span",Q,Object(n["toDisplayString"])(e.active.other.other.label),1),Object(n["createVNode"])(h,null,{default:K(()=>[(Object(n["openBlock"])(!0),Object(n["createBlock"])(n["Fragment"],null,Object(n["renderList"])(e.active.other.other.value,(e,t)=>(Object(n["openBlock"])(),Object(n["createBlock"])(u,{class:"his-sm-text",key:t},{default:K(()=>[Object(n["createVNode"])(d,null,{default:K(()=>[Object(n["createTextVNode"])(Object(n["toDisplayString"])(e.label),1)]),_:2},1024),Object(n["createVNode"])(p,{class:"his-md-text",color:"primary",slot:"end"},{default:K(()=>[Object(n["createTextVNode"])(Object(n["toDisplayString"])(e.value),1)]),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1})):Object(n["createCommentVNode"])("",!0)]),_:1})]),_:1})]),_:1})]),_:1})])]),_:1})})),ee=Object(n["withScopeId"])("data-v-875731ee");Object(n["pushScopeId"])("data-v-875731ee");const te={key:0},ae={key:1,class:"his-md-text"};Object(n["popScopeId"])();const ne=ee((function(e,t,a,o,i,r){return Object(n["openBlock"])(),Object(n["createBlock"])("div",{class:"his-card "+e.state,onClick:t[1]||(t[1]=()=>e.enabled?e.$emit("onclick"):null)},[e.enabled?Object(n["createCommentVNode"])("",!0):(Object(n["openBlock"])(),Object(n["createBlock"])("s",te,Object(n["toDisplayString"])(e.label),1)),e.enabled?(Object(n["openBlock"])(),Object(n["createBlock"])("div",ae,Object(n["toDisplayString"])(e.label),1)):Object(n["createCommentVNode"])("",!0)],2)}));var oe=Object(n["defineComponent"])({props:{color:{type:String},enabled:{type:Boolean,default:!0},label:{type:String,required:!0}},computed:{state(){return this.enabled?"clickable "+this.color:"disabled-card-color"}}});a("2b75");const ie=h()(oe,[["render",ne],["__scopeId","data-v-875731ee"]]);var re=ie,se=a("7e73"),ce=Object(n["defineComponent"])({components:{IntervalCard:re,ViewPort:c["a"],IonGrid:l["p"],IonCard:l["f"],IonCardContent:l["g"]},mixins:[F["a"]],data:()=>({active:{}}),watch:{clear(){this.active={},this.clearSelection()}},async activated(){this.init(),this.$emit("onFieldActivated",this),"next"===this.activationState&&(this.active={},this.clearSelection())},async mounted(){this.init()},methods:{async init(){const e=await this.options(this.fdata);this.listData=se["a"].convertArrayToTurples(e)},onselect(e){this.selected=e.label,this.active=e,this.$emit("onValue",e)}}});a("fb7c");const le=h()(ce,[["render",Z],["__scopeId","data-v-417bb70a"]]);var de=le;const ue=Object(n["withScopeId"])("data-v-5d9fc4b0");Object(n["pushScopeId"])("data-v-5d9fc4b0");const pe={class:"view-port-content"};Object(n["popScopeId"])();const he=ue((function(e,t,a,o,i,r){const s=Object(n["resolveComponent"])("his-table"),c=Object(n["resolveComponent"])("view-port");return Object(n["openBlock"])(),Object(n["createBlock"])(c,null,{default:ue(()=>[Object(n["createVNode"])("div",pe,[Object(n["createVNode"])(s,{columns:e.columns,styles:e.styles,rows:e.rows,rowColors:e.rowColors,cellColors:e.cellColors},null,8,["columns","styles","rows","rowColors","cellColors"])])]),_:1})}));var be=a("a3a5"),me=Object(n["defineComponent"])({components:{ViewPort:c["a"],HisTable:be["a"]},mixins:[s["a"]],data:()=>({columns:[],rows:[],rowColors:[],cellColors:[],styles:[]}),async activated(){this.$emit("onFieldActivated",this);const e=await this.options(this.fdata,this.cdata,this);if(Object(d["isEmpty"])(e))return;const{other:t}=e[0];this.columns=t.columns,this.rows=t.rows,this.rowColors=t.rowColors,this.cellColors=t.cellColors,this.styles=this.config?this.config.styles:[]}});a("5245");const ge=h()(me,[["render",he],["__scopeId","data-v-5d9fc4b0"]]);var fe=ge;const Oe=Object(n["withScopeId"])("data-v-4641300f");Object(n["pushScopeId"])("data-v-4641300f");const je={class:"view-port-content"},_e={class:"his-table"},ve=Object(n["createVNode"])("th",null," Medication",-1),ye=Object(n["createTextVNode"])(" Morning "),we=Object(n["createTextVNode"])(" Noon "),Ne=Object(n["createTextVNode"])(" Evening "),Ce=Object(n["createTextVNode"])(" Frequency "),Ve=Object(n["createVNode"])("option",{value:"Weekly (QW)"}," Weekly ",-1),De=Object(n["createVNode"])("option",{value:"Daily (QOD)"}," Daily ",-1);Object(n["popScopeId"])();const ke=Oe((function(e,t,a,o,i,r){const s=Object(n["resolveComponent"])("ion-img"),c=Object(n["resolveComponent"])("ion-input"),l=Object(n["resolveComponent"])("view-port");return Object(n["openBlock"])(),Object(n["createBlock"])(l,null,{default:Oe(()=>[Object(n["createVNode"])("div",je,[Object(n["createVNode"])("table",_e,[Object(n["createVNode"])("tr",null,[ve,Object(n["createVNode"])("th",null,[Object(n["createVNode"])(s,{class:"ico",src:e.img("morning")},null,8,["src"]),ye]),Object(n["createVNode"])("th",null,[Object(n["createVNode"])(s,{class:"ico",src:e.img("noon")},null,8,["src"]),we]),Object(n["createVNode"])("th",null,[Object(n["createVNode"])(s,{class:"ico",src:e.img("evening")},null,8,["src"]),Ne]),Object(n["createVNode"])("th",null,[Object(n["createVNode"])(s,{class:"ico",src:e.img("frequency")},null,8,["src"]),Ce])]),(Object(n["openBlock"])(!0),Object(n["createBlock"])(n["Fragment"],null,Object(n["renderList"])(e.listData,(t,a)=>(Object(n["openBlock"])(),Object(n["createBlock"])("tr",{key:a},[Object(n["createVNode"])("td",null,Object(n["toDisplayString"])(t.label),1),Object(n["createVNode"])("td",null,[Object(n["createVNode"])(c,{value:t.other.am,onClick:a=>e.launchKeyPad(t,"am"),class:"dosage-input"},null,8,["value","onClick"])]),Object(n["createVNode"])("td",null,[Object(n["createVNode"])(c,{value:t.other.noon,onClick:a=>e.launchKeyPad(t,"noon"),class:"dosage-input"},null,8,["value","onClick"])]),Object(n["createVNode"])("td",null,[Object(n["createVNode"])(c,{value:t.other.pm,onClick:a=>e.launchKeyPad(t,"pm"),class:"dosage-input"},null,8,["value","onClick"])]),Object(n["createVNode"])("td",null,[Object(n["withDirectives"])(Object(n["createVNode"])("select",{"onUpdate:modelValue":e=>t.other.frequency=e,class:"custom-med-frequency"},[Ve,De],8,["onUpdate:modelValue"]),[[n["vModelSelect"],t.other.frequency]])])]))),128))])])]),_:1})}));var Te=a("10be"),Ie=Object(n["defineComponent"])({components:{ViewPort:c["a"],IonImg:l["s"],IonInput:l["v"]},mixins:[s["a"]],data:()=>({listData:[]}),watch:{clear:{handler(){this.listData=this.listData.filter(e=>(e.other.am=0,e.other.noon=0,e.other.pm=0,e.other.frequency="Daily (QOD)",!0))},immediate:!0},listData:{handler(){this.$emit("onValue",this.listData)},deep:!0,immediate:!0}},async activated(){this.$emit("onFieldActivated",this);const e=await this.options(this.fdata);this.updateListData(e)},methods:{img(e){return`assets/images/prescription/${e}.png`},updateListData(e){this.listData=e.map(e=>{const t=Object(d["find"])(this.listData,{label:e.label,value:e.value});return t||(t||e)})},async launchKeyPad(e,t){(await l["X"].create({component:Te["a"],backdropDismiss:!1,cssClass:"keypad-modal",componentProps:{title:e.label,preset:e.other[t],strictNumbers:!0,onKeyPress(a){e.other[t]=a}}})).present()}}});a("f145");const xe=h()(Ie,[["render",ke],["__scopeId","data-v-4641300f"]]);var Se=xe,Pe=a("71f2"),Ae=a("5fd1");const Ee=Object(n["withScopeId"])("data-v-0f89768a");Object(n["pushScopeId"])("data-v-0f89768a");const Be={class:"view-port-content"},Re=Object(n["createTextVNode"])("Previous weight"),Fe=Object(n["createTextVNode"])("Lastest weight"),Le=Object(n["createTextVNode"])("Latest weight change"),Me=Object(n["createTextVNode"])("Patient Age"),He=Object(n["createTextVNode"])("Patient BMI");Object(n["popScopeId"])();const $e=Ee((function(e,t,a,o,i,r){const s=Object(n["resolveComponent"])("apexchart"),c=Object(n["resolveComponent"])("ion-col"),l=Object(n["resolveComponent"])("ion-label"),d=Object(n["resolveComponent"])("ion-chip"),u=Object(n["resolveComponent"])("ion-item"),p=Object(n["resolveComponent"])("ion-list"),h=Object(n["resolveComponent"])("ion-row"),b=Object(n["resolveComponent"])("view-port");return Object(n["openBlock"])(),Object(n["createBlock"])(b,null,{default:Ee(()=>[Object(n["createVNode"])("div",Be,[Object(n["createVNode"])(h,{class:"parent-row"},{default:Ee(()=>[Object(n["createVNode"])(c,{size:"7"},{default:Ee(()=>[Object(n["createVNode"])(s,{width:e.width,height:e.height,type:e.type,options:e.chartOptions,series:e.series},null,8,["width","height","type","options","series"])]),_:1}),Object(n["createVNode"])(c,{size:"5"},{default:Ee(()=>[Object(n["createVNode"])(p,null,{default:Ee(()=>[Object(n["createVNode"])(u,null,{default:Ee(()=>[Object(n["createVNode"])(l,{class:"title"},{default:Ee(()=>[Re]),_:1}),Object(n["createVNode"])(d,{slot:"end",color:"primary"},{default:Ee(()=>[Object(n["createTextVNode"])(Object(n["toDisplayString"])(e.stats.prevWeight),1)]),_:1})]),_:1}),Object(n["createVNode"])(u,null,{default:Ee(()=>[Object(n["createVNode"])(l,{class:"title"},{default:Ee(()=>[Fe]),_:1}),Object(n["createVNode"])(d,{slot:"end",color:"primary"},{default:Ee(()=>[Object(n["createTextVNode"])(Object(n["toDisplayString"])(e.stats.curWeight),1)]),_:1})]),_:1}),Object(n["createVNode"])(u,null,{default:Ee(()=>[Object(n["createVNode"])(l,{class:"title"},{default:Ee(()=>[Le]),_:1}),Object(n["withDirectives"])(Object(n["createVNode"])("img",{src:e.stats.weightState,width:"50"},null,8,["src"]),[[n["vShow"],e.stats.weightState]]),Object(n["createVNode"])(d,{slot:"end",color:"primary"},{default:Ee(()=>[Object(n["createTextVNode"])(Object(n["toDisplayString"])(e.stats.curWeightChange),1)]),_:1})]),_:1}),Object(n["createVNode"])(u,null,{default:Ee(()=>[Object(n["createVNode"])(l,{class:"title"},{default:Ee(()=>[Me]),_:1}),Object(n["createVNode"])(d,{slot:"end",color:"primary"},{default:Ee(()=>[Object(n["createTextVNode"])(Object(n["toDisplayString"])(e.stats.age),1)]),_:1})]),_:1}),Object(n["createVNode"])(u,null,{default:Ee(()=>[Object(n["createVNode"])(l,{class:"title"},{default:Ee(()=>[He]),_:1}),Object(n["createVNode"])(d,{slot:"end",color:"primary"},{default:Ee(()=>[Object(n["createTextVNode"])(Object(n["toDisplayString"])(e.stats.bmi.index),1)]),_:1})]),_:1}),Object(n["createVNode"])(u,null,{default:Ee(()=>[Object(n["createVNode"])(l,{style:{"background-color":e.stats.bmi.color,color:"white",padding:"10px","text-align":"center"}},{default:Ee(()=>[Object(n["createTextVNode"])(Object(n["toDisplayString"])(e.stats.bmi.result),1)]),_:1},8,["style"])]),_:1})]),_:1})]),_:1})]),_:1})])]),_:1})}));var Ue=Object(n["defineComponent"])({components:{ViewPort:c["a"],IonCol:l["m"],IonRow:l["H"],IonItem:l["w"],IonChip:l["l"]},mixins:[s["a"]],data:()=>({stats:{prevWeight:"-",curWeight:"-",curWeightChange:"-",weightState:"",age:"-",bmi:{}},type:"area",width:"100%",height:"560px",series:[],chartOptions:{chart:{id:"weight_chart"},title:{text:"Weight trail (2 year period)"},stroke:{curve:"smooth"},yaxis:{title:{text:"Weight Kg(s)"},min:0},xaxis:{categories:[]},dataLabels:{enabled:!0,textAnchor:"start",formatter:function(e,t){var a;const n=null===(a=t.w.config.series[0].data[t.dataPointIndex-1])||void 0===a?void 0:a.y;return n&&n>0?(e/n*100-100).toFixed(2)+" %":"0.0%"}}}}),activated(){this.$emit("onFieldActivated",this)},methods:{setStats(e){var t,a;const n=(null===(t=e.values[e.values.length-2])||void 0===t?void 0:t.y)||0,o=(null===(a=e.values[e.values.length-1])||void 0===a?void 0:a.y)||0;if(this.stats.curWeight=o||"-",this.stats.prevWeight=n||"-",this.stats.age=e.age,this.stats.bmi=e.bmi,o>0&&n>0){this.stats.curWeightChange=Math.abs(o/n*100-100).toFixed(2)+" %";const e="/assets/images/drop-up-arrow.svg",t="/assets/images/drop-down-arrow.svg";this.stats.weightState=o>n?e:t}}},async created(){const e=await this.options(this.fdata),t=e[0].other,a=t.values;this.series=[{name:"Weight",data:a.sort((e,t)=>{const a=new Date(e.x),n=new Date(t.x);return a-n}).map(e=>{const[t,a]=e.x.split("/");return{x:`${t}.${a}`,y:e.y}})}],this.type=t.type?t.type:"area",this.width=t.width?t.width:"100%",this.setStats(t)}});a("cfc5");const qe=h()(Ue,[["render",$e],["__scopeId","data-v-0f89768a"]]);var Ge=qe;const ze=Object(n["withScopeId"])("data-v-5b07c96e");Object(n["pushScopeId"])("data-v-5b07c96e");const Ye={class:"view-port-content"},We=Object(n["createVNode"])("p",null,null,-1),Ke={class:"centered his-card"},Xe={class:"keypad"},Je={class:"value-highlight"},Qe={class:"value-highlight"};Object(n["popScopeId"])();const Ze=ze((function(e,t,a,o,i,r){const s=Object(n["resolveComponent"])("ion-row"),c=Object(n["resolveComponent"])("option-button"),l=Object(n["resolveComponent"])("ion-col"),d=Object(n["resolveComponent"])("ion-input"),u=Object(n["resolveComponent"])("ion-button"),p=Object(n["resolveComponent"])("ion-label"),h=Object(n["resolveComponent"])("ion-item"),b=Object(n["resolveComponent"])("ion-list"),m=Object(n["resolveComponent"])("ion-grid"),g=Object(n["resolveComponent"])("view-port");return Object(n["openBlock"])(),Object(n["createBlock"])(g,null,{default:ze(()=>[Object(n["createVNode"])("div",Ye,[Object(n["createVNode"])(m,null,{default:ze(()=>[e.vitalsStatus?(Object(n["openBlock"])(),Object(n["createBlock"])(s,{key:0,class:"mobile-component-view",style:{width:"100%","background-color":e.vitalsStatus.color,color:"white",padding:"10px",textAlign:"center"}},{default:ze(()=>[Object(n["createTextVNode"])(Object(n["toDisplayString"])(e.vitalsStatus.status)+" ",1),We]),_:1},8,["style"])):Object(n["createCommentVNode"])("",!0),Object(n["createVNode"])(s,null,{default:ze(()=>[Object(n["createVNode"])(l,{size:"2"},{default:ze(()=>[(Object(n["openBlock"])(!0),Object(n["createBlock"])(n["Fragment"],null,Object(n["renderList"])(e.keys,(t,a)=>Object(n["withDirectives"])((Object(n["openBlock"])(),Object(n["createBlock"])(c,{class:"his-sm-text",key:a,label:t.label,isActive:e.activeField===a,image:"vitals/"+t.other.icon,onClick:t=>e.setActiveField(a)},null,8,["label","isActive","image","onClick"])),[[n["vShow"],!1!==t.other.visible]])),128))]),_:1}),Object(n["createVNode"])(l,{"size-lg":"6","size-sm":"10"},{default:ze(()=>[Object(n["createVNode"])("div",Ke,[e.keys.length>0?(Object(n["openBlock"])(),Object(n["createBlock"])(d,{key:0,type:"text",class:"keypad-input",modelValue:e.keys[e.activeField].value,"onUpdate:modelValue":t[1]||(t[1]=t=>e.keys[e.activeField].value=t),readonly:e.useVirtualInput},null,8,["modelValue","readonly"])):Object(n["createCommentVNode"])("",!0),Object(n["createVNode"])("table",Xe,[(Object(n["openBlock"])(!0),Object(n["createBlock"])(n["Fragment"],null,Object(n["renderList"])(e.keyboard,(t,a)=>(Object(n["openBlock"])(),Object(n["createBlock"])("tr",{key:a},[(Object(n["openBlock"])(!0),Object(n["createBlock"])(n["Fragment"],null,Object(n["renderList"])(t,(t,a)=>(Object(n["openBlock"])(),Object(n["createBlock"])("td",{class:"his-keyboard-margin",key:"btn-"+a},[Object(n["createVNode"])(u,{color:"primary",class:"his-keyboard-btn",onClick:a=>e.onKeyPress(t)},{default:ze(()=>[Object(n["createTextVNode"])(Object(n["toDisplayString"])(t),1)]),_:2},1032,["onClick"])]))),128))]))),128))])])]),_:1}),Object(n["createVNode"])(l,{class:"full-component-view",size:"4"},{default:ze(()=>[Object(n["createVNode"])(b,null,{default:ze(()=>[(Object(n["openBlock"])(!0),Object(n["createBlock"])(n["Fragment"],null,Object(n["renderList"])(e.keys,(t,a)=>(Object(n["openBlock"])(),Object(n["createBlock"])(h,{class:"his-sm-text",key:a,color:e.activeField===a?"secondary":""},{default:ze(()=>[Object(n["createVNode"])(p,null,{default:ze(()=>[Object(n["createVNode"])("b",null,Object(n["toDisplayString"])(t.label),1)]),_:2},1024),Object(n["createVNode"])(p,{slot:"end"},{default:ze(()=>[Object(n["createVNode"])("span",Je,Object(n["toDisplayString"])(t.value||"-"),1),Object(n["createTextVNode"])(" "+Object(n["toDisplayString"])(t.other.modifier),1)]),_:2},1024)]),_:2},1032,["color"]))),128)),e.vitalsStatus&&e.vitalsStatus.value?(Object(n["openBlock"])(),Object(n["createBlock"])(h,{key:0},{default:ze(()=>[Object(n["createVNode"])(p,null,{default:ze(()=>[Object(n["createVNode"])("b",null,Object(n["toDisplayString"])(e.vitalsStatus.label),1)]),_:1}),Object(n["createVNode"])(p,{slot:"end"},{default:ze(()=>[Object(n["createVNode"])("span",Qe,Object(n["toDisplayString"])(e.vitalsStatus.value),1)]),_:1})]),_:1})):Object(n["createCommentVNode"])("",!0),Object(n["createVNode"])(h,null,{default:ze(()=>[e.vitalsStatus?(Object(n["openBlock"])(),Object(n["createBlock"])(p,{key:0,style:{"background-color":e.vitalsStatus.color,color:"white",padding:"10px","text-align":"center"}},{default:ze(()=>[Object(n["createTextVNode"])(Object(n["toDisplayString"])(e.vitalsStatus.status),1)]),_:1},8,["style"])):Object(n["createCommentVNode"])("",!0)]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})])]),_:1})}));a("caad");const et=Object(n["withScopeId"])("data-v-321424f0"),tt=et((function(e,t,a,o,i,r){const s=Object(n["resolveComponent"])("center");return Object(n["openBlock"])(),Object(n["createBlock"])("div",{class:`his-card ${e.state} clickable`},[Object(n["createVNode"])("img",{src:e.icon},null,8,["src"]),Object(n["createVNode"])(s,null,{default:et(()=>[Object(n["createTextVNode"])(Object(n["toDisplayString"])(e.label),1)]),_:1})],2)}));var at=Object(n["defineComponent"])({props:{label:{type:String,required:!0},image:{type:String,required:!0},isActive:{type:Boolean,default:!0}},computed:{state(){return this.isActive?"active-card-color":"disabled-card-color"},icon(){return`assets/images/${this.image}.png`}}});a("2ee9");const nt=h()(at,[["render",tt],["__scopeId","data-v-321424f0"]]);var ot=nt,it=a("b5e4"),rt=a("1718"),st=a("2ed9"),ct=Object(n["defineComponent"])({components:{ViewPort:c["a"],IonInput:l["v"],IonGrid:l["p"],IonCol:l["m"],IonRow:l["H"],OptionButton:ot},mixins:[s["a"]],data:()=>({keys:[],vitalsStatus:{},activeField:0,keyboard:C["l"]}),setup(){const{useVirtualInput:e}=Object(st["a"])();return{useVirtualInput:e}},activated(){this.$emit("onFieldActivated",this)},watch:{keys:{async handler(e){this.$emit("onValue",e)},deep:!0,immediate:!0}},async mounted(){this.keys=await this.options(this.fdata)},methods:{img(e){return Object(rt["a"])(`vitals/${e}.png`)},async onKeyPress(e){const t=this.keys[this.activeField].value.toString();if(e.match(/del/i)?this.keys[this.activeField].value=t.substring(0,t.length-1):e.match(/clear/i)?this.keys[this.activeField].value="":this.keys[this.activeField].value+=e,"function"===typeof this.config.onUpdateAlertStatus){const e=await this.config.onUpdateAlertStatus(this.keys);Object(d["isPlainObject"])(e)&&Object.keys(e).includes("status")&&(this.vitalsStatus=e||null)}},async setActiveField(e){if("function"===typeof this.config.onChangeOption)try{await this.config.onChangeOption(this.keys[this.activeField]),this.activeField=e}catch(t){Object(it["e"])(t)}}}});a("ebcb");const lt=h()(ct,[["render",Ze],["__scopeId","data-v-5b07c96e"]]);var dt=lt;const ut={class:"view-port-content"},pt={key:0,class:"appointments"},ht=Object(n["createVNode"])("b",null,"Medication Run out Date",-1),bt=Object(n["createVNode"])("p",null,null,-1),mt=Object(n["createVNode"])("b",null,"User set appointment date",-1),gt=Object(n["createVNode"])("p",null,null,-1),ft=Object(n["createVNode"])("b",null,"Appointment(s)",-1),Ot=Object(n["createVNode"])("p",null,null,-1),jt=Object(n["createVNode"])("b",null,"Appointment limit (per/day)",-1),_t=Object(n["createVNode"])("p",null,null,-1);function vt(e,t,a,o,i,r){const s=Object(n["resolveComponent"])("Calendar"),c=Object(n["resolveComponent"])("ion-col"),l=Object(n["resolveComponent"])("ion-label"),d=Object(n["resolveComponent"])("ion-item"),u=Object(n["resolveComponent"])("ion-list"),p=Object(n["resolveComponent"])("ion-row"),h=Object(n["resolveComponent"])("ion-grid"),b=Object(n["resolveComponent"])("view-port");return Object(n["openBlock"])(),Object(n["createBlock"])(b,null,{default:Object(n["withCtx"])(()=>[Object(n["createVNode"])("div",ut,[Object(n["createVNode"])(h,null,{default:Object(n["withCtx"])(()=>[Object(n["createVNode"])(p,null,{default:Object(n["withCtx"])(()=>[Object(n["createVNode"])(c,{size:"8"},{default:Object(n["withCtx"])(()=>[Object(n["createVNode"])(s,{color:"blue",ref:"calendar","is-expanded":"",class:"custom-calendar","min-date":e.sessionDate,"max-date":e.runOutDate,attributes:e.attributes,masks:e.masks,"disable-page-swipe":""},{"day-content":Object(n["withCtx"])(({day:t})=>[Object(n["createVNode"])("div",{class:{selected:t.id===e.cDate,isDisabled:t.isDisabled}},[Object(n["createVNode"])("span",{onClick:a=>e.dayClicked(t)},Object(n["toDisplayString"])(t.day),9,["onClick"]),t.id===e.cDate?(Object(n["openBlock"])(),Object(n["createBlock"])("sup",pt,Object(n["toDisplayString"])(e.appointments.length),1)):Object(n["createCommentVNode"])("",!0)],2)]),_:1},8,["min-date","max-date","attributes","masks"])]),_:1}),Object(n["createVNode"])(c,{size:"4",class:"his-card"},{default:Object(n["withCtx"])(()=>[Object(n["createVNode"])(u,null,{default:Object(n["withCtx"])(()=>[e.showMedicationRunoutDate&&e.rDate?(Object(n["openBlock"])(),Object(n["createBlock"])(d,{key:0,class:"his-sm-text"},{default:Object(n["withCtx"])(()=>[Object(n["createVNode"])(l,{class:"ion-text-wrap"},{default:Object(n["withCtx"])(()=>[ht,bt,Object(n["createVNode"])("span",null,Object(n["toDisplayString"])(e.rDate),1)]),_:1})]),_:1})):Object(n["createCommentVNode"])("",!0),Object(n["createVNode"])(d,{class:"his-sm-text"},{default:Object(n["withCtx"])(()=>[Object(n["createVNode"])(l,{class:"ion-text-wrap"},{default:Object(n["withCtx"])(()=>[mt,gt,Object(n["createVNode"])("span",null,Object(n["toDisplayString"])(e.aDate),1)]),_:1})]),_:1}),Object(n["createVNode"])(d,{class:"his-sm-text"},{default:Object(n["withCtx"])(()=>[Object(n["createVNode"])(l,{class:"ion-text-wrap"},{default:Object(n["withCtx"])(()=>[ft,Ot,Object(n["createVNode"])("span",null,Object(n["toDisplayString"])(e.appointments.length),1)]),_:1})]),_:1}),Object(n["createVNode"])(d,{class:"his-sm-text"},{default:Object(n["withCtx"])(()=>[Object(n["createVNode"])(l,{class:"ion-text-wrap"},{default:Object(n["withCtx"])(()=>[jt,_t,Object(n["createVNode"])("span",null,Object(n["toDisplayString"])(e.appointmentLimit),1)]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})])]),_:1})}var yt=a("7b37"),wt=a("9283"),Nt=a("83af"),Ct=a("d1ca"),Vt=a("5a0c"),Dt=a.n(Vt),kt=Object(n["defineComponent"])({components:{ViewPort:c["a"],Calendar:yt["a"],IonGrid:l["p"],IonCol:l["m"],IonRow:l["H"]},mixins:[s["a"]],watch:{startDate:{async handler(e){const t=e||wt["b"].toStandardHisDisplayFormat(this.sessionDate);this.$emit("onValue",{label:"",value:t})},immediate:!0}},data:()=>({rows:[],startDate:null,runOutDate:null,appointments:[],clinicHolidays:[],clinicDays:[],patientAge:0,appointmentLimit:0,sessionDate:null,masks:{weekdays:"WWW"}}),activated(){this.$emit("onFieldActivated",this)},async created(){this.patientAge=this.config.patientAge||0,await this.getAppointmentLimit(),await this.getClinicHolidays(),await this.getClinicDays();const e=await this.options(this.fdata);this.sessionDate=Nt["a"].getSessionDate();const t=e[0].other.appointmentDate;this.appointments=await this.getAppointments(t),this.setDate(t),this.runOutDate=e[0].other.runOutDate?new Date(e[0].other.runOutDate):null},methods:{getAppointments(e){return Nt["a"].getDailiyAppointments(wt["b"].toStandardHisFormat(e))},async getAppointmentLimit(){const e=await Ct["b"].appointmentLimit();e&&(this.appointmentLimit=e)},async getClinicHolidays(){const e=await Ct["b"].clinicHolidays();e&&(this.clinicHolidays=e.split(","))},async getClinicDays(){let e="";e=this.patientAge>=18?await Ct["b"].adultClinicDays():await Ct["b"].peadsClinicDays(),e&&(this.clinicDays=e.split(","))},async isDateAvalaible(e){const t=await this.getAppointments(e);if(0!==t.length&&t.length>=this.appointmentLimit){const t=await Object(it["a"])("Appointment limit reached for the selected date "+wt["b"].toStandardHisDisplayFormat(e),{header:"APPOINTMENT LIMIT REACHED",cancelBtnLabel:"Proceed with Selected Date",confirmBtnLabel:"Select Another Date"});if(t)return!1}if(this.clinicHolidays.includes(wt["b"].toStandardHisFormat(e))){const e=await Object(it["a"])("Selected date is a clinic holiday, do you want to set an appointment?");if(!e)return!1}const a=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],n=a[Dt()(e).day()];if(!this.clinicDays.includes(n)){const t=await Object(it["a"])(`The selected date ${wt["b"].toStandardHisDisplayFormat(e)} is not a clinic day. Do you want to proceed with this date?`);if(!t)return!1}return this.appointments=t,!0},async setDate(e){this.startDate=new Date(e);const t=this.$refs.calendar;await t.move(this.startDate),await t.focusDate(this.startDate)},async dayClicked(e){!e.isDisabled&&await this.isDateAvalaible(e.id)&&this.setDate(e.id)}},computed:{showMedicationRunoutDate(){var e,t;return"boolean"!==typeof(null===(e=this.config)||void 0===e?void 0:e.hideRunoutDate)||!(null!==(t=this.config)&&void 0!==t&&t.hideRunoutDate)},aDate(){return wt["b"].toStandardHisDisplayFormat(this.startDate)},rDate(){return wt["b"].toStandardHisDisplayFormat(this.runOutDate)},cDate(){return wt["b"].toStandardHisFormat(this.startDate)},attributes(){return[{highlight:!0,dates:this.aDate}]}}});a("5ba0");const Tt=h()(kt,[["render",vt]]);var It=Tt;const xt=Object(n["withScopeId"])("data-v-6ce7f934");Object(n["pushScopeId"])("data-v-6ce7f934");const St={style:{}};Object(n["popScopeId"])();const Pt=xt((function(e,t,a,o,i,r){const s=Object(n["resolveComponent"])("ion-text"),c=Object(n["resolveComponent"])("ion-label"),l=Object(n["resolveComponent"])("ion-chip"),d=Object(n["resolveComponent"])("ion-col"),u=Object(n["resolveComponent"])("ion-row"),p=Object(n["resolveComponent"])("ion-item"),h=Object(n["resolveComponent"])("ion-list"),b=Object(n["resolveComponent"])("ion-checkbox"),m=Object(n["resolveComponent"])("ion-grid"),g=Object(n["resolveComponent"])("view-port");return Object(n["openBlock"])(),Object(n["createBlock"])("div",null,[Object(n["createVNode"])(g,{showFull:!e.showKeyboard,style:{padding:"0"}},{default:xt(()=>[Object(n["createVNode"])(m,null,{default:xt(()=>[Object(n["createVNode"])(u,null,{default:xt(()=>[Object(n["createVNode"])(d,{size:"12"},{default:xt(()=>[(Object(n["openBlock"])(!0),Object(n["createBlock"])(n["Fragment"],null,Object(n["renderList"])(e.checkedItems,(t,a)=>(Object(n["openBlock"])(),Object(n["createBlock"])("span",{key:a},[Object(n["createVNode"])(l,{color:"danger",onClick:a=>e.uncheck(t)},{default:xt(()=>[Object(n["createVNode"])(c,null,{default:xt(()=>[Object(n["createVNode"])(s,{class:"his-md-text"},{default:xt(()=>[Object(n["createTextVNode"])(Object(n["toDisplayString"])(t.label),1)]),_:2},1024)]),_:2},1024)]),_:2},1032,["onClick"])]))),128))]),_:1})]),_:1}),Object(n["createVNode"])(u,null,{default:xt(()=>[Object(n["createVNode"])(d,{size:"4"},{default:xt(()=>[Object(n["createVNode"])(h,{style:{overflowY:"auto",height:"80vh",margin:0}},{default:xt(()=>[(Object(n["openBlock"])(!0),Object(n["createBlock"])(n["Fragment"],null,Object(n["renderList"])(e.listData,(t,a)=>(Object(n["openBlock"])(),Object(n["createBlock"])(p,{key:a,onClick:a=>e.getSpecificComplaints(t.value),detail:!0,color:e.ActiveCategory===t.label?"light":""},{default:xt(()=>[Object(n["createVNode"])(c,null,{default:xt(()=>[Object(n["createVNode"])(s,{class:"his-md-text"},{default:xt(()=>[Object(n["createTextVNode"])(Object(n["toDisplayString"])(t.label),1)]),_:2},1024)]),_:2},1024)]),_:2},1032,["onClick","color"]))),128))]),_:1})]),_:1}),e.ActiveCategory?(Object(n["openBlock"])(),Object(n["createBlock"])(d,{key:0,style:{overflowY:"auto",height:"78vh"}},{default:xt(()=>[Object(n["createVNode"])("div",St,[Object(n["createVNode"])(h,{class:"view-port-content"},{default:xt(()=>[(Object(n["openBlock"])(!0),Object(n["createBlock"])(n["Fragment"],null,Object(n["renderList"])(e.activeCategoryItems,(t,a)=>(Object(n["openBlock"])(),Object(n["createBlock"])(p,{key:a,color:t.isChecked?"light":""},{default:xt(()=>[Object(n["createVNode"])(c,null,{default:xt(()=>[Object(n["createVNode"])(s,{class:"his-md-text"},{default:xt(()=>[Object(n["createTextVNode"])(Object(n["toDisplayString"])(t.label),1)]),_:2},1024)]),_:2},1024),Object(n["createVNode"])(b,{slot:"end",modelValue:t.isChecked,"onUpdate:modelValue":e=>t.isChecked=e,onIonChange:a=>e.onselect(t,a),disabled:null===t||void 0===t?void 0:t.disabled},null,8,["modelValue","onUpdate:modelValue","onIonChange","disabled"])]),_:2},1032,["color"]))),128))]),_:1})])]),_:1})):Object(n["createCommentVNode"])("",!0)]),_:1})]),_:1})]),_:1},8,["showFull"])])}));var At=a("331e"),Et=Object(n["defineComponent"])({components:{IonCheckbox:l["k"],IonText:l["M"],IonChip:l["l"]},name:"HisComplaintsPicker",mixins:[F["a"]],data:()=>({complaintsList:{},ActiveCategory:""}),methods:{async onselect(e,t){this.$nextTick(async()=>{const a={...e};if(a.isChecked=t.target.checked,this.onValue&&a.isChecked){const e=await this.onValue(a);if(!e)return t.target.checked=!1}this.onValueUpdate&&(this.complaintsList=await this.onValueUpdate({...this.complaintsList},a)),this.$emit("onValue",this.getChecked(this.complaintsList))})},async getSpecificComplaints(e){if(!(e in this.complaintsList)){const t=await At["a"].getComplaintsList(e);this.complaintsList[e]=this.mapListToOptions(t,e)}this.ActiveCategory=e},mapListToOptions(e,t=""){return Object(d["isEmpty"])(e)?[]:e.map(e=>{const a={label:e.name,value:e.name,isChecked:!1,other:e};return t&&(a.other.parent=t),a})},uncheck(e){this.complaintsList[e.other.parent].forEach(t=>{t.label===e.label&&(t.isChecked=!1)})},getChecked(e){const t=[];for(const a in e)t.push(...e[a].filter(e=>e.isChecked));return t}},computed:{checkedItems(){return this.getChecked(this.complaintsList)},activeCategoryItems(){return this.complaintsList[this.ActiveCategory]}},watch:{clear(){for(const e in this.complaintsList)this.complaintsList[e]=this.complaintsList[e].map(e=>(e.isChecked=!1,e))}},async activated(){this.$emit("onFieldActivated",this);const e=await At["a"].getComplaintsList("Presenting complaint group");this.listData=this.mapListToOptions(e),this.$emit("onValue",this.getChecked(this.complaintsList))}});a("341d");const Bt=h()(Et,[["render",Pt],["__scopeId","data-v-6ce7f934"]]);var Rt=Bt;const Ft=Object(n["withScopeId"])("data-v-bbb8ce9a");Object(n["pushScopeId"])("data-v-bbb8ce9a");const Lt={class:"view-port-content"},Mt=Object(n["createVNode"])("tr",null,[Object(n["createVNode"])("td",null,[Object(n["createVNode"])("b",null,"Total Holidays Set")])],-1);Object(n["popScopeId"])();const Ht=Ft((function(e,t,a,o,i,r){const s=Object(n["resolveComponent"])("DatePicker"),c=Object(n["resolveComponent"])("ion-col"),l=Object(n["resolveComponent"])("ion-row"),d=Object(n["resolveComponent"])("ion-grid"),u=Object(n["resolveComponent"])("view-port");return Object(n["openBlock"])(),Object(n["createBlock"])(u,null,{default:Ft(()=>[Object(n["createVNode"])("div",Lt,[Object(n["createVNode"])(d,null,{default:Ft(()=>[Object(n["createVNode"])(l,null,{default:Ft(()=>[Object(n["createVNode"])(c,{size:"9"},{default:Ft(()=>[Object(n["createVNode"])(s,{"is-expanded":"",attributes:e.attributes,"select-attribute":e.selectAttribute,onDayclick:e.onDayClick},null,8,["attributes","select-attribute","onDayclick"])]),_:1}),Object(n["createVNode"])(c,{size:"3"},{default:Ft(()=>[Object(n["createVNode"])("table",null,[Object(n["createVNode"])("tr",null,[Object(n["createVNode"])("td",null,[Mt,Object(n["createVNode"])("tr",null,[Object(n["createVNode"])("td",null,Object(n["toDisplayString"])(e.totalDays),1)])])])])]),_:1})]),_:1})]),_:1})])]),_:1})}));var $t=Object(n["defineComponent"])({components:{DatePicker:yt["b"],ViewPort:c["a"],IonGrid:l["p"],IonCol:l["m"],IonRow:l["H"]},mixins:[s["a"]],watch:{days:{async handler(e){if(!Object(d["isEmpty"])(e)){const t=e.map(e=>e.date).join();if(this.onValue){const e=await this.onValue(t,this);if(!e)return}this.$emit("onValue",{label:t,value:t})}},immediate:!0,deep:!0}},data:()=>({days:[],selectAttribute:{dot:!0}}),computed:{attributes(){return this.days.map(e=>({highlight:!0,dates:e.date}))},totalDays(){return this.days.length}},methods:{onDayClick(e){const t=this.days.findIndex(t=>t.id===e.id);t>=0?this.days.splice(t,1):this.days.push({id:e.id,date:wt["b"].toStandardHisFormat(e.date)})}},async created(){if(this.defaultValue){const e=await this.defaultValue();this.days=e.split(",").map(e=>({id:e,date:e}))}},activated(){this.$emit("onFieldActivated",this)}});a("7d9b");const Ut=h()($t,[["render",Ht],["__scopeId","data-v-bbb8ce9a"]]);var qt=Ut;const Gt=Object(n["withScopeId"])("data-v-2e36360d");Object(n["pushScopeId"])("data-v-2e36360d");const zt={class:"view-port-content"};Object(n["popScopeId"])();const Yt=Gt((function(e,t,a,o,i,r){const s=Object(n["resolveComponent"])("list"),c=Object(n["resolveComponent"])("view-port");return Object(n["openBlock"])(),Object(n["createBlock"])(c,null,{default:Gt(()=>[Object(n["createVNode"])("div",zt,[Object(n["createVNode"])(s,{listData:e.listData},null,8,["listData"])])]),_:1})})),Wt=Object(n["withScopeId"])("data-v-5ec16ace"),Kt=Wt((function(e,t,a,o,i,r){const s=Object(n["resolveComponent"])("ion-label"),c=Object(n["resolveComponent"])("ion-item"),l=Object(n["resolveComponent"])("ion-col"),d=Object(n["resolveComponent"])("ion-row"),u=Object(n["resolveComponent"])("ion-list");return Object(n["openBlock"])(),Object(n["createBlock"])(u,null,{default:Wt(()=>[Object(n["createVNode"])(d,null,{default:Wt(()=>[(Object(n["openBlock"])(!0),Object(n["createBlock"])(n["Fragment"],null,Object(n["renderList"])(e.multiViewSummaryItems,(t,a)=>(Object(n["openBlock"])(),Object(n["createBlock"])(l,{key:a,size:e.singleView?12:6},{default:Wt(()=>[(Object(n["openBlock"])(!0),Object(n["createBlock"])(n["Fragment"],null,Object(n["renderList"])(t,(e,t)=>(Object(n["openBlock"])(),Object(n["createBlock"])(c,{class:"his-sm-text",key:t},{default:Wt(()=>[Object(n["createVNode"])(s,null,{default:Wt(()=>[Object(n["createTextVNode"])(Object(n["toDisplayString"])(e.label),1)]),_:2},1024),Object(n["createVNode"])(s,{class:"lb-value",innerHTML:e.value,slot:"end"},null,8,["innerHTML"])]),_:2},1024))),128))]),_:2},1032,["size"]))),128))]),_:1})]),_:1})}));var Xt=Object(n["defineComponent"])({props:{listData:{type:Object}},data:()=>({splitFactor:10}),components:{IonList:l["y"],IonLabel:l["x"],IonItem:l["w"]},computed:{singleView(){var e,t;let a=null===(e=this.listData)||void 0===e?void 0:e.length;return a=null===(t=this.listData)||void 0===t?void 0:t.length,!(a>this.splitFactor)},multiViewSummaryItems(){var e,t;const a=null===(e=this.listData)||void 0===e?void 0:e.length,n=this.singleView?null===(t=this.listData)||void 0===t?void 0:t.length:Math.ceil(a/2);return Object(d["chunk"])(this.listData,n)}}});a("e2d9");const Jt=h()(Xt,[["render",Kt],["__scopeId","data-v-5ec16ace"]]);var Qt=Jt,Zt=Object(n["defineComponent"])({components:{ViewPort:c["a"],list:Qt},mixins:[s["a"]],data:()=>({listData:[]}),async activated(){this.$emit("onFieldActivated",this),this.listData=this.options(this.fdata,this.cdata)}});a("958b");const ea=h()(Zt,[["render",Yt],["__scopeId","data-v-2e36360d"]]);var ta=ea;const aa=Object(n["withScopeId"])("data-v-7d80ac9d");Object(n["pushScopeId"])("data-v-7d80ac9d");const na={class:"primary-info"},oa={class:"his-md-text"},ia={class:"view-port-content"},ra={class:"his-lg-text",style:{marginLeft:"3%"}},sa={class:"his-md-text secondary-info"};Object(n["popScopeId"])();const ca=aa((function(e,t,a,o,i,r){const s=Object(n["resolveComponent"])("view-port");return Object(n["openBlock"])(),Object(n["createBlock"])(s,null,{default:aa(()=>[Object(n["createVNode"])("div",na,[Object(n["createVNode"])("ul",oa,[(Object(n["openBlock"])(!0),Object(n["createBlock"])(n["Fragment"],null,Object(n["renderList"])(e.titleItems,(e,t)=>(Object(n["openBlock"])(),Object(n["createBlock"])("li",{key:t},[Object(n["createVNode"])("b",null,Object(n["toDisplayString"])(e.label)+":",1),Object(n["createTextVNode"])(" "+Object(n["toDisplayString"])(e.value),1)]))),128))])]),Object(n["createVNode"])("div",ia,[Object(n["createVNode"])("b",ra,Object(n["toDisplayString"])(e.config.title),1),Object(n["createVNode"])("ul",sa,[(Object(n["openBlock"])(!0),Object(n["createBlock"])(n["Fragment"],null,Object(n["renderList"])(e.bodyItems,(e,t)=>(Object(n["openBlock"])(),Object(n["createBlock"])("li",{key:t},Object(n["toDisplayString"])(e.value),1))),128))])])]),_:1})}));var la=Object(n["defineComponent"])({components:{ViewPort:c["a"]},mixins:[s["a"]],data:()=>({listData:[]}),computed:{titleItems(){return this.listData.filter(e=>{var t;return"title-section"===(null===(t=e.other)||void 0===t?void 0:t.type)})},bodyItems(){return this.listData.filter(e=>{var t;return"title-section"!=(null===e||void 0===e||null===(t=e.other)||void 0===t?void 0:t.type)})}},async activated(){this.$emit("onFieldActivated",this),this.listData=this.options(this.fdata)}});a("0ac8");const da=h()(la,[["render",ca],["__scopeId","data-v-7d80ac9d"]]);var ua=da;const pa=Object(n["withScopeId"])("data-v-7f6d880a");Object(n["pushScopeId"])("data-v-7f6d880a");const ha={class:"view-port-content"},ba={class:"his-lg-text"},ma={class:"his-lg-text"},ga={class:"his-md-text his-card",style:{textAlign:"left"}};Object(n["popScopeId"])();const fa=pa((function(e,t,a,o,i,r){const s=Object(n["resolveComponent"])("ion-col"),c=Object(n["resolveComponent"])("ion-row"),l=Object(n["resolveComponent"])("ion-input"),d=Object(n["resolveComponent"])("ion-grid"),u=Object(n["resolveComponent"])("view-port");return Object(n["openBlock"])(),Object(n["createBlock"])(u,null,{default:pa(()=>[Object(n["createVNode"])("div",ha,[Object(n["createVNode"])(d,null,{default:pa(()=>[Object(n["createVNode"])(c,null,{default:pa(()=>[Object(n["createVNode"])(s,{size:"8"},{default:pa(()=>{var t,a;return[Object(n["createVNode"])("b",ba,Object(n["toDisplayString"])((null===(t=e.config)||void 0===t||null===(a=t.titles)||void 0===a?void 0:a.label)||"Medication"),1)]}),_:1}),Object(n["createVNode"])(s,{size:"4"},{default:pa(()=>{var t,a;return[Object(n["createVNode"])("b",ma,Object(n["toDisplayString"])((null===(t=e.config)||void 0===t||null===(a=t.titles)||void 0===a?void 0:a.value)||"Amount Remaining"),1)]}),_:1})]),_:1}),(Object(n["openBlock"])(!0),Object(n["createBlock"])(n["Fragment"],null,Object(n["renderList"])(e.listData,(t,a)=>(Object(n["openBlock"])(),Object(n["createBlock"])(c,{key:a},{default:pa(()=>[Object(n["createVNode"])(s,{size:"8"},{default:pa(()=>[Object(n["createVNode"])("div",ga,Object(n["toDisplayString"])(t.label),1)]),_:2},1024),Object(n["createVNode"])(s,{size:"4"},{default:pa(()=>[Object(n["createVNode"])(l,{value:t.value,onClick:a=>e.launchKeyPad(t),class:"his-card his-md-text"},null,8,["value","onClick"])]),_:2},1024)]),_:2},1024))),128))]),_:1})])]),_:1})}));var Oa=Object(n["defineComponent"])({components:{ViewPort:c["a"],IonGrid:l["p"],IonCol:l["m"],IonRow:l["H"],IonInput:l["v"]},mixins:[s["a"]],data:()=>({listData:[]}),watch:{clear:{handler(){this.listData=this.listData.filter(e=>(e.value="",!0))},immediate:!0},listData:{handler(){this.$emit("onValue",this.listData)},deep:!0,immediate:!0}},async activated(){this.$emit("onFieldActivated",this),this.listData=await this.options(this.fdata,this.cdata,this.listData)},methods:{async launchKeyPad(e){const t=await l["X"].create({component:Te["a"],backdropDismiss:!1,cssClass:"keypad-modal",componentProps:{title:e.label,preset:e.value,strictNumbers:!0,onKeyPress(t){e.value=t}}});t.present()}}});a("a542");const ja=h()(Oa,[["render",fa],["__scopeId","data-v-7f6d880a"]]);var _a=ja;const va=Object(n["withScopeId"])("data-v-75a49293");Object(n["pushScopeId"])("data-v-75a49293");const ya={class:"view-port-content"},wa={class:"his-sm-text"},Na=Object(n["createVNode"])("tr",null,[Object(n["createVNode"])("th",null,"Accession #"),Object(n["createVNode"])("th",null,"Test Name"),Object(n["createVNode"])("th",null,"Specimen"),Object(n["createVNode"])("th",null,"Ordered"),Object(n["createVNode"])("th",null,"Result"),Object(n["createVNode"])("th",null,"Released"),Object(n["createVNode"])("th",null,"Given")],-1),Ca=Object(n["createVNode"])("br",null,null,-1);Object(n["popScopeId"])();const Va=va((function(e,t,a,o,i,r){const s=Object(n["resolveComponent"])("ion-button"),c=Object(n["resolveComponent"])("view-port");return Object(n["openBlock"])(),Object(n["createBlock"])(c,null,{default:va(()=>[Object(n["createVNode"])("div",ya,[Object(n["createVNode"])("table",wa,[Na,(Object(n["openBlock"])(!0),Object(n["createBlock"])(n["Fragment"],null,Object(n["renderList"])(e.rows,(t,a)=>(Object(n["openBlock"])(),Object(n["createBlock"])("tr",{key:a},[Object(n["createVNode"])("td",null,[Object(n["createVNode"])(s,{color:"light",fill:"none",onClick:a=>e.printOrder(t)},{default:va(()=>[Object(n["createTextVNode"])(Object(n["toDisplayString"])(t.accession_number),1)]),_:2},1032,["onClick"])]),Object(n["createVNode"])("td",null,Object(n["toDisplayString"])(t.test_name),1),Object(n["createVNode"])("td",null,Object(n["toDisplayString"])(t.specimen),1),Object(n["createVNode"])("td",null,Object(n["toDisplayString"])(t.ordered),1),Object(n["createVNode"])("td",null,[(Object(n["openBlock"])(!0),Object(n["createBlock"])(n["Fragment"],null,Object(n["renderList"])(t.result,(e,t)=>(Object(n["openBlock"])(),Object(n["createBlock"])("span",{key:t},[Object(n["createTextVNode"])(Object(n["toDisplayString"])(e)+" ",1),Ca]))),128))]),Object(n["createVNode"])("td",null,Object(n["toDisplayString"])(t.released),1),Object(n["createVNode"])("td",null,[Object(n["createVNode"])("span",{style:"color: "+("Yes"===t.result_given?"green;":"black;")},Object(n["toDisplayString"])(t.result_given),5)])]))),128))])])]),_:1})}));var Da=a("c4e4"),ka=Object(n["defineComponent"])({components:{ViewPort:c["a"],IonButton:l["d"]},mixins:[s["a"]],data:()=>({HisDate:wt["b"],rows:[]}),methods:{async printOrder(e){var t;if("function"===typeof(null===(t=this.config)||void 0===t?void 0:t.printOrder)){const t=await Object(it["a"])(`Do you want to print order with accession number ${e.accession_number}?`);t&&this.config.printOrder(e.id)}},formatOrders(e){return e.map(e=>({id:e.order_id,encounter_id:e.encounter_id,result_given:e.result_given,accession_number:e.accession_number,test_name:e.tests[0].name,specimen:e.specimen.name,ordered:wt["b"].toStandardHisDisplayFormat(e.order_date),result:[],release:""}))},async launchOrderSelection(e=null){const t=await l["X"].create({component:Da["a"],backdropDismiss:!1,cssClass:"large-modal",componentProps:{testFilters:e}});t.present();const{data:a}=await t.onDidDismiss();Object(d["isEmpty"])(a)||(this.rows=[...this.formatOrders(a),...this.rows])}},async activated(){this.$emit("onFieldActivated",this);const e=await this.options(this.fdata),t=e[0].other.values;this.rows=t.map(e=>(e.id=e.order_id,e.ordered&&(e.ordered=wt["b"].toStandardHisDisplayFormat(e.ordered)),e.released&&(e.released=wt["b"].toStandardHisDisplayFormat(e.released)),e))}});a("8675");const Ta=h()(ka,[["render",Va],["__scopeId","data-v-75a49293"]]);var Ia=Ta;const xa=Object(n["withScopeId"])("data-v-59a29dbb");Object(n["pushScopeId"])("data-v-59a29dbb");const Sa={class:"view-port-content"},Pa={key:0,class:"his-card history"},Aa={class:"his-table"},Ea=Object(n["createVNode"])("tr",null,[Object(n["createVNode"])("th",null," Medication"),Object(n["createVNode"])("th",null," Date"),Object(n["createVNode"])("th",null," Amount dispensed ")],-1),Ba={key:1,class:"prescription-tab"},Ra={class:"prescription-table-section his-card"},Fa={class:"his-table"},La=Object(n["createVNode"])("tr",null,[Object(n["createVNode"])("th",null," Medication"),Object(n["createVNode"])("th",null," Amount in stock"),Object(n["createVNode"])("th",null," Amount needed"),Object(n["createVNode"])("th",null," Amount dispensed "),Object(n["createVNode"])("th",null," Reset ")],-1),Ma={class:"barcode-section"};Object(n["popScopeId"])();const Ha=xa((function(e,t,a,o,i,r){const s=Object(n["resolveComponent"])("nav-button"),c=Object(n["resolveComponent"])("ion-col"),l=Object(n["resolveComponent"])("ion-input"),d=Object(n["resolveComponent"])("reset-button"),u=Object(n["resolveComponent"])("barcode"),p=Object(n["resolveComponent"])("ion-row"),h=Object(n["resolveComponent"])("view-port");return Object(n["openBlock"])(),Object(n["createBlock"])(h,null,{default:xa(()=>[Object(n["createVNode"])("div",Sa,[Object(n["createVNode"])(p,null,{default:xa(()=>[Object(n["createVNode"])(c,{size:"2"},{default:xa(()=>[Object(n["createVNode"])(s,{onClick:t[1]||(t[1]=t=>e.tab="prescribe"),isActive:"prescribe"===e.tab,image:"prescription/rx",label:"Prescribed"},null,8,["isActive"]),Object(n["createVNode"])(s,{onClick:t[2]||(t[2]=t=>e.tab="history"),isActive:"history"===e.tab,image:"prescription/history",label:"History"},null,8,["isActive"])]),_:1}),Object(n["createVNode"])(c,{size:"10"},{default:xa(()=>["history"===e.tab?(Object(n["openBlock"])(),Object(n["createBlock"])("div",Pa,[Object(n["createVNode"])("table",Aa,[Ea,(Object(n["openBlock"])(!0),Object(n["createBlock"])(n["Fragment"],null,Object(n["renderList"])(e.medicationHistory,(e,t)=>(Object(n["openBlock"])(),Object(n["createBlock"])("tr",{key:t},[Object(n["createVNode"])("td",null,Object(n["toDisplayString"])(e.medication),1),Object(n["createVNode"])("td",null,Object(n["toDisplayString"])(e.date),1),Object(n["createVNode"])("td",null,Object(n["toDisplayString"])(e.amount),1)]))),128))])])):Object(n["createCommentVNode"])("",!0),"prescribe"===e.tab?(Object(n["openBlock"])(),Object(n["createBlock"])("div",Ba,[Object(n["createVNode"])("div",Ra,[Object(n["createVNode"])("table",Fa,[La,(Object(n["openBlock"])(!0),Object(n["createBlock"])(n["Fragment"],null,Object(n["renderList"])(e.listData,(t,a)=>(Object(n["openBlock"])(),Object(n["createBlock"])("tr",{key:a},[Object(n["createVNode"])("td",null,Object(n["toDisplayString"])(t.label),1),Object(n["createVNode"])("td",null,Object(n["toDisplayString"])(e.isStockManagementEnabled&&t.other.available_stock?t.other.available_stock:"-"),1),Object(n["createVNode"])("td",null,Object(n["toDisplayString"])(t.other.amount_needed),1),Object(n["createVNode"])("td",null,[Object(n["createVNode"])(l,{disabled:t.value>0,value:t.value,onClick:a=>t.value<=0?e.launchDispenser(t):null,class:"dosage-input"},null,8,["disabled","value","onClick"])]),Object(n["createVNode"])("td",null,[Object(n["createVNode"])(d,{disabled:t.value<=0,onClick:a=>t.value>0?e.onReset(t):null},null,8,["disabled","onClick"])])]))),128))])]),Object(n["createVNode"])("div",Ma,[Object(n["createVNode"])(u,{onOnScan:e.onScan},null,8,["onOnScan"])])])):Object(n["createCommentVNode"])("",!0)]),_:1})]),_:1})])]),_:1})}));a("13d5");var $a=a("efaf");const Ua=Object(n["withScopeId"])("data-v-7970cd10"),qa=Ua((function(e,t,a,o,i,r){const s=Object(n["resolveComponent"])("center");return Object(n["openBlock"])(),Object(n["createBlock"])("div",{class:e.state},[Object(n["createVNode"])(s,null,{default:Ua(()=>[Object(n["createVNode"])("img",{src:e.icon},null,8,["src"])]),_:1})],2)}));var Ga=Object(n["defineComponent"])({props:{label:{type:String,required:!0},disabled:{type:Boolean}},computed:{state(){return this.disabled?"disabled-btn":"clickable"},icon(){return"assets/images/reset.png"}}});a("de49");const za=h()(Ga,[["render",qa],["__scopeId","data-v-7970cd10"]]);var Ya=za;const Wa=Object(n["withScopeId"])("data-v-7729d4c8");Object(n["pushScopeId"])("data-v-7729d4c8");const Ka={colspan:"6"},Xa=Object(n["createVNode"])("tr",null,[Object(n["createVNode"])("th",null,"Total tab(s) needed "),Object(n["createVNode"])("th",{colspan:"2"}," Available stock "),Object(n["createVNode"])("th",{colspan:"2"}," Dispensed "),Object(n["createVNode"])("th")],-1),Ja=Object(n["createVNode"])("tr",null,[Object(n["createVNode"])("th"),Object(n["createVNode"])("th",null," Pack size "),Object(n["createVNode"])("th",null," Packs "),Object(n["createVNode"])("th",null," Total Tab(s)"),Object(n["createVNode"])("th",null," Packs "),Object(n["createVNode"])("th")],-1),Qa={class:"btn-list"},Za=Object(n["createTextVNode"])(" + "),en=Object(n["createTextVNode"])(" - "),tn=Object(n["createTextVNode"])(" Close "),an=Object(n["createTextVNode"])(" Dispense ");Object(n["popScopeId"])();const nn=Wa((function(e,t,a,o,i,r){const s=Object(n["resolveComponent"])("ion-button"),c=Object(n["resolveComponent"])("ion-content"),l=Object(n["resolveComponent"])("ion-toolbar"),d=Object(n["resolveComponent"])("ion-footer");return Object(n["openBlock"])(),Object(n["createBlock"])(n["Fragment"],null,[Object(n["createVNode"])(c,null,{default:Wa(()=>[Object(n["createVNode"])("table",null,[Object(n["createVNode"])("thead",null,[Object(n["createVNode"])("tr",null,[Object(n["createVNode"])("th",Ka,Object(n["toDisplayString"])(e.drugName),1)]),Xa,Ja]),Object(n["createVNode"])("tbody",null,[Object(n["createVNode"])("tr",null,[Object(n["createVNode"])("td",{rowspan:e.amountNeededRowSpan},Object(n["toDisplayString"])(e.tabsNeeded)+" tab(s) ",9,["rowspan"])]),(Object(n["openBlock"])(!0),Object(n["createBlock"])(n["Fragment"],null,Object(n["renderList"])(e.listData,(t,a)=>(Object(n["openBlock"])(),Object(n["createBlock"])("tr",{key:a},[(Object(n["openBlock"])(!0),Object(n["createBlock"])(n["Fragment"],null,Object(n["renderList"])(t,(e,t)=>(Object(n["openBlock"])(),Object(n["createBlock"])("td",{key:t,class:t>=2?"input-field":"his-md-text"},Object(n["toDisplayString"])(e),3))),128)),Object(n["createVNode"])("td",null,[Object(n["createVNode"])("ul",Qa,[Object(n["createVNode"])("li",null,[Object(n["createVNode"])(s,{onClick:t=>e.incrementAmount(a),class:"dispense-btn",size:"large"},{default:Wa(()=>[Za]),_:1},8,["onClick"])]),Object(n["createVNode"])("li",null,[Object(n["createVNode"])(s,{onClick:t=>e.decrementAmount(a),class:"dispense-btn",size:"large"},{default:Wa(()=>[en]),_:1},8,["onClick"])])])])]))),128))])])]),_:1}),Object(n["createVNode"])(d,null,{default:Wa(()=>[Object(n["createVNode"])(l,null,{default:Wa(()=>[Object(n["createVNode"])(s,{onClick:e.onClose,color:"danger",size:"large",slot:"end"},{default:Wa(()=>[tn]),_:1},8,["onClick"]),Object(n["createVNode"])(s,{onClick:t[1]||(t[1]=t=>e.onDispense(e.dispensedValues)),disabled:e.totalTabs<=0,color:"success",size:"large",slot:"end"},{default:Wa(()=>[an]),_:1},8,["disabled"])]),_:1})]),_:1})],64)}));var on=Object(n["defineComponent"])({data:()=>({listData:[],tabsIndex:2,packsIndex:3}),props:{drugName:{type:String,required:!0},tabsNeeded:{type:String,required:!0},items:{type:Array,required:!0},onDispense:{type:Function,required:!0}},computed:{dispensedValues(){return this.listData.filter(e=>e[this.tabsIndex]>0).map(e=>[e[this.tabsIndex],e[this.packsIndex]])},amountNeededRowSpan(){return this.listData.length+1}},watch:{items:{handler(e){e&&(this.listData=[...e])},deep:!0,immediate:!0}},methods:{async onClose(){await l["X"].dismiss({})},incrementAmount(e){const[t,a,n,o]=this.listData[e],i=t+n,r=o+1;this.listData[e][2]=i,this.listData[e][3]=r},decrementAmount(e){const[t,a,n,o]=this.listData[e],i=o-1;if(i>=0){const a=n-t;this.listData[e][2]=a,this.listData[e][3]=i}}}});a("1b4f");const rn=h()(on,[["render",nn],["__scopeId","data-v-7729d4c8"]]);var sn=rn,cn=Object(n["defineComponent"])({components:{ViewPort:c["a"],Barcode:$a["a"],NavButton:ot,ResetButton:Ya,IonRow:l["H"],IonCol:l["m"]},mixins:[s["a"]],data:()=>({tab:"prescribe",isStockManagementEnabled:!1,listData:[]}),async activated(){this.$emit("onFieldActivated",this),this.isStockManagementEnabled=await Ct["b"].drugManagementEnabled(),this.listData=await this.options(this.fdata)},computed:{medicationHistory(){return this.config&&this.config.medicationHistory?this.config.medicationHistory:[]}},methods:{async onScan(e){const[t,a]=e.split("-"),n=this.listData.map(async e=>{if(e.other.drug_id===parseInt(t)){const t=parseInt(e.value.toString()),n=parseInt(a),o=await this.updateOnValue(e,n,[],!0);o&&(e.value=n+t)}return e});this.listData=await Promise.all(n)},async onReset(e){await this.updateOnValue(e,-1)},async updateOnValue(e,t,a=[],n=!1){if(this.onValue){const o=await this.onValue({label:e.label,other:{dispenses:a,...e.other},value:t},n);if(!o)return!1}return e.value=t<0?0:t,this.$emit("onValue",e),this.onValueUpdate&&(this.listData=await this.onValueUpdate(e,this.listData)),!0},async launchDispenser(e){const t=await l["X"].create({component:sn,backdropDismiss:!1,cssClass:"custom-modal",componentProps:{drugName:e.label,tabsNeeded:e.other.amount_needed,items:e.other.pack_sizes,onDispense:async t=>{const a=0,n=t.reduce((e,t)=>e+t[a],0),o=await this.updateOnValue(e,n,t);o&&await l["X"].dismiss({})}}});t.present()}}});a("ca96");const ln=h()(cn,[["render",Ha],["__scopeId","data-v-59a29dbb"]]);var dn=ln;const un=Object(n["withScopeId"])("data-v-a0c7510c");Object(n["pushScopeId"])("data-v-a0c7510c");const pn={class:"view-port-content"},hn={key:0,style:{textAlign:"center"}},bn={key:1,class:"his-sm-text his-table"},mn=Object(n["createVNode"])("tr",null,[Object(n["createVNode"])("th",null,"State"),Object(n["createVNode"])("th",null,"State Date"),Object(n["createVNode"])("th",null,"End Date"),Object(n["createVNode"])("th",null,"Actions")],-1);Object(n["popScopeId"])();const gn=un((function(e,t,a,o,i,r){const s=Object(n["resolveComponent"])("ion-label"),c=Object(n["resolveComponent"])("ion-item"),l=Object(n["resolveComponent"])("ion-list"),d=Object(n["resolveComponent"])("ion-col"),u=Object(n["resolveComponent"])("ion-button"),p=Object(n["resolveComponent"])("ion-row"),h=Object(n["resolveComponent"])("view-port");return Object(n["openBlock"])(),Object(n["createBlock"])(h,null,{default:un(()=>[Object(n["createVNode"])("div",pn,[Object(n["createVNode"])(p,null,{default:un(()=>[Object(n["createVNode"])(d,{size:"4"},{default:un(()=>[Object(n["createVNode"])(l,null,{default:un(()=>[(Object(n["openBlock"])(!0),Object(n["createBlock"])(n["Fragment"],null,Object(n["renderList"])(e.listData,(t,a)=>(Object(n["openBlock"])(),Object(n["createBlock"])(c,{class:"his-sm-text",color:t.label===e.activeProgram.label?"primary":"",key:a,onClick:a=>e.onselect(t),detail:""},{default:un(()=>[Object(n["createVNode"])(s,null,{default:un(()=>[Object(n["createTextVNode"])(Object(n["toDisplayString"])(t.label),1)]),_:2},1024)]),_:2},1032,["color","onClick"]))),128))]),_:1})]),_:1}),Object(n["createVNode"])(d,{size:"8"},{default:un(()=>[e.activeProgram.label&&e.states.length<=0?(Object(n["openBlock"])(),Object(n["createBlock"])("h1",hn," Program has no states ")):Object(n["createCommentVNode"])("",!0),e.activeProgram.label&&e.states.length>0?(Object(n["openBlock"])(),Object(n["createBlock"])("table",bn,[mn,(Object(n["openBlock"])(!0),Object(n["createBlock"])(n["Fragment"],null,Object(n["renderList"])(e.states,(t,a)=>(Object(n["openBlock"])(),Object(n["createBlock"])("tr",{key:a},[Object(n["createVNode"])("td",null,Object(n["toDisplayString"])(t.name),1),Object(n["createVNode"])("td",null,Object(n["toDisplayString"])(t.startDate),1),Object(n["createVNode"])("td",null,Object(n["toDisplayString"])(t.endDate||"N/A"),1),Object(n["createVNode"])("td",null,[(Object(n["openBlock"])(!0),Object(n["createBlock"])(n["Fragment"],null,Object(n["renderList"])(t.actions,(t,o)=>(Object(n["openBlock"])(),Object(n["createBlock"])(u,{key:o,color:t.color,onClick:n=>t.action(e.activeProgram,a)},{default:un(()=>[Object(n["createTextVNode"])(Object(n["toDisplayString"])(t.name),1)]),_:2},1032,["color","onClick"]))),128))])]))),128))])):Object(n["createCommentVNode"])("",!0)]),_:1})]),_:1})])]),_:1})}));var fn=Object(n["defineComponent"])({name:"HisSelect",components:{ViewPort:c["a"],IonCol:l["m"],IonRow:l["H"],IonLabel:l["x"],IonList:l["y"],IonButton:l["d"],IonItem:l["w"]},mixins:[s["a"]],watch:{clear(e){e&&(this.activeProgram={},this.$emit("onClear"))}},data:()=>({listData:[],activeProgram:{}}),async activated(){this.$emit("onFieldActivated",this),this.listData=await this.options(this.fdata)},computed:{states(){return Object(d["isEmpty"])(this.activeProgram)?[]:this.activeProgram.other.programStates}},methods:{formatDate(e){return e?wt["b"].toStandardHisDisplayFormat(e):"N/A"},async onselect(e){if(this.activeProgram=e,this.onValue){const t=await this.onValue(e,this);if(!t)return void(this.activeProgram={})}this.$emit("onValue",e)}}});a("4445");const On=h()(fn,[["render",gn],["__scopeId","data-v-a0c7510c"]]);var jn=On;const _n=Object(n["withScopeId"])("data-v-eb25cc2a");Object(n["pushScopeId"])("data-v-eb25cc2a");const vn={class:"view-port-content"},yn=Object(n["createVNode"])("tr",null,[Object(n["createVNode"])("td",null,[Object(n["createVNode"])("b",null,"Appointment(s)")])],-1);Object(n["popScopeId"])();const wn=_n((function(e,t,a,o,i,r){const s=Object(n["resolveComponent"])("DatePicker"),c=Object(n["resolveComponent"])("ion-col"),l=Object(n["resolveComponent"])("ion-row"),d=Object(n["resolveComponent"])("ion-grid"),u=Object(n["resolveComponent"])("view-port");return Object(n["openBlock"])(),Object(n["createBlock"])(u,null,{default:_n(()=>[Object(n["createVNode"])("div",vn,[Object(n["createVNode"])(d,null,{default:_n(()=>[Object(n["createVNode"])(l,null,{default:_n(()=>[Object(n["createVNode"])(c,{size:"9"},{default:_n(()=>[Object(n["createVNode"])(s,{"is-expanded":"",modelValue:e.date,"onUpdate:modelValue":t[1]||(t[1]=t=>e.date=t),"max-date":e.maxDate,class:"custom-calendar max-w-full"},null,8,["modelValue","max-date"])]),_:1}),Object(n["createVNode"])(c,{size:"3"},{default:_n(()=>[Object(n["createVNode"])("table",null,[Object(n["createVNode"])("tr",null,[Object(n["createVNode"])("td",null,[yn,Object(n["createVNode"])("tr",null,[Object(n["createVNode"])("td",null,Object(n["toDisplayString"])(e.appointmentCounter),1)])])])])]),_:1})]),_:1})]),_:1})])]),_:1})}));var Nn=Object(n["defineComponent"])({components:{DatePicker:yt["b"],ViewPort:c["a"],IonGrid:l["p"],IonCol:l["m"],IonRow:l["H"]},mixins:[s["a"]],watch:{date:{async handler(e){if(e){const t=wt["b"].toStandardHisFormat(e);if(this.onValue){const e=await this.onValue(t,this);if(!e)return}this.$emit("onValue",t)}},immediate:!0}},data:()=>({date:"",minDate:"",appointmentCounter:0}),async created(){this.date||"function"!==typeof this.defaultValue||(this.date=await this.defaultValue())},activated(){this.$emit("onFieldActivated",this)}});a("e9fc"),a("d8b0");const Cn=h()(Nn,[["render",wn],["__scopeId","data-v-eb25cc2a"]]);var Vn=Cn;const Dn=Object(n["withScopeId"])("data-v-0da69385");Object(n["pushScopeId"])("data-v-0da69385");const kn={class:"large-card"},Tn={class:"large-card"};Object(n["popScopeId"])();const In=Dn((function(e,t,a,o,i,r){const s=Object(n["resolveComponent"])("ion-img"),c=Object(n["resolveComponent"])("ion-avatar"),l=Object(n["resolveComponent"])("ion-label"),d=Object(n["resolveComponent"])("ion-item"),u=Object(n["resolveComponent"])("ion-list"),p=Object(n["resolveComponent"])("ion-col"),h=Object(n["resolveComponent"])("ion-row");return Object(n["openBlock"])(),Object(n["createBlock"])(h,null,{default:Dn(()=>[Object(n["createVNode"])(p,{size:"5"},{default:Dn(()=>[Object(n["createVNode"])("div",kn,[Object(n["createVNode"])("h2",null,Object(n["toDisplayString"])(e.foundRecordsTitle)+" ("+Object(n["toDisplayString"])(e.listData.length)+"): ",1),Object(n["createVNode"])(u,null,{default:Dn(()=>[(Object(n["openBlock"])(!0),Object(n["createBlock"])(n["Fragment"],null,Object(n["renderList"])(e.listData,(t,a)=>(Object(n["openBlock"])(),Object(n["createBlock"])(d,{class:"his-sm-text",button:"",key:a,detail:!0,color:t.value===e.selectedResult.value?"lightblue":"",onClick:a=>e.onSelect(t)},{default:Dn(()=>[Object(n["createVNode"])(c,null,{default:Dn(()=>[Object(n["createVNode"])(s,{src:"/assets/images/avatar.svg"})]),_:1}),Object(n["createVNode"])(l,null,{default:Dn(()=>[Object(n["createTextVNode"])(Object(n["toDisplayString"])(t.label),1)]),_:2},1024)]),_:2},1032,["color","onClick"]))),128))]),_:1})])]),_:1}),Object(n["createVNode"])(p,{size:"7"},{default:Dn(()=>[Object(n["createVNode"])("div",Tn,[Object(n["createVNode"])("h3",null,Object(n["toDisplayString"])(e.detailsTitle),1),Object(n["createVNode"])(u,null,{default:Dn(()=>[(Object(n["openBlock"])(!0),Object(n["createBlock"])(n["Fragment"],null,Object(n["renderList"])(e.patientAttributes,(e,t)=>(Object(n["openBlock"])(),Object(n["createBlock"])(d,{class:"his-md-text",key:t,inset:"none"},{default:Dn(()=>[Object(n["createVNode"])(l,null,{default:Dn(()=>[Object(n["createTextVNode"])(Object(n["toDisplayString"])(e.label),1)]),_:2},1024),Object(n["createVNode"])(l,{slot:"end"},{default:Dn(()=>[Object(n["createVNode"])("b",null,Object(n["toDisplayString"])(e.value),1)]),_:2},1024)]),_:2},1024))),128))]),_:1})])]),_:1})]),_:1})}));var xn=Object(n["defineComponent"])({mixins:[s["a"]],components:{IonLabel:l["x"],IonAvatar:l["b"],IonRow:l["H"],IonImg:l["s"],IonCol:l["m"],IonList:l["y"],IonItem:l["w"]},data:()=>({listData:[],selectedResult:{}}),computed:{patientAttributes(){var e,t,a,n;return!Object(d["isEmpty"])(this.selectedResult)&&Object(d["isArray"])(null===(e=this.selectedResult)||void 0===e||null===(t=e.other)||void 0===t?void 0:t.options)?null===(a=this.selectedResult)||void 0===a||null===(n=a.other)||void 0===n?void 0:n.options.filter(e=>{var t,a;return"function"!==typeof(null===e||void 0===e||null===(t=e.other)||void 0===t?void 0:t.show)||(null===e||void 0===e||null===(a=e.other)||void 0===a?void 0:a.show())}):[]},foundRecordsTitle(){var e;return(null===(e=this.config)||void 0===e?void 0:e.foundRecordsTitle)||"Found People"},detailsTitle(){var e;return(null===(e=this.config)||void 0===e?void 0:e.detailsTitle)||"Details:"}},methods:{async onSelect(e){if(e){if(this.onValue){const t=await this.onValue(e,this);if(!t)return}this.selectedResult=e,this.$emit("onValue",e)}}},async activated(){this.$emit("onFieldActivated",this),this.listData=await this.options(this.fdata,this),this.onSelect(this.listData.length>0?this.listData[0]:{})}});a("b308");const Sn=h()(xn,[["render",In],["__scopeId","data-v-0da69385"]]);var Pn=Sn;const An=Object(n["withScopeId"])("data-v-df58f1c2");Object(n["pushScopeId"])("data-v-df58f1c2");const En={class:"tool-bar-medium-card"},Bn=Object(n["createTextVNode"])(" Patient "),Rn={class:"his-sm-text"},Fn=Object(n["createTextVNode"])("Name: "),Ln=Object(n["createTextVNode"])("Birthdate: "),Mn=Object(n["createTextVNode"])("Home Address: "),Hn={class:"his-md-text tool-bar-medium-card"},$n=Object(n["createTextVNode"])(" Guardian "),Un={class:"his-sm-text"},qn=Object(n["createTextVNode"])("Name: "),Gn=Object(n["createTextVNode"])("Birthdate: "),zn=Object(n["createTextVNode"])("Home Address: "),Yn={class:"view-port-content"},Wn=Object(n["createTextVNode"])("Relationship "),Kn=Object(n["createTextVNode"])("Desc ");Object(n["popScopeId"])();const Xn=An((function(e,t,a,o,i,r){const s=Object(n["resolveComponent"])("center"),c=Object(n["resolveComponent"])("ion-col"),l=Object(n["resolveComponent"])("ion-icon"),d=Object(n["resolveComponent"])("ion-row"),u=Object(n["resolveComponent"])("view-port");return Object(n["openBlock"])(),Object(n["createBlock"])(u,null,{default:An(()=>[Object(n["createVNode"])(d,null,{default:An(()=>[Object(n["createVNode"])(c,null,{default:An(()=>[Object(n["createVNode"])("div",En,[Object(n["createVNode"])(s,{class:"relation-category",style:{color:"#3880ff"}},{default:An(()=>[Bn]),_:1}),Object(n["createVNode"])("ul",Rn,[Object(n["createVNode"])("li",null,[Fn,Object(n["createVNode"])("b",null,Object(n["toDisplayString"])(e.patient.name),1)]),Object(n["createVNode"])("li",null,[Ln,Object(n["createVNode"])("b",null,Object(n["toDisplayString"])(e.patient.birth_date),1)]),Object(n["createVNode"])("li",null,[Mn,Object(n["createVNode"])("b",null,Object(n["toDisplayString"])(e.patient.home_address),1)])])])]),_:1}),Object(n["createVNode"])(c,{size:"2"},{default:An(()=>[Object(n["createVNode"])(s,{class:"relation-category fa-rotate-45"},{default:An(()=>[Object(n["createVNode"])(l,{icon:e.resize,style:{fontSize:"3em"}},null,8,["icon"])]),_:1})]),_:1}),Object(n["createVNode"])(c,null,{default:An(()=>[Object(n["createVNode"])("div",Hn,[Object(n["createVNode"])(s,{class:"relation-category",style:{color:"#3dc2ff"}},{default:An(()=>[$n]),_:1}),Object(n["createVNode"])("ul",Un,[Object(n["createVNode"])("li",null,[qn,Object(n["createVNode"])("b",null,Object(n["toDisplayString"])(e.guardian.name),1)]),Object(n["createVNode"])("li",null,[Gn,Object(n["createVNode"])("b",null,Object(n["toDisplayString"])(e.guardian.birth_date),1)]),Object(n["createVNode"])("li",null,[zn,Object(n["createVNode"])("b",null,Object(n["toDisplayString"])(e.guardian.home_address),1)])])])]),_:1})]),_:1}),Object(n["createVNode"])("div",Yn,[(Object(n["openBlock"])(!0),Object(n["createBlock"])(n["Fragment"],null,Object(n["renderList"])(e.relationList,(t,a)=>(Object(n["openBlock"])(),Object(n["createBlock"])(d,{key:a},{default:An(()=>[(Object(n["openBlock"])(!0),Object(n["createBlock"])(n["Fragment"],null,Object(n["renderList"])(t,(t,a)=>(Object(n["openBlock"])(),Object(n["createBlock"])(c,{size:"6",key:a},{default:An(()=>[Object(n["createVNode"])("div",{class:["his-md-text","his-card clickable "+(e.selected===t.label?"active-card-color":"")],onClick:a=>e.onClick(t)},[Object(n["createVNode"])("ul",null,[Object(n["createVNode"])("li",null,[Wn,Object(n["createVNode"])("b",null,Object(n["toDisplayString"])(t.label),1)]),Object(n["createVNode"])("li",null,[Kn,Object(n["createVNode"])("b",null,Object(n["toDisplayString"])(t.value),1)])])],10,["onClick"])]),_:2},1024))),128))]),_:2},1024))),128))])]),_:1})}));var Jn=a("ff79"),Qn=Object(n["defineComponent"])({mixins:[s["a"]],components:{ViewPort:c["a"],IonCol:l["m"],IonRow:l["H"],IonIcon:l["r"]},data:()=>({patient:{},guardian:{},selected:"",listData:[]}),setup(){return{resize:Jn["H"]}},computed:{relationList(){return se["a"].convertArrayToTurples(this.listData,2)}},async activated(){this.$emit("onFieldActivated",this),this.listData=await this.options(this.fdata)},methods:{onClick(e){this.selected=e.label,this.$emit("onValue",e)}}});a("70b0");const Zn=h()(Qn,[["render",Xn],["__scopeId","data-v-df58f1c2"]]);var eo=Zn;const to=Object(n["withScopeId"])("data-v-46eb461a");Object(n["pushScopeId"])("data-v-46eb461a");const ao=Object(n["createVNode"])("tr",null,[Object(n["createVNode"])("th",null,"  "),Object(n["createVNode"])("th",null," Name "),Object(n["createVNode"])("th",null," New Number "),Object(n["createVNode"])("th",null," Old Number ")],-1),no={class:"f-number f-active-col"},oo={class:"f-number f-inactive-col"};Object(n["popScopeId"])();const io=to((function(e,t,a,o,i,r){const s=Object(n["resolveComponent"])("view-port");return Object(n["openBlock"])(),Object(n["createBlock"])(s,null,{default:to(()=>[Object(n["createVNode"])("table",null,[ao,(Object(n["openBlock"])(!0),Object(n["createBlock"])(n["Fragment"],null,Object(n["renderList"])(e.listData,(e,t)=>(Object(n["openBlock"])(),Object(n["createBlock"])("tr",{key:t},[Object(n["createVNode"])("td",null,Object(n["toDisplayString"])(e.label),1),Object(n["createVNode"])("td",null,Object(n["toDisplayString"])(e.value),1),Object(n["createVNode"])("td",null,[Object(n["createVNode"])("div",no,Object(n["toDisplayString"])(e.other.activeNumber),1)]),Object(n["createVNode"])("td",null,[Object(n["createVNode"])("div",oo,Object(n["toDisplayString"])(e.other.dormantNumber),1)])]))),128))])]),_:1})}));var ro=Object(n["defineComponent"])({components:{ViewPort:c["a"]},mixins:[s["a"]],data:()=>({listData:[]}),async activated(){this.$emit("onFieldActivated",this),this.listData=await this.options(this.fdata,this.cdata)}});a("b53b");const so=h()(ro,[["render",io],["__scopeId","data-v-46eb461a"]]);var co=so;const lo=Object(n["withScopeId"])("data-v-7c5351d3");Object(n["pushScopeId"])("data-v-7c5351d3");const uo={class:"large-card"},po=Object(n["createVNode"])("br",null,null,-1),ho=Object(n["createTextVNode"])(" Home District: "),bo=Object(n["createTextVNode"])(),mo=Object(n["createVNode"])("br",null,null,-1),go=Object(n["createTextVNode"])(" Home TA: "),fo=Object(n["createTextVNode"])(" Score: "),Oo={class:"large-card"};Object(n["popScopeId"])();const jo=lo((function(e,t,a,o,i,r){const s=Object(n["resolveComponent"])("ion-img"),c=Object(n["resolveComponent"])("ion-avatar"),l=Object(n["resolveComponent"])("ion-label"),d=Object(n["resolveComponent"])("ion-item"),u=Object(n["resolveComponent"])("ion-list"),p=Object(n["resolveComponent"])("ion-col"),h=Object(n["resolveComponent"])("ion-row");return Object(n["openBlock"])(),Object(n["createBlock"])(h,null,{default:lo(()=>[Object(n["createVNode"])(p,{size:"5"},{default:lo(()=>[Object(n["createVNode"])("div",uo,[Object(n["createVNode"])("h3",null," Matches found: ("+Object(n["toDisplayString"])(e.listData.length)+"): ",1),Object(n["createVNode"])(u,null,{default:lo(()=>[(Object(n["openBlock"])(!0),Object(n["createBlock"])(n["Fragment"],null,Object(n["renderList"])(e.listData,(t,a)=>(Object(n["openBlock"])(),Object(n["createBlock"])(d,{button:"",key:a,detail:!0,color:t.value===e.selectedResult.value?"light":"",onClick:a=>e.onSelect(t)},{default:lo(()=>[Object(n["createVNode"])(c,null,{default:lo(()=>[Object(n["createVNode"])(s,{src:"/assets/images/avatar.svg"})]),_:1}),Object(n["createVNode"])(l,null,{default:lo(()=>{var e;return[Object(n["createTextVNode"])(Object(n["toDisplayString"])(t.label)+" ",1),po,ho,Object(n["createVNode"])("b",null,Object(n["toDisplayString"])(t.other.foundPerson.home_district),1),bo,mo,go,Object(n["createVNode"])("b",null,Object(n["toDisplayString"])(t.other.home_traditional_authority),1),fo,Object(n["createVNode"])("b",null,Object(n["toDisplayString"])((null===t||void 0===t||null===(e=t.other)||void 0===e?void 0:e.score)||"-"),1)]}),_:2},1024)]),_:2},1032,["color","onClick"]))),128))]),_:1})])]),_:1}),Object(n["createVNode"])(p,{size:"7"},{default:lo(()=>{var t,a;return[Object(n["createVNode"])("div",Oo,[Object(n["createVNode"])("h1",null," Match score: "+Object(n["toDisplayString"])((null===(t=e.selectedResult)||void 0===t||null===(a=t.other)||void 0===a?void 0:a.score)||"-"),1),Object(n["createVNode"])(u,null,{default:lo(()=>{var t,a;return[(Object(n["openBlock"])(!0),Object(n["createBlock"])(n["Fragment"],null,Object(n["renderList"])((null===(t=e.selectedResult)||void 0===t||null===(a=t.other)||void 0===a?void 0:a.comparisons)||[],(e,t)=>(Object(n["openBlock"])(),Object(n["createBlock"])(d,{key:t,inset:"none"},{default:lo(()=>[(Object(n["openBlock"])(!0),Object(n["createBlock"])(n["Fragment"],null,Object(n["renderList"])(e,(e,t)=>(Object(n["openBlock"])(),Object(n["createBlock"])(l,{color:"danger",key:t},{default:lo(()=>[Object(n["createVNode"])("b",null,Object(n["toDisplayString"])(e),1)]),_:2},1024))),128))]),_:2},1024))),128))]}),_:1})])]}),_:1})]),_:1})}));var _o=Object(n["defineComponent"])({mixins:[s["a"]],components:{IonLabel:l["x"],IonAvatar:l["b"],IonRow:l["H"],IonImg:l["s"],IonCol:l["m"],IonList:l["y"],IonItem:l["w"]},data:()=>({listData:[],selectedResult:{}}),methods:{async onSelect(e){if(e){if(this.onValue){const t=await this.onValue(e,this);if(!t)return}this.selectedResult=e,this.$emit("onValue",e)}}},async activated(){this.$emit("onFieldActivated",this),this.listData=await this.options(this.fdata,this),this.onSelect(this.listData[0]||{})}});a("7e31");const vo=h()(_o,[["render",jo],["__scopeId","data-v-7c5351d3"]]);var yo=vo,wo=a("374c");const No=Object(n["withScopeId"])("data-v-f8a8263e");Object(n["pushScopeId"])("data-v-f8a8263e");const Co=Object(n["createTextVNode"])("Total Tins"),Vo=Object(n["createTextVNode"])("Expiry Date"),Do=Object(n["createTextVNode"])("Batch Number"),ko=Object(n["createTextVNode"])("Add row");Object(n["popScopeId"])();const To=No((function(e,t,a,o,i,r){const s=Object(n["resolveComponent"])("his-text-input"),c=Object(n["resolveComponent"])("ion-item"),l=Object(n["resolveComponent"])("ion-list"),d=Object(n["resolveComponent"])("ion-col"),u=Object(n["resolveComponent"])("ion-label"),p=Object(n["resolveComponent"])("ion-input"),h=Object(n["resolveComponent"])("ion-row"),b=Object(n["resolveComponent"])("ion-button"),m=Object(n["resolveComponent"])("ion-grid"),g=Object(n["resolveComponent"])("view-port");return Object(n["openBlock"])(),Object(n["createBlock"])(g,null,{default:No(()=>[Object(n["createVNode"])(s,{readonly:"",value:e.fullSelectedDrugName},null,8,["value"]),Object(n["createVNode"])(m,{style:{background:"white"}},{default:No(()=>[Object(n["createVNode"])(h,null,{default:No(()=>[Object(n["createVNode"])(d,{size:"4",class:"border-right scroll-list"},{default:No(()=>[(Object(n["openBlock"])(!0),Object(n["createBlock"])(n["Fragment"],null,Object(n["renderList"])(e.drugs,(t,a)=>(Object(n["openBlock"])(),Object(n["createBlock"])(l,{key:a},{default:No(()=>[Object(n["createVNode"])(c,{detail:"",color:a===e.selectedDrug?"secondary":"",onClick:t=>e.selectDrug(a)},{default:No(()=>[Object(n["createTextVNode"])(Object(n["toDisplayString"])(`${t.shortName} (${t.packSizes[0]})`),1)]),_:2},1032,["color","onClick"])]),_:2},1024))),128))]),_:1}),Object(n["createVNode"])(d,null,{default:No(()=>[null!==e.selectedDrug?(Object(n["openBlock"])(),Object(n["createBlock"])(m,{key:0,class:"scroll-list"},{default:No(()=>[(Object(n["openBlock"])(!0),Object(n["createBlock"])(n["Fragment"],null,Object(n["renderList"])(e.drugs[e.selectedDrug].entries,(t,a)=>(Object(n["openBlock"])(),Object(n["createBlock"])(h,{key:a},{default:No(()=>[Object(n["createVNode"])(d,null,{default:No(()=>[Object(n["createVNode"])(c,null,{default:No(()=>[Object(n["createVNode"])(u,{position:"floating"},{default:No(()=>[Co]),_:1}),Object(n["createVNode"])(p,{readonly:"",placeholder:"0",value:t.tins,onClick:t=>e.enterTins(a)},null,8,["value","onClick"])]),_:2},1024)]),_:2},1024),Object(n["createVNode"])(d,null,{default:No(()=>[Object(n["createVNode"])(c,null,{default:No(()=>[Object(n["createVNode"])(u,{position:"floating"},{default:No(()=>[Vo]),_:1}),Object(n["createVNode"])(p,{readonly:"",placeholder:"YYYY/MM/DD",value:t.expiry,onClick:t=>e.enterExpiry(a)},null,8,["value","onClick"])]),_:2},1024)]),_:2},1024),Object(n["createVNode"])(d,null,{default:No(()=>[Object(n["createVNode"])(c,null,{default:No(()=>[Object(n["createVNode"])(u,{position:"floating"},{default:No(()=>[Do]),_:1}),Object(n["createVNode"])(p,{readonly:"",placeholder:"e.g. 'ABC-123'",value:t.batchNumber,onClick:t=>e.enterBatch(a)},null,8,["value","onClick"])]),_:2},1024)]),_:2},1024)]),_:2},1024))),128)),Object(n["createVNode"])(h,null,{default:No(()=>[Object(n["createVNode"])(d,null,{default:No(()=>[Object(n["createVNode"])(b,{onClick:e.addRow,siz:"large"},{default:No(()=>[ko]),_:1},8,["onClick"])]),_:1})]),_:1})]),_:1})):Object(n["createCommentVNode"])("",!0)]),_:1})]),_:1})]),_:1})]),_:1})}));var Io=a("e6e9"),xo=a("2706"),So=a("1c74"),Po=a("36ad"),Ao=Object(n["defineComponent"])({components:{HisTextInput:Po["a"],ViewPort:c["a"],IonInput:l["v"],IonLabel:l["x"],IonList:l["y"],IonItem:l["w"],IonGrid:l["p"],IonCol:l["m"],IonRow:l["H"],IonButton:l["d"]},mixins:[s["a"]],data:()=>({drugs:[],allDrugsByName:[],selectedDrug:null}),async activated(){this.$emit("onFieldActivated",this),await this.setDefaultValue()},methods:{async setDefaultValue(){const e=await this.options();this.drugs=this.drugs.filter(t=>e.map(e=>e.label).includes(t.label)),e.forEach(e=>{const t={tabs:e.value.packSizes[0],tins:null,expiry:null,batchNumber:null},a={label:e.label,entries:[{...t},{...t},{...t}],...e.value},n=Object(d["find"])(this.drugs,{label:e.label});n||this.drugs.push(a)}),this.drugs.length>=1&&this.selectDrug(0)},getModalTitle(e){return`${e} (${this.drugs[this.selectedDrug].shortName})`},getDrugValue(e,t){return this.drugs[this.selectedDrug].entries[e][t]},setDrugValue(e,t,a){this.drugs[this.selectedDrug].entries[e][t]=a?a.value:""},enterTins(e){this.launchKeyPad({id:"tins",helpText:this.getModalTitle("Enter number of tins"),type:ts.TT_NUMBER,defaultValue:()=>this.getDrugValue(e,"tins"),validation:e=>!e||e&&!e.value?null:xo["a"].validateSeries([()=>xo["a"].isNumber(e),()=>e.value<=0?["Number of tins must be greater than 1"]:null])},t=>this.setDrugValue(e,"tins",t))},enterBatch(e){this.launchKeyPad({id:"batch",helpText:this.getModalTitle("Enter batch number"),type:ts.TT_TEXT,config:{customKeyboard:[C["c"],[["Delete"]]]},defaultValue:()=>this.getDrugValue(e,"batchNumber")},t=>{const a={...t},n=(""+a.value).toUpperCase();a.label=n,a.value=n,this.setDrugValue(e,"batchNumber",a)})},enterExpiry(e){this.launchKeyPad({id:"expiry",helpText:this.getModalTitle("Enter expiry date"),type:ts.TT_FULL_DATE,defaultValue:()=>this.getDrugValue(e,"expiry"),validation:e=>{if(e&&e.value)return new Date(e.value)<new Date(So["e"].getSessionDate())?["You are not allowed to enter expired drugs"]:null}},t=>this.setDrugValue(e,"expiry",t))},async launchKeyPad(e,t){const a=await l["X"].create({component:Io["a"],backdropDismiss:!1,cssClass:"full-modal",componentProps:{dismissType:"modal",currentField:e,onFinish:t}});a.present()},addRow(){this.drugs[this.selectedDrug].entries.push({tabs:this.drugs[this.selectedDrug].packSizes[0],tins:null,expiry:null,batchNumber:null})},selectDrug(e){this.selectedDrug=e},validateEntry(e){return!Object(d["isEmpty"])(e.tins)&&!Object(d["isEmpty"])(e.expiry)&&!Object(d["isEmpty"])(e.batchNumber)}},computed:{fullSelectedDrugName(){try{return this.drugs[this.selectedDrug].fullName}catch(e){return"N/A"}},enteredDrugs(){const e=[];return this.drugs.forEach(t=>{const a=t.entries.filter(e=>this.validateEntry(e));a.forEach(a=>{e.push({label:t.shortName,value:{...a,...t}})})}),e}},watch:{clear(){this.drugs=this.drugs.map(e=>(e.entries=e.entries.map(e=>(e.tins=null,e.expiry=null,e.batchNumber=null,e)),e))},drugs:{handler(){this.$emit("onValue",this.enteredDrugs)},immediate:!0,deep:!0}}});a("f226");const Eo=h()(Ao,[["render",To],["__scopeId","data-v-f8a8263e"]]);var Bo=Eo;const Ro=Object(n["withScopeId"])("data-v-4be61a49");Object(n["pushScopeId"])("data-v-4be61a49");const Fo={key:0,class:"his-card"},Lo=Object(n["createTextVNode"])("Expiry Date"),Mo=Object(n["createTextVNode"])("Available Tins"),Ho=Object(n["createTextVNode"])(" Update Stock ");Object(n["popScopeId"])();const $o=Ro((function(e,t,a,o,i,r){const s=Object(n["resolveComponent"])("his-text-input"),c=Object(n["resolveComponent"])("ion-item"),l=Object(n["resolveComponent"])("ion-list"),d=Object(n["resolveComponent"])("ion-col"),u=Object(n["resolveComponent"])("ion-label"),p=Object(n["resolveComponent"])("ion-input"),h=Object(n["resolveComponent"])("ion-button"),b=Object(n["resolveComponent"])("ion-row"),m=Object(n["resolveComponent"])("ion-grid"),g=Object(n["resolveComponent"])("view-port");return Object(n["openBlock"])(),Object(n["createBlock"])(g,null,{default:Ro(()=>[Object(n["createVNode"])(s,{readonly:"",value:e.fullSelectedDrugName},null,8,["value"]),Object(n["createVNode"])(m,{style:{background:"white"}},{default:Ro(()=>[Object(n["createVNode"])(b,null,{default:Ro(()=>[Object(n["createVNode"])(d,{size:"4",class:"border-right scroll-list"},{default:Ro(()=>[(Object(n["openBlock"])(!0),Object(n["createBlock"])(n["Fragment"],null,Object(n["renderList"])(e.drugs,(t,a)=>(Object(n["openBlock"])(),Object(n["createBlock"])(l,{key:a},{default:Ro(()=>[Object(n["createVNode"])(c,{detail:"",color:a===e.selectedDrug?"secondary":"",onClick:t=>e.selectDrug(a)},{default:Ro(()=>[Object(n["createTextVNode"])(Object(n["toDisplayString"])(`${t.shortName} (${t.packSizes[0]})`),1)]),_:2},1032,["color","onClick"])]),_:2},1024))),128))]),_:1}),Object(n["createVNode"])(d,null,{default:Ro(()=>[null!==e.selectedDrug?(Object(n["openBlock"])(),Object(n["createBlock"])(m,{key:0,class:"scroll-list"},{default:Ro(()=>[e.noStockForDrug?(Object(n["openBlock"])(),Object(n["createBlock"])("h3",Fo," No stock information available for drug")):Object(n["createCommentVNode"])("",!0),(Object(n["openBlock"])(!0),Object(n["createBlock"])(n["Fragment"],null,Object(n["renderList"])(e.drugs[e.selectedDrug].entries,(t,a)=>(Object(n["openBlock"])(),Object(n["createBlock"])(b,{key:a},{default:Ro(()=>[Object(n["createVNode"])(d,null,{default:Ro(()=>[Object(n["createVNode"])(c,null,{default:Ro(()=>[Object(n["createVNode"])(u,{position:"floating"},{default:Ro(()=>[Lo]),_:1}),Object(n["createVNode"])(p,{readonly:"",value:t.expiry_date},null,8,["value"])]),_:2},1024)]),_:2},1024),Object(n["createVNode"])(d,null,{default:Ro(()=>[Object(n["createVNode"])(c,null,{default:Ro(()=>[Object(n["createVNode"])(u,{position:"floating"},{default:Ro(()=>[Mo]),_:1}),Object(n["createVNode"])(p,{readonly:"",placeholder:"0",value:t.current_quantity,color:t.current_quantity!=t.originalQuantity?"success":""},null,8,["value","color"])]),_:2},1024)]),_:2},1024),Object(n["createVNode"])(d,null,{default:Ro(()=>[Object(n["createVNode"])(h,{size:"large",onClick:t=>e.enterAmount(a)},{default:Ro(()=>[Ho]),_:1},8,["onClick"])]),_:1})]),_:2},1024))),128))]),_:1})):Object(n["createCommentVNode"])("",!0)]),_:1})]),_:1})]),_:1})]),_:1})}));var Uo=a("3d6c"),qo=Object(n["defineComponent"])({components:{ViewPort:c["a"],HisTextInput:Po["a"],IonGrid:l["p"],IonCol:l["m"],IonRow:l["H"],IonButton:l["d"]},mixins:[s["a"]],data:()=>({drugs:[],selectedDrug:null,stockService:{}}),async activated(){this.$emit("onFieldActivated",this),this.stockService=new Uo["a"],await this.setDefaultValue()},methods:{async setDefaultValue(){if(!Object(d["isEmpty"])(this.drugs))return;const e=await this.options();this.drugs=[],e.forEach(e=>{this.drugs.push({...e.value})})},getModalTitle(e){return`${e} (${this.drugs[this.selectedDrug].fullName})`},getDrugValue(e,t){return this.drugs[this.selectedDrug].entries[e][t]},setDrugValue(e,t,a){this.drugs[this.selectedDrug].entries[e][t]=a?a.value:""},async enterAmount(e){const t=this.getDrugValue(e,"batch_number");this.launchKeyPad({id:"tins",helpText:this.getModalTitle("Enter number of tins for Batch "+t),type:ts.TT_NUMBER,defaultValue:()=>this.getDrugValue(e,"current_quantity"),validation:e=>!e||e&&!e.value?null:xo["a"].validateSeries([()=>xo["a"].isNumber(e),()=>e.value<0?["Number of tins must be greater than 1"]:null])},t=>{this.setDrugValue(e,"current_quantity",t)})},async launchKeyPad(e,t){const a=await l["X"].create({component:Io["a"],backdropDismiss:!1,cssClass:"full-modal",componentProps:{dismissType:"modal",currentField:e,onFinish:t}});a.present()},async selectDrug(e){if(this.selectedDrug=e,!("entries"in this.drugs[e])){const t=await this.stockService.getItem(this.drugs[this.selectedDrug].drugID);this.drugs[e]["entries"]=t.map(e=>(e.originalQuantity=e["current_quantity"],e))}}},computed:{noStockForDrug(){try{return!this.drugs[this.selectedDrug].entries||this.drugs[this.selectedDrug].entries.length<=0}catch(e){return!1}},fullSelectedDrugName(){try{return this.drugs[this.selectedDrug].fullName}catch(e){return"N/A"}},enteredDrugs(){const e=[];return this.drugs.forEach(t=>{if(t.entries){const a=t.entries.filter(e=>e.current_quantity!=e.originalQuantity);a.forEach(a=>{e.push({label:t.shortname,value:{...a,...t}})})}}),e}},watch:{clear(){this.drugs=this.drugs.map(e=>e.entries?(e.entries=e.entries.map(e=>(e["current_quantity"]=e.originalQuantity,e)),e):e)},drugs:{async handler(){this.$emit("onValue",this.enteredDrugs)},immediate:!0,deep:!0}}});a("fe42");const Go=h()(qo,[["render",$o],["__scopeId","data-v-4be61a49"]]);var zo=Go;const Yo=Object(n["withScopeId"])("data-v-675d3ba2");Object(n["pushScopeId"])("data-v-675d3ba2");const Wo=Object(n["createTextVNode"])("Total Tins");Object(n["popScopeId"])();const Ko=Yo((function(e,t,a,o,i,r){const s=Object(n["resolveComponent"])("his-text-input"),c=Object(n["resolveComponent"])("ion-item"),l=Object(n["resolveComponent"])("ion-list"),d=Object(n["resolveComponent"])("ion-col"),u=Object(n["resolveComponent"])("ion-label"),p=Object(n["resolveComponent"])("ion-input"),h=Object(n["resolveComponent"])("ion-row"),b=Object(n["resolveComponent"])("ion-grid"),m=Object(n["resolveComponent"])("view-port");return Object(n["openBlock"])(),Object(n["createBlock"])(m,null,{default:Yo(()=>[Object(n["createVNode"])(s,{readonly:"",value:e.fullSelectedDrugName},null,8,["value"]),Object(n["createVNode"])(b,{style:{background:"white"}},{default:Yo(()=>[Object(n["createVNode"])(h,null,{default:Yo(()=>[Object(n["createVNode"])(d,{size:"4",class:"border-right scroll-list"},{default:Yo(()=>[(Object(n["openBlock"])(!0),Object(n["createBlock"])(n["Fragment"],null,Object(n["renderList"])(e.drugs,(t,a)=>(Object(n["openBlock"])(),Object(n["createBlock"])(l,{key:a},{default:Yo(()=>[Object(n["createVNode"])(c,{detail:"",color:a===e.selectedDrug?"secondary":"",onClick:t=>e.selectDrug(a)},{default:Yo(()=>{var e;return[Object(n["createTextVNode"])(Object(n["toDisplayString"])(""+(null!==(e=t.drug_name)&&void 0!==e?e:t.drug_legacy_name)),1)]}),_:2},1032,["color","onClick"])]),_:2},1024))),128))]),_:1}),Object(n["createVNode"])(d,null,{default:Yo(()=>[null!==e.selectedDrug?(Object(n["openBlock"])(),Object(n["createBlock"])(b,{key:0,class:"scroll-list"},{default:Yo(()=>[(Object(n["openBlock"])(!0),Object(n["createBlock"])(n["Fragment"],null,Object(n["renderList"])(e.drugs[e.selectedDrug].entries,(t,a)=>(Object(n["openBlock"])(),Object(n["createBlock"])(h,{key:a},{default:Yo(()=>[Object(n["createVNode"])(d,null,{default:Yo(()=>[Object(n["createVNode"])(c,null,{default:Yo(()=>[Object(n["createVNode"])(u,{position:"floating"},{default:Yo(()=>[Wo]),_:1}),Object(n["createVNode"])(p,{readonly:"",placeholder:"0",value:t.tins,onClick:t=>e.enterTins(a)},null,8,["value","onClick"])]),_:2},1024)]),_:2},1024)]),_:2},1024))),128))]),_:1})):Object(n["createCommentVNode"])("",!0)]),_:1})]),_:1})]),_:1})]),_:1})}));var Xo=Object(n["defineComponent"])({components:{ViewPort:c["a"],IonGrid:l["p"],IonList:l["y"],IonCol:l["m"],IonRow:l["H"],IonItem:l["w"],HisTextInput:Po["a"]},mixins:[s["a"]],data:()=>({drugs:[],selectedDrug:null}),async activated(){this.$emit("onFieldActivated",this),await this.setDefaultValue()},methods:{async setDefaultValue(){const e=await this.options();this.drugs=this.drugs.filter(t=>e.map(e=>e.label).includes(t.label)),e.forEach(e=>{const t={tins:null},a={label:e.label,entries:[{...t}],...e.value},n=Object(d["find"])(this.drugs,{label:e.label});n||this.drugs.push(a)}),this.drugs.length>=1&&this.selectDrug(0)},getModalTitle(e){return`${e} (${this.drugs[this.selectedDrug].label})`},getDrugValue(e,t){return this.drugs[this.selectedDrug].entries[e][t]},setDrugValue(e,t,a){this.drugs[this.selectedDrug].entries[e][t]=a?a.value:""},enterTins(e){this.launchKeyPad({id:"tins",helpText:this.getModalTitle("Enter number of tins"),type:ts.TT_NUMBER,defaultValue:()=>this.getDrugValue(e,"tins"),validation:e=>!e||e&&!e.value?null:xo["a"].validateSeries([()=>xo["a"].isNumber(e),()=>e.value<=0?["Number of tins must be greater than 1"]:null])},t=>this.setDrugValue(e,"tins",t))},async launchKeyPad(e,t){const a=await l["X"].create({component:Io["a"],backdropDismiss:!1,cssClass:"full-modal",componentProps:{dismissType:"modal",currentField:e,onFinish:t}});a.present()},async selectDrug(e){this.selectedDrug=e},validateEntry(e){return!Object(d["isEmpty"])(e.tins)}},computed:{fullSelectedDrugName(){try{return this.drugs[this.selectedDrug].label}catch(e){return"N/A"}},enteredDrugs(){const e=[];return this.drugs.forEach(t=>{if(t.entries){const a=t.entries.filter(e=>this.validateEntry(e));a.forEach(a=>{e.push({label:t.shortname,value:{...a,...t}})})}}),e}},watch:{clear(){this.drugs=this.drugs.map(e=>(e.entries=e.entries.map(e=>(e.tins=null,e)),e))},drugs:{async handler(){this.$emit("onValue",this.enteredDrugs)},immediate:!0,deep:!0}}});a("3130");const Jo=h()(Xo,[["render",Ko],["__scopeId","data-v-675d3ba2"]]);var Qo=Jo,Zo=a("2a82");const ei=Object(n["withScopeId"])("data-v-5b4dbb06");Object(n["pushScopeId"])("data-v-5b4dbb06");const ti={class:"center"},ai={class:"text"};Object(n["popScopeId"])();const ni=ei((function(e,t,a,o,i,r){return Object(n["openBlock"])(),Object(n["createBlock"])("div",ti,[Object(n["createVNode"])("p",ai,Object(n["toDisplayString"])(e.value),1)])}));var oi=Object(n["defineComponent"])({mixins:[s["a"]],data:()=>({value:""}),async activated(){const e=await this.options();this.value=e[0].value}});a("f379");const ii=h()(oi,[["render",ni],["__scopeId","data-v-5b4dbb06"]]);var ri=ii;const si=Object(n["withScopeId"])("data-v-b3c75404");Object(n["pushScopeId"])("data-v-b3c75404");const ci={class:"view-port-content"},li={key:0,class:"his-card history"},di={class:"his-table"},ui=Object(n["createVNode"])("tr",null,[Object(n["createVNode"])("th",null," Medication"),Object(n["createVNode"])("th",null," Date"),Object(n["createVNode"])("th",null," Amount dispensed ")],-1),pi={key:1,class:"prescription-tab"},hi={class:"prescription-table-section his-card"},bi={class:"his-table"},mi=Object(n["createVNode"])("tr",null,[Object(n["createVNode"])("th",null," Medication"),Object(n["createVNode"])("th",null," Amount needed"),Object(n["createVNode"])("th",null," Amount dispensed "),Object(n["createVNode"])("th",null," Reset ")],-1),gi={class:"barcode-section"};Object(n["popScopeId"])();const fi=si((function(e,t,a,o,i,r){const s=Object(n["resolveComponent"])("nav-button"),c=Object(n["resolveComponent"])("ion-col"),l=Object(n["resolveComponent"])("ion-input"),d=Object(n["resolveComponent"])("reset-button"),u=Object(n["resolveComponent"])("barcode"),p=Object(n["resolveComponent"])("ion-row"),h=Object(n["resolveComponent"])("view-port");return Object(n["openBlock"])(),Object(n["createBlock"])(h,null,{default:si(()=>[Object(n["createVNode"])("div",ci,[Object(n["createVNode"])(p,null,{default:si(()=>[Object(n["createVNode"])(c,{size:"2"},{default:si(()=>[Object(n["createVNode"])(s,{onClick:t[1]||(t[1]=t=>e.tab="prescribe"),isActive:"prescribe"===e.tab,image:"prescription/rx",label:"Prescribed"},null,8,["isActive"]),Object(n["createVNode"])(s,{onClick:t[2]||(t[2]=t=>e.tab="history"),isActive:"history"===e.tab,image:"prescription/history",label:"History"},null,8,["isActive"])]),_:1}),Object(n["createVNode"])(c,{size:"10"},{default:si(()=>["history"===e.tab?(Object(n["openBlock"])(),Object(n["createBlock"])("div",li,[Object(n["createVNode"])("table",di,[ui,(Object(n["openBlock"])(!0),Object(n["createBlock"])(n["Fragment"],null,Object(n["renderList"])(e.medicationHistory,(e,t)=>(Object(n["openBlock"])(),Object(n["createBlock"])("tr",{key:t},[Object(n["createVNode"])("td",null,Object(n["toDisplayString"])(e.medication),1),Object(n["createVNode"])("td",null,Object(n["toDisplayString"])(e.date),1),Object(n["createVNode"])("td",null,Object(n["toDisplayString"])(e.amount),1)]))),128))])])):Object(n["createCommentVNode"])("",!0),"prescribe"===e.tab?(Object(n["openBlock"])(),Object(n["createBlock"])("div",pi,[Object(n["createVNode"])("div",hi,[Object(n["createVNode"])("table",bi,[mi,(Object(n["openBlock"])(!0),Object(n["createBlock"])(n["Fragment"],null,Object(n["renderList"])(e.listData,(t,a)=>(Object(n["openBlock"])(),Object(n["createBlock"])("tr",{key:a},[Object(n["createVNode"])("td",null,Object(n["toDisplayString"])(t.label),1),Object(n["createVNode"])("td",null,Object(n["toDisplayString"])(t.other.amount_needed),1),Object(n["createVNode"])("td",null,[Object(n["createVNode"])(l,{disabled:t.value>0,value:t.value,onClick:a=>t.value<=0?e.launchDispenser(t):null,class:"dosage-input"},null,8,["disabled","value","onClick"])]),Object(n["createVNode"])("td",null,[Object(n["createVNode"])(d,{disabled:t.value<=0,onClick:a=>t.value>0?e.onReset(t):null},null,8,["disabled","onClick"])])]))),128))])]),Object(n["createVNode"])("div",gi,[Object(n["createVNode"])(u,{onOnScan:e.onScan},null,8,["onOnScan"])])])):Object(n["createCommentVNode"])("",!0)]),_:1})]),_:1})])]),_:1})})),Oi=Object(n["withScopeId"])("data-v-0d5bc218");Object(n["pushScopeId"])("data-v-0d5bc218");const ji={class:"",style:{border:".1rem solid #c2c2c2c2"}},_i={class:"keypad"},vi=Object(n["createVNode"])("b",null,"Medication: ",-1),yi=Object(n["createVNode"])("b",null,"Amount needed: ",-1),wi=Object(n["createVNode"])("b",null,"Amount Dispensed: ",-1),Ni=Object(n["createTextVNode"])(" Close "),Ci=Object(n["createTextVNode"])(" Dispense ");Object(n["popScopeId"])();const Vi=Oi((function(e,t,a,o,i,r){const s=Object(n["resolveComponent"])("ion-input"),c=Object(n["resolveComponent"])("ion-button"),l=Object(n["resolveComponent"])("ion-col"),d=Object(n["resolveComponent"])("ion-label"),u=Object(n["resolveComponent"])("ion-item"),p=Object(n["resolveComponent"])("ion-list"),h=Object(n["resolveComponent"])("ion-row"),b=Object(n["resolveComponent"])("ion-grid"),m=Object(n["resolveComponent"])("ion-content"),g=Object(n["resolveComponent"])("ion-toolbar"),f=Object(n["resolveComponent"])("ion-footer");return Object(n["openBlock"])(),Object(n["createBlock"])(n["Fragment"],null,[Object(n["createVNode"])(m,null,{default:Oi(()=>[Object(n["createVNode"])(b,null,{default:Oi(()=>[Object(n["createVNode"])(h,null,{default:Oi(()=>[Object(n["createVNode"])(l,{size:"5"},{default:Oi(()=>[Object(n["createVNode"])("div",ji,[Object(n["createVNode"])(s,{type:"text",class:"keypad-input",value:e.amount},null,8,["value"]),Object(n["createVNode"])("table",_i,[(Object(n["openBlock"])(!0),Object(n["createBlock"])(n["Fragment"],null,Object(n["renderList"])(e.keyboard,(t,a)=>(Object(n["openBlock"])(),Object(n["createBlock"])("tr",{key:a},[(Object(n["openBlock"])(!0),Object(n["createBlock"])(n["Fragment"],null,Object(n["renderList"])(t,(t,a)=>(Object(n["openBlock"])(),Object(n["createBlock"])("td",{class:"his-keyboard-margin",key:"btn-"+a},[Object(n["createVNode"])(c,{color:"primary",class:"his-keyboard-btn",onClick:a=>e.onKeyPress(t)},{default:Oi(()=>[Object(n["createTextVNode"])(Object(n["toDisplayString"])(t),1)]),_:2},1032,["onClick"])]))),128))]))),128))])])]),_:1}),Object(n["createVNode"])(l,{size:"7"},{default:Oi(()=>[Object(n["createVNode"])(p,null,{default:Oi(()=>[Object(n["createVNode"])(u,null,{default:Oi(()=>[Object(n["createVNode"])(d,null,{default:Oi(()=>[vi,Object(n["createTextVNode"])(" "+Object(n["toDisplayString"])(e.drugName),1)]),_:1})]),_:1}),Object(n["createVNode"])(u,null,{default:Oi(()=>[Object(n["createVNode"])(d,null,{default:Oi(()=>[yi,Object(n["createTextVNode"])(Object(n["toDisplayString"])(e.amountNeeded),1)]),_:1})]),_:1}),Object(n["createVNode"])(u,null,{default:Oi(()=>[Object(n["createVNode"])(d,null,{default:Oi(()=>[wi,Object(n["createTextVNode"])(Object(n["toDisplayString"])(e.amount.length?e.amount:0),1)]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),Object(n["createVNode"])(f,null,{default:Oi(()=>[Object(n["createVNode"])(g,null,{default:Oi(()=>[Object(n["createVNode"])(c,{onClick:e.onClose,color:"danger",size:"large",slot:"start"},{default:Oi(()=>[Ni]),_:1},8,["onClick"]),Object(n["createVNode"])(c,{onClick:t[1]||(t[1]=t=>e.onDispense(e.amount)),disabled:e.amount.length<=0,color:"success",size:"large",slot:"end"},{default:Oi(()=>[Ci]),_:1},8,["disabled"])]),_:1})]),_:1})],64)}));var Di=Object(n["defineComponent"])({data:()=>({amount:"",keyboard:C["e"]}),props:{drugName:{type:String,required:!0},amountNeeded:{type:String,required:!0},onDispense:{type:Function,required:!0}},methods:{async onKeyPress(e){const t=this.amount;e.match(/del/i)?this.amount=t.substring(0,t.length-1):e.match(/clear/i)?this.amount="":e.match(/close/i)?this.onClose():e.match(/reset/i)?this.amount="":e.match(/dispense/i)?(this.amount&&this.onDispense(this.amount),this.onClose()):this.amount+=e},async onClose(){await l["X"].dismiss({})}}});a("69b6");const ki=h()(Di,[["render",Vi],["__scopeId","data-v-0d5bc218"]]);var Ti=ki,Ii=Object(n["defineComponent"])({components:{ViewPort:c["a"],Barcode:$a["a"],NavButton:ot,ResetButton:Ya,IonRow:l["H"],IonCol:l["m"]},mixins:[s["a"]],data:()=>({tab:"prescribe",listData:[]}),async activated(){this.$emit("onFieldActivated",this),this.listData=await this.options(this.fdata)},computed:{medicationHistory(){return this.config&&this.config.medicationHistory?this.config.medicationHistory:[]}},methods:{async onScan(e){const[t,a]=e.split("-"),n=this.listData.map(async e=>{if(e.other.drug_id===parseInt(t)){const t=parseInt(e.value.toString()),n=parseInt(a),o=await this.updateOnValue(e,n,[],!0);o&&(e.value=n+t)}return e});this.listData=await Promise.all(n)},async onReset(e){await this.updateOnValue(e,-1)},async updateOnValue(e,t,a=[],n=!1){if(this.onValue){const o=await this.onValue({label:e.label,other:{dispenses:a,...e.other},value:t},n);if(!o)return!1}return e.value=t<0?0:t,this.$emit("onValue",e),this.onValueUpdate&&(this.listData=await this.onValueUpdate(e,this.listData)),!0},async launchDispenser(e){const t=await l["X"].create({component:Ti,backdropDismiss:!1,cssClass:"custom-modal",componentProps:{drugName:e.label,amountNeeded:e.other.amount_needed,onDispense:async t=>{const a=await this.updateOnValue(e,t);a&&await l["X"].dismiss({})}}});t.present()}}});a("cff5");const xi=h()(Ii,[["render",fi],["__scopeId","data-v-b3c75404"]]);var Si=xi;const Pi=Object(n["withScopeId"])("data-v-34745e5e");Object(n["pushScopeId"])("data-v-34745e5e");const Ai={class:"view-port-content"};Object(n["popScopeId"])();const Ei=Pi((function(e,t,a,o,i,r){const s=Object(n["resolveComponent"])("his-table"),c=Object(n["resolveComponent"])("view-port");return Object(n["openBlock"])(),Object(n["createBlock"])(c,{style:e.config.viewPortStyle},{default:Pi(()=>[Object(n["createVNode"])("div",Ai,[Object(n["createVNode"])(s,{columns:e.columns,rows:e.rows,config:e.config.dataTableConfig},null,8,["columns","rows","config"])])]),_:1},8,["style"])}));var Bi=a("80e3"),Ri=Object(n["defineComponent"])({components:{ViewPort:c["a"],HisTable:Bi["a"]},mixins:[s["a"]],data:()=>({columns:[],rows:[]}),async activated(){this.$emit("onFieldActivated",this),"function"===typeof this.config.columns&&(this.columns=await this.config.columns(this.fdata,this.cdata)),"function"===typeof this.config.rows&&(this.rows=await this.config.rows(this.fdata,this.cdata))}});a("ea3a");const Fi=h()(Ri,[["render",Ei],["__scopeId","data-v-34745e5e"]]);var Li=Fi;const Mi=Object(n["withScopeId"])("data-v-6218c318");Object(n["pushScopeId"])("data-v-6218c318");const Hi={class:"view-port-content"};Object(n["popScopeId"])();const $i=Mi((function(e,t,a,o,i,r){const s=Object(n["resolveComponent"])("ion-radio"),c=Object(n["resolveComponent"])("ion-label"),l=Object(n["resolveComponent"])("ion-item"),d=Object(n["resolveComponent"])("ion-list"),u=Object(n["resolveComponent"])("ion-radio-group"),p=Object(n["resolveComponent"])("ion-col"),h=Object(n["resolveComponent"])("ion-row"),b=Object(n["resolveComponent"])("ion-grid"),m=Object(n["resolveComponent"])("view-port");return Object(n["openBlock"])(),Object(n["createBlock"])(m,null,{default:Mi(()=>[Object(n["createVNode"])("div",Hi,[Object(n["createVNode"])(b,null,{default:Mi(()=>{var a,o,i,r;return[Object(n["createVNode"])(h,null,{default:Mi(()=>{var a,o;return[Object(n["createVNode"])(p,null,{default:Mi(()=>[Object(n["createVNode"])(u,{modelValue:e.selected,"onUpdate:modelValue":t[1]||(t[1]=t=>e.selected=t)},{default:Mi(()=>[Object(n["createVNode"])(d,{class:"his-card"},{default:Mi(()=>[(Object(n["openBlock"])(!0),Object(n["createBlock"])(n["Fragment"],null,Object(n["renderList"])(e.listData,(e,t)=>(Object(n["openBlock"])(),Object(n["createBlock"])(l,{class:"his-md-text",key:t},{default:Mi(()=>[Object(n["createVNode"])(s,{slot:"start",value:e},null,8,["value"]),Object(n["createVNode"])(c,null,{default:Mi(()=>[Object(n["createTextVNode"])(Object(n["toDisplayString"])(e.label),1)]),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1},8,["modelValue"])]),_:1}),null!==(a=e.selected)&&void 0!==a&&null!==(o=a.other)&&void 0!==o&&o.options?(Object(n["openBlock"])(),Object(n["createBlock"])(p,{key:0},{default:Mi(()=>[Object(n["createVNode"])(u,{modelValue:e.selected.value,"onUpdate:modelValue":t[2]||(t[2]=t=>e.selected.value=t)},{default:Mi(()=>[Object(n["createVNode"])(d,{class:"his-card"},{default:Mi(()=>[(Object(n["openBlock"])(!0),Object(n["createBlock"])(n["Fragment"],null,Object(n["renderList"])(e.selected.other.options,(e,t)=>(Object(n["openBlock"])(),Object(n["createBlock"])(l,{class:"his-md-text",key:t},{default:Mi(()=>[Object(n["createVNode"])(s,{slot:"start",value:e.label},null,8,["value"]),Object(n["createVNode"])(c,null,{default:Mi(()=>[Object(n["createTextVNode"])(Object(n["toDisplayString"])(e.label),1)]),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1},8,["modelValue"])]),_:1})):Object(n["createCommentVNode"])("",!0)]}),_:1}),null!==(a=e.selected)&&void 0!==a&&null!==(o=a.other)&&void 0!==o&&o.subgroupTitle?(Object(n["openBlock"])(),Object(n["createBlock"])(h,{key:0},{default:Mi(()=>[Object(n["createVNode"])(p,null,{default:Mi(()=>{var t,a;return[Object(n["createVNode"])("h4",null,Object(n["toDisplayString"])(null===(t=e.selected)||void 0===t||null===(a=t.other)||void 0===a?void 0:a.subgroupTitle),1)]}),_:1})]),_:1})):Object(n["createCommentVNode"])("",!0),null!==(i=e.selected)&&void 0!==i&&null!==(r=i.other)&&void 0!==r&&r.subGroupOptions?(Object(n["openBlock"])(),Object(n["createBlock"])(h,{key:1},{default:Mi(()=>{var a,o,i,r;return[Object(n["createVNode"])(p,null,{default:Mi(()=>[Object(n["createVNode"])(u,{modelValue:e.selected.other.subGroupOptionValue,"onUpdate:modelValue":t[3]||(t[3]=t=>e.selected.other.subGroupOptionValue=t)},{default:Mi(()=>[Object(n["createVNode"])(d,{class:"his-card"},{default:Mi(()=>[(Object(n["openBlock"])(!0),Object(n["createBlock"])(n["Fragment"],null,Object(n["renderList"])(e.selected.other.subGroupOptions,(e,t)=>(Object(n["openBlock"])(),Object(n["createBlock"])(l,{class:"his-md-text",key:t},{default:Mi(()=>[Object(n["createVNode"])(s,{slot:"start",value:e},null,8,["value"]),Object(n["createVNode"])(c,null,{default:Mi(()=>[Object(n["createTextVNode"])(Object(n["toDisplayString"])(e.label),1)]),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1},8,["modelValue"])]),_:1}),null!==(a=e.selected)&&void 0!==a&&null!==(o=a.other)&&void 0!==o&&null!==(i=o.subGroupOptionValue)&&void 0!==i&&null!==(r=i.other)&&void 0!==r&&r.options?(Object(n["openBlock"])(),Object(n["createBlock"])(p,{key:0},{default:Mi(()=>[Object(n["createVNode"])(u,{modelValue:e.selected.other.subGroupOptionValue.value,"onUpdate:modelValue":t[4]||(t[4]=t=>e.selected.other.subGroupOptionValue.value=t)},{default:Mi(()=>[Object(n["createVNode"])(d,{class:"his-card"},{default:Mi(()=>[(Object(n["openBlock"])(!0),Object(n["createBlock"])(n["Fragment"],null,Object(n["renderList"])(e.selected.other.subGroupOptionValue.other.options,(e,t)=>(Object(n["openBlock"])(),Object(n["createBlock"])(l,{class:"his-md-text",key:t},{default:Mi(()=>[Object(n["createVNode"])(s,{slot:"start",value:e.label},null,8,["value"]),Object(n["createVNode"])(c,null,{default:Mi(()=>[Object(n["createTextVNode"])(Object(n["toDisplayString"])(e.label),1)]),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1},8,["modelValue"])]),_:1})):Object(n["createCommentVNode"])("",!0)]}),_:1})):Object(n["createCommentVNode"])("",!0)]}),_:1})])]),_:1})}));var Ui=Object(n["defineComponent"])({mixins:[s["a"]],components:{IonCol:l["m"],IonRow:l["H"],IonGrid:l["p"],IonList:l["y"],IonItem:l["w"],ViewPort:c["a"],IonRadioGroup:l["F"],IonRadio:l["E"],IonLabel:l["x"]},data:()=>({selected:{},listData:[]}),watch:{selected:{handler(e){Object(d["isEmpty"])(e)||this.$emit("onValue",e)},immediate:!0,deep:!0},clear(){this.selected={},this.initiateList()}},methods:{async initiateList(){this.listData=(await this.options(this.fdata,this.cdata)).map(e=>(e.other.subGroupOptions&&(e.other.subGroupOptionValue=null),e))}},async activated(){this.$emit("onFieldActivated",this),this.initiateList()}});a("fedf");const qi=h()(Ui,[["render",$i],["__scopeId","data-v-6218c318"]]);var Gi=qi;const zi=Object(n["withScopeId"])("data-v-4511dfa4");Object(n["pushScopeId"])("data-v-4511dfa4");const Yi={class:"view-port-content"},Wi={class:"pregnancy-table"},Ki=Object(n["createVNode"])("thead",{class:"ion-text-center"},[Object(n["createVNode"])("tr",null,[Object(n["createVNode"])("th",null,"Pregnancy"),Object(n["createVNode"])("th",null,"Baby count"),Object(n["createVNode"])("th",null,"Details available")])],-1),Xi={class:"ion-text-center"};Object(n["popScopeId"])();const Ji=zi((function(e,t,a,o,i,r){const s=Object(n["resolveComponent"])("ion-icon"),c=Object(n["resolveComponent"])("ion-button"),l=Object(n["resolveComponent"])("ion-col"),d=Object(n["resolveComponent"])("ion-input"),u=Object(n["resolveComponent"])("ion-row"),p=Object(n["resolveComponent"])("ion-checkbox"),h=Object(n["resolveComponent"])("view-port");return Object(n["openBlock"])(),Object(n["createBlock"])(h,null,{default:zi(()=>[Object(n["createVNode"])("div",Yi,[Object(n["createVNode"])("table",Wi,[Ki,Object(n["createVNode"])("tbody",Xi,[(Object(n["openBlock"])(!0),Object(n["createBlock"])(n["Fragment"],null,Object(n["renderList"])(e.listData,(t,a)=>(Object(n["openBlock"])(),Object(n["createBlock"])("tr",{key:a},[Object(n["createVNode"])("td",{innerHTML:t.label},null,8,["innerHTML"]),Object(n["createVNode"])("td",null,[Object(n["createVNode"])(u,null,{default:zi(()=>[Object(n["createVNode"])(l,null,{default:zi(()=>[Object(n["createVNode"])(c,{disabled:1===t.value,onClick:e=>t.value=t.value>1?t.value-1:1},{default:zi(()=>[Object(n["createVNode"])(s,{slot:"icon-only",icon:e.arrowDown},null,8,["icon"])]),_:2},1032,["disabled","onClick"])]),_:2},1024),Object(n["createVNode"])(l,null,{default:zi(()=>[Object(n["createVNode"])(d,{class:"baby-count",value:t.value},null,8,["value"])]),_:2},1024),Object(n["createVNode"])(l,null,{default:zi(()=>[Object(n["createVNode"])(c,{disabled:4===t.value,onClick:e=>t.value=t.value<4?t.value+1:t.value},{default:zi(()=>[Object(n["createVNode"])(s,{slot:"icon-only",icon:e.arrowUp},null,8,["icon"])]),_:2},1032,["disabled","onClick"])]),_:2},1024)]),_:2},1024)]),Object(n["createVNode"])("td",null,[Object(n["createVNode"])(p,{modelValue:t.isChecked,"onUpdate:modelValue":e=>t.isChecked=e},null,8,["modelValue","onUpdate:modelValue"])])]))),128))])])])]),_:1})}));var Qi=a("0011"),Zi=Object(n["defineComponent"])({name:"HisSelect",mixins:[s["a"]],components:{IonInput:l["v"],IonButton:l["d"],IonCheckbox:l["k"],IonCol:l["m"],IonRow:l["H"],IonIcon:l["r"],ViewPort:c["a"]},setup(){return{arrowUp:Jn["h"],arrowDown:Jn["g"]}},data:()=>({listData:[]}),async activated(){this.$emit("onFieldActivated",this),"function"===typeof this.config.pregnancyCount&&(this.listData=this.buildOptions(await this.config.pregnancyCount(this.fdata)),this.$emit("onValue",this.listData))},methods:{buildOptions(e){const t=[];for(let a=0;a<e;++a){const e=a+1;t.push({label:`${e} <sup>${Object(Qi["b"])(e)}</sup>`,value:1,isChecked:!0})}return t}},watch:{listData:{handler(e){e&&this.$emit("onValue",e)},deep:!0,immediate:!0}}});a("3e2c");const er=h()(Zi,[["render",Ji],["__scopeId","data-v-4511dfa4"]]);var tr=er;const ar=Object(n["withScopeId"])("data-v-fbc09f50");Object(n["pushScopeId"])("data-v-fbc09f50");const nr={key:0},or=Object(n["createVNode"])("p",null,null,-1);Object(n["popScopeId"])();const ir=ar((function(e,t,a,o,i,r){const s=Object(n["resolveComponent"])("ion-radio"),c=Object(n["resolveComponent"])("ion-label"),l=Object(n["resolveComponent"])("ion-item"),d=Object(n["resolveComponent"])("ion-radio-group"),u=Object(n["resolveComponent"])("ion-list"),p=Object(n["resolveComponent"])("ion-col"),h=Object(n["resolveComponent"])("ion-title"),b=Object(n["resolveComponent"])("ion-row"),m=Object(n["resolveComponent"])("ion-input"),g=Object(n["resolveComponent"])("ion-grid"),f=Object(n["resolveComponent"])("view-port");return Object(n["openBlock"])(),Object(n["createBlock"])(f,null,{default:ar(()=>[Object(n["createVNode"])(g,{class:"view-port-content"},{default:ar(()=>[Object(n["createVNode"])(b,null,{default:ar(()=>[Object(n["createVNode"])(p,{size:"4"},{default:ar(()=>[Object(n["createVNode"])(u,null,{default:ar(()=>[Object(n["createVNode"])(d,{modelValue:e.selected,"onUpdate:modelValue":t[1]||(t[1]=t=>e.selected=t)},{default:ar(()=>[(Object(n["openBlock"])(!0),Object(n["createBlock"])(n["Fragment"],null,Object(n["renderList"])(e.listData,(e,t)=>(Object(n["openBlock"])(),Object(n["createBlock"])(l,{detail:"",lines:"none",class:"his-md-text his-card ion-padding",key:t},{default:ar(()=>[Object(n["createVNode"])(s,{slot:"start",value:e.label},null,8,["value"]),Object(n["createVNode"])(c,{innerHTML:e.label},null,8,["innerHTML"])]),_:2},1024))),128))]),_:1},8,["modelValue"])]),_:1})]),_:1}),Object(n["createVNode"])(p,null,{default:ar(()=>[(Object(n["openBlock"])(!0),Object(n["createBlock"])(n["Fragment"],null,Object(n["renderList"])(e.listData,(t,a)=>(Object(n["openBlock"])(),Object(n["createBlock"])("div",{key:a},[e.selected===t.label?(Object(n["openBlock"])(),Object(n["createBlock"])("div",nr,[(Object(n["openBlock"])(!0),Object(n["createBlock"])(n["Fragment"],null,Object(n["renderList"])(t.other.data,(o,i)=>(Object(n["openBlock"])(),Object(n["createBlock"])(g,{style:{"margin-bottom":"10px"},class:"his-card",key:i},{default:ar(()=>{var r;return[null!==t&&void 0!==t&&null!==(r=t.other)&&void 0!==r&&r.rowTitles?(Object(n["openBlock"])(),Object(n["createBlock"])(b,{key:0,style:{background:"#F8F8F8"}},{default:ar(()=>[Object(n["createVNode"])(p,{class:"ion-text-center"},{default:ar(()=>{var e,a;return[Object(n["createVNode"])(h,{class:"his-md-text",innerHTML:null!==t&&void 0!==t&&null!==(e=t.other)&&void 0!==e&&e.rowTitles&&(null===t||void 0===t||null===(a=t.other)||void 0===a?void 0:a.rowTitles[i])||""},null,8,["innerHTML"])]}),_:2},1024)]),_:2},1024)):Object(n["createCommentVNode"])("",!0),or,(Object(n["openBlock"])(!0),Object(n["createBlock"])(n["Fragment"],null,Object(n["renderList"])(o,(t,o)=>(Object(n["openBlock"])(),Object(n["createBlock"])(b,{key:o},{default:ar(()=>[Object(n["createVNode"])(p,null,{default:ar(()=>[t.disabled?(Object(n["openBlock"])(),Object(n["createBlock"])(l,{key:0,onClick:a=>e.warn("Cannot edit "+t.label),class:"his-sm-text"},{default:ar(()=>[Object(n["createVNode"])(c,null,{default:ar(()=>[Object(n["createTextVNode"])(Object(n["toDisplayString"])(t.label),1)]),_:2},1024),Object(n["createVNode"])(m,{placeholder:"N/A",slot:"end"})]),_:2},1032,["onClick"])):Object(n["createCommentVNode"])("",!0),t.disabled?Object(n["createCommentVNode"])("",!0):(Object(n["openBlock"])(),Object(n["createBlock"])(l,{key:1,class:"his-sm-text",onClick:n=>e.editField(t,e.listData[a].other.data[i])},{default:ar(()=>{var e,a;return[Object(n["createVNode"])(c,{color:null!==t&&void 0!==t&&null!==(e=t.value)&&void 0!==e&&e.label?"":"danger"},{default:ar(()=>[Object(n["createVNode"])("b",null,Object(n["toDisplayString"])(t.label),1)]),_:2},1032,["color"]),Object(n["createVNode"])(m,{class:"his-md-text",slot:"end",readonly:!0,value:null===t||void 0===t||null===(a=t.value)||void 0===a?void 0:a.label,placeholder:"Click to edit"},null,8,["value"])]}),_:2},1032,["onClick"]))]),_:2},1024)]),_:2},1024))),128))]}),_:2},1024))),128))])):Object(n["createCommentVNode"])("",!0)]))),128))]),_:1})]),_:1})]),_:1})]),_:1})}));var rr=Object(n["defineComponent"])({name:"HisSelect",mixins:[s["a"]],components:{IonTitle:l["P"],IonInput:l["v"],IonRadioGroup:l["F"],IonRadio:l["E"],IonGrid:l["p"],IonCol:l["m"],IonRow:l["H"],ViewPort:c["a"]},setup(){return{arrowUp:Jn["h"],arrowDown:Jn["g"]}},data:()=>({selected:"",listData:[]}),async activated(){this.$emit("onFieldActivated",this),this.listData=await this.options(this.fdata),this.listData.length&&(this.selected=this.listData[0].label)},methods:{warn(e){Object(it["e"])(e)},async launchModal(e,t){(await l["X"].create({component:Io["a"],backdropDismiss:!1,cssClass:"full-modal",componentProps:{dismissType:"modal",currentField:e,onFinish:t}})).present()},async editField(e,t){const a=a=>{var n,o,i;(e.value=a,"function"===typeof(null===e||void 0===e||null===(n=e.field)||void 0===n?void 0:n.computedValue))&&(e.computedValue=null===e||void 0===e||null===(i=e.field)||void 0===i?void 0:i.computedValue(a));"function"===typeof(null===e||void 0===e||null===(o=e.field)||void 0===o?void 0:o.onValueUpdate)&&e.field.onValueUpdate(a,t)};this.launchModal(e.field,t=>{var n,o;if(!Array.isArray(t)&&(t.label.match(/unknown/i)&&"function"===typeof(null===(n=e.field)||void 0===n||null===(o=n.config)||void 0===o?void 0:o.onUnknownEstimateField)))return this.launchModal(e.field.config.onUnknownEstimateField(),e=>a(e));a(t)})}},watch:{listData:{handler(e){const t=[],a=e.map(e=>e.other.data).reduce((e,t)=>[...e,...t.reduce((e,t)=>[...e,...t],[])],[]).filter(e=>e.required&&""===e.value?(t.push(e.label),!1):!!e.required).map(e=>({label:e.label,value:e.value,other:{obs:e.computedValue}}));Object(d["isEmpty"])(t)?this.$emit("onValue",a):this.$emit("onValue",[{label:"_INCOMPLETE_RECORD_ERROR_",value:t.length,other:{incompleteLabels:t}}])},deep:!0}}});a("d9bd");const sr=h()(rr,[["render",ir],["__scopeId","data-v-fbc09f50"]]);var cr=sr;const lr=Object(n["createTextVNode"])(" Expected Date Of Delivery: "),dr=Object(n["createTextVNode"])(" Gestation Weeks: "),ur=Object(n["createTextVNode"])("(Abnormal)");function pr(e,t,a,o,i,r){const s=Object(n["resolveComponent"])("ion-label"),c=Object(n["resolveComponent"])("ion-item"),l=Object(n["resolveComponent"])("ion-text"),d=Object(n["resolveComponent"])("ion-list"),u=Object(n["resolveComponent"])("his-date-input"),p=Object(n["resolveComponent"])("ion-page");return Object(n["openBlock"])(),Object(n["createBlock"])(p,null,{default:Object(n["withCtx"])(()=>[Object(n["createVNode"])(u,{config:e.config,options:e.options,clear:e.clear,fdata:e.formData,cdata:e.computedFormData,activationState:e.state,onValue:e.onValue,onOnValue:e.onNewValue,defaultValue:e.defaultValue},{default:Object(n["withCtx"])(()=>[Object(n["createVNode"])(d,null,{default:Object(n["withCtx"])(()=>[Object(n["createVNode"])(c,{class:"his-md-text",lines:"none"},{default:Object(n["withCtx"])(()=>[Object(n["createVNode"])(s,{slot:"start"},{default:Object(n["withCtx"])(()=>[lr]),_:1}),Object(n["createVNode"])(s,{slot:"end"},{default:Object(n["withCtx"])(()=>[Object(n["createTextVNode"])(Object(n["toDisplayString"])(e.delieveryDate),1)]),_:1})]),_:1}),Object(n["createVNode"])(c,{class:"his-md-text",lines:"none"},{default:Object(n["withCtx"])(()=>[Object(n["createVNode"])(s,{slot:"start"},{default:Object(n["withCtx"])(()=>[dr]),_:1}),Object(n["createVNode"])(s,{color:e.lmpIsAbnormal?"danger":"success",slot:"end"},{default:Object(n["withCtx"])(()=>[e.lmpIsAbnormal?(Object(n["openBlock"])(),Object(n["createBlock"])(l,{key:0},{default:Object(n["withCtx"])(()=>[ur]),_:1})):Object(n["createCommentVNode"])("",!0),Object(n["createTextVNode"])(" "+Object(n["toDisplayString"])(e.gestationWeeks),1)]),_:1},8,["color"])]),_:1})]),_:1})]),_:1},8,["config","options","clear","fdata","cdata","activationState","onValue","onOnValue","defaultValue"])]),_:1})}var hr=Object(n["defineComponent"])({components:{HisDateInput:wo["a"],IonText:l["M"],IonPage:l["D"],IonItem:l["w"],IonLabel:l["x"],IonList:l["y"]},mixins:[s["a"]],data:()=>({delieveryDate:"N/A",gestationWeeks:"N/A",minGestationWeeks:0,maxGestationWeeks:42}),mounted(){var e,t;this.minGestationWeeks=(null===(e=this.config)||void 0===e?void 0:e.minGestationWeeks)||0,this.maxGestationWeeks=(null===(t=this.config)||void 0===t?void 0:t.maxGestationWeeks)||42},computed:{lmpIsAbnormal(){const e=parseInt(this.gestationWeeks);return e<this.minGestationWeeks||e>this.maxGestationWeeks}},methods:{onNewValue(e){e&&"Unknown"!=e.label?("function"===typeof this.config.calculateDelieveryDate&&(this.delieveryDate=this.config.calculateDelieveryDate(e.value)),"function"===typeof this.config.calculateGestationWeeks&&(this.gestationWeeks=this.config.calculateGestationWeeks(e.value))):(this.delieveryDate="N/A",this.gestationWeeks="N/A"),this.$emit("onValue",{...e,other:this.gestationWeeks})}}});const br=h()(hr,[["render",pr]]);var mr=br;const gr=Object(n["withScopeId"])("data-v-15ce26d8");Object(n["pushScopeId"])("data-v-15ce26d8");const fr={class:"view-port-content"},Or=Object(n["createVNode"])("b",null," Medication ",-1),jr=Object(n["createVNode"])("b",null," Given Amount",-1),_r=Object(n["createVNode"])("b",null," Pills brought ",-1),vr={class:"his-card",style:{textAlign:"left"}};Object(n["popScopeId"])();const yr=gr((function(e,t,a,o,i,r){const s=Object(n["resolveComponent"])("ion-col"),c=Object(n["resolveComponent"])("ion-row"),l=Object(n["resolveComponent"])("ion-input"),d=Object(n["resolveComponent"])("ion-grid"),u=Object(n["resolveComponent"])("view-port");return Object(n["openBlock"])(),Object(n["createBlock"])(u,null,{default:gr(()=>[Object(n["createVNode"])("div",fr,[Object(n["createVNode"])(d,null,{default:gr(()=>[Object(n["createVNode"])(c,null,{default:gr(()=>[Object(n["createVNode"])(s,{size:"6"},{default:gr(()=>[Or]),_:1}),Object(n["createVNode"])(s,{size:"3"},{default:gr(()=>[jr]),_:1}),Object(n["createVNode"])(s,{size:"3"},{default:gr(()=>[_r]),_:1})]),_:1}),(Object(n["openBlock"])(!0),Object(n["createBlock"])(n["Fragment"],null,Object(n["renderList"])(e.listData,(t,a)=>(Object(n["openBlock"])(),Object(n["createBlock"])(c,{key:a},{default:gr(()=>[Object(n["createVNode"])(s,{size:"6"},{default:gr(()=>[Object(n["createVNode"])("div",vr,Object(n["toDisplayString"])(t.label),1)]),_:2},1024),Object(n["createVNode"])(s,{size:"3"},{default:gr(()=>[Object(n["createVNode"])(l,{value:t.value,onClick:a=>e.launchKeyPad(t,"Given amount"),class:"his-card"},null,8,["value","onClick"])]),_:2},1024),Object(n["createVNode"])(s,{size:"3"},{default:gr(()=>[Object(n["createVNode"])(l,{value:t.other.pillsBrought,onClick:a=>e.launchKeyPad(t,"Pills brought"),class:"his-card"},null,8,["value","onClick"])]),_:2},1024)]),_:2},1024))),128))]),_:1})])]),_:1})}));var wr=Object(n["defineComponent"])({components:{ViewPort:c["a"],IonGrid:l["p"],IonCol:l["m"],IonRow:l["H"],IonInput:l["v"]},mixins:[s["a"]],data:()=>({listData:[]}),watch:{clear:{handler(){this.listData=this.listData.filter(e=>(e.value="",e.other.pillsBrought="",!0))},immediate:!0},listData:{handler(){this.$emit("onValue",this.listData)},deep:!0,immediate:!0}},async activated(){this.$emit("onFieldActivated",this),this.listData=await this.options(this.fdata,this.cdata,this.listData)},methods:{async launchKeyPad(e,t){const a=await l["X"].create({component:Te["a"],backdropDismiss:!1,cssClass:"keypad-modal",componentProps:{title:e.label,preset:"Given amount"===t?e.value:e.other.pillsBrought,strictNumbers:!0,onKeyPress(a){"Given amount"===t&&(e.value=a),"Pills brought"===t&&(e.other.pillsBrought=a)}}});a.present()}}});a("279d");const Nr=h()(wr,[["render",yr],["__scopeId","data-v-15ce26d8"]]);var Cr=Nr;function Vr(e,t,a,o,i,r){const s=Object(n["resolveComponent"])("ion-checkbox"),c=Object(n["resolveComponent"])("ion-label"),l=Object(n["resolveComponent"])("ion-item"),d=Object(n["resolveComponent"])("multi-column-view"),u=Object(n["resolveComponent"])("view-port");return Object(n["openBlock"])(),Object(n["createBlock"])(u,null,{default:Object(n["withCtx"])(()=>[Object(n["createVNode"])(d,{style:{width:"100%"},class:"view-port-content",items:e.listData,numberOfColumns:4},{default:Object(n["withCtx"])(({entries:e})=>[(Object(n["openBlock"])(!0),Object(n["createBlock"])(n["Fragment"],null,Object(n["renderList"])(e,(e,t)=>(Object(n["openBlock"])(),Object(n["createBlock"])(l,{lines:"none",style:{"margin-bottom":"10px",padding:"0px",width:"100%"},class:"his-card clickable",key:t,onClick:e.isChecked},{default:Object(n["withCtx"])(()=>[Object(n["createVNode"])(s,{slot:"start",modelValue:e.isChecked,"onUpdate:modelValue":t=>e.isChecked=t},null,8,["modelValue","onUpdate:modelValue"]),Object(n["createVNode"])(c,{class:"ion-text-wrap"},{default:Object(n["withCtx"])(()=>[Object(n["createTextVNode"])(Object(n["toDisplayString"])(e.label),1)]),_:2},1024)]),_:2},1032,["onClick"]))),128))]),_:1},8,["items"])]),_:1})}var Dr=a("92c1"),kr=Object(n["defineComponent"])({name:"HisGridSelector",components:{ViewPort:c["a"],IonItem:l["w"],IonLabel:l["x"],IonCheckbox:l["k"],MultiColumnView:Dr["a"]},mixins:[s["a"]],data:()=>({listData:[]}),watch:{clear(){this.listData=this.listData.map(e=>(e.isChecked=!1,e))},listData:{handler(e){Object(d["isEmpty"])(e)||this.$emit("onValue",this.listData.filter(e=>e.isChecked))},immediate:!0,deep:!0}},async activated(){this.$emit("onFieldActivated",this),this.listData=await this.options(this.fdata,this.cdata,this.listData)}});const Tr=h()(kr,[["render",Vr]]);var Ir=Tr;const xr=Object(n["withScopeId"])("data-v-21c84d9e");Object(n["pushScopeId"])("data-v-21c84d9e");const Sr={class:"view-port-content"},Pr=Object(n["createVNode"])("b",null," Drugs ",-1),Ar=Object(n["createVNode"])("b",null," Quantity",-1),Er=Object(n["createVNode"])("b",null," Frequency ",-1),Br={class:"his-card",style:{textAlign:"left"}};Object(n["popScopeId"])();const Rr=xr((function(e,t,a,o,i,r){const s=Object(n["resolveComponent"])("ion-col"),c=Object(n["resolveComponent"])("ion-row"),l=Object(n["resolveComponent"])("ion-input"),d=Object(n["resolveComponent"])("ion-grid"),u=Object(n["resolveComponent"])("view-port");return Object(n["openBlock"])(),Object(n["createBlock"])(u,null,{default:xr(()=>[Object(n["createVNode"])("div",Sr,[Object(n["createVNode"])(d,null,{default:xr(()=>[Object(n["createVNode"])(c,null,{default:xr(()=>[Object(n["createVNode"])(s,{size:"6"},{default:xr(()=>[Pr]),_:1}),Object(n["createVNode"])(s,{size:"3"},{default:xr(()=>[Ar]),_:1}),Object(n["createVNode"])(s,{size:"3"},{default:xr(()=>[Er]),_:1})]),_:1}),(Object(n["openBlock"])(!0),Object(n["createBlock"])(n["Fragment"],null,Object(n["renderList"])(e.listData,(t,a)=>(Object(n["openBlock"])(),Object(n["createBlock"])(c,{key:a},{default:xr(()=>[Object(n["createVNode"])(s,{size:"6"},{default:xr(()=>[Object(n["createVNode"])("div",Br,Object(n["toDisplayString"])(t.label),1)]),_:2},1024),Object(n["createVNode"])(s,{size:"3"},{default:xr(()=>[Object(n["createVNode"])(l,{readonly:"",value:t.other.quantity,onClick:a=>e.editQuantity(t),class:"his-card"},null,8,["value","onClick"])]),_:2},1024),Object(n["createVNode"])(s,{size:"3"},{default:xr(()=>[Object(n["createVNode"])(l,{readonly:"",value:t.other.frequency,onClick:a=>e.editFrequency(t),class:"his-card"},null,8,["value","onClick"])]),_:2},1024)]),_:2},1024))),128))]),_:1})])]),_:1})}));var Fr=Object(n["defineComponent"])({components:{ViewPort:c["a"],IonGrid:l["p"],IonCol:l["m"],IonRow:l["H"],IonInput:l["v"]},mixins:[s["a"]],data:()=>({listData:[]}),watch:{clear:{handler(){this.listData=this.listData.filter(e=>(e.other.frequency="",e.other.quantity="",!0))},immediate:!0},listData:{handler(){this.$emit("onValue",this.listData)},deep:!0,immediate:!0}},async activated(){this.$emit("onFieldActivated",this),this.listData=await this.options(this.fdata,this.cdata,this.listData)},methods:{async launchEditor(e,t){const a=await l["X"].create({component:Io["a"],backdropDismiss:!1,cssClass:"full-modal",componentProps:{dismissType:"modal",currentField:e,onFinish:t}});a.present()},editFrequency(e){this.launchEditor({id:"edit_frequency",helpText:"Edit Frequency for "+e.label,type:ts.TT_SELECT,defaultValue:()=>e.other.frequency,options:()=>Object(d["isEmpty"])(this.config.drugFrequencies)?[]:this.config.drugFrequencies,validation:e=>xo["a"].required(e)},t=>{e.other.frequency=t.value})},editQuantity(e){this.launchEditor({id:"edit_quantity",helpText:"Edit quantity for "+e.label,type:ts.TT_NUMBER,defaultValue:()=>e.other.quantity,validation:e=>xo["a"].required(e)},t=>{e.other.quantity=parseInt(""+t.value)})}}});a("7510");const Lr=h()(Fr,[["render",Rr],["__scopeId","data-v-21c84d9e"]]);var Mr=Lr,Hr=a("adc7");const $r=Object(n["withScopeId"])("data-v-770bc616");Object(n["pushScopeId"])("data-v-770bc616");const Ur=Object(n["createVNode"])("thead",null,[Object(n["createVNode"])("tr",null,[Object(n["createVNode"])("th",null,"Drug"),Object(n["createVNode"])("th",null,"Frequency"),Object(n["createVNode"])("th",null,"Dosage"),Object(n["createVNode"])("th",null,"Duration"),Object(n["createVNode"])("th")])],-1);Object(n["popScopeId"])();const qr=$r((function(e,t,a,o,i,r){const s=Object(n["resolveComponent"])("ion-input"),c=Object(n["resolveComponent"])("ion-icon"),l=Object(n["resolveComponent"])("ion-button"),d=Object(n["resolveComponent"])("ion-col"),u=Object(n["resolveComponent"])("ion-row"),p=Object(n["resolveComponent"])("ion-grid");return Object(n["openBlock"])(),Object(n["createBlock"])(p,null,{default:$r(()=>[Object(n["createVNode"])(u,{class:"his-card section drug-section-style"},{default:$r(()=>[Object(n["createVNode"])(d,null,{default:$r(()=>[Object(n["createVNode"])("table",null,[Ur,Object(n["createVNode"])("tbody",null,[(Object(n["openBlock"])(!0),Object(n["createBlock"])(n["Fragment"],null,Object(n["renderList"])(e.drugs,(t,a)=>(Object(n["openBlock"])(),Object(n["createBlock"])("tr",{key:a},[Object(n["createVNode"])("td",null,[Object(n["createVNode"])("b",null,Object(n["toDisplayString"])(t.label),1)]),Object(n["createVNode"])("td",null,[Object(n["createVNode"])(s,{readonly:"",onClick:a=>e.selectFrequency(t),value:t.other.frequency,class:"dosage-input",placeholder:"Add frequency.."},null,8,["onClick","value"])]),Object(n["createVNode"])("td",null,[Object(n["createVNode"])(s,{readonly:"",onClick:a=>e.launchKeyPad(t,"dosage"),value:t.other.dosage,placeholder:"Add dosage..",class:"dosage-input"},null,8,["onClick","value"])]),Object(n["createVNode"])("td",null,[Object(n["createVNode"])(s,{readonly:"",onClick:a=>e.launchKeyPad(t,"duration"),value:t.other.duration,placeholder:"Add duration..",class:"dosage-input"},null,8,["onClick","value"])]),Object(n["createVNode"])("td",null,[Object(n["createVNode"])(l,{onClick:a=>e.removeDrug(t),color:"danger"},{default:$r(()=>[Object(n["createVNode"])(c,{icon:e.trash},null,8,["icon"])]),_:1},8,["onClick"])])]))),128))])])]),_:1})]),_:1})]),_:1})}));var Gr=a("996c"),zr=a("1b47"),Yr=Object(n["defineComponent"])({components:{IonInput:l["v"],IonGrid:l["p"],IonCol:l["m"],IonIcon:l["r"],IonRow:l["H"],IonButton:l["d"]},mixins:[s["a"]],data:()=>({trash:Jn["P"],drugs:[]}),async activated(){this.$emit("onFieldActivated",this);const e=await this.options(this.fdata,this.cdata);this.drugs=e.map(e=>(e.other.frequency=this.getFrequency(e),e.other.dosage=this.getDosage(e),void 0===e.other.duration&&(e.other.duration=""),e))},methods:{getFrequency(e){if(e.other.frequency){const t=Gr["b"].find(t=>t.value===parseInt(e.other.frequency));if(t)return t.label}return""},getDosage(e){return e.other.dosage?e.other.dosage:e.other["dose_strength"]?e.other["dose_strength"]:""},removeDrug(e){this.drugs=this.drugs.filter(t=>t.label!=e.label)},async selectFrequency(e){const t=await l["X"].create({component:zr["a"],backdropDismiss:!1,componentProps:{title:e.label+" Frequency",list:Gr["b"].map(e=>e.label),actionButtons:[{name:"Cancel",color:"danger",slot:"start",role:"default"},{name:"Ok",slot:"end",role:"action"}]}});t.present();const{data:a}=await t.onDidDismiss();"Cancel"!==a.action&&(e.other.frequency=a.selection)},async launchKeyPad(e,t){const a=await l["X"].create({component:Te["a"],backdropDismiss:!1,cssClass:"keypad-modal",componentProps:{title:`${e.label} ${t}`,preset:e.other[t],strictNumbers:!0,onKeyPress(a){e.other[t]=a}}});a.present()}},computed:{},watch:{clear(){this.drugs=this.drugs.map(e=>(e.frequency="",e.duration="",e.dose="",e.units="",e))},drugs:{async handler(){this.$emit("onValue",this.drugs)},immediate:!0,deep:!0}}});a("4e4d"),a("221a");const Wr=h()(Yr,[["render",qr],["__scopeId","data-v-770bc616"]]);var Kr=Wr;function Xr(e,t,a,o,i,r){const s=Object(n["resolveComponent"])("his-text-input"),c=Object(n["resolveComponent"])("ion-chip"),l=Object(n["resolveComponent"])("ion-text"),d=Object(n["resolveComponent"])("ion-label"),u=Object(n["resolveComponent"])("ion-checkbox"),p=Object(n["resolveComponent"])("ion-item"),h=Object(n["resolveComponent"])("ion-list"),b=Object(n["resolveComponent"])("ion-infinite-scroll-content"),m=Object(n["resolveComponent"])("ion-infinite-scroll"),g=Object(n["resolveComponent"])("ion-content"),f=Object(n["resolveComponent"])("view-port"),O=Object(n["resolveComponent"])("his-keyboard");return Object(n["openBlock"])(),Object(n["createBlock"])(n["Fragment"],null,[Object(n["createVNode"])(f,{showFull:!e.showKeyboard},{default:Object(n["withCtx"])(()=>[e.showKeyboard?(Object(n["openBlock"])(),Object(n["createBlock"])(s,{key:0,value:e.selected,onOnValue:e.onKBValue},null,8,["value","onOnValue"])):Object(n["createCommentVNode"])("",!0),(Object(n["openBlock"])(!0),Object(n["createBlock"])(n["Fragment"],null,Object(n["renderList"])(e.checkedItems,(t,a)=>(Object(n["openBlock"])(),Object(n["createBlock"])(c,{color:"danger",key:a,onClick:a=>e.unCheck(t)},{default:Object(n["withCtx"])(()=>[Object(n["createTextVNode"])(Object(n["toDisplayString"])(t.label),1)]),_:2},1032,["onClick"]))),128)),Object(n["createVNode"])(g,{style:{width:"100%"},class:"ion-padding-bottom"},{default:Object(n["withCtx"])(()=>[Object(n["createVNode"])("div",{class:["ion-content-scroll-host",{"ion-margin-bottom ion-padding-bottom":e.disableScroll}]},[Object(n["createVNode"])(h,{class:["view-port-content",{"ion-margin-bottom":e.disableScroll}]},{default:Object(n["withCtx"])(()=>[(Object(n["openBlock"])(!0),Object(n["createBlock"])(n["Fragment"],null,Object(n["renderList"])(e.listData,(t,a)=>(Object(n["openBlock"])(),Object(n["createBlock"])(p,{key:a,color:t.isChecked?"lightblue":"",lines:t.isChecked?"none":""},{default:Object(n["withCtx"])(()=>[Object(n["createVNode"])(d,null,{default:Object(n["withCtx"])(()=>{var e;return[Object(n["createVNode"])(l,{class:"his-md-text"},{default:Object(n["withCtx"])(()=>[Object(n["createTextVNode"])(Object(n["toDisplayString"])(t.label),1)]),_:2},1024),t.description&&t.isChecked?(Object(n["openBlock"])(),Object(n["createBlock"])(l,{key:0,color:null===(e=t.description)||void 0===e?void 0:e.color},{default:Object(n["withCtx"])(()=>[Object(n["createVNode"])("p",null,[Object(n["createVNode"])("i",null,Object(n["toDisplayString"])(t.description.text),1)])]),_:2},1032,["color"])):Object(n["createCommentVNode"])("",!0)]}),_:2},1024),Object(n["createVNode"])(u,{slot:"start",modelValue:t.isChecked,"onUpdate:modelValue":e=>t.isChecked=e,onIonChange:a=>e.onSelect(t,a),disabled:t.disabled},null,8,["modelValue","onUpdate:modelValue","onIonChange","disabled"])]),_:2},1032,["color","lines"]))),128))]),_:1},8,["class"]),Object(n["createVNode"])(m,{onIonInfinite:t[1]||(t[1]=t=>e.pushData(t)),threshold:"100px",disabled:e.disableScroll},{default:Object(n["withCtx"])(()=>[Object(n["createVNode"])(b,{"loading-spinner":"crescent","loading-text":"Loading more data..."})]),_:1},8,["disabled"])],2)]),_:1})]),_:1},8,["showFull"]),e.showKeyboard?(Object(n["openBlock"])(),Object(n["createBlock"])(O,{key:0,kbConfig:e.keyboard,onKeyPress:e.keypress},null,8,["kbConfig","onKeyPress"])):Object(n["createCommentVNode"])("",!0)],64)}var Jr=a("6be2"),Qr=a("db10"),Zr=Object(n["defineComponent"])({name:"HisInfiniteScrollMultipleSelect",mixins:[s["a"]],components:{IonCheckbox:l["k"],IonText:l["M"],IonChip:l["l"],ViewPort:c["a"],HisTextInput:Po["a"],IonContent:l["n"],IonList:l["y"],IonItem:l["w"],IonLabel:l["x"],HisKeyboard:Qr["a"],IonInfiniteScroll:l["t"],IonInfiniteScrollContent:l["u"]},data:()=>({showKeyboard:!1,keyboard:Jr["h"],listData:[],checkedItems:[],disableScroll:!1,filter:"",selected:"",page:1,limit:10}),watch:{clear(){this.checkedItems=[],this.filter="",this.selected=""},checkedItems:{handler(e){this.listData.forEach(t=>{e.find(e=>e.value===t.value)?t.isChecked=!0:t.isChecked=!1}),this.$emit("onValue",e)},deep:!0,immediate:!0},filter:{async handler(){this.page=1,this.disableScroll=!1;const e=await this.getListData();[...this.checkedItems].forEach(t=>{const a=e.findIndex(e=>e.value===t.value);-1===a?e.push(t):e[a].isChecked=!0}),this.listData=e}}},methods:{async getListData(){return await this.options(this.fdata,this.filter,this.page,this.limit)},async keypress(e){this.filter||(this.selected=""),this.filter=Object(N["a"])(e,this.selected),this.selected=this.filter},async onKBValue(e){this.listData&&this.selected!==e&&(this.filter=e,this.selected=this.filter)},async pushData(e){this.page++;const t=await this.getListData();t.length>0?this.listData=[...this.listData,...t.filter(e=>!this.listData.find(t=>t.value===e.value))]:this.disableScroll=!0,e.target.complete()},onSelect(e,t){this.$nextTick(async()=>{e.isChecked?-1===this.checkedItems.findIndex(t=>t.value===e.value)&&this.checkedItems.push(e):this.unCheck(e)})},unCheck(e){this.checkedItems=this.checkedItems.filter(t=>t.value!==e.value)}},created(){var e,t,a,n,o,i,r,s;this.showKeyboard=null!==(e=null===(t=this.config)||void 0===t?void 0:t.showKeyboard)&&void 0!==e&&e,this.keyboard=null!==(a=null===(n=this.config)||void 0===n?void 0:n.keyboard)&&void 0!==a?a:Jr["h"],this.page=null!==(o=null===(i=this.config)||void 0===i?void 0:i.page)&&void 0!==o?o:1,this.limit=null!==(r=null===(s=this.config)||void 0===s?void 0:s.limit)&&void 0!==r?r:10},async activated(){this.$emit("onFieldActivated",this),this.listData=await this.getListData()}});const es=h()(Zr,[["render",Xr]]);var ts,as=es;(function(e){e["TT_MULTI_SELECT_GRID"]="his-multi-select-grid",e["TT_AGE_INPUT"]="his-age-input",e["TT_GROUP_SELECTOR"]="HisGroupSelector",e["TT_DATA_TABLE"]="HisDataTable",e["TT_GRID_SELECTOR"]="HisGridSelector",e["TT_NOTE"]="NoteInput",e["TT_BARCODE"]="BarcodeInput",e["TT_MONTHLY_DAYS"]="monthly-days",e["TT_TEXT"]="text-input",e["TT_NUMBER"]="number-input",e["TT_DATETIME"]="datetime",e["TT_SELECT"]="single-select",e["TT_MULTIPLE_SELECT"]="multiple-select",e["TT_ART_REGIMEN_SELECTION"]="art-regimen-selection",e["TT_NEXT_VISIT_INTERVAL_SELECTION"]="next-visit-interval",e["TT_TABLE_VIEWER"]="table-viewer",e["TT_DOSAGE_INPUT"]="dosage-input",e["TT_YES_NO"]="yes-no",e["TT_MULTIPLE_YES_NO"]="multi-yes-no",e["TT_SUMMARY"]="summary-page",e["TT_WEIGHT_CHART"]="weight-chart",e["TT_VITALS_ENTRY"]="vitals-entry",e["TT_ADHERENCE_INPUT"]="adherence-input",e["TT_ART_STAGING_SUMMARY"]="art-staging-summary",e["TT_LAB_ORDERS"]="lab-orders",e["TT_APPOINTMENTS_ENTRY"]="appointments-entry",e["TT_DISPENSATION_INPUT"]="dispensation-input",e["TT_PROGRAM_SELECTION"]="ProgamSelection",e["TT_APPOINTMENT_PICKER"]="appointment-picker",e["TT_PERSON_RESULT_VIEW"]="PersonSearchView",e["TT_RELATION_SELECTION"]="RelationSelection",e["TT_FILING_NUMBER_VIEW"]="FilingNumberView",e["TT_CARD_SELECTOR"]="SingleSelectCards",e["TT_PERSON_MATCH_VIEW"]="PersonMatchView",e["TT_FULL_DATE"]="date-input",e["TT_BATCH_ENTRY"]="batch-entry",e["TT_BATCH_VERIFICATION"]="batch-verification",e["TT_BATCH_MOVEMENT"]="batch-movement",e["TT_COMPLAINTS_PICKER"]="complaints-picker",e["TT_RADIOLOGY_PICKER"]="radiology-picker",e["TT_IP_ADDRESS"]="IPAddressInput",e["TT_TEXT_BANNER"]="text-banner",e["TT_DRUG_DISPENSER"]="drug-dispenser",e["TT_CLINIC_HOLIDAY_PICKER"]="clinic-holiday-picker",e["TT_ANC_PREGNANCY_INPUT_CONFIG"]="anc-pregnancy-info-config",e["TT_ANC_PREGNANCY_DETAILS_INPUT"]="anc-pregnancy-details-input",e["TT_ANC_LMP_DATE_INPUT"]="anc-lmp-date-input",e["TT_ANC_DRUGSET_INPUT"]="AncDrugSetInput",e["TT_DRUG_TRANSFER_IN"]="drug-transfer-in-qty",e["TT_PRESCRIPTION_INPUT"]="prescription-input",e["TT_INFINITE_SCROLL_MULTIPLE_SELECT"]="infinite-scroll-multiple-select"})(ts||(ts={}));const ns={HisDataTable:Li,TextInput:S["a"],SingleSelect:T["a"],MultipleSelect:x["a"],NumberInput:P["a"],MonthlyDays:A["a"],BarcodeInput:f["a"],ArtRegimenSelection:W,NextVisitInterval:de,TableViewer:fe,DosageInput:Se,YesNo:Pe["a"],SummaryPage:ta,MultiYesNo:Ae["a"],WeightChart:Ge,VitalsEntry:dt,AdherenceInput:_a,ArtStagingSummary:ua,LabOrders:Ia,AppointmentsEntry:It,DispensationInput:dn,ProgamSelection:jn,AppointmentPicker:Vn,PersonSearchView:Pn,RelationSelection:eo,FilingNumberView:co,SingleSelectCards:I["a"],PersonMatchView:yo,DateInput:wo["a"],BatchEntry:Bo,BatchVerification:zo,BatchMovement:Qo,ComplaintsPicker:Rt,IPAddressInput:Zo["a"],TextBanner:ri,DrugDispenser:Si,ClinicHolidayPicker:qt,NoteInput:k,HisGroupSelector:Gi,AncPregnancyInfoConfig:tr,AncPregnancyDetailsInput:cr,HisAgeInput:g["a"],HisMultiSelectGrid:m,AncLmpDateInput:mr,DrugTransferInQty:Cr,HisGridSelector:Ir,AncDrugSetInput:Mr,RadiologyPicker:Hr["a"],PrescriptionInput:Kr,InfiniteScrollMultipleSelect:as}},d9bd:function(e,t,a){"use strict";a("a7b1")},d9d9:function(e,t,a){},da4d:function(e,t,a){},da71:function(e,t,a){},db10:function(e,t,a){"use strict";var n=a("7a23");const o={class:"his-floating-keyboard"},i={class:"his-floating-keyboard-content"};function r(e,t,a,r,s,c){const l=Object(n["resolveComponent"])("base-keyboard");return Object(n["openBlock"])(),Object(n["createBlock"])("div",o,[Object(n["createVNode"])("div",i,[(Object(n["openBlock"])(!0),Object(n["createBlock"])(n["Fragment"],null,Object(n["renderList"])(e.activeLayout,(t,a)=>(Object(n["openBlock"])(),Object(n["createBlock"])("div",{key:a},[Object(n["createVNode"])(l,{layout:t,onKeyPress:e.keypress},null,8,["layout","onKeyPress"])]))),128))])])}var s=a("6be2"),c=a("c924"),l=Object(n["defineComponent"])({components:{BaseKeyboard:c["a"]},props:{initalKeyboardName:{type:String},kbConfig:{type:Array,required:!0},onKeyPress:{type:Function,required:!0}},data:()=>({activeLayout:{}}),watch:{initalKeyboardName:{handler(e){e&&this.$nextTick(()=>this.switchKeyboard(e))},immediate:!0},kbConfig:{handler(e){e&&(this.activeLayout=e)},deep:!0,immediate:!0}},methods:{keypress(e){this.isFunctionKey(e)||this.onKeyPress(e)},isFunctionKey(e){return!!this.switchKeyboard(e)},switchKeyboard(e){const t=s["a"].map(e=>e.btn).indexOf(e);return t>=0&&(this.activeLayout=s["a"][t].keyboard,!0)}}}),d=a("6b0d"),u=a.n(d);const p=u()(l,[["render",r]]);t["a"]=p},dd35:function(e,t,a){"use strict";a("3063")},dd65:function(e,t,a){"use strict";var n=a("7a23");const o=Object(n["withScopeId"])("data-v-a66750c2");Object(n["pushScopeId"])("data-v-a66750c2");const i={class:"his-card"};Object(n["popScopeId"])();const r=o((function(e,t,a,o,r,s){const c=Object(n["resolveComponent"])("barcode-input");return Object(n["openBlock"])(),Object(n["createBlock"])("div",i,[Object(n["createVNode"])(c,{onOnScan:e.onScan},null,8,["onOnScan"])])}));var s=a("51c8"),c=a("efaf"),l=Object(n["defineComponent"])({mixins:[s["a"]],components:{BarcodeInput:c["a"]},methods:{async onScan(e){if(this.onValue){const t=await this.onValue(e);if(!t)return}this.$emit("onValue",e)}}}),d=(a("a16a"),a("6b0d")),u=a.n(d);const p=u()(l,[["render",r],["__scopeId","data-v-a66750c2"]]);t["a"]=p},ddb2:function(e,t,a){"use strict";a("79af")},ddd4:function(e,t,a){"use strict";a("9b7cc")},de49:function(e,t,a){"use strict";a("ee38")},ded6:function(e,t,a){"use strict";var n=a("7a23");const o=Object(n["withScopeId"])("data-v-65e1cf74"),i=o((function(e,t,a,i,r,s){const c=Object(n["resolveComponent"])("ion-skeleton-text"),l=Object(n["resolveComponent"])("ion-item"),d=Object(n["resolveComponent"])("ion-list");return Object(n["openBlock"])(),Object(n["createBlock"])(d,null,{default:o(()=>[(Object(n["openBlock"])(!0),Object(n["createBlock"])(n["Fragment"],null,Object(n["renderList"])(e.items,(e,t)=>(Object(n["openBlock"])(),Object(n["createBlock"])(l,{key:t},{default:o(()=>[Object(n["createVNode"])(c,{animated:"",style:{width:"100%"}})]),_:2},1024))),128))]),_:1})}));var r=a("8a30"),s=Object(n["defineComponent"])({components:{IonSkeletonText:r["K"],IonList:r["y"],IonItem:r["w"]},props:{itemCount:{type:Number,default:10}},setup(e){const t=[];for(let a=0;a<e.itemCount;++a)t.push(a);return{items:t}}}),c=(a("95a0"),a("6b0d")),l=a.n(c);const d=l()(s,[["render",i],["__scopeId","data-v-65e1cf74"]]);t["a"]=d},df95:function(e,t,a){"use strict";a.d(t,"a",(function(){return n})),a.d(t,"b",(function(){return i}));var n,o=a("5969");(function(e){e["DobMoreThanEnrolledDate"]="DOB MORE THAN DATE ENROLLED",e["ClientsWithEncountersAfterDeath"]="CLIENTS WITH ENCOUNTERS AFTER DECLARED DEAD",e["DobMoreThanDateEnrolled"]="DOB MORE THAN DATE ENROLLED",e["DateEnrolledLessThanEarliestStartDate"]="DATE ENROLLED LESS THAN EARLIEST START DATE",e["MalesWithFemaleObs"]="MALE CLIENTS WITH FEMALE OBS",e["PrescriptionWithoutDispensation"]="PRESCRIPTION WITHOUT DISPENSATION",e["MissingDemographics"]="MISSING DEMOGRAPHICS",e["MissingStartReasons"]="MISSING START REASONS",e["MultipleStartReasons"]="MULTIPLE START REASONS",e["PreArtOrUnknownOutcomes"]="PRE ART OR UNKNOWN OUTCOMES"})(n||(n={}));class i extends o["a"]{constructor(){super()}saveDataCleaningVerification(e){return o["a"].postJson("data_cleaning_confirmation",e)}getCleaningToolReport(e){return this.getReport("art_data_cleaning_tools",{report_name:e})}getEnrolledOnArtBeforeBirth(){return o["a"].getJson("enrolled_on_art_before_birth")}getIncompleteVisits(){return this.getReport("incomplete_visits",{tool_name:"INCOMPLETE VISITS"})}}},e109:function(e,t,a){"use strict";a("2be2")},e1cf:function(e,t,a){var n={"./ion-icon.entry.js":["ec64","chunk-2d2304d2"]};function o(e){if(!a.o(n,e))return Promise.resolve().then((function(){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}));var t=n[e],o=t[0];return a.e(t[1]).then((function(){return a(o)}))}o.keys=function(){return Object.keys(n)},o.id="e1cf",e.exports=o},e2d9:function(e,t,a){"use strict";a("18aa")},e2ee:function(e,t,a){"use strict";a("48de")},e3be:function(e,t,a){"use strict";a("c336")},e63c:function(e,t,a){"use strict";a("c419")},e6e9:function(e,t,a){"use strict";var n=a("7a23");const o=Object(n["createTextVNode"])(" Close "),i=Object(n["createTextVNode"])(" Clear "),r=Object(n["createTextVNode"])(" Done ");function s(e,t,a,s,c,l){const d=Object(n["resolveComponent"])("ion-title"),u=Object(n["resolveComponent"])("ion-toolbar"),p=Object(n["resolveComponent"])("ion-header"),h=Object(n["resolveComponent"])("ion-content"),b=Object(n["resolveComponent"])("ion-button"),m=Object(n["resolveComponent"])("ion-footer"),g=Object(n["resolveComponent"])("ion-page");return Object(n["openBlock"])(),Object(n["createBlock"])(g,null,{default:Object(n["withCtx"])(()=>[Object(n["createVNode"])(p,null,{default:Object(n["withCtx"])(()=>[Object(n["createVNode"])(u,null,{default:Object(n["withCtx"])(()=>[Object(n["createVNode"])(d,{class:"his-lg-text ion-text-center"},{default:Object(n["withCtx"])(()=>[Object(n["createTextVNode"])(Object(n["toDisplayString"])(e.currentField.helpText),1)]),_:1})]),_:1})]),_:1}),Object(n["createVNode"])(h,null,{default:Object(n["withCtx"])(()=>[(Object(n["openBlock"])(),Object(n["createBlock"])(n["KeepAlive"],null,[(Object(n["openBlock"])(),Object(n["createBlock"])(Object(n["resolveDynamicComponent"])(e.currentField.type),{key:e.currentField.id,currentFieldig:e.currentField.currentFieldig,options:e.currentField.options,preset:e.currentField.preset,clear:e.valueClearIndex,fdata:e.formData,config:e.currentField.config,cdata:e.computedFormData,activationState:e.state,onValue:e.currentField.onValue,defaultValue:e.currentField.defaultValue,onValueUpdate:e.currentField.onValueUpdate,onOnValue:e.onFieldValue},null,8,["currentFieldig","options","preset","clear","fdata","config","cdata","activationState","onValue","defaultValue","onValueUpdate","onOnValue"]))],1024))]),_:1}),Object(n["createVNode"])(m,null,{default:Object(n["withCtx"])(()=>[Object(n["createVNode"])(u,{color:"light"},{default:Object(n["withCtx"])(()=>[Object(n["createVNode"])(b,{disabled:e.disableBtn,onClick:e.onClose,slot:"start",color:"danger",size:"large"},{default:Object(n["withCtx"])(()=>[o]),_:1},8,["disabled","onClick"]),Object(n["createVNode"])(b,{disabled:e.disableBtn,onClick:e.onClear,slot:"end",color:"warning",size:"large"},{default:Object(n["withCtx"])(()=>[i]),_:1},8,["disabled","onClick"]),Object(n["createVNode"])(b,{disabled:e.disableBtn,onClick:e.onDone,slot:"end",color:"success",size:"large"},{default:Object(n["withCtx"])(()=>[r]),_:1},8,["disabled","onClick"])]),_:1})]),_:1})]),_:1})}var c=a("b5e4"),l=a("8a30"),d=a("dd65"),u=a("d11f"),p=a("0734"),h=a("2fd5"),b=a("6ef9"),m=a("5e75"),g=a("69cf"),f=a("71f2"),O=a("5fd1"),j=a("2a82"),_=a("374c"),v=a("c05f"),y=Object(n["defineComponent"])({name:"SingleFieldTouchForm",components:{IonPage:l["D"],IonContent:l["n"],IonFooter:l["o"],IonToolbar:l["Q"],IonButton:l["d"],IonHeader:l["q"],IonTitle:l["P"],TextInput:b["a"],SingleSelect:u["a"],MultipleSelect:h["a"],NumberInput:m["a"],MonthlyDays:g["a"],BarcodeInput:d["a"],YesNo:f["a"],MultiYesNo:O["a"],SingleSelectCards:p["a"],DateInput:_["a"],IPAddressInput:j["a"],HisAgeInput:v["a"]},props:{dismissType:{type:String},onFinish:{type:Function,required:!0},currentField:{type:Object,required:!0}},data:()=>({valueClearIndex:0,formData:{},computedFormData:{},state:"",value:null,disableBtn:!1}),methods:{onClose(){"modal"===this.dismissType?l["X"].dismiss():this.$router.back()},onClear(){this.valueClearIndex+=1,this.value=null},onFieldValue(e){this.value=e},onDone(){if(this.disableBtn=!0,this.currentField.validation){const e=this.currentField.validation(this.value);if(this.disableBtn=!1,e)return Object(c["e"])(e.join(", "),6e4)}try{this.onFinish(this.value)}catch(e){Object(c["c"])(e),console.error(e)}this.onClose(),this.disableBtn=!1}}}),w=a("6b0d"),N=a.n(w);const C=N()(y,[["render",s]]);t["a"]=C},e86e:function(e,t,a){"use strict";a.d(t,"b",(function(){return i})),a.d(t,"c",(function(){return r})),a.d(t,"e",(function(){return s})),a.d(t,"d",(function(){return c})),a.d(t,"a",(function(){return l})),a.d(t,"f",(function(){return d})),a.d(t,"g",(function(){return u}));var n=a("5713"),o=a("2ef0");async function i(e=""){const t=await n["a"].getFacilities({name:e});return t.filter(e=>!Object(o["isEmpty"])(e)).map(e=>({label:e.name,value:e.location_id,other:e}))}async function r(e=""){const t=await n["a"].getFacilities({name:e,tag:"Facility adult sections"});return t.map(e=>({label:e.name,value:e.name,other:e}))}async function s(){const e=await n["a"].getSpecialistClinics();return e.map(e=>({label:e.name,value:e.name,other:e}))}async function c(){const e=await n["a"].getRegions();return e.map(e=>({label:e.name,value:e.region_id,other:e}))}async function l(e){const t=await n["a"].getDistricts(e);return t.map(e=>({label:e.name,value:e.district_id,other:e}))}async function d(e,t=""){const a=await n["a"].getTraditionalAuthorities(e,t);return a.map(e=>({label:e.name,value:e.traditional_authority_id,other:e}))}async function u(e,t=""){const a=await n["a"].getVillages(e,t);return a.map(e=>({label:e.name,value:e.village_id,other:e}))}},e897:function(e,t,a){"use strict";a("79fe")},e96c:function(e,t,a){"use strict";a("113a")},e9fc:function(e,t,a){"use strict";a("50e0")},ea3a:function(e,t,a){"use strict";a("b85a")},ebcb:function(e,t,a){"use strict";a("7b3a")},ec2a:function(e,t,a){"use strict";a.d(t,"a",(function(){return o}));var n=a("1c74");class o extends n["e"]{constructor(){super()}static create(e){const t={...e};return"program_id"in t||Object.assign(t,{program_id:this.getProgramID()}),"encounter_datetime"in t||Object.assign(t,{encounter_datetime:this.getSessionDate()}),n["e"].postJson("/encounters",t)}static voidEncounter(e,t="Unknown"){return super.void("/encounters/"+e,{reason:t})}static getSavedEncounters(e,t=super.getProgramID()){return super.getJson(`programs/${t}/patients/${e}/saved_encounters`)}static getEncounters(e,t={}){return super.getJson("/encounters",{program_id:super.getProgramID(),patient_id:e,paginate:!1,...t})}}},ec58:function(e,t,a){},ecea:function(e,t,a){},ee38:function(e,t,a){},eed0:function(e,t,a){"use strict";a("ec58")},efaf:function(e,t,a){"use strict";var n=a("7a23");const o=Object(n["withScopeId"])("data-v-cc9bc756");Object(n["pushScopeId"])("data-v-cc9bc756");const i=Object(n["createVNode"])("img",{id:"barcode-img",src:"/assets/images/barcode.svg"},null,-1);Object(n["popScopeId"])();const r=o((function(e,t,a,r,s,c){const l=Object(n["resolveComponent"])("ion-col"),d=Object(n["resolveComponent"])("ion-row");return Object(n["openBlock"])(),Object(n["createBlock"])(d,null,{default:o(()=>[Object(n["createVNode"])(l,{size:"2"},{default:o(()=>[i]),_:1}),Object(n["createVNode"])(l,{size:"10"},{default:o(()=>[Object(n["withDirectives"])(Object(n["createVNode"])("input",{readonly:e.useVirtualInput,ref:"barcode",id:"barcode-inputbox","onUpdate:modelValue":t[1]||(t[1]=t=>e.barcodeText=t)},null,8,["readonly"]),[[n["vModelText"],e.barcodeText]])]),_:1})]),_:1})}));var s=a("8a30"),c=a("2345"),l=a("2ed9"),d=Object(n["defineComponent"])({name:"BarcodeInput",components:{IonRow:s["H"],IonCol:s["m"]},props:["clearValue","virtualText"],setup(){const e=Object(n["ref"])(null),{useVirtualInput:t,platformType:a}=Object(l["a"])();return"desktop"===a.value&&setInterval(()=>{try{e.value.focus()}catch(t){}},1500),{barcode:e,useVirtualInput:t}},data:()=>({barcodeText:""}),methods:{checkForbarcode(){if(null!=this.barcodeText.match(/.+\$$/i)){const e=this.barcodeText.replace(/\$/gi,"");this.$emit("onScan",e),this.barcodeText=""}}},watch:{clearValue(){this.barcodeText=""},virtualText(e){this.barcodeText=Object(c["a"])(e,this.barcodeText)},barcodeText:function(e){e&&(this.checkForbarcode(),this.$emit("onValue",e))}}}),u=(a("e3be"),a("6b0d")),p=a.n(u);const h=p()(d,[["render",r],["__scopeId","data-v-cc9bc756"]]);t["a"]=h},f01e:function(e,t,a){"use strict";a.d(t,"a",(function(){return n})),a.d(t,"b",(function(){return i}));var n,o=a("fa94");(function(e){e["MALES_WITH_ANC_ENCOUNTERS"]="MALES WITH ANC ENCOUNTERS",e["ENCOUNTERS_AFTER_DEATH"]="ENCOUNTERS AFTER DEATH",e["INCOMPLETE_VISITS"]="INCOMPLETE VISITS",e["DUPLICATE_ENCOUNTERS"]="DUPLICATE ENCOUNTERS",e["MISSING_HIV_STATUS"]="NO HIV STATUS"})(n||(n={}));class i extends o["a"]{constructor(){super()}getDataToolReport(e){return o["a"].getJson("anc_data_cleaning_tools",this.buildRequestParams({report_name:e}))}}},f059:function(e,t,a){"use strict";a("3437")},f085:function(e,t,a){},f099:function(e,t,a){"use strict";a("3aa1")},f145:function(e,t,a){"use strict";a("7ac4")},f226:function(e,t,a){"use strict";a("318c")},f329:function(e,t,a){},f379:function(e,t,a){"use strict";a("9877")},f768:function(e,t,a){"use strict";var n=a("d1ca"),o=a("7a23");function i(e,t,a,n,i,r){const s=Object(o["resolveComponent"])("his-standard-form");return Object(o["openBlock"])(),Object(o["createBlock"])(s,{skipSummary:!0,onOnIndex:t[1]||(t[1]=t=>e.fieldComponent=""),activeField:e.fieldComponent,cancelDestinationPath:e.cancelDestination,fields:e.fields,onFinishAction:e.onSubmit},null,8,["activeField","cancelDestinationPath","fields","onFinishAction"])}var r=a("d95e"),s=a("2706"),c=(a("caad"),a("71c3")),l=a("9283"),d=a("1c74");class u extends d["e"]{constructor(){super()}static getAllArvRegimens(){return this.getJson(`programs/${this.getProgramID()}/all_arv_regimens`)}static getRegimens(e){return this.getJson(`programs/${this.getProgramID()}/regimens`,{patient_id:e})}static getCustomIngridients(){return this.getJson(`programs/${this.getProgramID()}/custom_regimen_ingredients`)}static getCurrentRegimen(e,t=this.getSessionDate()){return this.getJson(`programs/${this.getProgramID()}/${e}`,{date:t})}}var p,h=a("2ef0"),b=a("cc6f");(function(e){e["CONTRAINDICATION"]="contraindication",e["SIDE_EFFECT"]="side_effect"})(p||(p={}));class m extends b["a"]{constructor(e,t){super(e,25,t),this.nextVisitInterval=0,this.fastTrack=!1,this.regimenExtras=[],this.fastTrackMedications=[],this.hangingPills=[],this.medicationOrders=[],this.treatmentState="",this.contraindications={},this.sideEffects={},this.tptPrescriptionCount=0,this.lastSideEffectDate=""}setNextVisitInterval(e){this.nextVisitInterval=e}getHangingPills(){return this.hangingPills}getMedicationOrders(){return this.medicationOrders.map(e=>b["a"].getCachedConceptName(e))}getTptPrescriptionCount(){return this.tptPrescriptionCount}getLastSideEffectDate(){return this.lastSideEffectDate}getContraindications(){return this.contraindications}getSideEffects(){return this.sideEffects}getRegimenExtras(){return this.regimenExtras}getPatientRegimens(){return u.getRegimens(this.patientID)}getCustomIngridients(){return u.getCustomIngridients()}getFastTrackMedications(){return this.fastTrackMedications}getTreatmentState(){return this.treatmentState}isFastTrack(){return this.fastTrack}medicationOrdersAvailable(){return!Object(h["isEmpty"])(this.medicationOrders)}shouldPrescribeArvs(){const e=b["a"].getCachedConceptID("Antiretroviral drugs");return this.medicationOrders.includes(e)}shouldPrescribeExtras(){const e=b["a"].getConceptsByCategory("art_extra_medication_order"),t=e.map(e=>this.medicationOrders.includes(e.concept_id));return t.some(Boolean)}getRegimenStarterpack(e,t){const a={weight:t,regimen:e};return b["a"].getJson(`programs/${b["a"].getProgramID()}/regimen_starter_packs`,a)}async getLvpDrugsByType(e,t){return b["a"].getJson(`programs/${b["a"].getProgramID()}/regimens/${t}`,{patient_id:this.patientID,lpv_drug_type:e})}async loadContraindications(){const e=await b["a"].getConceptID("Contraindications"),t=await b["a"].getObs({concept_id:e,person_id:this.patientID});t.forEach(e=>{const t=l["b"].toStandardHisFormat(e.obs_datetime);this.contraindications[t]||(this.contraindications[t]=[]);const a=b["a"].getCachedConceptName(e.value_coded);this.contraindications[t].push(a)})}async loadDrugInduced(){const e=await b["a"].getConceptID("Drug induced"),t=await b["a"].getObs({concept_id:e,person_id:this.patientID});t&&t.forEach(e=>{const t=l["b"].toStandardHisFormat(e.obs_datetime);if(this.lastSideEffectDate||(this.lastSideEffectDate=t),!e.value_drug||!e.value_coded)return;this.sideEffects[t]||(this.sideEffects[t]={}),this.sideEffects[t][e.value_drug]||(this.sideEffects[t][e.value_drug]=[]);const a=b["a"].getCachedConceptName(e.value_coded);this.sideEffects[t][e.value_drug].push(a)})}async loadTptPrescriptionCount(){const e=await b["a"].getJson("tpt_prescription_count",{patient_id:this.patientID,date:this.date});if(e){const t=e.count+1;this.tptPrescriptionCount=t>3?3:t}}async loadFastTrackStatus(){const e=await b["a"].getFirstValueCoded(this.patientID,"Fast track"),t=await b["a"].getConceptID("yes");e&&(this.fastTrack=e===t)}async loadRegimenExtras(e=this.date){const t=await u.getJson(`programs/${u.getProgramID()}/patients/${this.patientID}/dosages`,{date:e});t&&(this.regimenExtras=Object.values(t))}async loadMedicationOrders(){const e=await b["a"].getConceptID("Medication orders"),t=await b["a"].getObs({concept_id:e,date:this.date,person_id:this.patientID,page_size:5});this.medicationOrders=t.map(e=>e.value_coded)}async loadHangingPills(){const e=await b["a"].getAll(this.patientID,"Pills brought");e&&(this.hangingPills=e.filter(e=>e.value_numeric>=1&&e.order).map(e=>e.order.drug_order.drug_inventory_id))}async loadFastTrackMedications(){const e=await c["a"].getLastDrugsReceived(this.patientID),t=e.map(async e=>{const{drug:t}=e,a=await c["a"].getDrugDosages(this.patientID,t.drug_id);return{drug_id:t.drug_id,drug_name:t.name,units:t.units,am:a.am,noon:a.noon,pm:a.pm,frequency:e.frequency}});this.fastTrackMedications=await Promise.all(t)}async loadTreatmentState(){const e={date:this.date},t=await b["a"].getJson(`programs/${b["a"].getProgramID()}/patients/${this.patientID}/status`,e);t&&(this.treatmentState=t["status"])}findAndGroupDrugSideEffects(e){const t={};for(const a in this.sideEffects){const n=this.sideEffects[a];for(const o in n)e.includes(parseInt(o))&&(t[a]||(t[a]=[]),t[a]=[...t[a],...n[o]])}return t}calculatePillsPerDay(e,t,a){return parseFloat(e.toString())+t+a}estimatePackSize(e,t=0){const a=e*this.nextVisitInterval/t;let n=Math.round(a);return n<=0&&(n+=1),n}calculateDosage(e,t){let a=0;return 0===t&&(a=e),0==e&&(a=t),e>0&&t>0&&(a=(e+t)/2),a}calculateEquivalentDosage(e,t){return e+t}calculateDateFromInterval(){const e=new Date(this.date);return e.setDate(e.getDate()+this.nextVisitInterval),l["b"].toStandardHisFormat(e)}getDrugPackSize(e){if(e.pack_size)return e.pack_size;try{return e.barcodes[0].tabs}catch(t){return 30}}getInstructions(e,t,a,n){return`${e} :- Morning: ${t} ${n}, Evening: ${a} ${n}`}toOrderObj(e,t,a,n=0,o=0,i=""){return{drug_inventory_id:e,equivalent_daily_dose:this.calculateEquivalentDosage(n,o),start_date:this.date,auto_expire_date:this.calculateDateFromInterval(),units:a,instructions:this.getInstructions(t,n,o,a),dose:this.calculateDosage(n,o),frequency:i}}async getReasonForRegimenSwitch(){const e=await b["a"].getFirstValueText(this.patientID,"Reason for ARV switch");return e||"N/A"}async createDrugOrder(e){return c["a"].create({encounter_id:this.encounterID,drug_orders:e})}async createHangingPillsObs(e){return this.saveValueTextObs("appointment type",e)}async createRegimenSwitchObs(e){return this.saveValueTextObs("Reason for ARV switch",e)}}var g,f,O,j=a("b5e4"),_=a("c21d"),v=a("7365"),y=a("7f35");(function(e){e["ARV_REGIMENS"]="arv_regimens",e["INTERVAL_SELECTION"]="next_visit_interval"})(g||(g={})),function(e){e["EXIT"]="exit",e["CONTINUE"]="continue"}(f||(f={})),function(e){e["ON_VALUE"]="onValue",e["ON_BUILD"]="onBuild",e["BEFORE_NEXT"]="beforeNext"}(O||(O={}));const w={"Do not prescribe LPV regimens together with 3HP":{priority:1,actions:{alert:async({regimenName:e})=>(await Object(y["a"])("3HP - LPV/r conflict",e,"Regimens containing LPV/r <b>cannot</b> be prescribed together with 3HP",[{name:"Close",slot:"end",color:"danger"}],"his-danger-color"),f.EXIT)},target:g.ARV_REGIMENS,targetEvent:O.ON_VALUE,conditions:{regimenCode(e){return[7,8,9,10,11,12].includes(e)},medicationOrders(e){return e.filter(e=>!!(""+e).match(/3hp/i)).length>=1}}},"Check for any adverse effects or contraindications associated with the regimen":{priority:1,actions:{alert:async({regimenCodeStr:e,sideEffectsTable:t})=>{const{columns:a,rows:n}=t,o=await Object(y["d"])("Contraindications / Side effects for "+e,"",a,n,[{name:"Select other regimen",slot:"start"},{name:"Keep selected regimen",slot:"end",color:"danger"}],"his-danger-color");return"Select other regimen"===o?f.EXIT:f.CONTINUE}},target:g.ARV_REGIMENS,targetEvent:O.BEFORE_NEXT,conditions:{hasSideEffects(e){return e},lastSideEffectDate(e,{currentDate:t}){return e>=t}}},"Recommend 2nd line regimen to children under 3":{priority:1,actions:{alert:async()=>{const e=await Object(y["b"])("Recommendation","",["Children under 3 years often have a high viral load and may be infected with drug-resistant HIV from previous exposure to ARVs (mother's ART and/or infant nevirapine prophylaxis)","Therefore, children under <b>3 years</b> respond better when <b>started immediately on 2nd line regimen</b> (Regimen <b>11</b>)"],[{name:"Select another regimen",slot:"start"},{name:"Keep selected regimen",slot:"end",color:"danger"}],"his-warning-color");return"Select another regimen"===e?f.EXIT:f.CONTINUE}},target:g.ARV_REGIMENS,targetEvent:O.BEFORE_NEXT,conditions:{age(e){return e<3},regimenCode(e){return 11!=e}}},"Provide a reason for switching regimens when patient already has one":{priority:1,actions:{alert:async e=>{const t=await Object(y["c"])(`Are you sure you want to replace ${e.currentRegimenStr}?`,"Specify reason for switching regimen",["Policy change","Ease of administration (pill burden, swallowing)","Drug drug interaction","Pregnancy intention","Side effects","Treatment failure","Weight Change","Other"],[{name:"Cancel",slot:"start",color:"danger"},{name:"Continue",slot:"end",role:"action"}]);return t.selection&&"Cancel"!=t.action?(e.reasonForSwitch=t.selection,f.CONTINUE):f.EXIT}},target:g.ARV_REGIMENS,targetEvent:O.ON_VALUE,conditions:{regimenCode(e,{currentRegimenCode:t}){return-1!=t&&e!=t}}},"Provide 14 day starter pack for LPV regimens for children under 3 years old":{priority:3,actions:{alert:async e=>{const t=await Object(y["a"])("Starter pack needed for 14 days",""+e.treatmentInitiationState,""+e.regimenName,[{name:"Cancel",slot:"start",color:"danger"},{name:"Prescribe starter pack",slot:"end"}],"his-info-color");return"Prescribe starter pack"===t?(e.starterPackNeeded=!0,f.CONTINUE):f.EXIT}},target:g.ARV_REGIMENS,targetEvent:O.BEFORE_NEXT,conditions:{age(e){return e<3},regimenCode(e){return 11===e},treatmentInitiationState(e){return["Initiation","Re-initiation"].includes(e)}}},"Provide 14 day starter pack for NVP based regimens on newly initiated/re-initiation patients":{priority:3,actions:{alert:async e=>{const t=await Object(y["a"])("Starter pack needed for 14 days",""+e.treatmentInitiationState,""+e.regimenName,[{name:"Cancel",slot:"start",color:"danger"},{name:"Prescribe starter pack",slot:"end"}],"his-info-color");return"Prescribe starter pack"===t?(e.starterPackNeeded=!0,f.CONTINUE):f.EXIT}},target:g.ARV_REGIMENS,targetEvent:O.BEFORE_NEXT,conditions:{regimenCode(e){return[0,2,6].includes(e)},treatmentInitiationState(e){return["Initiation","Re-initiation"].includes(e)}}},"Ask to reuse hanging pills if any":{priority:5,actions:{alert:async e=>{const t=await Object(y["a"])("Hanging pills recommendation","Add hanging pills?","",[{name:"No",slot:"start",color:"warning"},{name:"Yes",slot:"end"}],"his-info-color");return e.hangingPillsStatus="Yes"===t?"Optimize - including hanging pills":"Exact - excluding hanging pills",f.CONTINUE}},target:g.INTERVAL_SELECTION,targetEvent:O.BEFORE_NEXT,conditions:{drugs(e,{hangingPills:t}){const a=e.map(e=>t.includes(e));return a.some(Boolean)}}},"Provide warning of use of DTG regimen to women of reproductive age":{priority:2,actions:{alert:async({regimenName:e})=>{const t=await Object(y["a"])("Use of DTG or EFV in women of reproductive age",e,["There is currently <u>no confirmation</u>","that <b>DTG</b> is safe in <u>very early pregnancy</u>","DTG-based regimens are therefore not used as standard 1st line regimens for","<u>girls and women</u> who may get pregnancy"].join(" "),[{name:"Select another regimen",slot:"start"},{name:"Continue with regimen",slot:"end",color:"danger"}],"his-danger-color");return"Select another regimen"===t?f.EXIT:f.CONTINUE}},target:g.ARV_REGIMENS,targetEvent:O.BEFORE_NEXT,conditions:{regimenCode(e){return e>=12},isChildBearing(e){return e}}},"Provide pallet options for LPV regimens for patient's whose weight is between 3 and 25 kgs":{priority:6,actions:{alert:async e=>{const t=await Object(y["a"])("Pellets (cups) / Tabs","","Prescribe LPV/r in <b>Pellets (cups)</b> or <b>Tablets</b>?",[{name:"Granules",slot:"start"},{name:"Pellets",slot:"end"},{name:"Tabs",slot:"end"}],"his-info-color");return e.lpvType=t.toLowerCase(),f.CONTINUE}},target:g.ARV_REGIMENS,targetEvent:O.BEFORE_NEXT,conditions:{weight(e){return e>=3&&e<=25},regimenCode(e){return 11===e||9===e}}},"Provide 14 day interval for NVP or LVP Regimen starter pack":{priority:1,data:{enabled:!1},target:g.INTERVAL_SELECTION,targetEvent:O.ON_BUILD,conditions:{prescriptionType(e){return"Regimen"===e},selectedInterval(e){return e>14},starterPackNeeded(e){return e},regimenCode(e){return[0,2,6,11].includes(e)}}},"Provide intervals upto 1 month, 2nd up to 2 months, and 3rd up to 6 months for Patients receiving TPT":{priority:2,data:{enabled:!1},target:g.INTERVAL_SELECTION,targetEvent:O.ON_BUILD,conditions:{prescriptionType(e){return"Regimen"===e},medicationOrders(e){return e.map(e=>!!(""+e).match(/3hp/i)).some(Boolean)},tptPrescriptionCount(e,{selectedInterval:t}){return Math.round(t/30)>e}}}},N={"Rifapentine or isoniazid should be taken weekly":{concept:"Weekly (QW)",priority:1,conditions:{drug(e){return(""+e).match(/Rifapentine|Isoniazid/i)}}},"Use daily frequency for any other drugs":{concept:"Daily (QOD)",priority:2,conditions:{drug(e){return!(""+e).match(/Rifapentine|Isoniazid/i)}}}};var C=a("32b3"),V=a("ad60"),D=a("9ceb");const k={style:{fontSize:"1.3rem !important",borderBottom:"solid 2px #ccc",color:"black",background:"white"}};var T=Object(o["defineComponent"])({mixins:[v["a"]],data:()=>({drugs:[],prescription:{},patientToolbar:[],fieldComponent:"",regimenExtras:[],programInfo:[],facts:{age:-1,gender:"",weight:-1,currentDate:"",isChildBearing:!1,prescriptionType:"",tptPrescriptionCount:0,currentRegimenCode:-1,currentRegimenStr:"",drug:"",drugs:[],contraindications:{},hasSideEffects:!1,sideEffectsTable:{},lastSideEffectDate:"",regimenCode:-1,regimenCodeStr:"",regimenName:"",regimenDrugs:[],hangingPills:[],reasonForSwitch:"",starterPackNeeded:!1,hangingPillsStatus:"",treatmentInitiationState:"",lpvType:"",medicationOrders:[],selectedInterval:0}}),watch:{ready:{async handler(e){if(!e)return;if(this.prescription=new m(this.patientID,this.providerID),await this.prescription.loadMedicationOrders(),await this.prescription.loadFastTrackStatus(),!this.prescription.medicationOrdersAvailable()&&!this.prescription.isFastTrack())return Object(j["e"])("Patient is not eligible for treatment Today! Please check HIV Clinic Consultation"),this.gotoPatientDashboard();await this.prescription.loadHangingPills(),await this.prescription.loadRegimenExtras(),await this.prescription.loadTreatmentState(),await this.prescription.loadDrugInduced(),await this.prescription.loadContraindications(),await this.prescription.loadTptPrescriptionCount(),await this.initFacts(this.patient),this.prescription.shouldPrescribeExtras()&&(this.regimenExtras=this.prescription.getRegimenExtras());const t=this.resolveHtnDrugs();Object(h["isEmpty"])(t)||(this.regimenExtras=[...this.regimenExtras,...t]),this.prescription.isFastTrack()?(await this.prescription.loadFastTrackMedications(),this.drugs=this.prescription.getFastTrackMedications(),this.fieldComponent="next_visit_interval"):this.prescription.shouldPrescribeArvs()||Object(h["isEmpty"])(this.regimenExtras)||(this.drugs=this.regimenExtras),this.patientToolbar=await this.getPatientToolBar(),this.fields=this.getFields()},immediate:!0},drugs:{handler(e){this.facts.drugs=e.map(e=>e.drug_id)},immediate:!0,deep:!0}},methods:{async initFacts(e){this.programInfo=await V["a"].getProgramInformation(e.getID()),this.facts.age=e.getAge(),this.facts.gender=e.getGender(),this.facts.weight=await e.getRecentWeight(),this.facts.hangingPills=this.prescription.getHangingPills(),this.facts.treatmentInitiationState=this.prescription.getTreatmentState(),this.facts.currentRegimenStr=this.programInfo.current_regimen,this.facts.currentRegimenCode=this.extractRegimenCode(this.programInfo.current_regimen),this.facts.medicationOrders=this.prescription.getMedicationOrders(),this.facts.contraindications=this.prescription.getContraindications(),this.facts.tptPrescriptionCount=this.prescription.getTptPrescriptionCount(),this.facts.lastSideEffectDate=this.prescription.getLastSideEffectDate(),this.facts.currentDate=m.getSessionDate(),this.facts.isChildBearing=e.isChildBearing()},async onSubmit(e){const t=await this.prescription.createEncounter();this.prescription.setNextVisitInterval(e[g.INTERVAL_SELECTION].value);const a=this.mapOrder(this.drugs);if(!t)return Object(j["e"])("Unable to create treatment encounter");const n=await this.prescription.createDrugOrder(a);if(!n)return Object(j["e"])("Unable to create drug orders!");this.facts.reasonForSwitch&&await this.prescription.createRegimenSwitchObs(this.facts.reasonForSwitch),this.facts.hangingPillsStatus&&await this.prescription.createHangingPillsObs(this.facts.hangingPillsStatus),Object(j["d"])("Drug order has been created"),this.nextTask()},async onEvent(e,t){const a=Object(_["a"])(this.facts,w,e,t);for(const i in a){var n;const e=a[i];if(null!==e&&void 0!==e&&null!==(n=e.actions)&&void 0!==n&&n.alert){var o;const t=await(null===e||void 0===e||null===(o=e.actions)||void 0===o?void 0:o.alert(this.facts));if(t===f.EXIT)return!1}}return!0},onBuildOptions(e,t){const a=Object(_["a"])(this.facts,w,e,t);for(const n in a){const e=a[n];if(e.data)return e.data}return{}},async onRegimen({label:e,value:t,other:a}){this.facts.lpvType="",this.facts.hangingPillsStatus="",this.facts.starterPackNeeded=!1,this.facts.regimenName=`${t} (${e})`,this.facts.regimenCodeStr=t.toString(),this.facts.regimenCode=this.extractRegimenCode(t.toString()),this.facts.regimenDrugs=a.regimenDrugs,this.facts.drugs=a.regimenDrugs.map(e=>e.drug_id);const n=this.prescription.findAndGroupDrugSideEffects(this.facts.drugs);this.facts.hasSideEffects=!Object(h["isEmpty"])(n),this.facts.sideEffectsTable=this.buildSideEffectsTable(n)},async onBeforeRegimenNext(){const e=await this.onEvent(g.ARV_REGIMENS,O.BEFORE_NEXT);let t=[];return!!e&&(this.facts.lpvType?t=await this.getLpvDrugs():this.facts.starterPackNeeded?(t=await this.getStarterPackDrugs(),Object(h["isEmpty"])(t)&&(t=this.facts.regimenDrugs)):t=this.facts.regimenDrugs,this.drugs=[...this.regimenExtras,...t],!0)},getLpvDrugs(){return this.prescription.getLvpDrugsByType(this.facts.lpvType,this.facts.regimenCode)},resolveHtnDrugs(){try{const e=sessionStorage.getItem(C["b"].Prescription);if("string"===typeof e){const t=JSON.parse(e);if(Object(h["isPlainObject"])(t)&&t[this.patientID])return t[this.patientID]}}catch(e){console.warn(e)}return[]},getStarterPackDrugs(){return this.prescription.getRegimenStarterpack(this.facts.regimenCode,this.facts.weight)},setCustomDrugs(e){this.drugs=e.map(e=>e.other)},buildSideEffectsTable(e){const t=["Date","Contraindication(s)","Side effect(s)"],a=[];for(const n in e){const t=this.facts.contraindications[n]||[];a.push([l["b"].toStandardHisDisplayFormat(n),t.join(", "),e[n].join(", ")])}return{columns:t,rows:a}},async buildRegimenOptions(){const e=await this.prescription.getPatientRegimens(),t=[];for(const a in e){const n=e[a],o=n.map(e=>e.alternative_drug_name||e.concept_name).sort().join(" + ");t.push({label:o,value:a,other:{regimenDrugs:n}})}return t},buildIntervalOptions(){const e=[{label:"2 weeks",value:14},{label:"1 month",value:28},{label:"2 months",value:56},{label:"3 months",value:84},{label:"4 months",value:112},{label:"5 months",value:140},{label:"6 months",value:168},{label:"7 months",value:196},{label:"8 months",value:224},{label:"9 months",value:252},{label:"10 months",value:280},{label:"11 months",value:308},{label:"12 months",value:336}];return e.map(({label:e,value:t})=>{this.facts.selectedInterval=parseInt(t.toString());const a=this.onBuildOptions(g.INTERVAL_SELECTION,O.ON_BUILD);return{label:e,value:t,other:{...a,...this.getDrugEstimates(this.drugs,this.facts.selectedInterval)}}})},getDrugFrequency(e){this.facts.drug=e;const t=Object(_["a"])(this.facts,N);if(!Object(h["isEmpty"])(t))return t[0].concept},extractRegimenCode(e){try{return e.match(/n\/a/i)?-1:parseInt(e.substring(0,e.length))}catch(t){return console.warn(t),-1}},getDrugEstimates(e,t){this.prescription.setNextVisitInterval(t);const a=this.prescription.calculateDateFromInterval(),n=e.map(e=>{const t=this.prescription.getDrugPackSize(e),a=this.prescription.calculatePillsPerDay(e.am,e.noon,e.pm),n=this.prescription.estimatePackSize(a,t);return{label:e.alternative_drug_name||e.drug_name,value:n}});return{label:"Medication run-out date:",value:l["b"].toStandardHisDisplayFormat(a),other:{label:"Estimated packs/tins:",value:n}}},mapOrder(e){return e.map(e=>this.prescription.toOrderObj(e.drug_id,e.alternative_drug_name||e.drug_name,e.units,e.am,e.pm,e.frequency||this.getDrugFrequency(e.drug_name)))},async getPatientToolBar(){const e=await this.prescription.getReasonForRegimenSwitch();return[{label:"Age",value:this.patient.getAge()+" Year(s)"},{label:"Gender",value:this.patient.getGender()},{label:"Current Regimen",value:this.programInfo.current_regimen},{label:"Current weight",value:this.facts.weight+" kg(s)"||"Unknown"},{label:"Reason for change",value:e}]},getFields(){return[{id:g.ARV_REGIMENS,helpText:"ARV Regimen(s)",type:r["b"].TT_ART_REGIMEN_SELECTION,condition:()=>this.prescription.shouldPrescribeArvs(),validation:e=>s["a"].required(e),options:()=>this.buildRegimenOptions(),onload:()=>this.facts.prescriptionType="Regimen",onValue:e=>(this.onRegimen(e),this.onEvent(g.ARV_REGIMENS,O.ON_VALUE)),beforeNext:()=>this.onBeforeRegimenNext(),config:{toolbarInfo:this.patientToolbar,footerBtns:[{name:"Custom Regimen",slot:"end",onClick:()=>{this.fieldComponent="custom_regimen"}}]}},{id:"custom_regimen",helpText:"Custom prescription",type:r["b"].TT_MULTIPLE_SELECT,condition:()=>"Custom"===this.facts.prescriptionType,onload:()=>this.facts.prescriptionType="Custom",validation:e=>s["a"].required(e),options:async()=>{const e=await this.prescription.getCustomIngridients();return e.map(e=>({label:e.name,value:e.drug_id,other:{...e}}))},config:{showKeyboard:!0,hiddenFooterBtns:["Back"],footerBtns:[{name:"Standard Regimen",size:"large",slot:"end",color:"primary",visible:!1,visibleOnStateChange:e=>1===e.index,onClick:()=>{this.fieldComponent="arv_regimens"}}]}},{id:"custom_dosage",helpText:"Custom dose",type:r["b"].TT_DOSAGE_INPUT,condition:e=>!Object(h["isEmpty"])(e.custom_regimen),validation:e=>{if(s["a"].required(e))return["Drugs are not available"];const t=e.map(({other:e})=>e.am<=0&&e.pm<=0);return t.some(Boolean)?["Missing dosage configuration on some drugs"]:null},unload:e=>this.setCustomDrugs(e),summaryMapValue:({other:e})=>({label:"Dosages",value:this.prescription.getInstructions(e.drug_name,e.am,e.pm,e.units)}),options:e=>e.custom_regimen.map(e=>({label:e.label,value:e.value,other:{drug_id:e.other.drug_id,drug_name:e.label,barcodes:e.other.barcodes,units:e.other.units,am:0,noon:0,pm:0,frequency:this.getDrugFrequency(e.label)}}))},{id:"selected_meds",helpText:"Selected medication",type:r["b"].TT_DATA_TABLE,config:{toolbarInfo:this.patientToolbar,hiddenFooterBtns:["Clear"],dataTableConfig:{showIndex:!1},viewPortStyle:{height:"76vh"},columns:()=>[[D["a"].thTxt("Drug name",k),D["a"].thTxt("Units",k),D["a"].thTxt("AM",k),D["a"].thTxt("Noon",k),D["a"].thTxt("PM",k),D["a"].thTxt("Frequency",k)]],rows:()=>this.drugs.map(e=>{const t={style:{height:"6vh"},cssClass:(()=>{if(e.drug_name.match(/cotrimoxazole/i))return"adult-regimen-formulation";switch(e.regimen_category){case"A":return"adult-regimen-formulation";case"P":return"peads-regimen-formulation"}})()};return[D["a"].td(e.alternative_drug_name||e.drug_name,t),D["a"].td(e.units,t),D["a"].td(e.am,t),D["a"].td(e.noon,t),D["a"].td(e.pm,t),D["a"].td(e.frequency||this.getDrugFrequency(e.drug_name),t)]})}},{id:g.INTERVAL_SELECTION,helpText:"Interval to next visit",type:r["b"].TT_NEXT_VISIT_INTERVAL_SELECTION,validation:e=>s["a"].required(e),options:()=>this.buildIntervalOptions(),onValue:()=>this.onEvent(g.INTERVAL_SELECTION,O.ON_VALUE),beforeNext:()=>this.onEvent(g.INTERVAL_SELECTION,O.BEFORE_NEXT),config:{showRegimenCardTitle:!1}}]}}}),I=a("6b0d"),x=a.n(I);const S=x()(T,[["render",i]]);var P=S;function A(e,t,a,n,i,r){const s=Object(o["resolveComponent"])("his-standard-form");return Object(o["openBlock"])(),Object(o["createBlock"])(s,{cancelDestinationPath:e.cancelDestination,fields:e.fields,onFinishAction:e.onSubmit},null,8,["cancelDestinationPath","fields","onFinishAction"])}a("13d5");var E=a("5713"),B=a("8158");const R={"Adults with stage 4 conditions":{concept:"WHO STAGE IV ADULT",priority:1,conditions:{stage:e=>4===e}},"Classify as stage 4 when reason for ART is WHO STAGE 4":{concept:"WHO STAGE IV ADULT",priority:2,conditions:{reasonForArt:e=>"WHO STAGE IV ADULT"===e}},"Adults with stage 3 conditions":{concept:"WHO STAGE III ADULT",priority:3,conditions:{stage:e=>3===e}},"Adults with stage 2 conditions":{concept:"WHO STAGE II ADULT",priority:4,conditions:{stage:e=>2===e}},"Adults with stage 1 conditions":{concept:"WHO STAGE I ADULT",priority:5,conditions:{stage:e=>1===e}}},F={"Children with stage 4 conditions":{concept:"WHO STAGE IV PEDS",priority:1,conditions:{stage:e=>4===e}},"Classify as stage 4 when reason for ART is WHO STAGE 4":{concept:"WHO STAGE IV PEDS",priority:2,conditions:{reasonForArt:e=>"WHO STAGE IV PEDS"===e}},"For children with stage 3 conditions":{concept:"WHO STAGE III PEDS",priority:3,conditions:{stage:e=>3===e}},"Children with stage 2 conditions":{concept:"WHO STAGE II PEDS",priority:4,conditions:{stage:e=>2===e}},"Children with stage 1 conditions":{concept:"WHO STAGE I PEDS",priority:5,conditions:{stage:e=>1===e}}},L={"Warn if Severe weight loss is selected when actual patient BMI is acceptable":{priority:1,actions:{alert:async e=>await Object(j["a"])(`Patient's BMI of ${e.bmi} greater than 18.5, do you wish to proceed?`,{confirmBtnLabel:"Yes, keep severe weightloss",cancelBtnLabel:"No, cancel"})},conditions:{selectedCondition(e){return"Severe weight loss >10% and/or BMI <18.5kg/m^2, unexplained"===e},bmi:e=>e>18.5}},"Warn for contradicting stage defining conditions":{priority:1,actions:{alert:async e=>{const t=await Object(j["a"])("CONTRADICTING STAGE DEFINING CONDITIONS",{confirmBtnLabel:"Keep Asymptomatic",cancelBtnLabel:"Keep other(s)"});return!!t&&(e.stage=1,e.selectedConditions=[],e.stageThreeConditions=[],e.stageFourConditions=[],e.stageTwoConditions=[],!0)}},conditions:{selectedCondition(e){return"Asymptomatic HIV infection"===e},stage:e=>e>=2}}},M={"For children whose current weight percentile is less than 70":{priority:1,actions:{isChecked:!0},description:{color:"danger",show:"always",info:e=>"Child has a low weight percentile of "+e.weightPercentile},conditions:{selectedCondition(e){return"Severe unexplained wasting or malnutrition not responding to treatment (weight-for-height/ -age <70% or MUAC less than 11cm or oedema)"===e},weightPercentile(e){return e<70}}},"Enable Moderate unexplained malnutrition for children whose weight for height is 70-79%":{priority:1,actions:{isChecked:!0},description:{color:"danger",show:"always",info:e=>"Child has weight percentile of "+e.weightPercentile},conditions:{selectedCondition(e){return"Moderate unexplained wasting/malnutrition not responding to treatment (weight-for-height/ -age 70-79% or muac 11-12 cm)"===e},weightPercentile(e){return e>=70&&e<=79}}},"Disable moderate weight loss when Severe unexplained weight loss is chosen":{priority:2,actions:{isChecked:!1,disabled:!0},description:{color:"secondary",show:"always",info:()=>"Severe weight loss/manutrition was already selected"},conditions:{selectedCondition(e){return"Moderate unexplained wasting/malnutrition not responding to treatment (weight-for-height/ -age 70-79% or muac 11-12 cm)"===e},selectedConditions(e){return e.includes("Severe unexplained wasting or malnutrition not responding to treatment (weight-for-height/ -age <70% or MUAC less than 11cm or oedema)")}}}},H={"Adults with a BMI less than 16":{priority:1,actions:{isChecked:!0},description:{color:"danger",show:"always",info:e=>"Adult has a low BMI of "+e.bmi},conditions:{selectedCondition(e){return"Severe weight loss >10% and/or BMI <18.5kg/m^2, unexplained"===e},bmi:e=>e<16}},"Adults whose BMI is between 16 and 18":{priority:3,actions:{isChecked:!0},description:{color:"warning",show:"onChecked",info:e=>`BMI of ${e.bmi} is between 16 and 18`},conditions:{selectedCondition:e=>"Moderate weight loss less than or equal to 10 percent, unexplained"===e,bmi:e=>e>=16&&e<=18.5}},"Disable Moderate weight loss if severe weightloss is selected":{priority:2,actions:{isChecked:!1,disabled:!0},description:{color:"secondary",show:"always",info:()=>"Severe weight loss was already selected"},conditions:{selectedCondition(e){return"Moderate weight loss less than or equal to 10 percent, unexplained"===e},selectedConditions(e){return e.includes("Severe weight loss >10% and/or BMI <18.5kg/m^2, unexplained")}}}},$={"Has stage 4 conditions":{concept:"WHO STAGE IV PEDS",priority:1,conditions:{stage:e=>4===e}},"Has stage 3 conditions":{concept:"WHO STAGE III PEDS",priority:2,conditions:{stage:e=>3===e}},"Children under twelve months who tested positive on Rapid test and have presumed severe HIV":{concept:"PRESUMED SEVERE HIV",priority:3,conditions:{ageInMonths(e){return e<12},selectedConditions:e=>{const t=B["a"].getConceptsByCategory("pshd_condition");for(const a in t)if(e.includes(a))return!0;return!1},testType(e){return"HIV rapid test"===e}}},"Children under twelve who tested positive via HIV DNA Polymerase Chain Reaction test":{concept:"HIV DNA POLYMERASE CHAIN REACTION",priority:4,conditions:{ageInMonths:e=>e<12,testType:e=>"HIV DNA POLYMERASE CHAIN REACTION"===e}},"Children who are less than 24 months":{concept:"HIV infected",priority:5,conditions:{ageInMonths:e=>e<24}},"Children between 24 and 56 months who have stage 2 or 1 conditions":{concept:"CD4 COUNT LESS THAN OR EQUAL TO 750",priority:6,conditions:{ageInMonths(e){return e>=24&&e<=56},cd4(e){return e<=750},cd4Modifier(e){return"<"===e||"="===e},stage(e){return e<=2}}},"Children with CD4 count less than 500 and have stage 1 and stage 2 conditions":{concept:"CD4 COUNT LESS THAN OR EQUAL TO 500",priority:7,conditions:{cd4(e){return e<=500},cd4Modifier(e){return"<"===e||"="===e},stage(e){return e<=2}}},"Children over the date 2014-04-01 who are more than five years old and have cd4 count less than 500":{concept:"CD4 COUNT LESS THAN OR EQUAL TO 500",priority:9,conditions:{date(e){return e>="2014-04-01"},age(e){return e>5},cd4(e){return e<=500},cd4Modifier(e){return"<"===e||"="===e}}},"Children over date 2014-04-01 and less than Five years old":{concept:"HIV infected",priority:10,conditions:{date(e){return e>="2014-04-01"},age(e){return e<=5}}},"Asymptomatic patient with either stage one or stage two conditions":{concept:"Asymptomatic",priority:11,conditions:{stage:e=>e<=2}}},U={"Has stage 4 conditions":{concept:"WHO STAGE IV ADULT",priority:1,conditions:{stage:e=>4===e}},"Has HIV wasting syndrome identified in stage 3":{concept:"WHO STAGE IV ADULT",priority:2,conditions:{selectedConditions:e=>{const t=B["a"].getConceptsByCategory("severe_hiv_wasting_syndrome"),a=t.reduce((t,a)=>e.includes(a.name)?t+1:0,0);return a>=2}}},"Has stage 3 conditions":{concept:"WHO STAGE III ADULT",priority:3,conditions:{stage:e=>3===e}},"CD4 less than 350 for adults before 2014":{concept:"cd4 less than or equal to 350",priority:4,conditions:{date(e){return e<"2014-04-01"},cd4(e){return e<=350},cd4Modifier(e){return"<"===e||"="===e}}},"CD4 less than 250 for adults after 2014":{concept:"cd4 less than or equal to 250",priority:4,conditions:{date(e){return e>="2014-04-01"},cd4(e){return e<=250},cd4Modifier(e){return"<"===e||"="===e}}},"CD4 less than 350 for adults after 2014":{concept:"cd4 less than or equal to 350",priority:5,conditions:{date(e){return e>="2014-04-01"},cd4(e){return e<=350},cd4Modifier(e){return"<"===e||"="===e}}},"CD4 less than 500 for adults after 2014":{concept:"cd4 less than or equal to 500",priority:6,conditions:{date(e){return e>="2014-04-01"},cd4(e){return e<=500},cd4Modifier(e){return"<"===e||"="===e}}},"Women who are breast feeding":{concept:"BREASTFEEDING",priority:8,conditions:{gender(e){return"F"===e},breastFeeding(e){return"Yes"===e},stage:e=>e<=2}},"Women who are pregnant":{concept:"PATIENT PREGNANT",priority:7,conditions:{gender(e){return"F"===e},pregnant(e){return"Yes"===e},stage(e){return e<=2}}},"Asymptomatic patient with either stage one or stage two conditions":{concept:"Asymptomatic",priority:9,conditions:{stage:e=>e<=2}}};var q;(function(e){e["ADULT_STAGE_4"]="stage_4_conditions_adults",e["ADULT_STAGE_3"]="stage_3_conditions_adults",e["ADULT_STAGE_2"]="stage_2_conditions_adults",e["ADULT_STAGE_1"]="stage_1_conditions_adults",e["PEDAID_STAGE_4"]="stage_4_conditions_pedaids",e["PEDAID_STAGE_3"]="stage_3_conditions_pedaids",e["PEDAID_STAGE_2"]="stage_2_conditions_pedaids",e["PEDAID_STAGE_1"]="stage_1_conditions_pedaids"})(q||(q={}));class G extends b["a"]{constructor(e,t,a){super(e,52,a),this.age=t,this.confirmatoryTest=null}isAdult(){return this.age>=15}isPedaid(){return this.age<=14}setAge(e){this.age=e}getFacilities(e=""){return E["a"].getFacilities({name:e})}getConfirmatoryTestType(){return this.confirmatoryTest}cd4CountIsValid(e){try{return!!e.match(/^(=|<|>)([0-9]*)$/m)}catch(t){return!1}}getAlertGuidelines(){return L}getWhoStageGuidelines(){return this.isAdult()?R:F}getProgramEligibilityGuidelines(){return this.isAdult()?U:$}getRecommendedConditionGuidelines(){return this.isAdult()?H:M}getStagingConditions(e){const t=this.getStagingCategoryByNum(e);return b["a"].getConceptsByCategory(t)}buildWhoStageObs(e){return this.buildValueCoded("Who stage",e)}buildWhoCriteriaObs(e){return this.buildValueCoded("Who stages criteria present",e)}buildReasonForArtObs(e){return this.buildValueCoded("Reason for ART eligibility",e)}getStagingCategoryByNum(e){switch(e){case 1:return this.isAdult()?q.ADULT_STAGE_1:q.PEDAID_STAGE_1;case 2:return this.isAdult()?q.ADULT_STAGE_2:q.PEDAID_STAGE_2;case 3:return this.isAdult()?q.ADULT_STAGE_3:q.PEDAID_STAGE_3;case 4:return this.isAdult()?q.ADULT_STAGE_4:q.PEDAID_STAGE_4;default:return""}}async loadHivConfirmatoryTestType(){const e=await b["a"].getFirstValueCoded(this.patientID,"Confirmatory hiv test type");e&&(this.confirmatoryTest=e)}}var z=a("b446"),Y=a("3800"),W=a("e86e"),K=Object(o["defineComponent"])({mixins:[v["a"]],data:()=>({staging:{},showStagingWeightChart:!0,canShowStagingFields:!0,bmiObj:{},stagingFacts:{age:-1,bmi:-1,gender:"",stage:-1,cd4:-1,date:"",isChildBearing:!1,stageOneConditions:[],stageTwoConditions:[],stageThreeConditions:[],stageFourConditions:[],reasonForArt:"",testType:"",pregnant:"",breastFeeding:"",selectedCondition:"",selectedConditions:[],weightPercentile:-1,ageInMonths:-1,cd4Modifier:"",whoStage:""}}),methods:{async initStaging(e){this.staging=new G(e.getID(),e.getAge(),this.providerID),await this.staging.loadHivConfirmatoryTestType(),this.bmiObj=await e.getBMI(),this.stagingFacts.age=e.getAge(),this.stagingFacts.bmi=this.bmiObj["index"],this.stagingFacts.date=G.getSessionDate(),this.stagingFacts.gender=e.isMale()?"M":"F",this.stagingFacts.testType=this.staging.getConfirmatoryTestType(),this.stagingFacts.ageInMonths=e.getAgeInMonths(),this.stagingFacts.isChildBearing=e.isChildBearing(),this.staging.isPedaid()&&(this.stagingFacts.weightPercentile=await e.calculateWeightPercentile())},async submitStaging(e){const t=await this.staging.createEncounter();if(!t)throw"Unable to create staging encounter";const a=await this.resolveObs(e,"staging"),n=await Promise.all([this.buildReasonForArtObs(),this.buildWhoStageObs()]),o=await this.staging.saveObservationList([...a,...n]);if(!o)throw"Unable to save patient observations"},async onStagingCondition({label:e}){var t,a;this.stagingFacts.selectedCondition=e;const n=this.staging.getAlertGuidelines(),o=Object(_["a"])(this.stagingFacts,n);if(Object(h["isEmpty"])(o))return!0;if(null!==(t=o[0])&&void 0!==t&&t.actions&&null!==(a=o[0])&&void 0!==a&&a.actions.alert){var i;const e=await(null===(i=o[0])||void 0===i?void 0:i.actions.alert(this.stagingFacts));return!!e}return!0},getFacilities(e=""){return Object(W["b"])(e)},updateStagingFacts(){const e=[this.stagingFacts.stageOneConditions,this.stagingFacts.stageTwoConditions,this.stagingFacts.stageThreeConditions,this.stagingFacts.stageFourConditions];this.stagingFacts.stage=e.reduce((e,t,a)=>Object(h["isEmpty"])(t)?e:a+1,0),this.stagingFacts.selectedConditions=e.reduce((e,t)=>e.concat(t),[])},buildReasonForArtObs(){return this.staging.buildReasonForArtObs(this.stagingFacts.reasonForArt)},buildWhoStageObs(){return this.staging.buildWhoStageObs(this.stagingFacts.whoStage)},buildStagingOptions(e,t=[]){const a=this.staging.getRecommendedConditionGuidelines();return this.staging.getStagingConditions(e).map(e=>{let n,o=!1,i=t.includes(e.name);this.stagingFacts.selectedCondition=e.name;const r=Object(_["a"])(this.stagingFacts,a);if(!Object(h["isEmpty"])(r)){var s,c;const e=r[0];null!==e&&void 0!==e&&null!==(s=e.actions)&&void 0!==s&&s.isChecked&&(i=!0),null!==e&&void 0!==e&&null!==(c=e.actions)&&void 0!==c&&c.disabled&&(o=!0),n=e.description}return{label:e.name,value:e.concept_id,isChecked:i,disabled:o,description:n}})},setWhoStage(){var e;const t=this.staging.getWhoStageGuidelines(),a=Object(_["a"])(this.stagingFacts,t);this.stagingFacts.whoStage=(null===(e=a[0])||void 0===e?void 0:e.concept)||""},setReasonForArt(){var e;const t=this.staging.getProgramEligibilityGuidelines(),a=Object(_["a"])(this.stagingFacts,t);this.stagingFacts.reasonForArt=(null===(e=a[0])||void 0===e?void 0:e.concept)||""},notAsymptomatic(e){const t=e.stage_1_conditions;if(t){const e=t.filter(e=>e.label.match(/asymptomatic/i)&&e.isChecked);return Object(h["isEmpty"])(e)}return!0},hasTransferLater(e){return"has_transfer_letter"in e&&(e.has_transfer_letter&&"Yes"===e.has_transfer_letter.value)},hasStaging(e){return!!this.hasTransferLater(e)||this.canShowStagingFields},getStagingSummaryField(e="Summary"){return{id:"summary",helpText:e,type:r["b"].TT_ART_STAGING_SUMMARY,condition:e=>this.hasStaging(e),onload:()=>{this.setReasonForArt(),this.setWhoStage()},options:()=>[{label:"WHO Stage",value:this.stagingFacts.whoStage,other:{type:"title-section"}},{label:"Condition on starting ART",value:this.stagingFacts.reasonForArt,other:{type:"title-section"}},...this.stagingFacts.selectedConditions.map(e=>({label:e,value:e}))],config:{title:"Selected stage defining conditions",hiddenFooterBtns:["Clear"]}}},isANCclient(){return"ANC"===G.getSuspendedProgram()},getStagingFields(){return[{id:"pregnancy_status",helpText:"Pregnant / Breastfeeding",type:r["b"].TT_MULTIPLE_YES_NO,validation:e=>s["a"].anyEmpty(e),summaryMapValue:e=>({label:e.label,value:e.value}),computedValue:(e,t)=>{let a=[];return this.isANCclient()&&!this.hasTransferLater(t)&&(this.stagingFacts["pregnant"]="Yes",a.push(this.staging.buildValueCoded("Is patient pregnant","Yes"))),a=a.concat(e.map(e=>{const{value:t,other:a}=e,n=a.factID;return this.stagingFacts[n]=(""+t).match(/Yes/i)?"Yes":"No",this.staging.buildValueCoded(a.concept,t)})),{obs:a,tag:"staging"}},options:e=>{if(Object(h["isEmpty"])(e.pregnancy_status)){const t=[];return this.isANCclient()&&!this.hasTransferLater(e)||t.push({label:"Pregnant?",value:"",other:{values:this.yesNoOptions(),concept:"Is patient pregnant",factID:"pregnant"}}),t.push({label:"Breastfeeding?",value:"",other:{values:this.yesNoOptions(),concept:"Is patient breast feeding",factID:"breastFeeding"}}),t}return e.pregnancy_status},condition:e=>this.hasStaging(e)&&this.stagingFacts.isChildBearing},{id:"patient_weight_chart",helpText:"Weight history",type:r["b"].TT_WEIGHT_CHART,options:async()=>{let e=await this.patient.getWeightHistory();return e=e.map(e=>({x:l["b"].toStandardHisDisplayFormat(e.date),y:e.weight})),[{label:"Weight for patient",value:"Weight trail",other:{values:e,age:this.patient.getAge(),bmi:this.bmiObj}}]},config:{hiddenFooterBtns:["Clear"]},condition:e=>this.hasStaging(e)&&this.showStagingWeightChart},{id:"stage_4_conditions",helpText:"Stage 4 conditions",type:r["b"].TT_MULTIPLE_SELECT,options:()=>this.buildStagingOptions(4,this.stagingFacts.stageFourConditions),onValue:e=>this.onStagingCondition(e),computedValue:e=>({tag:"staging",obs:e.map(e=>this.staging.buildWhoCriteriaObs(e.label))}),unload:e=>{this.stagingFacts.stageFourConditions=e.map(e=>e.label),this.updateStagingFacts()},onConditionFalse:()=>{this.stagingFacts.stageFourConditions=[],this.updateStagingFacts()},condition:e=>this.hasStaging(e)&&this.notAsymptomatic(e)},{id:"stage_3_conditions",helpText:"Stage 3 conditions",type:r["b"].TT_MULTIPLE_SELECT,options:()=>this.buildStagingOptions(3,this.stagingFacts.stageThreeConditions),onValue:e=>this.onStagingCondition(e),computedValue:e=>({tag:"staging",obs:e.map(e=>this.staging.buildWhoCriteriaObs(e.label))}),unload:e=>{this.stagingFacts.stageThreeConditions=e.map(e=>e.label),this.updateStagingFacts()},onConditionFalse:()=>{this.stagingFacts.stageThreeConditions=[],this.updateStagingFacts()},condition:e=>this.hasStaging(e)&&this.notAsymptomatic(e)},{id:"stage_2_conditions",helpText:"Stage 2 conditions",type:r["b"].TT_MULTIPLE_SELECT,options:()=>this.buildStagingOptions(2,this.stagingFacts.stageTwoConditions),onValue:e=>this.onStagingCondition(e),computedValue:e=>({tag:"staging",obs:e.map(e=>this.staging.buildWhoCriteriaObs(e.label))}),unload:e=>{this.stagingFacts.stageTwoConditions=e.map(e=>e.label),this.updateStagingFacts()},onConditionFalse:()=>{this.stagingFacts.stageTwoConditions=[],this.updateStagingFacts()},condition:e=>this.hasStaging(e)&&this.notAsymptomatic(e)},{id:"stage_1_conditions",helpText:"Stage 1 conditions",type:r["b"].TT_MULTIPLE_SELECT,validation:e=>{if(Object(h["isEmpty"])(e)&&Object(h["isEmpty"])(this.stagingFacts.selectedConditions))return["Please provide atleast one staging condition"]},options:()=>this.buildStagingOptions(1,this.stagingFacts.stageOneConditions),onValue:e=>this.onStagingCondition(e),computedValue:e=>{const t=e.map(e=>e.label);return this.stagingFacts.stageOneConditions=t,this.updateStagingFacts(),{tag:"staging",obs:t.map(e=>this.staging.buildWhoCriteriaObs(e))}},condition:e=>this.hasStaging(e)},{id:"cd4_available",helpText:"Recent CD4 count results available?",type:r["b"].TT_SELECT,condition:e=>this.hasStaging(e),validation:e=>s["a"].required(e),options:()=>this.yesNoOptions()},{id:"cd4_count",helpText:"CD4 Count",type:r["b"].TT_TEXT,computedValue:e=>{const t=e.value.toString(),a=t.charAt(0),n=parseInt(t.substring(1));return{tag:"staging",modifier:a,count:n,obs:this.staging.buildValueNumber("CD4 count",n,a)}},unload:(e,t,a,n)=>{const{count:o,modifier:i}=n["cd4_count"];this.stagingFacts.cd4=o,this.stagingFacts.cd4Modifier=i},onConditionFalse:()=>{this.stagingFacts.cd4=-1,this.stagingFacts.cd4Modifier=""},validation:e=>{const t=()=>this.staging.cd4CountIsValid(e.value);return this.validateSeries([()=>s["a"].required(e),()=>t()?null:["Please start with either modifier first: >, <, or ="]])},config:{customKeyboard:[Y["b"],[["Unknown","Delete"]]]},condition:e=>this.hasStaging(e)&&"Yes"===e.cd4_available.value},...Object(z["b"])({id:"cd4_result_date",helpText:"Cd4 Results",required:!0,minDate:()=>this.patient.getBirthdate(),maxDate:()=>this.staging.getDate(),condition:e=>this.hasStaging(e)&&"Yes"===e.cd4_available.value,estimation:{allowUnknown:!1},computeValue:(e,t)=>({date:e,tag:"staging",isEstimate:t,obs:this.staging.buildValueDate("Cd4 count datetime",e)})},this.staging.getDate()),{id:"location",helpText:"CD4 Location",type:r["b"].TT_SELECT,defaultValue:()=>G.getLocationName(),computedValue:({label:e})=>({tag:"staging",obs:this.staging.buildValueText("Cd4 count location",e)}),validation:e=>s["a"].required(e),options:(e,t="")=>this.getFacilities(t),config:{showKeyboard:!0,isFilterDataViaApi:!0},condition:e=>this.hasStaging(e)&&"Yes"===e.cd4_available.value}]}}});const X=K;var J=X;class Q extends b["a"]{constructor(e,t){super(e,9,t)}}var Z=a("b515"),ee=a("aee2"),te=a("5a0c"),ae=a.n(te),ne=Object(o["defineComponent"])({mixins:[J],data:()=>({registration:{},prescription:{},dispensation:{},regimens:[],customRegimens:[],vitals:{}}),watch:{ready:{async handler(e){e&&(this.canShowStagingFields=!1,this.registration=new Q(this.patientID,this.providerID),this.vitals=new Z["a"](this.patientID,this.providerID),await this.initStaging(this.patient),this.showStagingWeightChart=!1,this.fields=this.getRegistrationFields())},immediate:!0}},methods:{async onSubmit(e,t){const a={...t};await this.registration.createEncounter(),this.hasStaging(e)&&(await this.submitStaging(t),await this.vitals.createEncounter(),await this.vitals.saveObservationList(await this.resolveObs(a,"vitals"))),await this.registration.saveObservationList(await this.resolveObs(a,"reg")),Object(j["d"])("Clinic registration complete!"),this.nextTask()},buildDateObs(e,t,a){let n={};return n=t.match(/unknown/i)?this.registration.buildValueText(e,"Unknown"):a?this.registration.buildValueDateEstimated(e,t):this.registration.buildValueDate(e,t),n},getRegistrationFields(){return[{id:"followup_agreement",helpText:"Agrees to follow-up",type:r["b"].TT_MULTIPLE_YES_NO,summaryMapValue:({value:e,label:t})=>({value:e,label:t+" followup"}),validation:e=>this.validateSeries([()=>s["a"].required(e),()=>s["a"].anyEmpty(e)]),computedValue:e=>{const t=[];return e.forEach(({label:e,value:a})=>{t.push(this.registration.buildValueCoded(e,a)),t.push(this.registration.buildValueCoded("Agrees to followup",e))}),{tag:"reg",obs:t}},options:e=>Object(h["isEmpty"])(e.followup_agreement)?[{label:"Phone",value:"",other:{values:this.yesNoOptions()}},{label:"Home visit",value:"",other:{values:this.yesNoOptions()}}]:e.followup_agreement},{id:"received_arvs",helpText:"Ever received ARVs for treatment or prophylaxis?",type:r["b"].TT_SELECT,computedValue:({value:e})=>({tag:"reg",obs:this.registration.buildValueCoded("Ever received ART",e)}),validation:e=>s["a"].required(e),options:()=>this.yesNoOptions()},...Object(z["b"])({id:"date_last_taken_arvs",helpText:"Last taken ARVS",required:!0,minDate:()=>this.patient.getBirthdate(),maxDate:()=>this.staging.getDate(),condition:e=>"Yes"===e.received_arvs.value,estimation:{allowUnknown:!0},computeValue:(e,t)=>({date:e,tag:"reg",isEstimate:t,obs:this.buildDateObs("Date ART last taken",e,t)})},this.registration.getDate()),{id:"taken_art_in_last_two_months",helpText:"Taken ARVs in the last two months?",type:r["b"].TT_SELECT,validation:e=>s["a"].required(e),computedValue:({value:e})=>({tag:"reg",obs:[this.registration.buildValueCoded("Has the patient taken ART in the last two months",e)]}),options:()=>this.yesNoUnknownOptions(),condition:e=>"Unknown"===e.year_date_last_taken_arvs.value},{id:"taken_art_in_last_two_weeks",helpText:"Taken ARV's in the last two weeks?",type:r["b"].TT_SELECT,computedValue:({value:e},t)=>{let a="";const n=[];let o=-1;return"Yes"===e?o=14:"Yes"===t.taken_art_in_last_two_months.value&&(o=60),o>0&&(a=l["b"].getDateBeforeByDays(this.registration.getDate(),o),n.push(this.registration.buildValueDateEstimated("Date ART last taken",a))),{date:a,tag:"reg",obs:[...n,this.registration.buildValueCoded("Has the patient taken ART in the last two weeks",e)]}},validation:e=>s["a"].required(e),condition:e=>"Yes"===e.taken_art_in_last_two_months.value,options:()=>this.yesNoUnknownOptions()},{id:"ever_registered_at_art_clinic",helpText:"Ever registered at an ART clinic?",type:r["b"].TT_SELECT,computedValue:({value:e})=>({tag:"reg",obs:this.registration.buildValueCoded("Ever registered at ART clinic",e)}),validation:e=>s["a"].required(e),condition:e=>"Yes"===e.received_arvs.value,options:()=>this.yesNoOptions()},{id:"location_of_art_initialization",helpText:"Location of ART initiation",type:r["b"].TT_SELECT,computedValue:({label:e})=>({tag:"reg",obs:this.registration.buildValueText("Location of ART initiation",e)}),validation:e=>s["a"].required(e),condition:e=>"Yes"===e.ever_registered_at_art_clinic.value,options:(e,t="")=>this.getFacilities(t),config:{showKeyboard:!0,isFilterDataViaApi:!0}},...Object(z["b"])({id:"date_started_art",helpText:"Started ART",required:!0,unload:(e,t,a,n)=>{if("next"===t){const e=ae()(n.date_started_art.date).diff(this.patient.getBirthdate(),"years");this.staging.setAge(e),this.stagingFacts.age=e,this.stagingFacts.ageInMonths=12*e}else this.staging.setAge(this.patient.getAge()),this.stagingFacts.age=this.patient.getAge(),this.stagingFacts.ageInMonths=this.patient.getAgeInMonths()},condition:e=>"Yes"===e.ever_registered_at_art_clinic.value,minDate:()=>this.patient.getBirthdate(),maxDate:()=>this.staging.getDate(),estimation:{allowUnknown:!0,estimationFieldType:z["a"].MONTH_ESTIMATE_FIELD},computeValue:(e,t)=>(this.staging.setDate(e),this.vitals.setDate(e),{date:e,tag:"reg",isEstimate:t,obs:this.buildDateObs("Date ART started",e,t)})},this.registration.getDate()),{id:"previous_art_number",helpText:"ART number at previous location",type:r["b"].TT_TEXT,condition:e=>"Yes"===e.ever_registered_at_art_clinic.value,computedValue:e=>({tag:"reg",obs:this.registration.buildValueText("ART number at previous location",e.value)}),validation:e=>s["a"].required(e)},{id:"has_transfer_letter",helpText:"Has staging information?",type:r["b"].TT_SELECT,validation:e=>s["a"].required(e),computedValue:({value:e})=>({tag:"reg",obs:this.registration.buildValueCoded("Has transfer letter",e)}),options:()=>this.yesNoOptions(),condition:e=>"Yes"===e.ever_registered_at_art_clinic.value},{id:"height",helpText:"Height (CM)",type:r["b"].TT_NUMBER,condition:e=>"Yes"===e.has_transfer_letter.value,computedValue:({value:e})=>({tag:"vitals",obs:this.vitals.buildValueNumber("Height",e)}),validation:e=>this.validateSeries([()=>s["a"].required(e),()=>s["a"].isNumber(e),()=>s["a"].rangeOf(e,40,222)])},{id:"weight",helpText:"Weight (Kg)",type:r["b"].TT_TEXT,unload:async(e,t,a)=>{const n=a.weight.value,o=a.height.value,i=await ee["a"].getBMI(n,o,this.patient.getGender(),this.patient.getAge());if(this.stagingFacts.bmi=i["index"],!this.staging.isPedaid())return;const r=await this.patient.getMedianWeightHeight();try{this.stagingFacts.weightPercentile=parseFloat(n)/parseFloat(r["weight"])*100}catch(s){this.stagingFacts.weightPercentile=0}},computedValue:({value:e})=>({tag:"vitals",obs:this.vitals.buildValueNumber("weight",e)}),condition:e=>"Yes"===e.has_transfer_letter.value,validation:e=>this.validateSeries([()=>{const t={...e,other:{modifier:"."}};return this.vitals.isNotEmptyandFloat(t)},()=>s["a"].rangeOf(e,1,300)]),config:{customKeyboard:[[["1","2","3",""],["4","5","6",""],["7","8","9","."],["","0","",""]],[["Delete"]]]}},...this.getStagingFields(),{id:"new_cd4_percent_available",helpText:"CD4 percent available",type:r["b"].TT_SELECT,options:()=>this.yesNoOptions(),condition:e=>"Yes"===e.has_transfer_letter.value,validation:e=>s["a"].required(e)},{id:"cd4_percent",helpText:"CD4 Percent",type:r["b"].TT_TEXT,condition:e=>"Yes"===e.new_cd4_percent_available.value,computedValue:({value:e})=>({tag:"staging",obs:this.registration.buildValueNumber("CD4 percent",parseInt(e.toString().substring(1)),"%")}),onValue:e=>!(e.value&&!this.staging.cd4CountIsValid(e.value))||(Object(j["e"])("Cd4 percentage invalid. Use one modifier or start with either of these symbols: >, < or ="),!1),validation:e=>s["a"].required(e),config:{customKeyboard:[Y["b"],[["Delete"]]]}},{id:"type_of_confirmatory_hiv_test",helpText:"Confirmatory HIV test",type:r["b"].TT_SELECT,validation:e=>s["a"].required(e),onValue:async e=>("Not done"===e.value&&await Object(y["a"])("Reminder","UNKNOWN HIV CONFIRMATORY TEST","Please arrange for a confirmatory test",[{name:"Agreed",color:"success",slot:"start"}]),!0),computedValue:({value:e})=>({tag:"reg",obs:this.registration.buildValueCoded("Confirmatory hiv test type",e)}),options:()=>[{label:"Rapid antibody test",value:"HIV rapid test"},{label:"DNA PCR",value:"HIV DNA polymerase chain reaction"},{label:"Not done",value:"Not done"}]},{id:"confirmatory_hiv_test_location",helpText:"Location of confirmatory HIV test",type:r["b"].TT_SELECT,defaultValue:e=>"Yes"===(e.ever_registered_at_art_clinic&&e.ever_registered_at_art_clinic.value)?"":Q.getLocationName(),computedValue:e=>({tag:"reg",obs:this.registration.buildValueText("Confirmatory HIV test location",e.label)}),validation:e=>s["a"].required(e),condition:e=>"Not done"!=e.type_of_confirmatory_hiv_test.value,options:(e,t="")=>this.getFacilities(t),config:{showKeyboard:!0,isFilterDataViaApi:!0}},...Object(z["b"])({id:"date_of_confirmatory_hiv_test",helpText:"Confirmatory HIV test",beforeNext:async(e,t)=>{if("Yes"!=t.received_arvs.value){const t=ae()(this.staging.getDate()).diff(e,"days");if(t>=20){const e=await Object(y["a"])("Data inconsistency warning",`Confirmatory Date for newly initiated ART patient is ${t} days ago`,"Are you sure this is accurate?",[{name:"No, Re-enter date",slot:"start",color:"success"},{name:"Yes, its accurate",slot:"end",color:"danger"}]);return"Yes, its accurate"===e}}return!0},condition:e=>e.confirmatory_hiv_test_location.value,required:!0,minDate:()=>this.patient.getBirthdate(),maxDate:()=>this.staging.getDate(),estimation:{allowUnknown:!0,estimationFieldType:z["a"].MONTH_ESTIMATE_FIELD},computeValue:(e,t)=>({date:e,tag:"reg",isEstimate:t,obs:this.buildDateObs("Confirmatory HIV test date",e,t)})},this.registration.getDate()),this.getStagingSummaryField("Staging summary")]}}});const oe=x()(ne,[["render",A]]);var ie=oe;function re(e,t,a,n,i,r){const s=Object(o["resolveComponent"])("his-standard-form");return Object(o["openBlock"])(),Object(o["createBlock"])(s,{fields:e.fields,onFinishAction:e.onFinish,skipSummary:!0,cancelDestinationPath:e.cancelDestination},null,8,["fields","onFinishAction","cancelDestinationPath"])}var se=a("7920"),ce=a("83af"),le=a("4db7"),de=a("3e53"),ue=Object(o["defineComponent"])({mixins:[v["a"]],components:{HisStandardForm:se["a"]},data:()=>({appointmentDate:"",medicationRunOutDate:"",appointment:{},app:de["a"].getActiveApp()}),watch:{ready:{async handler(e){e&&(this.appointment=new ce["a"](this.patientID,this.providerID),this.init())},immediate:!0}},methods:{async onFinish(e,t){const a=await this.appointment.createEncounter();if(!a)return Object(j["e"])("Unable to create encounter");const n=await this.resolveObs(t,"obs"),o=await this.appointment.buildValueDate("Estimated date",this.appointmentDate);n.push(o);const i=await this.appointment.saveObservationList(n);if(!i)return Object(j["e"])("Unable to create Obs");Object(j["d"])("Encounter created");const r=new le["a"](this.patientID),s=["CxCa","ANC"];s.includes(this.app.applicationName)||await r.printVisitSummaryLbl(),this.nextTask()},async init(){try{const e=await this.appointment.getNextAppointment();this.appointmentDate=e.appointment_date,this.medicationRunOutDate=e.drugs_run_out_date,this.fields=this.getFields()}catch(e){Object(j["e"])("Next appointment is not available"),this.gotoPatientDashboard()}},getFields(){return[{id:"set_appointment",helpText:"Appointments booking",type:r["b"].TT_APPOINTMENTS_ENTRY,validation:e=>s["a"].required(e),computedValue:e=>({tag:"obs",obs:this.appointment.buildValueDate("Appointment date",e.value)}),config:{patientAge:this.patient.getAge(),hiddenFooterBtns:["Clear"]},options:()=>[{label:"",value:"",other:{runOutDate:this.medicationRunOutDate,appointmentDate:this.appointmentDate}}]}]}}});const pe=x()(ue,[["render",re]]);var he=pe;function be(e,t,a,n,i,r){const s=Object(o["resolveComponent"])("his-standard-form");return Object(o["openBlock"])(),Object(o["createBlock"])(s,{skipSummary:!0,fields:e.fields,onFinishAction:e.onSubmit,cancelDestinationPath:e.cancelDestination},null,8,["fields","onFinishAction","cancelDestinationPath"])}class me extends b["a"]{constructor(e,t){super(e,68,t),this.lastDrugs=[],this.lastReceiptDate=""}async loadPreviousDrugs(){const e=new Date(this.date);e.setDate(e.getDate()-1);const t=e=>l["b"].toStandardHisFormat(e),a=await b["a"].getJson(`patients/${this.patientID}/drugs_received`,{date:t(e)});if(a){this.lastReceiptDate=a.reduce((e,a)=>!e||new Date(t(a.order.start_date))>new Date(e)?t(a.order.start_date):e,null);const e=C["a"].htnDrugReferences().map(e=>e.drug_id);this.lastDrugs=a.filter(a=>!e.includes(a.drug["drug_id"])&&t(a.order.start_date)===this.lastReceiptDate)}}getReceiptDate(){return this.lastReceiptDate}getLastDrugs(){return this.lastDrugs}receivedDrugsBefore(){return!Object(h["isEmpty"])(this.lastDrugs)}buildPillCountObs(e,t){return this.buildValueNumber("Number of tablets brought to clinic",t,null,e)}async buildAdherenceObs(e,t,a){const n=await b["a"].getConceptID("Drug adherence",!0);return{concept_id:n,value_numeric:a,value_drug:t,value_modifier:"%",order_id:e,person_id:this.patientID,obs_datetime:b["a"].getSessionDate()}}isAdherenceGood(e){return e>=95&&e<=105}calculateAdherence(e,t,a){return Math.round(100*(e-t)/(e-a))}calculateExpected(e,t,a,n){const o="QW"===n?"week":"day",i=this.calcTimeElapsed(a,o);return e-i*parseFloat(t.toString())}calcTimeElapsed(e,t){return ae()(this.date).diff(e,t)}calculateUnaccountedOrMissed(e,t){const a=parseFloat(e)-parseFloat(t);return a<0?-1*a+" missed":a+" unacc"}}var ge=Object(o["defineComponent"])({mixins:[v["a"]],data:()=>({adherence:{},drugObs:[],askReasonForPoorAdherence:!1,calculationAgreementObs:[]}),methods:{async initAdherence(e,t){this.adherence=new me(e.getID(),t),await this.adherence.loadPreviousDrugs()},async saveAdherence(){await this.adherence.createEncounter();const e=await Promise.all([...this.drugObs,...this.calculationAgreementObs]),t=await this.adherence.saveObservationList(e);if(!t)return Object(j["e"])("Unable to save patient observations")},buildAdherenceReport(e){const t=this.adherence.getReceiptDate(),a=this.adherence.calcTimeElapsed(t,"day"),n=` Last visit: ${l["b"].toStandardHisDisplayFormat(t)} \n                (${a} Days Elapsed)`,o=[{indexes:[0,3,6],class:"adherence-col-bg"}],i=[],r=[n],s=[["Prescription"],["Tabs given"],["Tabs per"],["Tabs remaining"],["Expected"],["Actual (counted)"],["Adherence"],["Doses missed/ Unaccounted for"],["Doses consumed"],["Art Adherence"]];return e.forEach((e,t)=>{const a=this.formatFrequency(e.frequency),n=this.calcPillsExpected(e),o=this.adherence.calculateAdherence(e.quantity,e.pillsBrought,n),c=this.adherence.isAdherenceGood(o)?"Good adherence":"Explore problem",l=this.adherence.calculateUnaccountedOrMissed(n,e.pillsBrought);r.push(e.drug.name),s[0].push(""),s[1].push(e.quantity),s[2].push(`${e.equivalent_daily_dose} <b>${a}</b>`),s[3].push(""),s[4].push(n<0?0:n),s[5].push(e.pillsBrought),s[6].push(""),s[7].push(l),s[8].push(o+"%"),s[9].push(c),i.push({index:t+1,row:9,class:c.match(/good/i)?"adherence-txt-good":"adherence-txt-bad"})}),[{label:"Selected Medication",value:"Table",other:{columns:r,rows:s,rowColors:o,cellColors:i}}]},formatFrequency(e){return(""+e).match(/qod/i)?"QOD":(""+e).match(/weekly/i)?"QW":e},calcPillsExpected(e){return this.adherence.calculateExpected(e.quantity,e.equivalent_daily_dose,e.order.start_date,this.formatFrequency(e.frequency))},getAdherenceFields(e=!0){return[{id:"pills_brought",helpText:"Pills remaining (brought to clinic)",type:r["b"].TT_ADHERENCE_INPUT,condition:()=>e,validation:e=>{if(s["a"].required(e))return["No drugs available"];const t=e.map(e=>""===e.value);return t.some(Boolean)?["Some values are missing"]:null},unload:async e=>{this.drugObs=[],e.forEach(async e=>{const{drug:t,order:a}=e.other,n={...e.other,pillsBrought:e.value},o=this.adherence.calculateAdherence(n.quantity,n.pillsBrought,this.calcPillsExpected(n));this.drugObs.push(this.adherence.buildAdherenceObs(a.order_id,t.drug_id,o)),this.drugObs.push(this.adherence.buildPillCountObs(a.order_id,e.value)),this.askReasonForPoorAdherence||(this.askReasonForPoorAdherence=!this.adherence.isAdherenceGood(n))})},options:e=>Object(h["isEmpty"])(e.pills_brought)?this.adherence.getLastDrugs().map(e=>({label:e.drug.name,value:"",other:{...e}})):e.pills_brought},{id:"adherence_report",helpText:"ART adherence",type:r["b"].TT_TABLE_VIEWER,condition:()=>e,options:e=>this.buildAdherenceReport(e.pills_brought.map(e=>({...e.other,pillsBrought:e.value}))),config:{hiddenFooterBtns:["Clear"]}},{id:"agree_with_calculation",helpText:"Agree with adherence calculation",type:r["b"].TT_SELECT,condition:()=>this.askReasonForPoorAdherence&&e,validation:e=>s["a"].required(e),unload:({value:e})=>{this.calculationAgreementObs=[this.adherence.buildValueCoded("Reason for poor treatment adherence",e)]},options:()=>[{label:"Yes",value:"Yes"},{label:"No",value:"No"}]}]}}});const fe=ge;var Oe=fe,je=Object(o["defineComponent"])({mixins:[Oe],watch:{ready:{async handler(e){e&&(await this.initAdherence(this.patient,this.providerID),this.fields=this.getAdherenceFields())},immediate:!0}},methods:{async onSubmit(){await this.saveAdherence(),this.nextTask()}}});const _e=x()(je,[["render",be]]);var ve=_e;function ye(e,t,a,n,i,r){const s=Object(o["resolveComponent"])("his-standard-form");return Object(o["openBlock"])(),Object(o["createBlock"])(s,{fields:e.fields,onFinishAction:e.onFinish,skipSummary:!0,cancelDestinationPath:e.cancelDestination},null,8,["fields","onFinishAction","cancelDestinationPath"])}var we=a("7957");class Ne extends b["a"]{constructor(e,t){super(e,53,t)}getFamilyPlanningMethods(){return["ORAL CONTRACEPTIVE PILLS","DEPO-PROVERA","INTRAUTERINE CONTRACEPTION","CONTRACEPTIVE IMPLANT","MALE CONDOMS","FEMALE CONDOMS","TUBAL LIGATION","NONE"]}async hasCompleteTptDispensations(){try{const e=await c["a"].getAllDrugOrders(this.patientID),{rifapentine:t,isoniazid:a}=e.reduce((e,t)=>{const a=t.drug.name;return a.match(/Isoniazid/i)&&(e["isoniazid"]+=t.quantity),a.match(/Rifapentine/i)&&(e["rifapentine"]+=t.quantity),e},{rifapentine:0,isoniazid:0});return a>=168||a>=36&&t>=72}catch(e){return console.error(e),!1}}async patientHitMenopause(){const e=await we["a"].getFirstObs(this.patientID,"Why does the woman not use birth control");return!(!e||"string"!==typeof(null===e||void 0===e?void 0:e.value_text))&&(!!e.value_text.match(/menopause/i)&&b["a"].obsInValidPeriod(e))}async hasTreatmentHistoryObs(){const e=await we["a"].getFirstObs(this.patientID,"Previous TB treatment history");return e&&b["a"].obsInValidPeriod(e)}async patientCompleted3HP(){const e=await we["a"].getFirstObs(this.patientID,"Previous TB treatment history");return!!(e&&"string"===typeof e.value_text&&b["a"].obsInValidPeriod(e)&&e.value_text.match(/complete/i))}getDrugSideEffects(){return b["a"].getJson(`programs/${b["a"].getProgramID()}/patients/${this.patientID}/medication_side_effects`,{date:this.date})}getClient(){return b["a"].getFirstValueCoded(this.patientID,"Patient Present")}async clientDueForCxCa(){const e=await b["a"].getJson("last_cxca_screening_details",{id:this.patientID,date:this.date});if(!Object(h["isEmpty"])(e)){const t=e["date_screened"],a=ae()(this.date).diff(t,"years");return a>=1}return!0}async clientHasHadAHysterectomy(){const e=await b["a"].getFirstValueCoded(this.patientID,"Reason for NOT offering CxCa");if("Hysterectomy"===e)return!0;const t=await b["a"].getFirstValueText(this.patientID,"Treatment");return"Hysterectomy"===t}async getTLObs(){const e=e=>e&&"Tubal ligation"===e.value_coded&&b["a"].obsInValidPeriod(e),t=await b["a"].getFirstObs(this.patientID,"Family planning");if(e(t))return e(t);{const t=await b["a"].getFirstObs(this.patientID,"Method of family planning");return e(t)}}async getPreviousDrugs(){const e=await b["a"].getJson(`patients/${this.patientID}/drugs_received`);if(!e)return;const t={};return e.forEach(e=>{t[e.drug_inventory_id]=e}),t}familyPlanningMethods(e,t){const a={"ORAL CONTRACEPTIVE PILLS":{"DEPO-PROVERA":"N","INTRAUTERINE CONTRACEPTION":"N","CONTRACEPTIVE IMPLANT":"N","MALE CONDOMS":"Y","FEMALE CONDOMS":"Y","RYTHM METHOD":"N","TUBAL LIGATION":"N",VASECTOMY:"N"},"DEPO-PROVERA":{"ORAL CONTRACEPTIVE PILLS":"N","INTRAUTERINE CONTRACEPTION":"N","CONTRACEPTIVE IMPLANT":"N","MALE CONDOMS":"Y","FEMALE CONDOMS":"Y","RYTHM METHOD":"N","TUBAL LIGATION":"N",VASECTOMY:"N"},"INTRAUTERINE CONTRACEPTION":{"ORAL CONTRACEPTIVE PILLS":"N","DEPO-PROVERA":"N","CONTRACEPTIVE IMPLANT":"N","MALE CONDOMS":"Y","FEMALE CONDOMS":"Y","RYTHM METHOD":"N","TUBAL LIGATION":"N",VASECTOMY:"N"},"CONTRACEPTIVE IMPLANT":{"ORAL CONTRACEPTIVE PILLS":"N","DEPO-PROVERA":"N","INTRAUTERINE CONTRACEPTION":"N","MALE CONDOMS":"Y","FEMALE CONDOMS":"Y","RYTHM METHOD":"N","TUBAL LIGATION":"N",VASECTOMY:"N"},"MALE CONDOMS":{"ORAL CONTRACEPTIVE PILLS":"Y","DEPO-PROVERA":"Y","INTRAUTERINE CONTRACEPTION":"Y","CONTRACEPTIVE IMPLANT":"Y","FEMALE CONDOMS":"Y","RYTHM METHOD":"Y","TUBAL LIGATION":"N",VASECTOMY:"Y"},"FEMALE CONDOMS":{"ORAL CONTRACEPTIVE PILLS":"Y","DEPO-PROVERA":"Y","INTRAUTERINE CONTRACEPTION":"Y","CONTRACEPTIVE IMPLANT":"Y","MALE CONDOMS":"Y","RYTHM METHOD":"Y","TUBAL LIGATION":"N",VASECTOMY:"Y"},"RYTHM METHOD":{"ORAL CONTRACEPTIVE PILLS":"N","DEPO-PROVERA":"N","INTRAUTERINE CONTRACEPTION":"N","MALE CONDOMS":"Y","FEMALE CONDOMS":"Y","CONTRACEPTIVE IMPLANT":"N","TUBAL LIGATION":"N",VASECTOMY:"N"},"TUBAL LIGATION":{"ORAL CONTRACEPTIVE PILLS":"N","DEPO-PROVERA":"N","INTRAUTERINE CONTRACEPTION":"N","MALE CONDOMS":"N","FEMALE CONDOMS":"N","CONTRACEPTIVE IMPLANT":"N","RYTHM METHOD":"N",VASECTOMY:"N"},VASECTOMY:{"ORAL CONTRACEPTIVE PILLS":"N","DEPO-PROVERA":"Y","INTRAUTERINE CONTRACEPTION":"N","MALE CONDOMS":"Y","FEMALE CONDOMS":"N","CONTRACEPTIVE IMPLANT":"Y","RYTHM METHOD":"N","TUBAL LIGATION":"N"},NONE:{"ORAL CONTRACEPTIVE PILLS":"N","DEPO-PROVERA":"N","INTRAUTERINE CONTRACEPTION":"N","MALE CONDOMS":"N","FEMALE CONDOMS":"N","CONTRACEPTIVE IMPLANT":"N","RYTHM METHOD":"N","TUBAL LIGATION":"N"}},n=a[e];return t.map(e=>"N"===n[e.label]?{label:e.label,value:e.value,isChecked:!1,disabled:!0}:{label:e.label,value:e.value,isChecked:e.isChecked,disabled:!1})}}var Ce=a("c1e4"),Ve=a("9b7c"),De=a("8a30");const ke=Object(o["withScopeId"])("data-v-10a26cd2");Object(o["pushScopeId"])("data-v-10a26cd2");const Te=Object(o["createTextVNode"])("VL milestone has been reached"),Ie=Object(o["createTextVNode"])(" Order VL"),xe=Object(o["createTextVNode"])(" Wait till next milestone"),Se=Object(o["createTextVNode"])(" Remind me later ");Object(o["popScopeId"])();const Pe=ke((function(e,t,a,n,i,r){const s=Object(o["resolveComponent"])("ion-title"),c=Object(o["resolveComponent"])("ion-toolbar"),l=Object(o["resolveComponent"])("ion-header"),d=Object(o["resolveComponent"])("ion-content"),u=Object(o["resolveComponent"])("ion-button"),p=Object(o["resolveComponent"])("ion-footer");return Object(o["openBlock"])(),Object(o["createBlock"])(o["Fragment"],null,[Object(o["createVNode"])(l,null,{default:ke(()=>[Object(o["createVNode"])(c,null,{default:ke(()=>[Object(o["createVNode"])(s,null,{default:ke(()=>[Te]),_:1})]),_:1})]),_:1}),Object(o["createVNode"])(d,{style:{overflowY:"hidden",background:"grey"}},{default:ke(()=>[Object(o["createVNode"])("p",null,"ART start date : "+Object(o["toDisplayString"])(e.artStartDate),1),Object(o["createVNode"])("p",null,"Months on ART: "+Object(o["toDisplayString"])(e.monthsOnART),1),Object(o["createVNode"])("p",null,"Last VL order date "+Object(o["toDisplayString"])(e.lastOrder),1),Object(o["createVNode"])("p",null,"Current regimen / start date: "+Object(o["toDisplayString"])(e.currentRegimen)+" - "+Object(o["toDisplayString"])(e.regimenStartDate),1)]),_:1}),Object(o["createVNode"])(p,null,{default:ke(()=>[Object(o["createVNode"])(c,null,{default:ke(()=>[Object(o["createVNode"])(u,{slot:"end",color:"success",size:"large",onClick:t[1]||(t[1]=t=>e.closeModal("order"))},{default:ke(()=>[Ie]),_:1}),Object(o["createVNode"])(u,{slot:"end",size:"large",onClick:t[2]||(t[2]=t=>e.closeModal("wait"))},{default:ke(()=>[xe]),_:1}),Object(o["createVNode"])(u,{slot:"start",color:"danger",size:"large",onClick:t[3]||(t[3]=t=>e.closeModal("later"))},{default:ke(()=>[Se]),_:1})]),_:1})]),_:1})],64)}));var Ae=Object(o["defineComponent"])({name:"Modal",props:{VLData:{type:Object,required:!0}},async created(){this.artStartDate=l["b"].toStandardHisDisplayFormat(this.VLData.earliest_start_date),this.monthsOnART=this.VLData.period_on_art,this.lastOrder=this.VLData.last_order_date?l["b"].toStandardHisDisplayFormat(this.VLData.last_order_date):"N/A",this.currentRegimen=this.VLData.current_regimen.name?this.VLData.current_regimen.name:"Other",this.regimenStartDate=l["b"].toStandardHisDisplayFormat(this.VLData.current_regimen.date_started)},methods:{async closeModal(e){await De["X"].dismiss(e)}},data(){return{content:"Content",artStartDate:"",monthsOnART:"",lastOrder:"",currentRegimen:"",regimenStartDate:""}},components:{IonHeader:De["q"],IonToolbar:De["Q"],IonTitle:De["P"],IonContent:De["n"],IonFooter:De["o"],IonButton:De["d"]}});a("d42f");const Ee=x()(Ae,[["render",Pe],["__scopeId","data-v-10a26cd2"]]);var Be=Ee;class Re extends b["a"]{constructor(e,t){super(e,13,t)}async buildDefferedOrder(e){const t=await b["a"].getConceptID("HIV viral load"),a=await b["a"].getConceptID("Delayed milestones");return[{concept_id:t,value_text:"Wait till next milestone",value_coded:a,value_numeric:e}]}}const Fe=Object(o["withScopeId"])("data-v-546674a2");Object(o["pushScopeId"])("data-v-546674a2");const Le=Object(o["createTextVNode"])("Side effects suspected causes"),Me={style:{}},He=Object(o["createVNode"])("div",{class:"side-title"}," Select reason ",-1),$e=Object(o["createVNode"])("p",null,"Current Medication",-1),Ue=Object(o["createVNode"])("p",null,"Previous Medication",-1),qe=Object(o["createTextVNode"])("Other, not drug related"),Ge=Object(o["createTextVNode"])("Drug side effect"),ze=Object(o["createVNode"])("p",null,null,-1),Ye=Object(o["createTextVNode"])(" Close "),We=Object(o["createTextVNode"])(" Save ");Object(o["popScopeId"])();const Ke=Fe((function(e,t,a,n,i,r){const s=Object(o["resolveComponent"])("ion-title"),c=Object(o["resolveComponent"])("ion-toolbar"),l=Object(o["resolveComponent"])("ion-header"),d=Object(o["resolveComponent"])("ion-label"),u=Object(o["resolveComponent"])("ion-item"),p=Object(o["resolveComponent"])("ion-list"),h=Object(o["resolveComponent"])("ion-col"),b=Object(o["resolveComponent"])("ion-radio"),m=Object(o["resolveComponent"])("ion-radio-group"),g=Object(o["resolveComponent"])("ion-row"),f=Object(o["resolveComponent"])("ion-grid"),O=Object(o["resolveComponent"])("ion-content"),j=Object(o["resolveComponent"])("ion-button"),_=Object(o["resolveComponent"])("ion-footer");return Object(o["openBlock"])(),Object(o["createBlock"])(o["Fragment"],null,[Object(o["createVNode"])(l,null,{default:Fe(()=>[Object(o["createVNode"])(c,null,{default:Fe(()=>[Object(o["createVNode"])(s,null,{default:Fe(()=>[Le]),_:1})]),_:1})]),_:1}),Object(o["createVNode"])(O,{style:{overflowY:"hidden",background:"grey"}},{default:Fe(()=>[Object(o["createVNode"])(f,null,{default:Fe(()=>[Object(o["createVNode"])(g,null,{default:Fe(()=>[Object(o["createVNode"])(h,{size:"4"},{default:Fe(()=>[Object(o["createVNode"])(p,{style:{overflowY:"auto",height:"78vh"}},{default:Fe(()=>[(Object(o["openBlock"])(!0),Object(o["createBlock"])(o["Fragment"],null,Object(o["renderList"])(e.sides,(t,a)=>(Object(o["openBlock"])(),Object(o["createBlock"])(u,{key:t,onClick:t=>e.selectSideEffect(a),detail:!0,style:e.activeIndex===a?"color: green":"color: black"},{default:Fe(()=>[Object(o["createVNode"])(d,null,{default:Fe(()=>[Object(o["createTextVNode"])(Object(o["toDisplayString"])(t.label),1)]),_:2},1024)]),_:2},1032,["onClick","style"]))),128))]),_:1})]),_:1}),Object(o["createVNode"])(h,{style:{overflowY:"auto",height:"78vh"}},{default:Fe(()=>[Object(o["createVNode"])("div",Me,[Object(o["createVNode"])(p,null,{default:Fe(()=>[null!==e.activeIndex?(Object(o["openBlock"])(),Object(o["createBlock"])(m,{key:0,modelValue:e.sides[e.activeIndex]["reason"],"onUpdate:modelValue":t[1]||(t[1]=t=>e.sides[e.activeIndex]["reason"]=t)},{default:Fe(()=>[He,$e,(Object(o["openBlock"])(!0),Object(o["createBlock"])(o["Fragment"],null,Object(o["renderList"])(e.drugs,(e,t)=>(Object(o["openBlock"])(),Object(o["createBlock"])(u,{key:t},{default:Fe(()=>[Object(o["createVNode"])(d,null,{default:Fe(()=>[Object(o["createTextVNode"])(Object(o["toDisplayString"])(e.drug.name),1)]),_:2},1024),Object(o["createVNode"])(b,{slot:"start",value:e.drug_inventory_id},null,8,["value"])]),_:2},1024))),128)),Ue,Object(o["createVNode"])(u,null,{default:Fe(()=>[Object(o["createVNode"])(d,null,{default:Fe(()=>[qe]),_:1}),Object(o["createVNode"])(b,{slot:"start",value:"other"})]),_:1}),Object(o["createVNode"])(u,null,{default:Fe(()=>[Object(o["createVNode"])(d,null,{default:Fe(()=>[Ge]),_:1}),Object(o["createVNode"])(b,{slot:"start",value:"drug"})]),_:1})]),_:1},8,["modelValue"])):Object(o["createCommentVNode"])("",!0)]),_:1})]),ze]),_:1})]),_:1})]),_:1})]),_:1}),Object(o["createVNode"])(_,null,{default:Fe(()=>[Object(o["createVNode"])(c,null,{default:Fe(()=>[Object(o["createVNode"])(j,{onClick:e.closeModal,slot:"end",color:"danger"},{default:Fe(()=>[Ye]),_:1},8,["onClick"]),Object(o["createVNode"])(j,{onClick:e.postSideEffects,slot:"end",disabled:!e.allSelected},{default:Fe(()=>[We]),_:1},8,["onClick","disabled"])]),_:1})]),_:1})],64)}));var Xe=Object(o["defineComponent"])({name:"Modal",props:{sideEffects:{type:Object,required:!0},drugs:{type:Array,default:[]}},methods:{closeModal(){De["X"].dismiss()},async postSideEffects(){await De["X"].dismiss(this.sides)},selectSideEffect(e){this.activeIndex=e}},computed:{allSelected(){return this.sides.filter(e=>e["reason"]).length===this.sides.length}},mounted(){this.sides=this.sideEffects},data(){return{content:"Content",extendedLabsEnabled:!1,appActivities:[],sides:[],specimens:[],reasons:["Routine","Targeted","Confirmatory","Stat","Repeat / Missing"],activeIndex:null}},components:{IonButton:De["d"],IonContent:De["n"],IonHeader:De["q"],IonTitle:De["P"],IonToolbar:De["Q"],IonLabel:De["x"],IonList:De["y"],IonItem:De["w"],IonRadioGroup:De["F"],IonRow:De["H"]}});a("e96c");const Je=x()(Xe,[["render",Ke],["__scopeId","data-v-546674a2"]]);var Qe=Je,Ze=a("8df6");class et extends d["e"]{constructor(){super()}static async fetchAvailableDrugStock(e){const t=await this.getJson("pharmacy/items",{drug_id:e});if(t&&t.length>0)return t.reduce((e,t)=>e+t.current_quantity,0)}}const tt={11:[30],21:[25],22:[60],24:[30,60,90,100],30:[90],39:[60],73:[120],74:[60],76:[1e3],297:[30,60,90],576:[30,60,90],613:[60],731:[60],732:[60],733:[60],734:[30],735:[30],736:[60],738:[60],931:[30,60,90],932:[30],954:[60],963:[30,60,90],968:[60],969:[30],971:[30,60,90],976:[60],977:[30],982:[30],983:[30,90],1039:[30,60,90],1043:[60],1044:[30],1056:[24],1216:[3,6,12]};class at extends b["a"]{constructor(e,t){super(e,54,t),this.drugHistory=[],this.currentDrugOrder=[],this.useDrugManagement=!1}async loadDrugManagementEnabled(){this.useDrugManagement=await n["b"].drugManagementEnabled()}getDrugHistory(){return this.drugHistory}getCurrentOrder(){return this.currentDrugOrder}buildDispensations(e,t,a){const n=[];for(let o=0;o<a;o++)n.push({drug_order_id:e,date:this.date,quantity:t/a});return n}saveDispensations(e){return b["a"].postJson("/dispensations",{dispensations:e,program_id:b["a"].getProgramID()})}async voidOrder(e){return b["a"].void("/dispensations/"+e,{})}async loadDrugHistory(){try{const e=await c["a"].getDrugOrderHistory(this.patientID);e&&(this.drugHistory=e)}catch(e){console.warn(e)}}async loadCurrentDrugOrder(){const e=await c["a"].getDrugOrders(this.patientID);if(e){if(this.useDrugManagement){const t=e.map(async e=>(e["available_stock"]=await et.fetchAvailableDrugStock(e.drug.drug_id),e));return void(this.currentDrugOrder=await Promise.all(t))}this.currentDrugOrder=e}}getDrugPackSizes(e){return e in tt?tt[e]:[30,60,90]}calcCompletePack(e,t){const a=e.barcodes.sort((e,t)=>e.tabs-t.tabs);if(0==a.length||0==t)return t;for(const o in a){const{tabs:e}=a[o];if(parseInt(e)>=t)return e}const n=parseInt(a[a.length-1].tabs);return n}}var nt=Object(o["defineComponent"])({mixins:[Oe],components:{HisStandardForm:se["a"]},data:()=>({fields:[],currentWeight:-1,weightTrail:[],customRegimens:[],labOrders:[],isDrugRefillPatient:!1,weightLossPercentageNum:0,lostTenPercentBodyWeight:!1,CxCaEnabled:!1,CxCaStartAge:-1,CxCaMaxAge:-1,DueForCxCa:!1,currentlyPregnant:!1,patientHitMenopause:!1,hasPregnancyObsToday:!1,autoSelect3HP:!1,labOrderFieldContext:{},consultation:{},prescription:{},dispensation:{},completed3HP:!1,hasTbHistoryObs:!1,allergicToSulphur:!1,TBSuspected:!1,presentedTBSymptoms:!1,askAdherence:!1,lastDrugsReceived:[],sideEffectsHistory:{},onPermanentFPMethods:!1,guardianVisit:!1,reasonForDecliningTPTObs:{},malawiSideEffectReasonObs:[],otherSideEffectReasonObs:[],wasTransferredIn:!1,dateStartedArt:"",clientHadAHysterectomy:!1}),watch:{ready:{async handler(e){if(e){if(this.consultation=new Ne(this.patientID,this.providerID),this.prescription=new m(this.patientID,this.providerID),this.dispensation=new at(this.patientID,this.providerID),await this.initAdherence(this.patient,this.providerID),await this.guardianOnlyVisit(),this.currentWeight=Number(await this.patient.getRecentWeight()),this.wasTransferredIn=await this.getTransferInStatus()||!1,this.currentWeight=Number(await this.patient.getRecentWeight()),this.dateStartedArt=await this.getDateStartedArt(),this.isDrugRefillPatient=await Ze["a"].isDrugRefillPatient(this.patientID),this.sideEffectsHistory=await this.consultation.getDrugSideEffects(),this.hasTbHistoryObs=await this.consultation.hasTreatmentHistoryObs(),this.CxCaEnabled=await n["b"].cervicalCancerScreeningEnabled(),this.weightTrail=await this.patient.getWeightHistory(),this.weightLossPercentageNum=this.patient.getWeightLossPercentageFromTrail(this.weightTrail),this.lostTenPercentBodyWeight=this.weightLossPercentageNum>=10,this.labOrders=await this.getVlLabData(),this.CxCaEnabled){const{start:e,end:t}=await n["b"].cervicalCancerScreeningAgeBounds();this.CxCaMaxAge=t,this.CxCaStartAge=e,this.DueForCxCa=await this.consultation.clientDueForCxCa(),this.clientHadAHysterectomy=await this.consultation.clientHasHadAHysterectomy()}this.patient.isChildBearing()&&(this.hasPregnancyObsToday=await this.patient.hasPregnancyObsToday(),this.currentlyPregnant=await this.patient.isPregnant()),this.patient.isFemale()&&(this.patientHitMenopause=await this.consultation.patientHitMenopause()),this.hasTbHistoryObs&&(this.completed3HP=await this.consultation.patientCompleted3HP()),this.completed3HP||(this.completed3HP=await this.consultation.hasCompleteTptDispensations()),this.autoSelect3HP=await n["b"].threeHPAutoSelectEnabled(),this.askAdherence=this.adherence.receivedDrugsBefore(),this.fields=this.getFields(),this.onPermanentFPMethods=await this.consultation.getTLObs(),this.lastDrugsReceived=await this.consultation.getPreviousDrugs()}},immediate:!0}},methods:{async onFinish(e,t){const a=await this.consultation.createEncounter();if(!a)return Object(j["e"])("Unable to create encounter");const n=await this.resolveObs(t,"consultation"),o=(await Promise.all([...this.malawiSideEffectReasonObs,...this.otherSideEffectReasonObs,this.reasonForDecliningTPTObs])).filter(e=>!Object(h["isEmpty"])(e)),i=await this.consultation.saveObservationList([...n,...o]);if(this.askAdherence&&!this.isNonePatientClient()&&await this.saveAdherence(),!i)return Object(j["e"])("Unable to save patient observations");Object(j["d"])("Observations and encounter created!"),e.refer_to_clinician&&"Yes"===e.refer_to_clinician.value?this.gotoPatientDashboard():this.nextTask()},async getTransferInStatus(){const e=await Ne.getFirstValueCoded(this.patientID,"Ever received ART"),t=await Ne.getFirstObs(this.patientID,"Has transfer letter"),a=t?l["b"].toStandardHisFormat(t.obs_datetime):"";return e&&e.match(/yes/i)&&t&&(""+t.value_coded).match(/yes/i)&&a===this.consultation.getDate()},async getDateStartedArt(){const e=await Ne.getFirstValueDatetime(this.patientID,"Date ART started");return e?l["b"].toStandardHisFormat(e):""},async checkIfWeightLossIsControlled(e){if(this.lostTenPercentBodyWeight&&(""+e.label).match(/malnutrition/i)&&(""+e.value).match(/no/i)){const t=await Object(y["a"])("Recommendation",`Patient's weight has dropped by ${this.weightLossPercentageNum}% , is this controlled weight loss??`,"Please verify",[{name:"Confirm weight loss",slot:"start",color:"success"},{name:"Confirm controlled",slot:"end",color:"primary"}]);e.value="Confirm weight loss"===t?"Yes":"No"}},async guardianOnlyVisit(){const e=await this.consultation.getClient();this.guardianVisit="No"===e},async checkVLReminder(){const e=await V["a"].getPatientVLInfo(this.patientID);if(!0===e.eligibile){const t=await De["X"].create({component:Be,backdropDismiss:!1,cssClass:"large-modal",componentProps:{VLData:e}});t.present();const{data:a}=await t.onDidDismiss();switch(a){case"order":await this.labOrderFieldContext.launchOrderSelection();break;case"wait":await this.waitForVL();break;case"later":break;default:break}}},async waitForVL(e=null){const t=new Re(this.patientID,this.providerID),a=await t.createEncounter(),n=await t.buildDefferedOrder(e);if(!a)return Object(j["e"])("Unable to create encounter");await t.saveObservationList(n)},canScreenCxCa(){const e=this.patient.getAge();return this.patient.isFemale()&&this.DueForCxCa&&this.CxCaEnabled&&e>=this.CxCaStartAge&&e<=this.CxCaMaxAge&&!this.clientHadAHysterectomy},pregnancyEligible(){return this.patient.isChildBearing()&&!this.onPermanentFPMethods},showCurrentContraceptionMethods(e){return this.pregnancyEligible()&&!this.patientHitMenopause&&!this.isPregnant(e)&&!this.isANCclient()},showNewContraceptionMethods(e){return this.pregnancyEligible()&&!this.patientHitMenopause&&!this.isPregnant(e)&&!this.isOnTubalLigation(e)&&!this.isANCclient()},isPregnant(e){return e.pregnant_breastfeeding?this.inArray(e.pregnant_breastfeeding,e=>"Pregnant"===e.label&&"Yes"===e.value):this.currentlyPregnant},isOnTubalLigation(e){return this.inArray(e.current_fp_methods,e=>"TUBAL LIGATION"===e.value)},async disableFPMethods(e,t){if(t.isChecked&&"NONE"===t.label)return e.map(e=>("NONE"!=e.label&&(e.isChecked=!1,e.disabled=!1),e));if("NONE"!=t.label&&t.isChecked){t.label.match(/condom/gi)&&Object(j["b"])("Combine with other modern methods of family planning");const a=Object(h["findIndex"])(e,{label:"NONE"});e[a].isChecked=!1;const n=this.consultation.familyPlanningMethods(t.label,e),o=Object(h["findIndex"])(n,{label:t.label});return n[o].isChecked=!0,n}return e.map(e=>(e.disabled=!1,e))},disablePrescriptions(e,t){if(t.isChecked&&"NONE OF THE ABOVE"===t.label)return e.map(e=>("NONE OF THE ABOVE"!=e.label&&(e.isChecked=!1),e));if("NONE OF THE ABOVE"!=t.label&&t.isChecked){const t=Object(h["findIndex"])(e,{label:"NONE OF THE ABOVE"});e[t].isChecked=!1}return e},buildMedicationOrders(e){if(this.inArray(e,e=>"NONE OF THE ABOVE"===e.label))return this.consultation.buildValueCoded("Prescribe drugs","No");const t=this.consultation.buildValueCoded("Prescribe drugs","Yes"),a=e.map(e=>this.consultation.buildValueCoded("Medication orders",e.label));return[t,...a]},declinedFPM(e){return this.inArray(e.fp_methods,e=>"NONE"===e.value)&&this.inArray(e.current_fp_methods,e=>"NONE"===e.value)},riskOfUnplannedPregnancy(e){return"At risk of unplanned pregnancy"===e.reason_for_no_fpm.value},showOtherSideEffects(e){return this.inArray(e.side_effects,e=>"Other"===e.label&&"Yes"===e.value)},hasTBSymptoms(e){return this.presentedTBSymptoms=this.inArray(e.tb_side_effects,e=>"Yes"===e.value),this.presentedTBSymptoms},async buildSideEffectObs(e,t){const a=await this.getSideEffectsReasons(e);if(this[t]=[],void 0===a)return!1;if(-1!=a){const e=B["a"].getCachedConceptID("Drug induced",!0),n=e=>!!(""+e).match(/other|drug/i);this[t]=a.map(t=>({concept_id:e,value_coded:B["a"].getCachedConceptID(t.label,!0),value_text:n(t.reason)?"Past medication history":null,value_drug:n(t.reason)?null:t.reason}))}return!0},async getSideEffectsReasons(e){const t=e.filter(e=>!(""+e.label).match(/other/i)&&"Yes"===e.value);if(t.length>0){const e=await De["X"].create({component:Qe,backdropDismiss:!1,cssClass:"large-modal",componentProps:{sideEffects:t,drugs:this.lastDrugsReceived}});e.present();const{data:a}=await e.onDidDismiss();return a}return-1},getFPMethods(e=[],t){const a=this.consultation.getFamilyPlanningMethods(),n=a.filter(t=>!e.includes(t));return n.map(e=>({label:e,value:e,isChecked:t.map(e=>e.label).includes(e)}))},getOptions(e,t){return e.map(e=>{const a=Object(h["find"])(t,{label:e});return{label:e,value:a?a.value:"",other:{values:this.yesNoOptions()}}})},getContraindications(e){const t=B["a"].getConceptsByCategory("contraindication",!0).map(e=>e.name);return this.getOptions([...t,"Other"],e)},getOtherContraindications(e){const t=B["a"].getConceptsByCategory("side_effect",!0).map(e=>e.name),a=t.pop();return this.getOptions([...t,"Other (Specify)",""+a],e)},getTBSymptoms(e){const t=B["a"].getConceptsByCategory("tb_symptom",!0).map(e=>e.name);return this.getOptions([...t],e)},getReasonsForNoCxcaOptions(){return B["a"].getConceptsByCategory("reason_for_no_cxca").map(e=>({label:e.name,value:e.name,other:{c:e}}))},runAppendOptionParams(e,t){const a=t.filter(e=>e.isChecked).map(e=>e.label);return e.map(e=>{var t;if("function"===typeof(null===e||void 0===e||null===(t=e.other)||void 0===t?void 0:t.appendOptionParams)){var n;const t=null===e||void 0===e||null===(n=e.other)||void 0===n?void 0:n.appendOptionParams();if("object"===typeof t){const n={label:e.label,value:e.value,other:e.other};return t.isChecked?(n.isChecked=t.isChecked,delete t.isChecked):n.isChecked=a.includes(e.label),{...n,...t}}}return e})},didCompleted3HP(e){return!!this.completed3HP||!(!e.routine_tb_therapy||!e.routine_tb_therapy.value.match(/complete/i))},tptAutoSelectionMode(e){return this.autoSelect3HP&&!this.didCompleted3HP(e)},async on3HPValueUpdate(e,t,a){const n=e=>!!e.label.match(/IPT|3HP/i),o=(()=>{const t=e.reduce((e,t)=>(n(t)&&!(t.label in e)&&t.isChecked&&e.push(t.label),e),[]);return t.includes("IPT")&&(t.includes("3HP (RFP + INH)")||t.includes("INH 300 / RFP 300 (3HP)"))})(),i=n(t)&&e.filter(e=>n(e)).map(e=>!e.isChecked).every(Boolean);if(i&&this.tptAutoSelectionMode(a)){const e=await Object(y["c"])("Reasons for declining TPT","",["Patient declined","Side-effects (previous or current)","Stock-out","Starting TB treatment","Other"],[{name:"Done",slot:"start",role:"action"}]);this.reasonForDecliningTPTObs=this.consultation.buildValueText("Other reason for not seeking services",e.selection)}else this.reasonForDecliningTPTObs={};if(o){const t=await Object(y["a"])("IPT / 3HP conflict","IPT and 3HP can NOT be prescribed together","Please pick either one",[{name:"Prescribe 3HP",slot:"start",color:"primary"},{name:"Prescribe IPT",slot:"end",color:"primary"}]);return e.map(e=>(n(e)&&(e.isChecked="Prescribe IPT"===t&&"IPT"===e.label||"Prescribe 3HP"===t&&"INH 300 / RFP 300 (3HP)"===e.label),e))}return e.map(e=>(("3HP (RFP + INH)"===t.label&&"INH 300 / RFP 300 (3HP)"===e.label&&t.isChecked||"INH 300 / RFP 300 (3HP)"===t.label&&"3HP (RFP + INH)"===e.label&&t.isChecked)&&(e.isChecked=!1),e))},medicationOrderOptions(e,t=[]){const a=this.didCompleted3HP(e),n=this.tptAutoSelectionMode(e),o=e=>({disabled:!0,isChecked:!1,description:{color:"danger",show:"always",text:e}});return this.runAppendOptionParams([this.toOption("ARVs",{appendOptionParams:()=>({isChecked:n&&!this.TBSuspected})}),this.toOption("CPT",{appendOptionParams:()=>!n||this.TBSuspected||this.allergicToSulphur?this.allergicToSulphur?o("Allergic to CPT"):{disabled:!1}:{isChecked:!0}}),this.toOption("3HP (RFP + INH)",{appendOptionParams:()=>a?o("Completed 3HP"):this.TBSuspected?o("TB Suspect"):this.currentWeight<20?o("Weight below regulation"):void 0}),this.toOption("INH 300 / RFP 300 (3HP)",{appendOptionParams:()=>a?o("Completed 3HP"):this.TBSuspected?o("TB Suspect"):this.currentWeight<30?o("Weight below regulation"):{isChecked:n}}),this.toOption("IPT",{appendOptionParams:()=>a?o("Completed 3HP"):this.TBSuspected?o("TB Suspect"):void 0}),this.toOption("NONE OF THE ABOVE")],t)},isNonePatientClient(){return this.guardianVisit||this.isDrugRefillPatient},async getVlLabData(){const e=await Ve["a"].getOrdersIncludingGivenResultStatus(this.patientID);return Ve["a"].formatLabs(e)},isANCclient(){return"ANC"===V["a"].getSuspendedProgram()},getFields(){return[{id:"other_patient_prescription",proxyID:"prescription",helpText:"Medication to prescribe during this visit",type:r["b"].TT_MULTIPLE_SELECT,validation:e=>s["a"].required(e),computedValue:e=>({tag:"consultation",obs:this.buildMedicationOrders(e)}),onValueUpdate:(e,t,a)=>{const n=this.disablePrescriptions(e,t);return this.on3HPValueUpdate(n,t,a)},options:(e,t,a,n)=>Object(h["isEmpty"])(n)?this.medicationOrderOptions(e):n,condition:()=>this.isNonePatientClient(),exitsForm:()=>!0},...Object(z["b"])({id:"date_last_received_arvs",helpText:"Last ARV Dispensation",required:!0,condition:()=>this.wasTransferredIn,minDate:()=>this.dateStartedArt,maxDate:()=>this.consultation.getDate(),computeValue:e=>(this.prescription.setDate(e),{tag:"consultation",date:e,obs:this.consultation.buildValueDate("Date drug received from previous facility",e)}),estimation:{allowUnknown:!1}},this.consultation.getDate()),{id:"previous_arvs_received",helpText:"Last ARV drugs dispensed",type:r["b"].TT_MULTIPLE_SELECT,computedValue:e=>e.map(e=>e.other),validation:e=>s["a"].required(e),options:async()=>{if(!Object(h["isEmpty"])(this.customRegimens))return this.customRegimens;const e=new m(this.patientID,this.providerID);return this.customRegimens=(await e.getCustomIngridients()).map(e=>({label:e.name,value:e.drug_id,other:{...e}})),this.customRegimens},config:{showKeyboard:!0},condition:()=>this.wasTransferredIn},{id:"drug_interval",helpText:"Duration period for last received ARVs",type:r["b"].TT_NEXT_VISIT_INTERVAL_SELECTION,condition:()=>this.wasTransferredIn,validation:e=>s["a"].required(e),computedValue:e=>e.other.nextAppointment,options:()=>{const e=[{label:"2 weeks",value:14},{label:"1 month",value:28},{label:"2 months",value:56},{label:"3 months",value:84},{label:"4 months",value:112},{label:"5 months",value:140},{label:"6 months",value:168},{label:"7 months",value:196},{label:"8 months",value:224},{label:"9 months",value:252},{label:"10 months",value:280},{label:"11 months",value:308},{label:"12 months",value:336}];return e.map(({label:e,value:t})=>{this.prescription.setNextVisitInterval(t);const a=this.prescription.calculateDateFromInterval();return{label:e,value:t,other:{label:"Medication run-out date:",value:l["b"].toStandardHisDisplayFormat(a),nextAppointment:a,other:{label:"",value:[]}}}})}},{id:"arv_quantities",helpText:"Amount of drugs dispensed (From last ART Facility)",type:r["b"].TT_DRUG_TRANSFER_IN,validation:e=>this.validateSeries([()=>s["a"].required(e),()=>e.map(e=>{var t;return""===e.value||""===(null===e||void 0===e||null===(t=e.other)||void 0===t?void 0:t.pillsBrought)}).some(Boolean)?["Some Drugs are missing values"]:null]),computedValue:(e,t,a)=>({tag:"consultation",obs:e.map(async e=>{var t,n,o,i;const r=(null===e||void 0===e||null===(t=e.other)||void 0===t||null===(n=t.drug)||void 0===n?void 0:n.drug_id)||0;return{...await this.consultation.buildObs("Drug received from previous facility",{value_drug:r,value_datetime:(null===a||void 0===a?void 0:a.drug_interval)||null,value_numeric:(null===e||void 0===e?void 0:e.value)||0}),child:await this.consultation.buildObs("Number of tablets brought to clinic",{value_drug:r,value_numeric:(null===e||void 0===e||null===(o=e.other)||void 0===o?void 0:o.pillsBrought)||-1,value_datetime:(null===a||void 0===a||null===(i=a.date_last_received_arvs)||void 0===i?void 0:i.date)||null})}})}),options:(e,t,a)=>t.previous_arvs_received.map(e=>{const t=e["alternative_drug_name"]||e["drug_name"]||e["name"],n=Object(h["find"])(a,{label:t});let o="",i="";var r;n&&(o=null===n||void 0===n?void 0:n.value,i=null===n||void 0===n||null===(r=n.other)||void 0===r?void 0:r.pillsBrought);return{label:t,value:o,other:{drug:e,pillsBrought:i}}}),condition:()=>this.wasTransferredIn},{id:"patient_lab_orders",helpText:"Lab orders",type:r["b"].TT_LAB_ORDERS,unload:async()=>{await this.checkVLReminder();const e=this.labOrders.filter(e=>"No"===e.result_given);if(e.length&&await Object(j["a"])("Result(s) Given to Client?")){const t=new b["a"](this.patientID,-1,this.providerID),a=e.reduce((e,a)=>[...e,...a.resultIds.map(async e=>(t.encounterID=a.encounter_id,t.saveObs(await t.buildObs("Result Given to Client",{value_coded:"Yes",obs_group_id:e}))))],[]);await Promise.all(a)}this.labOrders=await this.getVlLabData()},onload:e=>this.labOrderFieldContext=e,options:()=>[{label:"Lab orders",value:"order trail",other:{values:this.labOrders}}],config:{printOrder:e=>new le["a"](this.patientID).printLabOrderLbl(e),hiddenFooterBtns:["Clear"],footerBtns:[{name:"Order",size:"large",slot:"end",color:"primary",visible:!0,onClick:async()=>{Object(h["isEmpty"])(this.labOrderFieldContext)||await this.labOrderFieldContext.launchOrderSelection()}}]}},{id:"pregnant_breastfeeding",helpText:"Patient Pregnant or breastfeeding?",condition:()=>!this.hasPregnancyObsToday&&this.pregnancyEligible(),type:r["b"].TT_MULTIPLE_YES_NO,validation:e=>this.validateSeries([()=>s["a"].required(e),()=>s["a"].anyEmpty(e)]),computedValue:e=>{let t=[];return this.isANCclient()&&t.push(this.consultation.buildValueCoded("Is patient pregnant","Yes")),t=t.concat(e.map(e=>this.consultation.buildValueCoded(e.other.concept,e.value))),{obs:t,tag:"consultation"}},options:e=>{const t=[];return this.isANCclient()||t.push({label:"Pregnant",value:"",other:{values:this.yesNoOptions(),concept:"Is patient pregnant"}}),t.push({label:"Breastfeeding",value:"",other:{values:this.yesNoOptions(),concept:"Is patient breast feeding"}}),e.pregnant_breastfeeding||t}},{id:"patient_weight_chart",helpText:"Patient weight chart",type:r["b"].TT_WEIGHT_CHART,options:async()=>{const e=await this.patient.getBMI(),t=this.weightTrail;return[{label:"Weight for patient",value:"Weight trail",other:{bmi:e,values:t.map(e=>({x:l["b"].toStandardHisDisplayFormat(e.date),y:e.weight})),age:this.patient.getAge()}}]},config:{hiddenFooterBtns:["Clear"]}},{id:"has_fp_methods",helpText:"",type:r["b"].TT_TEXT_BANNER,condition:()=>this.onPermanentFPMethods,options:()=>this.mapStrToOptions(["Patient is on Tubal ligation method"])},{id:"current_fp_methods",helpText:"What method are you currently on?",type:r["b"].TT_MULTIPLE_SELECT,validation:e=>s["a"].required(e),onValueUpdate:(e,t)=>this.disableFPMethods(e,t),computedValue:e=>({tag:"consultation",obs:e.map(e=>this.consultation.buildValueCoded("Family planning method",e.value))}),condition:e=>this.showCurrentContraceptionMethods(e),options:(e,t)=>this.getFPMethods([],t)},{id:"fp_methods",helpText:"What method are you providing today?",type:r["b"].TT_MULTIPLE_SELECT,condition:e=>this.showNewContraceptionMethods(e),validation:e=>s["a"].required(e),onValueUpdate:(e,t)=>this.disableFPMethods(e,t),computedValue:e=>({tag:"consultation",obs:e.map(e=>this.consultation.buildValueCoded("Family planning, action to take",e.value))}),options:(e,t)=>this.getFPMethods([],t)},{id:"reason_for_no_fpm",helpText:"Main reason for not using family planning methods",type:r["b"].TT_SELECT,validation:e=>s["a"].required(e),condition:e=>this.declinedFPM(e),computedValue:e=>({tag:"consultation",obs:this.consultation.buildValueText("Why does the woman not use birth control",e.value)}),options:()=>this.mapStrToOptions(["Not Sexually active","Patient want to get pregnant","Not needed for medical reasons","At risk of unplanned pregnancy","Menopause"])},{id:"specific_reason_for_no_fpm",helpText:"Specific reason for not using family planning methods",type:r["b"].TT_SELECT,validation:e=>s["a"].required(e),computedValue:e=>({tag:"consultation",obs:this.consultation.buildValueText("Reason for not using contraceptives",e.value)}),condition:e=>this.riskOfUnplannedPregnancy(e),options:()=>this.mapStrToOptions(["Following wishes of spouse","Religious reasons","Afraid of side effects","Never though about it","Indifferent (does not mind getting pregnant)"])},{id:"offer_contraceptives",helpText:"Offer contraceptives",type:r["b"].TT_SELECT,validation:e=>s["a"].required(e),condition:e=>this.riskOfUnplannedPregnancy(e),computedValue:e=>({tag:"consultation",obs:this.consultation.buildValueCoded("Family planning, action to take",e.value)}),options:()=>[{label:"Accepted",value:"Yes"},{label:"Declined",value:"No"},{label:"Discuss with spouse",value:"Discuss with spouse"}]},{id:"offered_intervention",helpText:"Offered intervention",type:r["b"].TT_MULTIPLE_SELECT,validation:e=>s["a"].required(e),condition:e=>"Accepted"===e.offer_contraceptives.value,computedValue:e=>({tag:"consultation",obs:e.map(e=>this.consultation.buildValueCoded(e.label,e.value))}),options:(e,t)=>this.getFPMethods(["NONE"],t)},{id:"offer_cxca",helpText:"Refer client for CxCa screening",type:r["b"].TT_SELECT,validation:e=>s["a"].required(e),condition:e=>this.canScreenCxCa()&&!this.isPregnant(e),computedValue:e=>({tag:"consultation",obs:this.consultation.buildValueCoded("Offer CxCa",e.value)}),options:()=>this.yesNoOptions()},{id:"reason_for_no_cxca",helpText:"Reason for NOT offering CxCa",type:r["b"].TT_SELECT,validation:e=>s["a"].required(e),condition:e=>"No"===e.offer_cxca.value,computedValue:e=>({tag:"consultation",obs:this.consultation.buildValueCoded("Reason for NOT offering CxCa",e.value)}),options:()=>this.getReasonsForNoCxcaOptions()},...Object(z["b"])({id:"previous_cxca_test_date",helpText:"Previous CxCa test",required:!0,minDate:()=>this.patient.getBirthdate(),maxDate:()=>Ne.getSessionDate(),condition:e=>"Not due for screening"===e.reason_for_no_cxca.value,computeValue:(e,t)=>t?{tag:"consultation",obs:this.consultation.buildValueDateEstimated("CxCa test date",e)}:{tag:"consultation",obs:this.consultation.buildValueDate("CxCa test date",e)},estimation:{allowUnknown:!0,estimationFieldType:z["a"].MONTH_ESTIMATE_FIELD}}),{id:"previous_side_effects",helpText:"Side effects / Contraindications history",type:r["b"].TT_DATA_TABLE,config:{columns:()=>[[D["a"].thTxt("Date"),D["a"].thTxt("Condition"),D["a"].thTxt("Drug induced"),D["a"].thTxt("Drug")]],rows:()=>Object.keys(this.sideEffectsHistory).map(e=>Object.values(this.sideEffectsHistory[e]).filter(e=>!Object(h["isEmpty"])(e.name)).map(t=>[D["a"].tdDate(e),D["a"].td(t.name),D["a"].td(t.drug_induced?"Yes":"No"),D["a"].td(t.drug)])).reduce((e,t)=>e.concat(t),[])}},{id:"side_effects",helpText:"Contraindications / Side effects (select either 'Yes' or 'No')",type:r["b"].TT_MULTIPLE_YES_NO,validation:e=>this.validateSeries([()=>s["a"].required(e),()=>s["a"].anyEmpty(e)]),computedValue:e=>({tag:"consultation",obs:e.map(async e=>({...await this.consultation.buildValueCoded("Malawi ART side effects",e.label),child:await this.consultation.buildValueCoded(e.label,e.value)}))}),beforeNext:e=>this.buildSideEffectObs(e,"malawiSideEffectReasonObs"),options:(e,t)=>this.getContraindications(t)},{id:"other_side_effects",helpText:"Other Contraindications / Side effects (select either 'Yes' or 'No')",type:r["b"].TT_MULTIPLE_YES_NO,onValue:async e=>(await this.checkIfWeightLossIsControlled(e),!0),condition:e=>this.showOtherSideEffects(e),onConditionFalse:()=>this.otherSideEffectReasonObs=[],validation:e=>this.validateSeries([()=>s["a"].required(e),()=>s["a"].anyEmpty(e)]),computedValue:e=>({tag:"consultation",obs:e.filter(e=>"Other (Specify)"!=e.label).map(async e=>({...await this.consultation.buildValueCoded("Other side effect",e.label),child:await this.consultation.buildValueCoded(e.label,e.value)}))}),beforeNext:e=>this.buildSideEffectObs(e,"otherSideEffectReasonObs"),options:(e,t)=>this.getOtherContraindications(t)},{id:"other_side_effect_specify",helpText:"Other Contraindications / Side effects (specify)",type:r["b"].TT_NOTE,computedValue:async e=>({tag:"consultation",obs:{...await this.consultation.buildValueCoded("Other side effect","Other (Specify)"),child:await this.consultation.buildValueText("Other (Specify)",e.value)}}),condition:e=>this.inArray(e.other_side_effects,e=>"Other (Specify)"===e.label&&"Yes"===e.value),validation:e=>s["a"].required(e)},{id:"on_tb_treatment",helpText:"On TB Treatment?",type:r["b"].TT_SELECT,validation:e=>s["a"].required(e),computedValue:e=>{this.TBSuspected="Yes"===e.value;const t=[this.consultation.buildValueCoded("TB treatment",e.value)];return this.TBSuspected&&t.push(this.consultation.buildValueCoded("TB Status","Confirmed TB on treatment")),{tag:"consultation",obs:t}},options:()=>this.yesNoOptions()},{id:"tb_side_effects",helpText:"TB Associated symptoms",type:r["b"].TT_MULTIPLE_YES_NO,onValue:async e=>(await this.checkIfWeightLossIsControlled(e),!0),validation:e=>this.validateSeries([()=>s["a"].required(e),()=>s["a"].anyEmpty(e)]),condition:e=>e.on_tb_treatment.value.match(/no/i),options:(e,t)=>this.getTBSymptoms(t),computedValue:e=>(this.presentedTBSymptoms=this.inArray(e,e=>"Yes"===e.value),{tag:"consultation",obs:e.map(async e=>({...await this.consultation.buildValueCoded("Routine TB Screening",e.label),child:await this.consultation.buildValueCoded(e.label,e.value)}))})},{id:"tb_status",helpText:"TB Status",type:r["b"].TT_SELECT,validation:e=>s["a"].required(e),condition:e=>this.hasTBSymptoms(e),onConditionFalse:()=>this.TBSuspected=!1,defaultValue:()=>"TB Suspected",computedValue:e=>(this.TBSuspected="TB Suspected"===e.value,{tag:"consultation",obs:this.consultation.buildValueCoded("TB Status",e.value)}),beforeNext:async e=>{if("TB Suspected"===e.value){const e=await Object(y["a"])("Lab Order","The patient is a TB suspect. Do you want to take lab orders?","",[{name:"Order now",slot:"start",color:"success"},{name:"NOT now",slot:"end",color:"danger"}]);"Order now"===e&&this.labOrderFieldContext.launchOrderSelection(["TB Microscopic Exam","GeneXpert","Culture & Sensitivity","TB Tests"])}return!0},options:()=>this.mapStrToOptions(["TB NOT suspected","TB Suspected","Confirmed TB Not on treatment"])},{id:"routine_tb_therapy",helpText:"TB preventive therapy (TPT) history",type:r["b"].TT_SELECT,validation:e=>s["a"].required(e),condition:()=>!this.hasTbHistoryObs,computedValue:e=>({tag:"consultation",obs:this.consultation.buildValueText("Previous TB treatment history",e.value)}),options:()=>this.mapStrToOptions(["Currently on IPT","Currently on 3HP","Complete course of 3HP in the past (3 months RFP+INH)","Complete course of IPT in the past (min. 6 months of INH)","Aborted course of 3HP or IPT in the past","Never taken IPT or 3HP"])},{id:"allergic_to_sulphur",helpText:"Allergic to Cotrimoxazole",type:r["b"].TT_SELECT,validation:e=>s["a"].required(e),computedValue:e=>(this.allergicToSulphur=e.value.match(/unknown/i)?null:!!e.value.match(/yes/i),{tag:"consultation",obs:()=>this.consultation.buildValueCoded("Allergic to sulphur",null===this.allergicToSulphur?e.value:this.allergicToSulphur?"Yes":"No")}),options:()=>this.yesNoUnknownOptions()},...this.getAdherenceFields(this.askAdherence),{id:"refer_to_clinician",helpText:"Refer to clinician",type:r["b"].TT_SELECT,condition:()=>Ce["a"].isNurse(),validation:e=>s["a"].required(e),computedValue:e=>({tag:"consultation",obs:this.consultation.buildValueCoded("Refer to clinician",e.value)}),options:()=>this.yesNoOptions()},{id:"medication_to_prescribe",proxyID:"prescription",helpText:"Medication to prescribe during this visit",type:r["b"].TT_MULTIPLE_SELECT,condition:e=>!e.refer_to_clinician||(""+e.refer_to_clinician.value).match(/no/i),validation:e=>s["a"].required(e),computedValue:e=>({tag:"consultation",obs:this.buildMedicationOrders(e)}),onValueUpdate:(e,t,a)=>{const n=this.disablePrescriptions(e,t);return this.on3HPValueUpdate(n,t,a)},options:(e,t,a,n)=>this.medicationOrderOptions(e,n),config:{footerBtns:[{name:"Update allergic to CPT",onClickComponentEvents:{refreshOptions:(e,t,a)=>(this.allergicToSulphur="Allergic"===e.btnOutput,this.medicationOrderOptions(a,t))},onClick:()=>Object(y["a"])("Allergic to Cotrimoxazole update","Is the patient allergic to cotrimoxazole.","",[{name:"Allergic",slot:"start",color:"success"},{name:"NOT Allergic",slot:"end"}])}]}}]}}});const ot=x()(nt,[["render",ye]]);var it=ot;function rt(e,t,a,n,i,r){const s=Object(o["resolveComponent"])("his-standard-form");return Object(o["openBlock"])(),Object(o["createBlock"])(s,{skipSummary:!0,cancelDestinationPath:e.cancelDestination,fields:e.fields},null,8,["cancelDestinationPath","fields"])}var st=Object(o["defineComponent"])({mixins:[v["a"]],data:()=>({dispensation:{}}),watch:{ready:{async handler(e){e&&(this.dispensation=new at(this.patientID,this.providerID),await this.dispensation.loadDrugManagementEnabled(),await this.dispensation.loadCurrentDrugOrder(),await this.dispensation.loadDrugHistory(),this.fields=this.getFields())},immediate:!0}},methods:{saveDispensations(e){const t=this.buildDispensations(e);return this.dispensation.saveDispensations(t)},buildDispensations(e){var t;if(!Object(h["isEmpty"])(null===(t=e.other)||void 0===t?void 0:t.dispenses)){let t=[];return e.other.dispenses.forEach(([a,n])=>{t=[...t,...this.dispensation.buildDispensations(e.other.order_id,a,n)]}),t}return this.dispensation.buildDispensations(e.other.order_id,parseInt(e.value.toString()),1)},buildMedicationHistory(){return this.dispensation.getDrugHistory().sort((e,t)=>{const a=new Date(e.order.start_date),n=new Date(t.order.start_date);return n-a}).map(e=>({medication:e.drug.name,date:l["b"].toStandardHisDisplayFormat(e.order.start_date),amount:e.quantity}))},buildOrderOptions(){return this.dispensation.getCurrentOrder().map(e=>({label:e.drug.name,value:e.quantity||0,other:{order:e,drug_id:e.drug.drug_id,order_id:e.order.order_id,available_stock:e.available_stock||"-",amount_needed:this.calculateCompletePack(e),pack_sizes:this.getPackSizesRows(e.drug.drug_id,e.available_stock||0)}}))},getPackSizesRows(e,t){const a=this.dispensation.getDrugPackSizes(e);return a.map(e=>{const a=t>0?Math.floor(t/e):"-";return[e,a,0,0]})},calculateCompletePack(e){const t=parseFloat(e.amount_needed)-(e.quantity||0);return t<=0?0:this.dispensation.calcCompletePack(e,t)},isDoneDispensing(e){return e.map(e=>0!=e.value).every(Boolean)},async isValidDispensation(e){let t=!0;const a=parseInt(e.value.toString()),n=e.other["amount_needed"],o=a/n*100;return o>110&&(t=await Object(j["a"])("Are you sure you want to dispense over 110% of the prescribed pill count?")),o<100&&(t=await Object(j["a"])("Are you sure you want to dispense less than 100% of the prescribe amount?")),t},getFields(){return[{id:"dispenses",helpText:"Dispensation",type:r["b"].TT_DISPENSATION_INPUT,onValueUpdate:async(e,t)=>-1!=e.value&&this.isDoneDispensing(t)?this.$router.push({name:"appointment"}):(e.other["amount_needed"]=e.other["amount_needed"]-(parseInt(e.value.toString())||0),e.other["amount_needed"]<0&&(e.other["amount_needed"]=0),await this.dispensation.loadCurrentDrugOrder(),this.buildOrderOptions()),onValue:async(e,t)=>{if(-1===e.value){const t=await this.dispensation.voidOrder(e.other.order_id);return!t}if(!t){const t=await this.isValidDispensation(e);if(!t)return!1}const a=await this.saveDispensations(e);return!!a||(Object(j["e"])("Unable to save dispensation"),!1)},config:{medicationHistory:this.buildMedicationHistory(),toolbarInfo:[{label:"Name",value:this.patient.getFullName()},{label:"Gender",value:this.patient.getGender()},{label:"Date Of Birth",value:l["b"].toStandardHisDisplayFormat(this.patient.getBirthdate())}],hiddenFooterBtns:["Clear","Finish"]},options:()=>this.buildOrderOptions()}]}}});const ct=x()(st,[["render",rt]]);var lt=ct;function dt(e,t,a,n,i,r){const s=Object(o["resolveComponent"])("his-standard-form");return Object(o["openBlock"])(),Object(o["createBlock"])(s,{fields:e.fields,activeField:e.activeField,onFinishAction:e.onFinish,skipSummary:!0,cancelDestinationPath:e.cancelDestination},null,8,["fields","activeField","onFinishAction","cancelDestinationPath"])}var ut=a("cc74");class pt extends b["a"]{constructor(e,t){super(e,51,t),this.sitePrefix=""}getSitePrefix(){return this.sitePrefix}async loadSitePrefix(){this.sitePrefix=await ut["b"].sitePrefix()}createArvNumber(e){return V["a"].postJson("/patient_identifiers/",{patient_id:this.patientID,identifier_type:4,identifier:e})}buildArvNumber(e){return`${this.sitePrefix}-ARV-${e}`}}var ht=Object(o["defineComponent"])({mixins:[v["a"]],components:{HisStandardForm:se["a"]},data:()=>({reception:{},activeField:"",hasARVNumber:!0,hasGuardian:!1,suggestedNumber:"",patientType:{}}),watch:{ready:{async handler(e){if(!e)return;const t=await this.patient.getGuardian();this.hasGuardian=!Object(h["isEmpty"])(t),this.reception=new pt(this.patientID,this.providerID),await this.reception.loadSitePrefix();const a=this.patient.getPatientIdentifier(4);if(""===a){this.hasARVNumber=!1;const e=await V["a"].getNextSuggestedARVNumber();this.suggestedNumber=e.arv_number.replace(/^\D+|\s/g,"")}this.patientType=new Ze["a"](this.patientID,this.providerID),await this.patientType.loadPatientType(),this.fields=this.getFields()},immediate:!0}},methods:{async onFinish(e,t){const a=await this.reception.createEncounter();if(!a)return Object(j["e"])("Unable to create encounter");const n=await this.resolveObs(t,"obs"),o=await this.reception.saveObservationList(n);if(!o)return Object(j["e"])("Unable to create Obs");if(e.capture_arv&&"Yes"===e.capture_arv.value){const e=await this.reception.createArvNumber(t.arv_number);if(!e)return Object(j["e"])("Unable to save Arv number")}Object(j["d"])("Encounter created");const i=e.who_is_present.filter(e=>"Yes"===e.value&&"Guardian Present?"===e.label);this.hasGuardian||Object(h["isEmpty"])(i)?this.nextTask():this.$router.push("/guardian/registration/"+this.patient.getID())},getFields(){return[{id:"who_is_present",helpText:"HIV reception",type:r["b"].TT_MULTIPLE_YES_NO,validation:e=>s["a"].required(e)||s["a"].neitherOr(e)||s["a"].anyEmpty(e),computedValue:e=>({tag:"obs",obs:e.map(({other:e,value:t})=>this.reception.buildValueCoded(e.concept,t))}),onValueUpdate:async(e,t)=>e.map(e=>(t.label!=e.label&&"No"===t.value&&(e.value="Yes"),e)),options:e=>e.who_is_present?e.who_is_present:[{label:"Patient present?",value:"",other:{concept:"Patient Present",property:"patient_present",values:this.yesNoOptions()}},{label:"Guardian present?",value:"",other:{concept:"Guardian Present",property:"guardian_present",values:this.yesNoOptions()}}]},{id:"capture_arv",helpText:"Capture ARV Number?",type:r["b"].TT_SELECT,requireNext:!0,condition:()=>!this.hasARVNumber&&"New patient"===this.patientType.getType(),validation:e=>s["a"].required(e),options:()=>this.yesNoOptions()},{id:"arv_number",helpText:"ART number",type:r["b"].TT_TEXT,computedValue:({value:e})=>e,validation:e=>s["a"].required(e),condition:e=>!this.hasARVNumber&&"Yes"===e.capture_arv.value,defaultValue:()=>this.suggestedNumber,config:{prependValue:()=>{const e=de["a"].getActiveApp();if(e&&e.programPatientIdentifiers){const t=e.programPatientIdentifiers["ARV Number"];return t.prefix()}return""}}}]}}});const bt=x()(ht,[["render",dt]]);var mt=bt;function gt(e,t,a,n,i,r){const s=Object(o["resolveComponent"])("his-standard-form");return Object(o["openBlock"])(),Object(o["createBlock"])(s,{skipSummary:!0,cancelDestinationPath:e.cancelDestination,fields:e.fields,onFinishAction:e.onSubmit},null,8,["cancelDestinationPath","fields","onFinishAction"])}var ft=Object(o["defineComponent"])({mixins:[J],watch:{ready:{async handler(e){e&&(await this.initStaging(this.patient),this.fields=[...this.getStagingFields(),this.getStagingSummaryField()])},immediate:!0}},methods:{async onSubmit(e,t){await this.submitStaging(t),Object(j["d"])("Staging information has been saved"),this.nextTask()}}});const Ot=x()(ft,[["render",gt]]);var jt=Ot,_t=a("ab49");function vt(e,t,a,n,i,r){const s=Object(o["resolveComponent"])("his-standard-form");return Object(o["openBlock"])(),Object(o["createBlock"])(s,{fields:e.fields,onFinishAction:e.onFinish,skipSummary:!0,cancelDestinationPath:e.cancelDestination},null,8,["fields","onFinishAction","cancelDestinationPath"])}var yt=a("80b5"),wt=Object(o["defineComponent"])({mixins:[v["a"]],components:{HisStandardForm:se["a"]},data:()=>({patientType:{}}),watch:{ready:{async handler(e){e&&(this.patientType=new Ze["a"](this.patientID,this.providerID),await this.patientType.loadPatientType(),this.fields=this.getFields())},immediate:!0}},methods:{async onFinish(e){var t,a;const n=await this.patientType.createEncounter();if(!n)return Object(j["e"])("Unable to create encounter");this.patientType.setLocationName(null===e||void 0===e||null===(t=e.location)||void 0===t?void 0:t.label),this.patientType.setPatientType(null===e||void 0===e||null===(a=e.patient_type)||void 0===a?void 0:a.value),await this.patientType.save(),Object(j["d"])("Observations and encounter created!"),this.nextTask()},facilityLocationField(){const e=yt["a"].getFacilityLocationField();return e.condition=e=>["Drug Refill","External consultation"].includes(e.patient_type.value),e},getFields(){return[{id:"patient_type",helpText:"Current type: "+this.patientType.getType(),type:r["b"].TT_SELECT,validation:e=>s["a"].required(e)||s["a"].notTheSame(e.value,this.patientType.getType()),options:()=>Ze["a"].getPatientTypes()},this.facilityLocationField()]}}});const Nt=x()(wt,[["render",vt]]);var Ct=Nt;function Vt(e,t,a,n,i,r){const s=Object(o["resolveComponent"])("his-standard-form");return Object(o["openBlock"])(),Object(o["createBlock"])(s,{fields:e.fields,onFinishAction:e.onFinish,skipSummary:!0,cancelDestinationPath:e.cancelDestination},null,8,["fields","onFinishAction","cancelDestinationPath"])}class Dt extends b["a"]{constructor(e,t){super(e,156,t)}getAssessmentValues(){return b["a"].getConceptsByCategory("fast_track")}}var kt=Object(o["defineComponent"])({mixins:[v["a"]],components:{HisStandardForm:se["a"]},data:()=>({fields:[],fastTrack:{},options:[],values:[],gender:null}),watch:{ready:{async handler(e){e&&this.init(this.patient)},immediate:!0}},methods:{async onFinish(e){const t=await this.fastTrack.createEncounter();if(!t)return Object(j["e"])("Unable to create fast track encounter");{const t=await this.buildObs(e),a=await this.fastTrack.saveObservationList(t);if(!a)return Object(j["e"])("Unable to save patient observations");Object(j["d"])("Observations and encounter created!"),this.nextTask()}},async init(e){this.gender=e.getGender(),this.fastTrack=new Dt(e.getID(),this.providerID),this.values=await this.getYesNo(),this.options=await this.getOptions(),this.fields=this.getFields()},async buildObs(e){const t=[];return t.push(await this.fastTrack.buildValueCoded("Assess for fast track",e.ft_assessment.value)),e.ft_questions&&(await e.ft_questions.forEach(async e=>{t.push(await this.fastTrack.buildValueCoded(e.label,e.value))}),t.push(await this.fastTrack.buildValueCoded("Fast track",e.book_client.value))),t},async getOptions(){const e=this.getYesNo(),t=await this.fastTrack.getAssessmentValues("fast_track").map(t=>({label:t.name,value:"",other:{values:e}}));return"M"===this.gender?t.filter(e=>!e.label.match(/Pregnant/i)):t},getYesNo(){return[{label:"yes",value:"Yes"},{label:"no",value:"No"}]},getFields(){return[{id:"ft_assessment",helpText:"Assess client for FT",type:r["b"].TT_SELECT,validation:e=>s["a"].required(e),options:()=>this.getYesNo()},{id:"ft_questions",helpText:"Assess client for FT",type:r["b"].TT_MULTIPLE_YES_NO,condition(e){return"Yes"===e.ft_assessment.value},validation:e=>s["a"].anyEmpty(e),options:()=>this.options},{id:"book_client",helpText:"Select type of visit to book",type:r["b"].TT_SELECT,condition(e){return"Yes"===e.ft_assessment.value},validation:e=>s["a"].required(e),options:()=>[{label:"Fast track",value:"No"},{label:"Normal visit",value:"No"}]}]}}});const Tt=x()(kt,[["render",Vt]]);var It=Tt;const xt={key:0,style:{color:"green"}},St={slot:"end"},Pt=Object(o["createTextVNode"])("add riskfactors"),At=Object(o["createVNode"])("h1",{style:{"text-align":"center"}},"Actions",-1),Et=Object(o["createTextVNode"])(" cancel "),Bt=Object(o["createTextVNode"])(" Refer to clinician "),Rt=Object(o["createTextVNode"])(" Hypertension Diagnosis "),Ft=Object(o["createTextVNode"])(" Enroll in HTN "),Lt=Object(o["createTextVNode"])(" Finish ");function Mt(e,t,a,n,i,r){const s=Object(o["resolveComponent"])("ion-title"),c=Object(o["resolveComponent"])("ion-button"),l=Object(o["resolveComponent"])("ion-toolbar"),d=Object(o["resolveComponent"])("ion-header"),u=Object(o["resolveComponent"])("data-table"),p=Object(o["resolveComponent"])("ion-content"),h=Object(o["resolveComponent"])("ion-label"),b=Object(o["resolveComponent"])("ion-radio"),m=Object(o["resolveComponent"])("ion-item"),g=Object(o["resolveComponent"])("ion-col"),f=Object(o["resolveComponent"])("ion-row"),O=Object(o["resolveComponent"])("ion-grid"),j=Object(o["resolveComponent"])("ion-radio-group"),_=Object(o["resolveComponent"])("ion-footer"),v=Object(o["resolveComponent"])("ion-page");return Object(o["openBlock"])(),Object(o["createBlock"])(v,null,{default:Object(o["withCtx"])(()=>[Object(o["createVNode"])(d,null,{default:Object(o["withCtx"])(()=>[Object(o["createVNode"])(l,null,{default:Object(o["withCtx"])(()=>[Object(o["createVNode"])(s,null,{default:Object(o["withCtx"])(()=>[Object(o["createVNode"])("span",null,"BP management screening on "+Object(o["toDisplayString"])(e.date),1),e.patientOnBPDrugs?(Object(o["openBlock"])(),Object(o["createBlock"])("small",xt," (Patient already on BP drugs)")):Object(o["createCommentVNode"])("",!0)]),_:1}),Object(o["createVNode"])("span",St,[e.totalRiskFactors>0?(Object(o["openBlock"])(),Object(o["createBlock"])(c,{key:0,color:"danger",onClick:e.showRiskFactors},{default:Object(o["withCtx"])(()=>[Object(o["createTextVNode"])("View/Edit risk factors "+Object(o["toDisplayString"])(e.totalRiskFactors),1)]),_:1},8,["onClick"])):Object(o["createCommentVNode"])("",!0),0===e.totalRiskFactors?(Object(o["openBlock"])(),Object(o["createBlock"])(c,{key:1,onClick:e.showRiskFactors},{default:Object(o["withCtx"])(()=>[Pt]),_:1},8,["onClick"])):Object(o["createCommentVNode"])("",!0)])]),_:1})]),_:1}),Object(o["createVNode"])(p,null,{default:Object(o["withCtx"])(()=>[Object(o["createVNode"])(u,{config:{showIndex:!1},columns:e.columns,rows:e.rows},null,8,["columns","rows"])]),_:1}),Object(o["createVNode"])(_,null,{default:Object(o["withCtx"])(()=>[Object(o["createVNode"])(l,null,{default:Object(o["withCtx"])(()=>[At,Object(o["createVNode"])(j,{modelValue:e.action,"onUpdate:modelValue":t[1]||(t[1]=t=>e.action=t)},{default:Object(o["withCtx"])(()=>[Object(o["createVNode"])(O,null,{default:Object(o["withCtx"])(()=>[Object(o["createVNode"])(f,null,{default:Object(o["withCtx"])(()=>[(Object(o["openBlock"])(!0),Object(o["createBlock"])(o["Fragment"],null,Object(o["renderList"])(e.items,(e,t)=>(Object(o["openBlock"])(),Object(o["createBlock"])(g,{size:"4",key:t},{default:Object(o["withCtx"])(()=>[Object(o["createVNode"])(m,null,{default:Object(o["withCtx"])(()=>[Object(o["createVNode"])(h,{style:{"font-size":"1.0rem","font-weight":"bold"}},{default:Object(o["withCtx"])(()=>[Object(o["createTextVNode"])(Object(o["toDisplayString"])(e.label),1)]),_:2},1024),Object(o["createVNode"])(b,{value:e},null,8,["value"])]),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1}),Object(o["createVNode"])(l,{color:"dark"},{default:Object(o["withCtx"])(()=>[Object(o["createVNode"])(c,{size:"large",color:"danger",slot:"start",onClick:e.gotoPatientDashboard},{default:Object(o["withCtx"])(()=>[Et]),_:1},8,["onClick"]),e.showClinicianButton?(Object(o["openBlock"])(),Object(o["createBlock"])(c,{key:0,size:"large",color:"danger",slot:"start",onClick:e.referPatient},{default:Object(o["withCtx"])(()=>[Bt]),_:1},8,["onClick"])):Object(o["createCommentVNode"])("",!0),e.patientHasHyperTensionObs?Object(o["createCommentVNode"])("",!0):(Object(o["openBlock"])(),Object(o["createBlock"])(c,{key:1,size:"large",slot:"end",onClick:e.goToDiagnosis},{default:Object(o["withCtx"])(()=>[Rt]),_:1},8,["onClick"])),e.patientHasHyperTensionObs&&!e.isEnrolledInHTN?(Object(o["openBlock"])(),Object(o["createBlock"])(c,{key:2,size:"large",slot:"end",onClick:e.enrollInHTN},{default:Object(o["withCtx"])(()=>[Ft]),_:1},8,["onClick"])):Object(o["createCommentVNode"])("",!0),e.patientHasHyperTensionObs?(Object(o["openBlock"])(),Object(o["createBlock"])(c,{key:3,size:"large",color:"success",slot:"end",onClick:e.onFinish},{default:Object(o["withCtx"])(()=>[Lt]),_:1},8,["onClick"])):Object(o["createCommentVNode"])("",!0)]),_:1})]),_:1})]),_:1})}var Ht=a("77fd"),$t=a("74f4"),Ut=a("80e3");const qt={background:"#444444"};var Gt=Object(o["defineComponent"])({mixins:[v["a"]],components:{DataTable:Ut["a"],IonTitle:De["P"],IonToolbar:De["Q"],IonHeader:De["q"],IonContent:De["n"],IonGrid:De["p"],IonRow:De["H"],IonButton:De["d"],IonRadioGroup:De["F"],IonRadio:De["E"],IonCol:De["m"],IonFooter:De["o"],IonPage:De["D"],IonItem:De["w"],IonLabel:De["x"]},data:()=>({htn:{},hasARVNumber:!0,suggestedNumber:"",columns:[[D["a"].thTxt("Date",{style:qt}),D["a"].thTxt("Systolic",{style:qt}),D["a"].thTxt("Diastolic",{style:qt}),D["a"].thTxt("BP Drugs",{style:qt}),D["a"].thTxt("Action / Note",{style:qt})]],bpGradeColorMap:{"N/A":"#ffffff",normal:"#ffffff","grade 1":"#FFC3CE","grade 2":"#F20056","grade 3":"#FF3333"},rows:[],riskFactors:[],action:null,trail:[],date:null,patientOnBPDrugs:!1,patientFirstVisit:!1,normatensive:!1,patientHasHyperTensionObs:!1,currentDrugs:[],items:[],isEnrolledInHTN:!1,isAliveOnHTN:!1,HTNProgramID:20,aliveState:160,refer:!1}),watch:{ready:{async handler(e){if(!e)return;const t=await De["V"].create({message:"Please wait...",backdropDismiss:!1});await t.present(),this.htn=new C["a"](this.patientID,this.providerID),this.trail=await this.htn.getBPTrail(),this.rows=this.formatBpTrailRows(this.trail),this.normatensive=C["a"].isBpNormotensive(this.trail),this.riskFactors=await this.getRiskFactors(),this.date=l["b"].toStandardHisDisplayFormat(d["e"].getSessionDate()),await this.isTransfered(),await this.hasHyperTenstion(),await this.getTreatmentStatus(),await this.getProgramStatus(),De["V"].dismiss(),this.patientFirstVisit&&this.patientOnBPDrugs&&await this.alertTransferIn(),this.getItems()},immediate:!0}},computed:{totalRiskFactors(){return this.riskFactors.filter(e=>"Yes"===e.value).length},showClinicianButton(){return!(Ce["a"].isClinician()&&Ce["a"].isDoctor())}},methods:{async onFinish(){if(this.action||this.refer){const a=await this.htn.createEncounter();if(!a)return Object(j["e"])("Unable to create encounter");if(this.refer){const e=await this.htn.saveValueCodedObs("Refer patient to clinician","Yes");if(!e)return Object(j["e"])("Unable to create Obs");this.gotoPatientDashboard()}else{var e,t;const a=await this.htn.saveValueTextObs("Plan",this.action.label);if(!a)return Object(j["e"])("Unable to create Obs");const n={state:this.action.value};if(await this.htn.enrollPatient(n),"function"===typeof(null===(e=this.action)||void 0===e||null===(t=e.other)||void 0===t?void 0:t.action))return this.action.other.action();this.nextTask()}}else Object(j["e"])("Please select an action")},referPatient(){this.refer=!0,this.onFinish()},goToDiagnosis(){return this.$router.push({path:"/art/encounters/hypertension_diagnosis/"+this.patientID})},async hasHyperTenstion(){const e=await we["a"].getFirstValueCoded(this.patientID,"Patient has hypertension");this.patientHasHyperTensionObs=!!(""+e).match(/yes|no/i)},async isTransfered(){const e=await we["a"].getFirstValueCoded(this.patientID,"Transferred");this.patientFirstVisit=!e},async getTreatmentStatus(){const e=await we["a"].getFirstValueText(this.patientID,"Treatment status");this.patientOnBPDrugs=!(!e||!e.match(/BP Drugs started/i))},async getProgramStatus(){const e=await V["a"].getPatientPrograms(this.patientID);this.isEnrolledInHTN=e.filter(e=>"HYPERTENSION PROGRAM"===e.program.name).length>0,this.isEnrolledInHTN&&await this.programState()},async programState(){const e=await V["a"].getPatientStates(this.patientID,this.HTNProgramID);this.isAliveOnHTN=e.filter(e=>"Alive"===e.name).length>0},async getRiskFactors(){const e=B["a"].getConceptsByCategory("risk factors"),t=e.map(async e=>{const t=await we["a"].getFirstValueCoded(this.patientID,e.name);return{concept:e.name,value:t}});return Promise.all(t)},formatBpTrailRows(e){return Object.keys(e).map(t=>{const a=l["b"].toStandardHisDisplayFormat(t);this.currentDrugs=this.currentDrugs.concat(e[t]["drugs"]);const n=()=>{const a=C["a"].getBpGrade(parseInt(e[t].sbp),parseInt(e[t].dbp));return this.bpGradeColorMap[a]},o={background:n()};return[D["a"].tdDate(a,{style:o}),D["a"].td(e[t].sbp,{style:o}),D["a"].td(e[t].dbp,{style:o}),D["a"].td(e[t]["drugs"].join(", "),{style:o}),D["a"].td(e[t].note,{style:o})]})},async showRiskFactors(){const e=await De["X"].create({component:Ht["a"],backdropDismiss:!1,cssClass:"large-modal",componentProps:{factors:this.riskFactors}});e.present();const{data:t}=await e.onDidDismiss();Object(h["isEmpty"])(t)||(this.riskFactors=t.map(e=>{const t=!0===e.isChecked?"Yes":"No";return{concept:e.concept,value:t}}))},async alertTransferIn(){const e=await Object(y["a"])("Transfer in","Does the patient want to transfer in for HTN management?","",[{name:"Yes",slot:"end",color:"success"},{name:"No",slot:"start",color:"danger"}]);"Yes"===e?(await this.enrollInHTN(),await this.setHtnTransferred("Yes"),this.patientFirstVisit=!1,await this.getItems()):(await this.setHtnTransferred("No"),this.nextTask())},async enrollInHTN(){try{const e=new $t["a"](this.patientID);e.setProgramId(this.HTNProgramID),e.setStateDate(V["a"].getSessionDate()),e.setStateId(this.aliveState),await e.enrollProgram(),await e.updateState(),this.isEnrolledInHTN=!0,Object(j["d"])("Patient is now enrolled in HTN")}catch(e){console.error(e),Object(j["e"])(e)}},async setHtnTransferred(e){const t=new Z["a"](this.patientID,this.providerID),a=await t.createEncounter();if(a){const a=await t.saveValueCodedObs("Transferred",e);a||Object(j["e"])("Unable to create observation Transferred for patient")}else Object(j["e"])("Unable to create patient transfer encounter")},async getItems(){this.currentDrugs.length>0?this.items=[{label:"Did not take prescribed drugs",value:"on treatment",other:{action:()=>this.$router.push("/art/encounters/bp_adherence/"+this.patientID)}},{label:"Continue drugs",value:"on treatment",other:{action:()=>this.$router.push("/art/encounters/bp_adherence/"+this.patientID)}},{label:"Review drugs",value:"on treatment",other:{action:()=>this.$router.push(`/art/encounters/bp_adherence/${this.patientID}?review=true`)}}]:(this.items=[{label:"Lifestyle advice given",value:"Lifestyle changes only"},{label:"Not yet stable on ART",value:"Symptomatic but not in treatment"},{label:"Patient declining BP drugs ",value:"Symptomatic but not in treatment"}],this.normatensive&&this.items.push({label:"Return to annual screening",value:"Alive"}),this.items.push({label:"Start anti hypertensives",value:"On treatment",other:{action:()=>this.$router.push("/art/encounters/bp_prescription/"+this.patientID)}}))}}});const zt=x()(Gt,[["render",Mt]]);var Yt=zt;function Wt(e,t,a,n,i,r){const s=Object(o["resolveComponent"])("his-standard-form");return Object(o["openBlock"])(),Object(o["createBlock"])(s,{fields:e.fields,onOnFinish:e.onFinish,skipSummary:!0,cancelDestinationPath:e.cancelDestination},null,8,["fields","onOnFinish","cancelDestinationPath"])}var Kt=Object(o["defineComponent"])({mixins:[v["a"]],components:{HisStandardForm:se["a"]},data:()=>({fields:[],fieldContext:{}}),watch:{ready:{handler(e){e&&(this.fields=this.getFields())}}},methods:{onFinish(){this.nextTask()},getFields(){return[{id:"patient_lab_orders",helpText:"Lab orders",type:r["b"].TT_LAB_ORDERS,onload:e=>{this.fieldContext=e},options:async()=>{const e=await Ve["a"].getOrdersIncludingGivenResultStatus(this.patientID),t=Ve["a"].formatLabs(e);return[{label:"Lab orders",value:"order trail",other:{values:t}}]},config:{printOrder:e=>new le["a"](this.patientID).printLabOrderLbl(e),hiddenFooterBtns:["Clear"],footerBtns:[{name:"Order",size:"large",slot:"end",color:"primary",visible:!0,onClick:async()=>{Object(h["isEmpty"])(this.fieldContext)||await this.fieldContext.launchOrderSelection()},visibleOnStateChange:e=>0===e.index}]}}]}}});const Xt=x()(Kt,[["render",Wt]]);var Jt=Xt;function Qt(e,t,a,n,i,r){const s=Object(o["resolveComponent"])("information-header"),c=Object(o["resolveComponent"])("visit-information"),l=Object(o["resolveComponent"])("ion-content"),d=Object(o["resolveComponent"])("his-footer"),u=Object(o["resolveComponent"])("ion-page");return Object(o["openBlock"])(),Object(o["createBlock"])(u,{style:{background:"#fff"}},{default:Object(o["withCtx"])(()=>[Object(o["createVNode"])(s,{items:e.patientCardInfo,numberOfColumns:4,onAddGuardian:e.addGuardian,onUpdate:e.updateDemographics,onUpdateARVNumber:e.updateARVNumber},null,8,["items","onAddGuardian","onUpdate","onUpdateARVNumber"]),Object(o["createVNode"])(l,null,{default:Object(o["withCtx"])(()=>[Object(o["createVNode"])(c,{getVisitDates:e.getPatientVisitDates,onOnPrint:e.printLabel,style:{"font-size":"11px"}},null,8,["getVisitDates","onOnPrint"])]),_:1}),Object(o["createVNode"])(d,{btns:e.btns},null,8,["btns"])]),_:1})}var Zt=a("23e6");const ea=Object(o["withScopeId"])("data-v-94355f20");Object(o["pushScopeId"])("data-v-94355f20");const ta={style:{padding:".1rem"}},aa={style:{width:"100%",display:"flex",justifyContent:"space-between",fontSize:"12px",margin:0,padding:0}};Object(o["popScopeId"])();const na=ea((function(e,t,a,n,i,r){const s=Object(o["resolveComponent"])("ion-item"),c=Object(o["resolveComponent"])("ion-list"),l=Object(o["resolveComponent"])("multi-column-view");return Object(o["openBlock"])(),Object(o["createBlock"])("div",ta,[Object(o["createVNode"])(l,{items:e.items,numberOfColumns:e.numberOfColumns},{default:ea(({entries:t})=>[Object(o["createVNode"])(c,null,{default:ea(()=>[(Object(o["openBlock"])(!0),Object(o["createBlock"])(o["Fragment"],null,Object(o["renderList"])(t,t=>(Object(o["openBlock"])(),Object(o["createBlock"])(s,{key:t.label,style:{padding:"0 !important",margin:"0 !important"}},{default:ea(()=>[Object(o["createVNode"])("div",aa,[Object(o["createVNode"])("span",null,Object(o["toDisplayString"])(t.label)+": ",1),t.other&&t.other.editable?(Object(o["openBlock"])(),Object(o["createBlock"])("span",{key:0,onClick:a=>e.onClick(t)},[Object(o["createVNode"])("a",null,[Object(o["createVNode"])("b",null,Object(o["toDisplayString"])(t.value),1)])],8,["onClick"])):(Object(o["openBlock"])(),Object(o["createBlock"])("b",{key:1,innerHTML:t.value||"N/A"},null,8,["innerHTML"]))])]),_:2},1024))),128))]),_:2},1024)]),_:1},8,["items","numberOfColumns"])])}));var oa=a("92c1"),ia=Object(o["defineComponent"])({name:"InformationHeader",components:{MultiColumnView:oa["a"]},props:{icon:{required:!1},items:{type:Object,required:!0},numberOfColumns:{type:Number,default:2}},emits:["update","updateARVNumber","addGuardian"],setup(e,{emit:t}){const a=e=>"demographics"===e.other.category?t("update",e.other.attribute):"arv_number"===e.other.category?t("updateARVNumber"):t("addGuardian");return{onClick:a}}});a("8945");const ra=x()(ia,[["render",na],["__scopeId","data-v-94355f20"]]);var sa=ra;const ca=Object(o["withScopeId"])("data-v-2d39ef92");Object(o["pushScopeId"])("data-v-2d39ef92");const la={class:"report-content"};Object(o["popScopeId"])();const da=ca((function(e,t,a,n,i,r){const s=Object(o["resolveComponent"])("report-table");return Object(o["openBlock"])(),Object(o["createBlock"])("div",la,[Object(o["createVNode"])(s,{asyncRows:e.getRows,columns:e.columns,config:e.tableConfig},null,8,["asyncRows","columns","config"])])})),ua=Object(o["createTextVNode"])(" Close ");function pa(e,t,a,n,i,r){const s=Object(o["resolveComponent"])("ion-title"),c=Object(o["resolveComponent"])("ion-toolbar"),l=Object(o["resolveComponent"])("ion-header"),d=Object(o["resolveComponent"])("information-header"),u=Object(o["resolveComponent"])("ion-content"),p=Object(o["resolveComponent"])("ion-button"),h=Object(o["resolveComponent"])("ion-footer");return Object(o["openBlock"])(),Object(o["createBlock"])(o["Fragment"],null,[Object(o["createVNode"])(l,null,{default:Object(o["withCtx"])(()=>[Object(o["createVNode"])(c,null,{default:Object(o["withCtx"])(()=>[Object(o["createVNode"])(s,null,{default:Object(o["withCtx"])(()=>[Object(o["createTextVNode"])(Object(o["toDisplayString"])(e.title),1)]),_:1})]),_:1})]),_:1}),Object(o["createVNode"])(u,null,{default:Object(o["withCtx"])(()=>[Object(o["createVNode"])(d,{items:e.visitData},null,8,["items"])]),_:1}),Object(o["createVNode"])(h,null,{default:Object(o["withCtx"])(()=>[Object(o["createVNode"])(c,null,{default:Object(o["withCtx"])(()=>[Object(o["createVNode"])(p,{onClick:e.closeModal,slot:"end"},{default:Object(o["withCtx"])(()=>[ua]),_:1},8,["onClick"])]),_:1})]),_:1})],64)}var ha=Object(o["defineComponent"])({components:{InformationHeader:sa},props:{title:{type:String,required:!0},visitData:{type:Object,required:!0}},methods:{async closeModal(){await De["X"].dismiss({})}}});const ba=x()(ha,[["render",pa]]);var ma=ba;const ga={style:{fontSize:"11px !important",border:"1px solid #dddddd !important",textAlign:"left"}},fa={style:{fontSize:"12px !important",fontWeight:"bold",textAlign:"left",border:"1px solid #dddddd !important"}};var Oa=Object(o["defineComponent"])({name:"HisResultCard",components:{ReportTable:Ut["a"]},data:()=>({tableConfig:{showIndex:!1,cssClasses:"table-bordered table-striped"},columns:[[D["a"].thTxt("VISIT DATE",fa),D["a"].thTxt("WEIGHT (Kg)",fa),D["a"].thTxt("REG",fa),D["a"].thTxt("VIRAL LOAD",fa),D["a"].thTxt("TB STATUS",fa),D["a"].thTxt("OUTCOME",fa),D["a"].thTxt("PILLS DISPENSED",fa),D["a"].thTxt("ACTIONS",fa)]]}),props:{icon:{required:!1},getVisitDates:{type:Function,required:!0}},methods:{printLabel(e){this.$emit("onPrint",e)},showMore(e){this.$emit("onDetails",e)},formatAdherence(e){if(Object(h["isArray"])(e)){const t=[...e];if(Object(h["isArray"])(t)){let e="";return t.forEach(t=>{e+=`${t[0]}: (${t[1]}%), `}),e}return t}return e},joinData(e){if(Object(h["isArray"])(e)){const t=[...e];if(Object(h["isArray"])(t)){let e="";return t.forEach(t=>{e+=(Object(h["isArray"])(t)?t.join(":"):t)+", "}),e}return t}return e},capitalize(e){try{return e.charAt(0).toUpperCase()+e.slice(1)}catch(t){return""}},camelCase(e){const t=e.split("_");return`${this.capitalize(t[0])} ${this.capitalize(t[1])}`},async getRows(){const e=await this.getVisitDates();return e.map(e=>{var t,a;const n=((null===(t=e.data)||void 0===t||null===(a=t.drugs)||void 0===a?void 0:a.pills_given)||[]).map(e=>`${e["short_name"]||e["name"]} <b>(${e.quantity||"?"})</b>`).join("<br/>"),o=[];return Object.keys(e.data).forEach(t=>{switch(t){case"drugs":break;case"pills_dispensed":o.push({label:"Pills dispensed",value:n});break;case"outcome_date":o.push({label:"Outcome Date",value:l["b"].toStandardHisDisplayFormat(e.data[t])});break;default:t.match(/height/i)&&(t+=" (cm)"),t.match(/weight/i)&&(t+=" (Kg)"),o.push({label:this.camelCase(t),value:this.joinData(e.data[t])})}}),[D["a"].tdBtn(e.label,()=>this.printLabel(e.value),ga,"secondary"),D["a"].td(e.data.weight,ga),D["a"].td(e.data.regimen,ga),D["a"].td(e.data["viral_load"],ga),D["a"].td(e.data["tb_status"],ga),D["a"].td(e.data.outcome.match(/Unk/i)?"Unknown":e.data.outcome,ga),D["a"].td(n,ga),D["a"].tdBtn("show more",async()=>{(await De["X"].create({component:ma,backdropDismiss:!1,cssClass:"large-modal",componentProps:{title:e.label,visitData:o}})).present()},ga,"secondary")]})}}});a("0207");const ja=x()(Oa,[["render",da],["__scopeId","data-v-2d39ef92"]]);var _a=ja,va=a("0f25"),ya=a("ec2a"),wa=a("7def"),Na=Object(o["defineComponent"])({components:{IonPage:De["D"],IonContent:De["n"],VisitInformation:_a,InformationHeader:sa,HisFooter:va["a"]},data:()=>({isBDE:!1,currentDate:"",sessionDate:"",nextTask:{},patientId:0,programID:0,patient:{},patientProgram:{},patientCardInfo:[],programCardInfo:[],encounters:[],medications:[],labOrders:[],visitDates:[],activeVisitDate:"",encountersCardItems:[],medicationCardItems:[],labOrderCardItems:[],alertCardItems:[],btns:[],guardians:""}),computed:{visitDatesTitle(){return this.visitDates.length+" Visits"}},watch:{$route:{async handler({params:e}){e&&(this.patientId=parseInt(e.patient_id),this.patientId&&this.init())},deep:!0,immediate:!0},async activeVisitDate(e){this.encounters=await ya["a"].getEncounters(this.patientId,{date:e})}},methods:{async init(){this.patient=await this.fetchPatient(this.patientId),this.guardians=await this.getGuardian(),this.patientCardInfo=await this.getPatientCardInfo(this.patient),this.btns.push(this.getFinishBtn())},async getGuardian(){const e=await wa["a"].getGuardianDetails(this.patientId);return e.map(e=>` ${e.name} (${e.relationshipType})`).join(" ")},updateDemographics(e){this.$router.push({path:"/patient/registration",query:{edit_person:this.patientId,person_attribute:e}})},addGuardian(){var e;this.$router.push({path:"/guardian/registration/"+this.patientId,query:{source:null===(e=this.$route.name)||void 0===e?void 0:e.toString()}})},updateARVNumber(){this.$router.push({name:"Edit ARV Number"})},getFinishBtn(){return{name:"Finish",color:"success",size:"large",slot:"end",visible:!0,onClick:async()=>{const e=await Object(j["a"])("Are you sure you want to exit?");if(e)return this.$router.push("/patient/dashboard/"+this.patientId)}}},async fetchPatient(e){const t=await Zt["a"].findByID(e);return t?new Zt["a"](t):{}},getProp(e,t){return t in e?e[t]():"-"},async getPatientVisitDates(){const e=await Zt["a"].getPatientVisits(this.patientId,!0),t=e.map(async e=>{const t=await this.getExtras(e);return{label:l["b"].toStandardHisDisplayFormat(e),value:e,data:t}}),a=await Promise.all(t);return a},async getExtras(e){const t=await V["a"].getCurrentProgramInformation(this.patientId,e),a=await V["a"].getMastercardDrugInformation(this.patientId,e);return{...t,drugs:a}},onActiveVisitDate(e){this.activeVisitDate=e.value},async getPatientCardInfo(e){const{toStandardHisDisplayFormat:t}=l["b"];let a=await we["a"].getAll(this.patientId,"Confirmatory HIV test date");a&&(a=t(a[0].value_datetime));const n=await we["a"].getFirstValueText(this.patientId,"Confirmatory HIV test location");let o=await we["a"].getAll(this.patientId,"Date ART started");o=Object(h["isEmpty"])(o)?"N/A":t(o[0].value_datetime);const i=await we["a"].getFirstValueCoded(this.patientId,"Ever received ART"),r=await we["a"].getFirstValueCoded(this.patientId,"Agrees to followup"),s=await we["a"].getFirstValueCoded(this.patientId,"Reason for ART eligibility");return[{label:"ARV Number",value:this.patient.getArvNumber(),other:{editable:!0,category:"arv_number"}},{label:"National Patient ID",value:e.getNationalID()},{label:"Given Name",value:e.getGivenName(),other:{editable:!0,attribute:"given_name",category:"demographics"}},{label:"Family Name",value:e.getFamilyName(),other:{editable:!0,attribute:"family_name",category:"demographics"}},{label:"Age",value:e.getAge(),other:{editable:!0,attribute:"year_birth_date",category:"demographics"}},{label:"Sex",value:e.getGender(),other:{editable:!0,attribute:"gender",category:"demographics"}},{label:"Location",value:e.getCurrentVillage(),other:{editable:!0,attribute:"home_region",category:"demographics"}},{label:"Landmark",value:e.getAttribute(19)},{label:"Guardian",value:this.guardians?this.guardians:"add",other:{editable:!this.guardians,attribute:"",category:"guardian"}},{label:"Init W(KG)",value:await e.getInitialWeight()},{label:"Init H(CM)",value:await e.getInitialHeight()},{label:"BMI(CM)",value:await e.getInitialBMI()},{label:"TI",value:i},{label:"Agrees to follow up",value:r},{label:"Reason for starting ART",value:s},{label:"HIV test date",value:""+(a||"")},{label:"HIV test place",value:""+(n||"")},{label:"Date of starting first line ART",value:o},...await this.getTBStats()]},async getTBStats(){const e=await we["a"].getFirstValueCoded(this.patientId,"Who stages criteria present");return[{label:"Pulmonary TB within the last 2 years",value:e&&e.match(/last/i)?"Yes":"N/A"},{label:"Extra pulmonary TB (EPTB)",value:e&&e.match(/eptb/i)?"Yes":"N/A"},{label:"Pulmonary TB (current)",value:e&&e.match(/current/i)?"Yes":"N/A"},{label:"Kaposi's sarcoma:",value:e&&e.match(/kepos/i)?"Yes":"N/A"}]},async openModal(e,t,a){const n=l["b"].toStandardHisDisplayFormat(this.activeVisitDate.toString()),o=await De["X"].create({component:a,backdropDismiss:!1,cssClass:"custom-modal",componentProps:{items:e,title:`${t}: ${n}`,taskParams:{patient:this.patient.getObj(),program:this.patientProgram,visitDate:this.activeVisitDate,patientID:this.patientId}}});o.present()},printLabel(e){new le["a"](this.patientId).printVisitSummaryLbl(e)}}});const Ca=x()(Na,[["render",Qt]]);var Va=Ca;function Da(e,t,a,n,i,r){const s=Object(o["resolveComponent"])("report-template"),c=Object(o["resolveComponent"])("ion-page");return Object(o["openBlock"])(),Object(o["createBlock"])(c,null,{default:Object(o["withCtx"])(()=>[Object(o["createVNode"])(s,{title:e.title,period:e.period,rows:e.rows,fields:e.fields,columns:e.columns,reportPrefix:"PEPFAR",config:{showIndex:!0},validationErrors:e.errors,showValidationStatus:e.canValidate,hasServerSideCaching:!0,headerInfoList:e.headerList,onReportConfiguration:e.onPeriod},null,8,["title","period","rows","fields","columns","validationErrors","showValidationStatus","headerInfoList","onReportConfiguration"])]),_:1})}var ka,Ta=a("44e3"),Ia=a("4ba2"),xa=a("ad8d"),Sa=a("5969");(function(e){e["MOH_CACHE"]="mohCache"})(ka||(ka={}));class Pa extends Sa["a"]{constructor(){super(),this.regenerate=!1}cohortUrl(){return`programs/${this.programID}/reports/cohort`}setRegenerate(e){this.regenerate=e}getCohortDrillDown(e){return Sa["a"].getJson("cohort_report_drill_down",{id:e,date:this.date,program_id:this.programID})}requestCohort(e){return Sa["a"].ajxGet(this.cohortUrl(),e)}qaurterRequestParams(){return{name:this.quarter,regenerate:this.regenerate}}datePeriodRequestParams(){return{name:`Cohort-${this.startDate}-${this.endDate}`,start_date:this.startDate,end_date:this.endDate,regenerate:this.regenerate}}getCachedCohortValues(){const e=sessionStorage.getItem(ka.MOH_CACHE);if(e){const t=JSON.parse(e);if(t.start_date===this.startDate&&t.end_date===this.endDate||t.quarter===this.quarter)return t.data}}cacheCohort(e){sessionStorage.setItem(ka.MOH_CACHE,JSON.stringify({start_date:this.startDate,end_date:this.endDate,quarter:this.quarter,data:e}))}validateIndicators(e,t){const a=this.getCachedCohortValues();if(a){const n=Object.keys(e).reduce((t,n)=>{const o=Object(h["find"])(a,{name:n}),i=e[n],r=o?o.contents:null,s=i.param,c=i.check(parseInt(r),s);return c&&t.push(i.error(r,s)),t},[]);return t(n)}return-1}}class Aa extends Sa["a"]{constructor(){super(),this.gender="",this.ageGroup=xa["a"][0],this.initialize=!0,this.rebuildOutcome=!0}async init(){this.initialize=!0;const e=await this.getCohort();return!(!e||"created"!==e.temp_disaggregated)&&(this.initialize=!1,!0)}setAgeGroup(e){this.ageGroup=e}setInitialization(e){this.initialize=e}setRebuildOutcome(e){this.rebuildOutcome=e}setGender(e){this.gender=e}getGender(){return this.gender}getCohort(){return this.getReport("cohort_disaggregated",{age_group:""+this.ageGroup,rebuild_outcome:""+this.rebuildOutcome,initialize:""+this.initialize})}getTxIpt(){return this.getReport("clients_given_ipt",{gender:this.gender,age_group:""+this.ageGroup})}getTxCurrTB(){return this.getReport("screened_for_tb",{gender:this.gender,age_group:""+this.ageGroup})}getRegimenDistribution(){return this.getReport("disaggregated_regimen_distribution",{gender:""+this.gender,age_group:""+this.ageGroup})}}var Ea=Object(o["defineComponent"])({mixins:[Ta["a"]],components:{ReportTemplate:Ia["a"],IonPage:De["D"]},data:()=>({title:"PEPFAR Disaggregated Report",headerList:[],errors:[],columns:[[D["a"].thTxt("Age group"),D["a"].thTxt("Gender"),D["a"].thNum("Tx new (new on ART)"),D["a"].thNum("TX curr (receiving ART)"),D["a"].thNum("TX curr (received IPT)"),D["a"].thNum("TX curr (screened for TB)")]],aggregations:[],mohCohort:{},maleFemaleAgeGroupData:{},canValidate:!1,sortIndexes:{},initiated:!1}),created(){this.fields=this.getDateDurationFields()},computed:{rows(){return Object.keys(this.sortIndexes).sort((e,t)=>parseInt(e)-parseInt(t)).reduce((e,t)=>e.concat(this.sortIndexes[t]),[])}},watch:{async canValidate(e){e&&await this.validateReport()}},methods:{async onPeriod(e,t,a=!0){this.errors=[],this.maleFemaleAgeGroupData={},this.sortIndexes={},this.aggregations=[],this.canValidate=!1,this.report=new Aa,this.mohCohort=new Pa,this.report.setQuarter("pepfar"),this.report.setStartDate(t.start_date),this.report.setEndDate(t.end_date),this.mohCohort.setStartDate(t.start_date),this.mohCohort.setEndDate(t.end_date),this.period=this.report.getDateIntervalPeriod(),this.report.setRebuildOutcome(!this.initiated||a);const n=await this.report.init();if(!n)return Object(j["e"])("Unable to initialise report");await this.setTableRows(),this.setHeaderInfoList(),this.canValidate=!0,this.initiated=!0},getTotals(e){return this.aggregations.filter(t=>e(t)).reduce((e,t)=>e.concat(t.data),[])},setHeaderInfoList(){const e=this.getTotals(e=>"txCurr"===e.col&&e.gender.match(/male|female/i));this.headerList=[{label:"Total Alive and on ART",value:e.length,other:{onclick:()=>this.runTableDrill(e,"Total Alive and on ART")}}]},async setTableRows(){await this.setFemaleRows(1),await this.setMaleRows(2),await this.setTotalMalesRow(3),await this.setFemalePregnantRows(4),await this.setFemaleBreastFeedingRows(6),await this.setFemaleNotPregnantRows(5)},async getValue(e,t,a){let n=[];switch(e){case"tx_given_ipt":n=await this.report.getTxIpt();break;case"tx_screened_for_tb":n=await this.report.getTxCurrTB();break;default:n=t in a?a[t][e]:[];break}return n},setTotalMalesRow(e){const t=(e,t)=>{const a=this.aggregations.filter(t=>t.col===e&&"Male"===t.gender).reduce((e,t)=>e.concat(t.data),[]);return this.drill(a,t)},a=[D["a"].td("All"),D["a"].td("Male"),t("txNew","Tx New (new on ART) Males"),t("txCurr","Total Curr (received ART) Males"),t("txGivenIpt","Total Curr (received IPT) Males"),t("txScreenTB","Total Curr (screened for TB) Males")];this.sortIndexes[e]=[a]},setFemaleNotPregnantRows(e){const t=(e,t)=>this.aggregations.filter(e=>e.gender.match(/fp|fbf/i)&&e.col===t).reduce((e,t)=>e.concat(t.data||[]),[]).includes(e),a=(e,a)=>{const n=this.aggregations.filter(t=>"Female"===t.gender&&t.col===e).reduce((a,n)=>a.concat(n.data.filter(a=>!t(a,e))),[]);return this.drill(n,a)},n=[D["a"].td("All"),D["a"].td("FNP"),a("txNew","Tx New (new on ART) FNP"),a("txCurr","Tx Curr (received ART) FNP"),a("txGivenIpt","Tx Curr (received IPT) FNP"),a("txScreenTB","Tx Curr (screened for TB) FNP")];this.sortIndexes[e]=[n]},setFemaleRows(e){return this.report.setGender("female"),this.setRows(e,"F",xa["a"],"Female")},setMaleRows(e){return this.report.setGender("male"),this.setRows(e,"M",xa["a"],"Male")},setFemalePregnantRows(e){return this.report.setGender("pregnant"),this.setRows(e,"F",["All"],"FP","Pregnant")},setFemaleBreastFeedingRows(e){return this.report.setGender("breastfeeding"),this.setRows(e,"F",["All"],"FBf","Breastfeeding")},async setRows(e,t,a,n,o=""){for(const i in a){let r=[],s=[],c=[],l=[];const d=o||a[i];if(this.report.setAgeGroup(d),!(d in this.maleFemaleAgeGroupData)){const e=await this.report.getCohort();this.report.setRebuildOutcome(!1),this.maleFemaleAgeGroupData[d]=Object(h["isEmpty"])(e)?{}:e[d]}if(!Object(h["isEmpty"])(this.maleFemaleAgeGroupData[d])){const e=e=>this.getValue(e,t,this.maleFemaleAgeGroupData[d]),a=(e,t)=>this.aggregations.push({gender:n,col:e,data:t});r=await e("tx_new"),s=await e("tx_curr"),c=await e("tx_given_ipt"),l=await e("tx_screened_for_tb"),a("txNew",r),a("txCurr",s),a("txGivenIpt",c),a("txScreenTB",l)}this.sortIndexes[e]||(this.sortIndexes[e]=[]),this.sortIndexes[e].push([D["a"].td(a[i]),D["a"].td(n),this.drill(r,`Tx new (new on ART) | ${d} | ${n}`),this.drill(s,`Tx curr (receiving ART) | ${d} | ${n}`),this.drill(c,`TX curr (received IPT) | ${d} | ${n}`),this.drill(l,`TX curr (screened for TB) | ${d} | ${n}`)])}},validateReport(){const e={initiated_on_art_first_time:{param:this.getTotals(e=>"txNew"===e.col&&e.gender.match(/male|female/i)).length,check:(e,t)=>e!=t,error:(e,t)=>`\n                        MOH cohort initiated on ART first time <b>(${e})</b> is not matching Tx New <b>(${t})</b>\n                    `},initial_pregnant_females_all_ages:{param:this.getTotals(e=>"txNew"===e.col&&"FP"===e.gender).length,check:(e,t)=>e!=t,error:(e,t)=>`\n                        MOH cohort initial pregnant females all ages \n                        <b>(${e})</b> is not matching with TX new Pregnant women <b>${t}</b>\n                    `},males_initiated_on_art_first_time:{param:this.getTotals(e=>"txNew"===e.col&&"Male"===e.gender).length,check:(e,t)=>e!=t,error:(e,t)=>`\n                        MoH Cohort males initiated on ART first time <b>(${e})</b>\n                        is not matching with TX new All male <b>(${t})</b>\n                    `}},t=this.mohCohort.validateIndicators(e,e=>this.errors=e);-1===t&&(this.errors=["Report not validated. Run the MoH cohort report for similar reporting period and then run this report"])}}});const Ba=x()(Ea,[["render",Da]]);var Ra=Ba;function Fa(e,t,a,n,i,r){const s=Object(o["resolveComponent"])("report-template"),c=Object(o["resolveComponent"])("ion-page");return Object(o["openBlock"])(),Object(o["createBlock"])(c,null,{default:Object(o["withCtx"])(()=>[Object(o["createVNode"])(s,{title:e.title,period:e.period,rows:e.rows,fields:e.fields,columns:e.columns,showtitleOnly:!0,reportPrefix:"PEPFAR",onReportConfiguration:e.onPeriod},null,8,["title","period","rows","fields","columns","onReportConfiguration"])]),_:1})}class La extends Sa["a"]{constructor(){super(),this.pepfar=!0}setIsPepfar(e){this.pepfar=e}getDefaulters(){return this.getReport("defaulter_list",{pepfar:this.pepfar})}}var Ma=Object(o["defineComponent"])({mixins:[Ta["a"]],components:{ReportTemplate:Ia["a"],IonPage:De["D"]},data:()=>({title:"Defaulters report",rows:[],columns:[[D["a"].thTxt("ARV#"),D["a"].thTxt("First name",{exportable:!1}),D["a"].thTxt("Last name",{exportable:!1}),D["a"].thTxt("Gender"),D["a"].thDate("Birthdate"),D["a"].thDate("Date defaulted"),D["a"].thTxt("Address",{exportable:!1})]]}),created(){this.fields=this.getDateDurationFields(!1,!1,5,null)},methods:{async onPeriod(e,t){this.rows=[],this.report=new La,this.report.setStartDate(t.start_date),this.report.setEndDate(t.end_date),this.period=this.report.getDateIntervalPeriod();const a=await this.report.getDefaulters();this.setRows(a),this.title=`PEPFAR Defaulters report <b>(${a.length} Defaulters)</b>`},async setRows(e){this.sortByArvNumber(e).forEach(e=>{this.rows.push([D["a"].td(e.arv_number),D["a"].td(e.given_name),D["a"].td(e.family_name),D["a"].td(e.gender),D["a"].tdDate(e.birthdate),D["a"].tdDate(e.defaulter_date),D["a"].td((e.cell_number?`CELL: ${e.cell_number} <br/>`:"")+(e.village?`VILLAGE: ${e.village} <br/>`:"")+(e.district?`DISTRICT: ${e.district} <br/>`:"")+(e.ta?"TA: "+e.ta:""))])})}}});const Ha=x()(Ma,[["render",Fa]]);var $a=Ha;function Ua(e,t,a,n,i,r){const s=Object(o["resolveComponent"])("report-template"),c=Object(o["resolveComponent"])("ion-page");return Object(o["openBlock"])(),Object(o["createBlock"])(c,null,{default:Object(o["withCtx"])(()=>[Object(o["createVNode"])(s,{title:e.title,period:e.period,rows:e.rows,fields:e.fields,columns:e.columns,showtitleOnly:!0,reportPrefix:"PEPFAR",onReportConfiguration:e.onPeriod},null,8,["title","period","rows","fields","columns","onReportConfiguration"])]),_:1})}const qa=["0A","2A","4A","5A","6A","7A","8A","9A","10A","11A","12A","13A","14A","15A","16A","17A","0P","2P","4PP","4PA","9PP","9PA","11PP","11PA","12PP","12PA","14PP","14PA","15PP","15PA","16P","17PP","17PA"],Ga=["0A","2A","4A","5A","6A","7A","8A","9A","10A","11A","12A","13A","14A","15A","16A","17A","0P","2P","4P","4PP","4PA","9P","9PP","9PA","11P","11PP","11PA","12PP","12PA","14P","14PP","14PA","15P","15PP","15PA","16P","17P","17PP","17PA"],za=["10 - 13.9 Kg","14 - 19.9 Kg","20 - 24.9 Kg","25 - 29.9 Kg","3 - 3.9 Kg","30 - 34.9 Kg","35 - 39.9 Kg","4 - 4.9 Kg","40 Kg +","40 - 49.9 Kg","50 Kg +","6 - 9.9 Kg","Unknown"],Ya=["pellets","tablets","granules"];class Wa extends Sa["a"]{constructor(){super(),this.type="pepfar"}setReportType(e){this.type=e}getTptNewInitiations(){return this.getReport(`programs/${this.programID}/reports/tpt_newly_initiated`)}getRegimenFormulationReport(e,t){return this.getReport(`programs/${this.programID}/reports/regimens_and_formulations`,{regimen:e,formulation:t})}getRegimenReport(){return this.getReport("regimen_report",{type:this.type})}getRegimenSwitchReport(e=!1){return this.getReport("regimen_switch",{pepfar:e})}getRegimensByWeight(){return this.getReport(`programs/${this.programID}/reports/regimens_by_weight_and_gender`)}getSCReport(e=!1){return this.getReport("sc_arvdisp",{pepfar:e})}}var Ka=Object(o["defineComponent"])({mixins:[Ta["a"]],components:{ReportTemplate:Ia["a"],IonPage:De["D"]},data:()=>({title:"PEPFAR Regimen Report",rows:[],reportReady:!1,isLoading:!1,columns:[[D["a"].thTxt("ARV#"),D["a"].thTxt("Gender"),D["a"].thTxt("DOB"),D["a"].thTxt("Curr.Reg"),D["a"].thTxt("ARVs"),D["a"].thTxt("Curr.reg dispensed")]]}),created(){this.fields=this.getDateDurationFields()},methods:{async onPeriod(e,t){this.rows=[],this.report=new Wa,this.report.setStartDate(t.start_date),this.report.setEndDate(t.end_date),this.period=this.report.getDateIntervalPeriod(),this.setRows(await this.report.getRegimenReport())},setRows(e){this.sortByArvNumber(Object.values(e)).forEach(e=>{let t="";const a=e.medication.map(e=>(t=this.toDate(e.start_date),`${e.medication} (${e.quantity})`));this.rows.push([D["a"].td(e.arv_number),D["a"].td(e.gender),D["a"].tdDate(e.birthdate),D["a"].td(e.current_regimen),D["a"].td(a.join(", ")),D["a"].tdDate(t)])})}}});const Xa=x()(Ka,[["render",Ua]]);var Ja=Xa;function Qa(e,t,a,n,i,r){const s=Object(o["resolveComponent"])("report-template"),c=Object(o["resolveComponent"])("ion-page");return Object(o["openBlock"])(),Object(o["createBlock"])(c,null,{default:Object(o["withCtx"])(()=>[Object(o["createVNode"])(s,{title:e.title,period:e.period,rows:e.rows,fields:e.fields,columns:e.columns,reportPrefix:"PEPFAR",onReportConfiguration:e.onPeriod},null,8,["title","period","rows","fields","columns","onReportConfiguration"])]),_:1})}var Za=Object(o["defineComponent"])({mixins:[Ta["a"]],components:{ReportTemplate:Ia["a"],IonPage:De["D"]},data:()=>({title:"PEPFAR Regimen Switch Report",rows:[],columns:[[D["a"].thTxt("ARV#"),D["a"].thTxt("Gender"),D["a"].thTxt("DOB"),D["a"].thTxt("Prev.Reg"),D["a"].thTxt("Curr.Reg"),D["a"].thTxt("ARVs"),D["a"].thTxt("Curr.reg dispensed date")]]}),created(){this.fields=this.getDateDurationFields()},methods:{async onPeriod(e,t){this.rows=[],this.report=new Wa,this.report.setStartDate(t.start_date),this.report.setEndDate(t.end_date),this.period=this.report.getDateIntervalPeriod(),this.setRows(await this.report.getRegimenSwitchReport(!0))},setRows(e){this.sortByArvNumber(Object.values(e)).forEach(e=>{let t="";const a=e.medication.map(e=>(t=e.start_date,`${e.medication} (${e.quantity})`));this.rows.push([D["a"].td(e.arv_number),D["a"].td(e.gender),D["a"].tdDate(e.birthdate),D["a"].td(e.previous_regimen),D["a"].td(e.current_regimen),D["a"].td(a.join(", ")),D["a"].tdDate(t)])})}}});const en=x()(Za,[["render",Qa]]);var tn=en;function an(e,t,a,n,i,r){const s=Object(o["resolveComponent"])("report-template"),c=Object(o["resolveComponent"])("ion-page");return Object(o["openBlock"])(),Object(o["createBlock"])(c,null,{default:Object(o["withCtx"])(()=>[Object(o["createVNode"])(s,{title:e.title,period:e.period,rows:e.rows,fields:e.fields,columns:e.columns,config:{showIndex:!0},reportPrefix:"PEPFAR",onReportConfiguration:e.onPeriod},null,8,["title","period","rows","fields","columns","onReportConfiguration"])]),_:1})}var nn=a("bef6");class on extends Sa["a"]{constructor(){super()}getVLCoverage(){return this.getReport(`programs/${this.programID}/reports/viral_load_coverage`,{rebuild_outcomes:!0})}getMaternalStatus(e){const t=nn["a"].parameterizeObjToString({start_date:this.startDate,end_date:this.endDate,date:this.date,program_id:this.programID,report_definition:"pepfar"});return Sa["a"].postJson("vl_maternal_status?"+t,{patient_ids:e})}}var rn=Object(o["defineComponent"])({mixins:[Ta["a"]],components:{ReportTemplate:Ia["a"],IonPage:De["D"]},data:()=>({title:"VL Coverage report",cohort:{},rows:[],totals:{F:{},M:{}},columns:[[D["a"].thTxt("",{colspan:5,exportable:!1}),D["a"].thTxt("Sample Drawn",{colspan:2,exportable:!1}),D["a"].thTxt("High VL (>=1000 copies)",{colspan:2,exportable:!1}),D["a"].thTxt("Low VL (<1000 copies)",{colspan:2,exportable:!1})],[D["a"].thTxt("Age group"),D["a"].thTxt("Gender"),D["a"].thTxt("TX CURR"),D["a"].thTxt("Due for VL"),D["a"].thTxt("Routine"),D["a"].thTxt("Targeted"),D["a"].thTxt("Routine"),D["a"].thTxt("Targeted"),D["a"].thTxt("Routine"),D["a"].thTxt("Targeted")]]}),created(){this.fields=this.getDateDurationFields()},methods:{async onPeriod(e,t){this.rows=[],this.totals={F:{},M:{}},this.report=new on,this.report.setStartDate(t.start_date),this.report.setEndDate(t.end_date),this.period=this.report.getDateIntervalPeriod(),this.cohort=await this.report.getVLCoverage(),await this.setRows("F"),await this.setRows("M"),this.setAllMalesTotalsRow(),await this.setFemaleTotalsRow()},setTotals(e,t,a){this.totals[t][e]||(this.totals[t][e]=[]),this.totals[t][e]=this.totals[t][e].concat(a)},drillDown(e,t){if(e.length>=1){const a=[[D["a"].thTxt("ARV #"),D["a"].thTxt("DOB"),D["a"].thTxt("Gender"),D["a"].thTxt("Action")]],n=()=>this.sortByArvNumber(e).map(e=>[this.tdARV(e.arv_number),D["a"].tdDate(e.birthdate),D["a"].td(e.gender),D["a"].tdBtn("Show",()=>this.$router.push({path:"/patient/dashboard/"+e.patient_id}))]);return D["a"].tdLink(e.length,()=>this.drilldownAsyncRows(t,a,n))}return D["a"].td(0)},async setFemaleTotalsRow(){const e=this.totals.F,t=e.tx_curr.map(e=>e.patient_id),a=await this.report.getMaternalStatus(t),n=a.FBf.concat(a.FP),o=(e,t)=>t.filter(t=>a[e].includes(t.patient_id)),i=e=>e.filter(e=>!n.includes(e.patient_id));this.rows.push([D["a"].td("All"),D["a"].td("FP"),this.drillDown(o("FP",e.tx_curr),"TX CURR FP"),this.drillDown(o("FP",e.due_for_vl),"Due for VL FP"),this.drillDown(o("FP",e.drawn_routine),"Routine (Sample Drawn) FP"),this.drillDown(o("FP",e.drawn_targeted),"Targetted (Sample Drawn) FP"),this.drillDown(o("FP",e.high_vl_routine),"Routine (High VL (>=1000 copies)) FP"),this.drillDown(o("FP",e.high_vl_targeted),"Targeted High VL (>=1000 copies) FP"),this.drillDown(o("FP",e.low_vl_routine),"Routine (Low VL (<1000 copies)) FP"),this.drillDown(o("FP",e.low_vl_targeted),"Targeted (Low VL (<1000 copies)) FP")]),this.rows.push([D["a"].td("All"),D["a"].td("FNP"),this.drillDown(i(e.tx_curr),"TX CURR FNP"),this.drillDown(i(e.due_for_vl),"Due for VL FNP"),this.drillDown(i(e.drawn_routine),"Routine (Sample Drawn) FNP"),this.drillDown(i(e.drawn_targeted),"Targetted (Sample Drawn) FNP"),this.drillDown(i(e.high_vl_routine),"Routine (High VL (>=1000 copies)) FNP"),this.drillDown(i(e.high_vl_targeted),"Targeted High VL (>=1000 copies) FNP"),this.drillDown(i(e.low_vl_routine),"Routine (Low VL (<1000 copies)) FNP"),this.drillDown(i(e.low_vl_targeted),"Targeted (Low VL (<1000 copies)) FNP")]),this.rows.push([D["a"].td("All"),D["a"].td("FBf"),this.drillDown(o("FBf",e.tx_curr),"TX CURR FBf"),this.drillDown(o("FBf",e.due_for_vl),"Due for VL FBf"),this.drillDown(o("FBf",e.drawn_routine),"Routine (Sample Drawn) FBf"),this.drillDown(o("FBf",e.drawn_targeted),"Targetted (Sample Drawn) FBf"),this.drillDown(o("FBf",e.high_vl_routine),"Routine (High VL (>=1000 copies)) FBf"),this.drillDown(o("FBf",e.high_vl_targeted),"Targeted High VL (>=1000 copies) FBf"),this.drillDown(o("FBf",e.low_vl_routine),"Routine (Low VL (<1000 copies)) FBf"),this.drillDown(o("FBf",e.low_vl_targeted),"Targeted (Low VL (<1000 copies)) FBf")])},setAllMalesTotalsRow(){const e=this.totals["M"];return this.rows.push([D["a"].td("All"),D["a"].td("Male"),this.drillDown(e.tx_curr,"TX CURR Male"),this.drillDown(e.due_for_vl,"Due for VL Male"),this.drillDown(e.drawn_routine,"Routine (Sample Drawn) Male"),this.drillDown(e.drawn_targeted,"Targetted (Sample Drawn) Male"),this.drillDown(e.high_vl_routine,"Routine (High VL (>=1000 copies)) Male"),this.drillDown(e.high_vl_targeted,"Targeted High VL (>=1000 copies) Male"),this.drillDown(e.low_vl_routine,"Routine (Low VL (<1000 copies)) Male"),this.drillDown(e.low_vl_targeted,"Targeted (Low VL (<1000 copies)) Male")])},async setRows(e){for(const t of xa["a"])if(t in this.cohort){const a=this.cohort[t],n=(t,a,n)=>{const o=a.filter(t=>t.gender===e);return this.setTotals(t,e,o),this.drillDown(o,n)};this.rows.push([D["a"].td(t),D["a"].td("M"===e?"Male":"Female"),n("tx_curr",a.tx_curr,`${t} TX CURR (${e})`),n("due_for_vl",a.due_for_vl,`${t} Due for VL (${e})`),n("drawn_routine",a.drawn.routine,`${t} Routine (Sample Drawn) (${e})`),n("drawn_targeted",a.drawn.targeted,`${t} Targeted (Sample Drawn) (${e})`),n("high_vl_routine",a.high_vl.routine,`${t} Routine (High VL (>=1000 copies)) (${e})`),n("high_vl_targeted",a.high_vl.targeted,`${t} Targeted High VL (>=1000 copies) (${e})`),n("low_vl_routine",a.low_vl.routine,`${t} Routine (Low VL (<1000 copies)) (${e})`),n("low_vl_targeted",a.low_vl.targeted,`${t} Targeted (Low VL (<1000 copies)) (${e})`)])}else this.rows.push([D["a"].td(t),D["a"].td(e),D["a"].td(0),D["a"].td(0),D["a"].td(0),D["a"].td(0),D["a"].td(0),D["a"].td(0),D["a"].td(0),D["a"].td(0)])}}});const sn=x()(rn,[["render",an]]);var cn=sn;function ln(e,t,a,n,i,r){const s=Object(o["resolveComponent"])("report-template"),c=Object(o["resolveComponent"])("ion-page");return Object(o["openBlock"])(),Object(o["createBlock"])(c,null,{default:Object(o["withCtx"])(()=>[Object(o["createVNode"])(s,{title:e.title,period:e.period,rows:e.rows,fields:e.fields,columns:e.columns,reportPrefix:"PEPFAR",config:{showIndex:!0},onReportConfiguration:e.onPeriod},null,8,["title","period","rows","fields","columns","onReportConfiguration"])]),_:1})}class dn extends Sa["a"]{constructor(){super()}getTBPrevReport(){return this.getReport(`/programs/${this.programID}/reports/tb_prev2`)}}var un=Object(o["defineComponent"])({mixins:[Ta["a"]],components:{ReportTemplate:Ia["a"]},data:()=>({title:"TB PREV Report",cohort:{},rows:[],columns:[[D["a"].thTxt("",{colspan:3,sortable:!1,exportable:!1}),D["a"].thTxt("Started new on ART",{colspan:2,sortable:!1,exportable:!1}),D["a"].thTxt("Started previously on ART",{colspan:2,sortable:!1,exportable:!1}),D["a"].thTxt("Completed New on ART",{colspan:2,sortable:!1,exportable:!1}),D["a"].thTxt("Completed previously on ART",{colspan:2,sortable:!1,exportable:!1})],[D["a"].thTxt("Age group"),D["a"].thTxt("Gender"),D["a"].thNum("3HP",{value:"3HP(Started New on ART)"}),D["a"].thNum("6H",{value:"6H(Started New on ART)"}),D["a"].thNum("3HP",{value:"3HP(Started Previously on ART)"}),D["a"].thNum("6H",{value:"6H(Started Previously on ART)"}),D["a"].thNum("3H",{value:"3HP(Completed New on ART)"}),D["a"].thNum("6H",{value:"6H(Completed New on ART)"}),D["a"].thNum("3H",{value:"3HP(Completed Previously on ART)"}),D["a"].thNum("6H",{value:"6H(Completed Previously on ART)"})]]}),created(){this.fields=this.getDateDurationFields()},methods:{async onPeriod(e,t){this.rows=[],this.report=new dn,this.report.setStartDate(t.start_date),this.report.setEndDate(t.end_date),this.period=this.report.getDateIntervalPeriod(),this.cohort=await this.report.getTBPrevReport(),this.setRows("F"),this.setRows("M")},makeDrilldown(e,t){if(e.length){const a=[[D["a"].thTxt("ARV#"),D["a"].thTxt("Birthdate"),D["a"].thTxt("TPT Initiation Date"),D["a"].thTxt("Outcome")]],n=()=>this.sortByArvNumber(e,"arv_number").map(e=>[D["a"].td(e.arv_number),D["a"].tdDate(e.birthdate),D["a"].tdDate(e.tpt_initiation_date),D["a"].td(e.outcome)]);return D["a"].tdLink(e.length,()=>this.drilldownAsyncRows(t,a,n))}return D["a"].td(0)},async setRows(e){for(const t in xa["a"]){const a=xa["a"][t],n=this.cohort[a][e];this.rows.push([D["a"].td(a),D["a"].td(e),this.makeDrilldown(n["3HP"]["started_new_on_art"],`${a} Started new on ART 3HP (${e})`),this.makeDrilldown(n["6H"]["started_new_on_art"],`${a} Start new on ART 6H (${e})`),this.makeDrilldown(n["3HP"]["started_previously_on_art"],`${a} Started previously on ART 3HP (${e})`),this.makeDrilldown(n["6H"]["started_previously_on_art"],`${a} Started previously on ART 6H (${e})`),this.makeDrilldown(n["3HP"]["completed_new_on_art"],`${a} Completed new on ART 3HP (${e})`),this.makeDrilldown(n["6H"]["completed_new_on_art"],`${a} Completed new on ART 6H (${e})`),this.makeDrilldown(n["3HP"]["completed_previously_on_art"],`${a} Completed previously on ART 3HP (${e})`),this.makeDrilldown(n["6H"]["completed_previously_on_art"],`${a} Completed previously on ART 6H (${e})`)])}}}});const pn=x()(un,[["render",ln]]);var hn=pn;function bn(e,t,a,n,i,r){const s=Object(o["resolveComponent"])("report-template"),c=Object(o["resolveComponent"])("ion-page");return Object(o["openBlock"])(),Object(o["createBlock"])(c,null,{default:Object(o["withCtx"])(()=>[Object(o["createVNode"])(s,{title:e.title,period:e.period,rows:e.rows,fields:e.fields,columns:e.columns,reportPrefix:"PEPFAR",config:{showIndex:!0},validationErrors:e.errors,showValidationStatus:e.showStatus,headerInfoList:e.headerInfoList,onReportConfiguration:e.onPeriod},null,8,["title","period","rows","fields","columns","validationErrors","showValidationStatus","headerInfoList","onReportConfiguration"])]),_:1})}class mn extends Sa["a"]{constructor(){super(),this.org="pepfar",this.initializeArvRefillReportTables=!0}initArvRefillPeriod(e){this.initializeArvRefillReportTables=e}setOrg(e){this.org=e}getTxMMDClientLevelData(e){const t=nn["a"].parameterizeObjToString({start_date:this.startDate,end_date:this.endDate,program_id:this.programID,date:this.date,org:this.org}),a="tx_mmd_client_level_data?"+t;return Sa["a"].postJson(a,{patient_ids:e})}remapTxClientLevelData(e){return e.map(e=>{let t=null;const a=[];for(const n in e){const o=Object.values(e[n]);o.forEach(e=>{for(const n in e){const o=e[n];t||(t={id:o.arv_number,dob:o.birthdate,dispenseDate:o.start_date}),a.push({name:o.drug_name,quantity:o.quantity,dose:o.dose_per_day})}})}return{...t,drugs:a}})}getTxCurrMMDReport(e,t){return this.getReport("arv_refill_periods",{org:this.org,min_age:""+e,max_age:""+t,initialize_tables:""+this.initializeArvRefillReportTables})}getTxMlReport(){return this.getReport("tx_ml")}getTxRttReport(){return this.getReport("tx_rtt")}}var gn=Object(o["defineComponent"])({mixins:[Ta["a"]],components:{ReportTemplate:Ia["a"]},data:()=>({title:"TX Curr MMD Report",cohort:{},rows:[],totals:new Set,errors:[],showStatus:!1,columns:[[D["a"].thTxt("Age group"),D["a"].thTxt("Gender"),D["a"].thNum("# of clients on <3 months of ARVs"),D["a"].thNum("# of clients on 3 - 5 months of ARVs"),D["a"].thNum("# of clients on >= 6 months of ARVs")]],headerInfoList:[],mohCohort:{},canValidate:!1}),watch:{async canValidate(e){e&&await this.validateReport()}},created(){this.fields=this.getDateDurationFields()},methods:{async onPeriod(e,t){this.canValidate=!1,this.totals.clear(),this.errors=[],this.showStatus=!1,this.rows=[],this.report=new mn,this.mohCohort=new Pa,this.mohCohort.setStartDate(t.start_date),this.mohCohort.setEndDate(t.end_date),this.report.setStartDate(t.start_date),this.report.setEndDate(t.end_date),this.period=this.report.getDateIntervalPeriod(),this.report.initArvRefillPeriod(!0),await this.setRows(),this.canValidate=!0,this.showStatus=!0,this.setHeaderInfoList()},getValues(e,t){const a=[],n=[],o=[];for(const i in e){const t=e[i],r=t.prescribed_days;this.totals.add(i),r<90&&a.push(i),r>=90&&r<=150&&n.push(i),r>150&&o.push(i)}return[this.drill(a,`# of clients on < 3 months of ARVs (${t})`),this.drill(n,`# of clients on 3 - 5 months of ARVs (${t})`),this.drill(o,`# of clients on  >= 6 months of ARVs (${t})`)]},async setRows(){let e=0,t=0;const a=[],n=[];for(const o in xa["a"]){const i=xa["a"][o];if("<1 year"===i)e=0,t=0;else if("90 plus years"===i)e=90,t=1e3;else{const[a,n]=i.split("-");e=parseInt(a),t=parseInt(n)}const r=await this.report.getTxCurrMMDReport(e,t);this.report.initArvRefillPeriod(!1),r?(n.push([D["a"].td(i),D["a"].td("Female"),...this.getValues(r["Female"],i+" Female")]),a.push([D["a"].td(i),D["a"].td("Male"),...this.getValues(r["Male"],i+" Male")])):(n.push([D["a"].td(i),D["a"].td("Female"),D["a"].td(0),D["a"].td(0),D["a"].td(0)]),a.push([D["a"].td(i),D["a"].td("Male"),D["a"].td(0),D["a"].td(0),D["a"].td(0)])),this.rows=[...n,...a]}},setHeaderInfoList(){this.headerInfoList=[{label:"Total clients",value:this.totals.size,other:{onclick:()=>this.runTableDrill(Array.from(this.totals),"Total Clients")}}]},validateReport(){const e={total_alive_and_on_art:{param:this.totals.size,check:(e,t)=>t>e,error:(e,t)=>`\n                        MoH cohort Alive and on ART clients <b>(${e})</b> is not\n                        matching with total TX MMD clients <b>(${t})</b>.\n                    `}},t=this.mohCohort.validateIndicators(e,e=>this.errors=e);-1===t&&(this.errors=["Report not validated. Run the MoH cohort report for similar reporting period and then run this report"])}}});const fn=x()(gn,[["render",bn]]);var On=fn;function jn(e,t,a,n,i,r){const s=Object(o["resolveComponent"])("report-template"),c=Object(o["resolveComponent"])("ion-page");return Object(o["openBlock"])(),Object(o["createBlock"])(c,null,{default:Object(o["withCtx"])(()=>[Object(o["createVNode"])(s,{title:e.title,period:e.period,rows:e.rows,fields:e.fields,columns:e.columns,config:{showIndex:!0},reportPrefix:"PEPFAR",onReportConfiguration:e.onPeriod},null,8,["title","period","rows","fields","columns","onReportConfiguration"])]),_:1})}var _n=Object(o["defineComponent"])({mixins:[Ta["a"]],components:{ReportTemplate:Ia["a"],IonPage:De["D"]},data:()=>({title:"PEPFAR Curr Ml Report",rows:[],drillData:{},columns:[[D["a"].thTxt("Age group"),D["a"].thTxt("Gender"),D["a"].thTxt("Died"),D["a"].thTxt("IIT <3 mo"),D["a"].thTxt("IIT 3-5 mo"),D["a"].thTxt("IIT 6+ mo"),D["a"].thTxt("Transferred out"),D["a"].thTxt("Refused (Stopped)")]],cohort:{}}),created(){this.fields=this.getDateDurationFields()},methods:{async onPeriod(e,t){this.rows=[],this.report=new mn,this.report.setStartDate(t.start_date),this.report.setEndDate(t.end_date),this.period=this.report.getDateIntervalPeriod(),this.cohort=await this.report.getTxMlReport(),await this.setRows("F"),await this.setRows("M")},drilldown(e,t){const a=[[D["a"].thTxt("ARV#"),D["a"].thTxt("DOB"),D["a"].thTxt("Dispensed"),D["a"].thTxt("ARVs")]],n=async()=>{if(t in this.drillData)return this.drillData[t];const a=await this.report.getTxMMDClientLevelData(e);if(!a)return[];const n=this.report.remapTxClientLevelData(a).map(e=>{const t=e.drugs.map(e=>{const t=`\n                                <table style='width: 100%;'> \n                                    <td style='width: 65%;'>${e.name}</td>\n                                    <td style='width: 30%;'>(${e.quantity}, ${e.dose} a day)</td>\n                                </table>`,a=`${e.name} (Quantity: ${e.quantity} Dose: ${e.dose})`;return{tableView:t,dataView:a}});return[D["a"].td(e.id||"N/A"),D["a"].tdDate(e.dob),D["a"].tdDate(e.dispenseDate),D["a"].td(t.map(e=>e.tableView).join("<p/>"),{value:t.map(e=>e.dataView).join("|")})]});return this.drillData[t]=n,n};return e.length<=0?D["a"].td(0):D["a"].tdLink(e.length,()=>this.drilldownAsyncRows(t,a,n))},async setRows(e){const t=["Defaulted (new registration)","Defaulted (old registration)","Died","Stopped","Tranferred out","Unknown"];for(const n in xa["a"]){const o=xa["a"][n];try{const a=this.cohort[o][e],n=`${e} ${o}`,i=a.map((e,a)=>this.drilldown(e,`${n} ${t[a]}`));this.rows.push([D["a"].td(o),D["a"].td(e),...i])}catch(a){this.rows.push([D["a"].td(o),D["a"].td(e),D["a"].td(0),D["a"].td(0),D["a"].td(0),D["a"].td(0),D["a"].td(0),D["a"].td(0)])}}}}});const vn=x()(_n,[["render",jn]]);var yn=vn;function wn(e,t,a,n,i,r){const s=Object(o["resolveComponent"])("report-template"),c=Object(o["resolveComponent"])("ion-page");return Object(o["openBlock"])(),Object(o["createBlock"])(c,null,{default:Object(o["withCtx"])(()=>[Object(o["createVNode"])(s,{title:e.title,period:e.period,rows:e.rows,fields:e.fields,columns:e.columns,config:{showIndex:!0},reportPrefix:"PEPFAR",onReportConfiguration:e.onPeriod},null,8,["title","period","rows","fields","columns","onReportConfiguration"])]),_:1})}var Nn=Object(o["defineComponent"])({mixins:[Ta["a"]],components:{ReportTemplate:Ia["a"]},data:()=>({title:"TX RTT Report",cohort:{},rows:[],columns:[[D["a"].thTxt("Age group"),D["a"].thTxt("Gender"),D["a"].thTxt("Returned <3 mo"),D["a"].thTxt("Returned 3-5 mo"),D["a"].thTxt("Returned 6+ mo")]]}),created(){this.fields=this.getDateDurationFields()},methods:{async onPeriod(e,t){this.rows=[],this.report=new mn,this.report.setStartDate(t.start_date),this.report.setEndDate(t.end_date),this.period=this.report.getDateIntervalPeriod(),this.cohort=await this.report.getTxRttReport(),await this.setRows("F"),await this.setRows("M")},async setRows(e){const t=(e,t)=>e.filter(e=>t(e.months)).map(e=>e.patient_id);for(const a in xa["a"]){const n=xa["a"][a];if(n in this.cohort){const a=this.cohort[n][e],o=e=>t(a,e),i=o(e=>e<3),r=o(e=>e>=3&&e<=5),s=o(e=>e>=6);this.rows.push([D["a"].td(n),D["a"].td(e),this.drill(i,`${n} (${e}) Returned <3 mo`),this.drill(r,`${n} (${e}) Returned 3-5 mo`),this.drill(s,`${n} (${e}) Returned 6+ mo`)])}else this.rows.push([D["a"].td(n),D["a"].td(e),D["a"].td(0),D["a"].td(0),D["a"].td(0)])}}}});const Cn=x()(Nn,[["render",wn]]);var Vn=Cn;function Dn(e,t,a,n,i,r){const s=Object(o["resolveComponent"])("report-template"),c=Object(o["resolveComponent"])("ion-page");return Object(o["openBlock"])(),Object(o["createBlock"])(c,null,{default:Object(o["withCtx"])(()=>[Object(o["createVNode"])(s,{title:e.title,period:e.period,rows:e.rows,fields:e.fields,columns:e.columns,onReportConfiguration:e.onPeriod},null,8,["title","period","rows","fields","columns","onReportConfiguration"])]),_:1})}var kn=Object(o["defineComponent"])({mixins:[Ta["a"]],components:{ReportTemplate:Ia["a"],IonPage:De["D"]},data:()=>({title:"Clinic Missed Appointments",totalClients:[],rows:[],columns:[[D["a"].thTxt("ARV#"),D["a"].thTxt("First name",{exportable:!1}),D["a"].thTxt("Last name",{exportable:!1}),D["a"].thTxt("Gender"),D["a"].thTxt("DOB"),D["a"].thTxt("Appointment"),D["a"].thTxt("Days missed"),D["a"].thTxt("Current outcome"),D["a"].thTxt("Contact details",{exportable:!1})]]}),created(){this.fields=this.getDateDurationFields()},methods:{async onPeriod(e,t){this.rows=[],this.report=new xa["b"],this.report.setStartDate(t.start_date),this.report.setEndDate(t.end_date),this.period=this.report.getDateIntervalPeriod(),this.setRows(await this.report.getMissedAppointments())},async setRows(e){this.sortByArvNumber(e).forEach(e=>{this.rows.push([D["a"].td(e.arv_number),D["a"].td(e.given_name),D["a"].td(e.family_name),D["a"].td(e.gender),D["a"].tdDate(e.birthdate),D["a"].tdDate(e.appointment_date),D["a"].td(e.days_missed),D["a"].td(e.current_outcome),D["a"].td(`CELL: ${e.cell_number} <br/>\n                        District: ${e.district} <br/>\n                        Village: ${e.village} <br/>\n                        TA: ${e.ta}\n                    `)])})}}});const Tn=x()(kn,[["render",Dn]]);var In=Tn;function xn(e,t,a,n,i,r){const s=Object(o["resolveComponent"])("report-template"),c=Object(o["resolveComponent"])("ion-page");return Object(o["openBlock"])(),Object(o["createBlock"])(c,null,{default:Object(o["withCtx"])(()=>[Object(o["createVNode"])(s,{title:e.title,period:e.period,rows:e.rows,fields:e.fields,columns:e.columns,showtitleOnly:!0,onReportConfiguration:e.onPeriod},null,8,["title","period","rows","fields","columns","onReportConfiguration"])]),_:1})}var Sn=Object(o["defineComponent"])({mixins:[Ta["a"]],components:{ReportTemplate:Ia["a"],IonPage:De["D"]},data:()=>({title:"Clinic Defaulters report",rows:[],columns:[[D["a"].thTxt("ARV#"),D["a"].thTxt("First name",{exportable:!1}),D["a"].thTxt("Last name",{exportable:!1}),D["a"].thTxt("Gender"),D["a"].thTxt("birthdate"),D["a"].thTxt("Date defaulted"),D["a"].thTxt("Address",{exportable:!1})]]}),created(){this.fields=this.getDateDurationFields(!1,!1,5,null)},methods:{async onPeriod(e,t){this.rows=[],this.report=new La,this.report.setIsPepfar(!1),this.report.setStartDate(t.start_date),this.report.setEndDate(t.end_date),this.period=this.report.getDateIntervalPeriod();const a=await this.report.getDefaulters();this.setRows(a),this.title=`Clinic Defaulters report <b>(${a.length} Defaulters)</b>`},async setRows(e){this.sortByArvNumber(e).forEach(e=>{this.rows.push([D["a"].td(e.arv_number),D["a"].td(e.given_name),D["a"].td(e.family_name),D["a"].td(e.gender),D["a"].tdDate(e.birthdate),D["a"].tdDate(e.defaulter_date),D["a"].td((e.cell_number?`CELL: ${e.cell_number} <br/>`:"")+(e.village?`VILLAGE: ${e.village} <br/>`:"")+(e.district?`DISTRICT: ${e.district} <br/>`:"")+(e.ta?"TA: "+e.ta:""))])})}}});const Pn=x()(Sn,[["render",xn]]);var An=Pn;function En(e,t,a,n,i,r){const s=Object(o["resolveComponent"])("report-template");return Object(o["openBlock"])(),Object(o["createBlock"])(s,{title:e.title,period:e.period,rows:e.rows,fields:e.fields,columns:e.columns,onReportConfiguration:e.onPeriod,config:{showIndex:!1}},null,8,["title","period","rows","fields","columns","onReportConfiguration"])}var Bn=Object(o["defineComponent"])({mixins:[Ta["a"]],components:{ReportTemplate:Ia["a"]},data:()=>({title:"Clinic Regimen Report",rows:[],columns:[[D["a"].thTxt("ARV#"),D["a"].thTxt("Gender"),D["a"].thTxt("DOB"),D["a"].thTxt("ART start date"),D["a"].thTxt("Weight(Kg)"),D["a"].thTxt("Curr.Reg"),D["a"].thTxt("ARVs"),D["a"].thTxt("Curr.reg dispensed"),D["a"].thTxt("VL result"),D["a"].thTxt("Date of VL result")]]}),created(){this.fields=this.getDateDurationFields()},methods:{async onPeriod(e,t){this.rows=[],this.report=new Wa,this.report.setReportType("moh"),this.report.setStartDate(t.start_date),this.report.setEndDate(t.end_date),this.period=this.report.getDateIntervalPeriod(),this.setRows(await this.report.getRegimenReport())},setRows(e){this.sortByArvNumber(Object.values(e)).map(e=>{let t="";const a=e.medication.map(e=>(t=this.toDate(e.start_date),`${e.medication} (${e.quantity})`));this.rows.push([D["a"].td(e.arv_number),D["a"].td(e.gender),D["a"].tdDate(e.birthdate),D["a"].tdDate(e.art_start_date),D["a"].td(e.current_weight),D["a"].td(e.current_regimen),D["a"].td(a.join(", ")),D["a"].tdDate(t),D["a"].td(e.vl_result),D["a"].tdDate(e.vl_result_date)])})}}});const Rn=x()(Bn,[["render",En]]);var Fn=Rn;function Ln(e,t,a,n,i,r){const s=Object(o["resolveComponent"])("report-template");return Object(o["openBlock"])(),Object(o["createBlock"])(s,{title:e.title,period:e.period,rows:e.rows,fields:e.fields,columns:e.columns,onReportConfiguration:e.onPeriod},null,8,["title","period","rows","fields","columns","onReportConfiguration"])}var Mn=Object(o["defineComponent"])({mixins:[Ta["a"]],components:{ReportTemplate:Ia["a"]},data:()=>({title:"Clinic Regimen Switch Report",rows:[],columns:[[D["a"].thTxt("ARV#"),D["a"].thTxt("Gender"),D["a"].thTxt("DOB"),D["a"].thTxt("ART start date"),D["a"].thTxt("Weight"),D["a"].thTxt("Prev.Reg"),D["a"].thTxt("Curr.Reg"),D["a"].thTxt("ARVs"),D["a"].thTxt("Curr.reg dispensed")]]}),created(){this.fields=this.getDateDurationFields()},methods:{async onPeriod(e,t){this.rows=[],this.report=new Wa,this.report.setStartDate(t.start_date),this.report.setEndDate(t.end_date),this.period=this.report.getDateIntervalPeriod(),this.setRows(await this.report.getRegimenSwitchReport(!1))},setRows(e){this.sortByArvNumber(Object.values(e)).forEach(e=>{let t="";const a=e.medication.map(e=>(t=e.start_date,`${e.medication} (${e.quantity})`));this.rows.push([D["a"].td(e.arv_number),D["a"].td(e.gender),D["a"].tdDate(e.birthdate),D["a"].tdDate(e.art_start_date),D["a"].td(e.current_weight),D["a"].td(e.previous_regimen),D["a"].td(e.current_regimen),D["a"].td(a.join(", ")),D["a"].tdDate(t)])})}}});const Hn=x()(Mn,[["render",Ln]]);var $n=Hn;function Un(e,t,a,n,i,r){const s=Object(o["resolveComponent"])("report-template");return Object(o["openBlock"])(),Object(o["createBlock"])(s,{title:e.title,period:e.period,rows:e.rows,fields:e.fields,columns:e.columns,reportReady:e.reportReady,isLoading:e.isLoading,onReportConfiguration:e.onPeriod},null,8,["title","period","rows","fields","columns","reportReady","isLoading","onReportConfiguration"])}var qn=Object(o["defineComponent"])({mixins:[Ta["a"]],components:{ReportTemplate:Ia["a"]},data:()=>({title:"Clinic Pregnant patients report",totalClients:[],rows:[],reportReady:!1,isLoading:!1,columns:[[D["a"].thTxt("ARV#"),D["a"].thTxt("First name",{exportable:!1}),D["a"].thTxt("Last name",{exportable:!1}),D["a"].thTxt("birthdate")]]}),created(){this.fields=this.getDateDurationFields()},methods:{async onPeriod(e,t){this.rows=[],this.report=new xa["b"],this.report.setStartDate(t.start_date),this.report.setEndDate(t.end_date),this.period=this.report.getDateIntervalPeriod(),this.setRows(await this.report.getPregnantWomen())},async setRows(e){this.sortByArvNumber(e).forEach(e=>{this.rows.push([D["a"].td(e.arv_number),D["a"].td(e.given_name),D["a"].td(e.family_name),D["a"].tdDate(e.birthdate)])})}}});const Gn=x()(qn,[["render",Un]]);var zn=Gn;function Yn(e,t,a,n,i,r){const s=Object(o["resolveComponent"])("report-template"),c=Object(o["resolveComponent"])("ion-page");return Object(o["openBlock"])(),Object(o["createBlock"])(c,null,{default:Object(o["withCtx"])(()=>[Object(o["createVNode"])(s,{title:e.title,period:e.period,rows:e.rows,fields:e.fields,columns:e.columns,showtitleOnly:!0,canExportPDf:!0,customFileName:e.exportedReportTitle,onReportConfiguration:e.onPeriod},null,8,["title","period","rows","fields","columns","customFileName","onReportConfiguration"])]),_:1})}var Wn=Object(o["defineComponent"])({mixins:[Ta["a"]],components:{ReportTemplate:Ia["a"],IonPage:De["D"]},data:()=>({title:"Clinic Clients due for VL <small>(clients with appointments in specified period)</small>",exportedReportTitle:"",rows:[],columns:[]}),async created(){const e=await n["b"].filingNumbersEnabled();this.columns.push([D["a"].thTxt(e?"Filing #":"ARV#"),D["a"].thTxt("App."),D["a"].thTxt("ART started"),D["a"].thTxt("Months on ART"),D["a"].thTxt("Milestone"),D["a"].thTxt("Ordered"),D["a"].thTxt("Result"),D["a"].thTxt("Released")]),this.fields=this.getDateDurationFields()},methods:{async onPeriod(e,t){this.rows=[],this.report=new xa["b"],this.report.setStartDate(t.start_date),this.report.setEndDate(t.end_date),this.period=this.report.getDateIntervalPeriod();const a=await this.report.getClientsDueForVl();this.exportedReportTitle=`${xa["b"].getLocationName()} Clinic Clients due for VL (clients with appointments in specified period) ${this.period}`,this.setRows(a)},async setRows(e){e.forEach(e=>{this.rows.push([D["a"].tdLink(e.arv_number,()=>this.confirmPatient(e.patient_id)),D["a"].tdDate(e.appointment_date),D["a"].tdDate(e.start_date),D["a"].td(e.months_on_art),D["a"].tdDate(e.mile_stone),D["a"].tdDate(e.last_result_order_date),D["a"].td(e.last_result),D["a"].tdDate(e.last_result_date)])})}}});const Kn=x()(Wn,[["render",Yn]]);var Xn=Kn;function Jn(e,t,a,n,i,r){const s=Object(o["resolveComponent"])("report-template");return Object(o["openBlock"])(),Object(o["createBlock"])(s,{title:e.title,period:e.period,rows:e.rows,fields:e.fields,columns:e.columns,onReportConfiguration:e.onPeriod},null,8,["title","period","rows","fields","columns","onReportConfiguration"])}var Qn=Object(o["defineComponent"])({mixins:[Ta["a"]],components:{ReportTemplate:Ia["a"]},data:()=>({title:"Clinic Retention report",totalClients:[],rows:[],cohort:{},columns:[[D["a"].thTxt("Age group"),D["a"].thTxt("Gender"),D["a"].thTxt("Initiated one month"),D["a"].thTxt("Completed one month"),D["a"].thTxt("Initiated Three months"),D["a"].thTxt("Completed Three months"),D["a"].thTxt("Initiated Six months"),D["a"].thTxt("Completed Six months")]]}),created(){this.fields=this.getDateDurationFields()},methods:{async onPeriod(e,t){this.rows=[],this.report=new xa["b"],this.report.setStartDate(t.start_date),this.report.setEndDate(t.end_date),this.period=this.report.getDateIntervalPeriod(),this.cohort=await this.report.getClientRentention(),this.setRows("F"),this.setRows("M")},getValue(e,t,a,n){try{const o=this.cohort[e][n].filter(e=>e.gender===t&&e.age_group===a).map(e=>e.patient_id);return this.drill(o)}catch(o){return console.warn(o),0}},setRows(e){const t=[...xa["a"],"Unknown"];for(const a in t){const n=t[a],o=[D["a"].td(n),D["a"].td(e)];if(Object(h["isEmpty"])(this.cohort))this.rows.push([...o,D["a"].td(0),D["a"].td(0),D["a"].td(0),D["a"].td(0),D["a"].td(0),D["a"].td(0)]);else{for(const t in this.cohort)o.push(this.getValue(parseInt(t),e,n,"all")),o.push(this.getValue(parseInt(t),e,n,"retained"));this.rows.push(o)}}}}});const Zn=x()(Qn,[["render",Jn]]);var eo=Zn;function to(e,t,a,n,i,r){const s=Object(o["resolveComponent"])("report-template");return Object(o["openBlock"])(),Object(o["createBlock"])(s,{title:e.title,period:e.period,rows:e.rows,fields:e.fields,columns:e.columns,reportReady:e.reportReady,isLoading:e.isLoading,onReportConfiguration:e.onPeriod},null,8,["title","period","rows","fields","columns","reportReady","isLoading","onReportConfiguration"])}var ao=Object(o["defineComponent"])({mixins:[Ta["a"]],components:{ReportTemplate:Ia["a"]},data:()=>({title:"Clinic External consultation clients",totalClients:[],rows:[],reportReady:!1,isLoading:!1,columns:[[D["a"].thTxt("NPID"),D["a"].thTxt("Client Type"),D["a"].thTxt("First name",{exportable:!1}),D["a"].thTxt("Last name",{exportable:!1}),D["a"].thTxt("Gender"),D["a"].thTxt("DOB"),D["a"].thTxt("Date set")]]}),created(){this.fields=this.getDateDurationFields()},methods:{async onPeriod(e,t){this.reportReady=!0,this.isLoading=!0,this.rows=[],this.report=new xa["b"],this.report.setStartDate(t.start_date),this.report.setEndDate(t.end_date),this.period=this.report.getDateIntervalPeriod(),this.setRows(await this.report.getExternalConsultationClients()),this.isLoading=!1},async setRows(e){e.forEach(e=>{this.rows.push([D["a"].td(e.npid),D["a"].td(e.patient_type),D["a"].td(e.given_name),D["a"].td(e.family_name),D["a"].td(e.gender),D["a"].tdDate(e.birthdate),D["a"].tdDate(e.date_set)])})}}});const no=x()(ao,[["render",to]]);var oo=no;function io(e,t,a,n,i,r){const s=Object(o["resolveComponent"])("report-template"),c=Object(o["resolveComponent"])("ion-page");return Object(o["openBlock"])(),Object(o["createBlock"])(c,null,{default:Object(o["withCtx"])(()=>[Object(o["createVNode"])(s,{title:e.title,period:e.period,rows:e.rows,fields:e.fields,columns:e.columns,canExportPDf:!1,showtitleOnly:!0,customFileName:e.customFileName,onReportConfiguration:e.onPeriod},null,8,["title","period","rows","fields","columns","customFileName","onReportConfiguration"])]),_:1})}var ro=Object(o["defineComponent"])({mixins:[Ta["a"]],components:{ReportTemplate:Ia["a"],IonPage:De["D"]},data:()=>({title:"",totalClients:[],rows:[],reportReady:!1,isLoading:!1,columns:[[D["a"].thTxt("ARV#"),D["a"].thTxt("Gender"),D["a"].thTxt("Birthdate"),D["a"].thTxt("Specimen"),D["a"].thTxt("Ordered"),D["a"].thTxt("Result"),D["a"].thTxt("Released"),D["a"].thTxt("Action")]]}),created(){this.fields=[...this.getDateDurationFields(),{id:"result_type",helpText:"Select result type",type:r["b"].TT_SELECT,validation:e=>s["a"].required(e),options:()=>[{label:"Viraemia 1000+",value:"viraemia-1000"},{label:"Suppressed",value:"suppressed"},{label:"Low level viraemia",value:"low-level-viraemia"}]}]},methods:{async onPeriod(e,t){const a=e.result_type;this.rows=[],this.report=new xa["b"],this.report.setStartDate(t.start_date),this.report.setEndDate(t.end_date),this.period=this.report.getDateIntervalPeriod(),this.title=`${a.label} Report <small><b>(between the period of (${this.period})</b></small>`,this.customFileName=`${xa["b"].getLocationName()} ${a.label} ${this.period}`,this.setRows(await this.report.getViralLoadResults(a.value.toLowerCase()))},async setRows(e){this.sortByArvNumber(e).forEach(e=>{this.rows.push([D["a"].td(e.arv_number),D["a"].td(e.gender),D["a"].tdDate(e.birthdate),D["a"].td(e.specimen),D["a"].tdDate(e.order_date),D["a"].td(`${e.result_modifier||""} ${e.result}`),D["a"].tdDate(e.result_date),D["a"].tdBtn("View",()=>this.$router.push("/patient/dashboard/"+e["patient_id"]))])})}}});const so=x()(ro,[["render",io]]);var co=so;function lo(e,t,a,n,i,r){const s=Object(o["resolveComponent"])("report-template");return Object(o["openBlock"])(),Object(o["createBlock"])(s,{title:e.title,period:e.period,rows:e.rows,fields:e.fields,columns:e.columns,onReportConfiguration:e.onPeriod},null,8,["title","period","rows","fields","columns","onReportConfiguration"])}var uo=Object(o["defineComponent"])({mixins:[Ta["a"]],components:{ReportTemplate:Ia["a"]},data:()=>({title:"",totalClients:[],rows:[],columns:[],outcome:""}),created(){const e=[[D["a"].thTxt("ARV#"),D["a"].thTxt("First name",{exportable:!1}),D["a"].thTxt("Last name",{exportable:!1}),D["a"].thTxt("Birthdate"),D["a"].thTxt("Gender"),D["a"].thTxt("Outcome date"),D["a"].thTxt("Actions")]],t=e=>[D["a"].td(e.identifier),D["a"].td(e.given_name),D["a"].td(e.family_name),D["a"].tdDate(e.birthdate),D["a"].td(e.gender),D["a"].tdDate(e.start_date),D["a"].tdBtn("View",()=>this.$router.push({path:"/patient/dashboard/"+e.patient_id}))];this.fields=[...this.getDateDurationFields(),{id:"outcome",helpText:"Select outcome",type:r["b"].TT_SELECT,validation:e=>s["a"].required(e),options:()=>[{label:"Transfer Out",value:"Transfer Out",other:{columns:[[D["a"].thTxt("ARV#"),D["a"].thTxt("First name",{exportable:!1}),D["a"].thTxt("Last name",{exportable:!1}),D["a"].thTxt("Birthdate"),D["a"].thTxt("Gender"),D["a"].thTxt("Outcome date"),D["a"].thTxt("TO Location"),D["a"].thTxt("Actions")]],rowBuilder:e=>[D["a"].td(e.identifier),D["a"].td(e.given_name),D["a"].td(e.family_name),D["a"].tdDate(e.birthdate),D["a"].td(e.gender),D["a"].tdDate(e.start_date),D["a"].td(e.transferred_out_to),D["a"].tdBtn("View",()=>this.$router.push({path:"/patient/dashboard/"+e.patient_id}))]}},{label:"Died",value:"Died",other:{columns:e,rowBuilder:t}},{label:"Stopped",value:"Stopped",other:{columns:e,rowBuilder:t}}]}]},methods:{async onPeriod({outcome:e},t){this.rows=[],this.columns=e.other.columns,this.report=new xa["b"],this.report.setStartDate(t.start_date),this.report.setEndDate(t.end_date),this.outcome=e.value.toString(),this.title=this.outcome+" Report",this.period=this.report.getDateIntervalPeriod(),this.setRows(await this.report.getOtherOutcome(this.outcome),e.other.rowBuilder)},setRows(e,t){e&&this.sortByArvNumber(e,"identifier").forEach(e=>this.rows.push(t(e)))}}});const po=x()(uo,[["render",lo]]);var ho=po;function bo(e,t,a,n,i,r){const s=Object(o["resolveComponent"])("report-template");return Object(o["openBlock"])(),Object(o["createBlock"])(s,{title:e.title,period:e.period,rows:e.rows,fields:e.fields,columns:e.columns,onReportConfiguration:e.onPeriod},null,8,["title","period","rows","fields","columns","onReportConfiguration"])}var mo=Object(o["defineComponent"])({mixins:[Ta["a"]],components:{ReportTemplate:Ia["a"]},data:()=>({title:"Regimen Formulation: Patient level report",totalClients:[],rows:[],columns:[[D["a"].thTxt("ARV#"),D["a"].thTxt("Gender"),D["a"].thTxt("DOB")]]}),created(){this.fields=[...this.getDateDurationFields(),{id:"regimen",helpText:"Select regimen",type:r["b"].TT_SELECT,validation:e=>s["a"].required(e),options:()=>qa.map(e=>({label:e,value:e}))},{id:"formulation",helpText:"Select formulation",type:r["b"].TT_SELECT,validation:e=>s["a"].required(e),options:()=>Ya.map(e=>({label:e,value:e}))}]},methods:{async onPeriod({regimen:e,formulation:t},a){this.rows=[],this.report=new Wa,this.report.setStartDate(a.start_date),this.report.setEndDate(a.end_date),this.period=this.report.getDateIntervalPeriod(),this.setRows(await this.report.getRegimenFormulationReport(e.value,t.value))},async setRows(e){this.sortByArvNumber(e).forEach(e=>{this.rows.push([D["a"].td(e.arv_number),D["a"].td(e.gender),D["a"].tdDate(e.birthdate)])})}}});const go=x()(mo,[["render",bo]]);var fo=go;function Oo(e,t,a,n,i,r){const s=Object(o["resolveComponent"])("report-template");return Object(o["openBlock"])(),Object(o["createBlock"])(s,{title:e.title,period:e.period,rows:e.rows,fields:e.fields,columns:e.columns,onReportConfiguration:e.onPeriod},null,8,["title","period","rows","fields","columns","onReportConfiguration"])}var jo=a("1497"),_o=Object(o["defineComponent"])({mixins:[Ta["a"]],components:{ReportTemplate:Ia["a"]},data:()=>({title:"Lab test result(s)",rows:[],cohort:[],reportType:"",reportReady:!1,columns:[],patientLevelColumns:[[D["a"].thTxt("ARV#"),D["a"].thTxt("Gender"),D["a"].thTxt("Birthdate"),D["a"].thTxt("Ordered"),D["a"].thTxt("Specimen"),D["a"].thTxt("Test"),D["a"].thTxt("Result"),D["a"].thTxt("Released")]],disaggregatedColumns:[D["a"].thTxt("Age group"),D["a"].thTxt("Gender")]}),created(){this.report=new jo["a"],this.fields=this.getFormFields()},methods:{async onPeriod({type:e,tests:t}){this.reportReady=!0,this.rows=[],this.period=this.report.getDateIntervalPeriod(),this.reportType=e.value,"disaggregated"===this.reportType?this.setDisaggregatedRows(t):"patient_level"===this.reportType&&this.setPatientLevelRows(t)},getFormFields(){return[...this.getDateDurationFields(),{id:"tests",helpText:"Available test(s) results",type:r["b"].TT_MULTIPLE_SELECT,options:async(e,t,a)=>{this.report.setStartDate(a.start_date),this.report.setEndDate(a.end_date);const n=await this.report.getLabResultsReport(),o=this.buildAvailableTests(n);return this.buildAvailableTestOptions(o)}},{id:"type",helpText:"Select report type",type:r["b"].TT_SELECT,options:()=>[{label:"Disaggregated",value:"disaggregated"},{label:"Patient level",value:"patient_level"}]}]},buildAvailableTests(e){const t={};return e.forEach(e=>{e.measures.forEach(a=>{a.name in t||(t[a.name]=[]),t[a.name].push({id:e.patient_id,arv:e.arv_number,gender:e.gender,ageGroup:e.age_group,birthdate:this.toDate(e.birthdate),ordered:this.toDate(e.order_date),specimen:e.test,test:a.name,result:`${a.modifier} ${a.value}`,released:this.toDate(e.result_date)})})}),t},buildAvailableTestOptions(e){const t=[];for(const a in e){const n=e[a];t.push({label:a,value:n.length,other:n})}return t},setDisaggregatedRows(e){const t=[],a=[];this.columns=[this.disaggregatedColumns.concat(e.map(e=>D["a"].thTxt(e.label)))];for(const n in xa["a"]){const o=xa["a"][n],i=[D["a"].td(o),D["a"].td("M")],r=[D["a"].td(o),D["a"].td("F")];e.forEach(({other:e})=>{const t=t=>e.filter(e=>e.gender===t&&e.ageGroup===o).map(e=>e.id);i.push(this.drill(t("M"))),r.push(this.drill(t("F")))}),t.push(i),a.push(r),this.rows=[...a,...t]}},setPatientLevelRows(e){this.columns=this.patientLevelColumns,e.forEach(({other:e})=>{this.sortByArvNumber(e,"arv").forEach(e=>{this.rows.push([this.tdARV(e.arv),D["a"].td(e.gender),D["a"].tdDate(e.birthdate),D["a"].tdDate(e.ordered),D["a"].td(e.specimen),D["a"].td(e.test),D["a"].td(e.result),D["a"].tdDate(e.released)])})})}}});const vo=x()(_o,[["render",Oo]]);var yo=vo;function wo(e,t,a,n,i,r){const s=Object(o["resolveComponent"])("report-template"),c=Object(o["resolveComponent"])("ion-page");return Object(o["openBlock"])(),Object(o["createBlock"])(c,null,{default:Object(o["withCtx"])(()=>[Object(o["createVNode"])(s,{title:e.title,rows:e.rows,columns:e.columns},null,8,["title","rows","columns"])]),_:1})}var No=a("d6aa"),Co=Object(o["defineComponent"])({mixins:[Ta["a"]],components:{ReportTemplate:No["a"],IonPage:De["D"]},data:()=>({title:"Active clients with adverse outcomes",rows:[],columns:[[D["a"].thTxt("Filing#"),D["a"].thTxt("Outcome"),D["a"].thTxt("Outcome date")]]}),async created(){const e=new xa["b"],t=await e.getArchivingCandidates();t.forEach(e=>{this.rows.push([D["a"].td(e.filing_number),D["a"].td(e.outcome),D["a"].tdDate(e.outcome_date)])})}});const Vo=x()(Co,[["render",wo]]);var Do=Vo;function ko(e,t,a,n,i,r){const s=Object(o["resolveComponent"])("report-template"),c=Object(o["resolveComponent"])("ion-page");return Object(o["openBlock"])(),Object(o["createBlock"])(c,null,{default:Object(o["withCtx"])(()=>[Object(o["createVNode"])(s,{title:e.title,period:e.period,rows:e.rows,columns:e.columns,headerInfoList:e.headerList,reportPrefix:"MoH",config:{showIndex:!0},validationErrors:e.errors,showValidationStatus:e.canValidate,hasServerSideCaching:!0,enabledPDFHorizontalPageBreak:!0,onReportConfiguration:e.onPeriod,onDefaultConfiguration:e.onLoadDefault},null,8,["title","period","rows","columns","headerInfoList","validationErrors","showValidationStatus","onReportConfiguration","onDefaultConfiguration"])]),_:1})}var To=Object(o["defineComponent"])({mixins:[Ta["a"]],components:{ReportTemplate:Ia["a"],IonPage:De["D"]},data:()=>({title:"Disaggregated report",columns:[[D["a"].thTxt("Age group"),D["a"].thTxt("Gender"),D["a"].thNum("Tx new (new on ART)"),D["a"].thNum("TX curr (receiving ART)"),D["a"].thNum("TX curr (received IPT)"),D["a"].thNum("TX curr (screened for TB)"),...qa.map(e=>D["a"].thNum(e)),D["a"].thNum("Unknown"),D["a"].thNum("Total (regimen)")]],errors:[],showStatus:!1,rowDataRefs:["txNew","txCurr","txGivenIpt","txScreenTB",...qa,"N/A","regimenTotals"],dataRefLabels:{txNew:"Tx new (new on ART)",txCurr:"Tx curr (receiving ART)",txGivenIpt:"TX curr (received IPT)",txScreenTB:"TX curr (screened for TB)","N/A":"Unknown",regimenTotals:"Regimen Totals"},aggregations:[],mohCohort:{},maleFemaleAgeGroupData:{},headerList:[],canValidate:!1,onLoadDefault:null,sortIndexes:{}}),async created(){const{query:e}=this.$route;e.start_date&&e.end_date&&e.quarter&&(this.onLoadDefault=()=>this.onPeriod({quarter:{label:e.quarter,other:{start:e.start_date,end:e.end_date}}},{}))},watch:{async canValidate(e){e&&await this.validateReport()}},computed:{rows(){return Object.keys(this.sortIndexes).sort((e,t)=>parseInt(e)-parseInt(t)).reduce((e,t)=>e.concat(this.sortIndexes[t]),[])}},methods:{async onPeriod(e,t,a=!1){this.canValidate=!1,this.maleFemaleAgeGroupData={},this.aggregations=[],this.sortIndexes={},this.errors=[],this.report=new Aa,this.mohCohort=new Pa,e.quarter?(this.mohCohort.setQuarter(e.quarter.label),this.mohCohort.setStartDate(e.quarter.other.start),this.mohCohort.setEndDate(e.quarter.other.end),this.report.setQuarter(e.quarter.label),this.report.setStartDate(e.quarter.other.start),this.report.setEndDate(e.quarter.other.end),this.period="Custom"===e.quarter.label?this.report.getDateIntervalPeriod():e.quarter.label):(this.mohCohort.setStartDate(t.start_date),this.mohCohort.setEndDate(t.end_date),this.report.setStartDate(t.start_date),this.report.setEndDate(t.end_date),this.period=this.report.getDateIntervalPeriod()),this.report.setRebuildOutcome(a);const n=await this.report.init();if(!n)return Object(j["e"])("Unable to initialise report");await this.setTableRows(),this.canValidate=!0},async setTableRows(){await this.setFemaleRows(1),await this.setMaleRows(2),await this.setTotalMalesRow(3),await this.setFemalePregnantRows(4),await this.setFemaleBreastFeedingRows(6),await this.setFemaleNotPregnantRows(5)},getColumnLabel(e){return e in this.dataRefLabels?this.dataRefLabels[e]:e},getTotals(e){return this.aggregations.filter(t=>e(t)).reduce((e,t)=>e.concat(t.data),[])},addAggregation(e,t,a=[]){this.aggregations.push({col:e,gender:t,data:a})},async getRegimenRows(e,t){let a=[];const n=[],o=await this.report.getRegimenDistribution(),i=[...qa,"N/A"];return i.forEach(i=>{o[i]&&(a=a.concat(o[i])),n.push(this.drill(o[i],`Regimen ${i} | ${e} | ${t}`)),this.addAggregation(i,t,o[i])}),n.push(this.drill(a,`Regimen Totals | ${e} | ${t}`)),this.addAggregation("regimenTotals",t,a),n},getValue(e,t,a){switch(e){case"tx_given_ipt":return this.report.getTxIpt();case"tx_screened_for_tb":return this.report.getTxCurrTB();default:return t in a?a[t][e]:[]}},setTotalMalesRow(e){const t=(e,t)=>{const a=this.aggregations.filter(t=>"Male"===t.gender&&t.col===e).reduce((e,t)=>e.concat(t.data),[]);return this.drill(a,t)},a=this.rowDataRefs.map(e=>t(e,this.getColumnLabel(e)+" | All Male"));this.sortIndexes[e]=[[D["a"].td("All"),D["a"].td("Male"),...a]]},setFemaleNotPregnantRows(e){const t=(e,t)=>this.aggregations.filter(e=>e.gender.match(/fp|fbf/i)&&e.col===t).reduce((e,t)=>e.concat(t.data||[]),[]).includes(e),a=(e,a)=>{const n=this.aggregations.filter(t=>"Female"===t.gender&&t.col===e).reduce((a,n)=>a.concat(n.data.filter(a=>!t(a,e))),[]);return this.drill(n,a)},n=this.rowDataRefs.map(e=>a(e,this.getColumnLabel(e)+" | FNP"));this.sortIndexes[e]=[[D["a"].td("All"),D["a"].td("FNP"),...n]]},setFemaleRows(e){return this.report.setGender("female"),this.setRows(e,"F",xa["a"],"Female")},setMaleRows(e){return this.report.setGender("male"),this.setRows(e,"M",xa["a"],"Male")},setFemalePregnantRows(e){return this.report.setGender("pregnant"),this.setRows(e,"F",["All"],"FP","Pregnant")},setFemaleBreastFeedingRows(e){return this.report.setGender("breastfeeding"),this.setRows(e,"F",["All"],"FBf","Breastfeeding")},async setRows(e,t,a,n,o=""){for(const i in a){let r=[],s=[],c=[],l=[];const d=o||a[i];if(this.report.setAgeGroup(d),!(d in this.maleFemaleAgeGroupData)){const e=await this.report.getCohort();this.report.setRebuildOutcome(!1),this.maleFemaleAgeGroupData[d]=Object(h["isEmpty"])(e)?{}:e[d]}if(!Object(h["isEmpty"])(this.maleFemaleAgeGroupData[d])){const e=async e=>this.getValue(e,t,this.maleFemaleAgeGroupData[d]);r=await e("tx_new"),s=await e("tx_curr"),c=await e("tx_given_ipt"),l=await e("tx_screened_for_tb"),this.addAggregation("txNew",n,r),this.addAggregation("txCurr",n,s),this.addAggregation("txGivenIpt",n,c),this.addAggregation("txScreenTB",n,l)}switch(this.report.getGender()){case"breastfeeding":this.report.setAgeGroup("All"),this.report.setGender("Fbf");break;case"pregnant":this.report.setAgeGroup("All"),this.report.setGender("FP");break}this.sortIndexes[e]||(this.sortIndexes[e]=[]),this.sortIndexes[e].push([D["a"].td(a[i]),D["a"].td(n),this.drill(r,`Tx new (new on ART) | ${d} | ${n}`),this.drill(s,`Tx curr (receiving ART) | ${d} | ${n}`),this.drill(c,`TX curr (received IPT) | ${d} | ${n}`),this.drill(l,`TX curr (screened for TB) | ${d} | ${n}`),...await this.getRegimenRows(d,n)])}},setHeaderInfoList(e){this.headerList=[{label:"Total Alive and on ART",value:e.length,other:{onclick:()=>this.runTableDrill(e,"Total Alive on ART")}}]},async validateReport(){const e=this.getTotals(e=>"txCurr"===e.col&&e.gender.match(/male|female/i));this.setHeaderInfoList(e);const t={total_alive_and_on_art:{param:e.length,check:(e,t)=>e!=t,error:(e,t)=>`\n                        Total alive of <b>${t}</b>\n                        Does not match total alive of <b>${e}</b> on MOH report\n                    `}},a=this.mohCohort.validateIndicators(t,e=>this.errors=e);-1===a&&(this.errors=["Report not validated. Run the MoH cohort report for similar reporting period and then run this report"])}}});const Io=x()(To,[["render",ko]]);var xo,So=Io;function Po(e,t,a,n,i,r){const s=Object(o["resolveComponent"])("report-template"),c=Object(o["resolveComponent"])("ion-page");return Object(o["openBlock"])(),Object(o["createBlock"])(c,null,{default:Object(o["withCtx"])(()=>[Object(o["createVNode"])(s,{title:e.title,period:e.period,rows:e.rows,fields:e.fields,columns:e.columns,config:{showIndex:!1},reportPrefix:"MoH",hasServerSideCaching:!0,onReportConfiguration:e.onPeriod},null,8,["title","period","rows","fields","columns","onReportConfiguration"])]),_:1})}(function(e){e["GENERAL"]="General",e["CHILDREN"]="Children",e["WOMEN"]="Women"})(xo||(xo={}));class Ao extends Sa["a"]{constructor(){super(),this.quarter="",this.regenerate=!1,this.ageGroup=xo.GENERAL}setRegenerate(e){this.regenerate=e}getAgeGroup(){return this.ageGroup}setQuarter(e){this.quarter=e}setAgeGroup(e){this.ageGroup=e}getSurvivalAnalysis(){return this.getReport("cohort_survival_analysis",{quarter:this.quarter,regenerate:this.regenerate,date:this.date,age_group:this.ageGroup,program_id:this.programID})}}const Eo={style:{borderRight:"5px solid black !important"}};var Bo=Object(o["defineComponent"])({mixins:[Ta["a"]],components:{ReportTemplate:Ia["a"],IonPage:De["D"]},data:()=>({title:"Survival analysis report",totalClients:[],rows:[],columns:[[D["a"].thTxt("Reg cohort"),D["a"].thTxt("Interval (months)"),D["a"].thTxt("Sub group"),D["a"].thTxt("Total Reg (database)"),D["a"].thTxt("Total Reg (Confirmed)",Eo),D["a"].thTxt("Alive"),D["a"].thTxt("Died"),D["a"].thTxt("Defaulted"),D["a"].thTxt("Stopped"),D["a"].thTxt("TO"),D["a"].thTxt("Unknown")]]}),created(){this.fields=[...this.getDateDurationFields(!0,!1,17),{id:"group",helpText:"Select sub-group",type:r["b"].TT_SELECT,validation:e=>s["a"].required(e),options:()=>[{label:"General",value:xo.GENERAL},{label:"Children",value:xo.CHILDREN},{label:"Option B+",value:xo.WOMEN}]}]},methods:{async onPeriod({quarter:e,group:t},a,n=!1){this.rows=[],this.period=e.label,this.report=new Ao,this.report.setRegenerate(n),this.report.setQuarter(e.label),this.report.setAgeGroup(t.value);const o=await this.report.getSurvivalAnalysis();this.rows=this.getRows(o)},getRows(e){return Object.keys(e).filter(t=>!Object(h["isEmpty"])(e[t])).sort((e,t)=>{const[a,n]=e.split(" "),[o,i]=t.split(" ");return parseInt(n)-parseInt(i)}).map(t=>{const a=e[t];let n=0,o=0;const i={"On antiretrovirals":0,Defaulted:0,"Patient died":0,"Treatment stopped":0,"Patient transferred out":0,unknown:0};if(!Object(h["isEmpty"])(a)){for(const e in a){const t=a[e];for(const a in t){const r=t[a];n=parseInt(a),e in i?i[e]=r:i["unknown"]=r,o+=r}}return[D["a"].td(t),D["a"].td(n),D["a"].td(this.report.getAgeGroup()),D["a"].td(o),D["a"].td("",Eo),D["a"].td(i["On antiretrovirals"]),D["a"].td(i["Patient died"]),D["a"].td(i["Defaulted"]),D["a"].td(i["Treatment stopped"]),D["a"].td(i["Patient transferred out"]),D["a"].td(i["unknown"])]}})}}});const Ro=x()(Bo,[["render",Po]]);var Fo=Ro;function Lo(e,t,a,n,i,r){const s=Object(o["resolveComponent"])("report-template"),c=Object(o["resolveComponent"])("ion-page");return Object(o["openBlock"])(),Object(o["createBlock"])(c,null,{default:Object(o["withCtx"])(()=>[Object(o["createVNode"])(s,{reportPrefix:"MoH",title:e.title,period:e.period,rows:e.rows,fields:e.fields,columns:e.columns,config:{showIndex:!0},validationErrors:e.errors,showValidationStatus:e.showStatus,headerInfoList:e.headerList,onReportConfiguration:e.onPeriod},null,8,["title","period","rows","fields","columns","validationErrors","showValidationStatus","headerInfoList","onReportConfiguration"])]),_:1})}var Mo=Object(o["defineComponent"])({mixins:[Ta["a"]],components:{ReportTemplate:Ia["a"],IonPage:De["D"]},data:()=>({title:"TPT new initiations report",rows:[],cohort:{},canValidate:!1,mohCohort:{},headerList:[],errors:[],showStatus:!1,columns:[[D["a"].thTxt("District"),D["a"].thTxt("Age group"),D["a"].thTxt("Gender"),D["a"].thNum("3HP (Started New on ART)"),D["a"].thNum("6H (Started New on ART)"),D["a"].thNum("3HP (Started Previously on ART)"),D["a"].thNum("6H (Started Previously on ART)")]],totalIpt:[],total3hp:[]}),watch:{async canValidate(e){e&&await this.validateReport()}},created(){this.fields=this.getDateDurationFields()},methods:{async onPeriod(e,t){this.canValidate=!1,this.rows=[],this.errors=[],this.showStatus=!1,this.totalIpt=[],this.total3hp=[],this.report=new Wa,this.mohCohort=new Pa,this.mohCohort.setStartDate(t.start_date),this.mohCohort.setEndDate(t.end_date),this.report.setStartDate(t.start_date),this.report.setEndDate(t.end_date),this.period=this.report.getDateIntervalPeriod(),this.cohort=await this.report.getTptNewInitiations(),this.setRows("F"),this.setRows("M"),this.canValidate=!0,this.showStatus=!0},drilldown(e,t){const a=[[D["a"].thTxt("ARV #"),D["a"].thTxt("DOB"),D["a"].thTxt("Dispensed date")]],n=()=>this.sortByArvNumber(e).map(e=>[D["a"].td(e.arv_number),D["a"].tdDate(e.birthdate),D["a"].tdDate(e.dispensation_date)]);return e.length<=0?D["a"].td(0):D["a"].tdLink(e.length,()=>this.drilldownAsyncRows(t,a,n))},setRows(e){const t="M"===e?"Males":"Females";for(const a in xa["a"]){const n=xa["a"][a],o=this.cohort["Location"];if(!Object(h["isEmpty"])(this.cohort)&&n in this.cohort&&a){const a=this.cohort[n];this.total3hp=Object(h["uniq"])([...this.total3hp,...a["3HP_new"][e],...a["3HP_prev"][e]]),this.totalIpt=Object(h["uniq"])([...this.totalIpt,...a["6H_new"][e],...a["6H_prev"][e]]),this.rows.push([D["a"].td(o),D["a"].td(n),D["a"].td(e),this.drilldown(a["3HP_new"][e],`${n} ${t} New on 3HP`),this.drilldown(a["6H_new"][e],`${n} ${t} New on 6H`),this.drilldown(a["3HP_prev"][e],`${n} ${t} Previously on 3HP`),this.drilldown(a["6H_prev"][e],`${n} ${t} Previously on 6H`)])}else this.rows.push([D["a"].td(n),D["a"].td(e),D["a"].td(0),D["a"].td(0)])}},validateReport(){const e={newly_initiated_on_3hp:{param:this.total3hp.length,check:(e,t)=>e!=t,error:(e,t)=>`\n                        Total newly initiated on <b>3HP(${t})</b> is not matching newly \n                        initiated on 3HP in Cohort report <b>(${e})</b>.\n                    `},newly_initiated_on_ipt:{param:this.totalIpt.length,check:(e,t)=>e!=t,error:(e,t)=>`\n                        Total newly initiated on IPT <b>(${t})</b> is not matching \n                        newly initiated on IPT in Cohort report <b>(${e})</b>.\n                    `}},t=this.mohCohort.validateIndicators(e,e=>this.errors=e);-1===t&&(this.errors=["Report not validated. Run the MoH cohort report for similar reporting period and then run this report"])}}});const Ho=x()(Mo,[["render",Lo]]);var $o=Ho;function Uo(e,t,a,n,i,r){const s=Object(o["resolveComponent"])("report-template"),c=Object(o["resolveComponent"])("ion-page");return Object(o["openBlock"])(),Object(o["createBlock"])(c,null,{default:Object(o["withCtx"])(()=>[Object(o["createVNode"])(s,{title:e.title,period:e.period,rows:e.rows,fields:e.fields,columns:e.columns,reportPrefix:"MoH",config:{showIndex:!0},validationErrors:e.errors,showValidationStatus:e.showStatus,headerInfoList:e.headerInfoList,onReportConfiguration:e.onPeriod},null,8,["title","period","rows","fields","columns","validationErrors","showValidationStatus","headerInfoList","onReportConfiguration"])]),_:1})}var qo=Object(o["defineComponent"])({mixins:[Ta["a"]],components:{ReportTemplate:Ia["a"],IonPage:De["D"]},data:()=>({title:"Moh TX CURR MMD Report",cohort:{},rows:[],headerInfoList:[],totals:new Set,mohCohort:{},errors:[],showStatus:!1,columns:[[D["a"].thTxt("Age group"),D["a"].thTxt("Gender"),D["a"].thNum("# of clients on <3 months of ARVs"),D["a"].thNum("# of clients on 3 - 5 months of ARVs"),D["a"].thNum("# of clients on >= 6 months of ARVs")]],canValidate:!1}),created(){this.fields=this.getDateDurationFields()},watch:{async canValidate(e){e&&await this.validateReport()}},methods:{async onPeriod(e,t){this.canValidate=!1,this.rows=[],this.errors=[],this.showStatus=!1,this.report=new mn,this.mohCohort=new Pa,this.mohCohort.setStartDate(t.start_date),this.mohCohort.setEndDate(t.end_date),this.report.setOrg("moh"),this.report.setStartDate(t.start_date),this.report.setEndDate(t.end_date),this.period=this.report.getDateIntervalPeriod(),await this.setRows(),this.setHeaderInfoList(),this.canValidate=!0,this.showStatus=!0},setHeaderInfoList(){this.headerInfoList=[{label:"Total clients",value:this.totals.size,other:{onclick:()=>this.runTableDrill(Array.from(this.totals),"Total Clients")}}]},getValues(e,t){const a=[],n=[],o=[];for(const i in e){const t=e[i],r=t.prescribed_days;this.totals.add(i),r<90&&a.push(i),r>=90&&r<=150&&n.push(i),r>150&&o.push(i)}return[this.drill(a,t+" < 3 months of Arvs"),this.drill(n,t+" 3-5 months of Arvs"),this.drill(o,t+" > 6 months months of Arvs")]},async setRows(){let e=0,t=0;const a=[],n=[];for(const o in xa["a"]){const i=xa["a"][o];if("<1 year"===i)e=0,t=0;else if("90 plus years"===i)e=90,t=120;else{const[a,n]=i.split("-");e=parseInt(a),t=parseInt(n)}const r=await this.report.getTxCurrMMDReport(e,t);this.report.initArvRefillPeriod(!1),r?(n.push([D["a"].td(i),D["a"].td("Female"),...this.getValues(r["Female"],i+" (F)")]),a.push([D["a"].td(i),D["a"].td("Male"),...this.getValues(r["Male"],i+" (M)")])):(n.push([D["a"].td(i),D["a"].td("Female"),D["a"].td(0),D["a"].td(0),D["a"].td(0)]),a.push([D["a"].td(i),D["a"].td("Male"),D["a"].td(0),D["a"].td(0),D["a"].td(0)])),this.rows=[...n,...a]}},validateReport(){const e={total_alive_and_on_art:{param:this.totals.size,check:(e,t)=>e!=t,error:(e,t)=>`\n                        MoH cohort Alive and on ART clients <b>(${e})</b> is not\n                        matching with total TX MMD clients <b(${t}).</b>\n                    `}},t=this.mohCohort.validateIndicators(e,e=>this.errors=e);-1===t&&(this.errors=["Report not validated. Run the MoH cohort report for similar reporting period and then run this report"])}}});const Go=x()(qo,[["render",Uo]]);var zo=Go;function Yo(e,t,a,n,i,r){const s=Object(o["resolveComponent"])("report-template"),c=Object(o["resolveComponent"])("ion-page");return Object(o["openBlock"])(),Object(o["createBlock"])(c,null,{default:Object(o["withCtx"])(()=>[Object(o["createVNode"])(s,{title:e.title,period:e.period,rows:e.rows,fields:e.fields,columns:e.columns,reportPrefix:"MoH",config:{showIndex:!1},enabledPDFHorizontalPageBreak:!0,onReportConfiguration:e.onPeriod},null,8,["title","period","rows","fields","columns","onReportConfiguration"])]),_:1})}var Wo=Object(o["defineComponent"])({mixins:[Ta["a"]],components:{ReportTemplate:Ia["a"],IonPage:De["D"]},data:()=>({rows:[],title:"Regimen distribution (Weight)",columns:[]}),created(){this.columns=[[D["a"].thTxt("Weight band"),D["a"].thTxt("Gender"),...Ga.map(e=>D["a"].thNum(e)),D["a"].thNum("Unknown"),D["a"].thNum("Total (regimen)")]],this.fields=this.getDateDurationFields()},methods:{async onPeriod(e,t){this.rows=[],this.report=new Wa,this.report.setStartDate(t.start_date),this.report.setEndDate(t.end_date),this.period=this.report.getDateIntervalPeriod();const a=await this.report.getRegimensByWeight();await this.setRows(a)},async setRows(e){const t=e=>[...Ga,"N/A"].map(t=>{const a=e.filter(e=>!!e[t]).map(e=>Object.values(e)[0]);return D["a"].td(Object(h["isEmpty"])(a)?0:a[0])}),a=e=>e.reduce((e,t)=>e+t.td,0);za.forEach(n=>{const o=e.filter(e=>e.weight===n);o.forEach(e=>{const o=t(e.males),i=t(e.females),r=[D["a"].td(n),D["a"].td("Male"),...o,D["a"].td(a(o))],s=[D["a"].td(n),D["a"].td("Female"),...i,D["a"].td(a(i))];if(this.rows.push(r),this.rows.push(s),!Object(h["isEmpty"])(e.unknown_gender)){const o=t(e.unknown_gender),i=a(o);this.rows.push([D["a"].td(n),D["a"].td("Unknown Gender"),...o,D["a"].td(i)])}})})}}});const Ko=x()(Wo,[["render",Yo]]);var Xo=Ko;const Jo={id:"report-content"},Qo=Object(o["createVNode"])("div",{id:"print"},null,-1);function Zo(e,t,a,n,i,r){const s=Object(o["resolveComponent"])("ion-loading"),c=Object(o["resolveComponent"])("his-standard-form"),l=Object(o["resolveComponent"])("cohort-v"),d=Object(o["resolveComponent"])("cohort-h"),u=Object(o["resolveComponent"])("cohort-ft"),p=Object(o["resolveComponent"])("ion-content"),h=Object(o["resolveComponent"])("his-footer"),b=Object(o["resolveComponent"])("ion-page");return Object(o["openBlock"])(),Object(o["createBlock"])(o["Fragment"],null,[Object(o["createVNode"])(s,{"is-open":e.isLoading,message:"Please wait..."},null,8,["is-open"]),e.reportReady?Object(o["createCommentVNode"])("",!0):(Object(o["openBlock"])(),Object(o["createBlock"])(c,{key:0,onOnFinish:e.onPeriod,skipSummary:!0,fields:e.fields},null,8,["onOnFinish","fields"])),e.reportReady?(Object(o["openBlock"])(),Object(o["createBlock"])(b,{key:1},{default:Object(o["withCtx"])(()=>[Object(o["createVNode"])(p,null,{default:Object(o["withCtx"])(()=>[Object(o["createVNode"])(l,{key:e.componentKey,indicators:e.indicators},null,8,["indicators"]),Object(o["createVNode"])("div",Jo,[Object(o["createVNode"])(d,{key:e.componentKey,reportparams:e.period,clinicName:e.clinicName},null,8,["reportparams","clinicName"]),Object(o["createVNode"])(u,{key:e.componentKey,onOnClickIndicator:e.onDrillDown,indicators:e.indicators},null,8,["onOnClickIndicator","indicators"])])]),_:1}),Object(o["createVNode"])(h,{btns:e.btns},null,8,["btns"])]),_:1})):Object(o["createCommentVNode"])("",!0),Qo],64)}const ei=Object(o["withScopeId"])("data-v-64e6712a");Object(o["pushScopeId"])("data-v-64e6712a");const ti=Object(o["createVNode"])("tr",{id:"version-row"},[Object(o["createVNode"])("td",{class:"numbers"},""),Object(o["createVNode"])("td",{colspan:"4",id:"version"},"Version 28")],-1),ai=Object(o["createVNode"])("td",{class:"numbers"},"1.",-1),ni=Object(o["createVNode"])("td",{class:"row-title",style:{"border-right-style":"solid","border-bottom":"0px !important","font-weight":"bold"}},"Clinic name",-1),oi={class:"row-title",colspan:"3",style:{"border-bottom-style":"solid"}},ii=Object(o["createVNode"])("tr",null,[Object(o["createVNode"])("td",{class:"numbers"},"2."),Object(o["createVNode"])("td",{class:"row-title",style:{border:"0px !important"}},"Supervisors"),Object(o["createVNode"])("td",{class:"row-name",style:{"font-weight":"bold"}},"Name"),Object(o["createVNode"])("td",{colspan:"2",class:"signatures",style:{"font-weight":"bold"}},"Signature")],-1),ri={class:"numbers"},si=Object(o["createVNode"])("td",{class:"row-title no-borders"},"",-1),ci=Object(o["createVNode"])("td",{class:"row-name name-left"},"",-1),li=Object(o["createVNode"])("td",{colspan:"2",class:"signatures"},"",-1),di=Object(o["createVNode"])("td",{class:"numbers"},"10.",-1),ui=Object(o["createVNode"])("td",{class:"row-title",style:{"border-bottom-style":"solid","border-top-style":"none"}},"Quarter evaluated",-1),pi={class:"row-name name-left",style:{"border-bottom-style":"solid"}},hi=Object(o["createTextVNode"])("Year:"),bi={colspan:"2",class:"signatures",style:{"border-bottom-style":"solid"}},mi=Object(o["createTextVNode"])("Quarter:");Object(o["popScopeId"])();const gi=ei((function(e,t,a,n,i,r){return Object(o["openBlock"])(),Object(o["createBlock"])("table",null,[ti,Object(o["createVNode"])("tr",null,[ai,ni,Object(o["createVNode"])("td",oi,Object(o["toDisplayString"])(a.clinicName),1)]),ii,(Object(o["openBlock"])(!0),Object(o["createBlock"])(o["Fragment"],null,Object(o["renderList"])(e.items,e=>(Object(o["openBlock"])(),Object(o["createBlock"])("tr",{key:e},[Object(o["createVNode"])("td",ri,Object(o["toDisplayString"])(e),1),si,ci,li]))),128)),Object(o["createVNode"])("tr",null,[di,ui,Object(o["createVNode"])("td",pi,[hi,Object(o["createVNode"])("b",null,Object(o["toDisplayString"])(e.quarterYr),1)]),Object(o["createVNode"])("td",bi,[mi,Object(o["createVNode"])("b",null,Object(o["toDisplayString"])(e.quarterStr),1)])])])}));var fi={props:{clinicName:{type:String,default:""},reportparams:{type:Object,required:!0}},data:function(){return{items:["3.","4.","5.","6.","7.","8.","9."],quarterStr:null,quarterYr:null}},methods:{renderQuarter(){if(this.reportparams){const[e,t,a,n]=this.reportparams.split(" ");this.quarterStr=e,this.quarterYr=e.match(/custom/i)?`${t} - ${n}`:t}}},watch:{reportparams:{immediate:!0,handler(){this.renderQuarter()}}}};a("2414");const Oi=x()(fi,[["render",gi],["__scopeId","data-v-64e6712a"]]);var ji=Oi;const _i=Object(o["withScopeId"])("data-v-07ecd408");Object(o["pushScopeId"])("data-v-07ecd408");const vi={id:"consistency_check"};Object(o["popScopeId"])();const yi=_i((function(e,t,a,n,i,r){return Object(o["openBlock"])(),Object(o["createBlock"])("div",vi,[(Object(o["openBlock"])(!0),Object(o["createBlock"])(o["Fragment"],null,Object(o["renderList"])(this.reportConsistency,(e,t)=>(Object(o["openBlock"])(),Object(o["createBlock"])("div",{key:t},Object(o["toDisplayString"])(e),1))),128))])}));var wi=Object(o["defineComponent"])({data:()=>({reportConsistency:[]}),props:{indicators:{type:Object,default:()=>({})}},watch:{indicators:{handler(e){Object(h["isEmpty"])(e)||this.runValidations(e)},deep:!0,immediate:!0}},methods:{runValidations(e){this.reportConsistency=this.getRuleChecks().filter(t=>{if(t.sum){const a=t.sum.map(t=>e[t]).reduce((e,t)=>e+t,0);return t.comparator(e,a)}return!1}).map(e=>e.error())},getRuleChecks(){return[{sum:["initial_non_pregnant_females_all_ages","males_initiated_on_art_first_time","initial_pregnant_females_all_ages","unknown_gender","re_initiated_on_art","transfer_in"],comparator:(e,t)=>e["total_registered"]!=t,error:()=>"\n                    Section 26 - 32: Total registered (Quartely) is not equal to\n                    CHECK: Total FT + Re Patients re-initiated on ART + TI Patients transferred in on ART\n                "},{sum:["cum_initial_non_pregnant_females_all_ages","cum_males_initiated_on_art_first_time","cum_initial_pregnant_females_all_ages","cum_unknown_gender","cum_re_initiated_on_art","cum_transfer_in"],comparator:(e,t)=>e["cum_total_registered"]!=t,error:()=>"\n                    Section 26 - 32: Total registered (Cummulative) is not equal to\n                    CHECK: Total FT + Re Patients re-initiated on ART + TI Patients transferred in on ART\n                "},{sum:["quarterly_all_males","non_pregnant_females","pregnant_females_all_ages"],comparator:(e,t)=>e["total_registered"]!=t,error:()=>"\n                    Section 33 - 35: Total registered (Quartely) is not equal to\n                    M Males (all ages) + FNP Non-pregnant Females (all ages)  + FP Pregnant Females (all ages)  \n                "},{sum:["cum_all_males","cum_non_pregnant_females","cum_pregnant_females_all_ages"],comparator:(e,t)=>e["cum_total_registered"]!=t,error:()=>"\n                    Section 33 - 35: Total registered (Cummulative) is not equal to\n                    M Males (all ages) + FNP Non-pregnant Females (all ages)  + FP Pregnant Females (all ages) \n                "},{sum:["children_below_24_months_at_art_initiation","children_24_months_14_years_at_art_initiation","adults_at_art_initiation"],comparator:(e,t)=>e["total_registered"]!=t,error:()=>"\n                    Section 36 - 38: Total registered (Quartely) is not equal to\n                    A Children below 24 m at ART initiation + B Children 24 m - 14 yrs at ART initiation + C Adults 15 years+ at ART initiation \n                "},{sum:["cum_children_below_24_months_at_art_initiation","cum_children_24_months_14_years_at_art_initiation","cum_adults_at_art_initiation"],comparator:(e,t)=>e["cum_total_registered"]!=t,error:()=>"\n                    Section 36 - 38: Total registered (Cummulative) is not equal to\n                    A Children below 24 m at ART initiation + B Children 24 m - 14 yrs at ART initiation + C Adults 15 years+ at ART initiation \n                "},{sum:["presumed_severe_hiv_disease_in_infants","confirmed_hiv_infection_in_infants_pcr","quarterly_children_12_59_months","pregnant_women","breastfeeding_mothers","who_stage_two","asymptomatic","who_stage_three","who_stage_four","unknown_other_reason_outside_guidelines"],comparator:(e,t)=>e["total_registered"]!=t,error:()=>"\n                    Section 39 - 48: Total registered (Quartely) is not equal to\n                    Pres. Sev. HIV disease age <12 m + PCR Infants <12 mths PCR + U5 Children 12-59mths\n                    Preg Pregnant women + BF Breastfeeding mothers + CD4 CD4 below threshold\n                    Asy Asymptomatic / mild + WHO stage 3 + WHO stage 4\n                    Unknown / reason outside guidelines\n                "},{sum:["cum_presumed_severe_hiv_disease_in_infants","cum_confirmed_hiv_infection_in_infants_pcr","cum_children_12_59_months","cum_pregnant_women","cum_breastfeeding_mothers","cum_who_stage_two","cum_asymptomatic","cum_who_stage_three","cum_who_stage_four","cum_unknown_other_reason_outside_guidelines"],comparator:(e,t)=>e["cum_total_registered"]!=t,error:()=>"\n                    Section 39 - 48: Total registered (Cummulative) is not equal to\n                    Pres. Sev. HIV disease age <12 m + PCR Infants <12 mths PCR + U5 Children 12-59mths\n                     + Preg Pregnant women + BF Breastfeeding mothers + CD4 CD4 below threshold\n                     + Asy Asymptomatic / mild + WHO stage 3 + WHO stage 4\n                     + Unknown / reason outside guidelines\n                "},{sum:["no_tb","tb_within_the_last_two_years","current_episode_of_tb"],comparator:(e,t)=>e["total_registered"]!=t,error:()=>"\n                    Section 49 - 51: Total registered (Quartely) is not equal to\n                    Nev/>2yrs\tNever TB / TB over 2 years ago + Last 2yrs\tTB within the last 2 years + Curr Current episode of TB\n                "},{sum:["cum_no_tb","cum_tb_within_the_last_two_years","cum_current_episode_of_tb"],comparator:(e,t)=>e["cum_total_registered"]!=t,error:()=>"\n                    Section 49 - 51: Total registered (Cummulative) is not equal to\n                    Nev/>2yrs\tNever TB / TB over 2 years ago + Last 2yrs\tTB within the last 2 years + Curr Current episode of TB \n                "},{sum:["total_alive_and_on_art","died_total","defaulted","stopped_art","transfered_out"],comparator:(e,t)=>e["cum_total_registered"]!=t,error:()=>'\n                    Section 53 - 61: Total registered (Cummulative) is not equal to\n                    Total alive and on ART + Died total + Defaulted (more than 2 months overdue after expected to have run out of ARVs \n                     + Stopped taking ARVs (clinician or patient own decision, last known alive\n                     + Transferred Out";\n                '},{sum:["zero_p","zero_a","two_p","two_a","four_pp","four_pa","four_a","five_a","six_a","seven_a","eight_a","nine_pp","nine_pa","nine_a","ten_a","eleven_pp","eleven_pa","eleven_a","twelve_pp","twelve_pa","twelve_a","unknown_regimen","thirteen_a","fourteen_a","sixteen_a","seventeen_a","fourteen_pp","fourteen_pa","fifteen_pp","fifteen_pa","fifteen_a","sixteen_p","seventeen_pa","seventeen_pp"],comparator:(e,t)=>e["total_alive_and_on_art"]!=t,error:()=>"Section 64 - 80: Total alive and on ART is not equal to Regimens sections"},{sum:["total_pregnant_women","total_breastfeeding_women","total_other_patients"],comparator:(e,t)=>e["total_alive_and_on_art"]!=t,error:()=>"\n                    Section 81 - 83: Total alive and on ART is not equal to\n                    Pregnant + Breastfeeding + All others (not circled)\n                "},{sum:["tb_not_suspected","tb_suspected","tb_confirmed_currently_not_yet_on_tb_treatment","tb_confirmed_on_tb_treatment","unknown_tb_status"],comparator:(e,t)=>e["total_alive_and_on_art"]!=t,error:()=>"\n                    Section 84 - 88: Total alive and on ART is not equal to\n                    TB not suspected + TB suspected + TB conf., not on Rx + TB conf., on TB Rx + Unknown (not circled)\n                "},{sum:["total_patients_without_side_effects","total_patients_with_side_effects","unknown_side_effects"],comparator:(e,t)=>e["total_alive_and_on_art"]!=t,error:()=>"\n                    Section 88 - 91: Total alive and on ART is not equal to\n                    None + Any side effects + Unknown (not circled)\n                "},{sum:["patients_with_0_6_doses_missed_at_their_last_visit","patients_with_7_plus_doses_missed_at_their_last_visit","patients_with_unknown_adhrence"],comparator:(e,t)=>e["total_alive_and_on_art"]!=t,error:()=>"\n                    Section 92 - 94: Total alive and on ART is not equal to\n                    0  3 doses missed + 4+ doses missed + Unknown (not circled)\n                "}]}}});a("3612");const Ni=x()(wi,[["render",yi],["__scopeId","data-v-07ecd408"]]);var Ci=Ni;const Vi=Object(o["withScopeId"])("data-v-08569aec");Object(o["pushScopeId"])("data-v-08569aec");const Di={class:"my-table"},ki=Object(o["createVNode"])("tr",{class:"section-description"},[Object(o["createVNode"])("td",{class:"numbers"},""),Object(o["createVNode"])("td",{style:{"font-weight":"bold"},colspan:"2"},"ART Clinic"),Object(o["createVNode"])("td",{colspan:"3",style:{"text-align":"center","font-weight":"bold"}},"Newly registered in quarter"),Object(o["createVNode"])("td",{class:"vertical-separator"},""),Object(o["createVNode"])("td",{colspan:"3",style:{"text-align":"center","font-weight":"bold"}},"Cumulative ever registered")],-1),Ti=Object(o["createVNode"])("tr",{class:"section-description"},[Object(o["createVNode"])("td",{class:"numbers"},""),Object(o["createVNode"])("td",{style:{"font-weight":"bold"},colspan:"2"},"Patients registration details"),Object(o["createVNode"])("td",{style:{"font-weight":"normal","text-align":"center"}},"PoC"),Object(o["createVNode"])("td",{style:{"font-weight":"normal","text-align":"center"}},"Clinic own*"),Object(o["createVNode"])("td",{style:{"font-weight":"normal","text-align":"center"}},"Checked data"),Object(o["createVNode"])("td",{class:"vertical-separator"},""),Object(o["createVNode"])("td",{style:{"font-weight":"normal","text-align":"center"}},"PoC"),Object(o["createVNode"])("td",{style:{"font-weight":"normal","text-align":"center"}},"Clinic own*"),Object(o["createVNode"])("td",{style:{"font-weight":"normal","text-align":"center"}},"Checked data")],-1),Ii=Object(o["createVNode"])("td",{class:"numbers"},"25.",-1),xi=Object(o["createVNode"])("td",{style:{"font-weight":"normal","text-align":"left","padding-left":"5px"},colspan:"2"},"Total registered",-1),Si={style:{"font-weight":"normal"}},Pi=Object(o["createVNode"])("td",{style:{"font-weight":"normal"}},"",-1),Ai=Object(o["createVNode"])("td",{style:{"font-weight":"normal"}},"",-1),Ei=Object(o["createVNode"])("td",{class:"vertical-separator"},"",-1),Bi={style:{"font-weight":"normal"}},Ri=Object(o["createVNode"])("td",{style:{"font-weight":"normal"}},"",-1),Fi=Object(o["createVNode"])("td",{style:{"font-weight":"normal"}},"",-1),Li=Object(o["createVNode"])("tr",{class:"horisonatl-separator"},[Object(o["createVNode"])("td",{colspan:"10"},"")],-1),Mi=Object(o["createVNode"])("td",{class:"numbers"},"26.",-1),Hi=Object(o["createVNode"])("td",{style:{"font-weight":"normal","border-right-style":"none !important","border-bottom-style":"none !important","padding-left":"5px","text-align":"left"}},[Object(o["createVNode"])("b",null,"FT"),Object(o["createTextVNode"])("Patients initiated ")],-1),$i=Object(o["createVNode"])("td",{style:{"font-weight":"normal","border-left-style":"none !important","text-align":"left","border-bottom-style":"none !important"}},"Male",-1),Ui={style:{"font-weight":"normal"}},qi=Object(o["createVNode"])("td",{style:{"font-weight":"normal"}},"",-1),Gi=Object(o["createVNode"])("td",{style:{"font-weight":"normal"}},"",-1),zi=Object(o["createVNode"])("td",{class:"vertical-separator"},"",-1),Yi={style:{"font-weight":"normal"}},Wi=Object(o["createVNode"])("td",{style:{"font-weight":"normal"}},"",-1),Ki=Object(o["createVNode"])("td",{style:{"font-weight":"normal"}},"",-1),Xi=Object(o["createVNode"])("td",{class:"numbers"},"27.",-1),Ji=Object(o["createVNode"])("td",{style:{"font-weight":"normal","border-right-style":"none !important","padding-left":"10px","text-align":"left","border-top-style":"none !important","border-bottom-style":"none !important",width:"100px"}},"on ART ",-1),Qi=Object(o["createVNode"])("td",{style:{"font-weight":"normal","border-left-style":"none !important","text-align":"left","border-top-style":"none !important","border-bottom-style":"none !important"}},"Female Non-pregnant",-1),Zi={style:{"font-weight":"normal"}},er=Object(o["createVNode"])("td",{style:{"font-weight":"normal"}},"",-1),tr=Object(o["createVNode"])("td",{style:{"font-weight":"normal"}},"",-1),ar=Object(o["createVNode"])("td",{class:"vertical-separator"},"",-1),nr={style:{"font-weight":"normal"}},or=Object(o["createVNode"])("td",{style:{"font-weight":"normal"}},"",-1),ir=Object(o["createVNode"])("td",{style:{"font-weight":"normal"}},"",-1),rr=Object(o["createVNode"])("td",{class:"numbers"},"28.",-1),sr=Object(o["createVNode"])("td",{style:{"font-weight":"normal","border-right-style":"none !important","padding-left":"10px","border-top-style":"none !important","border-bottom-style":"none !important","text-align":"left"}}," first time ",-1),cr=Object(o["createVNode"])("td",{style:{"font-weight":"normal","border-left-style":"none !important","text-align":"left","border-top-style":"none !important","border-bottom-style":"none !important"}},"Female pregnant",-1),lr={style:{"font-weight":"normal"}},dr=Object(o["createVNode"])("td",{style:{"font-weight":"normal"}},"",-1),ur=Object(o["createVNode"])("td",{style:{"font-weight":"normal"}},"",-1),pr=Object(o["createVNode"])("td",{class:"vertical-separator"},"",-1),hr={style:{"font-weight":"normal"}},br=Object(o["createVNode"])("td",{style:{"font-weight":"normal"}},"",-1),mr=Object(o["createVNode"])("td",{style:{"font-weight":"normal"}},"",-1),gr=Object(o["createVNode"])("td",{class:"numbers"},"29.",-1),fr=Object(o["createVNode"])("td",{style:{"font-weight":"normal","border-right-style":"none !important","padding-left":"28px","border-top-style":"none !important","border-bottom-style":"none !important"}},"  ",-1),Or=Object(o["createVNode"])("td",{style:{"font-weight":"normal","border-left-style":"none !important","text-align":"left","border-top-style":"dotted !important","border-bottom-style":"none !important"}},"FT Init., Non-disagg.",-1),jr={style:{"font-weight":"normal"}},_r=Object(o["createVNode"])("td",{style:{"font-weight":"normal"}},"",-1),vr=Object(o["createVNode"])("td",{style:{"font-weight":"normal"}},"",-1),yr=Object(o["createVNode"])("td",{class:"vertical-separator"},"",-1),wr={style:{"font-weight":"normal"}},Nr=Object(o["createVNode"])("td",{style:{"font-weight":"normal"}},"",-1),Cr=Object(o["createVNode"])("td",{style:{"font-weight":"normal"}},"",-1),Vr=Object(o["createVNode"])("td",{class:"numbers"},"30.",-1),Dr=Object(o["createVNode"])("td",{style:{"font-weight":"normal","border-right-style":"none !important","padding-left":"28px","border-top-style":"none !important"}},"  ",-1),kr=Object(o["createVNode"])("td",{style:{"font-weight":"normal","border-left-style":"none !important","text-align":"left","border-top-style":"dotted !important"}},"CHECK: Total FT",-1),Tr={style:{"font-weight":"normal"}},Ir=Object(o["createVNode"])("td",{style:{"font-weight":"normal"}},"",-1),xr=Object(o["createVNode"])("td",{style:{"font-weight":"normal"}},"",-1),Sr=Object(o["createVNode"])("td",{class:"vertical-separator"},"",-1),Pr={style:{"font-weight":"normal"}},Ar=Object(o["createVNode"])("td",{style:{"font-weight":"normal"}},"",-1),Er=Object(o["createVNode"])("td",{style:{"font-weight":"normal"}},"",-1),Br=Object(o["createVNode"])("td",{class:"numbers"},"31.",-1),Rr=Object(o["createVNode"])("td",{style:{"text-align":"left","border-bottom-style":"none","font-weight":"normal","padding-left":"10px"},colspan:"2"},[Object(o["createVNode"])("b",null,"Re"),Object(o["createTextVNode"])("Patients re-initiated on ART")],-1),Fr={style:{"font-weight":"normal"}},Lr=Object(o["createVNode"])("td",{style:{"font-weight":"normal"}},"",-1),Mr=Object(o["createVNode"])("td",{style:{"font-weight":"normal"}},"",-1),Hr=Object(o["createVNode"])("td",{class:"vertical-separator"},"",-1),$r={style:{"font-weight":"normal"}},Ur=Object(o["createVNode"])("td",{style:{"font-weight":"normal"}},"",-1),qr=Object(o["createVNode"])("td",{style:{"font-weight":"normal"}},"",-1),Gr=Object(o["createVNode"])("td",{class:"numbers"},"32.",-1),zr=Object(o["createVNode"])("td",{style:{"text-align":"left","font-weight":"normal","padding-left":"10px"},colspan:"2"},[Object(o["createVNode"])("b",null,"TI"),Object(o["createTextVNode"])("Patients transferred in on ART ")],-1),Yr={style:{"font-weight":"normal"}},Wr=Object(o["createVNode"])("td",{style:{"font-weight":"normal"}},"",-1),Kr=Object(o["createVNode"])("td",{style:{"font-weight":"normal"}},"",-1),Xr=Object(o["createVNode"])("td",{class:"vertical-separator"},"",-1),Jr={style:{"font-weight":"normal"}},Qr=Object(o["createVNode"])("td",{style:{"font-weight":"normal"}},"",-1),Zr=Object(o["createVNode"])("td",{style:{"font-weight":"normal"}},"",-1),es=Object(o["createVNode"])("tr",{class:"horisonatl-separator"},[Object(o["createVNode"])("td",{colspan:"10"},"")],-1),ts=Object(o["createVNode"])("td",{class:"numbers"},"33.",-1),as=Object(o["createVNode"])("td",{style:{"text-align":"left","font-weight":"normal","padding-left":"10px"},colspan:"2"},[Object(o["createVNode"])("b",null,"M"),Object(o["createTextVNode"])("Males (all ages) ")],-1),ns={style:{"font-weight":"normal"}},os=Object(o["createVNode"])("td",{style:{"font-weight":"normal"}},"",-1),is=Object(o["createVNode"])("td",{style:{"font-weight":"normal"}},"",-1),rs=Object(o["createVNode"])("td",{class:"vertical-separator"},"",-1),ss={style:{"font-weight":"normal"}},cs=Object(o["createVNode"])("td",{style:{"font-weight":"normal"}},"",-1),ls=Object(o["createVNode"])("td",{style:{"font-weight":"normal"}},"",-1),ds=Object(o["createVNode"])("td",{class:"numbers"},"34.",-1),us=Object(o["createVNode"])("td",{style:{"text-align":"left","border-top-style":"none","font-weight":"normal","padding-left":"10px"},colspan:"2"},[Object(o["createVNode"])("b",null,"FNP"),Object(o["createTextVNode"])("Non-pregnant Females (all ages) ")],-1),ps={style:{"font-weight":"normal"}},hs=Object(o["createVNode"])("td",{style:{"font-weight":"normal"}},"",-1),bs=Object(o["createVNode"])("td",{style:{"font-weight":"normal"}},"",-1),ms=Object(o["createVNode"])("td",{class:"vertical-separator"},"",-1),gs={style:{"font-weight":"normal"}},fs=Object(o["createVNode"])("td",{style:{"font-weight":"normal"}},"",-1),Os=Object(o["createVNode"])("td",{style:{"font-weight":"normal"}},"",-1),js=Object(o["createVNode"])("td",{class:"numbers"},"35.",-1),_s=Object(o["createVNode"])("td",{style:{"text-align":"left","border-top-style":"none","font-weight":"normal","padding-left":"10px"},colspan:"2"},[Object(o["createVNode"])("b",null,"FP"),Object(o["createTextVNode"])("Pregnant Females (all ages) ")],-1),vs={style:{"font-weight":"normal"}},ys=Object(o["createVNode"])("td",{style:{"font-weight":"normal"}},"",-1),ws=Object(o["createVNode"])("td",{style:{"font-weight":"normal"}},"",-1),Ns=Object(o["createVNode"])("td",{class:"vertical-separator"},"",-1),Cs={style:{"font-weight":"normal"}},Vs=Object(o["createVNode"])("td",{style:{"font-weight":"normal"}},"",-1),Ds=Object(o["createVNode"])("td",{style:{"font-weight":"normal"}},"",-1),ks=Object(o["createVNode"])("tr",{class:"horisonatl-separator"},[Object(o["createVNode"])("td",{colspan:"10"},"")],-1),Ts=Object(o["createVNode"])("td",{class:"numbers"},"36.",-1),Is=Object(o["createVNode"])("td",{style:{"text-align":"left","font-weight":"normal","padding-left":"10px"},colspan:"2"},[Object(o["createVNode"])("b",null,"A"),Object(o["createTextVNode"])("Children below 24 m at ART initiation ")],-1),xs={style:{"font-weight":"normal"}},Ss=Object(o["createVNode"])("td",{style:{"font-weight":"normal"}},"",-1),Ps=Object(o["createVNode"])("td",{style:{"font-weight":"normal"}},"",-1),As=Object(o["createVNode"])("td",{class:"vertical-separator"},"",-1),Es={style:{"font-weight":"normal"}},Bs=Object(o["createVNode"])("td",{style:{"font-weight":"normal"}},"",-1),Rs=Object(o["createVNode"])("td",{style:{"font-weight":"normal"}},"",-1),Fs=Object(o["createVNode"])("td",{class:"numbers"},"37.",-1),Ls=Object(o["createVNode"])("td",{style:{"text-align":"left","border-top-style":"none","font-weight":"normal","padding-left":"10px"},colspan:"2"},[Object(o["createVNode"])("b",null,"B"),Object(o["createTextVNode"])("Children 24 m - 14 yrs at ART initiation ")],-1),Ms={style:{"font-weight":"normal"}},Hs=Object(o["createVNode"])("td",{style:{"font-weight":"normal"}},"",-1),$s=Object(o["createVNode"])("td",{style:{"font-weight":"normal"}},"",-1),Us=Object(o["createVNode"])("td",{class:"vertical-separator"},"",-1),qs={style:{"font-weight":"normal"}},Gs=Object(o["createVNode"])("td",{style:{"font-weight":"normal"}},"",-1),zs=Object(o["createVNode"])("td",{style:{"font-weight":"normal"}},"",-1),Ys=Object(o["createVNode"])("td",{class:"numbers"},"38.",-1),Ws=Object(o["createVNode"])("td",{style:{"text-align":"left","border-top-style":"none","font-weight":"normal","padding-left":"10px"},colspan:"2"},[Object(o["createVNode"])("b",null,"C"),Object(o["createTextVNode"])("Adults 15 years+ at ART initiation ")],-1),Ks={style:{"font-weight":"normal"}},Xs=Object(o["createVNode"])("td",{style:{"font-weight":"normal"}},"",-1),Js=Object(o["createVNode"])("td",{style:{"font-weight":"normal"}},"",-1),Qs=Object(o["createVNode"])("td",{class:"vertical-separator"},"",-1),Zs={style:{"font-weight":"normal"}},ec=Object(o["createVNode"])("td",{style:{"font-weight":"normal"}},"",-1),tc=Object(o["createVNode"])("td",{style:{"font-weight":"normal"}},"",-1),ac=Object(o["createVNode"])("tr",{class:"horisonatl-separator"},[Object(o["createVNode"])("td",null,""),Object(o["createVNode"])("td",{colspan:"9",style:{"text-align":"left"}},"Reason for starting ART")],-1),nc=Object(o["createVNode"])("td",{class:"numbers"},"39.",-1),oc=Object(o["createVNode"])("td",{style:{"font-weight":"normal","padding-left":"10px",width:"15px","border-right-style":"none !important","text-align":"left","border-bottom-width":"0px"}},[Object(o["createVNode"])("b",null,"PSHD")],-1),ic=Object(o["createVNode"])("td",{style:{"border-left-style":"none","text-align":"left","padding-left":"10px","border-bottom-width":"0px"}},"Pres. Sev. HIV disease age "+Object(o["toDisplayString"])("<12")+" m",-1),rc={style:{"font-weight":"normal"}},sc=Object(o["createVNode"])("td",{style:{"font-weight":"normal"}},"",-1),cc=Object(o["createVNode"])("td",{style:{"font-weight":"normal"}},"",-1),lc=Object(o["createVNode"])("td",{class:"vertical-separator"},"",-1),dc={style:{"font-weight":"normal"}},uc=Object(o["createVNode"])("td",{style:{"font-weight":"normal"}},"",-1),pc=Object(o["createVNode"])("td",{style:{"font-weight":"normal"}},"",-1),hc=Object(o["createVNode"])("td",{class:"numbers"},"40.",-1),bc=Object(o["createVNode"])("td",{style:{"font-weight":"normal","padding-left":"10px",width:"15px","border-right-width":"0px !important","border-bottom-style":"none","border-left-width":"1px","border-top-width":"0px"}},"",-1),mc=Object(o["createVNode"])("td",{style:{"border-left-width":"1px !important","border-right-width":"1px !important","border-bottom-width":"0px !important","border-style":"dotted","text-align":"left","padding-left":"10px","border-top-width":"0px"}},[Object(o["createVNode"])("b",null,"PCR"),Object(o["createTextVNode"])(" Infants "+Object(o["toDisplayString"])("<12")+" mths PCR",1)],-1),gc={style:{"border-top-width":"0px","border-bottom-width":"0px","font-weight":"normal"}},fc=Object(o["createVNode"])("td",{style:{"border-top-width":"0px","border-bottom-width":"0px","font-weight":"normal"}},"",-1),Oc=Object(o["createVNode"])("td",{style:{"font-weight":"normal"}},"",-1),jc=Object(o["createVNode"])("td",{class:"vertical-separator"},"",-1),_c={style:{"font-weight":"normal"}},vc=Object(o["createVNode"])("td",{style:{"font-weight":"normal"}},"",-1),yc=Object(o["createVNode"])("td",{style:{"font-weight":"normal"}},"",-1),wc=Object(o["createVNode"])("td",{class:"numbers"},"41.",-1),Nc=Object(o["createVNode"])("td",{style:{"font-weight":"normal","padding-left":"10px",width:"15px","border-right-style":"none !important","border-bottom-width":"0px","border-top-width":"0px"}},"",-1),Cc=Object(o["createVNode"])("td",{style:{"border-left-width":"1px","border-top-width":"0px","border-style":"dotted","text-align":"left","padding-left":"10px","border-bottom-width":"0px"}},[Object(o["createVNode"])("b",null,"U5"),Object(o["createTextVNode"])(" Children 12-59mths")],-1),Vc={style:{"font-weight":"normal"}},Dc=Object(o["createVNode"])("td",{style:{"font-weight":"normal"}},"",-1),kc=Object(o["createVNode"])("td",{style:{"font-weight":"normal"}},"",-1),Tc=Object(o["createVNode"])("td",{class:"vertical-separator"},"",-1),Ic={style:{"font-weight":"normal"}},xc=Object(o["createVNode"])("td",{style:{"font-weight":"normal"}},"",-1),Sc=Object(o["createVNode"])("td",{style:{"font-weight":"normal"}},"",-1),Pc=Object(o["createVNode"])("td",{class:"numbers"},"42.",-1),Ac=Object(o["createVNode"])("td",{style:{"font-weight":"normal","padding-left":"10px",width:"15px","border-right-width":"1px !important","border-bottom-width":"0px","border-top-width":"0px","border-style":"dotted"}},"",-1),Ec=Object(o["createVNode"])("td",{style:{"border-left-style":"none","border-top-width":"0px","text-align":"left","padding-left":"10px","border-bottom-width":"0px"}},[Object(o["createVNode"])("b",null,"Preg"),Object(o["createTextVNode"])(" Pregnant women")],-1),Bc={style:{"font-weight":"normal"}},Rc=Object(o["createVNode"])("td",{style:{"font-weight":"normal"}},"",-1),Fc=Object(o["createVNode"])("td",{style:{"font-weight":"normal"}},"",-1),Lc=Object(o["createVNode"])("td",{class:"vertical-separator"},"",-1),Mc={style:{"font-weight":"normal"}},Hc=Object(o["createVNode"])("td",{style:{"font-weight":"normal"}},"",-1),$c=Object(o["createVNode"])("td",{style:{"font-weight":"normal"}},"",-1),Uc=Object(o["createVNode"])("td",{class:"numbers"},"43.",-1),qc=Object(o["createVNode"])("td",{style:{"font-weight":"normal","padding-left":"10px",width:"15px","border-right-style":"none !important","border-style":"dotted","border-left-width":"1px","border-top-width":"0px","border-bottom-width":"0px"}},"",-1),Gc=Object(o["createVNode"])("td",{style:{"border-left-style":"none","border-top-width":"0px","text-align":"left","padding-left":"10px","border-bottom-width":"0px"}},[Object(o["createVNode"])("b",null,"BF"),Object(o["createTextVNode"])(" Breastfeeding mothers")],-1),zc={style:{"font-weight":"normal"}},Yc=Object(o["createVNode"])("td",{style:{"font-weight":"normal"}},"",-1),Wc=Object(o["createVNode"])("td",{style:{"font-weight":"normal"}},"",-1),Kc=Object(o["createVNode"])("td",{class:"vertical-separator"},"",-1),Xc={style:{"font-weight":"normal"}},Jc=Object(o["createVNode"])("td",{style:{"font-weight":"normal"}},"",-1),Qc=Object(o["createVNode"])("td",{style:{"font-weight":"normal"}},"",-1),Zc=Object(o["createVNode"])("td",{class:"numbers"},"44.",-1),el=Object(o["createVNode"])("td",{style:{"font-weight":"normal","padding-left":"10px",width:"15px","border-right-style":"none !important","border-style":"dotted","border-left-width":"1px","border-top-width":"0px","border-bottom-width":"0px"}},"",-1),tl=Object(o["createVNode"])("td",{style:{"border-left-style":"none","border-top-width":"0px","text-align":"left","padding-left":"10px","border-bottom-width":"0px"}},[Object(o["createVNode"])("b",null,"CD4"),Object(o["createTextVNode"])(" CD4 below threshold")],-1),al={style:{"font-weight":"normal"}},nl=Object(o["createVNode"])("td",{style:{"font-weight":"normal"}},"",-1),ol=Object(o["createVNode"])("td",{style:{"font-weight":"normal"}},"",-1),il=Object(o["createVNode"])("td",{class:"vertical-separator"},"",-1),rl={style:{"font-weight":"normal"}},sl=Object(o["createVNode"])("td",{style:{"font-weight":"normal"}},"",-1),cl=Object(o["createVNode"])("td",{style:{"font-weight":"normal"}},"",-1),ll=Object(o["createVNode"])("td",{class:"numbers"},"45.",-1),dl=Object(o["createVNode"])("td",{style:{"font-weight":"normal","padding-left":"10px",width:"15px","border-right-style":"none !important","border-style":"dotted","border-left-width":"1px","border-top-width":"0px","border-bottom-width":"0px"}},"",-1),ul=Object(o["createVNode"])("td",{style:{"border-left-style":"none","border-top-width":"0px","text-align":"left","padding-left":"10px","border-bottom-width":"0px"}},[Object(o["createVNode"])("b",null,"Asy"),Object(o["createTextVNode"])(" Asymptomatic / mild")],-1),pl={style:{"font-weight":"normal"}},hl=Object(o["createVNode"])("td",{style:{"font-weight":"normal"}},"",-1),bl=Object(o["createVNode"])("td",{style:{"font-weight":"normal"}},"",-1),ml=Object(o["createVNode"])("td",{class:"vertical-separator"},"",-1),gl={style:{"font-weight":"normal"}},fl=Object(o["createVNode"])("td",{style:{"font-weight":"normal"}},"",-1),Ol=Object(o["createVNode"])("td",{style:{"font-weight":"normal"}},"",-1),jl=Object(o["createVNode"])("td",{class:"numbers"},"46.",-1),_l=Object(o["createVNode"])("td",{style:{"font-weight":"normal","padding-left":"10px",width:"15px","border-right-style":"none !important","border-top-width":"0px","text-align":"left","border-bottom-width":"0px"}},[Object(o["createVNode"])("b",null,"3")],-1),vl=Object(o["createVNode"])("td",{style:{"border-left-style":"none","border-bottom-width":"0px","text-align":"left","padding-left":"10px","border-top-width":"0px"}},"WHO stage 3",-1),yl={style:{"font-weight":"normal"}},wl=Object(o["createVNode"])("td",{style:{"font-weight":"normal"}},"",-1),Nl=Object(o["createVNode"])("td",{style:{"font-weight":"normal"}},"",-1),Cl=Object(o["createVNode"])("td",{class:"vertical-separator"},"",-1),Vl={style:{"font-weight":"normal"}},Dl=Object(o["createVNode"])("td",{style:{"font-weight":"normal"}},"",-1),kl=Object(o["createVNode"])("td",{style:{"font-weight":"normal"}},"",-1),Tl=Object(o["createVNode"])("td",{class:"numbers"},"47.",-1),Il=Object(o["createVNode"])("td",{style:{"font-weight":"normal","padding-left":"10px",width:"15px","border-right-style":"none !important","border-top-width":"0px","text-align":"left","border-bottom-width":"0px"}},[Object(o["createVNode"])("b",null,"4")],-1),xl=Object(o["createVNode"])("td",{style:{"border-left-width":"0px","border-bottom-style":"none","text-align":"left","padding-left":"10px","border-top-width":"0px"}},"WHO stage 4",-1),Sl={style:{"font-weight":"normal"}},Pl=Object(o["createVNode"])("td",{style:{"font-weight":"normal"}},"",-1),Al=Object(o["createVNode"])("td",{style:{"font-weight":"normal"}},"",-1),El=Object(o["createVNode"])("td",{class:"vertical-separator"},"",-1),Bl={style:{"font-weight":"normal"}},Rl=Object(o["createVNode"])("td",{style:{"font-weight":"normal"}},"",-1),Fl=Object(o["createVNode"])("td",{style:{"font-weight":"normal"}},"",-1),Ll=Object(o["createVNode"])("td",{class:"numbers"},"48.",-1),Ml=Object(o["createVNode"])("td",{style:{"font-weight":"normal","padding-left":"10px",width:"15px","border-right-style":"none !important","text-align":"left","border-top-style":"none"}},[Object(o["createVNode"])("b",null,"Unk")],-1),Hl=Object(o["createVNode"])("td",{style:{"border-left-style":"none","text-align":"left","padding-left":"10px","border-top-style":"none"}},"Unknown / reason outside guidelines",-1),$l={style:{"font-weight":"normal"}},Ul=Object(o["createVNode"])("td",{style:{"font-weight":"normal"}},"",-1),ql=Object(o["createVNode"])("td",{style:{"font-weight":"normal"}},"",-1),Gl=Object(o["createVNode"])("td",{class:"vertical-separator"},"",-1),zl={style:{"font-weight":"normal"}},Yl=Object(o["createVNode"])("td",{style:{"font-weight":"normal"}},"",-1),Wl=Object(o["createVNode"])("td",{style:{"font-weight":"normal"}},"",-1),Kl=Object(o["createVNode"])("tr",{class:"horisonatl-separator"},[Object(o["createVNode"])("td",null,""),Object(o["createVNode"])("td",{colspan:"9",style:{"text-align":"left"}},"Stage defining conditions at ART initiation")],-1),Xl=Object(o["createVNode"])("td",{class:"numbers"},"49.",-1),Jl=Object(o["createVNode"])("td",{style:{"font-weight":"normal","padding-left":"10px",width:"15px","text-align":"left","border-right-style":"none !important"}},[Object(o["createVNode"])("b",null,"Nev/>2yrs")],-1),Ql=Object(o["createVNode"])("td",{style:{"border-left-style":"none","text-align":"left","padding-left":"10px"}},"Never TB / TB over 2 years ago",-1),Zl={style:{"font-weight":"normal"}},ed=Object(o["createVNode"])("td",{style:{"font-weight":"normal"}},"",-1),td=Object(o["createVNode"])("td",{style:{"font-weight":"normal"}},"",-1),ad=Object(o["createVNode"])("td",{class:"vertical-separator"},"",-1),nd={style:{"font-weight":"normal"}},od=Object(o["createVNode"])("td",{style:{"font-weight":"normal"}},"",-1),id=Object(o["createVNode"])("td",{style:{"font-weight":"normal"}},"",-1),rd=Object(o["createVNode"])("td",{class:"numbers"},"50.",-1),sd=Object(o["createVNode"])("td",{style:{"font-weight":"normal","padding-left":"10px",width:"15px","text-align":"left","border-right-style":"none !important"}},[Object(o["createVNode"])("b",null,"Last 2yrs")],-1),cd=Object(o["createVNode"])("td",{style:{"text-align":"left","padding-left":"10px","border-left-style":"none"}},"TB within the last 2 years",-1),ld={style:{"font-weight":"normal"}},dd=Object(o["createVNode"])("td",{style:{"font-weight":"normal"}},"",-1),ud=Object(o["createVNode"])("td",{style:{"font-weight":"normal"}},"",-1),pd=Object(o["createVNode"])("td",{class:"vertical-separator"},"",-1),hd={style:{"font-weight":"normal"}},bd=Object(o["createVNode"])("td",{style:{"font-weight":"normal"}},"",-1),md=Object(o["createVNode"])("td",{style:{"font-weight":"normal"}},"",-1),gd=Object(o["createVNode"])("td",{class:"numbers"},"51.",-1),fd=Object(o["createVNode"])("td",{style:{"font-weight":"normal","padding-left":"10px",width:"15px","text-align":"left","border-right-style":"none !important"}},[Object(o["createVNode"])("b",null,"Curr")],-1),Od=Object(o["createVNode"])("td",{style:{"border-left-style":"none","text-align":"left","padding-left":"10px"}},"Current episode of TB",-1),jd={style:{"font-weight":"normal"}},_d=Object(o["createVNode"])("td",{style:{"font-weight":"normal"}},"",-1),vd=Object(o["createVNode"])("td",{style:{"font-weight":"normal"}},"",-1),yd=Object(o["createVNode"])("td",{class:"vertical-separator"},"",-1),wd={style:{"font-weight":"normal"}},Nd=Object(o["createVNode"])("td",{style:{"font-weight":"normal"}},"",-1),Cd=Object(o["createVNode"])("td",{style:{"font-weight":"normal"}},"",-1),Vd=Object(o["createVNode"])("tr",{class:"horisonatl-separator"},[Object(o["createVNode"])("td",{colspan:"10",style:{"text-align":"left"}},"")],-1),Dd=Object(o["createVNode"])("td",{class:"numbers"},"52.",-1),kd=Object(o["createVNode"])("td",{style:{"font-weight":"normal","padding-left":"10px",width:"15px","text-align":"left","border-right-style":"none !important"}},[Object(o["createVNode"])("b",null,"KS")],-1),Td=Object(o["createVNode"])("td",{style:{"border-left-style":"none","text-align":"left","padding-left":"10px"}},"Kaposis Sarcoma",-1),Id={style:{"font-weight":"normal"}},xd=Object(o["createVNode"])("td",{style:{"font-weight":"normal"}},"",-1),Sd=Object(o["createVNode"])("td",{style:{"font-weight":"normal"}},"",-1),Pd=Object(o["createVNode"])("td",{class:"vertical-separator"},"",-1),Ad={style:{"font-weight":"normal"}},Ed=Object(o["createVNode"])("td",{style:{"font-weight":"normal"}},"",-1),Bd=Object(o["createVNode"])("td",{style:{"font-weight":"normal"}},"",-1),Rd=Object(o["createVNode"])("tr",{class:"horisonatl-separator"},[Object(o["createVNode"])("td",{class:"numbers"},""),Object(o["createVNode"])("td",{colspan:"6",style:{"text-align":"left"}},[Object(o["createVNode"])("b",null,"Primary outcomes as of the end of the quarter evaluated")]),Object(o["createVNode"])("td",{colspan:"3",style:{"text-align":"center"}},[Object(o["createVNode"])("b",null,"Out of all patients ever registered")])],-1),Fd=Object(o["createVNode"])("tr",{class:"horisonatl-separator"},[Object(o["createVNode"])("td",{class:"numbers"},""),Object(o["createVNode"])("td",{colspan:"6",style:{"text-align":"left"}},""),Object(o["createVNode"])("td",{style:{"text-align":"center"}},"PoC"),Object(o["createVNode"])("td",{style:{"text-align":"center"}},"Clinic own**"),Object(o["createVNode"])("td",{style:{"text-align":"center"}},"Checked data")],-1),Ld=Object(o["createVNode"])("td",{class:"numbers"},"53.",-1),Md=Object(o["createVNode"])("td",{style:{"text-align":"left","padding-left":"10px"},colspan:"6"},"Total alive and on ART",-1),Hd={style:{"font-weight":"normal"}},$d=Object(o["createVNode"])("td",{style:{"font-weight":"normal"}},"",-1),Ud=Object(o["createVNode"])("td",{style:{"font-weight":"normal"}},"",-1),qd=Object(o["createVNode"])("tr",{class:"horisonatl-separator"},[Object(o["createVNode"])("td",{class:"numbers"},""),Object(o["createVNode"])("td",{colspan:"9",style:{"text-align":"center"}},"")],-1),Gd=Object(o["createVNode"])("td",{class:"numbers"},"54.",-1),zd=Object(o["createVNode"])("td",{style:{"font-weight":"bold","text-align":"right","border-right-style":"none","border-bottom-style":"none","border-left-style":"none"},colspan:"2"},"M1",-1),Yd=Object(o["createVNode"])("td",{style:{"text-align":"left","padding-left":"10px","border-right-style":"none","border-bottom-style":"none","border-left-style":"none"},colspan:"4"},"Died within the 1st month after ART initiation",-1),Wd={style:{"font-weight":"normal"}},Kd=Object(o["createVNode"])("td",{style:{"font-weight":"normal"}},"",-1),Xd=Object(o["createVNode"])("td",{style:{"font-weight":"normal"}},"",-1),Jd=Object(o["createVNode"])("td",{class:"numbers"},"55.",-1),Qd=Object(o["createVNode"])("td",{style:{"font-weight":"bold","text-align":"right","border-right-style":"none","border-top-style":"none","border-left-style":"none","border-bottom-style":"none"},colspan:"2"},"M2",-1),Zd=Object(o["createVNode"])("td",{style:{"text-align":"left","padding-left":"10px","border-top-style":"none","border-right-style":"none","border-bottom-style":"none","border-left-style":"none"},colspan:"4"},"Died within the 2nd month after ART initiation",-1),eu={style:{"font-weight":"normal"}},tu=Object(o["createVNode"])("td",{style:{"font-weight":"normal"}},"",-1),au=Object(o["createVNode"])("td",{style:{"font-weight":"normal"}},"",-1),nu=Object(o["createVNode"])("td",{class:"numbers"},"56.",-1),ou=Object(o["createVNode"])("td",{style:{"font-weight":"bold","text-align":"right","border-right-style":"none","border-bottom-style":"none","border-left-style":"none","border-top-style":"none"},colspan:"2"},"M3",-1),iu=Object(o["createVNode"])("td",{style:{"text-align":"left","padding-left":"10px","border-top-style":"none","border-right-style":"none","border-bottom-style":"none","border-left-style":"none"},colspan:"4"},"Died within the 3rd month after ART initiation",-1),ru={style:{"font-weight":"normal"}},su=Object(o["createVNode"])("td",{style:{"font-weight":"normal"}},"",-1),cu=Object(o["createVNode"])("td",{style:{"font-weight":"normal"}},"",-1),lu=Object(o["createVNode"])("td",{class:"numbers"},"57.",-1),du=Object(o["createVNode"])("td",{style:{"font-weight":"bold","text-align":"right","border-right-style":"none","border-left-style":"none","border-top-style":"none"},colspan:"2"},"M4+",-1),uu=Object(o["createVNode"])("td",{style:{"text-align":"left","padding-left":"10px","border-right-style":"none","border-left-style":"none","border-top-style":"none"},colspan:"4"},"Died after the end of the 3rd month after ART initiation",-1),pu={style:{"font-weight":"normal"}},hu=Object(o["createVNode"])("td",{style:{"font-weight":"normal"}},"",-1),bu=Object(o["createVNode"])("td",{style:{"font-weight":"normal"}},"",-1),mu=Object(o["createVNode"])("td",{class:"numbers"},"58.",-1),gu=Object(o["createVNode"])("td",{style:{"text-align":"left","padding-left":"10px","border-bottom-style":"none"},colspan:"6"},"Died total",-1),fu={style:{"font-weight":"normal"}},Ou=Object(o["createVNode"])("td",{style:{"font-weight":"normal"}},"",-1),ju=Object(o["createVNode"])("td",{style:{"font-weight":"normal"}},"",-1),_u=Object(o["createVNode"])("td",{class:"numbers"},"59.",-1),vu=Object(o["createVNode"])("td",{style:{"text-align":"left","padding-left":"10px","border-top-style":"none","border-bottom-style":"none"},colspan:"6"},"Defaulted (more than 2 months overdue after expected to have run out of ARVs)",-1),yu={style:{"font-weight":"normal"}},wu=Object(o["createVNode"])("td",{style:{"font-weight":"normal"}},"",-1),Nu=Object(o["createVNode"])("td",{style:{"font-weight":"normal"}},"",-1),Cu=Object(o["createVNode"])("td",{class:"numbers"},"60.",-1),Vu=Object(o["createVNode"])("td",{style:{"text-align":"left","padding-left":"10px","border-top-style":"none","border-bottom-style":"none"},colspan:"6"},"Stopped taking ARVs (clinician or patient own decision, last known alive)",-1),Du={style:{"font-weight":"normal"}},ku=Object(o["createVNode"])("td",{style:{"font-weight":"normal"}},"",-1),Tu=Object(o["createVNode"])("td",{style:{"font-weight":"normal"}},"",-1),Iu=Object(o["createVNode"])("td",{class:"numbers"},"61.",-1),xu=Object(o["createVNode"])("td",{style:{"text-align":"left","padding-left":"10px","border-top-style":"none"},colspan:"6"},"Transferred Out",-1),Su={style:{"font-weight":"normal"}},Pu=Object(o["createVNode"])("td",{style:{"font-weight":"normal"}},"",-1),Au=Object(o["createVNode"])("td",{style:{"font-weight":"normal"}},"",-1),Eu=Object(o["createVNode"])("tr",{class:"horisonatl-separator"},[Object(o["createVNode"])("td",{class:"numbers"},""),Object(o["createVNode"])("td",null,""),Object(o["createVNode"])("td",{colspan:"6",style:{"font-style":"italic","text-align":"center"}},"Check completeness of Clinic own data"),Object(o["createVNode"])("td",null,[Object(o["createVNode"])("img",{src:"/assets/images/sum-arrow.png",class:"sum-arrows"})]),Object(o["createVNode"])("td",null,[Object(o["createVNode"])("img",{src:"/assets/images/sum-arrow.png",class:"sum-arrows"})])],-1),Bu=Object(o["createVNode"])("tr",{class:"horisonatl-separator"},[Object(o["createVNode"])("td",{class:"numbers"},"62."),Object(o["createVNode"])("td",{colspan:"2"},""),Object(o["createVNode"])("td",{colspan:"5",style:{"text-align":"left","border-style":"dotted","border-width":"1px 1px 0px 1px","padding-left":"10px"}},"Total adv. outcomes = Died total + Defaulted + Stopped + TO"),Object(o["createVNode"])("td",{style:{"border-style":"solid","border-width":"1px"}},[Object(o["createVNode"])("span",{class:"postfixes"},"A")]),Object(o["createVNode"])("td",{style:{"border-style":"solid","border-width":"1px"}},[Object(o["createVNode"])("span",{class:"postfixes"},"B")])],-1),Ru=Object(o["createVNode"])("tr",{class:"horisonatl-separator"},[Object(o["createVNode"])("td",{class:"numbers"},"63."),Object(o["createVNode"])("td",{colspan:"2"},""),Object(o["createVNode"])("td",{colspan:"5",style:{"text-align":"left","border-style":"dotted","border-width":"0px 0px 1px 1px","padding-left":"10px"}},"Calculate completeness % A / B x 100 (Use difference if greater than 100%)"),Object(o["createVNode"])("td",{style:{"border-style":"dotted","border-bottom-width":"1px"}},""),Object(o["createVNode"])("td",{style:{"border-style":"solid","border-width":"1px"}},[Object(o["createVNode"])("span",{style:{left:"40px"},class:"postfixes"},"%")])],-1),Fu=Object(o["createVNode"])("tr",{class:"horisonatl-separator"},[Object(o["createVNode"])("td",{class:"numbers"},""),Object(o["createVNode"])("td",{colspan:"7",style:{"text-align":"left","font-weight":"bold","padding-left":"10px"}},"Secondary outcomes of those alive on ART"),Object(o["createVNode"])("td",null,[Object(o["createVNode"])("b",null,"P"),Object(o["createTextVNode"])("aeds formul.")]),Object(o["createVNode"])("td",null,[Object(o["createVNode"])("b",null,"A"),Object(o["createTextVNode"])("dults formul.")])],-1),Lu=Object(o["createVNode"])("td",{class:"numbers"},"64.",-1),Mu=Object(o["createVNode"])("td",{colspan:"2",style:{"text-align":"left","padding-left":"10px","border-bottom-width":"0px","border-right-width":"0px"}},"ART Regimens",-1),Hu=Object(o["createVNode"])("td",{style:{"border-right-width":"0px","border-bottom-width":"0px","border-left-width":"0px"},colspan:"3"},"",-1),$u=Object(o["createVNode"])("td",{style:{"border-right-width":"0px","border-bottom-width":"0px","border-left-width":"0px"}},"Regimen",-1),Uu=Object(o["createVNode"])("td",{style:{"border-right-width":"0px","border-bottom-width":"0px","border-left-width":"0px","text-align":"right","padding-right":"5px","font-weight":"bold"}},"0",-1),qu=Object(o["createVNode"])("td",{class:"numbers"},"65.",-1),Gu=Object(o["createVNode"])("td",{colspan:"2",style:{"text-align":"left","padding-left":"10px","border-bottom-width":"0px","border-right-width":"0px","border-top-width":"0px"}},"",-1),zu=Object(o["createVNode"])("td",{style:{"border-right-width":"0px","border-bottom-width":"0px","border-left-width":"0px","border-top-width":"0px"},colspan:"3"},"",-1),Yu=Object(o["createVNode"])("td",{style:{"border-right-width":"0px","border-bottom-width":"0px","border-left-width":"0px","border-top-width":"0px"}},"Regimen",-1),Wu=Object(o["createVNode"])("td",{style:{"border-right-width":"0px","border-bottom-width":"0px","border-left-width":"0px","border-top-width":"0px","text-align":"right","padding-right":"5px","font-weight":"bold"}},"2",-1),Ku=Object(o["createVNode"])("td",{class:"numbers"},"66.",-1),Xu=Object(o["createVNode"])("td",{colspan:"2",style:{"text-align":"left","padding-left":"10px","border-bottom-width":"0px","border-right-width":"0px","border-top-width":"0px"}},"",-1),Ju=Object(o["createVNode"])("td",{style:{"border-right-width":"0px","border-bottom-width":"0px","text-align":"left","border-left-width":"0px","border-top-width":"0px"},colspan:"3"},[Object(o["createTextVNode"])("Count regimen for "),Object(o["createVNode"])("u",null,"all patients registered")],-1),Qu=Object(o["createVNode"])("td",{style:{"border-right-width":"0px","border-bottom-width":"0px","border-left-width":"0px","border-top-width":"0px"}},"Regimen",-1),Zu=Object(o["createVNode"])("td",{style:{"border-right-width":"0px","border-bottom-width":"0px","border-left-width":"0px","border-top-width":"0px","text-align":"right","padding-right":"5px","font-weight":"bold"}},"4",-1),ep={class:"granules"},tp=Object(o["createVNode"])("div",{class:"granules-row"},[Object(o["createVNode"])("div",{class:"granules-cell granules-right-td"},[Object(o["createVNode"])("span",null,"PP")]),Object(o["createVNode"])("div",{class:"granules-cell"},[Object(o["createVNode"])("span",null,"PA")])],-1),ap={class:"granules-row"},np={class:"granules-cell granules-right-td"},op={class:"granules-cell"},ip=Object(o["createVNode"])("td",{class:"numbers"},"67.",-1),rp=Object(o["createVNode"])("td",{colspan:"2",style:{"text-align":"left","padding-left":"10px","border-bottom-width":"0px","border-right-width":"0px","border-top-width":"0px"}},"",-1),sp=Object(o["createVNode"])("td",{style:{"border-right-width":"0px","border-bottom-width":"0px","text-align":"left","border-left-width":"0px","border-top-width":"0px"},colspan:"3"},"at this site, including those who currently",-1),cp=Object(o["createVNode"])("td",{style:{"border-right-width":"0px","border-bottom-width":"0px","border-left-width":"0px","border-top-width":"0px"}},"Regimen",-1),lp=Object(o["createVNode"])("td",{style:{"border-right-width":"0px","border-bottom-width":"0px","border-left-width":"0px","border-top-width":"0px","text-align":"right","padding-right":"5px","font-weight":"bold"}},"5",-1),dp=Object(o["createVNode"])("td",{style:{"background-color":"#D9D9D9"}},"",-1),up=Object(o["createVNode"])("td",{class:"numbers"},"68.",-1),pp=Object(o["createVNode"])("td",{colspan:"2",style:{"text-align":"left","padding-left":"10px","border-style":"dotted","border-bottom-width":"1px","border-right-width":"0px","border-top-width":"0px"}},"",-1),hp=Object(o["createVNode"])("td",{style:{"border-right-width":"0px","border-bottom-width":"1px","border-style":"dotted","border-left-width":"0px","border-top-width":"0px","text-align":"left"},colspan:"3"},"get supplies from another site",-1),bp=Object(o["createVNode"])("td",{style:{"border-right-width":"0px","border-bottom-width":"1px","border-style":"dotted","border-left-width":"0px","border-top-width":"0px"}},"Regimen",-1),mp=Object(o["createVNode"])("td",{style:{"border-right-width":"0px","border-bottom-width":"1px","border-style":"dotted","border-left-width":"0px","border-top-width":"0px","text-align":"right","padding-right":"5px","font-weight":"bold"}},"6",-1),gp=Object(o["createVNode"])("td",{style:{"background-color":"#D9D9D9"}},"",-1),fp=Object(o["createVNode"])("td",{class:"numbers"},"69.",-1),Op=Object(o["createVNode"])("td",{colspan:"2",style:{"text-align":"left","padding-left":"10px","border-bottom-width":"0px","border-right-width":"0px","border-top-width":"0px"}},"",-1),jp=Object(o["createVNode"])("td",{style:{"border-right-width":"0px","border-bottom-width":"0px","text-align":"left","border-left-width":"0px","border-top-width":"0px"},colspan:"3"},"",-1),_p=Object(o["createVNode"])("td",{style:{"border-right-width":"0px","border-bottom-width":"0px","border-left-width":"0px","border-top-width":"0px"}},"Regimen",-1),vp=Object(o["createVNode"])("td",{style:{"border-right-width":"0px","border-bottom-width":"0px","border-left-width":"0px","border-top-width":"0px","text-align":"right","padding-right":"5px","font-weight":"bold"}},"7",-1),yp=Object(o["createVNode"])("td",{style:{"background-color":"#D9D9D9"}},"",-1),wp=Object(o["createVNode"])("td",{class:"numbers"},"70.",-1),Np=Object(o["createVNode"])("td",{colspan:"2",style:{"text-align":"left","padding-left":"10px","border-bottom-width":"0px","border-right-width":"0px","border-top-width":"0px"}},"",-1),Cp=Object(o["createVNode"])("td",{style:{"border-right-width":"0px","border-bottom-width":"0px","text-align":"left","border-left-width":"0px","border-top-width":"0px"},colspan:"3"},"",-1),Vp=Object(o["createVNode"])("td",{style:{"border-right-width":"0px","border-bottom-width":"0px","border-left-width":"0px","border-top-width":"0px"}},"Regimen",-1),Dp=Object(o["createVNode"])("td",{style:{"border-right-width":"0px","border-bottom-width":"0px","border-left-width":"0px","border-top-width":"0px","text-align":"right","padding-right":"5px","font-weight":"bold"}},"8",-1),kp=Object(o["createVNode"])("td",{style:{"background-color":"#D9D9D9"}},"",-1),Tp=Object(o["createVNode"])("td",{class:"numbers"},"71.",-1),Ip=Object(o["createVNode"])("td",{colspan:"2",style:{"text-align":"left","padding-left":"10px","border-bottom-width":"0px","border-right-width":"0px","border-top-width":"0px"}},"",-1),xp=Object(o["createVNode"])("td",{style:{"border-right-width":"0px","border-bottom-width":"0px","text-align":"left","border-left-width":"0px","border-top-width":"0px"},colspan:"3"},"",-1),Sp=Object(o["createVNode"])("td",{style:{"border-right-width":"0px","border-bottom-width":"0px","border-left-width":"0px","border-top-width":"0px"}},"Regimen",-1),Pp=Object(o["createVNode"])("td",{style:{"border-right-width":"0px","border-bottom-width":"0px","border-left-width":"0px","border-top-width":"0px","text-align":"right","padding-right":"5px","font-weight":"bold"}},"9",-1),Ap={class:"granules"},Ep=Object(o["createVNode"])("div",{class:"granules-row"},[Object(o["createVNode"])("div",{class:"granules-cell granules-right-td"},[Object(o["createVNode"])("span",null,"PP")]),Object(o["createVNode"])("div",{class:"granules-cell"},[Object(o["createVNode"])("span",null,"PA")])],-1),Bp={class:"granules-row"},Rp={class:"granules-cell granules-right-td"},Fp={class:"granules-cell"},Lp=Object(o["createVNode"])("td",{class:"numbers"},"72.",-1),Mp=Object(o["createVNode"])("td",{colspan:"2",style:{"text-align":"left","padding-left":"10px","border-bottom-width":"0px","border-right-width":"0px","border-top-width":"0px"}},"",-1),Hp=Object(o["createVNode"])("td",{style:{"border-right-width":"0px","border-bottom-width":"0px","text-align":"left","border-left-width":"0px","border-top-width":"0px"},colspan:"3"},"",-1),$p=Object(o["createVNode"])("td",{style:{"border-right-width":"0px","border-bottom-width":"0px","border-left-width":"0px","border-top-width":"0px"}},"Regimen",-1),Up=Object(o["createVNode"])("td",{style:{"border-right-width":"0px","border-bottom-width":"0px","border-left-width":"0px","border-top-width":"0px","text-align":"right","padding-right":"5px","font-weight":"bold"}},"10",-1),qp=Object(o["createVNode"])("td",{style:{"background-color":"#D9D9D9"}},"",-1),Gp=Object(o["createVNode"])("td",{class:"numbers"},"73.",-1),zp=Object(o["createVNode"])("td",{colspan:"1",style:{"text-align":"left","padding-left":"10px","border-bottom-width":"0px","border-right-width":"0px","border-top-width":"1px"}},"",-1),Yp=Object(o["createVNode"])("td",{style:{"border-right-width":"1px","border-bottom-width":"0px","text-align":"left","border-left-width":"0px","border-top-width":"1px"},colspan:"4"},"Specify Other Regimens and number of patients on each",-1),Wp=Object(o["createVNode"])("td",{style:{"border-right-width":"0px","border-bottom-width":"0px","border-left-width":"0px","border-top-width":"0px"}},"Regimen",-1),Kp=Object(o["createVNode"])("td",{style:{"border-right-width":"0px","border-bottom-width":"0px","border-left-width":"0px","border-top-width":"0px","text-align":"right","padding-right":"5px","font-weight":"bold"}},"11",-1),Xp={class:"granules"},Jp=Object(o["createVNode"])("div",{class:"granules-row"},[Object(o["createVNode"])("div",{class:"granules-cell granules-right-td"},[Object(o["createVNode"])("span",null,"PP")]),Object(o["createVNode"])("div",{class:"granules-cell"},[Object(o["createVNode"])("span",null,"PA")])],-1),Qp={class:"granules-row"},Zp={class:"granules-cell granules-right-td"},eh={class:"granules-cell"},th=Object(o["createVNode"])("td",{class:"numbers"},"74.",-1),ah=Object(o["createVNode"])("td",{colspan:"2",style:{"text-align":"left","padding-left":"10px","border-top-style":"dotted","border-bottom-width":"0px","border-right-width":"0px","border-top-width":"1px"}},"",-1),nh=Object(o["createVNode"])("td",{style:{"border-right-width":"1px","border-bottom-width":"0px","border-top-style":"dotted","text-align":"left","border-left-width":"0px","border-top-width":"1px"},colspan:"3"},"",-1),oh=Object(o["createVNode"])("td",{style:{"border-right-width":"0px","border-bottom-width":"0px","border-left-width":"0px","border-top-width":"0px"}},"Regimen",-1),ih=Object(o["createVNode"])("td",{style:{"border-right-width":"0px","border-bottom-width":"0px","border-left-width":"0px","border-top-width":"0px","text-align":"right","padding-right":"5px","font-weight":"bold"}},"12",-1),rh={class:"granules"},sh=Object(o["createVNode"])("div",{class:"granules-row"},[Object(o["createVNode"])("div",{class:"granules-cell granules-right-td"},[Object(o["createVNode"])("span",null,"PP")]),Object(o["createVNode"])("div",{class:"granules-cell"},[Object(o["createVNode"])("span",null,"PA")])],-1),ch={class:"granules-row"},lh={class:"granules-cell granules-right-td"},dh={class:"granules-cell"},uh=Object(o["createVNode"])("td",{class:"numbers"},"75.",-1),ph=Object(o["createVNode"])("td",{colspan:"2",style:{"text-align":"left","padding-left":"10px","border-top-style":"dotted","border-bottom-width":"0px","border-right-width":"0px","border-top-width":"1px"}},"",-1),hh=Object(o["createVNode"])("td",{style:{"border-right-width":"1px","border-bottom-width":"0px","border-top-style":"dotted","text-align":"left","border-left-width":"0px","border-top-width":"1px"},colspan:"3"},"",-1),bh=Object(o["createVNode"])("td",{style:{"border-right-width":"0px","border-bottom-width":"0px","border-left-width":"0px","border-top-width":"0px"}},"Regimen",-1),mh=Object(o["createVNode"])("td",{style:{"border-right-width":"0px","border-bottom-width":"0px","border-left-width":"0px","border-top-width":"0px","text-align":"right","padding-right":"5px","font-weight":"bold"}},"13",-1),gh=Object(o["createVNode"])("td",{style:{"background-color":"#D9D9D9"}},"",-1),fh=Object(o["createVNode"])("td",{class:"numbers"},"76.",-1),Oh=Object(o["createVNode"])("td",{colspan:"2",style:{"text-align":"left","padding-left":"10px","border-top-style":"dotted","border-bottom-width":"0px","border-right-width":"0px","border-top-width":"1px"}},"",-1),jh=Object(o["createVNode"])("td",{style:{"border-right-width":"1px","border-bottom-width":"0px","border-top-style":"dotted","text-align":"left","border-left-width":"0px","border-top-width":"1px"},colspan:"3"},"",-1),_h=Object(o["createVNode"])("td",{style:{"border-right-width":"0px","border-bottom-width":"0px","border-left-width":"0px","border-top-width":"0px"}},"Regimen",-1),vh=Object(o["createVNode"])("td",{style:{"border-right-width":"0px","border-bottom-width":"0px","border-left-width":"0px","border-top-width":"0px","text-align":"right","padding-right":"5px","font-weight":"bold"}},"14",-1),yh={class:"granules"},wh=Object(o["createVNode"])("div",{class:"granules-row"},[Object(o["createVNode"])("div",{class:"granules-cell granules-right-td"},[Object(o["createVNode"])("span",null,"PP")]),Object(o["createVNode"])("div",{class:"granules-cell"},[Object(o["createVNode"])("span",null,"PA")])],-1),Nh={class:"granules-row"},Ch={class:"granules-cell granules-right-td"},Vh={class:"granules-cell"},Dh=Object(o["createVNode"])("td",{class:"numbers"},"77.",-1),kh=Object(o["createVNode"])("td",{colspan:"2",style:{"text-align":"left","padding-left":"10px","border-top-style":"dotted","border-bottom-width":"0px","border-right-width":"0px","border-top-width":"1px"}},"",-1),Th=Object(o["createVNode"])("td",{style:{"border-right-width":"1px","border-bottom-width":"0px","border-top-style":"dotted","text-align":"left","border-left-width":"0px","border-top-width":"1px"},colspan:"3"},"",-1),Ih=Object(o["createVNode"])("td",{style:{"border-right-width":"0px","border-bottom-width":"0px","border-left-width":"0px","border-top-width":"0px"}},"Regimen",-1),xh=Object(o["createVNode"])("td",{style:{"border-right-width":"0px","border-bottom-width":"0px","border-left-width":"0px","border-top-width":"0px","text-align":"right","padding-right":"5px","font-weight":"bold"}},"15",-1),Sh={class:"granules"},Ph=Object(o["createVNode"])("div",{class:"granules-row"},[Object(o["createVNode"])("div",{class:"granules-cell granules-right-td"},[Object(o["createVNode"])("span",null,"PP")]),Object(o["createVNode"])("div",{class:"granules-cell"},[Object(o["createVNode"])("span",null,"PA")])],-1),Ah={class:"granules-row"},Eh={class:"granules-cell granules-right-td"},Bh={class:"granules-cell"},Rh=Object(o["createVNode"])("td",{class:"numbers"},"78.",-1),Fh=Object(o["createVNode"])("td",{colspan:"2",style:{"text-align":"left","padding-left":"10px","border-top-style":"dotted","border-bottom-width":"0px","border-right-width":"0px","border-top-width":"1px"}},"",-1),Lh=Object(o["createVNode"])("td",{style:{"border-right-width":"1px","border-bottom-width":"0px","border-top-style":"dotted","text-align":"left","border-left-width":"0px","border-top-width":"1px"},colspan:"3"},"",-1),Mh=Object(o["createVNode"])("td",{style:{"border-right-width":"0px","border-bottom-width":"0px","border-left-width":"0px","border-top-width":"0px"}},"Regimen",-1),Hh=Object(o["createVNode"])("td",{style:{"border-right-width":"0px","border-bottom-width":"0px","border-left-width":"0px","border-top-width":"0px","text-align":"right","padding-right":"5px","font-weight":"bold"}},"16",-1),$h=Object(o["createVNode"])("td",{class:"numbers"},"79.",-1),Uh=Object(o["createVNode"])("td",{colspan:"2",style:{"text-align":"left","padding-left":"10px","border-top-style":"dotted","border-bottom-width":"0px","border-right-width":"0px","border-top-width":"1px"}},"",-1),qh=Object(o["createVNode"])("td",{style:{"border-right-width":"1px","border-bottom-width":"0px","border-top-style":"dotted","text-align":"left","border-left-width":"0px","border-top-width":"1px"},colspan:"3"},"",-1),Gh=Object(o["createVNode"])("td",{style:{"border-right-width":"0px","border-bottom-width":"0px","border-left-width":"0px","border-top-width":"0px"}},"Regimen",-1),zh=Object(o["createVNode"])("td",{style:{"border-right-width":"0px","border-bottom-width":"0px","border-left-width":"0px","border-top-width":"0px","text-align":"right","padding-right":"5px","font-weight":"bold"}},"17",-1),Yh={class:"granules"},Wh=Object(o["createVNode"])("div",{class:"granules-row"},[Object(o["createVNode"])("div",{class:"granules-cell granules-right-td"},[Object(o["createVNode"])("span",null,"PP")]),Object(o["createVNode"])("div",{class:"granules-cell"},[Object(o["createVNode"])("span",null,"PA")])],-1),Kh={class:"granules-row"},Xh={class:"granules-cell granules-right-td"},Jh={class:"granules-cell"},Qh=Object(o["createVNode"])("td",{class:"numbers"},"80.",-1),Zh=Object(o["createVNode"])("td",{colspan:"2",style:{"text-align":"left","padding-left":"10px","border-top-style":"dotted","border-bottom-width":"1px","border-right-width":"0px","border-top-width":"1px"}},"",-1),eb=Object(o["createVNode"])("td",{style:{"border-right-width":"1px","border-bottom-width":"1px","border-top-style":"dotted","text-align":"left","border-left-width":"0px","border-top-width":"1px"},colspan:"3"},"",-1),tb=Object(o["createVNode"])("td",{colspan:"2",style:{"border-right-width":"0px","border-bottom-width":"0px","border-left-width":"0px","border-top-width":"0px","text-align":"left","padding-left":"10px"}},"Other (paed./adult)",-1),ab=Object(o["createVNode"])("td",null,"",-1),nb=Object(o["createVNode"])("tr",{class:"horisonatl-separator"},[Object(o["createVNode"])("td",null,""),Object(o["createVNode"])("td",{colspan:"9",style:{"text-align":"left"}},"")],-1),ob={style:{"page-break-before":"always"}},ib=Object(o["createVNode"])("td",{class:"numbers"},"81.",-1),rb=Object(o["createVNode"])("td",{style:{"text-align":"left","padding-left":"10px","border-bottom-width":"0px","border-right-width":"0px"}},"Pregnant / Breastfeeding",-1),sb=Object(o["createVNode"])("td",{style:{"font-weight":"normal","border-left-width":"0px","border-right-width":"0px","border-bottom-width":"0px"},colspan:"4"},"(as of the last visit before end of quarter)",-1),cb=Object(o["createVNode"])("td",{style:{"font-weight":"normal","border-left-width":"0px","border-bottom-width":"0px","text-align":"left","padding-left":"10px"},colspan:"2"},"Pregnant",-1),lb={colspan:"2",style:{"font-weight":"normal"}},db=Object(o["createVNode"])("td",{class:"numbers"},"82.",-1),ub=Object(o["createVNode"])("td",{style:{"text-align":"left","padding-left":"10px","border-bottom-width":"0px","border-top-width":"0px","border-right-width":"0px"}},"",-1),pb=Object(o["createVNode"])("td",{style:{"font-weight":"normal","border-left-width":"0px","border-right-width":"0px","border-bottom-width":"0px","border-top-width":"0px"},colspan:"4"},"",-1),hb=Object(o["createVNode"])("td",{style:{"font-weight":"normal","border-top-width":"0px","border-left-width":"0px","border-bottom-width":"0px","text-align":"left","padding-left":"10px"},colspan:"2"},"Breastfeeding",-1),bb={colspan:"2",style:{"font-weight":"normal"}},mb=Object(o["createVNode"])("td",{class:"numbers"},"83.",-1),gb=Object(o["createVNode"])("td",{style:{"text-align":"left","padding-left":"10px","border-bottom-width":"1px","border-top-width":"0px","border-right-width":"0px"}},"",-1),fb=Object(o["createVNode"])("td",{style:{"font-weight":"normal","border-left-width":"0px","border-right-width":"0px","border-bottom-width":"1px","border-top-width":"0px"},colspan:"4"},"",-1),Ob=Object(o["createVNode"])("td",{style:{"font-weight":"normal","border-top-width":"0px","border-left-width":"0px","border-bottom-width":"1px","text-align":"left","padding-left":"10px"},colspan:"2"},"All others (not circled)",-1),jb={colspan:"2",style:{"font-weight":"normal"}},_b=Object(o["createVNode"])("tr",{class:"horisonatl-separator"},[Object(o["createVNode"])("td",null,""),Object(o["createVNode"])("td",{colspan:"9",style:{"text-align":"left"}},"")],-1),vb=Object(o["createVNode"])("td",{class:"numbers"},"84.",-1),yb=Object(o["createVNode"])("td",{style:{"text-align":"left","padding-left":"10px","border-bottom-width":"0px","border-right-width":"0px"},colspan:"2"},[Object(o["createTextVNode"])("Current TB status"),Object(o["createVNode"])("br"),Object(o["createTextVNode"])("any form of TB")],-1),wb=Object(o["createVNode"])("td",{style:{"font-weight":"normal","border-left-width":"0px","border-right-width":"0px","border-bottom-width":"0px"},colspan:"3"},"(as of the last visit before end of quarter)",-1),Nb=Object(o["createVNode"])("td",{style:{"font-weight":"normal","border-left-width":"0px","border-bottom-width":"0px","text-align":"left","padding-left":"10px"},colspan:"2"},"TB not suspected",-1),Cb={colspan:"2",style:{"font-weight":"normal"}},Vb=Object(o["createVNode"])("td",{class:"numbers"},"85.",-1),Db=Object(o["createVNode"])("td",{style:{"text-align":"left","padding-left":"10px","border-bottom-width":"0px","border-top-width":"0px","border-right-width":"0px"}},"",-1),kb=Object(o["createVNode"])("td",{style:{"font-weight":"normal","border-left-width":"0px","border-right-width":"0px","border-bottom-width":"0px","border-top-width":"0px"},colspan:"4"},"",-1),Tb=Object(o["createVNode"])("td",{style:{"font-weight":"normal","border-top-width":"0px","border-left-width":"0px","border-bottom-width":"0px","text-align":"left","padding-left":"10px"},colspan:"2"},"TB suspected",-1),Ib={colspan:"2",style:{"font-weight":"normal"}},xb=Object(o["createVNode"])("td",{class:"numbers"},"86.",-1),Sb=Object(o["createVNode"])("td",{style:{"text-align":"left","padding-left":"10px","border-bottom-width":"0px","border-top-width":"0px","border-right-width":"0px"}},"",-1),Pb=Object(o["createVNode"])("td",{style:{"font-weight":"normal","border-left-width":"0px","border-right-width":"0px","border-bottom-width":"0px","border-top-width":"0px"},colspan:"4"},"",-1),Ab=Object(o["createVNode"])("td",{style:{"font-weight":"normal","border-top-width":"0px","border-left-width":"0px","border-bottom-width":"0px","text-align":"left","padding-left":"10px"},colspan:"2"},[Object(o["createTextVNode"])("TB conf., "),Object(o["createVNode"])("b",null,"not"),Object(o["createTextVNode"])(" on Rx")],-1),Eb={colspan:"2",style:{"font-weight":"normal"}},Bb=Object(o["createVNode"])("td",{class:"numbers"},"87.",-1),Rb=Object(o["createVNode"])("td",{style:{"text-align":"left","padding-left":"10px","border-bottom-width":"0px","border-top-width":"0px","border-right-width":"0px"}},"",-1),Fb=Object(o["createVNode"])("td",{style:{"font-weight":"normal","border-left-width":"0px","border-right-width":"0px","border-bottom-width":"0px","border-top-width":"0px"},colspan:"4"},"",-1),Lb=Object(o["createVNode"])("td",{style:{"font-weight":"normal","border-top-width":"0px","border-left-width":"0px","border-bottom-width":"0px","text-align":"left","padding-left":"10px"},colspan:"2"},[Object(o["createTextVNode"])("TB conf., "),Object(o["createVNode"])("b",null,"on"),Object(o["createTextVNode"])(" TB Rx")],-1),Mb={colspan:"2",style:{"font-weight":"normal"}},Hb=Object(o["createVNode"])("td",{class:"numbers"},"88.",-1),$b=Object(o["createVNode"])("td",{style:{"text-align":"left","padding-left":"10px","border-bottom-width":"1px","border-top-width":"0px","border-right-width":"0px"}},"",-1),Ub=Object(o["createVNode"])("td",{style:{"font-weight":"normal","border-left-width":"0px","border-right-width":"0px","border-bottom-width":"1px","border-top-width":"0px"},colspan:"4"},"",-1),qb=Object(o["createVNode"])("td",{style:{"font-weight":"normal","border-top-width":"0px","border-left-width":"0px","border-bottom-width":"1px","text-align":"left","padding-left":"10px"},colspan:"2"},"Unknown (not circled)",-1),Gb={colspan:"2",style:{"font-weight":"normal"}},zb=Object(o["createVNode"])("tr",{class:"horisonatl-separator"},[Object(o["createVNode"])("td",null,""),Object(o["createVNode"])("td",{colspan:"9",style:{"text-align":"left"}},"")],-1),Yb=Object(o["createVNode"])("td",{class:"numbers"},"89.",-1),Wb=Object(o["createVNode"])("td",{style:{"text-align":"left","padding-left":"10px","border-bottom-width":"0px","border-right-width":"0px"}},"Side effects",-1),Kb=Object(o["createVNode"])("td",{style:{"font-weight":"normal","border-left-width":"0px","border-right-width":"0px","border-bottom-width":"0px"},colspan:"4"},"(as of the last visit before end of quarter)",-1),Xb=Object(o["createVNode"])("td",{style:{"font-weight":"normal","border-left-width":"0px","border-bottom-width":"0px","text-align":"left","padding-left":"10px"},colspan:"2"},"None",-1),Jb={colspan:"2",style:{"font-weight":"normal"}},Qb=Object(o["createVNode"])("td",{class:"numbers"},"90.",-1),Zb=Object(o["createVNode"])("td",{style:{"text-align":"left","padding-left":"10px","border-bottom-width":"0px","border-top-width":"0px","border-right-width":"0px"}},"",-1),em=Object(o["createVNode"])("td",{style:{"font-weight":"normal","border-left-width":"0px","border-right-width":"0px","border-bottom-width":"0px","border-top-width":"0px"},colspan:"4"},"ADRReportformfilledforeachcase?(seeQ110.)",-1),tm=Object(o["createVNode"])("td",{style:{"font-weight":"normal","border-top-width":"0px","border-left-width":"0px","border-bottom-width":"0px","text-align":"left","padding-left":"10px"},colspan:"2"},"Any side effects",-1),am={colspan:"2",style:{"font-weight":"normal"}},nm=Object(o["createVNode"])("td",{class:"numbers"},"91.",-1),om=Object(o["createVNode"])("td",{style:{"text-align":"left","padding-left":"10px","border-bottom-width":"1px","border-top-width":"0px","border-right-width":"0px"}},"",-1),im=Object(o["createVNode"])("td",{style:{"font-weight":"normal","border-left-width":"0px","border-right-width":"0px","border-bottom-width":"1px","border-top-width":"0px"},colspan:"4"},"",-1),rm=Object(o["createVNode"])("td",{style:{"font-weight":"normal","border-top-width":"0px","border-left-width":"0px","border-bottom-width":"1px","text-align":"left","padding-left":"10px"},colspan:"2"},"Unknown (not circled)",-1),sm={colspan:"2",style:{"font-weight":"normal"}},cm=Object(o["createVNode"])("tr",{class:"horisonatl-separator"},[Object(o["createVNode"])("td",null,""),Object(o["createVNode"])("td",{colspan:"9",style:{"text-align":"left"}},"")],-1),lm=Object(o["createVNode"])("td",{class:"numbers"},"92.",-1),dm=Object(o["createVNode"])("td",{style:{"text-align":"left","padding-left":"10px","border-bottom-width":"0px","border-right-width":"0px"}},"Adherence",-1),um=Object(o["createVNode"])("td",{style:{"font-weight":"normal","border-left-width":"0px","border-right-width":"0px","border-bottom-width":"0px"},colspan:"4"},"(as of the last visit before end of quarter)",-1),pm=Object(o["createVNode"])("td",{style:{"font-weight":"normal","border-left-width":"0px","border-bottom-width":"0px","text-align":"left","padding-left":"10px"},colspan:"2"},"0  3 doses missed",-1),hm={colspan:"2",style:{"font-weight":"normal"}},bm=Object(o["createVNode"])("td",{class:"numbers"},"93.",-1),mm=Object(o["createVNode"])("td",{style:{"text-align":"left","padding-left":"10px","border-bottom-width":"0px","border-top-width":"0px","border-right-width":"0px"}},"",-1),gm=Object(o["createVNode"])("td",{style:{"font-weight":"normal","border-left-width":"0px","border-right-width":"0px","border-bottom-width":"0px","border-top-width":"0px"},colspan:"4"},null,-1),fm=Object(o["createVNode"])("td",{style:{"font-weight":"normal","border-top-width":"0px","border-left-width":"0px","border-bottom-width":"0px","text-align":"left","padding-left":"10px"},colspan:"2"},"4+ doses missed",-1),Om={colspan:"2",style:{"font-weight":"normal"}},jm=Object(o["createVNode"])("td",{class:"numbers"},"94.",-1),_m=Object(o["createVNode"])("td",{style:{"text-align":"left","padding-left":"10px","border-bottom-width":"1px","border-top-width":"0px","border-right-width":"0px"}},"",-1),vm=Object(o["createVNode"])("td",{style:{"font-weight":"normal","border-left-width":"0px","border-right-width":"0px","border-bottom-width":"1px","border-top-width":"0px"},colspan:"4"},"",-1),ym=Object(o["createVNode"])("td",{style:{"font-weight":"normal","border-top-width":"0px","border-left-width":"0px","border-bottom-width":"1px","text-align":"left","padding-left":"10px"},colspan:"2"},"Unknown (not circled)",-1),wm={colspan:"2",style:{"font-weight":"normal"}},Nm=Object(o["createVNode"])("tr",{class:"horisonatl-separator"},[Object(o["createVNode"])("td",{class:"numbers"},""),Object(o["createVNode"])("td",{colspan:"9",style:{"text-align":"left","font-weight":"bold","padding-left":"10px"}},"Preventive services / HIV related diseases")],-1),Cm=Object(o["createVNode"])("td",{class:"numbers"},"95.",-1),Vm=Object(o["createVNode"])("td",{style:{"text-align":"left","padding-left":"10px","border-bottom-width":"1px","border-top-width":"1px","border-right-width":"0px","font-weight":"bold"}},"TPT",-1),Dm=Object(o["createVNode"])("td",{colspan:"4",style:{"font-weight":"normal","border-top-width":"1px","border-left-width":"0px","border-bottom-width":"1px","text-align":"left","padding-left":"10px"}},"Number of ART patients newly started on TB preventive therapy this quarter",-1),km={style:{"text-align":"right","padding-left":"10px","border-bottom-width":"1px","border-top-width":"1px","border-right-width":"0px"}},Tm=Object(o["createVNode"])("td",{style:{"font-weight":"bold","order-top-width":"1px","text-align":"right","border-left-width":"0px","border-bottom-width":"1px","padding-right":"5px"}},"6H",-1),Im={style:{"text-align":"right","padding-left":"10px","border-bottom-width":"1px","border-top-width":"1px","border-right-width":"0px"}},xm=Object(o["createVNode"])("td",{style:{"font-weight":"bold","order-top-width":"1px","text-align":"right","border-left-width":"0px","border-bottom-width":"1px","padding-right":"5px"}},"3HP",-1),Sm=Object(o["createVNode"])("td",{class:"numbers"},"96.",-1),Pm=Object(o["createVNode"])("td",{style:{"text-align":"left","padding-left":"10px","border-bottom-width":"1px","border-top-width":"1px","border-right-width":"0px","font-weight":"bold"}},"CPT / IPT",-1),Am=Object(o["createVNode"])("td",{colspan:"4",style:{"font-weight":"normal","border-top-width":"1px","border-left-width":"0px","border-bottom-width":"1px","text-align":"left","padding-left":"10px"}},"Approx. % of patients retained in ART who are currently on CPT / IPT",-1),Em={style:{"text-align":"right","padding-left":"10px","border-bottom-width":"1px","border-top-width":"1px","border-right-width":"0px"}},Bm=Object(o["createVNode"])("td",{style:{"font-weight":"bold","order-top-width":"1px","text-align":"right","border-left-width":"0px","border-bottom-width":"1px","padding-right":"5px"}},"CPT%",-1),Rm={style:{"text-align":"right","padding-left":"10px","border-bottom-width":"1px","border-top-width":"1px","border-right-width":"0px"}},Fm=Object(o["createVNode"])("td",{style:{"font-weight":"bold","order-top-width":"1px","text-align":"right","border-left-width":"0px","border-bottom-width":"1px","padding-right":"5px"}},"IPT%",-1),Lm=Object(o["createVNode"])("tr",{class:"horisonatl-separator"},[Object(o["createVNode"])("td",{class:"numbers"},""),Object(o["createVNode"])("td",{colspan:"9"},"")],-1),Mm=Object(o["createVNode"])("td",{class:"numbers"},"97.",-1),Hm=Object(o["createVNode"])("td",{style:{"text-align":"left","padding-left":"10px","border-bottom-width":"1px","border-top-width":"1px","border-right-width":"0px","font-weight":"bold"}},"PIFP",-1),$m=Object(o["createVNode"])("td",{colspan:"4",style:{"font-weight":"normal","border-top-width":"1px","border-left-width":"0px","border-bottom-width":"1px","text-align":"left","padding-left":"10px"}},"Approx. % of women who received Depo at ART in the last quarter",-1),Um={colspan:"4",style:{"text-align":"right","padding-right":"10px","order-top-width":"1px","border-left-width":"0px","border-bottom-width":"1px"}},qm=Object(o["createTextVNode"])("%"),Gm=Object(o["createVNode"])("tr",{class:"horisonatl-separator"},[Object(o["createVNode"])("td",{class:"numbers"},""),Object(o["createVNode"])("td",{colspan:"9"},"")],-1),zm=Object(o["createVNode"])("td",{class:"numbers"},"98.",-1),Ym=Object(o["createVNode"])("td",{style:{"text-align":"left","padding-left":"10px","border-bottom-width":"1px","border-top-width":"1px","border-right-width":"0px","font-weight":"bold"}},"BP screen",-1),Wm=Object(o["createVNode"])("td",{colspan:"4",style:{"font-weight":"normal","border-top-width":"1px","border-left-width":"0px","border-bottom-width":"1px","text-align":"left","padding-left":"10px"}},"Approx. % of adult ART patients with BP recorded at least once this year",-1),Km={colspan:"4",style:{"text-align":"right","padding-right":"10px","order-top-width":"1px","border-left-width":"0px","border-bottom-width":"1px"}},Xm=Object(o["createTextVNode"])("%"),Jm=Object(o["createVNode"])("tr",{class:"horisonatl-separator"},[Object(o["createVNode"])("td",{class:"numbers"},""),Object(o["createVNode"])("td",{colspan:"9"},"")],-1);Object(o["popScopeId"])();const Qm=Vi((function(e,t,a,n,i,r){return Object(o["openBlock"])(),Object(o["createBlock"])("table",Di,[ki,Ti,Object(o["createVNode"])("tr",null,[Ii,xi,Object(o["createVNode"])("td",Si,[Object(o["createVNode"])("a",{href:"#",onClick:t[1]||(t[1]=Object(o["withModifiers"])(t=>{e.drillDown("total_registered")},["prevent"]))},Object(o["toDisplayString"])(e.indicators.total_registered||0),1)]),Pi,Ai,Ei,Object(o["createVNode"])("td",Bi,[Object(o["createVNode"])("a",{href:"#",onClick:t[2]||(t[2]=Object(o["withModifiers"])(t=>{e.drillDown("cum_total_registered")},["prevent"]))},Object(o["toDisplayString"])(e.indicators.cum_total_registered||0),1)]),Ri,Fi]),Li,Object(o["createVNode"])("tr",null,[Mi,Hi,$i,Object(o["createVNode"])("td",Ui,[Object(o["createVNode"])("a",{href:"#",onClick:t[3]||(t[3]=Object(o["withModifiers"])(t=>{e.drillDown("males_initiated_on_art_first_time")},["prevent"]))},Object(o["toDisplayString"])(e.indicators.males_initiated_on_art_first_time||0),1)]),qi,Gi,zi,Object(o["createVNode"])("td",Yi,[Object(o["createVNode"])("a",{href:"#",onClick:t[4]||(t[4]=Object(o["withModifiers"])(t=>{e.drillDown("cum_males_initiated_on_art_first_time")},["prevent"]))},Object(o["toDisplayString"])(e.indicators.cum_males_initiated_on_art_first_time||0),1)]),Wi,Ki]),Object(o["createVNode"])("tr",null,[Xi,Ji,Qi,Object(o["createVNode"])("td",Zi,[Object(o["createVNode"])("a",{href:"#",onClick:t[5]||(t[5]=Object(o["withModifiers"])(t=>{e.drillDown("initial_non_pregnant_females_all_ages")},["prevent"]))},Object(o["toDisplayString"])(e.indicators.initial_non_pregnant_females_all_ages||0),1)]),er,tr,ar,Object(o["createVNode"])("td",nr,[Object(o["createVNode"])("a",{href:"#",onClick:t[6]||(t[6]=Object(o["withModifiers"])(t=>{e.drillDown("cum_initial_non_pregnant_females_all_ages")},["prevent"]))},Object(o["toDisplayString"])(e.indicators.cum_initial_non_pregnant_females_all_ages||0),1)]),or,ir]),Object(o["createVNode"])("tr",null,[rr,sr,cr,Object(o["createVNode"])("td",lr,[Object(o["createVNode"])("a",{href:"#",onClick:t[7]||(t[7]=Object(o["withModifiers"])(t=>{e.drillDown("initial_pregnant_females_all_ages")},["prevent"]))},Object(o["toDisplayString"])(e.indicators.initial_pregnant_females_all_ages||0),1)]),dr,ur,pr,Object(o["createVNode"])("td",hr,[Object(o["createVNode"])("a",{href:"#",onClick:t[8]||(t[8]=Object(o["withModifiers"])(t=>{e.drillDown("cum_initial_pregnant_females_all_ages")},["prevent"]))},Object(o["toDisplayString"])(e.indicators.cum_initial_pregnant_females_all_ages||0),1)]),br,mr]),Object(o["createVNode"])("tr",null,[gr,fr,Or,Object(o["createVNode"])("td",jr,[Object(o["createVNode"])("a",{href:"#",onClick:t[9]||(t[9]=Object(o["withModifiers"])(t=>{e.drillDown("unknown_gender")},["prevent"]))},Object(o["toDisplayString"])(e.indicators.unknown_gender||0),1)]),_r,vr,yr,Object(o["createVNode"])("td",wr,[Object(o["createVNode"])("a",{href:"#",onClick:t[10]||(t[10]=Object(o["withModifiers"])(t=>{e.drillDown("cum_unknown_gender")},["prevent"]))},Object(o["toDisplayString"])(e.indicators.cum_unknown_gender||0),1)]),Nr,Cr]),Object(o["createVNode"])("tr",null,[Vr,Dr,kr,Object(o["createVNode"])("td",Tr,[Object(o["createVNode"])("a",{href:"#",onClick:t[11]||(t[11]=Object(o["withModifiers"])(t=>{e.drillDown("initiated_on_art_first_time")},["prevent"]))},Object(o["toDisplayString"])(e.indicators.initiated_on_art_first_time||0),1)]),Ir,xr,Sr,Object(o["createVNode"])("td",Pr,[Object(o["createVNode"])("a",{href:"#",onClick:t[12]||(t[12]=Object(o["withModifiers"])(t=>{e.drillDown("cum_initiated_on_art_first_time")},["prevent"]))},Object(o["toDisplayString"])(e.indicators.cum_initiated_on_art_first_time||0),1)]),Ar,Er]),Object(o["createVNode"])("tr",null,[Br,Rr,Object(o["createVNode"])("td",Fr,[Object(o["createVNode"])("a",{href:"#",onClick:t[13]||(t[13]=Object(o["withModifiers"])(t=>{e.drillDown("re_initiated_on_art")},["prevent"]))},Object(o["toDisplayString"])(e.indicators.re_initiated_on_art||0),1)]),Lr,Mr,Hr,Object(o["createVNode"])("td",$r,[Object(o["createVNode"])("a",{href:"#",onClick:t[14]||(t[14]=Object(o["withModifiers"])(t=>{e.drillDown("cum_re_initiated_on_art")},["prevent"]))},Object(o["toDisplayString"])(e.indicators.cum_re_initiated_on_art||0),1)]),Ur,qr]),Object(o["createVNode"])("tr",null,[Gr,zr,Object(o["createVNode"])("td",Yr,[Object(o["createVNode"])("a",{href:"#",onClick:t[15]||(t[15]=Object(o["withModifiers"])(t=>{e.drillDown("transfer_in")},["prevent"]))},Object(o["toDisplayString"])(e.indicators.transfer_in||0),1)]),Wr,Kr,Xr,Object(o["createVNode"])("td",Jr,[Object(o["createVNode"])("a",{href:"#",onClick:t[16]||(t[16]=Object(o["withModifiers"])(t=>{e.drillDown("cum_transfer_in")},["prevent"]))},Object(o["toDisplayString"])(e.indicators.cum_transfer_in||0),1)]),Qr,Zr]),es,Object(o["createVNode"])("tr",null,[ts,as,Object(o["createVNode"])("td",ns,[Object(o["createVNode"])("a",{href:"#",onClick:t[17]||(t[17]=Object(o["withModifiers"])(t=>{e.drillDown("quarterly_all_males")},["prevent"]))},Object(o["toDisplayString"])(e.indicators.quarterly_all_males||0),1)]),os,is,rs,Object(o["createVNode"])("td",ss,[Object(o["createVNode"])("a",{href:"#",onClick:t[18]||(t[18]=Object(o["withModifiers"])(t=>{e.drillDown("cum_all_males")},["prevent"]))},Object(o["toDisplayString"])(e.indicators.cum_all_males||0),1)]),cs,ls]),Object(o["createVNode"])("tr",null,[ds,us,Object(o["createVNode"])("td",ps,[Object(o["createVNode"])("a",{href:"#",onClick:t[19]||(t[19]=Object(o["withModifiers"])(t=>{e.drillDown("non_pregnant_females")},["prevent"]))},Object(o["toDisplayString"])(e.indicators.non_pregnant_females||0),1)]),hs,bs,ms,Object(o["createVNode"])("td",gs,[Object(o["createVNode"])("a",{href:"#",onClick:t[20]||(t[20]=Object(o["withModifiers"])(t=>{e.drillDown("cum_non_pregnant_females")},["prevent"]))},Object(o["toDisplayString"])(e.indicators.cum_non_pregnant_females||0),1)]),fs,Os]),Object(o["createVNode"])("tr",null,[js,_s,Object(o["createVNode"])("td",vs,[Object(o["createVNode"])("a",{href:"#",onClick:t[21]||(t[21]=Object(o["withModifiers"])(t=>{e.drillDown("pregnant_females_all_ages")},["prevent"]))},Object(o["toDisplayString"])(e.indicators.pregnant_females_all_ages||0),1)]),ys,ws,Ns,Object(o["createVNode"])("td",Cs,[Object(o["createVNode"])("a",{href:"#",onClick:t[22]||(t[22]=Object(o["withModifiers"])(t=>{e.drillDown("cum_pregnant_females_all_ages")},["prevent"]))},Object(o["toDisplayString"])(e.indicators.cum_pregnant_females_all_ages||0),1)]),Vs,Ds]),ks,Object(o["createVNode"])("tr",null,[Ts,Is,Object(o["createVNode"])("td",xs,[Object(o["createVNode"])("a",{href:"#",onClick:t[23]||(t[23]=Object(o["withModifiers"])(t=>{e.drillDown("children_below_24_months_at_art_initiation")},["prevent"]))},Object(o["toDisplayString"])(e.indicators.children_below_24_months_at_art_initiation||0),1)]),Ss,Ps,As,Object(o["createVNode"])("td",Es,[Object(o["createVNode"])("a",{href:"#",onClick:t[24]||(t[24]=Object(o["withModifiers"])(t=>{e.drillDown("cum_children_below_24_months_at_art_initiation")},["prevent"]))},Object(o["toDisplayString"])(e.indicators.cum_children_below_24_months_at_art_initiation||0),1)]),Bs,Rs]),Object(o["createVNode"])("tr",null,[Fs,Ls,Object(o["createVNode"])("td",Ms,[Object(o["createVNode"])("a",{href:"#",onClick:t[25]||(t[25]=Object(o["withModifiers"])(t=>{e.drillDown("children_24_months_14_years_at_art_initiation")},["prevent"]))},Object(o["toDisplayString"])(e.indicators.children_24_months_14_years_at_art_initiation||0),1)]),Hs,$s,Us,Object(o["createVNode"])("td",qs,[Object(o["createVNode"])("a",{href:"#",onClick:t[26]||(t[26]=Object(o["withModifiers"])(t=>{e.drillDown("cum_children_24_months_14_years_at_art_initiation")},["prevent"]))},Object(o["toDisplayString"])(e.indicators.cum_children_24_months_14_years_at_art_initiation||0),1)]),Gs,zs]),Object(o["createVNode"])("tr",null,[Ys,Ws,Object(o["createVNode"])("td",Ks,[Object(o["createVNode"])("a",{href:"#",onClick:t[27]||(t[27]=Object(o["withModifiers"])(t=>{e.drillDown("adults_at_art_initiation")},["prevent"]))},Object(o["toDisplayString"])(e.indicators.adults_at_art_initiation||0),1)]),Xs,Js,Qs,Object(o["createVNode"])("td",Zs,[Object(o["createVNode"])("a",{href:"#",onClick:t[28]||(t[28]=Object(o["withModifiers"])(t=>{e.drillDown("cum_adults_at_art_initiation")},["prevent"]))},Object(o["toDisplayString"])(e.indicators.cum_adults_at_art_initiation||0),1)]),ec,tc]),ac,Object(o["createVNode"])("tr",null,[nc,oc,ic,Object(o["createVNode"])("td",rc,[Object(o["createVNode"])("a",{href:"#",onClick:t[29]||(t[29]=Object(o["withModifiers"])(t=>{e.drillDown("presumed_severe_hiv_disease_in_infants")},["prevent"]))},Object(o["toDisplayString"])(e.indicators.presumed_severe_hiv_disease_in_infants||0),1)]),sc,cc,lc,Object(o["createVNode"])("td",dc,[Object(o["createVNode"])("a",{href:"#",onClick:t[30]||(t[30]=Object(o["withModifiers"])(t=>{e.drillDown("cum_presumed_severe_hiv_disease_in_infants")},["prevent"]))},Object(o["toDisplayString"])(e.indicators.cum_presumed_severe_hiv_disease_in_infants||0),1)]),uc,pc]),Object(o["createVNode"])("tr",null,[hc,bc,mc,Object(o["createVNode"])("td",gc,[Object(o["createVNode"])("a",{href:"#",onClick:t[31]||(t[31]=Object(o["withModifiers"])(t=>{e.drillDown("confirmed_hiv_infection_in_infants_pcr")},["prevent"]))},Object(o["toDisplayString"])(e.indicators.confirmed_hiv_infection_in_infants_pcr||0),1)]),fc,Oc,jc,Object(o["createVNode"])("td",_c,[Object(o["createVNode"])("a",{href:"#",onClick:t[32]||(t[32]=Object(o["withModifiers"])(t=>{e.drillDown("cum_confirmed_hiv_infection_in_infants_pcr")},["prevent"]))},Object(o["toDisplayString"])(e.indicators.cum_confirmed_hiv_infection_in_infants_pcr||0),1)]),vc,yc]),Object(o["createVNode"])("tr",null,[wc,Nc,Cc,Object(o["createVNode"])("td",Vc,[Object(o["createVNode"])("a",{href:"#",onClick:t[33]||(t[33]=Object(o["withModifiers"])(t=>{e.drillDown("quarterly_children_12_59_months")},["prevent"]))},Object(o["toDisplayString"])(e.indicators.quarterly_children_12_59_months||0),1)]),Dc,kc,Tc,Object(o["createVNode"])("td",Ic,[Object(o["createVNode"])("a",{href:"#",onClick:t[34]||(t[34]=Object(o["withModifiers"])(t=>{e.drillDown("cum_children_12_59_months")},["prevent"]))},Object(o["toDisplayString"])(e.indicators.cum_children_12_59_months||0),1)]),xc,Sc]),Object(o["createVNode"])("tr",null,[Pc,Ac,Ec,Object(o["createVNode"])("td",Bc,[Object(o["createVNode"])("a",{href:"#",onClick:t[35]||(t[35]=Object(o["withModifiers"])(t=>{e.drillDown("pregnant_women")},["prevent"]))},Object(o["toDisplayString"])(e.indicators.pregnant_women||0),1)]),Rc,Fc,Lc,Object(o["createVNode"])("td",Mc,[Object(o["createVNode"])("a",{href:"#",onClick:t[36]||(t[36]=Object(o["withModifiers"])(t=>{e.drillDown("cum_pregnant_women")},["prevent"]))},Object(o["toDisplayString"])(e.indicators.cum_pregnant_women||0),1)]),Hc,$c]),Object(o["createVNode"])("tr",null,[Uc,qc,Gc,Object(o["createVNode"])("td",zc,[Object(o["createVNode"])("a",{href:"#",onClick:t[37]||(t[37]=Object(o["withModifiers"])(t=>{e.drillDown("breastfeeding_mothers")},["prevent"]))},Object(o["toDisplayString"])(e.indicators.breastfeeding_mothers||0),1)]),Yc,Wc,Kc,Object(o["createVNode"])("td",Xc,[Object(o["createVNode"])("a",{href:"#",onClick:t[38]||(t[38]=Object(o["withModifiers"])(t=>{e.drillDown("cum_breastfeeding_mothers")},["prevent"]))},Object(o["toDisplayString"])(e.indicators.cum_breastfeeding_mothers||0),1)]),Jc,Qc]),Object(o["createVNode"])("tr",null,[Zc,el,tl,Object(o["createVNode"])("td",al,[Object(o["createVNode"])("a",{href:"#",onClick:t[39]||(t[39]=Object(o["withModifiers"])(t=>{e.drillDown("who_stage_two")},["prevent"]))},Object(o["toDisplayString"])(e.indicators.who_stage_two||0),1)]),nl,ol,il,Object(o["createVNode"])("td",rl,[Object(o["createVNode"])("a",{href:"#",onClick:t[40]||(t[40]=Object(o["withModifiers"])(t=>{e.drillDown("cum_who_stage_two")},["prevent"]))},Object(o["toDisplayString"])(e.indicators.cum_who_stage_two||0),1)]),sl,cl]),Object(o["createVNode"])("tr",null,[ll,dl,ul,Object(o["createVNode"])("td",pl,[Object(o["createVNode"])("a",{href:"#",onClick:t[41]||(t[41]=Object(o["withModifiers"])(t=>{e.drillDown("asymptomatic")},["prevent"]))},Object(o["toDisplayString"])(e.indicators.asymptomatic||0),1)]),hl,bl,ml,Object(o["createVNode"])("td",gl,[Object(o["createVNode"])("a",{href:"#",onClick:t[42]||(t[42]=Object(o["withModifiers"])(t=>{e.drillDown("cum_asymptomatic")},["prevent"]))},Object(o["toDisplayString"])(e.indicators.cum_asymptomatic||0),1)]),fl,Ol]),Object(o["createVNode"])("tr",null,[jl,_l,vl,Object(o["createVNode"])("td",yl,[Object(o["createVNode"])("a",{href:"#",onClick:t[43]||(t[43]=Object(o["withModifiers"])(t=>{e.drillDown("who_stage_three")},["prevent"]))},Object(o["toDisplayString"])(e.indicators.who_stage_three||0),1)]),wl,Nl,Cl,Object(o["createVNode"])("td",Vl,[Object(o["createVNode"])("a",{href:"#",onClick:t[44]||(t[44]=Object(o["withModifiers"])(t=>{e.drillDown("cum_who_stage_three")},["prevent"]))},Object(o["toDisplayString"])(e.indicators.cum_who_stage_three||0),1)]),Dl,kl]),Object(o["createVNode"])("tr",null,[Tl,Il,xl,Object(o["createVNode"])("td",Sl,[Object(o["createVNode"])("a",{href:"#",onClick:t[45]||(t[45]=Object(o["withModifiers"])(t=>{e.drillDown("who_stage_four")},["prevent"]))},Object(o["toDisplayString"])(e.indicators.who_stage_four||0),1)]),Pl,Al,El,Object(o["createVNode"])("td",Bl,[Object(o["createVNode"])("a",{href:"#",onClick:t[46]||(t[46]=Object(o["withModifiers"])(t=>{e.drillDown("cum_who_stage_four")},["prevent"]))},Object(o["toDisplayString"])(e.indicators.cum_who_stage_four||0),1)]),Rl,Fl]),Object(o["createVNode"])("tr",null,[Ll,Ml,Hl,Object(o["createVNode"])("td",$l,[Object(o["createVNode"])("a",{href:"#",onClick:t[47]||(t[47]=Object(o["withModifiers"])(t=>{e.drillDown("unknown_other_reason_outside_guidelines")},["prevent"]))},Object(o["toDisplayString"])(e.indicators.unknown_other_reason_outside_guidelines||0),1)]),Ul,ql,Gl,Object(o["createVNode"])("td",zl,[Object(o["createVNode"])("a",{href:"#",onClick:t[48]||(t[48]=Object(o["withModifiers"])(t=>{e.drillDown("cum_unknown_other_reason_outside_guidelines")},["prevent"]))},Object(o["toDisplayString"])(e.indicators.cum_unknown_other_reason_outside_guidelines||0),1)]),Yl,Wl]),Kl,Object(o["createVNode"])("tr",null,[Xl,Jl,Ql,Object(o["createVNode"])("td",Zl,[Object(o["createVNode"])("a",{href:"#",onClick:t[49]||(t[49]=Object(o["withModifiers"])(t=>{e.drillDown("no_tb")},["prevent"]))},Object(o["toDisplayString"])(e.indicators.no_tb||0),1)]),ed,td,ad,Object(o["createVNode"])("td",nd,[Object(o["createVNode"])("a",{href:"#",onClick:t[50]||(t[50]=Object(o["withModifiers"])(t=>{e.drillDown("cum_no_tb")},["prevent"]))},Object(o["toDisplayString"])(e.indicators.cum_no_tb||0),1)]),od,id]),Object(o["createVNode"])("tr",null,[rd,sd,cd,Object(o["createVNode"])("td",ld,[Object(o["createVNode"])("a",{href:"#",onClick:t[51]||(t[51]=Object(o["withModifiers"])(t=>{e.drillDown("tb_within_the_last_two_years")},["prevent"]))},Object(o["toDisplayString"])(e.indicators.tb_within_the_last_two_years||0),1)]),dd,ud,pd,Object(o["createVNode"])("td",hd,[Object(o["createVNode"])("a",{href:"#",onClick:t[52]||(t[52]=Object(o["withModifiers"])(t=>{e.drillDown("cum_tb_within_the_last_two_years")},["prevent"]))},Object(o["toDisplayString"])(e.indicators.cum_tb_within_the_last_two_years||0),1)]),bd,md]),Object(o["createVNode"])("tr",null,[gd,fd,Od,Object(o["createVNode"])("td",jd,[Object(o["createVNode"])("a",{href:"#",onClick:t[53]||(t[53]=Object(o["withModifiers"])(t=>{e.drillDown("current_episode_of_tb")},["prevent"]))},Object(o["toDisplayString"])(e.indicators.current_episode_of_tb||0),1)]),_d,vd,yd,Object(o["createVNode"])("td",wd,[Object(o["createVNode"])("a",{href:"#",onClick:t[54]||(t[54]=Object(o["withModifiers"])(t=>{e.drillDown("cum_current_episode_of_tb")},["prevent"]))},Object(o["toDisplayString"])(e.indicators.cum_current_episode_of_tb||0),1)]),Nd,Cd]),Vd,Object(o["createVNode"])("tr",null,[Dd,kd,Td,Object(o["createVNode"])("td",Id,[Object(o["createVNode"])("a",{href:"#",onClick:t[55]||(t[55]=Object(o["withModifiers"])(t=>{e.drillDown("kaposis_sarcoma")},["prevent"]))},Object(o["toDisplayString"])(e.indicators.kaposis_sarcoma||0),1)]),xd,Sd,Pd,Object(o["createVNode"])("td",Ad,[Object(o["createVNode"])("a",{href:"#",onClick:t[56]||(t[56]=Object(o["withModifiers"])(t=>{e.drillDown("cum_kaposis_sarcoma")},["prevent"]))},Object(o["toDisplayString"])(e.indicators.cum_kaposis_sarcoma||0),1)]),Ed,Bd]),Rd,Fd,Object(o["createVNode"])("tr",null,[Ld,Md,Object(o["createVNode"])("td",Hd,[Object(o["createVNode"])("a",{href:"#",onClick:t[57]||(t[57]=Object(o["withModifiers"])(t=>{e.drillDown("total_alive_and_on_art")},["prevent"]))},Object(o["toDisplayString"])(e.indicators.total_alive_and_on_art||0),1)]),$d,Ud]),qd,Object(o["createVNode"])("tr",null,[Gd,zd,Yd,Object(o["createVNode"])("td",Wd,[Object(o["createVNode"])("a",{href:"#",onClick:t[58]||(t[58]=Object(o["withModifiers"])(t=>{e.drillDown("died_within_the_1st_month_of_art_initiation")},["prevent"]))},Object(o["toDisplayString"])(e.indicators.died_within_the_1st_month_of_art_initiation||0),1)]),Kd,Xd]),Object(o["createVNode"])("tr",null,[Jd,Qd,Zd,Object(o["createVNode"])("td",eu,[Object(o["createVNode"])("a",{href:"#",onClick:t[59]||(t[59]=Object(o["withModifiers"])(t=>{e.drillDown("died_within_the_2nd_month_of_art_initiation")},["prevent"]))},Object(o["toDisplayString"])(e.indicators.died_within_the_2nd_month_of_art_initiation||0),1)]),tu,au]),Object(o["createVNode"])("tr",null,[nu,ou,iu,Object(o["createVNode"])("td",ru,[Object(o["createVNode"])("a",{href:"#",onClick:t[60]||(t[60]=Object(o["withModifiers"])(t=>{e.drillDown("died_within_the_3rd_month_of_art_initiation")},["prevent"]))},Object(o["toDisplayString"])(e.indicators.died_within_the_3rd_month_of_art_initiation||0),1)]),su,cu]),Object(o["createVNode"])("tr",null,[lu,du,uu,Object(o["createVNode"])("td",pu,[Object(o["createVNode"])("a",{href:"#",onClick:t[61]||(t[61]=Object(o["withModifiers"])(t=>{e.drillDown("died_after_the_3rd_month_of_art_initiation")},["prevent"]))},Object(o["toDisplayString"])(e.indicators.died_after_the_3rd_month_of_art_initiation||0),1)]),hu,bu]),Object(o["createVNode"])("tr",null,[mu,gu,Object(o["createVNode"])("td",fu,[Object(o["createVNode"])("a",{href:"#",onClick:t[62]||(t[62]=Object(o["withModifiers"])(t=>{e.drillDown("died_total")},["prevent"]))},Object(o["toDisplayString"])(e.indicators.died_total||0),1)]),Ou,ju]),Object(o["createVNode"])("tr",null,[_u,vu,Object(o["createVNode"])("td",yu,[Object(o["createVNode"])("a",{href:"#",onClick:t[63]||(t[63]=Object(o["withModifiers"])(t=>{e.drillDown("defaulted")},["prevent"]))},Object(o["toDisplayString"])(e.indicators.defaulted||0),1)]),wu,Nu]),Object(o["createVNode"])("tr",null,[Cu,Vu,Object(o["createVNode"])("td",Du,[Object(o["createVNode"])("a",{href:"#",onClick:t[64]||(t[64]=Object(o["withModifiers"])(t=>{e.drillDown("stopped_art")},["prevent"]))},Object(o["toDisplayString"])(e.indicators.stopped_art||0),1)]),ku,Tu]),Object(o["createVNode"])("tr",null,[Iu,xu,Object(o["createVNode"])("td",Su,[Object(o["createVNode"])("a",{href:"#",onClick:t[65]||(t[65]=Object(o["withModifiers"])(t=>{e.drillDown("transfered_out")},["prevent"]))},Object(o["toDisplayString"])(e.indicators.transfered_out||0),1)]),Pu,Au]),Eu,Bu,Ru,Fu,Object(o["createVNode"])("tr",null,[Lu,Mu,Hu,$u,Uu,Object(o["createVNode"])("td",null,[Object(o["createVNode"])("a",{href:"#",onClick:t[66]||(t[66]=Object(o["withModifiers"])(t=>{e.drillDown("zero_p")},["prevent"]))},Object(o["toDisplayString"])(e.indicators.zero_p||0),1)]),Object(o["createVNode"])("td",null,[Object(o["createVNode"])("a",{href:"#",onClick:t[67]||(t[67]=Object(o["withModifiers"])(t=>{e.drillDown("zero_a")},["prevent"]))},Object(o["toDisplayString"])(e.indicators.zero_a||0),1)])]),Object(o["createVNode"])("tr",null,[qu,Gu,zu,Yu,Wu,Object(o["createVNode"])("td",null,[Object(o["createVNode"])("a",{href:"#",onClick:t[68]||(t[68]=Object(o["withModifiers"])(t=>{e.drillDown("two_p")},["prevent"]))},Object(o["toDisplayString"])(e.indicators.two_p||0),1)]),Object(o["createVNode"])("td",null,[Object(o["createVNode"])("a",{href:"#",onClick:t[69]||(t[69]=Object(o["withModifiers"])(t=>{e.drillDown("two_a")},["prevent"]))},Object(o["toDisplayString"])(e.indicators.two_a||0),1)])]),Object(o["createVNode"])("tr",null,[Ku,Xu,Ju,Qu,Zu,Object(o["createVNode"])("td",null,[Object(o["createVNode"])("div",ep,[tp,Object(o["createVNode"])("div",ap,[Object(o["createVNode"])("div",np,[Object(o["createVNode"])("a",{href:"#",onClick:t[70]||(t[70]=Object(o["withModifiers"])(t=>{e.drillDown("four_pp")},["prevent"])),id:"four_pp"},Object(o["toDisplayString"])(e.indicators.four_pp||0),1)]),Object(o["createVNode"])("div",op,[Object(o["createVNode"])("a",{href:"#",onClick:t[71]||(t[71]=Object(o["withModifiers"])(t=>{e.drillDown("four_pa")},["prevent"])),id:"four_pa"},Object(o["toDisplayString"])(e.indicators.four_pa||0),1)])])])]),Object(o["createVNode"])("td",null,[Object(o["createVNode"])("a",{href:"#",onClick:t[72]||(t[72]=Object(o["withModifiers"])(t=>{e.drillDown("four_a")},["prevent"]))},Object(o["toDisplayString"])(e.indicators.four_a||0),1)])]),Object(o["createVNode"])("tr",null,[ip,rp,sp,cp,lp,dp,Object(o["createVNode"])("td",null,[Object(o["createVNode"])("a",{href:"#",onClick:t[73]||(t[73]=Object(o["withModifiers"])(t=>{e.drillDown("five_a")},["prevent"]))},Object(o["toDisplayString"])(e.indicators.five_a||0),1)])]),Object(o["createVNode"])("tr",null,[up,pp,hp,bp,mp,gp,Object(o["createVNode"])("td",null,[Object(o["createVNode"])("a",{href:"#",onClick:t[74]||(t[74]=Object(o["withModifiers"])(t=>{e.drillDown("six_a")},["prevent"]))},Object(o["toDisplayString"])(e.indicators.six_a||0),1)])]),Object(o["createVNode"])("tr",null,[fp,Op,jp,_p,vp,yp,Object(o["createVNode"])("td",null,[Object(o["createVNode"])("a",{href:"#",onClick:t[75]||(t[75]=Object(o["withModifiers"])(t=>{e.drillDown("seven_a")},["prevent"]))},Object(o["toDisplayString"])(e.indicators.seven_a||0),1)])]),Object(o["createVNode"])("tr",null,[wp,Np,Cp,Vp,Dp,kp,Object(o["createVNode"])("td",null,[Object(o["createVNode"])("a",{href:"#",onClick:t[76]||(t[76]=Object(o["withModifiers"])(t=>{e.drillDown("eight_a")},["prevent"]))},Object(o["toDisplayString"])(e.indicators.eight_a||0),1)])]),Object(o["createVNode"])("tr",null,[Tp,Ip,xp,Sp,Pp,Object(o["createVNode"])("td",null,[Object(o["createVNode"])("div",Ap,[Ep,Object(o["createVNode"])("div",Bp,[Object(o["createVNode"])("div",Rp,[Object(o["createVNode"])("a",{href:"#",onClick:t[77]||(t[77]=Object(o["withModifiers"])(t=>{e.drillDown("nine_pp")},["prevent"])),id:"nine_pp"},Object(o["toDisplayString"])(e.indicators.nine_pp||0),1)]),Object(o["createVNode"])("div",Fp,[Object(o["createVNode"])("a",{href:"#",onClick:t[78]||(t[78]=Object(o["withModifiers"])(t=>{e.drillDown("nine_pa")},["prevent"])),id:"nine_pa"},Object(o["toDisplayString"])(e.indicators.nine_pa||0),1)])])])]),Object(o["createVNode"])("td",null,[Object(o["createVNode"])("a",{href:"#",onClick:t[79]||(t[79]=Object(o["withModifiers"])(t=>{e.drillDown("nine_a")},["prevent"]))},Object(o["toDisplayString"])(e.indicators.nine_a||0),1)])]),Object(o["createVNode"])("tr",null,[Lp,Mp,Hp,$p,Up,qp,Object(o["createVNode"])("td",null,[Object(o["createVNode"])("a",{href:"#",onClick:t[80]||(t[80]=Object(o["withModifiers"])(t=>{e.drillDown("ten_a")},["prevent"]))},Object(o["toDisplayString"])(e.indicators.ten_a||0),1)])]),Object(o["createVNode"])("tr",null,[Gp,zp,Yp,Wp,Kp,Object(o["createVNode"])("td",null,[Object(o["createVNode"])("div",Xp,[Jp,Object(o["createVNode"])("div",Qp,[Object(o["createVNode"])("div",Zp,[Object(o["createVNode"])("a",{href:"#",onClick:t[81]||(t[81]=Object(o["withModifiers"])(t=>{e.drillDown("eleven_pp")},["prevent"])),id:"eleven_pp"},Object(o["toDisplayString"])(e.indicators.eleven_pp),1)]),Object(o["createVNode"])("div",eh,[Object(o["createVNode"])("a",{href:"#",onClick:t[82]||(t[82]=Object(o["withModifiers"])(t=>{e.drillDown("eleven_pa")},["prevent"])),id:"eleven_pa"},Object(o["toDisplayString"])(e.indicators.eleven_pa),1)])])])]),Object(o["createVNode"])("td",null,[Object(o["createVNode"])("a",{href:"#",onClick:t[83]||(t[83]=Object(o["withModifiers"])(t=>{e.drillDown("eleven_a")},["prevent"]))},Object(o["toDisplayString"])(e.indicators.eleven_a||0),1)])]),Object(o["createVNode"])("tr",null,[th,ah,nh,oh,ih,Object(o["createVNode"])("td",null,[Object(o["createVNode"])("div",rh,[sh,Object(o["createVNode"])("div",ch,[Object(o["createVNode"])("div",lh,[Object(o["createVNode"])("a",{href:"#",onClick:t[84]||(t[84]=Object(o["withModifiers"])(t=>{e.drillDown("twelve_pp")},["prevent"])),id:"twelve_pp"},Object(o["toDisplayString"])(e.indicators.twelve_pp||0),1)]),Object(o["createVNode"])("div",dh,[Object(o["createVNode"])("a",{href:"#",onClick:t[85]||(t[85]=Object(o["withModifiers"])(t=>{e.drillDown("twelve_pa")},["prevent"])),id:"twelve_pa"},Object(o["toDisplayString"])(e.indicators.twelve_pa||0),1)])])])]),Object(o["createVNode"])("td",null,[Object(o["createVNode"])("a",{href:"#",onClick:t[86]||(t[86]=Object(o["withModifiers"])(t=>{e.drillDown("twelve_a")},["prevent"]))},Object(o["toDisplayString"])(e.indicators.twelve_a||0),1)])]),Object(o["createVNode"])("tr",null,[uh,ph,hh,bh,mh,gh,Object(o["createVNode"])("td",null,[Object(o["createVNode"])("a",{href:"#",onClick:t[87]||(t[87]=Object(o["withModifiers"])(t=>{e.drillDown("thirteen_a")},["prevent"]))},Object(o["toDisplayString"])(e.indicators.thirteen_a||0),1)])]),Object(o["createVNode"])("tr",null,[fh,Oh,jh,_h,vh,Object(o["createVNode"])("td",null,[Object(o["createVNode"])("div",yh,[wh,Object(o["createVNode"])("div",Nh,[Object(o["createVNode"])("div",Ch,[Object(o["createVNode"])("a",{href:"#",onClick:t[88]||(t[88]=Object(o["withModifiers"])(t=>{e.drillDown("fourteen_pp")},["prevent"])),id:"fourteen_pp"},Object(o["toDisplayString"])(e.indicators.fourteen_pp||0),1)]),Object(o["createVNode"])("div",Vh,[Object(o["createVNode"])("a",{href:"#",onClick:t[89]||(t[89]=Object(o["withModifiers"])(t=>{e.drillDown("fourteen_pa")},["prevent"])),id:"fourteen_pa"},Object(o["toDisplayString"])(e.indicators.fourteen_pa||0),1)])])])]),Object(o["createVNode"])("td",null,[Object(o["createVNode"])("a",{href:"#",onClick:t[90]||(t[90]=Object(o["withModifiers"])(t=>{e.drillDown("fourteen_a")},["prevent"]))},Object(o["toDisplayString"])(e.indicators.fourteen_a||0),1)])]),Object(o["createVNode"])("tr",null,[Dh,kh,Th,Ih,xh,Object(o["createVNode"])("td",null,[Object(o["createVNode"])("div",Sh,[Ph,Object(o["createVNode"])("div",Ah,[Object(o["createVNode"])("div",Eh,[Object(o["createVNode"])("a",{href:"#",onClick:t[91]||(t[91]=Object(o["withModifiers"])(t=>{e.drillDown("fifteen_pp")},["prevent"])),id:"fifteen_pp"},Object(o["toDisplayString"])(e.indicators.fifteen_pp||0),1)]),Object(o["createVNode"])("div",Bh,[Object(o["createVNode"])("a",{href:"#",onClick:t[92]||(t[92]=Object(o["withModifiers"])(t=>{e.drillDown("fifteen_pa")},["prevent"])),id:"fifteen_pa"},Object(o["toDisplayString"])(e.indicators.fifteen_pa||0),1)])])])]),Object(o["createVNode"])("td",null,[Object(o["createVNode"])("a",{href:"#",onClick:t[93]||(t[93]=Object(o["withModifiers"])(t=>{e.drillDown("fifteen_a")},["prevent"]))},Object(o["toDisplayString"])(e.indicators.fifteen_a||0),1)])]),Object(o["createVNode"])("tr",null,[Rh,Fh,Lh,Mh,Hh,Object(o["createVNode"])("td",null,[Object(o["createVNode"])("a",{href:"#",onClick:t[94]||(t[94]=Object(o["withModifiers"])(t=>{e.drillDown("sixteen_p")},["prevent"]))},Object(o["toDisplayString"])(e.indicators.sixteen_p||0),1)]),Object(o["createVNode"])("td",null,[Object(o["createVNode"])("a",{href:"#",onClick:t[95]||(t[95]=Object(o["withModifiers"])(t=>{e.drillDown("sixteen_a")},["prevent"]))},Object(o["toDisplayString"])(e.indicators.sixteen_a||0),1)])]),Object(o["createVNode"])("tr",null,[$h,Uh,qh,Gh,zh,Object(o["createVNode"])("td",null,[Object(o["createVNode"])("div",Yh,[Wh,Object(o["createVNode"])("div",Kh,[Object(o["createVNode"])("div",Xh,[Object(o["createVNode"])("a",{href:"#",onClick:t[96]||(t[96]=Object(o["withModifiers"])(t=>{e.drillDown("seventeen_pp")},["prevent"])),id:"seventeen_pp"},Object(o["toDisplayString"])(e.indicators.seventeen_pp||0),1)]),Object(o["createVNode"])("div",Jh,[Object(o["createVNode"])("a",{href:"#",onClick:t[97]||(t[97]=Object(o["withModifiers"])(t=>{e.drillDown("seventeen_pa")},["prevent"])),id:"seventeen_pa"},Object(o["toDisplayString"])(e.indicators.seventeen_pa||0),1)])])])]),Object(o["createVNode"])("td",null,[Object(o["createVNode"])("a",{href:"#",onClick:t[98]||(t[98]=Object(o["withModifiers"])(t=>{e.drillDown("seventeen_a")},["prevent"]))},Object(o["toDisplayString"])(e.indicators.seventeen_a||0),1)])]),Object(o["createVNode"])("tr",null,[Qh,Zh,eb,tb,ab,Object(o["createVNode"])("td",null,[Object(o["createVNode"])("a",{href:"#",onClick:t[99]||(t[99]=Object(o["withModifiers"])(t=>{e.drillDown("unknown_regimen")},["prevent"]))},Object(o["toDisplayString"])(e.indicators.unknown_regimen||0),1)])]),nb,Object(o["createVNode"])("tr",ob,[ib,rb,sb,cb,Object(o["createVNode"])("td",lb,[Object(o["createVNode"])("a",{href:"#",onClick:t[100]||(t[100]=Object(o["withModifiers"])(t=>{e.drillDown("total_pregnant_women")},["prevent"]))},Object(o["toDisplayString"])(e.indicators.total_pregnant_women||0),1)])]),Object(o["createVNode"])("tr",null,[db,ub,pb,hb,Object(o["createVNode"])("td",bb,[Object(o["createVNode"])("a",{href:"#",onClick:t[101]||(t[101]=Object(o["withModifiers"])(t=>{e.drillDown("total_breastfeeding_women")},["prevent"]))},Object(o["toDisplayString"])(e.indicators.total_breastfeeding_women||0),1)])]),Object(o["createVNode"])("tr",null,[mb,gb,fb,Ob,Object(o["createVNode"])("td",jb,[Object(o["createVNode"])("a",{href:"#",onClick:t[102]||(t[102]=Object(o["withModifiers"])(t=>{e.drillDown("total_other_patients")},["prevent"]))},Object(o["toDisplayString"])(e.indicators.total_other_patients||0),1)])]),_b,Object(o["createVNode"])("tr",null,[vb,yb,wb,Nb,Object(o["createVNode"])("td",Cb,[Object(o["createVNode"])("a",{href:"#",onClick:t[103]||(t[103]=Object(o["withModifiers"])(t=>{e.drillDown("tb_not_suspected")},["prevent"]))},Object(o["toDisplayString"])(e.indicators.tb_not_suspected||0),1)])]),Object(o["createVNode"])("tr",null,[Vb,Db,kb,Tb,Object(o["createVNode"])("td",Ib,[Object(o["createVNode"])("a",{href:"#",onClick:t[104]||(t[104]=Object(o["withModifiers"])(t=>{e.drillDown("tb_suspected")},["prevent"]))},Object(o["toDisplayString"])(e.indicators.tb_suspected||0),1)])]),Object(o["createVNode"])("tr",null,[xb,Sb,Pb,Ab,Object(o["createVNode"])("td",Eb,[Object(o["createVNode"])("a",{href:"#",onClick:t[105]||(t[105]=Object(o["withModifiers"])(t=>{e.drillDown("tb_confirmed_currently_not_yet_on_tb_treatment")},["prevent"]))},Object(o["toDisplayString"])(e.indicators.tb_confirmed_currently_not_yet_on_tb_treatment||0),1)])]),Object(o["createVNode"])("tr",null,[Bb,Rb,Fb,Lb,Object(o["createVNode"])("td",Mb,[Object(o["createVNode"])("a",{href:"#",onClick:t[106]||(t[106]=Object(o["withModifiers"])(t=>{e.drillDown("tb_confirmed_on_tb_treatment")},["prevent"]))},Object(o["toDisplayString"])(e.indicators.tb_confirmed_on_tb_treatment||0),1)])]),Object(o["createVNode"])("tr",null,[Hb,$b,Ub,qb,Object(o["createVNode"])("td",Gb,[Object(o["createVNode"])("a",{href:"#",onClick:t[107]||(t[107]=Object(o["withModifiers"])(t=>{e.drillDown("unknown_tb_status")},["prevent"]))},Object(o["toDisplayString"])(e.indicators.unknown_tb_status||0),1)])]),zb,Object(o["createVNode"])("tr",null,[Yb,Wb,Kb,Xb,Object(o["createVNode"])("td",Jb,[Object(o["createVNode"])("a",{href:"#",onClick:t[108]||(t[108]=Object(o["withModifiers"])(t=>{e.drillDown("total_patients_without_side_effects")},["prevent"]))},Object(o["toDisplayString"])(e.indicators.total_patients_without_side_effects||0),1)])]),Object(o["createVNode"])("tr",null,[Qb,Zb,em,tm,Object(o["createVNode"])("td",am,[Object(o["createVNode"])("a",{href:"#",onClick:t[109]||(t[109]=Object(o["withModifiers"])(t=>{e.drillDown("total_patients_with_side_effects")},["prevent"]))},Object(o["toDisplayString"])(e.indicators.total_patients_with_side_effects||0),1)])]),Object(o["createVNode"])("tr",null,[nm,om,im,rm,Object(o["createVNode"])("td",sm,[Object(o["createVNode"])("a",{href:"#",onClick:t[110]||(t[110]=Object(o["withModifiers"])(t=>{e.drillDown("unknown_side_effects")},["prevent"]))},Object(o["toDisplayString"])(e.indicators.unknown_side_effects||0),1)])]),cm,Object(o["createVNode"])("tr",null,[lm,dm,um,pm,Object(o["createVNode"])("td",hm,[Object(o["createVNode"])("a",{href:"#",onClick:t[111]||(t[111]=Object(o["withModifiers"])(t=>{e.drillDown("patients_with_0_6_doses_missed_at_their_last_visit")},["prevent"]))},Object(o["toDisplayString"])(e.indicators.patients_with_0_6_doses_missed_at_their_last_visit||0),1)])]),Object(o["createVNode"])("tr",null,[bm,mm,gm,fm,Object(o["createVNode"])("td",Om,[Object(o["createVNode"])("a",{href:"#",onClick:t[112]||(t[112]=Object(o["withModifiers"])(t=>{e.drillDown("patients_with_7_plus_doses_missed_at_their_last_visit")},["prevent"]))},Object(o["toDisplayString"])(e.indicators.patients_with_7_plus_doses_missed_at_their_last_visit||0),1)])]),Object(o["createVNode"])("tr",null,[jm,_m,vm,ym,Object(o["createVNode"])("td",wm,[Object(o["createVNode"])("a",{href:"#",onClick:t[113]||(t[113]=Object(o["withModifiers"])(t=>{e.drillDown("patients_with_unknown_adhrence")},["prevent"]))},Object(o["toDisplayString"])(e.indicators.patients_with_unknown_adhrence||0),1)])]),Nm,Object(o["createVNode"])("tr",null,[Cm,Vm,Dm,Object(o["createVNode"])("td",km,[Object(o["createVNode"])("a",{href:"#",onClick:t[114]||(t[114]=Object(o["withModifiers"])(t=>{e.drillDown("newly_initiated_on_ipt")},["prevent"]))},Object(o["toDisplayString"])(e.indicators.newly_initiated_on_ipt||0),1)]),Tm,Object(o["createVNode"])("td",Im,[Object(o["createVNode"])("a",{href:"#",onClick:t[115]||(t[115]=Object(o["withModifiers"])(t=>{e.drillDown("newly_initiated_on_3hp")},["prevent"]))},Object(o["toDisplayString"])(e.indicators.newly_initiated_on_3hp||0),1)]),xm]),Object(o["createVNode"])("tr",null,[Sm,Pm,Am,Object(o["createVNode"])("td",Em,[Object(o["createVNode"])("a",{href:"#",onClick:t[116]||(t[116]=Object(o["withModifiers"])(t=>{e.drillDown("total_patients_on_arvs_and_cpt")},["prevent"]))},Object(o["toDisplayString"])(e.indicators.total_patients_on_arvs_and_cpt||0),1)]),Bm,Object(o["createVNode"])("td",Rm,[Object(o["createVNode"])("a",{href:"#",onClick:t[117]||(t[117]=Object(o["withModifiers"])(t=>{e.drillDown("total_patients_on_arvs_and_ipt")},["prevent"]))},Object(o["toDisplayString"])(e.indicators.total_patients_on_arvs_and_ipt||0),1)]),Fm]),Lm,Object(o["createVNode"])("tr",null,[Mm,Hm,$m,Object(o["createVNode"])("td",Um,[Object(o["createVNode"])("span",null,[Object(o["createVNode"])("a",{href:"#",onClick:t[118]||(t[118]=Object(o["withModifiers"])(t=>{e.drillDown("total_patients_on_family_planning")},["prevent"]))},Object(o["toDisplayString"])(e.indicators.total_patients_on_family_planning||0),1)]),qm])]),Gm,Object(o["createVNode"])("tr",null,[zm,Ym,Wm,Object(o["createVNode"])("td",Km,[Object(o["createVNode"])("span",null,[Object(o["createVNode"])("a",{href:"#",onClick:t[119]||(t[119]=Object(o["withModifiers"])(t=>{e.drillDown("total_patients_on_family_planning")},["prevent"]))},Object(o["toDisplayString"])(e.indicators.total_patients_with_screened_bp||0),1)]),Xm])]),Jm])}));var Zm=Object(o["defineComponent"])({props:{indicators:{type:Object,default:()=>({})}},emits:["onClickIndicator"],methods:{drillDown(e){this.$emit("onClickIndicator",e)}}});a("59cf");const eg=x()(Zm,[["render",Qm],["__scopeId","data-v-08569aec"]]);var tg=eg,ag=a("ba82"),ng=Object(o["defineComponent"])({mixins:[Ta["a"]],components:{IonLoading:De["z"],CohortH:ji,CohortV:Ci,CohortFt:tg,HisStandardForm:se["a"],HisFooter:va["a"],IonPage:De["D"],IonContent:De["n"]},data:()=>({formData:{},componentKey:0,computedFormData:{},indicators:{},cohort:{},btns:[],isLoading:!1,fields:[],reportID:-1,clinicName:Pa.getLocationName(),reportReady:!1,disaggregatedReportParams:"",startDate:"",endDate:"",quarter:""}),created(){this.btns=this.getBtns(),this.fields=this.getDateDurationFields(!0,!0,21,null)},methods:{async onPeriod(e,t,a=!1){this.componentKey+=1,this.formData=e,this.computedFormData=t,this.reportReady=!0,this.isLoading=!0,this.report=new Pa,this.report.setRegenerate(a);let n={};"custom_period"===e.quarter.value?(this.quarter="Custom",this.startDate=t.start_date,this.endDate=t.end_date):(this.quarter=e.quarter.label,this.startDate=l["b"].toStandardHisFormat(e.quarter.other.start),this.endDate=l["b"].toStandardHisFormat(e.quarter.other.end)),this.report.setQuarter(this.quarter),this.report.setStartDate(this.startDate),this.report.setEndDate(this.endDate),"Custom"===this.quarter?(this.period="Custom "+this.report.getDateIntervalPeriod(),n=this.report.datePeriodRequestParams()):(this.period=this.quarter,n=this.report.qaurterRequestParams()),this.disaggregatedReportParams=nn["a"].parameterizeObjToString({start_date:this.startDate,end_date:this.endDate,quarter:this.quarter});const o=await this.report.requestCohort(n);if(o.ok){const e=setInterval(async()=>{n.regenerate=!1;const t=await this.report.requestCohort(n);if(200===t.status){const a=await t.json();this.reportID=a.id,this.cohort=a.values,this.indicators=this.toIndicators(a.values),this.isLoading=!1,this.report.cacheCohort(a.values),clearInterval(e)}},3e3)}},toIndicators(e){return e.reduce((e,t)=>(e[t.name]=parseInt(t.contents),e),{})},async printSpec(){const e=open("","","width:1024px, height:768px"),t=document.getElementById("report-content");t&&e&&(e.document.write(`\n            <html>\n              <head>\n                <title>Print Cohort</title>\n                <link rel="stylesheet" media="print" href="/assets/css/cohort.css" />\n              </head>\n              <body>\n                ${t.innerHTML}\n              </body>\n            </html>\n          `),setTimeout(()=>{e.print(),e.close()},3500))},regenerate(){this.onPeriod(this.formData,this.computedFormData,!0)},async onDrillDown(e){const t=Object(h["find"])(this.cohort,{name:e});if(!t)return;const a=t.id,n=[[D["a"].thTxt("ARV number"),D["a"].thTxt("Name",{exportable:!1}),D["a"].thTxt("Gender"),D["a"].thTxt("Birth Date"),D["a"].thTxt("Outcome"),D["a"].thTxt("Action")]],o=async()=>{const e=this.sortByArvNumber(await this.report.getCohortDrillDown(a)||[],"arv_number");return e.map(e=>[this.tdARV(e["arv_number"]),D["a"].td(`${e["given_name"]} ${e["family_name"]}`),D["a"].td(e["gender"]),D["a"].td(`${l["b"].toStandardHisDisplayFormat(e["birthdate"])} (${l["b"].getAgeInYears(e["birthdate"])})`),D["a"].td(e["outcome"]||"N/A"),D["a"].tdBtn("Select",async()=>{await De["X"].dismiss({}),this.$router.push({path:"/patient/dashboard/"+e.person_id})})])};await this.drilldownAsyncRows(t.description,n,o)},exportToCsv(){const e=["Indicator","Value"],t=Object.keys(this.indicators).map(e=>[e,this.indicators[e]]),a=`${d["e"].getLocationName()} cohort report ${this.period}`;Object(ag["a"])([e],[...t,["Date Created: "+ae()().format("DD/MMM/YYYY HH:MM:ss")],["Quarter: "+(this.quarter.match(/custom/i)?`${this.startDate} - ${this.endDate}`:this.quarter)],["HIS-Core Version: "+d["e"].getCoreVersion()],["API Version: "+d["e"].getApiVersion()],["Site: "+d["e"].getLocationName()],["Site UUID: "+d["e"].getSiteUUID()]],a)},getBtns(){return[{name:"CSV",size:"large",slot:"start",color:"primary",visible:!0,onClick:()=>this.exportToCsv()},{name:"PDF",size:"large",slot:"start",color:"primary",visible:!0,onClick:()=>this.printSpec()},{name:"Regenerate",size:"large",slot:"end",color:"danger",visible:!0,onClick:async()=>this.regenerate()},{name:"Disaggregeted",size:"large",slot:"end",color:"primary",visible:!0,onClick:()=>this.$router.push("/art/moh_disaggregated_report?"+this.disaggregatedReportParams)},{name:"Finish",size:"large",slot:"end",color:"success",visible:!0,onClick:()=>this.$router.push({path:"/"})}]}}});const og=x()(ng,[["render",Zo]]);var ig=og;function rg(e,t){const a=Object(o["resolveComponent"])("router-view");return Object(o["openBlock"])(),Object(o["createBlock"])(a)}const sg={},cg=x()(sg,[["render",rg]]);var lg=cg;function dg(e,t,a,n,i,r){const s=Object(o["resolveComponent"])("report-template");return Object(o["openBlock"])(),Object(o["createBlock"])(s,{title:e.title,rows:e.rows,columns:e.columns},null,8,["title","rows","columns"])}var ug=a("91e4"),pg=Object(o["defineComponent"])({mixins:[Ta["a"]],components:{ReportTemplate:No["a"]},data:()=>({title:"HIV Stock report",rows:[],stock:[],columns:[[D["a"].thTxt("Medication"),D["a"].thTxt("Earliest Expiry date"),D["a"].thTxt("Stock on hand(Tins)")]]}),async created(){this.report=new ug["a"],await this.report.loadStock();const e=this.report.groupStock();e.forEach(e=>{this.rows.push([D["a"].td(e.drugName),D["a"].tdDate(e.expiryDate),D["a"].td(e.currentQuantity)])})}});const hg=x()(pg,[["render",dg]]);var bg=hg;function mg(e,t,a,n,i,r){const s=Object(o["resolveComponent"])("report-template"),c=Object(o["resolveComponent"])("ion-page");return Object(o["openBlock"])(),Object(o["createBlock"])(c,null,{default:Object(o["withCtx"])(()=>[Object(o["createVNode"])(s,{title:e.title,period:e.period,rows:e.rows,fields:e.fields,columns:e.columns,showtitleOnly:!0,config:{showIndex:!1},onReportConfiguration:e.onPeriod},null,8,["title","period","rows","fields","columns","onReportConfiguration"])]),_:1})}var gg=Object(o["defineComponent"])({mixins:[Ta["a"]],components:{ReportTemplate:Ia["a"],IonPage:De["D"]},data:()=>({title:"Booked clients",date:"",rows:[],appointments:[],columns:[[D["a"].thTxt("ARV#"),D["a"].thTxt("First name",{exportable:!1}),D["a"].thTxt("Last name",{exportable:!1}),D["a"].thTxt("Gender"),D["a"].thTxt("birthdate"),D["a"].thTxt("Current Address",{exportable:!1}),D["a"].thTxt("Actions")]]}),created(){this.report=new xa["b"],this.fields=[{id:"date",helpText:"Select date",type:r["b"].TT_APPOINTMENT_PICKER,defaultValue:()=>xa["b"].getSessionDate(),validation:e=>s["a"].required(e),onValue:async(e,t)=>{const a=await this.report.getBookedAppointments(e);return this.appointments=Object(h["isEmpty"])(a)?[]:a,t.appointmentCounter=this.appointments.length,!0}}]},methods:{async onPeriod(e){this.rows=[],this.period=l["b"].toStandardHisDisplayFormat(e.date),this.setRows(this.appointments)},async setRows(e){this.sortByArvNumber(e).forEach(e=>{this.rows.push([this.tdARV(e.arv_number||"N/A"),D["a"].td(e.given_name),D["a"].td(e.family_name),D["a"].td(e.gender),D["a"].tdDate(e.birthdate),D["a"].td(`District: <br/> <b>${e.district}</b><br/>\n                        Village: <br/> <b>${e.village}</b><br/>\n                        Land-mark: <br/> <b>${e.land_mark}</b><br/>\n                        Cellphone: <br/> <b>${e.cell_phone}</b>`),D["a"].tdBtn("Select",()=>this.confirmPatient(e.person_id))])})}}});const fg=x()(gg,[["render",mg]]);var Og=fg;function jg(e,t,a,n,i,r){const s=Object(o["resolveComponent"])("report-template"),c=Object(o["resolveComponent"])("ion-page");return Object(o["openBlock"])(),Object(o["createBlock"])(c,null,{default:Object(o["withCtx"])(()=>[Object(o["createVNode"])(s,{title:e.title,period:e.period,rows:e.rows,fields:e.fields,columns:e.columns,showFilters:!0,onReportConfiguration:e.onPeriod},null,8,["title","period","rows","fields","columns","onReportConfiguration"])]),_:1})}var _g=a("df95"),vg=Object(o["defineComponent"])({mixins:[Ta["a"]],components:{ReportTemplate:Ia["a"],IonPage:De["D"]},data:()=>({title:"Data cleaning report",rows:[],columns:[]}),created(){this.fields=[{id:"indicator",helpText:"Select indicator",type:r["b"].TT_SELECT,requireNext:!1,validation:e=>s["a"].required(e),options:()=>this.getIndicatorOptions()},...Object(z["b"])({id:"start_date",helpText:"Start",required:!0,condition:e=>!e.indicator.other.skipDateSelection,minDate:()=>"2001-01-01",maxDate:()=>d["e"].getSessionDate(),estimation:{allowUnknown:!1},computeValue:e=>e}),...Object(z["b"])({id:"end_date",helpText:"End",required:!0,condition:e=>!e.indicator.other.skipDateSelection,minDate:(e,t)=>t.start_date,maxDate:()=>d["e"].getSessionDate(),estimation:{allowUnknown:!1},computeValue:e=>e})]},methods:{async onPeriod(e,t){this.rows=[],this.title=e.indicator.label;const a=e.indicator;this.columns=a.other.columns,await a.other.setRows(e,t)},masterCardBtn(e){return D["a"].tdBtn("View",()=>this.$router.push("/art/mastercard/"+e))},getDefaultIndicatorColumns(e=[]){return[[D["a"].thTxt("ARV Number"),D["a"].thTxt("Patient Id"),D["a"].thTxt("First Name"),D["a"].thTxt("Last Name"),D["a"].thTxt("Gender"),D["a"].thTxt("Date of birth"),...e,D["a"].thTxt("Action")]]},async setDefaultIndicatorRows(e,t,a,n=null){this.report=new _g["b"],this.report.setStartDate(t),this.report.setEndDate(a),this.period=this.report.getDateIntervalPeriod();const o=this.sortByArvNumber(await this.report.getCleaningToolReport(e)||[],"arv_number");Object(h["isEmpty"])(o)||o.forEach(e=>{const t="function"===typeof n?n(e):[];this.rows.push([D["a"].td(e.arv_number),D["a"].td(e.patient_id),D["a"].td(e.given_name),D["a"].td(e.family_name),D["a"].td(e.gender),D["a"].tdDate(e.birthdate),...t,this.masterCardBtn(e.patient_id)])})},getIndicatorOptions(){return[{label:"DOB > Date enrolled",value:_g["a"].DobMoreThanEnrolledDate,other:{skipDateSelection:!1,columns:this.getDefaultIndicatorColumns(),setRows:(e,t)=>this.setDefaultIndicatorRows(_g["a"].DobMoreThanEnrolledDate,t.start_date,t.end_date)}},{label:"Date enrolled < Earliest start date",value:_g["a"].DateEnrolledLessThanEarliestStartDate,other:{skipDateSelection:!1,columns:this.getDefaultIndicatorColumns([D["a"].thTxt("Earliest start date"),D["a"].thTxt("Date enrolled")]),setRows:(e,t)=>this.setDefaultIndicatorRows(_g["a"].DateEnrolledLessThanEarliestStartDate,t.start_date,t.end_date,e=>[D["a"].tdDate(e.earliest_start_date),D["a"].tdDate(e.date_enrolled)])}},{label:"Encounters after Death",value:_g["a"].ClientsWithEncountersAfterDeath,other:{skipDateSelection:!1,columns:this.getDefaultIndicatorColumns(),setRows:(e,t)=>this.setDefaultIndicatorRows(_g["a"].ClientsWithEncountersAfterDeath,t.start_date,t.end_date)}},{label:"Incomplete visits",value:"Incomplete visits",other:{skipDateSelection:!1,columns:[[D["a"].thTxt("ARV#"),D["a"].thTxt("NHID"),D["a"].thTxt("First name"),D["a"].thTxt("Last name"),D["a"].thTxt("Gender"),D["a"].thTxt("Birthdate"),D["a"].thTxt("Date(s)"),D["a"].thTxt("Action")]],setRows:async(e,t)=>{this.report=new _g["b"],this.report.setStartDate(t.start_date),this.report.setEndDate(t.end_date),this.period=this.report.getDateIntervalPeriod();const a=await this.report.getIncompleteVisits();for(const n in a){const e=a[n];this.rows.push([D["a"].td(e.arv_number),D["a"].td(e.national_id),D["a"].td(e.given_name),D["a"].td(e.family_name),D["a"].td(e.gender),D["a"].tdDate(e.birthdate),D["a"].td(e.dates.map(e=>this.toDate(e)).join("<br/>")),this.masterCardBtn(parseInt(n.toString()))])}}}},{label:"Enrolled on ART before birth",value:"Enrolled on ART before birth",other:{skipDateSelection:!0,columns:[[D["a"].thTxt("ARV number"),D["a"].thTxt("Name"),D["a"].thTxt("Earliest start date"),D["a"].thTxt("Date enrolled"),D["a"].thTxt("Gender"),D["a"].thTxt("Birth Date"),D["a"].thTxt("Action")]],setRows:async()=>{try{this.report=new _g["b"];const e=await this.report.getEnrolledOnArtBeforeBirth();e.forEach(e=>{this.rows.push([D["a"].td(e.identifier),D["a"].td(e.name),D["a"].tdDate(e.earliest_start_date),D["a"].tdDate(e.date_enrolled),D["a"].td(e.gender),D["a"].tdDate(e.birthdate),this.masterCardBtn(e.patient_id)])})}catch(e){if(!(e instanceof d["c"]))throw e}}}},{label:"Male patients with female observations",value:_g["a"].MalesWithFemaleObs,other:{skipDateSelection:!1,columns:this.getDefaultIndicatorColumns([D["a"].thTxt("Visit date")]),setRows:(e,t)=>this.setDefaultIndicatorRows(_g["a"].MalesWithFemaleObs,t.start_date,t.end_date,e=>[D["a"].tdDate(e.visit_date)])}},{label:"Missing important demographics elements",value:_g["a"].MissingDemographics,other:{skipDateSelection:!1,columns:this.getDefaultIndicatorColumns(),setRows:(e,t)=>this.setDefaultIndicatorRows(_g["a"].MissingDemographics,t.start_date,t.end_date)}},{label:"Missing start reason",value:_g["a"].MissingStartReasons,other:{skipDateSelection:!1,columns:this.getDefaultIndicatorColumns(),setRows:(e,t)=>this.setDefaultIndicatorRows(_g["a"].MissingStartReasons,t.start_date,t.end_date)}},{label:"Multiple start reasons",value:_g["a"].MultipleStartReasons,other:{skipDateSelection:!1,columns:this.getDefaultIndicatorColumns(),setRows:(e,t)=>this.setDefaultIndicatorRows(_g["a"].MultipleStartReasons,t.start_date,t.end_date)}},{label:"Patients with Pre-ART / Unknown outcome",value:_g["a"].PreArtOrUnknownOutcomes,other:{skipDateSelection:!1,columns:this.getDefaultIndicatorColumns(),setRows:(e,t)=>this.setDefaultIndicatorRows(_g["a"].PreArtOrUnknownOutcomes,t.start_date,t.end_date)}},{label:"Prescriptions without dispensations",value:_g["a"].PrescriptionWithoutDispensation,other:{skipDateSelection:!1,columns:this.getDefaultIndicatorColumns([D["a"].thTxt("Visit Date")]),setRows:(e,t)=>this.setDefaultIndicatorRows(_g["a"].PrescriptionWithoutDispensation,t.start_date,t.end_date,e=>[D["a"].tdDate(e.visit_date)])}}]}}});const yg=x()(vg,[["render",jg]]);var wg=yg;function Ng(e,t,a,n,i,r){const s=Object(o["resolveComponent"])("his-standard-form");return Object(o["openBlock"])(),Object(o["createBlock"])(s,{fields:e.fields,skipSummary:!0,onFinishAction:e.onFinish},null,8,["fields","onFinishAction"])}var Cg=Object(o["defineComponent"])({mixins:[v["a"]],components:{HisStandardForm:se["a"]},data:()=>({consultation:{}}),watch:{ready:{handler(e){e&&(this.consultation=new Ne(this.patientID,this.providerID),this.fields=this.getFields())},immediate:!0}},methods:{async onFinish(e,t){await this.consultation.createEncounter();const a=await this.resolveObs(t);await this.consultation.saveObservationList(a),this.$router.back()},getFields(){return[{id:"has_hypertension",helpText:"Does the patient have hypertension",type:r["b"].TT_SELECT,options:()=>this.yesNoOptions(),validation:e=>s["a"].required(e),computedValue:e=>we["a"].buildValueCoded("Patient has hypertension",""+e.value)},...Object(z["b"])({condition:e=>"Yes"===e.has_hypertension.value,id:"hypertension_diagnosis",helpText:"Date the patient was diagnosed with hypertension",required:!0,estimation:{allowUnknown:!1},computeValue:e=>we["a"].buildValueDate("Hypertension diagnosis date",e)},Ne.getSessionDate())]}}});const Vg=x()(Cg,[["render",Ng]]);var Dg=Vg;const kg=Object(o["withScopeId"])("data-v-7217b18a");Object(o["pushScopeId"])("data-v-7217b18a");const Tg=Object(o["createVNode"])("label",{class:"his-title"}," Prescribe BP drugs ",-1),Ig={key:0,class:"view-port-content"},xg={id:"main-table",style:{width:"100%"}},Sg=Object(o["createVNode"])("th",null,"",-1),Pg=Object(o["createVNode"])("td",{class:"td-remaining td-title"},[Object(o["createVNode"])("span",null,"New/Current")],-1),Ag=Object(o["createVNode"])("td",{class:"td-remaining td-title"},[Object(o["createVNode"])("span",null,"")],-1),Eg=Object(o["createTextVNode"])(" Add notes "),Bg=Object(o["createVNode"])("p",null,null,-1),Rg={id:"table-notes",style:{width:"100%"}},Fg=Object(o["createVNode"])("caption",{style:{"font-size":"1.2em"}}," Notes ",-1),Lg=Object(o["createVNode"])("p",null,null,-1),Mg={class:"table-inner-notes",id:"notes-HCZ"},Hg={class:"date-td today-td"},$g={class:"date-td today-td"},Ug=Object(o["createTextVNode"])(" X "),qg=Object(o["createTextVNode"])(" cancel "),Gg=Object(o["createTextVNode"])(" Clear Session Prescription "),zg=Object(o["createTextVNode"])(" Continue ");Object(o["popScopeId"])();const Yg=kg((function(e,t,a,n,i,r){const s=Object(o["resolveComponent"])("ion-col"),c=Object(o["resolveComponent"])("ion-row"),l=Object(o["resolveComponent"])("ion-toolbar"),d=Object(o["resolveComponent"])("ion-header"),u=Object(o["resolveComponent"])("ion-checkbox"),p=Object(o["resolveComponent"])("ion-button"),h=Object(o["resolveComponent"])("view-port"),b=Object(o["resolveComponent"])("ion-content"),m=Object(o["resolveComponent"])("ion-footer"),g=Object(o["resolveComponent"])("ion-page");return Object(o["openBlock"])(),Object(o["createBlock"])(g,null,{default:kg(()=>[Object(o["createVNode"])(d,null,{default:kg(()=>[Object(o["createVNode"])(l,null,{default:kg(()=>[Object(o["createVNode"])(c,null,{default:kg(()=>[Object(o["createVNode"])(s,null,{default:kg(()=>[Tg]),_:1})]),_:1})]),_:1})]),_:1}),Object(o["createVNode"])(b,null,{default:kg(()=>[Object(o["createVNode"])(h,null,{default:kg(()=>[e.drugs?(Object(o["openBlock"])(),Object(o["createBlock"])("div",Ig,[Object(o["createVNode"])("table",xg,[Object(o["createVNode"])("tr",null,[Sg,(Object(o["openBlock"])(!0),Object(o["createBlock"])(o["Fragment"],null,Object(o["renderList"])(e.drugs,(e,t)=>(Object(o["openBlock"])(),Object(o["createBlock"])("th",{key:t},[Object(o["createTextVNode"])(Object(o["toDisplayString"])(t)+" ",1),Object(o["createVNode"])(c,null,{default:kg(()=>[(Object(o["openBlock"])(!0),Object(o["createBlock"])(o["Fragment"],null,Object(o["renderList"])(e.drugs,(e,t)=>(Object(o["openBlock"])(),Object(o["createBlock"])(s,{class:"col-borders",key:t},{default:kg(()=>[Object(o["createTextVNode"])(Object(o["toDisplayString"])(e.amount||"0mg"),1)]),_:2},1024))),128))]),_:2},1024)]))),128))]),Object(o["createVNode"])("tr",null,[Pg,(Object(o["openBlock"])(!0),Object(o["createBlock"])(o["Fragment"],null,Object(o["renderList"])(e.drugs,(t,a)=>(Object(o["openBlock"])(),Object(o["createBlock"])("td",{key:a,class:"td-current td-value"},[Object(o["createVNode"])(c,null,{default:kg(()=>[(Object(o["openBlock"])(!0),Object(o["createBlock"])(o["Fragment"],null,Object(o["renderList"])(t.drugs,(t,n)=>(Object(o["openBlock"])(),Object(o["createBlock"])(s,{key:n},{default:kg(()=>[Object(o["createVNode"])(u,{checked:t.selected,onIonChange:t=>e.selectDrug(a,n,t)},null,8,["checked","onIonChange"])]),_:2},1024))),128))]),_:2},1024)]))),128))]),Object(o["createVNode"])("tr",null,[Ag,(Object(o["openBlock"])(!0),Object(o["createBlock"])(o["Fragment"],null,Object(o["renderList"])(Object.keys(e.drugs),(t,a)=>(Object(o["openBlock"])(),Object(o["createBlock"])("td",{class:"td-remaining td-value",key:a},[Object(o["createVNode"])(c,null,{default:kg(()=>[Object(o["createVNode"])(s,null,{default:kg(()=>[Object(o["createVNode"])(p,{onClick:a=>e.launchNotePad(t),color:"warning"},{default:kg(()=>[Eg]),_:1},8,["onClick"])]),_:1})]),_:1})]))),128))])]),Bg,Object(o["createVNode"])("table",Rg,[Fg,Lg,Object(o["createVNode"])("tr",null,[(Object(o["openBlock"])(!0),Object(o["createBlock"])(o["Fragment"],null,Object(o["renderList"])(e.drugs,(e,t)=>(Object(o["openBlock"])(),Object(o["createBlock"])("th",{style:{width:"25%"},key:t},[Object(o["createVNode"])("span",null,Object(o["toDisplayString"])(t),1)]))),128))]),Object(o["createVNode"])("tr",null,[(Object(o["openBlock"])(!0),Object(o["createBlock"])(o["Fragment"],null,Object(o["renderList"])(Object.keys(e.drugs),(t,a)=>(Object(o["openBlock"])(),Object(o["createBlock"])("td",{id:"HCZ",style:{"padding-top":"2px !important"},valign:"top",key:a},[Object(o["createVNode"])("table",Mg,[(Object(o["openBlock"])(!0),Object(o["createBlock"])(o["Fragment"],null,Object(o["renderList"])(e.drugs[t].notes,(a,n)=>(Object(o["openBlock"])(),Object(o["createBlock"])("tr",{key:n},[Object(o["createVNode"])("td",Hg,Object(o["toDisplayString"])(a.date),1),Object(o["createVNode"])("td",$g,Object(o["toDisplayString"])(a.description),1),Object(o["createVNode"])("td",null,[a.isNewNote?(Object(o["openBlock"])(),Object(o["createBlock"])(p,{key:0,color:"danger",onClick:a=>e.removeNote(t,n)},{default:kg(()=>[Ug]),_:1},8,["onClick"])):Object(o["createCommentVNode"])("",!0)])]))),128))])]))),128))])])])):Object(o["createCommentVNode"])("",!0)]),_:1})]),_:1}),Object(o["createVNode"])(m,null,{default:kg(()=>[Object(o["createVNode"])(l,{color:"dark"},{default:kg(()=>[Object(o["createVNode"])(p,{size:"large",color:"danger",slot:"start",onClick:e.gotoPatientDashboard},{default:kg(()=>[qg]),_:1},8,["onClick"]),e.canClearHtnSessionPrescription?(Object(o["openBlock"])(),Object(o["createBlock"])(p,{key:0,size:"large",color:"warning",slot:"end",onClick:e.clearPrescriptionInSession},{default:kg(()=>[Gg]),_:1},8,["onClick"])):Object(o["createCommentVNode"])("",!0),e.selectedDrugs&&e.selectedDrugs.length>0?(Object(o["openBlock"])(),Object(o["createBlock"])(p,{key:1,size:"large",color:"success",slot:"end",onClick:e.onFinish},{default:kg(()=>[zg]),_:1},8,["onClick"])):Object(o["createCommentVNode"])("",!0)]),_:1})]),_:1})]),_:1})}));var Wg=a("0a79"),Kg=a("e6e9"),Xg=Object(o["defineComponent"])({mixins:[v["a"]],components:{ViewPort:Wg["a"],IonToolbar:De["Q"],IonHeader:De["q"],IonContent:De["n"],IonRow:De["H"],IonButton:De["d"],IonCol:De["m"],IonFooter:De["o"],IonPage:De["D"],IonCheckbox:De["k"]},watch:{ready:{async handler(e){if(e){this.HTN=new C["a"](this.patientID,this.providerID),this.drugs=this.HTN.getDrugs();const{drugs:e,notes:t}=await this.HTN.getCurrentDrugs();this.setPreviousBpDrugs(e),this.setPreviousBpNotes(t),this.canClearHtnSessionPrescription=this.patientHasHtnSessionKey()}},immediate:!0}},data:()=>({HTN:{},drugs:null,canClearHtnSessionPrescription:!1}),methods:{clearPrescriptionInSession(){sessionStorage.removeItem(C["b"].Prescription),this.canClearHtnSessionPrescription=!1},patientHasHtnSessionKey(){try{const e=sessionStorage.getItem(C["b"].Prescription);if(e){const t=JSON.parse(e);return t[this.patientID]}}catch(e){console.warn(e)}return!1},removeNote(e,t,a){this.drugs[e].notes.splice(a,1)},launchNotePad(e){this.showModal({id:"note",helpText:"Add notes for "+e,type:r["b"].TT_TEXT},t=>{t&&this.drugs[e].notes.push({date:V["a"].getSessionDate(),description:t.value||"",drugID:this.drugs[e].drugs[0].drugID,isNewNote:!0})})},async onFinish(){const e=Object.values(this.drugs).filter(e=>!Object(h["isEmpty"])(e.notes)).map(e=>e.notes).reduce((e,t)=>e.concat(t),[]).filter(e=>e.isNewNote).map(e=>this.HTN.buildObs("Clinician notes",{value_text:e.description,value_drug:e.drugID}));if(!Object(h["isEmpty"])(e))try{await this.HTN.createEncounter(),await this.HTN.saveObservationList(await Promise.all(e))}catch(t){return Object(j["e"])("Unable to save notes "+t)}this.gotoTreatment()},gotoTreatment(){const e=this.selectedDrugs.map(e=>Object(h["find"])(C["a"].htnDrugReferences(),{drug_id:e.drugID})),t={};t[this.patientID]=e,sessionStorage.setItem(C["b"].Prescription,JSON.stringify(t)),this.$router.push("/art/encounters/prescriptions/"+this.patientID)},async showModal(e,t){const a=await De["X"].create({component:Kg["a"],backdropDismiss:!1,cssClass:"full-modal",componentProps:{dismissType:"modal",currentField:e,onFinish:t}});a.present()},setPreviousBpNotes(e){for(const t in e)this.drugs[t].notes=Object.keys(e[t]).map(a=>e[t][a].map(e=>({date:a,description:e,isNewNote:!1}))).reduce((e,t)=>e.concat(t),[])},setPreviousBpDrugs(e){e.forEach(e=>{for(const t in this.drugs)this.drugs[t].drugs.forEach((a,n)=>{e.drug_id===a.drugID&&(this.drugs[t].drugs[n].current=!0,this.drugs[t].drugs[n].selected=!0,this.drugs[t].selected=e.drug_id)})})},selectDrug(e,t,a){this.drugs[e].drugs.forEach((t,a)=>{this.drugs[e].drugs[a].selected=!1}),this.drugs[e].drugs[t].selected=a.detail.checked}},computed:{selectedDrugs(){return this.drugs?Object.values(this.drugs).map(e=>e.drugs).reduce((e,t)=>e.concat(t),[]).filter(e=>e.selected):[]}}});a("c2f2");const Jg=x()(Xg,[["render",Yg],["__scopeId","data-v-7217b18a"]]);var Qg=Jg;function Zg(e,t,a,n,i,r){const s=Object(o["resolveComponent"])("his-standard-form");return Object(o["openBlock"])(),Object(o["createBlock"])(s,{fields:e.fields,onFinishAction:e.onFinish,skipSummary:!1,cancelDestinationPath:e.cancelDestination},null,8,["fields","onFinishAction","cancelDestinationPath"])}var ef=a("fde0"),tf=Object(o["defineComponent"])({mixins:[v["a"]],components:{HisStandardForm:se["a"]},data:()=>({socialHistory:{},obs:[]}),watch:{ready:{async handler(e){e&&(this.socialHistory=new ef["a"](this.patientID,this.providerID),this.fields=await this.getFields())},immediate:!0}},methods:{async onFinish(e){const t=await this.socialHistory.createEncounter();if(!t)return Object(j["e"])("Unable to create encounter");const a=await Promise.all([...this.obs]),n=await this.socialHistory.saveObservationList(a);if(!n)return Object(j["e"])("Unable to save patient observations");Object(j["d"])("Observations and encounter created!"),this.nextTask()},getFields(){return[{id:"smoking_history",helpText:"Have you ever smoked cigarettes?",type:r["b"].TT_SELECT,validation:e=>s["a"].required(e),options:()=>[{label:"Yes",value:"Yes"},{label:"No",value:"No"}],unload:async e=>{this.obs.push(this.socialHistory.buildValueCoded("SMOKE_HIS",e.value))}},{id:"number_of_cigarettes",helpText:"Number of cigarettes smoked per day",type:r["b"].TT_NUMBER,validation:e=>s["a"].rangeOf(e,1,90),condition(e){return"Yes"===e.smoking_history.value},unload:async e=>{this.obs.push(this.socialHistory.buildValueNumber("Number of cigarettes smoked per day",e.value))}},{id:"smoking_duration",helpText:"How long have you been smoking?",type:r["b"].TT_SELECT,validation:e=>s["a"].required(e),condition(e){return"Yes"===e.smoking_history.value},options:()=>[{label:"Less than five years",value:"Less than five years"},{label:"Five years or more",value:"Five years or more"}],unload:async e=>{this.obs.push(this.socialHistory.buildValueText("Smoking duration",e.value))}},{id:"current_smoker",helpText:"Do you still smoke?",type:r["b"].TT_SELECT,validation:e=>s["a"].required(e),condition(e){return"Yes"===e.smoking_history.value},options:()=>[{label:"Yes",value:"Yes"},{label:"No",value:"No"}],unload:async e=>{this.obs.push(this.socialHistory.buildValueCoded("Current smoker",e.value))}},{id:"alcohol_history",helpText:"Do you drink alcohol?",type:r["b"].TT_SELECT,validation:e=>s["a"].required(e),options:()=>[{label:"Yes",value:"Yes"},{label:"No",value:"No"}],unload:async e=>{this.obs.push(this.socialHistory.buildValueCoded("Does the patient drink alcohol?",e.value))}},{id:"number_of_drinks",helpText:"How many alcoholic drinks do you have per day?",type:r["b"].TT_NUMBER,validation:e=>s["a"].required(e),condition(e){return"Yes"===e.alcohol_history.value},unload:async e=>{this.obs.push(this.socialHistory.buildValueNumber("Alcoholic drinks per day",e.value))}},{id:"number_of_days_drank",helpText:"Number of days per week alcohol is used?",type:r["b"].TT_NUMBER,validation:e=>s["a"].rangeOf(e,1,7),condition(e){return"Yes"===e.alcohol_history.value},unload:async e=>{this.obs.push(this.socialHistory.buildValueNumber("Number of days per week alcohol is used",e.value))}},{id:"exercise",helpText:"Do you do any physical exercise?",type:r["b"].TT_SELECT,validation:e=>s["a"].required(e),options:()=>[{label:"Yes",value:"Yes"},{label:"No",value:"No"}],unload:async e=>{this.obs.push(this.socialHistory.buildValueCoded("Physical Exercises",e.value))}},{id:"employment",helpText:"Type of employment?",type:r["b"].TT_SELECT,validation:e=>s["a"].required(e),options:()=>[{label:"Active",value:"Active"},{label:"Sedentary",value:"Sedentary"}],unload:async e=>{this.obs.push(this.socialHistory.buildValueText("Type of employment",e.value))}}]}}});const af=x()(tf,[["render",Zg]]);var nf=af;const of=Object(o["withScopeId"])("data-v-15839c59");Object(o["pushScopeId"])("data-v-15839c59");const rf=Object(o["createVNode"])("label",{class:"his-title"}," BP Drug management ",-1),sf={key:0,class:"view-port-content"},cf={id:"main-table",style:{width:"100%"}},lf=Object(o["createVNode"])("th",null,"",-1),df=Object(o["createVNode"])("td",{class:"td-current td-title"},[Object(o["createVNode"])("span",null,"Current")],-1),uf=Object(o["createVNode"])("td",{class:"td-remaining td-title"},[Object(o["createVNode"])("span",null,"Pills remaining")],-1),pf=Object(o["createVNode"])("p",null,null,-1),hf={id:"table-notes",style:{width:"100%"}},bf=Object(o["createVNode"])("caption",{style:{"font-size":"1.4em"}}," Adherence summary ",-1),mf=Object(o["createVNode"])("p",null,null,-1),gf=Object(o["createVNode"])("tr",null,[Object(o["createVNode"])("th",{style:{width:"25%"}},[Object(o["createVNode"])("span",null,"Drug")]),Object(o["createVNode"])("th",{style:{width:"25%"}},[Object(o["createVNode"])("span",null,"Pills dispensed during last visit")]),Object(o["createVNode"])("th",{style:{width:"25%"}},[Object(o["createVNode"])("span",null,"Expected pills remaining")]),Object(o["createVNode"])("th",{style:{width:"25%"}},[Object(o["createVNode"])("span",null,"Adherence for drug")])],-1),ff={class:"date-td today-td"},Of={class:"date-td today-td"},jf={class:"date-td today-td"},_f={class:"date-td today-td"},vf=Object(o["createTextVNode"])(" cancel "),yf=Object(o["createTextVNode"])(" Change drugs "),wf=Object(o["createTextVNode"])(" Continue ");Object(o["popScopeId"])();const Nf=of((function(e,t,a,n,i,r){const s=Object(o["resolveComponent"])("ion-col"),c=Object(o["resolveComponent"])("ion-row"),l=Object(o["resolveComponent"])("ion-toolbar"),d=Object(o["resolveComponent"])("ion-header"),u=Object(o["resolveComponent"])("ion-checkbox"),p=Object(o["resolveComponent"])("ion-input"),h=Object(o["resolveComponent"])("view-port"),b=Object(o["resolveComponent"])("ion-content"),m=Object(o["resolveComponent"])("ion-button"),g=Object(o["resolveComponent"])("ion-footer"),f=Object(o["resolveComponent"])("ion-page");return Object(o["openBlock"])(),Object(o["createBlock"])(f,null,{default:of(()=>[Object(o["createVNode"])(d,null,{default:of(()=>[Object(o["createVNode"])(l,null,{default:of(()=>[Object(o["createVNode"])(c,null,{default:of(()=>[Object(o["createVNode"])(s,null,{default:of(()=>[rf]),_:1})]),_:1})]),_:1})]),_:1}),Object(o["createVNode"])(b,null,{default:of(()=>[Object(o["createVNode"])(h,null,{default:of(()=>[e.drugs?(Object(o["openBlock"])(),Object(o["createBlock"])("div",sf,[Object(o["createVNode"])("table",cf,[Object(o["createVNode"])("tr",null,[lf,(Object(o["openBlock"])(!0),Object(o["createBlock"])(o["Fragment"],null,Object(o["renderList"])(e.drugs,(e,t)=>(Object(o["openBlock"])(),Object(o["createBlock"])("th",{key:t},[Object(o["createTextVNode"])(Object(o["toDisplayString"])(t)+" ",1),Object(o["createVNode"])(c,null,{default:of(()=>[(Object(o["openBlock"])(!0),Object(o["createBlock"])(o["Fragment"],null,Object(o["renderList"])(e.drugs,(e,t)=>(Object(o["openBlock"])(),Object(o["createBlock"])(s,{class:"col-borders",key:t},{default:of(()=>[Object(o["createTextVNode"])(Object(o["toDisplayString"])(e.amount||"0mg"),1)]),_:2},1024))),128))]),_:2},1024)]))),128))]),Object(o["createVNode"])("tr",null,[df,(Object(o["openBlock"])(!0),Object(o["createBlock"])(o["Fragment"],null,Object(o["renderList"])(e.drugs,(e,t)=>(Object(o["openBlock"])(),Object(o["createBlock"])("td",{class:"td-current td-value",key:t},[Object(o["createVNode"])(c,null,{default:of(()=>[(Object(o["openBlock"])(!0),Object(o["createBlock"])(o["Fragment"],null,Object(o["renderList"])(e.drugs,(e,t)=>(Object(o["openBlock"])(),Object(o["createBlock"])(s,{key:t},{default:of(()=>[e.current?(Object(o["openBlock"])(),Object(o["createBlock"])(u,{key:0,checked:e.current,disabled:""},null,8,["checked"])):Object(o["createCommentVNode"])("",!0)]),_:2},1024))),128))]),_:2},1024)]))),128))]),Object(o["createVNode"])("tr",null,[uf,(Object(o["openBlock"])(!0),Object(o["createBlock"])(o["Fragment"],null,Object(o["renderList"])(e.drugs,(t,a)=>(Object(o["openBlock"])(),Object(o["createBlock"])("td",{key:a,class:"td-current td-value"},[Object(o["createVNode"])(c,null,{default:of(()=>[(Object(o["openBlock"])(!0),Object(o["createBlock"])(o["Fragment"],null,Object(o["renderList"])(t.drugs,(t,n)=>(Object(o["openBlock"])(),Object(o["createBlock"])(s,{key:n},{default:of(()=>[t.dispensed?(Object(o["openBlock"])(),Object(o["createBlock"])(p,{key:0,type:"number",modelValue:t.remaining,"onUpdate:modelValue":e=>t.remaining=e,onClick:t=>e.launchKeyPad(a,n)},null,8,["modelValue","onUpdate:modelValue","onClick"])):Object(o["createCommentVNode"])("",!0)]),_:2},1024))),128))]),_:2},1024)]))),128))])]),pf,Object(o["createVNode"])("table",hf,[bf,mf,gf,(Object(o["openBlock"])(!0),Object(o["createBlock"])(o["Fragment"],null,Object(o["renderList"])(e.selectedDrugs,(e,t)=>(Object(o["openBlock"])(),Object(o["createBlock"])("tr",{key:t,class:"dispensation-row"},[Object(o["createVNode"])("td",ff,Object(o["toDisplayString"])(e.drugName),1),Object(o["createVNode"])("td",Of,Object(o["toDisplayString"])(e.dispensed),1),Object(o["createVNode"])("td",jf,Object(o["toDisplayString"])(e.expectedRemaining),1),Object(o["createVNode"])("td",_f,Object(o["toDisplayString"])(e.adherence?e.adherence+" %":"?"),1)]))),128))])])):Object(o["createCommentVNode"])("",!0)]),_:1})]),_:1}),Object(o["createVNode"])(g,null,{default:of(()=>[Object(o["createVNode"])(l,{color:"dark"},{default:of(()=>[Object(o["createVNode"])(m,{size:"large",color:"danger",slot:"start",onClick:e.gotoPatientDashboard},{default:of(()=>[vf]),_:1},8,["onClick"]),Object(o["createVNode"])(m,{size:"large",color:"primary",slot:"end",onClick:e.goToPrescription},{default:of(()=>[yf]),_:1},8,["onClick"]),Object(o["createVNode"])(m,{size:"large",color:"success",slot:"end",onClick:e.onFinish},{default:of(()=>[wf]),_:1},8,["onClick"])]),_:1})]),_:1})]),_:1})}));var Cf=a("10be"),Vf=Object(o["defineComponent"])({mixins:[v["a"]],components:{ViewPort:Wg["a"],IonToolbar:De["Q"],IonHeader:De["q"],IonContent:De["n"],IonRow:De["H"],IonInput:De["v"],IonButton:De["d"],IonCol:De["m"],IonFooter:De["o"],IonPage:De["D"],IonCheckbox:De["k"]},watch:{ready:{async handler(e){e&&(this.HTN=new C["a"](this.patientID,this.providerID),this.drugs=this.HTN.getDrugs(),await this.getCurrentDrugs())},immediate:!0}},data:()=>({HTN:{},drugs:null}),methods:{onFinish(){this.selectNextAction()},goToPrescription(){this.$router.push("/art/encounters/bp_prescription/"+this.patientID)},gotoTreatment(){const e=this.selectedDrugs.map(e=>Object(h["find"])(C["a"].htnDrugReferences(),{drug_id:e.drugID})),t={};t[this.patientID]=e,sessionStorage.setItem(C["b"].Prescription,JSON.stringify(t)),this.$router.push("/art/encounters/prescriptions/"+this.patientID)},async selectNextAction(){const e=await Object(y["c"])("Action confirmation","Please specify how to proceed with patient",["Continue with current BP Drugs","Continue without BP Drugs","Change BP drugs"],[{name:"Cancel",color:"danger",slot:"start"},{name:"Confirm",color:"primary",slot:"end",role:"action"}]);if(e.selection&&"Cancel"!=e.action)switch(e.selection){case"Continue without BP Drugs":return sessionStorage.removeItem(C["b"].Prescription),this.nextTask();case"Continue with current BP Drugs":return this.gotoTreatment();case"Change BP drugs":this.goToPrescription()}},async getCurrentDrugs(){const e=await this.HTN.getCurrentDrugs(),t=await this.HTN.getLastDrugs();e.drugs.forEach(e=>{for(const a in this.drugs)this.drugs[a].drugs.forEach((n,o)=>{e.drug_id===n.drugID&&(this.drugs[a].drugs[o].current=!0,this.drugs[a].drugs[o].selected=!0,this.drugs[a].selected=e.drug_id);const i=this.drugs[a].drugs[o].drugName;Object.prototype.hasOwnProperty.call(t,i)&&(this.drugs[a].drugs[o].expectedRemaining=t[i].remaining,this.drugs[a].drugs[o].dispensed=t[i].value_numeric)})})},async launchKeyPad(e,t){const a=await De["X"].create({component:Cf["a"],backdropDismiss:!1,cssClass:"keypad-modal",componentProps:{strictNumbers:!0,onKeyPress:async a=>{const n=await this.HTN.getAdherence(this.drugs[e].drugs[t].drugID,a);this.drugs[e].drugs[t].adherence=n.adherence,this.drugs[e].drugs[t].remaining=a}}});a.present()}},computed:{selectedDrugs(){return Object.values(this.drugs).map(e=>e.drugs).reduce((e,t)=>e.concat(t),[]).filter(e=>e.dispensed)}}});a("abd7");const Df=x()(Vf,[["render",Nf],["__scopeId","data-v-15839c59"]]);var kf=Df;function Tf(e,t,a,n,i,r){const s=Object(o["resolveComponent"])("report-template");return Object(o["openBlock"])(),Object(o["createBlock"])(s,{title:e.title,period:e.period,rows:e.rows,fields:e.fields,columns:e.columns,config:{showIndex:!0},reportReady:e.reportReady,isLoading:e.isLoading,reportPrefix:"PEPFAR",onReportConfiguration:e.onPeriod},null,8,["title","period","rows","fields","columns","reportReady","isLoading","onReportConfiguration"])}var If=Object(o["defineComponent"])({mixins:[Ta["a"]],components:{ReportTemplate:Ia["a"]},data:()=>({title:"SC ARV dispensation report",rows:[],reportReady:!1,isLoading:!1,columns:[[D["a"].thTxt("ARV drug category"),D["a"].thTxt("# of bottles (units) dispensed")]]}),created(){this.fields=this.getDateDurationFields()},methods:{drilldown(e,t,a){const n=[[D["a"].thTxt("ARV #"),D["a"].thTxt("Drug"),D["a"].thTxt("Quantity"),D["a"].thDate("Date")]],o=a.sort((e,t)=>this.getArvInt(e[3])>this.getArvInt(t[3])?1:-1),i=()=>o.map(e=>[D["a"].td(e[3]),D["a"].td(e[0]),D["a"].td(e[1]),D["a"].tdDate(e[2])]);return a.length<=0?D["a"].td(0):D["a"].tdLink(t,()=>this.drilldownAsyncRows(e,n,i))},async onPeriod(e,t){this.reportReady=!0,this.isLoading=!0,this.rows=[],this.report=new Wa,this.report.setReportType("pepfar"),this.report.setStartDate(t.start_date),this.report.setEndDate(t.end_date),this.period=this.report.getDateIntervalPeriod(),this.setRows(await this.report.getSCReport()),this.isLoading=!1},setRows(e){e.forEach(e=>{this.rows.push([D["a"].td(e.name),this.drilldown(e.name,e.units,e.dispensations)])})}}});const xf=x()(If,[["render",Tf]]);var Sf=xf,Pf=[{name:"Data cleaning verification",path:"/art/data_cleaning_verification",component:()=>a.e("chunk-2d2102e3").then(a.bind(null,"b791"))},{name:"Edit ARV Number",path:"/art/arv-number/:patient_id",component:()=>a.e("chunk-405c9842").then(a.bind(null,"1769"))},{name:"preferences",path:"/art/preferences",component:()=>a.e("chunk-2c083610").then(a.bind(null,"b236"))},{name:n["a"].CLINIC_HOLIDAYS,path:"/art/preferences/clinic_holidays",component:()=>a.e("chunk-2d0b5f74").then(a.bind(null,"1ac1"))},{name:"bp_thresholds",path:"/art/preferences/bp_thresholds",component:()=>a.e("chunk-2d0b5f74").then(a.bind(null,"1ac1"))},{name:"clinic_days",path:"/art/preferences/clinic_days",component:()=>a.e("chunk-2d0b5f74").then(a.bind(null,"1ac1"))},{name:"cervical_cancer",path:"/art/preferences/cervical_cancer_screening",component:()=>a.e("chunk-2d0b5f74").then(a.bind(null,"1ac1"))},{name:n["a"].HTN_SCREENING_AGE_THRESHOLD,path:"/art/preferences/htn_age",component:()=>a.e("chunk-2d0b5f74").then(a.bind(null,"1ac1"))},{name:n["a"].FILING_NUMBER_LIMIT,path:"/art/preferences/fn/limit",component:()=>a.e("chunk-2d0b5f74").then(a.bind(null,"1ac1"))},{name:n["a"].APPOINTMENT_LIMIT,path:"/art/preferences/appointment/limit",component:()=>a.e("chunk-2d0b5f74").then(a.bind(null,"1ac1"))},{name:"art_patient_visit_stats",path:"/art/patient_visits",component:()=>a.e("chunk-2d238053").then(a.bind(null,"fe31"))},{name:"filing management",path:"/art/filing_numbers/:patient_id",component:()=>a.e("chunk-2d0aaf0b").then(a.bind(null,"12c7"))},{name:"Enter stock",path:"/art/stock/enter",component:()=>a.e("chunk-2d0e8890").then(a.bind(null,"8a4e"))},{name:"Audit trail",path:"/art/stock/trail",component:()=>a.e("chunk-2d0cc7e7").then(a.bind(null,"4dbc"))},{name:"Verify stock",path:"/art/stock/verify",component:()=>a.e("chunk-2d0e2514").then(a.bind(null,"7dd5"))},{name:"Move stock",path:"/art/stock/move",component:()=>a.e("chunk-2d0d5c2c").then(a.bind(null,"7052"))},{name:"Stock report",path:"/art/stock/report",component:()=>a.e("chunk-2d0d6098").then(a.bind(null,"719a"))},{name:"Print drug barcode",path:"/drug/print",component:()=>a.e("chunk-2d228961").then(a.bind(null,"da8f"))},{name:"treatment",path:"/art/encounters/prescriptions/:patient_id",component:P},{name:"bp_alert",path:"/art/encounters/bp/alert/:patient_id",component:()=>a.e("chunk-c326e570").then(a.bind(null,"7337"))},{name:"art adherence",path:"/art/encounters/adherence/:patient_id",component:ve},{name:"hiv clinic consultation (clinician)",path:"/art/encounters/consultation/:patient_id",component:it},{name:"hiv clinic consultation",path:"/art/encounters/consultation/:patient_id",component:it},{name:"hiv clinic registration",path:"/art/encounters/registration/:patient_id",component:ie},{name:"hiv reception",path:"/art/encounters/reception/:patient_id",component:mt},{name:"hiv staging",path:"/art/encounters/staging/:patient_id",component:jt},{name:"appointment",path:"/art/encounters/appointment/:patient_id",component:he},{name:"dispensing",path:"/art/encounters/dispensation/:patient_id",component:lt},{name:"vitals",path:"/art/encounters/vitals/:patient_id",component:_t["default"]},{name:"htn_vitals",path:"/art/encounters/vitals/:patient_id",component:_t["default"]},{name:"patient type",path:"/art/encounters/patient_type/:patient_id",component:Ct},{name:"fast track assesment",path:"/art/encounters/fast_track/:patient_id",component:It},{name:"bp_management",path:"/art/encounters/bp_management/:patient_id",component:Yt},{name:"Hypertesnion diagnosis",path:"/art/encounters/hypertension_diagnosis/:patient_id",component:Dg},{name:"BP prescription",path:"/art/encounters/bp_prescription/:patient_id",component:Qg},{name:"Social history",path:"/art/encounters/social_history/:patient_id",component:nf},{name:"BP adherence",path:"/art/encounters/bp_adherence/:patient_id",component:kf},{name:"lab activities",path:"/art/encounters/lab/:patient_id",component:Jt},{name:"patient mstercard",path:"/art/mastercard/:patient_id",component:Va},{name:"Data cleaning",path:"/data_cleaning",component:wg},{name:"moh_disaggregated_report",path:"/art/moh_disaggregated_report",component:So},{name:"moh_regimen_report",path:"/art/moh_regimen_report",component:()=>a.e("chunk-2d0cb702").then(a.bind(null,"4a54"))},{path:"/art/report/moh",component:lg,children:[{name:"moh_cohort",path:"moh_cohort",component:ig},{name:"moh_survial_analysis",path:"moh_survial_analysis",component:Fo},{name:"moh_tpt_new_initiations",path:"moh_tpt_new_initiations",component:$o},{name:"moh_tx_curr_mmd",path:"moh_tx_curr_mmd",component:zo},{name:"moh_regimen_weight_distribution",path:"moh_regimen_weight_distribution",component:Xo}]},{path:"/art/report/clinic",component:lg,children:[{name:"clinic_archiving_candidates",path:"clinic_archiving_candidates",component:Do},{name:"clinic_retention_report",path:"clinic_retention_report",component:eo},{name:"clinic_external_consultation_report",path:"clinic_external_consultation_report",component:oo},{name:"clinic_due_viral_load_report",path:"clinic_due_viral_load_report",component:Xn},{name:"clinic_lab_results",path:"clinic_lab_results",component:yo},{name:"clinic_missed_appointments",path:"clinic_missed_appointments",component:In},{name:"clinic_defaulters_report",path:"clinic_defaulters",component:An},{name:"clinic_regimen_report",path:"clinic_regimen_report",component:Fn},{name:"clinic_regimen_switch",path:"clinic_regimen_switch",component:$n},{name:"clinic_pregnant_patients",path:"clinic_pregnant_patients",component:zn},{name:"clinic_appointments",path:"clinic_appointments",component:Og},{name:"stock_card_report",path:"stock_card_report",component:bg},{name:"clinic_viral_load",path:"clinic_viral_load",component:co},{name:"clinic_other_outcome_list",path:"clinic_other_outcome_list",component:ho},{name:"clinic_regimen_formulation",path:"clinic_regimen_formulation",component:fo}]},{path:"/art/report/pepfar",component:lg,children:[{name:"pepfar_disaggregated_report",path:"disaggregated",component:Ra},{name:"pepfar_defaulters_report",path:"defaulters",component:$a},{name:"pepfar_regimen_report",path:"regimens",component:Ja},{name:"pepfar_regimen_switch",path:"regimen_switch",component:tn},{name:"pepfar_tb_prev_report",path:"tb_prev",component:hn},{name:"pepfar_tx_curr_mmd_report",path:"tx_cur_mmd",component:On},{name:"pepfar_tx_ml_report",path:"tx_ml",component:yn},{name:"pepfar_tx_rtt",path:"tx_rtt",component:Vn},{name:"pepfar_vl_coverage",path:"pepfar_vl_coverage",component:cn},{name:"sc_arv",path:"sc_arv",component:Sf}]}];const Af=Object(o["withScopeId"])("data-v-20f81f68");Object(o["pushScopeId"])("data-v-20f81f68");const Ef=Object(o["createVNode"])("span",{class:"his-md-text"},"Total visits / incomplete visits: last 5 days",-1),Bf=Object(o["createVNode"])("span",{class:"his-md-text"},"Encounters created today",-1),Rf={class:"his-sm-text"},Ff=Object(o["createVNode"])("tr",null,[Object(o["createVNode"])("th"),Object(o["createVNode"])("th",null,"Female"),Object(o["createVNode"])("th",null,"Male"),Object(o["createVNode"])("th",null,"Me"),Object(o["createVNode"])("th",null,"Facility")],-1),Lf={class:"encounter-td"},Mf={class:"other-td"},Hf={class:"other-td"},$f={class:"other-td"},Uf={class:"other-td"};Object(o["popScopeId"])();const qf=Af((function(e,t,a,n,i,r){const s=Object(o["resolveComponent"])("apexchart"),c=Object(o["resolveComponent"])("ion-col"),l=Object(o["resolveComponent"])("ion-row"),d=Object(o["resolveComponent"])("ion-grid");return Object(o["openBlock"])(),Object(o["createBlock"])(d,null,{default:Af(()=>[Object(o["createVNode"])(l,null,{default:Af(()=>[Object(o["createVNode"])(c,{"size-lg":"6","size-sm":"12"},{default:Af(()=>[Ef,Object(o["createVNode"])(s,{width:"100%",type:"bar",options:e.options,series:e.series},null,8,["options","series"])]),_:1}),Object(o["createVNode"])(c,{"size-lg":"6","size-sm":"12"},{default:Af(()=>[Bf,Object(o["createVNode"])("table",Rf,[Ff,(Object(o["openBlock"])(!0),Object(o["createBlock"])(o["Fragment"],null,Object(o["renderList"])(e.rows,(t,a)=>(Object(o["openBlock"])(),Object(o["createBlock"])("tr",{key:a},[Object(o["createVNode"])("td",Lf,Object(o["toDisplayString"])(e.getEncounterName(t.encounter)),1),Object(o["createVNode"])("td",Mf,Object(o["toDisplayString"])(t.female),1),Object(o["createVNode"])("td",Hf,Object(o["toDisplayString"])(t.male),1),Object(o["createVNode"])("td",$f,Object(o["toDisplayString"])(t.me),1),Object(o["createVNode"])("td",Uf,Object(o["toDisplayString"])(t.facility),1)]))),128))])]),_:1})]),_:1})]),_:1})}));var Gf=a("156d"),zf=Object(o["defineComponent"])({data:function(){return{dayjs:ae.a,startDate:"",endDate:"",options:{chart:{id:"vuechart-example"},xaxis:{categories:["","","","",""]}},series:[{name:"Total visits",data:[0,0,0,0,0],color:"#7cb5ec"},{name:"Total incomplete visits",data:[0,0,0,0,0],color:"#434348"}],rows:[{}],encounters:[{"HIV clinic registration":9},{"HIV reception":51},{Vitals:6},{"HIV staging":52},{"HIV clinic consultation":53},{"ART adherence":68},{Treatment:25},{Dispensing:54},{Appointments:7}]}},components:{IonGrid:De["p"],IonRow:De["H"],IonCol:De["m"]},mounted(){this.endDate=this.dayjs().subtract(1,"days").format("YYYY-MM-DD"),this.startDate=this.dayjs().subtract(5,"days").format("YYYY-MM-DD"),this.getVisits(),this.getEncounters()},methods:{getVisits:async function(){const e=await Gf["b"].get(`programs/1/reports/visits?name=visits&start_date=${this.startDate}&end_date=${this.endDate}`);if(e&&200==e.status){const t=await e.json(),a=Object.keys(t),n=[],o=[];a.forEach((e,a)=>{n[a]=t[e].incomplete,o[a]=t[e].complete+t[e].incomplete}),this.series[0].data=[...o],this.series[1].data=[...n];const i=a.map(e=>this.dayjs(e).format("dddd"));this.options={...this.options,xaxis:{categories:[...i]}}}},getEncounterName(e){if(!e)return"";const t=this.encounters.filter(t=>Object.values(t)[0]===e);return Object.keys(t[0])[0]},getEncounters:async function(){const e={encounter_types:[...this.encounters.map(e=>Object.values(e)[0])]},t={all:!0,encounter_types:[...this.encounters.map(e=>Object.values(e)[0])]},a=await Gf["b"].post(`reports/encounters?date=${d["e"].getSessionDate()}&program_id=${d["e"].getProgramID()}`,e),n=await Gf["b"].post(`reports/encounters?date=${d["e"].getSessionDate()}&program_id=${d["e"].getProgramID()}`,t);if(a&&n&&200==a.status&&200==n.status){const e=await a.json(),t=await n.json(),o=[];this.encounters.forEach(a=>{const n=Object.values(a)[0];o.push({encounter:n,female:t[n]["F"],male:t[n]["M"],me:e[n]["F"]+e[n]["M"],facility:t[n]["F"]+t[n]["M"]})}),this.rows=[...o]}}}});a("9128");const Yf=x()(zf,[["render",qf],["__scopeId","data-v-20f81f68"]]);var Wf=Yf;const Kf=[{name:"MoH",icon:"login-logos/Malawi-Coat_of_arms_of_arms.png",defaultFilesIcon:"reports.png",files:[{name:"Cohort / disaggregated",pathName:"moh_cohort"},{name:"Disaggregated",pathName:"moh_disaggregated",condition:()=>!1},{name:"Regimen Distribution (Weight)",pathName:"moh_regimen_weight_distribution"},{name:"Survival analysis",pathName:"moh_survial_analysis"},{name:"TPT new initiations",pathName:"moh_tpt_new_initiations"},{name:"TX CURR MMD",pathName:"moh_tx_curr_mmd"},{name:"Regimen Report",pathName:"moh_regimen_report"}]},{name:"Clinic",icon:"reports.png",defaultFilesIcon:"reports.png",files:[{name:"Active clients with adverse outcomes",pathName:"clinic_archiving_candidates"},{name:"Defaulter list",pathName:"clinic_defaulters_report"},{name:"Regimen Dispensation",pathName:"clinic_regimen_report"},{name:"Lab results",pathName:"clinic_lab_results"},{name:"Regimen switch",pathName:"clinic_regimen_switch"},{name:"Clients due for VL",pathName:"clinic_due_viral_load_report"},{name:"External and Drug Refill clients",pathName:"clinic_external_consultation_report"},{name:"Retention report",pathName:"clinic_retention_report"},{name:"Pregnant Patient",pathName:"clinic_pregnant_patients"},{name:"Missed Appointment",pathName:"clinic_missed_appointments"},{name:"VL results",pathName:"clinic_viral_load"},{name:"Other outcome list",pathName:"clinic_other_outcome_list"},{name:"Regimens and Formulation",pathName:"clinic_regimen_formulation"},{name:"Appointments",pathName:"clinic_appointments"},{name:"Stock card report",pathName:"stock_card_report",condition:()=>n["b"].drugManagementEnabled()}]},{name:"PEPFAR",icon:"login-logos/PEPFAR.png",defaultFilesIcon:"reports.png",files:[{name:"Defaulter list",pathName:"pepfar_defaulters_report"},{name:"Disaggregated",pathName:"pepfar_disaggregated_report"},{name:"Regimen Report",pathName:"pepfar_regimen_report"},{name:"Regimen Switch",pathName:"pepfar_regimen_switch"},{name:"TB PREV",pathName:"pepfar_tb_prev_report"},{name:"TX CURR MMD",pathName:"pepfar_tx_curr_mmd_report"},{name:"TX ML",pathName:"pepfar_tx_ml_report"},{name:"TX RTT",pathName:"pepfar_tx_rtt"},{name:"Viral Load Coverage",pathName:"pepfar_vl_coverage"},{name:"SC ARV",pathName:"sc_arv"}]}];function Xf(e,t){return{name:e,pathUrl:`/preferences?label=${e}&property=${t}`}}const Jf=[{name:"Drug Management",icon:"drug.png",condition:async()=>Ce["a"].isAdmin()&&await n["b"].drugManagementEnabled(),files:[{name:"Enter Receipts",pathUrl:"/art/stock/enter"},{name:"Enter Product relocation/Disposal",pathUrl:"/art/stock/move"},{name:"Enter verified physical stock count",pathUrl:"/art/stock/verify"},{name:"Print Barcode",pathUrl:"/drug/print"},{name:"Audit Trail",pathUrl:"/art/stock/trail"},{name:"Stock report",pathUrl:"/art/stock/report"}]},{name:"System Preferences",icon:"hiv-staging.png",condition:()=>Ce["a"].isAdmin(),files:[{name:"View Systems settings",pathUrl:"/art/preferences"},Xf("Activate Extended Lab",n["a"].EXTENDED_LABS),Xf("Activate VL routine check",n["a"].VL_ROUTINE_CHECK),Xf("Activate Filing Numbers",n["a"].FILING_NUMBERS),Xf("Activate drug management",n["a"].DRUG_MANAGEMENT),Xf("Activate Hypertension screening",n["a"].HTN_ENHANCEMENT),Xf("Activate fast track",n["a"].FAST_TRACK),Xf("Activate 3HP auto select",n["a"].THREE_HP_AUTO_SELECT),Xf("Is this a military site?",ut["a"].MILITARY_SITE),Xf("(DATA CLEANING) Exclude External and Drug refill",n["a"].EXCLUDE_EXTERNAL_AND_DRUG_REFILLS),{name:"Activate CxCa Screening",pathUrl:"/art/preferences/cervical_cancer_screening"},{name:"Set Hypertension Thresholds",pathUrl:"/art/preferences/bp_thresholds"},{name:"Set Clinic Days",pathUrl:"/art/preferences/clinic_days"},{name:"Set HTN Age",pathUrl:"/art/preferences/htn_age"},{name:"Set Appointment Limit",pathUrl:"/art/preferences/appointment/limit"},{name:"Set Filing Numbers Limit",pathUrl:"/art/preferences/fn/limit"},{name:"Set Clinic Holidays",pathUrl:"/art/preferences/clinic_holidays"}]}],Qf=[{id:"hiv clinic registration",name:"Hiv clinic registration",workflowID:"HIV first visits",icon:"registration.png"},{id:"hiv reception",name:"HIV reception",workflowID:"HIV reception visits",icon:"reception.png"},{id:"vitals",name:"Vitals",icon:"vitals.png",taskCompletionChecklist:["Weight"]},{id:"hiv staging",name:"HIV staging",workflowID:"HIV staging visits",icon:"hiv-staging.png"},{id:"hiv clinic consultation",name:"HIV clinic consultation",workflowID:"HIV clinic consultations",taskCompletionChecklist:["Medication orders"],icon:"consultation.png"},{id:"art adherence",name:"ART adherence",workflowID:"ART adherence",icon:"adherence.png"},{id:"treatment",name:"Treatment",workflowID:"Prescriptions",icon:"prescription.png"},{id:"fast track assesment",name:"Fast Track assesment",globalProperty:n["a"].FAST_TRACK+"=true",icon:"fast-track.png",availableOnActivitySelection:!1},{id:"dispensing",name:"Drug Dispensations",encounterTypeName:"DISPENSING",workflowID:"Drug Dispensations",icon:"dispensing.png"},{id:"appointment",name:"Manage Appointments",encounterTypeName:"APPOINTMENT",workflowID:"Manage Appointments",icon:"appointment.png"},{id:"patient type",name:"Patient Type",encounterTypeName:"Registration",icon:"patient-type.png",availableOnActivitySelection:!1},{id:"bp_management",name:"bp_management",icon:"dispensing.png",encounterTypeName:"Hypertension management",globalProperty:n["a"].HTN_ENHANCEMENT+"=true",availableOnActivitySelection:!1},{id:"bp_alert",name:"bp_alert",icon:"dispensing.png",globalProperty:n["a"].HTN_ENHANCEMENT+"=true",availableOnActivitySelection:!1}],Zf=[{id:"master_card",name:"Master card",description:"View mastercard",action:({patient:e},t)=>{t.push("/art/mastercard/"+e.patient_id)},icon:"card.png"},{id:"f_number",name:"Filing Number (Print)",description:"Print Patient Filing Number",globalProperty:n["a"].FILING_NUMBERS+"=true",condition:({patient:e})=>{const t=new Zt["a"](e);return t.hasActiveFilingNumber()||t.hasDormantFilingNumber()},action({patient:e}){const t=new le["a"](e.patient_id);return t.printFilingNumberLbl()},icon:"folder.png"},{id:"archive_client",name:"Archive client",description:"Archive a client",action:({patient:e},t)=>{t.push(`/art/filing_numbers/${e.patient_id}?archive=true`)},condition:async({patient:e})=>new Zt["a"](e).hasActiveFilingNumber(),globalProperty:n["a"].FILING_NUMBERS+"=true",icon:"archive.png"},{id:"assign_filing_number",name:"Assign filing number",description:"Assign a new filing number",condition:async({patient:e})=>{const t=new Zt["a"](e);return t.hasDormantFilingNumber()||!t.hasActiveFilingNumber()},action:({patient:e},t)=>{t.push(`/art/filing_numbers/${e.patient_id}?assign=true`)},globalProperty:n["a"].FILING_NUMBERS+"=true",icon:"archive.png"},{id:"filing_number_trail",name:"View filing number trail",description:"view trail",action:({patient:e},t)=>{t.push(`/art/filing_numbers/${e.patient_id}?trail=true`)},globalProperty:n["a"].FILING_NUMBERS+"=true",icon:"folder.png"}];var eO=a("50e7");async function tO(e,t="Malawi ART side effects"){const a=await we["a"].getObservations(e,B["a"].getCachedConceptID(t));return a.filter(e=>{try{return e.children[0].value_coded==B["a"].getCachedConceptID("Yes")}catch(t){return!1}})}var aO={alertSideEffects:tO};const nO=Object(o["createTextVNode"])(" Stock levels (Consumption rate calculated over a 3 month period) "),oO=Object(o["createTextVNode"])("X"),iO=Object(o["createTextVNode"])("Paeds"),rO=Object(o["createTextVNode"])("Adults");function sO(e,t,a,n,i,r){const s=Object(o["resolveComponent"])("ion-title"),c=Object(o["resolveComponent"])("ion-button"),l=Object(o["resolveComponent"])("ion-toolbar"),d=Object(o["resolveComponent"])("ion-header"),u=Object(o["resolveComponent"])("ion-label"),p=Object(o["resolveComponent"])("ion-segment-button"),h=Object(o["resolveComponent"])("ion-segment"),b=Object(o["resolveComponent"])("apexchart"),m=Object(o["resolveComponent"])("ion-content");return Object(o["openBlock"])(),Object(o["createBlock"])(o["Fragment"],null,[Object(o["createVNode"])(d,null,{default:Object(o["withCtx"])(()=>[Object(o["createVNode"])(l,null,{default:Object(o["withCtx"])(()=>[Object(o["createVNode"])(s,null,{default:Object(o["withCtx"])(()=>[nO]),_:1}),Object(o["createVNode"])(c,{color:"danger",slot:"end",onClick:t[1]||(t[1]=t=>e.closeModal()),class:"ion-margin-end"},{default:Object(o["withCtx"])(()=>[oO]),_:1})]),_:1})]),_:1}),Object(o["createVNode"])(l,null,{default:Object(o["withCtx"])(()=>[Object(o["createVNode"])(h,{onIonChange:t[2]||(t[2]=t=>e.segmentChanged(t)),value:e.segment},{default:Object(o["withCtx"])(()=>[Object(o["createVNode"])(p,{value:"paeds"},{default:Object(o["withCtx"])(()=>[Object(o["createVNode"])(u,null,{default:Object(o["withCtx"])(()=>[iO]),_:1})]),_:1}),Object(o["createVNode"])(p,{value:"adults"},{default:Object(o["withCtx"])(()=>[Object(o["createVNode"])(u,null,{default:Object(o["withCtx"])(()=>[rO]),_:1})]),_:1})]),_:1},8,["value"])]),_:1}),Object(o["createVNode"])(m,{class:"ion-padding"},{default:Object(o["withCtx"])(()=>[Object(o["createVNode"])(b,{width:"100%",type:"bar",options:e.options,series:e.series},null,8,["options","series"])]),_:1})],64)}var cO=a("3d6c"),lO=Object(o["defineComponent"])({name:"Modal",components:{IonContent:De["n"],IonHeader:De["q"],IonTitle:De["P"],IonToolbar:De["Q"],IonButton:De["d"],IonSegment:De["I"],IonSegmentButton:De["J"]},methods:{async closeModal(){await De["X"].dismiss()},getDrugs(){this.paedDrugs=cO["a"].getPaedeatricDrugs(),this.adultDrugs=cO["a"].getAdultDrugs(),this.formatDrugs()},segmentChanged(e){this.segment=e.detail.value,this.formatDrugs()},async formatDrugs(){const e=new cO["a"],t="paeds"===this.segment?this.paedDrugs:this.adultDrugs,a=[];this.series[0].data=[...a],t.forEach(async t=>{const a=await e.getConsumptionRate(t.drugID),n=parseInt(a["stock_level_in_months"]);this.series[0].data.push({x:t.shortName,y:n})})}},created(){this.getDrugs()},data(){return{paedDrugs:[],adultDrugs:[],segment:"paeds",options:{chart:{id:"vuechart-example"},plotOptions:{bar:{borderRadius:4,horizontal:!0,dataLabels:{position:"top"},colors:{ranges:[{from:0,to:2,color:"#ff0000"},{from:2,to:4,color:"#66CDAA"},{from:4,to:1e6,color:"#ffff00"}]}}},dataLabels:{enabled:!0,offsetX:0,style:{fontSize:"12px",colors:["#656565"]}},stroke:{show:!0,width:1,colors:["#fff"]},tooltip:{shared:!0,intersect:!1},grid:{column:{colors:["#FFFFFF","#FFFFFF","green"]}},yaxis:{min:1,max:9,fillColor:"#ffff00",tickAmount:1},xaxis:{fillColor:"#ffff00"}},series:[{name:"Available",data:[]}]}}});const dO=x()(lO,[["render",sO]]);var uO=dO,pO=a("0fa1");async function hO(e,t,a){const n=new $t["a"](e);await n.enrollProgram();const o=new Ze["a"](e,-1);o.setPatientType(t),o.setLocationName(a),await o.createEncounter(),await o.save()}async function bO(){if(await n["b"].drugManagementEnabled()){const e=await De["X"].create({component:uO,cssClass:"large-modal",backdropDismiss:!1});e.present(),await e.onDidDismiss()}}function mO(e,t=!0){const a=e.tests[0],n=a.result[0],o=t?"<br> Result date: &nbsp; "+l["b"].toStandardHisDisplayFormat(n.date):"",i=Ve["a"].isHighViralLoadResult(n)?'(<b style="color: #eb445a;">High</b>)':"";return`${a.name} &nbsp; ${n.value_modifier}${n.value} ${i} ${o}`}async function gO(e=""){await Object(pO["c"])(Qf),"HomePage"===e&&await bO()}async function fO(e,t,a,o,i){return await hO(e,t.patient_type,t.location),"Yes"===t.relationship&&Object(pO["a"])(e,{from:"Patient Registration",to:"/guardian/registration/"+e}),await n["b"].filingNumbersEnabled()&&"New patient"===t.patient_type&&Object(pO["a"])(e,{from:"Yes"===(null===t||void 0===t?void 0:t.relationship)?"Guardian Registration":"Patient Registration",to:`/art/filing_numbers/${e}?assign=true`}),Object(pO["b"])(e,o,i),!0}async function OO(e){const t=await aO.alertSideEffects(e.getID()),a=await e.getBMI();return[{label:"Side effects",value:""+t.length},{label:"Patient BMI is",value:""+a.result}]}function jO(e){const[t,a,n]=e.art_start_date.split("/"),o=e.art_start_date.match(/n\/a/i)?"":`(${ae()(d["e"].getSessionDate()).diff(`${n}-${a}-${t}`,"months")} Month(s))`;return[{label:"ART- Start Date",value:`${e.art_start_date} ${o}`},{label:"ARV Number",value:`${e.arv_number} | Regimen: ${e.current_regimen}`},{label:"File Number",value:e.filing_number.number},{label:"Current Outcome",value:e.current_outcome}]}async function _O(e,t){const a=(await Ve["a"].getOrders(e)).reduce((e,t)=>{const a=t.tests.filter(e=>e.name.match(/HIV/i)&&!Object(h["isEmpty"])(e.result)).map(e=>null===e||void 0===e?void 0:e.result);return e.concat(a.reduce((e,t)=>e.concat(t),[]))},[]).map(e=>{const t=Ve["a"].isHighViralLoadResult(e)?'(<b style="color: #eb445a;">High</b>)':"";return{label:`${e.indicator.name} &nbsp ${e.value_modifier}${e.value} ${t}`,value:l["b"].toStandardHisDisplayFormat(e.date),other:{wrapTxt:!0}}}).sort((e,t)=>new Date(e.value)>new Date(t.value)?-1:1);if(a.length>=2){const[e,t]=a;return[e,t]}return a}async function vO(e){const t=e.getID(),a=await V["a"].getProgramInformation(t);return{"PROGRAM INFORMATION":async()=>{const e=[],n=await eO["a"].getNextTaskParams(t);e.push({label:"Next Task",value:n.name?""+n.name:"NONE"}),e.push({label:"ART Duration",value:a.art_duration+" month(s) "}),await V["a"].getFastTrackStatus(t).then(t=>{e.push({label:"On Fast Track",value:!0===t["Continue FT"]?"Yes":"No"})});const o=await we["a"].getObservations(t,B["a"].getCachedConceptID("appointment date"));if(o.length>0){const t=l["b"].toStandardHisDisplayFormat(o[0].value_datetime);e.push({label:"Next Appointment",value:t})}return e},"PATIENT IDENTIFIERS":async()=>{const t=[{label:"ARV Number",value:e.getArvNumber()},{label:"NPID",value:e.getNationalID()}];return await n["b"].filingNumbersEnabled()&&t.push({label:"Filing Number",value:e.getFilingNumber()}),t},ALERTS:()=>OO(e),"LAB ORDERS":async()=>{const t=[];return await Ve["a"].getOrders(e.getID()).then(e=>{const a=Ve["a"].getViralLoadOrders(e);for(let n=0;n<2&&n<a.length;n++)t.push({value:mO(a[n]),label:""})}),t},OUTCOME:()=>[{label:"Current Outcome",value:a.current_outcome||"N/A"}],GUARDIAN:async()=>{const t=await wa["a"].getGuardianDetails(e.getID());if(t&&t.length>0){const e=[];return t.forEach(t=>{e.push({label:t.name,value:t.relationshipType}),e.push({label:"Phone",value:t.phoneNumber})}),e}return[]}}}const yO={init:gO,programID:1,applicationName:"ART",applicationIcon:"aids.png",applicationDescription:"HIV Client management app",appRoutes:Pf,primaryPatientActivites:Qf,secondaryPatientActivites:Zf,globalPropertySettings:Jf,programReports:Kf,homeOverviewComponent:Wf,confirmationSummary:vO,formatPatientProgramSummary:jO,getPatientDashboardAlerts:OO,onRegisterPatient:fO,getPatientDashboardLabOrderCardItems:_O,programPatientIdentifiers:{"ARV Number":{id:4,name:"ARV Number",isPrimary:!0,useForSearch:!0,prefix:async()=>await ut["b"].sitePrefix()+"-ARV-"},"Filing number":{id:17,name:"Active Filing number",isPrimary:!1,useForSearch:!0,prefix:async()=>{try{const[e]=(await n["b"].filingNumberPrefix()).split(",");return e}catch(e){return console.warn(e),""}},globalPropertySetting:n["a"].FILING_NUMBERS+"=true"},"Archived filing number":{id:18,name:"Archived filing number",isPrimary:!1,useForSearch:!0,prefix:async()=>{try{const[e,t]=(await n["b"].filingNumberPrefix()).split(",");return t}catch(e){return console.warn(e),""}},globalPropertySetting:n["a"].FILING_NUMBERS+"=true"}}};var wO=yO;const NO=Object(o["withScopeId"])("data-v-a517e22e");Object(o["pushScopeId"])("data-v-a517e22e");const CO={class:"los-overview"};Object(o["popScopeId"])();const VO=NO((function(e,t,a,n,i,r){const s=Object(o["resolveComponent"])("report-table");return Object(o["openBlock"])(),Object(o["createBlock"])("div",CO,[Object(o["createVNode"])(s,{rows:e.rows,columns:e.columns},null,8,["rows","columns"])])}));class DO extends d["e"]{constructor(){super()}static async overviewStats(){const e={},t=await this.ordersMade("ordered"),a=await this.ordersMade("drawn");return t.forEach(t=>{t.name in e||(e[t.name]={ordered:0}),e[t.name].ordered+=1}),a.forEach(t=>{t.name in e||(e[t.name]={drawn:0}),e[t.name].drawn||(e[t.name].drawn=0),e[t.name].drawn+=1}),e}static ordersMade(e){return super.getJson("orders_made",{date:super.getSessionDate(),status:e,start_date:super.getSessionDate(),end_date:super.getSessionDate(),program_id:super.getProgramID()})}}var kO=Object(o["defineComponent"])({components:{ReportTable:Ut["a"]},data:()=>({rows:[],columns:[[D["a"].thTxt("Test"),D["a"].thTxt("Ordered"),D["a"].thTxt("Drawn")]]}),created(){this.setRows()},methods:{async setRows(){const e=await DO.overviewStats();if(!Object(h["isEmpty"])(e))for(const t in e){const a=e[t];this.rows.push([D["a"].td(t),D["a"].td(a.ordered),D["a"].td(a.drawn)])}}}});a("133d");const TO=x()(kO,[["render",VO],["__scopeId","data-v-a517e22e"]]);var IO=TO;const xO=Object(o["createVNode"])("p",null,null,-1),SO=Object(o["createTextVNode"])("Open"),PO=Object(o["createTextVNode"])("Drawn"),AO=Object(o["createVNode"])("p",null,null,-1),EO={style:{overflowX:"auto",height:"84%"}},BO=Object(o["createVNode"])("b",null,"Select specimen",-1),RO=Object(o["createTextVNode"])("Test: "),FO=Object(o["createTextVNode"])(" Close "),LO=Object(o["createTextVNode"])(" Submit ");function MO(e,t,a,n,i,r){const s=Object(o["resolveComponent"])("ion-label"),c=Object(o["resolveComponent"])("ion-segment-button"),l=Object(o["resolveComponent"])("ion-segment"),d=Object(o["resolveComponent"])("report-table"),u=Object(o["resolveComponent"])("ion-title"),p=Object(o["resolveComponent"])("ion-toolbar"),h=Object(o["resolveComponent"])("ion-header"),b=Object(o["resolveComponent"])("ion-item"),m=Object(o["resolveComponent"])("ion-list"),g=Object(o["resolveComponent"])("ion-col"),f=Object(o["resolveComponent"])("ion-chip"),O=Object(o["resolveComponent"])("ion-row"),j=Object(o["resolveComponent"])("ion-content"),_=Object(o["resolveComponent"])("ion-button"),v=Object(o["resolveComponent"])("ion-footer"),y=Object(o["resolveComponent"])("ion-page"),w=Object(o["resolveComponent"])("ion-modal");return Object(o["openBlock"])(),Object(o["createBlock"])(o["Fragment"],null,[xO,Object(o["createVNode"])(l,{scrollable:"",value:e.activeTab,class:"ion-justify-content-center"},{default:Object(o["withCtx"])(()=>[Object(o["createVNode"])(c,{value:"openOrders",onClick:t[1]||(t[1]=t=>e.activeTab="openOrders")},{default:Object(o["withCtx"])(()=>[Object(o["createVNode"])(s,{class:"his-lg-text"},{default:Object(o["withCtx"])(()=>[SO]),_:1})]),_:1}),Object(o["createVNode"])(c,{class:"his-lg-text",value:"drawnOrders",onClick:t[2]||(t[2]=t=>e.activeTab="drawnOrders")},{default:Object(o["withCtx"])(()=>[Object(o["createVNode"])(s,null,{default:Object(o["withCtx"])(()=>[PO]),_:1})]),_:1})]),_:1},8,["value"]),AO,Object(o["createVNode"])("div",EO,["openOrders"===e.activeTab?(Object(o["openBlock"])(),Object(o["createBlock"])(d,{key:0,config:{showIndex:!1},rows:e.labOrderRows,columns:e.openColumns},null,8,["rows","columns"])):Object(o["createCommentVNode"])("",!0),"drawnOrders"===e.activeTab?(Object(o["openBlock"])(),Object(o["createBlock"])(d,{key:1,config:{showIndex:!1},rows:e.drawnOrders,columns:e.drawnColumns},null,8,["rows","columns"])):Object(o["createCommentVNode"])("",!0)]),Object(o["createVNode"])(w,{"is-open":e.showSpecimenModal,class:"custom-modal"},{default:Object(o["withCtx"])(()=>[Object(o["createVNode"])(y,null,{default:Object(o["withCtx"])(()=>[Object(o["createVNode"])(h,null,{default:Object(o["withCtx"])(()=>[Object(o["createVNode"])(p,null,{default:Object(o["withCtx"])(()=>[Object(o["createVNode"])(u,null,{default:Object(o["withCtx"])(()=>[BO]),_:1})]),_:1})]),_:1}),Object(o["createVNode"])(j,{class:"ion-padding"},{default:Object(o["withCtx"])(()=>[Object(o["createVNode"])(O,null,{default:Object(o["withCtx"])(()=>[Object(o["createVNode"])(g,null,{default:Object(o["withCtx"])(()=>[Object(o["createVNode"])(m,null,{default:Object(o["withCtx"])(()=>[(Object(o["openBlock"])(!0),Object(o["createBlock"])(o["Fragment"],null,Object(o["renderList"])(e.specimens,(t,a)=>(Object(o["openBlock"])(),Object(o["createBlock"])(b,{key:a,color:e.selectedSpecimen.name===t.name?"primary":"",onClick:a=>e.selectedSpecimen=t},{default:Object(o["withCtx"])(()=>[Object(o["createVNode"])(s,null,{default:Object(o["withCtx"])(()=>[Object(o["createTextVNode"])(Object(o["toDisplayString"])(t.name),1)]),_:2},1024)]),_:2},1032,["color","onClick"]))),128))]),_:1})]),_:1}),Object(o["createVNode"])(g,null,{default:Object(o["withCtx"])(()=>[Object(o["createVNode"])(m,null,{default:Object(o["withCtx"])(()=>[(Object(o["openBlock"])(!0),Object(o["createBlock"])(o["Fragment"],null,Object(o["renderList"])(e.order.tests,(e,t)=>(Object(o["openBlock"])(),Object(o["createBlock"])(b,{lines:"none",key:t},{default:Object(o["withCtx"])(()=>[Object(o["createVNode"])(f,{color:"success"},{default:Object(o["withCtx"])(()=>[RO,Object(o["createVNode"])("b",null,Object(o["toDisplayString"])(e.name),1)]),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1})]),_:1})]),_:1}),Object(o["createVNode"])(v,null,{default:Object(o["withCtx"])(()=>[Object(o["createVNode"])(p,null,{default:Object(o["withCtx"])(()=>[Object(o["createVNode"])(_,{color:"danger",slot:"start",onClick:t[3]||(t[3]=t=>{e.showSpecimenModal=!1,e.selectedSpecimen={}})},{default:Object(o["withCtx"])(()=>[FO]),_:1}),Object(o["createVNode"])(_,{disabled:!e.selectedSpecimen.name,color:"success",slot:"end",onClick:t[4]||(t[4]=()=>{e.showSpecimenModal=!0,e.drawOrder()})},{default:Object(o["withCtx"])(()=>[LO]),_:1},8,["disabled"])]),_:1})]),_:1})]),_:1})]),_:1},8,["is-open"])],64)}var HO=a("9c73");async function $O(e,t=[]){const a=await Object(j["a"])("Are you sure you want to void?");if(!a)return;let n=[{text:"Mistake/ Wrong Entry",role:"Mistake/ Wrong Entry"},{text:"Duplicate",role:"Duplicate"},{text:"System Error",role:"System Error"},{text:"Cancel",role:"cancel"}];Object(h["isEmpty"])(t)||(n=t.map(e=>({text:e,role:e})),n.push({text:"Cancel",role:"Cancel"}));const o=await De["S"].create({header:"Are you sure you want to void this Encounter?",subHeader:"Please specify reason for voiding this encounter",mode:"ios",buttons:n});o.present();const{role:i}=await o.onDidDismiss();"cancel"!=i&&e(i)}const UO={style:{background:"#f1f1f1",color:"#333",fontSize:"1.1rem !important"}};var qO=Object(o["defineComponent"])({components:{IonTitle:De["P"],IonCol:De["m"],IonRow:De["H"],IonButton:De["d"],IonList:De["y"],IonFooter:De["o"],IonToolbar:De["Q"],IonHeader:De["q"],IonItem:De["w"],IonChip:De["l"],IonModal:De["C"],IonContent:De["n"],IonPage:De["D"],ReportTable:Ut["a"],IonSegment:De["I"],IonLabel:De["x"],IonSegmentButton:De["J"]},emits:["onProgramVisitDates"],data:()=>({initiated:!1,showSpecimenModal:!1,specimens:[],order:{},selectedSpecimen:{},service:{},activeTab:"openOrders",drawnColumns:[[D["a"].thTxt("Accession #",UO),D["a"].thTxt("Test",UO),D["a"].thTxt("Actions",UO)]],openColumns:[[D["a"].thTxt("Accession #",UO),D["a"].thTxt("Test",UO),D["a"].thTxt("Reason for test",UO),D["a"].thTxt("Drawn",UO),D["a"].thTxt("Void",UO)]],drawnOrdersData:[],openOrdersData:[],drawnOrders:[],labOrderRows:[]}),watch:{visitDate:{async handler(e){this.initiated||(await this.init(),this.initiated=!0),e&&this.activeTab&&(this.drawnOrders=this.getdrawnOrders(this.drawnOrdersData.filter(t=>this.toDate(t.order_date)===e)),this.labOrderRows=this.getLabOrderRows(this.openOrdersData.filter(t=>this.toDate(t.order_date)===e)))},immediate:!0}},methods:{async init(){this.service=new HO["a"](this.patient.getID()),this.openOrdersData=await this.service.getOrders("ordered"),this.drawnOrdersData=await this.service.getOrders("drawn");const e=this.drawnOrdersData.concat(this.openOrdersData).map(e=>({label:l["b"].toStandardHisDisplayFormat(e.order_date),value:this.toDate(e.order_date)}));this.$emit("onProgramVisitDates",e)},toDate(e){return l["b"].toStandardHisFormat(e)},removeLabOrderRow(e){this.labOrderRows=this.labOrderRows.filter(t=>{var a,n;return(null===(a=t[0])||void 0===a||null===(n=a.value)||void 0===n?void 0:n.orderID)!=e})},async drawOrder(){try{const e=await this.service.updateOrderSpecimen(this.order.order_id,this.selectedSpecimen.concept_id);if(!e)throw"Unable to draw sample";this.drawnOrders=this.drawnOrders.concat(this.getdrawnOrders([e])),this.removeLabOrderRow(this.order.order_id),this.showSpecimenModal=!1,this.service.printSpecimenLabel(this.order.order_id)}catch(e){console.error(e),Object(j["c"])(e)}},getLabOrderRows(e){return e.map(e=>[D["a"].td(e.accession_number,{value:{orderID:e.order_id}}),D["a"].td(e.tests.map(e=>e.name).join(",")),D["a"].td(e.reason_for_test.name||"N/A"),D["a"].tdBtn("Draw",async()=>{this.order=e,this.showSpecimenModal=!0,this.specimens=await HO["a"].getSpecimensForTests(e.tests)},{},"success"),D["a"].tdBtn("Void",async()=>{$O(async t=>{try{await this.service.voidOrder(e.order_id,t),this.removeLabOrderRow(e.order_id)}catch(a){Object(j["c"])(a)}},["Duplicate order","Wrong client"])},{},"danger")])},getdrawnOrders(e){return e.map(e=>[D["a"].td(e.accession_number),D["a"].td(e.tests.map(e=>e.name).join(",")),D["a"].tdBtn("Print",()=>this.service.printSpecimenLabel(e.order_id))])}},props:{patient:{type:Object,required:!0},visitDate:{type:String}}});const GO=x()(qO,[["render",MO]]);var zO=GO;const YO=[{id:"draw samples",name:"Draw Samples",icon:"social_history.png",action:({patient:e},t)=>{t.push(`/los/forms/order/${e.patient_id}?type=DRAW_SAMPLES`)}}];var WO=[{name:"order tests",path:"/los/forms/order/:patient_id",component:()=>a.e("chunk-2d237731").then(a.bind(null,"fabb"))},{name:"Tests requested report",path:"/los/report/tests/requests",component:()=>a.e("chunk-2d2297b9").then(a.bind(null,"de46"))},{name:"Test results report",path:"/los/report/tests/results",component:()=>a.e("chunk-2d226ccc").then(a.bind(null,"e9ce"))}];const KO={programID:23,applicationName:"LOS",applicationIcon:"order.png",applicationDescription:"Lab Order System",appRoutes:WO,primaryPatientActivites:YO,secondaryPatientActivites:[],globalPropertySettings:[],homeOverviewComponent:IO,customPatientDashboardContentComponent:zO,confirmationSummary:e=>({"PATIENT IDENTIFIERS":()=>[{label:"NPID",value:e.getNationalID()}],"LAB ORDERS":async()=>{const t=await Ve["a"].getOrders(e.getID());return t.map(e=>({label:e.specimen.name,value:`${e.accession_number} - ${l["b"].toStandardHisDisplayFormat(e.order_date)}`}))}}),programReports:[{name:"Clinical",icon:"reports.png",defaultFilesIcon:"reports.png",files:[{name:"Test requested",pathUrl:"/los/report/tests/requests"},{name:"Test results",pathUrl:"/los/report/tests/results"}]}]};var XO=KO;const JO=Object(o["withScopeId"])("data-v-8f1b8bca"),QO=JO((function(e,t,a,n,i,r){const s=Object(o["resolveComponent"])("opd-stat-card"),c=Object(o["resolveComponent"])("ion-col"),l=Object(o["resolveComponent"])("ion-row"),d=Object(o["resolveComponent"])("opd-stat-chart"),u=Object(o["resolveComponent"])("syndromic-stat-chart"),p=Object(o["resolveComponent"])("ion-grid");return Object(o["openBlock"])(),Object(o["createBlock"])(p,null,{default:JO(()=>[Object(o["createVNode"])(l,null,{default:JO(()=>[(Object(o["openBlock"])(!0),Object(o["createBlock"])(o["Fragment"],null,Object(o["renderList"])(e.patientSummaryStats,e=>(Object(o["openBlock"])(),Object(o["createBlock"])(c,{key:e.label},{default:JO(()=>{var t;return[Object(o["createVNode"])(s,{label:e.label,value:e.value,color:null!==(t=e.color)&&void 0!==t?t:""},null,8,["label","value","color"])]}),_:2},1024))),128))]),_:1}),Object(o["createVNode"])(l,null,{default:JO(()=>[Object(o["createVNode"])(c,null,{default:JO(()=>[Object(o["createVNode"])(d,{series:e.accumulativeVisits.visits,categories:e.accumulativeVisits.days},null,8,["series","categories"])]),_:1}),Object(o["createVNode"])(c,null,{default:JO(()=>[Object(o["createVNode"])(u,{categories:e.AccumulativePatietRespiratoryComplaints.categories,series:e.AccumulativePatietRespiratoryComplaints.series},null,8,["categories","series"])]),_:1})]),_:1})]),_:1})})),ZO=Object(o["withScopeId"])("data-v-5ce582b2"),ej=ZO((function(e,t,a,n,i,r){const s=Object(o["resolveComponent"])("ion-card-subtitle"),c=Object(o["resolveComponent"])("ion-spinner"),l=Object(o["resolveComponent"])("ion-card-content"),d=Object(o["resolveComponent"])("ion-card");return Object(o["openBlock"])(),Object(o["createBlock"])(d,{style:e.bgColor},{default:ZO(()=>[Object(o["createVNode"])(l,null,{default:ZO(()=>[Object(o["createVNode"])(s,null,{default:ZO(()=>[Object(o["createTextVNode"])(Object(o["toDisplayString"])(e.label),1)]),_:1}),-1===e.value?(Object(o["openBlock"])(),Object(o["createBlock"])(s,{key:0},{default:ZO(()=>[Object(o["createVNode"])(c,{name:"crescent"})]),_:1})):(Object(o["openBlock"])(),Object(o["createBlock"])(s,{key:1},{default:ZO(()=>[Object(o["createTextVNode"])(Object(o["toDisplayString"])(e.value),1)]),_:1}))]),_:1})]),_:1},8,["style"])}));var tj=Object(o["defineComponent"])({props:{label:String,value:Number,color:String},components:{IonCard:De["f"],IonCardContent:De["g"],IonCardSubtitle:De["i"],IonSpinner:De["L"]},setup(e){var t;return{bgColor:"background-color: "+(null!==(t=e.color)&&void 0!==t?t:"")}}});a("985a");const aj=x()(tj,[["render",ej],["__scopeId","data-v-5ce582b2"]]);var nj=aj;function oj(e,t,a,n,i,r){const s=Object(o["resolveComponent"])("apexchart");return Object(o["openBlock"])(),Object(o["createBlock"])(s,{width:"100%",height:"350px",type:"bar",options:e.options,series:e.series},null,8,["options","series"])}var ij=Object(o["defineComponent"])({props:{categories:Array,series:Array},setup(e){const t=Object(o["ref"])({chart:{height:"auto",animations:{enabled:!0,easing:"easeinout",speed:800,animateGradually:{enabled:!0,delay:150},dynamicAnimation:{enabled:!0,speed:350}},toolbar:{show:!1}},title:{text:"New registered , Returning and Referred clients",margin:20,align:"center",style:{fontWeight:"regular"}},subtitle:{text:"For the past 12 months",align:"center",margin:10},xaxis:{categories:e.categories},yaxis:{min:0,forceNiceScale:!0,title:{text:"Number of clients"}},noData:{text:"Loading data. Please wait...",align:"center",verticalAlign:"middle",offsetX:0,offsetY:0,style:{color:"#000000",fontSize:"30px",fontFamily:"Helvetica"}}});return{options:t}}});const rj=x()(ij,[["render",oj]]);var sj=rj;function cj(e,t,a,n,i,r){const s=Object(o["resolveComponent"])("apexchart");return Object(o["openBlock"])(),Object(o["createBlock"])(s,{width:"99%",height:"350px",type:"area",options:e.options,series:e.series},null,8,["options","series"])}var lj=Object(o["defineComponent"])({props:{categories:Array,series:Array},setup(e){const t=Object(o["ref"])({chart:{height:"auto",animations:{enabled:!0,easing:"easeinout",speed:800,animateGradually:{enabled:!0,delay:150},dynamicAnimation:{enabled:!0,speed:350}},toolbar:{show:!1}},title:{text:"Influenza Like Illness , Respiratory",margin:20,align:"center",style:{fontWeight:"regular"}},subtitle:{text:"For the past 12 months",align:"center",margin:10},xaxis:{categories:e.categories},yaxis:{min:0,forceNiceScale:!0,title:{text:"Number of clients"}},noData:{text:"Loading data. Please wait...",align:"center",verticalAlign:"middle",offsetX:0,offsetY:0,style:{color:"#000000",fontSize:"30px",fontFamily:"Helvetica"}}});return{options:t}}});const dj=x()(lj,[["render",cj]]);var uj=dj;function pj(e){return e.charAt(0).toUpperCase()+e.slice(1)}var hj={capitalizeFirstLetter:pj};class bj extends d["e"]{constructor(){super()}static getStatistics(){return super.getJsonSWR("dashboard_stats",{date:super.getSessionDate(),program_id:super.getProgramID()})}static getTodaysPatientVisits(e){const t=Object.keys(e);let a=0;const n=[];return t.forEach(t=>{n.push({label:hj.capitalizeFirstLetter(t.replace("_"," ")),value:e[t],color:"lightyellow"}),a+=e[t]}),n.push({label:"Total",value:a,color:"yellowgreen"}),n}static getAccumulativePatientVisits(e){const t=Object.keys(e),a=Object.keys(e[t[0]]),n=[],o=[];for(const i in t){const r=[];for(const o in a){const s=e[t[i]][a[o]].start_date,c=ae()(s).format("MMM/YYYY");c!==n[o]&&n.push(c),r.push(e[t[i]][a[o]].count)}o.push({name:hj.capitalizeFirstLetter(t[i]),data:r})}return{days:n,visits:o}}static getRespiratory(){return super.getJsonSWR("/dashboard_stats_for_syndromic_statistics",{date:super.getSessionDate(),program_id:super.getProgramID()})}static getAccumulativePatietRespiratoryComplaints(e){let t=[];const a=e,n=[],o=[],i=[];let r=[];const s=[{name:"Influenza Like Illness ",data:[0,0,0,0,0,0,0,0,0,0,0,0,0]},{name:"Respiratory",data:[0,0,0,0,0,0,0,0,0,0,0,0,0]}];for(let d in a){const e=a[d];for(d in e)t.push(parseInt(d));break}t=t.sort((e,t)=>e-t);const c=["ILI","Respiratory"],l={};for(let d=0;d<t.length;d++){const e=a[c[0]][t[d]].start_date,o=ae()(e).format("MMM/YYYY");n.push(o)}for(let d=0;d<n.length;d++){for(const e in a){const t=a[e];for(const r in t){const t=a[e][r].start_date,s=ae()(t).format("MMM/YYYY");s==n[d]&&(void 0==l[e]&&(l[e]=[]),"ILI"==e&&o.push(a[e][r].count),"Respiratory"==e&&i.push(a[e][r].count))}}s[0].data=[...o],s[1].data=[...i],r=[...n]}return{categories:r,series:s}}}var mj=Object(o["defineComponent"])({components:{OpdStatCard:nj,OpdStatChart:sj,IonGrid:De["p"],IonRow:De["H"],IonCol:De["m"],SyndromicStatChart:uj},setup(){const e=bj.getStatistics(),t=Object(o["computed"])(()=>{var t;return e.value?bj.getTodaysPatientVisits(null===(t=e.value)||void 0===t?void 0:t.top):[{label:"Registered today",value:-1,color:"lightyellow"},{label:"Returning today",value:-1,color:"lightyellow"},{label:"Referred today",value:-1,color:"lightyellow"},{label:"Total",value:-1,color:"yellowgreen"}]}),a=Object(o["computed"])(()=>{var t;return e.value?bj.getAccumulativePatientVisits(null===(t=e.value)||void 0===t?void 0:t.down):{days:[],visits:[]}}),n=bj.getRespiratory(),i=Object(o["computed"])(()=>{var e;return n.value?bj.getAccumulativePatietRespiratoryComplaints(null===(e=n.value)||void 0===e?void 0:e.down):{categories:[],series:[]}});return{patientSummaryStats:t,accumulativeVisits:a,AccumulativePatietRespiratoryComplaints:i}}});a("e897");const gj=x()(mj,[["render",QO],["__scopeId","data-v-8f1b8bca"]]);var fj=gj;const Oj=[{id:"patient registration",name:"Patient registration",icon:"attributes.png"},{id:"vitals",name:"Vitals",icon:"vitals.png"},{id:"presenting complaints",name:"Presenting complaints",icon:"complaints.png"},{id:"hiv status",name:"HIV STatus",icon:"aids.png",encounterTypeName:"update hiv status",availableOnActivitySelection:!1},{id:"outpatient diagnosis",name:"Outpatient diagnosis",icon:"diagnosis.png"},{id:"outcome status",name:"Outcome status",icon:"outcomes.png",availableOnActivitySelection:!1},{id:"lab orders",name:"Lab orders",icon:"clinical-notes.png",availableOnActivitySelection:!1,action:({patient:e},t)=>{t.push(`/los/forms/order/${e.patient_id}?type=DRAW_SAMPLES`)}},{id:"lab results",name:"Lab results",icon:"enter.png",availableOnActivitySelection:!1,action:({patient:e},t)=>{t.push({path:"/lab/results/"+e.patient_id})}},{id:"OPD social history",name:"OPD social history",icon:"medical-report.png",availableOnActivitySelection:!1},{id:"prescription",name:"Prescription",encounterTypeName:"Treatment",icon:"drugs-given.png"},{id:"dispensation",name:"Dispensation",encounterTypeName:"dispensing",icon:"dispensing.png",availableOnActivitySelection:!1}],jj=[{id:"radiology examination",name:"radiology examination",icon:"radiology_types.png"}],_j=["Queen Elizabeth Central Hospital","Kamuzu Central Hospital","Mzuzu Central Hospital","Zomba Central Hospital"];function vj(){for(const e of _j)if(e==d["e"].getLocationName())return!0;return!1}const yj=[{name:"MoH",icon:"login-logos/Malawi-Coat_of_arms_of_arms.png",defaultFilesIcon:"reports.png",condition:()=>!0,files:[{name:"LA report",pathName:"moh_la",condition:()=>!1},{name:"Drug report",pathName:"moh_drug",condition:()=>!1},{name:"Malaria report",pathName:"moh_malaria",condition:()=>!1},{name:"IPT",pathName:"moh_ipt",condition:()=>!1},{name:"IDSR Weekley Report",pathName:"idsr_weekly"},{name:"IDSR Monthly Report",pathName:"idsr_monthly"},{name:"HMIS 15 Report",pathName:"hmis_15",condition:()=>!vj()},{name:"HMIS 17 Report",pathName:"hmis_17",condition:()=>vj()}]},{name:"Clinic",icon:"reports.png",defaultFilesIcon:"reports.png",files:[{name:"Diagnosis by address",pathName:"clinic_diagnosis_by_address"},{name:"Diagnosis",pathName:"clinic_diagnosis"},{name:"Registration report",pathName:"clinic_registration"},{name:"LA report",pathName:"clinic_la"},{name:"Cases seen report",pathName:"clinic_cases_seen"},{name:"Mental health report",pathName:"clinic_mental_health"},{name:"Drugs (dispensed without prescription)",pathName:"clinic_drugs_given"},{name:"Drugs (prescribed and dispensed)",pathName:"clinic_drugs"},{name:"With NIDs",pathName:"clinic_with_nids"}]}];function wj(e,t){const a=Object(o["resolveComponent"])("router-view");return Object(o["openBlock"])(),Object(o["createBlock"])(a)}const Nj={},Cj=x()(Nj,[["render",wj]]);var Vj=Cj,Dj=[{name:"patient registration",path:"/opd/encounters/registration/:patient_id",component:()=>a.e("chunk-770d622c").then(a.bind(null,"c7512"))},{name:"hiv status",path:"/opd/encounters/hiv-status/:patient_id",component:()=>a.e("chunk-2d0de711").then(a.bind(null,"8652"))},{name:"vitals",path:"/opd/encounters/vitals/:patient_id",component:()=>Promise.resolve().then(a.bind(null,"ab49"))},{name:"outpatient diagnosis",path:"/opd/encounters/diagnosis/:patient_id",component:()=>a.e("chunk-76ee8285").then(a.bind(null,"a16a6"))},{name:"outcome status",path:"/opd/encounters/outcome-status/:patient_id",component:()=>a.e("chunk-2d0dd6ae").then(a.bind(null,"80ff"))},{name:"OPD social history",path:"/opd/encounters/social/:patient_id",component:()=>a.e("chunk-2d209573").then(a.bind(null,"a949"))},{name:"presenting complaints",path:"/opd/encounters/complaints/:patient_id",component:()=>a.e("chunk-e7b46f9a").then(a.bind(null,"fea9"))},{name:"prescription",path:"/opd/encounters/prescription/:patient_id",component:()=>a.e("chunk-2d0ab2c7").then(a.bind(null,"13c2"))},{name:"dispensation",path:"/opd/encounters/dispensing/:patient_id",component:()=>a.e("chunk-2d0ccf55").then(a.bind(null,"4fc0"))},{name:"radiology examination",path:"/opd/encounters/radiology/:patient_id",component:()=>a.e("chunk-2d0cf669").then(a.bind(null,"640e"))},{path:"/opd/reports/clinic",component:Vj,children:[{name:"clinic_with_nids",path:"clinic_with_nids",component:()=>a.e("chunk-297f5928").then(a.bind(null,"efa6"))},{name:"clinic_drugs_given",path:"clinic_drugs_given",component:()=>a.e("chunk-1b5b3d32").then(a.bind(null,"d48c"))},{name:"clinic_drugs",path:"clinic_drugs",component:()=>a.e("chunk-c3f36d04").then(a.bind(null,"2941"))},{name:"clinic_registration",path:"cclinic_registration",component:()=>a.e("chunk-4734f41a").then(a.bind(null,"fd0a"))},{name:"clinic_la",path:"clinic_la",component:()=>a.e("chunk-73f2f583").then(a.bind(null,"7666"))},{name:"clinic_cases_seen",path:"clinic_cases_seen",component:()=>a.e("chunk-3b1a42fa").then(a.bind(null,"f482"))},{name:"clinic_mental_health",path:"clinic_mental_health",component:()=>a.e("chunk-6b3e685a").then(a.bind(null,"3c87"))},{name:"clinic_diagnosis",path:"clinic_diagnosis",component:()=>a.e("chunk-17bf2c46").then(a.bind(null,"15ab"))},{name:"clinic_diagnosis_by_address",path:"clinic_diagnosis_by_address",component:()=>a.e("chunk-b28e0d76").then(a.bind(null,"e4c1"))}]},{path:"/opd/reports/moh",component:Vj,children:[{name:"idsr_weekly",path:"idsr_weekly",component:()=>a.e("chunk-ae9bd206").then(a.bind(null,"53dc"))},{name:"idsr_monthly",path:"idsr_monthly",component:()=>a.e("chunk-a8f00460").then(a.bind(null,"9ad4"))},{name:"hmis_15",path:"hmis_15",component:()=>a.e("chunk-fa4614d4").then(a.bind(null,"39a4"))},{name:"hmis_17",path:"hmis_17",component:()=>a.e("chunk-528252d8").then(a.bind(null,"8410"))}]}],kj=a("66fd");function Tj(e,t){return{name:e,pathUrl:`/preferences?label=${e}&property=${t}`}}const Ij=[{name:"System Preferences",icon:"diagnosis.png",condition:()=>Ce["a"].isAdmin(),files:[Tj("Activate PACs",kj["a"].PACS_ENABLED)]}];async function xj(e){const t=new $t["a"](e);await t.enrollProgram();const a=new b["a"](e,5);await a.createEncounter(),await a.saveValueCodedObs("Type of patient","New Patient")}async function Sj(e,t){const a=await Zt["a"].findByID(t),n=new Zt["a"](a),o=await we["a"].getFirstValueText(n.getID(),"HIV Status");return[{label:"Malawi National ID",value:n.getMWNationalID()},{label:"HIV Status",value:o||"Unknown"}]}async function Pj(e){const t=await aO.alertSideEffects(e.getID()),a=await e.getBMI();return[{label:"Side effects",value:""+t.length},{label:"Patient BMI is",value:""+a.result}]}function Aj(e){const t=e.tests[0],a=t.result[0],n=Ve["a"].isHighViralLoadResult(a)?'(<b style="color: #eb445a;">High</b>)':"";return`${t.name} ${a.value_modifier}${a.value} ${n}`}function Ej(e,t){return{"PATIENT IDENTIFIERS":()=>[{label:"NPID",value:e.getNationalID()}],ALERTS:()=>Pj(e),"LAB ORDERS":async()=>{const t=[];return await Ve["a"].getOrders(e.getID()).then(e=>{const a=Ve["a"].getViralLoadOrders(e);a.forEach(e=>{t.push({value:Aj(e),label:""})})}),t},OUTCOME:()=>[{label:"Current Outcome",value:t.outcome||"N/A"}],GUARDIAN:async()=>{const t=await wa["a"].getGuardianDetails(e.getID());return t?t.map(e=>({label:e.name,value:e.relationshipType})):[]}}}const Bj={programID:14,applicationName:"OPD",applicationIcon:"opd.png",applicationDescription:"Outpatient Program",appRoutes:Dj,programReports:yj,primaryPatientActivites:Oj,secondaryPatientActivites:jj,homeOverviewComponent:fj,globalPropertySettings:Ij,onRegisterPatient:xj,formatPatientProgramSummary:Sj,confirmationSummary:Ej,init:async()=>await Object(pO["c"])(Oj,"OPD_activities"),programPatientIdentifiers:{"National ID":{id:28,name:"National ID",isPrimary:!0,useForSearch:!0,prefix:()=>"",validation:e=>s["a"].isMWNationalID(e)}}};var Rj=Bj,Fj=[{name:"ANC Vitals",path:"/anc/encounters/vitals/:patient_id",component:()=>a.e("chunk-2d0deeb6").then(a.bind(null,"8866"))},{name:"anc_pepfar_disaggregated",path:"/anc/pepfar_disaggregated",component:()=>a.e("chunk-d2a20e8a").then(a.bind(null,"6f07"))},{name:"anc_clinic_appointment",path:"/anc/clinic_appointments",component:()=>a.e("chunk-2d0f0d90").then(a.bind(null,"9db1"))},{name:"anc_moh_report",path:"/anc/moh_report/:template_id",component:()=>a.e("chunk-bed78cd2").then(a.bind(null,"0128"))},{name:"art_followup",path:"/anc/pmtct/:patient_id",component:()=>a.e("chunk-2d0cedec").then(a.bind(null,"60fb"))},{name:"anc data-cleaning tools",path:"/anc/datacleaning",component:()=>a.e("chunk-2d0e8851").then(a.bind(null,"8a2d"))},{name:"drugset management",path:"/anc/drugset",component:()=>a.e("chunk-6357648c").then(a.bind(null,"3286"))},{name:"add anc drugset",path:"/anc/drugset/add",component:()=>a.e("chunk-0ced981c").then(a.bind(null,"668a"))},{name:"anc dispensing",path:"/anc/ttv/:patient_id",component:()=>a.e("chunk-033a882d").then(a.bind(null,"dc52"))},{name:"anc visit type",path:"/anc/visit/:patient_id",component:()=>a.e("chunk-2d229093").then(a.bind(null,"dc75"))},{name:"surgical history",path:"/anc/surgical_history/:patient_id",component:()=>a.e("chunk-2d0aa91b").then(a.bind(null,"1226"))},{name:"medical history",path:"/anc/medical_history/:patient_id",component:()=>a.e("chunk-77126da4").then(a.bind(null,"ba823"))},{name:"anc examination",path:"/anc/examination/:patient_id",component:()=>a.e("chunk-590f9388").then(a.bind(null,"2819"))},{name:"social history",path:"/anc/social_history/:patient_id",component:()=>a.e("chunk-2d0de126").then(a.bind(null,"83a6"))},{name:"lab results",path:"/anc/lab_results/:patient_id",component:()=>a.e("chunk-2d21f489").then(a.bind(null,"d8ba"))},{name:"obstetric history",path:"/anc/obsteric/:patient_id",component:()=>a.e("chunk-2d0a4819").then(a.bind(null,"0773"))},{name:"current pregnancy",path:"/anc/current_pregnancy/:patient_id",component:()=>a.e("chunk-72632c0e").then(a.bind(null,"9841"))},{name:"anc treatment",path:"/anc/treatment/:patient_id",component:()=>a.e("chunk-6d4bfe7a").then(a.bind(null,"46d3"))}];function Lj(e,t,a,n,i,r){const s=Object(o["resolveComponent"])("report-data-table");return Object(o["openBlock"])(),Object(o["createBlock"])(s,{asyncRows:e.getRows,columns:e.columns,config:{tableCssTheme:"art-report-theme",skeletonTextRows:5,showIndex:!1}},null,8,["asyncRows","columns"])}class Mj extends d["e"]{constructor(){super()}static getStats(){return this.getJson(`programs/${this.getProgramID()}/reports/visits`,{name:"visits_report",start_date:this.getSessionDate()})}}var Hj=Object(o["defineComponent"])({components:{ReportDataTable:Ut["a"]},setup(){const e=[[D["a"].thTxt("Total with:"),D["a"].thTxt("Me"),D["a"].thTxt("Today"),D["a"].thTxt("This Year")]];async function t(){const e=await Mj.getStats(),t=[1,2,3,4,">5"];return t.map(t=>[D["a"].td(`${t} ${1===t?"visit":"visits"}`),D["a"].td(e.user[t]),D["a"].td(e.today[t]),D["a"].td(e.year[t])])}return{getRows:t,columns:e}}});const $j=x()(Hj,[["render",Lj]]);var Uj=$j,qj=a("9e49"),Gj=a("2989"),zj=a("afbc");async function Yj(e){await Object(j["a"])("Do you want switch to ART Application to proceed with PMTCT tasks?")?de["a"].switchAppWorkflow("ART",e.patientID,e.router,async()=>{const t=new Ze["a"](e.patientID,-1);await t.createEncounter(),await t.savePatientType("New patient")}):e.router.push("/patient/dashboard/"+e.patientID)}function Wj(e,t){return!!Array.isArray(e)&&e.includes(t)}const Kj=[{id:"print_session_lab_results",name:"Lab results (Print)",icon:"barcode.svg",action:async({patientID:e,visitDate:t})=>{const a=new qj["a"](e,-1);a.date=t,await a.printLabResults()}},{id:"print_session_social_history",name:"Patient history (Print)",icon:"barcode.svg",action:({patientID:e})=>{const t=new Gj["a"](e,-1);t.printSocialHistory()}}],Xj=[{id:"anc dispensing",name:"TTV VACCINATION",encounterTypeName:"DISPENSING",icon:"prescription/medication.png"},{id:"anc visit type",name:"ANC VISIT TYPE",icon:"registration.png"},{id:"surgical history",name:"SURGICAL HISTORY",icon:"surgical_history.png",disabled:e=>Wj(e.savedEncounters,"SURGICAL HISTORY")},{id:"medical history",name:"Medical History",icon:"medical_history.png",disabled:e=>Wj(e.savedEncounters,"MEDICAL HISTORY")},{id:"anc examination",name:"Examination",workflowID:"ANC examination",encounterTypeName:"ANC EXAMINATION",icon:"diagnosis.png"},{id:"social history",name:"Social History",icon:"social_history.png",disabled:e=>Wj(e.savedEncounters,"SOCIAL HISTORY")},{id:"lab results",name:"Lab Results",icon:"lab.png"},{id:"obstetric history",name:"Obstetric history",icon:"obstetric_history.png",disabled:e=>Wj(e.savedEncounters,"OBSTETRIC HISTORY")},{id:"current pregnancy",name:"Current Pregnancy",icon:"current_preg.png",disabled:e=>Wj(e.savedEncounters,"CURRENT PREGNANCY")},{id:"anc treatment",workflowID:"Give drugs",name:"anc treatment",encounterTypeName:"TREATMENT",icon:"dispensing.png"},{id:"art_followup",name:"art_followup",workflowID:"ARV Follow Up",icon:"pmtct.png"},{id:"vitals",name:"Vitals",icon:"vitals.png",action:e=>{zj["a"].push("/anc/encounters/vitals/"+e.patientID)},taskCompletionChecklist:["Weight"]},{id:"appointment",name:"Manage Appointments",encounterTypeName:"APPOINTMENT",workflowID:"Manage appointment",icon:"appointment.png"},{id:"hiv clinic registration",name:"Hiv clinic registration",workflowID:"HIV first visits",icon:"registration.png",action:e=>Yj(e),condition:()=>!1},{id:"hiv reception",name:"HIV reception",workflowID:"HIV reception visits",icon:"reception.png",action:e=>Yj(e),condition:()=>!1}];var Jj=a("f01e");const Qj=[{name:"MoH",icon:"login-logos/Malawi-Coat_of_arms_of_arms.png",defaultFilesIcon:"reports.png",files:[{name:"Cohort",pathUrl:"/anc/moh_report/CohortTemplate"},{name:"Monthly",pathUrl:"/anc/moh_report/MonthlyTemplate"}]},{name:"Clinic",icon:"reports.png",defaultFilesIcon:"reports.png",files:[{name:"Appointments",pathName:"anc_clinic_appointment"},{name:"Incomplete visits",pathUrl:"/anc/datacleaning?cleaning_tool="+Jj["a"].INCOMPLETE_VISITS}]},{name:"PEPFAR",icon:"login-logos/PEPFAR.png",defaultFilesIcon:"reports.png",files:[{name:"Disaggregated",pathName:"anc_pepfar_disaggregated"}]}],Zj={programID:12,applicationName:"ANC",applicationIcon:"anc.png",applicationDescription:"Antenatal Program",appRoutes:Fj,primaryPatientActivites:Xj,secondaryPatientActivites:Kj,programReports:Qj,homeOverviewComponent:Uj,init:async()=>await Object(pO["c"])(Xj),formatPatientProgramSummary(e){return[{label:"Date of last ANC visit",value:e.date_of_lnmp||"N/A"},{label:"Gestation:",value:e.gestation?e.gestation+" week(s)":"N/A"},{label:"ANC Visits",value:e.anc_visits||"N/A"},{label:"Current outcome",value:e.current_outcome||"N/A"}]},confirmationSummary(e,t){const a=e.getID(),n=e=>l["b"].toStandardHisDisplayFormat(e);return{"PATIENT IDENTIFIERS":()=>[{label:"NPID",value:e.getNationalID()},{label:"National ID",value:e.getMWNationalID()}],"PROGRAM INFO":async()=>{const e=await we["a"].getFirstValueDatetime(a,"appointment date")||"N/A",t=await V["a"].getProgramInformation(a);return[{label:"ANC visit",value:t.anc_visits||"N/A"},{label:"Next Appointment Date",value:n(e)},{label:"Gestation Age",value:t.gestation?t.gestation+" week(s)":"N/A"},{label:"Date of LMP",value:n(t.date_of_lnmp)},{label:"EDOD",value:t.edod?n(t.edod):"N/A"},{label:"Next task",value:(await eO["a"].getNextTaskParams(a)).name.toUpperCase()||"N/A"}]},OUTCOME:()=>[{label:"Current Outcome",value:t.outcome||"N/A"}],LABS:async()=>(await Ve["a"].getOrders(a)).map(e=>({label:e.tests.map(e=>e.name).join(" & "),value:l["b"].toStandardHisDisplayFormat(e.order_date)})),ALERTS:()=>[],GUARDIANS:async()=>{const e=await wa["a"].getGuardianDetails(a);return e?e.map(e=>({label:e.name,value:e.relationshipType})):[]}}},async onRegisterPatient(e){const t=new b["a"](e,5,-1);await t.createEncounter(),await t.saveValueCodedObs("Type of patient","New patient")},programPatientIdentifiers:{"National ID":{id:28,name:"National ID",isPrimary:!0,useForSearch:!0,prefix:()=>""}}};var e_=Zj;const t_=Object(o["withScopeId"])("data-v-87abacbc");Object(o["pushScopeId"])("data-v-87abacbc");const a_={class:"los-overview"},n_=Object(o["createVNode"])("h4",null,"Today's clients booked from HIV/ART program",-1);Object(o["popScopeId"])();const o_=t_((function(e,t,a,n,i,r){const s=Object(o["resolveComponent"])("his-basic-table"),c=Object(o["resolveComponent"])("ion-col"),l=Object(o["resolveComponent"])("ion-row"),d=Object(o["resolveComponent"])("ion-grid");return Object(o["openBlock"])(),Object(o["createBlock"])("div",a_,[Object(o["createVNode"])(d,{style:{height:"100%"}},{default:t_(()=>[Object(o["createVNode"])(l,null,{default:t_(()=>[Object(o["createVNode"])(c,{size:"6"},{default:t_(()=>[Object(o["createVNode"])(s,{columns:e.columns,rows:e.rows},null,8,["columns","rows"])]),_:1}),Object(o["createVNode"])(c,{size:"6",style:{"border-left":"5px solid black"}},{default:t_(()=>[n_,Object(o["createVNode"])(s,{columns:e.screenedColumns,rows:e.screenedRows},null,8,["columns","rows"])]),_:1})]),_:1})]),_:1})])}));var i_=a("a3a5");class r_ extends d["e"]{constructor(){super()}static async overviewStats(){const e=await this.dashboardStats(),t=[];for(const a in e)t.push([a,e[a]]);return t}static async screenedOverviewStats(){const e=await this.screenedStats(),t=[];for(const a in e){const n=e[a];let o=0;for(const e of n)1==e["screening_method_present"]&&o++;t.push([a,n.length,o])}return t}static dashboardStats(){return super.getJson("dashboard_stats",{date:super.getSessionDate(),program_id:super.getProgramID()})}static screenedStats(){return super.getJson("screened_for_cxca",{date:super.getSessionDate(),program_id:super.getProgramID(),report_name:"BOOKED CLIENTS FROM ART",start_date:super.getSessionDate(),end_date:super.getSessionDate()})}}var s_=Object(o["defineComponent"])({components:{HisBasicTable:i_["a"]},data:()=>({rows:[],columns:["Today's screening method","Count"],screenedColumns:["Age group","Booked","Screened"],screenedRows:[]}),async created(){await this.setRows()},methods:{async setRows(){const e=await r_.overviewStats();this.rows=[...e];const t=await r_.screenedOverviewStats();this.screenedRows=[...t]}}});a("8081");const c_=x()(s_,[["render",o_],["__scopeId","data-v-87abacbc"]]);var l_=c_;const d_=[{id:"cxca test",name:"cxca test",workflowID:"cxca test",icon:"via-test.png"},{id:"cxca screening result",name:"cxca screening result",workflowID:"cxca screening result",icon:"first-aid-kit.png"},{id:"cxca treatment",name:"cxca treatment",workflowID:"cxca treatment",icon:"cancer.png"},{id:"cxca referral feedback",name:"cxca referral feedback",workflowID:"cxca referral feedback",icon:"referral.png"},{id:"appointment",name:"Manage Appointments",workflowID:"Manage Appointments",encounterTypeName:"appointment",icon:"appointment.png"}];var u_=[{name:"cxca test",path:"/cxca/encounters/clinical_assessment/:patient_id",component:()=>a.e("chunk-2d226508").then(a.bind(null,"e7aa"))},{name:"cxca treatment",path:"/cxca/encounters/cancer_treatment/:patient_id",component:()=>a.e("chunk-2d0a4381").then(a.bind(null,"0605"))},{name:"cxca reception",path:"/cxca/encounters/cancer_reception/:patient_id",component:()=>a.e("chunk-2d21a0bf").then(a.bind(null,"ba9c"))},{name:"cxca referral feedback",path:"/cxca/encounters/cancer_feedback/:patient_id",component:()=>a.e("chunk-2d0a36f9").then(a.bind(null,"01bd"))},{name:"cxca screening result",path:"/cxca/encounters/cancer_screening_result/:patient_id",component:()=>a.e("chunk-2d21e7b5").then(a.bind(null,"d66c"))},{name:"cxca result",path:"/cxca/encounters/cancer_result/:patient_id",component:()=>a.e("chunk-2d0ab079").then(a.bind(null,"1411"))},{path:"/cxca/report/pepfar",component:lg,children:[{name:"cc_basic_results",path:"cc_basic_results",component:()=>a.e("chunk-a1cd6b92").then(a.bind(null,"601a"))},{name:"cc_all_questions",path:"cc_all_questions",component:()=>a.e("chunk-e1b2290e").then(a.bind(null,"f240"))},{name:"cc_type_of_screen",path:"cc_type_of_screen",component:()=>a.e("chunk-56a17156").then(a.bind(null,"ac7a"))},{name:"cc_screen_result",path:"cc_screen_result",component:()=>a.e("chunk-b5456e0e").then(a.bind(null,"3c35f"))},{name:"cc_type_of_treatment",path:"cc_type_of_treatment",component:()=>a.e("chunk-08704c19").then(a.bind(null,"0437"))}]},{path:"/cxca/report/clinic",component:lg,children:[{name:"cc_visit_reasons",path:"cc_visit_reasons",component:()=>a.e("chunk-453836da").then(a.bind(null,"9e35"))},{name:"cc_booked_clients",path:"cc_booked_clients",component:()=>a.e("chunk-c7215964").then(a.bind(null,"c930"))}]}];const p_=[{name:"MoH",icon:"login-logos/Malawi-Coat_of_arms_of_arms.png",defaultFilesIcon:"reports.png",files:[{name:"MoH report",pathName:"screened_for_cxca"}]},{name:"Clinic",icon:"reports.png",defaultFilesIcon:"reports.png",files:[{name:"Visit reason",pathName:"cc_visit_reasons"},{name:"Booked clients",pathName:"cc_booked_clients"}]},{name:"PEPFAR",icon:"login-logos/PEPFAR.png",defaultFilesIcon:"reports.png",files:[{name:"CC All Questions",pathName:"cc_all_questions"},{name:"CC Basic Results",pathName:"cc_basic_results"},{name:"CC Type of Screen",pathName:"cc_type_of_screen"},{name:"CC Screen Result",pathName:"cc_screen_result"},{name:"CC Type of Treatment",pathName:"cc_type_of_treatment"}]}];async function h_(e){const t=new $t["a"](e);await t.enrollProgram();const a=new b["a"](e,5);await a.createEncounter(),await a.saveValueCodedObs("Type of patient","New Patient")}const b_={programID:24,applicationName:"CxCa",applicationIcon:"ccm.png",applicationDescription:"Cervical cancer screening module",appRoutes:u_,primaryPatientActivites:d_,secondaryPatientActivites:[],globalPropertySettings:[],onRegisterPatient:h_,homeOverviewComponent:l_,confirmationSummary:(e,t)=>({"PATIENT IDENTIFIERS":()=>[{label:"NPID",value:e.getNationalID()}],OUTCOME:()=>[{label:"Current Outcome",value:t.outcome||"N/A"}],"PROGRAM INFORMATION":async()=>{const t=e.getID(),a=[],n=await eO["a"].getNextTaskParams(t);a.push({label:"Next Task",value:n.name?""+n.name:"NONE"});const o=await we["a"].getAll(t,"appointment date"),i=o?l["b"].toStandardHisDisplayFormat(o[0].value_datetime):"Not Available";return a.push({label:"Next Appointment",value:i}),a}}),programReports:p_};var m_=b_;const g_=Object(o["withScopeId"])("data-v-14f2eb30");Object(o["pushScopeId"])("data-v-14f2eb30");const f_={class:"overview"};Object(o["popScopeId"])();const O_=g_((function(e,t,a,n,i,r){const s=Object(o["resolveComponent"])("report-table");return Object(o["openBlock"])(),Object(o["createBlock"])("div",f_,[Object(o["createVNode"])(s,{rows:e.rows,columns:e.columns,config:{tableCssTheme:"art-report-theme",skeletonTextRows:5,showIndex:!1}},null,8,["rows","columns"])])}));var j_=a("866d"),__=Object(o["defineComponent"])({components:{ReportTable:Ut["a"]},setup(){const e=[[D["a"].thTxt("Task"),D["a"].thTxt("Me"),D["a"].thTxt("Today")]],t=Object(o["ref"])([]);return Object(o["onMounted"])(()=>{const e=j_["a"].getSessionDate(),a=new j_["a"]("DASHBOARD STATISTICS",e,e),n=a.requestReport();"object"===typeof n&&n.then&&n.then(e=>{e.forEach(e=>{t.value.push([D["a"].td(e.name),D["a"].td(e.me),D["a"].td(e.clinic)])})}).catch(e=>Object(j["c"])(""+e))}),{columns:e,rows:t}}});a("e63c");const v_=x()(__,[["render",O_],["__scopeId","data-v-14f2eb30"]]);var y_=v_;const w_={programID:28,applicationName:"RADIOLOGY",applicationIcon:"radiology_types.png",applicationDescription:"Radiology service",homeOverviewComponent:y_,configDefaultPatientDashboardCards:{alertsEnabled:!1,medicationsEnabled:!1,labEnabled:!1},appRoutes:[{name:"Examination",path:"/radiology/examination/:patient_id",component:()=>a.e("chunk-2d20ebf7").then(a.bind(null,"b14f"))},{name:"Radiology Appointment",path:"/radiology/appointment",component:()=>a.e("chunk-2d20957d").then(a.bind(null,"a93b"))},{name:"daily radiology report",path:"/radiology/report/daily",component:()=>a.e("chunk-2d2089fc").then(a.bind(null,"a61b"))},{name:"revenue radiology report",path:"/radiology/report/revenue",component:()=>a.e("chunk-2d0d6ec8").then(a.bind(null,"752f"))},{name:"radiology referral report",path:"/radiology/report/referral",component:()=>a.e("chunk-2d0c77ae").then(a.bind(null,"5195"))}],programReports:[{name:"Daily Report",icon:"reports.png",defaultFilesIcon:"reports.png",files:[{name:"Daily Report",pathUrl:"/radiology/report/daily"}]},{name:"Revenue Collection Report",icon:"reports.png",defaultFilesIcon:"reports.png",files:[{name:"Revenue Collection",pathUrl:"/radiology/report/revenue"}]},{name:"Referral Report",icon:"reports.png",defaultFilesIcon:"reports.png",files:[{name:"Referral Report",pathUrl:"/radiology/report/referral"}]}],primaryPatientActivites:[{id:"Examination",name:"Examination",icon:"radiology_types.png"},{id:"Radiology Appointment",name:"Radiology Appointment",icon:"appointment.png"}],secondaryPatientActivites:[]};var N_=w_;const C_=Object(o["withScopeId"])("data-v-1e3de004");Object(o["pushScopeId"])("data-v-1e3de004");const V_={class:"overview"};Object(o["popScopeId"])();const D_=C_((function(e,t,a,n,i,r){const s=Object(o["resolveComponent"])("report-table");return Object(o["openBlock"])(),Object(o["createBlock"])("div",V_,[Object(o["createVNode"])(s,{rows:e.rows,columns:e.columns,config:{tableCssTheme:"art-report-theme",skeletonTextRows:5,showIndex:!1}},null,8,["rows","columns"])])}));class k_ extends d["e"]{constructor(){super()}requestReport(){return d["e"].getJson("dashboard_stats",{program_id:d["e"].getProgramID(),date:d["e"].getSessionDate()})}}var T_=Object(o["defineComponent"])({components:{ReportTable:Ut["a"]},setup(){const e=[[D["a"].thTxt("Task"),D["a"].thTxt("Me"),D["a"].thTxt("Today")]],t=Object(o["ref"])([]);return Object(o["onMounted"])(()=>{const e=new k_,a=e.requestReport();"object"===typeof a&&a.then&&a.then(e=>{["Newly Registered Patients","Returning Patients"].forEach(a=>{const n=e[a];t.value.push([D["a"].td(a),D["a"].td(n.me),D["a"].td(n.total)]),delete e[a]}),Object.keys(e).forEach(a=>{t.value.push([D["a"].td(a),D["a"].td(e[a].me),D["a"].td(e[a].total)])})}).catch(e=>Object(j["c"])(""+e))}),{columns:e,rows:t}}});a("e109");const I_=x()(T_,[["render",D_],["__scopeId","data-v-1e3de004"]]);var x_=I_;const S_=[{id:"Outpatient Reception",name:"Outpatient Reception",icon:"reception.png"},{id:"Patient Services",name:"Patient Services",icon:"attributes.png"}],P_=[];var A_=[{name:"Outpatient Reception",path:"/registration/encounters/outpatient_reception/:patient_id",component:()=>a.e("chunk-2d210591").then(a.bind(null,"b805"))},{name:"Patient Services",path:"/registration/encounters/patient_services/:patient_id",component:()=>a.e("chunk-2d0c4c38").then(a.bind(null,"3be8"))}];async function E_(e){const t=new $t["a"](e);await t.enrollProgram();const a=new b["a"](e,5);return await a.createEncounter(),await a.saveValueCodedObs("Type of patient","New Patient"),zj["a"].push("/registration/encounters/outpatient_reception/"+e),!0}async function B_(e,t){const a=await Zt["a"].findByID(t),n=new Zt["a"](a);return[{label:"Malawi National ID",value:n.getMWNationalID()}]}function R_(e,t){return{"PATIENT IDENTIFIERS":()=>[{label:"NPID",value:e.getNationalID()}]}}const F_={programID:29,applicationName:"Registration",applicationIcon:"active-files.png",applicationDescription:"Patient Registration Program",appRoutes:A_,programReports:P_,primaryPatientActivites:S_,secondaryPatientActivites:S_,homeOverviewComponent:x_,onRegisterPatient:E_,formatPatientProgramSummary:B_,confirmationSummary:R_,programPatientIdentifiers:{"National ID":{id:28,name:"National ID",isPrimary:!0,useForSearch:!0,prefix:()=>"",validation:e=>s["a"].isMWNationalID(e)}}};var L_=F_;t["a"]=[wO,XO,Rj,e_,m_,N_,L_]},fa73:function(e,t,a){"use strict";a.d(t,"a",(function(){return l}));a("caad");var n=a("1c74"),o=a("2ef0"),i=a("4db7"),r=a("9283"),s=a("23e6"),c=a("cc74");class l extends n["e"]{constructor(){super(),this.patientID=-1,this.enabled=!1}static getRemainingNpids(){return n["e"].getJson("dde/patients/remaining_npids",{program_id:n["e"].getProgramID()})}setPatientID(e){this.patientID=e}async loadDDEStatus(){this.enabled=await c["b"].ddeEnabled()}isEnabled(){return this.enabled}postMerge(e){const[t,...a]=e.map(e=>({patient_id:e.patientID,doc_id:e.docID||""}));return this.patientID=t.patient_id,this.mergePatients({primary:t,secondary:a,program_id:n["e"].getProgramID()})}checkPotentialDuplicates(e){return n["e"].getJson("dde/patients/match_by_demographics",{...e,program_id:n["e"].getProgramID()})}hasPatientDoubles(e){return e.map(t=>e.map(e=>e.patient_id).includes(t.patient_id)).some(Boolean)}async searchDemographics(e){const t=await n["e"].getJson("dde/patients/find_by_name_and_gender",{program_id:n["e"].getProgramID(),...e}),a=(e,t)=>{const a=new s["a"](e);return{patient_type:t,doc_id:a.getPatientIdentifier(27),...e}};if(t){const e=t.locals.map(e=>a(e,"Local")),n=t.remotes.map(e=>a(e,"Remote"));return e.concat(n)}return[]}async searchNpid(e){const t=await this.findNpid(e);if(t){const e=t.locals.concat(t.remotes);if(Object(o["isEmpty"])(e))return[];const a=this.hasPatientDoubles(t.locals),n=this.hasPatientDoubles(t.remotes);return this.patientID=e[0].patient_id,a||n?e:e[0]}return[]}findNpid(e){return n["e"].getJson("dde/patients/find_by_npid",{npid:e,program_id:n["e"].getProgramID()})}findVoidedIdentifier(e){return n["e"].getJson("search/patients/by_identifier",{type_id:3,voided:!0,identifier:e})}shouldCreateNpid(e){return!Object(o["isEmpty"])(e)&&e.npid}formatDiffValuesByType(e,t){const a={};for(const n in e)a[n]=e[t];return a}diffsToTurple(e){const t=[],a=(e,t)=>"string"===typeof t&&e.match(/date/i)?r["b"].toStandardHisDisplayFormat(t):t;for(const n in e){const o=e[n],i=n.split("_").map(e=>e.charAt(0).toUpperCase()+e.slice(1)).join(" ");t.push([i,a(n,o.local),a(n,o.remote)])}return t}shouldUpdateDiffs(e){return!Object(o["isEmpty"])(e)}mergePatients(e){return n["e"].postJson("dde/patients/merge",e)}reassignNpid(e,t=this.patientID){return n["e"].postJson("dde/patients/reassign_npid",{program_id:n["e"].getProgramID(),patient_id:t,doc_id:e})}createNPID(e){return n["e"].postJson("patient_identifiers",{identifier:e,patient_id:this.patientID,identifier_type:3})}printNpid(e=this.patientID){return new i["a"](e).printNidLbl()}getLocalAndRemoteDiffs(){return n["e"].getJson("dde/patients/diff",{patient_id:this.patientID,program_id:n["e"].getProgramID()})}updateLocalDifferences(e){return n["e"].putJson("people/"+this.patientID,{program_id:n["e"].getProgramID(),...e})}refreshDemographics(){return n["e"].getJson("dde/patients/refresh",{patient_id:this.patientID,program_id:n["e"].getProgramID()})}}},fa94:function(e,t,a){"use strict";a.d(t,"a",(function(){return o}));var n=a("1c74");class o extends n["e"]{constructor(){super(),this.startDate="",this.endDate="",this.date=n["e"].getSessionDate(),this.programID=n["e"].getProgramID()}setStartDate(e){this.startDate=e}setEndDate(e){this.endDate=e}buildRequestParams(e){const t={};return this.startDate&&(t["start_date"]=this.startDate),this.endDate&&(t["end_date"]=this.endDate),this.date&&(t["date"]=this.date),this.programID&&(t["program_id"]=this.programID),{...t,...e}}}},fb7c:function(e,t,a){"use strict";a("d9d9")},fde0:function(e,t,a){"use strict";a.d(t,"a",(function(){return o}));var n=a("cc6f");class o extends n["a"]{constructor(e,t){super(e,84,t)}}},fe42:function(e,t,a){"use strict";a("4366")},fedf:function(e,t,a){"use strict";a("d403")},ffe1:function(e,t,a){}});
//# sourceMappingURL=app.faf764f5.js.map