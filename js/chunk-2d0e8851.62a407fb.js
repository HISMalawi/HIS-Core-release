(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d0e8851"],{"8a2d":function(t,e,a){"use strict";a.r(e);var n=a("7a23");function i(t,e,a,i,o,r){const d=Object(n["resolveComponent"])("report-template"),s=Object(n["resolveComponent"])("ion-page");return Object(n["openBlock"])(),Object(n["createBlock"])(s,null,{default:Object(n["withCtx"])(()=>[Object(n["createVNode"])(d,{title:t.title,period:t.period,rows:t.rows,fields:t.fields,columns:t.columns,showFilters:!0,onReportConfiguration:t.onPeriod},null,8,["title","period","rows","fields","columns","onReportConfiguration"])]),_:1})}var o=a("f01e"),r=a("44e3"),d=a("4ba2"),s=a("9ceb"),l=a("2706"),c=a("d95e"),h=a("8a30"),m=a("1c74"),u=a("b446"),p=a("9283"),T=a("2ef0"),_=Object(n["defineComponent"])({mixins:[r["a"]],components:{ReportTemplate:d["a"],IonPage:h["D"]},data:()=>({title:"Data cleaning report",rows:[],columns:[],defaultIndicator:{}}),created(){this.fields=[{id:"indicator",helpText:"Select indicator",type:c["b"].TT_SELECT,requireNext:!1,condition:()=>!this.defaultIndicator,defaultOutput:()=>this.defaultIndicator,validation:t=>l["a"].required(t),options:()=>this.getIndicatorOptions()},...Object(u["b"])({id:"start_date",helpText:"Start",required:!0,minDate:()=>"2000-01-01",maxDate:()=>m["e"].getSessionDate(),estimation:{allowUnknown:!1},computeValue:t=>t}),...Object(u["b"])({id:"end_date",helpText:"End",required:!0,minDate:(t,e)=>e.start_date,maxDate:()=>m["e"].getSessionDate(),estimation:{allowUnknown:!1},computeValue:t=>t})],this.defaultIndicator=Object(T["find"])(this.getIndicatorOptions(),{value:this.$route.query["cleaning_tool"]})||null},methods:{async onPeriod(t,e){const a=t=>p["b"].toStandardHisDisplayFormat(t);this.rows=[],this.title=t.indicator.label;const n=t.indicator;this.columns=n.other.columns,this.report=new o["b"],this.report.setStartDate(e.start_date),this.report.setEndDate(e.end_date),this.period=`${a(e.start_date)} - ${a(e.end_date)}`;const i=await this.report.getDataToolReport(n.value);i&&(this.rows=await Promise.all(i.map(t=>n.other.formatRow(t))))},showPatientBtn(t){return s["a"].tdBtn("View",()=>this.$router.push("/patient/dashboard/"+t))},getIndicatorOptions(){return[{label:"Males with ANC Encounters",value:o["a"].MALES_WITH_ANC_ENCOUNTERS,other:{columns:[[s["a"].thTxt("National ID"),s["a"].thTxt("First name"),s["a"].thTxt("Last name"),s["a"].thTxt("Total Encounters"),s["a"].thTxt("Action")]],formatRow:t=>[s["a"].td(t.identifier),s["a"].td(t.given_name),s["a"].td(t.family_name),s["a"].td(t.total_encounters),this.showPatientBtn(t.patient_id)]}},{label:"Encounters after death",value:o["a"].ENCOUNTERS_AFTER_DEATH,other:{columns:[[s["a"].thTxt("National ID"),s["a"].thTxt("First name"),s["a"].thTxt("Last name"),s["a"].thTxt("Date of death"),s["a"].thTxt("Recent encounter date"),s["a"].thTxt("Count"),s["a"].thTxt("Action")]],formatRow:t=>[s["a"].td(t.identifier),s["a"].td(t.given_name),s["a"].td(t.family_name),s["a"].tdDate(t.patient_died_date),s["a"].tdDate(t.minimum_encounter_datetime),s["a"].td(t.total_encounters),this.showPatientBtn(t.patient_id)]}},{label:"Incomplete visits",value:o["a"].INCOMPLETE_VISITS,other:{columns:[[s["a"].thTxt("National ID"),s["a"].thTxt("Name"),s["a"].thTxt("Visit date"),s["a"].thTxt("Incomplete count"),s["a"].thTxt("Action")]],formatRow:t=>[s["a"].td(t.n_id),s["a"].td(t.name),s["a"].td(t.visit_date),s["a"].td(t.visit_no),this.showPatientBtn(t.patient_id)]}},{label:"Duplicate encounters",value:o["a"].DUPLICATE_ENCOUNTERS,other:{columns:[[s["a"].thTxt("National ID"),s["a"].thTxt("Given name"),s["a"].thTxt("Family name"),s["a"].thTxt("Name"),s["a"].thTxt("Total"),s["a"].thTxt("Action")]],formatRow:t=>[s["a"].td(t.identifier),s["a"].td(t.given_name),s["a"].td(t.family_name),s["a"].td(t.name),s["a"].td(t.total),this.showPatientBtn(t.patient_id)]}},{label:"Missing HIV Status",value:o["a"].MISSING_HIV_STATUS,other:{columns:[[s["a"].thTxt("National ID"),s["a"].thTxt("Given name"),s["a"].thTxt("Family name"),s["a"].thTxt("Action")]],formatRow:t=>[s["a"].td(t.identifier),s["a"].td(t.given_name),s["a"].td(t.family_name),this.showPatientBtn(t.patient_id)]}}]}}}),f=a("6b0d"),w=a.n(f);const x=w()(_,[["render",i]]);e["default"]=x}}]);
//# sourceMappingURL=chunk-2d0e8851.62a407fb.js.map