(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d2219e6"],{cab4:function(t,e,a){"use strict";a.r(e);var o=a("7a23");function r(t,e,a,r,s,d){const i=Object(o["resolveComponent"])("report-template"),n=Object(o["resolveComponent"])("ion-page");return Object(o["openBlock"])(),Object(o["createBlock"])(n,null,{default:Object(o["withCtx"])(()=>[Object(o["createVNode"])(i,{title:t.title,period:t.period,rows:t.rows,fields:t.fields,columns:t.columns,config:{showIndex:!0},reportPrefix:"PEPFAR",onReportConfiguration:t.onPeriod},null,8,["title","period","rows","fields","columns","onReportConfiguration"])]),_:1})}a("13d5"),a("14d9");var s=a("44e3"),d=a("9a5e"),i=a("4ba2"),n=a("9ceb"),l=a("d867"),h=a("ad8d"),p=a("2ef0"),c=Object(o["defineComponent"])({mixins:[s["a"]],components:{ReportTemplate:i["a"],IonPage:l["D"]},data:()=>({title:"PEPFAR Tx ML Report",rows:[],drillData:{},columns:[[n["a"].thTxt("Age group"),n["a"].thTxt("Gender"),n["a"].thTxt("Died"),n["a"].thTxt("IIT <3 mo"),n["a"].thTxt("IIT 3-5 mo"),n["a"].thTxt("IIT 6+ mo"),n["a"].thTxt("Transferred out"),n["a"].thTxt("Refused (Stopped)")]],indexLabel:["Died","IIT <3 mo","IIT 3-5 mo","IIT 6+ mo","Tranferred out","Refused (Stopped)"],cohort:{}}),created(){this.fields=this.getDateDurationFields()},methods:{async onPeriod(t,e){this.rows=[],this.report=new d["a"],this.report.setOccupation(e.occupation),this.report.setStartDate(e.start_date),this.report.setEndDate(e.end_date),this.period=this.report.getDateIntervalPeriod(),this.cohort=await this.report.getTxMlReport(),this.setRows("F"),this.setRows("M"),this.setTotalMaleRow(),this.setMaternalRows()},drilldown(t,e){const a=[[n["a"].thTxt("ARV#"),n["a"].thTxt("DOB"),n["a"].thTxt("Dispensed"),n["a"].thTxt("ARVs")]],o=async()=>{if(e in this.drillData)return this.drillData[e];const a=await this.report.getTxMMDClientLevelData(t);if(!a)return[];const o=this.report.remapTxClientLevelData(a).map(t=>{const e=t.drugs.map(t=>{const e=`\n                                <table style='width: 100%;'> \n                                    <td style='width: 65%;'>${t.name}</td>\n                                    <td style='width: 30%;'>(${t.quantity}, ${t.dose} a day)</td>\n                                </table>`,a=`${t.name} (Quantity: ${t.quantity} Dose: ${t.dose})`;return{tableView:e,dataView:a}});return[n["a"].td(t.id||"N/A"),n["a"].tdDate(t.dob),n["a"].tdDate(t.dispenseDate),n["a"].td(e.map(t=>t.tableView).join("<p/>"),{value:e.map(t=>t.dataView).join("|")})]});return this.drillData[e]=o,o};return t.length<=0?n["a"].td(0):n["a"].tdLink(t.length,()=>this.drilldownAsyncRows(e,a,o))},aggregate(t,e){return Object.values(this.cohort).reduce((a,o)=>o[t]?[...o[t][this.indexLabel.indexOf(e)],...a]:a,[])},setTotalMaleRow(){const t=t=>this.drilldown(this.aggregate("M",t),t);this.rows.push([n["a"].td("All"),n["a"].td("Male"),t("Died"),t("IIT <3 mo"),t("IIT 3-5 mo"),t("IIT 6+ mo"),t("Tranferred out"),t("Refused (Stopped)")])},async setMaternalRows(){const t=this.indexLabel.reduce((t,e)=>[...t,{indicator:e,data:this.aggregate("F",e)}],[]),e=await this.report.getMaternalStatus(Object(p["uniq"])(t.reduce((t,e)=>[...t,...e.data],[]).map(t=>t))),a=e=>t.reduce((t,a)=>a.indicator===e?[...t,...a.data]:t,[]),o=(t,o)=>this.drilldown(a(o).filter(a=>e[t].includes(a)),`All ${o} Female Pregnant`),r=e.FBf.concat(e.FP),s=t=>this.drilldown(a(t).filter(t=>!r.includes(t)),`All ${t} Female not pregnant`);this.rows.push([n["a"].td("All"),n["a"].td("FP"),o("FP","Died"),o("FP","IIT <3 mo"),o("FP","IIT 3-5 mo"),o("FP","IIT 6+ mo"),o("FP","Tranferred out"),o("FP","Refused (Stopped)")]),this.rows.push([n["a"].td("All"),n["a"].td("FNP"),s("Died"),s("IIT <3 mo"),s("IIT 3-5 mo"),s("IIT 6+ mo"),s("Tranferred out"),s("Refused (Stopped)")]),this.rows.push([n["a"].td("All"),n["a"].td("FBF"),o("FBf","Died"),o("FBf","IIT <3 mo"),o("FBf","IIT 3-5 mo"),o("FBf","IIT 6+ mo"),o("FBf","Tranferred out"),o("FBf","Refused (Stopped)")])},setRows(t){for(const a in h["a"]){const o=h["a"][a],r=this.formatGender(t);try{const e=this.cohort[o][t],a=`${r}s ${o}`,s=e.map((t,e)=>this.drilldown(t,`${a} ${this.indexLabel[e]}`));this.rows.push([n["a"].td(o),n["a"].td(r),...s])}catch(e){this.rows.push([n["a"].td(o),n["a"].td(r),n["a"].td(0),n["a"].td(0),n["a"].td(0),n["a"].td(0),n["a"].td(0),n["a"].td(0)])}}}}}),u=a("6b0d"),w=a.n(u);const T=w()(c,[["render",r]]);e["default"]=T}}]);
//# sourceMappingURL=chunk-2d2219e6.fdb6aea3.js.map