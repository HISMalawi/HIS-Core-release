(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2326ca60"],{2808:function(e,t,o){"use strict";o.r(t);var a=o("7a23");function r(e,t,o,r,n,l){const c=Object(a["resolveComponent"])("hts-template");return Object(a["openBlock"])(),Object(a["createBlock"])(c,{params:e.params},null,8,["params"])}o("14d9"),o("13d5");var n=o("7dcf"),l=o("d20e"),c=o("9ceb"),i=o("23e6"),s=o("afbc"),p=o("d867"),d=Object(a["defineComponent"])({components:{HtsTemplate:n["a"]},setup(){const e=new l["a"]("HTS MONTHLY ACTIVITY LOG"),t={logo:"reports.png",title:"HTS MONTHLY ACTIVITY LOG",prefix:"Clinic",columns:[[{label:"Provider ID",value:e=>e.provider_code||"N/A"},{label:"Username",value:e=>e.username},{label:"HIV Rapid",columnType:"drilldown",value:e=>e.hiv_status},{label:"Syphilis Rapid",columnType:"drilldown",value:e=>e.syphilis_status},{label:"HepB Rapid",columnType:"drilldown",value:e=>e.hepb_status},{label:"DBS EID",value:e=>e.dbs_eid||"N/A"},{label:"DBS VL",value:e=>e.dbs_vl||"N/A"},{label:"DBS for inconclusives",value:e=>e.dbs_for_inconclusives||"N/A"},{label:"Self-Tests distributed",columnType:"customDrillDown",drillParams:(e,t)=>({title:"Self tests distributed",columns:[[c["a"].thTxt("National ID"),c["a"].thTxt("First name"),c["a"].thTxt("Last name"),c["a"].thTxt("Birthdate"),c["a"].thTxt("Kits"),c["a"].thTxt("Action")]],data:e.self_test_kits,generator:async e=>{const o=[];for(const r of e){const e=r.person_id+"_kits_given";if(t.drill[e])o.push(t.drill[e]);else try{const a=new i["a"](await i["a"].findByID(r.person_id));t.drill[e]=[c["a"].td(a.getNationalID()),c["a"].td(a.getGivenName()),c["a"].td(a.getFamilyName()),c["a"].tdDate(""+a.getBirthdate()),c["a"].td(r.self_kits),c["a"].tdBtn("Show",()=>{s["a"].push({path:"/patient/dashboard/"+e}),p["ab"].dismiss({})})],o.push(t.drill[e])}catch(a){console.error(a)}}return o}}),value:e=>e.self_test_kits,staticValue:e=>e.self_test_kits.reduce((e,t)=>e+t.self_kits,0)},{label:"Recency",columnType:"drilldown",value:e=>e.recency}]],hasPeriodSelection:!0,data:async(t,o,a)=>(e.startDate=a.start_date,e.endDate=a.end_date,e.requestReport())};return{params:t}}}),u=o("6b0d"),b=o.n(u);const m=b()(d,[["render",r]]);t["default"]=m},"7dcf":function(e,t,o){"use strict";var a=o("7a23");function r(e,t,o,r,n,l){const c=Object(a["resolveComponent"])("report-table"),i=Object(a["resolveComponent"])("report-layout"),s=Object(a["resolveComponent"])("ion-page");return Object(a["openBlock"])(),Object(a["createBlock"])(s,null,{default:Object(a["withCtx"])(()=>[Object(a["createVNode"])(i,{logo:e.logo,title:e.title,period:e.period,toCSV:e.toCSV,toPDF:e.toPDF,dateGenerated:e.dateGenerated,refreshReport:e.refresh,configure:e.configureReport},{default:Object(a["withCtx"])(()=>[Object(a["createVNode"])(c,{rows:e.rows,columns:e.columns,config:{tableCssTheme:"art-report-theme"},onOnActiveColumns:t[0]||(t[0]=t=>e.reportData.other.activeColumns=t),onOnActiveRows:t[1]||(t[1]=t=>e.reportData.other.activeRows=t)},null,8,["rows","columns"])]),_:1},8,["logo","title","period","toCSV","toPDF","dateGenerated","refreshReport","configure"])]),_:1})}o("14d9");var n=o("954d"),l=o("d867"),c=o("0882"),i=o("2ef0"),s=o("9ceb"),p=o("ba82"),d=o("80e3"),u=Object(a["defineComponent"])({components:{IonPage:l["D"],ReportTable:d["a"],ReportLayout:n["a"]},props:{params:{type:Object,required:!0}},setup(e){const t=Object(c["a"])(e.params.title);function o(){t.setReportPeriod({isPeriodSelection:e.params.hasPeriodSelection||!1,isMonthlySelection:e.params.hasMonthlySelection||!1,minDate:e.params.minDate,maxDate:e.params.maxDate,prefix:e.params.prefix||"",initialSort:e.params.initialSort,generate:(o,a,r)=>{const n=e.params.data(o,a,r);return"function"===typeof e.params.period&&(t.reportData.period=e.params.period()),n}})}return Object(a["onMounted"])(()=>{Object(i["isEmpty"])(t.reportData.data)&&("function"===typeof e.params.prePopulate&&(t.reportData.prePopulateData=e.params.prePopulate()),o(),t.reportData.drillDownLabelPattern=e.params.drillDownLabelPattern,t.reportData.intermediateColumns=e.params.columns,t.reportData.other={activeColumns:[],activeRows:[]})}),Object(a["watch"])(()=>t.reportData.intermediateColumns,e=>{t.reportData.columns=[],e.forEach(e=>{const o=[];e.forEach(e=>{o.push(s["a"].thTxt(e.label,{value:e.exportLabel?e.exportLabel(e.label):void 0,colspan:e.colSpan,exportable:"boolean"!==typeof e.exportable||e.exportable}))}),!Object(i["isEmpty"])(o)&&t.reportData.columns.push(o)})},{deep:!0}),Object(a["watch"])(()=>t.reportData.data,e=>{t.reportData.rows=[],e.forEach(e=>{const o=[];t.reportData.intermediateColumns.forEach(a=>{a.forEach(a=>{let r={};const n=a.columnTypeConfig||{};if("function"==typeof a.value){switch(""+(null===a||void 0===a?void 0:a.columnType)){case"text":r=s["a"].td(a.value(e),n);break;case"date":r=s["a"].tdDate(a.value(e),n);break;case"drilldown":r=t.drill(a.drillDownLabelPattern?a.drillDownLabelPattern(a.label,e):t.reportData.drillDownLabelPattern?t.reportData.drillDownLabelPattern(a.label,e):a.label,a.value(e)||[]);break;case"customDrillDown":r="function"===typeof a.drillParams?t.drillCustom(a.value(e),{...a.drillParams(e,t.reportData)},a.staticValue?a.staticValue(e):void 0):s["a"].td("__MISSING_CUSTOM_DRILL_DOWN__");break;default:r=s["a"].td(a.value(e),n);break}o.push(r)}})}),Object(i["isEmpty"])(o)||t.reportData.rows.push(o)})},{deep:!0}),{configureReport:o,logo:e.params.logo,reportData:t.reportData,rows:t.rows,columns:t.columns,title:t.title,period:t.period,dateGenerated:t.dateGenerated,refresh:t.updateReportData,toPDF:()=>{const{columns:e,rows:o}=Object(s["b"])(t.reportData.other.activeColumns,t.reportData.other.activeRows);Object(p["d"])(e,o,t.reportDescription())},toCSV:()=>{const{columns:e,rows:o}=Object(s["b"])(t.reportData.other.activeColumns,t.reportData.other.activeRows);Object(p["b"])(e,t.appendReportStamp(o),t.reportDescription())}}}}),b=o("6b0d"),m=o.n(b);const O=m()(u,[["render",r]]);t["a"]=O},"822e":function(e,t,o){},"954d":function(e,t,o){"use strict";var a=o("7a23");const r={class:"header-text-list"},n={key:0},l={id:"report-content"};function c(e,t,o,c,i,s){const p=Object(a["resolveComponent"])("ion-img"),d=Object(a["resolveComponent"])("ion-thumbnail"),u=Object(a["resolveComponent"])("ion-label"),b=Object(a["resolveComponent"])("ion-item"),m=Object(a["resolveComponent"])("ion-toolbar"),O=Object(a["resolveComponent"])("ion-header"),f=Object(a["resolveComponent"])("ion-content"),j=Object(a["resolveComponent"])("ion-chip"),h=Object(a["resolveComponent"])("ion-footer"),D=Object(a["resolveComponent"])("his-footer"),v=Object(a["resolveComponent"])("ion-page");return Object(a["openBlock"])(),Object(a["createBlock"])(v,null,{default:Object(a["withCtx"])(()=>[Object(a["createVNode"])(O,null,{default:Object(a["withCtx"])(()=>[Object(a["createVNode"])(m,null,{default:Object(a["withCtx"])(()=>[Object(a["createVNode"])(b,null,{default:Object(a["withCtx"])(()=>[e.reportLogo?(Object(a["openBlock"])(),Object(a["createBlock"])(d,{key:0},{default:Object(a["withCtx"])(()=>[Object(a["createVNode"])(p,{src:e.reportLogo},null,8,["src"])]),_:1})):Object(a["createCommentVNode"])("",!0),Object(a["createVNode"])(u,null,{default:Object(a["withCtx"])(()=>[Object(a["createElementVNode"])("ul",r,[Object(a["createElementVNode"])("li",null,[Object(a["createElementVNode"])("b",null,Object(a["toDisplayString"])(e.title),1)]),e.period?(Object(a["openBlock"])(),Object(a["createElementBlock"])("li",n,[Object(a["createElementVNode"])("b",null,Object(a["toDisplayString"])(e.period),1)])):Object(a["createCommentVNode"])("",!0)])]),_:1})]),_:1})]),_:1})]),_:1}),Object(a["createVNode"])(f,{"scroll-y":"","scroll-x":""},{default:Object(a["withCtx"])(()=>[Object(a["createElementVNode"])("div",l,[Object(a["renderSlot"])(e.$slots,"default",{},void 0,!0)])]),_:3}),Object(a["createVNode"])(h,null,{default:Object(a["withCtx"])(()=>[Object(a["createVNode"])(m,null,{default:Object(a["withCtx"])(()=>[Object(a["createVNode"])(j,{color:"primary"},{default:Object(a["withCtx"])(()=>[Object(a["createTextVNode"])("Date Generated: "),Object(a["createElementVNode"])("b",null,Object(a["toDisplayString"])(e.dateGenerated),1)]),_:1}),Object(a["createVNode"])(j,{color:"primary"},{default:Object(a["withCtx"])(()=>[Object(a["createTextVNode"])("APP version: "),Object(a["createElementVNode"])("b",null,Object(a["toDisplayString"])(e.appVersion),1)]),_:1}),Object(a["createVNode"])(j,{color:"primary"},{default:Object(a["withCtx"])(()=>[Object(a["createTextVNode"])("API version: "),Object(a["createElementVNode"])("b",null,Object(a["toDisplayString"])(e.apiVersion),1)]),_:1})]),_:1})]),_:1}),Object(a["createVNode"])(D,{color:"dark",btns:e.buttons},null,8,["btns"])]),_:3})}o("14d9");var i=o("d867"),s=o("1718"),p=o("0f25"),d=o("6605"),u=o("1c74"),b=Object(a["defineComponent"])({components:{IonLabel:i["x"],IonItem:i["w"],HisFooter:p["a"],IonPage:i["D"],IonHeader:i["q"],IonContent:i["n"],IonToolbar:i["T"],IonChip:i["l"],IonFooter:i["o"],IonThumbnail:i["R"],IonImg:i["s"]},props:{title:{type:String},period:{type:String},logo:{type:String},toCSV:{type:Function,required:!1},toPDF:{type:Function,required:!1},configure:{type:Function,required:!1},refreshReport:{type:Function,required:!0},dateGenerated:{type:String,default:"-"}},setup(e){const t=Object(d["i"])(),o=[],r=u["e"].getCoreVersion(),n=u["e"].getApiVersion(),l=Object(a["computed"])(()=>e.logo?Object(s["a"])(e.logo):null);function c(e,t){return{name:e.name||"Btn",size:e.size||"large",slot:e.slot||"start",color:e.color||"primary",visible:e.visible||!0,onClick:t}}return"function"===typeof e.toCSV&&o.push(c({name:"CSV"},e.toCSV)),"function"===typeof e.toPDF&&o.push(c({name:"PDF"},e.toPDF)),"function"===typeof e.configure&&o.push(c({name:"Set Date",slot:"end",color:"primary"},()=>e.configure&&e.configure())),o.push(c({name:"Refresh",slot:"end",color:"warning"},()=>e.refreshReport())),o.push(c({name:"Finish",slot:"end",color:"success"},()=>t.push("/"))),{buttons:o,appVersion:r,apiVersion:n,reportLogo:l}}}),m=(o("f47e"),o("6b0d")),O=o.n(m);const f=O()(b,[["render",c],["__scopeId","data-v-3e4a390e"]]);t["a"]=f},f47e:function(e,t,o){"use strict";o("822e")}}]);
//# sourceMappingURL=chunk-2326ca60.b9960680.js.map