(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d0b66fc"],{"1cc7":function(e,t,n){"use strict";n.r(t);n("b0c0");var r=n("7a23"),c=Object(r["createVNode"])("br",null,null,-1),o=Object(r["createTextVNode"])(" Current District: "),i=Object(r["createTextVNode"])(" Home Village: "),a=Object(r["createTextVNode"])(" Re-Assign "),d=Object(r["createTextVNode"])(" Update Missing Data "),s=Object(r["createTextVNode"])(" Cancel "),u=Object(r["createTextVNode"])(" Clear ");function l(e,t,n,l,b,p){var m=Object(r["resolveComponent"])("ion-title"),O=Object(r["resolveComponent"])("ion-toolbar"),j=Object(r["resolveComponent"])("ion-header"),f=Object(r["resolveComponent"])("ion-checkbox"),h=Object(r["resolveComponent"])("ion-label"),g=Object(r["resolveComponent"])("ion-button"),k=Object(r["resolveComponent"])("ion-item"),C=Object(r["resolveComponent"])("ion-list"),x=Object(r["resolveComponent"])("ion-content"),w=Object(r["resolveComponent"])("ion-footer"),N=Object(r["resolveComponent"])("ion-page");return Object(r["openBlock"])(),Object(r["createBlock"])(N,null,{default:Object(r["withCtx"])((function(){return[Object(r["createVNode"])(j,null,{default:Object(r["withCtx"])((function(){return[Object(r["createVNode"])(O,null,{default:Object(r["withCtx"])((function(){return[Object(r["createVNode"])(m,{class:"his-lg-text"},{default:Object(r["withCtx"])((function(){return[Object(r["createTextVNode"])(Object(r["toDisplayString"])(e.title),1)]})),_:1})]})),_:1})]})),_:1}),Object(r["createVNode"])(x,null,{default:Object(r["withCtx"])((function(){return[Object(r["createVNode"])(C,null,{default:Object(r["withCtx"])((function(){return[(Object(r["openBlock"])(!0),Object(r["createBlock"])(r["Fragment"],null,Object(r["renderList"])(e.items,(function(t,n){return Object(r["openBlock"])(),Object(r["createBlock"])(k,{class:"his-md-text",key:n},{default:Object(r["withCtx"])((function(){return[e.ddeEnabled?(Object(r["openBlock"])(),Object(r["createBlock"])(f,{key:0,slot:"start",modelValue:t.isChecked,"onUpdate:modelValue":function(e){return t.isChecked=e}},null,8,["modelValue","onUpdate:modelValue"])):Object(r["createCommentVNode"])("",!0),Object(r["createVNode"])(h,{color:t.isComplete?"":"danger"},{default:Object(r["withCtx"])((function(){return[Object(r["createTextVNode"])(Object(r["toDisplayString"])(t.name)+" ("+Object(r["toDisplayString"])(t.gender)+") "+Object(r["toDisplayString"])(t.birthdate)+" ",1),c,o,Object(r["createVNode"])("b",null,Object(r["toDisplayString"])(t.curDistrict||"Unknown"),1),i,Object(r["createVNode"])("b",null,Object(r["toDisplayString"])(t.homeVillage||"Unknown"),1)]})),_:2},1032,["color"]),Object(r["createVNode"])(g,{size:"medium",onClick:function(){return e.reassignIdentifier(t)}},{default:Object(r["withCtx"])((function(){return[a]})),_:1},8,["onClick"]),t.isComplete?Object(r["createCommentVNode"])("",!0):(Object(r["openBlock"])(),Object(r["createBlock"])(g,{key:1,size:"medium",color:"warning","router-link":"/patient/registration?edit_person=".concat(t.patientID)},{default:Object(r["withCtx"])((function(){return[d]})),_:2},1032,["router-link"]))]})),_:2},1024)})),128))]})),_:1})]})),_:1}),Object(r["createVNode"])(w,null,{default:Object(r["withCtx"])((function(){return[Object(r["createVNode"])(O,{color:"dark"},{default:Object(r["withCtx"])((function(){return[Object(r["createVNode"])(g,{"router-link":"/",color:"danger",slot:"start",size:"large"},{default:Object(r["withCtx"])((function(){return[s]})),_:1}),e.itemsChecked.length>0?(Object(r["openBlock"])(),Object(r["createBlock"])(g,{key:0,onClick:e.clear,color:"warning",slot:"end",size:"large"},{default:Object(r["withCtx"])((function(){return[u]})),_:1},8,["onClick"])):Object(r["createCommentVNode"])("",!0),e.itemsChecked.length>1?(Object(r["openBlock"])(),Object(r["createBlock"])(g,{key:1,onClick:t[1]||(t[1]=function(t){return e.onAction(e.mergeSelected,"merge")}),color:"primary",size:"large",slot:"end"},{default:Object(r["withCtx"])((function(){return[Object(r["createTextVNode"])(" Merge ("+Object(r["toDisplayString"])(e.itemsChecked.length)+") ",1)]})),_:1})):Object(r["createCommentVNode"])("",!0)]})),_:1})]})),_:1})]})),_:1})}var b=n("2909"),p=n("1da1"),m=(n("96cf"),n("4de4"),n("d3b7"),n("d81d"),n("99af"),n("8a30")),O=n("fa73"),j=n("23e6"),f=n("b5e4"),h=n("0fa1"),g=n("9283"),k=Object(r["defineComponent"])({components:{IonPage:m["D"],IonCheckbox:m["k"],IonButton:m["d"],IonList:m["y"],IonItem:m["w"],IonToolbar:m["Q"],IonHeader:m["q"],IonTitle:m["P"],IonContent:m["n"],IonFooter:m["o"]},data:function(){return{dde:{},ddeEnabled:!1,items:[],title:"",npid:""}},watch:{$route:{handler:function(e){var t=e.params;t&&(this.npid=t.npid,this.title="Duplicates for NPID (".concat(this.npid,")"),this.init(this.npid))},deep:!0,immediate:!0}},computed:{itemsChecked:function(){return this.items.filter((function(e){return e.isChecked}))}},methods:{onAction:function(e){var t=arguments;return Object(p["a"])(regeneratorRuntime.mark((function n(){var r,c;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return r=t.length>1&&void 0!==t[1]?t[1]:"proceed",n.next=3,Object(f["a"])("\n                Are you sure you want to ".concat(r,"?\n            "));case 3:if(c=n.sent,!c){n.next=14;break}return n.prev=5,n.next=8,e();case 8:n.next=14;break;case 10:n.prev=10,n.t0=n["catch"](5),Object(f["e"])("".concat(n.t0)),console.error(n.t0);case 14:case"end":return n.stop()}}),n,null,[[5,10]])})))()},mergeSelected:function(){var e=this;return Object(p["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.itemsChecked.every((function(e){return e.isComplete}))){t.next=2;break}return t.abrupt("return",Object(f["e"])("One or more patients have missing data. Please update them before merging.",5e3));case 2:return t.next=4,e.dde.postMerge(e.itemsChecked);case 4:if(!t.sent){t.next=8;break}return t.next=7,e.dde.printNpid(e.dde.patientID);case 7:Object(h["b"])(e.dde.patientID,e.$router);case 8:case"end":return t.stop()}}),t)})))()},reassignIdentifier:function(e){var t=this;return Object(p["a"])(regeneratorRuntime.mark((function n(){var r,c;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(e.isComplete||!t.ddeEnabled){n.next=7;break}return n.next=3,Object(f["a"])("Do you want to update missing information?",{header:"Incomplete Demographics"});case 3:r=n.sent,r&&(c="edit_person=".concat(e.patientID),c+="&dde_reassign=true",c+="&doc_id=".concat(e.docID),t.$router.push("/patient/registration?".concat(c))),n.next=8;break;case 7:t.onAction(Object(p["a"])(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(!t.ddeEnabled){n.next=8;break}return n.next=3,t.dde.reassignNpid(e.docID,e.patientID);case 3:if(!n.sent){n.next=6;break}return n.next=6,t.dde.printNpid(e.patientID);case 6:n.next=11;break;case 8:if("function"!==typeof e.assignLocalNpidAndPrint){n.next=11;break}return n.next=11,e.assignLocalNpidAndPrint();case 11:Object(h["b"])(e.patientID,t.$router);case 12:case"end":return n.stop()}}),n)}))),"Reassign");case 8:case"end":return n.stop()}}),n)})))()},buildItems:function(e){return e.map((function(e){try{var t=new j["a"](e);return{isChecked:!1,patientID:t.getID(),name:t.getFullName(),gender:t.getGender(),birthdate:g["b"].toStandardHisDisplayFormat(t.getBirthdate()),curDistrict:t.getCurrentDistrict(),homeVillage:t.getHomeVillage(),docID:t.getPatientIdentifier(27),isComplete:t.patientIsComplete(),assignLocalNpidAndPrint:function(){var e=Object(p["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.assignNpid();case 2:return e.next=4,t.printNationalID();case 4:case"end":return e.stop()}}),e)})));function n(){return e.apply(this,arguments)}return n}()}}catch(n){Object(f["c"])("An error has occured while building data"),console.error(n)}return{isChecked:!1,patientID:"N/A",name:"N/A",gender:"N/A",birthdate:"N/A",curDistrict:"N/A",homeVillage:"N/A",docID:"N/A",isComplete:!1}}))},clear:function(){this.items=this.items.map((function(e){return e.isChecked=!1,e}))},init:function(e){var t=this;return Object(p["a"])(regeneratorRuntime.mark((function n(){var r,c,o,i;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.prev=0,t.dde=new O["a"],n.next=4,t.dde.loadDDEStatus();case 4:if(t.ddeEnabled=t.dde.isEnabled(),!t.ddeEnabled){n.next=14;break}return n.next=8,t.dde.findNpid(e);case 8:r=n.sent,c=r.locals,o=r.remotes,t.items=[].concat(Object(b["a"])(t.buildItems(c)),Object(b["a"])(t.buildItems(o))),n.next=18;break;case 14:return n.next=16,j["a"].findByNpid(e);case 16:i=n.sent,i&&(t.items=t.buildItems(i));case 18:n.next=23;break;case 20:n.prev=20,n.t0=n["catch"](0),Object(f["c"])("".concat(n.t0),5e3);case 23:case"end":return n.stop()}}),n,null,[[0,20]])})))()}}}),C=n("6b0d"),x=n.n(C);const w=x()(k,[["render",l]]);t["default"]=w}}]);
//# sourceMappingURL=chunk-2d0b66fc.cfed64c1.js.map