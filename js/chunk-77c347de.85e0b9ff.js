(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-77c347de","chunk-5afe6776"],{"0c79":function(e,t,o){},"0e03":function(e,t,o){"use strict";var n=o("7a23");const i=["src"],a={key:0},c={key:1};function s(e,t,o,s,r,l){const d=Object(n["resolveComponent"])("ion-thumbnail"),b=Object(n["resolveComponent"])("ion-label"),p=Object(n["resolveComponent"])("ion-item"),u=Object(n["resolveComponent"])("ion-card");return Object(n["openBlock"])(),Object(n["createBlock"])(u,{class:Object(n["normalizeClass"])(["his-card task-card",{clickable:!e.isDisabled,disabled:e.isDisabled}])},{default:Object(n["withCtx"])(()=>[Object(n["createVNode"])(p,{lines:"none"},{default:Object(n["withCtx"])(()=>[Object(n["createVNode"])(d,{slot:"start"},{default:Object(n["withCtx"])(()=>[Object(n["createElementVNode"])("img",{src:e.activeIcon},null,8,i)]),_:1}),Object(n["createVNode"])(b,{class:"his-sm-text ion-text-wrap",style:{"font-weight":"600",color:"#333!important"}},{default:Object(n["withCtx"])(()=>[e.isCompleted?Object(n["createCommentVNode"])("",!0):(Object(n["openBlock"])(),Object(n["createElementBlock"])("span",a,Object(n["toDisplayString"])(e.title),1)),e.isCompleted?(Object(n["openBlock"])(),Object(n["createElementBlock"])("s",c,Object(n["toDisplayString"])(e.title),1)):Object(n["createCommentVNode"])("",!0)]),_:1})]),_:1})]),_:1},8,["class"])}var r=o("d867"),l=o("1718"),d=Object(n["defineComponent"])({components:{IonCard:r["f"],IonThumbnail:r["R"],IonItem:r["w"],IonLabel:r["x"]},props:{title:{type:String,required:!0},icon:{type:String,required:!0},description:{type:String,required:!1},taskDisabled:{type:Boolean,required:!1},taskCompleted:{type:Boolean,required:!1}},setup(e){const t="boolean"===typeof e.taskCompleted&&e.taskCompleted,o="boolean"===typeof e.taskDisabled&&e.taskDisabled,i=Object(n["computed"])(()=>o?Object(l["a"])("Disabled.svg"):t?Object(l["a"])("Checkmark.svg"):e.icon);return{activeIcon:i,isDisabled:o,isCompleted:t}}}),b=(o("cbbc"),o("6b0d")),p=o.n(b);const u=p()(d,[["render",s],["__scopeId","data-v-c719b9ce"]]);t["a"]=u},"111c":function(e,t,o){"use strict";o.r(t);var n=o("7a23");const i={style:{"font-size":"0.7em","font-weight":"bold"},class:"ion-text-center"};function a(e,t,o,a,c,s){const r=Object(n["resolveComponent"])("ion-img"),l=Object(n["resolveComponent"])("tool-bar-medium-card");return Object(n["openBlock"])(),Object(n["createBlock"])(l,null,{default:Object(n["withCtx"])(()=>[e.icon?(Object(n["openBlock"])(),Object(n["createBlock"])(r,{key:0,src:e.icon,id:"logo"},null,8,["src"])):Object(n["createCommentVNode"])("",!0),Object(n["createElementVNode"])("div",i,Object(n["toDisplayString"])(e.version),1)]),_:1})}var c=o("2b47"),s=o("d867"),r=Object(n["defineComponent"])({name:"AppIcon",components:{IonImg:s["s"],ToolBarMediumCard:c["a"]},props:{icon:{type:String,required:!0},version:{type:String,default:"-/-"}}}),l=(o("5357"),o("6b0d")),d=o.n(l);const b=d()(r,[["render",a],["__scopeId","data-v-360fd8c4"]]);t["default"]=b},"19da":function(e,t,o){"use strict";o("3c6e")},"2b07":function(e,t,o){"use strict";o("0c79")},"3c6e":function(e,t,o){},5357:function(e,t,o){"use strict";o("5b1c")},5906:function(e,t,o){"use strict";o.r(t);o("14d9");var n=o("7a23");const i=e=>(Object(n["pushScopeId"])("data-v-e517ce84"),e=e(),Object(n["popScopeId"])(),e),a={key:0},c=i(()=>Object(n["createElementVNode"])("p",null,null,-1)),s={class:"his-card info-card-item"},r={class:"his-card info-card-item"},l={class:"his-card info-card-item"},d={class:"his-sm-text his-card"},b={key:0},p={key:1},u=i(()=>Object(n["createElementVNode"])("b",null,"NONE",-1)),O={key:0},m={key:1},j={key:1};function h(e,t,o,i,h,C){const g=Object(n["resolveComponent"])("minimal-toolbar"),v=Object(n["resolveComponent"])("ion-icon"),f=Object(n["resolveComponent"])("ion-label"),k=Object(n["resolveComponent"])("ion-segment-button"),V=Object(n["resolveComponent"])("ion-segment"),I=Object(n["resolveComponent"])("ion-toolbar"),N=Object(n["resolveComponent"])("ion-button"),y=Object(n["resolveComponent"])("primary-card"),w=Object(n["resolveComponent"])("ion-col"),x=Object(n["resolveComponent"])("ion-row"),D=Object(n["resolveComponent"])("ion-grid"),_=Object(n["resolveComponent"])("ion-item"),B=Object(n["resolveComponent"])("ion-list"),E=Object(n["resolveComponent"])("ion-content"),T=Object(n["resolveComponent"])("ion-footer"),P=Object(n["resolveComponent"])("ion-page"),S=Object(n["resolveComponent"])("full-toolbar"),L=Object(n["resolveComponent"])("visit-dates-card"),A=Object(n["resolveComponent"])("ion-chip");return Object(n["openBlock"])(),Object(n["createElementBlock"])(n["Fragment"],null,["sm"===e.screenBreakPoint?(Object(n["openBlock"])(),Object(n["createBlock"])(P,{key:0},{default:Object(n["withCtx"])(()=>[Object(n["createVNode"])(g,{title:e.patientName,menuTitle:e.visitDatesTitle,menuItems:e.visitDates,appIcon:e.app.applicationIcon,onOnClickMenuItem:e.onActiveVisitDate},null,8,["title","menuTitle","menuItems","appIcon","onOnClickMenuItem"]),"sm"===e.screenBreakPoint?(Object(n["openBlock"])(),Object(n["createBlock"])(I,{key:0},{default:Object(n["withCtx"])(()=>[Object(n["createVNode"])(V,{value:e.activeTab,class:"ion-justify-content-center"},{default:Object(n["withCtx"])(()=>[Object(n["createVNode"])(k,{value:"1",onClick:t[0]||(t[0]=t=>e.activeTab=1)},{default:Object(n["withCtx"])(()=>[Object(n["createVNode"])(v,{icon:e.calendar},null,8,["icon"]),Object(n["createVNode"])(f,null,{default:Object(n["withCtx"])(()=>[Object(n["createTextVNode"])("Visits")]),_:1})]),_:1}),Object(n["createVNode"])(k,{value:"2",onClick:t[1]||(t[1]=t=>e.activeTab=2)},{default:Object(n["withCtx"])(()=>[Object(n["createVNode"])(v,{icon:e.person},null,8,["icon"]),Object(n["createVNode"])(f,null,{default:Object(n["withCtx"])(()=>[Object(n["createTextVNode"])("Patient")]),_:1})]),_:1}),Object(n["createVNode"])(k,{value:"3",onClick:t[2]||(t[2]=t=>e.activeTab=3)},{default:Object(n["withCtx"])(()=>[Object(n["createVNode"])(v,{icon:e.medical},null,8,["icon"]),Object(n["createVNode"])(f,null,{default:Object(n["withCtx"])(()=>[Object(n["createTextVNode"])("Program")]),_:1})]),_:1}),Object(n["createVNode"])(k,{value:"4",onClick:t[3]||(t[3]=t=>e.activeTab=4)},{default:Object(n["withCtx"])(()=>[Object(n["createVNode"])(v,{icon:e.time},null,8,["icon"]),Object(n["createVNode"])(f,null,{default:Object(n["withCtx"])(()=>[Object(n["createTextVNode"])("Dates")]),_:1})]),_:1})]),_:1},8,["value"])]),_:1})):Object(n["createCommentVNode"])("",!0),e.nextTask.name&&"sm"===e.screenBreakPoint?(Object(n["openBlock"])(),Object(n["createBlock"])(I,{key:1},{default:Object(n["withCtx"])(()=>[Object(n["createVNode"])(N,{style:{width:"100%"},color:"success",onClick:e.goToNextTask},{default:Object(n["withCtx"])(()=>[Object(n["createVNode"])(f,null,{default:Object(n["withCtx"])(()=>[Object(n["createElementVNode"])("b",null,"Next Task: "+Object(n["toDisplayString"])(e.nextTask.name.toUpperCase()),1)]),_:1}),Object(n["createVNode"])(v,{icon:e.alertCircle},null,8,["icon"])]),_:1},8,["onClick"])]),_:1})):Object(n["createCommentVNode"])("",!0),Object(n["createVNode"])(E,{id:"main-content"},{default:Object(n["withCtx"])(()=>["sm"===e.screenBreakPoint?(Object(n["openBlock"])(),Object(n["createElementBlock"])("div",a,[e.appHasCustomContent&&1===e.activeTab&&e.patientIsset?(Object(n["openBlock"])(),Object(n["createBlock"])(Object(n["resolveDynamicComponent"])(e.customDashboardContent),{key:0,patient:e.patient,visitDate:e.activeVisitDate},null,8,["patient","visitDate"])):Object(n["createCommentVNode"])("",!0),e.appHasCustomContent||1!==e.activeTab?Object(n["createCommentVNode"])("",!0):(Object(n["openBlock"])(),Object(n["createBlock"])(D,{key:1},{default:Object(n["withCtx"])(()=>[Object(n["createVNode"])(x,null,{default:Object(n["withCtx"])(()=>[(Object(n["openBlock"])(!0),Object(n["createElementBlock"])(n["Fragment"],null,Object(n["renderList"])(e.patientCards,(e,t)=>(Object(n["openBlock"])(),Object(n["createBlock"])(w,{size:"12",key:t},{default:Object(n["withCtx"])(()=>[(Object(n["openBlock"])(),Object(n["createBlock"])(y,{key:"mcard"+t,isEnabled:e.isEnabled,counter:e.items.length,icon:e.icon,title:e.label,titleColor:e.color,items:e.items,isLoading:e.isLoading,onClick:t=>e.onClick(e)},null,8,["isEnabled","counter","icon","title","titleColor","items","isLoading","onClick"]))]),_:2},1024))),128))]),_:1})]),_:1})),2===e.activeTab?(Object(n["openBlock"])(),Object(n["createBlock"])(B,{key:2},{default:Object(n["withCtx"])(()=>[(Object(n["openBlock"])(!0),Object(n["createElementBlock"])(n["Fragment"],null,Object(n["renderList"])(e.patientCardInfo,(e,t)=>(Object(n["openBlock"])(),Object(n["createElementBlock"])("div",{class:"his-card info-card-item",key:t},[Object(n["createVNode"])(_,{lines:"none"},{default:Object(n["withCtx"])(()=>[Object(n["createVNode"])(f,null,{default:Object(n["withCtx"])(()=>[Object(n["createTextVNode"])(Object(n["toDisplayString"])(e.label),1)]),_:2},1024),Object(n["createVNode"])(f,{slot:"end"},{default:Object(n["withCtx"])(()=>[Object(n["createElementVNode"])("b",null,Object(n["toDisplayString"])(e.value),1)]),_:2},1024)]),_:2},1024)]))),128))]),_:1})):Object(n["createCommentVNode"])("",!0),3===e.activeTab?(Object(n["openBlock"])(),Object(n["createBlock"])(B,{key:3},{default:Object(n["withCtx"])(()=>[(Object(n["openBlock"])(!0),Object(n["createElementBlock"])(n["Fragment"],null,Object(n["renderList"])(e.programCardInfo,(e,t)=>(Object(n["openBlock"])(),Object(n["createElementBlock"])("div",{class:"his-card info-card-item",key:t},[Object(n["createVNode"])(_,{lines:"none"},{default:Object(n["withCtx"])(()=>[Object(n["createVNode"])(f,null,{default:Object(n["withCtx"])(()=>[Object(n["createTextVNode"])(Object(n["toDisplayString"])(e.label),1)]),_:2},1024),Object(n["createVNode"])(f,{slot:"end"},{default:Object(n["withCtx"])(()=>[Object(n["createElementVNode"])("b",null,Object(n["toDisplayString"])(e.value),1)]),_:2},1024)]),_:2},1024),c]))),128))]),_:1})):Object(n["createCommentVNode"])("",!0),4===e.activeTab?(Object(n["openBlock"])(),Object(n["createBlock"])(B,{key:4},{default:Object(n["withCtx"])(()=>[Object(n["createElementVNode"])("div",s,[Object(n["createVNode"])(_,{lines:"none"},{default:Object(n["withCtx"])(()=>[Object(n["createVNode"])(f,null,{default:Object(n["withCtx"])(()=>[Object(n["createTextVNode"])(" Today ")]),_:1}),Object(n["createVNode"])(f,{slot:"end"},{default:Object(n["withCtx"])(()=>[Object(n["createElementVNode"])("b",null,Object(n["toDisplayString"])(e.currentDate),1)]),_:1})]),_:1})]),Object(n["createElementVNode"])("div",r,[Object(n["createVNode"])(_,{lines:"none"},{default:Object(n["withCtx"])(()=>[Object(n["createVNode"])(f,null,{default:Object(n["withCtx"])(()=>[Object(n["createTextVNode"])(" Session ")]),_:1}),Object(n["createVNode"])(f,{slot:"end"},{default:Object(n["withCtx"])(()=>[Object(n["createElementVNode"])("b",null,Object(n["toDisplayString"])(e.sessionDate),1)]),_:1})]),_:1})]),Object(n["createElementVNode"])("div",l,[Object(n["createVNode"])(_,{lines:"none"},{default:Object(n["withCtx"])(()=>[Object(n["createVNode"])(f,null,{default:Object(n["withCtx"])(()=>[Object(n["createTextVNode"])(" Current visit date ")]),_:1}),Object(n["createVNode"])(f,{slot:"end"},{default:Object(n["withCtx"])(()=>[Object(n["createElementVNode"])("b",null,Object(n["toDisplayString"])(e.activeVisitDate),1)]),_:1})]),_:1})])]),_:1})):Object(n["createCommentVNode"])("",!0)])):Object(n["createCommentVNode"])("",!0)]),_:1}),Object(n["createVNode"])(T,null,{default:Object(n["withCtx"])(()=>["sm"===e.screenBreakPoint?(Object(n["openBlock"])(),Object(n["createBlock"])(I,{key:0,color:"dark"},{default:Object(n["withCtx"])(()=>[e.hasOfflineObs?(Object(n["openBlock"])(),Object(n["createBlock"])(N,{key:0,color:"success",size:"large",slot:"start",onClick:e.launchSyncDialog},{default:Object(n["withCtx"])(()=>[Object(n["createVNode"])(v,{icon:e.sync},null,8,["icon"])]),_:1},8,["onClick"])):Object(n["createCommentVNode"])("",!0),Object(n["createVNode"])(N,{color:"light",size:"medium",slot:"start","router-link":"/session/date"},{default:Object(n["withCtx"])(()=>[Object(n["createVNode"])(v,{icon:e.timeOutline},null,8,["icon"])]),_:1}),Object(n["createVNode"])(N,{color:"primary",size:"medium",slot:"end",onClick:e.showTasks},{default:Object(n["withCtx"])(()=>[Object(n["createVNode"])(v,{icon:e.clipboard},null,8,["icon"])]),_:1},8,["onClick"]),Object(n["createVNode"])(N,{color:"primary",size:"medium",slot:"end",onClick:e.showOptions},{default:Object(n["withCtx"])(()=>[Object(n["createVNode"])(v,{icon:e.folder},null,8,["icon"])]),_:1},8,["onClick"]),Object(n["createVNode"])(N,{color:"primary",size:"medium",slot:"end",onClick:e.changeApp},{default:Object(n["withCtx"])(()=>[Object(n["createVNode"])(v,{icon:e.apps},null,8,["icon"])]),_:1},8,["onClick"]),Object(n["createVNode"])(N,{color:"success",size:"medium",slot:"end",onClick:e.onCancel},{default:Object(n["withCtx"])(()=>[Object(n["createVNode"])(v,{icon:e.logOut},null,8,["icon"])]),_:1},8,["onClick"])]),_:1})):Object(n["createCommentVNode"])("",!0)]),_:1})]),_:1})):Object(n["createCommentVNode"])("",!0),"lg"===e.screenBreakPoint?(Object(n["openBlock"])(),Object(n["createBlock"])(P,{key:1},{default:Object(n["withCtx"])(()=>[Object(n["createVNode"])(S,{appVersion:e.appVersion,appIcon:e.app.applicationIcon,patientCardInfo:e.patientCardInfo,programCardInfo:e.programCardInfo},null,8,["appVersion","appIcon","patientCardInfo","programCardInfo"]),Object(n["createVNode"])(E,{id:"main-content"},{default:Object(n["withCtx"])(()=>[Object(n["createVNode"])(D,{class:"grid-custom vertically-align"},{default:Object(n["withCtx"])(()=>[Object(n["createVNode"])(x,null,{default:Object(n["withCtx"])(()=>[Object(n["createVNode"])(w,{size:"2.4"},{default:Object(n["withCtx"])(()=>[Object(n["createVNode"])(L,{title:e.visitDatesTitle,items:e.visitDates,onOnselect:e.onActiveVisitDate},null,8,["title","items","onOnselect"])]),_:1}),Object(n["createVNode"])(w,{size:"9.6"},{default:Object(n["withCtx"])(()=>[Object(n["createElementVNode"])("div",d,[Object(n["createVNode"])(x,null,{default:Object(n["withCtx"])(()=>[Object(n["createVNode"])(w,{"size-md":"4","size-sm":"6"},{default:Object(n["withCtx"])(()=>[Object(n["createTextVNode"])(" Today's Date: "),Object(n["createElementVNode"])("b",null,Object(n["toDisplayString"])(e.currentDate),1)]),_:1}),Object(n["createVNode"])(w,{"size-md":"4","size-sm":"6"},{default:Object(n["withCtx"])(()=>[e.nextTask.name?(Object(n["openBlock"])(),Object(n["createElementBlock"])("span",b,[Object(n["createVNode"])(A,{class:"next-task",color:"success",onClick:e.goToNextTask},{default:Object(n["withCtx"])(()=>[Object(n["createTextVNode"])("Next Task: "+Object(n["toDisplayString"])(e.nextTask.name.toUpperCase()),1)]),_:1},8,["onClick"])])):(Object(n["openBlock"])(),Object(n["createElementBlock"])("span",p,[Object(n["createTextVNode"])(" Next Task: "),u]))]),_:1}),Object(n["createVNode"])(w,{"size-md":"4","size-sm":"12"},{default:Object(n["withCtx"])(()=>[e.isBDE?(Object(n["openBlock"])(),Object(n["createElementBlock"])("span",O,[Object(n["createVNode"])(A,{style:{marginTop:"-8px"},color:"danger",onClick:t[4]||(t[4]=t=>e.$router.push({name:"Session Date"}))},{default:Object(n["withCtx"])(()=>[Object(n["createElementVNode"])("b",null," BDE: "+Object(n["toDisplayString"])(e.sessionDate.toUpperCase()),1)]),_:1})])):(Object(n["openBlock"])(),Object(n["createElementBlock"])("span",m,[Object(n["createVNode"])(A,{style:{marginTop:"-8px"},color:"dark",onClick:t[5]||(t[5]=t=>e.$router.push({name:"Session Date"}))},{default:Object(n["withCtx"])(()=>[Object(n["createElementVNode"])("b",null,"Set Date: "+Object(n["toDisplayString"])(e.sessionDate.toUpperCase()),1)]),_:1})]))]),_:1})]),_:1}),e.appHasCustomContent&&e.patientIsset?(Object(n["openBlock"])(),Object(n["createBlock"])(Object(n["resolveDynamicComponent"])(e.customDashboardContent),{key:0,patient:e.patient,visitDate:e.activeVisitDate},null,8,["patient","visitDate"])):Object(n["createCommentVNode"])("",!0),e.appHasCustomContent?Object(n["createCommentVNode"])("",!0):(Object(n["openBlock"])(),Object(n["createElementBlock"])("div",j,[Object(n["createVNode"])(x,null,{default:Object(n["withCtx"])(()=>[(Object(n["openBlock"])(!0),Object(n["createElementBlock"])(n["Fragment"],null,Object(n["renderList"])(e.patientCards,(e,t)=>(Object(n["openBlock"])(),Object(n["createBlock"])(w,{size:"6",key:t},{default:Object(n["withCtx"])(()=>[(Object(n["openBlock"])(),Object(n["createBlock"])(y,{key:e.label,isEnabled:e.isEnabled,counter:e.items.length,icon:e.icon,title:e.label,titleColor:e.color,items:e.items,isLoading:e.isLoading,onClick:t=>e.onClick(e)},null,8,["isEnabled","counter","icon","title","titleColor","items","isLoading","onClick"]))]),_:2},1024))),128))]),_:1})]))])]),_:1})]),_:1})]),_:1})]),_:1}),Object(n["createVNode"])(I,{color:"dark"},{default:Object(n["withCtx"])(()=>[e.hasOfflineObs?(Object(n["openBlock"])(),Object(n["createBlock"])(N,{key:0,color:"light",size:"large",slot:"start",onClick:e.launchSyncDialog},{default:Object(n["withCtx"])(()=>[Object(n["createVNode"])(v,{icon:e.sync},null,8,["icon"])]),_:1},8,["onClick"])):Object(n["createCommentVNode"])("",!0),Object(n["createVNode"])(N,{color:"primary",size:"large",slot:"end",onClick:e.showTasks},{default:Object(n["withCtx"])(()=>[Object(n["createVNode"])(v,{icon:e.clipboardOutline},null,8,["icon"]),Object(n["createTextVNode"])(" Tasks ")]),_:1},8,["onClick"]),Object(n["createVNode"])(N,{color:"primary",size:"large",slot:"end",onClick:e.showOptions},{default:Object(n["withCtx"])(()=>[Object(n["createVNode"])(v,{icon:e.folderOutline},null,8,["icon"]),Object(n["createTextVNode"])(" Printouts/Other ")]),_:1},8,["onClick"]),Object(n["createVNode"])(N,{color:"primary",size:"large",slot:"end",onClick:e.changeApp},{default:Object(n["withCtx"])(()=>[Object(n["createVNode"])(v,{icon:e.appsOutline},null,8,["icon"]),Object(n["createTextVNode"])(" Applications ")]),_:1},8,["onClick"]),Object(n["createVNode"])(N,{onClick:e.onCancel,color:"success",size:"large",slot:"end"},{default:Object(n["withCtx"])(()=>[Object(n["createVNode"])(v,{icon:e.logOutOutline},null,8,["icon"]),Object(n["createTextVNode"])(" Finish ")]),_:1},8,["onClick"])]),_:1})]),_:1})):Object(n["createCommentVNode"])("",!0)],64)}o("13d5");var C=o("3e53"),g=o("9283"),v=o("23e6"),f=o("ad60"),k=o("7957"),V=o("71c3"),I=o("9b7c");function N(e,t,o,i,a,c){const s=Object(n["resolveComponent"])("ion-title"),r=Object(n["resolveComponent"])("ion-toolbar"),l=Object(n["resolveComponent"])("ion-header"),d=Object(n["resolveComponent"])("task-card"),b=Object(n["resolveComponent"])("ion-col"),p=Object(n["resolveComponent"])("ion-row"),u=Object(n["resolveComponent"])("ion-grid"),O=Object(n["resolveComponent"])("ion-button"),m=Object(n["resolveComponent"])("ion-footer");return Object(n["openBlock"])(),Object(n["createElementBlock"])(n["Fragment"],null,[Object(n["createVNode"])(l,null,{default:Object(n["withCtx"])(()=>[Object(n["createVNode"])(r,null,{default:Object(n["withCtx"])(()=>[Object(n["createVNode"])(s,null,{default:Object(n["withCtx"])(()=>[Object(n["createTextVNode"])(Object(n["toDisplayString"])(e.title),1)]),_:1})]),_:1})]),_:1}),Object(n["createVNode"])(u,{class:"selector"},{default:Object(n["withCtx"])(()=>[Object(n["createVNode"])(p,null,{default:Object(n["withCtx"])(()=>[(Object(n["openBlock"])(!0),Object(n["createElementBlock"])(n["Fragment"],null,Object(n["renderList"])(e.filteredItems,(t,o)=>(Object(n["openBlock"])(),Object(n["createBlock"])(b,{"size-lg":"4","size-sm":"6",key:o},{default:Object(n["withCtx"])(()=>[Object(n["createVNode"])(d,{onClick:o=>e.doTask(t),title:t.name.toUpperCase(),description:t.description,taskCompleted:t.taskCompleted,taskDisabled:e.isDisabled(t.disabled),icon:e.img(t.icon)},null,8,["onClick","title","description","taskCompleted","taskDisabled","icon"])]),_:2},1024))),128))]),_:1})]),_:1}),Object(n["createVNode"])(m,null,{default:Object(n["withCtx"])(()=>[Object(n["createVNode"])(r,null,{default:Object(n["withCtx"])(()=>[Object(n["createVNode"])(O,{class:"close-btn",color:"danger",size:"large",onClick:e.closeModal,slot:"end"},{default:Object(n["withCtx"])(()=>[Object(n["createTextVNode"])(" Close ")]),_:1},8,["onClick"])]),_:1})]),_:1})],64)}var y=o("1718"),w=o("0e03"),x=o("ad49"),D=o("d867"),_=o("2ef0"),B=o("b5e4"),E=Object(n["defineComponent"])({components:{IonGrid:D["p"],IonRow:D["I"],IonCol:D["m"],TaskCard:w["a"],IonFooter:D["o"],IonToolbar:D["T"],IonButton:D["d"],IonHeader:D["q"],IonTitle:D["S"]},props:{title:{type:String,default:"Select Activity"},items:{type:Object,required:!0},taskParams:{type:Object,required:!1}},data:()=>({filteredItems:[]}),watch:{items:{async handler(e){if(e&&!Object(_["isEmpty"])(e))for(const t in e){const o=e[t];o.globalProperty&&!await x["a"].isProp(o.globalProperty)||(o.condition&&!await o.condition(this.taskParams)||this.filteredItems.push(o))}},deep:!0,immediate:!0}},methods:{img(e){return Object(y["a"])(e)},isDisabled(e){return"function"===typeof e&&e(this.taskParams)},closeModal(){D["ab"].dismiss({})},async doTask(e){if(this.isDisabled(e.disabled))return Object(B["e"])("This task is disabled");if("boolean"!==typeof e.taskCompleted||null===e||void 0===e||!e.taskCompleted||await Object(B["a"])("This task was already completed. Do you want to continue?")){if(e.action)e.action(this.taskParams,this.$router);else if(e.url)this.$router.push({path:e.url});else if(e.patientUrl){var t;this.$router.push(`${e.patientUrl}/${null===(t=this.taskParams)||void 0===t?void 0:t.patientID}`)}else{var o;this.$router.push({name:e.id,params:{patient_id:null===(o=this.taskParams)||void 0===o?void 0:o.patientID}})}this.closeModal()}}}}),T=(o("19da"),o("6b0d")),P=o.n(T);const S=P()(E,[["render",N],["__scopeId","data-v-540826ce"]]);var L=S;const A={style:{float:"right"}},z={class:"tb"};function M(e,t,o,i,a,c){const s=Object(n["resolveComponent"])("ion-title"),r=Object(n["resolveComponent"])("ion-toolbar"),l=Object(n["resolveComponent"])("ion-header"),d=Object(n["resolveComponent"])("ion-item"),b=Object(n["resolveComponent"])("ion-list"),p=Object(n["resolveComponent"])("ion-col"),u=Object(n["resolveComponent"])("his-basic-table"),O=Object(n["resolveComponent"])("ion-row"),m=Object(n["resolveComponent"])("ion-content"),j=Object(n["resolveComponent"])("ion-button"),h=Object(n["resolveComponent"])("ion-footer");return Object(n["openBlock"])(),Object(n["createElementBlock"])(n["Fragment"],null,[Object(n["createVNode"])(l,null,{default:Object(n["withCtx"])(()=>[Object(n["createVNode"])(r,null,{default:Object(n["withCtx"])(()=>[Object(n["createVNode"])(s,{class:"his-md-text"},{default:Object(n["withCtx"])(()=>[Object(n["createElementVNode"])("span",null,Object(n["toDisplayString"])(e.title),1),Object(n["createElementVNode"])("span",A,"Provider: "+Object(n["toDisplayString"])(e.active.provider),1)]),_:1})]),_:1})]),_:1}),Object(n["createVNode"])(m,null,{default:Object(n["withCtx"])(()=>[Object(n["createVNode"])(O,null,{default:Object(n["withCtx"])(()=>[Object(n["createVNode"])(p,{size:"4"},{default:Object(n["withCtx"])(()=>[Object(n["createVNode"])(b,null,{default:Object(n["withCtx"])(()=>[(Object(n["openBlock"])(!0),Object(n["createElementBlock"])(n["Fragment"],null,Object(n["renderList"])(e.encounters,(t,o)=>(Object(n["openBlock"])(),Object(n["createBlock"])(d,{class:"his-sm-text",key:o,color:t.other.id===e.active.id?"primary":"",detail:!0,onClick:()=>e.showDetails(t)},{default:Object(n["withCtx"])(()=>[Object(n["createTextVNode"])(Object(n["toDisplayString"])(t.label.toUpperCase()),1)]),_:2},1032,["color","onClick"]))),128))]),_:1})]),_:1}),Object(n["createVNode"])(p,{size:"8"},{default:Object(n["withCtx"])(()=>[Object(n["createElementVNode"])("div",z,[Object(n["createVNode"])(u,{columns:e.active.columns,rows:e.active.rows},null,8,["columns","rows"])])]),_:1})]),_:1})]),_:1}),Object(n["createVNode"])(h,null,{default:Object(n["withCtx"])(()=>[Object(n["createVNode"])(r,null,{default:Object(n["withCtx"])(()=>[Object(n["createVNode"])(j,{color:"danger",onClick:e.voidActiveItem,disabled:!e.canVoid,size:"large"},{default:Object(n["withCtx"])(()=>[Object(n["createTextVNode"])(" Void encounter")]),_:1},8,["onClick","disabled"]),Object(n["createVNode"])(j,{onClick:e.closeModal,size:"large",slot:"end"},{default:Object(n["withCtx"])(()=>[Object(n["createTextVNode"])(" Close ")]),_:1},8,["onClick"])]),_:1})]),_:1})],64)}var q=o("a3a5"),$=o("76df"),F=Object(n["defineComponent"])({components:{HisBasicTable:q["a"],IonButton:D["d"],IonToolbar:D["T"],IonList:D["y"],IonFooter:D["o"],IonContent:D["n"],IonRow:D["I"],IonCol:D["m"],IonTitle:D["S"],IonHeader:D["q"],IonItem:D["w"]},data:()=>({active:{id:-1,name:"",provider:"",rows:[],columns:[]},encounters:[]}),computed:{canVoid(){return!Object(_["isEmpty"])(this.active)}},watch:{items:{handler(e){Object(_["isEmpty"])(e)||(this.encounters=e,this.showDetails(this.encounters[0]))},immediate:!0,deep:!0}},props:{title:{type:String,required:!0},items:{type:Object,required:!0}},methods:{closeModal(){D["ab"].dismiss({})},removeEncounter(e){this.encounters=this.encounters.filter(t=>t.other.id!=e)},voidActiveItem(){Object($["a"])(async e=>{try{await this.active.onVoid(e),this.removeEncounter(this.active.id),this.active={},Object(_["isEmpty"])(this.encounters)||this.showDetails(this.encounters[0])}catch(t){Object(B["c"])(""+t)}},"void-modal custom-modal-backdrop")},async showDetails(e){this.active.id=e.other.id,this.active.name=e.label,this.active.columns=e.other.columns,this.active.onVoid=e.other.onVoid,this.active.rows=await e.other.getRows(),this.active.provider=await e.other.provider}}});o("5ea34");const H=P()(F,[["render",M],["__scopeId","data-v-42f2620e"]]);var R=H;function U(e,t,o,i,a,c){const s=Object(n["resolveComponent"])("ion-title"),r=Object(n["resolveComponent"])("ion-toolbar"),l=Object(n["resolveComponent"])("ion-header"),d=Object(n["resolveComponent"])("his-basic-table"),b=Object(n["resolveComponent"])("ion-content"),p=Object(n["resolveComponent"])("ion-button"),u=Object(n["resolveComponent"])("ion-footer");return Object(n["openBlock"])(),Object(n["createElementBlock"])(n["Fragment"],null,[Object(n["createVNode"])(l,null,{default:Object(n["withCtx"])(()=>[Object(n["createVNode"])(r,null,{default:Object(n["withCtx"])(()=>[Object(n["createVNode"])(s,{class:"his-md-text"},{default:Object(n["withCtx"])(()=>[Object(n["createTextVNode"])(Object(n["toDisplayString"])(e.title),1)]),_:1})]),_:1})]),_:1}),Object(n["createVNode"])(b,null,{default:Object(n["withCtx"])(()=>[Object(n["createVNode"])(d,{columns:e.columns,rows:e.rows},null,8,["columns","rows"])]),_:1}),Object(n["createVNode"])(u,null,{default:Object(n["withCtx"])(()=>[Object(n["createVNode"])(r,null,{default:Object(n["withCtx"])(()=>[Object(n["createVNode"])(p,{size:"large",onClick:e.closeModal,slot:"end"},{default:Object(n["withCtx"])(()=>[Object(n["createTextVNode"])(" Close ")]),_:1},8,["onClick"])]),_:1})]),_:1})],64)}var J=Object(n["defineComponent"])({components:{HisBasicTable:q["a"],IonHeader:D["q"],IonToolbar:D["T"],IonContent:D["n"],IonFooter:D["o"],IonButton:D["d"]},props:{title:{type:String,required:!0},columns:{type:Object,required:!0},rows:{type:Object,default:!0}},methods:{async closeModal(){await D["ab"].dismiss({})}}});const W=P()(J,[["render",U]]);var G=W,Y=o("50e7"),K=o("ff79"),Q=o("ec2a"),X=o("8158"),Z=o("d10e"),ee=o("0fa1");function te(e,t,o,i,a,c){const s=Object(n["resolveComponent"])("ion-badge"),r=Object(n["resolveComponent"])("ion-label"),l=Object(n["resolveComponent"])("ion-item"),d=Object(n["resolveComponent"])("text-skeleton"),b=Object(n["resolveComponent"])("ion-icon"),p=Object(n["resolveComponent"])("ion-chip"),u=Object(n["resolveComponent"])("ion-list");return Object(n["openBlock"])(),Object(n["createElementBlock"])("div",{class:Object(n["normalizeClass"])(["card",{inactive:!e.isEnabled,clickable:e.isEnabled}])},[Object(n["createVNode"])(l,{color:e.titleColor,lines:"none",class:"his-md-text title-card"},{default:Object(n["withCtx"])(()=>[Object(n["createVNode"])(s,{slot:"start",class:"his-sm-text",color:"light"},{default:Object(n["withCtx"])(()=>[Object(n["createElementVNode"])("b",null,Object(n["toDisplayString"])(e.counter),1)]),_:1}),Object(n["createVNode"])(r,null,{default:Object(n["withCtx"])(()=>[Object(n["createTextVNode"])(Object(n["toDisplayString"])(e.title),1)]),_:1})]),_:1},8,["color"]),e.isLoading?(Object(n["openBlock"])(),Object(n["createBlock"])(d,{key:0,itemCount:5})):Object(n["createCommentVNode"])("",!0),e.isLoading?Object(n["createCommentVNode"])("",!0):(Object(n["openBlock"])(),Object(n["createBlock"])(u,{key:1},{default:Object(n["withCtx"])(()=>[(Object(n["openBlock"])(!0),Object(n["createElementBlock"])(n["Fragment"],null,Object(n["renderList"])(e.items,(t,o)=>(Object(n["openBlock"])(),Object(n["createBlock"])(l,{key:o},{default:Object(n["withCtx"])(()=>{var o;return[Object(n["createVNode"])(r,{class:Object(n["normalizeClass"])(null!==t&&void 0!==t&&null!==(o=t.other)&&void 0!==o&&o.wrapTxt?"ion-text-wrap":""),innerHTML:t.label},null,8,["class","innerHTML"]),t.value?(Object(n["openBlock"])(),Object(n["createBlock"])(p,{key:0,class:"his-sm-text",slot:"end"},{default:Object(n["withCtx"])(()=>[Object(n["createVNode"])(b,{icon:e.icon},null,8,["icon"]),Object(n["createVNode"])(r,null,{default:Object(n["withCtx"])(()=>[Object(n["createTextVNode"])(Object(n["toDisplayString"])(t.value),1)]),_:2},1024)]),_:2},1024)):Object(n["createCommentVNode"])("",!0)]}),_:2},1024))),128))]),_:1}))],2)}var oe=o("ded6"),ne=Object(n["defineComponent"])({components:{TextSkeleton:oe["a"],IonLabel:D["x"],IonList:D["y"],IonItem:D["w"],IonChip:D["l"],IonIcon:D["r"],IonBadge:D["c"]},data:()=>({time:K["R"]}),props:{isEnabled:{type:Boolean,default:()=>!0},counter:{type:Number,required:!1},isLoading:{type:Boolean},icon:{type:Object},title:{type:String,required:!0},items:{type:Object},titleColor:{type:String,required:!1,default:()=>"#337ab7"}}});o("913b");const ie=P()(ne,[["render",te],["__scopeId","data-v-4526fe87"]]);var ae=ie;const ce={class:"card his-card"},se={class:"his-md-text header-section"},re=["disabled"],le=["src","width"],de={class:"bottom-section"},be=["disabled"],pe=["src","width"];function ue(e,t,o,i,a,c){const s=Object(n["resolveComponent"])("ion-item"),r=Object(n["resolveComponent"])("ion-list");return Object(n["openBlock"])(),Object(n["createElementBlock"])("div",ce,[Object(n["createElementVNode"])("div",se,Object(n["toDisplayString"])(e.title),1),Object(n["createElementVNode"])("button",{class:"nav-btn nav-btn-top clickable",disabled:!e.showPrevButton,onClick:t[0]||(t[0]=(...t)=>e.goPrev&&e.goPrev(...t))},[Object(n["createElementVNode"])("img",{src:e.upbuttonImg,width:e.btnSize},null,8,le)],8,re),Object(n["createElementVNode"])("div",{class:Object(n["normalizeClass"])(e.listAlignmentClass)},[Object(n["createVNode"])(r,null,{default:Object(n["withCtx"])(()=>[(Object(n["openBlock"])(!0),Object(n["createElementBlock"])(n["Fragment"],null,Object(n["renderList"])(e.activeListItems,(t,o)=>(Object(n["openBlock"])(),Object(n["createBlock"])(s,{class:"his-md-text",key:o,onClick:o=>e.onselect(t),detail:!0,color:e.isActive(t)?"primary":""},{default:Object(n["withCtx"])(()=>[Object(n["createTextVNode"])(Object(n["toDisplayString"])(t.label),1)]),_:2},1032,["onClick","color"]))),128))]),_:1})],2),Object(n["createElementVNode"])("div",de,[Object(n["createElementVNode"])("button",{class:"nav-btn nav-btn-bottom clickable",disabled:!e.showNextButton,onClick:t[1]||(t[1]=(...t)=>e.goNext&&e.goNext(...t))},[Object(n["createElementVNode"])("img",{src:e.downbuttonImg,width:e.btnSize},null,8,pe)],8,be)])])}var Oe=Object(n["defineComponent"])({components:{IonList:D["y"],IonItem:D["w"]},props:{title:{type:String,default:()=>"Visits"},items:{type:Object,required:!0}},data:()=>({active:{},activeListItems:[],paginatedListItems:[],index:-1,perPage:6,btnSize:45}),computed:{listAlignmentClass(){return this.activeListItems&&this.activeListItems.length===this.perPage?"vertically-align":""},upbuttonImg(){return"/assets/images/drop-up-arrow.svg"},downbuttonImg(){return"/assets/images/drop-down-arrow.svg"},showNextButton(){return this.index+1<this.paginatedListItems.length},showPrevButton(){return this.index>=1}},watch:{items:{handler(e){if(!Object(_["isEmpty"])(e)){this.index=0,this.paginatedListItems=Object(_["chunk"])(e,this.perPage),this.activeListItems=this.paginatedListItems[0],this.active=this.activeListItems[0];for(const e in this.paginatedListItems){const t=Object(_["findIndex"])(this.paginatedListItems[e],e=>!0===e.other.isActive,0);if(-1!=t){this.index=parseInt(e),this.activeListItems=this.paginatedListItems[e],this.active=this.activeListItems[t];break}}}},deep:!0,immediate:!0},index:{handler(e){this.activeListItems=this.paginatedListItems[e]},immediate:!0},active(e){this.$emit("onselect",e)}},methods:{onselect(e){this.active=e},isActive(e){return e.label===this.active.label},goNext(){const e=this.index+1;e<=this.paginatedListItems.length&&(this.index=e)},goPrev(){this.paginatedListItems.length>=1&&(this.index-=1)}}});o("2b07");const me=P()(Oe,[["render",ue],["__scopeId","data-v-fb9fb750"]]);var je=me;function he(){const e=Object(n["ref"])({width:window.innerWidth,height:window.innerHeight});function t(t){e.value={height:t.currentTarget.innerHeight,width:t.currentTarget.innerWidth}}return Object(n["onMounted"])(()=>{addEventListener("resize",t)}),Object(n["onUnmounted"])(()=>{removeEventListener("resize",t)}),{resolution:e}}function Ce(e,t,o,i,a,c){const s=Object(n["resolveComponent"])("info-card"),r=Object(n["resolveComponent"])("ion-col"),l=Object(n["resolveComponent"])("icon-card"),d=Object(n["resolveComponent"])("ion-row"),b=Object(n["resolveComponent"])("ion-toolbar"),p=Object(n["resolveComponent"])("ion-header");return Object(n["openBlock"])(),Object(n["createBlock"])(p,{translucent:!0},{default:Object(n["withCtx"])(()=>[Object(n["createVNode"])(b,null,{default:Object(n["withCtx"])(()=>[Object(n["createVNode"])(d,null,{default:Object(n["withCtx"])(()=>[Object(n["createVNode"])(r,{size:"5"},{default:Object(n["withCtx"])(()=>[Object(n["createVNode"])(s,{items:e.patientCardInfo},null,8,["items"])]),_:1}),Object(n["createVNode"])(r,{size:"5"},{default:Object(n["withCtx"])(()=>[Object(n["createVNode"])(s,{items:e.programCardInfo},null,8,["items"])]),_:1}),Object(n["createVNode"])(r,{size:"2"},{default:Object(n["withCtx"])(()=>[Object(n["createVNode"])(l,{version:e.appVersion,icon:e.logo},null,8,["version","icon"])]),_:1})]),_:1})]),_:1})]),_:1})}const ge={class:"tool-bar-medium-card"};function ve(e,t,o,i,a,c){const s=Object(n["resolveComponent"])("ion-icon");return Object(n["openBlock"])(),Object(n["createElementBlock"])("div",ge,[(Object(n["openBlock"])(!0),Object(n["createElementBlock"])(n["Fragment"],null,Object(n["renderList"])(e.items,(t,o)=>(Object(n["openBlock"])(),Object(n["createElementBlock"])("div",{key:o},[e.hasIcon(t)?(Object(n["openBlock"])(),Object(n["createBlock"])(s,{key:0,icon:t.other.icon},null,8,["icon"])):Object(n["createCommentVNode"])("",!0),Object(n["createTextVNode"])(" "+Object(n["toDisplayString"])(t.label)+": ",1),Object(n["createElementVNode"])("b",null,Object(n["toDisplayString"])(t.value),1)]))),128))])}var fe=Object(n["defineComponent"])({name:"HisResultCard",components:{IonIcon:D["r"]},props:{icon:{required:!1},items:{type:Object,required:!0}},methods:{hasIcon(e){return"other"in e&&"icon"in e.other}}});o("eed0");const ke=P()(fe,[["render",ve],["__scopeId","data-v-031d3d8c"]]);var Ve=ke,Ie=o("111c"),Ne=Object(n["defineComponent"])({name:"PatientToolbar",components:{IonHeader:D["q"],IonToolbar:D["T"],IonCol:D["m"],IonRow:D["I"],InfoCard:Ve,IconCard:Ie["default"]},props:{appVersion:{type:String},patientCardInfo:{type:Array,required:!0},programCardInfo:{type:Array,required:!0},appIcon:{type:String,required:!0}},computed:{logo(){return Object(y["a"])(this.appIcon)}}});const ye=P()(Ne,[["render",Ce]]);var we=ye,xe=o("8e8b"),De=o("b432"),_e=o("5a0c"),Be=o.n(_e),Ee=Object(n["defineComponent"])({components:{IonList:D["y"],IonLabel:D["x"],IonItem:D["w"],IonSegment:D["J"],IonSegmentButton:D["K"],IonChip:D["l"],IonPage:D["D"],IonIcon:D["r"],IonFooter:D["o"],IonContent:D["n"],IonButton:D["d"],IonToolbar:D["T"],IonGrid:D["p"],IonRow:D["I"],IonCol:D["m"],FullToolbar:we,PrimaryCard:ae,VisitDatesCard:je,MinimalToolbar:Object(n["defineAsyncComponent"])(()=>o.e("chunk-2d0c4649").then(o.bind(null,"3b48")))},setup(){const e=Object(n["ref"])("lg"),{resolution:t}=he();return Object(n["watch"])(()=>t.value,t=>{t&&t.width<=900?e.value="sm":e.value="lg"},{immediate:!0,deep:!0}),{sync:K["Q"],time:K["R"],timeOutline:K["S"],person:K["G"],calendar:K["i"],medical:K["B"],clipboard:K["q"],apps:K["c"],folder:K["w"],logOut:K["y"],clipboardOutline:K["r"],appsOutline:K["d"],folderOutline:K["x"],logOutOutline:K["z"],alertCircle:K["b"],screenBreakPoint:e}},data:()=>({online:De["c"],initMode:"",activeTab:1,app:{},dashboardComponent:{},isBDE:!1,currentDate:"",sessionDate:"",nextTask:{},programId:0,patientId:0,patient:{},patientProgram:{},patientCardInfo:[],programCardInfo:[],visitDates:[],activeVisitDate:"",patientCards:[],appVersion:f["a"].getFullVersion(),sessionEncounterMap:{},savedEncounters:[]}),computed:{patientIsset(){return!Object(_["isEmpty"])(this.patient)},patientName(){return Object(_["isEmpty"])(this.patient)?"N/A":this.patient.name},appHasCustomContent(){return!Object(_["isEmpty"])(this.app.customPatientDashboardContentComponent)},customDashboardContent(){return this.app.customPatientDashboardContentComponent},visitDatesTitle(){return this.visitDates.length+" Visits"},hasOfflineObs(){const{offlineData:e}=Object(De["a"])();return e.value.some(e=>""+e.id===""+this.patientId&&(e.observationParams||[]).some(e=>"Success"!=e.uploadStatus)&&e.programID===f["a"].getProgramID())}},watch:{online:{handler(e){e&&this.init()}},activeVisitDate(e){this.appHasCustomContent||this.updateCardVisitData(e)}},created(){this.app=C["a"].getActiveApp(),this.setPatientCards()},mounted(){this.$route.params.id&&(this.patientId=this.$route.params.id,C["a"].doAppManagementTasks().then(()=>{var e;this.app=C["a"].getActiveApp(),"function"===typeof(null===(e=this.app)||void 0===e?void 0:e.overridePatientDashboardCards)&&this.setPatientCards(),this.programId=this.app.programID,this.appHasCustomContent&&(this.patientCards=[]),this.init()}))},methods:{async initSynchronization(){const{synchronizeRecord:e,findByID:t}=Object(De["a"])();await this.showLoader("Synchronization has started. this may take a while");try{const o=await e(this.patientId),n=o.personID;if(!n)return this.clearLoader(),this.patientId;if(""+n!=""+this.patientId){const e=t(this.patientId);e.id=n,e.personID=n,document.location="/patient/dashboard/"+n}return this.clearLoader(),parseInt(""+n)}catch(o){console.error("Error synchronizing data "+o)}this.clearLoader()},async initOnline(){const e=parseInt(""+this.patientId);try{let t=await xe["a"].get("ACTIVE_PATIENT",{patientID:e});if(Object(_["isEmpty"])(t)||this.hasOfflineObs){const e=await this.initSynchronization();if(t=await xe["a"].get("ACTIVE_PATIENT",{patientID:parseInt(""+e)}),Object(_["isEmpty"])(t))return!1}this.patient={patient_id:t.getID(),birthdate:t.getBirthdate(),name:t.getFullName(),currentVillage:t.getCurrentVillage(),age:t.getAge(),nationalID:t.getNationalID(),gender:t.getGender(),phone:t.getPhoneNumber()},Object(De["a"])().cachePatient(t)}catch(t){return console.error(""+t),Object(B["e"])("Unable to initialise client online"),!1}return this.patientCardInfo=this.getPatientCardInfo(this.patient),this.getNextTask().then(e=>this.nextTask=e),this.getPatientVisitDates(e).then(e=>{this.visitDates=e,this.loadSavedEncounters()}).catch(e=>{console.error(e)}),this.buildProgramInfoData(e),De["b"].value=!1,!0},initOffline(){var e;const t=Object(De["a"])().findByID(this.patientId),o=null===t||void 0===t||null===(e=t.personParams)||void 0===e?void 0:e.person;return!!o&&(this.patient={patient_id:o.personID,birthdate:o.birthdate,name:`${o.given_name} ${o.family_name}`,currentVillage:o.current_village||"N/A",age:(null===o||void 0===o?void 0:o.age)||Be()(f["a"].getSessionDate()).diff(o.birthdate,"years"),gender:o.gender,phone:o.phone||"N/A",nationalID:o.npid||"No npid"},this.getNextTask().then(e=>this.nextTask=e),this.patientCardInfo=this.getPatientCardInfo(this.patient),this.buildProgramInfoData(this.patientId),!0)},async init(){this.currentDate=g["b"].currentDisplayDate(),this.sessionDate=this.toDate(f["a"].getSessionDate()),this.isBDE=f["a"].isBDE()||!1,this.initMode="",await this.initOnline()?this.initMode="online":this.initOffline()&&(this.initMode="offline"),this.initMode?this.hasOfflineObs&&this.launchSyncDialog():Object(B["e"])("Unable to initialise dashboard")},async buildProgramInfoData(e){var t,o;this.programCardInfo="function"===typeof(null===(t=this.app)||void 0===t?void 0:t.patientProgramInfoData)?null===(o=this.app)||void 0===o?void 0:o.patientProgramInfoData(e):[];for(const i of this.programCardInfo)try{"function"===typeof i.init&&await i.init(),"function"===typeof i.asyncValue?i.asyncValue().then(e=>i.value=e):"function"===typeof i.staticValue&&(i.value=i.staticValue())}catch(n){console.error(""+n)}},setPatientCards(){var e;const t=[{id:"c1",items:[],cache:{},label:"Activities",color:"primary",isLoading:!1,icon:K["S"],isEnabled:this.isCardEnabled("activitiesEnabled"),onVisitDate:({card:e,date:t,allCards:o})=>{e.isLoading=!0;const n=o.filter(e=>e.subscription&&e.subscription["c1"]);n.forEach(e=>e.isLoading=!0),Q["a"].getEncounters(parseInt(""+this.patientId),{date:t}).then(o=>{this.sessionEncounterMap={},n.forEach(e=>{e.subscription&&e.subscription["c1"]&&(e.isLoading=!1,e.subscription["c1"]({encounters:o,card:e,date:t}))}),e.items=this.getActivitiesCardInfo(o),e.cache&&(e.cache[t]=e.items),t!==f["a"].getSessionDate()||Object(_["isEmpty"])(o)||(this.sessionEncounterMap=o.reduce((e,t)=>(e[t.type.name.toLowerCase()]=t.observations.reduce((e,t)=>e.concat(t.concept.concept_names),[]).map(e=>e.name.toLowerCase()),e),{})),e.isLoading=!1}).catch(o=>{console.error(o),e.items=[],e.isLoading=!1,e.cache&&(e.cache[t]=e.items),n.forEach(e=>e.isLoading=!1)})},onClick:e=>{e.isEnabled&&(e.isLoading?Object(B["e"])("Please wait..."):this.openModal(e.items,"Select Activities",R))}},{id:"c2",items:[],cache:{},color:"success",isLoading:!1,label:"Lab Orders",icon:K["S"],isEnabled:this.isCardEnabled("labEnabled"),onVisitDate:({card:e,date:t})=>{e.isLoading=!0,this.getLabOrderCardInfo(t).then(o=>{e.items=o,e.cache[t]=e.items,e.isLoading=!1}).catch(()=>{e.items=[],e.cache[t]=e.items,e.isLoading=!1})},onClick:e=>e.isEnabled&&this.$router.push("/art/encounters/lab/"+this.patientId)},{id:"c3",items:[],label:"Alerts",color:"danger",icon:K["W"],isLoading:!1,isInit:!1,isEnabled:this.isCardEnabled("alertsEnabled"),onVisitDate:({card:e})=>{if(e.isInit)return;const t=this.getPatientAlertCardInfo();"object"===typeof t&&"function"===typeof t.then&&(e.isLoading=!0,this.getPatientAlertCardInfo().then(t=>{t&&(e.items=t),e.isInit=!0,e.isLoading=!1}).catch(()=>{e.items=[],e.isInit=!0,e.isLoading=!1})),t&&(e.items=t)},onClick:()=>{}},{id:"c4",items:[],cache:{},label:"Medications",color:"warning",icon:K["S"],isLoading:!1,isEnabled:this.isCardEnabled("medicationsEnabled"),onVisitDate:({card:e,date:t})=>{e.isLoading=!0,V["a"].getOrderByPatient(parseInt(""+this.patientId),{start_date:t}).then(o=>{e.items=this.getMedicationCardInfo(o),e.cache&&(e.cache[t]=e.items),e.isLoading=!1}).catch(()=>{e.items=[],e.cache&&(e.cache[t]=e.items),e.isLoading=!1})},onClick:e=>{if(!e.isEnabled)return;if(e.isLoading)return Object(B["e"])("Please wait..");const t=["Medication","Start date","End date","Amount given"],o=e.items.map(e=>[e.other.drug.name,this.toDate(e.other.order.start_date),this.toDate(e.other.order.auto_expire_date),e.other.quantity]);this.openTableModal(t,o,"Medication History")}}];if("function"===typeof(null===(e=this.app)||void 0===e?void 0:e.overridePatientDashboardCards))for(const o of this.app.overridePatientDashboardCards()){const e=Object(_["findIndex"])(t,{id:o.id});e>=0&&(t[e]=o)}this.patientCards=t},launchSyncDialog(){Object(De["a"])().launchObservationDialog(this.patientId,{onDeleteEncounter:()=>this.init()})},isCardEnabled(e){var t;const o=null===(t=this.app)||void 0===t?void 0:t.configDefaultPatientDashboardCards;return!o||!(e in o)||(o[e]||!1)},async showLoader(e="Please wait...."){(await D["Y"].create({message:e,backdropDismiss:!1})).present()},clearLoader(){D["Y"].getTop().then(e=>e?D["Y"].dismiss():null)},toDate(e){return g["b"].toStandardHisDisplayFormat(e)},toTime(e){return g["b"].toStandardHisTimeFormat(e)},loadSavedEncounters(){Q["a"].getSavedEncounters(parseInt(""+this.patientId)).then(e=>this.savedEncounters=e)},updateCardVisitData(e,t=!1,o=""){this.patientCards.forEach(o=>{"object"===typeof o.cache&&o.cache[e]&&!t?o.items=o.cache[e]:o.isEnabled&&"function"===typeof o.onVisitDate?o.onVisitDate({card:o,invalidateCache:t,date:e,allCards:this.patientCards,patient:this.patient}):o.items=[]})},async getPatientVisitDates(e){return(await v["a"].getPatientVisits(e,!1)).map(e=>({label:this.toDate(e),value:e,other:{isActive:e===f["a"].getSessionDate()}}))},async getNextTask(){return De["b"].value?Object(De["a"])().nextPatientWorkflowActivity(this.patientId)||{}:Y["a"].getNextTaskParams(parseInt(""+this.patientId))},goToNextTask(){var e,t,o;if(null!==(e=this.nextTask)&&void 0!==e&&e.patientUrl&&De["b"].value)return this.$router.push(`${null===(o=this.nextTask)||void 0===o?void 0:o.patientUrl}/${this.patientId}`);Object(ee["c"])(null===(t=this.nextTask)||void 0===t?void 0:t.name,this.patientId)},onActiveVisitDate(e){this.activeVisitDate=e.value},getPatientCardInfo(e){const t="M"===e.gender?K["A"]:K["X"];return[{label:"Name",value:e.name,other:{icon:t}},{label:"Birthdate",value:`\n                    ${this.toDate(e.birthdate)}\n                    (${e.age}) \n                    (${e.nationalID})`},{label:"Current Village",value:e.currentVillage},{label:"Phone#",value:e.phone}]},getActivitiesCardInfo(e){return e.map(e=>({label:(""+e.type.name).toUpperCase(),value:this.toTime(e.encounter_datetime),other:{provider:Z["a"].getPersonFullName(e.provider_id),id:e.encounter_id,columns:["Observation","Value","Time"],onVoid:async t=>{await this.showLoader(),Q["a"].voidEncounter(e.encounter_id,t).then(()=>{this.clearLoader(),this.loadSavedEncounters(),this.updateCardVisitData(this.activeVisitDate,!0),this.getNextTask().then(e=>this.nextTask=e),Object(B["d"])("Encounter has been voided!",2e3)}).catch(e=>{this.clearLoader(),Object(B["c"])(""+e,32e3)})},getRows:async()=>{const t=[],{observations:o}=e;for(const e in o){let a="<UNKNOWN CONCEPT>";const c=o[e];try{var n;a=null!==c&&void 0!==c&&null!==(n=c.concept)&&void 0!==n&&n.concept_names?c.concept.concept_names[0].name:await X["a"].getConceptName(c.concept_id)}catch(i){console.error(c,i)}const s=await k["a"].resolvePrimaryValue(c),r=g["b"].toStandardHisTimeFormat(c.date_created);t.push([a,s,r])}return t}}}))},getMedicationCardInfo(e){return e.map(e=>({label:e.drug.name,value:this.toTime(e.order.start_date),other:e}))},async getLabOrderCardInfo(e){if("function"===typeof this.app.getPatientDashboardLabOrderCardItems)return this.app.getPatientDashboardLabOrderCardItems(this.patientId,e);const t=await I["a"].getOrders(parseInt(""+this.patientId),{date:e});return t.map(e=>({label:e.specimen.name,value:this.toTime(e.order_date)}))},async getPatientAlertCardInfo(){if("getPatientDashboardAlerts"in this.app)return this.app.getPatientDashboardAlerts(this.patient)},async changeApp(){const e=await C["a"].selectApplication("PatientDashboard",!0);e&&(e.programID!=this.programId?(this.programId=e.programID,this.$router.push("/patients/confirm?patient_barcode="+this.patient.nationalID)):this.init())},async showTasks(){if("primaryPatientActivites"in this.app){const e=[...this.app.primaryPatientActivites].map(e=>{const t=(e.encounterTypeName||e.name).toLowerCase();return"object"!==typeof e.taskCompletionChecklist||Object(_["isEmpty"])(this.sessionEncounterMap)?e.taskCompleted=!Object(_["isEmpty"])(this.sessionEncounterMap[t]):e.taskCompleted=e.taskCompletionChecklist.every(e=>Object(_["isArray"])(this.sessionEncounterMap[t])&&this.sessionEncounterMap[t].includes(e.toLowerCase())),e});this.openModal(e,"Tasks for",L,this.sessionDate)}},showOptions(){if("secondaryPatientActivites"in this.app){const e=this.app.secondaryPatientActivites;this.openModal(e,"Select Activity",L)}},async startModal(e,t){(await D["ab"].create({component:e,backdropDismiss:!1,cssClass:"large-modal",componentProps:t})).present()},openModal(e,t,o,n=""){this.startModal(o,{items:e,title:`${t}: ${n||this.toDate(this.activeVisitDate.toString())}`,taskParams:{patient:this.patient,gender:this.patient.gender,program:this.patientProgram,visitDate:this.activeVisitDate,patientID:this.patientId,savedEncounters:this.savedEncounters}})},openTableModal(e,t,o){this.startModal(G,{columns:e,rows:t,title:`${o}: ${this.toDate(this.activeVisitDate.toString())}`})},onCancel(){xe["a"].invalidate("ACTIVE_PATIENT"),xe["a"].invalidate("PATIENT_PROGRAM"),xe["a"].invalidate("PATIENT_LAB_ORDERS"),this.$router.push({path:"/"})}}});o("b475");const Te=P()(Ee,[["render",h],["__scopeId","data-v-e517ce84"]]);t["default"]=Te},"5b1c":function(e,t,o){},"5ea34":function(e,t,o){"use strict";o("86f3")},"71c3":function(e,t,o){"use strict";o.d(t,"a",(function(){return i}));var n=o("1c74");class i extends n["e"]{constructor(){super()}static create(e){return this.postJson("drug_orders",e)}static updateDispensationOrders(e){return this.postJson("dispensations",{program_id:this.getProgramID(),dispensations:e.map(e=>({date:this.getSessionDate(),drug_order_id:e["order_id"],quantity:e["quantity"]}))})}static getDrugOrderHistory(e){return this.getJson("drug_orders",{patient_id:e})}static getDrugOrders(e){return this.getJson("drug_orders",{patient_id:e,date:this.getSessionDate(),program_id:this.getProgramID()})}static getAllDrugOrders(e,t=1e3){return this.getJson("drug_orders",{patient_id:e,program_id:n["e"].getProgramID(),page_size:t})}static getLastDrugsReceived(e){return this.getJson(`patients/${e}/last_drugs_received`,{date:this.getSessionDate(),program_id:this.getProgramID()})}static getDrugDosages(e,t,o=this.getSessionDate()){const n={drug_id:t,date:o};return this.getJson(`programs/${this.getProgramID()}/patients/${e}/drug_doses`,n)}static getOrderByPatient(e,t){return this.getJson("/drug_orders",{patient_id:e,program_id:this.getProgramID(),...t})}}},"76df":function(e,t,o){"use strict";o.d(t,"a",(function(){return i}));var n=o("7f35");async function i(e,t="action-sheet-modal"){const o=await Object(n["c"])("Are you sure you want to void record?","Please specify reason for voiding this record",["Mistake/ Wrong Entry","Duplicate","System Error"],[{name:"Cancel",slot:"start"},{name:"Void",color:"danger",slot:"end",role:"action"}],"",t);o.selection&&"Void"===o.action&&await e(o.selection)}},"86f3":function(e,t,o){},"913b":function(e,t,o){"use strict";o("ada5")},ada5:function(e,t,o){},adc3:function(e,t,o){},b475:function(e,t,o){"use strict";o("adc3")},cbbc:function(e,t,o){"use strict";o("d128")},d128:function(e,t,o){},ec58:function(e,t,o){},eed0:function(e,t,o){"use strict";o("ec58")}}]);
//# sourceMappingURL=chunk-77c347de.85e0b9ff.js.map