{"version":3,"sources":["webpack:///./node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/templateLoader.js","webpack:///./node_modules/eslint-loader/index.js","webpack:///./node_modules/cache-loader/dist/cjs.js","webpack:///./src/apps/OPD/views/encounters/Dispensing.vue","webpack:///./src/views/EncounterMixin.vue","webpack:///./src/components/Forms/HisStandardForm.vue"],"names":["render","_ctx","_cache","$props","$setup","$data","$options","_component_his_standard_form","_resolveComponent","_openBlock","_createBlock","skipSummary","cancelDestinationPath","cancelDestination","fields","DispensationService","AppEncounterService","constructor","patientID","providerID","drugHistory","currentDrugOrder","getDrugHistory","getCurrentOrder","buildDispensations","orderId","quantity","date","saveDispensations","dispensations","postJson","getProgramID","void","res","DrugOrderService","getDrugOrderHistory","getDrugOrders","Promise","all","calcCompletePack","drug","units","drugOrderBarcodes","barcodes","sort","a","b","tabs","length","i","parseInt","smallestAvailableTab","completePack","defineComponent","mixins","EncounterMixinVue","data","dispensation","watch","patient","getID","loadCurrentDrugOrder","loadDrugHistory","getFields","deep","methods","item","other","order_id","value","buildMedicationHistory","dateA","Date","order","start_date","dateB","map","d","medication","name","HisDate","toStandardHisDisplayFormat","amount","buildOrderOptions","label","drug_id","calculateCompletePack","getPackSizesRows","drugId","availableStock","packs","getDrugPackSizes","packSize","parseFloat","amount_needed","isDoneDispensing","orders","o","every","Boolean","option","isOk","totalTabs","toString","amountNeeded","percentageGiven","alertConfirmation","id","helpText","type","FieldType","TT_DRUG_DISPENSER","onValueUpdate","l","gotoPatientDashboard","onValue","isBarcodeScanned","voided","voidOrder","isValidDispensation","dispensed","toastWarning","config","medicationHistory","toolbarInfo","getFullName","getGender","getBirthdate","hiddenFooterBtns","options","__exports__","Service","getSessionDate","getJson","pageSize","drugID","params","patientId","FlowState","dformat","ENCOUNTER_GUIDELINES","priority","actions","alert","outcomeStartDate","action","infoActionSheet","slot","color","GO_TO_PATIENT_DASHBOARD","CHANGE_PATIENT_OUTCOME","CONTINUE","conditions","outcome","startDate","sessionDate","birthDate","CHANGE_SESSION_DATE","selection","providers","encounterName","apiDate","modal","optionsActionSheet","role","flowState","SET_PROVIDER","isBdeMode","isBDE","components","HisStandardForm","facts","ready","handler","route","patient_id","Store","get","then","patientData","setEncounterFacts","checkEncounterGuidelines","immediate","computed","patientDashboardUrl","runflowState","state","states","username","split","provider","find","person_id","$router","push","EXIT","findings","matchToGuidelines","index","finding","status","program","e","console","error","toastDanger","ProgramService","getCachedApiDate","$route","toUpperCase","usernameA","usernameB","p","isEmpty","person","names","latestName","given_name","family_name","toOption","mapStrToOptions","items","path","nextTask","yesNoOptions","toYesNoOption","values","mapOptions","yesNoUnknownOptions","resolveObs","obs","tag","Object","filter","reduce","accum","cur","Array","isArray","concat","inArray","arr","expression","validateSeries","condition","_resolveDynamicComponent","formType","activeField","onOnFinish","onFinish","onFinishAction","onOnIndex","onIndex","TouchScreenForm","emits","props","Function","default","String","required","formData","computedData","this","$emit","isCondition","ignored","undefined","prop","includes","sortByPriority","sortByWeight","weight","guidelines","target","targetEvent","sortBy","matches","guidelineIndex","targetValidations","some","title","description","text","info"],"mappings":"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","file":"js/chunk-0d8a9648.e9388854.js","sourcesContent":["import { resolveDynamicComponent as _resolveDynamicComponent, openBlock as _openBlock, createBlock as _createBlock } from \"vue\"\n\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  return (_openBlock(), _createBlock(_resolveDynamicComponent(_ctx.formType), {\n    fields: _ctx.fields,\n    skipSummary: _ctx.skipSummary,\n    activeField: _ctx.activeField,\n    cancelDestinationPath: _ctx.cancelDestinationPath,\n    onOnFinish: _ctx.onFinish,\n    onFinish: _ctx.onFinishAction,\n    onOnIndex: _ctx.onIndex\n  }, null, 8, [\"fields\", \"skipSummary\", \"activeField\", \"cancelDestinationPath\", \"onOnFinish\", \"onFinish\", \"onOnIndex\"]))\n}","/**\n * Compares patient facts against a predefined guideline Object.\n*/\nexport interface DescriptionInterface {\n    color?: 'primary' | 'secondary' | 'danger' | 'warning';\n    info: Function;\n    text?: string;\n    show: 'onChecked' | 'always';\n}\n\nexport interface GuideLineInterface {\n    title?: string;\n    concept?: string;\n    weight?: number;\n    priority?: number;\n    conditions: Record<string, Function>;\n    actions?: Record<string, any>; //TODO: should <key, Function>\n    data?: Record<string, any>;\n    description?: DescriptionInterface;\n    target?: string;\n    targetEvent?: string;\n}\n\n/**\n * Match the facts with guidelines\n * @param facts \n * @param conditions \n * @returns \n */\nfunction isCondition(facts: Record<string, any>, conditions: Record<string, Function>): boolean {\n    const state = [] \n    const ignored = [-1, '', null, undefined]\n\n    for(const prop in conditions) {\n        if (!(prop in facts)) \n            continue\n        \n        const value = facts[prop]\n        if (ignored.includes(value)) {\n            state.push(false)\n            continue\n        }\n\n        state.push(conditions[prop](value, facts))\n    }\n    return state.every(Boolean)\n}\n\n/**\n * Sort guidelines in the order of importance/relevance\n * @param findings \n * @returns \n */\nfunction sortByPriority(findings: GuideLineInterface[]) {\n    return findings.sort((a, b) => (a.priority && b.priority) && a.priority < b.priority ? -1 : 1)\n}\n\nfunction sortByWeight(findings: GuideLineInterface[]) {\n    return findings.sort((a, b) => (a.weight && b.weight) && a.weight > b.weight ? -1 : 1)\n}\n\nexport function logFindingsByWeight(guidelines: Record<string, GuideLineInterface>) {\n    const findings: any = Object.keys(guidelines).map(i => ({ name: i, weight: guidelines[i].weight}))\n    console.log(sortByWeight(findings).map((i: any) => `${i.weight} -> ${i.name}`))\n}\n\n/**\n * Check the guideline for matching facts and return matching object \n * @param facts: key value pair for used for searching in guidelines\n * @param guidelines: A dictionary containing fixed rules/validations that conforms to GuideLineInterface\n * @param target: Used for matching a target defined in a guidlines before executing conditions\n * @param targetEvent: used for matching a target event in a guideline before executing conditions\n * @returns\n */\nexport function matchToGuidelines(\n    facts: Record<string, any>, \n    guidelines: Record<string, GuideLineInterface>,\n    target='', \n    targetEvent='',\n    sortBy='priority' as 'priority' | 'weight'): Array<GuideLineInterface> {\n    const matches = []\n    for(const guidelineIndex in guidelines) {\n        const data: GuideLineInterface = guidelines[guidelineIndex]\n        const targetValidations = [\n            (data.target && target && data.target != target),\n            (data.targetEvent && targetEvent \n                && data.targetEvent != targetEvent)\n        ]\n\n        if (targetValidations.some(Boolean)) {\n            continue\n        }\n\n        if (isCondition(facts, data.conditions)) {\n            data.title = guidelineIndex\n            if (data.description) {\n                data.description.text = data.description.info(facts)\n            }\n            matches.push(data)\n        }\n    }\n    return sortBy === 'priority' ? sortByPriority(matches) : sortByWeight(matches)\n}\n","\nimport TouchScreenForm from \"@/components/Forms/TouchScreenForm.vue\";\nimport { defineComponent, PropType } from \"vue\";\nimport { Field } from \"./FieldInterface\";\n\nexport default defineComponent({\n    name: \"HisStandardForm\",\n    components: { TouchScreenForm },\n    emits: [\n        'onFinish',\n        'onIndex'\n    ],\n    data: () => ({\n        formType: 'touch-screen-form' as string\n    }),\n    props: {\n        onFinishAction: {\n            type: Function\n        },\n        skipSummary: {\n            type: Boolean,\n            default: false\n        },\n        activeField: {\n            type: String\n        },\n        fields: {\n            type: Object as PropType<Field[]>,\n            required: true\n        },\n        cancelDestinationPath: {\n            type: String,\n            required: false,\n        }\n    },\n    methods: {\n        onFinish(formData: any, computedData: any) {\n            this.$emit('onFinish', formData, computedData)\n        },\n        onIndex(i: number) {\n            this.$emit('onIndex', i)\n        }\n    }\n})\n","import { render } from \"./Dispensing.vue?vue&type=template&id=1e367495&ts=true\"\nimport script from \"./Dispensing.vue?vue&type=script&lang=ts\"\nexport * from \"./Dispensing.vue?vue&type=script&lang=ts\"\n\nimport exportComponent from \"/home/andrew-dev/Projects/HIS-Core/node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","import script from \"./EncounterMixin.vue?vue&type=script&lang=ts\"\nexport * from \"./EncounterMixin.vue?vue&type=script&lang=ts\"\n\nconst __exports__ = script;\n\nexport default __exports__","import { render } from \"./HisStandardForm.vue?vue&type=template&id=6daa0375&ts=true\"\nimport script from \"./HisStandardForm.vue?vue&type=script&lang=ts\"\nexport * from \"./HisStandardForm.vue?vue&type=script&lang=ts\"\n\nimport exportComponent from \"/home/andrew-dev/Projects/HIS-Core/node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__"],"sourceRoot":""}