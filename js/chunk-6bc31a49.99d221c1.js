(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-6bc31a49"],{"38e6":function(e,t,o){"use strict";var n=o("7a23");const l={id:"report-content"},a={id:"moh_template"},c={key:0,class:"main-title"},i={key:1,class:"main-title"},r={key:2,class:"main-title"},s={key:3,class:"table-section"},d={key:4,colspan:2,class:"table-section"},b={key:5},p=["onClick"];function m(e,t,o,m,u,O){const j=Object(n["resolveComponent"])("layout");return Object(n["openBlock"])(),Object(n["createBlock"])(j,{logo:"login-logos/Malawi-Coat_of_arms_of_arms.png",title:e.data.title,toCSV:e.exportCsv,toPDF:e.exportPdf,period:e.data.period,dateGenerated:e.data.dateGenerated,refreshReport:e.generate,configure:e.configure},{default:Object(n["withCtx"])(()=>[Object(n["createElementVNode"])("div",l,[Object(n["createElementVNode"])("table",a,[(Object(n["openBlock"])(!0),Object(n["createElementBlock"])(n["Fragment"],null,Object(n["renderList"])(e.indicators,(t,o)=>(Object(n["openBlock"])(),Object(n["createElementBlock"])("tr",{key:o},[t.isMainTitle?(Object(n["openBlock"])(),Object(n["createElementBlock"])("td",c,"#")):Object(n["createCommentVNode"])("",!0),t.isMainTitle?(Object(n["openBlock"])(),Object(n["createElementBlock"])("td",i,Object(n["toDisplayString"])(t.label),1)):Object(n["createCommentVNode"])("",!0),t.isMainTitle?(Object(n["openBlock"])(),Object(n["createElementBlock"])("td",r,"#")):Object(n["createCommentVNode"])("",!0),t.isSectionTitle?(Object(n["openBlock"])(),Object(n["createElementBlock"])("td",s)):Object(n["createCommentVNode"])("",!0),t.isSectionTitle?(Object(n["openBlock"])(),Object(n["createElementBlock"])("td",d,Object(n["toDisplayString"])(t.label),1)):Object(n["createCommentVNode"])("",!0),t.isMainTitle||t.isSectionTitle?Object(n["createCommentVNode"])("",!0):(Object(n["openBlock"])(),Object(n["createElementBlock"])("td",b,Object(n["toDisplayString"])(t.index),1)),t.isMainTitle||t.isSectionTitle?Object(n["createCommentVNode"])("",!0):(Object(n["openBlock"])(),Object(n["createElementBlock"])("td",{key:6,style:Object(n["normalizeStyle"])(t.style||{}),class:"table-key"},Object(n["toDisplayString"])(t.label),5)),t.isMainTitle||t.isSectionTitle?Object(n["createCommentVNode"])("",!0):(Object(n["openBlock"])(),Object(n["createElementBlock"])("td",{key:7,class:"table-value",onClick:o=>e.drill(t)},Object(n["toDisplayString"])(t._value),9,p))]))),128))])])]),_:1},8,["title","toCSV","toPDF","period","dateGenerated","refreshReport","configure"])}var u=o("954d"),O=o("d20e"),j=o("1c74"),f=o("b5e4"),v=o("ba82"),y=o("6179"),g=o("cf9e"),_=o("d867"),h=o("5a0c"),C=o.n(h),k=o("2ef0");const V=Object(n["reactive"])({model:[],indicators:{},dateGenerated:"",startDate:"",endDate:"",title:"",period:""}),x=Object(n["computed"])(()=>V.model.map(e=>{if("function"===typeof e.value){const t=e.value(V.indicators);Array.isArray(t)?(e._value=""+t.length,e._drill=t):e._value=t}return e})),w=Object(n["computed"])(()=>{const[e,...t]=x.value.map(e=>[e.index||"",e.label,e.index?e._value||0:""]);return{rows:t,columns:[["#",x.value[0].label,"#"]]}});function N(e){e.title!=V.title&&(V.indicators={}),V.title=e.title,V.model=e.indicators;const t=async(t="",o="")=>{(await _["Y"].create({message:"Please wait .."})).present();try{const n=new O["a"](e.name);n.startDate=t||V.startDate,n.endDate=o||V.endDate,V.indicators=await n.requestReport({type:"moh"}),V.dateGenerated=C()(j["e"].getSessionDate()).format("DD/MMM/YYYY HH:mm:ss")}catch(n){Object(f["e"])("Unable to generate report")}_["Y"].dismiss()},o=()=>Object(g["a"])({title:V.title,onFinish:(e,o,n)=>{V.period=n,V.startDate=e,V.endDate=o,t()}}),l=e=>{Array.isArray(e._drill)&&Object(y["a"])(e.label,e._drill)},a=()=>{const e=document.getElementById("report-content");e&&Object(v["c"])(`\n                <html>\n                <head>\n                    <link rel="stylesheet" media="print"  href="/assets/css/hts-report-style-print.css"/>\n                    <style> \n                        #moh_template { border: solid 1px #3333; width: 100%; } td { font-size: var(--his-sm-font-size); padding: 0.3em; } .main-title { background: #8EAADB; font-weight: bold; border: solid 3px black; } .table-value { padding: 1em; text-align: center; color: #337ab7; font-weight: bold; font-size: var(--his-md-font-size); border: solid 2px black; } .table-section { font-weight: bold; background: #D9E2F3; border: solid 3px black; }\n                    </style>\n                </head>\n                <body>\n                    ${e.innerHTML}\n                </body>\n                </html>\n            `,50)},c=()=>{const{rows:e,columns:t}=w.value;Object(v["b"])(t,Object(v["a"])(e,V),`MOH-${V.title}-${j["e"].getLocationName()}-${V.period}`)};return Object(n["onMounted"])(()=>Object(k["isEmpty"])(V.indicators)&&o()),{drill:l,data:V,indicators:x,exportable:w,generate:t,exportPdf:a,exportCsv:c,configure:o}}var S=Object(n["defineComponent"])({components:{Layout:u["a"]},props:{params:{type:Object,required:!0}},setup(e){return N(e.params)}}),B=(o("7b22"),o("d959")),D=o.n(B);const E=D()(S,[["render",m],["__scopeId","data-v-5c21aaf2"]]);t["a"]=E},5454:function(e,t,o){},"7b22":function(e,t,o){"use strict";o("bdcc")},"954d":function(e,t,o){"use strict";var n=o("7a23");const l={class:"header-text-list"},a={key:0},c={id:"report-content"};function i(e,t,o,i,r,s){const d=Object(n["resolveComponent"])("ion-img"),b=Object(n["resolveComponent"])("ion-thumbnail"),p=Object(n["resolveComponent"])("ion-label"),m=Object(n["resolveComponent"])("ion-item"),u=Object(n["resolveComponent"])("ion-toolbar"),O=Object(n["resolveComponent"])("ion-header"),j=Object(n["resolveComponent"])("ion-content"),f=Object(n["resolveComponent"])("ion-chip"),v=Object(n["resolveComponent"])("ion-footer"),y=Object(n["resolveComponent"])("his-footer"),g=Object(n["resolveComponent"])("ion-page");return Object(n["openBlock"])(),Object(n["createBlock"])(g,null,{default:Object(n["withCtx"])(()=>[Object(n["createVNode"])(O,null,{default:Object(n["withCtx"])(()=>[Object(n["createVNode"])(u,null,{default:Object(n["withCtx"])(()=>[Object(n["createVNode"])(m,null,{default:Object(n["withCtx"])(()=>[e.reportLogo?(Object(n["openBlock"])(),Object(n["createBlock"])(b,{key:0},{default:Object(n["withCtx"])(()=>[Object(n["createVNode"])(d,{src:e.reportLogo},null,8,["src"])]),_:1})):Object(n["createCommentVNode"])("",!0),Object(n["createVNode"])(p,null,{default:Object(n["withCtx"])(()=>[Object(n["createElementVNode"])("ul",l,[Object(n["createElementVNode"])("li",null,[Object(n["createElementVNode"])("b",null,Object(n["toDisplayString"])(e.title),1)]),e.period?(Object(n["openBlock"])(),Object(n["createElementBlock"])("li",a,[Object(n["createElementVNode"])("b",null,Object(n["toDisplayString"])(e.period),1)])):Object(n["createCommentVNode"])("",!0)])]),_:1})]),_:1})]),_:1})]),_:1}),Object(n["createVNode"])(j,{"scroll-y":"","scroll-x":""},{default:Object(n["withCtx"])(()=>[Object(n["createElementVNode"])("div",c,[Object(n["renderSlot"])(e.$slots,"default",{},void 0,!0)])]),_:3}),Object(n["createVNode"])(v,null,{default:Object(n["withCtx"])(()=>[Object(n["createVNode"])(u,null,{default:Object(n["withCtx"])(()=>[Object(n["createVNode"])(f,{color:"primary"},{default:Object(n["withCtx"])(()=>[Object(n["createTextVNode"])("Date Generated: "),Object(n["createElementVNode"])("b",null,Object(n["toDisplayString"])(e.dateGenerated),1)]),_:1}),Object(n["createVNode"])(f,{color:"primary"},{default:Object(n["withCtx"])(()=>[Object(n["createTextVNode"])("APP version: "),Object(n["createElementVNode"])("b",null,Object(n["toDisplayString"])(e.appVersion),1)]),_:1}),Object(n["createVNode"])(f,{color:"primary"},{default:Object(n["withCtx"])(()=>[Object(n["createTextVNode"])("API version: "),Object(n["createElementVNode"])("b",null,Object(n["toDisplayString"])(e.apiVersion),1)]),_:1})]),_:1})]),_:1}),Object(n["createVNode"])(y,{color:"dark",btns:e.buttons},null,8,["btns"])]),_:3})}o("14d9");var r=o("d867"),s=o("1718"),d=o("0f25"),b=o("6605"),p=o("1c74"),m=Object(n["defineComponent"])({components:{IonLabel:r["x"],IonItem:r["w"],HisFooter:d["a"],IonPage:r["D"],IonHeader:r["q"],IonContent:r["n"],IonToolbar:r["T"],IonChip:r["l"],IonFooter:r["o"],IonThumbnail:r["R"],IonImg:r["s"]},props:{title:{type:String},period:{type:String},logo:{type:String},toCSV:{type:Function,required:!1},toPDF:{type:Function,required:!1},configure:{type:Function,required:!1},refreshReport:{type:Function,required:!0},dateGenerated:{type:String,default:"-"}},setup(e){const t=Object(b["i"])(),o=[],l=p["e"].getCoreVersion(),a=p["e"].getApiVersion(),c=Object(n["computed"])(()=>e.logo?Object(s["a"])(e.logo):null);function i(e,t){return{name:e.name||"Btn",size:e.size||"large",slot:e.slot||"start",color:e.color||"primary",visible:e.visible||!0,onClick:t}}return"function"===typeof e.toCSV&&o.push(i({name:"CSV"},e.toCSV)),"function"===typeof e.toPDF&&o.push(i({name:"PDF"},e.toPDF)),"function"===typeof e.configure&&o.push(i({name:"Set Date",slot:"end",color:"primary"},()=>e.configure&&e.configure())),o.push(i({name:"Refresh",slot:"end",color:"warning"},()=>e.refreshReport())),o.push(i({name:"Finish",slot:"end",color:"success"},()=>t.push("/"))),{buttons:o,appVersion:l,apiVersion:a,reportLogo:c}}}),u=(o("f47e"),o("d959")),O=o.n(u);const j=O()(m,[["render",i],["__scopeId","data-v-3e4a390e"]]);t["a"]=j},bdcc:function(e,t,o){},d6ac:function(e,t,o){"use strict";o.r(t);var n=o("7a23");function l(e,t,o,l,a,c){const i=Object(n["resolveComponent"])("moh-template"),r=Object(n["resolveComponent"])("ion-page");return Object(n["openBlock"])(),Object(n["createBlock"])(r,null,{default:Object(n["withCtx"])(()=>[Object(n["createVNode"])(i,{params:e.params},null,8,["params"])]),_:1})}var a=o("d867"),c=o("38e6"),i=Object(n["defineComponent"])({components:{IonPage:a["D"],MohTemplate:c["a"]},setup(){const e={paddingRight:"50%",fontWeight:"bold",textAlign:"right"},t={title:"HTS Summary",name:"HTS SUMMARY",indicators:[{isMainTitle:!0,label:"HIV testing summary (from initial and confirmatory register)"},{label:"Total clients tested for HIV",index:"1",value:e=>e["total_clients_tested_for_hiv"]},{isSectionTitle:!0,label:"HIV test results by sex"},{label:"New negative",index:"2",value:e=>e["new_negative"]},{label:"New positive total",index:"3",value:e=>e["new_positive_total"]},{label:"Male",index:"4",style:e,value:e=>e["new_positive_male"]},{label:"Female",index:"5",style:e,value:e=>e["new_positive_female"]},{label:"Confirmatory positive total (prev. pos. professional test)",index:"6",value:e=>e["confirmatory_positive_total_prev_pos_professional_test"]},{label:"Male",index:"7",style:e,value:e=>e["confirmed_positive_male"]},{label:"Female",index:"8",style:e,value:e=>e["confirmed_positive_female"]},{label:"Confirmatory inconclusive total (prev. pos. professional test)",index:"9",value:e=>e["confirmatory_inconclusive_total_prev_pos_professional_test"]},{label:"Male",index:"10",style:e,value:e=>e["confirmed_inconclusive_male"]},{label:"Female",index:"11",style:e,value:e=>e["confirmed_inconclusive_female"]},{label:"New exposed infant",index:"12",value:e=>e["new_exposed_infant"]},{label:"New inconclusive",index:"13",value:e=>e["new_inconclusive"]}]};return{params:t}}}),r=o("d959"),s=o.n(r);const d=s()(i,[["render",l]]);t["default"]=d},f47e:function(e,t,o){"use strict";o("5454")}}]);
//# sourceMappingURL=chunk-6bc31a49.99d221c1.js.map