(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-f4316e34"],{2012:function(e,t,o){},2048:function(e,t,o){"use strict";var c=o("7a23");function n(e,t,o,n,l,a){const r=Object(c["resolveComponent"])("v2Datatable"),s=Object(c["resolveComponent"])("ion-page");return Object(c["openBlock"])(),Object(c["createBlock"])(s,null,{default:Object(c["withCtx"])(()=>[Object(c["createVNode"])(r,{title:e.title,subtitle:e.subtitle,columnData:e.reportData,columns:e.columns,"on-finish":e.onFinish,rowsPerPage:e.ITEMS_PER_PAGE},null,8,["title","subtitle","columnData","columns","on-finish","rowsPerPage"])]),_:1})}o("14d9");var l=o("d867"),a=o("99ae"),r=o("6605"),s=o("2ef0"),i=o("8734"),d=o("23e6"),b=o("0011");const u=20,O={};var j=Object(c["defineComponent"])({props:{title:{type:String,default:"Drilldown"},patientIdentifiers:{type:Object},onFinish:{type:Function}},components:{IonPage:l["D"],v2Datatable:a["a"]},setup(e){const t=Object(c["ref"])("-"),o=Object(c["ref"])([]),n=Object(r["i"])(),l=[[{label:"National ID",ref:"national_id"},{label:"First name",ref:"given_name"},{label:"Last name",ref:"family_name"},{label:"Birthdate",ref:"birthdate"},{label:"Action",ref:"patient_id",exportable:!1,tdClick:({data:e})=>n.push({path:"/patient/dashboard/"+e.patient_id}),value:()=>"View client"}]];return Object(c["watch"])(()=>e.patientIdentifiers,async e=>{if(o.value=[],t.value="Total: 0",!e||!e.length)return;const c=Object(s["chunk"])(e,u);for(const l of c){for(const c of l){try{let e=null;O[c]?e=O[c]:(e=new d["a"](await d["a"].findByID(c)),O[c]=e),o.value.push({patient_id:e.getID(),national_id:e.getNationalID(),given_name:e.getGivenName(),family_name:e.getFamilyName(),birthdate:Object(b["g"])(e.getBirthdate())})}catch(n){console.error(n),o.value.push({})}t.value=`Total: ${o.value.length} of ${(e||[]).length}`}await Object(i["a"])(500)}},{immediate:!0}),{columns:l,subtitle:t,reportData:o,ITEMS_PER_PAGE:u}}}),m=o("6b0d"),p=o.n(m);const h=p()(j,[["render",n]]);t["a"]=h},"349c":function(e,t,o){"use strict";var c=o("7a23");const n={key:0},l={class:"his-sm-text"},a={id:"report-content"},r={class:"art-report-theme"},s={class:"stick-report-header"},i=["colspan","rowspan","onClick"],d={colspan:7},b={class:"his-sm-text"},u=["onClick"],O={class:"his-sm-text"},j={colspan:7},m={class:"his-sm-text"},p=["onClick"],h={class:"his-sm-text"},f={colspan:7},k={class:"his-sm-text"},v=["onClick"],C={class:"his-sm-text"},g={colspan:7},y={class:"his-sm-text"},V={colspan:"2"},N={class:"his-sm-text"},x={colspan:"6"},w=["onClick"];function B(e,t,o,B,E,D){const _=Object(c["resolveComponent"])("ion-title"),S=Object(c["resolveComponent"])("ion-icon"),I=Object(c["resolveComponent"])("ion-button"),P=Object(c["resolveComponent"])("ion-buttons"),T=Object(c["resolveComponent"])("ion-toolbar"),F=Object(c["resolveComponent"])("ion-header"),R=Object(c["resolveComponent"])("ion-label"),z=Object(c["resolveComponent"])("ion-item"),L=Object(c["resolveComponent"])("ion-content"),A=Object(c["resolveComponent"])("ion-footer");return Object(c["openBlock"])(),Object(c["createElementBlock"])(c["Fragment"],null,[Object(c["createVNode"])(F,null,{default:Object(c["withCtx"])(()=>[Object(c["createVNode"])(T,null,{default:Object(c["withCtx"])(()=>[Object(c["createVNode"])(_,{class:"his-md-text"},{default:Object(c["withCtx"])(()=>[Object(c["createTextVNode"])(Object(c["toDisplayString"])(e.title)+" ",1),e.subtitle?(Object(c["openBlock"])(),Object(c["createElementBlock"])("br",n)):Object(c["createCommentVNode"])("",!0),Object(c["createElementVNode"])("span",l,Object(c["toDisplayString"])(e.subtitle),1)]),_:1}),Object(c["createVNode"])(P,{slot:"end"},{default:Object(c["withCtx"])(()=>["function"===typeof e.onConfigure?(Object(c["openBlock"])(),Object(c["createBlock"])(I,{key:0,onClick:e.onConfigure},{default:Object(c["withCtx"])(()=>[Object(c["createVNode"])(S,{size:"large",icon:e.document},null,8,["icon"])]),_:1},8,["onClick"])):Object(c["createCommentVNode"])("",!0),"function"===typeof e.onRefresh?(Object(c["openBlock"])(),Object(c["createBlock"])(I,{key:1,onClick:e.onRefresh,color:"success",size:"large"},{default:Object(c["withCtx"])(()=>[Object(c["createVNode"])(S,{size:"large",icon:e.sync},null,8,["icon"])]),_:1},8,["onClick"])):Object(c["createCommentVNode"])("",!0)]),_:1})]),_:1})]),_:1}),Object(c["createVNode"])(L,{"scroll-y":"","scroll-x":""},{default:Object(c["withCtx"])(()=>[Object(c["createElementVNode"])("div",a,[Object(c["createElementVNode"])("table",r,[Object(c["createElementVNode"])("thead",s,[(Object(c["openBlock"])(!0),Object(c["createElementBlock"])(c["Fragment"],null,Object(c["renderList"])(e.columnsMinusOne,(t,o)=>(Object(c["openBlock"])(),Object(c["createElementBlock"])("tr",{key:o},[(Object(c["openBlock"])(!0),Object(c["createElementBlock"])(c["Fragment"],null,Object(c["renderList"])(t,(t,n)=>{var l,a;return Object(c["openBlock"])(),Object(c["createElementBlock"])("th",{key:n,colspan:(null===t||void 0===t||null===(l=t.span)||void 0===l?void 0:l.thColspan)||1,rowspan:(null===t||void 0===t||null===(a=t.span)||void 0===a?void 0:a.thRowspan)||1,onClick:o=>e.sortColumn(t.ref)},[Object(c["createVNode"])(z,{lines:"none"},{default:Object(c["withCtx"])(()=>[e.columnSorted&&e.columnSorted===t.ref?(Object(c["openBlock"])(),Object(c["createBlock"])(S,{key:0,icon:"asc"===e.sortOrder?e.arrowUp:e.arrowDown},null,8,["icon"])):Object(c["createCommentVNode"])("",!0),o<e.columns.length-1?(Object(c["openBlock"])(),Object(c["createBlock"])(R,{key:1,class:"ion-text-center"},{default:Object(c["withCtx"])(()=>[Object(c["createElementVNode"])("b",null,Object(c["toDisplayString"])(t.label),1)]),_:2},1024)):Object(c["createCommentVNode"])("",!0)]),_:2},1024)],8,i)}),128))]))),128))]),Object(c["createElementVNode"])("tbody",null,[Object(c["createElementVNode"])("tr",null,[Object(c["createElementVNode"])("td",d,[Object(c["createElementVNode"])("span",b,Object(c["toDisplayString"])(e.columns[4][0].label),1)])]),(Object(c["openBlock"])(!0),Object(c["createElementBlock"])(c["Fragment"],null,Object(c["renderList"])(e.sectionOne,(t,o)=>(Object(c["openBlock"])(),Object(c["createElementBlock"])("tr",{key:o},[(Object(c["openBlock"])(!0),Object(c["createElementBlock"])(c["Fragment"],null,Object(c["renderList"])(t.row||[],(t,o)=>{var n;return Object(c["openBlock"])(),Object(c["createElementBlock"])("td",{key:o,onClick:()=>e.onClickTablecell(t),class:Object(c["normalizeClass"])({"clickable-cell":null===t||void 0===t||null===(n=t.column)||void 0===n?void 0:n.tdClick})},[Object(c["createElementVNode"])("b",O,Object(c["toDisplayString"])(t.value),1)],10,u)}),128))]))),128)),Object(c["createElementVNode"])("tr",null,[Object(c["createElementVNode"])("td",j,[Object(c["createElementVNode"])("span",m,Object(c["toDisplayString"])(e.columns[5][0].label),1)])]),(Object(c["openBlock"])(!0),Object(c["createElementBlock"])(c["Fragment"],null,Object(c["renderList"])(e.sectionTwo,(t,o)=>(Object(c["openBlock"])(),Object(c["createElementBlock"])("tr",{key:o},[(Object(c["openBlock"])(!0),Object(c["createElementBlock"])(c["Fragment"],null,Object(c["renderList"])(t.row,(t,o)=>{var n;return Object(c["openBlock"])(),Object(c["createElementBlock"])("td",{key:o,onClick:()=>e.onClickTablecell(t),class:Object(c["normalizeClass"])({"clickable-cell":null===t||void 0===t||null===(n=t.column)||void 0===n?void 0:n.tdClick})},[Object(c["createElementVNode"])("span",h,Object(c["toDisplayString"])(t.value),1)],10,p)}),128))]))),128)),Object(c["createElementVNode"])("tr",null,[Object(c["createElementVNode"])("td",f,[Object(c["createElementVNode"])("span",k,Object(c["toDisplayString"])(e.columns[6][0].label),1)])]),(Object(c["openBlock"])(!0),Object(c["createElementBlock"])(c["Fragment"],null,Object(c["renderList"])(e.sectionThree,(t,o)=>(Object(c["openBlock"])(),Object(c["createElementBlock"])("tr",{key:o},[(Object(c["openBlock"])(!0),Object(c["createElementBlock"])(c["Fragment"],null,Object(c["renderList"])(t.row,(t,o)=>{var n;return Object(c["openBlock"])(),Object(c["createElementBlock"])("td",{key:o,onClick:()=>e.onClickTablecell(t),class:Object(c["normalizeClass"])({"clickable-cell":null===t||void 0===t||null===(n=t.column)||void 0===n?void 0:n.tdClick})},[Object(c["createElementVNode"])("span",C,Object(c["toDisplayString"])(t.value),1)],10,v)}),128))]))),128)),Object(c["createElementVNode"])("tr",null,[Object(c["createElementVNode"])("td",g,[Object(c["createElementVNode"])("span",y,Object(c["toDisplayString"])(e.columns[7][0].label),1)])]),(Object(c["openBlock"])(!0),Object(c["createElementBlock"])(c["Fragment"],null,Object(c["renderList"])(e.sectionTotals,(t,o)=>(Object(c["openBlock"])(),Object(c["createElementBlock"])("tr",{key:o},[(Object(c["openBlock"])(!0),Object(c["createElementBlock"])(c["Fragment"],null,Object(c["renderList"])(t.row,(t,o)=>{var n;return Object(c["openBlock"])(),Object(c["createElementBlock"])(c["Fragment"],{key:o},[Object(c["createElementVNode"])("td",V,[Object(c["createElementVNode"])("span",N,Object(c["toDisplayString"])(t.column.label),1)]),Object(c["createElementVNode"])("td",x,[Object(c["createElementVNode"])("span",{class:Object(c["normalizeClass"])(["his-sm-text",{"clickable-cell":null===t||void 0===t||null===(n=t.column)||void 0===n?void 0:n.tdClick}]),onClick:()=>e.onClickTablecell(t)},Object(c["toDisplayString"])(t.value),11,w)])],64)}),128))]))),128))])])])]),_:1}),Object(c["createVNode"])(A,null,{default:Object(c["withCtx"])(()=>[Object(c["createVNode"])(T,{color:"dark"},{default:Object(c["withCtx"])(()=>[Object(c["createVNode"])(I,{onClick:t[0]||(t[0]=t=>e.toCSV()),size:"large"},{default:Object(c["withCtx"])(()=>[Object(c["createTextVNode"])(" CSV ")]),_:1}),Object(c["createVNode"])(I,{onClick:t[1]||(t[1]=t=>e.toPDF()),size:"large"},{default:Object(c["withCtx"])(()=>[Object(c["createTextVNode"])(" PDF ")]),_:1}),Object(c["createVNode"])(I,{onClick:e.finish,color:"success",size:"large",slot:"end"},{default:Object(c["withCtx"])(()=>[Object(c["createTextVNode"])(" Finish ")]),_:1},8,["onClick"])]),_:1})]),_:1})],64)}o("14d9"),o("13d5");var E=o("d867"),D=o("ff79"),_=o("2ef0"),S=o("ba82"),I=o("1c74"),P=o("6605"),T=o("5a0c"),F=o.n(T),R=Object(c["defineComponent"])({components:{IonToolbar:E["T"],IonItem:E["w"],IonIcon:E["r"],IonLabel:E["x"],IonTitle:E["S"],IonHeader:E["q"],IonButton:E["d"],IonFooter:E["o"],IonContent:E["n"],IonButtons:E["e"]},props:{title:{type:String,default:"Report"},subtitle:{type:String},columns:{type:Object,required:!0},columnData:{type:Array,default:()=>[]},onFinish:{type:Function},onRefresh:{type:Function},onConfigure:{type:Function},csvQuarter:{type:String},headers:{type:Array,default:()=>[]},order:{type:Array,default:()=>[]},csvSpacing:{type:Number},csvSubHeader:{type:Array,default:()=>[]}},setup(e){const t=Object(P["i"])(),o=Object(c["ref"])([]),n=Object(c["ref"])(""),l=Object(c["ref"])("desc"),a=Object(c["computed"])(()=>e.columns.slice(0,2)),r=Object(c["computed"])(()=>{var t;const o=[];return null===(t=e.columnData[0])||void 0===t||t.forEach(t=>{const c=e.columns[1].map(e=>{let o="";try{o=Object(_["isEmpty"])(t)?"...":"function"===typeof e.value?e.value(t):t[e.ref]||""}catch(c){o="_ERROR_",console.error(c)}return{column:e,data:t,value:o,[e.ref||"nada"]:o}});o.push({row:c,data:t,searchIndex:[...c,c.map(e=>e.value).join(" ")]})}),o}),s=Object(c["computed"])(()=>{var t;const o=[];return null===(t=e.columnData[1])||void 0===t||t.forEach(t=>{const c=e.columns[2].map(e=>{let o="";try{o=Object(_["isEmpty"])(t)?"...":"function"===typeof e.value?e.value(t):t[e.ref]||""}catch(c){o="_ERROR_",console.error(c)}return{column:e,data:t,value:o,[e.ref||"nada"]:o}});o.push({row:c,data:t,searchIndex:[...c,c.map(e=>e.value).join(" ")]})}),o}),i=Object(c["computed"])(()=>{var t;const o=[];return null===(t=e.columnData[2])||void 0===t||t.forEach(t=>{const c=e.columns[3].map(e=>{let o="";try{o=Object(_["isEmpty"])(t)?"...":"function"===typeof e.value?e.value(t):t[e.ref]||""}catch(c){o="_ERROR_",console.error(c)}return{column:e,data:t,value:o,[e.ref||"nada"]:o}});o.push({row:c,data:t,searchIndex:[...c,c.map(e=>e.value).join(" ")]})}),o}),d=Object(c["computed"])(()=>{var t;const o=[];return null===(t=e.columnData[3])||void 0===t||t.forEach((t,c)=>{const n=e.columns[8+c].map(e=>{let o="";try{o=Object(_["isEmpty"])(t)?"...":"function"===typeof e.value?e.value(t):t[e.ref]||""}catch(c){o="_ERROR_",console.error(c)}return{column:e,data:t,value:o,[e.ref||"nada"]:o}});o.push({row:n,data:t,searchIndex:[...n,n.map(e=>e.value).join(" ")]})}),o}),b=e=>{n.value=e,l.value="asc"===l.value?"desc":"asc"},u=()=>{"function"===typeof e.onFinish?e.onFinish():t.push("/")},O=e=>{try{var t,o;if("function"===typeof(null===(t=e.column)||void 0===t?void 0:t.tdClick))null===(o=e.column)||void 0===o||o.tdClick(e);return}catch(c){console.error(c)}},j=()=>e.columns.reduce((e,t)=>e.concat(t),[]).filter(e=>e.value||e.ref),m=()=>{var e;const t=null===(e=window)||void 0===e||null===(e=e.document)||void 0===e?void 0:e.getElementById("report-content");Object(S["c"])(`\n                <html>\n                    <head> \n                        <style> \n                        table {\n                            border-collapse: collapse;\n                        }\n                        th, td {\n                            width: 4%;\n                            text-align: center;\n                            border: solid 1px black;\n                        }\n                        td {\n                            border-bottom: 1px solid rgb(165, 165, 165);\n                            padding: 0.6em;\n                            font-weight: 500;\n                            font-size: .8em;\n                        }\n                        </style>    \n                    </head>\n                <body> \n                 ${t.innerHTML}    \n                </body>\n                </html>\n            `)},p=()=>{const t=t=>{const o=t.map(t=>t.map(t=>e.order.map(e=>{const o=t[e];return Array.isArray(o)?o.length:o}).filter(e=>void 0!==e)).filter(e=>e.length>0)).filter(e=>e.length>0);return o},o=e=>e.map(e=>{const[t]=Object.keys(e),o=e[t],c=Array.isArray(o)?o.length:0,n=[t,c];for(let l=0;l<5;l++)n.push("");return n}),c=t(e.columnData),n=o(e.columnData[3]),l=c.flat();n.forEach(e=>{l.push(e)});const a=`${I["e"].getLocationName()||"Unknown site"}-${e.title}-${e.subtitle}-${I["e"].getSessionDate()}`,r=()=>{const t=[...l],o=[0,9,18,27],c=e.csvSubHeader.length;return o.forEach((o,n)=>{const l=e.csvSubHeader[n%c];t.splice(o,0,[...l])}),t};Object(S["b"])([e.headers],[...r(),["Date Created: "+F()().format("DD/MMM/YYYY HH:MM:ss")],["Quarter: "+(e.csvQuarter||e.subtitle)],["HIS-Core Version: "+I["e"].getCoreVersion()],["API Version: "+I["e"].getApiVersion()],["Site UUID: "+I["e"].getSiteUUID()],["Generated by: "+I["e"].getUserName()]],a)},h=e=>{e.forEach(e=>{const t=j().map(t=>{let o="";try{o=Object(_["isEmpty"])(e)?"...":"function"===typeof t.value?t.value(e):e[t.ref]||""}catch(c){o="_ERROR_",console.error(c)}return{column:t,data:e,value:o,[t.ref||"nada"]:o}});o.value.push({row:t,data:e,searchIndex:[...t,t.map(e=>e.value).join(" ")]})})};return Object(c["watch"])(()=>e.columnData,e=>{o.value=[],Array.isArray(e)&&h(e)},{immediate:!0,deep:!0}),{sortColumn:b,onClickTablecell:O,toPDF:m,toCSV:p,finish:u,columnsMinusOne:a,sync:D["Q"],search:D["L"],close:D["s"],arrowUp:D["h"],arrowDown:D["g"],document:D["v"],sortOrder:l,sectionOne:r,sectionTwo:s,sectionThree:i,sectionTotals:d,columnSorted:n}}}),z=(o("6d60"),o("6b0d")),L=o.n(z);const A=L()(R,[["render",B],["__scopeId","data-v-08e3fef8"]]);t["a"]=A},"6d60":function(e,t,o){"use strict";o("e92e")},"99ae":function(e,t,o){"use strict";var c=o("7a23");const n={key:0},l={class:"his-sm-text"},a={class:"art-report-theme"},r={class:"stick-report-header"},s=["colspan","rowspan","onClick"],i=["onClick"],d={class:"his-sm-text"};function b(e,t,o,b,u,O){const j=Object(c["resolveComponent"])("ion-title"),m=Object(c["resolveComponent"])("ion-icon"),p=Object(c["resolveComponent"])("ion-button"),h=Object(c["resolveComponent"])("ion-label"),f=Object(c["resolveComponent"])("ion-chip"),k=Object(c["resolveComponent"])("ion-buttons"),v=Object(c["resolveComponent"])("ion-toolbar"),C=Object(c["resolveComponent"])("ion-header"),g=Object(c["resolveComponent"])("ion-item"),y=Object(c["resolveComponent"])("ion-content"),V=Object(c["resolveComponent"])("ion-footer");return Object(c["openBlock"])(),Object(c["createElementBlock"])(c["Fragment"],null,[Object(c["createVNode"])(C,null,{default:Object(c["withCtx"])(()=>[Object(c["createVNode"])(v,null,{default:Object(c["withCtx"])(()=>[Object(c["createVNode"])(j,{class:"his-md-text"},{default:Object(c["withCtx"])(()=>[Object(c["createTextVNode"])(Object(c["toDisplayString"])(e.title)+" ",1),e.subtitle?(Object(c["openBlock"])(),Object(c["createElementBlock"])("br",n)):Object(c["createCommentVNode"])("",!0),Object(c["createElementVNode"])("span",l,Object(c["toDisplayString"])(e.subtitle),1)]),_:1}),Object(c["createVNode"])(k,{slot:"end"},{default:Object(c["withCtx"])(()=>["function"===typeof e.onConfigure?(Object(c["openBlock"])(),Object(c["createBlock"])(p,{key:0,onClick:e.onConfigure},{default:Object(c["withCtx"])(()=>[Object(c["createVNode"])(m,{size:"large",icon:e.document},null,8,["icon"])]),_:1},8,["onClick"])):Object(c["createCommentVNode"])("",!0),e.searchTerm?(Object(c["openBlock"])(),Object(c["createBlock"])(f,{key:1,onClick:t[0]||(t[0]=t=>e.searchTerm=""),class:"his-md-text",color:"primary"},{default:Object(c["withCtx"])(()=>[Object(c["createVNode"])(h,null,{default:Object(c["withCtx"])(()=>[Object(c["createTextVNode"])(Object(c["toDisplayString"])(e.searchTerm),1)]),_:1}),Object(c["createVNode"])(m,{icon:e.close},null,8,["icon"])]),_:1})):Object(c["createCommentVNode"])("",!0),Object(c["createVNode"])(p,{onClick:e.searchTable,size:"large"},{default:Object(c["withCtx"])(()=>[Object(c["createVNode"])(m,{size:"large",icon:e.search},null,8,["icon"])]),_:1},8,["onClick"]),"function"===typeof e.onRefresh?(Object(c["openBlock"])(),Object(c["createBlock"])(p,{key:2,onClick:e.onRefresh,color:"success",size:"large"},{default:Object(c["withCtx"])(()=>[Object(c["createVNode"])(m,{size:"large",icon:e.sync},null,8,["icon"])]),_:1},8,["onClick"])):Object(c["createCommentVNode"])("",!0)]),_:1})]),_:1})]),_:1}),Object(c["createVNode"])(y,{"scroll-y":"","scroll-x":""},{default:Object(c["withCtx"])(()=>[Object(c["createElementVNode"])("table",a,[Object(c["createElementVNode"])("thead",r,[(Object(c["openBlock"])(!0),Object(c["createElementBlock"])(c["Fragment"],null,Object(c["renderList"])(e.columns,(t,o)=>(Object(c["openBlock"])(),Object(c["createElementBlock"])("tr",{key:o},[(Object(c["openBlock"])(!0),Object(c["createElementBlock"])(c["Fragment"],null,Object(c["renderList"])(t,(t,o)=>{var n,l;return Object(c["openBlock"])(),Object(c["createElementBlock"])("th",{key:o,colspan:(null===t||void 0===t||null===(n=t.span)||void 0===n?void 0:n.thColspan)||1,rowspan:(null===t||void 0===t||null===(l=t.span)||void 0===l?void 0:l.thRowspan)||1,onClick:o=>e.sortColumn(t.ref)},[Object(c["createVNode"])(g,{lines:"none"},{default:Object(c["withCtx"])(()=>[e.columnSorted&&e.columnSorted===t.ref?(Object(c["openBlock"])(),Object(c["createBlock"])(m,{key:0,icon:"asc"===e.sortOrder?e.arrowUp:e.arrowDown},null,8,["icon"])):Object(c["createCommentVNode"])("",!0),Object(c["createVNode"])(h,{class:"ion-text-center"},{default:Object(c["withCtx"])(()=>[Object(c["createElementVNode"])("b",null,Object(c["toDisplayString"])(t.label),1)]),_:2},1024)]),_:2},1024)],8,s)}),128))]))),128))]),Object(c["createElementVNode"])("tbody",null,[(Object(c["openBlock"])(!0),Object(c["createElementBlock"])(c["Fragment"],null,Object(c["renderList"])(e.page,(t,o)=>(Object(c["openBlock"])(),Object(c["createElementBlock"])("tr",{key:o},[(Object(c["openBlock"])(!0),Object(c["createElementBlock"])(c["Fragment"],null,Object(c["renderList"])(t.row,(t,o)=>{var n;return Object(c["openBlock"])(),Object(c["createElementBlock"])("td",{key:o,onClick:()=>e.onClickTablecell(t),class:Object(c["normalizeClass"])({"clickable-cell":null===t||void 0===t||null===(n=t.column)||void 0===n?void 0:n.tdClick})},[Object(c["createElementVNode"])("span",d,Object(c["toDisplayString"])(t.value),1)],10,i)}),128))]))),128))])])]),_:1}),Object(c["createVNode"])(V,null,{default:Object(c["withCtx"])(()=>[Object(c["createVNode"])(v,{color:"dark"},{default:Object(c["withCtx"])(()=>[Object(c["createVNode"])(p,{onClick:t[1]||(t[1]=t=>e.toCSV()),size:"large"},{default:Object(c["withCtx"])(()=>[Object(c["createTextVNode"])(" CSV ")]),_:1}),Object(c["createVNode"])(p,{onClick:t[2]||(t[2]=t=>e.toPDF()),size:"large"},{default:Object(c["withCtx"])(()=>[Object(c["createTextVNode"])(" PDF ")]),_:1}),e.totalPages>1?(Object(c["openBlock"])(),Object(c["createBlock"])(p,{key:0,onClick:e.first,disabled:0===e.currentPage||e.totalPages<=2,size:"large",slot:"end"},{default:Object(c["withCtx"])(()=>[Object(c["createTextVNode"])(" First ")]),_:1},8,["onClick","disabled"])):Object(c["createCommentVNode"])("",!0),e.totalPages>1?(Object(c["openBlock"])(),Object(c["createBlock"])(p,{key:1,onClick:e.prev,disabled:!e.canPrev,color:"light",size:"large",slot:"end"},{default:Object(c["withCtx"])(()=>[Object(c["createTextVNode"])(" Prev ")]),_:1},8,["onClick","disabled"])):Object(c["createCommentVNode"])("",!0),e.totalPages>1?(Object(c["openBlock"])(),Object(c["createBlock"])(p,{key:2,onClick:e.selectPage,size:"large",slot:"end",color:"light"},{default:Object(c["withCtx"])(()=>[Object(c["createTextVNode"])(Object(c["toDisplayString"])(e.currentPage)+" / "+Object(c["toDisplayString"])(e.totalPages-1),1)]),_:1},8,["onClick"])):Object(c["createCommentVNode"])("",!0),e.totalPages>1?(Object(c["openBlock"])(),Object(c["createBlock"])(p,{key:3,onClick:e.next,disabled:!e.canNext,color:"light",size:"large",slot:"end"},{default:Object(c["withCtx"])(()=>[Object(c["createTextVNode"])(" Next ")]),_:1},8,["onClick","disabled"])):Object(c["createCommentVNode"])("",!0),e.totalPages>1?(Object(c["openBlock"])(),Object(c["createBlock"])(p,{key:4,onClick:e.last,disabled:e.currentPage+1>=e.totalPages||e.totalPages<=2,size:"large",slot:"end"},{default:Object(c["withCtx"])(()=>[Object(c["createTextVNode"])(" Last ")]),_:1},8,["onClick","disabled"])):Object(c["createCommentVNode"])("",!0),Object(c["createVNode"])(p,{onClick:e.finish,color:"success",size:"large",slot:"end"},{default:Object(c["withCtx"])(()=>[Object(c["createTextVNode"])(" Finish ")]),_:1},8,["onClick"])]),_:1})]),_:1})],64)}o("14d9"),o("13d5");var u=o("d867"),O=o("ff79"),j=o("c731"),m=o("2ef0"),p=o("017e"),h=o("d95e"),f=o("6062"),k=o("ba82"),v=o("1c74"),C=o("6605"),g=o("5a0c"),y=o.n(g),V=o("1718"),N=Object(c["defineComponent"])({components:{IonImg:u["s"],IonThumbnail:u["R"],IonToolbar:u["T"],IonItem:u["w"],IonIcon:u["r"],IonLabel:u["x"],IonTitle:u["S"],IonHeader:u["q"],IonButton:u["d"],IonFooter:u["o"],IonContent:u["n"],IonButtons:u["e"],IonChip:u["l"]},props:{icon:{type:String},title:{type:String,default:"Report"},subtitle:{type:String},columns:{type:Object,required:!0},columnData:{type:Array,default:()=>[]},enablePagination:{type:Boolean,default:!0},rowsPerPage:{type:Number,default:10},onFinish:{type:Function},onRefresh:{type:Function},onConfigure:{type:Function},csvQuarter:{type:String}},setup(e){const t=Object(C["i"])(),o=Object(c["ref"])([]),n=Object(c["ref"])(0),l=Object(c["ref"])(""),a=Object(c["ref"])(""),r=Object(c["ref"])("desc"),s=Object(c["computed"])(()=>e.icon?Object(V["a"])(e.icon):""),i=Object(c["computed"])(()=>{const t=Object(p["a"])(o.value)[r.value](e=>e.data[a.value]);if(l.value){const o=new f["a"](t,{threshold:.3,keys:["searchIndex"],useExtendedSearch:!0});return o.search(l.value,{limit:e.rowsPerPage}).map(e=>e.item)}return t}),d=Object(c["computed"])(()=>Object(m["chunk"])(i.value,e.rowsPerPage).length),b=Object(c["computed"])(()=>n.value+2<=d.value),u=Object(c["computed"])(()=>n.value>0),g=Object(c["computed"])(()=>{const t=Object(m["chunk"])(i.value,e.rowsPerPage);return t[n.value]}),N=e=>{a.value=e,r.value="asc"===r.value?"desc":"asc"},x=()=>Object(j["c"])(e=>{const t=parseInt(e);parseInt(e)<=d.value&&(n.value=t)},{title:"Select page"}),w=()=>{Object(j["b"])({id:"search",helpText:"Find",type:h["b"].TT_TEXT},e=>{setTimeout(()=>{l.value=e?e.value:"",n.value=0},3)})},B=()=>n.value=0,E=()=>n.value=d.value-1||0,D=()=>n.value+=1,_=()=>n.value-=1,S=()=>{"function"===typeof e.onFinish?e.onFinish():t.push("/")},I=e=>{try{var t,o;if("function"===typeof(null===(t=e.column)||void 0===t?void 0:t.tdClick))null===(o=e.column)||void 0===o||o.tdClick(e);return}catch(c){console.error(c)}},P=()=>e.columns.reduce((e,t)=>e.concat(t),[]).filter(e=>e.value||e.ref),T=t=>{const c=P().filter(e=>[!e.canExport||(null===e||void 0===e?void 0:e.canExport[t]),"boolean"!==typeof e.exportable||e.exportable].every(Boolean)),n=c.map(e=>e.exportedValue&&e.exportedValue.column?e.exportedValue.column(e):e.secondaryLabel||e.label),l=c.map(e=>e.ref),a=o.value.reduce((e,t)=>{const o=t.row.filter(({column:e})=>l.includes(e.ref)).map(e=>e.column.exportedValue&&e.column.exportedValue.dataValue?e.column.exportedValue.dataValue(e):e.value);return[...e,o]},[]),r=`${v["e"].getLocationName()||"Unknown site"}-${e.title}-${e.subtitle}-${v["e"].getSessionDate()}`;return{headers:n,rows:a,filename:r}},F=()=>{const{headers:e,rows:t,filename:o}=T("pdf");Object(k["d"])([e],t,o,!0)},R=()=>{const{headers:t,rows:o,filename:c}=T("csv");Object(k["b"])([t],[...o,["Date Created: "+y()().format("DD/MMM/YYYY HH:MM:ss")],["Quarter: "+(e.csvQuarter||e.subtitle)],["HIS-Core Version: "+v["e"].getCoreVersion()],["API Version: "+v["e"].getApiVersion()],["Site UUID: "+v["e"].getSiteUUID()],["Generated by: "+v["e"].getUserName()]],c)},z=e=>{e.forEach(e=>{const t=P().map(t=>{let o="";try{o=Object(m["isEmpty"])(e)?"...":"function"===typeof t.value?t.value(e):e[t.ref]||""}catch(c){o="_ERROR_",console.error(c)}return{column:t,data:e,value:o,[t.ref||"nada"]:o}});o.value.push({row:t,data:e,searchIndex:[...t,t.map(e=>e.value).join(" ")]})})};return Object(c["watch"])(()=>e.columnData,t=>{if(o.value=[],!Array.isArray(t)||!t.length)return n.value=0,l.value="",a.value="",void z(Array.from({length:e.rowsPerPage}).map(()=>({})));z(t)},{immediate:!0,deep:!0}),{first:B,last:E,next:D,prev:_,selectPage:x,sortColumn:N,searchTable:w,onClickTablecell:I,toPDF:F,toCSV:R,finish:S,logo:s,sync:O["Q"],search:O["L"],close:O["s"],arrowUp:O["h"],arrowDown:O["g"],document:O["v"],page:g,canNext:b,searchTerm:l,totalPages:d,sortOrder:r,canPrev:u,currentPage:n,columnSorted:a}}}),x=(o("b6b5"),o("6b0d")),w=o.n(x);const B=w()(N,[["render",b],["__scopeId","data-v-6bdc361e"]]);t["a"]=B},ad9e:function(e,t,o){"use strict";o.d(t,"a",(function(){return a}));var c=o("ade3"),n=(o("14d9"),o("1c74")),l=o("9283");class a extends n["e"]{constructor(){super(),Object(c["a"])(this,"programID",void 0),Object(c["a"])(this,"startDate",void 0),Object(c["a"])(this,"endDate",void 0),Object(c["a"])(this,"date",void 0),this.endDate="",this.startDate="",this.date=n["e"].getSessionDate(),this.programID=n["e"].getProgramID()}getPepfarReport(e){return this.getReport("pepfar_cxca",{report_name:e})}getClinicReport(e){return this.getReport("screened_for_cxca",{report_name:e})}getMohReport(e){return this.getReport("screened_for_cxca",{report_name:e})}getDateIntervalPeriod(){return`${l["b"].toStandardHisDisplayFormat(this.startDate)} - ${l["b"].toStandardHisDisplayFormat(this.endDate)}`}setStartDate(e){this.startDate=e}setEndDate(e){this.endDate=e}getReportPeriod(){return this.startDate&&this.endDate?`${l["b"].toStandardHisDisplayFormat(this.startDate)} - ${l["b"].toStandardHisDisplayFormat(this.endDate)}`:"-"}getReport(e,t={}){return n["e"].getJson(e,this.buildRequest(t))}buildRequest(e={}){const t={date:this.date,program_id:24};return this.startDate&&this.endDate&&(t["start_date"]=this.startDate,t["end_date"]=this.endDate),{...t,...e}}static getReportQuarters(e=4){const t=[];let o=l["b"].getCurrentYear();for(let c=0;c<e;++c)t.push({name:"Q4 "+o,start:o+"-10-01",end:o+"-12-31"}),t.push({name:"Q3 "+o,start:o+"-07-01",end:o+"-09-30"}),t.push({name:"Q2 "+o,start:o+"-04-01",end:o+"-06-30"}),t.push({name:"Q1 "+o,start:o+"-01-01",end:o+"-03-31"}),--o;return t}}},b6b5:function(e,t,o){"use strict";o("2012")},e92e:function(e,t,o){}}]);
//# sourceMappingURL=chunk-f4316e34.16fd5e75.js.map