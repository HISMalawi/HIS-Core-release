(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-ebe500c2"],{"28f2":function(e,t,n){"use strict";n("7c02")},6472:function(e,t,n){},6967:function(e,t,n){"use strict";n("6472")},"7c02":function(e,t,n){},b111:function(e,t,n){"use strict";n("b0c0");var r=n("7a23"),c=Object(r["withScopeId"])("data-v-154d9c56");Object(r["pushScopeId"])("data-v-154d9c56");var a=Object(r["createTextVNode"])(" NPID : "),o=Object(r["createTextVNode"])(" Arv# : "),i=Object(r["createTextVNode"])(" Name : "),u=Object(r["createTextVNode"])(" Birth date : "),l=Object(r["createTextVNode"])(" Gender : "),s=Object(r["createTextVNode"])(" Home District : "),d=Object(r["createTextVNode"])(" Home Village : "),b=Object(r["createTextVNode"])(" Current District : "),p=Object(r["createTextVNode"])(" Current Village : ");Object(r["popScopeId"])();var O=c((function(e,t,n,c,O,j){return Object(r["openBlock"])(),Object(r["createBlock"])("div",{class:["his-card clickable",e.stateClass]},[Object(r["createVNode"])("li",null,[Object(r["createVNode"])("ul",null,[a,Object(r["createVNode"])("b",null,Object(r["toDisplayString"])(e.patient.npid),1)]),Object(r["createVNode"])("ul",null,[o,Object(r["createVNode"])("b",null,Object(r["toDisplayString"])(e.patient.arvNum),1)]),Object(r["createVNode"])("ul",null,[i,Object(r["createVNode"])("b",null,Object(r["toDisplayString"])(e.patient.name),1)]),Object(r["createVNode"])("ul",null,[u,Object(r["createVNode"])("b",null,Object(r["toDisplayString"])(e.patient.birthdate),1)]),Object(r["createVNode"])("ul",null,[l,Object(r["createVNode"])("b",null,Object(r["toDisplayString"])(e.patient.gender),1)]),Object(r["createVNode"])("ul",null,[s,Object(r["createVNode"])("b",null,Object(r["toDisplayString"])(e.patient.homeDistrict),1)]),Object(r["createVNode"])("ul",null,[d,Object(r["createVNode"])("b",null,Object(r["toDisplayString"])(e.patient.homeVillage),1)]),Object(r["createVNode"])("ul",null,[b,Object(r["createVNode"])("b",null,Object(r["toDisplayString"])(e.patient.currentDistrict),1)]),Object(r["createVNode"])("ul",null,[p,Object(r["createVNode"])("b",null,Object(r["toDisplayString"])(e.patient.currentVillage),1)])])],2)})),j=Object(r["defineComponent"])({props:{patient:{type:Object,required:!0},isActive:{type:Boolean}},computed:{stateClass:function(){return{"active-card-color":this.isActive,"inactive-card-color":!this.isActive}}}}),f=(n("6967"),n("d959")),m=n.n(f);const h=m()(j,[["render",O],["__scopeId","data-v-154d9c56"]]);t["a"]=h},d725:function(e,t,n){"use strict";n.r(t);var r=n("7a23"),c={class:"ion-margin-start"},a=Object(r["createTextVNode"])(" Patient Merging "),o=Object(r["createTextVNode"])(" Merge Selected Patients ");function i(e,t,n,i,u,l){var s=Object(r["resolveComponent"])("ion-button"),d=Object(r["resolveComponent"])("ion-col"),b=Object(r["resolveComponent"])("ion-card-title"),p=Object(r["resolveComponent"])("ion-searchbar"),O=Object(r["resolveComponent"])("ion-card-header"),j=Object(r["resolveComponent"])("patient-card"),f=Object(r["resolveComponent"])("ion-card-content"),m=Object(r["resolveComponent"])("ion-card"),h=Object(r["resolveComponent"])("ion-row"),g=Object(r["resolveComponent"])("ion-grid"),v=Object(r["resolveComponent"])("Layout");return Object(r["openBlock"])(),Object(r["createBlock"])(v,null,{default:Object(r["withCtx"])((function(){return[Object(r["createVNode"])(g,null,{default:Object(r["withCtx"])((function(){return[Object(r["createVNode"])(h,null,{default:Object(r["withCtx"])((function(){return[Object(r["createVNode"])(d,{size:"12",class:"padding"},{default:Object(r["withCtx"])((function(){return[Object(r["createVNode"])("h2",c,[a,Object(r["createVNode"])(s,{class:"ion-float-right ion-margin-end",disabled:!e.enableMergeBtn,onClick:e.merge},{default:Object(r["withCtx"])((function(){return[o]})),_:1},8,["disabled","onClick"])])]})),_:1}),(Object(r["openBlock"])(!0),Object(r["createBlock"])(r["Fragment"],null,Object(r["renderList"])(e.patients,(function(t){return Object(r["openBlock"])(),Object(r["createBlock"])(d,{size:"6",key:t.category},{default:Object(r["withCtx"])((function(){return[Object(r["createVNode"])(m,null,{default:Object(r["withCtx"])((function(){return[Object(r["createVNode"])(O,{color:"light"},{default:Object(r["withCtx"])((function(){return[Object(r["createVNode"])(b,{class:"ion-margin-bottom"},{default:Object(r["withCtx"])((function(){return[Object(r["createTextVNode"])(Object(r["toDisplayString"])(t.category)+" patients ",1)]})),_:2},1024),Object(r["createVNode"])(p,{style:{width:"100%",height:"45px"},class:"box-input ion-no-padding ion-margin-end",placeholder:"Type Name or ARV Number and press enter",modelValue:t.query,"onUpdate:modelValue":function(e){return t.query=e},onKeyup:Object(r["withKeys"])((function(n){return e.searchPatient(t)}),["enter"])},null,8,["modelValue","onUpdate:modelValue","onKeyup"])]})),_:2},1024),Object(r["createVNode"])(f,{color:"light",style:{height:"70vh","overflow-y":"auto"}},{default:Object(r["withCtx"])((function(){return[(Object(r["openBlock"])(!0),Object(r["createBlock"])(r["Fragment"],null,Object(r["renderList"])(t.results,(function(n,c){return Object(r["openBlock"])(),Object(r["createBlock"])(j,{onClick:function(r){return e.onPatient(n,t.category)},key:c,patient:n,isActive:n.isChecked},null,8,["onClick","patient","isActive"])})),128))]})),_:2},1024)]})),_:2},1024)]})),_:2},1024)})),128))]})),_:1})]})),_:1})]})),_:1})}var u=n("1da1"),l=(n("96cf"),n("d3b7"),n("ac1f"),n("466d"),n("99af"),n("4de4"),n("1276"),n("00b4"),n("841c"),n("d81d"),n("159b"),n("7db0"),n("8d56")),s=n("8a30"),d=n("23e6"),b=n("cc74"),p=n("6c02"),O=n("b111"),j=n("b5e4"),f=Object(r["defineComponent"])({components:{Layout:l["a"],IonGrid:s["IonGrid"],IonRow:s["IonRow"],IonCol:s["IonCol"],PatientCard:O["a"],IonSearchbar:s["IonSearchbar"]},setup:function(){var e=Object(p["f"])(),t=Object(r["reactive"])([{category:"primary",query:"",results:[]},{category:"secondary",query:"",results:[]}]),n=Object(r["computed"])((function(){return t.every((function(e){return e.results.length>0&&e.results.some((function(e){return e.isChecked}))}))})),c=function(){var e=Object(u["a"])(regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!t.match(/^(\w+-ARV-\w+)$/)){e.next=2;break}return e.abrupt("return",{type:"arv_number",value:t});case 2:if(!t.match(/^(\d+)$/)){e.next=7;break}return e.next=5,b["b"].sitePrefix();case 5:return n=e.sent,e.abrupt("return",{type:"arv_number",value:"".concat(n,"-ARV-").concat(t)});case 7:return e.abrupt("return",{type:"name",value:t});case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),a=function(e){var t={},n=e.split(" ").filter((function(e){return/\S/.test(e)}));return n.length>0&&(t["given_name"]=n[0],n[1]&&(t["family_name"]=n[1]),n[2]&&(t["middle_name"]=n[1],t["family_name"]=n[2])),t},o=function(){var e=Object(u["a"])(regeneratorRuntime.mark((function e(t){var n,r,o,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!t.query){e.next=28;break}return e.prev=1,e.next=4,c(t.query);case 4:if(n=e.sent,r=n.type,o=n.value,"name"!==r){e.next=13;break}return e.next=10,d["a"].search(a(o));case 10:e.t0=e.sent,e.next=21;break;case 13:if("arv_number"!==r){e.next=19;break}return e.next=16,d["a"].findByOtherID(4,o);case 16:e.t1=e.sent,e.next=20;break;case 19:e.t1=[];case 20:e.t0=e.t1;case 21:i=e.t0,t.results=i.map((function(e,t){var n=new d["a"](e);return{index:t,id:n.getID(),name:n.getFullName(),docID:n.getDocID(),birthdate:n.getBirthdate(),arvNum:n.getArvNumber(),npid:n.getNationalID(),gender:n.getGender(),homeDistrict:n.getHomeDistrict(),homeVillage:n.getHomeVillage(),currentDistrict:n.getCurrentDistrict(),currentVillage:n.getCurrentVillage(),isChecked:!1}})),e.next=28;break;case 25:e.prev=25,e.t2=e["catch"](1),console.log("".concat(e.t2));case 28:case"end":return e.stop()}}),e,null,[[1,25]])})));return function(t){return e.apply(this,arguments)}}(),i=function(e,n){if("primary"===n)t[0].results.forEach((function(t){t.id===e.id?t.isChecked=!t.isChecked:t.isChecked=!1})),e.isChecked&&t[1].results.forEach((function(t){t.id===e.id&&(t.isChecked=!1)}));else{if(e.isChecked)return e.isChecked=!1;e.isChecked=!t[0].results.some((function(t){return t.isChecked&&t.id===e.id}))}},l=function(){var n=Object(u["a"])(regeneratorRuntime.mark((function n(){var r,c;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.next=2,Object(j["a"])("Are you sure you want to merge these patients?");case 2:if(n.sent){n.next=4;break}return n.abrupt("return");case 4:return n.prev=4,r=t[0].results.find((function(e){return e.isChecked})),n.next=8,d["a"].mergePatients({primary:{patient_id:r.id,doc_id:r.docID},secondary:t[1].results.filter((function(e){return e.isChecked})).map((function(e){return{patient_id:e.id,doc_id:e.docID}}))});case 8:c=n.sent,e.push({name:"EMC Mastercard",params:{patientId:c["patient_id"]}}),n.next=15;break;case 12:n.prev=12,n.t0=n["catch"](4),Object(j["c"])("".concat(n.t0));case 15:case"end":return n.stop()}}),n,null,[[4,12]])})));return function(){return n.apply(this,arguments)}}();return{patients:t,enableMergeBtn:n,searchPatient:o,onPatient:i,merge:l}}}),m=(n("28f2"),n("d959")),h=n.n(m);const g=h()(f,[["render",i]]);t["default"]=g}}]);
//# sourceMappingURL=chunk-ebe500c2.e7651081.js.map