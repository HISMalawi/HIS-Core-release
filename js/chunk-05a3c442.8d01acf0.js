(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-05a3c442"],{"05e1":function(e,t,n){"use strict";var r=n("7a23"),o={class:"my-table",style:{margin:"auto",width:"95%","margin-top":"3%","margin-bottom":"3%"}};function a(e,t,n,a,i,s){var c=Object(r["resolveComponent"])("report-table");return Object(r["openBlock"])(),Object(r["createBlock"])("div",o,[Object(r["createVNode"])(c,{columns:e.columns,rows:e.rows,config:{tableCssTheme:e.tableCssTheme}},null,8,["columns","rows","config"])])}var i=n("1da1"),s=(n("96cf"),n("99af"),n("d3b7"),n("3ca3"),n("ddb0"),n("2b3d"),n("9861"),n("159b"),n("b0c0"),n("6d14")),c=n("1c74"),l=n("5a0c"),d=n.n(l),u=n("80e3"),p=n("9ceb"),m=Object(r["defineComponent"])({components:{ReportTable:u["a"]},data:function(){return{conditions:[],lessThanFiveYears:" < 5 yrs ",greaterAndEqualFiveYears:" >= 5 yrs ",total:" Total ",tableCssTheme:"opd-report-theme",rows:[],columns:[[p["a"].thTxt("",{colspan:2,sortable:!1,exportable:!1}),p["a"].thTxt("Out-patient Cases",{colspan:3,sortable:!1,exportable:!1})],[p["a"].thTxt(""),p["a"].thTxt("Diseases/Events/Conditions"),p["a"].thTxt("< 5 yrs"),p["a"].thTxt(">= 5 yrs"),p["a"].thTxt("Total")]]}},props:["params","epiweek","quarter","onDrillDown"],methods:{renderResults:function(){var e=new s["a"];console.log(this.params);var t=e.renderResults(this.params);t.length&&(this.conditions=t,this.rows=this.buildRows(t))},onDownload:function(){var e=new s["a"],t=e.getCSVString(this.conditions),n=t.CSVString;n+="\n          Date Created: ".concat(d()().format("DD/MMM/YYYY HH:MM:ss"),"\n          His-Core Version: ").concat(c["e"].getCoreVersion(),"\n          API Version: ").concat(c["e"].getApiVersion(),"\n          Report Period: ").concat(this.epiweek,"\n          Site: ").concat(c["e"].getLocationName(),"\n          Site UUID: ").concat(c["e"].getSiteUUID());var r=new Blob([n],{type:"text/csv;charset=utf-8;"}),o="".concat(c["e"].getLocationName()," Weekly IDSR report ").concat(this.quarter);if(navigator.msSaveBlob)navigator.msSaveBlob(r,"exportFilename");else{var a=document.createElement("a");a.href=window.URL.createObjectURL(r),a.setAttribute("download","".concat(o,".csv")),document.body.appendChild(a),a.click(),document.body.removeChild(a)}},buildRows:function(e){var t=this,n=[];return e.forEach((function(e){n.push([p["a"].td(e.id,{style:{textAlign:"left"}}),p["a"].td(e.name,{style:{textAlign:"left"}}),t.buildRow(t.lessThanFiveYears+"("+e.name+")",e.lessThanFiveYears,e.lessThanFiveYearsPatientIds),t.buildRow(t.greaterAndEqualFiveYears+"("+e.name+")",e.greaterThanEqualFiveYears,e.greaterThanEqualFiveYearsPatientIds),t.buildRow(t.total+"("+e.name+")",e.total,e.totalPatientIds)])})),n},buildRow:function(e,t,n){var r=this;return t>0?p["a"].tdLink(t,Object(i["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.abrupt("return",r.onDrillDown(e,n));case 1:case"end":return t.stop()}}),t)})))):p["a"].td(0)}},watch:{params:{immediate:!0,handler:function(){this.renderResults()}}}}),b=n("6b0d"),h=n.n(b);const g=h()(m,[["render",a]]);t["a"]=g},"9ad4":function(e,t,n){"use strict";n.r(t);var r=n("7a23"),o={id:"report-content"},a=Object(r["createVNode"])("div",{id:"print"},null,-1);function i(e,t,n,i,s,c){var l=Object(r["resolveComponent"])("ion-loading"),d=Object(r["resolveComponent"])("his-standard-form"),u=Object(r["resolveComponent"])("idsr-h"),p=Object(r["resolveComponent"])("monthly"),m=Object(r["resolveComponent"])("ion-content"),b=Object(r["resolveComponent"])("his-footer"),h=Object(r["resolveComponent"])("ion-page");return Object(r["openBlock"])(),Object(r["createBlock"])(r["Fragment"],null,[Object(r["createVNode"])(l,{"is-open":e.isLoading,message:"Please wait..."},null,8,["is-open"]),e.reportReady?Object(r["createCommentVNode"])("",!0):(Object(r["openBlock"])(),Object(r["createBlock"])(d,{key:0,onOnFinish:e.onPeriod,skipSummary:!0,fields:e.fields},null,8,["onOnFinish","fields"])),e.reportReady?(Object(r["openBlock"])(),Object(r["createBlock"])(h,{key:1},{default:Object(r["withCtx"])((function(){return[Object(r["createVNode"])(m,null,{default:Object(r["withCtx"])((function(){return[Object(r["createVNode"])("div",o,[Object(r["createVNode"])(u,{key:e.componentKey,reportName:e.reportName,rangeLabel:e.rangeLabel,range:e.range,ref:"header",periodLabel:e.periodLabel,periodDates:e.periodDates,clinicName:e.clinicName,totalOPDVisits:e.TotalOPDVisits},null,8,["reportName","rangeLabel","range","periodLabel","periodDates","clinicName","totalOPDVisits"]),Object(r["createVNode"])(p,{key:e.componentKey,onDrillDown:e.onDrillDown,params:e.idsr,month:e.range,ref:"rep"},null,8,["onDrillDown","params","month"])])]})),_:1}),Object(r["createVNode"])(b,{btns:e.btns},null,8,["btns"])]})),_:1})):Object(r["createCommentVNode"])("",!0),a],64)}var s=n("1da1"),c=(n("96cf"),n("ac1f"),n("1276"),n("0f25")),l=n("8a30"),d=n("7920"),u=n("c2b0"),p=n("6d14"),m=n("cb01"),b=n("05e1"),h=n("9283"),g=Object(r["defineComponent"])({mixins:[u["a"]],components:{IonLoading:l["z"],IdsrH:m["a"],Monthly:b["a"],HisStandardForm:d["a"],HisFooter:c["a"],IonPage:l["D"],IonContent:l["n"]},data:function(){return{formData:{},componentKey:0,computedFormData:{},idsr:{},btns:[],isLoading:!1,fields:[],reportID:-1,periodLabel:"Month Dates",periodDates:"",reportName:"MONTHLY DISEASE SURVEILLANCE REPORT",rangeLabel:"Month",range:"",TotalOPDVisits:0,clinicName:p["a"].getLocationName(),reportReady:!1}},created:function(){this.btns=this.getBtns(),this.fields=this.getMonthlyFields()},methods:{onPeriod:function(e,t){var n=arguments,r=this;return Object(s["a"])(regeneratorRuntime.mark((function o(){var a,i,s;return regeneratorRuntime.wrap((function(o){while(1)switch(o.prev=o.next){case 0:return a=n.length>2&&void 0!==n[2]&&n[2],r.componentKey+=1,r.formData=e,r.computedFormData=t,r.reportReady=!0,r.isLoading=!0,r.report=new p["a"],r.report.setRegenerate(a),r.report.setEpiWeek(e.idsrmonth.label),r.report.setStartDate(h["b"].toStandardHisFormat(e.idsrmonth.other.start)),r.report.setEndDate(h["b"].toStandardHisFormat(e.idsrmonth.other.end)),r.periodDates=r.report.getReportPeriod(),r.range=e.idsrmonth.label.split(" ")[0],o.prev=13,o.next=16,r.report.requestIDSRMonthly();case 16:return i=o.sent,o.next=19,r.report.getClinicRegistrations();case 19:s=o.sent,i&&s&&(r.reportID="data",r.TotalOPDVisits=s.length,r.idsr=i),o.next=26;break;case 23:o.prev=23,o.t0=o["catch"](13),console.log(o.t0);case 26:return o.prev=26,r.isLoading=!1,o.finish(26);case 29:case"end":return o.stop()}}),o,null,[[13,23,26,29]])})))()},getBtns:function(){var e=this;return[{name:"CSV",size:"large",slot:"start",color:"primary",visible:!0,onClick:function(){var t=Object(s["a"])(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:n=e.$refs.rep,n.onDownload();case 2:case"end":return t.stop()}}),t)})));function n(){return t.apply(this,arguments)}return n}()},{name:"PDF",size:"large",slot:"start",color:"primary",visible:!0,onClick:function(){return e.exportToCustomPDF("Print IDSR Monthly Report")}},{name:"Back",size:"large",slot:"end",color:"warning",visible:!0,onClick:function(){return e.reportReady=!1}},{name:"Refresh",size:"large",slot:"end",color:"warning",visible:!0,onClick:function(){var t=Object(s["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.onPeriod(e.formData,e.computedFormData,!0);case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)})));function n(){return t.apply(this,arguments)}return n}()},{name:"Finish",size:"large",slot:"end",color:"success",visible:!0,onClick:function(){return e.$router.push({path:"/"})}}]}}}),f=n("6b0d"),v=n.n(f);const w=v()(g,[["render",i]]);t["default"]=w}}]);
//# sourceMappingURL=chunk-05a3c442.8d01acf0.js.map