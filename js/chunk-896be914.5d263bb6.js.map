{"version":3,"sources":["webpack:///./src/views/GuardianRegistration.vue?edb2","webpack:///./src/views/GuardianRegistration.vue","webpack:///./src/views/GuardianRegistration.vue?c593","webpack:///./src/services/person_attributes_service.ts","webpack:///./src/services/patient_registration_service.ts","webpack:///./src/services/relations_service.ts","webpack:///./src/utils/ActionSheetHelpers/VoidReason.ts"],"names":["render","_ctx","_cache","$props","$setup","$data","$options","_component_his_standard_form","_resolveComponent","_openBlock","_createBlock","onOnIndex","$event","fieldComponent","skipSummary","activeField","fields","onFinishAction","onFinish","cancelDestinationPath","patientData","id","defineComponent","components","HisStandardForm","data","guardianData","fieldAction","form","redirectURL","currentAddressAttributes","homeAddressAttributes","watch","handler","params","query","patient_id","Patientservice","findByID","patient","PersonFieldHelper","mapPersonData","person","edit_guardian","getFields","source","immediate","deep","methods","push","this","guardianSelection","guardianIndex","scanGuardian","givenNameField","familyNameField","genderField","searchResultField","concat","dobFields","homeRegionField","homeDistrictField","homeTAField","homeVillageField","currentRegionField","currentDistrictField","currentTAField","currentVillage","landmarkFields","cellPhoneField","relationsField","computedData","isEditMode","reg","PatientRegistrationService","setPersonID","updatePerson","PersonField","resolvePerson","Object","keys","forEach","i","date","relation","RelationsService","amendRelation","relationship_id","relations","other","relationship_type_id","isSameAsPatient","toastWarning","guardianID","isRegistrationMode","guardian","registerGuardian","getPersonID","createRelation","$router","name","$route","nextTask","isSearchMode","includes","canEdit","groups","defaultCondition","mandatoryCondition","birthdate","gender","HisDate","toStandardHisDisplayFormat","birth_date","given_name","family_name","toLowerCase","helpText","type","FieldType","TT_SELECT","condition","validation","v","Validation","required","options","RelationshipService","getRelationships","relationship","isEmpty","map","r","label","b_is_to_a","value","person_id","details","delayPromise","infoActionSheet","slot","color","action","back","config","footerBtns","onClick","getDefaultVal","fieldID","e","TT_TABLE_VIEWER","f","select_guardian","editButton","attribute","rows","cell_phone_number","home_district","home_traditional_authority","home_village","current_district","current_traditional_authority","landmark","overrideDefaultFooterBtns","nextBtn","popVoidReason","reason","voidRelation","hiddenFooterBtns","getGivenNameField","defaultValue","getFamilyNameField","getGenderField","dob","getDobConfig","generateDateFields","home","getHomeRegionField","district","getHomeDistrictField","ta","getHomeTaField","home_region","match","village","getHomeVillageField","region","getCurrentRegionField","currentDistrict","getCurrentDistrictField","currentTA","getCurrentTAfield","current_region","getCurrentVillageField","cellPhone","getCellNumberField","landmarks","getLandmarkFields","proxyID","TT_RELATION_SELECTION","val","onload","context","cdata","getRelations","relationships","description","TT_BARCODE","requireNext","onValue","findByNpid","searchResults","TT_PERSON_RESULT_VIEW","dynamicHelpText","appearInSummary","search","patients","item","getPersonAttributeOptions","state","disabled","default","_","results","__exports__","PersonAttributeService","attributes","Service","personId","personID","personAttributes","createPerson","createPersonAttributes","createPatient","printPatient","PersonService","update","create","ProgramService","index","PatientPrintoutService","printNidLbl","patientID","relationID","void","curRelationID","newRelationTypeID","patientA","patientB","relationType","callback","size","optionsActionSheet","role","modal","selection"],"mappings":"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","file":"js/chunk-896be914.5d263bb6.js","sourcesContent":["import { resolveComponent as _resolveComponent, createVNode as _createVNode, openBlock as _openBlock, createBlock as _createBlock } from \"vue\"\n\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  const _component_his_standard_form = _resolveComponent(\"his-standard-form\")\n\n  return (_openBlock(), _createBlock(_component_his_standard_form, {\n    onOnIndex: _cache[1] || (_cache[1] = $event => (_ctx.fieldComponent='')),\n    skipSummary: true,\n    activeField: _ctx.fieldComponent,\n    fields: _ctx.fields,\n    onFinishAction: _ctx.onFinish,\n    cancelDestinationPath: `/patient/dashboard/${_ctx.patientData.id}`\n  }, null, 8, [\"activeField\", \"fields\", \"onFinishAction\", \"cancelDestinationPath\"]))\n}","\nimport { defineComponent } from \"vue\";\nimport { FieldType } from \"@/components/Forms/BaseFormElements\"\nimport { Field, Option } from \"@/components/Forms/FieldInterface\"\nimport HisStandardForm from \"@/components/Forms/HisStandardForm.vue\";\nimport { generateDateFields } from \"@/utils/HisFormHelpers/MultiFieldDateHelper\"\nimport Validation from \"@/components/Forms/validations/StandardValidations\"\nimport { Patientservice } from \"@/services/patient_service\"\nimport HisDate from \"@/utils/Date\"\nimport { RelationsService } from \"@/services/relations_service\"\nimport { isEmpty } from \"lodash\"\nimport PersonField from \"@/utils/HisFormHelpers/PersonFieldHelper\"\nimport { PatientRegistrationService } from \"@/services/patient_registration_service\"\nimport { nextTask } from \"@/utils/WorkflowTaskHelper\"\nimport { toastWarning } from \"@/utils/Alerts\";\nimport { RelationshipService } from \"@/services/relationship_service\";\nimport PersonFieldHelper from \"@/utils/HisFormHelpers/PersonFieldHelper\";\nimport { infoActionSheet } from \"@/utils/ActionSheets\";\nimport { delayPromise } from \"@/utils/Timers\";\nimport popVoidReason from \"@/utils/ActionSheetHelpers/VoidReason\";\n\nexport default defineComponent({\n  components: { HisStandardForm },\n  data: () => ({\n    patientData: {} as any,\n    guardianData: {} as any,\n    fieldAction: '' as 'Scan' | 'Search' | 'Registration' | 'edit',\n    fieldComponent: '' as string,\n    fields: [] as Array<Field>,\n    form: {} as Record<string, Option> | Record<string, null>,\n    redirectURL: '' as string,\n    activeField: '' as string,\n    currentAddressAttributes: [\n        'current_region',\n        'current_district',\n        'current_village',\n        'current_traditional_authority'\n    ] as string[],\n    homeAddressAttributes: [\n        'home_region',\n        'home_district',\n        'home_traditional_authority',\n        'home_village'\n    ] as string[]\n  }),\n  watch: {\n    '$route': {\n        async handler({params, query}: any) {\n            if (params.patient_id) {\n                const patient = await Patientservice.findByID(params.patient_id)\n                if (patient) {\n                    this.patientData = PersonFieldHelper.mapPersonData(patient.person)\n                    if (query.edit_guardian) {\n                        this.fieldAction = 'edit'\n                    }\n                    this.fields = this.getFields()\n                }\n            }\n            if(query.source) this.redirectURL = query.source\n        },\n        immediate: true,\n        deep: true\n    }\n  },\n  methods: {\n    getFields(): Array<Field> {\n        let fields: Array<Field> = []\n        fields.push(this.guardianSelection())\n        fields.push(this.guardianIndex())\n        fields.push(this.scanGuardian())\n        fields.push(this.givenNameField())\n        fields.push(this.familyNameField())\n        fields.push(this.genderField())\n        fields.push(this.searchResultField())\n        fields = fields.concat(this.dobFields())\n        fields.push(this.homeRegionField())\n        fields.push(this.homeDistrictField())\n        fields.push(this.homeTAField())\n        fields.push(this.homeVillageField())\n        fields.push(this.currentRegionField())\n        fields.push(this.currentDistrictField())\n        fields.push(this.currentTAField())\n        fields.push(this.currentVillage())\n        fields = fields.concat(this.landmarkFields())\n        fields.push(this.cellPhoneField())\n        fields.push(this.relationsField())\n        return fields\n    },\n    async onFinish(form: any, computedData: any) {\n        if (this.isEditMode()) {\n            if (this.activeField != 'relations') {\n                const reg = new PatientRegistrationService()\n                reg.setPersonID(this.guardianData.id)\n                await reg.updatePerson(PersonField.resolvePerson(computedData))\n                // Patch updated values\n                Object.keys(computedData).forEach((i: string) => {\n                    if (i in this.guardianData) {\n                        this.guardianData[i] = computedData[i]?.date || computedData[i].person\n                    }\n                })\n            } else {\n                if (this.guardianData?.relation) {\n                    const relation = await RelationsService.amendRelation(\n                        this.patientData.id,\n                        this.guardianData.id,\n                        this.guardianData.relation.relationship_id,\n                        form.relations.other.relationship_type_id\n                    )\n                    if (relation) {\n                        this.guardianData.relation = relation\n                    }\n                }\n            }\n            this.fieldComponent = 'guardian_index'\n        } else {\n            if(this.isSameAsPatient(computedData)) {\n                toastWarning(\"Guardian cannot be the same patient\")\n            } else {\n                let guardianID = -1\n                if (this.isRegistrationMode()) {\n                    const guardian: any = new PatientRegistrationService()\n                    await guardian.registerGuardian(PersonField.resolvePerson(computedData))\n                    guardianID = guardian.getPersonID()\n                } else {\n                    guardianID = this.guardianData.id\n                }\n                await RelationsService.createRelation(\n                    this.patientData.id, guardianID, form.relations.other.relationship_type_id\n                )\n                if(this.redirectURL) this.$router.push({name: this.redirectURL})\n                else if (this.$route.query.edit_guardian) this.fieldComponent = 'select_guardian'\n                else await nextTask(this.patientData.id, this.$router, this.$route)\n            }   \n        }\n    },\n    isEditMode() {\n        return this.fieldAction === 'edit'\n    },\n    isSearchMode() {\n        return ['Search', 'Registration'].includes(this.fieldAction)\n    },\n    isRegistrationMode() {\n        return this.fieldAction === 'Registration'\n    },\n    canEdit(groups: Array<string|number>, defaultCondition=true, mandatoryCondition=true) {\n        if (this.isEditMode()) {\n            return groups.includes(this.activeField) && mandatoryCondition\n        }\n        return defaultCondition\n    },\n    isSameAsPatient(guardian: any) {\n        let birthdate = ''\n        let name = ''\n        let gender = ''\n\n        if(this.isRegistrationMode()) {\n            birthdate = HisDate.toStandardHisDisplayFormat(guardian.birth_date.date)\n            name = guardian.given_name.person && guardian.family_name.person\n            gender = guardian.gender.person\n        } else {\n            birthdate = this.guardianData.birth_date\n            name = this.guardianData.name\n            gender = this.guardianData.gender  \n        }\n\n        return (name.toLowerCase() === this.patientData.name.toLowerCase()) \n            && (birthdate === this.patientData.birth_date)\n            && (gender === this.patientData.gender)\n    },\n    guardianSelection(): Field {\n        return {\n            id: 'select_guardian',\n            helpText: 'Select guardian to edit/view',\n            type: FieldType.TT_SELECT,\n            condition: () => this.isEditMode(),\n            validation: (v: Option) => Validation.required(v),\n            options: async () => {\n                const relationship = await RelationshipService.getRelationships(this.patientData.id)\n                if (!isEmpty(relationship)) {\n                    return relationship.map((r: any) => {\n                        const guardian = PersonField.mapPersonData(r.relation)\n                        return {\n                            label: `${guardian.name} (${r.type.b_is_to_a})`, \n                            value: r.relation.person_id, \n                            other: {\n                                relations: r, \n                                details: guardian \n                            }\n                        }\n                    })\n                } else {\n                    await delayPromise(450)\n                    const action = await infoActionSheet(\n                        'Patient has no guardians', '',\n                        'Select option to proceed',\n                        [\n                            {\n                                name: 'Cancel',\n                                slot: 'start',\n                                color: 'danger'\n                            },\n                            {\n                                name: 'Register new',\n                                slot: 'start',\n                                color: 'success'\n                            }\n                        ]\n                    )\n                    if (action === 'Register new') {\n                        this.guardianData = {}\n                        this.fieldAction = 'Registration'\n                        this.fieldComponent = 'scan'\n                    } else {\n                        this.$router.back()\n                    }\n                }\n                return []\n            },\n            config: {\n                footerBtns: [\n                    {\n                        name: 'New Guardian',\n                        slot: 'end',\n                        color: 'primary',\n                        onClick: () => {\n                            this.guardianData = {}\n                            this.fieldAction = 'Registration'\n                            this.fieldComponent = 'scan'\n                        }\n                    }\n                ]\n            }\n        }\n    },\n    getDefaultVal(fieldID: string | number) {\n        try {\n            return this.guardianData[fieldID]\n        } catch (e) {\n            return ''\n        }\n    },\n    guardianIndex(): Field {\n        return {\n            id: 'guardian_index',\n            helpText: 'Guardian details',\n            type: FieldType.TT_TABLE_VIEWER,\n            condition: (f: any) => f.select_guardian.value, \n            options: (f: any) => {\n                if (this.guardianData && this.guardianData.id != f.select_guardian.value) {\n                    this.guardianData = {\n                        ...f.select_guardian.other.details,\n                        relation: f.select_guardian.other.relations\n                    }\n                }\n                const editButton = (attribute: string) => ({\n                    name: 'Edit',\n                    type: 'button',\n                    action: () => {\n                        this.activeField = attribute\n                        this.fieldComponent = this.activeField\n                    }\n                })\n                const rows = [\n                    ['Given Name', this.guardianData.given_name, editButton('given_name')],\n                    ['Family Name', this.guardianData.family_name, editButton('family_name')],\n                    ['Gender', this.guardianData.gender, editButton('gender')],\n                    ['Birthdate', HisDate.toStandardHisDisplayFormat(this.guardianData.birth_date), editButton('year_birth_date')],\n                    ['Cell Phone Number', this.guardianData.cell_phone_number, editButton('cell_phone_number')],\n                    ['Home District', this.guardianData.home_district, editButton('home_region')],\n                    ['Home TA', this.guardianData.home_traditional_authority, editButton('home_region')],\n                    ['Home Village', this.guardianData.home_village,  editButton('home_region')],\n                    ['Current district', this.guardianData.current_district, editButton('current_region')],\n                    ['Current T/A', this.guardianData.current_traditional_authority, editButton('current_region')],\n                    ['Landmark', this.guardianData.landmark, editButton('default_landmarks')],\n                    ['Relation', this.guardianData.relation.type.b_is_to_a, editButton('relations')]\n                ]\n                return [{\n                    label: '', \n                    value: '',\n                    other: {\n                        rows\n                    }\n                }]\n            },\n            config : {\n                overrideDefaultFooterBtns: {\n                    nextBtn: {\n                        name: 'Finish',\n                        slot: 'end',\n                        color: 'success',\n                        onClick: () => this.fieldComponent = 'select_guardian'\n                    }\n                },\n                footerBtns: [\n                    {\n                        name: 'Void Relation',\n                        slot: 'start',\n                        color: 'danger',\n                        onClick: async () => {\n                            popVoidReason(async (reason: string) => {\n                                await RelationsService.voidRelation(\n                                    this.patientData.id, \n                                    this.guardianData.relation.relationship_id,\n                                    reason\n                                )\n                                this.fieldComponent = 'select_guardian'\n                            })\n                        }\n                    }\n                ],\n                hiddenFooterBtns: ['Clear', 'Back']\n            }\n        }\n    },\n    givenNameField(): Field {\n        const name: Field = PersonField.getGivenNameField()\n        name.helpText = 'Guardian First name'\n        name.defaultValue = () => this.getDefaultVal(name.id)\n        name.condition = () => this.canEdit([name.id], this.isSearchMode())\n        return name\n    },\n    familyNameField(): Field {\n        const name: Field = PersonField.getFamilyNameField()\n        name.helpText = 'Guardian Last name'\n        name.defaultValue = () => this.getDefaultVal(name.id)\n        name.condition = () => this.canEdit([name.id], this.isSearchMode())\n        return name\n    },\n    genderField(): Field {\n        const gender: Field = PersonField.getGenderField()\n        gender.defaultValue = () => this.getDefaultVal(gender.id)\n        gender.condition = () => this.canEdit([gender.id], this.isSearchMode())\n        return gender\n    },\n    dobFields(): Array<Field> {\n        const dob =PersonField.getDobConfig()\n        dob.defaultValue = () => this.getDefaultVal('birth_date')\n        dob.condition = () => this.canEdit([\n            'year_birth_date', \n            'month_birth_date', \n            'day_birth_date'\n            ], \n            this.isRegistrationMode()\n        ) \n        return generateDateFields(dob)\n    },\n    homeRegionField(): Field {\n        const home: Field = PersonField.getHomeRegionField()\n        home.condition = () => this.canEdit(this.homeAddressAttributes, this.isRegistrationMode())\n        return home\n    },\n    homeDistrictField(): Field {\n        const district: Field = PersonField.getHomeDistrictField()\n        district.condition = () => this.canEdit(this.homeAddressAttributes, this.isRegistrationMode())\n        return district\n    },\n    homeTAField(): Field {\n        const ta: Field =  PersonField.getHomeTaField()\n        ta.condition = (form: any) => this.canEdit(\n            this.homeAddressAttributes, \n            this.isRegistrationMode() && !form.home_region.label.match(/foreign/i),\n            !form.home_region.label.match(/foreign/i)\n        )\n        return ta\n    },\n    homeVillageField(): Field {\n        const village: Field = PersonField.getHomeVillageField()\n        village.condition = (form: any) => this.canEdit(\n            this.homeAddressAttributes, \n            this.isRegistrationMode() && !form.home_region.label.match(/foreign/i),\n            !form.home_region.label.match(/foreign/i)\n        )\n        return village\n    },\n    currentRegionField(): Field {\n        const region: Field = PersonField.getCurrentRegionField()\n        region.condition = () => this.canEdit(this.currentAddressAttributes, this.isRegistrationMode())\n        return region\n    },\n    currentDistrictField(): Field {\n        const currentDistrict: Field = PersonField.getCurrentDistrictField()\n        currentDistrict.condition = () => this.canEdit(this.currentAddressAttributes, this.isRegistrationMode())\n        return currentDistrict\n    },\n    currentTAField(): Field {\n        const currentTA: Field = PersonField.getCurrentTAfield()\n        currentTA.condition = (form: any) => this.canEdit(\n            this.currentAddressAttributes, \n            this.isRegistrationMode() && !form.current_region.label.match(/foreign/i),\n            !form.current_region.label.match(/foreign/i)\n        )\n        return currentTA\n    },\n    currentVillage(): Field {\n        const currentVillage: Field = PersonField.getCurrentVillageField()\n        currentVillage.condition = (form: any) => this.canEdit(\n            this.currentAddressAttributes, \n            this.isRegistrationMode() && !form.current_region.label.match(/foreign/i),\n            !form.current_region.label.match(/foreign/i)\n        )\n        return currentVillage\n    },\n    cellPhoneField(): Field {\n        const cellPhone: Field = PersonField.getCellNumberField()\n        cellPhone.condition = () => this.canEdit([cellPhone.id], this.isRegistrationMode())\n        return cellPhone \n    },\n    landmarkFields(): Field[] {\n        const landmarks: Field[] = PersonField.getLandmarkFields()\n        const id = landmarks[0].proxyID || landmarks[0].id\n        landmarks[0].defaultValue =  () => this.getDefaultVal(id)\n        landmarks[0].condition = () => this.canEdit([id], this.isRegistrationMode())\n        return landmarks\n    },\n    relationsField(): Field {\n        return {\n            id: 'relations',\n            helpText: 'Select relationship type',\n            type: FieldType.TT_RELATION_SELECTION,\n            defaultValue: () => this.getDefaultVal('relations'),\n            validation: (val: Option) => Validation.required(val),\n            condition: () => this.canEdit(['relations']),\n            onload: (context: any) => {\n                context.patient = this.patientData\n                if (this.isRegistrationMode()) {\n                    const person = PersonField.resolvePerson(context.cdata)\n                    context.guardian = {\n                        'name': `${person.given_name} ${person.family_name}`,\n                        'birth_date': HisDate.toStandardHisDisplayFormat(person.birthdate),\n                        'home_address': `${person.home_district} ${person.home_traditional_authority}`\n                    }\n                } else {\n                    context.guardian = this.guardianData\n                }\n            },\n            options: async() => {\n                const relationships = await RelationsService.getRelations()\n                return relationships.map((r: any) => ({\n                    label: r.b_is_to_a, \n                    value: r.description, \n                    other: r\n                }))\n            },\n            config: {\n                hiddenFooterBtns: [\n                  'Clear'\n                ]\n            }\n        }\n    },\n    scanGuardian(): Field {\n        return {\n            id: 'scan',\n            helpText: 'Scan or Register Guardian',\n            type: FieldType.TT_BARCODE,\n            requireNext: false,\n            condition: () => !this.isEditMode(),\n            onValue: async (id: string) => {\n                const searchResults = await Patientservice.findByNpid(id)\n                if (!isEmpty(searchResults)) {\n                    this.guardianData = PersonFieldHelper.mapPersonData(searchResults[0].person)\n                    this.fieldComponent = 'relations'\n                    this.fieldAction = 'Scan'\n                }\n                return false\n            },\n            config: {\n                hiddenFooterBtns: [\n                    'Clear',\n                    'Next',\n                    'Back'\n                ],\n                footerBtns : [\n                    {\n                        name: 'Find or Register Guardian',\n                        color: 'success',\n                        slot: 'end',\n                        onClick: () => {\n                            this.fieldAction = 'Search'\n                            this.fieldComponent = 'given_name'\n                        }\n                    }\n                ]\n            }\n        }\n    },\n    searchResultField(): Field {\n        return {\n            id: 'results',\n            helpText: 'Search results',\n            type: FieldType.TT_PERSON_RESULT_VIEW,\n            dynamicHelpText: (f: any) => {\n                return `Search results for \n                \"${f.given_name.value} ${f.family_name.value} | ${f.gender.label}\"\n                `\n            },\n            appearInSummary: () => false,\n            condition: () => this.isSearchMode(),\n            validation: (val: Option) => Validation.required(val),\n            options: async (form: any) => {\n                const patients = await Patientservice.search({\n                    'given_name': form.given_name.value, \n                    'family_name': form.family_name.value, \n                    'gender': form.gender.value, \n                });\n                return patients.map((item: any) => PersonField.getPersonAttributeOptions(item))\n            },\n            config: {\n                hiddenFooterBtns: [\n                    'Clear',\n                    'Next',\n                    'Back'\n                ],\n                footerBtns: [\n                    {\n                        name: 'Edit Search',\n                        slot: 'end',\n                        onClick: () => {\n                            this.fieldAction = 'Search'\n                            this.fieldComponent = 'given_name'\n                        }\n                    },\n                    {\n                        name: 'New Guardian',\n                        slot: 'end',\n                        onClick: () => {\n                            this.fieldAction = 'Registration'\n                            this.fieldComponent = 'year_birth_date'\n                        }\n                    },\n                    {\n                        name: 'Continue Guardian',\n                        color: 'success',\n                        slot: 'end',\n                        state: {\n                            disabled: {\n                                default: () => true,\n                                onValue(_: any,form: any) {\n                                    return isEmpty(form.results)\n                                }\n                            }\n                        },\n                        onClick: (form: any) => {\n                            this.guardianData = PersonFieldHelper.mapPersonData(\n                                form.results.other.person.person\n                            )\n                            this.fieldComponent = 'relations'\n                            this.fieldAction = 'Search'\n                        }\n                    }\n                ]\n            }\n        }\n    }\n  }\n})\n","import { render } from \"./GuardianRegistration.vue?vue&type=template&id=0334418a&ts=true\"\nimport script from \"./GuardianRegistration.vue?vue&type=script&lang=ts\"\nexport * from \"./GuardianRegistration.vue?vue&type=script&lang=ts\"\n\nimport exportComponent from \"/home/daniel/local-repos/HIS-Core/node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","import { Service } from \"./service\"\n\nexport interface NewAttribute {\n    person_id: number;\n    person_attribute_type_id: number;\n    value: number | string;\n}\n\nexport class PersonAttributeService extends Service { \n    constructor() {\n        super()\n    }\n\n    static create(attributes: Array<NewAttribute>) { \n        return super.postJson('/person_attributes', attributes) \n    }\n}\n","import { Service } from \"./service\"\nimport { ProgramService } from \"@/services/program_service\";\nimport { Person } from \"@/interfaces/person\"\nimport { PersonService } from \"@/services/person_service\"\nimport { PersonAttributeService } from '@/services/person_attributes_service'\nimport { PatientPrintoutService } from \"@/services/patient_printout_service\";\n\nexport class PatientRegistrationService extends Service {\n    personId: number\n    constructor() {\n        super()\n        this.personId = 0\n    }\n\n    getPersonID() {\n        return this.personId\n    }\n\n    setPersonID(personID: number) {\n        this.personId = personID\n    }\n\n    async registerPatient(person: any, personAttributes: any) {\n        await this.createPerson(person)\n        await this.createPersonAttributes(personAttributes)\n        const patient = await this.createPatient()\n        await this.printPatient()\n        return patient\n    }\n\n    async registerGuardian(person: any) {\n        return this.createPerson(person)\n    }\n\n    updatePerson(person: any) {\n       return new PersonService(person).update(this.personId)\n    }\n\n    async createPerson(person: any) {\n        const data: Person = await new PersonService(person).create()\n        this.personId = data.person_id\n        return data\n    }\n\n    createPatient() {\n        return ProgramService.createPatient(this.personId)\n    }\n\n    async createPersonAttributes(attributes: Array<any>) {\n        for(const index in attributes) {\n            await PersonAttributeService.create({\n                ...attributes[index],\n                'person_id': this.personId\n            })\n        }\n    }\n\n    printPatient() {\n        return new PatientPrintoutService(this.personId).printNidLbl()\n    }\n}\n","import { Service } from \"./service\";\n\nexport class RelationsService extends Service {\n    constructor() {\n        super()\n    }\n\n    static voidRelation(patientID: number, relationID: number, reason: string) {\n\t\treturn Service.void(`people/${patientID}/relationships/${relationID}`, { reason })\n\t}\n\n    static async amendRelation(patientID: number, guardianID: number, curRelationID: number, newRelationTypeID: number) {\n        await RelationsService.voidRelation(patientID, curRelationID,\n            'Updating guardian relationship'\n        )\n        return RelationsService.createRelation(\n            patientID, guardianID, newRelationTypeID\n        )\n    }\n\n    static getRelations() {\n        return super.getJson('types/relationships')\n    }\n\n    static createRelation(patientA: number, patientB: number, relationType: number) {\n        return super.postJson(`people/${patientA}/relationships`, {\n            'relationship_type_id': relationType,\n            'relation_id': patientB\n        })\n    }\n}\n","import { optionsActionSheet } from '@/utils/ActionSheets'\n\nexport default async function popVoidReason(callback: Function, size = 'action-sheet-modal') {\n    const modal = await optionsActionSheet(\n        'Are you sure you want to void record?',\n        'Please specify reason for voiding this record',\n        [\n          'Mistake/ Wrong Entry',\n          'Duplicate',\n          'System Error' \n        ],\n        [\n            { name: 'Cancel', slot:'start'},\n            { name: 'Void', color: 'danger', slot:'end', role: 'action'}\n        ],\n        '',\n        size\n    )\n    if (modal.selection && modal.action === 'Void') {\n        await callback(modal.selection)\n    }\n}\n"],"sourceRoot":""}