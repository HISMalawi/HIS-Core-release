(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d0cb702"],{"4a54":function(e,t,i){"use strict";i.r(t);var a=i("7a23");function s(e,t,i,s,r,n){const o=Object(a["resolveComponent"])("report-template"),d=Object(a["resolveComponent"])("ion-page");return Object(a["openBlock"])(),Object(a["createBlock"])(d,null,{default:Object(a["withCtx"])(()=>[Object(a["createVNode"])(o,{reportPrefix:"MoH",title:e.title,period:e.period,rows:e.rows,fields:e.fields,columns:e.columns,hasServerSideCaching:!0,headerInfoList:e.headerList,onReportConfiguration:e.onPeriod},null,8,["title","period","rows","fields","columns","headerInfoList","onReportConfiguration"])]),_:1})}var r=i("44e3"),n=i("4ba2"),o=i("9ceb"),d=i("8a30"),c=i("5969");class h extends c["a"]{constructor(){super(),this.clients=[],this.data=[],this.regenerate=!1}setRegenerate(e){this.regenerate=e}async generateReport(){this.data=[],this.clients=[];const e=await this.getReport("latest_regimen_dispensed",this.buildRequest({rebuild_outcome:this.regenerate}));if(!e)return[];for(const t in e){for(const i in e[t]){const a=e[t][i];this.data.push({identifier:a.identifier,drugName:a.name,gender:a.gender,dob:a.birthdate,dispensationDate:a["dispensation_date"],packSize:a["pack_sizes"][0],packSizes:a["pack_sizes"].length,quantity:a.quantity})}this.clients.push(parseInt(""+t))}return this.data}}var p=Object(a["defineComponent"])({mixins:[r["a"]],components:{ReportTemplate:n["a"],IonPage:d["D"]},data:()=>({title:"Regimen Report",rows:[],headerList:[],columns:[[o["a"].thTxt("ARV#"),o["a"].thTxt("Gender"),o["a"].thTxt("DOB"),o["a"].thTxt("Drug Name"),o["a"].thTxt("Date"),o["a"].thTxt("Pack size"),o["a"].thTxt("Total pack"),o["a"].thTxt("Total pills")]]}),created(){this.fields=this.getDateDurationFields()},methods:{async onPeriod(e,t,i=!1){this.rows=[],this.report=new h,this.report.setRegenerate(i),this.report.setStartDate(t.start_date),this.report.setEndDate(t.end_date),this.period=this.report.getDateIntervalPeriod();const a=await this.report.generateReport();this.setRows(a),this.headerList=[{label:"Total clients",value:this.report.clients.length}]},setRows(e){const t=e=>e?o["a"].tdDate(e):o["a"].td("N/A");this.rows=this.sortByArvNumber(e,"identifier").map(e=>[this.tdARV(e.identifier),o["a"].td(e.gender),t(e.dob),o["a"].td(e.drugName),t(e.dispensationDate),o["a"].td(e.packSize),o["a"].td(e.packSizes),o["a"].td(e.quantity)])}}}),l=i("6b0d"),u=i.n(l);const g=u()(p,[["render",s]]);t["default"]=g}}]);
//# sourceMappingURL=chunk-2d0cb702.a2998043.js.map