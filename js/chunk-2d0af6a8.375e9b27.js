(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d0af6a8"],{"0ddb":function(t,e,o){"use strict";o.r(e);var a=o("7a23");function r(t,e,o,r,s,i){const n=Object(a["resolveComponent"])("report-template"),d=Object(a["resolveComponent"])("ion-page");return Object(a["openBlock"])(),Object(a["createBlock"])(d,null,{default:Object(a["withCtx"])(()=>[Object(a["createVNode"])(n,{title:t.title,period:t.period,rows:t.rows,fields:t.fields,columns:t.columns,config:{showIndex:!0},reportPrefix:"Clinic",onReportConfiguration:t.onPeriod},null,8,["title","period","rows","fields","columns","onReportConfiguration"])]),_:1})}o("14d9"),o("13d5");var s=o("44e3"),i=o("9a5e"),n=o("4ba2"),d=o("9ceb"),l=o("ad8d"),c=o("2ef0"),h=Object(a["defineComponent"])({mixins:[s["a"]],components:{ReportTemplate:n["a"]},data:()=>({title:"TX RTT Report",cohort:{},rows:[],columns:[[d["a"].thTxt("Age group"),d["a"].thTxt("Gender"),d["a"].thTxt("Returned <3 mo"),d["a"].thTxt("Returned 3-5 mo"),d["a"].thTxt("Returned 6+ mo")]],aggregated:[]}),created(){this.fields=this.getDateDurationFields()},methods:{async onPeriod(t,e){this.rows=[],this.aggregated=[],this.report=new i["a"],this.report.setStartDate(e.start_date),this.report.setEndDate(e.end_date),this.report.setOccupation(e.occupation),this.period=this.report.getDateIntervalPeriod(),this.cohort=await this.report.getClinicTxRtt(),await this.setRows("F"),await this.setRows("M"),this.setMaleTotalsRow(),await this.setFemaleRows()},drillData(t,e,o,a){return this.aggregated.push({gender:o,ageGroup:e,column:a,data:t}),this.drill(t,`${e} (${o}s) ${a}`)},setMaleTotalsRow(){const t=t=>this.drill(this.aggregated.filter(e=>"Male"===e.gender&&e.column===t).reduce((t,e)=>t.concat(e.data),[]),"All Male "+t);this.rows.push([d["a"].td("All"),d["a"].td("Male"),t("Returned <3 mo"),t("Returned 3-5 mo"),t("Returned 6+ mo")])},async setFemaleRows(){const t=this.aggregated.filter(t=>t.gender.match(/female/i)).reduce((t,e)=>t.concat(e.data),[]),e=await this.report.getMaternalStatus(Object(c["uniq"])(t)),o=e.FBf.concat(e.FP),a=t=>this.aggregated.filter(t=>t.gender.match(/female/i)).filter(e=>e.column===t).reduce((t,e)=>Object(c["uniq"])(t.concat(e.data)),[]),r=(t,o)=>this.drill(a(o).filter(o=>e[t].includes(o)),"All "+o),s=t=>this.drill(a(t).filter(t=>!o.includes(t)),"All "+t);this.rows.push([d["a"].td("All"),d["a"].td("FP"),r("FP","Returned <3 mo"),r("FP","Returned 3-5 mo"),r("FP","Returned 6+ mo")]),this.rows.push([d["a"].td("All"),d["a"].td("FNP"),s("Returned <3 mo"),s("Returned 3-5 mo"),s("Returned 6+ mo")]),this.rows.push([d["a"].td("All"),d["a"].td("FBF"),r("FBf","Returned <3 mo"),r("FBf","Returned 3-5 mo"),r("FBf","Returned 6+ mo")])},async setRows(t){const e=(t,e)=>t.filter(t=>e(t.months)).map(t=>t.patient_id);for(const o in l["a"]){const a=l["a"][o],r=this.formatGender(t);if(a in this.cohort){const o=this.cohort[a][t],s=t=>e(o,t);this.rows.push([d["a"].td(a),d["a"].td(r),this.drillData(s(t=>t<3),a,r,"Returned <3 mo"),this.drillData(s(t=>t>=3&&t<=5),a,r,"Returned 3-5 mo"),this.drillData(s(t=>t>=6),a,r,"Returned 6+ mo")])}else this.rows.push([d["a"].td(a),d["a"].td(r),d["a"].td(0),d["a"].td(0),d["a"].td(0)])}}}}),u=o("6b0d"),p=o.n(u);const m=p()(h,[["render",r]]);e["default"]=m}}]);
//# sourceMappingURL=chunk-2d0af6a8.375e9b27.js.map