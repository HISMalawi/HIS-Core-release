(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2f4fe826"],{"454a":function(e,t,n){},"7bdc":function(e,t,n){"use strict";n.r(t);var r=n("7a23");function i(e,t,n,i,o,c){var a=Object(r["resolveComponent"])("report-template");return Object(r["openBlock"])(),Object(r["createBlock"])(a,{title:e.title,period:e.period,rows:e.rows,fields:e.fields,columns:e.columns,canExportCsv:!1,canExportPDf:!1,onReportConfiguration:e.onPeriod},null,8,["title","period","rows","fields","columns","onReportConfiguration"])}var o=n("1da1"),c=(n("d3b7"),n("25f0"),n("d81d"),n("b0c0"),n("96cf"),n("4ba2")),a=n("d95e"),u=n("9ceb"),s=n("fb25"),l=n("2706"),d={key:0},p={key:1},f=Object(r["createTextVNode"])(" Close ");function b(e,t,n,i,o,c){var a=Object(r["resolveComponent"])("ion-title"),u=Object(r["resolveComponent"])("ion-toolbar"),s=Object(r["resolveComponent"])("ion-header"),l=Object(r["resolveComponent"])("his-basic-table"),b=Object(r["resolveComponent"])("text-skeloton"),m=Object(r["resolveComponent"])("ion-content"),v=Object(r["resolveComponent"])("ion-button"),j=Object(r["resolveComponent"])("ion-footer");return Object(r["openBlock"])(),Object(r["createBlock"])(r["Fragment"],null,[Object(r["createVNode"])(s,null,{default:Object(r["withCtx"])((function(){return[Object(r["createVNode"])(u,null,{default:Object(r["withCtx"])((function(){return[Object(r["createVNode"])(a,null,{default:Object(r["withCtx"])((function(){return[Object(r["createTextVNode"])(Object(r["toDisplayString"])(e.title),1)]})),_:1})]})),_:1})]})),_:1}),Object(r["createVNode"])(m,null,{default:Object(r["withCtx"])((function(){return[e.ready?(Object(r["openBlock"])(),Object(r["createBlock"])("div",d,[Object(r["createVNode"])(l,{columns:e.columns,rows:e.rows},null,8,["columns","rows"])])):(Object(r["openBlock"])(),Object(r["createBlock"])("div",p,[Object(r["createVNode"])(b)]))]})),_:1}),Object(r["createVNode"])(j,null,{default:Object(r["withCtx"])((function(){return[Object(r["createVNode"])(u,null,{default:Object(r["withCtx"])((function(){return[Object(r["createVNode"])(v,{color:"danger",onClick:e.closeModal,slot:"end"},{default:Object(r["withCtx"])((function(){return[f]})),_:1},8,["onClick"])]})),_:1})]})),_:1})],64)}var m=n("a3a5"),v=n("8a30"),j=Object(r["withScopeId"])("data-v-65e1cf74"),O=j((function(e,t,n,i,o,c){var a=Object(r["resolveComponent"])("ion-skeleton-text"),u=Object(r["resolveComponent"])("ion-item"),s=Object(r["resolveComponent"])("ion-list");return Object(r["openBlock"])(),Object(r["createBlock"])(s,null,{default:j((function(){return[(Object(r["openBlock"])(!0),Object(r["createBlock"])(r["Fragment"],null,Object(r["renderList"])(e.items,(function(e,t){return Object(r["openBlock"])(),Object(r["createBlock"])(u,{key:t},{default:j((function(){return[Object(r["createVNode"])(a,{animated:"",style:{width:"100%"}})]})),_:2},1024)})),128))]})),_:1})})),h=(n("a9e3"),Object(r["defineComponent"])({components:{IonSkeletonText:v["I"],IonList:v["w"],IonItem:v["u"]},props:{itemCount:{type:Number,default:10}},setup:function(e){for(var t=[],n=0;n<e.itemCount;++n)t.push(n);return{items:t}}})),w=(n("95a0"),n("d959")),g=n.n(w);const y=g()(h,[["render",O],["__scopeId","data-v-65e1cf74"]]);var k=y,x=Object(r["defineComponent"])({components:{HisBasicTable:m["a"],IonHeader:v["q"],IonToolbar:v["N"],IonContent:v["n"],IonFooter:v["o"],IonButton:v["d"],TextSkeloton:k},props:{title:{type:String,required:!0},columns:{type:Object,required:!0},onRows:{type:Function,required:!0}},data:function(){return{rows:[],ready:!1}},watch:{onRows:{handler:function(e){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(!e){n.next=5;break}return n.next=3,e();case 3:t.rows=n.sent,t.ready=!0;case 5:case"end":return n.stop()}}),n)})))()},immediate:!0,deep:!0}},methods:{closeModal:function(){return Object(o["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,v["U"].dismiss({});case 2:case"end":return e.stop()}}),e)})))()}}});const C=g()(x,[["render",b]]);var I=C,R=n("23e6"),T=n("9283"),B=n("fa73"),N=n("b5e4"),_=Object(r["defineComponent"])({components:{ReportTemplate:c["a"]},data:function(){return{service:{},dde:{},title:"Duplicate Identifiers",fields:[],rows:[],columns:[[u["a"].thTxt("Identifier"),u["a"].thTxt("Count"),u["a"].thTxt("View"),u["a"].thTxt("Resolve")]]}},created:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.fields=e.getFormFields(),e.dde=new B["a"],t.next=4,e.dde.loadDDEStatus();case 4:case"end":return t.stop()}}),t)})))()},methods:{onPeriod:function(e){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function n(){var r,i;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return r=e.identifier,i=parseInt(r.value.toString()),t.title=r.label+" Duplicates",t.service=new s["a"],t.service.setIdentifierType(i),n.next=7,t.getRows();case 7:t.rows=n.sent;case 8:case"end":return n.stop()}}),n)})))()},getFormFields:function(){return[{id:"identifier",helpText:"Select Identifier type",type:a["b"].TT_SELECT,validation:function(e){return l["a"].required(e)},options:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,s["a"].getIdentifierTypes();case 2:return e.abrupt("return",e.sent.map((function(e){return{label:e.name,value:e.patient_identifier_type_id}})));case 3:case"end":return e.stop()}}),e)})));function t(){return e.apply(this,arguments)}return t}()}]},toDate:function(e){return T["a"].toStandardHisDisplayFormat(e)},drillDuplicates:function(e){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function n(){var r;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.next=2,v["U"].create({component:I,cssClass:"custom-modal",componentProps:{title:"Persons using identifier ".concat(e),columns:["Given name","Family name","Gender","Birth date","Action"],onRows:function(){var n=Object(o["a"])(regeneratorRuntime.mark((function n(){var r;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.next=2,t.service.getPatientsByIdentifier(e);case 2:return r=n.sent,n.abrupt("return",r.map((function(e){try{var n=new R["a"](e);return[n.getGivenName(),n.getFamilyName(),n.getGender(),t.toDate(n.getBirthdate()),{type:"button",name:"View",action:function(){v["U"].dismiss().then((function(){t.$router.push("/patient/dashboard/".concat(n.getID()))}))}}]}catch(r){return Object(N["c"])("Unable to load patient details"),["N/A","N/A","N/A","N/A","N/A"]}})));case 4:case"end":return n.stop()}}),n)})));function r(){return n.apply(this,arguments)}return r}()}});case 2:r=n.sent,r.present();case 4:case"end":return n.stop()}}),n)})))()},getRows:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.service.getDuplicateIndentifiers();case 2:return t.abrupt("return",t.sent.map((function(t){return[u["a"].td(t.identifier),u["a"].td(t.count),u["a"].tdBtn("Select",(function(){return e.drillDuplicates(t.identifier)})),u["a"].tdBtn("Resolve",(function(){e.$router.push("/npid/duplicates/".concat(t.identifier))}),{event:{disabled:!(e.dde.isEnabled()&&3===e.service.getIdentifierType())}},"danger")]})));case 3:case"end":return t.stop()}}),t)})))()}}});const D=g()(_,[["render",i]]);t["default"]=D},"95a0":function(e,t,n){"use strict";n("454a")},fb25:function(e,t,n){"use strict";n.d(t,"a",(function(){return d}));var r=n("1da1"),i=n("d4ec"),o=n("bee2"),c=n("45eb"),a=n("7e84"),u=n("262e"),s=n("2caf"),l=(n("96cf"),n("99af"),n("1c74")),d=function(e){Object(u["a"])(n,e);var t=Object(s["a"])(n);function n(){var e;return Object(i["a"])(this,n),e=t.call(this),e.identifierType=-1,e}return Object(o["a"])(n,[{key:"getIdentifierType",value:function(){return this.identifierType}},{key:"setIdentifierType",value:function(e){this.identifierType=e}},{key:"getDuplicateIndentifiers",value:function(){return l["d"].getJson("search/identifiers/duplicates",{type_id:this.identifierType})}},{key:"getPatientsByIdentifier",value:function(e){return l["d"].getJson("search/patients/by_identifier",{type_id:this.identifierType,identifier:e})}}],[{key:"getIdentifierTypes",value:function(){return Object(c["a"])(Object(a["a"])(n),"getJson",this).call(this,"types/patient_identifiers")}},{key:"arvNumberExists",value:function(){var e=Object(r["a"])(regeneratorRuntime.mark((function e(t){var r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(c["a"])(Object(a["a"])(n),"getJson",this).call(this,"programs/".concat(Object(c["a"])(Object(a["a"])(n),"getProgramID",this).call(this),"/lookup_arv_number/").concat(t));case 2:return r=e.sent,e.abrupt("return",r.exists);case 4:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()}]),n}(l["d"])}}]);
//# sourceMappingURL=chunk-2f4fe826.d40a2eb5.js.map