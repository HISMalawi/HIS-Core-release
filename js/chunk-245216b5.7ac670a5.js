(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-245216b5"],{"05e1":function(e,t,o){"use strict";var a=o("7a23");const n={class:"my-table",style:{margin:"auto",width:"95%","margin-top":"3%","margin-bottom":"3%"}};function r(e,t,o,r,s,i){const l=Object(a["resolveComponent"])("report-table");return Object(a["openBlock"])(),Object(a["createBlock"])("div",n,[Object(a["createVNode"])(l,{columns:e.columns,rows:e.rows,config:{tableCssTheme:e.tableCssTheme}},null,8,["columns","rows","config"])])}var s=o("6d14"),i=o("1c74"),l=o("5a0c"),c=o.n(l),d=o("80e3"),p=o("9ceb"),m=Object(a["defineComponent"])({components:{ReportTable:d["a"]},data:function(){return{conditions:[],lessThanFiveYears:" < 5 yrs ",greaterAndEqualFiveYears:" >= 5 yrs ",total:" Total ",tableCssTheme:"opd-report-theme",rows:[],columns:[[p["a"].thTxt("",{colspan:2,sortable:!1,exportable:!1}),p["a"].thTxt("Out-patient Cases",{colspan:3,sortable:!1,exportable:!1})],[p["a"].thTxt(""),p["a"].thTxt("Diseases/Events/Conditions"),p["a"].thTxt("< 5 yrs"),p["a"].thTxt(">= 5 yrs"),p["a"].thTxt("Total")]]}},props:["params","epiweek","quarter","onDrillDown"],methods:{renderResults(){const e=new s["a"],t=e.renderResults(this.params);t.length&&(this.conditions=t,this.rows=this.buildRows(t))},onDownload(){const e=new s["a"];let{CSVString:t}=e.getCSVString(this.conditions);t+=`\n          Date Created: ${c()().format("DD/MMM/YYYY HH:MM:ss")}\n          His-Core Version: ${i["e"].getCoreVersion()}\n          API Version: ${i["e"].getApiVersion()}\n          Report Period: ${this.epiweek}\n          Site: ${i["e"].getLocationName()}\n          Site UUID: ${i["e"].getSiteUUID()}`;const o=new Blob([t],{type:"text/csv;charset=utf-8;"}),a=`${i["e"].getLocationName()} Weekly IDSR report ${this.quarter}`;if(navigator.msSaveBlob)navigator.msSaveBlob(o,"exportFilename");else{const e=document.createElement("a");e.href=window.URL.createObjectURL(o),e.setAttribute("download",a+".csv"),document.body.appendChild(e),e.click(),document.body.removeChild(e)}},buildRows(e){const t=[];return e.forEach(e=>{t.push([p["a"].td(e.id,{style:{textAlign:"left"}}),p["a"].td(e.name,{style:{textAlign:"left"}}),this.buildRow(this.lessThanFiveYears+"("+e.name+")",e.lessThanFiveYears,e.lessThanFiveYearsPatientIds),this.buildRow(this.greaterAndEqualFiveYears+"("+e.name+")",e.greaterThanEqualFiveYears,e.greaterThanEqualFiveYearsPatientIds),this.buildRow(this.total+"("+e.name+")",e.total,e.totalPatientIds)])}),t},buildRow(e,t,o){return"string"==typeof t?p["a"].td(""):t>0?p["a"].tdLink(t,async()=>this.onDrillDown(e,o)):p["a"].td(0)}},watch:{params:{immediate:!0,handler(){this.renderResults()}}}}),h=o("6b0d"),b=o.n(h);const u=b()(m,[["render",r]]);t["a"]=u},"53dc":function(e,t,o){"use strict";o.r(t);var a=o("7a23");const n={id:"report-content"},r=Object(a["createVNode"])("div",{id:"print"},null,-1);function s(e,t,o,s,i,l){const c=Object(a["resolveComponent"])("ion-loading"),d=Object(a["resolveComponent"])("his-standard-form"),p=Object(a["resolveComponent"])("idsr-h"),m=Object(a["resolveComponent"])("weekly"),h=Object(a["resolveComponent"])("ion-content"),b=Object(a["resolveComponent"])("his-footer"),u=Object(a["resolveComponent"])("ion-page");return Object(a["openBlock"])(),Object(a["createBlock"])(a["Fragment"],null,[Object(a["createVNode"])(c,{"is-open":e.isLoading,message:"Please wait..."},null,8,["is-open"]),e.reportReady?Object(a["createCommentVNode"])("",!0):(Object(a["openBlock"])(),Object(a["createBlock"])(d,{key:0,onOnFinish:e.onPeriod,skipSummary:!0,fields:e.fields},null,8,["onOnFinish","fields"])),e.reportReady?(Object(a["openBlock"])(),Object(a["createBlock"])(u,{key:1},{default:Object(a["withCtx"])(()=>[Object(a["createVNode"])(h,null,{default:Object(a["withCtx"])(()=>[Object(a["createVNode"])("div",n,[Object(a["createVNode"])(p,{key:e.componentKey,reportName:e.reportName,rangeLabel:e.rangeLabel,range:e.range,ref:"header",periodLabel:e.periodLabel,periodDates:e.periodDates,clinicName:e.clinicName,totalOPDVisits:e.TotalOPDVisits},null,8,["reportName","rangeLabel","range","periodLabel","periodDates","clinicName","totalOPDVisits"]),Object(a["createVNode"])(m,{key:e.componentKey,onDrillDown:e.onDrillDown,params:e.idsr,epiweek:e.range,ref:"rep"},null,8,["onDrillDown","params","epiweek"])])]),_:1}),Object(a["createVNode"])(b,{btns:e.btns},null,8,["btns"])]),_:1})):Object(a["createCommentVNode"])("",!0),r],64)}var i=o("0f25"),l=o("8a30"),c=o("7920"),d=o("c2b0"),p=o("6d14"),m=o("cb01"),h=o("05e1"),b=o("9283"),u=Object(a["defineComponent"])({mixins:[d["a"]],components:{IonLoading:l["z"],IdsrH:m["a"],Weekly:h["a"],HisStandardForm:c["a"],HisFooter:i["a"],IonPage:l["D"],IonContent:l["n"]},data:()=>({formData:{},componentKey:0,computedFormData:{},idsr:{},btns:[],isLoading:!1,fields:[],reportID:-1,periodLabel:"Week Dates",periodDates:"",reportName:"WEEKLY DISEASE SURVEILLANCE REPORT",rangeLabel:"Week Number",range:"",TotalOPDVisits:0,clinicName:p["a"].getLocationName(),reportReady:!1,reportUrlParams:"",regenarate:""}),created(){this.btns=this.getBtns(),this.fields=this.getEpiweeksFields()},methods:{async onPeriod(e,t,o=!1){this.componentKey+=1,this.formData=e,this.computedFormData=t,this.reportReady=!0,this.isLoading=!0,this.report=new p["a"],this.report.setRegenerate(o),this.report.setEpiWeek(e.epiweek.label),this.report.setStartDate(b["b"].toStandardHisFormat(e.epiweek.other.start)),this.report.setEndDate(b["b"].toStandardHisFormat(e.epiweek.other.end)),this.periodDates=this.report.getReportPeriod(),this.range=e.epiweek.label.split(" ")[0];try{const e=await this.report.requestIDSRWeekly(),t=await this.report.getClinicRegistrations();e&&t&&(this.reportID="data",this.TotalOPDVisits=t.length,this.idsr=e)}catch(a){console.log(a)}finally{this.isLoading=!1}},getBtns(){return[{name:"CSV",size:"large",slot:"start",color:"primary",visible:!0,onClick:async()=>{const e=this.$refs.rep;e.onDownload()}},{name:"PDF",size:"large",slot:"start",color:"primary",visible:!0,onClick:()=>this.exportToCustomPDF("Print IDSR Weelky Report")},{name:"Back",size:"large",slot:"end",color:"warning",visible:!0,onClick:()=>this.reportReady=!1},{name:"Refresh",size:"large",slot:"end",color:"warning",visible:!0,onClick:async()=>await this.onPeriod(this.formData,this.computedFormData,!0)},{name:"Finish",size:"large",slot:"end",color:"success",visible:!0,onClick:()=>this.$router.push({path:"/"})}]}}}),g=o("6b0d"),w=o.n(g);const D=w()(u,[["render",s]]);t["default"]=D}}]);
//# sourceMappingURL=chunk-245216b5.7ac670a5.js.map