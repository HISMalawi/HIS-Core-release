(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d229093"],{dc75:function(e,t,i){"use strict";i.r(t);var s=i("7a23");function n(e,t,i,n,a,r){const c=Object(s["resolveComponent"])("his-standard-form"),o=Object(s["resolveComponent"])("ion-page");return Object(s["openBlock"])(),Object(s["createBlock"])(o,null,{default:Object(s["withCtx"])(()=>[Object(s["createVNode"])(c,{fields:e.fields,skipSummary:!0,onFinishAction:e.onFinish,cancelDestinationPath:e.cancelDestination},null,8,["fields","onFinishAction","cancelDestinationPath"])]),_:1})}var a=i("7365"),r=i("d95e"),c=i("2706"),o=i("8a30"),h=i("cc6f"),l=i("2ef0");class u extends h["a"]{constructor(e,t){super(e,107,t),this.lastVisitNumber=0}async loadLastVisitNumber(){const e=await h["a"].getJson(`programs/${this.programID}/patients/${this.patientID}/anc_visit`);!Object(l["isEmpty"])(e)&&e.visit_number.length&&(this.lastVisitNumber=e.visit_number[e.visit_number.length-1])}saveVisitNumber(e){return this.saveValueNumericObs("Type of visit",e)}}var d=Object(s["defineComponent"])({components:{IonPage:o["D"]},mixins:[a["a"]],data:()=>({service:{},helpText:"ANC Visit Number"}),watch:{ready:{async handler(e){e&&(this.service=new u(this.patientID,this.providerID),await this.service.loadLastVisitNumber(),this.fields=this.getFields())},immediate:!0}},methods:{async onFinish(e,t){const i=new u(this.patientID,this.providerID);await i.createEncounter(),await i.saveVisitNumber(t["visit_number"]),this.nextTask()},getFields(){return[{id:"visit_number",helpText:this.helpText,dynamicHelpText:()=>this.service.lastVisitNumber?`${this.helpText} (Last visit number: ${this.service.lastVisitNumber})`:this.helpText,type:r["b"].TT_NUMBER,computedValue:e=>e.value,validation:e=>this.validateSeries([()=>c["a"].required(e),()=>c["a"].rangeOf(e,this.service.lastVisitNumber+1,40)])}]}}}),m=i("6b0d"),p=i.n(m);const b=p()(d,[["render",n]]);t["default"]=b}}]);
//# sourceMappingURL=chunk-2d229093.3f312131.js.map