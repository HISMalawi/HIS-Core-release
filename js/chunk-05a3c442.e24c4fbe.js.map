{"version":3,"sources":["webpack:///./node_modules/vue-loader-v16/dist/templateLoader.js","webpack:///./node_modules/cache-loader/dist/cjs.js","webpack:///./src/apps/OPD/views/reports/moh/IDSR/IDSRTableTemplate.vue","webpack:///./src/apps/OPD/views/reports/moh/IDSR/IDSRMonthly.vue"],"names":["_hoisted_1","class","style","render","_ctx","_cache","$props","$setup","$data","$options","_component_report_table","_resolveComponent","_openBlock","_createBlock","_createVNode","columns","rows","config","tableCssTheme","defineComponent","components","ReportTable","data","conditions","lessThanFiveYears","greaterAndEqualFiveYears","total","table","thTxt","colspan","sortable","exportable","props","methods","renderResults","report","IDSRReportService","Conditions","params","length","this","buildRows","onDownload","CSVString","getCSVString","dayjs","format","Service","getCoreVersion","getApiVersion","epiweek","getLocationName","getSiteUUID","csvData","Blob","type","reportTitle","quarter","navigator","msSaveBlob","link","document","createElement","href","window","URL","createObjectURL","setAttribute","body","appendChild","click","removeChild","forEach","condition","push","td","id","textAlign","name","buildRow","lessThanFiveYearsPatientIds","greaterThanEqualFiveYears","greaterThanEqualFiveYearsPatientIds","totalPatientIds","count","patientIds","tdLink","onDrillDown","watch","immediate","handler","__exports__","_hoisted_2","_component_ion_loading","_component_his_standard_form","_component_idsr_h","_component_monthly","_component_ion_content","_component_his_footer","_component_ion_page","_Fragment","isLoading","message","reportReady","_createCommentVNode","key","onOnFinish","onPeriod","skipSummary","fields","default","_withCtx","componentKey","reportName","rangeLabel","range","ref","periodLabel","periodDates","clinicName","totalOPDVisits","TotalOPDVisits","idsr","month","_","btns","mixins","ReportMixinVue","IonLoading","IdsrH","Monthly","HisStandardForm","HisFooter","IonPage","IonContent","formData","computedFormData","reportID","created","getBtns","getMonthlyFields","form","regenerate","setRegenerate","setEpiWeek","idsrmonth","label","setStartDate","HisDate","toStandardHisFormat","other","start","setEndDate","end","getReportPeriod","split","requestIDSRMonthly","visits","getClinicRegistrations","error","console","log","size","slot","color","visible","onClick","async","rep","$refs","exportToCustomPDF","$router","path"],"mappings":"kIAEA,MAAMA,EAAa,CACjBC,MAAO,WACPC,MAAO,CAAC,OAAS,OAAO,MAAQ,MAAM,aAAa,KAAK,gBAAgB,OAGpE,SAAUC,EAAOC,EAAMC,EAAQC,EAAQC,EAAQC,EAAOC,GAC1D,MAAMC,EAA0BC,8BAAkB,gBAElD,OAAQC,yBAAcC,yBAAa,MAAOb,EAAY,CACpDc,yBAAaJ,EAAyB,CACpCK,QAASX,EAAKW,QACdC,KAAMZ,EAAKY,KACXC,OAAQ,CAACC,cAAed,EAAKc,gBAC5B,KAAM,EAAG,CAAC,UAAW,OAAQ,a,yECNrBC,+BAAgB,CAC7BC,WAAY,CAAEC,oBACdC,KAAM,WACJ,MAAO,CACLC,WAAY,GACZC,kBAAmB,YACnBC,yBAA0B,aAC1BC,MAAO,UACPR,cAAe,mBACfF,KAAM,GACND,QAAS,CACT,CACEY,OAAMC,MAAM,GAAI,CACdC,QAAS,EACTC,UAAU,EACVC,YAAY,IAEdJ,OAAMC,MAAM,oBAAqB,CAC/BC,QAAS,EACTC,UAAU,EACVC,YAAY,KAGhB,CACEJ,OAAMC,MAAM,IACZD,OAAMC,MAAM,8BACZD,OAAMC,MAAM,WACZD,OAAMC,MAAM,YACZD,OAAMC,MAAM,aAKlBI,MAAO,CAAC,SAAU,UAAW,UAAU,eACvCC,QAAS,CACRC,gBACE,MAAMC,EAAS,IAAIC,OACbC,EAAaF,EAAOD,cAAc,KAAKI,QAC1CD,EAAWE,SACbC,KAAKjB,WAAac,EAClBG,KAAKxB,KAAO,KAAKyB,UAAUJ,KAG9BK,aACE,MAAMP,EAAS,IAAIC,OACnB,IAAI,UAACO,GAAaR,EAAOS,aAAa,KAAKrB,YAC3CoB,GAAa,6BACQE,MAAQC,OAAO,wDACXC,OAAQC,4CACbD,OAAQE,6CACN,KAAKC,4BACdH,OAAQI,2CACHJ,OAAQK,gBAEzB,MAAMC,EAAU,IAAIC,KAAK,CAACX,GAAY,CAAEY,KAAM,4BAExCC,EAAc,GAAGT,OAAQI,wCAAwC,KAAKM,UAC5E,GAAIC,UAAUC,WACZD,UAAUC,WAAWN,EAAS,sBACzB,CAEL,MAAMO,EAAOC,SAASC,cAAc,KACpCF,EAAKG,KAAOC,OAAOC,IAAIC,gBAAgBb,GACvCO,EAAKO,aAAa,WAAeX,EAAH,QAC9BK,SAASO,KAAKC,YAAYT,GAC1BA,EAAKU,QACLT,SAASO,KAAKG,YAAYX,KAG/BnB,UAAUnB,GACR,MAAMN,EAAyB,GAmB/B,OAlBAM,EAAKkD,QAASC,IAUXzD,EAAK0D,KAAK,CACR/C,OAAMgD,GAAGF,EAAUG,GAAI,CAAC1E,MAAO,CAAC2E,UAAW,UAC3ClD,OAAMgD,GAAGF,EAAUK,KAAM,CAAC5E,MAAO,CAAC2E,UAAW,UAC7C,KAAKE,SAAS,KAAKvD,kBAAkB,IAAIiD,EAAUK,KAAK,IAAKL,EAAUjD,kBAAmBiD,EAAUO,6BACpG,KAAKD,SAAS,KAAKtD,yBAAyB,IAAIgD,EAAUK,KAAK,IAAKL,EAAUQ,0BAA2BR,EAAUS,qCACnH,KAAKH,SAAS,KAAKrD,MAAM,IAAI+C,EAAUK,KAAK,IAAKL,EAAU/C,MAAO+C,EAAUU,qBAG1EnE,GAET+D,SAASD,EAAcM,EAAYC,GAClC,MAAqB,iBAAVD,EACFzD,OAAMgD,GAAG,IAEZS,EAAQ,EAGLzD,OAAM2D,OACbF,EACA,SAAa,KAAKG,YAAYT,EAAMO,IAJ7B1D,OAAMgD,GAAG,KASpBa,MAAO,CACLlD,OAAQ,CACNmD,WAAW,EACXC,UACE,KAAKxD,qB,qBCjHb,MAAMyD,EAA2B,IAAgB,EAAQ,CAAC,CAAC,SAASxF,KAErD,U,2DFLf,MAAMH,EAAa,CAAE4E,GAAI,kBACnBgB,EAA0B9E,yBAAa,MAAO,CAAE8D,GAAI,SAAW,MAAO,GAEtE,SAAUzE,EAAOC,EAAMC,EAAQC,EAAQC,EAAQC,EAAOC,GAC1D,MAAMoF,EAAyBlF,8BAAkB,eAC3CmF,EAA+BnF,8BAAkB,qBACjDoF,EAAoBpF,8BAAkB,UACtCqF,EAAqBrF,8BAAkB,WACvCsF,EAAyBtF,8BAAkB,eAC3CuF,EAAwBvF,8BAAkB,cAC1CwF,EAAsBxF,8BAAkB,YAE9C,OAAQC,yBAAcC,yBAAauF,cAAW,KAAM,CAClDtF,yBAAa+E,EAAwB,CACnC,UAAWzF,EAAKiG,UAChBC,QAAS,kBACR,KAAM,EAAG,CAAC,YACXlG,EAAKmG,YAOHC,gCAAoB,IAAI,IANvB5F,yBAAcC,yBAAaiF,EAA8B,CACxDW,IAAK,EACLC,WAAYtG,EAAKuG,SACjBC,aAAa,EACbC,OAAQzG,EAAKyG,QACZ,KAAM,EAAG,CAAC,aAAc,YAE9BzG,EAAKmG,aACD3F,yBAAcC,yBAAasF,EAAqB,CAAEM,IAAK,GAAK,CAC3DK,QAASC,qBAAS,IAAM,CACtBjG,yBAAamF,EAAwB,KAAM,CACzCa,QAASC,qBAAS,IAAM,CACtBjG,yBAAa,MAAOd,EAAY,CAC9Bc,yBAAaiF,EAAmB,CAC9BU,IAAKrG,EAAK4G,aACVC,WAAY7G,EAAK6G,WACjBC,WAAY9G,EAAK8G,WACjBC,MAAO/G,EAAK+G,MACZC,IAAK,SACLC,YAAajH,EAAKiH,YAClBC,YAAalH,EAAKkH,YAClBC,WAAYnH,EAAKmH,WACjBC,eAAgBpH,EAAKqH,gBACpB,KAAM,EAAG,CAAC,aAAc,aAAc,QAAS,cAAe,cAAe,aAAc,mBAC9F3G,yBAAakF,EAAoB,CAC/BS,IAAKrG,EAAK4G,aACVzB,YAAanF,EAAKmF,YAClBjD,OAAQlC,EAAKsH,KACbC,MAAOvH,EAAK+G,MACZC,IAAK,OACJ,KAAM,EAAG,CAAC,cAAe,SAAU,cAG1CQ,EAAG,IAEL9G,yBAAaoF,EAAuB,CAAE2B,KAAMzH,EAAKyH,MAAQ,KAAM,EAAG,CAAC,WAErED,EAAG,KAELpB,gCAAoB,IAAI,GAC5BZ,GACC,I,oGCjDUzE,+BAAgB,CAC7B2G,OAAQ,CAACC,QACT3G,WAAY,CAAE4G,kBAAYC,aAAOC,eAASC,uBAAiBC,iBAAWC,eAASC,mBAC/EhH,KAAM,KAAM,CACViH,SAAU,GACVvB,aAAc,EACdwB,iBAAkB,GAClBd,KAAM,GACNG,KAAM,GACNxB,WAAW,EACXQ,OAAQ,GACR4B,UAAW,EACXpB,YAAa,cACbC,YAAa,GACbL,WAAY,sCACZC,WAAY,QACZC,MAAO,GACPM,eAAgB,EAChBF,WAAYnF,OAAkBe,kBAC9BoD,aAAa,IAEfmC,UACElG,KAAKqF,KAAOrF,KAAKmG,UACjBnG,KAAKqE,OAASrE,KAAKoG,oBAErB3G,QAAS,CACP,eAAe4G,EAAW5H,EAAa6H,GAAa,GAClDtG,KAAKwE,cAAgB,EACrBxE,KAAK+F,SAAWM,EAChBrG,KAAKgG,iBAAmBvH,EACxBuB,KAAK+D,aAAc,EACnB/D,KAAK6D,WAAY,EACjB7D,KAAKL,OAAS,IAAIC,OAClBI,KAAKL,OAAO4G,cAAcD,GAC1BtG,KAAKL,OAAO6G,WAAWH,EAAKI,UAAUC,OACtC1G,KAAKL,OAAOgH,aAAaC,OAAQC,oBAAoBR,EAAKI,UAAUK,MAAMC,QAC1E/G,KAAKL,OAAOqH,WAAWJ,OAAQC,oBAAoBR,EAAKI,UAAUK,MAAMG,MACxEjH,KAAK8E,YAAc9E,KAAKL,OAAOuH,kBAC/BlH,KAAK2E,MAAQ0B,EAAKI,UAAUC,MAAMS,MAAM,KAAK,GAC7C,IACE,MAAMjC,QAAalF,KAAKL,OAAOyH,qBACzBC,QAAerH,KAAKL,OAAO2H,yBAC7BpC,GAAQmC,IACVrH,KAAKiG,SAAW,OAChBjG,KAAKiF,eAAiBoC,EAAOtH,OAC7BC,KAAKkF,KAAOA,GAEd,MAAOqC,GACPC,QAAQC,IAAIF,GATd,QAWEvH,KAAK6D,WAAY,IAGrBsC,UACE,MAAO,CACL,CACE7D,KAAM,MACNoF,KAAM,QACNC,KAAM,QACNC,MAAO,UACPC,SAAS,EACTC,QAASC,UACP,MAAMC,EAAMhI,KAAKiI,MAAMD,IACvBA,EAAI9H,eAGR,CACEoC,KAAM,MACNoF,KAAM,QACNC,KAAM,QACNC,MAAO,UACPC,SAAS,EACTC,QAAS,IAAM9H,KAAKkI,kBAAkB,8BAExC,CACE5F,KAAM,OACNoF,KAAM,QACNC,KAAM,MACNC,MAAO,UACPC,SAAS,EACTC,QAAS,IAAM9H,KAAK+D,aAAc,GAEpC,CACEzB,KAAM,UACNoF,KAAM,QACNC,KAAM,MACNC,MAAO,UACPC,SAAS,EACTC,QAASC,eAAkB/H,KAAKmE,SAASnE,KAAK+F,SAAU/F,KAAKgG,kBAAkB,IAEjF,CACE1D,KAAM,SACNoF,KAAM,QACNC,KAAM,MACNC,MAAO,UACPC,SAAS,EACTC,QAAS,IAAM9H,KAAKmI,QAAQjG,KAAK,CAAEkG,KAAM,Y,qBEvGnD,MAAMjF,EAA2B,IAAgB,EAAQ,CAAC,CAAC,SAASxF,KAErD","file":"js/chunk-05a3c442.e24c4fbe.js","sourcesContent":["import { resolveComponent as _resolveComponent, createVNode as _createVNode, openBlock as _openBlock, createBlock as _createBlock, createCommentVNode as _createCommentVNode, withCtx as _withCtx, Fragment as _Fragment } from \"vue\"\n\nconst _hoisted_1 = { id: \"report-content\" }\nconst _hoisted_2 = /*#__PURE__*/_createVNode(\"div\", { id: \"print\" }, null, -1)\n\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  const _component_ion_loading = _resolveComponent(\"ion-loading\")\n  const _component_his_standard_form = _resolveComponent(\"his-standard-form\")\n  const _component_idsr_h = _resolveComponent(\"idsr-h\")\n  const _component_monthly = _resolveComponent(\"monthly\")\n  const _component_ion_content = _resolveComponent(\"ion-content\")\n  const _component_his_footer = _resolveComponent(\"his-footer\")\n  const _component_ion_page = _resolveComponent(\"ion-page\")\n\n  return (_openBlock(), _createBlock(_Fragment, null, [\n    _createVNode(_component_ion_loading, {\n      \"is-open\": _ctx.isLoading,\n      message: \"Please wait...\"\n    }, null, 8, [\"is-open\"]),\n    (!_ctx.reportReady)\n      ? (_openBlock(), _createBlock(_component_his_standard_form, {\n          key: 0,\n          onOnFinish: _ctx.onPeriod,\n          skipSummary: true,\n          fields: _ctx.fields\n        }, null, 8, [\"onOnFinish\", \"fields\"]))\n      : _createCommentVNode(\"\", true),\n    (_ctx.reportReady)\n      ? (_openBlock(), _createBlock(_component_ion_page, { key: 1 }, {\n          default: _withCtx(() => [\n            _createVNode(_component_ion_content, null, {\n              default: _withCtx(() => [\n                _createVNode(\"div\", _hoisted_1, [\n                  _createVNode(_component_idsr_h, {\n                    key: _ctx.componentKey,\n                    reportName: _ctx.reportName,\n                    rangeLabel: _ctx.rangeLabel,\n                    range: _ctx.range,\n                    ref: \"header\",\n                    periodLabel: _ctx.periodLabel,\n                    periodDates: _ctx.periodDates,\n                    clinicName: _ctx.clinicName,\n                    totalOPDVisits: _ctx.TotalOPDVisits\n                  }, null, 8, [\"reportName\", \"rangeLabel\", \"range\", \"periodLabel\", \"periodDates\", \"clinicName\", \"totalOPDVisits\"]),\n                  _createVNode(_component_monthly, {\n                    key: _ctx.componentKey,\n                    onDrillDown: _ctx.onDrillDown,\n                    params: _ctx.idsr,\n                    month: _ctx.range,\n                    ref: \"rep\"\n                  }, null, 8, [\"onDrillDown\", \"params\", \"month\"])\n                ])\n              ]),\n              _: 1\n            }),\n            _createVNode(_component_his_footer, { btns: _ctx.btns }, null, 8, [\"btns\"])\n          ]),\n          _: 1\n        }))\n      : _createCommentVNode(\"\", true),\n    _hoisted_2\n  ], 64 /* STABLE_FRAGMENT */))\n}","\nimport { defineComponent } from \"vue\";\nimport HisFooter from \"@/components/HisDynamicNavFooter.vue\";\nimport { IonPage, IonContent, IonLoading } from \"@ionic/vue\"\nimport { Field } from '@/components/Forms/FieldInterface'\nimport HisStandardForm from \"@/components/Forms/HisStandardForm.vue\";\nimport ReportMixinVue from \"../../ReportMixin.vue\";\nimport { IDSRReportService } from \"@/apps/OPD/services/idsr_service\"\nimport IdsrH from \"@/apps/OPD/views/reports/moh/MOHReportHeader.vue\"\nimport Monthly from \"@/apps/OPD/views/reports/moh/IDSR/IDSRTableTemplate.vue\"\nimport HisDate from \"@/utils/Date\"\n\nexport default defineComponent({\n  mixins: [ReportMixinVue],\n  components: { IonLoading, IdsrH, Monthly, HisStandardForm, HisFooter, IonPage, IonContent },\n  data: () => ({\n    formData: {} as any,\n    componentKey: 0 as number,\n    computedFormData: {} as any,\n    idsr: {} as any,\n    btns: [] as Array<any>,\n    isLoading: false as boolean,\n    fields: [] as Array<Field>,\n    reportID: -1 as any,\n    periodLabel: 'Month Dates',\n    periodDates: '' as string,\n    reportName: 'MONTHLY DISEASE SURVEILLANCE REPORT',\n    rangeLabel: 'Month',\n    range: '' as string,\n    TotalOPDVisits: 0 as number,\n    clinicName: IDSRReportService.getLocationName(),\n    reportReady: false as boolean,\n  }),\n  created() {\n    this.btns = this.getBtns()\n    this.fields = this.getMonthlyFields()\n  },\n  methods: {\n    async onPeriod(form: any, config: any, regenerate = false) {\n      this.componentKey += 1\n      this.formData = form\n      this.computedFormData = config\n      this.reportReady = true\n      this.isLoading = true\n      this.report = new IDSRReportService()\n      this.report.setRegenerate(regenerate)\n      this.report.setEpiWeek(form.idsrmonth.label)\n      this.report.setStartDate(HisDate.toStandardHisFormat(form.idsrmonth.other.start))\n      this.report.setEndDate(HisDate.toStandardHisFormat(form.idsrmonth.other.end))\n      this.periodDates = this.report.getReportPeriod()\n      this.range = form.idsrmonth.label.split(\" \")[0]\n      try {\n        const idsr = await this.report.requestIDSRMonthly()\n        const visits = await this.report.getClinicRegistrations()\n        if (idsr && visits) {\n          this.reportID = \"data\"\n          this.TotalOPDVisits = visits.length\n          this.idsr = idsr\n        }\n      } catch (error) {\n        console.log(error)\n      } finally {\n        this.isLoading = false\n      }\n    },\n    getBtns() {\n      return [\n        {\n          name: \"CSV\",\n          size: \"large\",\n          slot: \"start\",\n          color: \"primary\",\n          visible: true,\n          onClick: async () => {\n            const rep = this.$refs.rep as any\n            rep.onDownload()\n          }\n        },\n        {\n          name: \"PDF\",\n          size: \"large\",\n          slot: \"start\",\n          color: \"primary\",\n          visible: true,\n          onClick: () => this.exportToCustomPDF('Print IDSR Monthly Report')\n        },\n        {\n          name: \"Back\",\n          size: \"large\",\n          slot: \"end\",\n          color: \"warning\",\n          visible: true,\n          onClick: () => this.reportReady = false\n        },\n        {\n          name: \"Refresh\",\n          size: \"large\",\n          slot: \"end\",\n          color: \"warning\",\n          visible: true,\n          onClick: async () => await this.onPeriod(this.formData, this.computedFormData, true)\n        },\n        {\n          name: \"Finish\",\n          size: \"large\",\n          slot: \"end\",\n          color: \"success\",\n          visible: true,\n          onClick: () => this.$router.push({ path: '/' })\n        }\n      ]\n    },\n  }\n})\n","import { render } from \"./IDSRTableTemplate.vue?vue&type=template&id=34feb6ec&ts=true\"\nimport script from \"./IDSRTableTemplate.vue?vue&type=script&lang=ts\"\nexport * from \"./IDSRTableTemplate.vue?vue&type=script&lang=ts\"\n\nimport exportComponent from \"/home/andrew-dev/Projects/HIS-Core/node_modules/vue-loader-v16/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","import { render } from \"./IDSRMonthly.vue?vue&type=template&id=489e9a54&ts=true\"\nimport script from \"./IDSRMonthly.vue?vue&type=script&lang=ts\"\nexport * from \"./IDSRMonthly.vue?vue&type=script&lang=ts\"\n\nimport exportComponent from \"/home/andrew-dev/Projects/HIS-Core/node_modules/vue-loader-v16/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__"],"sourceRoot":""}