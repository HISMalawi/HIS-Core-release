(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-05a3c442"],{"05e1":function(e,t,o){"use strict";var n=o("7a23");const a={class:"my-table",style:{margin:"auto",width:"95%","margin-top":"3%","margin-bottom":"3%"}};function s(e,t,o,s,r,i){const l=Object(n["resolveComponent"])("report-table");return Object(n["openBlock"])(),Object(n["createBlock"])("div",a,[Object(n["createVNode"])(l,{columns:e.columns,rows:e.rows,config:{tableCssTheme:e.tableCssTheme}},null,8,["columns","rows","config"])])}var r=o("6d14"),i=o("1c74"),l=o("5a0c"),c=o.n(l),d=o("80e3"),h=o("9ceb"),p=Object(n["defineComponent"])({components:{ReportTable:d["a"]},data:function(){return{conditions:[],lessThanFiveYears:" < 5 yrs ",greaterAndEqualFiveYears:" >= 5 yrs ",total:" Total ",tableCssTheme:"opd-report-theme",rows:[],columns:[[h["a"].thTxt("",{colspan:2,sortable:!1,exportable:!1}),h["a"].thTxt("Out-patient Cases",{colspan:3,sortable:!1,exportable:!1})],[h["a"].thTxt(""),h["a"].thTxt("Diseases/Events/Conditions"),h["a"].thTxt("< 5 yrs"),h["a"].thTxt(">= 5 yrs"),h["a"].thTxt("Total")]]}},props:["params","epiweek","quarter","onDrillDown"],methods:{renderResults(){const e=new r["a"],t=e.renderResults(this.params);t.length&&(this.conditions=t,this.rows=this.buildRows(t))},onDownload(){const e=new r["a"];let{CSVString:t}=e.getCSVString(this.conditions);t+=`\n          Date Created: ${c()().format("DD/MMM/YYYY HH:MM:ss")}\n          His-Core Version: ${i["e"].getCoreVersion()}\n          API Version: ${i["e"].getApiVersion()}\n          Report Period: ${this.epiweek}\n          Site: ${i["e"].getLocationName()}\n          Site UUID: ${i["e"].getSiteUUID()}`;const o=new Blob([t],{type:"text/csv;charset=utf-8;"}),n=`${i["e"].getLocationName()} Weekly IDSR report ${this.quarter}`;if(navigator.msSaveBlob)navigator.msSaveBlob(o,"exportFilename");else{const e=document.createElement("a");e.href=window.URL.createObjectURL(o),e.setAttribute("download",n+".csv"),document.body.appendChild(e),e.click(),document.body.removeChild(e)}},buildRows(e){const t=[];return e.forEach(e=>{t.push([h["a"].td(e.id,{style:{textAlign:"left"}}),h["a"].td(e.name,{style:{textAlign:"left"}}),this.buildRow(this.lessThanFiveYears+"("+e.name+")",e.lessThanFiveYears,e.lessThanFiveYearsPatientIds),this.buildRow(this.greaterAndEqualFiveYears+"("+e.name+")",e.greaterThanEqualFiveYears,e.greaterThanEqualFiveYearsPatientIds),this.buildRow(this.total+"("+e.name+")",e.total,e.totalPatientIds)])}),t},buildRow(e,t,o){return"string"==typeof t?h["a"].td(""):t>0?h["a"].tdLink(t,async()=>this.onDrillDown(e,o)):h["a"].td(0)}},watch:{params:{immediate:!0,handler(){this.renderResults()}}}}),m=o("6b0d"),b=o.n(m);const u=b()(p,[["render",s]]);t["a"]=u},"9ad4":function(e,t,o){"use strict";o.r(t);var n=o("7a23");const a={id:"report-content"},s=Object(n["createVNode"])("div",{id:"print"},null,-1);function r(e,t,o,r,i,l){const c=Object(n["resolveComponent"])("ion-loading"),d=Object(n["resolveComponent"])("his-standard-form"),h=Object(n["resolveComponent"])("idsr-h"),p=Object(n["resolveComponent"])("monthly"),m=Object(n["resolveComponent"])("ion-content"),b=Object(n["resolveComponent"])("his-footer"),u=Object(n["resolveComponent"])("ion-page");return Object(n["openBlock"])(),Object(n["createBlock"])(n["Fragment"],null,[Object(n["createVNode"])(c,{"is-open":e.isLoading,message:"Please wait..."},null,8,["is-open"]),e.reportReady?Object(n["createCommentVNode"])("",!0):(Object(n["openBlock"])(),Object(n["createBlock"])(d,{key:0,onOnFinish:e.onPeriod,skipSummary:!0,fields:e.fields},null,8,["onOnFinish","fields"])),e.reportReady?(Object(n["openBlock"])(),Object(n["createBlock"])(u,{key:1},{default:Object(n["withCtx"])(()=>[Object(n["createVNode"])(m,null,{default:Object(n["withCtx"])(()=>[Object(n["createVNode"])("div",a,[Object(n["createVNode"])(h,{key:e.componentKey,reportName:e.reportName,rangeLabel:e.rangeLabel,range:e.range,ref:"header",periodLabel:e.periodLabel,periodDates:e.periodDates,clinicName:e.clinicName,totalOPDVisits:e.TotalOPDVisits},null,8,["reportName","rangeLabel","range","periodLabel","periodDates","clinicName","totalOPDVisits"]),Object(n["createVNode"])(p,{key:e.componentKey,onDrillDown:e.onDrillDown,params:e.idsr,month:e.range,ref:"rep"},null,8,["onDrillDown","params","month"])])]),_:1}),Object(n["createVNode"])(b,{btns:e.btns},null,8,["btns"])]),_:1})):Object(n["createCommentVNode"])("",!0),s],64)}var i=o("0f25"),l=o("8a30"),c=o("7920"),d=o("c2b0"),h=o("6d14"),p=o("cb01"),m=o("05e1"),b=o("9283"),u=Object(n["defineComponent"])({mixins:[d["a"]],components:{IonLoading:l["z"],IdsrH:p["a"],Monthly:m["a"],HisStandardForm:c["a"],HisFooter:i["a"],IonPage:l["D"],IonContent:l["n"]},data:()=>({formData:{},componentKey:0,computedFormData:{},idsr:{},btns:[],isLoading:!1,fields:[],reportID:-1,periodLabel:"Month Dates",periodDates:"",reportName:"MONTHLY DISEASE SURVEILLANCE REPORT",rangeLabel:"Month",range:"",TotalOPDVisits:0,clinicName:h["a"].getLocationName(),reportReady:!1}),created(){this.btns=this.getBtns(),this.fields=this.getMonthlyFields()},methods:{async onPeriod(e,t,o=!1){this.componentKey+=1,this.formData=e,this.computedFormData=t,this.reportReady=!0,this.isLoading=!0,this.report=new h["a"],this.report.setRegenerate(o),this.report.setEpiWeek(e.idsrmonth.label),this.report.setStartDate(b["b"].toStandardHisFormat(e.idsrmonth.other.start)),this.report.setEndDate(b["b"].toStandardHisFormat(e.idsrmonth.other.end)),this.periodDates=this.report.getReportPeriod(),this.range=e.idsrmonth.label.split(" ")[0];try{const e=await this.report.requestIDSRMonthly(),t=await this.report.getClinicRegistrations();e&&t&&(this.reportID="data",this.TotalOPDVisits=t.length,this.idsr=e)}catch(n){console.log(n)}finally{this.isLoading=!1}},getBtns(){return[{name:"CSV",size:"large",slot:"start",color:"primary",visible:!0,onClick:async()=>{const e=this.$refs.rep;e.onDownload()}},{name:"PDF",size:"large",slot:"start",color:"primary",visible:!0,onClick:()=>this.exportToCustomPDF("Print IDSR Monthly Report")},{name:"Back",size:"large",slot:"end",color:"warning",visible:!0,onClick:()=>this.reportReady=!1},{name:"Refresh",size:"large",slot:"end",color:"warning",visible:!0,onClick:async()=>await this.onPeriod(this.formData,this.computedFormData,!0)},{name:"Finish",size:"large",slot:"end",color:"success",visible:!0,onClick:()=>this.$router.push({path:"/"})}]}}}),g=o("6b0d"),D=o.n(g);const w=D()(u,[["render",r]]);t["default"]=w}}]);
//# sourceMappingURL=chunk-05a3c442.e24c4fbe.js.map