(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["TouchFormElement6","TouchFormElement38","TouchFormElement51","TouchFormElement8"],{"04a0":function(e,t,n){},"05d5":function(e,t,n){"use strict";n.r(t);var c=n("7a23"),r=Object(c["withScopeId"])("data-v-0a86ecc6");Object(c["pushScopeId"])("data-v-0a86ecc6");var a={class:"view-port-content"},o={key:0,class:"his-card history"},i={class:"his-table"},l=Object(c["createVNode"])("tr",null,[Object(c["createVNode"])("th",null," Medication"),Object(c["createVNode"])("th",null," Date"),Object(c["createVNode"])("th",null," Amount dispensed ")],-1),s={key:1,class:"prescription-tab"},u={class:"prescription-table-section his-card"},d={class:"his-table"},b=Object(c["createVNode"])("tr",null,[Object(c["createVNode"])("th",null," Medication"),Object(c["createVNode"])("th",null," Amount in stock"),Object(c["createVNode"])("th",null," Amount needed"),Object(c["createVNode"])("th",null," Amount dispensed "),Object(c["createVNode"])("th",null," Reset ")],-1),p={class:"barcode-section"};Object(c["popScopeId"])();var O=r((function(e,t,n,O,j,f){var m=Object(c["resolveComponent"])("nav-button"),h=Object(c["resolveComponent"])("ion-col"),v=Object(c["resolveComponent"])("ion-input"),V=Object(c["resolveComponent"])("reset-button"),N=Object(c["resolveComponent"])("barcode"),k=Object(c["resolveComponent"])("ion-row"),g=Object(c["resolveComponent"])("view-port");return Object(c["openBlock"])(),Object(c["createBlock"])(g,null,{default:r((function(){return[Object(c["createVNode"])("div",a,[Object(c["createVNode"])(k,null,{default:r((function(){return[Object(c["createVNode"])(h,{size:"2"},{default:r((function(){return[Object(c["createVNode"])(m,{onClick:t[1]||(t[1]=function(t){return e.tab="prescribe"}),isActive:"prescribe"===e.tab,image:"prescription/rx",label:"Prescribed"},null,8,["isActive"]),Object(c["createVNode"])(m,{onClick:t[2]||(t[2]=function(t){return e.tab="history"}),isActive:"history"===e.tab,image:"prescription/history",label:"History"},null,8,["isActive"])]})),_:1}),Object(c["createVNode"])(h,{size:"10"},{default:r((function(){return["history"===e.tab?(Object(c["openBlock"])(),Object(c["createBlock"])("div",o,[Object(c["createVNode"])("table",i,[l,(Object(c["openBlock"])(!0),Object(c["createBlock"])(c["Fragment"],null,Object(c["renderList"])(e.medicationHistory,(function(e,t){return Object(c["openBlock"])(),Object(c["createBlock"])("tr",{key:t},[Object(c["createVNode"])("td",null,Object(c["toDisplayString"])(e.medication),1),Object(c["createVNode"])("td",null,Object(c["toDisplayString"])(e.date),1),Object(c["createVNode"])("td",null,Object(c["toDisplayString"])(e.amount),1)])})),128))])])):Object(c["createCommentVNode"])("",!0),"prescribe"===e.tab?(Object(c["openBlock"])(),Object(c["createBlock"])("div",s,[Object(c["createVNode"])("div",u,[Object(c["createVNode"])("table",d,[b,(Object(c["openBlock"])(!0),Object(c["createBlock"])(c["Fragment"],null,Object(c["renderList"])(e.listData,(function(t,n){return Object(c["openBlock"])(),Object(c["createBlock"])("tr",{key:n},[Object(c["createVNode"])("td",null,Object(c["toDisplayString"])(t.label),1),Object(c["createVNode"])("td",null,Object(c["toDisplayString"])(e.isStockManagementEnabled&&t.other.available_stock?t.other.available_stock:"-"),1),Object(c["createVNode"])("td",null,Object(c["toDisplayString"])(t.other.amount_needed),1),Object(c["createVNode"])("td",null,[Object(c["createVNode"])(v,{disabled:t.value>0,value:t.value,onClick:function(n){return t.value<=0?e.launchDispenser(t):null},class:"dosage-input"},null,8,["disabled","value","onClick"])]),Object(c["createVNode"])("td",null,[Object(c["createVNode"])(V,{disabled:t.value<=0,onClick:function(n){return t.value>0?e.onReset(t):null}},null,8,["disabled","onClick"])])])})),128))])]),Object(c["createVNode"])("div",p,[Object(c["createVNode"])(N,{onOnScan:e.onScan,class:"his-card"},null,8,["onOnScan"])])])):Object(c["createCommentVNode"])("",!0)]})),_:1})]})),_:1})])]})),_:1})})),j=n("5530"),f=n("3835"),m=n("1da1"),h=(n("ac1f"),n("1276"),n("d81d"),n("d3b7"),n("25f0"),n("3ca3"),n("ddb0"),n("96cf"),n("0a79")),v=n("8a30"),V=n("efaf"),N=n("c850"),k=n("7653"),g=Object(c["withScopeId"])("data-v-7729d4c8");Object(c["pushScopeId"])("data-v-7729d4c8");var y={colspan:"6"},w=Object(c["createVNode"])("tr",null,[Object(c["createVNode"])("th",null,"Total tab(s) needed "),Object(c["createVNode"])("th",{colspan:"2"}," Available stock "),Object(c["createVNode"])("th",{colspan:"2"}," Dispensed "),Object(c["createVNode"])("th")],-1),C=Object(c["createVNode"])("tr",null,[Object(c["createVNode"])("th"),Object(c["createVNode"])("th",null," Pack size "),Object(c["createVNode"])("th",null," Packs "),Object(c["createVNode"])("th",null," Total Tab(s)"),Object(c["createVNode"])("th",null," Packs "),Object(c["createVNode"])("th")],-1),D={class:"btn-list"},B=Object(c["createTextVNode"])(" + "),S=Object(c["createTextVNode"])(" - "),x=Object(c["createTextVNode"])(" Close "),_=Object(c["createTextVNode"])(" Dispense ");Object(c["popScopeId"])();var I=g((function(e,t,n,r,a,o){var i=Object(c["resolveComponent"])("ion-button"),l=Object(c["resolveComponent"])("ion-content"),s=Object(c["resolveComponent"])("ion-toolbar"),u=Object(c["resolveComponent"])("ion-footer");return Object(c["openBlock"])(),Object(c["createBlock"])(c["Fragment"],null,[Object(c["createVNode"])(l,null,{default:g((function(){return[Object(c["createVNode"])("table",null,[Object(c["createVNode"])("thead",null,[Object(c["createVNode"])("tr",null,[Object(c["createVNode"])("th",y,Object(c["toDisplayString"])(e.drugName),1)]),w,C]),Object(c["createVNode"])("tbody",null,[Object(c["createVNode"])("tr",null,[Object(c["createVNode"])("td",{rowspan:e.amountNeededRowSpan},Object(c["toDisplayString"])(e.tabsNeeded)+" tab(s) ",9,["rowspan"])]),(Object(c["openBlock"])(!0),Object(c["createBlock"])(c["Fragment"],null,Object(c["renderList"])(e.listData,(function(t,n){return Object(c["openBlock"])(),Object(c["createBlock"])("tr",{key:n},[(Object(c["openBlock"])(!0),Object(c["createBlock"])(c["Fragment"],null,Object(c["renderList"])(t,(function(e,t){return Object(c["openBlock"])(),Object(c["createBlock"])("td",{key:t,class:t>=2?"input-field":"his-md-text"},Object(c["toDisplayString"])(e),3)})),128)),Object(c["createVNode"])("td",null,[Object(c["createVNode"])("ul",D,[Object(c["createVNode"])("li",null,[Object(c["createVNode"])(i,{onClick:function(t){return e.incrementAmount(n)},class:"dispense-btn",size:"large"},{default:g((function(){return[B]})),_:1},8,["onClick"])]),Object(c["createVNode"])("li",null,[Object(c["createVNode"])(i,{onClick:function(t){return e.decrementAmount(n)},class:"dispense-btn",size:"large"},{default:g((function(){return[S]})),_:1},8,["onClick"])])])])])})),128))])])]})),_:1}),Object(c["createVNode"])(u,null,{default:g((function(){return[Object(c["createVNode"])(s,null,{default:g((function(){return[Object(c["createVNode"])(i,{onClick:e.onClose,color:"danger",size:"large",slot:"end"},{default:g((function(){return[x]})),_:1},8,["onClick"]),Object(c["createVNode"])(i,{onClick:t[1]||(t[1]=function(t){return e.onDispense(e.dispensedValues)}),disabled:e.totalTabs<=0,color:"success",size:"large",slot:"end"},{default:g((function(){return[_]})),_:1},8,["disabled"])]})),_:1})]})),_:1})],64)})),R=n("2909"),A=(n("4de4"),Object(c["defineComponent"])({data:function(){return{listData:[],tabsIndex:2,packsIndex:3}},props:{drugName:{type:String,required:!0},tabsNeeded:{type:String,required:!0},items:{type:Array,required:!0},onDispense:{type:Function,required:!0}},computed:{dispensedValues:function(){var e=this;return this.listData.filter((function(t){return t[e.tabsIndex]>0})).map((function(t){return[t[e.tabsIndex],t[e.packsIndex]]}))},amountNeededRowSpan:function(){return this.listData.length+1}},watch:{items:{handler:function(e){e&&(this.listData=Object(R["a"])(e))},deep:!0,immediate:!0}},methods:{onClose:function(){return Object(m["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,v["modalController"].dismiss({});case 2:case"end":return e.stop()}}),e)})))()},incrementAmount:function(e){var t=Object(f["a"])(this.listData[e],4),n=t[0],c=(t[1],t[2]),r=t[3],a=n+c,o=r+1;this.listData[e][2]=a,this.listData[e][3]=o},decrementAmount:function(e){var t=Object(f["a"])(this.listData[e],4),n=t[0],c=(t[1],t[2]),r=t[3],a=r-1;if(a>=0){var o=c-n;this.listData[e][2]=o,this.listData[e][3]=a}}}})),F=(n("1b4f"),n("d959")),T=n.n(F);const E=T()(A,[["render",I],["__scopeId","data-v-7729d4c8"]]);var q=E,z=n("51c8"),P=n("2ef0"),H=n("b5e4"),M=Object(c["defineComponent"])({components:{ViewPort:h["a"],Barcode:V["a"],NavButton:N["a"],ResetButton:k["a"],IonRow:v["IonRow"],IonCol:v["IonCol"]},mixins:[z["default"]],data:function(){return{tab:"prescribe",listData:[],medicationHistory:[],isStockManagementEnabled:!1}},mounted:function(){this.init()},activated:function(){this.init()},watch:{tab:{handler:function(e){var t=this;"history"===e&&Object(P["isEmpty"])(this.medicationHistory)&&"function"===typeof this.config.medicationHistory&&this.config.medicationHistory().then((function(e){e&&(t.medicationHistory=e)})).catch((function(e){Object(H["c"])("".concat(e))}))}}},methods:{init:function(){var e=this;return Object(m["a"])(regeneratorRuntime.mark((function t(){var n,c;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.$emit("onFieldActivated",e),"function"===typeof(null===(n=e.config)||void 0===n?void 0:n.isDrugManagementEnabled)&&(e.isStockManagementEnabled=null===(c=e.config)||void 0===c?void 0:c.isDrugManagementEnabled()),t.next=4,e.options(e.fdata);case 4:e.listData=t.sent;case 5:case"end":return t.stop()}}),t)})))()},onScan:function(e){var t=this;return Object(m["a"])(regeneratorRuntime.mark((function n(){var c,r,a,o,i;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return c=e.split("-"),r=Object(f["a"])(c,2),a=r[0],o=r[1],i=t.listData.map(function(){var e=Object(m["a"])(regeneratorRuntime.mark((function e(n){var c,r,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(n.other.drug_id!==parseInt(a)){e.next=7;break}return c=parseInt(n.value.toString()),r=parseInt(o),e.next=5,t.updateOnValue(n,r,[],!0);case 5:i=e.sent,i&&(n.value=r+c);case 7:return e.abrupt("return",n);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),n.next=4,Promise.all(i);case 4:t.listData=n.sent;case 5:case"end":return n.stop()}}),n)})))()},onReset:function(e){var t=this;return Object(m["a"])(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.next=2,t.updateOnValue(e,-1);case 2:case"end":return n.stop()}}),n)})))()},updateOnValue:function(e,t){var n=arguments,c=this;return Object(m["a"])(regeneratorRuntime.mark((function r(){var a,o,i;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:if(a=n.length>2&&void 0!==n[2]?n[2]:[],o=n.length>3&&void 0!==n[3]&&n[3],!c.onValue){r.next=8;break}return r.next=5,c.onValue({label:e.label,other:Object(j["a"])({dispenses:a},e.other),value:t},o);case 5:if(i=r.sent,i){r.next=8;break}return r.abrupt("return",!1);case 8:if(e.value=t<0?0:t,c.$emit("onValue",e),!c.onValueUpdate){r.next=14;break}return r.next=13,c.onValueUpdate(e,c.listData);case 13:c.listData=r.sent;case 14:return r.abrupt("return",!0);case 15:case"end":return r.stop()}}),r)})))()},launchDispenser:function(e){var t=this;return Object(m["a"])(regeneratorRuntime.mark((function n(){var c;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.next=2,v["modalController"].create({component:q,backdropDismiss:!1,cssClass:"custom-modal",componentProps:{drugName:e.label,tabsNeeded:e.other.amount_needed,items:e.other.pack_sizes,onDispense:function(){var n=Object(m["a"])(regeneratorRuntime.mark((function n(c){var r,a,o;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return r=0,a=c.reduce((function(e,t){return e+t[r]}),0),n.next=4,t.updateOnValue(e,a,c);case 4:if(o=n.sent,!o){n.next=8;break}return n.next=8,v["modalController"].dismiss({});case 8:case"end":return n.stop()}}),n)})));function c(e){return n.apply(this,arguments)}return c}()}});case 2:c=n.sent,c.present();case 4:case"end":return n.stop()}}),n)})))()}}});n("304d");const L=T()(M,[["render",O],["__scopeId","data-v-0a86ecc6"]]);t["default"]=L},"0a79":function(e,t,n){"use strict";var c=n("7a23"),r=Object(c["withScopeId"])("data-v-7c293cad"),a=r((function(e,t,n,r,a,o){return Object(c["openBlock"])(),Object(c["createBlock"])("div",{id:"view-port",class:e.showFull?"":"half"},[Object(c["renderSlot"])(e.$slots,"default")],2)})),o=Object(c["defineComponent"])({name:"ViewPort",props:{showFull:{type:Boolean,default:function(){return!0}}}}),i=(n("a4d3f"),n("d959")),l=n.n(i);const s=l()(o,[["render",a],["__scopeId","data-v-7c293cad"]]);t["a"]=s},"1b4f":function(e,t,n){"use strict";n("885a")},"28c8":function(e,t,n){},"2ee9":function(e,t,n){"use strict";n("dae2")},"304d":function(e,t,n){"use strict";n("adb7")},"51c8":function(e,t,n){"use strict";n.r(t);n("a9e3");var c=n("7a23"),r=Object(c["defineComponent"])({emits:["onValue","onFieldActivated"],props:{config:{type:Object,default:function(){return{}}},preset:{type:Object,default:function(){return{label:"",value:""}}},defaultValue:{type:Function},fdata:{type:Object,required:!0},cdata:{type:Object,required:!0},clear:{type:Number,required:!0},options:{type:Function,default:function(){return[]}},activationState:{type:String,default:""},onValue:{type:Function},onValueUpdate:{type:Function},footerButtonEvent:{type:Object}}});const a=r;t["default"]=a},7653:function(e,t,n){"use strict";var c=n("7a23"),r=Object(c["withScopeId"])("data-v-7970cd10"),a=r((function(e,t,n,a,o,i){var l=Object(c["resolveComponent"])("center");return Object(c["openBlock"])(),Object(c["createBlock"])("div",{class:e.state},[Object(c["createVNode"])(l,null,{default:r((function(){return[Object(c["createVNode"])("img",{src:e.icon},null,8,["src"])]})),_:1})],2)})),o=Object(c["defineComponent"])({props:{label:{type:String,required:!0},disabled:{type:Boolean}},computed:{state:function(){return this.disabled?"disabled-btn":"clickable"},icon:function(){return"assets/images/reset.png"}}}),i=(n("de49"),n("d959")),l=n.n(i);const s=l()(o,[["render",a],["__scopeId","data-v-7970cd10"]]);t["a"]=s},"885a":function(e,t,n){},a4d3f:function(e,t,n){"use strict";n("04a0")},adb7:function(e,t,n){},c850:function(e,t,n){"use strict";var c=n("7a23"),r=Object(c["withScopeId"])("data-v-321424f0"),a=r((function(e,t,n,a,o,i){var l=Object(c["resolveComponent"])("center");return Object(c["openBlock"])(),Object(c["createBlock"])("div",{class:"his-card ".concat(e.state," clickable")},[Object(c["createVNode"])("img",{src:e.icon},null,8,["src"]),Object(c["createVNode"])(l,null,{default:r((function(){return[Object(c["createTextVNode"])(Object(c["toDisplayString"])(e.label),1)]})),_:1})],2)})),o=Object(c["defineComponent"])({props:{label:{type:String,required:!0},image:{type:String,required:!0},isActive:{type:Boolean,default:!0}},computed:{state:function(){return this.isActive?"active-card-color":"disabled-card-color"},icon:function(){return"assets/images/".concat(this.image,".png")}}}),i=(n("2ee9"),n("d959")),l=n.n(i);const s=l()(o,[["render",a],["__scopeId","data-v-321424f0"]]);t["a"]=s},dae2:function(e,t,n){},de49:function(e,t,n){"use strict";n("28c8")}}]);
//# sourceMappingURL=TouchFormElement6.f441cef8.js.map