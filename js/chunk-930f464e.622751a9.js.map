{"version":3,"sources":["webpack:///./node_modules/core-js/modules/es.array.flat.js","webpack:///./src/apps/ART/services/adherence_service.ts","webpack:///./src/apps/ART/services/lab_order_service.ts","webpack:///./src/services/person_attributes_service.ts","webpack:///./src/services/patient_registration_service.ts","webpack:///./src/services/relations_service.ts","webpack:///./src/apps/ART/services/htn_service.ts","webpack:///./src/apps/ART/services/consultation_service.ts","webpack:///./src/apps/EMC/utils/DTFormElements.ts","webpack:///./node_modules/core-js/modules/es.array.unscopables.flat.js","webpack:///./src/apps/EMC/Components/inputs/SelectInput.vue?cbea","webpack:///./src/services/patient_lab_result_service.ts","webpack:///./src/apps/EMC/utils/form.ts","webpack:///./src/apps/ART/services/stock_service.ts","webpack:///./src/apps/ART/services/dispensation_service.ts","webpack:///./src/apps/ART/services/reception_service.ts","webpack:///./src/services/regimen_service.ts","webpack:///./src/services/drug_order_service.ts","webpack:///./src/utils/ActionSheetHelpers/VoidReason.ts","webpack:///./src/apps/EMC/Components/tables/VisitsSummary.vue?81d4","webpack:///./src/components/DataViews/DrillTableModal.vue?4406","webpack:///./src/components/DataViews/DrillTableModal.vue","webpack:///./src/components/DataViews/DrillTableModal.vue?e09d","webpack:///./src/apps/ART/services/appointment_service.ts","webpack:///./src/apps/EMC/views/Mastercard.vue?a22b","webpack:///./src/apps/EMC/Components/tables/VisitsSummary.vue?919f","webpack:///./src/apps/EMC/Components/modals/ViralLoadResult.vue?f853","webpack:///./src/apps/EMC/Components/modals/ViralLoadResult.vue","webpack:///./src/apps/EMC/Components/modals/ViralLoadResult.vue?6e19","webpack:///./src/apps/EMC/Components/modals/OutcomeStatus.vue?f025","webpack:///./src/apps/EMC/Components/tables/OutcomesTable.vue?f120","webpack:///./src/apps/EMC/Components/tables/OutcomesTable.vue","webpack:///./src/apps/EMC/Components/tables/OutcomesTable.vue?3dd2","webpack:///./src/apps/EMC/Components/EnrollmentForm.vue?b220","webpack:///./src/apps/EMC/Components/EnrollmentForm.vue","webpack:///./src/apps/EMC/Components/EnrollmentForm.vue?4c92","webpack:///./src/apps/EMC/Components/OutcomeForm.vue?1ed6","webpack:///./src/apps/EMC/Components/OutcomeForm.vue","webpack:///./src/apps/EMC/Components/OutcomeForm.vue?cd60","webpack:///./src/apps/EMC/Components/modals/OutcomeStatus.vue","webpack:///./src/apps/EMC/Components/modals/OutcomeStatus.vue?1d50","webpack:///./src/apps/EMC/Components/modals/PatientVisit.vue?1758","webpack:///./src/services/patient_observation_service.ts","webpack:///./src/utils/Arrays.ts","webpack:///./src/apps/EMC/Components/modals/PatientVisit.vue","webpack:///./src/apps/EMC/Components/modals/PatientVisit.vue?21d5","webpack:///./src/apps/EMC/Components/tables/VisitsSummary.vue","webpack:///./src/apps/EMC/Components/tables/VisitsSummary.vue?f5e5","webpack:///./src/apps/EMC/Components/InformationHeader.vue?64c5","webpack:///./src/apps/EMC/Components/InformationHeader.vue","webpack:///./src/apps/EMC/Components/InformationHeader.vue?e433","webpack:///./src/apps/EMC/Components/modals/PatientDemographics.vue?6b40","webpack:///./src/apps/EMC/Components/modals/PatientDemographics.vue","webpack:///./src/apps/EMC/Components/modals/PatientDemographics.vue?c21a","webpack:///./src/apps/EMC/Components/modals/GuardianDemographics.vue?57dc","webpack:///./src/apps/EMC/Components/modals/GuardianDemographics.vue","webpack:///./src/apps/EMC/Components/modals/GuardianDemographics.vue?b068","webpack:///./src/apps/EMC/Components/modals/ArvNumber.vue?3487","webpack:///./src/apps/EMC/Components/modals/ArvNumber.vue","webpack:///./src/apps/EMC/Components/modals/ArvNumber.vue?79f5","webpack:///./src/apps/EMC/views/Mastercard.vue","webpack:///./src/apps/EMC/views/Mastercard.vue?2483","webpack:///./node_modules/core-js/internals/flatten-into-array.js","webpack:///./node_modules/core-js/modules/es.number.max-safe-integer.js","webpack:///./src/apps/ART/services/vitals_service.ts","webpack:///./src/apps/EMC/Components/inputs/SelectInput.vue?9979","webpack:///./src/apps/EMC/Components/inputs/SelectInput.vue","webpack:///./src/apps/EMC/Components/inputs/SelectInput.vue?b763","webpack:///./node_modules/core-js/modules/es.array.find-index.js","webpack:///./src/apps/EMC/Components/modals/PatientVisit.vue?960d","webpack:///./src/services/person_service.ts","webpack:///./src/utils/modal.ts","webpack:///./src/apps/ART/services/prescription_service.ts","webpack:///./src/apps/EMC/Components/InformationHeader.vue?4fc8","webpack:///./src/utils/HisFormHelpers/LocationFieldOptions.ts","webpack:///./src/apps/EMC/Components/inputs/NumberInput.vue?91f0","webpack:///./src/apps/EMC/Components/inputs/NumberInput.vue","webpack:///./src/apps/EMC/Components/inputs/NumberInput.vue?39e9"],"names":["$","flattenIntoArray","toObject","toLength","toInteger","arraySpeciesCreate","target","proto","flat","depthArg","arguments","length","undefined","O","this","sourceLen","A","AdherenceService","patientID","providerID","lastDrugs","lastReceiptDate","date","Date","setDate","getDate","d","HisDate","toStandardHisFormat","AppEncounterService","getJson","drugs","reduce","receiptDate","drug","order","start_date","htnDrugs","BPManagementService","htnDrugReferences","map","drug_id","filter","includes","isEmpty","orderId","pillCount","buildValueNumber","drugId","adherence","getConceptID","concept","getSessionDate","given","pills","expected","Math","round","equivalentDailyDose","startDate","frequency","timeUnit","daysGone","calcTimeElapsed","parseFloat","toString","date1","dayjs","diff","actual","exp","LabOrderService","PersonAttributeService","attributes","Service","PatientRegistrationService","personId","personID","person","personAttributes","createPerson","createPersonAttributes","createPatient","patient","printPatient","PersonService","update","create","data","person_id","ProgramService","index","PatientPrintoutService","printNidLbl","RelationsService","relationID","reason","void","guardianID","curRelationID","newRelationTypeID","voidRelation","createRelation","patientA","patientB","relationType","HTN_SESSION_KEY","ObservationService","getFirstValueNumber","getFirstValueCoded","query","drugID","postJson","state","HCZ","drugName","amount","current","selected","isChecked","dispensed","expectedRemaining","notes","Enalapril","remaining","Amlodipine","Atenolol","sbp","dbp","bpTrail","Object","values","sort","a","b","bp","getBpGrade","firstRecentGrade","secondRecentGrade","ConsultationService","getFirstObs","obs","value_text","match","obsInValidPeriod","getProgramID","id","req","lastScreened","duration","getFirstValueText","secondCheck","isTL","value_coded","tlObs","fpObs","uniqueDrugs","forEach","drug_inventory_id","label","familyPlanningLogic","value","disabled","toOptions","str","s","genderOptions","initialTbStatusOptions","HIVTestOptions","tptHistoryOptions","addToUnscopables","PatientLabResultService","patientId","testTypeID","resultDate","testID","measures","encounterID","test","OrderService","getOrders","status","isValidForm","form","key","required","error","validation","payload","errs","console","log","every","resolveFormValues","underscoreKeys","formData","computedFormData","fKey","toUnderscores","computedValue","resolveObs","tag","accum","cur","Array","isArray","concat","push","Promise","all","optionsToGroupObs","conceptName","options","option","buildGroupValueCoded","submitForm","callback","showloader","loader","show","hide","toastWarning","StockService","stock","pharm","current_quantity","DRUG_PACK_SIZES","DispensationService","drugHistory","currentDrugOrder","useDrugManagement","isEnabled","ART_PROP","drugManagementEnabled","tabs","totalPacks","dispensations","i","quantity","DrugOrderService","getDrugOrderHistory","res","warn","getDrugOrders","fetchAvailableDrugStock","units","drugOrderBarcodes","barcodes","parseInt","completePack","ReceptionService","sitePrefix","GLOBAL_PROP","identifier","arv","RegimenService","weight","onTbTreatment","name","orders","pageSize","params","popVoidReason","size","optionsActionSheet","slot","color","role","modal","selection","action","_hoisted_1","_hoisted_2","_hoisted_3","_createTextVNode","render","_ctx","_cache","$props","$setup","$data","$options","_component_ion_title","_resolveComponent","_component_ion_toolbar","_component_ion_header","_component_his_basic_table","_component_text_skeloton","_component_ion_content","_component_ion_button","_component_ion_footer","_openBlock","_createBlock","_Fragment","_createVNode","default","_withCtx","_toDisplayString","title","_","ready","columns","rows","onClick","closeModal","defineComponent","components","HisBasicTable","IonHeader","IonToolbar","IonContent","IonFooter","IonButton","TextSkeloton","props","type","String","onRows","Function","watch","handler","func","immediate","deep","methods","modalController","dismiss","__exports__","AppointmentService","programID","paginate","_component_information_header","_component_ion_col","_component_ion_row","_component_visits_summary","_component_ion_grid","_component_layout","isReady","class","guardians","artStartDate","onUpdateARVNumber","updateARVNumber","onAddGuardian","addGuardian","onUpdatePatient","updateDemographics","_createCommentVNode","_withId","_withScopeId","_pushScopeId","_popScopeId","_component_ion_icon","_component_ion_card_title","_component_ion_card_header","_component_report_table","_component_ion_card_content","_component_ion_card","style","_renderList","actionButtons","btn","icon","config","tableConfig","_hoisted_4","_hoisted_5","_hoisted_6","_component_DateInput","_component_SelectInput","_component_NumberInput","_component_ion_label","_component_ion_checkbox","_component_ion_item","modelValue","orderDate","$event","minDate","birthdate","maxDate","today","reasons","specimenConcept","specimens","modifier","modifiers","result","min","ldl","resetResults","saveResults","IonTitle","IonLabel","IonGrid","IonRow","IonCol","IonCheckbox","IonItem","DateInput","SelectInput","NumberInput","setup","ref","format","STANDARD_DATE_FORMAT","getBirthdate","reactive","isValid","isAfter","isBefore","placeholder","setSessionDate","orderService","getID","ConceptService","vlConceptId","createEncounter","encounter","Error","buildLabOrders","formattedOrders","saveOrdersArray","encounter_id","resultService","setTestID","tests","setResultDate","resultEnc","createLabResult","resetSessionDate","EventBus","emit","EmcEvents","RELOAD_LATEST_VL_RESULT","RELOAD_PATIENT_VISIT_DATA","alertConfirmation","ON_CLEAR","isLDL","onMounted","getSpecimens","specimen","_component_ion_badge","_component_enrollment_form","_component_outcome_form","_component_outcomes_table","enrollmentStatus","isEnrolled","outcomes","enrollDate","onSaveOutcome","saveOutcome","minHeight","totalStates","patientStates","program","patient_states","onVoidOutcome","voidOutcome","patientProgram","onEnrollProgram","enrollProgram","voidProgram","_component_data_table","TableRowActions","DataTable","emits","path","formatter","v","DISPLAY_DATE_FORMAT","showSearchField","showSubmitButton","computed","row","stateId","patient_state_id","onReset","dateEnrolled","isTransferredOut","nextFacility","asyncOptions","getFacilities","onSave","facility","StandardValidations","IonBadge","OutcomesTable","EnrollmentForm","OutcomeForm","toStandardHisDisplayFormat","PatientProgramService","setStateDate","setStateId","transferOutEncounter","other","updateState","toastSuccess","setProgramDate","setPatientProgramId","patient_program_id","voidState","splice","getPrograms","programs","find","l","date_enrolled","getProgramOutcomes","states","program_workflow_state_id","_component_yes_no_input","_component_multi_column_view","visitDate","showHeightField","height","tbStatus","tbStatuses","isFemale","isPregnant","inline","isBreastfeeding","hasContraindications","items","contraIndications","numberOfColumns","entries","entry","lines","hasSideEffects","sideEffects","regimen","regimens","totalArvsGiven","totalCPTGiven","tbMed","tbMeds","hasGiven6H","hasGivenRFP","totalIPTGiven","totalRFPGiven","hasGiven3HP","total3HPGiven","totalPyridoxineGiven","patientPresent","guardianPresent","prevDrugs","nextAppointmentDate","drugRunOutDate","onClear","onSubmit","PatientObservationService","getFirstObsDatetime","getLastValueCoded","getConceptName","getLastValueNumber","getAll","weights","value_numeric","obs_datetime","value_datetime","getAllDrugOrders","Number","MAX_SAFE_INTEGER","Patientservice","uniqueBy","arr","iteratee","Map","Boolean","item","uniqueKey","k","join","YesNoInput","MultiColumnView","vitals","VitalsService","consultations","prescription","PrescriptionService","dispensation","reception","appointment","prevHeight","getAge","validator","buildValueCoded","buildValueDate","isNumber","validateSeries","some","x","isPresent","onTB","getRegimensByWeight","regs","keys","arvs","remainingDrugs","add","setPatientPresent","setGuardianPresent","buildBmiObs","bmi","BMIService","calculateBMI","buildFpmObs","getFamilyPlanningMethods","method","getTbSymptomsObs","getConceptsByCategory","toDrugOrder","calculateEquivalentDosage","am","pm","calculateDosage","getInstructions","drug_name","vitalsObs","bmiObs","saveObservationList","consultationObs","drugOrders","arvDrugs","getRegimenExtras","iptRegimens","pyridoxine","INH","rfpRegimens","threeHPRegimens","createDrugOrder","buildDispensations","order_id","qty","saveDispensations","receptionObs","calculateExpected","equivalent_daily_dose","adh","calculateAdherence","buildAdherenceObs","buildPillCountObs","adherenceObs","appointmentObs","RELOAD_STAGING_INFORMATION","getRecentHeight","getRecentWeight","recentWeight","getLastDrugsReceived","concept_id","ReportTable","IonCard","IonCardHeader","IonCardTitle","IonCardContent","showIndex","tableCssTheme","PatientVisit","OutcomeStatus","ViralLoadResult","table","thTxt","formatVisitDate","monthsElapsed","showDrugsDispensed","component","DrillTableModalVue","cssClass","componentProps","present","removeEncounters","activeRows","EncounterService","getEncounters","encounters","voidEncounter","buildRows","getPatientVisits","then","dates","getCurrentProgramInformation","nextAppointment","pregnant","breastfeeding","vlResult","outcome","getFirstValueDatetime","nDate","vlObs","td","getCachedConceptName","tdLink","pills_dispensed","tdBtn","on","width","display","justifyContent","_component_ion_list","patientInfo","button","clickable","onClickHandler","initWeight","initHeight","initBmi","initTBStatus","breastFeedingAtInitiation","pregnantAtInitiation","receivedART","agreesToFollowUp","reasonForStartingART","hivTestDate","hivTestPlace","stagingCondition","latestVLResult","whoSTage","getDobAndAgeAtInitiation","dob","ageAtInitiation","setLatestVLResult","force","ApiStore","invalidate","get","results","rs","r","t","c","value_modifier","getArvNumber","getNationalID","getGivenName","getFamilyName","toGenderString","getGender","getCurrentVillage","getClosestLandmark","getPhoneNumber","router","setHIVTestDate","getHIVTestDate","init","getInitialWeight","getInitialHeight","getInitialBMI","getInitialTBStatus","hasPregnancyAtARTInitiation","breastFeedingAtARTInitiation","everReceivedART","getReasonForStartingART","getHIVTestLocation","getStagingCondition","getWhoStage","_component_ion_buttons","_component_TextInput","givenName","middleName","familyName","allowEstimation","estimationLabel","onIsEstimated","estimate","isBirthdateEstimated","gender","cellPhoneNumber","allowUnknown","homeVillage","getVillagesByName","allowCustom","landmark","getLandmarks","onFinish","TextInput","patientService","getMiddleName","phone","Validation","isMWPhoneNumber","resolveAddress","village","address","LocationService","getTraditionalAuthorityById","traditional_authority_id","TA","getDistrictByID","district_id","district","updatedPatient","assign","setPersonID","updatePerson","RELOAD_PATIENT_DATA","guardian","registrationService","registerGuardian","guardianId","getPersonID","RELOAD_GUARDIAN_DATA","_component_text_input","arvNumber","prefix","hasValidARVNumber","voidARV","split","findByOtherID","patients","createArvNumber","confirm","voidARVNumber","getNextSuggestedARVNumber","suggestedNumber","arv_number","replace","Layout","VisitsSummary","InformationHeader","route","useRoute","setPatient","findByID","patientData","setPatientGuardian","RelationshipService","getGuardianDetails","relationship","relationshipType","attribute","PatientDemographics","GuardianDemographicsVue","ARVNumberVue","getARTStartDate","bind","original","source","start","depth","mapper","thisArg","element","targetIndex","sourceIndex","mapFn","TypeError","module","exports","stat","vital","val","max","p","j","errors","holder","isValidBP","bpSystolic","bpDiastolic","checkMinMax","mergeErrors","emptyErrors","isNotEmptyandFloat","minErrors","isNotEmptyandNumber","isValidBPReading","_component_ion_input","_component_ion_chip","_component_ion_note","model","isCustom","onIonChange","customOption","onIonFocus","onIonBlur","validate","onIonInput","onCustomValue","onShowOptions","tags","closeCircle","diselect","showPlaceholder","showOptions","filteredOptions","onSelect","multiple","close","chevronUp","chevronDown","onCloseOptions","infiniteScrolling","IonInput","IonNote","IonIcon","IonList","IonChip","selectedOption","currentPage","set","setDefaults","findIndex","defaultOption","filterOptions","toLowerCase","filtered","f","pushMoreOptions","event","complete","addEventListener","e","isClosest","closest","onBeforeUnmount","removeEventListener","$findIndex","arrayMethodUsesToLength","FIND_INDEX","SKIPS_HOLES","USES_TO_LENGTH","forced","callbackfn","putJson","names","given_name","family_name","backdropDismiss","m","onWillDismiss","AdverseEffectsCategories","nextVisitInterval","fastTrack","regimenExtras","fastTrackMedications","hangingPills","medicationOrders","treatmentState","contraindications","tptPrescriptionCount","lastSideEffectDate","getRegimens","getCustomIngridients","getCachedConceptID","extras","extrasAvailable","regimenCode","patientWeight","contraindication","getObs","o","drugInduced","value_drug","count","isFastTrack","yes","meds","drug_order","withDosages","getDrugDosages","dosage","noon","allSideEffects","pillsPerDay","packSize","packs","roundedPacks","morningTabs","eveningTabs","dose","dateObj","pack_size","calculateDateFromInterval","response","saveValueTextObs","reasonForSwitch","facilities","trim","location_id","getLabFacilities","getLabs","getFacilityWards","wards","ward","getSpecialistClinics","clinics","clinic","getRegions","regions","region","region_id","getDistricts","regionID","districts","getTraditionalAuthorities","districtID","TAs","getVillages","traditionalAuthorityID","villages","village_id","page","landmarks","code"],"mappings":"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","file":"js/chunk-930f464e.622751a9.js","sourcesContent":["'use strict';\nvar $ = require('../internals/export');\nvar flattenIntoArray = require('../internals/flatten-into-array');\nvar toObject = require('../internals/to-object');\nvar toLength = require('../internals/to-length');\nvar toInteger = require('../internals/to-integer');\nvar arraySpeciesCreate = require('../internals/array-species-create');\n\n// `Array.prototype.flat` method\n// https://github.com/tc39/proposal-flatMap\n$({ target: 'Array', proto: true }, {\n  flat: function flat(/* depthArg = 1 */) {\n    var depthArg = arguments.length ? arguments[0] : undefined;\n    var O = toObject(this);\n    var sourceLen = toLength(O.length);\n    var A = arraySpeciesCreate(O, 0);\n    A.length = flattenIntoArray(A, O, O, sourceLen, 0, depthArg === undefined ? 1 : toInteger(depthArg));\n    return A;\n  }\n});\n","import { AppEncounterService } from \"@/services/app_encounter_service\"\nimport { DrugInterface } from \"@/interfaces/Drug\"\nimport HisDate from \"@/utils/Date\"\nimport { isEmpty } from \"lodash\"\nimport { BPManagementService } from \"./htn_service\"\nimport dayjs from \"dayjs\"\n\nexport class AdherenceService extends AppEncounterService {\n    lastDrugs: Array<DrugInterface>\n    lastReceiptDate: string\n    constructor(patientID: number, providerID: number) {\n        super(patientID, 68, providerID) //TODO: Use encounter type reference name\n        this.lastDrugs = []\n        this.lastReceiptDate = ''\n    }\n\n    async loadPreviousDrugs() {\n        const date = new Date(this.date)\n        date.setDate(date.getDate() - 1) // we don't want current date to count\n        const d = (date: string | Date) => HisDate.toStandardHisFormat(date)\n        const drugs = await AppEncounterService.getJson(\n            `patients/${this.patientID}/drugs_received`, { date: d(date) }\n        )      \n        if (drugs) {\n            this.lastReceiptDate = drugs.reduce((receiptDate: string | null,  drug: any) => {\n                return !receiptDate || (new Date(d(drug.order.start_date)) > new Date(receiptDate))\n                    ?  d(drug.order.start_date)\n                    : receiptDate\n            }, null)\n            const htnDrugs = BPManagementService.htnDrugReferences().map((d: any) => d.drug_id)\n            this.lastDrugs = drugs.filter((drug: DrugInterface) => \n               !htnDrugs.includes(drug.drug['drug_id']) && d(drug.order.start_date) === this.lastReceiptDate\n            )\n        }\n    }\n\n    getReceiptDate() { return this.lastReceiptDate }\n\n    getLastDrugs() { return this.lastDrugs }\n\n    receivedDrugsBefore() { return !isEmpty(this.lastDrugs) }\n\n    buildPillCountObs(orderId: number, pillCount: number) {\n        return this.buildValueNumber('Number of tablets brought to clinic', pillCount, null, orderId)\n    }\n\n    async buildAdherenceObs(orderId: number, drugId: number, adherence: number) {\n        const concept = await AppEncounterService.getConceptID('Drug adherence', true)\n        return {\n            'concept_id': concept,\n            'value_numeric': adherence,\n            'value_drug': drugId,\n            'value_modifier': '%',\n            'order_id': orderId,\n            'person_id': this.patientID,\n            'obs_datetime': AppEncounterService.getSessionDate()\n        }\n    }\n\n    isAdherenceGood(adherence: number) {\n        return adherence >= 95 && adherence <= 105\n    }\n\n    calculateAdherence(given: number, pills: number, expected: number) {\n        return Math.round(100 * (given - pills) / (given - expected));\n    }\n\n    calculateExpected(\n        given: number, \n        equivalentDailyDose: number, \n        startDate: string, \n        frequency: 'QOD' | 'QW'\n    ) {\n        const timeUnit = frequency === 'QW' ? 'week' : 'day'\n        const daysGone = this.calcTimeElapsed(startDate, timeUnit);\n        return (given - (daysGone * parseFloat(equivalentDailyDose.toString())));\n    }\n\n    calcTimeElapsed(date1: string, timeUnit: 'week' | 'day') {\n        return dayjs(this.date).diff(date1, timeUnit)\n    }\n\n    calculateUnaccountedOrMissed(expected: string, actual: string) {\n        const exp = (parseFloat(expected) - parseFloat(actual));\n        return (exp < 0 ? ((exp * -1) + ' missed') : (exp + ' unacc'));\n    }\n}\n","import { AppEncounterService } from \"@/services/app_encounter_service\";\nexport class LabOrderService extends AppEncounterService {\n  constructor(patientID: number, providerID: number) {\n    super(patientID, 57, providerID);\n  }\n}","import { Service } from \"./service\"\n\nexport interface NewAttribute {\n    person_id: number;\n    person_attribute_type_id: number;\n    value: number | string;\n}\n\nexport class PersonAttributeService extends Service { \n    constructor() {\n        super()\n    }\n\n    static create(attributes: Array<NewAttribute>) { \n        return super.postJson('/person_attributes', attributes) \n    }\n}\n","import { Service } from \"./service\"\nimport { ProgramService } from \"@/services/program_service\";\nimport { Person } from \"@/interfaces/person\"\nimport { PersonService } from \"@/services/person_service\"\nimport { PersonAttributeService } from '@/services/person_attributes_service'\nimport { PatientPrintoutService } from \"@/services/patient_printout_service\";\n\nexport class PatientRegistrationService extends Service {\n    personId: number\n    constructor() {\n        super()\n        this.personId = 0\n    }\n\n    getPersonID() {\n        return this.personId\n    }\n\n    setPersonID(personID: number) {\n        this.personId = personID\n    }\n\n    async registerPatient(person: any, personAttributes: any) {\n        await this.createPerson(person)\n        await this.createPersonAttributes(personAttributes)\n        const patient = await this.createPatient()\n        await this.printPatient()\n        return patient\n    }\n\n    async registerGuardian(person: any) {\n        return this.createPerson(person)\n    }\n\n    updatePerson(person: any) {\n       return new PersonService(person).update(this.personId)\n    }\n\n    async createPerson(person: any) {\n        const data: Person = await new PersonService(person).create()\n        this.personId = data.person_id\n        return data\n    }\n\n    createPatient() {\n        return ProgramService.createPatient(this.personId)\n    }\n\n    async createPersonAttributes(attributes: Array<any>) {\n        for(const index in attributes) {\n            await PersonAttributeService.create({\n                ...attributes[index],\n                'person_id': this.personId\n            })\n        }\n    }\n\n    printPatient() {\n        return new PatientPrintoutService(this.personId).printNidLbl()\n    }\n}\n","import { Service } from \"./service\";\n\nexport class RelationsService extends Service {\n    constructor() {\n        super()\n    }\n\n    static voidRelation(patientID: number, relationID: number, reason: string) {\n\t\treturn Service.void(`people/${patientID}/relationships/${relationID}`, { reason })\n\t}\n\n    static async amendRelation(patientID: number, guardianID: number, curRelationID: number, newRelationTypeID: number) {\n        await RelationsService.voidRelation(patientID, curRelationID,\n            'Updating guardian relationship'\n        )\n        return RelationsService.createRelation(\n            patientID, guardianID, newRelationTypeID\n        )\n    }\n\n    static getRelations() {\n        return super.getJson('types/relationships')\n    }\n\n    static createRelation(patientA: number, patientB: number, relationType: number) {\n        return super.postJson(`people/${patientA}/relationships`, {\n            'relationship_type_id': relationType,\n            'relation_id': patientB\n        })\n    }\n}\n","import { AppEncounterService } from \"@/services/app_encounter_service\"\nimport { ObservationService } from \"@/services/observation_service\"\n\nexport enum HTN_SESSION_KEY {\n  Prescription = \"htnPrescription\"\n}\n\nexport class BPManagementService extends AppEncounterService {\n    constructor(patientID: number, providerID: number) {\n      super(patientID, 48, providerID) //TODO: Use encounter type reference name'\n    }\n\n    static getBpGrade(sbp: number, dbp: number) {\n      if ((sbp < 140) && (dbp < 90)) {\n        return \"normal\"\n      }\n      else if ((sbp >= 140 && sbp < 160) || (dbp >= 100 && dbp < 110)) {\n        return \"grade 1\"\n      }\n      else if ((sbp >= 180 && dbp > 110) || sbp >= 180) {\n        return \"grade 3\"\n      }\n      else if ((sbp >= 160 && sbp < 180) || (dbp >= 110)) {\n        return \"grade 2\"\n      }\n      return 'N/A'\n    }\n\n    /**\n     * BP is normointensive if two most recent consecutive tests are normal\n     * @param bpTrail \n     * @returns\n    */\n    static isBpNormotensive(bpTrail: any) {\n      const [ firstRecentGrade, secondRecentGrade ] = Object.values(bpTrail)\n        .sort((a: any, b: any) => a.date < b.date ? 1 : 0)\n        .map((bp: any) => this.getBpGrade(bp.sbp, bp.dbp))\n      return firstRecentGrade === 'normal' && secondRecentGrade === 'normal'\n    }\n\n    getSystolicBp() {\n      return ObservationService.getFirstValueNumber(this.patientID, 'Systolic blood pressure')\n    }\n\n    getDiastolicBp() {\n      return ObservationService.getFirstValueNumber(this.patientID, 'Diastolic blood pressure')\n    }\n\n    async onBpDrugs() {\n      const query = await ObservationService.getFirstValueCoded(this.patientID, 'Treatment status')\n      return query ? query === 'Yes' : false\n    }\n  \n    async getBPTrail() {\n      return await AppEncounterService.getJson(`/patients/${this.patientID}/bp_trail`);\n    }\n    async getCurrentDrugs() {\n      return await AppEncounterService.getJson(`/patients/${this.patientID}/current_bp_drugs`);\n    }\n    async getLastDrugs() {\n      return await AppEncounterService.getJson(`/patients/${this.patientID}/last_bp_drugs_dispensation`);\n    }\n    async getAdherence(drugID: number, pills: number) {\n      return await AppEncounterService.postJson(`/patients/${this.patientID}/remaining_bp_drugs`, {\n        'drug_id': drugID,\n        pills: pills\n      });\n    }\n    async enrollPatient(state: any) {\n      return await AppEncounterService.postJson(`/patients/${this.patientID}/update_or_create_htn_state`, state);\n    }\n    static htnDrugReferences() {\n      return [\n        { \n          'drug_id': 275,\n          'drug_name': \"HCZ (25mg tablet)\",\n          'units': 'tab(s)',\n          'am': 0,\n          'noon': 0,\n          'pm': 1,\n          'frequency': 'Daily (QOD)'\n        },\n        {\n          'drug_id': 942,\n          'drug_name': \"Enalapril (5mg tablet)\",\n          'units': 'tab(s)',\n          'am': 0,\n          'noon': 0,\n          'pm': 1,\n          'frequency': 'Daily (QOD)'\n        },\n        {\n          'drug_id': 943,\n          'drug_name': \"Enalapril (10mg tablet)\",\n          'units': 'tab(s)',\n          'am': 0,\n          'noon': 0,\n          'pm': 1,\n          'frequency': 'Daily (QOD)'\n        },\n        {\n          'drug_id': 558,\n          'drug_name': \"Amlodipine (5mg tablet)\",\n          'units': 'tab(s)',\n          'am': 0,\n          'noon': 0,\n          'pm': 1,\n          'frequency': 'Daily (QOD)'\n        },\n        {\n          'drug_id': 559,\n          'drug_name': \"Amlodipine (10mg tablet)\",\n          'units': 'tab(s)',\n          'am': 0,\n          'noon': 0,\n          'pm': 1,\n          'frequency': 'Daily (QOD)'\n        },\n        {\n          'drug_id': 117,\n          'drug_name': \"Atenolol (50mg tablet)\",\n          'units': 'tab(s)',\n          'am': 0,\n          'noon': 0,\n          'pm': 1,\n          'frequency': 'Daily (QOD)'\n        },\n        {\n          'drug_id': 11,\n          'drug_name': \"Atenolol(100mg tablet)\",\n          'units': 'tab(s)',\n          'am': 0,\n          'noon': 0,\n          'pm': 1,\n          'frequency': 'Daily (QOD)'\n        }\n      ]\n    }\n    getDrugs() {\n        return {\n        HCZ: {\n          drugs: [\n            {\n              drugName: \"HCZ (25mg tablet)\",\n              drugID: 275,\n              amount: '25mg',\n              current: false,\n              selected: false,\n              isChecked: false,\n              dispensed: null,\n              expectedRemaining: null,\n              adherence: null,\n            },\n          ],\n          selected: null,\n          notes: [],\n        },\n        Enalapril: {\n          drugs: [\n            {\n              drugName: \"Enalapril (5mg tablet)\",\n              drugID: 942,\n              amount: '5mg',\n              current: false,\n              selected: false,\n              isChecked: false,\n              dispensed: null,\n              expectedRemaining: null,\n              adherence: null,\n              remaining: null,\n            },\n            {\n              drugName: \"Enalapril (10mg tablet)\",\n              drugID: 943,\n              amount: '10mg',\n              current: false,\n              selected: false,\n              isChecked: false,\n              dispensed: null,\n              expectedRemaining: null,\n              adherence: null,\n              remaining: null,\n            },\n          ],\n          selected: null,\n          notes: [],\n        },\n        Amlodipine: {\n          drugs: [\n            {\n              drugName: \"Amlodipine (5mg tablet)\",\n              drugID: 558,\n              amount: '5mg',\n              current: false,\n              selected: false,\n              isChecked: false,\n              dispensed: null,\n              expectedRemaining: null,\n              adherence: null,\n              remaining: null,\n            },\n            {\n              drugName: \"Amlodipine (10mg tablet)\",\n              drugID: 559,\n              amount: '10mg',\n              current: false,\n              selected: false,\n              isChecked: false,\n              dispensed: null,\n              expectedRemaining: null,\n              adherence: null,\n              remaining: null,\n            },\n          ],\n          selected: null,\n          notes: [],\n        },\n        Atenolol: {\n          drugs: [\n            {\n              drugName: \"Atenolol (50mg tablet)\",\n              drugID: 117,\n              amount: '50mg',\n              current: false,\n              selected: false,\n              isChecked: false,\n              dispensed: null,\n              expectedRemaining: null,\n              adherence: null,\n              remaining: null,\n            },\n            {\n              drugName: \"Atenolol(100mg tablet)\",\n              drugID: 11,\n              amount: '100mg',\n              current: false,\n              selected: false,\n              isChecked: false,\n              dispensed: null,\n              expectedRemaining: null,\n              adherence: null,\n              remaining: null,\n            },\n          ],\n          selected: null,\n          notes: [],\n        },\n      }\n    }\n}","import { DrugInterface } from \"@/interfaces/Drug\";\nimport { AppEncounterService } from \"@/services/app_encounter_service\";\nimport { ObservationService } from \"@/services/observation_service\";\nimport dayjs from \"dayjs\";\nimport { isEmpty } from \"lodash\";\nimport { DrugOrderService } from \"@/services/drug_order_service\"\n\nexport class ConsultationService extends AppEncounterService {\n  constructor(patientID: number, providerID: number) {\n    super(patientID, 53, providerID);\n  }\n  getFamilyPlanningMethods() {\n    return [\n      \"ORAL CONTRACEPTIVE PILLS\",\n      \"DEPO-PROVERA\",\n      \"INTRAUTERINE CONTRACEPTION\",\n      \"CONTRACEPTIVE IMPLANT\",\n      \"MALE CONDOMS\",\n      \"FEMALE CONDOMS\",\n      \"TUBAL LIGATION\",\n      \"NONE\",\n    ];\n  }\n\n  async getTptTreatmentStatus() {\n    return AppEncounterService.getJson(`/patients/${this.patientID}/tpt_status`)\n  }\n\n  async patientHitMenopause() {\n    const obs = await ObservationService.getFirstObs(\n      this.patientID, 'Why does the woman not use birth control', \n    )\n    return obs && typeof obs?.value_text === 'string'\n      ? (obs.value_text.match(/menopause/i) ? true : false)\n      && AppEncounterService.obsInValidPeriod(obs)\n      : false\n  }\n\n  async hasTreatmentHistoryObs() {\n    const obs = await ObservationService.getFirstObs(this.patientID, 'Previous TB treatment history')\n    return obs && AppEncounterService.obsInValidPeriod(obs)\n  }\n\n  getDrugSideEffects() {\n    return AppEncounterService.getJson(`programs/${AppEncounterService.getProgramID()}/patients/${this.patientID}/medication_side_effects`, { \n      date: this.date \n    })\n  }\n\n  getClient() {\n    return AppEncounterService.getFirstValueCoded(this.patientID, 'Patient present');\n  }\n\n  async clientDueForCxCa() {\n    const req: any = await AppEncounterService.getJson(`last_cxca_screening_details`, {\n      id: this.patientID, date: this.date\n    })\n    if (!isEmpty(req)) {\n      const lastScreened = req['date_screened']\n      const duration = dayjs(this.date).diff(lastScreened, 'years')\n      return duration >= 1\n    }\n    return true\n  }\nasync clientHasHadAHysterectomy() {\n    const req: any = await AppEncounterService.getFirstValueCoded(this.patientID, 'Reason for NOT offering CxCa'); \n    if(req === \"Hysterectomy\") {\n      return true\n    }\n    const secondCheck: any = await AppEncounterService.getFirstValueText(this.patientID, 'Treatment'); \n    if(secondCheck === \"Hysterectomy\") {\n      return true\n    }\n    return false\n  }\n  async getTLObs() {\n    const isTL = ((obs: any) => obs && obs.value_coded === 'Tubal ligation' && AppEncounterService.obsInValidPeriod(obs))\n    const tlObs = await AppEncounterService.getFirstObs(this.patientID, 'Family planning')\n    if (isTL(tlObs)) {\n      return isTL(tlObs)\n    } else  {\n      const fpObs = await AppEncounterService.getFirstObs(this.patientID, 'Method of family planning')\n      return isTL(fpObs)\n    }\n  }\n  async getPreviousDrugs() {\n\n    const drugs = await AppEncounterService.getJson(\n      `patients/${this.patientID}/drugs_received`\n    )\n\n    if (!drugs) return\n\n    const uniqueDrugs = {} as any\n    drugs.forEach((drug: DrugInterface) => {\n      uniqueDrugs[drug.drug_inventory_id] = drug;\n    })\n    return uniqueDrugs;\n  }\n  familyPlanningMethods(label: string, values: any[]) {\n    const familyPlanningLogic: any = {\n      \"ORAL CONTRACEPTIVE PILLS\": {\n        \"DEPO-PROVERA\": 'N', \"INTRAUTERINE CONTRACEPTION\": 'N', 'CONTRACEPTIVE IMPLANT': 'N',\n        'MALE CONDOMS': 'Y', 'FEMALE CONDOMS': 'Y', 'RYTHM METHOD': 'N', 'TUBAL LIGATION': 'N',\n        'VASECTOMY': 'N'\n      },\n      \"DEPO-PROVERA\": {\n        \"ORAL CONTRACEPTIVE PILLS\": 'N', \"INTRAUTERINE CONTRACEPTION\": 'N', 'CONTRACEPTIVE IMPLANT': 'N',\n        'MALE CONDOMS': 'Y', 'FEMALE CONDOMS': 'Y', 'RYTHM METHOD': 'N', 'TUBAL LIGATION': 'N',\n        'VASECTOMY': 'N'\n      },\n      \"INTRAUTERINE CONTRACEPTION\": {\n        \"ORAL CONTRACEPTIVE PILLS\": 'N', \"DEPO-PROVERA\": 'N', 'CONTRACEPTIVE IMPLANT': 'N',\n        'MALE CONDOMS': 'Y', 'FEMALE CONDOMS': 'Y', 'RYTHM METHOD': 'N', 'TUBAL LIGATION': 'N',\n        'VASECTOMY': 'N'\n      },\n      \"CONTRACEPTIVE IMPLANT\": {\n        \"ORAL CONTRACEPTIVE PILLS\": 'N', \"DEPO-PROVERA\": 'N', 'INTRAUTERINE CONTRACEPTION': 'N',\n        'MALE CONDOMS': 'Y', 'FEMALE CONDOMS': 'Y', 'RYTHM METHOD': 'N', 'TUBAL LIGATION': 'N',\n        'VASECTOMY': 'N'\n      },\n      \"MALE CONDOMS\": {\n        \"ORAL CONTRACEPTIVE PILLS\": 'Y', \"DEPO-PROVERA\": 'Y', 'INTRAUTERINE CONTRACEPTION': 'Y',\n        'CONTRACEPTIVE IMPLANT': 'Y', 'FEMALE CONDOMS': 'Y', 'RYTHM METHOD': 'Y', 'TUBAL LIGATION': 'N',\n        'VASECTOMY': 'Y'\n      },\n      \"FEMALE CONDOMS\": {\n        \"ORAL CONTRACEPTIVE PILLS\": 'Y', \"DEPO-PROVERA\": 'Y', 'INTRAUTERINE CONTRACEPTION': 'Y',\n        'CONTRACEPTIVE IMPLANT': 'Y', 'MALE CONDOMS': 'Y', 'RYTHM METHOD': 'Y', 'TUBAL LIGATION': 'N',\n        'VASECTOMY': 'Y'\n      },\n      \"RYTHM METHOD\": {\n        \"ORAL CONTRACEPTIVE PILLS\": 'N', \"DEPO-PROVERA\": 'N', 'INTRAUTERINE CONTRACEPTION': 'N',\n        'MALE CONDOMS': 'Y', 'FEMALE CONDOMS': 'Y', 'CONTRACEPTIVE IMPLANT': 'N', 'TUBAL LIGATION': 'N',\n        'VASECTOMY': 'N'\n      },\n      \"TUBAL LIGATION\": {\n        \"ORAL CONTRACEPTIVE PILLS\": 'N', \"DEPO-PROVERA\": 'N', 'INTRAUTERINE CONTRACEPTION': 'N',\n        'MALE CONDOMS': 'N', 'FEMALE CONDOMS': 'N', 'CONTRACEPTIVE IMPLANT': 'N', 'RYTHM METHOD': 'N',\n        'VASECTOMY': 'N',\n      },\n      \"VASECTOMY\": {\n        \"ORAL CONTRACEPTIVE PILLS\": 'N', \"DEPO-PROVERA\": 'Y', 'INTRAUTERINE CONTRACEPTION': 'N',\n        'MALE CONDOMS': 'Y', 'FEMALE CONDOMS': 'N', 'CONTRACEPTIVE IMPLANT': 'Y', 'RYTHM METHOD': 'N',\n        'TUBAL LIGATION': 'N'\n      },\n      \"NONE\": {\n        \"ORAL CONTRACEPTIVE PILLS\": 'N', \"DEPO-PROVERA\": 'N', 'INTRAUTERINE CONTRACEPTION': 'N',\n        'MALE CONDOMS': 'N', 'FEMALE CONDOMS': 'N', 'CONTRACEPTIVE IMPLANT': 'N', 'RYTHM METHOD': 'N',\n        'TUBAL LIGATION': 'N'\n      }\n    }\n    const selected = familyPlanningLogic[label];\n    return values.map(data => {\n      if (selected[data.label] === \"N\") {\n        return {\n          label: data.label,\n          value: data.value,\n          isChecked: false,\n          disabled: true,\n        }\n      }\n      else {\n        return {\n          label: data.label,\n          value: data.value,\n          isChecked: data.isChecked,\n          disabled: false,\n        }\n      }\n\n    })\n  }\n\n}","import { Option } from \"@/components/Forms/FieldInterface\";\n\nexport function toOptions(str: string[]) {\n  return str.map<Option>(s => ({\n    value: s,\n    label: s\n  }))\n}\n\nexport const yesNoOptions: Option[] = [\n  { label: \"Yes\", value: \"Yes\" },\n  { label: \"No\", value: \"No\" }\n]\n\nexport const genderOptions: Option[] = [\n  { label: \"Male\", value: \"M\" },\n  { label: \"Female\", value: \"F\" },\n];\n\nexport const tbStatusOptions: Option[] = [\n  ...toOptions([\n    \"TB NOT suspected\",\n    \"TB suspected\",\n    \"Confirmed TB NOT on treatment\",\n    \"Confirmed TB on treatment\"\n  ])\n]\n\nexport const initialTbStatusOptions: Option[] = [\n  ...toOptions([\n    \"Current\",\n    \"Last 2 years\",\n    \"More than 2 years\",\n    \"Never\"\n  ])\n]\n\nexport const HIVTestOptions = [\n  { label: 'Rapid antibody test', value: 'HIV rapid test'},\n  { label: 'DNA PCR', value: 'HIV DNA polymerase chain reaction'},\n  { label: 'Not done', value: 'Not done' }\n]\n\nexport const tptHistoryOptions = toOptions([\n  \"Currently on IPT\",\n  \"Currently on 3HP (RFP + INH)\",\n  \"Currently on INH 300 / RFP 300 (3HP)\",\n  \"Complete course of 3HP in the past (3 months RFP+INH)\",\n  \"Complete course of IPT in the past (min. 6 months of INH)\",\n  \"Aborted course of 3HP (RFP + INH) in the past\",\n  \"Aborted course of INH 300 / RFP 300 (3HP) in the past\",\n  \"Aborted course of IPT in the past\",\n  \"Never taken IPT or 3HP\"\n])","// this method was added to unscopables after implementation\n// in popular engines, so it's moved to a separate module\nvar addToUnscopables = require('../internals/add-to-unscopables');\n\naddToUnscopables('flat');\n","export * from \"-!../../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../../../node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/index.js??ref--0-1!./SelectInput.vue?vue&type=style&index=0&id=66a24b01&scoped=true&lang=css\"","import { OrderService } from '@/services/order_service'\nimport { AppEncounterService } from './app_encounter_service';\n\nexport class PatientLabResultService extends AppEncounterService {\n    patientID: number;\n    testTypeID: number;\n    resultDate: string;\n    testID: number;\n    constructor(patientId: number) {\n        super(patientId, 57)\n        this.patientID = patientId\n        this.testTypeID = -1\n        this.resultDate = ''\n        this.testID = -1\n    }\n\n    createLabResult(measures: Array<any>) {\n        return AppEncounterService.postJson(`lab/tests/${this.testID}/results`, {\n            'encounter_id': this.encounterID,\n            date: this.resultDate,\n            measures\n        })\n    }\n\n    getTestID() {\n        return this.testID\n    }\n\n    getTestTypeID() {\n        return this.testTypeID\n    }\n\n    setTestTypeID(test: number) {\n        this.testTypeID = test\n    }\n\n    setResultDate(date: string) {\n        this.resultDate = date\n    }\n\n    setTestID(test: number) {\n        this.testID = test\n    }   \n\n    getTestsWithoutResults() {\n        return OrderService.getOrders(this.patientID, {\n            status: 'drawn'\n        })\n    }\n\n    getTestIndicators() {\n      return OrderService.getJson(\n        `lab/test_result_indicators`, {\n        'test_type_id': this.testTypeID\n      })\n    }\n\n    \n}\n","import { ObsValue, ObservationService } from \"@/services/observation_service\"\nimport { DTForm } from \"../interfaces/dt_form_field\"\nimport { Option } from \"@/components/Forms/FieldInterface\";\nimport { toUnderscores } from \"@/utils/Strs\";\nimport { isEmpty } from \"lodash\";\nimport { loader } from \"@/utils/loader\";\nimport { toastWarning } from '@/utils/Alerts';\n\nexport async function isValidForm (form: DTForm) {\n  for (const key in form) {\n    if (form[key].required && isEmpty(form[key].value)) {\n      form[key].error = \"This field is required\";\n      continue;\n    }\n    if(typeof form[key].validation !== 'function') {\n      form[key].error = ''\n      continue\n    }\n    const payload = typeof form[key].value === 'object'\n        ? form[key].value\n        : { label: form[key].value, value: form[key].value }\n\n    const errs = await form[key].validation!(payload as Option, form)\n    if(errs && errs.length > 0) {\n      form[key].error = errs.toString()\n      console.log(key, form[key].error)\n    } else {\n      form[key].error = ''\n    }       \n  }\n  return Object.values(form).every(({ error }) => !error)\n}\n\nexport function resolveFormValues(form: DTForm, underscoreKeys = false) {\n  const formData: any = {}\n  const computedFormData: any = {}\n  for (const key in form) {\n    if(form[key].value) {\n      const fKey = underscoreKeys ? toUnderscores(key) : key\n      formData[fKey] = form[key].value\n      if(typeof form[key].computedValue === 'function') {\n        computedFormData[fKey] = form[key].computedValue!(form[key].value, form)\n      }\n    }\n  }\n  return { formData, computedFormData }\n}\n\nexport function resolveObs (obs: any, tag=''): Promise<ObsValue[]> {\n  const values: any = Object.values(obs)\n    .filter((d: any) => d && (d.tag === tag || tag === ''))\n    .reduce((accum: any, cur: any) => { \n      const data = cur.obs ? cur.obs : cur\n      if (Array.isArray(data)) {\n        accum = accum.concat(data)\n      } else {\n          accum.push(data)\n      }\n      return accum\n    }, [])\n  return Promise.all(values)\n}\n\nexport async function optionsToGroupObs (conceptName: string, options: Option[]) {\n  return await Promise.all(options.map(async (option) => {\n    return ObservationService.buildGroupValueCoded(conceptName, option.label, option.isChecked ? 'Yes' : 'No')\n  }))\n}\n\ntype SubmitFormCallback = (formData: Record<string, any>, computedData: Record<string, any>) => Promise<void> | void\ninterface SubmitOptios {\n  showloader?: boolean;\n  underscoreKeys?: boolean;\n}\n\nexport async function submitForm (form: DTForm, callback: SubmitFormCallback, options?: SubmitOptios) {\n  if(!await isValidForm(form)) return\n  try {\n    const showloader = options?.showloader || false\n    if (showloader) loader.show()\n    const {formData, computedFormData} = resolveFormValues(form, options?.underscoreKeys)\n    await callback(formData, computedFormData)\n    if(showloader) await loader.hide()\n  } catch (error) {\n    toastWarning(`${error}`)\n    loader.hide()\n  }\n}","import { Service } from \"@/services/service\";\n\nexport class StockService extends Service {\n    constructor() {\n        super()\n    }\n\n    static async fetchAvailableDrugStock(drugId: number) {\n        const stock = await this.getJson('pharmacy/items', { 'drug_id': drugId })\n        if (stock && stock.length > 0) {\n            return stock.reduce((accum: number, pharm: any) => accum + pharm.current_quantity, 0);\n        }\n    }\n}\n","import { AppEncounterService } from \"@/services/app_encounter_service\";\nimport { DrugOrderService } from \"@/services/drug_order_service\";\nimport { StockService } from \"./stock_service\";\nimport ART_PROP from '@/apps/ART/art_global_props';\n// ripped from old ART system\nexport const DRUG_PACK_SIZES: Record<string, any> = {\n    '11': [ 30 ],\n    '21': [ 25 ],\n    '22': [ 60 ],\n    '24': [ 30, 60, 90, 100 ],\n    '30': [ 90 ],\n    '39': [ 60 ],\n    '73': [ 120 ],\n    '74': [ 60 ],\n    '76': [ 1000 ],\n    '297': [ 30, 60, 90 ],\n    '576': [ 30, 60, 90 ],\n    '613': [ 60 ],\n    '731': [ 60 ],\n    '732': [ 60 ],\n    '733': [ 60 ],\n    '734': [ 30 ],\n    '735': [ 30 ],\n    '736': [ 60 ],\n    '738': [ 60 ],\n    '931': [ 12, 30, 60 ],\n    '932': [ 30 ],\n    '954': [ 60 ],\n    '963': [ 30, 60, 90 ],\n    '968': [ 60 ],\n    '969': [ 30 ],\n    '971': [ 30,60,90 ],\n    '976': [ 60 ],\n    '977': [ 30 ],\n    '982': [ 30 ],\n    '983': [ 30, 90 ],\n    '1039': [ 30,60,90 ],\n    '1043': [ 60 ],\n    '1044': [ 30],\n    '1056': [ 24 ],\n    '1216': [3, 6, 12]\n}\n\nexport class DispensationService extends AppEncounterService {\n    drugHistory: Array<any>;\n    currentDrugOrder: Array<any>;\n    useDrugManagement: boolean; \n    constructor(patientID: number, providerID: number) {\n        super(patientID, 54, providerID)\n        this.drugHistory = []\n        this.currentDrugOrder = []\n        this.useDrugManagement = false\n    }\n\n    setIsDrugManagementEnabled(isEnabled: boolean) {\n        this.useDrugManagement = isEnabled\n    }\n\n    async loadDrugManagementEnabled() {\n        this.useDrugManagement = await ART_PROP.drugManagementEnabled()\n    }\n\n    getDrugHistory() {\n        return this.drugHistory\n    }\n\n    getCurrentOrder() {\n        return this.currentDrugOrder\n    }\n\n    buildDispensations(orderId: number, tabs: number, totalPacks: number) {\n        const dispensations = []\n        for(let i=0; i < totalPacks; i++) {\n            dispensations.push({\n                'drug_order_id': orderId,\n                date: this.date,\n                quantity: (tabs / totalPacks)\n            })\n        }\n        return dispensations\n    }\n\n    saveDispensations(dispensations: Array<any>) {\n        return AppEncounterService.postJson('/dispensations', { \n            dispensations, \n            'program_id': AppEncounterService.getProgramID()\n        })\n    }\n\n    async voidOrder(orderId: number) {\n        return AppEncounterService.void(`/dispensations/${orderId}`, {})\n    }\n\n    async loadDrugHistory() {\n        try {\n            const res = await DrugOrderService.getDrugOrderHistory(this.patientID)\n            if (res) this.drugHistory = res\n        } catch (e) {\n            console.warn(e)\n        }\n    }\n\n    async loadCurrentDrugOrder() {\n        const res = await DrugOrderService.getDrugOrders(this.patientID)\n        if (res) {\n            if (this.useDrugManagement) {\n                const drugs = res.map(async (d: any) => {\n                    d['available_stock'] = await StockService.fetchAvailableDrugStock(d.drug.drug_id)\n                    return d\n                })\n                this.currentDrugOrder = await Promise.all(drugs)\n                return\n            }\n            this.currentDrugOrder = res\n        }\n    }\n\n    getDrugPackSizes(drugId: number) {\n        if (drugId in DRUG_PACK_SIZES) {\n            return DRUG_PACK_SIZES[drugId]\n        }\n        return [30, 60, 90]\n    }\n\n    // Ripped from old ART system for backwards compatibility purposes\n    calcCompletePack(drug: any, units: number) {\n        //sorting in an ascending order by tabs\n        const drugOrderBarcodes = drug.barcodes.sort((a: any, b: any) => a.tabs - b.tabs); \n        if (drugOrderBarcodes.length == 0 || units == 0.0) return units;\n        for (const i in drugOrderBarcodes) {\n            const { tabs } = drugOrderBarcodes[i]\n            if (parseInt(tabs) >= units) return tabs;\n        }\n        const completePack = parseInt(drugOrderBarcodes[drugOrderBarcodes.length - 1].tabs)\n        return completePack\n    }\n}\n","import { AppEncounterService } from \"@/services/app_encounter_service\"\nimport { ProgramService } from \"@/services/program_service\";\nimport GLOBAL_PROP from \"@/apps/GLOBAL_APP/global_prop\";\n\nexport class ReceptionService extends AppEncounterService {\n    sitePrefix: string\n    constructor(patientID: number, providerID: number) {\n        super(patientID, 51, providerID) //TODO: Use encounter type reference name'\n        this.sitePrefix = ''\n    }\n\n    getSitePrefix() {\n        return this.sitePrefix\n    }\n\n    async loadSitePrefix() {\n        this.sitePrefix = await GLOBAL_PROP.sitePrefix();\n    }\n\n    createArvNumber(identifier: string) {\n        return ProgramService.postJson(\"/patient_identifiers/\", {\n            'patient_id': this.patientID,  \n            'identifier_type': 4,\n            identifier,\n        })\n    }\n\n    buildArvNumber(arv: number) {\n        return `${this.sitePrefix}-ARV-${arv}`    \n    }\n}\n","import { Service } from \"./service\";\n\nexport class RegimenService extends Service {\n    constructor() {\n        super()\n    } \n\n    static getAllArvRegimens() {\n        return this.getJson(`programs/${this.getProgramID()}/all_arv_regimens`)\n    }\n\n    static getRegimens(patientId: number) {\n        return this.getJson(`programs/${this.getProgramID()}/regimens`, {'patient_id': patientId})\n    }\n\n    static getRegimensByWeight(weight: number, onTbTreatment = false) {\n        return this.getJson(`programs/${this.getProgramID()}/regimens`, {\n            weight,\n            'tb_dosage': onTbTreatment,\n        })\n    }\n\n    static getCustomIngridients() {\n        return this.getJson(`programs/${this.getProgramID()}/custom_regimen_ingredients`)\n    }\n\n    static getCurrentRegimen(patientId: number, date=this.getSessionDate()) {\n        return this.getJson(`programs/${this.getProgramID()}/${patientId}`, {date})   \n    }\n\n    static getRegimenExtras(name: string, weight: number) {\n        return this.getJson(`programs/${this.getProgramID()}/regimen_extras`, {name, weight})\n    }\n}","import { DrugOrderInterface } from \"@/interfaces/DrugOrder\";\nimport { Service } from \"./service\";\n\nexport class DrugOrderService extends Service {\n    constructor() {\n        super()\n    }\n\n    static create(orders: DrugOrderInterface) {\n        return this.postJson('drug_orders', orders)\n    }\n\n    static updateDispensationOrders(orders: any) {\n        return this.postJson('dispensations', {\n            'program_id': this.getProgramID(),\n            dispensations: orders.map((order: any) => ({\n                'date': this.getSessionDate(),\n                'drug_order_id': order['order_id'],\n                'quantity': order['quantity']\n            }))\n        })\n    }\n\n    static getDrugOrderHistory(patientID: number) {\n        return this.getJson('drug_orders', { 'patient_id': patientID })\n    }\n\n    static getDrugOrders(patientID: number) {\n        return this.getJson('drug_orders', {\n            'patient_id': patientID,\n            'date': this.getSessionDate(),\n            'program_id': this.getProgramID()\n        })\n    }\n\n    static getAllDrugOrders(patientID: number, pageSize=1000) {\n        return this.getJson('drug_orders', {\n            'patient_id': patientID,\n            'program_id': Service.getProgramID(),\n            'page_size': pageSize\n        })\n    }\n\n    static getLastDrugsReceived(patientID: number) {\n        return this.getJson(`patients/${patientID}/last_drugs_received`, {\n            'date': this.getSessionDate(),\n            'program_id': this.getProgramID()\n        })\n    }\n\n    static getDrugDosages(patientID: number, drugID: number, date=this.getSessionDate()) {\n        const params = { 'drug_id': drugID, 'date': date }\n        return this.getJson(`programs/${this.getProgramID()}/patients/${patientID}/drug_doses`, params)\n    }\n\n    static getOrderByPatient(patientId: number, params: any) {\n        return this.getJson('/drug_orders', {\n            'patient_id': patientId,\n            'program_id': this.getProgramID(),\n            ...params\n        })\n    }\n\n}","import { optionsActionSheet } from '@/utils/ActionSheets'\n\nexport default async function popVoidReason(callback: Function, size = 'action-sheet-modal') {\n    const modal = await optionsActionSheet(\n        'Are you sure you want to void record?',\n        'Please specify reason for voiding this record',\n        [\n          'Mistake/ Wrong Entry',\n          'Duplicate',\n          'System Error' \n        ],\n        [\n            { name: 'Cancel', slot:'start'},\n            { name: 'Void', color: 'danger', slot:'end', role: 'action'}\n        ],\n        '',\n        size\n    )\n    if (modal.selection && modal.action === 'Void') {\n        await callback(modal.selection)\n    }\n}\n","export * from \"-!../../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../../../node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/index.js??ref--0-1!./VisitsSummary.vue?vue&type=style&index=0&id=17e9b721&scoped=true&lang=css\"","import { toDisplayString as _toDisplayString, createTextVNode as _createTextVNode, resolveComponent as _resolveComponent, withCtx as _withCtx, createVNode as _createVNode, openBlock as _openBlock, createBlock as _createBlock, createCommentVNode as _createCommentVNode, Fragment as _Fragment } from \"vue\"\n\nconst _hoisted_1 = { key: 0 }\nconst _hoisted_2 = { key: 1 }\nconst _hoisted_3 = /*#__PURE__*/_createTextVNode(\" Close \")\n\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  const _component_ion_title = _resolveComponent(\"ion-title\")\n  const _component_ion_toolbar = _resolveComponent(\"ion-toolbar\")\n  const _component_ion_header = _resolveComponent(\"ion-header\")\n  const _component_his_basic_table = _resolveComponent(\"his-basic-table\")\n  const _component_text_skeloton = _resolveComponent(\"text-skeloton\")\n  const _component_ion_content = _resolveComponent(\"ion-content\")\n  const _component_ion_button = _resolveComponent(\"ion-button\")\n  const _component_ion_footer = _resolveComponent(\"ion-footer\")\n\n  return (_openBlock(), _createBlock(_Fragment, null, [\n    _createVNode(_component_ion_header, null, {\n      default: _withCtx(() => [\n        _createVNode(_component_ion_toolbar, null, {\n          default: _withCtx(() => [\n            _createVNode(_component_ion_title, null, {\n              default: _withCtx(() => [\n                _createTextVNode(_toDisplayString(_ctx.title), 1 /* TEXT */)\n              ]),\n              _: 1\n            })\n          ]),\n          _: 1\n        })\n      ]),\n      _: 1\n    }),\n    _createVNode(_component_ion_content, null, {\n      default: _withCtx(() => [\n        (_ctx.ready)\n          ? (_openBlock(), _createBlock(\"div\", _hoisted_1, [\n              _createVNode(_component_his_basic_table, {\n                columns: _ctx.columns,\n                rows: _ctx.rows\n              }, null, 8, [\"columns\", \"rows\"])\n            ]))\n          : (_openBlock(), _createBlock(\"div\", _hoisted_2, [\n              _createVNode(_component_text_skeloton)\n            ]))\n      ]),\n      _: 1\n    }),\n    _createVNode(_component_ion_footer, null, {\n      default: _withCtx(() => [\n        _createVNode(_component_ion_toolbar, null, {\n          default: _withCtx(() => [\n            _createVNode(_component_ion_button, {\n              color: \"danger\",\n              onClick: _ctx.closeModal,\n              slot: \"end\"\n            }, {\n              default: _withCtx(() => [\n                _hoisted_3\n              ]),\n              _: 1\n            }, 8, [\"onClick\"])\n          ]),\n          _: 1\n        })\n      ]),\n      _: 1\n    })\n  ], 64 /* STABLE_FRAGMENT */))\n}","\nimport { defineComponent, PropType } from \"vue\";\nimport HisBasicTable from \"./HisBasicTable.vue\";\nimport { modalController } from \"@ionic/vue\";\nimport TextSkeloton from \"@/components/TextSkeleton.vue\"\nimport {\n  IonHeader, \n  IonToolbar, \n  IonContent, \n  IonFooter, \n  IonButton\n} from \"@ionic/vue\"\nexport default defineComponent({\n  components: { \n    HisBasicTable,\n    IonHeader, \n    IonToolbar, \n    IonContent, \n    IonFooter, \n    IonButton,\n    TextSkeloton\n  },\n  props: {\n    title: {\n      type: String,\n      required: true,\n    },\n    columns: {\n      type: Object as PropType<string[]>,\n      required: true,\n    },\n    onRows: {\n      type: Function,\n      required: true,\n    },\n  },\n  data: () => ({\n    rows: [] as Array<any>,\n    ready: false,\n  }),\n  watch: {\n    onRows: {\n      async handler(func: Function) {\n        if (func) {\n          this.rows = await func();\n          this.ready = true;\n        }\n      },\n      immediate: true,\n      deep: true,\n    },\n  },\n  methods: {\n    async closeModal() {\n      await modalController.dismiss({});\n    },\n  },\n});\n","import { render } from \"./DrillTableModal.vue?vue&type=template&id=0cd2f14a&ts=true\"\nimport script from \"./DrillTableModal.vue?vue&type=script&lang=ts\"\nexport * from \"./DrillTableModal.vue?vue&type=script&lang=ts\"\n\nimport exportComponent from \"/home/daniel/local-repos/HIS-Core/node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","import { AppEncounterService } from \"@/services/app_encounter_service\";\n\nexport class AppointmentService extends AppEncounterService {\n  constructor(patientID: number, providerID: number) {\n    super(patientID, 7, providerID);\n  }\n\n  async getNextAppointment() {\n    const programID = AppEncounterService.getProgramID();\n    return AppEncounterService.getJson(`/programs/${programID}/patients/${this.patientID}/next_appointment_date`, {date: this.date})\n  }\n  static async getDailiyAppointments(date: any) {\n    const programID = AppEncounterService.getProgramID();\n    return AppEncounterService.getJson(`/programs/${programID}/booked_appointments`, {date: date, paginate: false})\n  }\n\n}","import { resolveComponent as _resolveComponent, createVNode as _createVNode, openBlock as _openBlock, createBlock as _createBlock, createCommentVNode as _createCommentVNode, withCtx as _withCtx } from \"vue\"\n\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  const _component_information_header = _resolveComponent(\"information-header\")\n  const _component_ion_col = _resolveComponent(\"ion-col\")\n  const _component_ion_row = _resolveComponent(\"ion-row\")\n  const _component_visits_summary = _resolveComponent(\"visits-summary\")\n  const _component_ion_grid = _resolveComponent(\"ion-grid\")\n  const _component_layout = _resolveComponent(\"layout\")\n\n  return (_openBlock(), _createBlock(_component_layout, null, {\n    default: _withCtx(() => [\n      (_ctx.isReady)\n        ? (_openBlock(), _createBlock(_component_ion_grid, {\n            key: 0,\n            class: \"ion-no-margin ion-no-padding\"\n          }, {\n            default: _withCtx(() => [\n              _createVNode(_component_ion_row, null, {\n                default: _withCtx(() => [\n                  _createVNode(_component_ion_col, { size: \"12\" }, {\n                    default: _withCtx(() => [\n                      (_ctx.patient)\n                        ? (_openBlock(), _createBlock(_component_information_header, {\n                            key: 0,\n                            patient: _ctx.patient,\n                            guardians: _ctx.guardians,\n                            artStartDate: _ctx.artStartDate,\n                            onUpdateARVNumber: _ctx.updateARVNumber,\n                            onAddGuardian: _ctx.addGuardian,\n                            onUpdatePatient: _ctx.updateDemographics\n                          }, null, 8, [\"patient\", \"guardians\", \"artStartDate\", \"onUpdateARVNumber\", \"onAddGuardian\", \"onUpdatePatient\"]))\n                        : _createCommentVNode(\"\", true)\n                    ]),\n                    _: 1\n                  })\n                ]),\n                _: 1\n              }),\n              _createVNode(_component_ion_row, null, {\n                default: _withCtx(() => [\n                  _createVNode(_component_ion_col, null, {\n                    default: _withCtx(() => [\n                      (_ctx.patient)\n                        ? (_openBlock(), _createBlock(_component_visits_summary, {\n                            key: 0,\n                            patient: _ctx.patient,\n                            startDate: _ctx.artStartDate\n                          }, null, 8, [\"patient\", \"startDate\"]))\n                        : _createCommentVNode(\"\", true)\n                    ]),\n                    _: 1\n                  })\n                ]),\n                _: 1\n              })\n            ]),\n            _: 1\n          }))\n        : _createCommentVNode(\"\", true)\n    ]),\n    _: 1\n  }))\n}","import { createVNode as _createVNode, renderList as _renderList, Fragment as _Fragment, openBlock as _openBlock, createBlock as _createBlock, resolveComponent as _resolveComponent, createCommentVNode as _createCommentVNode, toDisplayString as _toDisplayString, createTextVNode as _createTextVNode, withCtx as _withCtx, withScopeId as _withScopeId, pushScopeId as _pushScopeId, popScopeId as _popScopeId } from \"vue\"\nconst _withId = /*#__PURE__*/_withScopeId(\"data-v-17e9b721\")\n\n_pushScopeId(\"data-v-17e9b721\")\nconst _hoisted_1 = /*#__PURE__*/_createVNode(\"span\", { class: \"title\" }, \"Summary of Visits\", -1)\nconst _hoisted_2 = { class: \"ion-float-right ion-margin-end ion-margin-bottom\" }\n_popScopeId()\n\nexport const render = /*#__PURE__*/_withId(function render(_ctx, _cache, $props, $setup, $data, $options) {\n  const _component_ion_icon = _resolveComponent(\"ion-icon\")\n  const _component_ion_button = _resolveComponent(\"ion-button\")\n  const _component_ion_card_title = _resolveComponent(\"ion-card-title\")\n  const _component_ion_card_header = _resolveComponent(\"ion-card-header\")\n  const _component_report_table = _resolveComponent(\"report-table\")\n  const _component_ion_card_content = _resolveComponent(\"ion-card-content\")\n  const _component_ion_card = _resolveComponent(\"ion-card\")\n\n  return (_openBlock(), _createBlock(_component_ion_card, {\n    class: \"his-card\",\n    style: {\"padding\":\"0 !important\"}\n  }, {\n    default: _withId(() => [\n      _createVNode(_component_ion_card_header, null, {\n        default: _withId(() => [\n          _createVNode(_component_ion_card_title, null, {\n            default: _withId(() => [\n              _hoisted_1,\n              _createVNode(\"span\", _hoisted_2, [\n                (_openBlock(true), _createBlock(_Fragment, null, _renderList(_ctx.actionButtons, (btn) => {\n                  return (_openBlock(), _createBlock(_component_ion_button, {\n                    key: btn.label,\n                    onClick: btn.action,\n                    color: btn.color || 'primary'\n                  }, {\n                    default: _withId(() => [\n                      (btn.icon)\n                        ? (_openBlock(), _createBlock(_component_ion_icon, {\n                            key: 0,\n                            icon: btn.icon,\n                            class: \"ion-margin-right\"\n                          }, null, 8, [\"icon\"]))\n                        : _createCommentVNode(\"\", true),\n                      _createTextVNode(\" \" + _toDisplayString(btn.label), 1 /* TEXT */)\n                    ]),\n                    _: 2\n                  }, 1032, [\"onClick\", \"color\"]))\n                }), 128 /* KEYED_FRAGMENT */))\n              ])\n            ]),\n            _: 1\n          })\n        ]),\n        _: 1\n      }),\n      _createVNode(_component_ion_card_content, {\n        class: \"ion-no-padding\",\n        style: {\"min-height\":\"45vh\"}\n      }, {\n        default: _withId(() => [\n          _createVNode(_component_report_table, {\n            rows: _ctx.rows,\n            columns: _ctx.columns,\n            config: _ctx.tableConfig\n          }, null, 8, [\"rows\", \"columns\", \"config\"])\n        ]),\n        _: 1\n      })\n    ]),\n    _: 1\n  }))\n})","import { createTextVNode as _createTextVNode, resolveComponent as _resolveComponent, withCtx as _withCtx, createVNode as _createVNode, Fragment as _Fragment, openBlock as _openBlock, createBlock as _createBlock } from \"vue\"\n\nconst _hoisted_1 = /*#__PURE__*/_createTextVNode(\"Viral Load Results\")\nconst _hoisted_2 = /*#__PURE__*/_createTextVNode(\"Other Results Options: \")\nconst _hoisted_3 = /*#__PURE__*/_createTextVNode(\"LDL\")\nconst _hoisted_4 = /*#__PURE__*/_createTextVNode(\"Close\")\nconst _hoisted_5 = /*#__PURE__*/_createTextVNode(\"Reset\")\nconst _hoisted_6 = /*#__PURE__*/_createTextVNode(\"Save\")\n\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  const _component_ion_title = _resolveComponent(\"ion-title\")\n  const _component_ion_toolbar = _resolveComponent(\"ion-toolbar\")\n  const _component_ion_header = _resolveComponent(\"ion-header\")\n  const _component_DateInput = _resolveComponent(\"DateInput\")\n  const _component_ion_col = _resolveComponent(\"ion-col\")\n  const _component_SelectInput = _resolveComponent(\"SelectInput\")\n  const _component_NumberInput = _resolveComponent(\"NumberInput\")\n  const _component_ion_row = _resolveComponent(\"ion-row\")\n  const _component_ion_label = _resolveComponent(\"ion-label\")\n  const _component_ion_checkbox = _resolveComponent(\"ion-checkbox\")\n  const _component_ion_item = _resolveComponent(\"ion-item\")\n  const _component_ion_grid = _resolveComponent(\"ion-grid\")\n  const _component_ion_content = _resolveComponent(\"ion-content\")\n  const _component_ion_button = _resolveComponent(\"ion-button\")\n  const _component_ion_footer = _resolveComponent(\"ion-footer\")\n\n  return (_openBlock(), _createBlock(_Fragment, null, [\n    _createVNode(_component_ion_header, null, {\n      default: _withCtx(() => [\n        _createVNode(_component_ion_toolbar, null, {\n          default: _withCtx(() => [\n            _createVNode(_component_ion_title, null, {\n              default: _withCtx(() => [\n                _hoisted_1\n              ]),\n              _: 1\n            })\n          ]),\n          _: 1\n        })\n      ]),\n      _: 1\n    }),\n    _createVNode(_component_ion_content, { class: \"ion-padding\" }, {\n      default: _withCtx(() => [\n        _createVNode(_component_ion_grid, { style: {\"width\":\"100%\"} }, {\n          default: _withCtx(() => [\n            _createVNode(_component_ion_row, null, {\n              default: _withCtx(() => [\n                _createVNode(_component_ion_col, {\n                  size: \"12\",\n                  class: \"ion-margin-vertical\"\n                }, {\n                  default: _withCtx(() => [\n                    _createVNode(_component_DateInput, {\n                      modelValue: _ctx.form.orderDate,\n                      \"onUpdate:modelValue\": _cache[1] || (_cache[1] = $event => (_ctx.form.orderDate = $event)),\n                      form: _ctx.form,\n                      minDate: _ctx.birthdate,\n                      maxDate: _ctx.today\n                    }, null, 8, [\"modelValue\", \"form\", \"minDate\", \"maxDate\"])\n                  ]),\n                  _: 1\n                }),\n                _createVNode(_component_ion_col, {\n                  size: \"6\",\n                  class: \"ion-margin-vertical\"\n                }, {\n                  default: _withCtx(() => [\n                    _createVNode(_component_SelectInput, {\n                      modelValue: _ctx.form.reason,\n                      \"onUpdate:modelValue\": _cache[2] || (_cache[2] = $event => (_ctx.form.reason = $event)),\n                      options: _ctx.reasons\n                    }, null, 8, [\"modelValue\", \"options\"])\n                  ]),\n                  _: 1\n                }),\n                _createVNode(_component_ion_col, {\n                  size: \"6\",\n                  class: \"ion-margin-vertical\"\n                }, {\n                  default: _withCtx(() => [\n                    _createVNode(_component_SelectInput, {\n                      modelValue: _ctx.form.specimenConcept,\n                      \"onUpdate:modelValue\": _cache[3] || (_cache[3] = $event => (_ctx.form.specimenConcept = $event)),\n                      options: _ctx.specimens\n                    }, null, 8, [\"modelValue\", \"options\"])\n                  ]),\n                  _: 1\n                }),\n                _createVNode(_component_ion_col, {\n                  size: \"12\",\n                  class: \"ion-margin-vertical\"\n                }, {\n                  default: _withCtx(() => [\n                    _createVNode(_component_DateInput, {\n                      modelValue: _ctx.form.resultDate,\n                      \"onUpdate:modelValue\": _cache[4] || (_cache[4] = $event => (_ctx.form.resultDate = $event)),\n                      form: _ctx.form,\n                      minDate: _ctx.form.orderDate.value,\n                      \"max-date\": _ctx.today\n                    }, null, 8, [\"modelValue\", \"form\", \"minDate\", \"max-date\"])\n                  ]),\n                  _: 1\n                }),\n                _createVNode(_component_ion_col, {\n                  size: \"6\",\n                  class: \"ion-margin-vertical\"\n                }, {\n                  default: _withCtx(() => [\n                    _createVNode(_component_SelectInput, {\n                      modelValue: _ctx.form.modifier,\n                      \"onUpdate:modelValue\": _cache[5] || (_cache[5] = $event => (_ctx.form.modifier = $event)),\n                      options: _ctx.modifiers\n                    }, null, 8, [\"modelValue\", \"options\"])\n                  ]),\n                  _: 1\n                }),\n                _createVNode(_component_ion_col, {\n                  size: \"6\",\n                  class: \"ion-margin-vertical\"\n                }, {\n                  default: _withCtx(() => [\n                    _createVNode(_component_NumberInput, {\n                      modelValue: _ctx.form.result,\n                      \"onUpdate:modelValue\": _cache[6] || (_cache[6] = $event => (_ctx.form.result = $event)),\n                      form: _ctx.form,\n                      min: 1\n                    }, null, 8, [\"modelValue\", \"form\"])\n                  ]),\n                  _: 1\n                })\n              ]),\n              _: 1\n            }),\n            _createVNode(_component_ion_row, { class: \"ion-margin-top\" }, {\n              default: _withCtx(() => [\n                _createVNode(_component_ion_col, { size: \"12\" }, {\n                  default: _withCtx(() => [\n                    _createVNode(_component_ion_label, { class: \"ion-padding-vertical bold\" }, {\n                      default: _withCtx(() => [\n                        _hoisted_2\n                      ]),\n                      _: 1\n                    }),\n                    _createVNode(_component_ion_item, null, {\n                      default: _withCtx(() => [\n                        _createVNode(_component_ion_label, null, {\n                          default: _withCtx(() => [\n                            _hoisted_3\n                          ]),\n                          _: 1\n                        }),\n                        _createVNode(_component_ion_checkbox, {\n                          slot: \"start\",\n                          modelValue: _ctx.ldl,\n                          \"onUpdate:modelValue\": _cache[7] || (_cache[7] = $event => (_ctx.ldl = $event))\n                        }, null, 8, [\"modelValue\"])\n                      ]),\n                      _: 1\n                    })\n                  ]),\n                  _: 1\n                })\n              ]),\n              _: 1\n            })\n          ]),\n          _: 1\n        })\n      ]),\n      _: 1\n    }),\n    _createVNode(_component_ion_footer, null, {\n      default: _withCtx(() => [\n        _createVNode(_component_ion_toolbar, null, {\n          default: _withCtx(() => [\n            _createVNode(_component_ion_button, {\n              color: \"primary\",\n              onClick: _cache[8] || (_cache[8] = $event => (_ctx.modal.hide())),\n              slot: \"end\"\n            }, {\n              default: _withCtx(() => [\n                _hoisted_4\n              ]),\n              _: 1\n            }),\n            _createVNode(_component_ion_button, {\n              color: \"warning\",\n              onClick: _ctx.resetResults,\n              slot: \"end\"\n            }, {\n              default: _withCtx(() => [\n                _hoisted_5\n              ]),\n              _: 1\n            }, 8, [\"onClick\"]),\n            _createVNode(_component_ion_button, {\n              color: \"success\",\n              onClick: _ctx.saveResults,\n              slot: \"end\"\n            }, {\n              default: _withCtx(() => [\n                _hoisted_6\n              ]),\n              _: 1\n            }, 8, [\"onClick\"])\n          ]),\n          _: 1\n        })\n      ]),\n      _: 1\n    })\n  ], 64 /* STABLE_FRAGMENT */))\n}","\nimport { defineComponent, onMounted, PropType, reactive, ref, watch } from \"vue\";\nimport { \n  IonCol, \n  IonGrid, \n  IonRow, \n  IonContent, \n  IonFooter, \n  IonHeader, \n  IonTitle, \n  IonToolbar, \n  IonButton, \n  IonLabel, \n  IonCheckbox,\n  IonItem\n} from \"@ionic/vue\";\nimport { DTForm } from \"../../interfaces/dt_form_field\";\nimport { Patientservice } from \"@/services/patient_service\";\nimport DateInput from \"../inputs/DateInput.vue\";\nimport SelectInput from \"../inputs/SelectInput.vue\";\nimport NumberInput from \"../inputs/NumberInput.vue\";\nimport dayjs from \"dayjs\";\nimport { toOptions } from \"../../utils/DTFormElements\";\nimport { OrderService } from \"@/services/order_service\";\nimport { LabOrderService } from \"@/apps/ART/services/lab_order_service\";\nimport { Option } from \"@/components/Forms/FieldInterface\";\nimport { ConceptName } from \"@/interfaces/conceptName\";\nimport { submitForm } from \"../../utils/form\";\nimport { PatientLabResultService } from \"@/services/patient_lab_result_service\";\nimport { ConceptService } from \"@/services/concept_service\";\nimport EventBus from \"@/utils/EventBus\";\nimport { EmcEvents } from \"../../interfaces/emc_event\";\nimport { modal } from \"@/utils/modal\";\nimport { alertConfirmation } from \"@/utils/Alerts\";\nimport { STANDARD_DATE_FORMAT } from \"@/utils/Date\";\n\nexport default defineComponent({\n  components: {\n    IonContent,\n    IonFooter,\n    IonHeader,\n    IonTitle,\n    IonToolbar,\n    IonButton,\n    IonLabel,\n    IonGrid,\n    IonRow,\n    IonCol,\n    IonCheckbox,\n    IonItem,\n    DateInput,\n    SelectInput,\n    NumberInput,\n  },\n  props: {\n    patient: {\n      type: Object as PropType<Patientservice>,\n      required: true\n    },\n  },\n  setup(props) {\n    const ldl = ref(false);\n    const modifiers = toOptions(['=', '>', '<', '>=', '<=']);\n    const reasons = toOptions([\"Routine\", \"Targeted\", \"Confirmatory\", \"Stat\", \"Repeat / Missing\"])\n    const specimens = ref<Option[]>([])\n    const today = dayjs().format(STANDARD_DATE_FORMAT)\n    const birthdate = dayjs(props.patient.getBirthdate()).format(STANDARD_DATE_FORMAT)\n\n    const form = reactive<DTForm>({\n      orderDate: {\n        value: '',\n        label: 'Order Date',\n        required: true,\n        validation: async (date) => {\n          if (!dayjs(date.value).isValid()) {\n            return ['Invalid date'];\n          }\n          if(dayjs(date.value).isAfter(today)) {\n            return ['Order date cannot be in the future'];\n          }\n          if(dayjs(date.value).isBefore(birthdate)) {\n            return ['Order date cannot be before patient\\'s date of birth'];\n          }\n          return null\n        }\n      },\n      resultDate: {\n        value: '',\n        label: 'Result Date',\n        required: true,\n        validation: async (date, form) => {\n          if (!dayjs(date.value).isValid()) {\n            return ['Invalid date'];\n          }\n          if(dayjs(date.value).isAfter(today)) {\n            return ['Result date cannot be in the future'];\n          }\n          if(dayjs(date.value).isBefore(dayjs(form.orderDate.value))) {\n            return ['Result date cannot be before order date'];\n          }\n          if(dayjs(date.value).isBefore(dayjs(props.patient.getBirthdate()))) {\n            return ['Result date cannot be before patient\\'s date of birth'];\n          }\n          return null\n        }\n      },\n      specimenConcept: {\n        value: '',\n        label: 'Specimen',\n        placeholder: 'Select a specimen',\n        required: true,\n      },\n      modifier: {\n        value: '',\n        label: 'Modifier',\n        placeholder: 'Select a modifier',\n        required: true,\n      },\n      reason: {\n        value: '',\n        label: 'Reason',\n        placeholder: 'Select a reason',\n        required: true,\n      },\n      result: {\n        value: '',\n        label: 'Result Value',\n        placeholder: 'Enter a result value',\n        required: true,\n      }\n    });\n\n    const saveResults = async () => submitForm(form, async (formData) => {\n      await LabOrderService.setSessionDate(formData.orderDate)\n      const orderService = new LabOrderService(props.patient.getID(), -1)\n      const vlConceptId = await ConceptService.getConceptID(\"HIV viral load\")\n      const encounter = await orderService.createEncounter();\n      if(!encounter) throw new Error('Unable to create lab order encounter');\n      const formattedOrders  = await OrderService.buildLabOrders(encounter, [{\n        'specimenConcept': formData.specimenConcept.value,\n        'reason': formData.reason.value,\n        'concept_id': vlConceptId\n      }]);\n      const orders = await  OrderService.saveOrdersArray(encounter.encounter_id, formattedOrders);\n      if(!orders) throw new Error('Unable to save lab orders');\n\n      await PatientLabResultService.setSessionDate(formData.resultDate)\n      const resultService = new PatientLabResultService(props.patient.getID())\n      resultService.setTestID(orders[0].tests[0].id)\n      resultService.setResultDate(formData.resultDate)\n      const resultEnc = await resultService.createEncounter()\n      if(!resultEnc) throw new Error(\"Unable to create lab result encounter\")\n      await resultService.createLabResult([{\n        \"indicator\": {\n          \"concept_id\": vlConceptId,\n        },\n        \"value\": ldl.value ? \"LDL\" : parseInt(formData.result),\n        \"value_modifier\": ldl.value ? \"=\" : formData.modifier.value,\n        \"value_type\": ldl.value ? \"text\" : \"numeric\"\n      }])\n\n      await PatientLabResultService.resetSessionDate()\n      await modal.hide()\n      EventBus.emit(EmcEvents.RELOAD_LATEST_VL_RESULT)\n      EventBus.emit(EmcEvents.RELOAD_PATIENT_VISIT_DATA)\n    })\n\n    const resetResults = async () => {\n      if((await alertConfirmation(\"Are you sure you want to clear all fields?\"))){\n        ldl.value = false\n        for(const key in form) {\n          form[key].value = '';\n          form[key].error = ''\n        }\n        EventBus.emit(EmcEvents.ON_CLEAR);\n      }\n    };\n\n    watch(ldl, (isLDL) => {\n      if(isLDL) {\n        form.modifier.value = \"\";\n        form.result.value = undefined;\n        form.modifier.error = ''\n        form.result.error = ''\n      }\n      form.modifier.disabled = isLDL;\n      form.modifier.required = !isLDL;\n      form.result.disabled = isLDL;\n      form.result.required = !isLDL;\n    });\n\n    onMounted(async () => {\n      specimens.value = (await OrderService.getSpecimens(\"HIV viral load\"))\n        .map((specimen: ConceptName) => ({\n          label: specimen.name,\n          value: specimen['concept_id']\n        })\n      )\n    })\n\n    return {\n      today,\n      birthdate,\n      form,\n      modifiers,\n      reasons,\n      specimens,\n      ldl,\n      modal,\n      resetResults,\n      saveResults,\n    };\n  },\n})\n","import { render } from \"./ViralLoadResult.vue?vue&type=template&id=509833a2&ts=true\"\nimport script from \"./ViralLoadResult.vue?vue&type=script&lang=ts\"\nexport * from \"./ViralLoadResult.vue?vue&type=script&lang=ts\"\n\nimport exportComponent from \"/home/daniel/local-repos/HIS-Core/node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","import { createTextVNode as _createTextVNode, resolveComponent as _resolveComponent, withCtx as _withCtx, createVNode as _createVNode, toDisplayString as _toDisplayString, openBlock as _openBlock, createBlock as _createBlock, createCommentVNode as _createCommentVNode, Fragment as _Fragment } from \"vue\"\n\nconst _hoisted_1 = /*#__PURE__*/_createTextVNode(\"Patient Outcomes\")\nconst _hoisted_2 = /*#__PURE__*/_createTextVNode(\"Close\")\nconst _hoisted_3 = /*#__PURE__*/_createTextVNode(\"Void Program\")\n\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  const _component_ion_title = _resolveComponent(\"ion-title\")\n  const _component_ion_toolbar = _resolveComponent(\"ion-toolbar\")\n  const _component_ion_header = _resolveComponent(\"ion-header\")\n  const _component_ion_badge = _resolveComponent(\"ion-badge\")\n  const _component_ion_col = _resolveComponent(\"ion-col\")\n  const _component_ion_row = _resolveComponent(\"ion-row\")\n  const _component_enrollment_form = _resolveComponent(\"enrollment-form\")\n  const _component_outcome_form = _resolveComponent(\"outcome-form\")\n  const _component_outcomes_table = _resolveComponent(\"outcomes-table\")\n  const _component_ion_grid = _resolveComponent(\"ion-grid\")\n  const _component_ion_content = _resolveComponent(\"ion-content\")\n  const _component_ion_button = _resolveComponent(\"ion-button\")\n  const _component_ion_footer = _resolveComponent(\"ion-footer\")\n\n  return (_openBlock(), _createBlock(_Fragment, null, [\n    _createVNode(_component_ion_header, null, {\n      default: _withCtx(() => [\n        _createVNode(_component_ion_toolbar, null, {\n          default: _withCtx(() => [\n            _createVNode(_component_ion_title, null, {\n              default: _withCtx(() => [\n                _hoisted_1\n              ]),\n              _: 1\n            })\n          ]),\n          _: 1\n        })\n      ]),\n      _: 1\n    }),\n    _createVNode(_component_ion_content, null, {\n      default: _withCtx(() => [\n        _createVNode(_component_ion_grid, { style: {\"width\":\"100%\"} }, {\n          default: _withCtx(() => [\n            _createVNode(_component_ion_row, null, {\n              default: _withCtx(() => [\n                _createVNode(_component_ion_col, null, {\n                  default: _withCtx(() => [\n                    _createVNode(_component_ion_badge, {\n                      color: \"lightblue\",\n                      class: \"ion-padding\",\n                      style: {\"width\":\"100%\"},\n                      disabled: \"\"\n                    }, {\n                      default: _withCtx(() => [\n                        _createTextVNode(_toDisplayString(_ctx.enrollmentStatus), 1 /* TEXT */)\n                      ]),\n                      _: 1\n                    })\n                  ]),\n                  _: 1\n                })\n              ]),\n              _: 1\n            }),\n            (!_ctx.isEnrolled)\n              ? (_openBlock(), _createBlock(_component_ion_row, {\n                  key: 0,\n                  class: \"his-card\",\n                  style: {\"margin-bottom\":\".4rem\"}\n                }, {\n                  default: _withCtx(() => [\n                    _createVNode(_component_ion_col, { size: \"12\" }, {\n                      default: _withCtx(() => [\n                        _createVNode(_component_enrollment_form, {\n                          patientProgram: _ctx.patientProgram,\n                          birthdate: _ctx.birthdate,\n                          onEnrollProgram: _ctx.enrollProgram\n                        }, null, 8, [\"patientProgram\", \"birthdate\", \"onEnrollProgram\"])\n                      ]),\n                      _: 1\n                    })\n                  ]),\n                  _: 1\n                }))\n              : (_openBlock(), _createBlock(_Fragment, { key: 1 }, [\n                  (_ctx.outcomes)\n                    ? (_openBlock(), _createBlock(_component_ion_row, {\n                        key: 0,\n                        class: \"his-card\",\n                        style: {\"margin-bottom\":\".4rem\"}\n                      }, {\n                        default: _withCtx(() => [\n                          _createVNode(_component_outcome_form, {\n                            \"date-enrolled\": _ctx.enrollDate,\n                            birthdate: _ctx.birthdate,\n                            outcomes: _ctx.outcomes,\n                            onSaveOutcome: _ctx.saveOutcome\n                          }, null, 8, [\"date-enrolled\", \"birthdate\", \"outcomes\", \"onSaveOutcome\"])\n                        ]),\n                        _: 1\n                      }))\n                    : _createCommentVNode(\"\", true),\n                  _createVNode(_component_ion_row, {\n                    class: \"his-card\",\n                    style: [{\"padding\":\"0 !important\"}, { minHeight: _ctx.totalStates ? '0' : '30vh'}]\n                  }, {\n                    default: _withCtx(() => [\n                      _createVNode(_component_ion_col, {\n                        size: \"12\",\n                        class: \"ion-no-padding\"\n                      }, {\n                        default: _withCtx(() => [\n                          _createVNode(_component_outcomes_table, {\n                            patientStates: _ctx.program?.patient_states,\n                            onVoidOutcome: _ctx.voidOutcome\n                          }, null, 8, [\"patientStates\", \"onVoidOutcome\"])\n                        ]),\n                        _: 1\n                      })\n                    ]),\n                    _: 1\n                  }, 8, [\"style\"])\n                ], 64 /* STABLE_FRAGMENT */))\n          ]),\n          _: 1\n        })\n      ]),\n      _: 1\n    }),\n    _createVNode(_component_ion_footer, null, {\n      default: _withCtx(() => [\n        _createVNode(_component_ion_toolbar, null, {\n          default: _withCtx(() => [\n            _createVNode(_component_ion_button, {\n              color: \"primary\",\n              onClick: _cache[1] || (_cache[1] = $event => (_ctx.modal.hide())),\n              slot: \"end\"\n            }, {\n              default: _withCtx(() => [\n                _hoisted_2\n              ]),\n              _: 1\n            }),\n            (_ctx.isEnrolled)\n              ? (_openBlock(), _createBlock(_component_ion_button, {\n                  key: 0,\n                  color: \"danger\",\n                  onClick: _ctx.voidProgram,\n                  slot: \"end\"\n                }, {\n                  default: _withCtx(() => [\n                    _hoisted_3\n                  ]),\n                  _: 1\n                }, 8, [\"onClick\"]))\n              : _createCommentVNode(\"\", true)\n          ]),\n          _: 1\n        })\n      ]),\n      _: 1\n    })\n  ], 64 /* STABLE_FRAGMENT */))\n}","import { createVNode as _createVNode, resolveComponent as _resolveComponent, Fragment as _Fragment, openBlock as _openBlock, createBlock as _createBlock } from \"vue\"\n\nconst _hoisted_1 = /*#__PURE__*/_createVNode(\"p\", { class: \"ion-padding-horizontal ion-margin-vertical bold ion-margin-top\" }, \"Previous Outcomes\", -1)\n\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  const _component_data_table = _resolveComponent(\"data-table\")\n\n  return (_openBlock(), _createBlock(_Fragment, null, [\n    _hoisted_1,\n    _createVNode(_component_data_table, {\n      rows: _ctx.rows,\n      columns: _ctx.columns,\n      config: _ctx.tableConfig,\n      \"row-actions-buttons\": _ctx.TableRowActions,\n      color: \"custom\"\n    }, null, 8, [\"rows\", \"columns\", \"config\", \"row-actions-buttons\"])\n  ], 64 /* STABLE_FRAGMENT */))\n}","\nimport { computed, defineComponent, PropType } from \"vue\";\nimport { alertConfirmation } from \"@/utils/Alerts\";\nimport dayjs from \"dayjs\";\nimport { DISPLAY_DATE_FORMAT } from \"@/utils/Date\";\nimport { DataTable, RowActionButtonInterface, TableColumnInterface, TableConfigInterface } from '@uniquedj95/vtable'\n\nexport default defineComponent({\n  name: \"OutcomesTable\",\n  props: {\n    patientStates: {\n      type: Array as PropType<Array<any>>,\n      required: true\n    },\n  },\n  components: {\n    DataTable,\n  },\n  emits: [\"voidOutcome\"],\n  setup(props, { emit }) {\n    const columns: TableColumnInterface[] = [\n      { path: 'name', label: \"Outcome\"},\n      { path: 'start_date', label: \"Start Date\", formatter: (v) => dayjs(v).format(DISPLAY_DATE_FORMAT) },\n      { path: 'end_date', label: \"End Date\", formatter: (v) => dayjs(v).format(DISPLAY_DATE_FORMAT) },\n    ];\n\n    const tableConfig: TableConfigInterface = {\n      showSearchField: false,\n      showSubmitButton: false\n    }\n\n    const rows = computed<any[]>(() => props.patientStates.map((state: any, index: number) => ({\n      ...state,\n      index\n    })));\n\n    const TableRowActions: RowActionButtonInterface[] = [\n      { label: \"void\", color: 'danger', action: async (row) => {\n        if((await alertConfirmation(\"Are you sure you want to void this outcome?\"))){\n          emit(\"voidOutcome\", {stateId: row.patient_state_id, index: row.index});\n        }\n      }}\n    ]\n\n    return {\n      rows,\n      columns,\n      tableConfig,\n      TableRowActions,\n    };\n  }\n})\n","import { render } from \"./OutcomesTable.vue?vue&type=template&id=eb2cc154&ts=true\"\nimport script from \"./OutcomesTable.vue?vue&type=script&lang=ts\"\nexport * from \"./OutcomesTable.vue?vue&type=script&lang=ts\"\n\nimport exportComponent from \"/home/daniel/local-repos/HIS-Core/node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","import { resolveComponent as _resolveComponent, createVNode as _createVNode, withCtx as _withCtx, createTextVNode as _createTextVNode, openBlock as _openBlock, createBlock as _createBlock } from \"vue\"\n\nconst _hoisted_1 = /*#__PURE__*/_createTextVNode(\"Reset\")\nconst _hoisted_2 = /*#__PURE__*/_createTextVNode(\"Enroll\")\n\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  const _component_DateInput = _resolveComponent(\"DateInput\")\n  const _component_ion_col = _resolveComponent(\"ion-col\")\n  const _component_ion_button = _resolveComponent(\"ion-button\")\n  const _component_ion_row = _resolveComponent(\"ion-row\")\n  const _component_ion_grid = _resolveComponent(\"ion-grid\")\n\n  return (_openBlock(), _createBlock(_component_ion_grid, null, {\n    default: _withCtx(() => [\n      _createVNode(_component_ion_row, null, {\n        default: _withCtx(() => [\n          _createVNode(_component_ion_col, { size: \"12\" }, {\n            default: _withCtx(() => [\n              _createVNode(_component_DateInput, {\n                modelValue: _ctx.form.date,\n                \"onUpdate:modelValue\": _cache[1] || (_cache[1] = $event => (_ctx.form.date = $event)),\n                form: _ctx.form,\n                minDate: _ctx.birthdate,\n                \"max-date\": _ctx.today\n              }, null, 8, [\"modelValue\", \"form\", \"minDate\", \"max-date\"])\n            ]),\n            _: 1\n          }),\n          _createVNode(_component_ion_col, null, {\n            default: _withCtx(() => [\n              _createVNode(_component_ion_button, {\n                color: \"warning\",\n                onClick: _ctx.onReset\n              }, {\n                default: _withCtx(() => [\n                  _hoisted_1\n                ]),\n                _: 1\n              }, 8, [\"onClick\"]),\n              _createVNode(_component_ion_button, {\n                color: \"success\",\n                onClick: _ctx.enrollProgram\n              }, {\n                default: _withCtx(() => [\n                  _hoisted_2\n                ]),\n                _: 1\n              }, 8, [\"onClick\"])\n            ]),\n            _: 1\n          })\n        ]),\n        _: 1\n      })\n    ]),\n    _: 1\n  }))\n}","\nimport { alertConfirmation } from \"@/utils/Alerts\";\nimport EventBus from \"@/utils/EventBus\";\nimport { IonGrid, IonRow, IonCol, IonButton } from \"@ionic/vue\";\nimport dayjs from \"dayjs\";\nimport { defineComponent, reactive, ref } from \"vue\";\nimport { DTForm } from \"../interfaces/dt_form_field\";\nimport { EmcEvents } from \"../interfaces/emc_event\";\nimport { submitForm } from \"../utils/form\";\nimport DateInput from \"./inputs/DateInput.vue\";\n\nexport default defineComponent({\n  name: \"EnrollmentForm\",\n  components: {\n    DateInput,\n    IonGrid,\n    IonRow,\n    IonCol,\n    IonButton,\n  },\n  props: [\"birthdate\"],\n  emits: [\"enrollProgram\"],\n  setup(props, { emit }) {\n    const today = dayjs().format(\"YYYY-MM-DD\");\n    const form = reactive<DTForm>({\n      date: {\n        value: \"\",\n        label: \"Date of Enrollment\",\n        required: true,\n        validation: async (date) => {\n          if(dayjs(date.value).isBefore(props.birthdate)) return [\"Date of enrollment cannot be before date of birth\"]\n          if(dayjs(date.value).isAfter(today)) return [\"Date of enrollment cannot be in the future\"]\n          return null\n        }\n      },\n    })\n\n    const onReset = async () => {\n      if((await alertConfirmation(\"Are you sure you want to clear all fields\"))){\n        form.date.value = \"\";\n        form.date.error = \"\";\n        EventBus.emit(EmcEvents.ON_CLEAR)\n      }\n    }\n\n    const enrollProgram = async () => submitForm(form, ({ date }) => emit(\"enrollProgram\", date))\n\n    return {\n      form,\n      today,\n      onReset,\n      enrollProgram,\n    }\n  }\n})\n","import { render } from \"./EnrollmentForm.vue?vue&type=template&id=08b54ea0&ts=true\"\nimport script from \"./EnrollmentForm.vue?vue&type=script&lang=ts\"\nexport * from \"./EnrollmentForm.vue?vue&type=script&lang=ts\"\n\nimport exportComponent from \"/home/daniel/local-repos/HIS-Core/node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","import { createVNode as _createVNode, resolveComponent as _resolveComponent, withCtx as _withCtx, openBlock as _openBlock, createBlock as _createBlock, createCommentVNode as _createCommentVNode, createTextVNode as _createTextVNode } from \"vue\"\n\nconst _hoisted_1 = /*#__PURE__*/_createVNode(\"p\", null, \"Add New Outcome\", -1)\nconst _hoisted_2 = /*#__PURE__*/_createTextVNode(\"Reset\")\nconst _hoisted_3 = /*#__PURE__*/_createTextVNode(\"Save\")\n\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  const _component_ion_col = _resolveComponent(\"ion-col\")\n  const _component_DateInput = _resolveComponent(\"DateInput\")\n  const _component_SelectInput = _resolveComponent(\"SelectInput\")\n  const _component_ion_button = _resolveComponent(\"ion-button\")\n  const _component_ion_row = _resolveComponent(\"ion-row\")\n  const _component_ion_grid = _resolveComponent(\"ion-grid\")\n\n  return (_openBlock(), _createBlock(_component_ion_grid, null, {\n    default: _withCtx(() => [\n      _createVNode(_component_ion_row, null, {\n        default: _withCtx(() => [\n          _createVNode(_component_ion_col, { size: \"12\" }, {\n            default: _withCtx(() => [\n              _hoisted_1\n            ]),\n            _: 1\n          }),\n          _createVNode(_component_ion_col, {\n            size: \"6\",\n            class: \"ion-margin-top-vertical\"\n          }, {\n            default: _withCtx(() => [\n              _createVNode(_component_DateInput, {\n                modelValue: _ctx.form.date,\n                \"onUpdate:modelValue\": _cache[1] || (_cache[1] = $event => (_ctx.form.date = $event)),\n                form: _ctx.form,\n                minDate: _ctx.dateEnrolled,\n                \"max-date\": _ctx.today\n              }, null, 8, [\"modelValue\", \"form\", \"minDate\", \"max-date\"])\n            ]),\n            _: 1\n          }),\n          _createVNode(_component_ion_col, {\n            size: \"6\",\n            class: \"ion-margin-top-vertical\"\n          }, {\n            default: _withCtx(() => [\n              _createVNode(_component_SelectInput, {\n                modelValue: _ctx.form.status,\n                \"onUpdate:modelValue\": _cache[2] || (_cache[2] = $event => (_ctx.form.status = $event)),\n                form: _ctx.form,\n                options: _ctx.outcomes\n              }, null, 8, [\"modelValue\", \"form\", \"options\"])\n            ]),\n            _: 1\n          }),\n          (_ctx.isTransferredOut)\n            ? (_openBlock(), _createBlock(_component_ion_col, {\n                key: 0,\n                size: \"12\",\n                class: \"ion-margin-top-vertical\"\n              }, {\n                default: _withCtx(() => [\n                  _createVNode(_component_SelectInput, {\n                    modelValue: _ctx.form.nextFacility,\n                    \"onUpdate:modelValue\": _cache[3] || (_cache[3] = $event => (_ctx.form.nextFacility = $event)),\n                    form: _ctx.form,\n                    asyncOptions: _ctx.getFacilities\n                  }, null, 8, [\"modelValue\", \"form\", \"asyncOptions\"])\n                ]),\n                _: 1\n              }))\n            : _createCommentVNode(\"\", true),\n          _createVNode(_component_ion_col, {\n            size: \"12\",\n            class: \"ion-margin-top\"\n          }, {\n            default: _withCtx(() => [\n              _createVNode(_component_ion_button, {\n                color: \"warning\",\n                onClick: _ctx.onReset\n              }, {\n                default: _withCtx(() => [\n                  _hoisted_2\n                ]),\n                _: 1\n              }, 8, [\"onClick\"]),\n              _createVNode(_component_ion_button, {\n                color: \"success\",\n                onClick: _ctx.onSave\n              }, {\n                default: _withCtx(() => [\n                  _hoisted_3\n                ]),\n                _: 1\n              }, 8, [\"onClick\"])\n            ]),\n            _: 1\n          })\n        ]),\n        _: 1\n      })\n    ]),\n    _: 1\n  }))\n}","\nimport { IonGrid, IonRow, IonCol, IonButton } from \"@ionic/vue\";\nimport dayjs from \"dayjs\";\nimport { computed, defineComponent, PropType, reactive } from \"vue\";\nimport { DTForm } from \"../interfaces/dt_form_field\";\nimport { submitForm } from \"../utils/form\";\nimport DateInput from \"./inputs/DateInput.vue\";\nimport SelectInput from \"./inputs/SelectInput.vue\";\nimport StandardValidations from \"@/components/Forms/validations/StandardValidations\";\nimport { Option } from \"@/components/Forms/FieldInterface\";\nimport { getFacilities } from \"@/utils/HisFormHelpers/LocationFieldOptions\";\nimport { DISPLAY_DATE_FORMAT } from \"@/utils/Date\";\nimport EventBus from \"@/utils/EventBus\";\nimport { EmcEvents } from \"../interfaces/emc_event\";\nimport { alertConfirmation } from \"@/utils/Alerts\";\n\nexport default defineComponent({\n  name: \"OutcomeForm\",\n  props: {\n    outcomes: {\n      type: Array as PropType<Option[]>,\n      required: true,\n    },\n    dateEnrolled: {\n      type: String,\n      required: true\n    },\n    birthdate: {\n      type: String,\n      required: true\n    }\n  },\n  components: {\n    DateInput,\n    IonGrid,\n    IonRow,\n    IonCol,\n    IonButton,\n    SelectInput,\n  },\n  emits: [\"saveOutcome\"],\n  setup(props, { emit }) {\n    const today = dayjs().format(\"YYYY-MM-DD\");\n    const form = reactive<DTForm>({\n      date: {\n        value: \"\",\n        label: \"Outcome Date\",\n        required: true,\n        validation: async (date) => {\n          if(dayjs(date.value).isBefore(props.birthdate)) return [`Outcome date cannot be before date of birth - ${dayjs(props.birthdate).format(DISPLAY_DATE_FORMAT)}` ]\n          if(dayjs(date.value).isBefore(props.dateEnrolled)) return [`Outcome date cannot be before enrollment date- ${dayjs(props.dateEnrolled).format(DISPLAY_DATE_FORMAT)}`]\n          return null\n        }\n      },\n      status: {\n        value: \"\",\n        label: \"Outcome\",\n        required: true,\n      },\n      nextFacility: {\n        value: \"\",\n        label: \"Next Facility\",\n        validation: async (facility, form) => {\n          return form.status.value.label === \"Patient transferred out\" && \n            StandardValidations.required(facility);\n        }\n      },\n    })\n\n    const isTransferredOut = computed(() => form.status.value?.label === \"Patient transferred out\");\n\n    const onReset = async () => {\n      if((await alertConfirmation(\"are you sure you want to clear all fields\"))) {\n        for (const key in form) {\n          form[key].value = '';\n          form[key].error = '';\n        }\n        EventBus.emit(EmcEvents.ON_CLEAR)\n      }\n    }\n\n    const onSave = () => submitForm(form, data => emit(\"saveOutcome\", data))\n\n    return {\n      form,\n      today,\n      isTransferredOut,\n      onSave,\n      onReset,\n      getFacilities,\n    }\n  }\n})\n","import { render } from \"./OutcomeForm.vue?vue&type=template&id=258136b6&ts=true\"\nimport script from \"./OutcomeForm.vue?vue&type=script&lang=ts\"\nexport * from \"./OutcomeForm.vue?vue&type=script&lang=ts\"\n\nimport exportComponent from \"/home/daniel/local-repos/HIS-Core/node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","\nimport { computed, defineComponent, onMounted, PropType, ref } from \"vue\";\nimport { \n  IonCol, \n  IonGrid, \n  IonRow, \n  IonContent, \n  IonFooter, \n  IonHeader, \n  IonTitle, \n  IonToolbar, \n  IonButton,\n  IonBadge,\n} from \"@ionic/vue\";\nimport { toastSuccess } from \"@/utils/Alerts\";\nimport { PatientProgramService } from \"@/services/patient_program_service\";\nimport { isEmpty } from \"lodash\";\nimport HisDate from \"@/utils/Date\";\nimport { Option } from \"@/components/Forms/FieldInterface\";\nimport OutcomesTable from \"../tables/OutcomesTable.vue\";\nimport EnrollmentForm from \"../EnrollmentForm.vue\";\nimport OutcomeForm from \"../OutcomeForm.vue\";\nimport { modal } from \"@/utils/modal\";\nimport EventBus from \"@/utils/EventBus\";\nimport { EmcEvents } from \"../../interfaces/emc_event\";\nimport { Patientservice } from \"@/services/patient_service\";\n\nexport default defineComponent({\n  components: {\n    IonContent,\n    IonFooter,\n    IonHeader,\n    IonTitle,\n    IonToolbar,\n    IonButton,\n    IonGrid,\n    IonRow,\n    IonCol,\n    IonBadge,\n    OutcomesTable,\n    EnrollmentForm,\n    OutcomeForm,\n  },\n  props: {\n    patient: {\n      type: Object as PropType<Patientservice>,\n      required: true\n    },\n  },\n  setup(props) {\n    const { toStandardHisDisplayFormat, toStandardHisFormat } = HisDate\n    const patientProgram = new PatientProgramService(props.patient.getID());\n    const birthdate = computed(() => toStandardHisFormat(props.patient.getBirthdate()))\n    const program = ref<Record<string, any>>();\n    const isEnrolled = computed(() => !isEmpty(program.value));\n    const enrollDate = ref('');\n    const outcomes = ref<Option[]>();\n    const totalStates = computed(() => program.value?.patient_states?.length ?? 0);\n    const enrollmentStatus = computed(() => isEnrolled.value && enrollDate.value \n      ? `Patient enrolled in this porgram on ${ toStandardHisDisplayFormat(enrollDate.value) }`\n      : 'Patient is not enrolled in this program'\n    );\n\n    const saveOutcome = async ({ date, status, nextFacility}: any) => {\n      patientProgram.setStateDate(date);\n      patientProgram.setStateId(status.value);\n      if(nextFacility) {\n        await patientProgram.transferOutEncounter(nextFacility.other);\n      }\n      await patientProgram.updateState();\n      await toastSuccess('Outcome saved successfully', 1000);\n      await modal.hide();\n      EventBus.emit(EmcEvents.RELOAD_PATIENT_VISIT_DATA);\n    }\n\n    const enrollProgram = async (date: string) => {\n      patientProgram.setProgramDate(date);\n      await patientProgram.enrollProgram();\n      await toastSuccess(\"Program enrolled successfully\", 1000);\n      await modal.hide();\n      EventBus.emit(EmcEvents.RELOAD_PATIENT_VISIT_DATA);\n    }\n\n    const voidProgram = async () => {\n      patientProgram.setPatientProgramId(program.value?.patient_program_id ||  -1);\n      await patientProgram.voidProgram('duplicate / system error');\n      await toastSuccess('Patient voided from program successfully', 1000);\n      await modal.hide();\n      EventBus.emit(EmcEvents.RELOAD_PATIENT_VISIT_DATA);\n    }\n\n    const voidOutcome = async ({stateId, index}: any) => {\n      patientProgram.setStateId(stateId);\n      await patientProgram.voidState('duplicate / system error');\n      toastSuccess('Outcome voided successfully');\n      program.value?.patient_states.splice(index, 1);\n      EventBus.emit(EmcEvents.RELOAD_PATIENT_VISIT_DATA);\n    }\n\n    onMounted (async () => {\n      const programs = await patientProgram.getPrograms();\n      program.value = programs.find((l: any) => l.program.name === \"HIV PROGRAM\");\n      if(program.value) {\n        enrollDate.value = program.value.date_enrolled;\n        const states= await patientProgram.getProgramOutcomes();\n        outcomes.value = states.map((state: any) => ({\n          label: state.name,\n          value: state.program_workflow_state_id,\n          other: state\n        }));\n      }\n    });\n\n    return {\n      modal,\n      patientProgram,\n      isEnrolled,\n      enrollDate,\n      birthdate,\n      enrollmentStatus,\n      outcomes,\n      program,\n      totalStates,\n      toStandardHisDisplayFormat,\n      saveOutcome,\n      enrollProgram,\n      voidProgram,\n      voidOutcome,\n    };\n  },\n})\n","import { render } from \"./OutcomeStatus.vue?vue&type=template&id=a8fe7026&ts=true\"\nimport script from \"./OutcomeStatus.vue?vue&type=script&lang=ts\"\nexport * from \"./OutcomeStatus.vue?vue&type=script&lang=ts\"\n\nimport exportComponent from \"/home/daniel/local-repos/HIS-Core/node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","import { createTextVNode as _createTextVNode, resolveComponent as _resolveComponent, withCtx as _withCtx, createVNode as _createVNode, openBlock as _openBlock, createBlock as _createBlock, createCommentVNode as _createCommentVNode, Fragment as _Fragment, renderList as _renderList, toDisplayString as _toDisplayString, withScopeId as _withScopeId, pushScopeId as _pushScopeId, popScopeId as _popScopeId } from \"vue\"\nconst _withId = /*#__PURE__*/_withScopeId(\"data-v-d4a81944\")\n\n_pushScopeId(\"data-v-d4a81944\")\nconst _hoisted_1 = /*#__PURE__*/_createTextVNode(\"Patient Visit\")\nconst _hoisted_2 = /*#__PURE__*/_createTextVNode(\"Close\")\nconst _hoisted_3 = /*#__PURE__*/_createTextVNode(\"Reset\")\nconst _hoisted_4 = /*#__PURE__*/_createTextVNode(\"Save\")\n_popScopeId()\n\nexport const render = /*#__PURE__*/_withId(function render(_ctx, _cache, $props, $setup, $data, $options) {\n  const _component_ion_title = _resolveComponent(\"ion-title\")\n  const _component_ion_toolbar = _resolveComponent(\"ion-toolbar\")\n  const _component_ion_header = _resolveComponent(\"ion-header\")\n  const _component_DateInput = _resolveComponent(\"DateInput\")\n  const _component_ion_col = _resolveComponent(\"ion-col\")\n  const _component_NumberInput = _resolveComponent(\"NumberInput\")\n  const _component_SelectInput = _resolveComponent(\"SelectInput\")\n  const _component_yes_no_input = _resolveComponent(\"yes-no-input\")\n  const _component_ion_label = _resolveComponent(\"ion-label\")\n  const _component_ion_checkbox = _resolveComponent(\"ion-checkbox\")\n  const _component_ion_item = _resolveComponent(\"ion-item\")\n  const _component_multi_column_view = _resolveComponent(\"multi-column-view\")\n  const _component_ion_row = _resolveComponent(\"ion-row\")\n  const _component_ion_grid = _resolveComponent(\"ion-grid\")\n  const _component_ion_content = _resolveComponent(\"ion-content\")\n  const _component_ion_button = _resolveComponent(\"ion-button\")\n  const _component_ion_footer = _resolveComponent(\"ion-footer\")\n\n  return (_openBlock(), _createBlock(_Fragment, null, [\n    _createVNode(_component_ion_header, null, {\n      default: _withId(() => [\n        _createVNode(_component_ion_toolbar, null, {\n          default: _withId(() => [\n            _createVNode(_component_ion_title, null, {\n              default: _withId(() => [\n                _hoisted_1\n              ]),\n              _: 1\n            })\n          ]),\n          _: 1\n        })\n      ]),\n      _: 1\n    }),\n    _createVNode(_component_ion_content, { class: \" ion-padding\" }, {\n      default: _withId(() => [\n        _createVNode(_component_ion_grid, { style: {\"width\":\"100%\"} }, {\n          default: _withId(() => [\n            _createVNode(_component_ion_row, null, {\n              default: _withId(() => [\n                _createVNode(_component_ion_col, {\n                  size: \"6\",\n                  class: \"ion-margin-vertical\"\n                }, {\n                  default: _withId(() => [\n                    _createVNode(_component_DateInput, {\n                      modelValue: _ctx.form.visitDate,\n                      \"onUpdate:modelValue\": _cache[1] || (_cache[1] = $event => (_ctx.form.visitDate = $event)),\n                      form: _ctx.form,\n                      minDate: _ctx.birthdate,\n                      maxDate: _ctx.today\n                    }, null, 8, [\"modelValue\", \"form\", \"minDate\", \"maxDate\"])\n                  ]),\n                  _: 1\n                }),\n                _createVNode(_component_ion_col, {\n                  size: \"6\",\n                  class: \"ion-margin-vertical\"\n                }, {\n                  default: _withId(() => [\n                    _createVNode(_component_NumberInput, {\n                      modelValue: _ctx.form.weight,\n                      \"onUpdate:modelValue\": _cache[2] || (_cache[2] = $event => (_ctx.form.weight = $event)),\n                      form: _ctx.form,\n                      min: 1\n                    }, null, 8, [\"modelValue\", \"form\"])\n                  ]),\n                  _: 1\n                }),\n                (_ctx.showHeightField)\n                  ? (_openBlock(), _createBlock(_component_ion_col, {\n                      key: 0,\n                      size: \"6\",\n                      class: \"ion-margin-vertical\"\n                    }, {\n                      default: _withId(() => [\n                        _createVNode(_component_NumberInput, {\n                          modelValue: _ctx.form.height,\n                          \"onUpdate:modelValue\": _cache[3] || (_cache[3] = $event => (_ctx.form.height = $event)),\n                          form: _ctx.form,\n                          min: 1\n                        }, null, 8, [\"modelValue\", \"form\"])\n                      ]),\n                      _: 1\n                    }))\n                  : _createCommentVNode(\"\", true),\n                _createVNode(_component_ion_col, {\n                  class: \"ion-margin-vertical\",\n                  size: _ctx.showHeightField ? 6 : 12\n                }, {\n                  default: _withId(() => [\n                    _createVNode(_component_SelectInput, {\n                      modelValue: _ctx.form.tbStatus,\n                      \"onUpdate:modelValue\": _cache[4] || (_cache[4] = $event => (_ctx.form.tbStatus = $event)),\n                      options: _ctx.tbStatuses\n                    }, null, 8, [\"modelValue\", \"options\"])\n                  ]),\n                  _: 1\n                }, 8, [\"size\"]),\n                (_ctx.isFemale)\n                  ? (_openBlock(), _createBlock(_Fragment, { key: 1 }, [\n                      _createVNode(_component_ion_col, {\n                        size: \"6\",\n                        class: \"ion-margin-vertical ion-padding-vertical\"\n                      }, {\n                        default: _withId(() => [\n                          _createVNode(_component_yes_no_input, {\n                            modelValue: _ctx.form.isPregnant,\n                            \"onUpdate:modelValue\": _cache[5] || (_cache[5] = $event => (_ctx.form.isPregnant = $event)),\n                            inline: \"\"\n                          }, null, 8, [\"modelValue\"])\n                        ]),\n                        _: 1\n                      }),\n                      _createVNode(_component_ion_col, {\n                        size: \"6\",\n                        class: \"ion-margin-vertical ion-padding-vertical\"\n                      }, {\n                        default: _withId(() => [\n                          _createVNode(_component_yes_no_input, {\n                            modelValue: _ctx.form.isBreastfeeding,\n                            \"onUpdate:modelValue\": _cache[6] || (_cache[6] = $event => (_ctx.form.isBreastfeeding = $event)),\n                            inline: \"\"\n                          }, null, 8, [\"modelValue\"])\n                        ]),\n                        _: 1\n                      })\n                    ], 64 /* STABLE_FRAGMENT */))\n                  : _createCommentVNode(\"\", true),\n                _createVNode(_component_ion_col, {\n                  size: \"6\",\n                  class: \"ion-margin-vertical\"\n                }, {\n                  default: _withId(() => [\n                    _createVNode(_component_yes_no_input, {\n                      modelValue: _ctx.form.hasContraindications,\n                      \"onUpdate:modelValue\": _cache[7] || (_cache[7] = $event => (_ctx.form.hasContraindications = $event)),\n                      inline: \"\"\n                    }, null, 8, [\"modelValue\"]),\n                    (_ctx.hasContraindications)\n                      ? (_openBlock(), _createBlock(_component_multi_column_view, {\n                          key: 0,\n                          items: _ctx.contraIndications,\n                          numberOfColumns: 2\n                        }, {\n                          default: _withId(({ entries }) => [\n                            (_openBlock(true), _createBlock(_Fragment, null, _renderList(entries, (entry) => {\n                              return (_openBlock(), _createBlock(_component_ion_item, {\n                                lines: \"none\",\n                                key: entry.value\n                              }, {\n                                default: _withId(() => [\n                                  _createVNode(_component_ion_label, null, {\n                                    default: _withId(() => [\n                                      _createTextVNode(_toDisplayString(entry.label), 1 /* TEXT */)\n                                    ]),\n                                    _: 2\n                                  }, 1024),\n                                  _createVNode(_component_ion_checkbox, {\n                                    slot: \"start\",\n                                    modelValue: entry.isChecked,\n                                    \"onUpdate:modelValue\": $event => (entry.isChecked = $event)\n                                  }, null, 8, [\"modelValue\", \"onUpdate:modelValue\"])\n                                ]),\n                                _: 2\n                              }, 1024))\n                            }), 128 /* KEYED_FRAGMENT */))\n                          ]),\n                          _: 1\n                        }, 8, [\"items\"]))\n                      : _createCommentVNode(\"\", true)\n                  ]),\n                  _: 1\n                }),\n                _createVNode(_component_ion_col, {\n                  class: \"ion-padding-start\",\n                  size: \"6\"\n                }, {\n                  default: _withId(() => [\n                    _createVNode(_component_yes_no_input, {\n                      modelValue: _ctx.form.hasSideEffects,\n                      \"onUpdate:modelValue\": _cache[8] || (_cache[8] = $event => (_ctx.form.hasSideEffects = $event)),\n                      inline: \"\"\n                    }, null, 8, [\"modelValue\"]),\n                    (_ctx.hasSideEffects)\n                      ? (_openBlock(), _createBlock(_component_multi_column_view, {\n                          key: 0,\n                          items: _ctx.sideEffects,\n                          numberOfColumns: 2\n                        }, {\n                          default: _withId(({ entries }) => [\n                            (_openBlock(true), _createBlock(_Fragment, null, _renderList(entries, (entry) => {\n                              return (_openBlock(), _createBlock(_component_ion_item, {\n                                lines: \"none\",\n                                key: entry.value\n                              }, {\n                                default: _withId(() => [\n                                  _createVNode(_component_ion_label, null, {\n                                    default: _withId(() => [\n                                      _createTextVNode(_toDisplayString(entry.label), 1 /* TEXT */)\n                                    ]),\n                                    _: 2\n                                  }, 1024),\n                                  _createVNode(_component_ion_checkbox, {\n                                    slot: \"start\",\n                                    modelValue: entry.isChecked,\n                                    \"onUpdate:modelValue\": $event => (entry.isChecked = $event)\n                                  }, null, 8, [\"modelValue\", \"onUpdate:modelValue\"])\n                                ]),\n                                _: 2\n                              }, 1024))\n                            }), 128 /* KEYED_FRAGMENT */))\n                          ]),\n                          _: 1\n                        }, 8, [\"items\"]))\n                      : _createCommentVNode(\"\", true)\n                  ]),\n                  _: 1\n                }),\n                _createVNode(_component_ion_col, {\n                  size: \"6\",\n                  class: \"ion-margin-vertical\"\n                }, {\n                  default: _withId(() => [\n                    _createVNode(_component_SelectInput, {\n                      modelValue: _ctx.form.regimen,\n                      \"onUpdate:modelValue\": _cache[9] || (_cache[9] = $event => (_ctx.form.regimen = $event)),\n                      options: _ctx.regimens\n                    }, null, 8, [\"modelValue\", \"options\"])\n                  ]),\n                  _: 1\n                }),\n                _createVNode(_component_ion_col, {\n                  size: \"6\",\n                  class: \"ion-margin-vertical\"\n                }, {\n                  default: _withId(() => [\n                    _createVNode(_component_NumberInput, {\n                      modelValue: _ctx.form.totalArvsGiven,\n                      \"onUpdate:modelValue\": _cache[10] || (_cache[10] = $event => (_ctx.form.totalArvsGiven = $event)),\n                      form: _ctx.form,\n                      min: 1\n                    }, null, 8, [\"modelValue\", \"form\"])\n                  ]),\n                  _: 1\n                }),\n                _createVNode(_component_ion_col, {\n                  size: \"6\",\n                  class: \"ion-margin-vertical\"\n                }, {\n                  default: _withId(() => [\n                    _createVNode(_component_NumberInput, {\n                      modelValue: _ctx.form.totalCPTGiven,\n                      \"onUpdate:modelValue\": _cache[11] || (_cache[11] = $event => (_ctx.form.totalCPTGiven = $event)),\n                      form: _ctx.form,\n                      min: 1\n                    }, null, 8, [\"modelValue\", \"form\"])\n                  ]),\n                  _: 1\n                }),\n                _createVNode(_component_ion_col, {\n                  size: \"6\",\n                  class: \"ion-margin-vertical\"\n                }, {\n                  default: _withId(() => [\n                    _createVNode(_component_SelectInput, {\n                      modelValue: _ctx.form.tbMed,\n                      \"onUpdate:modelValue\": _cache[12] || (_cache[12] = $event => (_ctx.form.tbMed = $event)),\n                      options: _ctx.tbMeds\n                    }, null, 8, [\"modelValue\", \"options\"])\n                  ]),\n                  _: 1\n                }),\n                (_ctx.hasGiven6H || _ctx.hasGivenRFP)\n                  ? (_openBlock(), _createBlock(_component_ion_col, {\n                      key: 2,\n                      size: \"6\"\n                    }, {\n                      default: _withId(() => [\n                        _createVNode(_component_NumberInput, {\n                          modelValue: _ctx.form.totalIPTGiven,\n                          \"onUpdate:modelValue\": _cache[13] || (_cache[13] = $event => (_ctx.form.totalIPTGiven = $event)),\n                          form: _ctx.form,\n                          min: 1\n                        }, null, 8, [\"modelValue\", \"form\"])\n                      ]),\n                      _: 1\n                    }))\n                  : _createCommentVNode(\"\", true),\n                (_ctx.hasGivenRFP)\n                  ? (_openBlock(), _createBlock(_component_ion_col, {\n                      key: 3,\n                      size: \"6\"\n                    }, {\n                      default: _withId(() => [\n                        _createVNode(_component_NumberInput, {\n                          modelValue: _ctx.form.totalRFPGiven,\n                          \"onUpdate:modelValue\": _cache[14] || (_cache[14] = $event => (_ctx.form.totalRFPGiven = $event)),\n                          form: _ctx.form,\n                          min: 1\n                        }, null, 8, [\"modelValue\", \"form\"])\n                      ]),\n                      _: 1\n                    }))\n                  : _createCommentVNode(\"\", true),\n                (_ctx.hasGiven3HP)\n                  ? (_openBlock(), _createBlock(_component_ion_col, {\n                      key: 4,\n                      size: \"6\"\n                    }, {\n                      default: _withId(() => [\n                        _createVNode(_component_NumberInput, {\n                          modelValue: _ctx.form.total3HPGiven,\n                          \"onUpdate:modelValue\": _cache[15] || (_cache[15] = $event => (_ctx.form.total3HPGiven = $event)),\n                          form: _ctx.form,\n                          min: 1\n                        }, null, 8, [\"modelValue\", \"form\"])\n                      ]),\n                      _: 1\n                    }))\n                  : _createCommentVNode(\"\", true),\n                (_ctx.hasGiven3HP || _ctx.hasGivenRFP || _ctx.hasGiven6H)\n                  ? (_openBlock(), _createBlock(_component_ion_col, {\n                      key: 5,\n                      size: \"6\"\n                    }, {\n                      default: _withId(() => [\n                        _createVNode(_component_NumberInput, {\n                          modelValue: _ctx.form.totalPyridoxineGiven,\n                          \"onUpdate:modelValue\": _cache[16] || (_cache[16] = $event => (_ctx.form.totalPyridoxineGiven = $event)),\n                          form: _ctx.form,\n                          min: 1\n                        }, null, 8, [\"modelValue\", \"form\"])\n                      ]),\n                      _: 1\n                    }))\n                  : _createCommentVNode(\"\", true),\n                _createVNode(_component_ion_col, {\n                  size: \"6\",\n                  class: \"ion-margin-vertical\"\n                }, {\n                  default: _withId(() => [\n                    _createVNode(_component_yes_no_input, {\n                      modelValue: _ctx.form.patientPresent,\n                      \"onUpdate:modelValue\": _cache[17] || (_cache[17] = $event => (_ctx.form.patientPresent = $event)),\n                      inline: \"\",\n                      disabled: _ctx.form.patientPresent.disabled\n                    }, null, 8, [\"modelValue\", \"disabled\"])\n                  ]),\n                  _: 1\n                }),\n                _createVNode(_component_ion_col, {\n                  size: \"6\",\n                  class: \"ion-margin-vertical\"\n                }, {\n                  default: _withId(() => [\n                    _createVNode(_component_yes_no_input, {\n                      modelValue: _ctx.form.guardianPresent,\n                      \"onUpdate:modelValue\": _cache[18] || (_cache[18] = $event => (_ctx.form.guardianPresent = $event)),\n                      inline: \"\"\n                    }, null, 8, [\"modelValue\"])\n                  ]),\n                  _: 1\n                }),\n                (_ctx.prevDrugs.length > 0)\n                  ? (_openBlock(), _createBlock(_component_ion_col, {\n                      key: 6,\n                      size: \"6\",\n                      class: \"ion-margin-vertical\"\n                    }, {\n                      default: _withId(() => [\n                        _createVNode(_component_NumberInput, {\n                          modelValue: _ctx.form.pillCount,\n                          \"onUpdate:modelValue\": _cache[19] || (_cache[19] = $event => (_ctx.form.pillCount = $event)),\n                          form: _ctx.form,\n                          min: 1\n                        }, null, 8, [\"modelValue\", \"form\"])\n                      ]),\n                      _: 1\n                    }))\n                  : _createCommentVNode(\"\", true),\n                _createVNode(_component_ion_col, {\n                  size: _ctx.prevDrugs.length > 0 ? 6 : 12,\n                  class: \"ion-margin-vertical\"\n                }, {\n                  default: _withId(() => [\n                    _createVNode(_component_DateInput, {\n                      modelValue: _ctx.form.nextAppointmentDate,\n                      \"onUpdate:modelValue\": _cache[20] || (_cache[20] = $event => (_ctx.form.nextAppointmentDate = $event)),\n                      form: _ctx.form,\n                      minDate: _ctx.form.visitDate.value,\n                      maxDate: _ctx.drugRunOutDate.toString()\n                    }, null, 8, [\"modelValue\", \"form\", \"minDate\", \"maxDate\"])\n                  ]),\n                  _: 1\n                }, 8, [\"size\"])\n              ]),\n              _: 1\n            })\n          ]),\n          _: 1\n        })\n      ]),\n      _: 1\n    }),\n    _createVNode(_component_ion_footer, null, {\n      default: _withId(() => [\n        _createVNode(_component_ion_toolbar, null, {\n          default: _withId(() => [\n            _createVNode(_component_ion_button, {\n              color: \"primary\",\n              onClick: _cache[21] || (_cache[21] = $event => (_ctx.modal.hide())),\n              slot: \"end\"\n            }, {\n              default: _withId(() => [\n                _hoisted_2\n              ]),\n              _: 1\n            }),\n            _createVNode(_component_ion_button, {\n              color: \"warning\",\n              onClick: _ctx.onClear,\n              slot: \"end\"\n            }, {\n              default: _withId(() => [\n                _hoisted_3\n              ]),\n              _: 1\n            }, 8, [\"onClick\"]),\n            _createVNode(_component_ion_button, {\n              color: \"success\",\n              onClick: _ctx.onSubmit,\n              slot: \"end\"\n            }, {\n              default: _withId(() => [\n                _hoisted_4\n              ]),\n              _: 1\n            }, 8, [\"onClick\"])\n          ]),\n          _: 1\n        })\n      ]),\n      _: 1\n    })\n  ], 64 /* STABLE_FRAGMENT */))\n})","import { Patient } from '@/interfaces/patient';\nimport { ObservationService } from './observation_service';\nimport { Service } from \"@/services/service\"\nimport HisDate from \"@/utils/Date\"\nimport { Observation } from \"@/interfaces/observation\"\nimport { Patientservice } from '@/services/patient_service';\nimport { DrugOrderService } from './drug_order_service';\nimport { isEmpty } from 'lodash';\n\nexport class PatientObservationService extends Patientservice {\n  constructor(patient: Patient) {\n    super(patient)\n  }\n\n  async isPregnant() {\n    const obs = await ObservationService.getFirstObs(this.getID(), 'Is patient pregnant')\n    return obs && (obs.value_coded.match(/Yes/i) ? true : false)\n      && ObservationService.obsInValidPeriod(obs)\n  }\n\n  async hasPregnancyObsToday() {\n    const date = await ObservationService.getFirstObsDatetime(this.getID(), 'Is patient pregnant')\n    return date && HisDate.toStandardHisFormat(date) === Service.getSessionDate() && this.isFemale()\n  }\n\n  async hasPregnancyAtARTInitiation() {\n    const obs = await ObservationService.getLastValueCoded(this.getID(), \"Is patient pregnant\")\n    return obs && await ObservationService.getConceptName(obs)\n  }\n\n  async breastFeedingAtARTInitiation() {\n    const obs = await ObservationService.getLastValueCoded(this.getID(), \"Is patient breast feeding\")\n    return obs && await ObservationService.getConceptName(obs)\n  }\n\n  async getInitialWeight() {\n    return ObservationService.getLastValueNumber(this.getID(), \"weight\")\n  }\n\n  async getRecentWeight() {\n    return ObservationService.getFirstValueNumber(this.getID(), \"weight\") || -1\n  }\n\n  async getInitialHeight() {\n    return ObservationService.getLastValueNumber(this.getID(), \"Height\")\n  }\n\n  async getInitialTBStatus() {\n    const obs = await ObservationService.getLastValueCoded(this.getID(), \"TB Status at Initiation\")\n    if (obs) return ObservationService.getConceptName(obs)\n  }\n\n  async getRecentHeight() {\n    return ObservationService.getFirstValueNumber(this.getID(), \"Height\") || -1\n  }\n\n  async getWeightHistory() {\n    try {\n      const weights = await ObservationService.getAll(this.getID(), 'weight')\n      return weights.map((obs: Observation) => ({\n        weight: obs.value_numeric, date: obs.obs_datetime\n      }))\n    } catch (e) {\n      console.warn(e)\n      return []\n    }\n  }\n  async getCompleteTBTherapyHistory() {\n    const data = await ObservationService.getAll(this.getID(), 'TB treatment history')\n    return data.filter((data: any) => {\n      return data.value_text.match(/Complete/i);\n    });\n  }\n\n  async getInitialBMI() {\n    return ObservationService.getLastValueNumber(this.getID(), \"BMI\")\n  }\n\n  async everReceivedART() {\n    return ObservationService.getFirstValueCoded(this.getID(), \"Ever received ART\")\n  }\n\n  async agreesToFollowUp() {\n    return ObservationService.getFirstValueCoded(this.getID(), \"Agrees to followup\")\n  }\n\n  async getHIVTestDate() {\n    const obs = await ObservationService.getFirstObs(this.getID(), \"Confirmatory HIV test date\")\n    if (obs && obs.value_datetime) return obs.value_datetime\n    if (obs && obs.value_text) return obs.value_text\n    return null\n  }\n\n  async getARTStartDate() {\n    const obs = await ObservationService.getFirstObs(this.getID(), \"Date ART started\")\n    if (obs && obs.value_datetime) return obs.value_datetime\n    if (obs && obs.value_text) return obs.value_text\n    const orders = await DrugOrderService.getAllDrugOrders(this.getID(), Number.MAX_SAFE_INTEGER);\n    if(!isEmpty(orders)){\n      return orders[0].order['start_date']\n    }\n    return null\n  }\n\n  async getHIVTestLocation() {\n    return ObservationService.getFirstValueText(\n      this.getID(),\n      \"Confirmatory HIV test location\"\n    )\n  }\n\n  async getReasonForStartingART() {\n    return ObservationService.getFirstValueCoded(this.getID(), \"Reason for ART eligibility\")\n  }\n\n  async getStagingCondition() {\n    return ObservationService.getFirstValueCoded(this.getID(), \"Who stages criteria present\")\n  }\n    \n  getWhoStage() {\n    return ObservationService.getFirstValueCoded(this.getID(), \"Who stage\")\n  }\n}","/**\n * A function that remove duplicates from an array\n * \n * @param arr list of items with possible duplicates\n * @param iteratee a key or list of keys to be used to remove duplicates\n * @returns list of unique items\n */\nexport function uniqueBy(arr: any[], iteratee: string | string[]) {\n  return [...new Map(arr.filter(Boolean).map(item => {\n    const uniqueKey = Array.isArray(iteratee) \n      ? iteratee.map(k => item[k]).join('_')\n      : item[iteratee]\n    return [uniqueKey, item]\n  })).values()]\n}","\nimport { computed, defineComponent, onMounted, PropType, reactive, ref, watch } from \"vue\";\nimport { \n  IonCol, \n  IonGrid, \n  IonRow,  \n  IonContent, \n  IonFooter, \n  IonHeader, \n  IonTitle, \n  IonToolbar, \n  IonButton, \n  IonLabel,\n  IonCheckbox,\nIonItem,\n} from \"@ionic/vue\";\nimport { alertConfirmation, toastSuccess } from \"@/utils/Alerts\";\nimport isEmpty from \"lodash/isEmpty\";\nimport { Option } from \"@/components/Forms/FieldInterface\";\nimport YesNoInput from \"../inputs/YesNoInput.vue\";\nimport SelectInput from \"../inputs/SelectInput.vue\";\nimport DateInput from \"../inputs/DateInput.vue\";\nimport NumberInput from \"../inputs/NumberInput.vue\";\nimport { ConceptService } from \"@/services/concept_service\";\nimport MultiColumnView from \"@/components/containers/MultiColumnView.vue\";\nimport { PatientObservationService } from \"@/services/patient_observation_service\";\nimport { RegimenService } from \"@/services/regimen_service\";\nimport { DrugOrderService } from \"@/services/drug_order_service\";\nimport { VitalsService } from \"@/apps/ART/services/vitals_service\";\nimport StandardValidations from \"@/components/Forms/validations/StandardValidations\";\nimport { ConsultationService } from \"@/apps/ART/services/consultation_service\";\nimport { ReceptionService } from \"@/apps/ART/services/reception_service\";\nimport { AdherenceService } from \"@/apps/ART/services/adherence_service\";\nimport { AppointmentService } from \"@/apps/ART/services/appointment_service\";\nimport { PrescriptionService } from \"@/apps/ART/services/prescription_service\";\nimport dayjs, { ConfigType } from \"dayjs\";\nimport { ObsValue } from \"@/services/observation_service\";\nimport { BMIService } from \"@/services/bmi_service\";\nimport { DispensationService } from \"@/apps/ART/services/dispensation_service\";\nimport { DTForm } from \"../../interfaces/dt_form_field\";\nimport { optionsToGroupObs, resolveObs, submitForm } from \"../../utils/form\";\nimport { toOptions } from \"../../utils/DTFormElements\";\nimport { modal } from \"@/utils/modal\";\nimport { EmcEvents } from \"../../interfaces/emc_event\";\nimport EventBus from \"@/utils/EventBus\";\nimport { uniqueBy } from \"@/utils/Arrays\";\nimport { DISPLAY_DATE_FORMAT, STANDARD_DATE_FORMAT } from \"@/utils/Date\";\n\nexport default defineComponent({\n  components: {\n    IonContent,\n    IonFooter,\n    IonHeader,\n    IonTitle,\n    IonToolbar,\n    IonButton,\n    IonItem,\n    IonLabel,\n    IonGrid,\n    IonRow,\n    IonCol,\n    IonCheckbox,\n    SelectInput,\n    NumberInput,\n    DateInput,\n    YesNoInput,\n    MultiColumnView\n  },\n  props: {\n    patient: {\n      type: Object as PropType<PatientObservationService>,\n      required: true\n    },\n  },\n  setup(props) {\n    const patientId = computed(() => props.patient.getID())\n    const vitals = new VitalsService(patientId.value, -1)\n    const consultations = new ConsultationService(patientId.value, -1)\n    const prescription = new PrescriptionService(patientId.value, -1)\n    const dispensation = new DispensationService(patientId.value, -1)\n    const reception = new ReceptionService(patientId.value, -1)\n    const adherence = new AdherenceService(patientId.value, -1)\n    const appointment = new AppointmentService(patientId.value, -1)\n    const prevHeight = ref<number>()\n    const regimens = ref<Option[]>([])\n    const contraIndications = ref<Option[]>([]);\n    const sideEffects = ref<Option[]>([]);\n    const prevDrugs = ref<any[]>([]);\n    const showHeightField = computed(() => !(prevHeight.value && props.patient.getAge() > 18))\n    const isFemale = computed(() => props.patient.isFemale())\n    const drugRunOutDate = ref<ConfigType>('');\n    const today = dayjs().format(STANDARD_DATE_FORMAT);\n    const birthdate = dayjs(props.patient.getBirthdate()).format(STANDARD_DATE_FORMAT);\n\n    const form = reactive<DTForm>({\n      visitDate: {\n        value: dayjs().format('YYYY-MM-DD') as string | undefined,\n        label: \"Visit Date\",\n        required: true,\n        validation: async (date: Option) => {\n          if(dayjs(date.value).isAfter(today)) {\n            return [\"Visit date cannot be after today's date\"]\n          }\n          if(dayjs(date.value).isBefore(birthdate)) {\n            return [\"Visit date cannot be before patient's birth date\"]\n          }\n          return null\n        }\n      },\n      weight: {\n        value: undefined as number | undefined,\n        label: \"Weight\",\n        required: true,\n        computedValue: (weight: number) => ({\n          tag: 'vitals',\n          obs: vitals.buildValueNumber('Weight', weight)\n        }),\n        validation: (weight: Option) => vitals.validator({...weight, label: 'Weight'})\n      },\n      height: {\n        value: undefined as number | undefined,\n        label: \"Height\",\n        computedValue: (height: number) => ({\n          tag: 'vitals',\n          obs: vitals.buildValueNumber('Height', height)\n        }),\n        validation: (height: Option) => showHeightField.value && vitals.validator({...height, label: 'Height'})\n      },\n      isPregnant: {\n        value: undefined as \"Yes\" | \"No\"  | undefined,\n        label: 'Is the patient pregnant?',\n        computedValue: (isPregnant: \"Yes\" | \"No\") => ({\n          tag: 'consultation',\n          obs: consultations.buildValueCoded('Is patient pregnant', isPregnant)\n        }),\n        validation: async (state: Option) => isFemale.value && StandardValidations.required(state)\n      },\n      isBreastfeeding: {\n        value: undefined as \"Yes\" | \"No\"  | undefined,\n        label: 'Is the patient breastfeeding?',\n        computedValue: (isBreastfeeding: \"Yes\" | \"No\") => ({\n          tag: 'consultation',\n          obs: consultations.buildValueCoded('Is patient breast feeding', isBreastfeeding)\n        }),\n        validation: async (state: Option) => isFemale.value && StandardValidations.required(state)\n      },\n      nextAppointmentDate: {\n        value: undefined as string | undefined,\n        label: \"Next Appointment Date\",\n        required: true,\n        computedValue: (nextAppointmentDate: string) => ({\n          tag: 'appointment',\n          obs: appointment.buildValueDate('Appointment date', nextAppointmentDate)\n        }),\n        validation: async (date, form) => {\n          if(dayjs(date.value).isBefore(dayjs(form.visitDate.value))) {\n            return [\"Appointment date cannot be before visit date\"]\n          }\n          if(dayjs(date.value).isAfter(dayjs(drugRunOutDate.value))) {\n            return [\"Appointment date cannot be after drug run out date\"]\n          }\n          return null\n        }\n      },\n      patientPresent: {\n        value: undefined as \"Yes\" | \"No\"  | undefined,\n        label: 'Is the patient present?',\n        required: true,\n        computedValue: (patientPresent: \"Yes\" | \"No\") => ({\n          tag: 'reception',\n          obs: reception.buildValueCoded('Patient present', patientPresent)\n        }),\n      },\n      guardianPresent: {\n        value: undefined as \"Yes\" | \"No\"  | undefined,\n        label: 'Is the guardian present?',\n        required: true,\n        computedValue: (guardianPresent: \"Yes\" | \"No\") => ({\n          tag: 'reception',\n          obs: reception.buildValueCoded('Guardian present', guardianPresent)\n        }),\n      },\n      pillCount: {\n        value: undefined as number  | undefined,\n        label: \"Pill Count\",\n        required: prevDrugs.value.length > 0,\n        validation: async (pills: Option) => prevDrugs.value.length > 0 && StandardValidations.isNumber(pills)\n      },\n      regimen: {\n        value: undefined as string | undefined,\n        label: \"Regimen\",\n        placeholder: \"Select a regimen\",\n        computedValue: () => ({\n          tag: 'consultation',\n          obs: prescription.buildValueCoded(\"Medication orders\", \"Antiretroviral drugs\")\n        }),\n      },\n      totalCPTGiven: {\n        value: undefined as number  | undefined,\n        label: \"Total CPT Given\",\n        computedValue: () => ({\n          tag: 'consultation',\n          obs: prescription.buildValueCoded(\"Medication orders\", \"CPT\")\n        }),\n      },\n      totalIPTGiven: {\n        value: undefined as number  | undefined,\n        label: \"Total IPT Given\",\n        computedValue: () => ({\n          tag: 'consultation',\n          obs: prescription.buildValueCoded(\"Medication orders\", \"INH\")\n        }),\n        validation: async (drugs: Option, form: any) => {\n          return (form.tbMed.value?.label === '6H' || form.tbMed.value?.label === '3HP (RFP + INH)') && \n            StandardValidations.isNumber(drugs)\n        }\n      },\n      totalRFPGiven: {\n        value: undefined as number  | undefined,\n        label: \"Total RFP Given\",\n        computedValue: () => ({\n          tag: 'consultation',\n          obs: prescription.buildValueCoded(\"Medication orders\", \"3HP (RFP + INH)\")\n        }),\n        validation: async (drugs: Option, form: any) => {\n          return form.tbMed.value?.label === '3HP (RFP + INH)' && \n            StandardValidations.isNumber(drugs)\n        }\n      },\n      total3HPGiven: {\n        value: undefined as number  | undefined,\n        label: \"Total 3HP Given\",\n        computedValue: () => ({\n          tag: 'consultation',\n          obs: prescription.buildValueCoded(\"Medication orders\", \"INH 300 / RFP 300 (3HP)\")\n        }),\n        validation: async (drugs: Option, form: any) => {\n          return form.tbMed.value?.label === '3HP (INH 300 / RFP 300)' && \n            StandardValidations.isNumber(drugs)\n        }\n      },\n      totalArvsGiven: {\n        value: undefined as number  | undefined,\n        label: \"Total ARVs Given\",\n        validation: async (drugs: Option, form: any) => !isEmpty(form.regimen.value) && StandardValidations.isNumber(drugs)\n      },\n      totalPyridoxineGiven: {\n        value: undefined as number  | undefined,\n        label: \"Total Pyridoxine Given\",\n        validation: async (amount: Option, form: any) => form.tbMed.value?.label && StandardValidations.isNumber(amount)\n      },\n      tbMed: {\n        value: undefined as Option | undefined,\n        label: \"TB Medication\",\n        placeholder: \"Select a TB medication\",\n      },\n      hasContraindications: {\n        value: \"No\",\n        label: \"Has Side Effects / Contraindications ?\",\n        validation: async (state: Option, form: any) => StandardValidations.validateSeries([\n          ()  => StandardValidations.required(state),\n          () => {\n            if(state.value === \"No\" || sideEffects.value.some(x => x.isChecked)) return null\n            return [\"Please select at least one side effect\"]\n          }\n        ])\n      },\n      hasSideEffects: {\n        value: \"No\",\n        label: \"Has Other Side Effects ?\",\n        validation: async (state: Option, form: any) => StandardValidations.validateSeries([\n          ()  => StandardValidations.required(state),\n          () => {\n            if(state.value === \"No\" || sideEffects.value.some(x => x.isChecked)) return null\n            return [\"Please select at least one side effect\"]\n          }\n        ])\n      },\n      tbStatus: {\n        value: undefined as Option | undefined,\n        label: \"TB Status\",\n        computedValue: (status: Option) => ({\n          tag: 'consultation',\n          obs: consultations.buildValueCoded('TB Status', status.value)\n        }),\n        validation: async (state) => StandardValidations.required(state)\n      },\n    })\n\n    watch(form.patientPresent, isPresent => {\n      if(isPresent.value === \"No\") {\n        form.guardianPresent.value = \"Yes\"\n      }\n    })\n\n    watch(form.guardianPresent, isPresent => {\n      if(isPresent.value === \"No\") {\n        form.patientPresent.value = \"Yes\"\n      }\n    })\n\n    watch([form.weight, form.tbStatus], async () => {\n      if(form.weight.value) {\n        const onTB = !isEmpty(form.tbStatus.value) && !form.tbStatus.value.label.match(/TB Not Suspected/i)\n        const regs = await RegimenService.getRegimensByWeight(form.weight.value, onTB)\n        if(!isEmpty(regs)) {\n          regimens.value = Object.keys(regs).map(key => ({\n            label: key, \n            value: key, \n            other: regs[key] \n          }))\n        }\n\n        form.patientPresent.value = \"Yes\"\n        form.patientPresent.disabled = true\n      }\n    })\n\n    watch([() => form.totalArvsGiven.value, () => form.pillCount.value], () => {\n      const arvs = parseInt(form.totalArvsGiven.value) || 0\n      const remainingDrugs = parseInt(form.pillCount.value) || 0\n      drugRunOutDate.value = dayjs(form.visitDate.value).add(arvs + remainingDrugs, 'days')\n      form.nextAppointmentDate.label = `Next Appointment Date (Drug run out date: ${drugRunOutDate.value.format(DISPLAY_DATE_FORMAT)})`\n      form.nextAppointmentDate.value = dayjs(drugRunOutDate.value).format(STANDARD_DATE_FORMAT)\n    })\n\n    const hasGiven3HP = computed(() => form.tbMed.value?.label === '3HP (INH 300 / RFP 300)')\n    const hasGivenRFP = computed(() => form.tbMed.value?.label === '3HP (RFP + INH)')\n    const hasGiven6H = computed(() => form.tbMed.value?.label === '6H')\n    const hasContraindications = computed(() => form.hasContraindications.value === 'Yes')\n    const hasSideEffects = computed(() => form.hasSideEffects.value === 'Yes')\n\n    const tbStatuses = toOptions([\n      'Confirmed TB Not on treatment', \n      'Confirmed TB on treatment', \n      'TB Not Suspected',\n      'TB Suspected'\n    ]);\n\n    const tbMeds = toOptions(['6H', '3HP (RFP + INH)', '3HP (INH 300 / RFP 300)'])\n    \n    const setPatientPresent = (state: \"Yes\" | \"No\") => {\n      form.patientPresent.value = state \n      if(state === 'No') {\n        form.guardianPresent.value = \"Yes\"\n      }\n    }\n\n    const setGuardianPresent = (state: \"Yes\" | \"No\") => {\n      form.guardianPresent.value = state\n      if(state === 'No') {\n        form.patientPresent.value = \"Yes\"\n      }\n    }\n\n    const buildBmiObs = async (formData: any): Promise<ObsValue> => {\n      const height = formData.height || prevHeight.value\n      const bmi = BMIService.calculateBMI(formData.weight, height)\n      return vitals.buildValueNumber('BMI', bmi)\n    }\n\n    const buildFpmObs = async () => {\n      const obs: ObsValue[] = [\n        await consultations.buildValueCoded('Patient using family planning', 'No')\n      ]\n      const methods = consultations.getFamilyPlanningMethods()\n      methods.forEach(async (method) => {\n        obs.push(await consultations.buildValueCoded(method, \"No\"))\n      })\n      return obs\n    }\n\n    const getTbSymptomsObs = async () => {\n      return Promise.all(ConceptService.getConceptsByCategory(\"tb_symptom\", true).map(async (concept) => {\n        return consultations.buildGroupValueCoded(concept.name, concept.name, \"No\")\n      }))\n    }\n\n    const toDrugOrder = (drug: any, quantity: number, duration: number, startDate: string) => {\n      return {\n        \"drug_inventory_id\": drug.drug_id,\n        \"equivalent_daily_dose\": prescription.calculateEquivalentDosage(drug.am, drug.pm),\n        \"dose\": prescription.calculateDosage(drug.am, drug.pm),\n        'start_date': startDate,\n        \"auto_expire_date\": dayjs(startDate).add(duration, 'days').format('YYYY-MM-DD'), \n        \"units\": drug.units,\n        \"qty\": quantity,\n        \"frequency\": drug.frequency,\n        \"instructions\": prescription.getInstructions(drug.drug_name, drug.am, drug.pm, drug.units),\n      }\n    }\n\n    const onSubmit = async () => {\n      await PatientObservationService.setSessionDate(form.visitDate.value)\n      vitals.setDate(form.visitDate.value)\n      consultations.setDate(form.visitDate.value)\n      prescription.setDate(form.visitDate.value)\n      reception.setDate(form.visitDate.value)\n      adherence.setDate(form.visitDate.value)\n      appointment.setDate(form.visitDate.value)\n      dispensation.setDate(form.visitDate.value)\n\n      await submitForm (form, async (formData, computedFormData) => {\n        await vitals.createEncounter()\n        const vitalsObs = await resolveObs(computedFormData, 'vitals')\n        const bmiObs = await buildBmiObs(formData)\n        await vitals.saveObservationList([...vitalsObs, bmiObs])\n\n        await consultations.createEncounter()\n        const consultationObs = await resolveObs(computedFormData, 'consultation')\n        if(isFemale.value) consultationObs.concat(await buildFpmObs())\n        if(hasContraindications.value) \n          consultationObs.concat(await optionsToGroupObs(\"Malawi ART side effects\", contraIndications.value))\n        if(hasSideEffects.value) \n          consultationObs.concat(await optionsToGroupObs(\"Other side effect\", sideEffects.value))\n        consultationObs.concat(await getTbSymptomsObs())\n        await consultations.saveObservationList(consultationObs)\n\n        await prescription.createEncounter()\n        const drugOrders: any[] = []\n        let duration = 0\n        if(!isEmpty(formData.regimen) && formData.totalArvsGiven) {\n          const arvDrugs: any[] = formData.regimen.other\n          duration = Math.min(...arvDrugs.map(drug =>(formData.totalArvsGiven / (drug.am + drug.pm)) + 2))\n          arvDrugs.forEach((drug: any) => drugOrders.push(\n            toDrugOrder(drug, formData.totalArvsGiven, duration, formData.visitDate)\n          ))\n        }\n\n        if(formData.totalCPTGiven) {\n          uniqueBy((await RegimenService.getRegimenExtras('Cotrimoxazole', formData.weight)), 'concept_name')\n          .filter((drug: any) => drug.frequency === 'Daily (QOD)')\n          .forEach((drug: any) => drugOrders.push(toDrugOrder(drug, formData.totalCPTGiven, duration, formData.visitDate)))\n        }\n\n        if(formData.tbMed?.value) {\n          const iptRegimens = uniqueBy((await RegimenService.getRegimenExtras('INH', formData.weight)), ['concept_name', 'frequency'])\n          const pyridoxine = iptRegimens.find((d: any) => d['concept_name'] === 'Pyridoxine')\n\n          if(pyridoxine && formData.totalPyridoxineGiven) {\n            drugOrders.push(toDrugOrder(pyridoxine, formData.totalPyridoxineGiven, duration, formData.visitDate))\n          }\n\n          if(formData.totalIPTGiven) {\n            const INH = iptRegimens.find((drug: any) =>  drug['concept_name'] === \"Isoniazid\" && (\n              (hasGiven6H.value && drug.frequency === 'Daily (QOD)') || \n              (hasGivenRFP.value && drug.frequency === 'Weekly (QW)')\n            ))\n            drugOrders.push(toDrugOrder(INH, formData.totalIPTGiven, duration, formData.visitDate))\n          }\n\n          if(formData.totalRFPGiven && hasGivenRFP.value) {\n            const rfpRegimens = await RegimenService.getRegimenExtras('Rifapentine', formData.weight)\n            if(rfpRegimens.length) drugOrders.push(toDrugOrder(rfpRegimens[0], formData.totalRFPGiven, duration, formData.visitDate))\n          }\n\n          if(formData.total3HPGiven && hasGiven3HP.value) {\n            const threeHPRegimens = await RegimenService.getRegimenExtras('INH / RFP', formData.weight)\n            drugOrders.push(toDrugOrder(threeHPRegimens[0], formData.total3HPGiven, duration, formData.visitDate))\n          }\n        }\n\n        const orders: any[] = await prescription.createDrugOrder(drugOrders)\n        const dispensations = orders.map(order => {\n          const drug = drugOrders.find(drug => drug.drug_inventory_id === order.drug_inventory_id)\n          return dispensation.buildDispensations(order.order_id, drug.qty, 1)\n        })\n        await dispensation.saveDispensations(dispensations.flat(1))\n\n        await reception.createEncounter()\n        const receptionObs = await resolveObs(computedFormData, 'reception')\n        await reception.saveObservationList(receptionObs)\n\n        if(prevDrugs.value.length > 0) {\n          await adherence.createEncounter()\n          const adherenceObs = await Promise.all(prevDrugs.value.map(async (drug: any) => {\n            const expected = adherence.calculateExpected(drug.quantity, drug.equivalent_daily_dose, drug.order.start_date, drug.frequency)\n            const adh = adherence.calculateAdherence(drug.quantity, formData.pillCount, expected)\n            return [\n              await adherence.buildAdherenceObs(drug.order_id, drug.drug_inventory_id, adh),\n              await adherence.buildPillCountObs(drug.order_id, formData.pillCount)\n            ]\n          }))\n          await adherence.saveObservationList(adherenceObs.flat(1))\n        }\n\n        await appointment.createEncounter()\n        const appointmentObs = await resolveObs(computedFormData, 'appointment')\n        await appointment.saveObservationList(appointmentObs)\n        await toastSuccess('Patient visit saved successfully')\n\n        await PatientObservationService.resetSessionDate()\n\n        await modal.hide()\n        EventBus.emit(EmcEvents.RELOAD_PATIENT_VISIT_DATA);\n        EventBus.emit(EmcEvents.RELOAD_STAGING_INFORMATION);\n      })\n    }\n\n    const onClear = async () => {\n      if((await alertConfirmation('Are you sure you want to clear all fields?'))) {\n        for(const key in form) {\n          form[key].value = ''\n          form[key].error = ''\n          form[key].disabled = false;\n        }\n        EventBus.emit(EmcEvents.ON_CLEAR);\n      }\n    }\n\n    onMounted (async () => {\n      prevHeight.value = await props.patient.getRecentHeight()\n      const recentWeight = await props.patient.getRecentWeight()\n      if (recentWeight) {\n        const regs = await RegimenService.getRegimensByWeight(recentWeight)\n        if(!isEmpty(regs)) {\n          regimens.value = Object.keys(regs).map(key => ({ \n            label: key, \n            value: key, \n            other: regs[key] \n          }))\n        }\n      }\n      prevDrugs.value = await DrugOrderService.getLastDrugsReceived(props.patient.getID())\n      form.pillCount.required = prevDrugs.value.length > 0\n      contraIndications.value = ConceptService\n        .getConceptsByCategory(\"contraindication\", true)\n        .map(concept => ({\n          value: concept.concept_id,\n          label: concept.name,\n          other: concept\n        }));\n      sideEffects.value = ConceptService\n        .getConceptsByCategory(\"side_effect\", true)\n        .map(concept => ({\n          value: concept.concept_id,\n          label: concept.name,\n          other: concept\n        }));\n    });\n\n    return {\n      today,\n      form,\n      regimens,\n      contraIndications,\n      sideEffects,\n      tbStatuses,\n      tbMeds,\n      hasGiven3HP,\n      hasGivenRFP,\n      hasGiven6H,\n      showHeightField,\n      isFemale,\n      modal,\n      hasContraindications,\n      hasSideEffects,\n      prevDrugs,\n      drugRunOutDate,\n      birthdate,\n      onSubmit,\n      setPatientPresent,\n      setGuardianPresent,\n      onClear,\n    };\n  },\n})\n","import { render } from \"./PatientVisit.vue?vue&type=template&id=d4a81944&scoped=true&ts=true\"\nimport script from \"./PatientVisit.vue?vue&type=script&lang=ts\"\nexport * from \"./PatientVisit.vue?vue&type=script&lang=ts\"\n\nimport \"./PatientVisit.vue?vue&type=style&index=0&id=d4a81944&scoped=true&lang=css\"\n\nimport exportComponent from \"/home/daniel/local-repos/HIS-Core/node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-d4a81944\"]])\n\nexport default __exports__","\nimport DrillTableModalVue from '@/components/DataViews/DrillTableModal.vue';\nimport table, { ColumnInterface, RowInterface } from '@/components/DataViews/tables/ReportDataTable';\nimport ReportTable from \"@/components/DataViews/tables/ReportDataTable.vue\"\nimport { EncounterService } from '@/services/encounter_service';\nimport { ObservationService } from '@/services/observation_service';\nimport { Patientservice } from '@/services/patient_service';\nimport { ProgramService } from '@/services/program_service';\nimport popVoidReason from '@/utils/ActionSheetHelpers/VoidReason';\nimport HisDate from \"@/utils/Date\";\nimport { IonButton, IonCard, IonCardContent, IonCardHeader, IonCardTitle, modalController } from '@ionic/vue';\nimport dayjs from 'dayjs';\nimport { computed, defineComponent, onMounted, PropType, reactive, ref } from 'vue';\nimport ViralLoadResult from '@/apps/EMC/Components/modals/ViralLoadResult.vue';\nimport OutcomeStatus from '@/apps/EMC/Components/modals/OutcomeStatus.vue';\nimport PatientVisit from '@/apps/EMC/Components/modals/PatientVisit.vue';\nimport { PatientObservationService } from '@/services/patient_observation_service';\nimport EventBus from '@/utils/EventBus';\nimport { EmcEvents } from '../../interfaces/emc_event';\nimport { modal } from '@/utils/modal';\nimport { ConceptService } from '@/services/concept_service';\n\ninterface ActionButtonInterface {\n  label: string;\n  icon?: string;\n  action: () => any;\n  color?: string;\n}\n\nexport default defineComponent({\n  props: {\n    patient: {\n      type: Object as PropType<PatientObservationService>,\n      required: true\n    },\n    startDate:{\n      type: String,\n      required: true\n    },\n  },\n  components: {\n    ReportTable,\n    IonCard,\n    IonCardHeader,\n    IonCardTitle,\n    IonCardContent,\n    IonButton,\n  },\n  setup(props) {\n    const rows = ref<RowInterface[][]>([])\n    const patientId = computed(() => props.patient.getID());\n    const tableConfig = reactive({\n      showIndex: false,\n      tableCssTheme: \"emc-datatable-theme\"\n    })\n\n    const actionButtons = ref<ActionButtonInterface[]>([\n      {\n        label: \"Add Visit\",\n        action: async () => modal.show(PatientVisit, { \n          patient: props.patient \n        })\n      },\n      {\n        label: \"Update Outcome\",\n        action:async () => modal.show(OutcomeStatus, {\n          patient: props.patient,\n        })\n      },\n      {\n        label: \"Enter VL Results\",\n        action: async () => modal.show(ViralLoadResult, {\n          patient: props.patient,\n        })\n      }\n    ])\n\n    const columns = ref<ColumnInterface[][]>([[\n      table.thTxt('Visit Date'),\n      table.thTxt(\"Given To\"),\n      table.thTxt('Weight (Kg)'),\n      table.thTxt('Height (cm)'),\n      table.thTxt('BMI'),\n      table.thTxt('Preg'),\n      table.thTxt('B/F'),\n      table.thTxt('TB STATUS'),\n      table.thTxt('Side Effects'),\n      table.thTxt('ART Regimen'),\n      table.thTxt('Next Appointment'),\n      table.thTxt('Outcome'),\n      table.thTxt('Viral Load'),\n      table.thTxt('Void Visit')\n    ]])\n\n    const formatVisitDate = (date: string) => {\n      const monthsElapsed = props.startDate !== \"N/A\" \n          ? '(' + dayjs(date).diff(props.startDate, 'months') + 'M)' \n          : ''\n      return `${HisDate.toStandardHisDisplayFormat(date)} ${monthsElapsed}`\n    }\n\n    const showDrugsDispensed = async (drugs = [] as any[], date: string) => {\n      (await modalController.create({\n        component: DrillTableModalVue,\n        cssClass: \"custom-modal\",\n        componentProps: {\n          title: `Drugs dispensed on ${HisDate.toStandardHisDisplayFormat(date)}`,\n          columns: ['DRUG NAME', 'QUANTITY', 'UNITS' ],\n          onRows: () => drugs.map((drug: any) => [drug[0], drug[1], 'tab(s)' ]),\n        },\n      })).present();\n    }\n\n    const removeEncounters = async (date: string, index: number, activeRows: any[]) => {\n      popVoidReason(async (reason: string) => {\n        const encounters = await EncounterService.getEncounters(patientId.value, {date});\n        encounters.forEach(async (encounter: any) => {\n          await EncounterService.voidEncounter(encounter.encounter_id, reason);\n        })\n        activeRows.splice(index, 1);\n      }, 'small-modal');\n    } \n\n    const buildRows = () => {\n      Patientservice.getPatientVisits(patientId.value, true).then(async (dates) => {\n        rows.value = []\n        for (const date of dates) {\n          const data =  await ProgramService.getCurrentProgramInformation(patientId.value,  date)\n          let nextAppointment = '';\n          let pregnant = '';\n          let breastfeeding = '';\n          let vlResult = ''\n\n          if (data.outcome !== 'Defaulted') {\n            const nDate = await ObservationService.getFirstValueDatetime(patientId.value, 'appointment date', date);\n            if(nDate) nextAppointment = HisDate.toStandardHisDisplayFormat(nDate)\n            pregnant = await ObservationService.getFirstValueCoded(patientId.value, 'Is patient pregnant', date);\n            breastfeeding = await ObservationService.getFirstValueCoded(patientId.value, 'Is patient breast feeding', date);\n            if(data['viral_load'] === 'N/A') {\n              const vlObs = await ObservationService.getFirstObs(patientId.value, \"HIV viral load\", date)\n              if(vlObs && vlObs.value_text && vlObs.value_numeric) {\n                vlResult = vlObs.value_numeric === 1 ? \"LDL\" : vlObs.value_text + vlObs.value_numeric.toString()\n              }\n            } else {\n              vlResult = data['viral_load']\n            }\n          }\n          data && rows.value.push([\n            table.td(formatVisitDate(date)),\n            table.td(data['visit_by'].match(/Unk/i) ? \"\" : data['visit_by']),\n            table.td(data.outcome === 'Defaulted' ? '' : data.weight),\n            table.td(data.outcome === 'Defaulted' ? '' : data.height),\n            table.td(data.outcome === 'Defaulted' ? '' : data.bmi),\n            table.td(pregnant || ''),\n            table.td(breastfeeding ||''),\n            table.td(data['tb_status'].match(/Unknown/i) || data.outcome === 'Defaulted' ? '' : (await ConceptService.getCachedConceptName(data['tb_status'])) || ''),\n            table.td(data['side_effects'].length ? 'Yes' : data.outcome !== 'Defaulted' ? 'No' : ''),\n            table.tdLink(data.outcome === 'Defaulted' ? '' : data.regimen, () => showDrugsDispensed(data.pills_dispensed, date)),\n            table.td(nextAppointment || ''),\n            table.td(data.outcome.match(/Unk/i) ? \"\" : data.outcome),\n            table.td(vlResult),\n            table.tdBtn('X', (index: number, activeRows: any[]) => removeEncounters(date, index, activeRows), {}, 'danger')\n          ])\n        }\n      });\n    }\n\n    EventBus.on(EmcEvents.RELOAD_PATIENT_VISIT_DATA, () => buildRows())\n\n    onMounted(() => {\n      buildRows()\n    })\n\n    return {\n      actionButtons,\n      tableConfig,\n      columns,\n      rows,\n    }\n  },\n})\n","import { render } from \"./VisitsSummary.vue?vue&type=template&id=17e9b721&scoped=true&ts=true\"\nimport script from \"./VisitsSummary.vue?vue&type=script&lang=ts\"\nexport * from \"./VisitsSummary.vue?vue&type=script&lang=ts\"\n\nimport \"./VisitsSummary.vue?vue&type=style&index=0&id=17e9b721&scoped=true&lang=css\"\n\nimport exportComponent from \"/home/daniel/local-repos/HIS-Core/node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-17e9b721\"]])\n\nexport default __exports__","import { renderList as _renderList, Fragment as _Fragment, openBlock as _openBlock, createBlock as _createBlock, toDisplayString as _toDisplayString, createVNode as _createVNode, createCommentVNode as _createCommentVNode, resolveComponent as _resolveComponent, withCtx as _withCtx, withScopeId as _withScopeId, pushScopeId as _pushScopeId, popScopeId as _popScopeId } from \"vue\"\nconst _withId = /*#__PURE__*/_withScopeId(\"data-v-22f18bd2\")\n\n_pushScopeId(\"data-v-22f18bd2\")\nconst _hoisted_1 = { style: {width: '100%', display: 'flex', justifyContent: 'space-between'} }\nconst _hoisted_2 = { key: 0 }\nconst _hoisted_3 = { key: 1 }\nconst _hoisted_4 = { key: 3 }\n_popScopeId()\n\nexport const render = /*#__PURE__*/_withId(function render(_ctx, _cache, $props, $setup, $data, $options) {\n  const _component_ion_item = _resolveComponent(\"ion-item\")\n  const _component_ion_list = _resolveComponent(\"ion-list\")\n  const _component_multi_column_view = _resolveComponent(\"multi-column-view\")\n\n  return (_openBlock(), _createBlock(_component_multi_column_view, {\n    items: _ctx.patientInfo,\n    numberOfColumns: 3\n  }, {\n    default: _withId(({entries}) => [\n      _createVNode(_component_ion_list, { class: \"his-card ion-margin-end\" }, {\n        default: _withId(() => [\n          (_openBlock(true), _createBlock(_Fragment, null, _renderList(entries, (option, i) => {\n            return (_openBlock(), _createBlock(_component_ion_item, {\n              key: i,\n              lines: i === entries.length - 1 ? 'none': '',\n              button: _ctx.clickable(option),\n              onClick: $event => (_ctx.onClickHandler(option))\n            }, {\n              default: _withId(() => [\n                _createVNode(\"div\", _hoisted_1, [\n                  (option.label)\n                    ? (_openBlock(), _createBlock(\"span\", _hoisted_2, _toDisplayString(option.label) + \": \", 1))\n                    : (_openBlock(), _createBlock(\"span\", _hoisted_3)),\n                  (option.other && typeof option.other.onClickHandler === 'function')\n                    ? (_openBlock(), _createBlock(\"span\", {\n                        key: 2,\n                        onClick: option.other.onClickHandler\n                      }, [\n                        _createVNode(\"a\", null, [\n                          _createVNode(\"b\", null, _toDisplayString(option.value || 'N/A'), 1)\n                        ])\n                      ], 8, [\"onClick\"]))\n                    : (_openBlock(), _createBlock(\"span\", _hoisted_4, [\n                        _createVNode(\"b\", null, _toDisplayString(option.value || 'N/A'), 1)\n                      ]))\n                ])\n              ]),\n              _: 2\n            }, 1032, [\"lines\", \"button\", \"onClick\"]))\n          }), 128 /* KEYED_FRAGMENT */))\n        ]),\n        _: 2\n      }, 1024)\n    ]),\n    _: 1\n  }, 8, [\"items\"]))\n})","\nimport { computed, defineComponent, onMounted, PropType, ref } from 'vue'\nimport MultiColumnView from \"@/components/containers/MultiColumnView.vue\";\nimport { PatientObservationService } from '@/services/patient_observation_service';\nimport HisDate from \"@/utils/Date\";\nimport dayjs from 'dayjs';\nimport { isEmpty } from 'lodash';\nimport router from '@/router';\nimport ApiStore from '@/composables/ApiStore';\nimport EventBus from '@/utils/EventBus';\nimport { EmcEvents } from '../interfaces/emc_event';\nimport { toGenderString } from '@/utils/Strs';\n\ninterface InfoItem {\n  label: string;\n  value: string | number;\n  other?: {\n    onClickHandler: () => Promise<void> | void;\n  };\n}\n\nexport default defineComponent({\n  components: {\n    MultiColumnView\n  },\n  props: {\n    patient: {\n      type: Object as PropType<PatientObservationService>,\n      required: true,\n    },\n    artStartDate: {\n      type: String,\n      required: true,\n    },\n    guardians: {\n      type: String,\n      default: '',\n    }\n  },\n  emits: ['updatePatient','updateARVNumber', 'addGuardian'],\n  setup(props, { emit }) {\n    const initWeight = ref(0)\n    const initHeight = ref(0)\n    const initBmi = ref(0)\n    const initTBStatus = ref('')\n    const breastFeedingAtInitiation = ref('')\n    const pregnantAtInitiation = ref('')\n    const receivedART = ref('')\n    const agreesToFollowUp = ref('')\n    const reasonForStartingART = ref('')\n    const hivTestDate = ref('')\n    const hivTestPlace = ref('')\n    const stagingCondition = ref('')\n    const latestVLResult = ref('')\n    const whoSTage = ref('')\n\n    const clickable = (item: InfoItem) => {\n      return item.other && typeof item.other.onClickHandler === 'function';\n    }\n\n    const onClickHandler = async (item: InfoItem) => {\n      if(clickable(item)){\n        await item.other?.onClickHandler()\n      }\n    }\n\n    const getDobAndAgeAtInitiation = () => {\n      const dob = props.patient.getBirthdate()\n      const ageAtInitiation = props.artStartDate !== \"N/A\" \n        ? dayjs(props.artStartDate).diff(dob, \"years\")\n        : ''\n      \n      return `${HisDate.toStandardHisDisplayFormat(dob)} (${ageAtInitiation})`\n    }\n\n    const setLatestVLResult = (force = false) => {\n      if(force) ApiStore.invalidate('PATIENT_LAB_ORDERS')\n      ApiStore.get('PATIENT_LAB_ORDERS', { patientID: props.patient.getID() }).then(orders => {\n        const results = orders.reduce((rs: any[], order: any) => {\n        const r = order.tests\n          .filter((t: any) => t.name.match(/hiv/i) && !isEmpty(t.result))\n          .map((t: any) => t.result);\n          return rs.concat(r.reduce((a: any, c: any) => a.concat(c), []));\n        }, [])\n        .sort((a: any, b: any) => new Date(a.date) > new Date(b.date) ? -1 : 1);\n        latestVLResult.value = isEmpty(results) \n          ? '' \n          : `${results[0].value_modifier}${results[0].value} (${HisDate.toStandardHisDisplayFormat(results[0].date)})`;\n      });\n    }\n\n    const patientInfo = computed(() => [\n      { label: \"ARV Number\", value: props.patient.getArvNumber(), other: {\n        onClickHandler: () => emit('updateARVNumber')\n      }},\n      { label: \"National Patient ID\", value: props.patient.getNationalID() },\n      { label: \"Name\", value: props.patient.getGivenName() + \" \" + props.patient.getFamilyName(), other: {\n        onClickHandler: () =>   emit('updatePatient', 'given_name')\n      }},\n      { label: \"DOB and Age at Initiation\", value: getDobAndAgeAtInitiation(), other: {\n          onClickHandler: () => emit('updatePatient', 'birthdate')\n      }},\n      {\n        label: \"Sex\",\n        value: toGenderString(props.patient.getGender()),\n        other: {\n          onClickHandler: () => {\n            emit('updatePatient', 'gender')\n          }\n        },\n      },\n      {\n        label: \"Location\",\n        value: props.patient.getCurrentVillage(),\n        other: {\n          onClickHandler: () => {\n            emit('updatePatient', 'home_village')\n          }\n        },\n      },\n      { \n        label: \"Landmark\", \n        value: props.patient.getClosestLandmark(),\n        other: {\n          onClickHandler: () => {\n            emit('updatePatient', 'landmarks')\n          }\n        },\n      },\n      { \n        label: \"Phone Number\", \n        value: props.patient.getPhoneNumber(),\n        other: {\n          onClickHandler: () => {\n            emit('updatePatient', 'phone_number')\n          }\n        },\n      },\n      {\n        label: \"Guardian\",\n        value: props.guardians ? props.guardians : \"add\",\n        other: {\n          ...(isEmpty(props.guardians) \n            ? {\n                onClickHandler: () => {\n                  emit('addGuardian')\n                }\n              } \n            : {}\n          ),\n        },\n      },\n      { label: \"Agrees to follow up\", value: agreesToFollowUp.value, other: {\n        onClickHandler: () => router.push(`/emc/registration/${props.patient.getID()}/false`)\n      }},\n      { label: \"Date of starting first line ARV Regimen\", value: props.artStartDate, other: {\n        onClickHandler: () => router.push(`/emc/registration/${props.patient.getID()}/false`)\n      }},\n      { label: \"Initial Weight (KG)\", value: initWeight.value, other: {\n        onClickHandler: () => router.push(`/emc/registration/${props.patient.getID()}/false`)\n      }},\n      { label: \"Initial Height (CM)\", value: initHeight.value, other: {\n        onClickHandler: () => router.push(`/emc/registration/${props.patient.getID()}/false`)\n      }},\n      { label: \"Initial BMI\", value: initBmi.value, other: {\n        onClickHandler: () => router.push(`/emc/registration/${props.patient.getID()}/false`)\n      }},\n      { label: \"Initial TB Status\", value: initTBStatus.value, other: {\n        onClickHandler: () => router.push(`/emc/registration/${props.patient.getID()}/false`)\n      }},\n      { label: \"Pregnant at Initiation\", value: pregnantAtInitiation.value, other: {\n        onClickHandler: () => router.push(`/emc/registration/${props.patient.getID()}/false`)\n      }},\n      { label: \"Breastfeeding at Initiation\", value: breastFeedingAtInitiation.value, other: {\n        onClickHandler: () => router.push(`/emc/registration/${props.patient.getID()}/false`)\n      }},\n      { label: \"Latest VL Result and Result Date\", value:  latestVLResult.value },\n      { label: \"TI\", value: receivedART.value, other: {\n        onClickHandler: () => router.push(`/emc/registration/${props.patient.getID()}/false`)\n      }},\n      { label: \"HIV test place\", value: hivTestPlace.value, other: {\n        onClickHandler: () => router.push(`/emc/registration/${props.patient.getID()}/false`)\n      }},\n      {  label: \"HIV test date\", value: hivTestDate.value, other: {\n        onClickHandler: () => router.push(`/emc/registration/${props.patient.getID()}/false`)\n      }},\n      { label: \"WHO stage\", value: whoSTage.value, other: {\n        onClickHandler: () => router.push(`/emc/registration/${props.patient.getID()}/false`)\n      }},\n      { label: \"Reason for starting ART\", value: reasonForStartingART.value, other: {\n        onClickHandler: () => router.push(`/emc/registration/${props.patient.getID()}/false`)\n      }},\n      { label: \"Staging codition\", value: stagingCondition.value, other: {\n        onClickHandler: () => router.push(`/emc/registration/${props.patient.getID()}/false`)\n      }},\n    ])\n\n    const setHIVTestDate = async () => {\n      const date = await props.patient.getHIVTestDate()\n      if(date) hivTestDate.value = HisDate.toStandardHisDisplayFormat(date)\n    }\n\n    const init = () => {\n      props.patient.getInitialWeight().then(v => initWeight.value = v)\n      props.patient.getInitialHeight().then(v => initHeight.value = v)\n      props.patient.getInitialBMI().then(v => initBmi.value = v)\n      props.patient.getInitialTBStatus().then(v => initTBStatus.value = v)\n      props.patient.hasPregnancyAtARTInitiation().then(v => pregnantAtInitiation.value = v)\n      props.patient.breastFeedingAtARTInitiation().then(v => breastFeedingAtInitiation.value = v)\n      props.patient.everReceivedART().then(v => receivedART.value = v)\n      props.patient.agreesToFollowUp().then(v => agreesToFollowUp.value = v)\n      props.patient.getReasonForStartingART().then(v => reasonForStartingART.value = v)\n      props.patient.getHIVTestLocation().then(v => hivTestPlace.value = v)\n      props.patient.getStagingCondition().then(v => stagingCondition.value = v)\n      props.patient.getWhoStage().then(v => whoSTage.value = v)\n      setLatestVLResult()\n      setHIVTestDate()\n    }\n\n   onMounted(() => {\n    init();\n    EventBus.on(EmcEvents.RELOAD_LATEST_VL_RESULT,  () =>  setLatestVLResult())\n    EventBus.on(EmcEvents.RELOAD_STAGING_INFORMATION, () => init())\n   })\n\n    return {\n      patientInfo,\n      onClickHandler,\n      clickable,\n    }\n  },\n})\n","import { render } from \"./InformationHeader.vue?vue&type=template&id=22f18bd2&scoped=true&ts=true\"\nimport script from \"./InformationHeader.vue?vue&type=script&lang=ts\"\nexport * from \"./InformationHeader.vue?vue&type=script&lang=ts\"\n\nimport \"./InformationHeader.vue?vue&type=style&index=0&id=22f18bd2&scoped=true&lang=css\"\n\nimport exportComponent from \"/home/daniel/local-repos/HIS-Core/node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-22f18bd2\"]])\n\nexport default __exports__","import { createTextVNode as _createTextVNode, resolveComponent as _resolveComponent, withCtx as _withCtx, createVNode as _createVNode, Fragment as _Fragment, openBlock as _openBlock, createBlock as _createBlock } from \"vue\"\n\nconst _hoisted_1 = /*#__PURE__*/_createTextVNode(\"Edit Patient Demographics\")\nconst _hoisted_2 = /*#__PURE__*/_createTextVNode(\"Close\")\nconst _hoisted_3 = /*#__PURE__*/_createTextVNode(\"Save\")\n\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  const _component_ion_title = _resolveComponent(\"ion-title\")\n  const _component_ion_icon = _resolveComponent(\"ion-icon\")\n  const _component_ion_button = _resolveComponent(\"ion-button\")\n  const _component_ion_buttons = _resolveComponent(\"ion-buttons\")\n  const _component_ion_toolbar = _resolveComponent(\"ion-toolbar\")\n  const _component_ion_header = _resolveComponent(\"ion-header\")\n  const _component_TextInput = _resolveComponent(\"TextInput\")\n  const _component_ion_col = _resolveComponent(\"ion-col\")\n  const _component_DateInput = _resolveComponent(\"DateInput\")\n  const _component_SelectInput = _resolveComponent(\"SelectInput\")\n  const _component_ion_row = _resolveComponent(\"ion-row\")\n  const _component_ion_grid = _resolveComponent(\"ion-grid\")\n  const _component_ion_content = _resolveComponent(\"ion-content\")\n  const _component_ion_footer = _resolveComponent(\"ion-footer\")\n\n  return (_openBlock(), _createBlock(_Fragment, null, [\n    _createVNode(_component_ion_header, null, {\n      default: _withCtx(() => [\n        _createVNode(_component_ion_toolbar, null, {\n          default: _withCtx(() => [\n            _createVNode(_component_ion_title, null, {\n              default: _withCtx(() => [\n                _hoisted_1\n              ]),\n              _: 1\n            }),\n            _createVNode(_component_ion_buttons, { slot: \"end\" }, {\n              default: _withCtx(() => [\n                _createVNode(_component_ion_button, {\n                  onClick: _cache[1] || (_cache[1] = $event => (_ctx.modal.hide()))\n                }, {\n                  default: _withCtx(() => [\n                    _createVNode(_component_ion_icon, {\n                      slot: \"icon-only\",\n                      name: \"close\"\n                    })\n                  ]),\n                  _: 1\n                })\n              ]),\n              _: 1\n            })\n          ]),\n          _: 1\n        })\n      ]),\n      _: 1\n    }),\n    _createVNode(_component_ion_content, { class: \"ion-padding\" }, {\n      default: _withCtx(() => [\n        _createVNode(_component_ion_grid, null, {\n          default: _withCtx(() => [\n            _createVNode(_component_ion_row, null, {\n              default: _withCtx(() => [\n                _createVNode(_component_ion_col, {\n                  size: \"4\",\n                  class: \"ion-margin-top ion-margin-bottom\"\n                }, {\n                  default: _withCtx(() => [\n                    _createVNode(_component_TextInput, {\n                      modelValue: _ctx.patient.givenName,\n                      \"onUpdate:modelValue\": _cache[2] || (_cache[2] = $event => (_ctx.patient.givenName = $event))\n                    }, null, 8, [\"modelValue\"])\n                  ]),\n                  _: 1\n                }),\n                _createVNode(_component_ion_col, {\n                  size: \"4\",\n                  class: \"ion-margin-top ion-margin-bottom\"\n                }, {\n                  default: _withCtx(() => [\n                    _createVNode(_component_TextInput, {\n                      modelValue: _ctx.patient.middleName,\n                      \"onUpdate:modelValue\": _cache[3] || (_cache[3] = $event => (_ctx.patient.middleName = $event))\n                    }, null, 8, [\"modelValue\"])\n                  ]),\n                  _: 1\n                }),\n                _createVNode(_component_ion_col, {\n                  size: \"4\",\n                  class: \"ion-margin-top ion-margin-bottom\"\n                }, {\n                  default: _withCtx(() => [\n                    _createVNode(_component_TextInput, {\n                      modelValue: _ctx.patient.familyName,\n                      \"onUpdate:modelValue\": _cache[4] || (_cache[4] = $event => (_ctx.patient.familyName = $event))\n                    }, null, 8, [\"modelValue\"])\n                  ]),\n                  _: 1\n                }),\n                _createVNode(_component_ion_col, {\n                  size: \"12\",\n                  class: \"ion-margin-top ion-margin-bottom\"\n                }, {\n                  default: _withCtx(() => [\n                    _createVNode(_component_DateInput, {\n                      modelValue: _ctx.patient.birthdate,\n                      \"onUpdate:modelValue\": _cache[5] || (_cache[5] = $event => (_ctx.patient.birthdate = $event)),\n                      allowEstimation: true,\n                      estimationLabel: 'Estimate Age',\n                      minDate: \"1900-01-01\",\n                      maxDate: _ctx.today,\n                      onIsEstimated: _cache[6] || (_cache[6] = (estimate) => _ctx.isBirthdateEstimated = estimate)\n                    }, null, 8, [\"modelValue\", \"maxDate\"])\n                  ]),\n                  _: 1\n                }),\n                _createVNode(_component_ion_col, {\n                  size: \"12\",\n                  class: \"ion-margin-top ion-margin-bottom\"\n                }, {\n                  default: _withCtx(() => [\n                    _createVNode(_component_SelectInput, {\n                      modelValue: _ctx.patient.gender,\n                      \"onUpdate:modelValue\": _cache[7] || (_cache[7] = $event => (_ctx.patient.gender = $event)),\n                      options: _ctx.genderOptions\n                    }, null, 8, [\"modelValue\", \"options\"])\n                  ]),\n                  _: 1\n                }),\n                _createVNode(_component_ion_col, {\n                  size: \"12\",\n                  class: \"ion-margin-top ion-margin-bottom\"\n                }, {\n                  default: _withCtx(() => [\n                    _createVNode(_component_TextInput, {\n                      modelValue: _ctx.patient.cellPhoneNumber,\n                      \"onUpdate:modelValue\": _cache[8] || (_cache[8] = $event => (_ctx.patient.cellPhoneNumber = $event)),\n                      allowUnknown: \"\"\n                    }, null, 8, [\"modelValue\"])\n                  ]),\n                  _: 1\n                }),\n                _createVNode(_component_ion_col, {\n                  size: \"12\",\n                  class: \"ion-margin-top ion-margin-bottom\"\n                }, {\n                  default: _withCtx(() => [\n                    _createVNode(_component_SelectInput, {\n                      modelValue: _ctx.patient.homeVillage,\n                      \"onUpdate:modelValue\": _cache[9] || (_cache[9] = $event => (_ctx.patient.homeVillage = $event)),\n                      asyncOptions: _ctx.getVillagesByName,\n                      allowCustom: \"\"\n                    }, null, 8, [\"modelValue\", \"asyncOptions\"])\n                  ]),\n                  _: 1\n                }),\n                _createVNode(_component_ion_col, {\n                  size: \"12\",\n                  class: \"ion-margin-top ion-margin-bottom\"\n                }, {\n                  default: _withCtx(() => [\n                    _createVNode(_component_SelectInput, {\n                      modelValue: _ctx.patient.landmark,\n                      \"onUpdate:modelValue\": _cache[10] || (_cache[10] = $event => (_ctx.patient.landmark = $event)),\n                      asyncOptions: _ctx.getLandmarks,\n                      allowCustom: \"\"\n                    }, null, 8, [\"modelValue\", \"asyncOptions\"])\n                  ]),\n                  _: 1\n                })\n              ]),\n              _: 1\n            })\n          ]),\n          _: 1\n        })\n      ]),\n      _: 1\n    }),\n    _createVNode(_component_ion_footer, null, {\n      default: _withCtx(() => [\n        _createVNode(_component_ion_toolbar, null, {\n          default: _withCtx(() => [\n            _createVNode(_component_ion_button, {\n              color: \"primary\",\n              onClick: _cache[11] || (_cache[11] = $event => (_ctx.modal.hide())),\n              slot: \"end\"\n            }, {\n              default: _withCtx(() => [\n                _hoisted_2\n              ]),\n              _: 1\n            }),\n            _createVNode(_component_ion_button, {\n              class: \"ion-margin-end\",\n              color: \"success\",\n              onClick: _ctx.onFinish,\n              slot: \"end\"\n            }, {\n              default: _withCtx(() => [\n                _hoisted_3\n              ]),\n              _: 1\n            }, 8, [\"onClick\"])\n          ]),\n          _: 1\n        })\n      ]),\n      _: 1\n    })\n  ], 64 /* STABLE_FRAGMENT */))\n}","\nimport { defineComponent, PropType, reactive, ref } from \"vue\";\nimport { IonGrid, IonRow, IonCol } from \"@ionic/vue\";\nimport Validation from \"@/components/Forms/validations/StandardValidations\"\nimport { Option } from \"@/components/Forms/FieldInterface\";\nimport { LocationService } from \"@/services/location_service\";\nimport { isEmpty } from \"lodash\";\nimport { PatientRegistrationService } from \"@/services/patient_registration_service\";\nimport { DTForm } from \"@/apps/EMC/interfaces/dt_form_field\";\nimport TextInput from \"../inputs/TextInput.vue\";\nimport DateInput from \"../inputs/DateInput.vue\";\nimport SelectInput from \"../inputs/SelectInput.vue\";\nimport { getLandmarks, getVillagesByName } from \"@/utils/HisFormHelpers/LocationFieldOptions\";\nimport { submitForm } from \"@/apps/EMC/utils/form\";\nimport { Patientservice } from \"@/services/patient_service\";\nimport EventBus from \"@/utils/EventBus\";\nimport { EmcEvents } from \"../../interfaces/emc_event\";\nimport { genderOptions } from \"../../utils/DTFormElements\";\nimport { modal } from \"@/utils/modal\";\nimport dayjs from \"dayjs\";\nimport { STANDARD_DATE_FORMAT } from \"@/utils/Date\";\n\nexport default defineComponent({\n  components: {\n    IonGrid,\n    IonRow,\n    IonCol,\n    TextInput,\n    DateInput,\n    SelectInput,\n  },\n  props: {\n    patientService: {\n      type: Object as PropType<Patientservice>,\n      required: true,\n    }\n  },\n  setup(props) {\n    const today = dayjs().format(STANDARD_DATE_FORMAT)\n    const isBirthdateEstimated = ref(false);\n    const patient = reactive<DTForm>({\n      givenName: {\n        label: \"First Name\",\n        value: props.patientService.getGivenName(),\n        placeholder: \"First Name\",\n        required: true,\n        error: \"\",\n      },\n      familyName: {\n        label: \"last Name\",\n        value: props.patientService.getFamilyName(),\n        placeholder: \"Last Name\",\n        required: true\n      },\n      middleName: {\n        label: \"middle Name\",\n        value: props.patientService.getMiddleName(),\n        placeholder: \"middle Name\",\n      },\n      gender: {\n        value: props.patientService.getGender(),\n        required: true,\n        label: \"Gender\",\n        placeholder: 'select gender'\n      },\n      birthdate: {\n        value:props.patientService.getBirthdate(),\n        label: 'Date of Birth',\n        placeholder: 'Date of Birth',\n        required: true,\n      },\n      cellPhoneNumber: {\n        value: props.patientService.getPhoneNumber(),\n        required: true,\n        label: \"Cellphone Number\",\n        placeholder: \"cellphone number e.g. 0991234567\",\n        validation: async (phone: Option) => !(phone.value === 'Unknown' || phone.value === 'N/A') && Validation.isMWPhoneNumber(phone)\n      },\n      homeVillage: {\n        value: props.patientService.getCurrentVillage(),\n        label: \"Home Village\",\n        placeholder: \"Home Village\",\n        required: true,\n      },\n      landmark: {\n        value: props.patientService.getClosestLandmark(),\n        label: \"Landmark\",\n        placeholder: \"Closest Landmark or Plot Number\",\n        required: true,\n      }\n    })\n\n    const resolveAddress = async (village: Option) => {\n      const address = {\n        'current_district': \"N/A\",\n        'current_traditional_authority': \"N/A\",\n        'current_village': village.label \n      }\n\n      const TA = await LocationService.getTraditionalAuthorityById(village.other.traditional_authority_id)\n        if(TA.length > 0) {\n          address['current_traditional_authority'] = TA[0].name\n          const district = await LocationService.getDistrictByID(TA[0].district_id)\n          if(!isEmpty(district)) {\n            address['current_district'] = district[0].name\n          }\n        }\n      return address;\n    }\n\n    const onFinish = async () => submitForm(patient, async (formData) => {\n      const updatedPatient = {} as any;\n      if(formData.givenName !== props.patientService.getGivenName()) updatedPatient[\"given_name\"] = formData.givenName;\n      if(formData.familyName !== props.patientService.getFamilyName()) updatedPatient[\"family_name\"] = formData.familyName;\n      if(formData.middleName !== props.patientService.getMiddleName()) updatedPatient[\"middle_name\"] = formData.middleName;\n      if(formData.birthdate !== props.patientService.getBirthdate()) updatedPatient[\"birthdate\"] = formData.birthdate;\n      if(formData.gender.value !== props.patientService.getGender()) updatedPatient[\"gender\"] = formData.gender.value;\n      if(formData.cellPhoneNumber !== props.patientService.getPhoneNumber()) updatedPatient[\"cell_phone_number\"] = formData.cellPhoneNumber;\n      if(formData.landmark.label !== props.patientService.getClosestLandmark()) updatedPatient[\"landmark\"] = formData.landmark.label;\n      if(formData.homeVillage !== props.patientService.getCurrentVillage()) {\n        Object.assign(updatedPatient, {\n          ...updatedPatient,\n          ...(await resolveAddress(formData.homeVillage))\n        })\n      }\n      if(!isEmpty(updatedPatient)) {\n        const person = new PatientRegistrationService();\n        person.setPersonID(props.patientService.getID());\n        await person.updatePerson(updatedPatient);\n      }\n      await modal.hide()\n      EventBus.emit(EmcEvents.RELOAD_PATIENT_DATA);\n    })\n \n    return {\n      today,\n      patient,\n      getLandmarks,\n      genderOptions,\n      isBirthdateEstimated,\n      modal,\n      onFinish, \n      getVillagesByName\n    };\n  },\n});\n","import { render } from \"./PatientDemographics.vue?vue&type=template&id=04962b97&ts=true\"\nimport script from \"./PatientDemographics.vue?vue&type=script&lang=ts\"\nexport * from \"./PatientDemographics.vue?vue&type=script&lang=ts\"\n\nimport exportComponent from \"/home/daniel/local-repos/HIS-Core/node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","import { createTextVNode as _createTextVNode, resolveComponent as _resolveComponent, withCtx as _withCtx, createVNode as _createVNode, Fragment as _Fragment, openBlock as _openBlock, createBlock as _createBlock } from \"vue\"\n\nconst _hoisted_1 = /*#__PURE__*/_createTextVNode(\"Add Guadian Demographics\")\nconst _hoisted_2 = /*#__PURE__*/_createTextVNode(\"Close\")\nconst _hoisted_3 = /*#__PURE__*/_createTextVNode(\"Save\")\n\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  const _component_ion_title = _resolveComponent(\"ion-title\")\n  const _component_ion_icon = _resolveComponent(\"ion-icon\")\n  const _component_ion_button = _resolveComponent(\"ion-button\")\n  const _component_ion_buttons = _resolveComponent(\"ion-buttons\")\n  const _component_ion_toolbar = _resolveComponent(\"ion-toolbar\")\n  const _component_ion_header = _resolveComponent(\"ion-header\")\n  const _component_TextInput = _resolveComponent(\"TextInput\")\n  const _component_ion_col = _resolveComponent(\"ion-col\")\n  const _component_ion_row = _resolveComponent(\"ion-row\")\n  const _component_ion_grid = _resolveComponent(\"ion-grid\")\n  const _component_ion_content = _resolveComponent(\"ion-content\")\n  const _component_ion_footer = _resolveComponent(\"ion-footer\")\n\n  return (_openBlock(), _createBlock(_Fragment, null, [\n    _createVNode(_component_ion_header, null, {\n      default: _withCtx(() => [\n        _createVNode(_component_ion_toolbar, null, {\n          default: _withCtx(() => [\n            _createVNode(_component_ion_title, null, {\n              default: _withCtx(() => [\n                _hoisted_1\n              ]),\n              _: 1\n            }),\n            _createVNode(_component_ion_buttons, { slot: \"end\" }, {\n              default: _withCtx(() => [\n                _createVNode(_component_ion_button, { onClick: _ctx.closeModal }, {\n                  default: _withCtx(() => [\n                    _createVNode(_component_ion_icon, {\n                      slot: \"icon-only\",\n                      name: \"close\"\n                    })\n                  ]),\n                  _: 1\n                }, 8, [\"onClick\"])\n              ]),\n              _: 1\n            })\n          ]),\n          _: 1\n        })\n      ]),\n      _: 1\n    }),\n    _createVNode(_component_ion_content, { class: \"ion-padding\" }, {\n      default: _withCtx(() => [\n        _createVNode(_component_ion_grid, null, {\n          default: _withCtx(() => [\n            _createVNode(_component_ion_row, null, {\n              default: _withCtx(() => [\n                _createVNode(_component_ion_col, {\n                  size: \"12\",\n                  class: \"ion-margin-top ion-margin-bottom\"\n                }, {\n                  default: _withCtx(() => [\n                    _createVNode(_component_TextInput, {\n                      modelValue: _ctx.guardian.givenName,\n                      \"onUpdate:modelValue\": _cache[1] || (_cache[1] = $event => (_ctx.guardian.givenName = $event))\n                    }, null, 8, [\"modelValue\"])\n                  ]),\n                  _: 1\n                }),\n                _createVNode(_component_ion_col, {\n                  size: \"12\",\n                  class: \"ion-margin-top ion-margin-bottom\"\n                }, {\n                  default: _withCtx(() => [\n                    _createVNode(_component_TextInput, {\n                      modelValue: _ctx.guardian.familyName,\n                      \"onUpdate:modelValue\": _cache[2] || (_cache[2] = $event => (_ctx.guardian.familyName = $event))\n                    }, null, 8, [\"modelValue\"])\n                  ]),\n                  _: 1\n                }),\n                _createVNode(_component_ion_col, {\n                  size: \"12\",\n                  class: \"ion-margin-top ion-margin-bottom\"\n                }, {\n                  default: _withCtx(() => [\n                    _createVNode(_component_TextInput, {\n                      modelValue: _ctx.guardian.cellPhoneNumber,\n                      \"onUpdate:modelValue\": _cache[3] || (_cache[3] = $event => (_ctx.guardian.cellPhoneNumber = $event)),\n                      allowUnknown: \"\"\n                    }, null, 8, [\"modelValue\"])\n                  ]),\n                  _: 1\n                })\n              ]),\n              _: 1\n            })\n          ]),\n          _: 1\n        })\n      ]),\n      _: 1\n    }),\n    _createVNode(_component_ion_footer, null, {\n      default: _withCtx(() => [\n        _createVNode(_component_ion_toolbar, null, {\n          default: _withCtx(() => [\n            _createVNode(_component_ion_button, {\n              color: \"primary\",\n              onClick: _cache[4] || (_cache[4] = $event => (_ctx.modal.hide())),\n              slot: \"end\"\n            }, {\n              default: _withCtx(() => [\n                _hoisted_2\n              ]),\n              _: 1\n            }),\n            _createVNode(_component_ion_button, {\n              class: \"ion-margin-end\",\n              color: \"success\",\n              onClick: _ctx.onFinish,\n              slot: \"end\"\n            }, {\n              default: _withCtx(() => [\n                _hoisted_3\n              ]),\n              _: 1\n            }, 8, [\"onClick\"])\n          ]),\n          _: 1\n        })\n      ]),\n      _: 1\n    })\n  ], 64 /* STABLE_FRAGMENT */))\n}","\nimport { defineComponent, reactive } from \"vue\";\nimport { IonGrid, IonRow, IonCol } from \"@ionic/vue\";\nimport Validation from \"@/components/Forms/validations/StandardValidations\"\nimport { Option } from \"@/components/Forms/FieldInterface\";\nimport { PatientRegistrationService } from \"@/services/patient_registration_service\";\nimport { DTForm } from \"@/apps/EMC/interfaces/dt_form_field\";\nimport TextInput from \"../inputs/TextInput.vue\";\nimport { submitForm } from \"@/apps/EMC/utils/form\";\nimport { RelationsService } from \"@/services/relations_service\";\nimport EventBus from \"@/utils/EventBus\";\nimport { EmcEvents } from \"../../interfaces/emc_event\";\nimport { modal } from \"@/utils/modal\";\n\nexport default defineComponent({\n  components: {\n    IonGrid,\n    IonRow,\n    IonCol,\n    TextInput,\n  },\n  props: {\n    patientId: {\n      type: Number,\n      required: true,\n    }\n  },\n  setup(props) {    \n    const guardian = reactive<DTForm>({\n      givenName: {\n        label: \"First Name\",\n        value: \"\",\n        placeholder: \"First Name\",\n        required: true,\n      },\n      familyName: {\n        label: \"Last Name\",\n        value: \"\",\n        placeholder: \"Last Name\",\n        required: true,\n      },\n      cellPhoneNumber: {\n        value: '',\n        required: true,\n        label: \"Cellphone Number\",\n        validation: async (phone: Option) => {\n          return phone.value !== 'Unknown' && Validation.isMWPhoneNumber(phone)\n        }\n      },\n    })\n\n    const onFinish = async () => submitForm(guardian, async (formData) => {\n      const person: Record<string, any> = {\n        'home_district': \"N/A\",\n        'home_traditional_authority': \"N/A\",\n        'home_village': \"N/A\",\n        'current_district': \"N/A\",\n        'current_traditional_authority': \"N/A\",\n        'current_village': \"N/A\",\n        'middle_name': \"\",\n        'gender': \"N/A\",\n        'birthdate': \"N/A\",\n        'birthdate_estimated': \"N/A\",\n        'landmark': \"N/A\",\n        'relationship': \"N/A\",\n        'patient_type': \"\",\n        'isPatient': false,\n        'patient_id': props.patientId,\n        ...formData\n      };\n      const registrationService = new PatientRegistrationService()\n      await registrationService.registerGuardian(person)\n      const guardianId = registrationService.getPersonID()      \n      await RelationsService.createRelation(props.patientId, guardianId, 13)\n      await modal.hide()\n      EventBus.emit(EmcEvents.RELOAD_GUARDIAN_DATA)\n    }, \n    { \n      underscoreKeys: true \n    })\n \n    return {\n      guardian,\n      modal,\n      onFinish,\n    };\n  },\n});\n","import { render } from \"./GuardianDemographics.vue?vue&type=template&id=77baa926&ts=true\"\nimport script from \"./GuardianDemographics.vue?vue&type=script&lang=ts\"\nexport * from \"./GuardianDemographics.vue?vue&type=script&lang=ts\"\n\nimport exportComponent from \"/home/daniel/local-repos/HIS-Core/node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","import { createTextVNode as _createTextVNode, resolveComponent as _resolveComponent, withCtx as _withCtx, createVNode as _createVNode, openBlock as _openBlock, createBlock as _createBlock, createCommentVNode as _createCommentVNode, Fragment as _Fragment } from \"vue\"\n\nconst _hoisted_1 = /*#__PURE__*/_createTextVNode(\"ARV NUMBER\")\nconst _hoisted_2 = /*#__PURE__*/_createTextVNode(\"Close\")\nconst _hoisted_3 = /*#__PURE__*/_createTextVNode(\"Void ARV Number\")\nconst _hoisted_4 = /*#__PURE__*/_createTextVNode(\"Save\")\n\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  const _component_ion_title = _resolveComponent(\"ion-title\")\n  const _component_ion_icon = _resolveComponent(\"ion-icon\")\n  const _component_ion_button = _resolveComponent(\"ion-button\")\n  const _component_ion_buttons = _resolveComponent(\"ion-buttons\")\n  const _component_ion_toolbar = _resolveComponent(\"ion-toolbar\")\n  const _component_ion_header = _resolveComponent(\"ion-header\")\n  const _component_text_input = _resolveComponent(\"text-input\")\n  const _component_ion_col = _resolveComponent(\"ion-col\")\n  const _component_ion_row = _resolveComponent(\"ion-row\")\n  const _component_ion_grid = _resolveComponent(\"ion-grid\")\n  const _component_ion_content = _resolveComponent(\"ion-content\")\n  const _component_ion_footer = _resolveComponent(\"ion-footer\")\n\n  return (_openBlock(), _createBlock(_Fragment, null, [\n    _createVNode(_component_ion_header, null, {\n      default: _withCtx(() => [\n        _createVNode(_component_ion_toolbar, null, {\n          default: _withCtx(() => [\n            _createVNode(_component_ion_title, null, {\n              default: _withCtx(() => [\n                _hoisted_1\n              ]),\n              _: 1\n            }),\n            _createVNode(_component_ion_buttons, { slot: \"end\" }, {\n              default: _withCtx(() => [\n                _createVNode(_component_ion_button, {\n                  onClick: _cache[1] || (_cache[1] = $event => (_ctx.modal.hide()))\n                }, {\n                  default: _withCtx(() => [\n                    _createVNode(_component_ion_icon, {\n                      slot: \"icon-only\",\n                      name: \"close\"\n                    })\n                  ]),\n                  _: 1\n                })\n              ]),\n              _: 1\n            })\n          ]),\n          _: 1\n        })\n      ]),\n      _: 1\n    }),\n    _createVNode(_component_ion_content, { class: \"ion-padding\" }, {\n      default: _withCtx(() => [\n        _createVNode(_component_ion_grid, null, {\n          default: _withCtx(() => [\n            _createVNode(_component_ion_row, null, {\n              default: _withCtx(() => [\n                _createVNode(_component_ion_col, null, {\n                  default: _withCtx(() => [\n                    _createVNode(_component_text_input, {\n                      modelValue: _ctx.form.arvNumber,\n                      \"onUpdate:modelValue\": _cache[2] || (_cache[2] = $event => (_ctx.form.arvNumber = $event)),\n                      form: _ctx.form,\n                      prefix: `${_ctx.sitePrefix}-ARV-`\n                    }, null, 8, [\"modelValue\", \"form\", \"prefix\"])\n                  ]),\n                  _: 1\n                })\n              ]),\n              _: 1\n            })\n          ]),\n          _: 1\n        })\n      ]),\n      _: 1\n    }),\n    _createVNode(_component_ion_footer, { class: \"ion-padding-horizontal\" }, {\n      default: _withCtx(() => [\n        _createVNode(_component_ion_toolbar, null, {\n          default: _withCtx(() => [\n            _createVNode(_component_ion_button, {\n              color: \"primary\",\n              onClick: _cache[3] || (_cache[3] = $event => (_ctx.modal.hide())),\n              slot: \"end\"\n            }, {\n              default: _withCtx(() => [\n                _hoisted_2\n              ]),\n              _: 1\n            }),\n            (_ctx.hasValidARVNumber)\n              ? (_openBlock(), _createBlock(_component_ion_button, {\n                  key: 0,\n                  color: \"danger\",\n                  onClick: _ctx.voidARV,\n                  slot: \"start\"\n                }, {\n                  default: _withCtx(() => [\n                    _hoisted_3\n                  ]),\n                  _: 1\n                }, 8, [\"onClick\"]))\n              : _createCommentVNode(\"\", true),\n            _createVNode(_component_ion_button, {\n              color: \"success\",\n              onClick: _ctx.onFinish,\n              slot: \"end\"\n            }, {\n              default: _withCtx(() => [\n                _hoisted_4\n              ]),\n              _: 1\n            }, 8, [\"onClick\"])\n          ]),\n          _: 1\n        })\n      ]),\n      _: 1\n    })\n  ], 64 /* STABLE_FRAGMENT */))\n}","\nimport { computed, defineComponent, onMounted, PropType, reactive, ref } from \"vue\";\nimport { IonGrid, IonRow, IonCol } from \"@ionic/vue\";\nimport { Option } from \"@/components/Forms/FieldInterface\";\nimport { DTForm } from \"@/apps/EMC/interfaces/dt_form_field\";\nimport TextInput from \"../inputs/TextInput.vue\";\nimport { submitForm } from \"@/apps/EMC/utils/form\";\nimport { loader } from \"@/utils/loader\";\nimport EventBus from \"@/utils/EventBus\";\nimport { EmcEvents } from \"../../interfaces/emc_event\";\nimport { Patientservice } from \"@/services/patient_service\";\nimport { isEmpty } from \"lodash\";\nimport { ProgramService } from \"@/services/program_service\";\nimport GLOBAL_PROP from \"@/apps/GLOBAL_APP/global_prop\";\nimport { modal } from \"@/utils/modal\";\nimport { alertConfirmation } from \"@/utils/Alerts\";\n\nexport default defineComponent({\n  components: {\n    IonGrid,\n    IonRow,\n    IonCol,\n    TextInput,\n  },\n  props: {\n    patient: {\n      type: Object as PropType<Patientservice>,\n      required: true,\n    }\n  },\n  setup(props) { \n    const sitePrefix = ref(\"\");\n    const arvNumber = computed(() => props.patient.getArvNumber());\n    const hasValidARVNumber = computed(() => {\n      return !isEmpty(arvNumber.value) && arvNumber.value !== \"Unknown\";\n    });\n\n    const form = reactive<DTForm>({\n      arvNumber: {\n        value: hasValidARVNumber.value ? arvNumber.value.split(\"-\")[2] : \"\",\n        label: `${hasValidARVNumber.value ? \"Edit\" : \"Add New\"} ARV Number`,\n        placeholder: \"Enter ARV Number\",\n        required: true,\n        validation: async (arv: Option) => {\n          if(arv.value === arvNumber.value.split(\"-\")[2]) return null\n          const patients = await Patientservice.findByOtherID(4, `${sitePrefix.value}-ARV-${arv.value}`);\n          return isEmpty(patients) ?  null : ['ARV Number already exists'];\n        },\n      },\n    })\n\n    const onFinish = async () => submitForm(form, async (formData) => {\n      if(formData.arvNumber !== arvNumber.value.split(\"-\")[2]){\n        if(hasValidARVNumber.value) {\n          await props.patient.updateARVNumber(`${sitePrefix.value}-ARV-${formData.arvNumber}`);\n        } else {\n          await props.patient.createArvNumber(`${sitePrefix.value}-ARV-${formData.arvNumber}`);\n        }\n        await modal.hide();\n        EventBus.emit(EmcEvents.RELOAD_PATIENT_DATA)\n      }\n    }) \n\n    const voidARV = async () => {\n      const confirm = await alertConfirmation(`Are you sure you want to void this ARV Number ${arvNumber.value}?`);\n      if(!confirm) return;\n      await loader.show(\"Voiding ARV Number...\");\n      try {\n        await ProgramService.voidARVNumber(arvNumber.value);\n        await loader.hide();\n        await modal.hide();\n        EventBus.emit(EmcEvents.RELOAD_PATIENT_DATA)\n      } catch (error) {\n        await loader.hide();\n        console.log(error)\n      } \n    }\n\n    onMounted(async () => {\n      sitePrefix.value = await GLOBAL_PROP.sitePrefix();\n      if (!hasValidARVNumber.value) {\n        const suggestedNumber = await ProgramService.getNextSuggestedARVNumber();\n        form.arvNumber.value = suggestedNumber.arv_number.replace(/^\\D+|\\s/g, \"\");\n      }\n    }) \n \n    return {\n      form,\n      modal,\n      sitePrefix,\n      arvNumber,\n      hasValidARVNumber,\n      onFinish,\n      voidARV,\n    };\n  },\n});\n","import { render } from \"./ArvNumber.vue?vue&type=template&id=40b7f06e&ts=true\"\nimport script from \"./ArvNumber.vue?vue&type=script&lang=ts\"\nexport * from \"./ArvNumber.vue?vue&type=script&lang=ts\"\n\nimport exportComponent from \"/home/daniel/local-repos/HIS-Core/node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","\nimport { computed, defineComponent, onMounted, ref } from \"vue\";\nimport HisDate from \"@/utils/Date\";\nimport { Patient } from \"@/interfaces/patient\";\nimport { RelationshipService } from \"@/services/relationship_service\";\nimport Layout from \"../Components/Layout.vue\";\nimport VisitsSummary from \"../Components/tables/VisitsSummary.vue\";\nimport InformationHeader from \"@/apps/EMC/Components/InformationHeader.vue\";\nimport { PatientObservationService } from \"@/services/patient_observation_service\";\nimport PatientDemographics from \"../Components/modals/PatientDemographics.vue\";\nimport GuardianDemographicsVue from \"../Components/modals/GuardianDemographics.vue\";\nimport ARVNumberVue from \"../Components/modals/ArvNumber.vue\";\nimport { useRoute } from \"vue-router\";\nimport EventBus from \"@/utils/EventBus\";\nimport { EmcEvents } from \"../interfaces/emc_event\";\nimport { modal } from \"@/utils/modal\";\nimport { isEmpty } from \"lodash\";\n\nexport default defineComponent({\n  components: {\n    Layout,\n    VisitsSummary,\n    InformationHeader,\n  },\n  setup () {\n    const route = useRoute();\n    const patientId = parseInt(route.params.patientId.toString()) || 0;\n    const patient = ref<PatientObservationService>();\n    const artStartDate = ref<string>(\"\");\n    const guardians = ref<string>(\"\");\n    const isReady = computed(() => !isEmpty(patient.value))\n\n    const setPatient = async () => {\n      if (patientId) {\n        const patientData: Patient = await PatientObservationService.findByID(patientId);\n        if(patientData) {\n          patient.value = new PatientObservationService(patientData);\n        }\n      }\n    };\n\n    const setPatientGuardian = async () => {\n      const relationship = await RelationshipService.getGuardianDetails(patientId);\n      guardians.value = relationship.map((r: any) => ` ${r.name} (${r.relationshipType})`).join(\", \");\n    }\n\n    const updateDemographics = async (attribute: string) => {\n      await modal.show(PatientDemographics, {\n        patientService: patient.value,\n        attribute,\n      });\n    }\n\n    const addGuardian = async () => {\n      await modal.show(GuardianDemographicsVue, {\n        patientId,\n      });\n    }\n\n    const updateARVNumber = async () => {\n      await modal.show(ARVNumberVue, {\n        patient: patient.value,\n      });\n    }\n\n    EventBus.on(EmcEvents.RELOAD_PATIENT_DATA,async () => {\n      await setPatient();\n    });\n    EventBus.on(EmcEvents.RELOAD_GUARDIAN_DATA, async () => {\n      await setPatientGuardian();\n    });\n\n    onMounted(async () => {\n      await setPatient();\n      const date = await patient.value?.getARTStartDate();\n      artStartDate.value = date ? HisDate.toStandardHisDisplayFormat(date) : \"N/A\";\n      await setPatientGuardian();\n    });\n\n    return {\n      patient,\n      artStartDate,\n      guardians,\n      isReady,\n      updateDemographics,\n      addGuardian,\n      updateARVNumber,\n    };\n  },\n});\n","import { render } from \"./Mastercard.vue?vue&type=template&id=61035d49&ts=true\"\nimport script from \"./Mastercard.vue?vue&type=script&lang=ts\"\nexport * from \"./Mastercard.vue?vue&type=script&lang=ts\"\n\nimport exportComponent from \"/home/daniel/local-repos/HIS-Core/node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","'use strict';\nvar isArray = require('../internals/is-array');\nvar toLength = require('../internals/to-length');\nvar bind = require('../internals/function-bind-context');\n\n// `FlattenIntoArray` abstract operation\n// https://tc39.github.io/proposal-flatMap/#sec-FlattenIntoArray\nvar flattenIntoArray = function (target, original, source, sourceLen, start, depth, mapper, thisArg) {\n  var targetIndex = start;\n  var sourceIndex = 0;\n  var mapFn = mapper ? bind(mapper, thisArg, 3) : false;\n  var element;\n\n  while (sourceIndex < sourceLen) {\n    if (sourceIndex in source) {\n      element = mapFn ? mapFn(source[sourceIndex], sourceIndex, original) : source[sourceIndex];\n\n      if (depth > 0 && isArray(element)) {\n        targetIndex = flattenIntoArray(target, original, element, toLength(element.length), targetIndex, depth - 1) - 1;\n      } else {\n        if (targetIndex >= 0x1FFFFFFFFFFFFF) throw TypeError('Exceed the acceptable array length');\n        target[targetIndex] = element;\n      }\n\n      targetIndex++;\n    }\n    sourceIndex++;\n  }\n  return targetIndex;\n};\n\nmodule.exports = flattenIntoArray;\n","var $ = require('../internals/export');\n\n// `Number.MAX_SAFE_INTEGER` constant\n// https://tc39.github.io/ecma262/#sec-number.max_safe_integer\n$({ target: 'Number', stat: true }, {\n  MAX_SAFE_INTEGER: 0x1FFFFFFFFFFFFF\n});\n","import { AppEncounterService } from \"@/services/app_encounter_service\";\nimport { isArray } from \"lodash\";\nimport { Option } from '@/components/Forms/FieldInterface';\nexport class VitalsService extends AppEncounterService{\n  constructor(patientID: number, providerID: number) {\n    super(patientID, 6, providerID);\n  }\n  isNotEmptyandNumber(vital: Option) {\n    return `${vital.value}`.match(/^-?\\d+\\.?\\d*$/) ? null : [`Invalid entry for ${vital.label}`]\n  }\n  isNotEmptyandFloat(vital: Option) {\n    return `${vital.value}`.match(/^\\d{1,3}\\.\\d{1,5}$/) \n      ? null \n      : [`Invalid entry for ${vital.label}. Don't forget to add a decimal. e.g. 56.2 ${vital.other?.modifier || ''}`]\n  }\n  checkMinMax(val: Option, min: number, max: number) {\n    const p = [];\n    if (parseFloat(`${val.value}`) < min) {\n      p.push([`${val.label} entered is less than minimum ${min} ${val?.other?.modifier || ''}`])\n    }\n    if (parseFloat(`${val.value}`) > max) {\n      p.push([`${val.label} entered is greater than maximum ${max} ${val?.other?.modifier || ''}`])\n    }\n    return p.length > 0 ? p : null;\n  }\n  validateAll(vitals: Option[]) {\n    const p: any = [];\n    vitals.map((vital: any) => {\n      const j = this.validator(vital);\n      return isArray(j) ? p.push(j) : null\n    })\n    return p.length > 0 ? p : null;\n  }\n\n  mergeErrors(errors: any[]) {\n    const holder: any = [];\n    errors.forEach(element => {\n      if (isArray(element)) {\n        holder.push(element)\n      }\n    });\n    return holder.length > 0 ? holder : null\n  }\n  isValidBPReading(vital: any) {\n    const p = [];\n    const isValidBP =  `${vital.value}`.match(/^\\d{1,3}\\/\\d{1,3}$/g) ? null : ['Invalid BP reading']\n    p.push(isValidBP);\n    if(isValidBP == null) {\n      const value = `${vital.value}`.split('/');\n      \n      const bpSystolic = {\n        label: 'Systolic',\n        value: value[0]\n      };\n      const bpDiastolic = {\n        label: 'Diastolic',\n        value: value[1]\n      };\n      p.push(this.checkMinMax(bpDiastolic, 30, 200))\n      p.push(this.checkMinMax(bpSystolic, 40, 250))\n    }\n    return this.mergeErrors(p)\n  }\n  validator(vital: Option) {\n    const values = [\n      {\n        name: \"Weight\",\n        validator: (val: Option) => {\n          const emptyErrors = this.isNotEmptyandFloat(val);\n          const minErrors = this.checkMinMax(val, 2.0, 250.0);\n          return this.mergeErrors([emptyErrors, minErrors]); \n        },\n      },\n      {\n        name: \"Height\",\n        validator: (val: Option) => {\n          const errors = []\n          errors.push(this.isNotEmptyandNumber(val))\n          errors.push(this.checkMinMax(val, 40, 220))\n          return this.mergeErrors(errors); \n        },\n      }, {\n        name: \"BP\",\n        validator: (val: any) => {\n          return this.isValidBPReading(val)\n        },\n      }, {\n        name: \"Temp\",\n        validator: (val: any) => {\n          const emptyErrors = this.isNotEmptyandNumber(val);\n          const minErrors = this.checkMinMax(val, 30, 42);\n          return this.mergeErrors([emptyErrors, minErrors]); \n        },\n      }, {\n        name: \"SP02\",\n        validator: (val: any) => {\n          const minErrors = this.checkMinMax(val, 40, 100);\n          return this.mergeErrors([minErrors]); \n        },\n      }, {\n        name: \"Pulse\",\n        validator: (val: any) => {\n          const minErrors = this.checkMinMax(val, 50, 120);\n          return this.mergeErrors([minErrors]); \n        },\n      }\n    ]\n    const v = values.filter(element => {\n      return element.name === vital.label;\n    });\n    if (v.length > 0) {\n      return v[0].validator(vital);\n    }\n    return null\n  }\n}","import { toDisplayString as _toDisplayString, createVNode as _createVNode, resolveComponent as _resolveComponent, createTextVNode as _createTextVNode, openBlock as _openBlock, createBlock as _createBlock, createCommentVNode as _createCommentVNode, withCtx as _withCtx, renderList as _renderList, Fragment as _Fragment, withScopeId as _withScopeId, pushScopeId as _pushScopeId, popScopeId as _popScopeId } from \"vue\"\nconst _withId = /*#__PURE__*/_withScopeId(\"data-v-66a24b01\")\n\n_pushScopeId(\"data-v-66a24b01\")\nconst _hoisted_1 = {\n  key: 0,\n  class: \"ion-float-right ion-margin-end checkbox-label\"\n}\nconst _hoisted_2 = { class: \"inner-input-box\" }\nconst _hoisted_3 = {\n  key: 0,\n  class: \"input-options\"\n}\nconst _hoisted_4 = { class: \"input-icon\" }\n_popScopeId()\n\nexport const render = /*#__PURE__*/_withId(function render(_ctx, _cache, $props, $setup, $data, $options) {\n  const _component_ion_checkbox = _resolveComponent(\"ion-checkbox\")\n  const _component_ion_label = _resolveComponent(\"ion-label\")\n  const _component_ion_input = _resolveComponent(\"ion-input\")\n  const _component_ion_icon = _resolveComponent(\"ion-icon\")\n  const _component_ion_chip = _resolveComponent(\"ion-chip\")\n  const _component_ion_item = _resolveComponent(\"ion-item\")\n  const _component_ion_list = _resolveComponent(\"ion-list\")\n  const _component_ion_note = _resolveComponent(\"ion-note\")\n\n  return (_openBlock(), _createBlock(_Fragment, null, [\n    (_ctx.model.label)\n      ? (_openBlock(), _createBlock(_component_ion_label, {\n          key: 0,\n          class: \"ion-padding-bottom bold\"\n        }, {\n          default: _withId(() => [\n            _createVNode(\"span\", null, _toDisplayString(_ctx.model.label), 1),\n            (_ctx.allowCustom)\n              ? (_openBlock(), _createBlock(\"span\", _hoisted_1, [\n                  _createTextVNode(\" Add Custom \" + _toDisplayString(_ctx.model.label) + \"? \", 1 /* TEXT */),\n                  _createVNode(_component_ion_checkbox, {\n                    modelValue: _ctx.isCustom,\n                    \"onUpdate:modelValue\": _cache[1] || (_cache[1] = $event => (_ctx.isCustom = $event)),\n                    onIonChange: _cache[2] || (_cache[2] = $event => (_ctx.model.value = ''))\n                  }, null, 8, [\"modelValue\"])\n                ]))\n              : _createCommentVNode(\"\", true)\n          ]),\n          _: 1\n        }))\n      : _createCommentVNode(\"\", true),\n    (_ctx.isCustom)\n      ? (_openBlock(), _createBlock(_component_ion_input, {\n          key: 1,\n          class: [\"box-input\", {'box-input-error': _ctx.model.error, 'ion-margin-top': _ctx.model.label }],\n          modelValue: _ctx.customOption,\n          \"onUpdate:modelValue\": _cache[3] || (_cache[3] = $event => (_ctx.customOption = $event)),\n          placeholder: _ctx.model.placeholder || _ctx.model.label,\n          disabled: _ctx.model.disabled,\n          onIonFocus: _cache[4] || (_cache[4] = () => _ctx.model.error = ''),\n          onIonBlur: _ctx.validate,\n          onIonInput: _ctx.onCustomValue\n        }, null, 8, [\"class\", \"modelValue\", \"placeholder\", \"disabled\", \"onIonBlur\", \"onIonInput\"]))\n      : (_openBlock(), _createBlock(\"div\", {\n          key: 2,\n          class: [\"outer-input-box box-input\", {'box-input-error': _ctx.model.error, 'ion-margin-top': _ctx.model.label }]\n        }, [\n          _createVNode(\"div\", _hoisted_2, [\n            _createVNode(\"div\", {\n              style: {\"display\":\"flex\",\"flex-wrap\":\"wrap\",\"width\":\"100%\"},\n              onClick: _cache[6] || (_cache[6] = (...args) => (_ctx.onShowOptions(...args)))\n            }, [\n              (_openBlock(true), _createBlock(_Fragment, null, _renderList(_ctx.tags, (tag, index) => {\n                return (_openBlock(), _createBlock(_component_ion_chip, { key: index }, {\n                  default: _withId(() => [\n                    _createVNode(_component_ion_label, null, {\n                      default: _withId(() => [\n                        _createTextVNode(_toDisplayString(tag.label), 1 /* TEXT */)\n                      ]),\n                      _: 2\n                    }, 1024),\n                    _createVNode(_component_ion_icon, {\n                      icon: _ctx.closeCircle,\n                      color: \"danger\",\n                      onClick: $event => (_ctx.diselect(tag)),\n                      style: {\"z-index\":\"20\"}\n                    }, null, 8, [\"icon\", \"onClick\"])\n                  ]),\n                  _: 2\n                }, 1024))\n              }), 128 /* KEYED_FRAGMENT */)),\n              _createVNode(_component_ion_input, {\n                disabled: _ctx.model.disabled,\n                placeholder: _ctx.showPlaceholder ? (_ctx.model.placeholder || 'select option') : '' ,\n                modelValue: _ctx.filter,\n                \"onUpdate:modelValue\": _cache[5] || (_cache[5] = $event => (_ctx.filter = $event)),\n                class: \"search-input\",\n                ref: \"searchInput\"\n              }, null, 8, [\"disabled\", \"placeholder\", \"modelValue\"])\n            ]),\n            (_ctx.showOptions)\n              ? (_openBlock(), _createBlock(\"div\", _hoisted_3, [\n                  _createVNode(_component_ion_list, null, {\n                    default: _withId(() => [\n                      (_openBlock(true), _createBlock(_Fragment, null, _renderList(_ctx.filteredOptions, (option, index) => {\n                        return (_openBlock(), _createBlock(_component_ion_item, {\n                          key: index,\n                          lines: index + 1 === _ctx.filteredOptions.length ? 'none' : '',\n                          onClick: $event => (_ctx.onSelect(option))\n                        }, {\n                          default: _withId(() => [\n                            (_ctx.multiple)\n                              ? (_openBlock(), _createBlock(_component_ion_checkbox, {\n                                  key: 0,\n                                  class: \"input-option-checkbox\",\n                                  slot: \"start\",\n                                  modelValue: option.isChecked,\n                                  \"onUpdate:modelValue\": $event => (option.isChecked = $event)\n                                }, null, 8, [\"modelValue\", \"onUpdate:modelValue\"]))\n                              : _createCommentVNode(\"\", true),\n                            _createVNode(_component_ion_label, null, {\n                              default: _withId(() => [\n                                _createTextVNode(_toDisplayString(option.label), 1 /* TEXT */)\n                              ]),\n                              _: 2\n                            }, 1024)\n                          ]),\n                          _: 2\n                        }, 1032, [\"lines\", \"onClick\"]))\n                      }), 128 /* KEYED_FRAGMENT */))\n                    ]),\n                    _: 1\n                  })\n                ]))\n              : _createCommentVNode(\"\", true),\n            _createVNode(\"div\", _hoisted_4, [\n              (_ctx.filter || _ctx.tags.length > 0)\n                ? (_openBlock(), _createBlock(_component_ion_icon, {\n                    key: 0,\n                    icon: _ctx.close,\n                    onClick: _ctx.onReset\n                  }, null, 8, [\"icon\", \"onClick\"]))\n                : _createCommentVNode(\"\", true),\n              _createVNode(_component_ion_icon, {\n                icon: _ctx.showOptions ? _ctx.chevronUp : _ctx.chevronDown,\n                onClick: _cache[7] || (_cache[7] = $event => (_ctx.showOptions ? _ctx.onCloseOptions() : _ctx.onShowOptions()))\n              }, null, 8, [\"icon\"])\n            ])\n          ])\n        ], 2)),\n    (_ctx.model.error)\n      ? (_openBlock(), _createBlock(_component_ion_note, {\n          key: 3,\n          color: \"danger\"\n        }, {\n          default: _withId(() => [\n            _createTextVNode(_toDisplayString(_ctx.model.error), 1 /* TEXT */)\n          ]),\n          _: 1\n        }))\n      : _createCommentVNode(\"\", true)\n  ], 64 /* STABLE_FRAGMENT */))\n})","\nimport { IonCheckbox, IonChip, IonIcon, IonInfiniteScroll, IonInfiniteScrollContent, IonInput, IonItem, IonLabel, IonList, IonNote } from \"@ionic/vue\";\nimport { computed, defineComponent, onBeforeUnmount, onMounted, PropType, ref, watch } from \"vue\";\nimport { DTForm, DTFormField } from \"../../interfaces/dt_form_field\";\nimport { Option } from '@/components/Forms/FieldInterface';\nimport { chevronDown, chevronUp, close, closeCircle } from \"ionicons/icons\"\nimport { isEmpty } from \"lodash\";\n\nexport default defineComponent({\n  name: \"SelectInput\",\n  props: {\n    modelValue: {\n      type: Object as PropType<DTFormField>,\n      default: () => ({}),\n    },\n    form: {\n      type: Object as PropType<DTForm>,\n      default: () => ({}),\n    },\n    options: {\n      type: Array as PropType<Option[]>,\n      default: () => [],\n    },\n    asyncOptions: {\n      type: Function as PropType<(filter: string, page: number) => Promise<Option[]> | Option[]>,\n      required: false,\n    },\n    allowCustom: {\n      type: Boolean,\n      default: false\n    },\n    disabled: {\n      type: Boolean,\n      default: false\n    },\n    multiple: {\n      type: Boolean,\n      default: false\n    },\n    infiniteScrolling: {\n      type: Boolean,\n      default: false\n    }\n  },\n  components: {\n    IonLabel,\n    IonInput,\n    IonNote,\n    IonIcon,\n    IonCheckbox,\n    IonList,\n    IonChip,\n    IonItem\n    // IonInfiniteScroll, \n    // IonInfiniteScrollContent\n  },\n  emits: [\"update:modelValue\"],\n  setup(props, { emit}) {\n    const isCustom = ref(false);\n    const customOption = ref('')\n    const selectedOption = ref<Option>();\n    const showOptions = ref(false)\n    const filter = ref('')\n    const filteredOptions = ref<Option[]>([])\n    const currentPage = ref(1)\n\n    const tags = computed<Option[]>(() => {\n      if(props.multiple) return filteredOptions.value.filter(({ isChecked }) => isChecked)\n      return selectedOption.value ? [ selectedOption.value ] : []\n    })\n\n    const showPlaceholder = computed(() => {\n      return !filter.value && isEmpty(tags.value) &&  !showOptions.value\n    })\n\n    const model = computed<DTFormField>({\n      get: () => props.modelValue as DTFormField,\n      set: (value) => emit(\"update:modelValue\", value)\n    })\n\n    const setDefaults = () => {\n      selectedOption.value = undefined\n      if(isEmpty(model.value.value)) return\n      if (Array.isArray(model.value.value) && props.multiple) {\n        console.log(model.value.value)\n        return model.value.value.forEach((option: Option) => {\n          const index = filteredOptions.value.findIndex(({ value }: Option) => value === option.value)\n          if(index === -1) {\n            filteredOptions.value.push({...option, isChecked: true})\n          } else {\n            filteredOptions.value[index].isChecked = true\n          }\n        })\n      }\n      const defaultOption = filteredOptions.value.find(option => option.value === model.value.value)\n      if (defaultOption) {\n        selectedOption.value = defaultOption\n      }else {\n        selectedOption.value = {\n          label: model.value.value,\n          value: model.value.value\n        }\n      }\n    }\n\n    const filterOptions = async () => {\n      const filtered = typeof props.asyncOptions === 'function' \n        ? await props.asyncOptions(filter.value, currentPage.value)\n        : props.options.filter(({label}) => label.toLowerCase().includes(filter.value.toLowerCase()))\n\n      tags.value.forEach(tag => {\n        const index = filtered.findIndex(f => f.value === tag.value)\n        if(index === -1) filtered.push(tag)\n        else filtered[index].isChecked = true\n      })\n      \n      filteredOptions.value = filtered\n    }\n\n    const pushMoreOptions = async (event: any) => {\n      if(props.infiniteScrolling && typeof props.asyncOptions === 'function'){\n        currentPage.value++;\n        const data = await props.asyncOptions(filter.value, currentPage.value);\n        if (data.length > 0) {\n          filteredOptions.value = [\n            ...filteredOptions.value, \n            ...data.filter(entry => !filteredOptions.value.find(item => item.value === entry.value))\n          ];\n        } else {\n          event.target.disabled = true\n        }        \n      }\n      event.target.complete();\n    }\n\n    const validate = async () => {\n      if (model.value.required && isEmpty(model.value.value)) {\n        return model.value.error = \"This field is required\";\n      }\n      if (model.value.validation) {\n        const errors = await model.value.validation({label: model.value.value, value: model.value.value}, props.form);\n        if (errors && errors.length) {\n          return model.value.error += errors.toString();\n        }\n      }\n      return model.value.error = \"\";\n    };\n\n    const onCloseOptions = () => {\n      showOptions.value = false;\n      model.value.value = props.multiple ? tags.value : !isEmpty(tags.value) ? tags.value[0] : undefined\n      filter.value = ''\n      validate()\n    }\n\n    const onShowOptions = () => {\n      if(model.value.disabled) return\n      showOptions.value = true\n      model.value.error = ''\n    }\n\n    const onCustomValue = () => {\n      model.value.value = {\n        label: customOption.value,\n        value: customOption.value\n      }\n    }\n\n    const onSelect = (item: Option) => {  \n      if(!props.multiple) {\n        selectedOption.value = item\n        onCloseOptions()\n      }\n      model.value.value = props.multiple ? tags.value : !isEmpty(tags.value) ? tags.value[0] : undefined\n      filter.value = ''\n    }\n\n    const diselect = (tag: Option) => {\n      if(props.multiple) return tag.isChecked = false\n      return selectedOption.value = undefined\n    }\n\n    const onReset = () => {\n      filter.value = '';\n      selectedOption.value = undefined;\n      filteredOptions.value.forEach(option => option.isChecked = false)\n    }\n\n    watch(filter, async() => {\n      currentPage.value++;\n      await filterOptions()\n    })\n\n    watch([() => props.options, () => props.asyncOptions], async () => filterOptions())\n\n    watch(() => props.modelValue.value, (v) => isEmpty(v) && setDefaults())\n\n    onMounted(async () => {\n      await filterOptions()\n      setDefaults()\n      addEventListener('click', (e: any) => {\n        const isClosest = e.target.closest('.inner-input-box')\n        if(!isClosest && showOptions.value) {\n          onCloseOptions()\n        }\n      })\n    });\n\n    onBeforeUnmount(() => removeEventListener('click', e => console.log(e)))\n\n    return {\n      validate,\n      onSelect,\n      onReset,\n      onShowOptions,\n      onCloseOptions,\n      diselect,\n      pushMoreOptions,\n      onCustomValue,\n      model,\n      customOption,\n      isCustom,\n      chevronDown,\n      chevronUp,\n      close,\n      closeCircle,\n      selectedOption,\n      showOptions,\n      showPlaceholder,\n      filteredOptions,\n      filter,\n      tags,\n    };\n  }\n});\n","import { render } from \"./SelectInput.vue?vue&type=template&id=66a24b01&scoped=true&ts=true\"\nimport script from \"./SelectInput.vue?vue&type=script&lang=ts\"\nexport * from \"./SelectInput.vue?vue&type=script&lang=ts\"\n\nimport \"./SelectInput.vue?vue&type=style&index=0&id=66a24b01&scoped=true&lang=css\"\n\nimport exportComponent from \"/home/daniel/local-repos/HIS-Core/node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-66a24b01\"]])\n\nexport default __exports__","'use strict';\nvar $ = require('../internals/export');\nvar $findIndex = require('../internals/array-iteration').findIndex;\nvar addToUnscopables = require('../internals/add-to-unscopables');\nvar arrayMethodUsesToLength = require('../internals/array-method-uses-to-length');\n\nvar FIND_INDEX = 'findIndex';\nvar SKIPS_HOLES = true;\n\nvar USES_TO_LENGTH = arrayMethodUsesToLength(FIND_INDEX);\n\n// Shouldn't skip holes\nif (FIND_INDEX in []) Array(1)[FIND_INDEX](function () { SKIPS_HOLES = false; });\n\n// `Array.prototype.findIndex` method\n// https://tc39.github.io/ecma262/#sec-array.prototype.findindex\n$({ target: 'Array', proto: true, forced: SKIPS_HOLES || !USES_TO_LENGTH }, {\n  findIndex: function findIndex(callbackfn /* , that = undefined */) {\n    return $findIndex(this, callbackfn, arguments.length > 1 ? arguments[1] : undefined);\n  }\n});\n\n// https://tc39.github.io/ecma262/#sec-array.prototype-@@unscopables\naddToUnscopables(FIND_INDEX);\n","export * from \"-!../../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../../../node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/index.js??ref--0-1!./PatientVisit.vue?vue&type=style&index=0&id=d4a81944&scoped=true&lang=css\"","import { Person } from \"@/interfaces/person\"\nimport { Service } from \"./service\"\n\nexport interface NewPerson {\n    person_id?: number;\n    given_name: string;\n    family_name: string;\n    gender: string;\n    birthdate: string;\n    birthdate_estimated: boolean;\n    home_district: string;\n    home_traditional_authority: string;\n    home_village: string;\n    current_district: string;\n    current_traditional_authority: string;\n    current_village: string;\n    landmark: string;\n    cell_phone_number: string;\n    occupation: string;\n    facility_name: string;\n    patient_type?: string;\n    relationship?: string;\n}\n\nexport class PersonService extends Service{\n    person: Person | NewPerson\n    constructor(person: NewPerson | Person){\n        super()\n        this.person = person\n    }\n\n    create() { return Service.postJson('/people', this.person) }\n\n    update(id: number) { return Service.putJson(`people/${id}`, {\n        ...this.person, 'program_id': Service.getProgramID()\n    })}\n\n    static searchFamilyName(name: string) {\n        return super.getJson('/search/family_name', {'search_string': name})\n    }\n\n    static searchGivenName(name: string) {\n        return super.getJson('/search/given_name', {'search_string': name})\n    }\n\n    static async getPersonFullName(personId: string | number) {\n        const names = await super.getJson(`/people/${personId}/names`)\n        return names && names.length ? names[0].given_name + ' ' + names[0].family_name : ''\n    }\n}\n","import { modalController } from \"@ionic/vue\";\n\nexport const modal = {\n  async show(component: any, componentProps?: Record<string, any>, cssClass = 'custom-modal', backdropDismiss = true) {\n    const m = await modalController.create({\n      component,\n      cssClass,\n      backdropDismiss,\n      componentProps,\n    });\n    m.present();\n    const { data } = await m.onWillDismiss();\n    if(data) return data;\n  },\n  async hide(data?: Record<string, any>) {\n    await modalController.dismiss(data);\n  }\n}","import { DrugInterface } from \"@/interfaces/Drug\";\nimport { DrugOrderService } from \"@/services/drug_order_service\";\nimport { Observation } from \"@/interfaces/observation\";\nimport HisDate from \"@/utils/Date\"\nimport { RegimenService } from \"@/services/regimen_service\";\nimport { isEmpty } from \"lodash\"\nimport { AppEncounterService } from \"@/services/app_encounter_service\"\n\nexport enum AdverseEffectsCategories {\n    CONTRAINDICATION = \"contraindication\",\n    SIDE_EFFECT = \"side_effect\"\n}\n\nexport class PrescriptionService extends AppEncounterService {\n    nextVisitInterval: number;\n    fastTrack: boolean;\n    regimenExtras: Array<Record<string, any>>;\n    hangingPills: Array<Record<string, any>>;\n    fastTrackMedications: Array<Record<string, any>>;\n    medicationOrders: Array<number>;\n    treatmentState: string;\n    contraindications: Record<string, any>;\n    sideEffects: Record<string, any>;\n    tptPrescriptionCount: number;\n    lastSideEffectDate: string;\n\n    constructor(patientID: number, providerID: number) {\n        super(patientID, 25, providerID) //TODO: Use encounter type reference name\n        this.nextVisitInterval = 0\n        this.fastTrack = false\n        this.regimenExtras = []\n        this.fastTrackMedications = []\n        this.hangingPills = []\n        this.medicationOrders = []\n        this.treatmentState = ''\n        this.contraindications = {}\n        this.sideEffects = {}\n        this.tptPrescriptionCount = 0\n        this.lastSideEffectDate = ''\n    }\n\n    setNextVisitInterval(nextVisitInterval: number) {\n        this.nextVisitInterval = nextVisitInterval\n    }\n\n    getHangingPills() {\n        return this.hangingPills\n    }\n\n    getMedicationOrders() {\n        return this.medicationOrders.map((i: number) => {\n            return AppEncounterService.getCachedConceptName(i)\n        })\n    }\n\n    getTptPrescriptionCount() {\n        return this.tptPrescriptionCount\n    }\n\n    getLastSideEffectDate() {\n        return this.lastSideEffectDate\n    }\n\n    getContraindications() { return this.contraindications }\n\n    getSideEffects() { return this.sideEffects }\n\n    getRegimenExtras() { return this.regimenExtras }\n\n    getPatientRegimens() { return RegimenService.getRegimens(this.patientID) }\n\n    getARVs() {\n        return RegimenService.getJson('arv_drugs')\n    }\n\n    getCustomIngridients() { return RegimenService.getCustomIngridients() }\n\n    getFastTrackMedications() { return this.fastTrackMedications }\n\n    getTreatmentState() { return this.treatmentState }\n\n    isFastTrack() { return this.fastTrack }\n\n    medicationOrdersAvailable() { return !isEmpty(this.medicationOrders) }\n\n    shouldPrescribeArvs() { \n        const arvs = AppEncounterService.getCachedConceptID(\"Antiretroviral drugs\")\n        return this.medicationOrders.includes(arvs)\n    }\n\n    shouldPrescribeExtras() {\n        const extras = AppEncounterService.getConceptsByCategory('art_extra_medication_order')\n        const extrasAvailable = extras.map((i: any) => this.medicationOrders.includes(i.concept_id))\n        return extrasAvailable.some(Boolean)\n    }\n\n    getRegimenStarterpack(regimenCode: number, patientWeight: number) {\n        const params = { weight: patientWeight, regimen: regimenCode }\n\n        return AppEncounterService.getJson(\n            `programs/${AppEncounterService.getProgramID()}/regimen_starter_packs`,\n            params\n        )\n    }\n\n    async getLvpDrugsByType(type: string, regimen: number) {\n        return AppEncounterService.getJson(\n            `programs/${AppEncounterService.getProgramID()}/regimens/${regimen}`,\n            {\n                'patient_id': this.patientID,\n                'lpv_drug_type': type\n            }\n        )\n    }\n\n    async loadContraindications() {\n        const contraindication = await AppEncounterService.getConceptID('Contraindications')\n        const obs = await AppEncounterService.getObs({\n            'concept_id': contraindication, 'person_id': this.patientID \n        })\n\n        obs.forEach((o: any) => {\n            const date = HisDate.toStandardHisFormat(o.obs_datetime)\n\n            if (!this.contraindications[date]) this.contraindications[date] = []\n\n            const concept = AppEncounterService.getCachedConceptName(o.value_coded)\n\n            this.contraindications[date].push(concept)\n        })\n    }\n\n    async loadDrugInduced() {\n        const drugInduced = await AppEncounterService.getConceptID('Drug induced')\n        const obs = await AppEncounterService.getObs({\n            'concept_id': drugInduced, 'person_id': this.patientID \n        })\n\n        if (!obs) return\n\n        obs.forEach((o: any) => {\n            const date = HisDate.toStandardHisFormat(o.obs_datetime)\n\n            if (!this.lastSideEffectDate) this.lastSideEffectDate = date\n\n            if (!o.value_drug || !o.value_coded) return\n\n            if (!this.sideEffects[date]) this.sideEffects[date] = {}\n\n            if (!this.sideEffects[date][o.value_drug]) this.sideEffects[date][o.value_drug] = []\n\n            const concept = AppEncounterService.getCachedConceptName(o.value_coded)\n\n            this.sideEffects[date][o.value_drug].push(concept)\n        })\n    }\n\n    async loadTptPrescriptionCount() {\n        const res = await AppEncounterService.getJson(\n            `tpt_prescription_count`, {\n                'patient_id': this.patientID,\n                'date': this.date\n            }\n        )\n\n        if (res) {\n            const count = res.count + 1\n            this.tptPrescriptionCount = count > 3 ? 3 : count\n        } \n    }\n\n    async loadFastTrackStatus() {\n        const isFastTrack = await AppEncounterService.getFirstValueCoded(this.patientID, 'Fast track')\n        const yes = await AppEncounterService.getConceptID('yes')\n\n        if (isFastTrack) this.fastTrack = isFastTrack === yes\n    }\n    \n    async loadRegimenExtras(date=this.date) {\n        const meds = await RegimenService.getJson(\n            `programs/${RegimenService.getProgramID()}/patients/${this.patientID}/dosages`,\n            {date}\n        )\n        if (meds) this.regimenExtras = Object.values(meds)\n    }\n\n    async loadMedicationOrders() {\n        const medicationOrders = await AppEncounterService.getConceptID(\"Medication orders\")\n        const orders = await AppEncounterService.getObs({\n            'concept_id': medicationOrders,\n            'date': this.date,\n            'person_id': this.patientID,\n            'page_size': 5\n        })\n        this.medicationOrders = orders.map((i: Observation) => i.value_coded)\n    }\n\n    async loadHangingPills() {\n        const pills = await AppEncounterService.getAll(this.patientID, 'Pills brought')\n        if (pills) {\n            this.hangingPills = pills.filter((o: any) => o.value_numeric >= 1 && o.order)\n                                    .map((o: any) => o.order.drug_order.drug_inventory_id)\n        }\n    }\n\n    async loadFastTrackMedications() {\n        const drugs = await DrugOrderService.getLastDrugsReceived(this.patientID)\n        const withDosages = drugs.map(async(data: any) => {\n            const { drug } = data\n            const dosage = await DrugOrderService.getDrugDosages(this.patientID, drug.drug_id)\n            return {\n                'drug_id': drug.drug_id,\n                'drug_name': drug.name,\n                'units': drug.units,\n                'am': dosage.am,\n                'noon': dosage.noon,\n                'pm': dosage.pm,\n                'frequency': data.frequency\n            }\n        })\n        this.fastTrackMedications = await Promise.all(withDosages)\n    }\n\n    async loadTreatmentState() {\n        const params = { date: this.date }\n\n        const req = await AppEncounterService.getJson(\n            `programs/${AppEncounterService.getProgramID()}/patients/${this.patientID}/status`,\n            params\n        )\n\n        if (req) this.treatmentState = req['status']\n    }\n\n    findAndGroupDrugSideEffects(drugs: Array<number>) {\n        const allSideEffects: any = {}\n\n        for (const date in this.sideEffects) {\n            const drugInduced = this.sideEffects[date]\n\n            for(const drug in drugInduced) {\n                if (!drugs.includes(parseInt(drug))) continue\n\n                if (!allSideEffects[date]) allSideEffects[date] = []\n\n                allSideEffects[date] = [\n                    ...allSideEffects[date], ...drugInduced[drug]\n                ]\n            }\n        }\n        return allSideEffects\n    }\n\n    calculatePillsPerDay(am: number, noon: number, pm: number) {\n        return parseFloat(am.toString()) + noon + pm\n    }\n\n    estimatePackSize(pillsPerDay: number, packSize=0) {\n        const packs = (pillsPerDay * this.nextVisitInterval) / packSize\n        \n        let roundedPacks = Math.round(packs)\n\n        if (roundedPacks <= 0) roundedPacks += 1\n\n        return roundedPacks\n    }\n\n    calculateDosage(morningTabs: number, eveningTabs: number): number {\n        let dose = 0\n        if (eveningTabs === 0) dose = morningTabs\n\n        if (morningTabs == 0) dose = eveningTabs\n\n        if (morningTabs > 0 && eveningTabs  > 0) {\n            dose = (morningTabs + eveningTabs) / 2\n        }\n        return dose\n    }\n    \n    calculateEquivalentDosage(morningTabs: number, eveningTabs: number): number {\n        return morningTabs + eveningTabs\n    }\n\n    calculateDateFromInterval() {\n        const dateObj = new Date(this.date)\n        dateObj.setDate(dateObj.getDate() + this.nextVisitInterval)\n        return HisDate.toStandardHisFormat(dateObj)\n    }\n\n    getDrugPackSize(drug: any) {\n        if (drug.pack_size) return drug.pack_size\n        try{\n            return drug.barcodes[0].tabs\n        }catch(e) {\n            return 30\n        }\n    }\n\n    getInstructions(drugName: string, morningTabs: number, eveningTabs: number, units: string): string {\n        return `${drugName} :- Morning: ${morningTabs} ${units}, Evening: ${eveningTabs} ${units}`\n    }\n\n    toOrderObj(id: number, name: string, units: string, am=0, pm=0, frequency=''): DrugInterface {\n        return {\n            'drug_inventory_id': id,\n            'equivalent_daily_dose': this.calculateEquivalentDosage(am, pm),\n            'start_date': this.date,\n            'auto_expire_date': this.calculateDateFromInterval(), \n            'units': units,\n            'instructions': this.getInstructions(name, am, pm, units),\n            'dose': this.calculateDosage(am, pm),\n            'frequency': frequency\n        }\n    }\n\n    async getReasonForRegimenSwitch() {\n        const reason = await AppEncounterService.getFirstValueText(this.patientID, 'Reason for ARV switch')\n        return reason ? reason : 'N/A'\n    }\n\n    async createDrugOrder(drugOrders: Array<DrugInterface>) {\n        return DrugOrderService.create({\n            'encounter_id': this.encounterID,\n            'drug_orders': drugOrders\n        })\n    }\n\n    async createHangingPillsObs(response: string) {\n        return this.saveValueTextObs('appointment type', response)\n    }\n\n    async createRegimenSwitchObs(reasonForSwitch: string): Promise<Observation> {\n        return this.saveValueTextObs('Reason for ARV switch', reasonForSwitch)\n    }\n}\n","export * from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../../node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/index.js??ref--0-1!./InformationHeader.vue?vue&type=style&index=0&id=22f18bd2&scoped=true&lang=css\"","import {LocationService} from \"@/services/location_service\"\nimport { Option } from \"@/components/Forms/FieldInterface\"\nimport { isEmpty } from \"lodash\"\n\nexport async function getFacilities(filter=''): Promise<Option[]> {\n    const facilities = await LocationService.getFacilities({name: filter})\n    return facilities.filter((f: any) => !isEmpty(f) && f.name.trim() !='')\n        .map((facility: any) => ({\n            label: facility.name,\n            value: facility.location_id,\n            other: facility\n        }))\n}\n\nexport async function getLabFacilities(filter=''): Promise<Option[]> {\n    const facilities = await LocationService.getLabs({'search_name': filter})\n    return facilities.map((facility: any) => ({\n            label: facility,\n            value: facility\n        }))\n}\n\nexport async function getFacilityWards(filter=''): Promise<Option[]> {\n    const wards = await LocationService.getFacilities({\n        name: filter,\n        tag: 'Facility adult sections'\n    })\n\n    return wards.map((ward: any) => ({\n        label: ward.name,\n        value: ward.name,\n        other: ward\n    }))\n}\n\nexport async function getSpecialistClinics(): Promise<Option[]> {\n    const clinics = await LocationService.getSpecialistClinics()\n    return clinics.map((clinic: any) => ({\n        label: clinic.name,\n        value: clinic.name,\n        other: clinic\n    }))\n}\n\nexport async function getRegions(): Promise<Option[]> {\n    const regions = await LocationService.getRegions()\n    return regions.map((region: any) => ({\n        label: region.name,\n        value: region.region_id,\n        other: region\n    }))\n}\n\nexport async function getDistricts(regionID: number): Promise<Option[]> {\n    const districts = await LocationService.getDistricts(regionID)\n    return districts.map((district: any) => ({\n        label: district.name,\n        value: district.district_id,\n        other: district\n    }))\n}\n\nexport async function getTraditionalAuthorities(districtID: number, name=''): Promise<Option[]> {\n    const TAs = await LocationService.getTraditionalAuthorities(districtID, name)\n    return TAs.map((TA: any) => ({\n        label: TA.name,\n        value: TA.traditional_authority_id,\n        other: TA\n    }))\n}\n\nexport async function getVillages(traditionalAuthorityID: number, name=''): Promise<Option[]> {\n    const villages = await LocationService.getVillages(traditionalAuthorityID, name)\n    return villages.map((village: any) => ({\n        label: village.name,\n        value: village.village_id,\n        other: village\n    }))\n}\n\nexport async function getVillagesByName(name='a', page=1): Promise<Option[]> {\n    const villages = await LocationService.getVillagesByName(name, page)\n    return villages.map((village: any) => ({\n        label: village.name,\n        value: village.village_id,\n        other: village\n    }))\n}\n\nexport function getLandmarks(): Option[] {\n    const landmarks = [\n        'Catholic Church',\n        'CCAP',\n        'Seventh Day',\n        'Mosque',\n        'Primary School',\n        'Borehole',\n        'Secondary School',\n        'College',\n        'Market',\n        'Football Ground',\n        'Other'\n    ]\n\n    return landmarks.map(landmark =>({\n        label: landmark,\n        value: landmark,\n        other: {\n            code: landmark\n        }\n    }))\n}\n","import { toDisplayString as _toDisplayString, createTextVNode as _createTextVNode, resolveComponent as _resolveComponent, withCtx as _withCtx, createVNode as _createVNode, openBlock as _openBlock, createBlock as _createBlock, createCommentVNode as _createCommentVNode, Fragment as _Fragment } from \"vue\"\n\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  const _component_ion_label = _resolveComponent(\"ion-label\")\n  const _component_ion_input = _resolveComponent(\"ion-input\")\n  const _component_ion_note = _resolveComponent(\"ion-note\")\n\n  return (_openBlock(), _createBlock(_Fragment, null, [\n    (_ctx.model.label)\n      ? (_openBlock(), _createBlock(_component_ion_label, {\n          key: 0,\n          class: \" ion-padding-bottom bold\"\n        }, {\n          default: _withCtx(() => [\n            _createTextVNode(_toDisplayString(_ctx.model.label), 1 /* TEXT */)\n          ]),\n          _: 1\n        }))\n      : _createCommentVNode(\"\", true),\n    _createVNode(_component_ion_input, {\n      type: \"number\",\n      class: [\"ion-margin-top\", _ctx.model.error ? 'box-input-error'  : 'box-input'],\n      modelValue: _ctx.model.value,\n      \"onUpdate:modelValue\": _cache[1] || (_cache[1] = $event => (_ctx.model.value = $event)),\n      placeholder: _ctx.model.placeholder,\n      disabled: _ctx.model.disabled,\n      onIonFocus: _cache[2] || (_cache[2] = $event => (_ctx.model.error = '')),\n      onIonBlur: _ctx.validate,\n      min: _ctx.min,\n      max: _ctx.max\n    }, null, 8, [\"class\", \"modelValue\", \"placeholder\", \"disabled\", \"onIonBlur\", \"min\", \"max\"]),\n    (_ctx.model.error)\n      ? (_openBlock(), _createBlock(_component_ion_note, {\n          key: 1,\n          color: \"danger\"\n        }, {\n          default: _withCtx(() => [\n            _createTextVNode(_toDisplayString(_ctx.model.error), 1 /* TEXT */)\n          ]),\n          _: 1\n        }))\n      : _createCommentVNode(\"\", true)\n  ], 64 /* STABLE_FRAGMENT */))\n}","\nimport { IonInput, IonLabel, IonNote } from \"@ionic/vue\";\nimport { computed, defineComponent, PropType } from \"vue\";\nimport { DTForm, DTFormField } from \"../../interfaces/dt_form_field\";\n\nexport default defineComponent({\n  name: \"NumberInput\",\n  props: {\n    modelValue: {\n      type: Object as PropType<DTFormField>,\n      default: () => ({}),\n    },\n    form: {\n      type: Object as PropType<DTForm>,\n      default: () => ({}),\n    },\n    min: {\n      type: Number,\n      default: null\n    },\n    max: {\n      type: Number,\n      default: null\n    }\n  },\n  components: {\n    IonLabel,\n    IonInput,\n    IonNote\n  },\n  emits: [\"update:modelValue\"],\n  setup(props, { emit}) {\n    const model = computed({\n      get: () => props.modelValue,\n      set: (value) => emit(\"update:modelValue\", value)\n    })\n\n    const validate = async () => {\n      if (model.value.required && !model.value.value) {\n        return model.value.error = \"This field is required\";\n      }\n      if (model.value.validation) {\n        const errors = await model.value.validation({label: model.value.value, value: model.value.value}, props.form);\n        if (errors && errors.length) {\n          return model.value.error += errors.toString();\n        }\n      }\n      return model.value.error = \"\";\n    };\n\n    return {\n      validate,\n      model,\n    };\n  }\n});\n","import { render } from \"./NumberInput.vue?vue&type=template&id=48a45354&ts=true\"\nimport script from \"./NumberInput.vue?vue&type=script&lang=ts\"\nexport * from \"./NumberInput.vue?vue&type=script&lang=ts\"\n\nimport exportComponent from \"/home/daniel/local-repos/HIS-Core/node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__"],"sourceRoot":""}