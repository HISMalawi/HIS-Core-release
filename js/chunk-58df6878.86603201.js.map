{"version":3,"sources":["webpack:///./node_modules/core-js/internals/delete-property-or-throw.js","webpack:///./src/apps/OPD/views/encounters/Prescription.vue?f285","webpack:///./src/apps/OPD/components/PredefinedMalariaDrug.vue?1045","webpack:///./src/apps/OPD/components/PredefinedMalariaDrug.vue","webpack:///./src/apps/OPD/components/PredefinedMalariaDrug.vue?039b","webpack:///./src/apps/OPD/components/PrescriptionFrequency.vue?41bd","webpack:///./src/apps/OPD/components/PrescriptionFrequency.vue","webpack:///./src/apps/OPD/components/PrescriptionFrequency.vue?045d","webpack:///./src/apps/OPD/components/PrescriptionKeypad.vue?f671","webpack:///./src/apps/OPD/components/PrescriptionKeypad.vue","webpack:///./src/apps/OPD/components/PrescriptionKeypad.vue?5b18","webpack:///./src/apps/OPD/views/encounters/Prescription.vue","webpack:///./src/apps/OPD/views/encounters/Prescription.vue?1827","webpack:///./src/components/FormElements/BaseTextInput.vue?9820","webpack:///./src/components/FormElements/BaseTextInput.vue","webpack:///./src/components/FormElements/BaseTextInput.vue?557a","webpack:///./node_modules/core-js/modules/es.array.unshift.js","webpack:///./src/components/FormElements/FieldMixin.vue","webpack:///./src/components/FormElements/FieldMixin.vue?54d8","webpack:///./src/apps/OPD/components/PrescriptionKeypad.vue?145c","webpack:///./src/services/drug_order_service.ts","webpack:///./src/guidelines/encounter_guidelines.ts","webpack:///./src/views/EncounterMixin.vue","webpack:///./src/views/EncounterMixin.vue?83cf","webpack:///./src/apps/OPD/components/PredefinedMalariaDrug.vue?b331","webpack:///./src/services/drug_service.ts","webpack:///./src/components/Forms/HisStandardForm.vue?8e31","webpack:///./src/components/Forms/HisStandardForm.vue","webpack:///./src/components/Forms/HisStandardForm.vue?0184","webpack:///./src/components/FormElements/BaseTextInput.vue?9338","webpack:///./src/apps/OPD/components/PrescriptionFrequency.vue?b28c","webpack:///./src/apps/OPD/services/drug_prescription_service.ts","webpack:///./src/utils/GuidelineEngine.ts","webpack:///./src/apps/OPD/views/encounters/Prescription.vue?e292","webpack:///./src/components/Keyboard/HisKeyboard.vue?dcb9","webpack:///./src/components/Keyboard/HisKeyboard.vue","webpack:///./src/components/Keyboard/HisKeyboard.vue?8681"],"names":["tryToString","$TypeError","TypeError","module","exports","O","P","_withScopeId","n","_pushScopeId","_popScopeId","_hoisted_1","style","_hoisted_2","id","class","_hoisted_3","_hoisted_4","_createElementVNode","_hoisted_5","_hoisted_6","_hoisted_7","_hoisted_8","_hoisted_9","_hoisted_10","key","render","_ctx","_cache","$props","$setup","$data","$options","_component_ion_input","_resolveComponent","_component_ion_icon","_component_ion_button","_component_his_text_input","_component_ion_text","_component_ion_label","_component_ion_checkbox","_component_ion_item","_component_ion_list","_component_ion_infinite_scroll_content","_component_ion_infinite_scroll","_component_ion_content","_component_view_port","_component_his_keyboard","_component_prescription_frequency","_component_prescription_keypad","_component_ion_toolbar","_component_ion_footer","_openBlock","_createElementBlock","_Fragment","_renderList","checkedItems","item","index","_toDisplayString","label","_createVNode","readonly","placeholder","value","other","frequency","dosage","duration","onClick","$event","unCheck","color","default","_withCtx","icon","trash","_","switchKeyboard","_createBlock","selected","onOnValue","onKBValue","_normalizeClass","disableScroll","listData","entry","isChecked","lines","_createTextVNode","description","text","_createCommentVNode","slot","modelValue","onIonChange","onSelect","disabled","onIonInfinite","pushData","threshold","kbConfig","keyboard","onKeyPress","keypress","list","onFrequencyKeypress","frequencyKeypress","dosageKeypress","title","isComplete","durationKeypress","cancelDestination","size","predefinedMalariaDrug","clearPrescription","disableNextBtn","savePrescription","_component_ion_title","_component_ion_header","overflowY","background","items","wrapTxt","innerHTML","submitData","closeModal","defineComponent","name","props","type","Object","required","Function","console","log","methods","val","modalController","dismiss","data","content","artStartDate","monthsOnART","lastOrder","currentRegimen","regimenStartDate","components","IonHeader","IonToolbar","IonTitle","IonContent","IonFooter","IonButton","__exports__","_component_snap","_component_center","_component_ion_radio","_component_ion_radio_group","activeLabel","IonList","IonItem","IonRadio","IonRadioGroup","String","this","$emit","_component_base_keyboard","btnSize","layout","keypad","BaseKeyboard","preset","strictNumbers","Boolean","PRESCRIPTION_KEYPAD","watch","handler","toString","immediate","includes","handleVirtualInput","parseInt","mixins","FieldMixinVue","EncounterMixinVue","PrescriptionKeypad","IonCheckbox","IonText","ViewPort","HisTextInput","IonLabel","HisKeyboard","IonInfiniteScroll","IonInfiniteScrollContent","PrescriptionFrequency","QWERTY","filter2","selectedItems","malariaDrug","prescriptionService","page","limit","DRUG_FREQUENCIES","map","f","showMalariaDrugs","hasMalaria","confirmBtn","newValue","forEach","find","deep","getListData","findIndex","push","mounted","init","activated","DrugPrescriptionService","patientID","providerID","loadDrugs","match","inputFieldType","event","length","filter","target","complete","toastWarning","alertConfirmation","modal","create","component","PredefinedMalariaDrugModal","backdropDismiss","cssClass","componentProps","ANTI_MALARIA_DRUGS","drug","dose_strength","units","drug_id","async","attributes","nodeValue","split","malaria_drugs","x","unshift","present","$nextTick","drugOrders","mapToOrders","encounter","createEncounter","drugOrder","createDrugOrder","toastSuccess","printVisitSummary","nextTask","$router","error","startDate","getSessionDate","calculateExpireDate","code","date","Date","setDate","getDate","HisDate","toStandardHisFormat","lbl","PatientPrintoutService","printVisitSummaryLbl","created","ref","readOnly","autocapitalize","IonInput","setup","activePlatformProfile","usePlatform","computed","$","toObject","lengthOfArrayLike","setArrayLength","deletePropertyOrThrow","doesNotExceedSafeInteger","INCORRECT_RESULT","SILENT_ON_NON_WRITABLE_LENGTH","defineProperty","writable","proto","arity","forced","len","argCount","arguments","k","to","j","emits","config","defaultValue","fdata","cdata","options","activationState","onValue","onValueUpdate","footerButtonEvent","DrugOrderService","Service","constructor","super","orders","postJson","getProgramID","dispensations","order","getJson","pageSize","drugID","params","patientId","FlowState","dformat","d","toStandardHisDisplayFormat","ENCOUNTER_GUIDELINES","priority","actions","alert","outcomeStartDate","action","infoActionSheet","GO_TO_PATIENT_DASHBOARD","CHANGE_PATIENT_OUTCOME","CONTINUE","conditions","outcome","sessionDate","birthDate","CHANGE_SESSION_DATE","selection","providers","encounterName","apiDate","optionsActionSheet","role","flowState","SET_PROVIDER","isBdeMode","isBDE","HisStandardForm","offlineID","patient","fields","facts","age","gender","isEnrolledInProgam","village","district","currentTA","formLabel","ready","$route","patient_id","goOffline","initOfflineData","Store","get","then","patientData","isEmpty","Offline","cachePatient","setEncounterFacts","checkEncounterGuidelines","catch","e","patientDashboardUrl","isOnline","isOfflineMode","offline","findByID","person","personParams","birthdate","dayjs","ProgramService","diff","current_district","current_village","current_traditional_authority","status","obs","resolveObs","computedData","enc","AppEncounterService","encounterTypeID","saveObservationList","callback","test","toastDanger","saveObsOffline","observations","uploadStatus","meta","formData","labOrders","skipNextTask","runflowState","state","states","username","provider","person_id","EXIT","gotoPatientDashboard","findings","matchToGuidelines","finding","program","programID","getCurrentTA","getCurrentDistrict","getCurrentVillage","getCachedApiDate","getBirthdate","getAge","toUpperCase","sort","a","b","usernameA","usernameB","p","names","latestName","given_name","family_name","toOption","mapStrToOptions","i","path","yesNoOptions","toYesNoOption","values","mapOptions","option","toConditionalOptions","final","yesNoUnknownOptions","tag","reduce","accum","cur","Array","isArray","concat","Promise","all","inArray","arr","expression","validateSeries","condition","DrugService","_resolveDynamicComponent","formType","skipSummary","activeField","cancelDestinationPath","onOnFinish","onFinish","onFinishAction","onOnIndex","onIndex","TouchScreenForm","drugs","getDrugs","malariaTestResult","OrderService","getLatestMalariaTestResult","primaryDiagnosis","getAllValueCoded","secondaryDiagnosis","encounterID","isCondition","ignored","undefined","prop","every","sortByPriority","sortByWeight","weight","guidelines","targetEvent","sortBy","matches","guidelineIndex","targetValidations","some","info","activeLayout","initalKeyboardName","isFunctionKey","kbIndex","KEY_BTN_NAV","btn","indexOf"],"mappings":"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","file":"js/chunk-58df6878.86603201.js","sourcesContent":["'use strict';\nvar tryToString = require('../internals/try-to-string');\n\nvar $TypeError = TypeError;\n\nmodule.exports = function (O, P) {\n  if (!delete O[P]) throw $TypeError('Cannot delete property ' + tryToString(P) + ' of ' + tryToString(O));\n};\n","import { createElementVNode as _createElementVNode, renderList as _renderList, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock, toDisplayString as _toDisplayString, resolveComponent as _resolveComponent, createVNode as _createVNode, withCtx as _withCtx, createTextVNode as _createTextVNode, createBlock as _createBlock, createCommentVNode as _createCommentVNode, normalizeClass as _normalizeClass, pushScopeId as _pushScopeId, popScopeId as _popScopeId } from \"vue\"\n\nconst _withScopeId = n => (_pushScopeId(\"data-v-7f0a557e\"),n=n(),_popScopeId(),n)\nconst _hoisted_1 = { style: {\"width\":\"97.8%\",\"margin\":\"auto\"} }\nconst _hoisted_2 = {\n  id: \"cummulative\",\n  class: \"cummulative_hight\",\n  style: {\"border\":\"1px solid #999\",\"border-bottom\":\"none\",\"background-color\":\"#f6f2ca\",\"height\":\"25vh\",\"overflow\":\"auto\",\"padding\":\"5px\"}\n}\nconst _hoisted_3 = { style: {\"width\":\"100%\"} }\nconst _hoisted_4 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"thead\", null, [\n  /*#__PURE__*/_createElementVNode(\"tr\", null, [\n    /*#__PURE__*/_createElementVNode(\"th\", null, \"Drug\"),\n    /*#__PURE__*/_createElementVNode(\"th\", null, \"Frequency\"),\n    /*#__PURE__*/_createElementVNode(\"th\", null, \"Dosage\"),\n    /*#__PURE__*/_createElementVNode(\"th\", null, \"Duration\"),\n    /*#__PURE__*/_createElementVNode(\"th\")\n  ])\n], -1))\nconst _hoisted_5 = { class: \"dosage-input\" }\nconst _hoisted_6 = { class: \"dosage-input\" }\nconst _hoisted_7 = { class: \"dosage-input\" }\nconst _hoisted_8 = { class: \"dosage-input\" }\nconst _hoisted_9 = [\"onClick\"]\nconst _hoisted_10 = {\n  key: 2,\n  class: \"content\"\n}\n\nexport function render(_ctx: any,_cache: any,$props: any,$setup: any,$data: any,$options: any) {\n  const _component_ion_input = _resolveComponent(\"ion-input\")!\n  const _component_ion_icon = _resolveComponent(\"ion-icon\")!\n  const _component_ion_button = _resolveComponent(\"ion-button\")!\n  const _component_his_text_input = _resolveComponent(\"his-text-input\")!\n  const _component_ion_text = _resolveComponent(\"ion-text\")!\n  const _component_ion_label = _resolveComponent(\"ion-label\")!\n  const _component_ion_checkbox = _resolveComponent(\"ion-checkbox\")!\n  const _component_ion_item = _resolveComponent(\"ion-item\")!\n  const _component_ion_list = _resolveComponent(\"ion-list\")!\n  const _component_ion_infinite_scroll_content = _resolveComponent(\"ion-infinite-scroll-content\")!\n  const _component_ion_infinite_scroll = _resolveComponent(\"ion-infinite-scroll\")!\n  const _component_ion_content = _resolveComponent(\"ion-content\")!\n  const _component_view_port = _resolveComponent(\"view-port\")!\n  const _component_his_keyboard = _resolveComponent(\"his-keyboard\")!\n  const _component_prescription_frequency = _resolveComponent(\"prescription-frequency\")!\n  const _component_prescription_keypad = _resolveComponent(\"prescription-keypad\")!\n  const _component_ion_toolbar = _resolveComponent(\"ion-toolbar\")!\n  const _component_ion_footer = _resolveComponent(\"ion-footer\")!\n\n  return (_openBlock(), _createElementBlock(_Fragment, null, [\n    _createElementVNode(\"div\", null, [\n      _createElementVNode(\"div\", _hoisted_1, [\n        _createElementVNode(\"div\", _hoisted_2, [\n          _createElementVNode(\"table\", _hoisted_3, [\n            _hoisted_4,\n            _createElementVNode(\"tbody\", null, [\n              (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(_ctx.checkedItems, (item, index) => {\n                return (_openBlock(), _createElementBlock(\"tr\", { key: index }, [\n                  _createElementVNode(\"td\", _hoisted_5, [\n                    _createElementVNode(\"b\", null, _toDisplayString(item.label), 1)\n                  ]),\n                  _createElementVNode(\"td\", _hoisted_6, [\n                    _createVNode(_component_ion_input, {\n                      readonly: \"\",\n                      placeholder: \"Add frequency..\",\n                      value: item.other.frequency\n                    }, null, 8, [\"value\"])\n                  ]),\n                  _createElementVNode(\"td\", _hoisted_7, [\n                    _createVNode(_component_ion_input, {\n                      readonly: \"\",\n                      placeholder: \"Add dosage..\",\n                      value: item.other.dosage\n                    }, null, 8, [\"value\"])\n                  ]),\n                  _createElementVNode(\"td\", _hoisted_8, [\n                    _createVNode(_component_ion_input, {\n                      readonly: \"\",\n                      placeholder: \"Add duration..\",\n                      value: item.other.duration\n                    }, null, 8, [\"value\"])\n                  ]),\n                  _createElementVNode(\"td\", {\n                    class: \"dosage-input\",\n                    onClick: ($event: any) => (_ctx.unCheck(item))\n                  }, [\n                    _createVNode(_component_ion_button, { color: \"danger\" }, {\n                      default: _withCtx(() => [\n                        _createVNode(_component_ion_icon, { icon: _ctx.trash }, null, 8, [\"icon\"])\n                      ]),\n                      _: 1\n                    })\n                  ], 8, _hoisted_9)\n                ]))\n              }), 128))\n            ])\n          ])\n        ])\n      ]),\n      (_ctx.switchKeyboard)\n        ? (_openBlock(), _createBlock(_component_view_port, {\n            key: 0,\n            style: {\"margin-top\":\"0px\",\"height\":\"37vh\"}\n          }, {\n            default: _withCtx(() => [\n              _createVNode(_component_his_text_input, {\n                value: _ctx.selected,\n                onOnValue: _ctx.onKBValue\n              }, null, 8, [\"value\", \"onOnValue\"]),\n              _createVNode(_component_ion_content, {\n                style: {\"width\":\"100%\"},\n                class: \"ion-padding-bottom\"\n              }, {\n                default: _withCtx(() => [\n                  _createElementVNode(\"div\", {\n                    class: _normalizeClass([\"ion-content-scroll-host\", {'ion-margin-bottom ion-padding-bottom': _ctx.disableScroll}])\n                  }, [\n                    _createVNode(_component_ion_list, {\n                      class: _normalizeClass([\"view-port-content\", {'ion-margin-bottom': _ctx.disableScroll}])\n                    }, {\n                      default: _withCtx(() => [\n                        (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(_ctx.listData, (entry, index) => {\n                          return (_openBlock(), _createBlock(_component_ion_item, {\n                            key: index,\n                            color: entry.isChecked ? 'lightblue':'',\n                            lines: entry.isChecked ? 'none':''\n                          }, {\n                            default: _withCtx(() => [\n                              _createVNode(_component_ion_label, null, {\n                                default: _withCtx(() => [\n                                  _createVNode(_component_ion_text, { class: \"his-md-text\" }, {\n                                    default: _withCtx(() => [\n                                      _createTextVNode(_toDisplayString(entry.label), 1)\n                                    ]),\n                                    _: 2\n                                  }, 1024),\n                                  (entry.description && entry.isChecked)\n                                    ? (_openBlock(), _createBlock(_component_ion_text, {\n                                        key: 0,\n                                        color: entry.description?.color\n                                      }, {\n                                        default: _withCtx(() => [\n                                          _createElementVNode(\"p\", null, [\n                                            _createElementVNode(\"i\", null, _toDisplayString(entry.description.text), 1)\n                                          ])\n                                        ]),\n                                        _: 2\n                                      }, 1032, [\"color\"]))\n                                    : _createCommentVNode(\"\", true)\n                                ]),\n                                _: 2\n                              }, 1024),\n                              _createVNode(_component_ion_checkbox, {\n                                slot: \"start\",\n                                modelValue: entry.isChecked,\n                                \"onUpdate:modelValue\": ($event: any) => ((entry.isChecked) = $event),\n                                onIonChange: ($event: any) => (_ctx.onSelect(entry, $event)),\n                                disabled: entry.disabled\n                              }, null, 8, [\"modelValue\", \"onUpdate:modelValue\", \"onIonChange\", \"disabled\"])\n                            ]),\n                            _: 2\n                          }, 1032, [\"color\", \"lines\"]))\n                        }), 128))\n                      ]),\n                      _: 1\n                    }, 8, [\"class\"]),\n                    _createVNode(_component_ion_infinite_scroll, {\n                      onIonInfinite: _cache[0] || (_cache[0] = ($event: any) => (_ctx.pushData($event))),\n                      threshold: \"100px\",\n                      disabled: _ctx.disableScroll\n                    }, {\n                      default: _withCtx(() => [\n                        _createVNode(_component_ion_infinite_scroll_content, {\n                          \"loading-spinner\": \"crescent\",\n                          \"loading-text\": \"Loading more data...\"\n                        })\n                      ]),\n                      _: 1\n                    }, 8, [\"disabled\"])\n                  ], 2)\n                ]),\n                _: 1\n              })\n            ]),\n            _: 1\n          }))\n        : _createCommentVNode(\"\", true),\n      (_ctx.switchKeyboard)\n        ? (_openBlock(), _createBlock(_component_his_keyboard, {\n            key: 1,\n            kbConfig: _ctx.keyboard,\n            onKeyPress: _ctx.keypress\n          }, null, 8, [\"kbConfig\", \"onKeyPress\"]))\n        : _createCommentVNode(\"\", true),\n      (!_ctx.switchKeyboard)\n        ? (_openBlock(), _createElementBlock(\"div\", _hoisted_10, [\n            _createVNode(_component_prescription_frequency, {\n              list: _ctx.list,\n              onFrequencyKeypress: _cache[1] || (_cache[1] = ($event: any) => (_ctx.label = $event)),\n              onClick: _cache[2] || (_cache[2] = ($event: any) => (_ctx.frequencyKeypress()))\n            }, null, 8, [\"list\"]),\n            _createVNode(_component_prescription_keypad, {\n              onKeyPress: _ctx.dosageKeypress,\n              title: 'Dosage',\n              onClick: _ctx.isComplete\n            }, null, 8, [\"onKeyPress\", \"onClick\"]),\n            _createVNode(_component_prescription_keypad, {\n              onKeyPress: _ctx.durationKeypress,\n              title: 'Duration',\n              onClick: _ctx.isComplete\n            }, null, 8, [\"onKeyPress\", \"onClick\"])\n          ]))\n        : _createCommentVNode(\"\", true)\n    ]),\n    _createVNode(_component_ion_footer, { style: {\"position\":\"absolute\",\"bottom\":\"0\"} }, {\n      default: _withCtx(() => [\n        _createVNode(_component_ion_toolbar, { color: \"dark\" }, {\n          default: _withCtx(() => [\n            _createVNode(_component_ion_button, {\n              \"router-link\": _ctx.cancelDestination,\n              slot: \"start\",\n              size: \"large\",\n              color: \"danger\"\n            }, {\n              default: _withCtx(() => [\n                _createTextVNode(\" Cancel \")\n              ]),\n              _: 1\n            }, 8, [\"router-link\"]),\n            (_ctx.switchKeyboard)\n              ? (_openBlock(), _createBlock(_component_ion_button, {\n                  key: 0,\n                  onClick: _ctx.predefinedMalariaDrug,\n                  slot: \"end\",\n                  size: \"large\",\n                  color: \"primary\"\n                }, {\n                  default: _withCtx(() => [\n                    _createTextVNode(\" Predefined Malaria Drugs \")\n                  ]),\n                  _: 1\n                }, 8, [\"onClick\"]))\n              : _createCommentVNode(\"\", true),\n            (!_ctx.switchKeyboard)\n              ? (_openBlock(), _createBlock(_component_ion_button, {\n                  key: 1,\n                  onClick: _cache[3] || (_cache[3] = ($event: any) => (_ctx.durationKeypress('Confirm'))),\n                  slot: \"end\",\n                  size: \"large\",\n                  color: \"success\"\n                }, {\n                  default: _withCtx(() => [\n                    _createTextVNode(\" Add Drug \")\n                  ]),\n                  _: 1\n                }))\n              : _createCommentVNode(\"\", true),\n            _createVNode(_component_ion_button, {\n              onClick: _ctx.clearPrescription,\n              slot: \"end\",\n              size: \"large\",\n              color: \"warning\"\n            }, {\n              default: _withCtx(() => [\n                _createTextVNode(\" Clear \")\n              ]),\n              _: 1\n            }, 8, [\"onClick\"]),\n            _createVNode(_component_ion_button, {\n              disabled: _ctx.disableNextBtn,\n              onClick: _ctx.savePrescription,\n              slot: \"end\",\n              size: \"large\",\n              color: \"success\"\n            }, {\n              default: _withCtx(() => [\n                _createTextVNode(\" Finish \")\n              ]),\n              _: 1\n            }, 8, [\"disabled\", \"onClick\"])\n          ]),\n          _: 1\n        })\n      ]),\n      _: 1\n    })\n  ], 64))\n}","import { createTextVNode as _createTextVNode, resolveComponent as _resolveComponent, withCtx as _withCtx, createVNode as _createVNode, renderList as _renderList, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock, normalizeClass as _normalizeClass, createBlock as _createBlock } from \"vue\"\n\nexport function render(_ctx: any,_cache: any,$props: any,$setup: any,$data: any,$options: any) {\n  const _component_ion_title = _resolveComponent(\"ion-title\")!\n  const _component_ion_toolbar = _resolveComponent(\"ion-toolbar\")!\n  const _component_ion_header = _resolveComponent(\"ion-header\")!\n  const _component_ion_label = _resolveComponent(\"ion-label\")!\n  const _component_ion_item = _resolveComponent(\"ion-item\")!\n  const _component_ion_list = _resolveComponent(\"ion-list\")!\n  const _component_ion_content = _resolveComponent(\"ion-content\")!\n  const _component_ion_button = _resolveComponent(\"ion-button\")!\n  const _component_ion_footer = _resolveComponent(\"ion-footer\")!\n\n  return (_openBlock(), _createElementBlock(_Fragment, null, [\n    _createVNode(_component_ion_header, null, {\n      default: _withCtx(() => [\n        _createVNode(_component_ion_toolbar, null, {\n          default: _withCtx(() => [\n            _createVNode(_component_ion_title, null, {\n              default: _withCtx(() => [\n                _createTextVNode(\"Select Malaria Drugs\")\n              ]),\n              _: 1\n            })\n          ]),\n          _: 1\n        })\n      ]),\n      _: 1\n    }),\n    _createVNode(_component_ion_content, { style: { overflowY: 'hidden', background: 'grey' } }, {\n      default: _withCtx(() => [\n        _createVNode(_component_ion_list, { class: \"view-port-content\" }, {\n          default: _withCtx(() => [\n            (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(_ctx.items, (item, index) => {\n              return (_openBlock(), _createBlock(_component_ion_item, {\n                key: index,\n                class: \"items\"\n              }, {\n                default: _withCtx(() => [\n                  _createVNode(_component_ion_label, {\n                    class: _normalizeClass(item?.other?.wrapTxt ? 'ion-text-wrap' : ''),\n                    innerHTML: item.label,\n                    onClick: [\n                      _ctx.submitData,\n                      _cache[0] || (_cache[0] = ($event: any) => (_ctx.closeModal('later')))\n                    ],\n                    value: item.value\n                  }, null, 8, [\"class\", \"innerHTML\", \"onClick\", \"value\"])\n                ]),\n                _: 2\n              }, 1024))\n            }), 128))\n          ]),\n          _: 1\n        })\n      ]),\n      _: 1\n    }),\n    _createVNode(_component_ion_footer, null, {\n      default: _withCtx(() => [\n        _createVNode(_component_ion_toolbar, null, {\n          default: _withCtx(() => [\n            _createVNode(_component_ion_button, {\n              slot: \"start\",\n              color: \"danger\",\n              size: \"large\",\n              onClick: _cache[1] || (_cache[1] = ($event: any) => (_ctx.closeModal('later')))\n            }, {\n              default: _withCtx(() => [\n                _createTextVNode(\" Cancel \")\n              ]),\n              _: 1\n            })\n          ]),\n          _: 1\n        })\n      ]),\n      _: 1\n    })\n  ], 64))\n}","\n  import {\n    IonContent,\n    IonButton,\n    IonHeader,\n    IonTitle,\n    IonToolbar,\n    modalController,\n    IonFooter\n  } from \"@ionic/vue\";\n  import { defineComponent, PropType } from \"vue\";\n  import HisDate from \"@/utils/Date\";\n  \n  export default defineComponent({\n    name: \"Modal\",\n    props: {\n      items: {\n        type: Object as any,\n        required: true\n      },\n      submitData:{\n        type: Function,\n      }\n      \n    },\n    async created() {\n      console.log(\"created modal\")\n    },\n    methods: {\n     async closeModal(val: string) {\n      await modalController.dismiss(val);\n     } \n    },\n    data() {\n      return {\n        content: \"Content\",\n        artStartDate: \"\",\n        monthsOnART: \"\",\n        lastOrder: \"\",\n        currentRegimen: \"\",\n        regimenStartDate: \"\" \n      };\n    },\n    components: {\n      IonHeader,\n      IonToolbar,\n      IonTitle,\n      IonContent,\n      IonFooter,\n      IonButton,\n    },\n  });\n  ","import { render } from \"./PredefinedMalariaDrug.vue?vue&type=template&id=53d5f4c0&scoped=true&ts=true\"\nimport script from \"./PredefinedMalariaDrug.vue?vue&type=script&lang=ts\"\nexport * from \"./PredefinedMalariaDrug.vue?vue&type=script&lang=ts\"\n\nimport \"./PredefinedMalariaDrug.vue?vue&type=style&index=0&id=53d5f4c0&scoped=true&lang=css\"\n\nimport exportComponent from \"/home/brian/projects/HIS-Core/node_modules/vue-loader-v16/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-53d5f4c0\"]])\n\nexport default __exports__","import { createTextVNode as _createTextVNode, resolveComponent as _resolveComponent, withCtx as _withCtx, createVNode as _createVNode, renderList as _renderList, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock, toDisplayString as _toDisplayString, createBlock as _createBlock, pushScopeId as _pushScopeId, popScopeId as _popScopeId } from \"vue\"\n\nconst _withScopeId = n => (_pushScopeId(\"data-v-28602c3d\"),n=n(),_popScopeId(),n)\nconst _hoisted_1 = { class: \"freq-content\" }\n\nexport function render(_ctx: any,_cache: any,$props: any,$setup: any,$data: any,$options: any) {\n  const _component_snap = _resolveComponent(\"snap\")!\n  const _component_center = _resolveComponent(\"center\")!\n  const _component_ion_radio = _resolveComponent(\"ion-radio\")!\n  const _component_ion_label = _resolveComponent(\"ion-label\")!\n  const _component_ion_item = _resolveComponent(\"ion-item\")!\n  const _component_ion_radio_group = _resolveComponent(\"ion-radio-group\")!\n  const _component_ion_list = _resolveComponent(\"ion-list\")!\n\n  return (_openBlock(), _createElementBlock(\"div\", _hoisted_1, [\n    _createVNode(_component_center, { style: {\"padding-top\":\"12px\"} }, {\n      default: _withCtx(() => [\n        _createVNode(_component_snap, null, {\n          default: _withCtx(() => [\n            _createTextVNode(\" Frequency \")\n          ]),\n          _: 1\n        })\n      ]),\n      _: 1\n    }),\n    _createVNode(_component_ion_list, null, {\n      default: _withCtx(() => [\n        _createVNode(_component_ion_radio_group, { value: _ctx.activeLabel }, {\n          default: _withCtx(() => [\n            (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(_ctx.list, (label, index) => {\n              return (_openBlock(), _createBlock(_component_ion_item, {\n                class: \"his-md-text\",\n                key: index,\n                onClick: ($event: any) => (_ctx.frequencyKeypress(label))\n              }, {\n                default: _withCtx(() => [\n                  _createVNode(_component_ion_radio, {\n                    slot: \"start\",\n                    value: label\n                  }, null, 8, [\"value\"]),\n                  _createVNode(_component_ion_label, null, {\n                    default: _withCtx(() => [\n                      _createTextVNode(_toDisplayString(label), 1)\n                    ]),\n                    _: 2\n                  }, 1024)\n                ]),\n                _: 2\n              }, 1032, [\"onClick\"]))\n            }), 128))\n          ]),\n          _: 1\n        }, 8, [\"value\"])\n      ]),\n      _: 1\n    })\n  ]))\n}","\nimport { defineComponent, PropType } from 'vue'\n// import ActionSheetMixin from \"@/components/DataViews/actionsheet/ActionSheetMixin.vue\"\nimport { \n    IonList, \n    IonItem,\n    IonRadio,\n    IonRadioGroup\n} from \"@ionic/vue\"\n\n\nexport default defineComponent({\n    components: { \n        IonList, \n        IonItem,\n        IonRadio,\n        IonRadioGroup \n    },\n    // mixins: [ActionSheetMixin],\n    data: () => ({\n        activeLabel: '' as string\n    }),\n    props: {\n        list: {\n            type: Object as PropType<string[]>,\n            required: true\n        },\n        label: String\n    },\n    methods: {\n        async frequencyKeypress(label: any){\n            this.$emit(\"frequencyKeypress\", label)\n        }\n    }\n})\n","import { render } from \"./PrescriptionFrequency.vue?vue&type=template&id=28602c3d&scoped=true&ts=true\"\nimport script from \"./PrescriptionFrequency.vue?vue&type=script&lang=ts\"\nexport * from \"./PrescriptionFrequency.vue?vue&type=script&lang=ts\"\n\nimport \"./PrescriptionFrequency.vue?vue&type=style&index=0&id=28602c3d&scoped=true&lang=css\"\n\nimport exportComponent from \"/home/brian/projects/HIS-Core/node_modules/vue-loader-v16/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-28602c3d\"]])\n\nexport default __exports__","import { toDisplayString as _toDisplayString, createTextVNode as _createTextVNode, resolveComponent as _resolveComponent, withCtx as _withCtx, createVNode as _createVNode, openBlock as _openBlock, createElementBlock as _createElementBlock, pushScopeId as _pushScopeId, popScopeId as _popScopeId } from \"vue\"\n\nconst _withScopeId = n => (_pushScopeId(\"data-v-347def6c\"),n=n(),_popScopeId(),n)\nconst _hoisted_1 = { class: \"keypad\" }\n\nexport function render(_ctx: any,_cache: any,$props: any,$setup: any,$data: any,$options: any) {\n  const _component_snap = _resolveComponent(\"snap\")!\n  const _component_ion_input = _resolveComponent(\"ion-input\")!\n  const _component_base_keyboard = _resolveComponent(\"base-keyboard\")!\n\n  return (_openBlock(), _createElementBlock(\"div\", _hoisted_1, [\n    _createVNode(_component_snap, { class: \"ion-text-center\" }, {\n      default: _withCtx(() => [\n        _createTextVNode(_toDisplayString(_ctx.title), 1)\n      ]),\n      _: 1\n    }),\n    _createVNode(_component_ion_input, {\n      value: _ctx.value,\n      style: {\"text-align\":\"center\",\"border\":\"solid 1px #b7b7b7\",\"margin-top\":\"12px\",\"margin-bottom\":\"12px\"}\n    }, null, 8, [\"value\"]),\n    _createVNode(_component_base_keyboard, {\n      btnSize: \"8.5vw\",\n      layout: _ctx.keypad,\n      onKeyPress: _ctx.keypress\n    }, null, 8, [\"layout\", \"onKeyPress\"])\n  ]))\n}","\nimport { defineComponent } from 'vue'\nimport BaseKeyboard from '@/components/Keyboard/BaseKeyboard.vue'\nimport { PRESCRIPTION_KEYPAD } from '@/components/Keyboard/KbLayouts'\nimport handleVirtualInput from '@/components/Keyboard/KbHandler'\nexport default defineComponent({\ncomponents: { BaseKeyboard },\nprops: {\n    title: {\n        type: String\n    },\n    preset: {\n        type: String\n    },\n    onKeyPress: {\n        type: Function,\n        required: true,\n    },\n    strictNumbers: {\n        type: Boolean,\n        default: false\n    }\n},\ndata: () => ({\n    value: '',\n    keypad: PRESCRIPTION_KEYPAD,\n}),\nwatch: {\n    preset: { \n        handler(value: string | number) {\n            if (!value) return\n            this.value = value.toString()\n        },\n        immediate: true\n    }\n},\nmethods: {\n    async keypress(key: any) {\n        if (this.strictNumbers) {\n            if (key.includes('.') && this.value.includes('.')) return\n            \n            if (!key.includes('.') && this.value === '0') this.value = ''\n\n            this.value = handleVirtualInput(key, this.value)\n            \n            if (!this.value) this.value = ''\n\n            // Condition verifies number as interger and emits parsed integer\n            if (`${parseInt(this.value)}` === this.value) {\n                this.onKeyPress(parseInt(this.value))\n            } else {\n                // helps preserve floating point values \n                this.onKeyPress(this.value)\n            }\n        } else {\n            this.value = handleVirtualInput(key, this.value)\n            this.onKeyPress(this.value)\n        }\n    }\n}\n})\n","import { render } from \"./PrescriptionKeypad.vue?vue&type=template&id=347def6c&scoped=true&ts=true\"\nimport script from \"./PrescriptionKeypad.vue?vue&type=script&lang=ts\"\nexport * from \"./PrescriptionKeypad.vue?vue&type=script&lang=ts\"\n\nimport \"./PrescriptionKeypad.vue?vue&type=style&index=0&id=347def6c&scoped=true&lang=css\"\n\nimport exportComponent from \"/home/brian/projects/HIS-Core/node_modules/vue-loader-v16/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-347def6c\"]])\n\nexport default __exports__","\nimport { defineComponent } from \"vue\";\nimport { Option } from \"../../../../components/Forms/FieldInterface\";\nimport { QWERTY } from \"../../../../components/Keyboard/HisKbConfigurations\";\nimport ViewPort from \"../../../../components/DataViews/ViewPort.vue\";\nimport handleVirtualInput from \"@/components/Keyboard/KbHandler\"\nimport HisTextInput from \"@/components/FormElements/BaseTextInput.vue\";\nimport PredefinedMalariaDrugModal from \"@/apps/OPD/components/PredefinedMalariaDrug.vue\";\nimport FieldMixinVue from '../../../../components/FormElements/FieldMixin.vue';\nimport HisKeyboard from \"@/components/Keyboard/HisKeyboard.vue\"\nimport { trash } from \"ionicons/icons\";\nimport PrescriptionFrequency from \"@/apps/OPD/components/PrescriptionFrequency.vue\"\nimport PrescriptionKeypad from \"@/apps/OPD/components/PrescriptionKeypad.vue\";\nimport { DRUG_FREQUENCIES ,ANTI_MALARIA_DRUGS} from \"@/apps/OPD/services/drug_prescription_service\";\nimport EncounterMixinVue from '@/views/EncounterMixin.vue'\nimport { nextTask } from \"@/utils/WorkflowTaskHelper\"\nimport { modalController } from \"@ionic/vue\";\nimport { \n  IonCheckbox, \n  IonText, \n  IonButton,\n  IonContent, \n  IonList, \n  IonItem, \n  IonLabel, \n  IonInfiniteScroll, \n  IonFooter,\n  IonToolbar,\n  IonInfiniteScrollContent \n} from \"@ionic/vue\";\nimport { alertConfirmation, toastSuccess, toastWarning } from '@/utils/Alerts';\n\nimport { DrugPrescriptionService } from '../../services/drug_prescription_service';\nimport HisDate from \"@/utils/Date\"\nimport { PatientPrintoutService } from \"@/services/patient_printout_service\"\n\nexport default defineComponent({\n  name: \"HisInfiniteScrollMultipleSelect\",\n  mixins: [FieldMixinVue,EncounterMixinVue],\n  components: { \n    PrescriptionKeypad,\n    IonCheckbox, \n    IonText, \n    IonButton,\n    ViewPort,\n    HisTextInput,\n    IonContent, \n    IonList, \n    IonItem, \n    IonLabel, \n    HisKeyboard,\n    IonInfiniteScroll, \n    IonInfiniteScrollContent,\n    IonFooter,\n    IonToolbar,\n    PrescriptionFrequency\n  },\n  data: () => ({\n    switchKeyboard: true,\n    keyboard: QWERTY,\n    listData: [] as Array<Option>,\n    checkedItems: [] as Array<Option>,\n    disableScroll: false,\n    filter2: '',\n    selected: '',\n    selectedItems: [] as any,\n    malariaDrug: [],\n    prescriptionService: {} as any,\n    label: String as any,\n   \n    page: 1,\n    limit: 10,\n    trash,\n    \n    list: DRUG_FREQUENCIES.map(f => f.label),\n    showMalariaDrugs: false,\n    hasMalaria: false,\n    disableNextBtn:true,\n    confirmBtn: false\n  \n  }),\n  watch: {\n    checkedItems: {\n      handler(newValue: Array<Option>) {\n        this.listData.forEach(entry => {\n          if (newValue.find(item => item.value === entry.value)) {\n            entry.isChecked = true;\n          } else {\n            entry.isChecked = false;\n          }\n        });\n        this.$emit(\"onValue\", newValue);\n      },\n      deep: true,\n      immediate: true\n    },\n    filter2: {\n      async handler() {\n        this.page = 1;\n        this.disableScroll = false;\n        const data = await this.getListData();\n        [...this.checkedItems].forEach(item => {\n          const index = data.findIndex(entry => entry.value === item.value);\n          if(index === -1) {\n            data.push(item);\n          } else {\n            data[index].isChecked = true;\n          }\n        })\n        this.listData = data;\n      },\n    },\n  },\n  mounted() {\n    this.init()\n  },\n  activated() {\n    this.init()\n  },\n  methods: {\n    async init() {\n      this.listData = await this.getListData();\n    },\n    async getListData(): Promise<Array<Option>> {\n      this.prescriptionService = new DrugPrescriptionService(this.patientID, this.providerID) \n      return await this.prescriptionService.loadDrugs(this.filter2, this.page, this.limit)\n    },\n\n    async dosageKeypress(value: string) { this.checkedItems[0].other[\"dosage\"] = value },\n    \n    async frequencyKeypress(){ this.checkedItems[0].other[\"frequency\"] = this.label },\n\n    async durationKeypress(value: string) {\n      if (value.match(/Confirm/i)){\n        this.confirmBtn = true\n        this.inputFieldType()\n      }else\n      this.checkedItems[0].other[\"duration\"] = value\n    },\n    \n    async keypress(value: string) {\n      if (!this.filter2) this.selected = ''\n      this.filter2 = handleVirtualInput(value, this.selected)\n      this.selected = this.filter2\n    },\n    async onKBValue(value: string) {\n      if (!this.listData || this.selected === value) return\n      this.filter2 = value\n      this.selected = this.filter2\n    },\n    async pushData(event: any) {\n      this.page++;\n      const data = await this.getListData();\n      if (data.length > 0) {\n        this.listData = [\n          ...this.listData, \n          ...data.filter(entry => !this.listData.find(item => item.value === entry.value))\n        ];\n      } else {\n        this.disableScroll = true;\n      }\n      event.target.complete();\n    },\n    isComplete(){\n      const value = this.checkedItems[0]\n      if(!value.other[\"frequency\"]  || !value.other[\"duration\"] || !value.other[\"dosage\"]){\n        this.disableNextBtn = true\n        if(this.confirmBtn){\n          toastWarning(`complete prescription details for ${value.label}`) \n          this.confirmBtn = false\n        }\n        return false\n      }\n      this.confirmBtn = false\n      this.disableNextBtn = false\n      return true\n    },\n    inputFieldType(){\n      if(!this.switchKeyboard  && this.isComplete()){\n        this.switchKeyboard = true\n        return true\n      }\n      else{\n        this.switchKeyboard = false\n        return false\n      }\n    },\n    async predefinedMalariaDrug(){\n      this.hasMalaria = await this.prescriptionService.hasMalaria()\n      if(!this.hasMalaria && !(await alertConfirmation('Patient has no malaria. Do you still want to prescribe anti malaria drugs?'))) {\n        return;\n      }\n      const modal = await modalController.create({\n        component: PredefinedMalariaDrugModal,\n        backdropDismiss: false,\n        cssClass: \"lager-modal\",\n        componentProps: { items: ANTI_MALARIA_DRUGS.map(drug => ({\n          label: `${drug.name}, ${drug.frequency} time(s) a day, for ${drug.duration} days`,\n          value: [drug.name,drug.frequency,drug.duration,drug.dose_strength,drug.units,drug.drug_id],\n          other: drug\n        })),\n        submitData: async(data: any) => {\n          const value = data.target.attributes.value.nodeValue.split(',')\n          const frequency: any = DRUG_FREQUENCIES.find(f => f.value == value[1])\n          const malariaDrug = {\n            \"isChecked\": true,\n            \"label\":value[0],\n            \"other\":{\n              'frequency':frequency.label,\n              'units':value[4],\n              'drug_id':value[5],\n              'duration':value[2],\n              'dosage':value[3],\n            },\n            \"value\":value[0],\n          }\n          const malaria_drugs = ANTI_MALARIA_DRUGS.map(drug => drug.name);\n          console.log(this.checkedItems)\n          this.checkedItems = this.checkedItems.filter((x: any)  => \n            !malaria_drugs.includes(x.value)\n          )\n          console.log(this.checkedItems)\n\n          this.checkedItems.unshift(malariaDrug)\n          if(this.isComplete())\n            this.disableNextBtn = false\n        }},\n      });\n      modal.present();\n    },\n    onSelect(entry: Option, event: Event) {\n      this.$nextTick(async () => {\n        if (entry.isChecked) {\n          if((this.checkedItems.findIndex(item => item.value === entry.value)) === -1) {\n            this.checkedItems.unshift(entry);\n            this.selected = ''\n            this.inputFieldType()\n            this.isComplete()\n          }\n        } else {\n          this.unCheck(entry);\n        }\n      });\n    },\n    unCheck(entry: Option) {\n      if(this.checkedItems.length == 1){\n        this.disableNextBtn = true\n        this.switchKeyboard = true\n      }\n      this.checkedItems = this.checkedItems.filter(item => item.value !== entry.value);\n    },\n    clearPrescription(){\n      // this.checkedItems = [],\n      // this.filter2 = ''\n      this.selected = ''\n      // this.switchKeyboard = true\n    },\n    async savePrescription() {\n      try {\n        const drugOrders = this.mapToOrders()\n        const encounter = await this.prescriptionService.createEncounter()\n        if (!encounter) return toastWarning('Unable to create treatment encounter')   \n        const drugOrder = await this.prescriptionService.createDrugOrder(drugOrders);\n        if(!drugOrder) return toastWarning('Unable to create drug orders!')\n        toastSuccess('Drug order has been created')\n        this.printVisitSummary()\n        nextTask(this.patientID, this.$router)\n      } catch (error) {\n        console.error(error)\n      }\n    },\n     mapToOrders(): any[] {\n      return this.checkedItems.map(drug => {\n        const startDate = DrugPrescriptionService.getSessionDate()\n        const frequency = DRUG_FREQUENCIES.find(f => f.label === drug.other.frequency)\n        return {\n          'drug_inventory_id': drug.other.drug_id,\n          'equivalent_daily_dose': drug.other.dosage=='Unknown'?0 : drug.other.dosage * frequency!.value,\n          'start_date': startDate,\n          'auto_expire_date': this.calculateExpireDate(startDate, drug.other.duration), \n          'units': drug.other.units,\n          'instructions': `${drug.label}: ${drug.other.dosage} ${drug.other.units} ${frequency!.code} for ${drug.other.duration} days`,\n          'dose': drug.other.dosage,\n          'frequency': frequency!.code,\n        }\n      })\n    },\n    calculateExpireDate(startDate: string | Date, duration: any ) {\n      const date = new Date(startDate)\n      date.setDate(date.getDate() + parseInt(duration))\n      return HisDate.toStandardHisFormat(date)\n    },\n    printVisitSummary(){\n      const lbl = new PatientPrintoutService(this.patientID)\n      return lbl.printVisitSummaryLbl(DrugPrescriptionService.getSessionDate())\n    }\n  },\n  created() {\n    this.keyboard = QWERTY;\n    this.page =  1;\n    this.limit =  10;\n  },\n  \n});\n","import { render } from \"./Prescription.vue?vue&type=template&id=7f0a557e&scoped=true&ts=true\"\nimport script from \"./Prescription.vue?vue&type=script&lang=ts\"\nexport * from \"./Prescription.vue?vue&type=script&lang=ts\"\n\nimport \"./Prescription.vue?vue&type=style&index=0&id=7f0a557e&scoped=true&lang=css\"\n\nimport exportComponent from \"/home/brian/projects/HIS-Core/node_modules/vue-loader-v16/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-7f0a557e\"]])\n\nexport default __exports__","import { resolveComponent as _resolveComponent, openBlock as _openBlock, createBlock as _createBlock } from \"vue\"\n\nexport function render(_ctx: any,_cache: any,$props: any,$setup: any,$data: any,$options: any) {\n  const _component_ion_input = _resolveComponent(\"ion-input\")!\n\n  return (_openBlock(), _createBlock(_component_ion_input, {\n    ref: \"input\",\n    class: \"input_display\",\n    modelValue: _ctx.text,\n    \"onUpdate:modelValue\": _cache[0] || (_cache[0] = ($event: any) => ((_ctx.text) = $event)),\n    type: _ctx.type,\n    disabled: _ctx.disabled,\n    readonly: _ctx.readOnly,\n    autocapitalize: \"sentences\",\n    placeholder: _ctx.placeholder\n  }, null, 8, [\"modelValue\", \"type\", \"disabled\", \"readonly\", \"placeholder\"]))\n}","\nimport { computed, defineComponent } from \"vue\";\nimport { IonInput } from \"@ionic/vue\";\nimport usePlatform from \"@/composables/usePlatform\"\n\nexport default defineComponent({\n  name: \"HisInput\",\n  components: { IonInput },\n  setup() {\n    const { activePlatformProfile } = usePlatform()\n    const readOnly = computed(() => activePlatformProfile.value.keyboard === 'HIS_KEYBOARD_ONLY')\n    return {\n      readOnly\n    }\n  },\n  data:() => ({\n    text: '' as string | number\n  }),\n  watch: {\n    value(val: number | string) {\n      this.text = val\n    },\n    text(text: string | number) {\n      this.$emit('onValue', text)\n    }\n  },\n  props: {\n    value: {\n      required: false,\n    },\n    type: {\n      type: String,\n      default: () => \"text\",\n    },\n    disabled: {\n      type: Boolean,\n      default: () => false,\n    },\n    placeholder: {\n      type: String,\n      default: () => \"\",\n    }\n  },\n});\n","import { render } from \"./BaseTextInput.vue?vue&type=template&id=04472bbc&scoped=true&ts=true\"\nimport script from \"./BaseTextInput.vue?vue&type=script&lang=ts\"\nexport * from \"./BaseTextInput.vue?vue&type=script&lang=ts\"\n\nimport \"./BaseTextInput.vue?vue&type=style&index=0&id=04472bbc&scoped=true&lang=css\"\n\nimport exportComponent from \"/home/brian/projects/HIS-Core/node_modules/vue-loader-v16/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-04472bbc\"]])\n\nexport default __exports__","'use strict';\nvar $ = require('../internals/export');\nvar toObject = require('../internals/to-object');\nvar lengthOfArrayLike = require('../internals/length-of-array-like');\nvar setArrayLength = require('../internals/array-set-length');\nvar deletePropertyOrThrow = require('../internals/delete-property-or-throw');\nvar doesNotExceedSafeInteger = require('../internals/does-not-exceed-safe-integer');\n\n// IE8-\nvar INCORRECT_RESULT = [].unshift(0) !== 1;\n\n// V8 ~ Chrome < 71 and Safari <= 15.4, FF < 23 throws InternalError\nvar SILENT_ON_NON_WRITABLE_LENGTH = !function () {\n  try {\n    // eslint-disable-next-line es/no-object-defineproperty -- safe\n    Object.defineProperty([], 'length', { writable: false }).unshift();\n  } catch (error) {\n    return error instanceof TypeError;\n  }\n}();\n\n// `Array.prototype.unshift` method\n// https://tc39.es/ecma262/#sec-array.prototype.unshift\n$({ target: 'Array', proto: true, arity: 1, forced: INCORRECT_RESULT || SILENT_ON_NON_WRITABLE_LENGTH }, {\n  // eslint-disable-next-line no-unused-vars -- required for `.length`\n  unshift: function unshift(item) {\n    var O = toObject(this);\n    var len = lengthOfArrayLike(O);\n    var argCount = arguments.length;\n    if (argCount) {\n      doesNotExceedSafeInteger(len + argCount);\n      var k = len;\n      while (k--) {\n        var to = k + argCount;\n        if (k in O) O[to] = O[k];\n        else deletePropertyOrThrow(O, to);\n      }\n      for (var j = 0; j < argCount; j++) {\n        O[j] = arguments[j];\n      }\n    } return setArrayLength(O, len + argCount);\n  }\n});\n","\nimport { isPlatform } from '@ionic/core'\nimport { defineComponent } from 'vue'\n\nexport default defineComponent({\n    emits: [\n        'onValue',\n        'onFieldActivated'\n    ],\n    props: {\n        config: {\n            type: Object,\n            default: () => ({})\n        },\n        preset: {\n            type: Object,\n            default: () => ({\n                label: '',\n                value: ''\n            })\n        },\n        defaultValue: {\n            type: Function\n        },\n        fdata: {\n            type: Object,\n            required: true\n        },\n        cdata: {\n            type: Object,\n            required: true\n        },\n        options: {\n            type: Function,\n            default: () => ([])\n        },\n        activationState: {\n            type: String,\n            default: ''\n        },\n        onValue: {\n            type: Function\n        },\n        onValueUpdate: {\n            type: Function\n        },\n        footerButtonEvent: {\n            type: Object\n        }\n    }\n})\n","import script from \"./FieldMixin.vue?vue&type=script&lang=ts\"\nexport * from \"./FieldMixin.vue?vue&type=script&lang=ts\"\n\nconst __exports__ = script;\n\nexport default __exports__","export * from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./PrescriptionKeypad.vue?vue&type=style&index=0&id=347def6c&scoped=true&lang=css\"","import { DrugOrderInterface } from \"@/interfaces/DrugOrder\";\nimport { Service } from \"./service\";\n\nexport class DrugOrderService extends Service {\n    constructor() {\n        super()\n    }\n\n    static create(orders: DrugOrderInterface) {\n        return this.postJson('drug_orders', orders)\n    }\n\n    static updateDispensationOrders(orders: any) {\n        return this.postJson('dispensations', {\n            'program_id': this.getProgramID(),\n            dispensations: orders.map((order: any) => ({\n                'date': this.getSessionDate(),\n                'drug_order_id': order['order_id'],\n                'quantity': order['quantity']\n            }))\n        })\n    }\n\n    static getDrugOrderHistory(patientID: number) {\n        return this.getJson('drug_orders', { 'patient_id': patientID })\n    }\n\n    static getDrugOrders(patientID: number) {\n        return this.getJson('drug_orders', {\n            'patient_id': patientID,\n            'date': this.getSessionDate(),\n            'program_id': this.getProgramID()\n        })\n    }\n\n    static getAllDrugOrders(patientID: number, pageSize=1000) {\n        return this.getJson('drug_orders', {\n            'patient_id': patientID,\n            'program_id': Service.getProgramID(),\n            'page_size': pageSize\n        })\n    }\n\n    static getLastDrugsReceived(patientID: number) {\n        return this.getJson(`patients/${patientID}/last_drugs_received`, {\n            'date': this.getSessionDate(),\n            'program_id': this.getProgramID()\n        })\n    }\n\n    static getDrugDosages(patientID: number, drugID: number, date=this.getSessionDate()) {\n        const params = { 'drug_id': drugID, 'date': date }\n        return this.getJson(`programs/${this.getProgramID()}/patients/${patientID}/drug_doses`, params)\n    }\n\n    static getOrderByPatient(patientId: number, params: any) {\n        return this.getJson('/drug_orders', {\n            'patient_id': patientId,\n            'program_id': this.getProgramID(),\n            ...params\n        })\n    }\n\n}","import { infoActionSheet, optionsActionSheet } from \"@/utils/ActionSheets\";\nimport { GuideLineInterface } from \"@/utils/GuidelineEngine\";\nimport HisDate from '@/utils/Date'\n\nexport enum FlowState {\n    SET_PROVIDER = 'SET_PROVIDER',\n    CHANGE_SESSION_DATE = 'change_session_date',\n    GO_TO_PATIENT_DASHBOARD = 'go_to_patient_dashboard',\n    CHANGE_PATIENT_OUTCOME = 'change_outcome',\n    CONTINUE = 'continue',\n    EXIT = 'exit'\n}\nconst dformat = (d: string) => HisDate.toStandardHisDisplayFormat(d)\n\nexport const ENCOUNTER_GUIDELINES: Record<string, GuideLineInterface> = {\n    \"Warn if attempting to create new encounters for a deceased patient\": {\n        priority: 1,\n        actions: {\n            alert: async ({ outcomeStartDate }: any) => {\n                const action = await infoActionSheet(\n                    'Data Integrity Issue Found',\n                    `Patient died on ${dformat(outcomeStartDate)}`,\n                    'Proceeding with this outcome might affect accuracy of some reports',\n                    [\n                        { name: 'Cancel', slot: 'end', color: 'primary'},\n                        { name: 'Change outcome', slot: 'end', color: 'primary'},\n                        { name: 'Continue Anyway', slot: 'end', color: 'danger'}\n                    ]\n                )\n                return action === 'Cancel'\n                    ? FlowState.GO_TO_PATIENT_DASHBOARD\n                    : action === 'Change outcome'\n                    ? FlowState.CHANGE_PATIENT_OUTCOME\n                    : FlowState.CONTINUE\n            }\n        },\n        conditions: {\n            outcome(outcome: string) {\n                return outcome === 'Patient died'\n            },\n            outcomeStartDate(startDate: string, { sessionDate }: any) {\n                return sessionDate >= startDate\n            }\n        }\n    },\n    \"A patient's date of birth must not be less than Session Date\": {\n        priority: 2,\n        actions: {\n            alert: async ({ birthDate, sessionDate}: any) => {\n                const action = await infoActionSheet(\n                    'Data integrity issue found', '',\n                    `Session date ${dformat(sessionDate)} is less than birth date of ${dformat(birthDate)}`,\n                    [\n                        { name: 'Cancel', slot: 'end', color: 'danger'},\n                        { name: 'Change session date', slot: 'end', color: 'success'}\n                    ]\n                )\n                return action === 'Change session date'\n                    ? FlowState.CHANGE_SESSION_DATE\n                    : FlowState.GO_TO_PATIENT_DASHBOARD\n            }\n        },\n        conditions: {\n            birthDate(birthDate: string, { sessionDate }: any) {\n                return sessionDate < birthDate\n            }\n        }\n    },\n    \"Select Encounter provider when in back data entry\": {\n        priority: 3,\n        actions: {\n            selection: async ({ providers, encounterName, sessionDate, apiDate }: any) => {\n                const modal = await optionsActionSheet(\n                    `Please select a provider for ${encounterName}`,\n                    `BDE: ${dformat(sessionDate)} | Current: ${dformat(apiDate)}`,\n                    providers,\n                    [\n                        { name: 'Cancel', color: 'danger', slot: 'start', role: 'default'},\n                        { name: 'Confirm', slot: 'end', role: 'action' }\n                    ]\n                )\n                return modal.action === 'Cancel' \n                    ? { value: -1, flowState: FlowState.GO_TO_PATIENT_DASHBOARD }\n                    : { value: modal.selection, flowState: FlowState.SET_PROVIDER }\n            }\n        },\n        conditions: {\n            isBdeMode(isBDE: boolean) {\n                return isBDE\n            }\n        }\n    }\n}","\nimport { defineComponent } from 'vue'\nimport { Field, Option } from '@/components/Forms/FieldInterface'\nimport { ProgramService } from \"@/services/program_service\"\nimport { find, isEmpty } from \"lodash\"\nimport { nextTask } from \"@/utils/WorkflowTaskHelper\"\nimport { ENCOUNTER_GUIDELINES, FlowState } from \"@/guidelines/encounter_guidelines\"\nimport { matchToGuidelines } from \"@/utils/GuidelineEngine\"\nimport HisStandardForm from \"@/components/Forms/HisStandardForm.vue\";\nimport { toastDanger, toastWarning } from '@/utils/Alerts'\nimport Store from \"@/composables/ApiStore\"\nimport { Offline, isOfflineMode, isOnline } from '@/composables/offline'\nimport dayjs from 'dayjs'\nimport { AppEncounterService } from '@/services/app_encounter_service'\nimport { ObsValue } from '@/services/observation_service'\n\nexport default defineComponent({\n    components: { HisStandardForm },\n    data: () => ({\n        offlineID: null as any,\n        patient: {} as any,\n        fields: [] as Array<Field>,\n        patientID: '' as any,\n        providerID: -1 as number,\n        providers: [] as any,\n        facts: {\n            age: -1 as number,\n            gender: '' as string,\n            birthDate: '' as string,\n            sessionDate: '' as string,\n            apiDate: '' as string,\n            isEnrolledInProgam: false as boolean,\n            encounterName: 'N/A' as string,\n            providers: [] as Array<any>,\n            isBdeMode: false as boolean,\n            outcome: '' as string,\n            outcomeStartDate: '' as string,\n            village: '' as string,\n            district: '' as string,\n            currentTA: '' as string,\n        },\n        formLabel: '' as string,\n        ready: false\n    }),\n    created() {\n        if (this.$route.params.patient_id) {\n            this.offlineID = this.$route.params.patient_id\n            this.patientID = parseInt(`${this.$route.params.patient_id}`);\n            if (this.goOffline()) {\n                this.initOfflineData()\n            } else {\n                Store.get('ACTIVE_PATIENT', { patientID: this.patientID})\n                    .then(patientData => {\n                        this.patient = patientData\n                        if (!isEmpty(this.patient)) {\n                            Offline().cachePatient(this.patient)\n                        }\n                        this.setEncounterFacts().then(() => {\n                            this.checkEncounterGuidelines().then(() => {\n                                this.ready = true\n                            }).catch((e) => console.log(e))\n                        }).catch(() => {\n                            if (this.goOffline()) {\n                                this.initOfflineData()\n                            }\n                        })\n                    })\n            }\n        }\n    },\n    computed: {\n        cancelDestination(): string { return this.patientDashboardUrl() }\n    },\n    methods: {\n        goOffline(){\n            return !isOnline.value || isOfflineMode.value\n        },\n        isOnline() {\n            return isOnline.value\n        },\n        isOfflineMode() {\n            return isOfflineMode.value\n        },\n        initOfflineData() {\n            const offline = Offline().findByID(this.offlineID)\n            const person = offline?.personParams?.person\n            if (!person) return\n            this.facts.birthDate = person.birthdate\n            this.facts.age = dayjs(ProgramService.getSessionDate()).diff(\n                this.facts.birthDate, 'years'\n            )\n            this.facts.district = person.current_district\n            this.facts.village = person.current_village\n            this.facts.currentTA = person.current_traditional_authority\n            this.facts.gender = person.gender\n            this.ready = true\n        },\n        async saveFormEncounterAndProceed(params={} as any) {\n            let status = 'Pending'\n            let created = false\n            let obs = null\n            try {\n                obs = await this.resolveObs(params.computedData)\n            } catch (e) {\n                console.error(`${e}`)\n                return toastWarning(\"Unable to resolve observations\")\n            }\n            if (!this.isOfflineMode()) {\n                try {\n                    const enc = new AppEncounterService(\n                        this.patientID,\n                        params.encounterTypeID, \n                        this.providerID\n                    )\n                    if ((await enc.createEncounter())) {\n                        if ((await enc.saveObservationList(obs as ObsValue[]))) {\n                            status = 'Success'\n                            created = true\n                        }\n                    }\n                    if (typeof params.callback === 'function') {\n                        await params.callback(enc)\n                    }\n                } catch (e) {\n                    created = false\n                    if (/NetworkError|Failed to fetch/i.test(`${e}`)) {\n                        status = 'NetworkError'\n                    } else {\n                        status = 'Exception'\n                        console.error(`Exception while saving an encounter: ${e}`)\n                    }\n                }\n                if (status === 'Exception') {\n                    return toastDanger(\"An error has occured!\")\n                }\n            }\n            Offline().saveObsOffline({\n                observations: obs,\n                id: this.offlineID,\n                uploadStatus: status,\n                encounterName: this.$route.name,\n                encounterTypeID: params.encounterTypeID,\n                meta: params.formData,\n                labOrders: params.labOrders,\n                created\n            })\n            if (!params.skipNextTask) this.nextTask()\n        },\n        runflowState(state: FlowState, params=null) {\n            const states: any = {}\n            states[FlowState.SET_PROVIDER] = (selection: any) => {\n                const [ username ] = selection.split(' ')\n                const provider = find(this.providers, { username })\n                if (provider) this.providerID = provider.person_id\n                return FlowState.CONTINUE\n            }\n            states[FlowState.CHANGE_SESSION_DATE] = () => { \n                this.$router.push(`/session/date?patient_dashboard_redirection_id=${this.patientID}`)\n                return FlowState.EXIT\n            }\n            states[FlowState.CHANGE_PATIENT_OUTCOME] = () => {\n                this.$router.push(`/patient/programs/${this.patientID}`)\n                return FlowState.EXIT\n            }\n            states[FlowState.GO_TO_PATIENT_DASHBOARD] = () => {\n                this.gotoPatientDashboard()\n                return FlowState.EXIT\n            }\n            if (state in states) {\n                return states[state](params)\n            }\n        },\n        async checkEncounterGuidelines() {\n            const findings = matchToGuidelines(this.facts, ENCOUNTER_GUIDELINES)\n            for(const index in findings) {\n                const finding = findings[index]\n                if (finding?.actions?.alert) {\n                    const status = this.runflowState((await finding?.actions?.alert(this.facts)))\n                    if (status === FlowState.EXIT) return\n                }\n                if (finding?.actions?.selection) {\n                    const selection = await finding?.actions?.selection(this.facts)\n                    this.runflowState(selection.flowState, selection.value)\n                }\n            }\n        },\n        async setEncounterFacts() {\n            try {\n                const program = await Store.get('PATIENT_PROGRAM', { patientID: this.patientID })\n                this.facts.isEnrolledInProgam = program.programID === ProgramService.getProgramID()\n                this.facts.outcome = program.outcome\n                this.facts.outcomeStartDate = program.startDate\n            } catch (e) {\n                console.error(e)\n                toastDanger(`${e}`)\n            }\n            this.facts.currentTA = this.patient.getCurrentTA()\n            this.facts.district = this.patient.getCurrentDistrict()\n            this.facts.village = this.patient.getCurrentVillage()\n            this.facts.sessionDate = ProgramService.getSessionDate()\n            this.facts.apiDate = ProgramService.getCachedApiDate() as string\n            this.facts.isBdeMode = ProgramService.isBDE() as boolean\n            this.facts.birthDate = this.patient.getBirthdate()\n            this.facts.age = this.patient.getAge()\n            this.facts.encounterName = this.$route.name \n                ? this.$route.name.toString().toUpperCase()\n                : 'N/A'\n            if (ProgramService.isBDE()) {\n                this.providers = await Store.get('PROVIDERS')\n                this.facts.providers = this.providers\n                    .sort((a: any, b: any) => {\n                        const usernameA = a.username.toUpperCase()\n                        const usernameB = b.username.toUpperCase()\n                        return usernameA < usernameB ? -1 : usernameA > usernameB  ? 1 : 0\n                    })\n                    .map((p: any) => {\n                        let name = `${p.username}`\n                        if (!isEmpty(p?.person?.names)) {\n                            const [ latestName ] = p.person?.names || []\n                            name += ` (${latestName.given_name} ${latestName.family_name})`\n                        }\n                        return name\n                    })\n            }\n        },\n        toOption(label: string, other={}) {\n            return {\n                label,\n                value: label,\n                other\n            }\n        },\n        mapStrToOptions(items: Array<string | Option>) {\n            return items.map(i => typeof i === 'string' || typeof i === 'number'  \n                ?  { label: i, value: i } : i \n            )\n        },\n        patientDashboardUrl(): string {\n            return `/patient/dashboard/${this.$route.params.patient_id}`\n        },\n        gotoPatientDashboard() {\n            return this.$router.push({path: this.patientDashboardUrl()})\n        },\n        async nextTask() {\n            try {\n                const id = this.offlineID || this.patientID\n                await nextTask(id, this.$router, this.$route)\n            } catch (e) {\n                console.error(\"Workflow error \" +  e)\n                this.gotoPatientDashboard()\n            }\n        },\n        yesNoOptions(): Option[] {\n            return [\n                { label: \"Yes\", value: \"Yes\" },\n                { label: \"No\", value: \"No\" }\n            ]\n        },\n        toYesNoOption(label: string, other: any={}): Option {\n            return {\n                label,\n                value: '',\n                other: {\n                    ...other,\n                    values: this.yesNoOptions()\n                }\n            } \n        },\n        mapOptions(options: Array<string>) {\n            return options.map((option) => {\n                return { label: option, value: option }\n            });        \n        },\n        toConditionalOptions(options: Array<Array<string | boolean | undefined>>) {\n            const final: Option[] = []\n            for(const option of options) {\n                if (typeof option[1] === 'boolean') {\n                    if (option[1]) final.push(this.toOption(option[0] as string))\n                    continue\n                }\n                final.push(this.toOption(option[0] as string))\n            }\n            return final\n        },\n        yesNoUnknownOptions(): Option[] {\n            return [\n                { label: \"Yes\", value: \"Yes\" },\n                { label: \"No\", value: \"No\" },\n                { label: \"Unknown\", value: \"Unknown\" }\n            ]\n        },\n        resolveObs(obs: any, tag='') {\n            const values: any = Object.values(obs)\n                .filter((d: any) => d && (d.tag === tag || tag === ''))\n                .reduce((accum: any, cur: any) => { \n                    const data = cur.obs ? cur.obs : cur\n                    if (Array.isArray(data)) {\n                        accum = accum.concat(data)\n                    } else if (typeof data === 'function') {\n                        accum.push(data())\n                    } else {\n                        accum.push(data)\n                    }\n                    return accum\n                    }, [])\n            return Promise.all(values)\n        },\n        inArray(arr: Array<any>, expression: (i: any) => boolean): boolean {\n            try {\n                return arr.filter((i: any) => expression(i)).length > 0\n            } catch (e) {\n                return false\n            }\n        },\n        validateSeries(conditions: Array<any>){\n            try {\n                for(const i in conditions) {\n                    const condition = conditions[i]()\n\n                    if (condition) return condition\n                }\n            } catch (e) {\n                return [e]\n            }\n        }\n    }\n})\n","import script from \"./EncounterMixin.vue?vue&type=script&lang=ts\"\nexport * from \"./EncounterMixin.vue?vue&type=script&lang=ts\"\n\nconst __exports__ = script;\n\nexport default __exports__","export * from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./PredefinedMalariaDrug.vue?vue&type=style&index=0&id=53d5f4c0&scoped=true&lang=css\"","import { Service } from \"./service\";\n\nexport class DrugService extends Service {\n    constructor() {\n        super()\n    }\n\n    \n    static getDrugs(params={} as Record<string, string | number>) {\n        return super.getJson('/drugs', params)\n    }\n}","import { resolveDynamicComponent as _resolveDynamicComponent, openBlock as _openBlock, createBlock as _createBlock } from \"vue\"\n\nexport function render(_ctx: any,_cache: any,$props: any,$setup: any,$data: any,$options: any) {\n  return (_openBlock(), _createBlock(_resolveDynamicComponent(_ctx.formType), {\n    fields: _ctx.fields,\n    skipSummary: _ctx.skipSummary,\n    activeField: _ctx.activeField,\n    cancelDestinationPath: _ctx.cancelDestinationPath,\n    onOnFinish: _ctx.onFinish,\n    onFinish: _ctx.onFinishAction,\n    onOnIndex: _ctx.onIndex\n  }, null, 40, [\"fields\", \"skipSummary\", \"activeField\", \"cancelDestinationPath\", \"onOnFinish\", \"onFinish\", \"onOnIndex\"]))\n}","\nimport TouchScreenForm from \"@/components/Forms/TouchScreenForm.vue\";\nimport { defineComponent, PropType } from \"vue\";\nimport { Field } from \"./FieldInterface\";\n\nexport default defineComponent({\n    name: \"HisStandardForm\",\n    components: { TouchScreenForm },\n    emits: [\n        'onFinish',\n        'onIndex'\n    ],\n    data: () => ({\n        formType: 'touch-screen-form' as string\n    }),\n    props: {\n        onFinishAction: {\n            type: Function\n        },\n        skipSummary: {\n            type: Boolean,\n            default: false\n        },\n        activeField: {\n            type: String\n        },\n        fields: {\n            type: Object as PropType<Field[]>,\n            required: true\n        },\n        cancelDestinationPath: {\n            type: String,\n            required: false,\n        }\n    },\n    methods: {\n        onFinish(formData: any, computedData: any) {\n            this.$emit('onFinish', formData, computedData)\n        },\n        onIndex(i: number) {\n            this.$emit('onIndex', i)\n        }\n    }\n})\n","import { render } from \"./HisStandardForm.vue?vue&type=template&id=6daa0375&ts=true\"\nimport script from \"./HisStandardForm.vue?vue&type=script&lang=ts\"\nexport * from \"./HisStandardForm.vue?vue&type=script&lang=ts\"\n\nimport exportComponent from \"/home/brian/projects/HIS-Core/node_modules/vue-loader-v16/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./BaseTextInput.vue?vue&type=style&index=0&id=04472bbc&scoped=true&lang=css\"","export * from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./PrescriptionFrequency.vue?vue&type=style&index=0&id=28602c3d&scoped=true&lang=css\"","import { Option } from \"@/components/Forms/FieldInterface\";\nimport { ConceptName } from \"@/interfaces/conceptName\";\nimport { DrugInterface } from \"@/interfaces/Drug\";\nimport { AppEncounterService } from \"@/services/app_encounter_service\"\nimport { DrugOrderService } from \"@/services/drug_order_service\";\nimport { OrderService } from \"@/services/order_service\";\nimport { DrugService } from '../../../services/drug_service';\n\nexport const DRUG_FREQUENCIES: Array<{label: string; code: string; value: number; [x: string]: any}> = [\n  { label : \"ONCE A DAY (OD)\", code : \"OD\", value : 1 },\n  { label : \"TWICE A DAY (BD)\", code : \"BD\", value : 2 },\n  { label : \"THREE TIMES A DAY (TDS)\", code : \"TDS\", value : 3 },\n  { label : \"FOUR TIMES A DAY (QID)\", code : \"QID\", value : 4 },\n  { label : \"FIVE TIMES A DAY (5X/D)\", code : \"5X/D\", value : 5 },\n  { label : \"SIX TIMES A DAY (Q4HRS)\", code : \"Q4HRS\", value : 6 },\n  { label : \"IN THE MORNING (QAM)\", code : \"QAM\", value : 1 },\n  { label : \"ONCE A DAY AT NOON (QNOON)\", code : \"QNOON\", value : 1 },\n  { label : \"IN THE EVENING (QPM)\", code : \"QPM\", value : 1 },\n  { label : \"ONCE A DAY AT NIGHT (QHS)\", code : \"QHS\", value : 1 },\n  { label : \"EVERY OTHER DAY (QOD)\", code : \"QOD\", value : 0.5 },\n  { label : \"ONCE A WEEK (QWK)\", code : \"QWK\", value : 0.14 },\n  { label : \"ONCE A MONTH\", code : \"ONCE A MONTH\", value : 0.03 },\n  { label : \"TWICE A MONTH\", code : \"TWICE A MONTH\", value : 0.071 },\n  { label : \"Unknown\", code : \"Unknown\", value : 0 }\n]\n\nexport const ANTI_MALARIA_DRUGS = [\n  {\n    'drug_id': 236,\n    'duration': 3,\n    'tabs': 6,\n    'name': \"Lumefantrine + Arthemether 1 x 6\",\n    'dose_strength': 1.0,\n    'units': \"tabs\",\n    'frequency': 2\n  },\n  {\n    'drug_id': 237,\n    'duration': 3,\n    'tabs': 12,\n    'name': \"Lumefantrine + Arthemether 2 x 6\",\n    'dose_strength': 2.0,\n    'units': \"tabs\",\n    'frequency': 2\n  },\n  {\n    'drug_id': 238,\n    'duration': 3,\n    'tabs': 18,\n    'name': \"Lumefantrine + Arthemether 3 x 6\",\n    'dose_strength': 3.0,\n    'units': \"tabs\",\n    'frequency': 2\n  },\n  {\n    'drug_id': 239,\n    'duration': 3,\n    'tabs': 24,\n    'name': \"Lumefantrine + Arthemether 4 x 6\",\n    'dose_strength': 4.0,\n    'units': \"tabs\",\n    'frequency': 2\n  },\n  {\n    'drug_id': 311,\n    'duration': 1,\n    'tabs': 1,\n    'name': \"SP (525mg tablet)\",\n    'dose_strength': 1.0,\n    'units': \"tabs\",\n    'frequency': 0.03\n  },\n  {\n    'drug_id': 6952,\n    'duration': 1,\n    'tabs': 1,\n    'name': \"Artesunate injenction\",\n    'dose_strength': 1.0,\n    'units': \"ml\",\n    'frequency': 1\n  },\n  {\n    'drug_id': 1219,\n    'duration': 3,\n    'tabs': 3,\n    'name': \"ASAQ 25mg/67.5mg (3 tablets)\",\n    'dose_strength': 1.0,\n    'units': \"mg\",\n    'frequency': 1\n  },\n  {\n    'drug_id': 1220,\n    'duration': 3,\n    'tabs': 3,\n    'name': \"ASAQ 50mg/135mg (3 tablets)\",\n    'dose_strength': 1.0,\n    'units': \"mg\",\n    'frequency': 1\n  },\n  {\n    'drug_id': 1221,\n    'duration': 3,\n    'tabs': 3,\n    'name': \"ASAQ 100mg/270mg (3 tablets)\",\n    'dose_strength': 1.0,\n    'units': \"mg\",\n    'frequency': 1\n  },\n  {\n    'drug_id': 1222,\n    'duration': 3,\n    'tabs': 6,\n    'name': \"ASAQ 100mg/270mg (6 tablets)\",\n    'dose_strength': 2.0,\n    'units': \"mg\",\n    'frequency': 1\n  }\n];\n\nexport class DrugPrescriptionService extends AppEncounterService {\n  constructor(patientID: number, providerID: number) {\n    super(patientID, 25, providerID) \n  }\n\n  async loadDrugs(filter = '', page=1, limit=10): Promise<Option[]> {\n    const drugs: ConceptName[] = await DrugService.getDrugs({ \n      \"name\": filter, \n      \"page\": page,\n      \"page_size\": limit,\n      \"concept_set\": 'OPD Medication' \n    })\n    return drugs.map(drug => ({\n      label: drug.name, value: drug.name, other: drug\n    }))\n  }\n\n  async hasMalaria() {\n    const malariaTestResult = await OrderService.getLatestMalariaTestResult(this.patientID)\n    if(malariaTestResult === \"No\") {\n      const primaryDiagnosis: any[] = await AppEncounterService.getAllValueCoded(this.patientID, 'Primary diagnosis')\n      if(primaryDiagnosis.includes('Malaria')) return true\n      const secondaryDiagnosis: any[] = await AppEncounterService.getAllValueCoded(this.patientID, 'Secondary diagnosis')\n      if(secondaryDiagnosis.includes('Malaria')) return true\n      return false\n    }\n    return malariaTestResult === \"Positive\"\n  }\n\n  createDrugOrder(drugOrders: Array<DrugInterface>){\n    return DrugOrderService.create({\n      'encounter_id': this.encounterID,\n      'drug_orders': drugOrders\n    })\n  }\n}","/**\n * Compares patient facts against a predefined guideline Object.\n*/\nexport interface DescriptionInterface {\n    color?: 'primary' | 'secondary' | 'danger' | 'warning';\n    info: Function;\n    text?: string;\n    show: 'onChecked' | 'always';\n}\n\nexport interface GuideLineInterface {\n    title?: string;\n    concept?: string;\n    weight?: number;\n    priority?: number;\n    conditions: Record<string, Function>;\n    actions?: Record<string, any>; //TODO: should <key, Function>\n    data?: Record<string, any>;\n    description?: DescriptionInterface;\n    target?: string;\n    targetEvent?: string;\n}\n\n/**\n * Match the facts with guidelines\n * @param facts \n * @param conditions \n * @returns \n */\nfunction isCondition(facts: Record<string, any>, conditions: Record<string, Function>): boolean {\n    const state = [] \n    const ignored = [-1, '', null, undefined]\n\n    for(const prop in conditions) {\n        if (!(prop in facts)) \n            continue\n        \n        const value = facts[prop]\n        if (ignored.includes(value)) {\n            state.push(false)\n            continue\n        }\n\n        state.push(conditions[prop](value, facts))\n    }\n    return state.every(Boolean)\n}\n\n/**\n * Sort guidelines in the order of importance/relevance\n * @param findings \n * @returns \n */\nfunction sortByPriority(findings: GuideLineInterface[]) {\n    return findings.sort((a, b) => (a.priority && b.priority) && a.priority < b.priority ? -1 : 1)\n}\n\nfunction sortByWeight(findings: GuideLineInterface[]) {\n    return findings.sort((a, b) => (a.weight && b.weight) && a.weight > b.weight ? -1 : 1)\n}\n\nexport function logFindingsByWeight(guidelines: Record<string, GuideLineInterface>) {\n    const findings: any = Object.keys(guidelines).map(i => ({ name: i, weight: guidelines[i].weight}))\n    console.log(sortByWeight(findings).map((i: any) => `${i.weight} -> ${i.name}`))\n}\n\n/**\n * Check the guideline for matching facts and return matching object \n * @param facts: key value pair for used for searching in guidelines\n * @param guidelines: A dictionary containing fixed rules/validations that conforms to GuideLineInterface\n * @param target: Used for matching a target defined in a guidlines before executing conditions\n * @param targetEvent: used for matching a target event in a guideline before executing conditions\n * @returns\n */\nexport function matchToGuidelines(\n    facts: Record<string, any>, \n    guidelines: Record<string, GuideLineInterface>,\n    target='', \n    targetEvent='',\n    sortBy='priority' as 'priority' | 'weight'): Array<GuideLineInterface> {\n    const matches = []\n    for(const guidelineIndex in guidelines) {\n        const data: GuideLineInterface = guidelines[guidelineIndex]\n        const targetValidations = [\n            (data.target && target && data.target != target),\n            (data.targetEvent && targetEvent \n                && data.targetEvent != targetEvent)\n        ]\n\n        if (targetValidations.some(Boolean)) {\n            continue\n        }\n\n        if (isCondition(facts, data.conditions)) {\n            data.title = guidelineIndex\n            if (data.description) {\n                data.description.text = data.description.info(facts)\n            }\n            matches.push(data)\n        }\n    }\n    return sortBy === 'priority' ? sortByPriority(matches) : sortByWeight(matches)\n}\n","export * from \"-!../../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./Prescription.vue?vue&type=style&index=0&id=7f0a557e&scoped=true&lang=css\"","import { renderList as _renderList, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock, resolveComponent as _resolveComponent, createVNode as _createVNode, createElementVNode as _createElementVNode } from \"vue\"\n\nconst _hoisted_1 = { class: \"his-floating-keyboard\" }\nconst _hoisted_2 = { class: \"his-floating-keyboard-content\" }\n\nexport function render(_ctx: any,_cache: any,$props: any,$setup: any,$data: any,$options: any) {\n  const _component_base_keyboard = _resolveComponent(\"base-keyboard\")!\n\n  return (_openBlock(), _createElementBlock(\"div\", _hoisted_1, [\n    _createElementVNode(\"div\", _hoisted_2, [\n      (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(_ctx.activeLayout, (layout, index) => {\n        return (_openBlock(), _createElementBlock(\"div\", { key: index }, [\n          _createVNode(_component_base_keyboard, {\n            layout: layout,\n            onKeyPress: _ctx.keypress\n          }, null, 8, [\"layout\", \"onKeyPress\"])\n        ]))\n      }), 128))\n    ])\n  ]))\n}","\nimport { defineComponent } from \"vue\";\nimport { KEY_BTN_NAV } from \"@/components/Keyboard/HisKbConfigurations\"\nimport BaseKeyboard from \"@/components/Keyboard/BaseKeyboard.vue\";\nexport default defineComponent({\n  components: { BaseKeyboard},\n  props: {\n    initalKeyboardName: {\n      type: String\n    },\n    kbConfig: {\n      type: Array,\n      required: true\n    },\n    onKeyPress: {\n      type: Function,\n      required: true,\n    },\n  },\n  data: () => ({\n    activeLayout: {} as Array<any>\n  }),\n  watch: {\n    initalKeyboardName: {\n      handler(name: string) {\n        if (name) {\n          this.$nextTick(() => this.switchKeyboard(name))\n        }\n      },\n      immediate: true\n    },\n    kbConfig: {\n      handler(keyboard: Array<any>){\n        if(keyboard) {\n          this.activeLayout = keyboard\n        }\n      },\n      deep: true,\n      immediate: true\n    }\n  },\n  methods: {\n    keypress(key: any) {\n      if (!this.isFunctionKey(key)) {\n        this.onKeyPress(key);\n      }\n    },\n    isFunctionKey(key: string) {  \n      if (this.switchKeyboard(key)) {\n        return true\n      }\n      return false\n    },\n    switchKeyboard(key: string): boolean {\n      const kbIndex = KEY_BTN_NAV.map(item => item.btn).indexOf(key)\n      if (kbIndex >= 0) {\n        this.activeLayout = KEY_BTN_NAV[kbIndex].keyboard\n        return true\n      }\n      return false\n    }\n  },\n});\n","import { render } from \"./HisKeyboard.vue?vue&type=template&id=7167c7d4&ts=true\"\nimport script from \"./HisKeyboard.vue?vue&type=script&lang=ts\"\nexport * from \"./HisKeyboard.vue?vue&type=script&lang=ts\"\n\nimport exportComponent from \"/home/brian/projects/HIS-Core/node_modules/vue-loader-v16/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__"],"sourceRoot":""}