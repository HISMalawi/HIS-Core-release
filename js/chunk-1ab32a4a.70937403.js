(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-1ab32a4a"],{"775a":function(e,t,a){"use strict";a.d(t,"a",(function(){return g}));var r,n,s=a("d95e"),i=a("1c74"),o=a("b446"),d=a("0011"),l=a("c731"),c=a("b5e4"),u=a("d867"),p=a("7a23"),_=a("2706");(function(e){e["MULTI_FIELD_DATE"]="Multipage date fields",e["CALENDAR_FIELD"]="Calendar",e["SINGLE_DATE_INPUT_FIELD"]="Single page date"})(r||(r={})),function(e){e["PERIOD_INPUT_TYPE"]="hts_report_date_period_type"}(n||(n={}));const v=Object(p["reactive"])({datePeriodInputType:localStorage.getItem(n.PERIOD_INPUT_TYPE)||r.MULTI_FIELD_DATE});function g(e){Object(l["a"])([...Object(o["b"])({id:"start_date",helpText:"Start",required:!0,minDate:()=>(null===e||void 0===e?void 0:e.minDate)||"",maxDate:()=>(null===e||void 0===e?void 0:e.maxDate)||i["e"].getSessionDate(),condition:()=>v.datePeriodInputType===r.MULTI_FIELD_DATE,estimation:{allowUnknown:!1},computeValue:e=>e}),...Object(o["b"])({id:"end_date",helpText:"End",required:!0,minDate:(e,t)=>t.start_date,maxDate:()=>(null===e||void 0===e?void 0:e.maxDate)||i["e"].getSessionDate(),condition:()=>v.datePeriodInputType===r.MULTI_FIELD_DATE,estimation:{allowUnknown:!1},computeValue:e=>e}),{id:"alt_start_date",proxyID:"start_date",helpText:"Start Date",type:s["b"].TT_FULL_DATE,validation:t=>{if(!t)return["Date is required"];const a=e.maxDate||i["e"].getSessionDate();return e.minDate&&new Date(t.value)<new Date(e.minDate)?[`${Object(d["g"])(""+t.value)} is less than minimum date of ${Object(d["g"])(e.minDate)}`]:a&&new Date(t.value)>new Date(a)?[`${Object(d["g"])(""+t.value)} is greater than max date of ${Object(d["g"])(a)}`]:null},computedValue:e=>e.value,condition:()=>v.datePeriodInputType===r.SINGLE_DATE_INPUT_FIELD},{id:"alt_end_date",proxyID:"end_date",helpText:"End Date",type:s["b"].TT_FULL_DATE,defaultValue:e=>e.start_date.value,validation:(t,a)=>{if(!t)return["Date is required"];const r=e.maxDate||i["e"].getSessionDate();return a.start_date.value&&new Date(t.value)<new Date(a.start_date.value)?[`${Object(d["g"])(""+t.value)} is less than minimum date of ${Object(d["g"])(a.start_date.value)}`]:r&&new Date(t.value)>new Date(r)?[`${Object(d["g"])(""+t.value)} is greater than max date of ${Object(d["g"])(r)}`]:null},computedValue:e=>e.label,condition:()=>v.datePeriodInputType===r.SINGLE_DATE_INPUT_FIELD},{id:"calendar_start_date",proxyID:"start_date",helpText:"Start Date",type:s["b"].TT_DATE_PICKER,computedValue:e=>e,condition:()=>v.datePeriodInputType===r.CALENDAR_FIELD,validation:e=>_["a"].required(e),config:{minDate:()=>e.minDate||null,maxDate:()=>e.maxDate||i["e"].getSessionDate(),infoItems:(e,t)=>[{label:"Start Date",value:Object(d["g"])(e)||"-"},{label:"End Date",value:Object(d["g"])(t.end_date)||"-"}],persistInfoItems:!1}},{id:"calendar_end_date",proxyID:"end_date",helpText:"End Date",type:s["b"].TT_DATE_PICKER,validation:e=>_["a"].required(e),defaultValue:e=>e.start_date.value,computedValue:e=>e,condition:()=>v.datePeriodInputType===r.CALENDAR_FIELD,config:{minDate:e=>e.start_date.value,maxDate:()=>e.maxDate||i["e"].getSessionDate(),infoItems:(e,t)=>[{label:"Start Date",value:Object(d["g"])(t.start_date)||"-"},{label:"End Date",value:Object(d["g"])(e)}],persistInfoItems:!1}}],{onFinish:async(t,a)=>{u["ab"].dismiss();try{const t=`${Object(d["g"])(a.start_date)} to ${Object(d["g"])(a.end_date)}`;e.onFinish(a.start_date,a.end_date,t)}catch(r){Object(c["c"])("An error has occurred")}}})}},"937e":function(e,t,a){"use strict";a.r(t);var r=a("7a23");function n(e,t,a,n,s,i){const o=Object(r["resolveComponent"])("ion-loading"),d=Object(r["resolveComponent"])("v2Datatable"),l=Object(r["resolveComponent"])("ion-page");return Object(r["openBlock"])(),Object(r["createBlock"])(l,null,{default:Object(r["withCtx"])(()=>[Object(r["createVNode"])(o,{"is-open":e.isLoading,message:"Please wait..."},null,8,["is-open"]),Object(r["createVNode"])(d,{title:"CXCA SCRN Report",csvQuarter:e.csvQuarter,subtitle:e.period,columns:e.columns,columnData:e.reportData,rowsPerPage:25,onConfigure:e.configure,onRefresh:()=>e.generate()},null,8,["csvQuarter","subtitle","columns","columnData","onConfigure","onRefresh"])]),_:1})}a("13d5"),a("14d9");var s=a("d867"),i=a("99ae"),o=a("ad9e"),d=a("775a"),l=a("b5e4"),c=a("2048"),u=a("0011");const p=Object(r["ref"])([]),_=Object(r["ref"])(""),v=Object(r["ref"])(""),g=Object(r["ref"])(""),b=Object(r["ref"])(!1),m=Object(r["ref"])("");var D=Object(r["defineComponent"])({components:{IonPage:s["D"],IonLoading:s["z"],v2Datatable:i["a"]},setup(){const e=async(e,t)=>{(await s["ab"].create({component:c["a"],backdropDismiss:!1,cssClass:"large-modal",componentProps:{title:e,subtitle:g,patientIdentifiers:t,onFinish:()=>s["ab"].getTop().then(e=>e&&s["ab"].dismiss())}})).present()},t=[[{label:"#",ref:"index",span:{thRowspan:2}},{label:"Age group",ref:"age_group",span:{thRowspan:2}},{label:"Gender",ref:"gender",exportable:!1,span:{thRowspan:2}},{label:"1st time screened",ref:"",span:{thColspan:3}},{label:"Rescreened after previous negative",ref:"",span:{thColspan:3}},{label:"Post-treatment follow-up",ref:"",span:{thColspan:3}}],[{label:"Negative",ref:"first_time_screened_negative",secondaryLabel:"1st screened (Negative)",value:e=>e.first_time_screened.negative.length,tdClick:({column:t,data:a})=>e(`${a.age_group} ${t.secondaryLabel}`,a.first_time_screened.negative)},{label:"Positive",ref:"first_time_screened_positive",secondaryLabel:"1st time screened (Positive)",value:e=>e.first_time_screened.positive.length,tdClick:({column:t,data:a})=>e(`${a.age_group} ${t.secondaryLabel}`,a.first_time_screened.positive)},{label:"Suspected Cancer",ref:"first_time_screened_suspected_cancer",secondaryLabel:"1st screened(Suspected cancer)",value:e=>e.first_time_screened.suspected.length,tdClick:({column:t,data:a})=>e(`${a.age_group} ${t.secondaryLabel}`,a.first_time_screened.suspected)},{label:"Negative",ref:"rescreened_after_prev_visit_negative",secondaryLabel:"Rescreen after prev visit (Negative)",value:e=>e.rescreened_after_prev_visit.negative.length,tdClick:({column:t,data:a})=>e(`${a.age_group} ${t.secondaryLabel}`,a.rescreened_after_prev_visit.negative)},{label:"Positive",ref:"rescreened_after_prev_visit_positive",secondaryLabel:"Rescreen after prev visit (Positive)",value:e=>e.rescreened_after_prev_visit.positive.length,tdClick:({column:t,data:a})=>e(`${a.age_group} ${t.secondaryLabel}`,a.rescreened_after_prev_visit.positive)},{label:"Suspected cancer",ref:"rescreened_after_prev_visit_suspected",secondaryLabel:"Rescreen after prev visit (Suspected)",value:e=>e.rescreened_after_prev_visit.suspected.length,tdClick:({column:t,data:a})=>e(`${a.age_group} ${t.secondaryLabel}`,a.rescreened_after_prev_visit.suspected)},{label:"Negative",ref:"post_treatment_followup_negative",secondaryLabel:"Post-treatment followup(Negative)",value:e=>e.post_treatment_followup.negative.length,tdClick:({column:t,data:a})=>e(`${a.age_group} ${t.secondaryLabel}`,a.post_treatment_followup.negative)},{label:"Positive",ref:"post_treatment_followup_positive",secondaryLabel:"Post-treatment followup (Positive)",value:e=>e.post_treatment_followup.positive.length,tdClick:({column:t,data:a})=>e(`${a.age_group} ${t.secondaryLabel}`,a.post_treatment_followup.positive)},{label:"Suspected cancer",ref:"post_treatment_followup_suspected",secondaryLabel:"Post-treatment followup (Suspected)",value:e=>e.post_treatment_followup.suspected.length,tdClick:({column:t,data:a})=>e(`${a.age_group} ${t.secondaryLabel}`,a.post_treatment_followup.suspected)}]],a=async()=>{if(!_.value||!v.value)return Object(l["e"])("Start date and end date required!");b.value=!0,p.value=[];const e=new o["a"];e.startDate=_.value,e.endDate=v.value;try{p.value=(await e.getClinicReport("CXCA SCRN")).slice(5).map((e,t)=>(e.index=t+1,e.gender="Female",e));const t=e=>{const t=t=>p.value.reduce((a,r)=>a.concat(r[e][t]||[]),[]);return{positive:t("positive"),negative:t("negative"),suspected:t("suspected")}};p.value.push({age_group:"All",gender:"Female",index:p.value.length+1,first_time_screened:t("first_time_screened"),post_treatment_followup:t("post_treatment_followup"),rescreened_after_prev_visit:t("rescreened_after_prev_visit")})}catch(t){Object(l["c"])("Unable to generate report!")}b.value=!1},n=()=>Object(d["a"])({onFinish:(e,t,r)=>{_.value=e,v.value=t,g.value=`Period (${r})`,m.value=`${Object(u["g"])(_.value)} to ${Object(u["g"])(v.value)}`,a()}});return Object(r["onMounted"])(()=>!p.value.length&&n()),{columns:t,isLoading:b,reportData:p,period:g,csvQuarter:m,generate:a,configure:n}}}),f=a("d959"),h=a.n(f);const I=h()(D,[["render",n]]);t["default"]=I},ad9e:function(e,t,a){"use strict";a.d(t,"a",(function(){return i}));var r=a("ade3"),n=(a("14d9"),a("1c74")),s=a("9283");class i extends n["e"]{constructor(){super(),Object(r["a"])(this,"programID",void 0),Object(r["a"])(this,"startDate",void 0),Object(r["a"])(this,"endDate",void 0),Object(r["a"])(this,"date",void 0),this.endDate="",this.startDate="",this.date=n["e"].getSessionDate(),this.programID=n["e"].getProgramID()}getPepfarReport(e){return this.getReport("pepfar_cxca",{report_name:e})}getClinicReport(e){return this.getReport("screened_for_cxca",{report_name:e})}getMohReport(e){return this.getReport("screened_for_cxca",{report_name:e})}getDateIntervalPeriod(){return`${s["b"].toStandardHisDisplayFormat(this.startDate)} - ${s["b"].toStandardHisDisplayFormat(this.endDate)}`}setStartDate(e){this.startDate=e}setEndDate(e){this.endDate=e}getReportPeriod(){return this.startDate&&this.endDate?`${s["b"].toStandardHisDisplayFormat(this.startDate)} - ${s["b"].toStandardHisDisplayFormat(this.endDate)}`:"-"}getReport(e,t={}){return n["e"].getJson(e,this.buildRequest(t))}buildRequest(e={}){const t={date:this.date,program_id:24};return this.startDate&&this.endDate&&(t["start_date"]=this.startDate,t["end_date"]=this.endDate),{...t,...e}}static getReportQuarters(e=4){const t=[];let a=s["b"].getCurrentYear();for(let r=0;r<e;++r)t.push({name:"Q4 "+a,start:a+"-10-01",end:a+"-12-31"}),t.push({name:"Q3 "+a,start:a+"-07-01",end:a+"-09-30"}),t.push({name:"Q2 "+a,start:a+"-04-01",end:a+"-06-30"}),t.push({name:"Q1 "+a,start:a+"-01-01",end:a+"-03-31"}),--a;return t}}}}]);
//# sourceMappingURL=chunk-1ab32a4a.70937403.js.map