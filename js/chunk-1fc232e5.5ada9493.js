(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-1fc232e5"],{3800:function(e,t,o){"use strict";o.d(t,"d",(function(){return n})),o.d(t,"l",(function(){return a})),o.d(t,"e",(function(){return c})),o.d(t,"b",(function(){return s})),o.d(t,"k",(function(){return r})),o.d(t,"i",(function(){return l})),o.d(t,"g",(function(){return i})),o.d(t,"a",(function(){return u})),o.d(t,"j",(function(){return d})),o.d(t,"c",(function(){return p})),o.d(t,"h",(function(){return b})),o.d(t,"f",(function(){return j}));const n=[["1","2","3"],["4","5","6"],["7","8","9"],[".","0","Del"],["","Done",""]],a=[["1","2","3"],["4","5","6"],["7","8","9"],[".","0","Del"],["Clear","%","/"]],c=[["1","2","3"],["4","5","6"],["7","8","9"],["Del.","0","Clear"]],s=[["1","2","3","<"],["4","5","6",">"],["7","8","9","="],["","0",""]],r=[["1","2","3","+","-","/","*"],["4","5","6","%","=","<",">","Qwerty"],["7","8","9",".",","],["","0",""]],l=[["1","2","3"],["4","5","6"],["7","8","9"],["","0",""]],i=[["1","2","3","4","5","6","7"],["8","9","10","11","12","13","14"],["15","16","17","18","19","20","21"],["22","23","24","25","26","27","28"],["29","30","31"]],u=[["a","b","c","d","e","f","g","h","."],["i","j","k","l","m","n","o","p","q"],["r","s","t","u","v","w","x","y","z"]],d=[["q","w","e","r","t","y","u","i","o","p"],["a","s","d","f","g","h","j","k","l","'"],["z","x","c","v","b","n","m",",",".","A-Z"]],p=[["1","2","3","4","5","6","7","8","9","0"],["a","b","c","d","e","f","g","h","-","."],["i","j","k","l","m","n","o","p","q"],["r","s","t","u","v","w","x","y","z"]],b=[["1","2","3","4","5","6","7","8","9","0","Del"],["q","w","e","r","t","y","u","i","o","p","Clear"],["a","s","d","f","g","h","j","k","l",".","Caps"],["z","x","c","v","b","n","m","<",">","/","Enter"]],j=[["1","2","3","4","5","6","7","8","9","0"],["q","w","e","r","t","y","u","i","o","p"],["a","s","d","f","g","h","j","k","l","Del."],["z","x","c","v","b","n","m","Caps","Login"]]},"52f5":function(e,t,o){"use strict";o("da4d")},7101:function(e,t,o){"use strict";o.r(t);var n=o("7a23");const a=Object(n["withScopeId"])("data-v-52eed022");Object(n["pushScopeId"])("data-v-52eed022");const c=Object(n["createVNode"])("b",{style:{color:"#8b4513"}},"National ",-1),s=Object(n["createVNode"])("b",{style:{color:"#cd853f"}},"EMR",-1),r=Object(n["createTextVNode"])(" Version: "),l=Object(n["createTextVNode"])(" Configuration ");Object(n["popScopeId"])();const i=a((function(e,t,o,i,u,d){const p=Object(n["resolveComponent"])("ion-label"),b=Object(n["resolveComponent"])("ion-title"),j=Object(n["resolveComponent"])("ion-toolbar"),f=Object(n["resolveComponent"])("ion-header"),O=Object(n["resolveComponent"])("inputs"),m=Object(n["resolveComponent"])("ion-content"),h=Object(n["resolveComponent"])("ion-button"),g=Object(n["resolveComponent"])("ion-footer"),v=Object(n["resolveComponent"])("ion-page");return Object(n["openBlock"])(),Object(n["createBlock"])(v,null,{default:a(()=>[Object(n["createVNode"])(f,null,{default:a(()=>[Object(n["createVNode"])(j,null,{default:a(()=>[Object(n["createVNode"])(b,null,{default:a(()=>[Object(n["createVNode"])(p,{style:{fontWeight:"bolder",fontSize:"1.9em"}},{default:a(()=>[c,s]),_:1})]),_:1}),Object(n["createVNode"])(p,{class:"ion-padding",slot:"end"},{default:a(()=>[r,Object(n["createVNode"])("b",null,Object(n["toDisplayString"])(i.version),1)]),_:1})]),_:1})]),_:1}),Object(n["createVNode"])(m,{fullscreen:"false"},{default:a(()=>[Object(n["createVNode"])(O,{useVirtualInput:i.useVirtualInput},null,8,["useVirtualInput"])]),_:1}),Object(n["createVNode"])(g,null,{default:a(()=>[Object(n["createVNode"])(j,null,{default:a(()=>[Object(n["createVNode"])("span",null,[Object(n["createVNode"])("img",{id:"coat",src:i.coatImg,alt:"Malawi Coat of Arms logo"},null,8,["src"]),Object(n["createVNode"])("img",{id:"pepfar",src:i.pepfarImg,alt:"PEPFAR logo"},null,8,["src"])]),Object(n["withDirectives"])(Object(n["createVNode"])("select",{"onUpdate:modelValue":t[1]||(t[1]=e=>i.platform=e),slot:"end",class:"devices"},[(Object(n["openBlock"])(!0),Object(n["createBlock"])(n["Fragment"],null,Object(n["renderList"])(i.devices,(e,t)=>(Object(n["openBlock"])(),Object(n["createBlock"])("option",{key:t,value:e.value,selected:e.value===i.platform},Object(n["toDisplayString"])(e.label),9,["value","selected"]))),128))],512),[[n["vModelSelect"],i.platform]]),i.showConfig?(Object(n["openBlock"])(),Object(n["createBlock"])(h,{key:0,slot:"end",class:"config","router-link":"/settings/host"},{default:a(()=>[l]),_:1})):Object(n["createCommentVNode"])("",!0)]),_:1})]),_:1})]),_:1})}));o("caad");const u=Object(n["withScopeId"])("data-v-fe1a1558");Object(n["pushScopeId"])("data-v-fe1a1558");const d={class:"main",ref:"main"},p={class:"rows"},b={class:"cells"},j={class:"rows input-rows"},f={class:"cells"},O={class:"rows"};Object(n["popScopeId"])();const m=u((function(e,t,o,a,c,s){const r=Object(n["resolveComponent"])("center");return Object(n["openBlock"])(),Object(n["createBlock"])(n["Fragment"],null,[Object(n["createVNode"])("div",d,[Object(n["createVNode"])("div",p,[Object(n["createVNode"])("div",b,[Object(n["withDirectives"])(Object(n["createVNode"])("input",{type:"text",name:"usename",autocomplete:"off",placeholder:"Username",id:"username",ref:"username","onUpdate:modelValue":t[1]||(t[1]=t=>e.userInput.username=t),onClick:t[2]||(t[2]=t=>e.renderKeyBoard(t)),class:"input-boxes",readonly:e.useVirtualInput},null,8,["readonly"]),[[n["vModelText"],e.userInput.username]])])]),Object(n["createVNode"])("div",j,[Object(n["createVNode"])("div",f,[Object(n["withDirectives"])(Object(n["createVNode"])("input",{"onUpdate:modelValue":t[3]||(t[3]=t=>e.userInput.password=t),type:"password",name:"password",ref:"password",id:"password",onClick:t[4]||(t[4]=t=>e.renderKeyBoard(t)),class:"input-boxes",placeholder:"Password",readonly:e.useVirtualInput},null,8,["readonly"]),[[n["vModelText"],e.userInput.password]])])])],512),Object(n["createVNode"])(r,null,{default:u(()=>[Object(n["createVNode"])("div",{id:"keyboard",style:e.btnStyles,class:"keyboard"},[(Object(n["openBlock"])(!0),Object(n["createBlock"])(n["Fragment"],null,Object(n["renderList"])(e.LOGIN_KEYBOARD,o=>(Object(n["openBlock"])(),Object(n["createBlock"])("span",{key:o},[Object(n["createVNode"])("div",O,[(Object(n["openBlock"])(!0),Object(n["createBlock"])(n["Fragment"],null,Object(n["renderList"])(o,o=>(Object(n["openBlock"])(),Object(n["createBlock"])("div",{class:"cells",key:o},["Next"===o||"Login"===o?(Object(n["openBlock"])(),Object(n["createBlock"])("button",{key:0,id:e.btnCaption,class:"keyboard-btn login-btn",onClick:t[5]||(t[5]=t=>e.keyPress(t))},Object(n["toDisplayString"])(e.btnCaption),9,["id"])):Object(n["createCommentVNode"])("",!0),"Login"!=o&&"Next"!=o?(Object(n["openBlock"])(),Object(n["createBlock"])("button",{key:1,id:e.Caps.on?o.toUpperCase():o.toLowerCase(),class:"keyboard-btn",onClick:t[6]||(t[6]=t=>e.keyPress(t))},Object(n["toDisplayString"])("Del."===o||"Caps"===o?o:e.Caps.on?o.toUpperCase():o.toLowerCase()),9,["id"])):Object(n["createCommentVNode"])("",!0)]))),128))])]))),128))],4)]),_:1})],64)}));var h=o("b5e4"),g=o("89b4"),v=o("3800"),y=Object(n["defineComponent"])({props:{useVirtualInput:{type:Boolean}},data:function(){return{LOGIN_KEYBOARD:v["f"],auth:{},userInput:{type:String,username:"",password:""},focusInput:{type:Object,value:"",id:""},display:"none",keyboardLeft:"",keyboardTop:"",btnCaption:"",Caps:{type:Boolean,on:!1}}},created(){this.auth=new g["a"]},methods:{renderKeyBoard(e){this.focusInput=e.currentTarget,"password"==this.focusInput.id?this.btnCaption="Login":this.btnCaption="Next";const t=document.getElementsByClassName("main")[0],o=t.getBoundingClientRect().width;let n=e.currentTarget.getBoundingClientRect().top;n=parseInt(n),this.keyboardLeft=o/2-447+"px;",this.keyboardTop=n+20+"px;",this.display="table",window.scrollTo(0,9999)},keyPress(e){const t=e.currentTarget.id;let o;try{t.match(/Del./i)?this.focusInput.value=this.focusInput.value.substring(0,this.focusInput.value.length-1):t.match(/Next/i)?(this.display="none",o=this.$refs.password,o.click()):t.match(/Login/i)?(this.display="none",this.doLogin()):t.match(/Caps/i)?(this.Caps.on=!this.Caps.on,this.display="none",o="username"===this.focusInput.id?this.$refs.username:this.$refs.password,o.click()):t.match(/Hide/i)?this.display="none":this.focusInput.value+=t,"username"==this.focusInput.id?this.userInput.username=this.focusInput.value:this.userInput.password=this.focusInput.value}catch(n){console.warn("input error")}},doLogin:async function(){if(this.userInput.username&&this.userInput.password){this.auth.setUsername(this.userInput.username);try{if(this.auth.versionLockingIsEnabled()&&await this.auth.validateIfCorrectAPIVersion(),!await this.auth.checkTimeIntegrity())throw"Local date does not match API date. Please Update your device's date";await this.auth.login(this.userInput.password),this.auth.startSession(),this.$router.push("/select_hc_location")}catch(e){e instanceof g["c"]?Object(h["e"])("Invalid username or password"):Object(h["c"])(e,5e4)}}else Object(h["e"])("Complete form to log in")}},computed:{btnStyles(){return`display: ${this.display}; top: ${this.keyboardTop}`}}}),k=(o("52f5"),o("6b0d")),I=o.n(k);const w=I()(y,[["render",m],["__scopeId","data-v-fe1a1558"]]);var C=w,V=o("8a30"),N=o("1718"),B=o("a1e9"),_=o("5c40"),L=o("2ed9"),x={name:"login",components:{Inputs:C,IonButton:V["d"],IonTitle:V["P"],IonLabel:V["x"],IonPage:V["D"],IonHeader:V["q"],IonToolbar:V["Q"],IonContent:V["n"],IonFooter:V["o"]},setup(){const{platformType:e,setPlatformType:t}=Object(L["a"])(),o=Object(n["computed"])(()=>"mobile"===e.value),a=Object(B["m"])(e.value||"Platform"),c=Object(B["m"])(""),s=Object(B["m"])([{label:"Mobile",value:"mobile"},{label:"Desktop",value:"desktop"}]);return Object(n["watch"])(a,e=>{["mobile","desktop"].includes(e)&&t(e)}),Object(_["U"])(async()=>{const e=new g["a"];await e.loadConfig();const t=await e.getHeadVersion();e.setActiveVersion(t);const o=await e.getApiVersion();c.value=`${t} / ${o}`}),{devices:s,version:c,platform:a,useVirtualInput:o,coatImg:Object(N["a"])("login-logos/Malawi-Coat_of_arms_of_arms.png"),pepfarImg:Object(N["a"])("login-logos/PEPFAR.png"),showConfig:"true"===localStorage.getItem("useLocalStorage")}}};o("b1e9");const D=I()(x,[["render",i],["__scopeId","data-v-52eed022"]]);t["default"]=D},b10e:function(e,t,o){},b1e9:function(e,t,o){"use strict";o("b10e")},da4d:function(e,t,o){}}]);
//# sourceMappingURL=chunk-1fc232e5.5ada9493.js.map