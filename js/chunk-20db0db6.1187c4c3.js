(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-20db0db6"],{"1f9a":function(e,t,n){"use strict";n.d(t,"a",(function(){return b}));var r=n("5530"),i=n("1da1"),a=n("d4ec"),o=n("bee2"),u=n("262e"),s=n("2caf"),c=(n("d3b7"),n("ddb0"),n("96cf"),n("1c74")),d=n("ad60"),l=n("d10e"),p=n("45eb"),h=n("7e84"),f=function(e){Object(u["a"])(n,e);var t=Object(s["a"])(n);function n(){return Object(a["a"])(this,n),t.call(this)}return Object(o["a"])(n,null,[{key:"create",value:function(e){return Object(p["a"])(Object(h["a"])(n),"postJson",this).call(this,"/person_attributes",e)}}]),n}(c["e"]),m=n("4db7"),b=function(e){Object(u["a"])(n,e);var t=Object(s["a"])(n);function n(){var e;return Object(a["a"])(this,n),e=t.call(this),e.personId=0,e}return Object(o["a"])(n,[{key:"getPersonID",value:function(){return this.personId}},{key:"setPersonID",value:function(e){this.personId=e}},{key:"registerPatient",value:function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(t,n){var r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.createPerson(t);case 2:return e.next=4,this.createPersonAttributes(n);case 4:return e.next=6,this.createPatient();case 6:return r=e.sent,e.next=9,this.printPatient();case 9:return e.abrupt("return",r);case 10:case"end":return e.stop()}}),e,this)})));function t(t,n){return e.apply(this,arguments)}return t}()},{key:"registerGuardian",value:function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",this.createPerson(t));case 1:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"updatePerson",value:function(e){return new l["a"](e).update(this.personId)}},{key:"createPerson",value:function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,new l["a"](t).create();case 2:return n=e.sent,this.personId=n.person_id,e.abrupt("return",n);case 5:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"createPatient",value:function(){return d["a"].createPatient(this.personId)}},{key:"createPersonAttributes",value:function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:e.t0=regeneratorRuntime.keys(t);case 1:if((e.t1=e.t0()).done){e.next=7;break}return n=e.t1.value,e.next=5,f.create(Object(r["a"])(Object(r["a"])({},t[n]),{},{person_id:this.personId}));case 5:e.next=1;break;case 7:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"printPatient",value:function(){return new m["a"](this.personId).printNidLbl()}}]),n}(c["e"])},"8d15":function(e,t,n){"use strict";n.r(t);var r=n("7a23");function i(e,t,n,i,a,o){var u=Object(r["resolveComponent"])("his-standard-form"),s=Object(r["resolveComponent"])("ion-page");return Object(r["openBlock"])(),Object(r["createBlock"])(s,null,{default:Object(r["withCtx"])((function(){return[Object(r["createVNode"])(u,{onOnIndex:t[1]||(t[1]=function(t){return e.fieldComponent=""}),skipSummary:!0,activeField:e.fieldComponent,fields:e.fields,onFinishAction:e.onFinish},null,8,["activeField","fields","onFinishAction"])]})),_:1})}var a=n("1da1"),o=(n("99af"),n("caad"),n("2532"),n("ac1f"),n("466d"),n("d81d"),n("4de4"),n("d3b7"),n("07ac"),n("841c"),n("159b"),n("b64b"),n("5319"),n("96cf"),n("d95e")),u=n("7920"),s=n("b446"),c=n("2706"),d=n("23e6"),l=n("9283"),p=n("50e7"),h=n("2ef0"),f=n("80b5"),m=n("1f9a"),b=n("3e53"),g=n("0fa1"),v=n("0011"),_=n("fa73"),y=n("b5e4"),C=n("8df6"),k=n("8a30"),D=n("7f35"),F=n("cc74"),w=n("5a0c"),x=n.n(w),P=n("8734"),I=n("8e8b"),R=Object(r["defineComponent"])({components:{HisStandardForm:u["a"],IonPage:k["IonPage"]},data:function(){return{app:b["a"].getActiveApp(),ddeInstance:{},ddeDocID:"",ddeIsReassign:!1,skipSummary:!1,currentAddressAttributes:["current_region","current_district","current_village","current_traditional_authority"],homeAddressAttributes:["home_region","home_district","home_traditional_authority","home_village"],hasIncompleteData:!1,patient:{},editPersonData:{},editPerson:-1,personAttribute:"",activeField:"",fieldComponent:"",fields:[],isMilitarySite:!1,presets:{},registrationSummary:{},form:{},ddeEnabled:!1}},watch:{$route:{handler:function(e){var t=this;return Object(a["a"])(regeneratorRuntime.mark((function n(){var r;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(r=e.query,t.ddeInstance=new _["a"],!r.edit_person){n.next=11;break}return t.ddeIsReassign=r.dde_reassign,t.ddeDocID=r.doc_id,t.ddeInstance.setPatientID(r.edit_person),r.person_attribute&&(t.personAttribute=r.person_attribute),n.next=9,t.initEditMode(r.edit_person);case 9:n.next=12;break;case 11:t.presets=r;case 12:t.fields=t.getFields();case 13:case"end":return n.stop()}}),n)})))()},immediate:!0,deep:!0}},methods:{getFields:function(){var e=[];return e.push(this.personIndexField()),e.push(this.givenNameField()),e.push(this.familyNameField()),e.push(this.genderField()),e.push(this.searchResultField()),e=e.concat(this.dobFields()),e.push(this.homeRegionField()),e.push(this.homeDistrictField()),e.push(this.homeTAField()),e.push(this.homeVillageField()),e.push(this.currentRegionField()),e.push(this.currentDistrictField()),e.push(this.currentTAField()),e.push(this.currentVillage()),e=e.concat(this.landmarkFields()),e.push(this.cellPhoneField()),e.push(this.patientTypeField()),e.push(this.facilityLocationField()),e.push(this.occupationField()),e.push(this.regimentField()),e=e.concat(this.dateJoinedMilitaryFields()),e.push(this.rankField()),e.push(this.relationshipField()),e.push(this.possibleDuplicatesField()),e.push(this.patientRegistrationSummary()),e},isEditMode:function(){return this.editPerson>=1},initEditMode:function(e){var t=this;return Object(a["a"])(regeneratorRuntime.mark((function n(){var r,i,a,o,u,s;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return t.editPerson=e,n.next=3,I["a"].get("ACTIVE_PATIENT",{patientID:parseInt("".concat(t.editPerson))});case 3:t.patient=n.sent,r=t.patient.getAddresses(),i=r.ancestryDistrict,a=r.ancestryTA,o=r.ancestryVillage,u=r.currentDistrict,s=r.currentTA,t.editPersonData={given_name:t.patient.getGivenName(),family_name:t.patient.getFamilyName(),gender:t.patient.getGender(),birthdate:t.patient.getBirthdate(),home_district:i,home_traditional_authority:a,home_village:o,current_district:u,current_traditional_authority:s,cell_phone_number:t.patient.getPhoneNumber(),landmark:t.patient.getClosestLandmark()},t.presets=t.editPersonData,t.skipSummary=!0,t.personAttribute&&(t.activeField=t.personAttribute,t.fieldComponent=t.activeField);case 9:case"end":return n.stop()}}),n)})))()},onFinish:function(e,t){var n=this;return Object(a["a"])(regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:if(n.isEditMode()){r.next=4;break}return r.abrupt("return",n.create(e,t));case 4:return r.abrupt("return",n.update(t));case 5:case"end":return r.stop()}}),r)})))()},create:function(e,t){var n=this;return Object(a["a"])(regeneratorRuntime.mark((function e(){var r,i,a,o,u,s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r=f["a"].resolvePerson(t),r="true"==n.presets.nationalIDStatus?n.appendNationalIDData(r):r,i=n.resolvePersonAttributes(t),a=new m["a"],e.t0=d["a"],e.next=7,a.registerPatient(r,i);case 7:if(e.t1=e.sent,o=new e.t0(e.t1),u=a.getPersonID(),I["a"].set("ACTIVE_PATIENT",o),"true"!=n.presets.nationalIDStatus){e.next=15;break}return n.patient=o,e.next=15,n.patient.updateMWNationalId(n.presets.malawiNationalID);case 15:if(!n.app.onRegisterPatient){e.next=21;break}return e.next=18,n.app.onRegisterPatient(u,r,i,n.$router,n.$route);case 18:if(s=e.sent,!s){e.next=21;break}return e.abrupt("return");case 21:if("Yes"!==r.relationship){e.next=23;break}return e.abrupt("return",n.$router.push("/guardian/registration/".concat(u)));case 23:return e.next=25,Object(g["b"])(u,n.$router);case 25:case"end":return e.stop()}}),e)})))()},appendNationalIDData:function(e){return Object.assign(e,{given_name:this.presets.given_name,family_name:this.presets.family_name,gender:this.presets.gender,birthdate:this.presets.birthdate,birthdate_estimated:!1})},update:function(e){var t=this;return Object(a["a"])(regeneratorRuntime.mark((function n(){var r,i,a;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return r=f["a"].resolvePerson(e),i=new m["a"],i.setPersonID(t.editPerson),n.next=5,i.updatePerson(r);case 5:for(a in r)a in t.editPersonData&&(t.editPersonData[a]=r[a]);if(I["a"].invalidate("ACTIVE_PATIENT"),t.personAttribute){n.next=9;break}return n.abrupt("return",t.fieldComponent="edit_user");case 9:t.$router.back();case 10:case"end":return n.stop()}}),n)})))()},editConditionCheck:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return!(this.isEditMode()&&!e.includes(this.activeField))},confirmPatient:function(){var e=this;return Object(a["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!e.ddeEnabled||!(!e.patient.getDocID()||e.patient.getDocID()&&e.patient.getNationalID().match(/unknown/i))){t.next=13;break}return t.prev=1,t.next=4,e.patient.assignNpid();case 4:return t.next=6,e.patient.printNationalID();case 6:return t.next=8,Object(P["a"])(300);case 8:t.next=13;break;case 10:t.prev=10,t.t0=t["catch"](1),Object(y["c"])("Failed to assign new NPID: ".concat(t.t0));case 13:e.$router.push("/patients/confirm?person_id=".concat(e.patient.getID()));case 14:case"end":return t.stop()}}),t,null,[[1,10]])})))()},resolvePersonAttributes:function(e){return Object.values(e).filter((function(e){return Object(h["isPlainObject"])(e)&&"personAttributes"in e})).map((function(e){var t=e.personAttributes;return t}))},mapToOption:function(e){return e.map((function(e){return{label:e,value:e}}))},givenNameField:function(){var e=this,t=f["a"].getGivenNameField();return t.condition=function(){return e.editConditionCheck(["given_name"])&&"true"!=e.presets.nationalIDStatus},t.defaultValue=function(){return e.presets.given_name},t},familyNameField:function(){var e=this,t=f["a"].getFamilyNameField();return t.condition=function(){return e.editConditionCheck(["family_name"])&&"true"!=e.presets.nationalIDStatus},t.defaultValue=function(){return e.presets.family_name},t},genderField:function(){var e=this,t="ANC"===this.app.applicationName,n="CxCa"===this.app.applicationName,r=f["a"].getGenderField();return r.requireNext=this.isEditMode(),r.defaultValue=function(){return e.presets.gender},r.condition=function(){return!(!e.isEditMode()&&(t||n))&&(e.editConditionCheck(["gender"])&&"true"!=e.presets.nationalIDStatus)},!t&&!n||this.isEditMode()||(r.defaultOutput=function(){return{label:"Female",value:"F"}},r.defaultComputedOutput=function(){return{person:"F"}}),r.beforeNext=function(){var t=Object(a["a"])(regeneratorRuntime.mark((function t(n){var r,i,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(r=n.value,i=e.presets.gender,!e.isEditMode()||r==i){t.next=7;break}return t.next=5,Object(D["a"])("Warning","Changing gender from ".concat(i," to ").concat(r),"This change will cause data inconsistency and will affect alot of Reports.",[{name:"Cancel",slot:"start"},{name:"Change gender",slot:"end",color:"danger"}]);case 5:return a=t.sent,t.abrupt("return","Change gender"===a);case 7:return t.abrupt("return",!0);case 8:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),r},dobFields:function(){var e=this,t=f["a"].getDobConfig();if(t.defaultValue=function(){return e.presets.birthdate},t.condition=function(){return e.editConditionCheck(["year_birth_date","month_birth_date","day_birth_date"])},"ANC"===this.app.applicationName){var n=d["a"].getSessionDate(),r=12;t.maxDate=function(){return x()(n).subtract(r,"years").format(l["b"])}}return Object(s["b"])(t)},homeRegionField:function(){var e=this,t=f["a"].getHomeRegionField();return t.condition=function(){return e.editConditionCheck(e.homeAddressAttributes)},t},homeDistrictField:function(){var e=this,t=f["a"].getHomeDistrictField();return t.condition=function(){return e.editConditionCheck(e.homeAddressAttributes)},t},homeTAField:function(){var e=this,t=f["a"].getHomeTaField();return t.condition=function(t){return e.editConditionCheck(e.homeAddressAttributes)&&!t.home_region.label.match(/foreign/i)},t},homeVillageField:function(){var e=this,t=f["a"].getHomeVillageField();return t.condition=function(t){return e.editConditionCheck(e.homeAddressAttributes)&&!t.home_region.label.match(/foreign/i)},t},currentRegionField:function(){var e=this,t=f["a"].getCurrentRegionField();return t.condition=function(){return e.editConditionCheck(e.currentAddressAttributes)},t},currentDistrictField:function(){var e=this,t=f["a"].getCurrentDistrictField();return t.condition=function(){return e.editConditionCheck(e.currentAddressAttributes)},t},currentTAField:function(){var e=this,t=f["a"].getCurrentTAfield();return t.condition=function(t){return e.editConditionCheck(e.currentAddressAttributes)&&!t.current_region.label.match(/foreign/i)},t},currentVillage:function(){var e=this,t=f["a"].getCurrentVillageField();return t.condition=function(t){return e.editConditionCheck(e.currentAddressAttributes)&&!t.current_region.label.match(/foreign/i)},t},cellPhoneField:function(){var e=this,t=f["a"].getCellNumberField();return t.condition=function(){return e.editConditionCheck(["cell_phone_number"])},t.defaultValue=function(){return e.presets.cell_phone_number},t},facilityLocationField:function(){var e=f["a"].getFacilityLocationField();return e.condition=function(e){return["Drug Refill","External consultation"].includes(e.patient_type.value)},e},landmarkFields:function(){var e=this,t=f["a"].getLandmarkFields();return t[0].condition=function(){return e.editConditionCheck(["default_landmarks"])},t},patientTypeField:function(){var e=this;return{id:"patient_type",helpText:"Type of patient",type:o["b"].TT_SELECT,computedValue:function(e){return{person:e.value}},condition:function(){return e.editConditionCheck(["patient_type"])&&"ART"===e.app.applicationName},validation:function(e){return c["a"].required(e)},options:function(){return C["a"].getPatientTypes()}}},occupationField:function(){var e=this;return{id:"occupation",helpText:"Occupation",type:o["b"].TT_SELECT,init:function(){var t=Object(a["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,F["b"].militarySiteEnabled();case 2:return e.isMilitarySite=t.sent,t.abrupt("return",!0);case 4:case"end":return t.stop()}}),t)})));function n(){return t.apply(this,arguments)}return n}(),computedValue:function(e){return{person:e.value}},condition:function(){return e.editConditionCheck(["occupation"])&&e.isMilitarySite},validation:function(e){return c["a"].required(e)},options:function(){return e.mapToOption(["Military","Civilian"])}}},regimentField:function(){var e=this;return{id:"person_regiment_id",helpText:"Regiment ID",type:o["b"].TT_TEXT,computedValue:function(e){var t=e.value;return{personAttributes:{person_attribute_type_id:35,value:t}}},condition:function(t){return e.editConditionCheck(["person_regiment_id"])&&t.occupation&&t.occupation.value.match(/Military/i)},validation:function(e){return c["a"].required(e)}}},rankField:function(){var e=this;return{id:"rank",helpText:"Rank",type:o["b"].TT_SELECT,validation:function(e){return c["a"].required(e)},computedValue:function(e){var t=e.value;return{personAttributes:{person_attribute_type_id:36,value:t}}},condition:function(t){return e.editConditionCheck(["rank"])&&t.occupation&&t.occupation.value.match(/Military/i)},options:function(){return e.mapToOption(["First Lieutenant","Captain","Major","Lieutenant Colonel","Colonel","Brigadier General","Lieutenant General","General","Private","Corporal","Lance Corporal","Seargent","Staff Seargent","Warrant Officer class 1","Warrant Officer class 2"])}}},dateJoinedMilitaryFields:function(){var e=this;return Object(s["b"])({id:"person_date_joined_military",helpText:"Joined Military",required:!0,condition:function(t){return e.editConditionCheck(["year_person_date_joined_military","month_person_date_joined_military","day_person_date_joined_military"])&&t.occupation&&t.occupation.value.match(/Military/i)},minDate:function(){return l["c"].estimateDateFromAge(100)},maxDate:function(){return p["a"].getSessionDate()},estimation:{allowUnknown:!1},computeValue:function(e){return{date:e,personAttributes:{person_attribute_type_id:37,value:e}}}})},relationshipField:function(){var e=this,t="CxCa"===this.app.applicationName,n="OPD"===this.app.applicationName,r="Registration"===this.app.applicationName;return{id:"relationship",helpText:"Register guardian?",type:o["b"].TT_SELECT,computedValue:function(e){return{person:e.value}},condition:function(){return e.editConditionCheck(["relationship"])&&!t&&!n&&!r},validation:function(e){return c["a"].required(e)},options:function(){return e.mapToOption(["Yes","No"])}}},searchResultField:function(){var e=this;return{id:"results",helpText:"Search results",type:o["b"].TT_PERSON_RESULT_VIEW,init:function(){var t=Object(a["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.isEditMode()){t.next=4;break}return t.next=3,I["a"].get("IS_DDE_ENABLED");case 3:e.ddeEnabled=t.sent;case 4:return t.abrupt("return",!0);case 5:case"end":return t.stop()}}),t)})));function n(){return t.apply(this,arguments)}return n}(),dynamicHelpText:function(t){return"true"==e.presets.nationalIDStatus?'Search results for "'.concat(e.presets.given_name," ").concat(e.presets.family_name," | ").concat(e.presets.gender,'"'):'Search results for "'.concat(t.given_name.value," ").concat(t.family_name.value," | ").concat(t.gender.label,'"')},appearInSummary:function(){return!1},condition:function(){return!e.isEditMode()},validation:function(e){return c["a"].required(e)},options:function(){var t=Object(a["a"])(regeneratorRuntime.mark((function t(n){var r,i,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if("true"==e.presets.nationalIDStatus?(e.presets.gender="Male"==e.presets.gender?"M":"F",r={given_name:e.presets.given_name,family_name:e.presets.family_name,gender:e.presets.gender}):r={given_name:n.given_name.value,family_name:n.family_name.value,gender:n.gender.value},!e.ddeEnabled){t.next=6;break}return t.next=4,e.ddeInstance.searchDemographics(r);case 4:return i=t.sent,t.abrupt("return",i.map((function(e){var t=f["a"].getPersonAttributeOptions(e);return t.other.options.push({label:"Patient Type",value:e.patient_type}),t.other.options.push({label:"Doc ID",value:e.doc_id}),t})));case 6:return t.next=8,d["a"].search(r);case 8:return a=t.sent,t.abrupt("return",a.map((function(e){return f["a"].getPersonAttributeOptions(e)})));case 10:case"end":return t.stop()}}),t)})));function n(e){return t.apply(this,arguments)}return n}(),config:{hiddenFooterBtns:["Clear","Next","Back"],footerBtns:[{name:"Edit Search",slot:"end",onClick:function(){e.fieldComponent="given_name"}},{name:"New Patient",slot:"end",onClick:function(){"true"!=e.presets.nationalIDStatus?e.fieldComponent="year_birth_date":e.fieldComponent="home_region"}},{name:"Continue",color:"success",slot:"end",state:{disabled:{default:function(){return!0},onValue:function(e,t){return Object(h["isEmpty"])(t.results)}}},onClick:function(t){return e.$router.push("/patients/confirm?person_id=".concat(t.results.value))}}]}}},possibleDuplicatesField:function(){var e=this,t={},n={};return{id:"possible_duplicates",helpText:"Possible Duplicate(s)",type:o["b"].TT_PERSON_MATCH_VIEW,condition:function(){var r=Object(a["a"])(regeneratorRuntime.mark((function r(i,a){return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:if(!e.ddeEnabled||e.editPerson){r.next=6;break}return t=f["a"].resolvePerson(a),r.next=4,e.ddeInstance.checkPotentialDuplicates(t);case 4:return n=r.sent,r.abrupt("return",n.length>=1);case 6:return r.abrupt("return",!1);case 7:case"end":return r.stop()}}),r)})));function i(e,t){return r.apply(this,arguments)}return i}(),options:function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(){var r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r=function(e){return l["c"].toStandardHisDisplayFormat(e)},e.abrupt("return",n.map((function(e){var n=e.score,i=e.person,a="".concat(i.given_name," ").concat(i.family_name);return{label:a,value:i.patient_id,other:{score:"".concat(100*n,"%"),newPerson:t,foundPerson:i,comparisons:[["Name","".concat(t.given_name," ").concat(t.family_name),"".concat(i.given_name," ").concat(i.family_name)],["Gender",t.gender,i.gender],["Birthdate",r(t.birthdate),r(i.birthdate)],["Home District",t.home_district,i.home_district],["Home TA",t.home_traditional_authority,i.home_traditional_authority]]}}})));case 2:case"end":return e.stop()}}),e)})));function r(){return e.apply(this,arguments)}return r}(),config:{hiddenFooterBtns:["Clear","Next"],footerBtns:[{name:"Not Duplicate",slot:"start",state:{visible:{default:function(){return!1},onValue:function(e,t){return!Object(h["isEmpty"])(t.possible_duplicates)}}},onClick:function(){e.fieldComponent="_NEXT_FIELD_"}},{name:"Confirm",slot:"end",color:"warning",state:{visible:{default:function(){return!1},onValue:function(e,t){return!Object(h["isEmpty"])(t.possible_duplicates)}}},onClick:function(t){e.$router.push("/patients/confirm?person_id=".concat(t.possible_duplicates.value))}}]}}},personIndexField:function(){var e=this;return{id:"edit_user",helpText:"Edit Demographics",type:o["b"].TT_TABLE_VIEWER,init:function(){var t=Object(a["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!e.isEditMode()){t.next=4;break}return t.next=3,I["a"].get("IS_DDE_ENABLED");case 3:e.ddeEnabled=t.sent;case 4:return t.abrupt("return",!0);case 5:case"end":return t.stop()}}),t)})));function n(){return t.apply(this,arguments)}return n}(),condition:function(){return e.isEditMode()},options:function(){var t=Object(a["a"])(regeneratorRuntime.mark((function t(){var n,r,i,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n=function(t){return{name:"Edit",type:"button",action:function(){e.activeField=t,e.fieldComponent=e.activeField}}},r=["Attributes","Values","Edit"],i=[["Given Name",e.editPersonData.given_name,n("given_name")],["Family Name",e.editPersonData.family_name,n("family_name")],["Gender",e.editPersonData.gender,n("gender")],["Birthdate",l["c"].toStandardHisDisplayFormat(e.editPersonData.birthdate),n("year_birth_date")],["Cell Phone Number",e.editPersonData.cell_phone_number,n("cell_phone_number")],["Home District",e.editPersonData.home_district,n("home_region")],["Home TA",e.editPersonData.home_traditional_authority,n("home_region")],["Home Village",e.editPersonData.home_village,n("home_region")],["Current district",e.editPersonData.current_district,n("current_region")],["Current T/A",e.editPersonData.current_traditional_authority,n("current_region")],["Landmark",e.editPersonData.landmark,n("default_landmarks")]],a={indexes:[],class:"his-empty-set-color"},i.forEach((function(e,t){Object(v["d"])(e[1])&&a.indexes.push(t)})),e.hasIncompleteData=a.indexes.length>=1,t.abrupt("return",[{label:"",value:"",other:{rows:i,columns:r,rowColors:[a]}}]);case 7:case"end":return t.stop()}}),t)})));function n(){return t.apply(this,arguments)}return n}(),config:{footerBtns:[{name:"Reassign",slot:"end",color:"success",state:{visible:{default:function(){return!1},onload:function(){return e.ddeEnabled&&e.ddeIsReassign&&!e.hasIncompleteData}}},onClick:function(){var t=Object(a["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.ddeInstance.reassignNpid(e.ddeDocID,e.editPerson);case 3:return t.next=5,e.ddeInstance.printNpid();case 5:e.$router.push("/patients/confirm?person_id=".concat(e.editPerson)),t.next=11;break;case 8:t.prev=8,t.t0=t["catch"](0),Object(y["e"])("".concat(t.t0));case 11:case"end":return t.stop()}}),t,null,[[0,8]])})));function n(){return t.apply(this,arguments)}return n}()},{name:"Confirm",slot:"end",color:"warning",state:{visible:{onload:function(){return!e.ddeIsReassign&&!e.hasIncompleteData}}},onClick:function(){var t=Object(a["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.abrupt("return",e.confirmPatient());case 1:case"end":return t.stop()}}),t)})));function n(){return t.apply(this,arguments)}return n}()}],hiddenFooterBtns:["Clear","Next"]}}},patientRegistrationSummary:function(){var e=this;return{id:"registration_summary",helpText:"Summary",type:o["b"].TT_SUMMARY,condition:function(){return!e.skipSummary},options:function(t,n){return e.buildRegistrationSummary(n)},config:{hiddenFooterBtns:["Clear"]}}},buildRegistrationSummary:function(e){e=Object.keys(e).map((function(t,n){if(null!=e[t])return{label:t.replace(/_/g," ").replace(/(^\w|\s\w)/g,(function(e){return e.toUpperCase()})),value:"birth_date"==t?e[t]["date"]:e[t]["person"]}})),e=e.filter((function(e){return void 0!=e}));var t=[{label:"Given Name",value:this.presets.given_name},{label:"Family Name",value:this.presets.family_name},{label:"Gender",value:this.presets.gender},{label:"Birthdate",value:this.presets.birthdate},{label:"Malawi National ID",value:this.presets.malawiNationalID}];return"true"==this.presets.nationalIDStatus&&(e=t.concat(e)),e}}}),O=n("d959"),T=n.n(O);const A=T()(R,[["render",i]]);t["default"]=A}}]);
//# sourceMappingURL=chunk-20db0db6.1187c4c3.js.map