{"version":3,"sources":["webpack:///./src/apps/ART/views/reports/moh/MohRegimenReport.vue?43f5","webpack:///./src/apps/ART/services/reports/moh_regimen_service.ts","webpack:///./src/apps/ART/views/reports/moh/MohRegimenReport.vue","webpack:///./src/apps/ART/views/reports/moh/MohRegimenReport.vue?510b"],"names":["render","_ctx","_cache","$props","$setup","$data","$options","_component_report_template","_resolveComponent","_component_ion_page","_openBlock","_createBlock","default","_withCtx","_createVNode","reportPrefix","title","period","rows","fields","columns","hasServerSideCaching","headerInfoList","headerList","onReportConfiguration","onPeriod","_","MohRegimenReportService","clients","data","regenerate","this","getReport","buildRequest","res","patientID","orderID","d","push","identifier","drugName","name","gender","dob","birthdate","dispensationDate","packSize","packSizes","length","quantity","parseInt","ArtReportService","defineComponent","mixins","ReportMixin","components","ReportTemplate","IonPage","table","thTxt","created","getDateDurationFields","methods","config","rebuildCache","report","setRegenerate","setStartDate","start_date","setEndDate","end_date","getDateIntervalPeriod","generateReport","setRows","label","value","dateThis","tdDate","td","sortByArvNumber","map","tdARV","__exports__"],"mappings":"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","file":"js/chunk-2d0cb702.a7111a73.js","sourcesContent":["import { resolveComponent as _resolveComponent, createVNode as _createVNode, withCtx as _withCtx, openBlock as _openBlock, createBlock as _createBlock } from \"vue\"\n\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  const _component_report_template = _resolveComponent(\"report-template\")\n  const _component_ion_page = _resolveComponent(\"ion-page\")\n\n  return (_openBlock(), _createBlock(_component_ion_page, null, {\n    default: _withCtx(() => [\n      _createVNode(_component_report_template, {\n        reportPrefix: \"MoH\",\n        title: _ctx.title,\n        period: _ctx.period,\n        rows: _ctx.rows,\n        fields: _ctx.fields,\n        columns: _ctx.columns,\n        hasServerSideCaching: true,\n        headerInfoList: _ctx.headerList,\n        onReportConfiguration: _ctx.onPeriod\n      }, null, 8, [\"title\", \"period\", \"rows\", \"fields\", \"columns\", \"headerInfoList\", \"onReportConfiguration\"])\n    ]),\n    _: 1\n  }))\n}","import { ArtReportService } from \"./art_report_service\";\n\nexport interface ReportData {\n    identifier: string;\n    drugName: string;\n    dob: string;\n    gender: string;\n    dispensationDate: string;\n    packSize: number;\n    packSizes: number;\n    quantity: number;\n}\n\nexport class MohRegimenReportService extends ArtReportService {\n    regenerate: boolean;\n    data: ReportData[];\n    clients: number[];\n    constructor() {\n        super()\n        this.clients = []\n        this.data = []\n        this.regenerate = false\n    }\n\n    setRegenerate(regenerate: boolean) {\n        this.regenerate = regenerate\n    }\n\n    async generateReport() {\n        this.data = []\n        this.clients = []\n        const res = await this.getReport('latest_regimen_dispensed',\n            this.buildRequest({'rebuild_outcome': this.regenerate})\n        )\n        if (!res) return []\n        for (const patientID in res) {\n            for (const orderID in res[patientID]) {\n                const d = res[patientID][orderID]\n                this.data.push({\n                    identifier: d.identifier,\n                    drugName: d.name,\n                    gender: d.gender,\n                    dob: d.birthdate,\n                    dispensationDate: d['dispensation_date'],\n                    packSize: d['pack_sizes'][0],\n                    packSizes: d['pack_sizes'].length,\n                    quantity: d.quantity\n                })\n            }\n            this.clients.push(parseInt(`${patientID}`))\n        }\n        return this.data\n    }\n}\n","\nimport { defineComponent } from 'vue'\nimport ReportMixin from \"@/apps/ART/views/reports/ReportMixin.vue\"\nimport ReportTemplate from \"@/apps/ART/views/reports/TableReportTemplate.vue\"\nimport table from \"@/components/DataViews/tables/ReportDataTable\"\nimport { IonPage } from \"@ionic/vue\"\nimport { Option } from '@/components/Forms/FieldInterface'\nimport { MohRegimenReportService } from \"@/apps/ART/services/reports/moh_regimen_service\"\n\nexport default defineComponent({\n    mixins: [ReportMixin],\n    components: { ReportTemplate, IonPage },\n    data: () => ({\n        title: 'Regimen Report',\n        rows: [] as Array<any>,\n        headerList: [] as Option[],\n        columns:  [\n            [\n                table.thTxt('ARV#'),\n                table.thTxt('Gender'),\n                table.thTxt('DOB'),\n                table.thTxt('Drug Name'),\n                table.thTxt('Date'),\n                table.thTxt('Pack size'),\n                table.thTxt('Total pack'),\n                table.thTxt('Total pills'),\n            ]\n        ]\n    }),\n    created() {\n        this.fields = this.getDateDurationFields()\n    },\n    methods: {\n        async onPeriod(_: any, config: any, rebuildCache=false) {\n            this.rows = []\n            this.report = new MohRegimenReportService()\n            this.report.setRegenerate(rebuildCache)\n            this.report.setStartDate(config.start_date)\n            this.report.setEndDate(config.end_date)\n            this.period = this.report.getDateIntervalPeriod()\n            const data = await this.report.generateReport()\n            this.setRows(data)\n            this.headerList = [\n                { \n                    label: 'Total clients', \n                    value: this.report.clients.length\n                }\n            ]\n        },\n        setRows(data: any) {\n            const dateThis = (d: string) => d ? table.tdDate(d) : table.td('N/A')\n            this.rows = this.sortByArvNumber(data, 'identifier')\n                .map(d => [\n                    this.tdARV(d.identifier),\n                    table.td(d.gender),\n                    dateThis(d.dob),\n                    table.td(d.drugName),\n                    dateThis(d.dispensationDate),\n                    table.td(d.packSize),\n                    table.td(d.packSizes),\n                    table.td(d.quantity) \n                ])\n        }\n    }\n})\n","import { render } from \"./MohRegimenReport.vue?vue&type=template&id=31e86b7d&ts=true\"\nimport script from \"./MohRegimenReport.vue?vue&type=script&lang=ts\"\nexport * from \"./MohRegimenReport.vue?vue&type=script&lang=ts\"\n\nimport exportComponent from \"/home/daniel/local-repos/HIS-Core/node_modules/vue-loader-v16/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__"],"sourceRoot":""}