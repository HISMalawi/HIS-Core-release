{"version":3,"sources":["webpack:///./node_modules/eslint-loader/index.js","webpack:///./node_modules/vue-loader-v16/dist/templateLoader.js","webpack:///./node_modules/cache-loader/dist/cjs.js","webpack:///./src/apps/OPD/views/encounters/HIVStatus.vue"],"names":["DEFAULT_KEYPAD","VITALS_KEYPAD","DRUG_DISPENSER_KEYPAD","CD4_COUNT_PAD_LO","SYMBOLS","NUMBER_PAD_LO","MONTHLY_DAYS_LO","ALPHABETICAL_LO","QWERTY_LO","CHARACTERS_AND_NUMBERS_LO","NOTE_PAD_KEYBOARD","LOGIN_KEYBOARD","SYMBOLS_CONFIG","NUMBERS_ONLY","NUMBERS_WITH_UNKNOWN","NUMBERS_WITH_ESTIMATE","NUMBERS_WITHOUT_NA_UNKNOWN","NUMBERS","MONTHLY_DAYS","A_TO_Z","QWERTY","KEY_BTN_NAV","btn","keyboard","render","_ctx","_cache","$props","$setup","$data","$options","_component_his_standard_form","_resolveComponent","_openBlock","_createBlock","cancelDestinationPath","cancelDestination","fields","onFinishAction","onSubmit","HIVStatusService","AppEncounterService","constructor","patientID","providerID","defineComponent","components","HisStandardForm","mixins","EncounterMixinVue","data","hivService","watch","ready","isReady","this","patient","getID","getFields","immediate","deep","methods","formData","computedData","encounter","createEncounter","toastWarning","resolveObs","obs","saveObservationList","nextTask","buildDateObs","conceptName","date","isEstimate","match","buildValueText","buildValueDateEstimated","buildValueDate","id","helpText","type","FieldType","TT_SELECT","validation","value","Validation","required","computedValue","options","label","generateDateFields","minDate","getBirthdate","maxDate","getSessionDate","condition","hiv_status","summaryLabel","estimation","allowUnknown","estimationFieldType","EstimationFieldType","MONTH_ESTIMATE_FIELD","computeValue","getDate","defaultValue","getLocationName","_","filter","getFacilities","config","showKeyboard","isFilterDataViaApi","__exports__","getYearField","name","showUnknown","primaryFunctions","push","appearInSummary","TT_TEXT","customKeyboard","getMonthField","MonthOptions","getDayField","TT_MONTHLY_DAYS","getMonthDurationEstimateField","getAgeEstimateField","TT_NUMBER","keypad","appendLeadingZero","s","parseInt","getDefaultDate","form","field","datePart","year","month","day","split","d","HisDate","toStandardHisDisplayFormat","validateMinMax","computed","min","Date","max","refDate","fullDate","yearValue","monthValue","dayValue","yearID","monthID","dayID","ageEstimateID","durationEstimateID","ageEstimate","durationEstimate","estimateMonthOrDay","allowUnknownMonthDay","datePartCondition","f","includes","buildHelpTextDate","part","parts","default","reduce","partValues","dpart","wl","undefined","join","init","updateHelpTextOnValue","proxyID","unload","v","toString","c","StandardValidations","isNaN","minYear","getYear","summaryMapValue","ref","val","beforeNext","keyboardActions","valueEstimateCondition","estimateType","conditions","every","Boolean","ageEstimateRegex","AGE_ESTIMATE_FIELD","dayjs","Service","subtract","format","STANDARD_DATE_FORMAT","async","facilities","LocationService","isEmpty","map","facility","location_id","other","getLabFacilities","getLabs","getFacilityWards","wards","tag","ward","getSpecialistClinics","clinics","clinic","getRegions","regions","region","region_id","getDistricts","regionID","districts","district","district_id","getTraditionalAuthorities","districtID","TAs","TA","traditional_authority_id","getVillages","traditionalAuthorityID","villages","village","village_id"],"mappings":"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","file":"js/chunk-12e0836f.e33890fb.js","sourcesContent":["import {LocationService} from \"@/services/location_service\"\nimport { Option } from \"@/components/Forms/FieldInterface\"\nimport { isEmpty } from \"lodash\"\n\nexport async function getFacilities(filter=''): Promise<Option[]> {\n    const facilities = await LocationService.getFacilities({name: filter})\n    return facilities.filter((f: any) => !isEmpty(f))\n        .map((facility: any) => ({\n            label: facility.name,\n            value: facility.location_id,\n            other: facility\n        }))\n}\n\nexport async function getLabFacilities(filter=''): Promise<Option[]> {\n    const facilities = await LocationService.getLabs({'search_name': filter})\n    return facilities.map((facility: any) => ({\n            label: facility,\n            value: facility\n        }))\n}\n\nexport async function getFacilityWards(filter=''): Promise<Option[]> {\n    const wards = await LocationService.getFacilities({\n        name: filter,\n        tag: 'Facility adult sections'\n    })\n\n    return wards.map((ward: any) => ({\n        label: ward.name,\n        value: ward.name,\n        other: ward\n    }))\n}\n\nexport async function getSpecialistClinics(): Promise<Option[]> {\n    const clinics = await LocationService.getSpecialistClinics()\n    return clinics.map((clinic: any) => ({\n        label: clinic.name,\n        value: clinic.name,\n        other: clinic\n    }))\n}\n\nexport async function getRegions(): Promise<Option[]> {\n    const regions = await LocationService.getRegions()\n    return regions.map((region: any) => ({\n        label: region.name,\n        value: region.region_id,\n        other: region\n    }))\n}\n\nexport async function getDistricts(regionID: number): Promise<Option[]> {\n    const districts = await LocationService.getDistricts(regionID)\n    return districts.map((district: any) => ({\n        label: district.name,\n        value: district.district_id,\n        other: district\n    }))\n}\n\nexport async function getTraditionalAuthorities(districtID: number, name=''): Promise<Option[]> {\n    const TAs = await LocationService.getTraditionalAuthorities(districtID, name)\n    return TAs.map((TA: any) => ({\n        label: TA.name,\n        value: TA.traditional_authority_id,\n        other: TA\n    }))\n}\n\nexport async function getVillages(traditionalAuthorityID: number, name=''): Promise<Option[]> {\n    const villages = await LocationService.getVillages(traditionalAuthorityID, name)\n    return villages.map((village: any) => ({\n        label: village.name,\n        value: village.village_id,\n        other: village\n    }))\n}\n","import { resolveComponent as _resolveComponent, createVNode as _createVNode, openBlock as _openBlock, createBlock as _createBlock } from \"vue\"\n\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  const _component_his_standard_form = _resolveComponent(\"his-standard-form\")\n\n  return (_openBlock(), _createBlock(_component_his_standard_form, {\n    cancelDestinationPath: _ctx.cancelDestination,\n    fields: _ctx.fields,\n    onFinishAction: _ctx.onSubmit\n  }, null, 8, [\"cancelDestinationPath\", \"fields\", \"onFinishAction\"]))\n}","\nimport { defineComponent} from 'vue'\nimport HisStandardForm from \"@/components/Forms/TouchScreenForm.vue\";\nimport EncounterMixinVue from '@/views/EncounterMixin.vue';\nimport Validation from '@/components/Forms/validations/StandardValidations';\nimport { Field, Option } from '@/components/Forms/FieldInterface';\nimport { FieldType } from '@/components/Forms/BaseFormElements';\nimport { getFacilities } from '@/utils/HisFormHelpers/LocationFieldOptions';\nimport { EstimationFieldType, generateDateFields } from '@/utils/HisFormHelpers/MultiFieldDateHelper';\nimport { toastWarning } from '@/utils/Alerts';\nimport { HIVStatusService } from '../../services/hiv_status_service';\n\nexport default defineComponent({\n    components: { HisStandardForm },\n    mixins: [EncounterMixinVue],\n    data: () => ({\n        hivService: {} as any\n    }),\n    watch: {\n        ready: {\n            async handler(isReady: boolean) {\n                if(isReady){\n                    this.hivService = new HIVStatusService(this.patient.getID(), this.providerID)\n                    this.fields = this.getFields()\n                }\n            },\n            immediate: true,\n            deep: true\n        }\n    },\n    methods: {\n        async onSubmit(formData: any, computedData: any){\n            const encounter = await this.hivService.createEncounter()\n            if (!encounter) return toastWarning('Unable to create encounter') \n            const data = await this.resolveObs({...computedData})\n            const obs = await this.hivService.saveObservationList(data)\n            if (!obs) return toastWarning('Unable to save observations')\n            this.nextTask()        \n        },\n        buildDateObs(conceptName: string, date: string, isEstimate: boolean) {\n            let obs = {}\n            if (date.match(/unknown/i)) {\n                obs = this.hivService.buildValueText(conceptName, 'Unknown')\n            } else if (isEstimate) {\n                obs = this.hivService.buildValueDateEstimated(conceptName, date)\n            } else {\n                obs = this.hivService.buildValueDate(conceptName, date)\n            }\n            return obs\n        },\n        getFields(): Array<Field>{\n            return [\n                {\n                    id: 'hiv_status',\n                    helpText: 'HIV status',\n                    type: FieldType.TT_SELECT,\n                    validation: (value: any) => Validation.required(value),\n                    computedValue: ({ value }: Option) => ({\n                        obs: this.hivService.buildValueText('HIV status', value)\n                    }),\n                    options: () => ([\n                        { label: 'Positive not ART', value: 'Positive not ART' },\n                        { label: 'Posititve on ART', value: 'Positive on ART' },\n                        { label: 'Previous negative', value: 'Previous negative' },\n                        { label: 'New positive', value: 'New positive' },\n                        { label: 'New negative', value: 'New negative' },\n                        { label: 'Never tested', value: 'Never tested' },\n                    ])\n                },\n                ...generateDateFields({\n                    id: 'hiv_test_date',\n                    helpText: 'HIV Test',\n                    required: true,\n                    minDate: () => this.patient.getBirthdate(),\n                    maxDate: () => HIVStatusService.getSessionDate(),\n                    condition: (fields: any) => fields.hiv_status.value !== 'Never tested',\n                    summaryLabel: 'HIV test date',\n                    estimation: {\n                        allowUnknown: true,\n                        estimationFieldType: EstimationFieldType.MONTH_ESTIMATE_FIELD\n                    },\n                    computeValue: (date: string, isEstimate: boolean) => this.buildDateObs('HIV test date', date, isEstimate)\n                    \n                }, this.hivService.getDate()),\n                {\n                    id: 'test_location',\n                    helpText: 'HIV test location',\n                    type: FieldType.TT_SELECT,\n                    validation: (value: any) => Validation.required(value),\n                    defaultValue: () => HIVStatusService.getLocationName(),\n                    computedValue: ({ label }: Option) => ({obs: this.hivService.buildValueText('HIV test location', label)}),\n                    condition: (fields: any) => fields.hiv_status.value !== 'Never tested',\n                    options: (_: any, filter='') => getFacilities(filter),\n                    config: {\n                        showKeyboard: true,\n                        isFilterDataViaApi: true\n                    }\n                }\n            ]\n        }\n    }\n})\n","import { render } from \"./HIVStatus.vue?vue&type=template&id=27f8e15a&ts=true\"\nimport script from \"./HIVStatus.vue?vue&type=script&lang=ts\"\nexport * from \"./HIVStatus.vue?vue&type=script&lang=ts\"\n\nimport exportComponent from \"/home/andrew-dev/Projects/HIS-Core/node_modules/vue-loader-v16/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__"],"sourceRoot":""}