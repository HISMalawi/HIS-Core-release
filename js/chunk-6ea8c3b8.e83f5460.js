(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-6ea8c3b8"],{"2a09":function(e,t,n){"use strict";n("c37b")},3800:function(e,t,n){"use strict";n.d(t,"d",(function(){return o})),n.d(t,"l",(function(){return r})),n.d(t,"e",(function(){return c})),n.d(t,"b",(function(){return a})),n.d(t,"k",(function(){return i})),n.d(t,"i",(function(){return s})),n.d(t,"g",(function(){return l})),n.d(t,"a",(function(){return u})),n.d(t,"j",(function(){return d})),n.d(t,"c",(function(){return p})),n.d(t,"h",(function(){return b})),n.d(t,"f",(function(){return f}));var o=[["1","2","3"],["4","5","6"],["7","8","9"],[".","0","Del"],["","Done",""]],r=[["1","2","3"],["4","5","6"],["7","8","9"],[".","0","Del"],["Clear","%","/"]],c=[["1","2","3"],["4","5","6"],["7","8","9"],["Del.","0","Clear"]],a=[["1","2","3","<"],["4","5","6",">"],["7","8","9","="],["","0",""]],i=[["1","2","3","+","-","/","*"],["4","5","6","%","=","<",">","Qwerty"],["7","8","9",".",","],["","0",""]],s=[["1","2","3"],["4","5","6"],["7","8","9"],["","0",""]],l=[["1","2","3","4","5","6","7"],["8","9","10","11","12","13","14"],["15","16","17","18","19","20","21"],["22","23","24","25","26","27","28"],["29","30","31"]],u=[["a","b","c","d","e","f","g","h","."],["i","j","k","l","m","n","o","p","q"],["r","s","t","u","v","w","x","y","z"]],d=[["q","w","e","r","t","y","u","i","o","p"],["a","s","d","f","g","h","j","k","l","'"],["z","x","c","v","b","n","m",",",".","A-Z"]],p=[["1","2","3","4","5","6","7","8","9","0"],["a","b","c","d","e","f","g","h","-","."],["i","j","k","l","m","n","o","p","q"],["r","s","t","u","v","w","x","y","z"]],b=[["1","2","3","4","5","6","7","8","9","0","Del"],["q","w","e","r","t","y","u","i","o","p","Clear"],["a","s","d","f","g","h","j","k","l",".","Caps"],["z","x","c","v","b","n","m","<",">","/","Enter"]],f=[["1","2","3","4","5","6","7","8","9","0"],["q","w","e","r","t","y","u","i","o","p"],["a","s","d","f","g","h","j","k","l","Del."],["z","x","c","v","b","n","m","Caps","Login"]]},7101:function(e,t,n){"use strict";n.r(t);var o=n("7a23");function r(e,t,n,r,c,a){var i=Object(o["resolveComponent"])("TSLoginForm"),s=Object(o["resolveComponent"])("DTLoginForm"),l=Object(o["resolveComponent"])("ion-page");return Object(o["openBlock"])(),Object(o["createBlock"])(l,null,{default:Object(o["withCtx"])((function(){return[e.isPocSite?(Object(o["openBlock"])(),Object(o["createBlock"])(i,{key:0,version:e.version,onLogin:e.doLogin},null,8,["version","onLogin"])):(Object(o["openBlock"])(),Object(o["createBlock"])(s,{key:1,onLogin:e.doLogin,version:e.version,showConfigBtn:e.showConfig},null,8,["onLogin","version","showConfigBtn"]))]})),_:1})}var c=n("1da1"),a=(n("99af"),n("96cf"),Object(o["withScopeId"])("data-v-5b0788e3"));Object(o["pushScopeId"])("data-v-5b0788e3");var i=Object(o["createVNode"])("b",{style:{color:"#8b4513"}},"National ",-1),s=Object(o["createVNode"])("b",{style:{color:"#cd853f"}},"EMR",-1),l=Object(o["createTextVNode"])(" Version: "),u={class:"main",ref:"main"},d={class:"rows"},p={class:"cells"},b={class:"rows input-rows"},f={class:"cells"},m={class:"center"},O={class:"rows"};Object(o["popScopeId"])();var j=a((function(e,t,n,r,c,j){var g=Object(o["resolveComponent"])("ion-label"),v=Object(o["resolveComponent"])("ion-title"),h=Object(o["resolveComponent"])("ion-toolbar"),w=Object(o["resolveComponent"])("ion-header"),C=Object(o["resolveComponent"])("ion-content"),I=Object(o["resolveComponent"])("login-footer");return Object(o["openBlock"])(),Object(o["createBlock"])(o["Fragment"],null,[Object(o["createVNode"])(w,null,{default:a((function(){return[Object(o["createVNode"])(h,null,{default:a((function(){return[Object(o["createVNode"])(v,null,{default:a((function(){return[Object(o["createVNode"])(g,{style:{fontWeight:"bolder",fontSize:"1.9em"}},{default:a((function(){return[i,s]})),_:1}),Object(o["createVNode"])(g,{class:"ion-padding ion-float-right"},{default:a((function(){return[l,Object(o["createVNode"])("b",null,Object(o["toDisplayString"])(e.version),1)]})),_:1})]})),_:1})]})),_:1})]})),_:1}),Object(o["createVNode"])(C,{fullscreen:"false"},{default:a((function(){return[Object(o["createVNode"])("div",u,[Object(o["createVNode"])("div",d,[Object(o["createVNode"])("div",p,[Object(o["withDirectives"])(Object(o["createVNode"])("input",{type:"text",name:"usename",autocomplete:"off",placeholder:"Username",id:"username",ref:"username","onUpdate:modelValue":t[1]||(t[1]=function(t){return e.userInput.username=t}),onClick:t[2]||(t[2]=function(t){return e.renderKeyBoard(t)}),class:"input-boxes",readonly:e.useVirtualInput},null,8,["readonly"]),[[o["vModelText"],e.userInput.username]])])]),Object(o["createVNode"])("div",b,[Object(o["createVNode"])("div",f,[Object(o["withDirectives"])(Object(o["createVNode"])("input",{"onUpdate:modelValue":t[3]||(t[3]=function(t){return e.userInput.password=t}),type:"password",name:"password",ref:"password",id:"password",onClick:t[4]||(t[4]=function(t){return e.renderKeyBoard(t)}),class:"input-boxes",placeholder:"Password",readonly:e.useVirtualInput},null,8,["readonly"]),[[o["vModelText"],e.userInput.password]])])])],512),Object(o["createVNode"])("div",m,[Object(o["createVNode"])("div",{id:"keyboard",style:e.btnStyles,class:"keyboard"},[(Object(o["openBlock"])(!0),Object(o["createBlock"])(o["Fragment"],null,Object(o["renderList"])(e.LOGIN_KEYBOARD,(function(n,r){return Object(o["openBlock"])(),Object(o["createBlock"])("span",{key:r},[Object(o["createVNode"])("div",O,[(Object(o["openBlock"])(!0),Object(o["createBlock"])(o["Fragment"],null,Object(o["renderList"])(n,(function(n){return Object(o["openBlock"])(),Object(o["createBlock"])("div",{class:"cells",key:n},["Next"===n||"Login"===n?(Object(o["openBlock"])(),Object(o["createBlock"])("button",{key:0,id:e.btnCaption,class:"keyboard-btn login-btn",onClick:t[5]||(t[5]=function(t){return e.keyPress(t)})},Object(o["toDisplayString"])(e.btnCaption),9,["id"])):Object(o["createCommentVNode"])("",!0),"Login"!=n&&"Next"!=n?(Object(o["openBlock"])(),Object(o["createBlock"])("button",{key:1,id:e.Caps.on?n.toUpperCase():n.toLowerCase(),class:"keyboard-btn",onClick:t[6]||(t[6]=function(t){return e.keyPress(t)})},Object(o["toDisplayString"])("Del."===n||"Caps"===n?n:e.Caps.on?n.toUpperCase():n.toLowerCase()),9,["id"])):Object(o["createCommentVNode"])("",!0)])})),128))])])})),128))],4)])]})),_:1}),Object(o["createVNode"])(I,{showConfigBtn:e.showConfigBtn},null,8,["showConfigBtn"])],64)})),g=(n("ac1f"),n("466d"),n("3800")),v=Object(o["withScopeId"])("data-v-e5266446");Object(o["pushScopeId"])("data-v-e5266446");var h=Object(o["createTextVNode"])("Device Profile"),w=Object(o["createTextVNode"])(" Network ");Object(o["popScopeId"])();var C=v((function(e,t,n,r,c,a){var i=Object(o["resolveComponent"])("ion-label"),s=Object(o["resolveComponent"])("ion-select-option"),l=Object(o["resolveComponent"])("ion-select"),u=Object(o["resolveComponent"])("ion-button"),d=Object(o["resolveComponent"])("ion-item"),p=Object(o["resolveComponent"])("ion-toolbar"),b=Object(o["resolveComponent"])("ion-footer");return Object(o["openBlock"])(),Object(o["createBlock"])(b,{style:{position:"absolute",width:"100%",bottom:"0",left:"0","padding-right":"1rem","padding-left":"1rem"}},{default:v((function(){return[Object(o["createVNode"])(p,null,{default:v((function(){return[Object(o["createVNode"])("span",null,[Object(o["createVNode"])("img",{id:"coat",src:e.img("login-logos/Malawi-Coat_of_arms_of_arms.png"),alt:"Malawi Coat of Arms logo"},null,8,["src"]),Object(o["createVNode"])("img",{id:"pepfar",src:e.img("login-logos/PEPFAR.png"),alt:"PEPFAR logo"},null,8,["src"])]),Object(o["createVNode"])(d,{class:"his-sm-text",style:{width:"45%"},slot:"end",lines:"none"},{default:v((function(){return[e.isPocSite?(Object(o["openBlock"])(),Object(o["createBlock"])(o["Fragment"],{key:0},[Object(o["createVNode"])(i,null,{default:v((function(){return[h]})),_:1}),Object(o["createVNode"])(l,{modelValue:e.profile,"onUpdate:modelValue":t[1]||(t[1]=function(t){return e.profile=t}),value:e.profile},{default:v((function(){return[(Object(o["openBlock"])(!0),Object(o["createBlock"])(o["Fragment"],null,Object(o["renderList"])(e.deviceProfiles,(function(e,t){return Object(o["openBlock"])(),Object(o["createBlock"])(s,{key:t,value:e.label},{default:v((function(){return[Object(o["createTextVNode"])(Object(o["toDisplayString"])(e.label),1)]})),_:2},1032,["value"])})),128))]})),_:1},8,["modelValue","value"])],64)):Object(o["createCommentVNode"])("",!0),Object(o["createVNode"])(u,{color:"dark",fill:"outline",size:"large",slot:"end","router-link":e.settingsUrl},{default:v((function(){return[w]})),_:1},8,["router-link"])]})),_:1})]})),_:1})]})),_:1})})),I=n("5530"),y=(n("d81d"),n("b64b"),n("2ed9")),k=n("1718"),V=n("8a30"),N=n("2ef0"),x=Object(o["defineComponent"])({name:"LoginFooter",components:{IonFooter:V["IonFooter"],IonToolbar:V["IonToolbar"],IonButton:V["IonButton"],IonSelect:V["IonSelect"],IonSelectOption:V["IonSelectOption"],IonItem:V["IonItem"],IonLabel:V["IonLabel"]},props:{showConfigBtn:{type:Boolean,default:!1},isPocSite:{type:Boolean,default:!0}},setup:function(e){var t=Object(o["computed"])((function(){return e.isPocSite?"/settings/host":"/settings/network_settings"})),n=Object(y["e"])(),r=n.activePlatformProfile,c=n.platformProfiles,a=Object(o["ref"])(r.value.profileName||""),i=Object.keys(c.value).map((function(e){return{label:e,value:Object(I["a"])({profileName:e},c.value[e])}}));return Object(o["watch"])(a,(function(e){r.value=(Object(N["find"])(i,{label:e})||{}).value})),{deviceProfiles:i,profile:a,settingsUrl:t,img:k["a"]}}}),B=(n("9e39"),n("d959")),S=n.n(B);const L=S()(x,[["render",C],["__scopeId","data-v-e5266446"]]);var _=L,P=Object(o["defineComponent"])({name:"TSLoginForm",props:{showConfigBtn:{type:Boolean,default:!1},version:{type:String,required:!0}},components:{LoginFooter:_,IonContent:V["IonContent"],IonHeader:V["IonHeader"],IonToolbar:V["IonToolbar"],IonTitle:V["IonTitle"],IonLabel:V["IonLabel"]},data:function(){return{LOGIN_KEYBOARD:g["f"],userInput:{type:String,username:"",password:""},focusInput:{type:Object,value:"",id:""},display:"none",keyboardTop:"",btnCaption:"",Caps:{type:Boolean,on:!1}}},setup:function(){return{useVirtualInput:Object(o["computed"])((function(){return Object(y["e"])().activePlatformProfile.value.keyboard===y["b"].HIS_KEYBOARD_ONLY}))}},emits:["login"],methods:{renderKeyBoard:function(e){this.focusInput=e.currentTarget,"password"==this.focusInput.id?this.btnCaption="Login":this.btnCaption="Next";var t=e.currentTarget.getBoundingClientRect().top;t=parseInt(t),this.keyboardTop=t+20+"px;",this.display="table",window.scrollTo(0,9999)},keyPress:function(e){var t,n=e.currentTarget.id;try{n.match(/Del./i)?this.focusInput.value=this.focusInput.value.substring(0,this.focusInput.value.length-1):n.match(/Next/i)?(this.display="none",t=this.$refs.password,t.click()):n.match(/Login/i)?(this.display="none",this.$emit("login",{username:this.userInput.username,password:this.userInput.password})):n.match(/Caps/i)?(this.Caps.on=!this.Caps.on,this.display="none",t="username"===this.focusInput.id?this.$refs.username:this.$refs.password,t.click()):n.match(/Hide/i)?this.display="none":this.focusInput.value+=n,"username"==this.focusInput.id?this.userInput.username=this.focusInput.value:this.userInput.password=this.focusInput.value}catch(o){console.warn("input error")}},doLogin:function(){var e=Object(c["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:this.$emit("login",{username:this.userInput.username,password:this.userInput.password});case 1:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},computed:{btnStyles:function(){return"display: ".concat(this.display,"; top: ").concat(this.keyboardTop,";")}}});n("2a09");const T=S()(P,[["render",j],["__scopeId","data-v-5b0788e3"]]);var D=T,F=n("a1e9"),A=n("5c40"),R=n("89b4"),U=Object(o["createTextVNode"])(" HIS APPS "),z=Object(o["createVNode"])("img",{src:"/assets/images/report.png",style:{display:"block",width:"55%",margin:"5px auto"}},null,-1),q=Object(o["createVNode"])("h2",null,"Welcome",-1),K=Object(o["createVNode"])("h4",null,"Please, log in to your account",-1),E=Object(o["createTextVNode"])(" Login ");function H(e,t,n,r,c,a){var i=Object(o["resolveComponent"])("ion-card-title"),s=Object(o["resolveComponent"])("ion-card-subtitle"),l=Object(o["resolveComponent"])("login-footer"),u=Object(o["resolveComponent"])("ion-col"),d=Object(o["resolveComponent"])("ion-icon"),p=Object(o["resolveComponent"])("ion-input"),b=Object(o["resolveComponent"])("ion-item"),f=Object(o["resolveComponent"])("ion-button"),m=Object(o["resolveComponent"])("ion-row"),O=Object(o["resolveComponent"])("ion-grid"),j=Object(o["resolveComponent"])("ion-content");return Object(o["openBlock"])(),Object(o["createBlock"])(j,{fullscreen:"false"},{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(O,{style:{margin:"0",padding:"0"}},{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(m,null,{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(u,{size:"8"},{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(i,{style:{"text-align":"center","font-size":"78px","font-weight":"bold",margin:"8vh 1px 0"}},{default:Object(o["withCtx"])((function(){return[U]})),_:1}),Object(o["createVNode"])(s,{style:{"text-align":"center","font-size":"24px","margin-bottom":"20px"}},{default:Object(o["withCtx"])((function(){return[Object(o["createTextVNode"])(Object(o["toDisplayString"])(e.version),1)]})),_:1}),z,Object(o["createVNode"])(l,{showConfigBtn:e.showConfigBtn,isPocSite:!1},null,8,["showConfigBtn"])]})),_:1}),Object(o["createVNode"])(u,{size:"4",style:{background:"#2839ad",color:"#ffff","text-align":"center",height:"100vh",padding:"38px 18px"}},{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(d,{icon:e.avatar,style:{"font-size":"8vw",margin:"10vh 1px 0"}},null,8,["icon"]),q,K,Object(o["createVNode"])(b,{style:{margin:"2rem 3.5rem"}},{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(p,{type:"text",placeholder:"Username",modelValue:e.username,"onUpdate:modelValue":t[1]||(t[1]=function(t){return e.username=t}),min:5,required:""},null,8,["modelValue"])]})),_:1}),Object(o["createVNode"])(b,{style:{margin:"2rem 3.5rem"}},{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(p,{type:"password",modelValue:e.password,"onUpdate:modelValue":t[2]||(t[2]=function(t){return e.password=t}),placeholder:"Password",onKeyup:Object(o["withKeys"])(e.login,["enter"]),max:100,min:5,required:""},null,8,["modelValue","onKeyup"])]})),_:1}),Object(o["createVNode"])(f,{expand:"full",size:"large",style:{margin:"2rem 3.5rem","text-transform":"none"},onClick:Object(o["withModifiers"])(e.login,["prevent"])},{default:Object(o["withCtx"])((function(){return[E]})),_:1},8,["onClick"])]})),_:1})]})),_:1})]})),_:1})]})),_:1})}var M=n("ff79"),$=Object(o["defineComponent"])({name:"DTLoginForm",components:{IonGrid:V["IonGrid"],IonRow:V["IonRow"],IonCol:V["IonCol"],IonButton:V["IonButton"],IonInput:V["IonInput"],IonItem:V["IonItem"],IonCardTitle:V["IonCardTitle"],IonCardSubtitle:V["IonCardSubtitle"],LoginFooter:_,IonContent:V["IonContent"],IonIcon:V["IonIcon"]},props:{showConfigBtn:{type:Boolean,default:!1},version:{type:String,required:!0}},emits:["login"],setup:function(e,t){var n=t.emit,r=Object(o["ref"])(""),c=Object(o["ref"])(""),a=function(){return n("login",{username:r.value,password:c.value})};return{avatar:M["person"],username:r,password:c,login:a}}});const G=S()($,[["render",H]]);var Y=G,J=n("6c02"),W=n("b5e4"),Q=n("1c74"),Z=n("3e53"),X=Object(o["defineComponent"])({name:"login",components:{TSLoginForm:D,IonPage:V["IonPage"],DTLoginForm:Y},setup:function(){var e=Object(J["f"])(),t=Object(F["m"])(!0),n=new R["a"],o=Object(F["m"])(""),r=function(){var t=Object(c["a"])(regeneratorRuntime.mark((function t(o){var r,c;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!o.username||!o.password){t.next=27;break}if(n.setUsername(o.username),t.prev=2,!n.versionLockingIsEnabled()){t.next=6;break}return t.next=6,n.validateIfCorrectAPIVersion();case 6:return t.next=8,n.checkTimeIntegrity();case 8:if(t.sent){t.next=10;break}throw"Local date does not match API date. Please Update your device's date";case 10:return t.next=12,n.login(o.password);case 12:if(n.startSession(),r=Q["e"].getDefaultApp(),!(r&&!1!==r.isPocApp||Q["e"].isPocSite())){t.next=16;break}return t.abrupt("return",e.push("/select_hc_location"));case 16:return t.next=18,Z["a"].selectApplication();case 18:return c=t.sent,t.abrupt("return",e.push((null===c||void 0===c?void 0:c.appLandingPage)||"/emc/home"));case 22:t.prev=22,t.t0=t["catch"](2),t.t0 instanceof R["c"]?Object(W["e"])("Invalid username or password"):Object(W["c"])("".concat(t.t0));case 25:t.next=28;break;case 27:Object(W["e"])("Complete form to log in");case 28:case"end":return t.stop()}}),t,null,[[2,22]])})));return function(e){return t.apply(this,arguments)}}();return Object(A["U"])(Object(c["a"])(regeneratorRuntime.mark((function e(){var n,r,c;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=new R["a"],e.next=3,n.loadConfig();case 3:return t.value=Q["e"].isPocSite(),e.next=6,n.getHeadVersion();case 6:return r=e.sent,n.setActiveVersion(r),e.next=10,n.getApiVersion();case 10:c=e.sent,o.value="".concat(r," / ").concat(c);case 12:case"end":return e.stop()}}),e)})))),{isPocSite:t,version:o,showConfig:"true"===localStorage.getItem("useLocalStorage"),doLogin:r}}});const ee=S()(X,[["render",r]]);t["default"]=ee},"9e39":function(e,t,n){"use strict";n("f095")},c37b:function(e,t,n){},f095:function(e,t,n){}}]);
//# sourceMappingURL=chunk-6ea8c3b8.e83f5460.js.map