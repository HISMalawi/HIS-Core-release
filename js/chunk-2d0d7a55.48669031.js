(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d0d7a55"],{7864:function(e,a,t){"use strict";t.r(a);var l=t("7a23");function r(e,a,t,r,o,n){const s=Object(l["resolveComponent"])("ion-loading"),c=Object(l["resolveComponent"])("v2Datatable"),d=Object(l["resolveComponent"])("ion-page");return Object(l["openBlock"])(),Object(l["createBlock"])(d,null,{default:Object(l["withCtx"])(()=>[Object(l["createVNode"])(s,{"is-open":e.isLoading,message:"Please wait..."},null,8,["is-open"]),Object(l["createVNode"])(c,{title:"Monthly Screen Report",subtitle:e.period,columns:e.columns,columnData:e.reportData,rowsPerPage:25,onConfigure:e.configure,csvQuarter:e.csvQuarter,onRefresh:()=>e.generate(),order:e.order,headers:e.csvheaders,"csv-spacing":e.spacing,"csv-sub-header":e.subHeaders},null,8,["subtitle","columns","columnData","onConfigure","csvQuarter","onRefresh","order","headers","csv-spacing","csv-sub-header"])]),_:1})}t("14d9");var o=t("d867"),n=t("349c"),s=t("ad9e"),c=t("b5e4"),d=t("2048"),u=t("0011"),i=t("c731"),g=t("d95e"),p=t("2ef0"),b=t("2706"),v=t("1c74"),f=t("9283"),_=t("5a0c"),m=t.n(_);const y=Object(l["ref"])([]),h=Object(l["ref"])(""),C=Object(l["ref"])(""),L=Object(l["ref"])(""),T=Object(l["ref"])(!1),O=Object(l["ref"])("");var $=Object(l["defineComponent"])({components:{IonPage:o["D"],IonLoading:o["z"],v2Datatable:n["a"]},setup(){Object(l["ref"])([]);const e=(e,l)=>{const r=[a(e.first_time_screened),a(e.rescreened_after_prev_visit),a(e.post_treatment_followup)];return r.push(t(l)),r},a=e=>e.map(e=>{const{age_group:a,...t}=e;return{...t,age_group:a}}),t=e=>{const a=[];for(const t in e){const l={};l[t]=e[t],a.push(l)}return a},r=async(e,a)=>{(await o["ab"].create({component:d["a"],backdropDismiss:!1,cssClass:"large-modal",componentProps:{title:e,subtitle:L,patientIdentifiers:a,onFinish:()=>o["ab"].getTop().then(e=>e&&o["ab"].dismiss())}})).present()},n=["age_group","negative","positive","for_same_day_tx","suspected"],_=["Age Group","Negative","Positive","For same day Tx","Suspected Cancer"],$=[["","","1st time screened","",""],["","","Rescreened after previous negative","",""],["","","Post-treatment follow-up","",""],["","","Month Summary","",""]],x=3,S=[[{label:"Facility:",ref:""},{label:"Month/Year:",ref:"",span:{thColspan:1}},{label:"Report Officer:",ref:"",span:{thColspan:3}}],[{label:"Age Disaggregate:",ref:"data.age_group",value:e=>e.age_group},{label:"Negative",ref:"data.cryotherapy.length",secondaryLabel:"1st screened (negative)",value:e=>e.negative.length,tdClick:({column:e,data:a})=>r(`${a.age_group} ${e.secondaryLabel}`,a.negative)},{label:"Positive",ref:"data.positive.length",secondaryLabel:"1st screened (positive)",value:e=>e.positive.length,tdClick:({column:e,data:a})=>r(`${a.age_group} ${e.secondaryLabel}`,a.positive)},{label:"For same day Tx",ref:"data.for_same_day_tx.length",secondaryLabel:"1st screened (For same day Tx)",value:e=>e.for_same_day_tx.length,tdClick:({column:e,data:a})=>r(`${a.age_group} ${e.secondaryLabel}`,a.for_same_day_tx)},{label:"Suspected Cancer",ref:"data.suspected.length",secondaryLabel:"1st screened (Suspected Cancer)",value:e=>e.suspected.length,tdClick:({column:e,data:a})=>r(`${a.age_group} ${e.secondaryLabel}`,a.suspected)}],[{label:"Age Disaggregate:",ref:"data.age_group",value:e=>e.age_group},{label:"Negative",ref:"data.cryotherapy.length",secondaryLabel:"Rescreened after previous negative (negative)",value:e=>e.negative.length,tdClick:({column:e,data:a})=>r(`${a.age_group} ${e.secondaryLabel}`,a.negative)},{label:"Positive",ref:"data.positive.length",secondaryLabel:"Rescreened after previous negative (positive)",value:e=>e.positive.length,tdClick:({column:e,data:a})=>r(`${a.age_group} ${e.secondaryLabel}`,a.positive)},{label:"For same day Tx",ref:"data.for_same_day_tx.length",secondaryLabel:"Rescreened after previous negative (For same day Tx)",value:e=>e.for_same_day_tx.length,tdClick:({column:e,data:a})=>r(`${a.age_group} ${e.secondaryLabel}`,a.for_same_day_tx)},{label:"Suspected Cancer",ref:"data.suspected.length",secondaryLabel:"Rescreened after previous negative (Suspected Cancer)",value:e=>e.suspected.length,tdClick:({column:e,data:a})=>r(`${a.age_group} ${e.secondaryLabel}`,a.suspected)}],[{label:"Age Disaggregate:",ref:"data.age_group",value:e=>e.age_group},{label:"Negative",ref:"data.cryotherapy.length",secondaryLabel:"Post-treatment follow-up (negative)",value:e=>e.negative.length,tdClick:({column:e,data:a})=>r(`${a.age_group} ${e.secondaryLabel}`,a.negative)},{label:"Positive",ref:"data.positive.length",secondaryLabel:"Post-treatment follow-up positive)",value:e=>e.positive.length,tdClick:({column:e,data:a})=>r(`${a.age_group} ${e.secondaryLabel}`,a.positive)},{label:"For same day Tx",ref:"data.for_same_day_tx.length",secondaryLabel:"Post-treatment follow-up (For same day Tx)",value:e=>e.for_same_day_tx.length,tdClick:({column:e,data:a})=>r(`${a.age_group} ${e.secondaryLabel}`,a.for_same_day_tx)},{label:"Suspected Cancer",ref:"data.suspected.length",secondaryLabel:"Post-treatment follow-up (Suspected Cancer)",value:e=>e.suspected.length,tdClick:({column:e,data:a})=>r(`${a.age_group} ${e.secondaryLabel}`,a.suspected)}],[{label:"1st time Screened",ref:"",exportable:!1,span:{thColspan:7}}],[{label:"Rescreened after previous negative",ref:"",exportable:!1,span:{thColspan:7}}],[{label:"Post-treatment follow-up",ref:"",span:{thColspan:7}}],[{label:"Month Summary",ref:"",span:{thColspan:7}}],[{label:"Total Screened",ref:"data.total_screened.length",secondaryLabel:"Total Screened",value:e=>e.total_screened.length,tdClick:({column:e,data:a})=>r(""+e.secondaryLabel,a.total_screened)}],[{label:"Total Negative",ref:"data.total_negative.length",secondaryLabel:"Total Negative",value:e=>e.total_negative.length,tdClick:({column:e,data:a})=>r(""+e.secondaryLabel,a.total_negative)}],[{label:"Total Via + eligible for same day Tx",ref:"data.total_via_plus_eligible_for_same_day_tx.length",secondaryLabel:"Total Via + eligible for same day Tx",value:e=>e.total_via_plus_eligible_for_same_day_tx.length,tdClick:({column:e,data:a})=>r(""+e.secondaryLabel,a.total_via_plus_eligible_for_same_day_tx)}],[{label:"Total Positive",ref:"data.total_positive.length",secondaryLabel:"Total Positive",value:e=>e.total_positive.length,tdClick:({column:e,data:a})=>r(""+e.secondaryLabel,a.total_positive)}],[{label:"Total Suspected Cancer",ref:"data.total_suspect_cancer.length",secondaryLabel:"Total Suspected Cancer",value:e=>e.total_suspect_cancer.length,tdClick:({column:e,data:a})=>r(""+e.secondaryLabel,a.total_suspect_cancer)}],[{label:"Total VIA+ Referred",ref:"data.total_via_reffered.length",secondaryLabel:"Total VIA+ Referred",value:e=>e.total_via_reffered.length,tdClick:({column:e,data:a})=>r(""+e.secondaryLabel,a.total_via_reffered)}],[{label:"Total CXCA Suspect Referred",ref:"data.suspects_reffered.length",secondaryLabel:"Total CXCA Suspect Referred",value:e=>e.suspects_reffered.length,tdClick:({column:e,data:a})=>r(""+e.secondaryLabel,a.suspects_reffered)}],[{label:"Total Referred",ref:"data.total_reffered.length",secondaryLabel:"Total Referred",value:e=>e.total_reffered.length,tdClick:({column:e,data:a})=>r(""+e.secondaryLabel,a.total_reffered)}]],j=async()=>{if(!h.value||!C.value)return Object(c["e"])("Start date and end date required!");T.value=!0,y.value=[];const a=new s["a"];a.startDate=h.value,a.endDate=C.value;try{const t=await a.getClinicReport("MONTHLY SCREEN");y.value=e(t.data,t.totals)}catch(t){Object(c["c"])("Unable to generate report!"),console.error(t)}T.value=!1},k=()=>Object(i["a"])([{id:"year",helpText:"Select Year",type:g["b"].TT_NUMBER,computedValue:e=>e.value,validation:e=>{const a=Object(p["isPlainObject"])(e)?e.value:-1;return b["a"].validateSeries([()=>b["a"].required(e),()=>isNaN(parseInt(""+a))?["Invalid year"]:null,()=>b["a"].rangeOf(e,2e3,f["b"].getYear(v["e"].getSessionDate()))])}},{id:"month",helpText:"Select Month",type:g["b"].TT_SELECT,validation:e=>b["a"].required(e),computedValue:e=>e.value,options:()=>[{label:"January",value:"01"},{label:"February",value:"02"},{label:"March",value:"03"},{label:"April",value:"04"},{label:"May",value:"05"},{label:"June",value:"06"},{label:"July",value:"07"},{label:"August",value:"08"},{label:"September",value:"09"},{label:"October",value:"10"},{label:"November",value:"11"},{label:"December",value:"12"}]}],{onFinish:e=>{h.value=`${e.year.value}-${e.month.value}-01`,C.value=m()(new Date(h.value).toISOString()).endOf("month").format("YYYY-MM-DD"),L.value=`Period (${Object(u["g"])(h.value)} to ${Object(u["g"])(C.value)})`,o["ab"].dismiss(),O.value=`${Object(u["g"])(h.value)} to ${Object(u["g"])(C.value)}`,j()}});return Object(l["onMounted"])(()=>!y.value.length&&k()),{columns:S,isLoading:T,reportData:y,period:L,csvQuarter:O,generate:j,configure:k,order:n,csvheaders:_,spacing:x,subHeaders:$}}}),x=t("6b0d"),S=t.n(x);const j=S()($,[["render",r]]);a["default"]=j}}]);
//# sourceMappingURL=chunk-2d0d7a55.48669031.js.map