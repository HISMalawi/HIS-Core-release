(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d21e7b5"],{d66c:function(e,n,t){"use strict";t.r(n);var r=t("7a23");function i(e,n,t,i,o,a){var u=Object(r["resolveComponent"])("his-standard-form");return Object(r["openBlock"])(),Object(r["createBlock"])(u,{fields:e.fields,onFinishAction:e.onFinish,skipSummary:!1,cancelDestinationPath:e.cancelDestination},null,8,["fields","onFinishAction","cancelDestinationPath"])}var o=t("2909"),a=t("1da1"),u=(t("d3b7"),t("159b"),t("b64b"),t("3ca3"),t("ddb0"),t("99af"),t("ac1f"),t("466d"),t("caad"),t("96cf"),t("d95e")),s=t("7920"),c=t("2706"),l=t("7365"),d=t("bee2"),p=t("d4ec"),f=t("262e"),b=t("2caf"),v=t("cc6f"),m=function(e){Object(f["a"])(t,e);var n=Object(b["a"])(t);function t(e,r){return Object(p["a"])(this,t),n.call(this,e,186,r)}return Object(d["a"])(t)}(v["a"]),g=t("b5e4"),h=t("e86e"),T=Object(r["defineComponent"])({mixins:[l["a"]],components:{HisStandardForm:s["a"]},data:function(){return{screeningResult:{},obs:[],currentMethod:""}},watch:{patient:{handler:function(){var e=this;return Object(a["a"])(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return e.screeningResult=new m(e.patientID,e.providerID),n.next=3,e.getTreatmentOptions();case 3:e.currentMethod=n.sent,e.fields=e.getFields();case 5:case"end":return n.stop()}}),n)})))()},deep:!0}},methods:{onFinish:function(e,n){var t=this;return Object(a["a"])(regeneratorRuntime.mark((function r(){var i,a,u;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.next=2,t.screeningResult.createEncounter();case 2:if(i=r.sent,i){r.next=5;break}return r.abrupt("return",Object(g["e"])("Unable to create encounter"));case 5:return e.treatment_option&&"Referral"===e.treatment_option.value&&t.obs.push(t.screeningResult.buildValueText("Referral location",e["location"].label)),a=[],Object.keys(n).forEach((function(e){a.push(n[e].obs)})),r.next=10,Promise.all([].concat(Object(o["a"])(t.obs),a));case 10:return u=r.sent,r.next=13,t.screeningResult.saveObservationList(u);case 13:Object(g["d"])("Observations and encounter created!"),t.nextTask();case 15:case"end":return r.stop()}}),r)})))()},getFacilities:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return Object(h["b"])(e)},getTreatmentOptions:function(){var e=this;return Object(a["a"])(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.next=2,e.screeningResult.getFirstValueCoded("CxCa screening method");case 2:return n.abrupt("return",n.sent);case 3:case"end":return n.stop()}}),n)})))()},getOptions:function(e){return e||(Object(g["e"])("No screening methods have been selected"),this.gotoPatientDashboard()),e.match(/via/i)?["VIA Negative","VIA Positive","Suspect Cancer"]:e.match(/smear/i)?["PAP Smear Normal","PAP Smear Abnormal"]:e.match(/HPV DNA/i)?["HPV positive","HPV negative"]:e.match(/Speculum/i)?["Visible Lesion","No visible Lesion","Suspect Cancer","Other Gynae"]:[]},getFields:function(){var e=this;return[{id:"results_available",helpText:"Screening result available",type:u["b"].TT_SELECT,validation:function(e){return c["a"].required(e)},options:function(){return e.yesNoOptions()},computedValue:function(n){return{obs:e.screeningResult.buildValueCoded("Screening results available",n.value)}}},{id:"screening_result",helpText:"Screening Result",type:u["b"].TT_SELECT,validation:function(e){return c["a"].required(e)},options:function(){return e.mapOptions(Object(o["a"])(e.getOptions(e.currentMethod)))},condition:function(e){return"Yes"===e.results_available.value},computedValue:function(n){return{obs:e.screeningResult.buildValueCoded("Screening results",n.value)}}},{id:"gynae_options",helpText:"Other Gynae treatment",type:u["b"].TT_SELECT,validation:function(e){return c["a"].required(e)},options:function(){return e.mapOptions(["STI","Cervicitis"])},condition:function(e){return"Other Gynae"===e.screening_result.value},computedValue:function(n){return{obs:e.screeningResult.buildValueCoded("Screening results",n.value)}}},{id:"offer_via",helpText:"Offer VIA",type:u["b"].TT_SELECT,validation:function(e){return c["a"].required(e)},options:function(){return e.yesNoOptions()},condition:function(e){return"HPV positive"===e.screening_result.value},computedValue:function(n){return{obs:e.screeningResult.buildValueCoded("Patient went for VIA?",n.value)}}},{id:"via_screening_results",helpText:"VIA screening results",type:u["b"].TT_SELECT,validation:function(e){return c["a"].required(e)},options:function(){return e.mapOptions(["VIA negative","VIA positive","Suspect cancer"])},condition:function(e){return"Yes"===e.offer_via.value},computedValue:function(n){return{obs:e.screeningResult.buildValueCoded("VIA Results",n.value)}}},{id:"reason_for_not_offering_via",helpText:"Reason for NOT offering VIA",type:u["b"].TT_SELECT,validation:function(e){return c["a"].required(e)},options:function(){return e.mapOptions(["Client NOT ready","Treatment not available","Other conditions"])},condition:function(e){return"No"===e.offer_via.value},computedValue:function(n){return{obs:e.screeningResult.buildValueCoded("Other reason for not seeking services",n.value)}}},{id:"treatment_option",helpText:"Enter treatment option",type:u["b"].TT_SELECT,validation:function(e){return c["a"].required(e)},options:function(){return e.mapOptions(["Same day treatment","Postponed treatment","Referral"])},condition:function(e){return!["VIA Negative","No visible Lesion","PAP Smear Abnormal","HPV negative"].includes(e.screening_result.value)},computedValue:function(n){return{obs:e.screeningResult.buildValueCoded("Directly observed treatment option",n.value)}}},{id:"postponed_reason",helpText:"Select reason for postponing treatment",type:u["b"].TT_SELECT,validation:function(e){return c["a"].required(e)},options:function(){return e.mapOptions(["Client not ready","Treatment not available","Other conditions"])},condition:function(e){return"Postponed treatment"===e.treatment_option.value},computedValue:function(n){return{obs:e.screeningResult.buildValueCoded("Postponed reason",n.value)}}},{id:"referral_rreason",helpText:"Referral reason",type:u["b"].TT_SELECT,validation:function(e){return c["a"].required(e)},options:function(){return e.mapOptions(["Further Investigation and Management","Large Lesion (Greater than 75 percent)","Unable to treat client","Suspect Cancer","Treatment not available","Other conditions"])},condition:function(e){return"Referral"===e.treatment_option.value},computedValue:function(n){return{obs:e.screeningResult.buildValueCoded("Referral reason",n.value)}}},{id:"location",helpText:"Location reffered from",type:u["b"].TT_SELECT,validation:function(e){return c["a"].required(e)},options:function(n){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return e.getFacilities(t)},config:{showKeyboard:!0,isFilterDataViaApi:!0},condition:function(e){return"Referral"===e.treatment_option.value},computedValue:function(n){return{obs:e.screeningResult.buildValueText("Referral location",n.label)}}}]}}}),O=t("6b0d"),V=t.n(O);const _=V()(T,[["render",i]]);n["default"]=_}}]);
//# sourceMappingURL=chunk-2d21e7b5.4882da5f.js.map