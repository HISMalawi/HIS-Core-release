{"version":3,"sources":["webpack:///./src/components/DrillPatientIds.vue?e0fe","webpack:///./src/components/DrillPatientIds.vue","webpack:///./src/components/DrillPatientIds.vue?c677","webpack:///./src/apps/HTS/views/reports/templates/moh/template.vue?b05f","webpack:///./src/apps/HTS/views/reports/templates/moh/controller.ts","webpack:///./src/apps/HTS/views/reports/templates/moh/template.vue","webpack:///./src/apps/HTS/views/reports/templates/moh/template.vue?0abb","webpack:///./src/utils/PatientDrilldown.ts","webpack:///./src/apps/HTS/views/reports/templates/moh/template.vue?5b2f","webpack:///./src/apps/HTS/views/reports/templates/Layout.vue?722d","webpack:///./src/apps/HTS/views/reports/templates/Layout.vue","webpack:///./src/apps/HTS/views/reports/templates/Layout.vue?a7c5","webpack:///./src/components/DataViews/tables/v2PocDatatable/TableView.vue?8ed0","webpack:///./src/components/DataViews/tables/v2PocDatatable/TableView.vue","webpack:///./src/components/DataViews/tables/v2PocDatatable/TableView.vue?c2a8","webpack:///./src/components/DataViews/tables/v2PocDatatable/TableView.vue?48e8","webpack:///./src/apps/HTS/views/reports/templates/Layout.vue?c841"],"names":["render","_ctx","_cache","$props","$setup","$data","$options","_component_v2Datatable","_resolveComponent","_component_ion_page","_openBlock","_createBlock","default","_withCtx","_createVNode","title","subtitle","columnData","reportData","columns","onFinish","rowsPerPage","ITEMS_PER_PAGE","_","cachedPatientIDs","defineComponent","props","type","String","patientIdentifiers","Object","Function","components","IonPage","v2Datatable","setup","ref","router","useRouter","label","exportable","tdClick","data","push","path","patient_id","value","watch","async","length","backlog","chunk","log","id","patient","Patientservice","findByID","getID","getNationalID","getGivenName","getFamilyName","toDate","getBirthdate","e","console","error","delayPromise","immediate","__exports__","_hoisted_1","_hoisted_2","_hoisted_3","key","class","_hoisted_4","_hoisted_5","_hoisted_6","_hoisted_7","colspan","_hoisted_8","_hoisted_9","_component_layout","logo","toCSV","exportCsv","toPDF","exportPdf","period","dateGenerated","refreshReport","generate","configure","_createElementVNode","_createElementBlock","_Fragment","_renderList","indicators","indicator","index","isMainTitle","_createCommentVNode","_toDisplayString","isSectionTitle","style","_normalizeStyle","onClick","$event","drill","_value","reactive","model","startDate","endDate","computed","map","Array","isArray","_drill","rows","MohController","params","loadingController","create","message","present","report","HtsReportService","name","requestReport","dayjs","Service","getSessionDate","format","toastWarning","dismiss","DateSelection","DrillPatients","content","document","getElementById","toPDFfromHTML","innerHTML","toCsv","appendCsvSignature","getLocationName","onMounted","isEmpty","Layout","required","modalController","component","Drilldown","cssClass","componentProps","_component_ion_img","_component_ion_thumbnail","_component_ion_label","_component_ion_item","_component_ion_toolbar","_component_ion_header","_component_ion_content","_component_ion_chip","_component_ion_footer","_component_his_footer","reportLogo","src","_renderSlot","$slots","undefined","color","_createTextVNode","appVersion","apiVersion","btns","buttons","IonLabel","IonItem","HisFooter","IonHeader","IonContent","IonToolbar","IonChip","IonFooter","IonThumbnail","IonImg","getCoreVersion","getApiVersion","img","btn","size","slot","visible","_component_ion_title","_component_ion_icon","_component_ion_button","_component_ion_buttons","onConfigure","icon","searchTerm","close","searchTable","search","onRefresh","sync","column","item","i","span","thColspan","rowspan","thRowspan","sortColumn","lines","columnSorted","sortOrder","arrowUp","arrowDown","page","row","info","k","onClickTablecell","_normalizeClass","totalPages","first","disabled","currentPage","prev","canPrev","selectPage","next","canNext","last","finish","IonIcon","IonTitle","IonButton","IonButtons","enablePagination","Boolean","Number","csvQuarter","route","Img","pageComputedReportData","tableData","sort","d","fuse","Fuse","threshold","keys","useExtendedSearch","limit","paginated","numericKeypad","v","num","parseInt","keyboard","helpText","FieldType","TT_TEXT","setTimeout","cell","getExpandedColumns","reduce","a","c","concat","filter","col","prepExportObj","exportableColumns","canExport","every","headers","exportedValue","secondaryLabel","columnRefs","allRows","includes","dataValue","filename","toTablePDF","getSiteUUID","getUserName","mapcolumnValues","forEach","record","searchIndex","join","from","deep"],"mappings":"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","file":"js/chunk-3af684a9.a95a0ce5.js","sourcesContent":["import { resolveComponent as _resolveComponent, createVNode as _createVNode, withCtx as _withCtx, openBlock as _openBlock, createBlock as _createBlock } from \"vue\"\n\nexport function render(_ctx: any,_cache: any,$props: any,$setup: any,$data: any,$options: any) {\n  const _component_v2Datatable = _resolveComponent(\"v2Datatable\")!\n  const _component_ion_page = _resolveComponent(\"ion-page\")!\n\n  return (_openBlock(), _createBlock(_component_ion_page, null, {\n    default: _withCtx(() => [\n      _createVNode(_component_v2Datatable, {\n        title: _ctx.title,\n        subtitle: _ctx.subtitle,\n        columnData: _ctx.reportData,\n        columns: _ctx.columns,\n        \"on-finish\": _ctx.onFinish,\n        rowsPerPage: _ctx.ITEMS_PER_PAGE\n      }, null, 8, [\"title\", \"subtitle\", \"columnData\", \"columns\", \"on-finish\", \"rowsPerPage\"])\n    ]),\n    _: 1\n  }))\n}","\nimport { defineComponent, ref, PropType, watch } from 'vue';\nimport { IonPage } from \"@ionic/vue\"\nimport  v2Datatable from \"@/components/DataViews/tables/v2PocDatatable/TableView.vue\"\nimport { v2ColumnDataInterface, v2ColumnInterface } from '@/components/DataViews/tables/v2PocDatatable/types';\nimport { useRouter } from \"vue-router\"\nimport { chunk } from 'lodash';\nimport { delayPromise } from '@/utils/Timers';\nimport { Patientservice } from '@/services/patient_service';\nimport { toDate } from '@/utils/Strs';\n\nconst ITEMS_PER_PAGE = 20\nconst cachedPatientIDs: Record<number, any> = {}\nexport default defineComponent({ \n    props: {\n        title: {\n            type: String,\n            default: 'Drilldown'\n        },\n        patientIdentifiers: {\n            type: Object as PropType<number[]>\n        },\n        onFinish: {\n            type: Function\n        }\n    },\n    components: {\n        IonPage,\n        v2Datatable\n    },\n    setup(props) {\n        const subtitle = ref('-')\n        const reportData = ref<any>([])\n        const router = useRouter()\n        const columns: Array<v2ColumnInterface[]> = [\n            [\n                {\n                    label: 'National ID',\n                    ref: 'national_id'\n                },\n                {\n                    label: 'First name',\n                    ref: 'given_name'\n                },\n                {\n                    label: 'Last name',\n                    ref: 'family_name'\n                },\n                {\n                    label: 'Birthdate',\n                    ref: 'birthdate'\n                },\n                {\n                    label: 'Action',\n                    ref: 'patient_id',\n                    exportable: false,\n                    tdClick: ({data}: v2ColumnDataInterface) => router.push({ path: `/patient/dashboard/${data.patient_id}`}) ,\n                    value: () => 'View client'\n                }\n            ]\n        ]\n        watch(() => props.patientIdentifiers, async (data) => {\n            reportData.value = []\n            subtitle.value = `Total: 0`\n            if (!(data && data.length)) return\n            const backlog = chunk(data, ITEMS_PER_PAGE)\n            for(const log of backlog) {\n                for (const id of log) {\n                    try {\n                        let patient = null\n                        if (cachedPatientIDs[id]) {\n                            patient = cachedPatientIDs[id]\n                        } else {\n                            patient = new Patientservice((await Patientservice.findByID(id)))\n                            cachedPatientIDs[id] = patient\n                        }\n                        reportData.value.push({\n                            'patient_id': patient.getID(),\n                            'national_id': patient.getNationalID(),\n                            'given_name': patient.getGivenName(),\n                            'family_name': patient.getFamilyName(),\n                            'birthdate': toDate(patient.getBirthdate())\n                        })\n                    } catch (e) {\n                        console.error(e)\n                        reportData.value.push({})\n                    }\n                    subtitle.value = `Total: ${reportData.value.length} of ${(data||[]).length}`\n                }\n                await delayPromise(500)\n            }\n        }, { immediate: true })\n\n        return  {\n            columns,\n            subtitle,\n            reportData,\n            ITEMS_PER_PAGE\n        }\n    }\n})\n","import { render } from \"./DrillPatientIds.vue?vue&type=template&id=77912af7&ts=true\"\nimport script from \"./DrillPatientIds.vue?vue&type=script&lang=ts\"\nexport * from \"./DrillPatientIds.vue?vue&type=script&lang=ts\"\n\nimport exportComponent from \"/home/andrew-dev/Projects/HIS-Core/node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","import { renderList as _renderList, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock, createCommentVNode as _createCommentVNode, toDisplayString as _toDisplayString, normalizeStyle as _normalizeStyle, createElementVNode as _createElementVNode, resolveComponent as _resolveComponent, withCtx as _withCtx, createBlock as _createBlock, pushScopeId as _pushScopeId, popScopeId as _popScopeId } from \"vue\"\n\nconst _withScopeId = n => (_pushScopeId(\"data-v-5c21aaf2\"),n=n(),_popScopeId(),n)\nconst _hoisted_1 = { id: \"report-content\" }\nconst _hoisted_2 = { id: \"moh_template\" }\nconst _hoisted_3 = {\n  key: 0,\n  class: \"main-title\"\n}\nconst _hoisted_4 = {\n  key: 1,\n  class: \"main-title\"\n}\nconst _hoisted_5 = {\n  key: 2,\n  class: \"main-title\"\n}\nconst _hoisted_6 = {\n  key: 3,\n  class: \"table-section\"\n}\nconst _hoisted_7 = {\n  key: 4,\n  colspan: 2,\n  class: \"table-section\"\n}\nconst _hoisted_8 = { key: 5 }\nconst _hoisted_9 = [\"onClick\"]\n\nexport function render(_ctx: any,_cache: any,$props: any,$setup: any,$data: any,$options: any) {\n  const _component_layout = _resolveComponent(\"layout\")!\n\n  return (_openBlock(), _createBlock(_component_layout, {\n    logo: \"login-logos/Malawi-Coat_of_arms_of_arms.png\",\n    title: _ctx.data.title,\n    toCSV: _ctx.exportCsv,\n    toPDF: _ctx.exportPdf,\n    period: _ctx.data.period,\n    dateGenerated: _ctx.data.dateGenerated,\n    refreshReport: _ctx.generate,\n    configure: _ctx.configure\n  }, {\n    default: _withCtx(() => [\n      _createElementVNode(\"div\", _hoisted_1, [\n        _createElementVNode(\"table\", _hoisted_2, [\n          (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(_ctx.indicators, (indicator, index) => {\n            return (_openBlock(), _createElementBlock(\"tr\", { key: index }, [\n              (indicator.isMainTitle)\n                ? (_openBlock(), _createElementBlock(\"td\", _hoisted_3, \"#\"))\n                : _createCommentVNode(\"\", true),\n              (indicator.isMainTitle)\n                ? (_openBlock(), _createElementBlock(\"td\", _hoisted_4, _toDisplayString(indicator.label), 1))\n                : _createCommentVNode(\"\", true),\n              (indicator.isMainTitle)\n                ? (_openBlock(), _createElementBlock(\"td\", _hoisted_5, \"#\"))\n                : _createCommentVNode(\"\", true),\n              (indicator.isSectionTitle)\n                ? (_openBlock(), _createElementBlock(\"td\", _hoisted_6))\n                : _createCommentVNode(\"\", true),\n              (indicator.isSectionTitle)\n                ? (_openBlock(), _createElementBlock(\"td\", _hoisted_7, _toDisplayString(indicator.label), 1))\n                : _createCommentVNode(\"\", true),\n              (!(indicator.isMainTitle || indicator.isSectionTitle))\n                ? (_openBlock(), _createElementBlock(\"td\", _hoisted_8, _toDisplayString(indicator.index), 1))\n                : _createCommentVNode(\"\", true),\n              (!(indicator.isMainTitle || indicator.isSectionTitle))\n                ? (_openBlock(), _createElementBlock(\"td\", {\n                    key: 6,\n                    style: _normalizeStyle(indicator.style || {}),\n                    class: \"table-key\"\n                  }, _toDisplayString(indicator.label), 5))\n                : _createCommentVNode(\"\", true),\n              (!(indicator.isMainTitle || indicator.isSectionTitle))\n                ? (_openBlock(), _createElementBlock(\"td\", {\n                    key: 7,\n                    class: \"table-value\",\n                    onClick: ($event: any) => (_ctx.drill(indicator))\n                  }, _toDisplayString(indicator._value), 9, _hoisted_9))\n                : _createCommentVNode(\"\", true)\n            ]))\n          }), 128))\n        ])\n      ])\n    ]),\n    _: 1\n  }, 8, [\"title\", \"toCSV\", \"toPDF\", \"period\", \"dateGenerated\", \"refreshReport\", \"configure\"]))\n}","import { HtsReportService } from \"@/apps/HTS/services/hts_report_service\";\nimport { Service } from \"@/services/service\";\nimport { toastWarning } from \"@/utils/Alerts\";\nimport { appendCsvSignature, toCsv, toPDFfromHTML, toTablePDF } from \"@/utils/Export\";\nimport { DrillPatients } from \"@/utils/PatientDrilldown\";\nimport { DateSelection } from \"@/utils/PromptDateSelection\";\nimport { loadingController } from \"@ionic/vue\";\nimport dayjs from \"dayjs\";\nimport { isEmpty } from \"lodash\";\nimport { computed, onMounted, reactive } from \"vue\";\nimport { MohTemplateIndicatorInterface, MohTemplateParamInterface } from \"./interface\";\n\nconst data = reactive({\n    model: [] as MohTemplateIndicatorInterface[],\n    indicators: {} as any,\n    dateGenerated: '',\n    startDate: '',\n    endDate: '',\n    title: '',\n    period: ''\n})\n\nconst indicators = computed(() => {\n    return data.model.map((indicator: MohTemplateIndicatorInterface) => {\n        if (typeof indicator.value === 'function') {\n            const value = indicator.value(data.indicators)\n            if (Array.isArray(value)) {\n                indicator._value = `${value.length}`\n                indicator._drill = value as any\n            } else {\n                indicator._value = value\n            }\n        }\n        return indicator\n    })\n})\n\nconst exportable = computed(() => {\n    const [_, ...rows] = indicators.value.map((indicator: any) => {\n        return [ \n            indicator.index || '', \n            indicator.label, \n            !indicator.index ? '' : indicator._value ||  0\n        ]\n    })\n    return {\n        rows,\n        columns: [['#',indicators.value[0].label, '#']]\n    }\n})\n\nexport function MohController(params: MohTemplateParamInterface) {\n    if (params.title != data.title) data.indicators = {}\n    data.title = params.title\n    data.model = params.indicators\n    const generate = async (startDate='', endDate='') =>  {\n        (await loadingController.create({ message: \"Please wait ..\"})).present();\n        try {\n            const report = new HtsReportService(params.name)\n            report.startDate = startDate || data.startDate\n            report.endDate = endDate || data.endDate\n            data.indicators = await report.requestReport({ type: 'moh' })\n            data.dateGenerated = dayjs(Service.getSessionDate()).format('DD/MMM/YYYY HH:mm:ss')\n        } catch (e) {\n            toastWarning('Unable to generate report')\n        }\n        loadingController.dismiss()\n    }\n\n    const configure = () => DateSelection({\n        title: data.title,\n        onFinish: (startDate: string, endDate: string, period: string) => {\n            data.period = period\n            data.startDate = startDate\n            data.endDate = endDate\n            generate()\n        }\n    })\n\n    const drill = (indicator: MohTemplateIndicatorInterface) => {\n        if (Array.isArray(indicator._drill)) {\n            DrillPatients(indicator.label, indicator._drill)\n        }\n    }\n\n    const exportPdf = () => {\n        const content = document.getElementById(\"report-content\")\n        if (content) {\n            toPDFfromHTML(`\n                <html>\n                <head>\n                    <link rel=\"stylesheet\" media=\"print\"  href=\"/assets/css/hts-report-style-print.css\"/>\n                    <style> \n                        #moh_template { border: solid 1px #3333; width: 100%; } td { font-size: var(--his-sm-font-size); padding: 0.3em; } .main-title { background: #8EAADB; font-weight: bold; border: solid 3px black; } .table-value { padding: 1em; text-align: center; color: #337ab7; font-weight: bold; font-size: var(--his-md-font-size); border: solid 2px black; } .table-section { font-weight: bold; background: #D9E2F3; border: solid 3px black; }\n                    </style>\n                </head>\n                <body>\n                    ${content.innerHTML}\n                </body>\n                </html>\n            `, 50)\n        }\n    }\n\n    const exportCsv = () => {\n        const { rows, columns } = exportable.value\n        toCsv(columns,\n            appendCsvSignature(rows, data), \n            `MOH-${data.title}-${Service.getLocationName()}-${data.period}`\n       )\n    }\n\n    onMounted(() => isEmpty(data.indicators) && configure())\n\n    return {\n        drill,\n        data,\n        indicators,\n        exportable,\n        generate,\n        exportPdf,\n        exportCsv,\n        configure\n    }\n}","\nimport { defineComponent } from 'vue';\nimport Layout from \"@/apps/HTS/views/reports/templates/Layout.vue\";\nimport { MohController } from './controller';\n\nexport default defineComponent({\n    components: {\n        Layout\n    },\n    props: {\n        params: {\n            type: Object,\n            required: true\n        }\n    },\n    setup(props) {\n        return MohController(props.params as any)\n    }\n})\n","import { render } from \"./template.vue?vue&type=template&id=5c21aaf2&scoped=true&ts=true\"\nimport script from \"./template.vue?vue&type=script&lang=ts\"\nexport * from \"./template.vue?vue&type=script&lang=ts\"\n\nimport \"./template.vue?vue&type=style&index=0&id=5c21aaf2&scoped=true&lang=css\"\n\nimport exportComponent from \"/home/andrew-dev/Projects/HIS-Core/node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-5c21aaf2\"]])\n\nexport default __exports__","import { modalController } from \"@ionic/vue\";\nimport Drilldown from \"@/components/DrillPatientIds.vue\"\n\nexport async function DrillPatients(title: string, patientIdentifiers: number[]) {\n    (await modalController.create({\n        component: Drilldown,\n        cssClass: 'large-modal',\n        componentProps: {\n            title,\n            patientIdentifiers,\n            onFinish: () => modalController.dismiss()\n        }\n    })).present()\n}","export * from \"-!../../../../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../../../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../../../../../node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../../../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../../../node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/index.js??ref--0-1!./template.vue?vue&type=style&index=0&id=5c21aaf2&scoped=true&lang=css\"","import { resolveComponent as _resolveComponent, createVNode as _createVNode, withCtx as _withCtx, openBlock as _openBlock, createBlock as _createBlock, createCommentVNode as _createCommentVNode, toDisplayString as _toDisplayString, createElementVNode as _createElementVNode, createElementBlock as _createElementBlock, renderSlot as _renderSlot, createTextVNode as _createTextVNode, pushScopeId as _pushScopeId, popScopeId as _popScopeId } from \"vue\"\n\nconst _withScopeId = n => (_pushScopeId(\"data-v-3e4a390e\"),n=n(),_popScopeId(),n)\nconst _hoisted_1 = { class: \"header-text-list\" }\nconst _hoisted_2 = { key: 0 }\nconst _hoisted_3 = { id: \"report-content\" }\n\nexport function render(_ctx: any,_cache: any,$props: any,$setup: any,$data: any,$options: any) {\n  const _component_ion_img = _resolveComponent(\"ion-img\")!\n  const _component_ion_thumbnail = _resolveComponent(\"ion-thumbnail\")!\n  const _component_ion_label = _resolveComponent(\"ion-label\")!\n  const _component_ion_item = _resolveComponent(\"ion-item\")!\n  const _component_ion_toolbar = _resolveComponent(\"ion-toolbar\")!\n  const _component_ion_header = _resolveComponent(\"ion-header\")!\n  const _component_ion_content = _resolveComponent(\"ion-content\")!\n  const _component_ion_chip = _resolveComponent(\"ion-chip\")!\n  const _component_ion_footer = _resolveComponent(\"ion-footer\")!\n  const _component_his_footer = _resolveComponent(\"his-footer\")!\n  const _component_ion_page = _resolveComponent(\"ion-page\")!\n\n  return (_openBlock(), _createBlock(_component_ion_page, null, {\n    default: _withCtx(() => [\n      _createVNode(_component_ion_header, null, {\n        default: _withCtx(() => [\n          _createVNode(_component_ion_toolbar, null, {\n            default: _withCtx(() => [\n              _createVNode(_component_ion_item, null, {\n                default: _withCtx(() => [\n                  (_ctx.reportLogo)\n                    ? (_openBlock(), _createBlock(_component_ion_thumbnail, { key: 0 }, {\n                        default: _withCtx(() => [\n                          _createVNode(_component_ion_img, { src: _ctx.reportLogo }, null, 8, [\"src\"])\n                        ]),\n                        _: 1\n                      }))\n                    : _createCommentVNode(\"\", true),\n                  _createVNode(_component_ion_label, null, {\n                    default: _withCtx(() => [\n                      _createElementVNode(\"ul\", _hoisted_1, [\n                        _createElementVNode(\"li\", null, [\n                          _createElementVNode(\"b\", null, _toDisplayString(_ctx.title), 1)\n                        ]),\n                        (_ctx.period)\n                          ? (_openBlock(), _createElementBlock(\"li\", _hoisted_2, [\n                              _createElementVNode(\"b\", null, _toDisplayString(_ctx.period), 1)\n                            ]))\n                          : _createCommentVNode(\"\", true)\n                      ])\n                    ]),\n                    _: 1\n                  })\n                ]),\n                _: 1\n              })\n            ]),\n            _: 1\n          })\n        ]),\n        _: 1\n      }),\n      _createVNode(_component_ion_content, {\n        \"scroll-y\": \"\",\n        \"scroll-x\": \"\"\n      }, {\n        default: _withCtx(() => [\n          _createElementVNode(\"div\", _hoisted_3, [\n            _renderSlot(_ctx.$slots, \"default\", {}, undefined, true)\n          ])\n        ]),\n        _: 3\n      }),\n      _createVNode(_component_ion_footer, null, {\n        default: _withCtx(() => [\n          _createVNode(_component_ion_toolbar, null, {\n            default: _withCtx(() => [\n              _createVNode(_component_ion_chip, { color: \"primary\" }, {\n                default: _withCtx(() => [\n                  _createTextVNode(\"Date Generated: \"),\n                  _createElementVNode(\"b\", null, _toDisplayString(_ctx.dateGenerated), 1)\n                ]),\n                _: 1\n              }),\n              _createVNode(_component_ion_chip, { color: \"primary\" }, {\n                default: _withCtx(() => [\n                  _createTextVNode(\"APP version: \"),\n                  _createElementVNode(\"b\", null, _toDisplayString(_ctx.appVersion), 1)\n                ]),\n                _: 1\n              }),\n              _createVNode(_component_ion_chip, { color: \"primary\" }, {\n                default: _withCtx(() => [\n                  _createTextVNode(\"API version: \"),\n                  _createElementVNode(\"b\", null, _toDisplayString(_ctx.apiVersion), 1)\n                ]),\n                _: 1\n              })\n            ]),\n            _: 1\n          })\n        ]),\n        _: 1\n      }),\n      _createVNode(_component_his_footer, {\n        color: \"dark\",\n        btns: _ctx.buttons\n      }, null, 8, [\"btns\"])\n    ]),\n    _: 3\n  }))\n}","\nimport {\n  IonPage,\n  IonHeader,\n  IonContent,\n  IonToolbar,\n  IonChip,\n  IonFooter,\n  IonThumbnail,\n  IonImg,\n  IonLabel,\n  IonItem,\n} from \"@ionic/vue\"\nimport img from \"@/utils/Img\";\nimport HisFooter from \"@/components/HisDynamicNavFooter.vue\";\nimport { computed, defineComponent } from \"vue\";\nimport { useRouter } from \"vue-router\";\nimport { Service } from \"@/services/service\";\n\nexport default defineComponent({\n    components: {\n        IonLabel,\n        IonItem,\n        HisFooter, \n        IonPage, \n        IonHeader,\n        IonContent, \n        IonToolbar, \n        IonChip, \n        IonFooter,\n        IonThumbnail,\n        IonImg\n    },\n    props: {\n        title: {\n            type: String,\n        },\n        period: {\n            type: String\n        },\n        logo: {\n            type: String\n        },\n        toCSV: {\n            type: Function,\n            required: false\n        },\n        toPDF: {\n            type: Function,\n            required: false\n        },\n        configure: {\n            type: Function,\n            required: false\n        },\n        refreshReport: {\n            type: Function,\n            required: true\n        },\n        dateGenerated: {\n            type: String,\n            default: '-'\n        }\n    },\n    setup(props) {\n        const router = useRouter()\n        const buttons: any = []\n        const appVersion: string = Service.getCoreVersion()\n        const apiVersion: string = Service.getApiVersion()\n        const reportLogo = computed(() => props.logo ? img(props.logo) : null)\n\n        function btn(params: any, onClick: Function) {\n            return {\n                name: params.name || \"Btn\",\n                size: params.size || \"large\",\n                slot: params.slot || \"start\",\n                color: params.color || \"primary\",\n                visible: params.visible || true,\n                onClick\n            }\n        }\n        if (typeof props.toCSV === 'function') {\n            buttons.push(btn({ name: 'CSV' }, props.toCSV))\n        }\n        if (typeof props.toPDF === 'function') {\n            buttons.push(btn({ name: 'PDF'}, props.toPDF))\n        }\n        if (typeof props.configure === 'function') {\n            buttons.push(btn({ \n                name: 'Set Date',\n                slot: 'end',\n                color: 'primary'\n            }, () => props.configure && props.configure()))\n        }\n        buttons.push(btn({\n            name: 'Refresh',\n            slot: 'end',\n            color: 'warning'\n        }, () => props.refreshReport()))\n        buttons.push(btn({\n            name: 'Finish',\n            slot: 'end',\n            color: 'success'\n        }, () => router.push('/')))\n\n        return {\n            buttons,\n            appVersion,\n            apiVersion,\n            reportLogo\n        }\n    }\n})\n","import { render } from \"./Layout.vue?vue&type=template&id=3e4a390e&scoped=true&ts=true\"\nimport script from \"./Layout.vue?vue&type=script&lang=ts\"\nexport * from \"./Layout.vue?vue&type=script&lang=ts\"\n\nimport \"./Layout.vue?vue&type=style&index=0&id=3e4a390e&scoped=true&lang=css\"\n\nimport exportComponent from \"/home/andrew-dev/Projects/HIS-Core/node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-3e4a390e\"]])\n\nexport default __exports__","import { toDisplayString as _toDisplayString, openBlock as _openBlock, createElementBlock as _createElementBlock, createCommentVNode as _createCommentVNode, createElementVNode as _createElementVNode, createTextVNode as _createTextVNode, resolveComponent as _resolveComponent, withCtx as _withCtx, createVNode as _createVNode, createBlock as _createBlock, renderList as _renderList, Fragment as _Fragment, normalizeClass as _normalizeClass, pushScopeId as _pushScopeId, popScopeId as _popScopeId } from \"vue\"\n\nconst _withScopeId = n => (_pushScopeId(\"data-v-6bdc361e\"),n=n(),_popScopeId(),n)\nconst _hoisted_1 = { key: 0 }\nconst _hoisted_2 = { class: \"his-sm-text\" }\nconst _hoisted_3 = { class: \"art-report-theme\" }\nconst _hoisted_4 = { class: \"stick-report-header\" }\nconst _hoisted_5 = [\"colspan\", \"rowspan\", \"onClick\"]\nconst _hoisted_6 = [\"onClick\"]\nconst _hoisted_7 = { class: \"his-sm-text\" }\n\nexport function render(_ctx: any,_cache: any,$props: any,$setup: any,$data: any,$options: any) {\n  const _component_ion_title = _resolveComponent(\"ion-title\")!\n  const _component_ion_icon = _resolveComponent(\"ion-icon\")!\n  const _component_ion_button = _resolveComponent(\"ion-button\")!\n  const _component_ion_label = _resolveComponent(\"ion-label\")!\n  const _component_ion_chip = _resolveComponent(\"ion-chip\")!\n  const _component_ion_buttons = _resolveComponent(\"ion-buttons\")!\n  const _component_ion_toolbar = _resolveComponent(\"ion-toolbar\")!\n  const _component_ion_header = _resolveComponent(\"ion-header\")!\n  const _component_ion_item = _resolveComponent(\"ion-item\")!\n  const _component_ion_content = _resolveComponent(\"ion-content\")!\n  const _component_ion_footer = _resolveComponent(\"ion-footer\")!\n\n  return (_openBlock(), _createElementBlock(_Fragment, null, [\n    _createVNode(_component_ion_header, null, {\n      default: _withCtx(() => [\n        _createVNode(_component_ion_toolbar, null, {\n          default: _withCtx(() => [\n            _createVNode(_component_ion_title, { class: \"his-md-text\" }, {\n              default: _withCtx(() => [\n                _createTextVNode(_toDisplayString(_ctx.title) + \" \", 1),\n                (_ctx.subtitle)\n                  ? (_openBlock(), _createElementBlock(\"br\", _hoisted_1))\n                  : _createCommentVNode(\"\", true),\n                _createElementVNode(\"span\", _hoisted_2, _toDisplayString(_ctx.subtitle), 1)\n              ]),\n              _: 1\n            }),\n            _createVNode(_component_ion_buttons, { slot: \"end\" }, {\n              default: _withCtx(() => [\n                (typeof _ctx.onConfigure === 'function')\n                  ? (_openBlock(), _createBlock(_component_ion_button, {\n                      key: 0,\n                      onClick: _ctx.onConfigure\n                    }, {\n                      default: _withCtx(() => [\n                        _createVNode(_component_ion_icon, {\n                          size: \"large\",\n                          icon: _ctx.document\n                        }, null, 8, [\"icon\"])\n                      ]),\n                      _: 1\n                    }, 8, [\"onClick\"]))\n                  : _createCommentVNode(\"\", true),\n                (_ctx.searchTerm)\n                  ? (_openBlock(), _createBlock(_component_ion_chip, {\n                      key: 1,\n                      onClick: _cache[0] || (_cache[0] = ($event: any) => (_ctx.searchTerm = '')),\n                      class: \"his-md-text\",\n                      color: \"primary\"\n                    }, {\n                      default: _withCtx(() => [\n                        _createVNode(_component_ion_label, null, {\n                          default: _withCtx(() => [\n                            _createTextVNode(_toDisplayString(_ctx.searchTerm), 1)\n                          ]),\n                          _: 1\n                        }),\n                        _createVNode(_component_ion_icon, { icon: _ctx.close }, null, 8, [\"icon\"])\n                      ]),\n                      _: 1\n                    }))\n                  : _createCommentVNode(\"\", true),\n                _createVNode(_component_ion_button, {\n                  onClick: _ctx.searchTable,\n                  size: \"large\"\n                }, {\n                  default: _withCtx(() => [\n                    _createVNode(_component_ion_icon, {\n                      size: \"large\",\n                      icon: _ctx.search\n                    }, null, 8, [\"icon\"])\n                  ]),\n                  _: 1\n                }, 8, [\"onClick\"]),\n                (typeof _ctx.onRefresh === 'function')\n                  ? (_openBlock(), _createBlock(_component_ion_button, {\n                      key: 2,\n                      onClick: _ctx.onRefresh,\n                      color: \"success\",\n                      size: \"large\"\n                    }, {\n                      default: _withCtx(() => [\n                        _createVNode(_component_ion_icon, {\n                          size: \"large\",\n                          icon: _ctx.sync\n                        }, null, 8, [\"icon\"])\n                      ]),\n                      _: 1\n                    }, 8, [\"onClick\"]))\n                  : _createCommentVNode(\"\", true)\n              ]),\n              _: 1\n            })\n          ]),\n          _: 1\n        })\n      ]),\n      _: 1\n    }),\n    _createVNode(_component_ion_content, {\n      \"scroll-y\": \"\",\n      \"scroll-x\": \"\"\n    }, {\n      default: _withCtx(() => [\n        _createElementVNode(\"table\", _hoisted_3, [\n          _createElementVNode(\"thead\", _hoisted_4, [\n            (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(_ctx.columns, (column, index) => {\n              return (_openBlock(), _createElementBlock(\"tr\", { key: index }, [\n                (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(column, (item, i) => {\n                  return (_openBlock(), _createElementBlock(\"th\", {\n                    key: i,\n                    colspan: item?.span?.thColspan || 1,\n                    rowspan: item?.span?.thRowspan || 1,\n                    onClick: ($event: any) => (_ctx.sortColumn(item.ref))\n                  }, [\n                    _createVNode(_component_ion_item, { lines: \"none\" }, {\n                      default: _withCtx(() => [\n                        (_ctx.columnSorted && _ctx.columnSorted === item.ref)\n                          ? (_openBlock(), _createBlock(_component_ion_icon, {\n                              key: 0,\n                              icon: _ctx.sortOrder === 'asc' ? _ctx.arrowUp : _ctx.arrowDown\n                            }, null, 8, [\"icon\"]))\n                          : _createCommentVNode(\"\", true),\n                        _createVNode(_component_ion_label, { class: \"ion-text-center\" }, {\n                          default: _withCtx(() => [\n                            _createElementVNode(\"b\", null, _toDisplayString(item.label), 1)\n                          ]),\n                          _: 2\n                        }, 1024)\n                      ]),\n                      _: 2\n                    }, 1024)\n                  ], 8, _hoisted_5))\n                }), 128))\n              ]))\n            }), 128))\n          ]),\n          _createElementVNode(\"tbody\", null, [\n            (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(_ctx.page, (data, i) => {\n              return (_openBlock(), _createElementBlock(\"tr\", { key: i }, [\n                (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(data.row, (info, k) => {\n                  return (_openBlock(), _createElementBlock(\"td\", {\n                    key: k,\n                    onClick: () => _ctx.onClickTablecell(info),\n                    class: _normalizeClass({\n                            'clickable-cell': info?.column?.tdClick\n                        })\n                  }, [\n                    _createElementVNode(\"span\", _hoisted_7, _toDisplayString(info.value), 1)\n                  ], 10, _hoisted_6))\n                }), 128))\n              ]))\n            }), 128))\n          ])\n        ])\n      ]),\n      _: 1\n    }),\n    _createVNode(_component_ion_footer, null, {\n      default: _withCtx(() => [\n        _createVNode(_component_ion_toolbar, { color: \"dark\" }, {\n          default: _withCtx(() => [\n            _createVNode(_component_ion_button, {\n              onClick: _cache[1] || (_cache[1] = ($event: any) => (_ctx.toCSV())),\n              size: \"large\"\n            }, {\n              default: _withCtx(() => [\n                _createTextVNode(\" CSV \")\n              ]),\n              _: 1\n            }),\n            _createVNode(_component_ion_button, {\n              onClick: _cache[2] || (_cache[2] = ($event: any) => (_ctx.toPDF())),\n              size: \"large\"\n            }, {\n              default: _withCtx(() => [\n                _createTextVNode(\" PDF \")\n              ]),\n              _: 1\n            }),\n            (_ctx.totalPages > 1)\n              ? (_openBlock(), _createBlock(_component_ion_button, {\n                  key: 0,\n                  onClick: _ctx.first,\n                  disabled: _ctx.currentPage === 0 || _ctx.totalPages <= 2,\n                  size: \"large\",\n                  slot: \"end\"\n                }, {\n                  default: _withCtx(() => [\n                    _createTextVNode(\" First \")\n                  ]),\n                  _: 1\n                }, 8, [\"onClick\", \"disabled\"]))\n              : _createCommentVNode(\"\", true),\n            (_ctx.totalPages > 1)\n              ? (_openBlock(), _createBlock(_component_ion_button, {\n                  key: 1,\n                  onClick: _ctx.prev,\n                  disabled: !_ctx.canPrev,\n                  color: \"light\",\n                  size: \"large\",\n                  slot: \"end\"\n                }, {\n                  default: _withCtx(() => [\n                    _createTextVNode(\" Prev \")\n                  ]),\n                  _: 1\n                }, 8, [\"onClick\", \"disabled\"]))\n              : _createCommentVNode(\"\", true),\n            (_ctx.totalPages > 1)\n              ? (_openBlock(), _createBlock(_component_ion_button, {\n                  key: 2,\n                  onClick: _ctx.selectPage,\n                  size: \"large\",\n                  slot: \"end\",\n                  color: \"light\"\n                }, {\n                  default: _withCtx(() => [\n                    _createTextVNode(_toDisplayString(_ctx.currentPage) + \" / \" + _toDisplayString(_ctx.totalPages - 1), 1)\n                  ]),\n                  _: 1\n                }, 8, [\"onClick\"]))\n              : _createCommentVNode(\"\", true),\n            (_ctx.totalPages > 1)\n              ? (_openBlock(), _createBlock(_component_ion_button, {\n                  key: 3,\n                  onClick: _ctx.next,\n                  disabled: !_ctx.canNext,\n                  color: \"light\",\n                  size: \"large\",\n                  slot: \"end\"\n                }, {\n                  default: _withCtx(() => [\n                    _createTextVNode(\" Next \")\n                  ]),\n                  _: 1\n                }, 8, [\"onClick\", \"disabled\"]))\n              : _createCommentVNode(\"\", true),\n            (_ctx.totalPages > 1)\n              ? (_openBlock(), _createBlock(_component_ion_button, {\n                  key: 4,\n                  onClick: _ctx.last,\n                  disabled: _ctx.currentPage+1 >= _ctx.totalPages || _ctx.totalPages <= 2,\n                  size: \"large\",\n                  slot: \"end\"\n                }, {\n                  default: _withCtx(() => [\n                    _createTextVNode(\" Last \")\n                  ]),\n                  _: 1\n                }, 8, [\"onClick\", \"disabled\"]))\n              : _createCommentVNode(\"\", true),\n            _createVNode(_component_ion_button, {\n              onClick: _ctx.finish,\n              color: \"success\",\n              size: \"large\",\n              slot: \"end\"\n            }, {\n              default: _withCtx(() => [\n                _createTextVNode(\" Finish \")\n              ]),\n              _: 1\n            }, 8, [\"onClick\"])\n          ]),\n          _: 1\n        })\n      ]),\n      _: 1\n    })\n  ], 64))\n}","\nimport {\n\tIonImg,\n\tIonThumbnail,\n\tIonLabel,\n\tIonIcon,\n\tIonItem,\n\tIonTitle,\n\tIonChip,\n\tIonToolbar,\n\tIonHeader,\n\tIonButton,\n\tIonFooter,\n\tIonContent,\n\tIonButtons\n} from \"@ionic/vue\"\nimport {\n\tsync,\n\tsearch,\n\tclose,\n\tarrowUp,\n\tarrowDown,\n\tdocument\n} from \"ionicons/icons\"\nimport { Option } from \"@/components/Forms/FieldInterface\"\nimport { computed, defineComponent, PropType, ref, watch } from \"vue\";\nimport keyboard from \"@/utils/PopupKeyboard\"\nimport { chunk, isEmpty } from \"lodash\";\nimport { sort } from \"fast-sort\";\nimport { numericKeypad } from \"@/utils/PopupKeyboard\";\nimport { FieldType } from \"@/components/Forms/BaseFormElements\";\nimport Fuse from \"fuse.js\"\nimport { v2ColumnDataInterface, v2ColumnInterface } from \"./types\";\nimport { toCsv, toTablePDF } from \"@/utils/Export\"\nimport { Service } from \"@/services/service\";\nimport { useRouter } from \"vue-router\";\nimport dayjs from \"dayjs\";\nimport Img from \"@/utils/Img\"\n\nexport default defineComponent({\n\tcomponents: {\n\t\tIonImg,\n\t\tIonThumbnail,\n\t\tIonToolbar,\n\t\tIonItem,\n\t\tIonIcon,\n\t\tIonLabel,\n\t\tIonTitle,\n\t\tIonHeader,\n\t\tIonButton,\n\t\tIonFooter,\n\t\tIonContent,\n\t\tIonButtons,\n\t\tIonChip\n\t},\n\tprops: {\n\t\ticon: {\n\t\t\ttype: String\n\t\t},\n\t\ttitle: {\n\t\t\ttype: String,\n\t\t\tdefault: 'Report'\n\t\t},\n\t\tsubtitle: {\n\t\t\ttype: String,\n\t\t},\n\t\tcolumns: {\n\t\t\ttype: Object as PropType<Array<v2ColumnInterface[]>>,\n\t\t\trequired: true\n\t\t},\n\t\tcolumnData: {\n\t\t\ttype: Array,\n\t\t\tdefault: () => []\n\t\t},\n\t\tenablePagination: {\n\t\t\ttype: Boolean,\n\t\t\tdefault: true\n\t\t},\n\t\trowsPerPage: {\n\t\t\ttype: Number,\n\t\t\tdefault: 10\n\t\t},\n\t\tonFinish: {\n\t\t\ttype: Function\n\t\t},\n\t\tonRefresh: {\n\t\t\ttype: Function\n\t\t},\n\t\tonConfigure: {\n\t\t\ttype: Function\n\t\t},\n\t\tcsvQuarter: {\n\t\t\ttype: String\n\t\t}\n\t},\n\tsetup(props) {\n\t\tconst route = useRouter()\n\t\tconst reportData = ref<any>([])\n\t\tconst currentPage = ref<number>(0)\n\t\tconst searchTerm = ref<string>('')\n\t\tconst columnSorted = ref<string>('')\n\t\tconst sortOrder = ref<'asc' | 'desc'>('desc')\n\n\t\tconst logo = computed(() => props.icon ? Img(props.icon) : '')\n\n\t\t/**\n\t\t * This computed object exist to allow for transformation\n\t\t * of \"reportData\" without mutations when doing\n\t\t * things like search or sorting... \n\t\t */\n\t\tconst pageComputedReportData = computed(() => {\n\t\t\t/**\n\t\t\t * Data transformations for table happen here. i.e. searching or sorting\n\t\t\t*/\n\t\t\tconst tableData = sort(reportData.value)[sortOrder.value]((d: any) => d.data[columnSorted.value])\n\t\t\tif (searchTerm.value) {\n\t\t\t\tconst fuse = new Fuse(tableData, {\n\t\t\t\t\tthreshold: 0.3,\n\t\t\t\t\tkeys: ['searchIndex'],\n\t\t\t\t\tuseExtendedSearch: true\n\t\t\t\t})\n\t\t\t\treturn fuse.search(searchTerm.value, { limit: props.rowsPerPage }).map((i: any) => i.item)\n\t\t\t}\n\t\t\treturn tableData\n\t\t})\n\n\t\tconst totalPages = computed(() => chunk(pageComputedReportData.value, props.rowsPerPage).length)\n\n\t\tconst canNext = computed(() => currentPage.value + 2 <= totalPages.value)\n\n\t\tconst canPrev = computed(() => currentPage.value > 0)\n\t\t/**\n\t\t * returns current page data based on page index\n\t\t */\n\t\tconst page = computed(() => {\n\t\t\t/**\n\t\t\t * Paginated data that ends up on the template.\n\t\t\t */\n\t\t\tconst paginated = chunk(pageComputedReportData.value, props.rowsPerPage)\n\t\t\treturn paginated[currentPage.value] as any\n\t\t})\n\n\t\tconst sortColumn = (column: string) => {\n\t\t\tcolumnSorted.value = column\n\t\t\tsortOrder.value = sortOrder.value === 'asc' ? 'desc' : 'asc'\n\t\t}\n\t\t/**\n\t\t * Launches numeric input to allow the user to skip to any page\n\t\t */\n\t\tconst selectPage = () => numericKeypad((v: string) => {\n\t\t\tconst num = parseInt(v)\n\t\t\tif (parseInt(v) <= totalPages.value) currentPage.value = num\n\t\t}, { title: 'Select page' })\n\t\t/**\n\t\t * Launches search input to filter page\n\t\t */\n\t\tconst searchTable = () => {\n\t\t\tkeyboard({\n\t\t\t\tid: \"search\",\n\t\t\t\thelpText: \"Find\",\n\t\t\t\ttype: FieldType.TT_TEXT,\n\t\t\t},\n\t\t\t\t(v: Option) => {\n\t\t\t\t\t// This has been wrapped in a slight delay to improve responsiveness of the page\n\t\t\t\t\tsetTimeout(() => {\n\t\t\t\t\t\tsearchTerm.value = v ? v.value as string : ''\n\t\t\t\t\t\tcurrentPage.value = 0\n\t\t\t\t\t}, 3)\n\t\t\t\t})\n\t\t}\n\t\t/**\n\t\t * Reset current page to initial\n\t\t */\n\t\tconst first = () => currentPage.value = 0\n\t\t/**\n\t\t * Goes to the last page\n\t\t */\n\t\tconst last = () => currentPage.value = (totalPages.value - 1) || 0\n\t\t/**\n\t\t * Go to next page relative to the current page\n\t\t */\n\t\tconst next = () => currentPage.value += 1\n\t\t/**\n\t\t * Go to previous page relateive to the current page\n\t\t */\n\t\tconst prev = () => currentPage.value -= 1\n\n\t\tconst finish = () => {\n\t\t\tif (typeof props.onFinish === 'function') {\n\t\t\t\tprops.onFinish()\n\t\t\t} else {\n\t\t\t\troute.push('/')\n\t\t\t}\n\t\t}\n\n\t\t/**\n\t\t * Event handler when TD on HTML report is clicked\n\t\t * @param cell \n\t\t */\n\t\tconst onClickTablecell = (cell: v2ColumnDataInterface) => {\n\t\t\ttry {\n\t\t\t\tif (typeof cell.column?.tdClick === 'function') {\n\t\t\t\t\tcell.column?.tdClick(cell)\n\t\t\t\t}\n\t\t\t\treturn\n\t\t\t} catch (e) {\n\t\t\t\tconsole.error(e)\n\t\t\t}\n\t\t}\n\n\t\tconst getExpandedColumns = () => props.columns.reduce((a: any, c: v2ColumnInterface[]) => a.concat(c), [])\n\t\t\t.filter((col: v2ColumnInterface) => col.value || col.ref)\n\n\t\t/**\n\t\t * Defines export object\n\t\t */\n\t\tconst prepExportObj = (format: 'pdf' | 'csv') => {\n\t\t\tconst exportableColumns = getExpandedColumns().filter((column: v2ColumnInterface) => {\n\t\t\t\treturn [\n\t\t\t\t\tcolumn.canExport ? column?.canExport[format] : true,\n\t\t\t\t\ttypeof column.exportable === 'boolean' ? column.exportable : true\n\t\t\t\t].every(Boolean)\n\t\t\t})\n\t\t\t// Generates string headers. The final value will be determined by configuration of column\n\t\t\tconst headers = exportableColumns.map((column: v2ColumnInterface) => {\n\t\t\t\treturn column.exportedValue && column.exportedValue.column\n\t\t\t\t\t? column.exportedValue.column(column)\n\t\t\t\t\t: column.secondaryLabel || column.label\n\t\t\t})\n\n\t\t\t/**\n\t\t\t * Exported rows are based on exportable columns\n\t\t\t */\n\t\t\tconst columnRefs = exportableColumns.map((column: v2ColumnInterface) => column.ref)\n\t\t\tconst rows = reportData.value.reduce((allRows: any, data: any) => {\n\t\t\t\tconst row = data.row.filter(({ column }: v2ColumnDataInterface) => {\n\t\t\t\t\treturn columnRefs.includes(column.ref)\n\t\t\t\t}).map((data: v2ColumnDataInterface) => {\n\t\t\t\t\t// Final value will be determined by optional configuration or static value\n\t\t\t\t\treturn data.column.exportedValue && data.column.exportedValue.dataValue\n\t\t\t\t\t\t? data.column.exportedValue.dataValue(data)\n\t\t\t\t\t\t: data.value\n\t\t\t\t})\n\t\t\t\treturn [...allRows, row]\n\t\t\t}, [])\n\n\t\t\tconst filename = `${Service.getLocationName() || 'Unknown site'}-${props.title}-${props.subtitle}-${Service.getSessionDate()}`\n\t\t\treturn {\n\t\t\t\theaders,\n\t\t\t\trows,\n\t\t\t\tfilename\n\t\t\t}\n\t\t}\n\n\t\tconst toPDF = () => {\n\t\t\tconst { headers, rows, filename } = prepExportObj('pdf')\n\t\t\ttoTablePDF([headers], rows, filename, true)\n\t\t}\n\n\t\tconst toCSV = () => {\n\t\t\tconst { headers, rows, filename } = prepExportObj('csv')\n\t\t\ttoCsv(\n\t\t\t\t[headers],\n\t\t\t\t[\n\t\t\t\t\t...rows,\n\t\t\t\t\t[`Date Created: ${dayjs().format('DD/MMM/YYYY HH:MM:ss')}`],\n\t\t\t\t\t[`Quarter: ${props.csvQuarter || props.subtitle}`],\n\t\t\t\t\t[`HIS-Core Version: ${Service.getCoreVersion()}`],\n\t\t\t\t\t[`API Version: ${Service.getApiVersion()}`],\n\t\t\t\t\t[`Site UUID: ${Service.getSiteUUID()}`],\n\t\t\t\t\t[`Generated by: ${Service.getUserName()}`]\n\t\t\t\t],\n\t\t\t\tfilename\n\t\t\t)\n\t\t}\n\n\t\t/**\n\t\t * Create a table header and cell mapping\n\t\t * @param data \n\t\t */\n\t\tconst mapcolumnValues = (data: any) => {\n\t\t\tdata.forEach((record: any) => {\n\t\t\t\tconst row = getExpandedColumns().map((column: v2ColumnInterface) => {\n\t\t\t\t\tlet value = ''\n\t\t\t\t\ttry {\n\t\t\t\t\t\tif (isEmpty(record)) {\n\t\t\t\t\t\t\tvalue = \"...\"\n\t\t\t\t\t\t} else if (typeof column.value === 'function') {\n\t\t\t\t\t\t\tvalue = column.value(record) as string\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t// Use the ref to map to a value inside the record\n\t\t\t\t\t\t\tvalue = record[column.ref] || ''\n\t\t\t\t\t\t}\n\t\t\t\t\t} catch (e) {\n\t\t\t\t\t\tvalue = '_ERROR_'\n\t\t\t\t\t\tconsole.error(e)\n\t\t\t\t\t}\n\t\t\t\t\treturn {\n\t\t\t\t\t\tcolumn,\n\t\t\t\t\t\tdata: record,\n\t\t\t\t\t\tvalue: value,\n\t\t\t\t\t\t[column.ref || 'nada']: value\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t\treportData.value.push({\n\t\t\t\t\trow,\n\t\t\t\t\tdata: record,\n\t\t\t\t\tsearchIndex: [...row, row.map((d: any) => d.value).join(' ')]\n\t\t\t\t})\n\t\t\t})\n\t\t}\n\n\t\t/**\n\t\t * Initiates generation of table data through column data prop\n\t\t */\n\t\twatch(() => props.columnData, (data) => {\n\t\t\treportData.value = [];\n\t\t\tif (!Array.isArray(data) || !data.length) {\n\t\t\t\tcurrentPage.value = 0\n\t\t\t\tsearchTerm.value = ''\n\t\t\t\tcolumnSorted.value = ''\n\t\t\t\tmapcolumnValues(Array.from({ length: props.rowsPerPage }).map(() => ({})))\n\t\t\t\treturn\n\t\t\t}\n\t\t\tmapcolumnValues(data)\n\t\t}, { immediate: true, deep: true })\n\n\t\treturn {\n\t\t\tfirst,\n\t\t\tlast,\n\t\t\tnext,\n\t\t\tprev,\n\t\t\tselectPage,\n\t\t\tsortColumn,\n\t\t\tsearchTable,\n\t\t\tonClickTablecell,\n\t\t\ttoPDF,\n\t\t\ttoCSV,\n\t\t\tfinish,\n\t\t\tlogo,\n\t\t\tsync,\n\t\t\tsearch,\n\t\t\tclose,\n\t\t\tarrowUp,\n\t\t\tarrowDown,\n\t\t\tdocument,\n\t\t\tpage,\n\t\t\tcanNext,\n\t\t\tsearchTerm,\n\t\t\ttotalPages,\n\t\t\tsortOrder,\n\t\t\tcanPrev,\n\t\t\tcurrentPage,\n\t\t\tcolumnSorted\n\t\t}\n\t}\n})\n","import { render } from \"./TableView.vue?vue&type=template&id=6bdc361e&scoped=true&ts=true\"\nimport script from \"./TableView.vue?vue&type=script&lang=ts\"\nexport * from \"./TableView.vue?vue&type=script&lang=ts\"\n\nimport \"./TableView.vue?vue&type=style&index=0&id=6bdc361e&scoped=true&lang=css\"\n\nimport exportComponent from \"/home/andrew-dev/Projects/HIS-Core/node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-6bdc361e\"]])\n\nexport default __exports__","export * from \"-!../../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../../../node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/index.js??ref--0-1!./TableView.vue?vue&type=style&index=0&id=6bdc361e&scoped=true&lang=css\"","export * from \"-!../../../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../../../../node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../../node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/index.js??ref--0-1!./Layout.vue?vue&type=style&index=0&id=3e4a390e&scoped=true&lang=css\""],"sourceRoot":""}