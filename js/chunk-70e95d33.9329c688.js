(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-70e95d33"],{"0c57":function(e,t,o){"use strict";o("e310")},"8eed":function(e,t,o){"use strict";o.r(t);var a=o("7a23");const c=Object(a["withScopeId"])("data-v-45cde8b0");Object(a["pushScopeId"])("data-v-45cde8b0");const n=Object(a["createTextVNode"])(" Merge history "),r=Object(a["createTextVNode"])("NPID Holder: "),l=Object(a["createTextVNode"])(" Person name "),s=Object(a["createTextVNode"])("Transactions:"),d=Object(a["createTextVNode"])(" Cancel "),b=Object(a["createTextVNode"])(" Reverse ");Object(a["popScopeId"])();const i=c((function(e,t,o,i,u,j){const O=Object(a["resolveComponent"])("ion-text"),p=Object(a["resolveComponent"])("ion-title"),m=Object(a["resolveComponent"])("ion-toolbar"),f=Object(a["resolveComponent"])("ion-header"),_=Object(a["resolveComponent"])("ion-label"),h=Object(a["resolveComponent"])("ion-item"),v=Object(a["resolveComponent"])("ion-list"),g=Object(a["resolveComponent"])("report-table"),N=Object(a["resolveComponent"])("ion-content"),I=Object(a["resolveComponent"])("ion-button"),y=Object(a["resolveComponent"])("ion-footer"),k=Object(a["resolveComponent"])("ion-page");return Object(a["openBlock"])(),Object(a["createBlock"])(k,null,{default:c(()=>[Object(a["createVNode"])(f,null,{default:c(()=>[Object(a["createVNode"])(m,null,{default:c(()=>[Object(a["createVNode"])(p,{class:"his-lg-text"},{default:c(()=>[Object(a["createVNode"])(O,{color:"danger"},{default:c(()=>[Object(a["createTextVNode"])(Object(a["toDisplayString"])(e.npid),1)]),_:1}),n]),_:1})]),_:1})]),_:1}),Object(a["createVNode"])(N,null,{default:c(()=>[Object(a["createVNode"])(p,{class:"his-md-text his-card"},{default:c(()=>[r]),_:1}),Object(a["createVNode"])(v,null,{default:c(()=>[Object(a["createVNode"])(h,{lines:"none",class:"his-md-text"},{default:c(()=>[Object(a["createVNode"])(_,null,{default:c(()=>[l]),_:1}),Object(a["createVNode"])("b",null,Object(a["toDisplayString"])(e.holderName),1)]),_:1}),(Object(a["openBlock"])(!0),Object(a["createBlock"])(a["Fragment"],null,Object(a["renderList"])(e.patientInfo,(e,t)=>(Object(a["openBlock"])(),Object(a["createBlock"])(h,{lines:"none",class:"his-md-text",key:t},{default:c(()=>[Object(a["createVNode"])(_,null,{default:c(()=>[Object(a["createTextVNode"])(Object(a["toDisplayString"])(e.label)+": ",1)]),_:2},1024),Object(a["createVNode"])("b",null,Object(a["toDisplayString"])(e.value),1)]),_:2},1024))),128))]),_:1}),Object(a["createVNode"])(p,{class:"his-md-text his-card"},{default:c(()=>[s]),_:1}),Object(a["createVNode"])(g,{config:{tableCssTheme:"art-report-theme"},columns:e.columns,rows:e.rows},null,8,["columns","rows"])]),_:1}),Object(a["createVNode"])(y,null,{default:c(()=>[Object(a["createVNode"])(m,{color:"dark"},{default:c(()=>[Object(a["createVNode"])(I,{onClick:e.cancel,color:"danger",size:"large",slot:"start"},{default:c(()=>[d]),_:1},8,["onClick"]),Object(a["createVNode"])(I,{onClick:e.rollback,disabled:!e.isReversible,color:"success",size:"large",slot:"end"},{default:c(()=>[b]),_:1},8,["onClick","disabled"])]),_:1})]),_:1})]),_:1})}));var u=o("8a30"),j=o("80e3"),O=o("9ceb"),p=o("1c74");class m extends p["e"]{static getMergeHistory(e){return this.getJson("/rollback/merge_history",{identifier:e})}static rollback(e){return this.postJson("/rollback/rollback_patient",{patient_id:e,program_id:this.getProgramID()})}}var f=o("6c02"),_=o("b5e4"),h=o("9283"),v=Object(a["defineComponent"])({components:{IonText:u["IonText"],IonPage:u["IonPage"],IonContent:u["IonContent"],IonToolbar:u["IonToolbar"],IonHeader:u["IonHeader"],IonFooter:u["IonFooter"],IonTitle:u["IonTitle"],IonList:u["IonList"],IonItem:u["IonItem"],IonLabel:u["IonLabel"],IonButton:u["IonButton"],ReportTable:j["a"]},setup(){const e=Object(f["e"])(),t=Object(f["f"])(),o=Object(a["ref"])(-1),c=Object(a["ref"])([]),n=Object(a["ref"])([]),r=(""+e.params.id).toUpperCase(),l=Object(a["ref"])("N/A"),s=Object(a["ref"])([{label:"Birthdate",value:"N/A"},{label:"Gender",value:"N/A"}]),d=[[O["a"].thTxt("Merge type"),O["a"].thTxt("Merge date"),O["a"].thTxt("First Name"),O["a"].thTxt("Last name"),O["a"].thTxt("Birthdate"),O["a"].thTxt("Gender")]],b=Object(a["computed"])(()=>n.value.length>0);function i(){t.back()}async function u(){await Object(_["a"])("Are you sure you want to merge transactions")&&(await m.rollback(o.value)?t.back():Object(_["c"])("Failed to rollback"))}return Object(a["onMounted"])(async()=>{if(r){try{n.value=await m.getMergeHistory(r)||[]}catch(e){Object(_["c"])("Merge history not found for "+r)}c.value=n.value.map(e=>(-1===o.value&&(o.value=e["secondary_id"],l.value=`${e["secondary_first_name"]} ${e["secondary_surname"]}`,s.value=[{label:"Birthdate",value:h["c"].toStandardHisDisplayFormat(e["secondary_birthdate"])},{label:"Gender",value:e["secondary_gender"]}]),[O["a"].td(e["merge_type"]),O["a"].tdDate(e["merge_date"]),O["a"].td(e["primary_first_name"]),O["a"].td(e["primary_surname"]),O["a"].tdDate(e["primary_birthdate"]),O["a"].td(e["primary_gender"])]))}else t.back()}),{cancel:i,holderName:l,isReversible:b,patientInfo:s,rollback:u,columns:d,rows:c,npid:r}}}),g=(o("0c57"),o("d959")),N=o.n(g);const I=N()(v,[["render",i],["__scopeId","data-v-45cde8b0"]]);t["default"]=I},e310:function(e,t,o){}}]);
//# sourceMappingURL=chunk-70e95d33.9329c688.js.map