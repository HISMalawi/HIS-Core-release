(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-8a6e8a76"],{"6d32":function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var r=n("d4ec"),a=n("bee2"),i=n("262e"),s=n("2caf"),u=(n("99af"),n("1c74")),c=function(e){Object(i["a"])(n,e);var t=Object(s["a"])(n);function n(){return Object(r["a"])(this,n),t.call(this)}return Object(a["a"])(n,null,[{key:"getAllArvRegimens",value:function(){return this.getJson("programs/".concat(this.getProgramID(),"/all_arv_regimens"))}},{key:"getRegimens",value:function(e){return this.getJson("programs/".concat(this.getProgramID(),"/regimens"),{patient_id:e})}},{key:"getRegimensByWeight",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return this.getJson("programs/".concat(this.getProgramID(),"/regimens"),{weight:e,tb_dosage:t})}},{key:"getCustomIngridients",value:function(){return this.getJson("programs/".concat(this.getProgramID(),"/custom_regimen_ingredients"))}},{key:"getCurrentRegimen",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.getSessionDate();return this.getJson("programs/".concat(this.getProgramID(),"/").concat(e),{date:t})}},{key:"getRegimenExtras",value:function(e,t){return this.getJson("programs/".concat(this.getProgramID(),"/regimen_extras"),{name:e,weight:t})}}]),n}(u["e"])},"71c3":function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var r=n("5530"),a=n("d4ec"),i=n("bee2"),s=n("262e"),u=n("2caf"),c=(n("d81d"),n("99af"),n("1c74")),o=function(e){Object(s["a"])(n,e);var t=Object(u["a"])(n);function n(){return Object(a["a"])(this,n),t.call(this)}return Object(i["a"])(n,null,[{key:"create",value:function(e){return this.postJson("drug_orders",e)}},{key:"updateDispensationOrders",value:function(e){var t=this;return this.postJson("dispensations",{program_id:this.getProgramID(),dispensations:e.map((function(e){return{date:t.getSessionDate(),drug_order_id:e["order_id"],quantity:e["quantity"]}}))})}},{key:"getDrugOrderHistory",value:function(e){return this.getJson("drug_orders",{patient_id:e})}},{key:"getDrugOrders",value:function(e){return this.getJson("drug_orders",{patient_id:e,date:this.getSessionDate(),program_id:this.getProgramID()})}},{key:"getAllDrugOrders",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1e3;return this.getJson("drug_orders",{patient_id:e,program_id:c["e"].getProgramID(),page_size:t})}},{key:"getLastDrugsReceived",value:function(e){return this.getJson("patients/".concat(e,"/last_drugs_received"),{date:this.getSessionDate(),program_id:this.getProgramID()})}},{key:"getDrugDosages",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.getSessionDate(),r={drug_id:t,date:n};return this.getJson("programs/".concat(this.getProgramID(),"/patients/").concat(e,"/drug_doses"),r)}},{key:"getOrderByPatient",value:function(e,t){return this.getJson("/drug_orders",Object(r["a"])({patient_id:e,program_id:this.getProgramID()},t))}}]),n}(c["e"])},dac2:function(e,t,n){"use strict";n.d(t,"a",(function(){return h}));var r,a=n("2909"),i=n("1da1"),s=n("d4ec"),u=n("bee2"),c=n("262e"),o=n("2caf"),g=(n("96cf"),n("d81d"),n("caad"),n("2532"),n("d3b7"),n("99af"),n("159b"),n("07ac"),n("4de4"),n("b0c0"),n("3ca3"),n("ddb0"),n("25f0"),n("71c3")),d=n("9283"),l=n("6d32"),p=n("2ef0"),f=n("cc6f");(function(e){e["CONTRAINDICATION"]="contraindication",e["SIDE_EFFECT"]="side_effect"})(r||(r={}));var h=function(e){Object(c["a"])(n,e);var t=Object(o["a"])(n);function n(e,r){var a;return Object(s["a"])(this,n),a=t.call(this,e,25,r),a.nextVisitInterval=0,a.fastTrack=!1,a.regimenExtras=[],a.fastTrackMedications=[],a.hangingPills=[],a.medicationOrders=[],a.treatmentState="",a.contraindications={},a.sideEffects={},a.tptPrescriptionCount=0,a.lastSideEffectDate="",a}return Object(u["a"])(n,[{key:"setNextVisitInterval",value:function(e){this.nextVisitInterval=e}},{key:"getHangingPills",value:function(){return this.hangingPills}},{key:"getMedicationOrders",value:function(){return this.medicationOrders.map((function(e){return f["a"].getCachedConceptName(e)}))}},{key:"getTptPrescriptionCount",value:function(){return this.tptPrescriptionCount}},{key:"getLastSideEffectDate",value:function(){return this.lastSideEffectDate}},{key:"getContraindications",value:function(){return this.contraindications}},{key:"getSideEffects",value:function(){return this.sideEffects}},{key:"getRegimenExtras",value:function(){return this.regimenExtras}},{key:"getPatientRegimens",value:function(){return l["a"].getRegimens(this.patientID)}},{key:"getARVs",value:function(){return l["a"].getJson("arv_drugs")}},{key:"getCustomIngridients",value:function(){return l["a"].getCustomIngridients()}},{key:"getFastTrackMedications",value:function(){return this.fastTrackMedications}},{key:"getTreatmentState",value:function(){return this.treatmentState}},{key:"isFastTrack",value:function(){return this.fastTrack}},{key:"medicationOrdersAvailable",value:function(){return!Object(p["isEmpty"])(this.medicationOrders)}},{key:"shouldPrescribeArvs",value:function(){var e=f["a"].getCachedConceptID("Antiretroviral drugs");return this.medicationOrders.includes(e)}},{key:"shouldPrescribeExtras",value:function(){var e=this,t=f["a"].getConceptsByCategory("art_extra_medication_order"),n=t.map((function(t){return e.medicationOrders.includes(t.concept_id)}));return n.some(Boolean)}},{key:"getRegimenStarterpack",value:function(e,t){var n={weight:t,regimen:e};return f["a"].getJson("programs/".concat(f["a"].getProgramID(),"/regimen_starter_packs"),n)}},{key:"getLvpDrugsByType",value:function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(t,n){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",f["a"].getJson("programs/".concat(f["a"].getProgramID(),"/regimens/").concat(n),{patient_id:this.patientID,lpv_drug_type:t}));case 1:case"end":return e.stop()}}),e,this)})));function t(t,n){return e.apply(this,arguments)}return t}()},{key:"loadContraindications",value:function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(){var t,n,r=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,f["a"].getConceptID("Contraindications");case 2:return t=e.sent,e.next=5,f["a"].getObs({concept_id:t,person_id:this.patientID});case 5:n=e.sent,n.forEach((function(e){var t=d["c"].toStandardHisFormat(e.obs_datetime);r.contraindications[t]||(r.contraindications[t]=[]);var n=f["a"].getCachedConceptName(e.value_coded);r.contraindications[t].push(n)}));case 7:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"loadDrugInduced",value:function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(){var t,n,r=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,f["a"].getConceptID("Drug induced");case 2:return t=e.sent,e.next=5,f["a"].getObs({concept_id:t,person_id:this.patientID});case 5:if(n=e.sent,n){e.next=8;break}return e.abrupt("return");case 8:n.forEach((function(e){var t=d["c"].toStandardHisFormat(e.obs_datetime);if(r.lastSideEffectDate||(r.lastSideEffectDate=t),e.value_drug&&e.value_coded){r.sideEffects[t]||(r.sideEffects[t]={}),r.sideEffects[t][e.value_drug]||(r.sideEffects[t][e.value_drug]=[]);var n=f["a"].getCachedConceptName(e.value_coded);r.sideEffects[t][e.value_drug].push(n)}}));case 9:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"loadTptPrescriptionCount",value:function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(){var t,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,f["a"].getJson("tpt_prescription_count",{patient_id:this.patientID,date:this.date});case 2:t=e.sent,t&&(n=t.count+1,this.tptPrescriptionCount=n>3?3:n);case 4:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"loadFastTrackStatus",value:function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(){var t,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,f["a"].getFirstValueCoded(this.patientID,"Fast track");case 2:return t=e.sent,e.next=5,f["a"].getConceptID("yes");case 5:n=e.sent,t&&(this.fastTrack=t===n);case 7:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"loadRegimenExtras",value:function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(){var t,n,r=arguments;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t=r.length>0&&void 0!==r[0]?r[0]:this.date,e.next=3,l["a"].getJson("programs/".concat(l["a"].getProgramID(),"/patients/").concat(this.patientID,"/dosages"),{date:t});case 3:n=e.sent,n&&(this.regimenExtras=Object.values(n));case 5:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"loadMedicationOrders",value:function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(){var t,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,f["a"].getConceptID("Medication orders");case 2:return t=e.sent,e.next=5,f["a"].getObs({concept_id:t,date:this.date,person_id:this.patientID,page_size:5});case 5:n=e.sent,this.medicationOrders=n.map((function(e){return e.value_coded}));case 7:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"loadHangingPills",value:function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,f["a"].getAll(this.patientID,"Pills brought");case 2:t=e.sent,t&&(this.hangingPills=t.filter((function(e){return e.value_numeric>=1&&e.order})).map((function(e){return e.order.drug_order.drug_inventory_id})));case 4:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"loadFastTrackMedications",value:function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(){var t,n,r=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,g["a"].getLastDrugsReceived(this.patientID);case 2:return t=e.sent,n=t.map(function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(t){var n,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=t.drug,e.next=3,g["a"].getDrugDosages(r.patientID,n.drug_id);case 3:return a=e.sent,e.abrupt("return",{drug_id:n.drug_id,drug_name:n.name,units:n.units,am:a.am,noon:a.noon,pm:a.pm,frequency:t.frequency});case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),e.next=6,Promise.all(n);case 6:this.fastTrackMedications=e.sent;case 7:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"loadTreatmentState",value:function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(){var t,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t={date:this.date},e.next=3,f["a"].getJson("programs/".concat(f["a"].getProgramID(),"/patients/").concat(this.patientID,"/status"),t);case 3:n=e.sent,n&&(this.treatmentState=n["status"]);case 5:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"findAndGroupDrugSideEffects",value:function(e){var t={};for(var n in this.sideEffects){var r=this.sideEffects[n];for(var i in r)e.includes(parseInt(i))&&(t[n]||(t[n]=[]),t[n]=[].concat(Object(a["a"])(t[n]),Object(a["a"])(r[i])))}return t}},{key:"calculatePillsPerDay",value:function(e,t,n){return parseFloat(e.toString())+t+n}},{key:"estimatePackSize",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=e*this.nextVisitInterval/t,r=Math.round(n);return r<=0&&(r+=1),r}},{key:"calculateDosage",value:function(e,t){var n=0;return 0===t&&(n=e),0==e&&(n=t),e>0&&t>0&&(n=(e+t)/2),n}},{key:"calculateEquivalentDosage",value:function(e,t){return e+t}},{key:"calculateDateFromInterval",value:function(){var e=new Date(this.date);return e.setDate(e.getDate()+this.nextVisitInterval),d["c"].toStandardHisFormat(e)}},{key:"getDrugPackSize",value:function(e){if(e.pack_size)return e.pack_size;try{return e.barcodes[0].tabs}catch(t){return 30}}},{key:"getInstructions",value:function(e,t,n,r){return"".concat(e," :- Morning: ").concat(t," ").concat(r,", Evening: ").concat(n," ").concat(r)}},{key:"toOrderObj",value:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"";return{drug_inventory_id:e,equivalent_daily_dose:this.calculateEquivalentDosage(r,a),start_date:this.date,auto_expire_date:this.calculateDateFromInterval(),units:n,instructions:this.getInstructions(t,r,a,n),dose:this.calculateDosage(r,a),frequency:i}}},{key:"getReasonForRegimenSwitch",value:function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,f["a"].getFirstValueText(this.patientID,"Reason for ARV switch");case 2:return t=e.sent,e.abrupt("return",t||"N/A");case 4:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"createDrugOrder",value:function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",g["a"].create({encounter_id:this.encounterID,drug_orders:t}));case 1:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"createHangingPillsObs",value:function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",this.saveValueTextObs("appointment type",t));case 1:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"createRegimenSwitchObs",value:function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",this.saveValueTextObs("Reason for ARV switch",t));case 1:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()}]),n}(f["a"])}}]);
//# sourceMappingURL=chunk-8a6e8a76.a6897d3e.js.map