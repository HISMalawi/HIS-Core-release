{"version":3,"sources":["webpack:///./src/components/DataViews/tables/v2PocDatatable/TableView.vue?4dbe","webpack:///./src/components/DrillPatientIds.vue?e0fe","webpack:///./src/components/DrillPatientIds.vue","webpack:///./src/components/DrillPatientIds.vue?c677","webpack:///./src/components/DataViews/tables/v2PocDatatable/TableView.vue?fd3b","webpack:///./node_modules/fuse.js/dist/fuse.esm.js","webpack:///./src/components/DataViews/tables/v2PocDatatable/TableView.vue","webpack:///./src/components/DataViews/tables/v2PocDatatable/TableView.vue?c2a8"],"names":["render","_ctx","_cache","$props","$setup","$data","$options","_component_v2Datatable","_resolveComponent","_component_ion_page","_openBlock","_createBlock","default","_withCtx","_createVNode","title","subtitle","columnData","reportData","columns","onFinish","rowsPerPage","ITEMS_PER_PAGE","_","cachedPatientIDs","defineComponent","props","type","String","patientIdentifiers","Object","Function","components","IonPage","v2Datatable","setup","ref","router","useRouter","label","exportable","tdClick","data","push","path","patient_id","value","watch","async","length","backlog","chunk","log","id","patient","Patientservice","findByID","getID","getNationalID","getGivenName","getFamilyName","toDate","getBirthdate","e","console","error","delayPromise","immediate","__exports__","_hoisted_1","key","_hoisted_2","class","_hoisted_3","_hoisted_4","_hoisted_5","_hoisted_6","_hoisted_7","_component_ion_img","_component_ion_thumbnail","_component_ion_title","_component_ion_icon","_component_ion_button","_component_ion_label","_component_ion_chip","_component_ion_buttons","_component_ion_toolbar","_component_ion_header","_component_ion_item","_component_ion_content","_component_ion_footer","_createElementBlock","_Fragment","logo","slot","src","_createCommentVNode","_createTextVNode","_toDisplayString","_createElementVNode","onConfigure","onClick","size","icon","document","searchTerm","$event","color","close","searchTable","search","onRefresh","sync","_renderList","column","index","item","i","colspan","span","thColspan","rowspan","thRowspan","sortColumn","lines","columnSorted","sortOrder","arrowUp","arrowDown","page","row","info","k","onClickTablecell","_normalizeClass","toCSV","toPDF","totalPages","first","disabled","currentPage","prev","canPrev","selectPage","next","canNext","last","finish","isArray","Array","getTag","INFINITY","baseToString","result","isString","isNumber","isBoolean","isObjectLike","isObject","isDefined","undefined","isBlank","trim","prototype","toString","call","INCORRECT_INDEX_TYPE","LOGICAL_SEARCH_INVALID_QUERY_FOR_KEY","PATTERN_LENGTH_TOO_LARGE","max","MISSING_KEY_PROPERTY","name","INVALID_KEY_WEIGHT_VALUE","hasOwn","hasOwnProperty","KeyStore","keys","this","_keys","_keyMap","totalWeight","forEach","obj","createKey","weight","keyId","JSON","stringify","getFn","createKeyPath","createKeyId","Error","split","join","get","list","arr","deepGet","len","MatchOptions","includeMatches","findAllMatches","minMatchCharLength","BasicOptions","isCaseSensitive","includeScore","shouldSort","sortFn","a","b","score","idx","FuzzyOptions","location","threshold","distance","AdvancedOptions","useExtendedSearch","ignoreLocation","ignoreFieldNorm","fieldNormWeight","Config","SPACE","norm","mantissa","cache","Map","m","Math","pow","numTokens","match","has","n","parseFloat","round","set","clear","FuseIndex","isCreated","setIndexRecords","docs","records","_keysMap","doc","docIndex","_addString","_addObject","splice","record","v","$","keyIndex","subRecords","stack","nestedArrIndex","pop","subRecord","createIndex","myIndex","setKeys","map","setSources","create","parseIndex","computeScore$1","pattern","errors","currentLocation","expectedLocation","accuracy","proximity","abs","convertMaskToIndices","matchmask","indices","start","end","MAX_BITS","text","patternAlphabet","patternLen","textLen","min","currentThreshold","bestLocation","computeMatches","matchMask","indexOf","lastBitArr","finalScore","binMax","mask","binMin","binMid","floor","bitArr","j","charMatch","charAt","isMatch","createPatternAlphabet","char","BitapSearch","options","toLowerCase","chunks","addChunk","startIndex","alphabet","remainder","substr","allIndices","totalScore","hasMatches","BaseMatch","getMatch","multiRegex","singleRegex","exp","matches","ExactMatch","super","InverseExactMatch","PrefixExactMatch","startsWith","InversePrefixExactMatch","SuffixExactMatch","endsWith","InverseSuffixExactMatch","FuzzyMatch","_bitapSearch","searchIn","IncludeMatch","searchers","searchersLen","SPACE_RE","OR_TOKEN","parseQuery","query","filter","results","queryItem","found","searcher","token","isMultiMatch","isSingleMatch","MultiMatchSet","Set","ExtendedSearch","numMatches","qLen","pLen","constructor","registeredSearchers","register","args","createSearcher","searcherClass","condition","LogicalOperator","AND","OR","KeyType","PATH","PATTERN","isExpression","isPath","isLeaf","convertToExplicit","parse","auto","isQueryPath","node","children","operator","computeScore","Number","EPSILON","transformMatches","refIndex","transformScore","transformers","transformer","Fuse","_keyStore","setCollection","_docs","_myIndex","add","predicate","removeAt","limit","_searchStringList","_searchObjectList","_searchLogical","sort","slice","expression","evaluate","_findMatches","getValueForItemAtKeyId","res","child","resultMap","expResults","version","config","IonImg","IonThumbnail","IonToolbar","IonItem","IonIcon","IonLabel","IonTitle","IonHeader","IonButton","IonFooter","IonContent","IonButtons","IonChip","required","enablePagination","Boolean","csvQuarter","route","computed","Img","pageComputedReportData","tableData","d","fuse","paginated","numericKeypad","num","parseInt","keyboard","helpText","FieldType","TT_TEXT","setTimeout","cell","getExpandedColumns","reduce","c","concat","col","prepExportObj","format","exportableColumns","canExport","every","headers","exportedValue","secondaryLabel","columnRefs","rows","allRows","includes","dataValue","filename","Service","getLocationName","getSessionDate","toTablePDF","toCsv","dayjs","getCoreVersion","getApiVersion","getSiteUUID","getUserName","mapcolumnValues","isEmpty","searchIndex","from","deep"],"mappings":"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","file":"js/chunk-0bf38393.e17d543a.js","sourcesContent":["export * from \"-!../../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../../../node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/index.js??ref--0-1!./TableView.vue?vue&type=style&index=0&id=ae31c05a&scoped=true&lang=css\"","import { resolveComponent as _resolveComponent, createVNode as _createVNode, withCtx as _withCtx, openBlock as _openBlock, createBlock as _createBlock } from \"vue\"\n\nexport function render(_ctx: any,_cache: any,$props: any,$setup: any,$data: any,$options: any) {\n  const _component_v2Datatable = _resolveComponent(\"v2Datatable\")!\n  const _component_ion_page = _resolveComponent(\"ion-page\")!\n\n  return (_openBlock(), _createBlock(_component_ion_page, null, {\n    default: _withCtx(() => [\n      _createVNode(_component_v2Datatable, {\n        title: _ctx.title,\n        subtitle: _ctx.subtitle,\n        columnData: _ctx.reportData,\n        columns: _ctx.columns,\n        \"on-finish\": _ctx.onFinish,\n        rowsPerPage: _ctx.ITEMS_PER_PAGE\n      }, null, 8, [\"title\", \"subtitle\", \"columnData\", \"columns\", \"on-finish\", \"rowsPerPage\"])\n    ]),\n    _: 1\n  }))\n}","\nimport { defineComponent, ref, PropType, watch } from 'vue';\nimport { IonPage } from \"@ionic/vue\"\nimport  v2Datatable from \"@/components/DataViews/tables/v2PocDatatable/TableView.vue\"\nimport { v2ColumnDataInterface, v2ColumnInterface } from '@/components/DataViews/tables/v2PocDatatable/types';\nimport { useRouter } from \"vue-router\"\nimport { chunk } from 'lodash';\nimport { delayPromise } from '@/utils/Timers';\nimport { Patientservice } from '@/services/patient_service';\nimport { toDate } from '@/utils/Strs';\n\nconst ITEMS_PER_PAGE = 20\nconst cachedPatientIDs: Record<number, any> = {}\nexport default defineComponent({ \n    props: {\n        title: {\n            type: String,\n            default: 'Drilldown'\n        },\n        patientIdentifiers: {\n            type: Object as PropType<number[]>\n        },\n        onFinish: {\n            type: Function\n        }\n    },\n    components: {\n        IonPage,\n        v2Datatable\n    },\n    setup(props) {\n        const subtitle = ref('-')\n        const reportData = ref<any>([])\n        const router = useRouter()\n        const columns: Array<v2ColumnInterface[]> = [\n            [\n                {\n                    label: 'National ID',\n                    ref: 'national_id'\n                },\n                {\n                    label: 'First name',\n                    ref: 'given_name'\n                },\n                {\n                    label: 'Last name',\n                    ref: 'family_name'\n                },\n                {\n                    label: 'Birthdate',\n                    ref: 'birthdate'\n                },\n                {\n                    label: 'Action',\n                    ref: 'patient_id',\n                    exportable: false,\n                    tdClick: ({data}: v2ColumnDataInterface) => router.push({ path: `/patient/dashboard/${data.patient_id}`}) ,\n                    value: () => 'View client'\n                }\n            ]\n        ]\n        watch(() => props.patientIdentifiers, async (data) => {\n            reportData.value = []\n            subtitle.value = `Total: 0`\n            if (!(data && data.length)) return\n            const backlog = chunk(data, ITEMS_PER_PAGE)\n            for(const log of backlog) {\n                for (const id of log) {\n                    try {\n                        let patient = null\n                        if (cachedPatientIDs[id]) {\n                            patient = cachedPatientIDs[id]\n                        } else {\n                            patient = new Patientservice((await Patientservice.findByID(id)))\n                            cachedPatientIDs[id] = patient\n                        }\n                        reportData.value.push({\n                            'patient_id': patient.getID(),\n                            'national_id': patient.getNationalID(),\n                            'given_name': patient.getGivenName(),\n                            'family_name': patient.getFamilyName(),\n                            'birthdate': toDate(patient.getBirthdate())\n                        })\n                    } catch (e) {\n                        console.error(e)\n                        reportData.value.push({})\n                    }\n                    subtitle.value = `Total: ${reportData.value.length} of ${(data||[]).length}`\n                }\n                await delayPromise(500)\n            }\n        }, { immediate: true })\n\n        return  {\n            columns,\n            subtitle,\n            reportData,\n            ITEMS_PER_PAGE\n        }\n    }\n})\n","import { render } from \"./DrillPatientIds.vue?vue&type=template&id=77912af7&ts=true\"\nimport script from \"./DrillPatientIds.vue?vue&type=script&lang=ts\"\nexport * from \"./DrillPatientIds.vue?vue&type=script&lang=ts\"\n\nimport exportComponent from \"/home/andrew-dev/Projects/HIS-Core/node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","import { resolveComponent as _resolveComponent, createVNode as _createVNode, withCtx as _withCtx, openBlock as _openBlock, createBlock as _createBlock, createCommentVNode as _createCommentVNode, toDisplayString as _toDisplayString, createElementBlock as _createElementBlock, createElementVNode as _createElementVNode, createTextVNode as _createTextVNode, renderList as _renderList, Fragment as _Fragment, normalizeClass as _normalizeClass, pushScopeId as _pushScopeId, popScopeId as _popScopeId } from \"vue\"\n\nconst _withScopeId = n => (_pushScopeId(\"data-v-ae31c05a\"),n=n(),_popScopeId(),n)\nconst _hoisted_1 = { key: 0 }\nconst _hoisted_2 = { class: \"his-sm-text\" }\nconst _hoisted_3 = { class: \"art-report-theme\" }\nconst _hoisted_4 = { class: \"stick-report-header\" }\nconst _hoisted_5 = [\"colspan\", \"rowspan\", \"onClick\"]\nconst _hoisted_6 = [\"onClick\"]\nconst _hoisted_7 = { class: \"his-sm-text\" }\n\nexport function render(_ctx: any,_cache: any,$props: any,$setup: any,$data: any,$options: any) {\n  const _component_ion_img = _resolveComponent(\"ion-img\")!\n  const _component_ion_thumbnail = _resolveComponent(\"ion-thumbnail\")!\n  const _component_ion_title = _resolveComponent(\"ion-title\")!\n  const _component_ion_icon = _resolveComponent(\"ion-icon\")!\n  const _component_ion_button = _resolveComponent(\"ion-button\")!\n  const _component_ion_label = _resolveComponent(\"ion-label\")!\n  const _component_ion_chip = _resolveComponent(\"ion-chip\")!\n  const _component_ion_buttons = _resolveComponent(\"ion-buttons\")!\n  const _component_ion_toolbar = _resolveComponent(\"ion-toolbar\")!\n  const _component_ion_header = _resolveComponent(\"ion-header\")!\n  const _component_ion_item = _resolveComponent(\"ion-item\")!\n  const _component_ion_content = _resolveComponent(\"ion-content\")!\n  const _component_ion_footer = _resolveComponent(\"ion-footer\")!\n\n  return (_openBlock(), _createElementBlock(_Fragment, null, [\n    _createVNode(_component_ion_header, null, {\n      default: _withCtx(() => [\n        _createVNode(_component_ion_toolbar, null, {\n          default: _withCtx(() => [\n            (_ctx.logo)\n              ? (_openBlock(), _createBlock(_component_ion_thumbnail, {\n                  key: 0,\n                  slot: \"start\"\n                }, {\n                  default: _withCtx(() => [\n                    _createVNode(_component_ion_img, { src: _ctx.logo }, null, 8, [\"src\"])\n                  ]),\n                  _: 1\n                }))\n              : _createCommentVNode(\"\", true),\n            _createVNode(_component_ion_title, { class: \"his-md-text\" }, {\n              default: _withCtx(() => [\n                _createTextVNode(_toDisplayString(_ctx.title) + \" \", 1),\n                (_ctx.subtitle)\n                  ? (_openBlock(), _createElementBlock(\"br\", _hoisted_1))\n                  : _createCommentVNode(\"\", true),\n                _createElementVNode(\"span\", _hoisted_2, _toDisplayString(_ctx.subtitle), 1)\n              ]),\n              _: 1\n            }),\n            _createVNode(_component_ion_buttons, { slot: \"end\" }, {\n              default: _withCtx(() => [\n                (typeof _ctx.onConfigure === 'function')\n                  ? (_openBlock(), _createBlock(_component_ion_button, {\n                      key: 0,\n                      onClick: _ctx.onConfigure\n                    }, {\n                      default: _withCtx(() => [\n                        _createVNode(_component_ion_icon, {\n                          size: \"large\",\n                          icon: _ctx.document\n                        }, null, 8, [\"icon\"])\n                      ]),\n                      _: 1\n                    }, 8, [\"onClick\"]))\n                  : _createCommentVNode(\"\", true),\n                (_ctx.searchTerm)\n                  ? (_openBlock(), _createBlock(_component_ion_chip, {\n                      key: 1,\n                      onClick: _cache[0] || (_cache[0] = ($event: any) => (_ctx.searchTerm = '')),\n                      class: \"his-md-text\",\n                      color: \"warning\"\n                    }, {\n                      default: _withCtx(() => [\n                        _createVNode(_component_ion_label, null, {\n                          default: _withCtx(() => [\n                            _createTextVNode(_toDisplayString(_ctx.searchTerm), 1)\n                          ]),\n                          _: 1\n                        }),\n                        _createVNode(_component_ion_icon, { icon: _ctx.close }, null, 8, [\"icon\"])\n                      ]),\n                      _: 1\n                    }))\n                  : _createCommentVNode(\"\", true),\n                _createVNode(_component_ion_button, {\n                  onClick: _ctx.searchTable,\n                  size: \"large\"\n                }, {\n                  default: _withCtx(() => [\n                    _createVNode(_component_ion_icon, {\n                      size: \"large\",\n                      icon: _ctx.search\n                    }, null, 8, [\"icon\"])\n                  ]),\n                  _: 1\n                }, 8, [\"onClick\"]),\n                (typeof _ctx.onRefresh === 'function')\n                  ? (_openBlock(), _createBlock(_component_ion_button, {\n                      key: 2,\n                      onClick: _ctx.onRefresh,\n                      color: \"success\",\n                      size: \"large\"\n                    }, {\n                      default: _withCtx(() => [\n                        _createVNode(_component_ion_icon, {\n                          size: \"large\",\n                          icon: _ctx.sync\n                        }, null, 8, [\"icon\"])\n                      ]),\n                      _: 1\n                    }, 8, [\"onClick\"]))\n                  : _createCommentVNode(\"\", true)\n              ]),\n              _: 1\n            })\n          ]),\n          _: 1\n        })\n      ]),\n      _: 1\n    }),\n    _createVNode(_component_ion_content, {\n      \"scroll-y\": \"\",\n      \"scroll-x\": \"\"\n    }, {\n      default: _withCtx(() => [\n        _createElementVNode(\"table\", _hoisted_3, [\n          _createElementVNode(\"thead\", _hoisted_4, [\n            (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(_ctx.columns, (column, index) => {\n              return (_openBlock(), _createElementBlock(\"tr\", { key: index }, [\n                (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(column, (item, i) => {\n                  return (_openBlock(), _createElementBlock(\"th\", {\n                    key: i,\n                    colspan: item?.span?.thColspan || 1,\n                    rowspan: item?.span?.thRowspan || 1,\n                    onClick: ($event: any) => (_ctx.sortColumn(item.ref))\n                  }, [\n                    _createVNode(_component_ion_item, { lines: \"none\" }, {\n                      default: _withCtx(() => [\n                        (_ctx.columnSorted && _ctx.columnSorted === item.ref)\n                          ? (_openBlock(), _createBlock(_component_ion_icon, {\n                              key: 0,\n                              icon: _ctx.sortOrder === 'asc' ? _ctx.arrowUp : _ctx.arrowDown\n                            }, null, 8, [\"icon\"]))\n                          : _createCommentVNode(\"\", true),\n                        _createVNode(_component_ion_label, { class: \"ion-text-center\" }, {\n                          default: _withCtx(() => [\n                            _createElementVNode(\"b\", null, _toDisplayString(item.label), 1)\n                          ]),\n                          _: 2\n                        }, 1024)\n                      ]),\n                      _: 2\n                    }, 1024)\n                  ], 8, _hoisted_5))\n                }), 128))\n              ]))\n            }), 128))\n          ]),\n          _createElementVNode(\"tbody\", null, [\n            (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(_ctx.page, (data, i) => {\n              return (_openBlock(), _createElementBlock(\"tr\", { key: i }, [\n                (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(data.row, (info, k) => {\n                  return (_openBlock(), _createElementBlock(\"td\", {\n                    key: k,\n                    onClick: () => _ctx.onClickTablecell(info),\n                    class: _normalizeClass({\n\t\t\t\t\t\t'clickable-cell': info?.column?.tdClick\n\t\t\t\t\t})\n                  }, [\n                    _createElementVNode(\"span\", _hoisted_7, _toDisplayString(info.value), 1)\n                  ], 10, _hoisted_6))\n                }), 128))\n              ]))\n            }), 128))\n          ])\n        ])\n      ]),\n      _: 1\n    }),\n    _createVNode(_component_ion_footer, null, {\n      default: _withCtx(() => [\n        _createVNode(_component_ion_toolbar, { color: \"dark\" }, {\n          default: _withCtx(() => [\n            _createVNode(_component_ion_button, {\n              onClick: _cache[1] || (_cache[1] = ($event: any) => (_ctx.toCSV())),\n              size: \"large\"\n            }, {\n              default: _withCtx(() => [\n                _createTextVNode(\" CSV \")\n              ]),\n              _: 1\n            }),\n            _createVNode(_component_ion_button, {\n              onClick: _cache[2] || (_cache[2] = ($event: any) => (_ctx.toPDF())),\n              size: \"large\"\n            }, {\n              default: _withCtx(() => [\n                _createTextVNode(\" PDF \")\n              ]),\n              _: 1\n            }),\n            (_ctx.totalPages > 1)\n              ? (_openBlock(), _createBlock(_component_ion_button, {\n                  key: 0,\n                  onClick: _ctx.first,\n                  disabled: _ctx.currentPage === 0 || _ctx.totalPages <= 2,\n                  size: \"large\",\n                  slot: \"end\"\n                }, {\n                  default: _withCtx(() => [\n                    _createTextVNode(\" First \")\n                  ]),\n                  _: 1\n                }, 8, [\"onClick\", \"disabled\"]))\n              : _createCommentVNode(\"\", true),\n            (_ctx.totalPages > 1)\n              ? (_openBlock(), _createBlock(_component_ion_button, {\n                  key: 1,\n                  onClick: _ctx.prev,\n                  disabled: !_ctx.canPrev,\n                  color: \"light\",\n                  size: \"large\",\n                  slot: \"end\"\n                }, {\n                  default: _withCtx(() => [\n                    _createTextVNode(\" Prev \")\n                  ]),\n                  _: 1\n                }, 8, [\"onClick\", \"disabled\"]))\n              : _createCommentVNode(\"\", true),\n            (_ctx.totalPages > 1)\n              ? (_openBlock(), _createBlock(_component_ion_button, {\n                  key: 2,\n                  onClick: _ctx.selectPage,\n                  size: \"large\",\n                  slot: \"end\",\n                  color: \"light\"\n                }, {\n                  default: _withCtx(() => [\n                    _createTextVNode(_toDisplayString(_ctx.currentPage) + \" / \" + _toDisplayString(_ctx.totalPages - 1), 1)\n                  ]),\n                  _: 1\n                }, 8, [\"onClick\"]))\n              : _createCommentVNode(\"\", true),\n            (_ctx.totalPages > 1)\n              ? (_openBlock(), _createBlock(_component_ion_button, {\n                  key: 3,\n                  onClick: _ctx.next,\n                  disabled: !_ctx.canNext,\n                  color: \"light\",\n                  size: \"large\",\n                  slot: \"end\"\n                }, {\n                  default: _withCtx(() => [\n                    _createTextVNode(\" Next \")\n                  ]),\n                  _: 1\n                }, 8, [\"onClick\", \"disabled\"]))\n              : _createCommentVNode(\"\", true),\n            (_ctx.totalPages > 1)\n              ? (_openBlock(), _createBlock(_component_ion_button, {\n                  key: 4,\n                  onClick: _ctx.last,\n                  disabled: _ctx.currentPage + 1 >= _ctx.totalPages || _ctx.totalPages <= 2,\n                  size: \"large\",\n                  slot: \"end\"\n                }, {\n                  default: _withCtx(() => [\n                    _createTextVNode(\" Last \")\n                  ]),\n                  _: 1\n                }, 8, [\"onClick\", \"disabled\"]))\n              : _createCommentVNode(\"\", true),\n            _createVNode(_component_ion_button, {\n              onClick: _ctx.finish,\n              color: \"success\",\n              size: \"large\",\n              slot: \"end\"\n            }, {\n              default: _withCtx(() => [\n                _createTextVNode(\" Finish \")\n              ]),\n              _: 1\n            }, 8, [\"onClick\"])\n          ]),\n          _: 1\n        })\n      ]),\n      _: 1\n    })\n  ], 64))\n}","/**\n * Fuse.js v6.6.2 - Lightweight fuzzy-search (http://fusejs.io)\n *\n * Copyright (c) 2022 Kiro Risk (http://kiro.me)\n * All Rights Reserved. Apache Software License 2.0\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n */\n\nfunction isArray(value) {\n  return !Array.isArray\n    ? getTag(value) === '[object Array]'\n    : Array.isArray(value)\n}\n\n// Adapted from: https://github.com/lodash/lodash/blob/master/.internal/baseToString.js\nconst INFINITY = 1 / 0;\nfunction baseToString(value) {\n  // Exit early for strings to avoid a performance hit in some environments.\n  if (typeof value == 'string') {\n    return value\n  }\n  let result = value + '';\n  return result == '0' && 1 / value == -INFINITY ? '-0' : result\n}\n\nfunction toString(value) {\n  return value == null ? '' : baseToString(value)\n}\n\nfunction isString(value) {\n  return typeof value === 'string'\n}\n\nfunction isNumber(value) {\n  return typeof value === 'number'\n}\n\n// Adapted from: https://github.com/lodash/lodash/blob/master/isBoolean.js\nfunction isBoolean(value) {\n  return (\n    value === true ||\n    value === false ||\n    (isObjectLike(value) && getTag(value) == '[object Boolean]')\n  )\n}\n\nfunction isObject(value) {\n  return typeof value === 'object'\n}\n\n// Checks if `value` is object-like.\nfunction isObjectLike(value) {\n  return isObject(value) && value !== null\n}\n\nfunction isDefined(value) {\n  return value !== undefined && value !== null\n}\n\nfunction isBlank(value) {\n  return !value.trim().length\n}\n\n// Gets the `toStringTag` of `value`.\n// Adapted from: https://github.com/lodash/lodash/blob/master/.internal/getTag.js\nfunction getTag(value) {\n  return value == null\n    ? value === undefined\n      ? '[object Undefined]'\n      : '[object Null]'\n    : Object.prototype.toString.call(value)\n}\n\nconst EXTENDED_SEARCH_UNAVAILABLE = 'Extended search is not available';\n\nconst INCORRECT_INDEX_TYPE = \"Incorrect 'index' type\";\n\nconst LOGICAL_SEARCH_INVALID_QUERY_FOR_KEY = (key) =>\n  `Invalid value for key ${key}`;\n\nconst PATTERN_LENGTH_TOO_LARGE = (max) =>\n  `Pattern length exceeds max of ${max}.`;\n\nconst MISSING_KEY_PROPERTY = (name) => `Missing ${name} property in key`;\n\nconst INVALID_KEY_WEIGHT_VALUE = (key) =>\n  `Property 'weight' in key '${key}' must be a positive integer`;\n\nconst hasOwn = Object.prototype.hasOwnProperty;\n\nclass KeyStore {\n  constructor(keys) {\n    this._keys = [];\n    this._keyMap = {};\n\n    let totalWeight = 0;\n\n    keys.forEach((key) => {\n      let obj = createKey(key);\n\n      totalWeight += obj.weight;\n\n      this._keys.push(obj);\n      this._keyMap[obj.id] = obj;\n\n      totalWeight += obj.weight;\n    });\n\n    // Normalize weights so that their sum is equal to 1\n    this._keys.forEach((key) => {\n      key.weight /= totalWeight;\n    });\n  }\n  get(keyId) {\n    return this._keyMap[keyId]\n  }\n  keys() {\n    return this._keys\n  }\n  toJSON() {\n    return JSON.stringify(this._keys)\n  }\n}\n\nfunction createKey(key) {\n  let path = null;\n  let id = null;\n  let src = null;\n  let weight = 1;\n  let getFn = null;\n\n  if (isString(key) || isArray(key)) {\n    src = key;\n    path = createKeyPath(key);\n    id = createKeyId(key);\n  } else {\n    if (!hasOwn.call(key, 'name')) {\n      throw new Error(MISSING_KEY_PROPERTY('name'))\n    }\n\n    const name = key.name;\n    src = name;\n\n    if (hasOwn.call(key, 'weight')) {\n      weight = key.weight;\n\n      if (weight <= 0) {\n        throw new Error(INVALID_KEY_WEIGHT_VALUE(name))\n      }\n    }\n\n    path = createKeyPath(name);\n    id = createKeyId(name);\n    getFn = key.getFn;\n  }\n\n  return { path, id, weight, src, getFn }\n}\n\nfunction createKeyPath(key) {\n  return isArray(key) ? key : key.split('.')\n}\n\nfunction createKeyId(key) {\n  return isArray(key) ? key.join('.') : key\n}\n\nfunction get(obj, path) {\n  let list = [];\n  let arr = false;\n\n  const deepGet = (obj, path, index) => {\n    if (!isDefined(obj)) {\n      return\n    }\n    if (!path[index]) {\n      // If there's no path left, we've arrived at the object we care about.\n      list.push(obj);\n    } else {\n      let key = path[index];\n\n      const value = obj[key];\n\n      if (!isDefined(value)) {\n        return\n      }\n\n      // If we're at the last value in the path, and if it's a string/number/bool,\n      // add it to the list\n      if (\n        index === path.length - 1 &&\n        (isString(value) || isNumber(value) || isBoolean(value))\n      ) {\n        list.push(toString(value));\n      } else if (isArray(value)) {\n        arr = true;\n        // Search each item in the array.\n        for (let i = 0, len = value.length; i < len; i += 1) {\n          deepGet(value[i], path, index + 1);\n        }\n      } else if (path.length) {\n        // An object. Recurse further.\n        deepGet(value, path, index + 1);\n      }\n    }\n  };\n\n  // Backwards compatibility (since path used to be a string)\n  deepGet(obj, isString(path) ? path.split('.') : path, 0);\n\n  return arr ? list : list[0]\n}\n\nconst MatchOptions = {\n  // Whether the matches should be included in the result set. When `true`, each record in the result\n  // set will include the indices of the matched characters.\n  // These can consequently be used for highlighting purposes.\n  includeMatches: false,\n  // When `true`, the matching function will continue to the end of a search pattern even if\n  // a perfect match has already been located in the string.\n  findAllMatches: false,\n  // Minimum number of characters that must be matched before a result is considered a match\n  minMatchCharLength: 1\n};\n\nconst BasicOptions = {\n  // When `true`, the algorithm continues searching to the end of the input even if a perfect\n  // match is found before the end of the same input.\n  isCaseSensitive: false,\n  // When true, the matching function will continue to the end of a search pattern even if\n  includeScore: false,\n  // List of properties that will be searched. This also supports nested properties.\n  keys: [],\n  // Whether to sort the result list, by score\n  shouldSort: true,\n  // Default sort function: sort by ascending score, ascending index\n  sortFn: (a, b) =>\n    a.score === b.score ? (a.idx < b.idx ? -1 : 1) : a.score < b.score ? -1 : 1\n};\n\nconst FuzzyOptions = {\n  // Approximately where in the text is the pattern expected to be found?\n  location: 0,\n  // At what point does the match algorithm give up. A threshold of '0.0' requires a perfect match\n  // (of both letters and location), a threshold of '1.0' would match anything.\n  threshold: 0.6,\n  // Determines how close the match must be to the fuzzy location (specified above).\n  // An exact letter match which is 'distance' characters away from the fuzzy location\n  // would score as a complete mismatch. A distance of '0' requires the match be at\n  // the exact location specified, a threshold of '1000' would require a perfect match\n  // to be within 800 characters of the fuzzy location to be found using a 0.8 threshold.\n  distance: 100\n};\n\nconst AdvancedOptions = {\n  // When `true`, it enables the use of unix-like search commands\n  useExtendedSearch: false,\n  // The get function to use when fetching an object's properties.\n  // The default will search nested paths *ie foo.bar.baz*\n  getFn: get,\n  // When `true`, search will ignore `location` and `distance`, so it won't matter\n  // where in the string the pattern appears.\n  // More info: https://fusejs.io/concepts/scoring-theory.html#fuzziness-score\n  ignoreLocation: false,\n  // When `true`, the calculation for the relevance score (used for sorting) will\n  // ignore the field-length norm.\n  // More info: https://fusejs.io/concepts/scoring-theory.html#field-length-norm\n  ignoreFieldNorm: false,\n  // The weight to determine how much field length norm effects scoring.\n  fieldNormWeight: 1\n};\n\nvar Config = {\n  ...BasicOptions,\n  ...MatchOptions,\n  ...FuzzyOptions,\n  ...AdvancedOptions\n};\n\nconst SPACE = /[^ ]+/g;\n\n// Field-length norm: the shorter the field, the higher the weight.\n// Set to 3 decimals to reduce index size.\nfunction norm(weight = 1, mantissa = 3) {\n  const cache = new Map();\n  const m = Math.pow(10, mantissa);\n\n  return {\n    get(value) {\n      const numTokens = value.match(SPACE).length;\n\n      if (cache.has(numTokens)) {\n        return cache.get(numTokens)\n      }\n\n      // Default function is 1/sqrt(x), weight makes that variable\n      const norm = 1 / Math.pow(numTokens, 0.5 * weight);\n\n      // In place of `toFixed(mantissa)`, for faster computation\n      const n = parseFloat(Math.round(norm * m) / m);\n\n      cache.set(numTokens, n);\n\n      return n\n    },\n    clear() {\n      cache.clear();\n    }\n  }\n}\n\nclass FuseIndex {\n  constructor({\n    getFn = Config.getFn,\n    fieldNormWeight = Config.fieldNormWeight\n  } = {}) {\n    this.norm = norm(fieldNormWeight, 3);\n    this.getFn = getFn;\n    this.isCreated = false;\n\n    this.setIndexRecords();\n  }\n  setSources(docs = []) {\n    this.docs = docs;\n  }\n  setIndexRecords(records = []) {\n    this.records = records;\n  }\n  setKeys(keys = []) {\n    this.keys = keys;\n    this._keysMap = {};\n    keys.forEach((key, idx) => {\n      this._keysMap[key.id] = idx;\n    });\n  }\n  create() {\n    if (this.isCreated || !this.docs.length) {\n      return\n    }\n\n    this.isCreated = true;\n\n    // List is Array<String>\n    if (isString(this.docs[0])) {\n      this.docs.forEach((doc, docIndex) => {\n        this._addString(doc, docIndex);\n      });\n    } else {\n      // List is Array<Object>\n      this.docs.forEach((doc, docIndex) => {\n        this._addObject(doc, docIndex);\n      });\n    }\n\n    this.norm.clear();\n  }\n  // Adds a doc to the end of the index\n  add(doc) {\n    const idx = this.size();\n\n    if (isString(doc)) {\n      this._addString(doc, idx);\n    } else {\n      this._addObject(doc, idx);\n    }\n  }\n  // Removes the doc at the specified index of the index\n  removeAt(idx) {\n    this.records.splice(idx, 1);\n\n    // Change ref index of every subsquent doc\n    for (let i = idx, len = this.size(); i < len; i += 1) {\n      this.records[i].i -= 1;\n    }\n  }\n  getValueForItemAtKeyId(item, keyId) {\n    return item[this._keysMap[keyId]]\n  }\n  size() {\n    return this.records.length\n  }\n  _addString(doc, docIndex) {\n    if (!isDefined(doc) || isBlank(doc)) {\n      return\n    }\n\n    let record = {\n      v: doc,\n      i: docIndex,\n      n: this.norm.get(doc)\n    };\n\n    this.records.push(record);\n  }\n  _addObject(doc, docIndex) {\n    let record = { i: docIndex, $: {} };\n\n    // Iterate over every key (i.e, path), and fetch the value at that key\n    this.keys.forEach((key, keyIndex) => {\n      let value = key.getFn ? key.getFn(doc) : this.getFn(doc, key.path);\n\n      if (!isDefined(value)) {\n        return\n      }\n\n      if (isArray(value)) {\n        let subRecords = [];\n        const stack = [{ nestedArrIndex: -1, value }];\n\n        while (stack.length) {\n          const { nestedArrIndex, value } = stack.pop();\n\n          if (!isDefined(value)) {\n            continue\n          }\n\n          if (isString(value) && !isBlank(value)) {\n            let subRecord = {\n              v: value,\n              i: nestedArrIndex,\n              n: this.norm.get(value)\n            };\n\n            subRecords.push(subRecord);\n          } else if (isArray(value)) {\n            value.forEach((item, k) => {\n              stack.push({\n                nestedArrIndex: k,\n                value: item\n              });\n            });\n          } else ;\n        }\n        record.$[keyIndex] = subRecords;\n      } else if (isString(value) && !isBlank(value)) {\n        let subRecord = {\n          v: value,\n          n: this.norm.get(value)\n        };\n\n        record.$[keyIndex] = subRecord;\n      }\n    });\n\n    this.records.push(record);\n  }\n  toJSON() {\n    return {\n      keys: this.keys,\n      records: this.records\n    }\n  }\n}\n\nfunction createIndex(\n  keys,\n  docs,\n  { getFn = Config.getFn, fieldNormWeight = Config.fieldNormWeight } = {}\n) {\n  const myIndex = new FuseIndex({ getFn, fieldNormWeight });\n  myIndex.setKeys(keys.map(createKey));\n  myIndex.setSources(docs);\n  myIndex.create();\n  return myIndex\n}\n\nfunction parseIndex(\n  data,\n  { getFn = Config.getFn, fieldNormWeight = Config.fieldNormWeight } = {}\n) {\n  const { keys, records } = data;\n  const myIndex = new FuseIndex({ getFn, fieldNormWeight });\n  myIndex.setKeys(keys);\n  myIndex.setIndexRecords(records);\n  return myIndex\n}\n\nfunction computeScore$1(\n  pattern,\n  {\n    errors = 0,\n    currentLocation = 0,\n    expectedLocation = 0,\n    distance = Config.distance,\n    ignoreLocation = Config.ignoreLocation\n  } = {}\n) {\n  const accuracy = errors / pattern.length;\n\n  if (ignoreLocation) {\n    return accuracy\n  }\n\n  const proximity = Math.abs(expectedLocation - currentLocation);\n\n  if (!distance) {\n    // Dodge divide by zero error.\n    return proximity ? 1.0 : accuracy\n  }\n\n  return accuracy + proximity / distance\n}\n\nfunction convertMaskToIndices(\n  matchmask = [],\n  minMatchCharLength = Config.minMatchCharLength\n) {\n  let indices = [];\n  let start = -1;\n  let end = -1;\n  let i = 0;\n\n  for (let len = matchmask.length; i < len; i += 1) {\n    let match = matchmask[i];\n    if (match && start === -1) {\n      start = i;\n    } else if (!match && start !== -1) {\n      end = i - 1;\n      if (end - start + 1 >= minMatchCharLength) {\n        indices.push([start, end]);\n      }\n      start = -1;\n    }\n  }\n\n  // (i-1 - start) + 1 => i - start\n  if (matchmask[i - 1] && i - start >= minMatchCharLength) {\n    indices.push([start, i - 1]);\n  }\n\n  return indices\n}\n\n// Machine word size\nconst MAX_BITS = 32;\n\nfunction search(\n  text,\n  pattern,\n  patternAlphabet,\n  {\n    location = Config.location,\n    distance = Config.distance,\n    threshold = Config.threshold,\n    findAllMatches = Config.findAllMatches,\n    minMatchCharLength = Config.minMatchCharLength,\n    includeMatches = Config.includeMatches,\n    ignoreLocation = Config.ignoreLocation\n  } = {}\n) {\n  if (pattern.length > MAX_BITS) {\n    throw new Error(PATTERN_LENGTH_TOO_LARGE(MAX_BITS))\n  }\n\n  const patternLen = pattern.length;\n  // Set starting location at beginning text and initialize the alphabet.\n  const textLen = text.length;\n  // Handle the case when location > text.length\n  const expectedLocation = Math.max(0, Math.min(location, textLen));\n  // Highest score beyond which we give up.\n  let currentThreshold = threshold;\n  // Is there a nearby exact match? (speedup)\n  let bestLocation = expectedLocation;\n\n  // Performance: only computer matches when the minMatchCharLength > 1\n  // OR if `includeMatches` is true.\n  const computeMatches = minMatchCharLength > 1 || includeMatches;\n  // A mask of the matches, used for building the indices\n  const matchMask = computeMatches ? Array(textLen) : [];\n\n  let index;\n\n  // Get all exact matches, here for speed up\n  while ((index = text.indexOf(pattern, bestLocation)) > -1) {\n    let score = computeScore$1(pattern, {\n      currentLocation: index,\n      expectedLocation,\n      distance,\n      ignoreLocation\n    });\n\n    currentThreshold = Math.min(score, currentThreshold);\n    bestLocation = index + patternLen;\n\n    if (computeMatches) {\n      let i = 0;\n      while (i < patternLen) {\n        matchMask[index + i] = 1;\n        i += 1;\n      }\n    }\n  }\n\n  // Reset the best location\n  bestLocation = -1;\n\n  let lastBitArr = [];\n  let finalScore = 1;\n  let binMax = patternLen + textLen;\n\n  const mask = 1 << (patternLen - 1);\n\n  for (let i = 0; i < patternLen; i += 1) {\n    // Scan for the best match; each iteration allows for one more error.\n    // Run a binary search to determine how far from the match location we can stray\n    // at this error level.\n    let binMin = 0;\n    let binMid = binMax;\n\n    while (binMin < binMid) {\n      const score = computeScore$1(pattern, {\n        errors: i,\n        currentLocation: expectedLocation + binMid,\n        expectedLocation,\n        distance,\n        ignoreLocation\n      });\n\n      if (score <= currentThreshold) {\n        binMin = binMid;\n      } else {\n        binMax = binMid;\n      }\n\n      binMid = Math.floor((binMax - binMin) / 2 + binMin);\n    }\n\n    // Use the result from this iteration as the maximum for the next.\n    binMax = binMid;\n\n    let start = Math.max(1, expectedLocation - binMid + 1);\n    let finish = findAllMatches\n      ? textLen\n      : Math.min(expectedLocation + binMid, textLen) + patternLen;\n\n    // Initialize the bit array\n    let bitArr = Array(finish + 2);\n\n    bitArr[finish + 1] = (1 << i) - 1;\n\n    for (let j = finish; j >= start; j -= 1) {\n      let currentLocation = j - 1;\n      let charMatch = patternAlphabet[text.charAt(currentLocation)];\n\n      if (computeMatches) {\n        // Speed up: quick bool to int conversion (i.e, `charMatch ? 1 : 0`)\n        matchMask[currentLocation] = +!!charMatch;\n      }\n\n      // First pass: exact match\n      bitArr[j] = ((bitArr[j + 1] << 1) | 1) & charMatch;\n\n      // Subsequent passes: fuzzy match\n      if (i) {\n        bitArr[j] |=\n          ((lastBitArr[j + 1] | lastBitArr[j]) << 1) | 1 | lastBitArr[j + 1];\n      }\n\n      if (bitArr[j] & mask) {\n        finalScore = computeScore$1(pattern, {\n          errors: i,\n          currentLocation,\n          expectedLocation,\n          distance,\n          ignoreLocation\n        });\n\n        // This match will almost certainly be better than any existing match.\n        // But check anyway.\n        if (finalScore <= currentThreshold) {\n          // Indeed it is\n          currentThreshold = finalScore;\n          bestLocation = currentLocation;\n\n          // Already passed `loc`, downhill from here on in.\n          if (bestLocation <= expectedLocation) {\n            break\n          }\n\n          // When passing `bestLocation`, don't exceed our current distance from `expectedLocation`.\n          start = Math.max(1, 2 * expectedLocation - bestLocation);\n        }\n      }\n    }\n\n    // No hope for a (better) match at greater error levels.\n    const score = computeScore$1(pattern, {\n      errors: i + 1,\n      currentLocation: expectedLocation,\n      expectedLocation,\n      distance,\n      ignoreLocation\n    });\n\n    if (score > currentThreshold) {\n      break\n    }\n\n    lastBitArr = bitArr;\n  }\n\n  const result = {\n    isMatch: bestLocation >= 0,\n    // Count exact matches (those with a score of 0) to be \"almost\" exact\n    score: Math.max(0.001, finalScore)\n  };\n\n  if (computeMatches) {\n    const indices = convertMaskToIndices(matchMask, minMatchCharLength);\n    if (!indices.length) {\n      result.isMatch = false;\n    } else if (includeMatches) {\n      result.indices = indices;\n    }\n  }\n\n  return result\n}\n\nfunction createPatternAlphabet(pattern) {\n  let mask = {};\n\n  for (let i = 0, len = pattern.length; i < len; i += 1) {\n    const char = pattern.charAt(i);\n    mask[char] = (mask[char] || 0) | (1 << (len - i - 1));\n  }\n\n  return mask\n}\n\nclass BitapSearch {\n  constructor(\n    pattern,\n    {\n      location = Config.location,\n      threshold = Config.threshold,\n      distance = Config.distance,\n      includeMatches = Config.includeMatches,\n      findAllMatches = Config.findAllMatches,\n      minMatchCharLength = Config.minMatchCharLength,\n      isCaseSensitive = Config.isCaseSensitive,\n      ignoreLocation = Config.ignoreLocation\n    } = {}\n  ) {\n    this.options = {\n      location,\n      threshold,\n      distance,\n      includeMatches,\n      findAllMatches,\n      minMatchCharLength,\n      isCaseSensitive,\n      ignoreLocation\n    };\n\n    this.pattern = isCaseSensitive ? pattern : pattern.toLowerCase();\n\n    this.chunks = [];\n\n    if (!this.pattern.length) {\n      return\n    }\n\n    const addChunk = (pattern, startIndex) => {\n      this.chunks.push({\n        pattern,\n        alphabet: createPatternAlphabet(pattern),\n        startIndex\n      });\n    };\n\n    const len = this.pattern.length;\n\n    if (len > MAX_BITS) {\n      let i = 0;\n      const remainder = len % MAX_BITS;\n      const end = len - remainder;\n\n      while (i < end) {\n        addChunk(this.pattern.substr(i, MAX_BITS), i);\n        i += MAX_BITS;\n      }\n\n      if (remainder) {\n        const startIndex = len - MAX_BITS;\n        addChunk(this.pattern.substr(startIndex), startIndex);\n      }\n    } else {\n      addChunk(this.pattern, 0);\n    }\n  }\n\n  searchIn(text) {\n    const { isCaseSensitive, includeMatches } = this.options;\n\n    if (!isCaseSensitive) {\n      text = text.toLowerCase();\n    }\n\n    // Exact match\n    if (this.pattern === text) {\n      let result = {\n        isMatch: true,\n        score: 0\n      };\n\n      if (includeMatches) {\n        result.indices = [[0, text.length - 1]];\n      }\n\n      return result\n    }\n\n    // Otherwise, use Bitap algorithm\n    const {\n      location,\n      distance,\n      threshold,\n      findAllMatches,\n      minMatchCharLength,\n      ignoreLocation\n    } = this.options;\n\n    let allIndices = [];\n    let totalScore = 0;\n    let hasMatches = false;\n\n    this.chunks.forEach(({ pattern, alphabet, startIndex }) => {\n      const { isMatch, score, indices } = search(text, pattern, alphabet, {\n        location: location + startIndex,\n        distance,\n        threshold,\n        findAllMatches,\n        minMatchCharLength,\n        includeMatches,\n        ignoreLocation\n      });\n\n      if (isMatch) {\n        hasMatches = true;\n      }\n\n      totalScore += score;\n\n      if (isMatch && indices) {\n        allIndices = [...allIndices, ...indices];\n      }\n    });\n\n    let result = {\n      isMatch: hasMatches,\n      score: hasMatches ? totalScore / this.chunks.length : 1\n    };\n\n    if (hasMatches && includeMatches) {\n      result.indices = allIndices;\n    }\n\n    return result\n  }\n}\n\nclass BaseMatch {\n  constructor(pattern) {\n    this.pattern = pattern;\n  }\n  static isMultiMatch(pattern) {\n    return getMatch(pattern, this.multiRegex)\n  }\n  static isSingleMatch(pattern) {\n    return getMatch(pattern, this.singleRegex)\n  }\n  search(/*text*/) {}\n}\n\nfunction getMatch(pattern, exp) {\n  const matches = pattern.match(exp);\n  return matches ? matches[1] : null\n}\n\n// Token: 'file\n\nclass ExactMatch extends BaseMatch {\n  constructor(pattern) {\n    super(pattern);\n  }\n  static get type() {\n    return 'exact'\n  }\n  static get multiRegex() {\n    return /^=\"(.*)\"$/\n  }\n  static get singleRegex() {\n    return /^=(.*)$/\n  }\n  search(text) {\n    const isMatch = text === this.pattern;\n\n    return {\n      isMatch,\n      score: isMatch ? 0 : 1,\n      indices: [0, this.pattern.length - 1]\n    }\n  }\n}\n\n// Token: !fire\n\nclass InverseExactMatch extends BaseMatch {\n  constructor(pattern) {\n    super(pattern);\n  }\n  static get type() {\n    return 'inverse-exact'\n  }\n  static get multiRegex() {\n    return /^!\"(.*)\"$/\n  }\n  static get singleRegex() {\n    return /^!(.*)$/\n  }\n  search(text) {\n    const index = text.indexOf(this.pattern);\n    const isMatch = index === -1;\n\n    return {\n      isMatch,\n      score: isMatch ? 0 : 1,\n      indices: [0, text.length - 1]\n    }\n  }\n}\n\n// Token: ^file\n\nclass PrefixExactMatch extends BaseMatch {\n  constructor(pattern) {\n    super(pattern);\n  }\n  static get type() {\n    return 'prefix-exact'\n  }\n  static get multiRegex() {\n    return /^\\^\"(.*)\"$/\n  }\n  static get singleRegex() {\n    return /^\\^(.*)$/\n  }\n  search(text) {\n    const isMatch = text.startsWith(this.pattern);\n\n    return {\n      isMatch,\n      score: isMatch ? 0 : 1,\n      indices: [0, this.pattern.length - 1]\n    }\n  }\n}\n\n// Token: !^fire\n\nclass InversePrefixExactMatch extends BaseMatch {\n  constructor(pattern) {\n    super(pattern);\n  }\n  static get type() {\n    return 'inverse-prefix-exact'\n  }\n  static get multiRegex() {\n    return /^!\\^\"(.*)\"$/\n  }\n  static get singleRegex() {\n    return /^!\\^(.*)$/\n  }\n  search(text) {\n    const isMatch = !text.startsWith(this.pattern);\n\n    return {\n      isMatch,\n      score: isMatch ? 0 : 1,\n      indices: [0, text.length - 1]\n    }\n  }\n}\n\n// Token: .file$\n\nclass SuffixExactMatch extends BaseMatch {\n  constructor(pattern) {\n    super(pattern);\n  }\n  static get type() {\n    return 'suffix-exact'\n  }\n  static get multiRegex() {\n    return /^\"(.*)\"\\$$/\n  }\n  static get singleRegex() {\n    return /^(.*)\\$$/\n  }\n  search(text) {\n    const isMatch = text.endsWith(this.pattern);\n\n    return {\n      isMatch,\n      score: isMatch ? 0 : 1,\n      indices: [text.length - this.pattern.length, text.length - 1]\n    }\n  }\n}\n\n// Token: !.file$\n\nclass InverseSuffixExactMatch extends BaseMatch {\n  constructor(pattern) {\n    super(pattern);\n  }\n  static get type() {\n    return 'inverse-suffix-exact'\n  }\n  static get multiRegex() {\n    return /^!\"(.*)\"\\$$/\n  }\n  static get singleRegex() {\n    return /^!(.*)\\$$/\n  }\n  search(text) {\n    const isMatch = !text.endsWith(this.pattern);\n    return {\n      isMatch,\n      score: isMatch ? 0 : 1,\n      indices: [0, text.length - 1]\n    }\n  }\n}\n\nclass FuzzyMatch extends BaseMatch {\n  constructor(\n    pattern,\n    {\n      location = Config.location,\n      threshold = Config.threshold,\n      distance = Config.distance,\n      includeMatches = Config.includeMatches,\n      findAllMatches = Config.findAllMatches,\n      minMatchCharLength = Config.minMatchCharLength,\n      isCaseSensitive = Config.isCaseSensitive,\n      ignoreLocation = Config.ignoreLocation\n    } = {}\n  ) {\n    super(pattern);\n    this._bitapSearch = new BitapSearch(pattern, {\n      location,\n      threshold,\n      distance,\n      includeMatches,\n      findAllMatches,\n      minMatchCharLength,\n      isCaseSensitive,\n      ignoreLocation\n    });\n  }\n  static get type() {\n    return 'fuzzy'\n  }\n  static get multiRegex() {\n    return /^\"(.*)\"$/\n  }\n  static get singleRegex() {\n    return /^(.*)$/\n  }\n  search(text) {\n    return this._bitapSearch.searchIn(text)\n  }\n}\n\n// Token: 'file\n\nclass IncludeMatch extends BaseMatch {\n  constructor(pattern) {\n    super(pattern);\n  }\n  static get type() {\n    return 'include'\n  }\n  static get multiRegex() {\n    return /^'\"(.*)\"$/\n  }\n  static get singleRegex() {\n    return /^'(.*)$/\n  }\n  search(text) {\n    let location = 0;\n    let index;\n\n    const indices = [];\n    const patternLen = this.pattern.length;\n\n    // Get all exact matches\n    while ((index = text.indexOf(this.pattern, location)) > -1) {\n      location = index + patternLen;\n      indices.push([index, location - 1]);\n    }\n\n    const isMatch = !!indices.length;\n\n    return {\n      isMatch,\n      score: isMatch ? 0 : 1,\n      indices\n    }\n  }\n}\n\n// ❗Order is important. DO NOT CHANGE.\nconst searchers = [\n  ExactMatch,\n  IncludeMatch,\n  PrefixExactMatch,\n  InversePrefixExactMatch,\n  InverseSuffixExactMatch,\n  SuffixExactMatch,\n  InverseExactMatch,\n  FuzzyMatch\n];\n\nconst searchersLen = searchers.length;\n\n// Regex to split by spaces, but keep anything in quotes together\nconst SPACE_RE = / +(?=(?:[^\\\"]*\\\"[^\\\"]*\\\")*[^\\\"]*$)/;\nconst OR_TOKEN = '|';\n\n// Return a 2D array representation of the query, for simpler parsing.\n// Example:\n// \"^core go$ | rb$ | py$ xy$\" => [[\"^core\", \"go$\"], [\"rb$\"], [\"py$\", \"xy$\"]]\nfunction parseQuery(pattern, options = {}) {\n  return pattern.split(OR_TOKEN).map((item) => {\n    let query = item\n      .trim()\n      .split(SPACE_RE)\n      .filter((item) => item && !!item.trim());\n\n    let results = [];\n    for (let i = 0, len = query.length; i < len; i += 1) {\n      const queryItem = query[i];\n\n      // 1. Handle multiple query match (i.e, once that are quoted, like `\"hello world\"`)\n      let found = false;\n      let idx = -1;\n      while (!found && ++idx < searchersLen) {\n        const searcher = searchers[idx];\n        let token = searcher.isMultiMatch(queryItem);\n        if (token) {\n          results.push(new searcher(token, options));\n          found = true;\n        }\n      }\n\n      if (found) {\n        continue\n      }\n\n      // 2. Handle single query matches (i.e, once that are *not* quoted)\n      idx = -1;\n      while (++idx < searchersLen) {\n        const searcher = searchers[idx];\n        let token = searcher.isSingleMatch(queryItem);\n        if (token) {\n          results.push(new searcher(token, options));\n          break\n        }\n      }\n    }\n\n    return results\n  })\n}\n\n// These extended matchers can return an array of matches, as opposed\n// to a singl match\nconst MultiMatchSet = new Set([FuzzyMatch.type, IncludeMatch.type]);\n\n/**\n * Command-like searching\n * ======================\n *\n * Given multiple search terms delimited by spaces.e.g. `^jscript .python$ ruby !java`,\n * search in a given text.\n *\n * Search syntax:\n *\n * | Token       | Match type                 | Description                            |\n * | ----------- | -------------------------- | -------------------------------------- |\n * | `jscript`   | fuzzy-match                | Items that fuzzy match `jscript`       |\n * | `=scheme`   | exact-match                | Items that are `scheme`                |\n * | `'python`   | include-match              | Items that include `python`            |\n * | `!ruby`     | inverse-exact-match        | Items that do not include `ruby`       |\n * | `^java`     | prefix-exact-match         | Items that start with `java`           |\n * | `!^earlang` | inverse-prefix-exact-match | Items that do not start with `earlang` |\n * | `.js$`      | suffix-exact-match         | Items that end with `.js`              |\n * | `!.go$`     | inverse-suffix-exact-match | Items that do not end with `.go`       |\n *\n * A single pipe character acts as an OR operator. For example, the following\n * query matches entries that start with `core` and end with either`go`, `rb`,\n * or`py`.\n *\n * ```\n * ^core go$ | rb$ | py$\n * ```\n */\nclass ExtendedSearch {\n  constructor(\n    pattern,\n    {\n      isCaseSensitive = Config.isCaseSensitive,\n      includeMatches = Config.includeMatches,\n      minMatchCharLength = Config.minMatchCharLength,\n      ignoreLocation = Config.ignoreLocation,\n      findAllMatches = Config.findAllMatches,\n      location = Config.location,\n      threshold = Config.threshold,\n      distance = Config.distance\n    } = {}\n  ) {\n    this.query = null;\n    this.options = {\n      isCaseSensitive,\n      includeMatches,\n      minMatchCharLength,\n      findAllMatches,\n      ignoreLocation,\n      location,\n      threshold,\n      distance\n    };\n\n    this.pattern = isCaseSensitive ? pattern : pattern.toLowerCase();\n    this.query = parseQuery(this.pattern, this.options);\n  }\n\n  static condition(_, options) {\n    return options.useExtendedSearch\n  }\n\n  searchIn(text) {\n    const query = this.query;\n\n    if (!query) {\n      return {\n        isMatch: false,\n        score: 1\n      }\n    }\n\n    const { includeMatches, isCaseSensitive } = this.options;\n\n    text = isCaseSensitive ? text : text.toLowerCase();\n\n    let numMatches = 0;\n    let allIndices = [];\n    let totalScore = 0;\n\n    // ORs\n    for (let i = 0, qLen = query.length; i < qLen; i += 1) {\n      const searchers = query[i];\n\n      // Reset indices\n      allIndices.length = 0;\n      numMatches = 0;\n\n      // ANDs\n      for (let j = 0, pLen = searchers.length; j < pLen; j += 1) {\n        const searcher = searchers[j];\n        const { isMatch, indices, score } = searcher.search(text);\n\n        if (isMatch) {\n          numMatches += 1;\n          totalScore += score;\n          if (includeMatches) {\n            const type = searcher.constructor.type;\n            if (MultiMatchSet.has(type)) {\n              allIndices = [...allIndices, ...indices];\n            } else {\n              allIndices.push(indices);\n            }\n          }\n        } else {\n          totalScore = 0;\n          numMatches = 0;\n          allIndices.length = 0;\n          break\n        }\n      }\n\n      // OR condition, so if TRUE, return\n      if (numMatches) {\n        let result = {\n          isMatch: true,\n          score: totalScore / numMatches\n        };\n\n        if (includeMatches) {\n          result.indices = allIndices;\n        }\n\n        return result\n      }\n    }\n\n    // Nothing was matched\n    return {\n      isMatch: false,\n      score: 1\n    }\n  }\n}\n\nconst registeredSearchers = [];\n\nfunction register(...args) {\n  registeredSearchers.push(...args);\n}\n\nfunction createSearcher(pattern, options) {\n  for (let i = 0, len = registeredSearchers.length; i < len; i += 1) {\n    let searcherClass = registeredSearchers[i];\n    if (searcherClass.condition(pattern, options)) {\n      return new searcherClass(pattern, options)\n    }\n  }\n\n  return new BitapSearch(pattern, options)\n}\n\nconst LogicalOperator = {\n  AND: '$and',\n  OR: '$or'\n};\n\nconst KeyType = {\n  PATH: '$path',\n  PATTERN: '$val'\n};\n\nconst isExpression = (query) =>\n  !!(query[LogicalOperator.AND] || query[LogicalOperator.OR]);\n\nconst isPath = (query) => !!query[KeyType.PATH];\n\nconst isLeaf = (query) =>\n  !isArray(query) && isObject(query) && !isExpression(query);\n\nconst convertToExplicit = (query) => ({\n  [LogicalOperator.AND]: Object.keys(query).map((key) => ({\n    [key]: query[key]\n  }))\n});\n\n// When `auto` is `true`, the parse function will infer and initialize and add\n// the appropriate `Searcher` instance\nfunction parse(query, options, { auto = true } = {}) {\n  const next = (query) => {\n    let keys = Object.keys(query);\n\n    const isQueryPath = isPath(query);\n\n    if (!isQueryPath && keys.length > 1 && !isExpression(query)) {\n      return next(convertToExplicit(query))\n    }\n\n    if (isLeaf(query)) {\n      const key = isQueryPath ? query[KeyType.PATH] : keys[0];\n\n      const pattern = isQueryPath ? query[KeyType.PATTERN] : query[key];\n\n      if (!isString(pattern)) {\n        throw new Error(LOGICAL_SEARCH_INVALID_QUERY_FOR_KEY(key))\n      }\n\n      const obj = {\n        keyId: createKeyId(key),\n        pattern\n      };\n\n      if (auto) {\n        obj.searcher = createSearcher(pattern, options);\n      }\n\n      return obj\n    }\n\n    let node = {\n      children: [],\n      operator: keys[0]\n    };\n\n    keys.forEach((key) => {\n      const value = query[key];\n\n      if (isArray(value)) {\n        value.forEach((item) => {\n          node.children.push(next(item));\n        });\n      }\n    });\n\n    return node\n  };\n\n  if (!isExpression(query)) {\n    query = convertToExplicit(query);\n  }\n\n  return next(query)\n}\n\n// Practical scoring function\nfunction computeScore(\n  results,\n  { ignoreFieldNorm = Config.ignoreFieldNorm }\n) {\n  results.forEach((result) => {\n    let totalScore = 1;\n\n    result.matches.forEach(({ key, norm, score }) => {\n      const weight = key ? key.weight : null;\n\n      totalScore *= Math.pow(\n        score === 0 && weight ? Number.EPSILON : score,\n        (weight || 1) * (ignoreFieldNorm ? 1 : norm)\n      );\n    });\n\n    result.score = totalScore;\n  });\n}\n\nfunction transformMatches(result, data) {\n  const matches = result.matches;\n  data.matches = [];\n\n  if (!isDefined(matches)) {\n    return\n  }\n\n  matches.forEach((match) => {\n    if (!isDefined(match.indices) || !match.indices.length) {\n      return\n    }\n\n    const { indices, value } = match;\n\n    let obj = {\n      indices,\n      value\n    };\n\n    if (match.key) {\n      obj.key = match.key.src;\n    }\n\n    if (match.idx > -1) {\n      obj.refIndex = match.idx;\n    }\n\n    data.matches.push(obj);\n  });\n}\n\nfunction transformScore(result, data) {\n  data.score = result.score;\n}\n\nfunction format(\n  results,\n  docs,\n  {\n    includeMatches = Config.includeMatches,\n    includeScore = Config.includeScore\n  } = {}\n) {\n  const transformers = [];\n\n  if (includeMatches) transformers.push(transformMatches);\n  if (includeScore) transformers.push(transformScore);\n\n  return results.map((result) => {\n    const { idx } = result;\n\n    const data = {\n      item: docs[idx],\n      refIndex: idx\n    };\n\n    if (transformers.length) {\n      transformers.forEach((transformer) => {\n        transformer(result, data);\n      });\n    }\n\n    return data\n  })\n}\n\nclass Fuse {\n  constructor(docs, options = {}, index) {\n    this.options = { ...Config, ...options };\n\n    if (\n      this.options.useExtendedSearch &&\n      !true\n    ) {\n      throw new Error(EXTENDED_SEARCH_UNAVAILABLE)\n    }\n\n    this._keyStore = new KeyStore(this.options.keys);\n\n    this.setCollection(docs, index);\n  }\n\n  setCollection(docs, index) {\n    this._docs = docs;\n\n    if (index && !(index instanceof FuseIndex)) {\n      throw new Error(INCORRECT_INDEX_TYPE)\n    }\n\n    this._myIndex =\n      index ||\n      createIndex(this.options.keys, this._docs, {\n        getFn: this.options.getFn,\n        fieldNormWeight: this.options.fieldNormWeight\n      });\n  }\n\n  add(doc) {\n    if (!isDefined(doc)) {\n      return\n    }\n\n    this._docs.push(doc);\n    this._myIndex.add(doc);\n  }\n\n  remove(predicate = (/* doc, idx */) => false) {\n    const results = [];\n\n    for (let i = 0, len = this._docs.length; i < len; i += 1) {\n      const doc = this._docs[i];\n      if (predicate(doc, i)) {\n        this.removeAt(i);\n        i -= 1;\n        len -= 1;\n\n        results.push(doc);\n      }\n    }\n\n    return results\n  }\n\n  removeAt(idx) {\n    this._docs.splice(idx, 1);\n    this._myIndex.removeAt(idx);\n  }\n\n  getIndex() {\n    return this._myIndex\n  }\n\n  search(query, { limit = -1 } = {}) {\n    const {\n      includeMatches,\n      includeScore,\n      shouldSort,\n      sortFn,\n      ignoreFieldNorm\n    } = this.options;\n\n    let results = isString(query)\n      ? isString(this._docs[0])\n        ? this._searchStringList(query)\n        : this._searchObjectList(query)\n      : this._searchLogical(query);\n\n    computeScore(results, { ignoreFieldNorm });\n\n    if (shouldSort) {\n      results.sort(sortFn);\n    }\n\n    if (isNumber(limit) && limit > -1) {\n      results = results.slice(0, limit);\n    }\n\n    return format(results, this._docs, {\n      includeMatches,\n      includeScore\n    })\n  }\n\n  _searchStringList(query) {\n    const searcher = createSearcher(query, this.options);\n    const { records } = this._myIndex;\n    const results = [];\n\n    // Iterate over every string in the index\n    records.forEach(({ v: text, i: idx, n: norm }) => {\n      if (!isDefined(text)) {\n        return\n      }\n\n      const { isMatch, score, indices } = searcher.searchIn(text);\n\n      if (isMatch) {\n        results.push({\n          item: text,\n          idx,\n          matches: [{ score, value: text, norm, indices }]\n        });\n      }\n    });\n\n    return results\n  }\n\n  _searchLogical(query) {\n\n    const expression = parse(query, this.options);\n\n    const evaluate = (node, item, idx) => {\n      if (!node.children) {\n        const { keyId, searcher } = node;\n\n        const matches = this._findMatches({\n          key: this._keyStore.get(keyId),\n          value: this._myIndex.getValueForItemAtKeyId(item, keyId),\n          searcher\n        });\n\n        if (matches && matches.length) {\n          return [\n            {\n              idx,\n              item,\n              matches\n            }\n          ]\n        }\n\n        return []\n      }\n\n      const res = [];\n      for (let i = 0, len = node.children.length; i < len; i += 1) {\n        const child = node.children[i];\n        const result = evaluate(child, item, idx);\n        if (result.length) {\n          res.push(...result);\n        } else if (node.operator === LogicalOperator.AND) {\n          return []\n        }\n      }\n      return res\n    };\n\n    const records = this._myIndex.records;\n    const resultMap = {};\n    const results = [];\n\n    records.forEach(({ $: item, i: idx }) => {\n      if (isDefined(item)) {\n        let expResults = evaluate(expression, item, idx);\n\n        if (expResults.length) {\n          // Dedupe when adding\n          if (!resultMap[idx]) {\n            resultMap[idx] = { idx, item, matches: [] };\n            results.push(resultMap[idx]);\n          }\n          expResults.forEach(({ matches }) => {\n            resultMap[idx].matches.push(...matches);\n          });\n        }\n      }\n    });\n\n    return results\n  }\n\n  _searchObjectList(query) {\n    const searcher = createSearcher(query, this.options);\n    const { keys, records } = this._myIndex;\n    const results = [];\n\n    // List is Array<Object>\n    records.forEach(({ $: item, i: idx }) => {\n      if (!isDefined(item)) {\n        return\n      }\n\n      let matches = [];\n\n      // Iterate over every key (i.e, path), and fetch the value at that key\n      keys.forEach((key, keyIndex) => {\n        matches.push(\n          ...this._findMatches({\n            key,\n            value: item[keyIndex],\n            searcher\n          })\n        );\n      });\n\n      if (matches.length) {\n        results.push({\n          idx,\n          item,\n          matches\n        });\n      }\n    });\n\n    return results\n  }\n  _findMatches({ key, value, searcher }) {\n    if (!isDefined(value)) {\n      return []\n    }\n\n    let matches = [];\n\n    if (isArray(value)) {\n      value.forEach(({ v: text, i: idx, n: norm }) => {\n        if (!isDefined(text)) {\n          return\n        }\n\n        const { isMatch, score, indices } = searcher.searchIn(text);\n\n        if (isMatch) {\n          matches.push({\n            score,\n            key,\n            value: text,\n            idx,\n            norm,\n            indices\n          });\n        }\n      });\n    } else {\n      const { v: text, n: norm } = value;\n\n      const { isMatch, score, indices } = searcher.searchIn(text);\n\n      if (isMatch) {\n        matches.push({ score, key, value: text, norm, indices });\n      }\n    }\n\n    return matches\n  }\n}\n\nFuse.version = '6.6.2';\nFuse.createIndex = createIndex;\nFuse.parseIndex = parseIndex;\nFuse.config = Config;\n\n{\n  Fuse.parseQuery = parse;\n}\n\n{\n  register(ExtendedSearch);\n}\n\nexport { Fuse as default };\n","\nimport {\n\tIonImg,\n\tIonThumbnail,\n\tIonLabel,\n\tIonIcon,\n\tIonItem,\n\tIonTitle,\n\tIonChip,\n\tIonToolbar,\n\tIonHeader,\n\tIonButton,\n\tIonFooter,\n\tIonContent,\n\tIonButtons\n} from \"@ionic/vue\"\nimport {\n\tsync,\n\tsearch,\n\tclose,\n\tarrowUp,\n\tarrowDown,\n\tdocument\n} from \"ionicons/icons\"\nimport { Option } from \"@/components/Forms/FieldInterface\"\nimport { computed, defineComponent, PropType, ref, watch } from \"vue\";\nimport keyboard from \"@/utils/PopupKeyboard\"\nimport { chunk, isEmpty } from \"lodash\";\nimport { sort } from \"fast-sort\";\nimport { numericKeypad } from \"@/utils/PopupKeyboard\";\nimport { FieldType } from \"@/components/Forms/BaseFormElements\";\nimport Fuse from \"fuse.js\"\nimport { v2ColumnDataInterface, v2ColumnInterface } from \"./types\";\nimport { toCsv, toTablePDF } from \"@/utils/Export\"\nimport { Service } from \"@/services/service\";\nimport { useRouter } from \"vue-router\";\nimport dayjs from \"dayjs\";\nimport Img from \"@/utils/Img\"\n\nexport default defineComponent({\n\tcomponents: {\n\t\tIonImg,\n\t\tIonThumbnail,\n\t\tIonToolbar,\n\t\tIonItem,\n\t\tIonIcon,\n\t\tIonLabel,\n\t\tIonTitle,\n\t\tIonHeader,\n\t\tIonButton,\n\t\tIonFooter,\n\t\tIonContent,\n\t\tIonButtons,\n\t\tIonChip\n\t},\n\tprops: {\n\t\ticon: {\n\t\t\ttype: String\n\t\t},\n\t\ttitle: {\n\t\t\ttype: String,\n\t\t\tdefault: 'Report'\n\t\t},\n\t\tsubtitle: {\n\t\t\ttype: String,\n\t\t},\n\t\tcolumns: {\n\t\t\ttype: Object as PropType<Array<v2ColumnInterface[]>>,\n\t\t\trequired: true\n\t\t},\n\t\tcolumnData: {\n\t\t\ttype: Array,\n\t\t\tdefault: () => []\n\t\t},\n\t\tenablePagination: {\n\t\t\ttype: Boolean,\n\t\t\tdefault: true\n\t\t},\n\t\trowsPerPage: {\n\t\t\ttype: Number,\n\t\t\tdefault: 10\n\t\t},\n\t\tonFinish: {\n\t\t\ttype: Function\n\t\t},\n\t\tonRefresh: {\n\t\t\ttype: Function\n\t\t},\n\t\tonConfigure: {\n\t\t\ttype: Function\n\t\t},\n\t\tcsvQuarter: {\n\t\t\ttype: String\n\t\t}\n\t},\n\tsetup(props) {\n\t\tconst route = useRouter()\n\t\tconst reportData = ref<any>([])\n\t\tconst currentPage = ref<number>(0)\n\t\tconst searchTerm = ref<string>('')\n\t\tconst columnSorted = ref<string>('')\n\t\tconst sortOrder = ref<'asc' | 'desc'>('desc')\n\n\t\tconst logo = computed(() => props.icon ? Img(props.icon) : '')\n\n\t\t/**\n\t\t * This computed object exist to allow for transformation\n\t\t * of \"reportData\" without mutations when doing\n\t\t * things like search or sorting... \n\t\t */\n\t\tconst pageComputedReportData = computed(() => {\n\t\t\t/**\n\t\t\t * Data transformations for table happen here. i.e. searching or sorting\n\t\t\t*/\n\t\t\tconst tableData = sort(reportData.value)[sortOrder.value]((d: any) => d.data[columnSorted.value])\n\t\t\tif (searchTerm.value) {\n\t\t\t\tconst fuse = new Fuse(tableData, {\n\t\t\t\t\tthreshold: 0.3,\n\t\t\t\t\tkeys: ['searchIndex'],\n\t\t\t\t\tuseExtendedSearch: true\n\t\t\t\t})\n\t\t\t\treturn fuse.search(searchTerm.value, { limit: props.rowsPerPage }).map((i: any) => i.item)\n\t\t\t}\n\t\t\treturn tableData\n\t\t})\n\n\t\tconst totalPages = computed(() => chunk(pageComputedReportData.value, props.rowsPerPage).length)\n\n\t\tconst canNext = computed(() => currentPage.value + 2 <= totalPages.value)\n\n\t\tconst canPrev = computed(() => currentPage.value > 0)\n\t\t/**\n\t\t * returns current page data based on page index\n\t\t */\n\t\tconst page = computed(() => {\n\t\t\t/**\n\t\t\t * Paginated data that ends up on the template.\n\t\t\t */\n\t\t\tconst paginated = chunk(pageComputedReportData.value, props.rowsPerPage)\n\t\t\treturn paginated[currentPage.value] as any\n\t\t})\n\n\t\tconst sortColumn = (column: string) => {\n\t\t\tcolumnSorted.value = column\n\t\t\tsortOrder.value = sortOrder.value === 'asc' ? 'desc' : 'asc'\n\t\t}\n\t\t/**\n\t\t * Launches numeric input to allow the user to skip to any page\n\t\t */\n\t\tconst selectPage = () => numericKeypad((v: string) => {\n\t\t\tconst num = parseInt(v)\n\t\t\tif (parseInt(v) <= totalPages.value) currentPage.value = num\n\t\t}, { title: 'Select page' })\n\t\t/**\n\t\t * Launches search input to filter page\n\t\t */\n\t\tconst searchTable = () => {\n\t\t\tkeyboard({\n\t\t\t\tid: \"search\",\n\t\t\t\thelpText: \"Find\",\n\t\t\t\ttype: FieldType.TT_TEXT,\n\t\t\t},\n\t\t\t\t(v: Option) => {\n\t\t\t\t\t// This has been wrapped in a slight delay to improve responsiveness of the page\n\t\t\t\t\tsetTimeout(() => {\n\t\t\t\t\t\tsearchTerm.value = v ? v.value as string : ''\n\t\t\t\t\t\tcurrentPage.value = 0\n\t\t\t\t\t}, 3)\n\t\t\t\t})\n\t\t}\n\t\t/**\n\t\t * Reset current page to initial\n\t\t */\n\t\tconst first = () => currentPage.value = 0\n\t\t/**\n\t\t * Goes to the last page\n\t\t */\n\t\tconst last = () => currentPage.value = (totalPages.value - 1) || 0\n\t\t/**\n\t\t * Go to next page relative to the current page\n\t\t */\n\t\tconst next = () => currentPage.value += 1\n\t\t/**\n\t\t * Go to previous page relateive to the current page\n\t\t */\n\t\tconst prev = () => currentPage.value -= 1\n\n\t\tconst finish = () => {\n\t\t\tif (typeof props.onFinish === 'function') {\n\t\t\t\tprops.onFinish()\n\t\t\t} else {\n\t\t\t\troute.push('/')\n\t\t\t}\n\t\t}\n\n\t\t/**\n\t\t * Event handler when TD on HTML report is clicked\n\t\t * @param cell \n\t\t */\n\t\tconst onClickTablecell = (cell: v2ColumnDataInterface) => {\n\t\t\ttry {\n\t\t\t\tif (typeof cell.column?.tdClick === 'function') {\n\t\t\t\t\tcell.column?.tdClick(cell)\n\t\t\t\t}\n\t\t\t\treturn\n\t\t\t} catch (e) {\n\t\t\t\tconsole.error(e)\n\t\t\t}\n\t\t}\n\n\t\tconst getExpandedColumns = () => props.columns.reduce((a: any, c: v2ColumnInterface[]) => a.concat(c), [])\n\t\t\t.filter((col: v2ColumnInterface) => col.value || col.ref)\n\n\t\t/**\n\t\t * Defines export object\n\t\t */\n\t\tconst prepExportObj = (format: 'pdf' | 'csv') => {\n\t\t\tconst exportableColumns = getExpandedColumns().filter((column: v2ColumnInterface) => {\n\t\t\t\treturn [\n\t\t\t\t\tcolumn.canExport ? column?.canExport[format] : true,\n\t\t\t\t\ttypeof column.exportable === 'boolean' ? column.exportable : true\n\t\t\t\t].every(Boolean)\n\t\t\t})\n\t\t\t// Generates string headers. The final value will be determined by configuration of column\n\t\t\tconst headers = exportableColumns.map((column: v2ColumnInterface) => {\n\t\t\t\treturn column.exportedValue && column.exportedValue.column\n\t\t\t\t\t? column.exportedValue.column(column)\n\t\t\t\t\t: column.secondaryLabel || column.label\n\t\t\t})\n\n\t\t\t/**\n\t\t\t * Exported rows are based on exportable columns\n\t\t\t */\n\t\t\tconst columnRefs = exportableColumns.map((column: v2ColumnInterface) => column.ref)\n\t\t\tconst rows = reportData.value.reduce((allRows: any, data: any) => {\n\t\t\t\tconst row = data.row.filter(({ column }: v2ColumnDataInterface) => {\n\t\t\t\t\treturn columnRefs.includes(column.ref)\n\t\t\t\t}).map((data: v2ColumnDataInterface) => {\n\t\t\t\t\t// Final value will be determined by optional configuration or static value\n\t\t\t\t\treturn data.column.exportedValue && data.column.exportedValue.dataValue\n\t\t\t\t\t\t? data.column.exportedValue.dataValue(data)\n\t\t\t\t\t\t: data.value\n\t\t\t\t})\n\t\t\t\treturn [...allRows, row]\n\t\t\t}, [])\n\n\t\t\tconst filename = `${Service.getLocationName() || 'Unknown site'}-${props.title}-${props.subtitle}-${Service.getSessionDate()}`\n\t\t\treturn {\n\t\t\t\theaders,\n\t\t\t\trows,\n\t\t\t\tfilename\n\t\t\t}\n\t\t}\n\n\t\tconst toPDF = () => {\n\t\t\tconst { headers, rows, filename } = prepExportObj('pdf')\n\t\t\ttoTablePDF([headers], rows, filename, true)\n\t\t}\n\n\t\tconst toCSV = () => {\n\t\t\tconst { headers, rows, filename } = prepExportObj('csv')\n\t\t\ttoCsv(\n\t\t\t\t[headers],\n\t\t\t\t[\n\t\t\t\t\t...rows,\n\t\t\t\t\t[`Date Created: ${dayjs().format('DD/MMM/YYYY HH:MM:ss')}`],\n\t\t\t\t\t[`Quarter: ${props.csvQuarter || props.subtitle}`],\n\t\t\t\t\t[`HIS-Core Version: ${Service.getCoreVersion()}`],\n\t\t\t\t\t[`API Version: ${Service.getApiVersion()}`],\n\t\t\t\t\t[`Site UUID: ${Service.getSiteUUID()}`],\n\t\t\t\t\t[`Generated by: ${Service.getUserName()}`]\n\t\t\t\t],\n\t\t\t\tfilename\n\t\t\t)\n\t\t}\n\n\t\t/**\n\t\t * Create a table header and cell mapping\n\t\t * @param data \n\t\t */\n\t\tconst mapcolumnValues = (data: any) => {\n\t\t\tdata.forEach((record: any) => {\n\t\t\t\tconst row = getExpandedColumns().map((column: v2ColumnInterface) => {\n\t\t\t\t\tlet value = ''\n\t\t\t\t\ttry {\n\t\t\t\t\t\tif (isEmpty(record)) {\n\t\t\t\t\t\t\tvalue = \"...\"\n\t\t\t\t\t\t} else if (typeof column.value === 'function') {\n\t\t\t\t\t\t\tvalue = column.value(record) as string\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t// Use the ref to map to a value inside the record\n\t\t\t\t\t\t\tvalue = record[column.ref] || ''\n\t\t\t\t\t\t}\n\t\t\t\t\t} catch (e) {\n\t\t\t\t\t\tvalue = '_ERROR_'\n\t\t\t\t\t\tconsole.error(e)\n\t\t\t\t\t}\n\t\t\t\t\treturn {\n\t\t\t\t\t\tcolumn,\n\t\t\t\t\t\tdata: record,\n\t\t\t\t\t\tvalue: value,\n\t\t\t\t\t\t[column.ref || 'nada']: value\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t\treportData.value.push({\n\t\t\t\t\trow,\n\t\t\t\t\tdata: record,\n\t\t\t\t\tsearchIndex: [...row, row.map((d: any) => d.value).join(' ')]\n\t\t\t\t})\n\t\t\t})\n\t\t}\n\n\t\t/**\n\t\t * Initiates generation of table data through column data prop\n\t\t */\n\t\twatch(() => props.columnData, (data) => {\n\t\t\treportData.value = [];\n\t\t\tif (!Array.isArray(data) || !data.length) {\n\t\t\t\tcurrentPage.value = 0\n\t\t\t\tsearchTerm.value = ''\n\t\t\t\tcolumnSorted.value = ''\n\t\t\t\tmapcolumnValues(Array.from({ length: props.rowsPerPage }).map(() => ({})))\n\t\t\t\treturn\n\t\t\t}\n\t\t\tmapcolumnValues(data)\n\t\t}, { immediate: true, deep: true })\n\n\t\treturn {\n\t\t\tfirst,\n\t\t\tlast,\n\t\t\tnext,\n\t\t\tprev,\n\t\t\tselectPage,\n\t\t\tsortColumn,\n\t\t\tsearchTable,\n\t\t\tonClickTablecell,\n\t\t\ttoPDF,\n\t\t\ttoCSV,\n\t\t\tfinish,\n\t\t\tlogo,\n\t\t\tsync,\n\t\t\tsearch,\n\t\t\tclose,\n\t\t\tarrowUp,\n\t\t\tarrowDown,\n\t\t\tdocument,\n\t\t\tpage,\n\t\t\tcanNext,\n\t\t\tsearchTerm,\n\t\t\ttotalPages,\n\t\t\tsortOrder,\n\t\t\tcanPrev,\n\t\t\tcurrentPage,\n\t\t\tcolumnSorted\n\t\t}\n\t}\n})\n","import { render } from \"./TableView.vue?vue&type=template&id=ae31c05a&scoped=true&ts=true\"\nimport script from \"./TableView.vue?vue&type=script&lang=ts\"\nexport * from \"./TableView.vue?vue&type=script&lang=ts\"\n\nimport \"./TableView.vue?vue&type=style&index=0&id=ae31c05a&scoped=true&lang=css\"\n\nimport exportComponent from \"/home/andrew-dev/Projects/HIS-Core/node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-ae31c05a\"]])\n\nexport default __exports__"],"sourceRoot":""}