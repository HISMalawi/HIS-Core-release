{"version":3,"sources":["webpack:///./node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/templateLoader.js","webpack:///./node_modules/cache-loader/dist/cjs.js","webpack:///./src/apps/ANC/Views/DataManagement/AncDrugsetManager.vue","webpack:///./src/apps/ANC/Views/DataManagement/AncDrugsetManager.vue?da4b","webpack:///./node_modules/eslint-loader/index.js"],"names":["_withId","_withScopeId","_pushScopeId","_hoisted_1","_createTextVNode","_hoisted_2","_hoisted_3","_hoisted_4","_popScopeId","render","_ctx","_cache","$props","$setup","$data","$options","_component_ion_title","_resolveComponent","_component_ion_toolbar","_component_ion_header","_component_ion_label","_component_ion_item","_component_ion_list","_component_ion_col","_component_report_data_table","_component_ion_row","_component_ion_grid","_component_view_port","_component_ion_content","_component_ion_button","_component_ion_footer","_component_ion_page","_openBlock","_createBlock","default","_createVNode","class","_","style","size","_Fragment","_renderList","drugSets","dataSet","dIndex","button","detail","color","selectedDrugSet","id","onClick","$event","key","_toDisplayString","name","columns","drugSetColumns","rows","drugSetRows","config","tableCssTheme","cancel","slot","hasSelectedDrugSet","voidDrugset","_createCommentVNode","addDrugset","defineComponent","components","IonPage","ReportDataTable","IonList","IonItem","IonLabel","ViewPort","IonButton","IonContent","IonHeader","IonGrid","IonRow","IonCol","IonTitle","IonFooter","IonToolbar","setup","router","useRouter","ref","Table","thTxt","computed","isEmpty","value","drugs","map","drugSet","td","duration","frequency","back","push","async","alertConfirmation","AncDrugSetService","voidDrugSet","filter","d","e","toastWarning","onMounted","getDrugSets","__exports__","Service","data","getSessionDate","this","postJson","setID","void","date","getJson","Object","keys","reduce","sets","setKey","description","parseInt","a","k","drug_name","units"],"mappings":"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","file":"js/chunk-0d67dc9b.3b295e71.js","sourcesContent":["import { createTextVNode as _createTextVNode, resolveComponent as _resolveComponent, withCtx as _withCtx, createVNode as _createVNode, renderList as _renderList, Fragment as _Fragment, openBlock as _openBlock, createBlock as _createBlock, toDisplayString as _toDisplayString, createCommentVNode as _createCommentVNode, withScopeId as _withScopeId, pushScopeId as _pushScopeId, popScopeId as _popScopeId } from \"vue\"\nconst _withId = /*#__PURE__*/_withScopeId(\"data-v-31e11cd2\")\n\n_pushScopeId(\"data-v-31e11cd2\")\nconst _hoisted_1 = /*#__PURE__*/_createTextVNode(\" Drug Set \")\nconst _hoisted_2 = /*#__PURE__*/_createTextVNode(\" Cancel \")\nconst _hoisted_3 = /*#__PURE__*/_createTextVNode(\" Void Drug Set \")\nconst _hoisted_4 = /*#__PURE__*/_createTextVNode(\" Add Drug Set \")\n_popScopeId()\n\nexport const render = /*#__PURE__*/_withId(function render(_ctx, _cache, $props, $setup, $data, $options) {\n  const _component_ion_title = _resolveComponent(\"ion-title\")\n  const _component_ion_toolbar = _resolveComponent(\"ion-toolbar\")\n  const _component_ion_header = _resolveComponent(\"ion-header\")\n  const _component_ion_label = _resolveComponent(\"ion-label\")\n  const _component_ion_item = _resolveComponent(\"ion-item\")\n  const _component_ion_list = _resolveComponent(\"ion-list\")\n  const _component_ion_col = _resolveComponent(\"ion-col\")\n  const _component_report_data_table = _resolveComponent(\"report-data-table\")\n  const _component_ion_row = _resolveComponent(\"ion-row\")\n  const _component_ion_grid = _resolveComponent(\"ion-grid\")\n  const _component_view_port = _resolveComponent(\"view-port\")\n  const _component_ion_content = _resolveComponent(\"ion-content\")\n  const _component_ion_button = _resolveComponent(\"ion-button\")\n  const _component_ion_footer = _resolveComponent(\"ion-footer\")\n  const _component_ion_page = _resolveComponent(\"ion-page\")\n\n  return (_openBlock(), _createBlock(_component_ion_page, null, {\n    default: _withId(() => [\n      _createVNode(_component_ion_header, null, {\n        default: _withId(() => [\n          _createVNode(_component_ion_toolbar, null, {\n            default: _withId(() => [\n              _createVNode(_component_ion_title, { class: \"his-lg-text\" }, {\n                default: _withId(() => [\n                  _hoisted_1\n                ]),\n                _: 1\n              })\n            ]),\n            _: 1\n          })\n        ]),\n        _: 1\n      }),\n      _createVNode(_component_ion_content, null, {\n        default: _withId(() => [\n          _createVNode(_component_view_port, null, {\n            default: _withId(() => [\n              _createVNode(_component_ion_grid, {\n                style: {\"background-color\":\"white\"},\n                class: \"view-port-content\"\n              }, {\n                default: _withId(() => [\n                  _createVNode(_component_ion_row, null, {\n                    default: _withId(() => [\n                      _createVNode(_component_ion_col, { size: \"4\" }, {\n                        default: _withId(() => [\n                          _createVNode(_component_ion_list, null, {\n                            default: _withId(() => [\n                              (_openBlock(true), _createBlock(_Fragment, null, _renderList(_ctx.drugSets, (dataSet, dIndex) => {\n                                return (_openBlock(), _createBlock(_component_ion_item, {\n                                  class: \"his-sm-text\",\n                                  button: \"\",\n                                  detail: \"\",\n                                  color: _ctx.selectedDrugSet.id === dataSet.id ? 'lightblue': '',\n                                  onClick: $event => (_ctx.selectedDrugSet=dataSet),\n                                  key: dIndex\n                                }, {\n                                  default: _withId(() => [\n                                    _createVNode(_component_ion_label, null, {\n                                      default: _withId(() => [\n                                        _createTextVNode(_toDisplayString(dataSet.name), 1 /* TEXT */)\n                                      ]),\n                                      _: 2\n                                    }, 1024)\n                                  ]),\n                                  _: 2\n                                }, 1032, [\"color\", \"onClick\"]))\n                              }), 128 /* KEYED_FRAGMENT */))\n                            ]),\n                            _: 1\n                          })\n                        ]),\n                        _: 1\n                      }),\n                      _createVNode(_component_ion_col, { size: \"8\" }, {\n                        default: _withId(() => [\n                          _createVNode(_component_report_data_table, {\n                            columns: _ctx.drugSetColumns,\n                            rows: _ctx.drugSetRows,\n                            config: {\n                                    tableCssTheme: 'art-report-theme'\n                                }\n                          }, null, 8, [\"columns\", \"rows\"])\n                        ]),\n                        _: 1\n                      })\n                    ]),\n                    _: 1\n                  })\n                ]),\n                _: 1\n              })\n            ]),\n            _: 1\n          })\n        ]),\n        _: 1\n      }),\n      _createVNode(_component_ion_footer, null, {\n        default: _withId(() => [\n          _createVNode(_component_ion_toolbar, { color: \"dark\" }, {\n            default: _withId(() => [\n              _createVNode(_component_ion_button, {\n                onClick: _ctx.cancel,\n                slot: \"start\",\n                color: \"danger\",\n                size: \"large\"\n              }, {\n                default: _withId(() => [\n                  _hoisted_2\n                ]),\n                _: 1\n              }, 8, [\"onClick\"]),\n              (_ctx.hasSelectedDrugSet)\n                ? (_openBlock(), _createBlock(_component_ion_button, {\n                    key: 0,\n                    onClick: _ctx.voidDrugset,\n                    slot: \"end\",\n                    color: \"danger\",\n                    size: \"large\"\n                  }, {\n                    default: _withId(() => [\n                      _hoisted_3\n                    ]),\n                    _: 1\n                  }, 8, [\"onClick\"]))\n                : _createCommentVNode(\"\", true),\n              _createVNode(_component_ion_button, {\n                onClick: _ctx.addDrugset,\n                slot: \"end\",\n                color: \"success\",\n                size: \"large\"\n              }, {\n                default: _withId(() => [\n                  _hoisted_4\n                ]),\n                _: 1\n              }, 8, [\"onClick\"])\n            ]),\n            _: 1\n          })\n        ]),\n        _: 1\n      })\n    ]),\n    _: 1\n  }))\n})","\nimport { computed, defineComponent, onMounted, ref } from 'vue'\nimport ViewPort from \"@/components/DataViews/ViewPort.vue\"\nimport ReportDataTable from \"@/components/DataViews/tables/ReportDataTable.vue\"\nimport Table from \"@/components/DataViews/tables/ReportDataTable\"\nimport {\n    IonPage,\n    IonList,\n    IonItem,\n    IonLabel,\n    IonButton,\n    IonContent,\n    IonHeader,\n    IonGrid,\n    IonRow,\n    IonCol,\n    IonTitle,\n    IonFooter,\n    IonToolbar\n} from \"@ionic/vue\"\nimport { AncDrugSetService, NewDrugSet } from '../../Services/anc_drug_set'\nimport { isEmpty } from 'lodash'\nimport { useRouter } from 'vue-router'\nimport { alertConfirmation, toastWarning } from '@/utils/Alerts'\n\nexport default defineComponent({\n    components: {\n        IonPage,\n        ReportDataTable,\n        IonList,\n        IonItem,\n        IonLabel,\n        ViewPort,\n        IonButton,\n        IonContent,\n        IonHeader,\n        IonGrid,\n        IonRow,\n        IonCol,\n        IonTitle,\n        IonFooter,\n        IonToolbar\n    },\n    setup() {\n        const router = useRouter()\n        const selectedDrugSet = ref({} as NewDrugSet) \n        const drugSets = ref([] as NewDrugSet[])\n        const drugSetColumns = [\n            [\n                Table.thTxt('Drug'),\n                Table.thTxt('Duration in days'),\n                Table.thTxt('Frequency')\n            ]\n        ]\n        const hasSelectedDrugSet = computed(() => {\n            return !isEmpty(drugSets.value)\n        })\n        const drugSetRows = computed(() => {\n            return selectedDrugSet.value?.drugs?.map(drugSet => [\n                Table.td(drugSet['drug_name'] || 'N/A'),\n                Table.td(drugSet.duration || 'N/A'),\n                Table.td(drugSet.frequency)\n            ]) || []\n        })\n        onMounted(async () => {\n            drugSets.value = await AncDrugSetService.getDrugSets() as NewDrugSet[]\n            if (!isEmpty(drugSets.value)) {\n                selectedDrugSet.value = drugSets.value[0]\n            }\n        })\n\n        function cancel() {\n            router.back()\n        }\n\n        function addDrugset() {\n            router.push({\n                name: 'add anc drugset'\n            })\n        }\n\n        async function voidDrugset() {\n            if((await alertConfirmation('Are you sure you want to void this drug set?'))){\n                try {\n                    await AncDrugSetService.voidDrugSet(selectedDrugSet.value.id || -1)\n                    drugSets.value = drugSets.value.filter(d => d.id != selectedDrugSet.value.id)\n                    if (!isEmpty(drugSets.value)) {\n                        selectedDrugSet.value = drugSets.value[0]\n                    } else {\n                        selectedDrugSet.value = {} as any\n                    }\n                } catch (e) {\n                    toastWarning(`e`)\n                }\n            }\n        }\n        return {\n            cancel,\n            addDrugset,\n            voidDrugset,\n            drugSets,\n            hasSelectedDrugSet,\n            selectedDrugSet,\n            drugSetColumns,\n            drugSetRows\n        }\n    }\n})\n","import { render } from \"./AncDrugsetManager.vue?vue&type=template&id=31e11cd2&scoped=true&ts=true\"\nimport script from \"./AncDrugsetManager.vue?vue&type=script&lang=ts\"\nexport * from \"./AncDrugsetManager.vue?vue&type=script&lang=ts\"\n\nimport \"./AncDrugsetManager.vue?vue&type=style&index=0&id=31e11cd2&scoped=true&lang=css\"\n\nimport exportComponent from \"/home/andrew-dev/Projects/HIS-Core/node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-31e11cd2\"]])\n\nexport default __exports__","export * from \"-!../../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../../../node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/index.js??ref--0-1!./AncDrugsetManager.vue?vue&type=style&index=0&id=31e11cd2&scoped=true&lang=css\"","import { Service } from \"@/services/service\";\n\nexport interface AncDrugSetDrugs {\n    drug: number;\n    drug_name?: string;\n    quantity: number;\n    duration?: number;\n    frequency: string;\n}\n\nexport interface NewDrugSet {\n    id?: number;\n    datetime?: string;\n    name: string;\n    description: string;\n    drugs: AncDrugSetDrugs[];\n}\n\nexport class AncDrugSetService extends Service {\n    static saveDrugSet(drugSet: NewDrugSet) {\n        const data  = {...drugSet}\n        data['datetime'] = Service.getSessionDate()\n        return this.postJson('/drug_sets', drugSet)\n    }\n\n    static voidDrugSet(setID: number) {\n        return this.void(`/drug_sets/${setID}`, { date: this.getSessionDate()})\n    }\n\n    static async getDrugSets() {\n        const data = await this.getJson('drug_sets')\n        if (data) {\n            return Object.keys(data['set_names'])\n                .reduce((sets: Array<any>, setKey: string) => {\n                    const name = data['set_names'][setKey]\n                    const description = data['set_descriptions'][setKey]\n                    const drugs = data['drug_sets'][setKey]\n                    sets.push({\n                        id: parseInt(setKey),\n                        name,\n                        description,\n                        drugs: Object.keys(drugs).reduce(\n                            (a: any, k: string) => [\n                                ...a, { \n                                    'id': parseInt(k), ...drugs[k],\n                                    'drug_name': drugs[k].drug_name,\n                                    'duration': parseInt(drugs[k].duration),\n                                    'frequency': drugs[k].frequency,\n                                    'units': drugs[k].units,\n                                }], []\n                        )\n                    })\n                    return sets\n                }, [])\n        }\n        return []\n    }\n}"],"sourceRoot":""}