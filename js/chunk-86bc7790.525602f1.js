(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-86bc7790"],{"3b8c":function(e,t,n){"use strict";n.d(t,"a",(function(){return p}));var r=n("1da1"),i=n("d4ec"),a=n("bee2"),o=n("262e"),c=n("2caf"),u=(n("ac1f"),n("466d"),n("99af"),n("d3b7"),n("159b"),n("d81d"),n("96cf"),n("cc6f")),s=n("7957"),d=n("5a0c"),l=n.n(d),f=n("2ef0"),p=function(e){Object(o["a"])(n,e);var t=Object(c["a"])(n);function n(e,r){return Object(i["a"])(this,n),t.call(this,e,53,r)}return Object(a["a"])(n,[{key:"getFamilyPlanningMethods",value:function(){return["ORAL CONTRACEPTIVE PILLS","DEPO-PROVERA","INTRAUTERINE CONTRACEPTION","CONTRACEPTIVE IMPLANT","MALE CONDOMS","FEMALE CONDOMS","TUBAL LIGATION","NONE"]}},{key:"getTptTreatmentStatus",value:function(){var e=Object(r["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",u["a"].getJson("/patients/".concat(this.patientID,"/tpt_status")));case 1:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"patientHitMenopause",value:function(){var e=Object(r["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,s["a"].getFirstObs(this.patientID,"Why does the woman not use birth control");case 2:return t=e.sent,e.abrupt("return",!(!t||"string"!==typeof(null===t||void 0===t?void 0:t.value_text))&&(!!t.value_text.match(/menopause/i)&&u["a"].obsInValidPeriod(t)));case 4:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"hasTreatmentHistoryObs",value:function(){var e=Object(r["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,s["a"].getFirstObs(this.patientID,"Previous TB treatment history");case 2:return t=e.sent,e.abrupt("return",t&&u["a"].obsInValidPeriod(t));case 4:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"getDrugSideEffects",value:function(){return u["a"].getJson("programs/".concat(u["a"].getProgramID(),"/patients/").concat(this.patientID,"/medication_side_effects"),{date:this.date})}},{key:"getClient",value:function(){return u["a"].getFirstValueCoded(this.patientID,"Patient present")}},{key:"clientDueForCxCa",value:function(){var e=Object(r["a"])(regeneratorRuntime.mark((function e(){var t,n,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,u["a"].getJson("last_cxca_screening_details",{id:this.patientID,date:this.date});case 2:if(t=e.sent,Object(f["isEmpty"])(t)){e.next=7;break}return n=t["date_screened"],r=l()(this.date).diff(n,"years"),e.abrupt("return",r>=1);case 7:return e.abrupt("return",!0);case 8:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"clientHasHadAHysterectomy",value:function(){var e=Object(r["a"])(regeneratorRuntime.mark((function e(){var t,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,u["a"].getFirstValueCoded(this.patientID,"Reason for NOT offering CxCa");case 2:if(t=e.sent,"Hysterectomy"!==t){e.next=5;break}return e.abrupt("return",!0);case 5:return e.next=7,u["a"].getFirstValueText(this.patientID,"Treatment");case 7:if(n=e.sent,"Hysterectomy"!==n){e.next=10;break}return e.abrupt("return",!0);case 10:return e.abrupt("return",!1);case 11:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"getTLObs",value:function(){var e=Object(r["a"])(regeneratorRuntime.mark((function e(){var t,n,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t=function(e){return e&&"Tubal ligation"===e.value_coded&&u["a"].obsInValidPeriod(e)},e.next=3,u["a"].getFirstObs(this.patientID,"Family planning");case 3:if(n=e.sent,!t(n)){e.next=8;break}return e.abrupt("return",t(n));case 8:return e.next=10,u["a"].getFirstObs(this.patientID,"Method of family planning");case 10:return r=e.sent,e.abrupt("return",t(r));case 12:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"getPreviousDrugs",value:function(){var e=Object(r["a"])(regeneratorRuntime.mark((function e(){var t,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,u["a"].getJson("patients/".concat(this.patientID,"/drugs_received"));case 2:if(t=e.sent,t){e.next=5;break}return e.abrupt("return");case 5:return n={},t.forEach((function(e){n[e.drug_inventory_id]=e})),e.abrupt("return",n);case 8:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"familyPlanningMethods",value:function(e,t){var n={"ORAL CONTRACEPTIVE PILLS":{"DEPO-PROVERA":"N","INTRAUTERINE CONTRACEPTION":"N","CONTRACEPTIVE IMPLANT":"N","MALE CONDOMS":"Y","FEMALE CONDOMS":"Y","RYTHM METHOD":"N","TUBAL LIGATION":"N",VASECTOMY:"N"},"DEPO-PROVERA":{"ORAL CONTRACEPTIVE PILLS":"N","INTRAUTERINE CONTRACEPTION":"N","CONTRACEPTIVE IMPLANT":"N","MALE CONDOMS":"Y","FEMALE CONDOMS":"Y","RYTHM METHOD":"N","TUBAL LIGATION":"N",VASECTOMY:"N"},"INTRAUTERINE CONTRACEPTION":{"ORAL CONTRACEPTIVE PILLS":"N","DEPO-PROVERA":"N","CONTRACEPTIVE IMPLANT":"N","MALE CONDOMS":"Y","FEMALE CONDOMS":"Y","RYTHM METHOD":"N","TUBAL LIGATION":"N",VASECTOMY:"N"},"CONTRACEPTIVE IMPLANT":{"ORAL CONTRACEPTIVE PILLS":"N","DEPO-PROVERA":"N","INTRAUTERINE CONTRACEPTION":"N","MALE CONDOMS":"Y","FEMALE CONDOMS":"Y","RYTHM METHOD":"N","TUBAL LIGATION":"N",VASECTOMY:"N"},"MALE CONDOMS":{"ORAL CONTRACEPTIVE PILLS":"Y","DEPO-PROVERA":"Y","INTRAUTERINE CONTRACEPTION":"Y","CONTRACEPTIVE IMPLANT":"Y","FEMALE CONDOMS":"Y","RYTHM METHOD":"Y","TUBAL LIGATION":"N",VASECTOMY:"Y"},"FEMALE CONDOMS":{"ORAL CONTRACEPTIVE PILLS":"Y","DEPO-PROVERA":"Y","INTRAUTERINE CONTRACEPTION":"Y","CONTRACEPTIVE IMPLANT":"Y","MALE CONDOMS":"Y","RYTHM METHOD":"Y","TUBAL LIGATION":"N",VASECTOMY:"Y"},"RYTHM METHOD":{"ORAL CONTRACEPTIVE PILLS":"N","DEPO-PROVERA":"N","INTRAUTERINE CONTRACEPTION":"N","MALE CONDOMS":"Y","FEMALE CONDOMS":"Y","CONTRACEPTIVE IMPLANT":"N","TUBAL LIGATION":"N",VASECTOMY:"N"},"TUBAL LIGATION":{"ORAL CONTRACEPTIVE PILLS":"N","DEPO-PROVERA":"N","INTRAUTERINE CONTRACEPTION":"N","MALE CONDOMS":"N","FEMALE CONDOMS":"N","CONTRACEPTIVE IMPLANT":"N","RYTHM METHOD":"N",VASECTOMY:"N"},VASECTOMY:{"ORAL CONTRACEPTIVE PILLS":"N","DEPO-PROVERA":"Y","INTRAUTERINE CONTRACEPTION":"N","MALE CONDOMS":"Y","FEMALE CONDOMS":"N","CONTRACEPTIVE IMPLANT":"Y","RYTHM METHOD":"N","TUBAL LIGATION":"N"},NONE:{"ORAL CONTRACEPTIVE PILLS":"N","DEPO-PROVERA":"N","INTRAUTERINE CONTRACEPTION":"N","MALE CONDOMS":"N","FEMALE CONDOMS":"N","CONTRACEPTIVE IMPLANT":"N","RYTHM METHOD":"N","TUBAL LIGATION":"N"}},r=n[e];return t.map((function(e){return"N"===r[e.label]?{label:e.label,value:e.value,isChecked:!1,disabled:!0}:{label:e.label,value:e.value,isChecked:e.isChecked,disabled:!1}}))}}]),n}(u["a"])},"519d":function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var r=n("bee2"),i=n("d4ec"),a=n("262e"),o=n("2caf"),c=n("cc6f"),u=function(e){Object(a["a"])(n,e);var t=Object(o["a"])(n);function n(e,r){return Object(i["a"])(this,n),t.call(this,e,9,r)}return Object(r["a"])(n)}(c["a"])},"5e76":function(e,t,n){"use strict";n.d(t,"a",(function(){return d})),n.d(t,"c",(function(){return f})),n.d(t,"d",(function(){return p})),n.d(t,"b",(function(){return h})),n.d(t,"e",(function(){return O}));var r=n("53ca"),i=n("1da1"),a=(n("96cf"),n("d3b7"),n("4de4"),n("07ac"),n("99af"),n("3ca3"),n("ddb0"),n("25f0"),n("d81d"),n("7957")),o=n("0011"),c=n("2ef0"),u=n("b211"),s=n("b5e4");function d(e){return l.apply(this,arguments)}function l(){return l=Object(i["a"])(regeneratorRuntime.mark((function e(t){var n,i,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:e.t0=regeneratorRuntime.keys(t);case 1:if((e.t1=e.t0()).done){e.next=16;break}if(n=e.t1.value,!t[n].required||!Object(c["isEmpty"])(t[n].value)){e.next=6;break}return t[n].error="This field is required",e.abrupt("continue",1);case 6:if("function"===typeof t[n].validation){e.next=9;break}return t[n].error="",e.abrupt("continue",1);case 9:return i="object"===Object(r["a"])(t[n].value)?t[n].value:{label:t[n].value,value:t[n].value},e.next=12,t[n].validation(i,t);case 12:a=e.sent,a&&a.length>0?(t[n].error=a.toString(),console.log(n,t[n].error)):t[n].error="",e.next=1;break;case 16:return e.abrupt("return",Object.values(t).every((function(e){var t=e.error;return!t})));case 17:case"end":return e.stop()}}),e)}))),l.apply(this,arguments)}function f(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n={},r={};for(var i in e)if(e[i].value){var a=t?Object(o["i"])(i):i;n[a]=e[i].value,"function"===typeof e[i].computedValue&&(r[a]=e[i].computedValue(e[i].value,e))}return{formData:n,computedFormData:r}}function p(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=Object.values(e).filter((function(e){return e&&(e.tag===t||""===t)})).reduce((function(e,t){var n=t.obs?t.obs:t;return Array.isArray(n)?e=e.concat(n):e.push(n),e}),[]);return Promise.all(n)}function h(e,t){return g.apply(this,arguments)}function g(){return g=Object(i["a"])(regeneratorRuntime.mark((function e(t,n){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Promise.all(n.map(function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(n){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",a["a"].buildGroupValueCoded(t,n.label,n.isChecked?"Yes":"No"));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)}))),g.apply(this,arguments)}function O(e,t,n){return v.apply(this,arguments)}function v(){return v=Object(i["a"])(regeneratorRuntime.mark((function e(t,n,r){var i,a,o,c;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,d(t);case 2:if(e.sent){e.next=4;break}return e.abrupt("return");case 4:return e.prev=4,i=(null===r||void 0===r?void 0:r.showloader)||!1,i&&u["a"].show(),a=f(t,null===r||void 0===r?void 0:r.underscoreKeys),o=a.formData,c=a.computedFormData,e.next=10,n(o,c);case 10:if(!i){e.next=13;break}return e.next=13,u["a"].hide();case 13:e.next=19;break;case 15:e.prev=15,e.t0=e["catch"](4),Object(s["e"])("".concat(e.t0)),u["a"].hide();case 19:case"end":return e.stop()}}),e,null,[[4,15]])}))),v.apply(this,arguments)}},"81f9":function(e,t,n){"use strict";n.r(t);var r=n("7a23");function i(e,t,n,i,a,o){var c=Object(r["resolveComponent"])("ion-col"),u=Object(r["resolveComponent"])("ion-row"),s=Object(r["resolveComponent"])("ion-grid"),d=Object(r["resolveComponent"])("layout");return Object(r["openBlock"])(),Object(r["createBlock"])(d,null,{default:Object(r["withCtx"])((function(){return[Object(r["createVNode"])(s,null,{default:Object(r["withCtx"])((function(){return[Object(r["createVNode"])(u,{class:"his-card"},{default:Object(r["withCtx"])((function(){return[e.isReady?(Object(r["openBlock"])(),Object(r["createBlock"])(c,{key:0,size:"12"},{default:Object(r["withCtx"])((function(){return[(Object(r["openBlock"])(),Object(r["createBlock"])(r["KeepAlive"],null,[(Object(r["openBlock"])(),Object(r["createBlock"])(Object(r["resolveDynamicComponent"])(e.activeForm),{patient:e.patient,isNewPatient:e.isNewPatient,sitePrefix:e.sitePrefix,onOnValue:e.onValue,onOnNext:e.onNext,onOnPrevious:e.onPrevious,onOnFinish:e.onFinish},null,8,["patient","isNewPatient","sitePrefix","onOnValue","onOnNext","onOnPrevious","onOnFinish"]))],1024))]})),_:1})):Object(r["createCommentVNode"])("",!0)]})),_:1})]})),_:1})]})),_:1})}var a=n("1da1"),o=(n("96cf"),n("d3b7"),n("3ca3"),n("ddb0"),n("25f0"),n("ac1f"),n("466d"),n("159b"),n("99af"),n("d81d"),n("4de4"),n("caad"),n("6c02")),c=n("8d56"),u=n("8a30"),s=n("23e6"),d=n("8e8b"),l=n("b5e4"),f=n("b211"),p=n("519d"),h=n("3b8c"),g=n("b515"),O=n("8df6"),v=n("5e76"),E=n("74f4"),A=n("85d6"),T=n("ec2a"),b=n("2ef0"),m=Object(r["defineComponent"])({components:{ClinicRegistration:Object(r["defineAsyncComponent"])((function(){return Promise.all([n.e("chunk-27fd01c2"),n.e("chunk-b8c66f70"),n.e("chunk-9c160b60")]).then(n.bind(null,"5eb3"))})),Staging:Object(r["defineAsyncComponent"])((function(){return Promise.all([n.e("chunk-27fd01c2"),n.e("chunk-b8c66f70"),n.e("chunk-a1431552")]).then(n.bind(null,"27dd"))})),Layout:c["a"],IonGrid:u["IonGrid"],IonRow:u["IonRow"],IonCol:u["IonCol"],IonButton:u["IonButton"]},setup:function(){var e=Object(o["e"])(),t=Object(o["f"])(),n=Object(r["ref"])(!1),i=Object(r["reactive"])({}),c=Object(r["ref"])("ClinicRegistration"),u=Object(r["ref"])(""),m=parseInt(e.params.id.toString()||""),N=!!e.params.new.toString().match(/true/i),C=Object(r["computed"])((function(){return"Staging"===c.value})),I=Object(r["computed"])((function(){return"Staging"===c.value})),y=Object(r["ref"])({}),w=Object(r["ref"])(""),R=Object(r["ref"])([]),P=function(e){return i[e.type]=e.data},D=function(){return c.value="Staging"},M=function(){return c.value="ClinicRegistration"},S=function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(){var n,r,a,o,c,s,d,C,I,w,P,D,M,S,L,k;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=i.registration,r=n.arvNumberEditable,a=n.formData,o=n.computedData,c=i.staging.computedData,e.next=4,p["a"].setSessionDate(a.initialVisitDate);case 4:if(s=new p["a"](m,-1),d=new h["a"](m,-1),C=new g["a"](m,-1),I=new O["a"](m,-1),w=new A["a"](m,y.value.getAge(),-1),e.prev=9,f["a"].show(),N||Object(b["isEmpty"])(R.value)||R.value.forEach((function(e){T["a"].voidEncounter(e,"Duplicate")})),!r||!a.arvNumber){e.next=15;break}return e.next=15,y.value.createArvNumber("".concat(u.value,"-ARV-").concat(a.arvNumber));case 15:return e.next=17,I.createEncounter();case 17:return e.next=19,Object(v["d"])(o,"patient type");case 19:return P=e.sent,e.next=22,I.saveObservationList(P);case 22:return e.next=24,s.createEncounter();case 24:return e.next=26,Object(v["d"])(o,"registration");case 26:return D=e.sent,e.next=29,s.saveObservationList(D);case 29:if("Yes"!==a.everRegisteredAtClinic){e.next=44;break}return e.next=32,C.createEncounter();case 32:return e.next=34,Object(v["d"])(o,"vitals");case 34:return M=e.sent,e.next=37,C.saveObservationList(M);case 37:return e.next=39,d.createEncounter();case 39:return e.next=41,Object(v["d"])(o,"consultation");case 41:return S=e.sent,e.next=44,d.saveObservationList(S);case 44:return e.next=46,w.createEncounter();case 46:return e.next=48,Object(v["d"])(c);case 48:return L=e.sent,e.next=51,w.saveObservationList(L);case 51:if(!N){e.next=56;break}return k=new E["a"](m),k.setProgramDate(a.initialVisitDate),e.next=56,k.enrollProgram();case 56:return e.next=58,f["a"].hide();case 58:return e.next=60,p["a"].resetSessionDate();case 60:return e.next=62,Object(l["d"])("Saved successfully");case 62:t.push("/emc/patient/".concat(m)),e.next=71;break;case 65:return e.prev=65,e.t0=e["catch"](9),e.next=69,f["a"].hide();case 69:console.log(e.t0),Object(l["e"])("".concat(e.t0));case 71:case"end":return e.stop()}}),e,null,[[9,65]])})));return function(){return e.apply(this,arguments)}}();return Object(r["onMounted"])(Object(a["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,s["a"].findByID(m);case 2:t=e.sent,y.value=new s["a"](t),d["a"].get("SITE_PREFIX").then((function(e){return u.value=e})),n.value=!0,N||T["a"].getEncounters(m,{encounter_type_id:9}).then((function(e){if(!Object(b["isEmpty"])(e)){var t=[9,53,6,5,52];w.value=Object(b["get"])(e,"[0].encounter_datetime",""),w.value&&T["a"].getEncounters(m,{date:w.value}).then((function(e){R.value=e.filter((function(e){return t.includes(e.encounter_type)})).map((function(e){return e.encounter_id}))}))}}));case 7:case"end":return e.stop()}}),e)})))),{activeForm:c,patient:y,isNewPatient:N,isStaging:C,isRegistration:I,sitePrefix:u,isReady:n,onValue:P,onFinish:S,onNext:D,onPrevious:M}}}),N=n("d959"),C=n.n(N);const I=C()(m,[["render",i]]);t["default"]=I},"85d6":function(e,t,n){"use strict";n.d(t,"a",(function(){return T}));var r,i=n("1da1"),a=n("d4ec"),o=n("bee2"),c=n("262e"),u=n("2caf"),s=(n("96cf"),n("ac1f"),n("466d"),n("cc6f")),d=n("5713"),l=(n("caad"),n("2532"),n("d3b7"),n("b0c0"),n("8158")),f=n("b5e4"),p={"Adults with stage 4 conditions":{concept:"WHO STAGE IV ADULT",priority:1,conditions:{stage:function(e){return 4===e}}},"Classify as stage 4 when reason for ART is WHO STAGE 4":{concept:"WHO STAGE IV ADULT",priority:2,conditions:{reasonForArt:function(e){return"WHO STAGE IV ADULT"===e}}},"Adults with stage 3 conditions":{concept:"WHO STAGE III ADULT",priority:3,conditions:{stage:function(e){return 3===e}}},"Adults with stage 2 conditions":{concept:"WHO STAGE II ADULT",priority:4,conditions:{stage:function(e){return 2===e}}},"Adults with stage 1 conditions":{concept:"WHO STAGE I ADULT",priority:5,conditions:{stage:function(e){return 1===e}}}},h={"Children with stage 4 conditions":{concept:"WHO STAGE IV PEDS",priority:1,conditions:{stage:function(e){return 4===e}}},"Classify as stage 4 when reason for ART is WHO STAGE 4":{concept:"WHO STAGE IV PEDS",priority:2,conditions:{reasonForArt:function(e){return"WHO STAGE IV PEDS"===e}}},"For children with stage 3 conditions":{concept:"WHO STAGE III PEDS",priority:3,conditions:{stage:function(e){return 3===e}}},"Children with stage 2 conditions":{concept:"WHO STAGE II PEDS",priority:4,conditions:{stage:function(e){return 2===e}}},"Children with stage 1 conditions":{concept:"WHO STAGE I PEDS",priority:5,conditions:{stage:function(e){return 1===e}}}},g={"Warn if Severe weight loss is selected when actual patient BMI is acceptable":{priority:1,actions:{alert:function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(f["a"])("Patient's BMI of ".concat(t.bmi," greater than 18.5, do you wish to proceed?"),{confirmBtnLabel:"Yes, keep severe weightloss",cancelBtnLabel:"No, cancel"});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}()},conditions:{selectedCondition:function(e){return"Severe weight loss >10% and/or BMI <18.5kg/m^2, unexplained"===e},bmi:function(e){return e>18.5}}},"Warn for contradicting stage defining conditions":{priority:1,actions:{alert:function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(f["a"])("CONTRADICTING STAGE DEFINING CONDITIONS",{confirmBtnLabel:"Keep Asymptomatic",cancelBtnLabel:"Keep other(s)"});case 2:if(n=e.sent,!n){e.next=10;break}return t.stage=1,t.selectedConditions=[],t.stageThreeConditions=[],t.stageFourConditions=[],t.stageTwoConditions=[],e.abrupt("return",!0);case 10:return e.abrupt("return",!1);case 11:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}()},conditions:{selectedCondition:function(e){return"Asymptomatic HIV infection"===e},stage:function(e){return e>=2}}}},O={"For children whose current weight percentile is less than 70":{priority:1,actions:{isChecked:!0},description:{color:"danger",show:"always",info:function(e){return"Child has a low weight percentile of ".concat(e.weightPercentile)}},conditions:{selectedCondition:function(e){return"Severe unexplained wasting or malnutrition not responding to treatment (weight-for-height/ -age <70% or MUAC less than 11cm or oedema)"===e},weightPercentile:function(e){return e<70}}},"Enable Moderate unexplained malnutrition for children whose weight for height is 70-79%":{priority:1,actions:{isChecked:!0},description:{color:"danger",show:"always",info:function(e){return"Child has weight percentile of ".concat(e.weightPercentile)}},conditions:{selectedCondition:function(e){return"Moderate unexplained wasting/malnutrition not responding to treatment (weight-for-height/ -age 70-79% or muac 11-12 cm)"===e},weightPercentile:function(e){return e>=70&&e<=79}}},"Disable moderate weight loss when Severe unexplained weight loss is chosen":{priority:2,actions:{isChecked:!1,disabled:!0},description:{color:"secondary",show:"always",info:function(){return"Severe weight loss/manutrition was already selected"}},conditions:{selectedCondition:function(e){return"Moderate unexplained wasting/malnutrition not responding to treatment (weight-for-height/ -age 70-79% or muac 11-12 cm)"===e},selectedConditions:function(e){return e.includes("Severe unexplained wasting or malnutrition not responding to treatment (weight-for-height/ -age <70% or MUAC less than 11cm or oedema)")}}}},v={"Adults with a BMI less than 16":{priority:1,actions:{isChecked:!0},description:{color:"danger",show:"always",info:function(e){return"Adult has a low BMI of ".concat(e.bmi)}},conditions:{selectedCondition:function(e){return"Severe weight loss >10% and/or BMI <18.5kg/m^2, unexplained"===e},bmi:function(e){return e<16}}},"Adults whose BMI is between 16 and 18":{priority:3,actions:{isChecked:!0},description:{color:"warning",show:"onChecked",info:function(e){return"BMI of ".concat(e.bmi," is between 16 and 18")}},conditions:{selectedCondition:function(e){return"Moderate weight loss less than or equal to 10 percent, unexplained"===e},bmi:function(e){return e>=16&&e<=18.5}}},"Disable Moderate weight loss if severe weightloss is selected":{priority:2,actions:{isChecked:!1,disabled:!0},description:{color:"secondary",show:"always",info:function(){return"Severe weight loss was already selected"}},conditions:{selectedCondition:function(e){return"Moderate weight loss less than or equal to 10 percent, unexplained"===e},selectedConditions:function(e){return e.includes("Severe weight loss >10% and/or BMI <18.5kg/m^2, unexplained")}}}},E={"Has stage 4 conditions":{concept:"WHO STAGE IV PEDS",priority:1,conditions:{stage:function(e){return 4===e}}},"Has stage 3 conditions":{concept:"WHO STAGE III PEDS",priority:2,conditions:{stage:function(e){return 3===e}}},"Children under twelve months who tested positive on Rapid test and have presumed severe HIV":{concept:"PRESUMED SEVERE HIV",priority:3,conditions:{ageInMonths:function(e){return e<12},selectedConditions:function(e){var t=l["a"].getConceptsByCategory("pshd_condition");for(var n in t)if(e.includes(n))return!0;return!1},testType:function(e){return"HIV rapid test"===e}}},"Children under twelve who tested positive via HIV DNA Polymerase Chain Reaction test":{concept:"HIV DNA polymerase chain reaction",priority:4,conditions:{ageInMonths:function(e){return e<12},testType:function(e){return"HIV DNA polymerase chain reaction"===e}}},"Children who are less than 24 months":{concept:"HIV infected",priority:5,conditions:{ageInMonths:function(e){return e<24}}},"Children between 24 and 56 months who have stage 2 or 1 conditions":{concept:"CD4 COUNT LESS THAN OR EQUAL TO 750",priority:6,conditions:{ageInMonths:function(e){return e>=24&&e<=56},cd4:function(e){return e<=750},cd4Modifier:function(e){return"<"===e||"="===e},stage:function(e){return e<=2}}},"Children with CD4 count less than 500 and have stage 1 and stage 2 conditions":{concept:"CD4 COUNT LESS THAN OR EQUAL TO 500",priority:7,conditions:{cd4:function(e){return e<=500},cd4Modifier:function(e){return"<"===e||"="===e},stage:function(e){return e<=2}}},"Children over the date 2014-04-01 who are more than five years old and have cd4 count less than 500":{concept:"CD4 COUNT LESS THAN OR EQUAL TO 500",priority:9,conditions:{date:function(e){return e>="2014-04-01"},age:function(e){return e>5},cd4:function(e){return e<=500},cd4Modifier:function(e){return"<"===e||"="===e}}},"Children over date 2014-04-01 and less than Five years old":{concept:"HIV infected",priority:10,conditions:{date:function(e){return e>="2014-04-01"},age:function(e){return e<=5}}},"Asymptomatic patient with either stage one or stage two conditions":{concept:"Asymptomatic",priority:11,conditions:{stage:function(e){return e<=2}}}},A={"Has stage 4 conditions":{concept:"WHO STAGE IV ADULT",priority:1,conditions:{stage:function(e){return 4===e}}},"Has HIV wasting syndrome identified in stage 3":{concept:"WHO STAGE IV ADULT",priority:2,conditions:{selectedConditions:function(e){var t=l["a"].getConceptsByCategory("severe_hiv_wasting_syndrome"),n=t.reduce((function(t,n){return e.includes(n.name)?t+1:0}),0);return n>=2}}},"Has stage 3 conditions":{concept:"WHO STAGE III ADULT",priority:3,conditions:{stage:function(e){return 3===e}}},"CD4 less than 350 for adults before 2014":{concept:"cd4 less than or equal to 350",priority:4,conditions:{date:function(e){return e<"2014-04-01"},cd4:function(e){return e<=350},cd4Modifier:function(e){return"<"===e||"="===e}}},"CD4 less than 250 for adults after 2014":{concept:"cd4 less than or equal to 250",priority:4,conditions:{date:function(e){return e>="2014-04-01"},cd4:function(e){return e<=250},cd4Modifier:function(e){return"<"===e||"="===e}}},"CD4 less than 350 for adults after 2014":{concept:"cd4 less than or equal to 350",priority:5,conditions:{date:function(e){return e>="2014-04-01"},cd4:function(e){return e<=350},cd4Modifier:function(e){return"<"===e||"="===e}}},"CD4 less than 500 for adults after 2014":{concept:"cd4 less than or equal to 500",priority:6,conditions:{date:function(e){return e>="2014-04-01"},cd4:function(e){return e<=500},cd4Modifier:function(e){return"<"===e||"="===e}}},"Women who are breast feeding":{concept:"BREASTFEEDING",priority:8,conditions:{gender:function(e){return"F"===e},breastFeeding:function(e){return"Yes"===e},stage:function(e){return e<=2}}},"Women who are pregnant":{concept:"PATIENT PREGNANT",priority:7,conditions:{gender:function(e){return"F"===e},pregnant:function(e){return"Yes"===e},stage:function(e){return e<=2}}},"Asymptomatic patient with either stage one or stage two conditions":{concept:"Asymptomatic",priority:9,conditions:{stage:function(e){return e<=2}}}};(function(e){e["ADULT_STAGE_4"]="stage_4_conditions_adults",e["ADULT_STAGE_3"]="stage_3_conditions_adults",e["ADULT_STAGE_2"]="stage_2_conditions_adults",e["ADULT_STAGE_1"]="stage_1_conditions_adults",e["PEDAID_STAGE_4"]="stage_4_conditions_pedaids",e["PEDAID_STAGE_3"]="stage_3_conditions_pedaids",e["PEDAID_STAGE_2"]="stage_2_conditions_pedaids",e["PEDAID_STAGE_1"]="stage_1_conditions_pedaids"})(r||(r={}));var T=function(e){Object(c["a"])(n,e);var t=Object(u["a"])(n);function n(e,r,i){var o;return Object(a["a"])(this,n),o=t.call(this,e,52,i),o.age=r,o.confirmatoryTest=null,o}return Object(o["a"])(n,[{key:"isAdult",value:function(){return this.age>=15}},{key:"isPedaid",value:function(){return this.age<=14}},{key:"setAge",value:function(e){this.age=e}},{key:"getFacilities",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return d["a"].getFacilities({name:e})}},{key:"getConfirmatoryTestType",value:function(){return this.confirmatoryTest}},{key:"cd4CountIsValid",value:function(e){try{return!!e.match(/^(=|<|>)([0-9]*)$/m)}catch(t){return!1}}},{key:"getAlertGuidelines",value:function(){return g}},{key:"getWhoStageGuidelines",value:function(){return this.isAdult()?p:h}},{key:"getProgramEligibilityGuidelines",value:function(){return this.isAdult()?A:E}},{key:"getRecommendedConditionGuidelines",value:function(){return this.isAdult()?v:O}},{key:"getStagingConditions",value:function(e){var t=this.getStagingCategoryByNum(e);return s["a"].getConceptsByCategory(t)}},{key:"getAllWhoStages",value:function(){return s["a"].getConceptsByCategory("whole_staging_numbers")}},{key:"getAllReasonsForART",value:function(){return s["a"].getConceptsByCategory("reason_for_art")}},{key:"buildWhoStageObs",value:function(e){return this.buildValueCoded("Who stage",e)}},{key:"buildWhoCriteriaObs",value:function(e){return this.buildValueCoded("Who stages criteria present",e)}},{key:"buildReasonForArtObs",value:function(e){return this.buildValueCoded("Reason for ART eligibility",e)}},{key:"getStagingCategoryByNum",value:function(e){switch(e){case 1:return this.isAdult()?r.ADULT_STAGE_1:r.PEDAID_STAGE_1;case 2:return this.isAdult()?r.ADULT_STAGE_2:r.PEDAID_STAGE_2;case 3:return this.isAdult()?r.ADULT_STAGE_3:r.PEDAID_STAGE_3;case 4:return this.isAdult()?r.ADULT_STAGE_4:r.PEDAID_STAGE_4;default:return""}}},{key:"loadHivConfirmatoryTestType",value:function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,s["a"].getFirstValueCoded(this.patientID,"Confirmatory hiv test type");case 2:t=e.sent,t&&(this.confirmatoryTest=t);case 4:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()}]),n}(s["a"])},b211:function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var r=n("1da1"),i=(n("96cf"),n("8a30")),a={show:function(e){return Object(r["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,i["loadingController"].create({message:e||"Loading...",spinner:"crescent",translucent:!0});case 2:return t.abrupt("return",t.sent.present());case 3:case"end":return t.stop()}}),t)})))()},hide:function(){return Object(r["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",i["loadingController"].dismiss());case 1:case"end":return e.stop()}}),e)})))()}}},b515:function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var r=n("d4ec"),i=n("bee2"),a=n("262e"),o=n("2caf"),c=(n("ac1f"),n("466d"),n("99af"),n("d81d"),n("d3b7"),n("159b"),n("1276"),n("4de4"),n("b0c0"),n("cc6f")),u=n("2ef0"),s=function(e){Object(a["a"])(n,e);var t=Object(o["a"])(n);function n(e,i){return Object(r["a"])(this,n),t.call(this,e,6,i)}return Object(i["a"])(n,[{key:"isNotEmptyandNumber",value:function(e){return"".concat(e.value).match(/^-?\d+\.?\d*$/)?null:["Invalid entry for ".concat(e.label)]}},{key:"isNotEmptyandFloat",value:function(e){var t;return"".concat(e.value).match(/^\d{1,3}\.\d{1,5}$/)?null:["Invalid entry for ".concat(e.label,". Don't forget to add a decimal. e.g. 56.2 ").concat((null===(t=e.other)||void 0===t?void 0:t.modifier)||"")]}},{key:"checkMinMax",value:function(e,t,n){var r,i,a=[];parseFloat("".concat(e.value))<t&&a.push(["".concat(e.label," entered is less than minimum ").concat(t," ").concat((null===e||void 0===e||null===(r=e.other)||void 0===r?void 0:r.modifier)||"")]);parseFloat("".concat(e.value))>n&&a.push(["".concat(e.label," entered is greater than maximum ").concat(n," ").concat((null===e||void 0===e||null===(i=e.other)||void 0===i?void 0:i.modifier)||"")]);return a.length>0?a:null}},{key:"validateAll",value:function(e){var t=this,n=[];return e.map((function(e){var r=t.validator(e);return Object(u["isArray"])(r)?n.push(r):null})),n.length>0?n:null}},{key:"mergeErrors",value:function(e){var t=[];return e.forEach((function(e){Object(u["isArray"])(e)&&t.push(e)})),t.length>0?t:null}},{key:"isValidBPReading",value:function(e){var t=[],n="".concat(e.value).match(/^\d{1,3}\/\d{1,3}$/g)?null:["Invalid BP reading"];if(t.push(n),null==n){var r="".concat(e.value).split("/"),i={label:"Systolic",value:r[0]},a={label:"Diastolic",value:r[1]};t.push(this.checkMinMax(a,30,200)),t.push(this.checkMinMax(i,40,250))}return this.mergeErrors(t)}},{key:"validator",value:function(e){var t=this,n=[{name:"Weight",validator:function(e){var n=t.isNotEmptyandFloat(e),r=t.checkMinMax(e,2,250);return t.mergeErrors([n,r])}},{name:"Height",validator:function(e){var n=[];return n.push(t.isNotEmptyandNumber(e)),n.push(t.checkMinMax(e,40,220)),t.mergeErrors(n)}},{name:"BP",validator:function(e){return t.isValidBPReading(e)}},{name:"Temp",validator:function(e){var n=t.isNotEmptyandNumber(e),r=t.checkMinMax(e,30,42);return t.mergeErrors([n,r])}},{name:"SP02",validator:function(e){var n=t.checkMinMax(e,40,100);return t.mergeErrors([n])}},{name:"Pulse",validator:function(e){var n=t.checkMinMax(e,50,120);return t.mergeErrors([n])}}],r=n.filter((function(t){return t.name===e.label}));return r.length>0?r[0].validator(e):null}}]),n}(c["a"])}}]);
//# sourceMappingURL=chunk-86bc7790.525602f1.js.map