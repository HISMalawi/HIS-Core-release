(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d0af6a8"],{"0ddb":function(t,e,a){"use strict";a.r(e);var o=a("7a23");function r(t,e,a,r,s,i){const n=Object(o["resolveComponent"])("report-template"),d=Object(o["resolveComponent"])("ion-page");return Object(o["openBlock"])(),Object(o["createBlock"])(d,null,{default:Object(o["withCtx"])(()=>[Object(o["createVNode"])(n,{title:t.title,period:t.period,rows:t.rows,fields:t.fields,columns:t.columns,config:{showIndex:!0},reportPrefix:"Clinic",onReportConfiguration:t.onPeriod},null,8,["title","period","rows","fields","columns","onReportConfiguration"])]),_:1})}a("14d9"),a("13d5");var s=a("44e3"),i=a("9a5e"),n=a("4ba2"),d=a("9ceb"),l=a("ad8d"),c=a("2ef0"),h=Object(o["defineComponent"])({mixins:[s["a"]],components:{ReportTemplate:n["a"]},data:()=>({title:"TX RTT Report",cohort:{},rows:[],columns:[[d["a"].thTxt("Age group"),d["a"].thTxt("Gender"),d["a"].thTxt("Returned <3 mo"),d["a"].thTxt("Returned 3-5 mo"),d["a"].thTxt("Returned 6+ mo")]],aggregated:[]}),created(){this.fields=this.getDateDurationFields()},methods:{async onPeriod(t,e){this.rows=[],this.aggregated=[],this.report=new i["a"],this.report.setStartDate(e.start_date),this.report.setEndDate(e.end_date),this.period=this.report.getDateIntervalPeriod(),this.cohort=await this.report.getClinicTxRtt(),await this.setRows("F"),await this.setRows("M"),this.setMaleTotalsRow(),await this.setFemaleRows()},drillData(t,e,a,o){return this.aggregated.push({gender:a,ageGroup:e,column:o,data:t}),this.drill(t,`${e} (${a}s) ${o}`)},setMaleTotalsRow(){const t=t=>this.drill(this.aggregated.filter(e=>"Male"===e.gender&&e.column===t).reduce((t,e)=>t.concat(e.data),[]),"All Male "+t);this.rows.push([d["a"].td("All"),d["a"].td("Male"),t("Returned <3 mo"),t("Returned 3-5 mo"),t("Returned 6+ mo")])},async setFemaleRows(){const t=this.aggregated.filter(t=>t.gender.match(/female/i)).reduce((t,e)=>t.concat(e.data),[]),e=await this.report.getMaternalStatus(Object(c["uniq"])(t)),a=e.FBf.concat(e.FP),o=t=>this.aggregated.filter(t=>t.gender.match(/female/i)).filter(e=>e.column===t).reduce((t,e)=>Object(c["uniq"])(t.concat(e.data)),[]),r=(t,a)=>this.drill(o(a).filter(a=>e[t].includes(a)),"All "+a),s=t=>this.drill(o(t).filter(t=>!a.includes(t)),"All "+t);this.rows.push([d["a"].td("All"),d["a"].td("FP"),r("FP","Returned <3 mo"),r("FP","Returned 3-5 mo"),r("FP","Returned 6+ mo")]),this.rows.push([d["a"].td("All"),d["a"].td("FNP"),s("Returned <3 mo"),s("Returned 3-5 mo"),s("Returned 6+ mo")]),this.rows.push([d["a"].td("All"),d["a"].td("FBF"),r("FBf","Returned <3 mo"),r("FBf","Returned 3-5 mo"),r("FBf","Returned 6+ mo")])},async setRows(t){const e=(t,e)=>t.filter(t=>e(t.months)).map(t=>t.patient_id);for(const a in l["a"]){const o=l["a"][a],r=this.formatGender(t);if(o in this.cohort){const a=this.cohort[o][t],s=t=>e(a,t);this.rows.push([d["a"].td(o),d["a"].td(r),this.drillData(s(t=>t<3),o,r,"Returned <3 mo"),this.drillData(s(t=>t>=3&&t<=5),o,r,"Returned 3-5 mo"),this.drillData(s(t=>t>=6),o,r,"Returned 6+ mo")])}else this.rows.push([d["a"].td(o),d["a"].td(r),d["a"].td(0),d["a"].td(0),d["a"].td(0)])}}}}),u=a("6b0d"),m=a.n(u);const p=m()(h,[["render",r]]);e["default"]=p}}]);
//# sourceMappingURL=chunk-2d0af6a8.c445655b.js.map