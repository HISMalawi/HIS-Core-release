(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-5d97d9d4"],{"32b3":function(e,t,n){"use strict";n.d(t,"b",(function(){return a})),n.d(t,"a",(function(){return r}));var a,o=n("cc6f"),s=n("7957");(function(e){e["Prescription"]="htnPrescription"})(a||(a={}));class r extends o["a"]{constructor(e,t){super(e,48,t)}static getBpGrade(e,t){return e<140&&t<90?"normal":e>=140&&e<160||t>=100&&t<110?"grade 1":e>=180&&t>110||e>=180?"grade 3":e>=160&&e<180||t>=110?"grade 2":"N/A"}static isBpNormotensive(e){const[t,n]=Object.values(e).sort((e,t)=>e.date<t.date?1:0).map(e=>this.getBpGrade(e.sbp,e.dbp));return"normal"===t&&"normal"===n}getSystolicBp(){return s["a"].getFirstValueNumber(this.patientID,"Systolic blood pressure")}getDiastolicBp(){return s["a"].getFirstValueNumber(this.patientID,"Diastolic blood pressure")}async onBpDrugs(){const e=await s["a"].getFirstValueCoded(this.patientID,"Treatment status");return!!e&&"Yes"===e}async getBPTrail(){return await o["a"].getJson(`/patients/${this.patientID}/bp_trail`)}async getCurrentDrugs(){return await o["a"].getJson(`/patients/${this.patientID}/current_bp_drugs`)}async getLastDrugs(){return await o["a"].getJson(`/patients/${this.patientID}/last_bp_drugs_dispensation`)}async getAdherence(e,t){return await o["a"].postJson(`/patients/${this.patientID}/remaining_bp_drugs`,{drug_id:e,pills:t})}async enrollPatient(e){return await o["a"].postJson(`/patients/${this.patientID}/update_or_create_htn_state`,e)}static htnDrugReferences(){return[{drug_id:275,drug_name:"HCZ (25mg tablet)",units:"tab(s)",am:0,noon:0,pm:1,frequency:"Daily (QOD)"},{drug_id:942,drug_name:"Enalapril (5mg tablet)",units:"tab(s)",am:0,noon:0,pm:1,frequency:"Daily (QOD)"},{drug_id:943,drug_name:"Enalapril (10mg tablet)",units:"tab(s)",am:0,noon:0,pm:1,frequency:"Daily (QOD)"},{drug_id:558,drug_name:"Amlodipine (5mg tablet)",units:"tab(s)",am:0,noon:0,pm:1,frequency:"Daily (QOD)"},{drug_id:559,drug_name:"Amlodipine (10mg tablet)",units:"tab(s)",am:0,noon:0,pm:1,frequency:"Daily (QOD)"},{drug_id:117,drug_name:"Atenolol (50mg tablet)",units:"tab(s)",am:0,noon:0,pm:1,frequency:"Daily (QOD)"},{drug_id:11,drug_name:"Atenolol(100mg tablet)",units:"tab(s)",am:0,noon:0,pm:1,frequency:"Daily (QOD)"}]}getDrugs(){return{HCZ:{drugs:[{drugName:"HCZ (25mg tablet)",drugID:275,amount:"25mg",current:!1,selected:!1,isChecked:!1,dispensed:null,expectedRemaining:null,adherence:null}],selected:null,notes:[]},Enalapril:{drugs:[{drugName:"Enalapril (5mg tablet)",drugID:942,amount:"5mg",current:!1,selected:!1,isChecked:!1,dispensed:null,expectedRemaining:null,adherence:null,remaining:null},{drugName:"Enalapril (10mg tablet)",drugID:943,amount:"10mg",current:!1,selected:!1,isChecked:!1,dispensed:null,expectedRemaining:null,adherence:null,remaining:null}],selected:null,notes:[]},Amlodipine:{drugs:[{drugName:"Amlodipine (5mg tablet)",drugID:558,amount:"5mg",current:!1,selected:!1,isChecked:!1,dispensed:null,expectedRemaining:null,adherence:null,remaining:null},{drugName:"Amlodipine (10mg tablet)",drugID:559,amount:"10mg",current:!1,selected:!1,isChecked:!1,dispensed:null,expectedRemaining:null,adherence:null,remaining:null}],selected:null,notes:[]},Atenolol:{drugs:[{drugName:"Atenolol (50mg tablet)",drugID:117,amount:"50mg",current:!1,selected:!1,isChecked:!1,dispensed:null,expectedRemaining:null,adherence:null,remaining:null},{drugName:"Atenolol(100mg tablet)",drugID:11,amount:"100mg",current:!1,selected:!1,isChecked:!1,dispensed:null,expectedRemaining:null,adherence:null,remaining:null}],selected:null,notes:[]}}}}},"6f4a":function(e,t,n){},7337:function(e,t,n){"use strict";n.r(t);var a=n("7a23");const o=Object(a["withScopeId"])("data-v-146a0e6b");Object(a["pushScopeId"])("data-v-146a0e6b");const s=Object(a["createVNode"])("h1",{class:"ion-text-center"}," High BP Alert ",-1),r={key:0,class:"vertically-align ion-text-center"},c={style:{"font-weight":"bold"}},i={class:"name"},l=Object(a["createTextVNode"])(" has "),d=Object(a["createTextVNode"])(" blood pressure of "),u={class:"bp"},p=Object(a["createVNode"])("br",null,null,-1),b=Object(a["createVNode"])("span",null,[Object(a["createTextVNode"])(" Retesting BP is "),Object(a["createVNode"])("span",{style:{"font-weight":"bold",color:"#000000","text-decoration":"underline"}},"optional"),Object(a["createTextVNode"])(". "),Object(a["createVNode"])("br"),Object(a["createTextVNode"])(" Do you want to test BP? ")],-1),m={key:1,class:"vertically-align ion-text-center"},g=Object(a["createTextVNode"])(" No BP Reading found "),h=Object(a["createVNode"])("br",null,null,-1),O=Object(a["createVNode"])("h1",null," Do you want to test BP? ",-1),j=Object(a["createTextVNode"])(" No "),k=Object(a["createTextVNode"])(" Yes ");Object(a["popScopeId"])();const D=o((function(e,t,n,D,f,C){const y=Object(a["resolveComponent"])("ion-content"),N=Object(a["resolveComponent"])("ion-button"),V=Object(a["resolveComponent"])("ion-toolbar"),B=Object(a["resolveComponent"])("ion-footer"),_=Object(a["resolveComponent"])("ion-page");return Object(a["openBlock"])(),Object(a["createBlock"])(_,null,{default:o(()=>[Object(a["createVNode"])(y,null,{default:o(()=>[s,e.hasPressureReading?(Object(a["openBlock"])(),Object(a["createBlock"])("div",r,[Object(a["withDirectives"])(Object(a["createVNode"])("h2",c," (Patient already on BP drugs) ",512),[[a["vShow"],e.patientOnBpDrugs]]),Object(a["createVNode"])("h2",null,[Object(a["createVNode"])("span",i,Object(a["toDisplayString"])(e.patientName),1),l,Object(a["withDirectives"])(Object(a["createVNode"])("span",null," a high ",512),[[a["vShow"],e.highBP]]),d,Object(a["createVNode"])("span",u,Object(a["toDisplayString"])(e.sysBp)+" / "+Object(a["toDisplayString"])(e.dsBP),1),p,b])])):Object(a["createCommentVNode"])("",!0),e.hasPressureReading?Object(a["createCommentVNode"])("",!0):(Object(a["openBlock"])(),Object(a["createBlock"])("div",m,[g,h,O]))]),_:1}),Object(a["createVNode"])(B,null,{default:o(()=>[Object(a["createVNode"])(V,{color:"dark"},{default:o(()=>[Object(a["createVNode"])(N,{onClick:t[1]||(t[1]=()=>e.hasPressureReading?e.showRiskFactors():e.nextTask()),size:"large",color:"danger",slot:"start"},{default:o(()=>[j]),_:1}),Object(a["createVNode"])(N,{onClick:e.recaptureBp,size:"large",color:"success",slot:"end"},{default:o(()=>[k]),_:1},8,["onClick"])]),_:1})]),_:1})]),_:1})}));var f=n("7365"),C=n("8a30"),y=n("d1ca"),N=n("32b3"),V=n("8158"),B=n("77fd"),_=n("7957"),v=n("2ef0"),I=Object(a["defineComponent"])({mixins:[f["a"]],components:{IonFooter:C["o"],IonContent:C["n"],IonPage:C["D"],IonButton:C["d"],IonToolbar:C["Q"]},data:()=>({sysBp:0,dsBP:0,riskFactors:[],patientOnBpDrugs:!1,isPregnant:!1,systolicThreshold:145,diastolicTheshold:94}),methods:{async showRiskFactors(){const e=await C["X"].create({component:B["a"],backdropDismiss:!1,cssClass:"large-modal",componentProps:{factors:this.riskFactors}});e.present();const{data:t}=await e.onDidDismiss();Object(v["isEmpty"])(t)||this.nextTask()},async getRiskFactors(){const e=V["a"].getConceptsByCategory("risk factors"),t=e.map(async e=>{const t=await _["a"].getFirstValueCoded(this.patientID,e.name);return{concept:e.name,value:t}});return Promise.all(t)},recaptureBp(){this.$router.push(`/art/encounters/vitals/${this.patientID}?vital_options=BP`)}},watch:{ready:{async handler(e){if(!e)return;const t=await C["V"].create({message:"Verifying Blood Pressure...",backdropDismiss:!1});await t.present();const n=new N["a"](this.patientID,this.providerID);this.riskFactors=await this.getRiskFactors(),this.systolicThreshold=await y["b"].systolicThreshold()||145,this.diastolicTheshold=await y["b"].diastolicThreshold()||94,this.dsBP=await n.getDiastolicBp()||0,this.sysBp=await n.getSystolicBp()||0,this.patientOnBpDrugs=await n.onBpDrugs()||!1,this.isPregnant=this.patient.isChildBearing()&&await this.patient.isPregnant()||!1,C["V"].dismiss()},immediate:!0}},computed:{patientName(){return this.ready?this.patient.getFullName():"Patient"},hasPressureReading(){return this.sysBp>0&&this.dsBP>0},highBP(){return(this.sysBp>=this.systolicThreshold&&this.dsBP>=this.diastolicTheshold||this.dsBP>=this.diastolicTheshold)&&!this.isPregnant}}}),w=(n("8bd6"),n("6b0d")),P=n.n(w);const x=P()(I,[["render",D],["__scopeId","data-v-146a0e6b"]]);t["default"]=x},"77fd":function(e,t,n){"use strict";var a=n("7a23");const o=Object(a["withScopeId"])("data-v-1b2b2db4");Object(a["pushScopeId"])("data-v-1b2b2db4");const s=Object(a["createTextVNode"])("Risk Factors"),r=Object(a["createTextVNode"])(" Close "),c=Object(a["createTextVNode"])(" Manage BP "),i=Object(a["createTextVNode"])(" Save ");Object(a["popScopeId"])();const l=o((function(e,t,n,l,d,u){const p=Object(a["resolveComponent"])("ion-title"),b=Object(a["resolveComponent"])("ion-toolbar"),m=Object(a["resolveComponent"])("ion-header"),g=Object(a["resolveComponent"])("ion-label"),h=Object(a["resolveComponent"])("ion-checkbox"),O=Object(a["resolveComponent"])("ion-item"),j=Object(a["resolveComponent"])("ion-list"),k=Object(a["resolveComponent"])("ion-col"),D=Object(a["resolveComponent"])("ion-row"),f=Object(a["resolveComponent"])("ion-grid"),C=Object(a["resolveComponent"])("ion-content"),y=Object(a["resolveComponent"])("ion-button"),N=Object(a["resolveComponent"])("ion-footer");return Object(a["openBlock"])(),Object(a["createBlock"])(a["Fragment"],null,[Object(a["createVNode"])(m,null,{default:o(()=>[Object(a["createVNode"])(b,null,{default:o(()=>[Object(a["createVNode"])(p,null,{default:o(()=>[s]),_:1})]),_:1})]),_:1}),Object(a["createVNode"])(C,{style:{overflowY:"hidden",background:"grey"}},{default:o(()=>[Object(a["createVNode"])(f,null,{default:o(()=>[Object(a["createVNode"])(D,null,{default:o(()=>[Object(a["createVNode"])(k,null,{default:o(()=>[Object(a["createVNode"])(j,{style:{overflowY:"auto",height:"78vh"}},{default:o(()=>[(Object(a["openBlock"])(!0),Object(a["createBlock"])(a["Fragment"],null,Object(a["renderList"])(e.riskFactors,e=>(Object(a["openBlock"])(),Object(a["createBlock"])(O,{key:e},{default:o(()=>[Object(a["createVNode"])(g,null,{default:o(()=>[Object(a["createTextVNode"])(Object(a["toDisplayString"])(e.name),1)]),_:2},1024),Object(a["createVNode"])(h,{modelValue:e.isChecked,"onUpdate:modelValue":t=>e.isChecked=t,slot:"start"},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024))),128))]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),Object(a["createVNode"])(N,null,{default:o(()=>[Object(a["createVNode"])(b,null,{default:o(()=>[Object(a["createVNode"])(y,{size:"large",onClick:e.exit,slot:"start",color:"danger"},{default:o(()=>[r]),_:1},8,["onClick"]),e.showManageBPButton?(Object(a["openBlock"])(),Object(a["createBlock"])(y,{key:0,size:"large",onClick:e.manageBP,slot:"start"},{default:o(()=>[c]),_:1},8,["onClick"])):Object(a["createCommentVNode"])("",!0),Object(a["createVNode"])(y,{size:"large",color:"success",onClick:e.postActivities,slot:"end"},{default:o(()=>[i]),_:1},8,["onClick"])]),_:1})]),_:1})],64)}));var d=n("8a30"),u=n("cc6f");class p extends u["a"]{constructor(e,t){super(e,30,t)}}var b=n("8158"),m=Object(a["defineComponent"])({name:"Modal",props:{factors:{type:Object,required:!0},title:{type:String,default:""}},computed:{showManageBPButton(){return"bp_management"!=this.$route.name}},created(){this.patientID=parseInt(""+this.$route.params.patient_id)},methods:{async postActivities(){const e=new p(this.patientID,-1),t=await e.createEncounter();if(t){const t=await this.buildObs();await e.saveObservationList(t),await this.closeModal()}},manageBP(){this.$router.push("/art/encounters/bp_management/"+this.patientID)},exit(){d["X"].dismiss([])},async closeModal(){await d["X"].dismiss(this.riskFactors)},async buildObs(){return this.riskFactors.map(e=>{const t=!0===e.isChecked?"Yes":"No",n=b["a"].getConceptID(t,!0),a=b["a"].getConceptID(e.concept,!0);return{concept_id:a,value_coded:n}})}},data(){return{patientID:-1,riskFactors:[{name:"Diabetes",isChecked:!1,concept:"Diabetes"},{name:"Cronic kidney disease",isChecked:!1,concept:"CKD"},{name:"Past history of IHD or CVD",isChecked:!1,concept:"history of CVD"},{name:"First degree relative with IHD or CVD <65",isChecked:!1,concept:"relative with CVD"},{name:"Patient currently smokes",isChecked:!1,concept:"patient smokes"}]}},mounted(){this.factors.forEach(e=>{if("Yes"===e.value){const t=this.riskFactors.findIndex(t=>t.concept===e.concept);this.riskFactors[t].isChecked=!0}})},components:{IonButton:d["d"],IonContent:d["n"],IonHeader:d["q"],IonTitle:d["P"],IonToolbar:d["Q"],IonLabel:d["x"],IonList:d["y"],IonItem:d["w"],IonCheckbox:d["k"],IonRow:d["H"],IonFooter:d["o"],IonGrid:d["p"],IonCol:d["m"]}}),g=(n("9719"),n("6b0d")),h=n.n(g);const O=h()(m,[["render",l],["__scopeId","data-v-1b2b2db4"]]);t["a"]=O},"8bd6":function(e,t,n){"use strict";n("8d5d")},"8d5d":function(e,t,n){},9719:function(e,t,n){"use strict";n("6f4a")}}]);
//# sourceMappingURL=chunk-5d97d9d4.a0fcdfe6.js.map