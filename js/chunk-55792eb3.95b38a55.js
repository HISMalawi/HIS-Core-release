(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-55792eb3"],{"403e":function(e,t,n){"use strict";n.d(t,"d",(function(){return o})),n.d(t,"b",(function(){return a})),n.d(t,"c",(function(){return c})),n.d(t,"a",(function(){return u})),n.d(t,"e",(function(){return l}));var r=n("2909");n("d81d");function o(e){return e.map((function(e){return{value:e,label:e}}))}var a=[{label:"Male",value:"M"},{label:"Female",value:"F"}],c=(Object(r["a"])(o(["TB NOT suspected","TB suspected","Confirmed TB NOT on treatment","Confirmed TB on treatment"])),Object(r["a"])(o(["Current","Last 2 years","More than 2 years","Never"]))),u=[{label:"Rapid antibody test",value:"HIV rapid test"},{label:"DNA PCR",value:"HIV DNA polymerase chain reaction"},{label:"Not done",value:"Not done"}],l=o(["Currently on IPT","Currently on 3HP (RFP + INH)","Currently on INH 300 / RFP 300 (3HP)","Complete course of 3HP in the past (3 months RFP+INH)","Complete course of IPT in the past (min. 6 months of INH)","Aborted course of 3HP (RFP + INH) in the past","Aborted course of INH 300 / RFP 300 (3HP) in the past","Aborted course of IPT in the past","Never taken IPT or 3HP"])},"44d7":function(e,t,n){"use strict";n("68c9")},"68c9":function(e,t,n){},"76df":function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var r=n("1da1"),o=(n("96cf"),n("7f35"));function a(e){return c.apply(this,arguments)}function c(){return c=Object(r["a"])(regeneratorRuntime.mark((function e(t){var n,r,a=arguments;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=a.length>1&&void 0!==a[1]?a[1]:"action-sheet-modal",e.next=3,Object(o["c"])("Are you sure you want to void record?","Please specify reason for voiding this record",["Mistake/ Wrong Entry","Duplicate","System Error"],[{name:"Cancel",slot:"start"},{name:"Void",color:"danger",slot:"end",role:"action"}],"",n);case 3:if(r=e.sent,!r.selection||"Void"!==r.action){e.next=7;break}return e.next=7,t(r.selection);case 7:case"end":return e.stop()}}),e)}))),c.apply(this,arguments)}},be95:function(e,t,n){"use strict";n("4de4"),n("d3b7");var r=n("7a23"),o=Object(r["withScopeId"])("data-v-66a24b01");Object(r["pushScopeId"])("data-v-66a24b01");var a={key:0,class:"ion-float-right ion-margin-end checkbox-label"},c={class:"inner-input-box"},u={key:0,class:"input-options"},l={class:"input-icon"};Object(r["popScopeId"])();var i=o((function(e,t,n,i,s,d){var b=Object(r["resolveComponent"])("ion-checkbox"),p=Object(r["resolveComponent"])("ion-label"),f=Object(r["resolveComponent"])("ion-input"),m=Object(r["resolveComponent"])("ion-icon"),v=Object(r["resolveComponent"])("ion-chip"),O=Object(r["resolveComponent"])("ion-item"),h=Object(r["resolveComponent"])("ion-list"),j=Object(r["resolveComponent"])("ion-note");return Object(r["openBlock"])(),Object(r["createBlock"])(r["Fragment"],null,[e.model.label?(Object(r["openBlock"])(),Object(r["createBlock"])(p,{key:0,class:"ion-padding-bottom bold"},{default:o((function(){return[Object(r["createVNode"])("span",null,Object(r["toDisplayString"])(e.model.label),1),e.allowCustom?(Object(r["openBlock"])(),Object(r["createBlock"])("span",a,[Object(r["createTextVNode"])(" Add Custom "+Object(r["toDisplayString"])(e.model.label)+"? ",1),Object(r["createVNode"])(b,{modelValue:e.isCustom,"onUpdate:modelValue":t[1]||(t[1]=function(t){return e.isCustom=t}),onIonChange:t[2]||(t[2]=function(t){return e.model.value=""})},null,8,["modelValue"])])):Object(r["createCommentVNode"])("",!0)]})),_:1})):Object(r["createCommentVNode"])("",!0),e.isCustom?(Object(r["openBlock"])(),Object(r["createBlock"])(f,{key:1,class:["box-input",{"box-input-error":e.model.error,"ion-margin-top":e.model.label}],modelValue:e.customOption,"onUpdate:modelValue":t[3]||(t[3]=function(t){return e.customOption=t}),placeholder:e.model.placeholder||e.model.label,disabled:e.model.disabled,onIonFocus:t[4]||(t[4]=function(){return e.model.error=""}),onIonBlur:e.validate,onIonInput:e.onCustomValue},null,8,["class","modelValue","placeholder","disabled","onIonBlur","onIonInput"])):(Object(r["openBlock"])(),Object(r["createBlock"])("div",{key:2,class:["outer-input-box box-input",{"box-input-error":e.model.error,"ion-margin-top":e.model.label}]},[Object(r["createVNode"])("div",c,[Object(r["createVNode"])("div",{style:{display:"flex","flex-wrap":"wrap",width:"100%"},onClick:t[6]||(t[6]=function(){return e.onShowOptions.apply(e,arguments)})},[(Object(r["openBlock"])(!0),Object(r["createBlock"])(r["Fragment"],null,Object(r["renderList"])(e.tags,(function(t,n){return Object(r["openBlock"])(),Object(r["createBlock"])(v,{key:n},{default:o((function(){return[Object(r["createVNode"])(p,null,{default:o((function(){return[Object(r["createTextVNode"])(Object(r["toDisplayString"])(t.label),1)]})),_:2},1024),Object(r["createVNode"])(m,{icon:e.closeCircle,color:"danger",onClick:function(n){return e.diselect(t)},style:{"z-index":"20"}},null,8,["icon","onClick"])]})),_:2},1024)})),128)),Object(r["createVNode"])(f,{disabled:e.model.disabled,placeholder:e.showPlaceholder?e.model.placeholder||"select option":"",modelValue:e.filter,"onUpdate:modelValue":t[5]||(t[5]=function(t){return e.filter=t}),class:"search-input",ref:"searchInput"},null,8,["disabled","placeholder","modelValue"])]),e.showOptions?(Object(r["openBlock"])(),Object(r["createBlock"])("div",u,[Object(r["createVNode"])(h,null,{default:o((function(){return[(Object(r["openBlock"])(!0),Object(r["createBlock"])(r["Fragment"],null,Object(r["renderList"])(e.filteredOptions,(function(t,n){return Object(r["openBlock"])(),Object(r["createBlock"])(O,{key:n,lines:n+1===e.filteredOptions.length?"none":"",onClick:function(n){return e.onSelect(t)}},{default:o((function(){return[e.multiple?(Object(r["openBlock"])(),Object(r["createBlock"])(b,{key:0,class:"input-option-checkbox",slot:"start",modelValue:t.isChecked,"onUpdate:modelValue":function(e){return t.isChecked=e}},null,8,["modelValue","onUpdate:modelValue"])):Object(r["createCommentVNode"])("",!0),Object(r["createVNode"])(p,null,{default:o((function(){return[Object(r["createTextVNode"])(Object(r["toDisplayString"])(t.label),1)]})),_:2},1024)]})),_:2},1032,["lines","onClick"])})),128))]})),_:1})])):Object(r["createCommentVNode"])("",!0),Object(r["createVNode"])("div",l,[e.filter||e.tags.length>0?(Object(r["openBlock"])(),Object(r["createBlock"])(m,{key:0,icon:e.close,onClick:e.onReset},null,8,["icon","onClick"])):Object(r["createCommentVNode"])("",!0),Object(r["createVNode"])(m,{icon:e.showOptions?e.chevronUp:e.chevronDown,onClick:t[7]||(t[7]=function(t){return e.showOptions?e.onCloseOptions():e.onShowOptions()})},null,8,["icon"])])])],2)),e.model.error?(Object(r["openBlock"])(),Object(r["createBlock"])(j,{key:3,color:"danger"},{default:o((function(){return[Object(r["createTextVNode"])(Object(r["toDisplayString"])(e.model.error),1)]})),_:1})):Object(r["createCommentVNode"])("",!0)],64)})),s=n("2909"),d=n("1da1"),b=n("5530"),p=(n("96cf"),n("159b"),n("c740"),n("7db0"),n("caad"),n("2532"),n("99af"),n("25f0"),n("8a30")),f=n("ff79"),m=n("2ef0"),v=Object(r["defineComponent"])({name:"SelectInput",props:{modelValue:{type:Object,default:function(){return{}}},form:{type:Object,default:function(){return{}}},options:{type:Array,default:function(){return[]}},asyncOptions:{type:Function,required:!1},allowCustom:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},multiple:{type:Boolean,default:!1},infiniteScrolling:{type:Boolean,default:!1}},components:{IonLabel:p["IonLabel"],IonInput:p["IonInput"],IonNote:p["IonNote"],IonIcon:p["IonIcon"],IonCheckbox:p["IonCheckbox"],IonList:p["IonList"],IonChip:p["IonChip"],IonItem:p["IonItem"]},emits:["update:modelValue"],setup:function(e,t){var n=t.emit,o=Object(r["ref"])(!1),a=Object(r["ref"])(""),c=Object(r["ref"])(),u=Object(r["ref"])(!1),l=Object(r["ref"])(""),i=Object(r["ref"])([]),p=Object(r["ref"])(1),v=Object(r["computed"])((function(){return e.multiple?i.value.filter((function(e){var t=e.isChecked;return t})):c.value?[c.value]:[]})),O=Object(r["computed"])((function(){return!l.value&&Object(m["isEmpty"])(v.value)&&!u.value})),h=Object(r["computed"])({get:function(){return e.modelValue},set:function(e){return n("update:modelValue",e)}}),j=function(){if(c.value=void 0,!Object(m["isEmpty"])(h.value.value)){if(Array.isArray(h.value.value)&&e.multiple)return console.log(h.value.value),h.value.value.forEach((function(e){var t=i.value.findIndex((function(t){var n=t.value;return n===e.value}));-1===t?i.value.push(Object(b["a"])(Object(b["a"])({},e),{},{isChecked:!0})):i.value[t].isChecked=!0}));var t=i.value.find((function(e){return e.value===h.value.value}));c.value=t||{label:h.value.value,value:h.value.value}}},g=function(){var t=Object(d["a"])(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if("function"!==typeof e.asyncOptions){t.next=6;break}return t.next=3,e.asyncOptions(l.value,p.value);case 3:t.t0=t.sent,t.next=7;break;case 6:t.t0=e.options.filter((function(e){var t=e.label;return t.toLowerCase().includes(l.value.toLowerCase())}));case 7:n=t.t0,v.value.forEach((function(e){var t=n.findIndex((function(t){return t.value===e.value}));-1===t?n.push(e):n[t].isChecked=!0})),i.value=n;case 10:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),y=function(){var t=Object(d["a"])(regeneratorRuntime.mark((function t(n){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!e.infiniteScrolling||"function"!==typeof e.asyncOptions){t.next=6;break}return p.value++,t.next=4,e.asyncOptions(l.value,p.value);case 4:r=t.sent,r.length>0?i.value=[].concat(Object(s["a"])(i.value),Object(s["a"])(r.filter((function(e){return!i.value.find((function(t){return t.value===e.value}))})))):n.target.disabled=!0;case 6:n.target.complete();case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),k=function(){var t=Object(d["a"])(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!h.value.required||!Object(m["isEmpty"])(h.value.value)){t.next=2;break}return t.abrupt("return",h.value.error="This field is required");case 2:if(!h.value.validation){t.next=8;break}return t.next=5,h.value.validation({label:h.value.value,value:h.value.value},e.form);case 5:if(n=t.sent,!n||!n.length){t.next=8;break}return t.abrupt("return",h.value.error+=n.toString());case 8:return t.abrupt("return",h.value.error="");case 9:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),w=function(){u.value=!1,h.value.value=e.multiple?v.value:Object(m["isEmpty"])(v.value)?void 0:v.value[0],l.value="",k()},C=function(){h.value.disabled||(u.value=!0,h.value.error="")},x=function(){h.value.value={label:a.value,value:a.value}},I=function(t){e.multiple||(c.value=t,w()),h.value.value=e.multiple?v.value:Object(m["isEmpty"])(v.value)?void 0:v.value[0],l.value=""},V=function(t){return e.multiple?t.isChecked=!1:c.value=void 0},N=function(){l.value="",c.value=void 0,i.value.forEach((function(e){return e.isChecked=!1}))};return Object(r["watch"])(l,Object(d["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return p.value++,e.next=3,g();case 3:case"end":return e.stop()}}),e)})))),Object(r["watch"])([function(){return e.options},function(){return e.asyncOptions}],Object(d["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",g());case 1:case"end":return e.stop()}}),e)})))),Object(r["watch"])((function(){return e.modelValue.value}),(function(e){return Object(m["isEmpty"])(e)&&j()})),Object(r["onMounted"])(Object(d["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,g();case 2:j(),addEventListener("click",(function(e){var t=e.target.closest(".inner-input-box");!t&&u.value&&w()}));case 4:case"end":return e.stop()}}),e)})))),Object(r["onBeforeUnmount"])((function(){return removeEventListener("click",(function(e){return console.log(e)}))})),{validate:k,onSelect:I,onReset:N,onShowOptions:C,onCloseOptions:w,diselect:V,pushMoreOptions:y,onCustomValue:x,model:h,customOption:a,isCustom:o,chevronDown:f["chevronDown"],chevronUp:f["chevronUp"],close:f["close"],closeCircle:f["closeCircle"],selectedOption:c,showOptions:u,showPlaceholder:O,filteredOptions:i,filter:l,tags:v}}}),O=(n("44d7"),n("d959")),h=n.n(O);const j=h()(v,[["render",i],["__scopeId","data-v-66a24b01"]]);t["a"]=j},c740:function(e,t,n){"use strict";var r=n("23e7"),o=n("b727").findIndex,a=n("44d2"),c=n("ae40"),u="findIndex",l=!0,i=c(u);u in[]&&Array(1)[u]((function(){l=!1})),r({target:"Array",proto:!0,forced:l||!i},{findIndex:function(e){return o(this,e,arguments.length>1?arguments[1]:void 0)}}),a(u)},c7dc:function(e,t,n){"use strict";n("d278")},d278:function(e,t,n){},de0e:function(e,t,n){"use strict";n.r(t);var r=n("7a23"),o={style:{"max-width":"250px"},class:"ion-margin-end ion-margin-vertical"},a=Object(r["createTextVNode"])("Search"),c=Object(r["createTextVNode"])("Reset"),u=Object(r["createTextVNode"])(" Add New Patient "),l=Object(r["createVNode"])("h1",{class:"ion-margin"},"Patients Search Results",-1);function i(e,t,n,i,s,d){var b=Object(r["resolveComponent"])("ion-searchbar"),p=Object(r["resolveComponent"])("SelectInput"),f=Object(r["resolveComponent"])("ion-button"),m=Object(r["resolveComponent"])("ion-col"),v=Object(r["resolveComponent"])("ion-row"),O=Object(r["resolveComponent"])("data-table"),h=Object(r["resolveComponent"])("ion-grid"),j=Object(r["resolveComponent"])("Layout");return Object(r["openBlock"])(),Object(r["createBlock"])(j,null,{default:Object(r["withCtx"])((function(){return[Object(r["createVNode"])(h,null,{default:Object(r["withCtx"])((function(){return[Object(r["createVNode"])(v,{class:"his-card"},{default:Object(r["withCtx"])((function(){return[Object(r["createVNode"])(m,{size:"10",style:{display:"flex","justify-content":"flex-start"}},{default:Object(r["withCtx"])((function(){return[Object(r["createVNode"])(b,{style:{width:"350px",height:"2.75rem"},class:"box-input ion-no-padding ion-margin-end ion-margin-vertical",placeholder:"Search by Name or ARV Number",modelValue:e.searchText,"onUpdate:modelValue":t[1]||(t[1]=function(t){return e.searchText=t}),onKeyup:Object(r["withKeys"])(e.searchPatient,["enter"])},null,8,["modelValue","onKeyup"]),Object(r["createVNode"])("div",o,[Object(r["createVNode"])(p,{modelValue:e.gender,"onUpdate:modelValue":t[2]||(t[2]=function(t){return e.gender=t}),options:e.genderOptions,onKeyup:Object(r["withKeys"])(e.searchPatient,["enter"])},null,8,["modelValue","options","onKeyup"])]),Object(r["createVNode"])(f,{class:"ion-margin-vertical",onClick:e.searchPatient},{default:Object(r["withCtx"])((function(){return[a]})),_:1},8,["onClick"]),Object(r["createVNode"])(f,{class:"ion-margin-vertical",onClick:e.resetQuery,color:"secondary"},{default:Object(r["withCtx"])((function(){return[c]})),_:1},8,["onClick"])]})),_:1}),Object(r["createVNode"])(m,null,{default:Object(r["withCtx"])((function(){return[Object(r["createVNode"])(f,{class:"ion-margin-vertical",href:"/emc/patient/registration",color:"success",style:{float:"right"}},{default:Object(r["withCtx"])((function(){return[u]})),_:1})]})),_:1})]})),_:1}),Object(r["createVNode"])(v,{class:"his-card ion-margin-top",style:{padding:"0 !important"}},{default:Object(r["withCtx"])((function(){return[Object(r["createVNode"])(m,{size:"12",style:{"min-height":"320px"},class:"ion-no-padding"},{default:Object(r["withCtx"])((function(){return[l,Object(r["createVNode"])(O,{rows:e.tableRows,columns:e.tableColumns,config:e.tableConfig,"row-actions-buttons":e.TableRowActions,color:"custom"},null,8,["rows","columns","config","row-actions-buttons"])]})),_:1})]})),_:1})]})),_:1})]})),_:1})}var s=n("1da1"),d=(n("96cf"),n("99af"),n("ac1f"),n("466d"),n("4de4"),n("d3b7"),n("1276"),n("00b4"),n("841c"),n("d81d"),n("8d56")),b=n("8a30"),p=n("23e6"),f=n("cc74"),m=n("b5e4"),v=n("6c02"),O=n("403e"),h=n("be95"),j=n("b211"),g=n("4971"),y=n("76df"),k=n("9283"),w=n("5a0c"),C=n.n(w),x=n("0011"),I=Object(r["defineComponent"])({components:{Layout:d["a"],IonGrid:b["IonGrid"],IonRow:b["IonRow"],IonCol:b["IonCol"],SelectInput:h["a"],IonButton:b["IonButton"],IonSearchbar:b["IonSearchbar"],DataTable:g["DataTable"]},setup:function(){var e=Object(v["f"])(),t=Object(r["ref"])(""),n=Object(r["ref"])(document.getElementById("selectInput")),o=Object(r["reactive"])({value:"",placeholder:"select gender"}),a=Object(r["ref"])([]),c=[{label:"ARV Number",path:"arv_number"},{path:"given_name",label:"First name"},{path:"family_name",label:"Last name"},{path:"gender",label:"Gender",formatter:x["f"]},{path:"birthdate",label:"Date of Birth (AGE)",formatter:function(e){return"".concat(C()(e).format(k["a"])," (").concat(k["c"].getAgeInYears(e),")")}}],u={showSearchField:!1,showSubmitButton:!1},l=function(){var e=Object(s["a"])(regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!t.match(/^(\w+-ARV-\w+)$/)){e.next=2;break}return e.abrupt("return",{type:"arv_number",value:t});case 2:if(!t.match(/^(\d+)$/)){e.next=7;break}return e.next=5,f["b"].sitePrefix();case 5:return n=e.sent,e.abrupt("return",{type:"arv_number",value:"".concat(n,"-ARV-").concat(t)});case 7:return e.abrupt("return",{type:"name",value:t});case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),i=function(e,t){var n={},r=e.split(" ").filter((function(e){return/\S/.test(e)}));return r.length>0&&(n["given_name"]=r[0],r[1]&&(n["family_name"]=r[1]),r[2]&&(n["middle_name"]=r[1],n["family_name"]=r[2])),t&&(n.gender=t),n},d=function(){var e=Object(s["a"])(regeneratorRuntime.mark((function e(){var n,r,c,u;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!t.value){e.next=33;break}return j["a"].show(),e.prev=2,e.next=5,l(t.value);case 5:if(n=e.sent,r=n.type,c=n.value,"name"!==r){e.next=14;break}return e.next=11,p["a"].search(i(c,o.value.value));case 11:e.t0=e.sent,e.next=22;break;case 14:if("arv_number"!==r){e.next=20;break}return e.next=17,p["a"].findByOtherID(4,c);case 17:e.t1=e.sent,e.next=21;break;case 20:e.t1=[];case 21:e.t0=e.t1;case 22:return u=e.t0,e.next=25,j["a"].hide();case 25:a.value=u.map((function(e){var t=new p["a"](e);return{arv_number:t.getArvNumber(),given_name:t.getGivenName(),family_name:t.getFamilyName(),gender:t.getGender(),birthdate:t.getBirthdate(),personId:t.getID()}})),e.next=33;break;case 28:return e.prev=28,e.t2=e["catch"](2),Object(m["e"])("".concat(e.t2)),e.next=33,j["a"].hide();case 33:case"end":return e.stop()}}),e,null,[[2,28]])})));return function(){return e.apply(this,arguments)}}(),b=function(){t.value="",o.value="",a.value=[]},h=[{label:"Select",action:function(t){return e.push("/emc/patient/".concat(t.personId))}},{label:"void",color:"danger",action:function(){var e=Object(s["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(y["a"])(function(){var e=Object(s["a"])(regeneratorRuntime.mark((function e(n){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,p["a"].voidPatient(t.personId,n);case 3:return e.next=5,d();case 5:e.next=10;break;case 7:e.prev=7,e.t0=e["catch"](0),Object(m["c"])("".concat(e.t0));case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}(),"void-modal"));case 1:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}()}];return{searchText:t,gender:o,tableRows:a,tableColumns:c,tableConfig:u,genderOptions:O["b"],selectInput:n,TableRowActions:h,searchPatient:d,resetQuery:b}}}),V=(n("c7dc"),n("d959")),N=n.n(V);const B=N()(I,[["render",i]]);t["default"]=B}}]);
//# sourceMappingURL=chunk-55792eb3.95b38a55.js.map