{"version":3,"sources":["webpack:///./node_modules/vue-loader-v16/dist/templateLoader.js","webpack:///./node_modules/cache-loader/dist/cjs.js","webpack:///./src/apps/ART/views/reports/moh/MohRegimenWeightDistribution.vue"],"names":["render","_ctx","_cache","$props","$setup","$data","$options","_component_report_template","_resolveComponent","_component_ion_page","_openBlock","_createBlock","default","_withCtx","_createVNode","title","period","rows","fields","columns","reportPrefix","config","showIndex","enabledPDFHorizontalPageBreak","onReportConfiguration","onPeriod","_","defineComponent","mixins","ReportMixin","components","ReportTemplate","IonPage","data","created","this","table","thTxt","REGIMEN_WEIGHT_DISTRIBUTION","map","r","thNum","getDateDurationFields","methods","report","RegimenReportService","setStartDate","start_date","setEndDate","end_date","getDateIntervalPeriod","getRegimensByWeight","setRows","mapRegimenRow","items","regimen","i","filter","d","v","Object","values","td","isEmpty","rowTotals","reduce","accum","curr","WEIGHT_BAND","forEach","weightBand","weightBandData","weight","w","mRegimens","males","fRegimens","females","maleRow","femaleRow","push","unknown_gender","uRegimens","tCount","__exports__"],"mappings":"uIAEM,SAAUA,EAAOC,EAAMC,EAAQC,EAAQC,EAAQC,EAAOC,GAC1D,MAAMC,EAA6BC,8BAAkB,mBAC/CC,EAAsBD,8BAAkB,YAE9C,OAAQE,yBAAcC,yBAAaF,EAAqB,KAAM,CAC5DG,QAASC,qBAAS,IAAM,CACtBC,yBAAaP,EAA4B,CACvCQ,MAAOd,EAAKc,MACZC,OAAQf,EAAKe,OACbC,KAAMhB,EAAKgB,KACXC,OAAQjB,EAAKiB,OACbC,QAASlB,EAAKkB,QACdC,aAAc,MACdC,OAAQ,CACAC,WAAW,GAEnBC,+BAA+B,EAC/BC,sBAAuBvB,EAAKwB,UAC3B,KAAM,EAAG,CAAC,QAAS,SAAU,OAAQ,SAAU,UAAW,4BAE/DC,EAAG,I,sFCbQC,+BAAgB,CAC3BC,OAAQ,CAACC,QACTC,WAAY,CAAEC,sBAAgBC,gBAC9BC,KAAM,KAAM,CACRhB,KAAM,GACNF,MAAO,gCACPI,QAAS,KAEbe,UACIC,KAAKhB,QAAU,CACX,CACIiB,OAAMC,MAAM,eACZD,OAAMC,MAAM,aACTC,OAA4BC,IAAIC,GAAKJ,OAAMK,MAAMD,IACpDJ,OAAMK,MAAM,WACZL,OAAMK,MAAM,qBAGpBN,KAAKjB,OAASiB,KAAKO,yBAEvBC,QAAS,CACL,eAAejB,EAAQL,GACnBc,KAAKlB,KAAO,GACZkB,KAAKS,OAAS,IAAIC,OAClBV,KAAKS,OAAOE,aAAazB,EAAO0B,YAChCZ,KAAKS,OAAOI,WAAW3B,EAAO4B,UAC9Bd,KAAKnB,OAASmB,KAAKS,OAAOM,wBAC1B,MAAMjB,QAAaE,KAAKS,OAAOO,4BACzBhB,KAAKiB,QAAQnB,IAEvB,cAAcA,GACV,MAAMoB,EAAiBC,GACnB,IAAIhB,OAA6B,OAAOC,IAAKgB,IACzC,MAAMC,EAAIF,EAAMG,OAAQC,KAAWA,EAAEH,IAChChB,IAAKoB,GAAWC,OAAOC,OAAOF,GAAG,IACtC,OAAOvB,OAAM0B,GAAGC,qBAAQP,GAAK,EAAIA,EAAE,MAGrCQ,EAAaN,GACfA,EAAEO,OAAO,CAACC,EAAeC,IAAcD,EAAQC,EAAKL,GAAI,GAE5DM,OAAYC,QAASC,IACjB,MAAMC,EAAkBtC,EAAKwB,OAAQC,GAAWA,EAAEc,SAAWF,GAC7DC,EAAeF,QAASI,IACpB,MAAMC,EAAYrB,EAAcoB,EAAEE,OAC5BC,EAAYvB,EAAcoB,EAAEI,SAC5BC,EAAU,CACZ1C,OAAM0B,GAAGQ,GACTlC,OAAM0B,GAAG,WACNY,EACHtC,OAAM0B,GAAGE,EAAUU,KAEjBK,EAAY,CACd3C,OAAM0B,GAAGQ,GACTlC,OAAM0B,GAAG,aACNc,EACHxC,OAAM0B,GAAGE,EAAUY,KAIvB,GAFAzC,KAAKlB,KAAK+D,KAAKF,GACf3C,KAAKlB,KAAK+D,KAAKD,IACVhB,qBAAQU,EAAEQ,gBAAiB,CAC5B,MAAMC,EAAY7B,EAAcoB,EAAEQ,gBAC5BE,EAASnB,EAAUkB,GACzB/C,KAAKlB,KAAK+D,KAAK,CACX5C,OAAM0B,GAAGQ,GACTlC,OAAM0B,GAAG,qBACNoB,EACH9C,OAAM0B,GAAGqB,c,qBCvErC,MAAMC,EAA2B,IAAgB,EAAQ,CAAC,CAAC,SAASpF,KAErD","file":"js/chunk-2d225875.7bf5f344.js","sourcesContent":["import { resolveComponent as _resolveComponent, createVNode as _createVNode, withCtx as _withCtx, openBlock as _openBlock, createBlock as _createBlock } from \"vue\"\n\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  const _component_report_template = _resolveComponent(\"report-template\")\n  const _component_ion_page = _resolveComponent(\"ion-page\")\n\n  return (_openBlock(), _createBlock(_component_ion_page, null, {\n    default: _withCtx(() => [\n      _createVNode(_component_report_template, {\n        title: _ctx.title,\n        period: _ctx.period,\n        rows: _ctx.rows,\n        fields: _ctx.fields,\n        columns: _ctx.columns,\n        reportPrefix: \"MoH\",\n        config: {\n                showIndex: false\n            },\n        enabledPDFHorizontalPageBreak: true,\n        onReportConfiguration: _ctx.onPeriod\n      }, null, 8, [\"title\", \"period\", \"rows\", \"fields\", \"columns\", \"onReportConfiguration\"])\n    ]),\n    _: 1\n  }))\n}","\nimport { defineComponent } from 'vue'\nimport ReportMixin from \"@/apps/ART/views/reports/ReportMixin.vue\"\nimport { RegimenReportService, WEIGHT_BAND, REGIMEN_WEIGHT_DISTRIBUTION } from \"@/apps/ART/services/reports/regimen_report_service\"\nimport { isEmpty } from \"lodash\"\nimport ReportTemplate from \"@/apps/ART/views/reports/TableReportTemplate.vue\"\nimport table from \"@/components/DataViews/tables/ReportDataTable\"\nimport { IonPage } from \"@ionic/vue\"\n\nexport default defineComponent({\n    mixins: [ReportMixin],\n    components: { ReportTemplate, IonPage },\n    data: () => ({\n        rows: [] as Array<any>,\n        title: 'Regimen distribution (Weight)',\n        columns: [] as Array<any>\n    }),\n    created() {\n        this.columns = [\n            [\n                table.thTxt('Weight band'),\n                table.thTxt('Gender'),\n                ...REGIMEN_WEIGHT_DISTRIBUTION.map(r => table.thNum(r)),\n                table.thNum('Unknown'),\n                table.thNum('Total (regimen)')\n            ]\n        ] \n        this.fields = this.getDateDurationFields()\n    },\n    methods: {\n        async onPeriod(_: any, config: any) {\n            this.rows = []\n            this.report = new RegimenReportService()\n            this.report.setStartDate(config.start_date)\n            this.report.setEndDate(config.end_date)\n            this.period = this.report.getDateIntervalPeriod()\n            const data = await this.report.getRegimensByWeight()\n            await this.setRows(data)\n        },\n        async setRows(data: any) {\n            const mapRegimenRow = (items: any) => \n                [...REGIMEN_WEIGHT_DISTRIBUTION, 'N/A'].map((regimen: any) => {\n                    const i = items.filter((d: any) => d[regimen] ? true : false)\n                        .map((v: any) => Object.values(v)[0])\n                    return table.td(isEmpty(i) ? 0 : i[0])\n                })\n\n            const rowTotals = (d: Array<any>) =>\n                d.reduce((accum: number, curr: any) => accum + curr.td, 0)\n\n            WEIGHT_BAND.forEach((weightBand: any) => {\n                const weightBandData =  data.filter((d: any) => d.weight === weightBand)\n                weightBandData.forEach((w: any) => {\n                    const mRegimens = mapRegimenRow(w.males)\n                    const fRegimens = mapRegimenRow(w.females)\n                    const maleRow = [\n                        table.td(weightBand), \n                        table.td('Male'), \n                        ...mRegimens, \n                        table.td(rowTotals(mRegimens))\n                    ]\n                    const femaleRow = [\n                        table.td(weightBand),\n                        table.td('Female'),\n                        ...fRegimens,\n                        table.td(rowTotals(fRegimens))\n                    ]\n                    this.rows.push(maleRow)\n                    this.rows.push(femaleRow)\n                    if (!isEmpty(w.unknown_gender)) {\n                        const uRegimens = mapRegimenRow(w.unknown_gender)\n                        const tCount = rowTotals(uRegimens)\n                        this.rows.push([\n                            table.td(weightBand),\n                            table.td('Unknown Gender'),\n                            ...uRegimens,\n                            table.td(tCount)\n                        ]) \n                    }\n                })\n            })\n        }\n    }\n})\n","import { render } from \"./MohRegimenWeightDistribution.vue?vue&type=template&id=0cff72eb&ts=true\"\nimport script from \"./MohRegimenWeightDistribution.vue?vue&type=script&lang=ts\"\nexport * from \"./MohRegimenWeightDistribution.vue?vue&type=script&lang=ts\"\n\nimport exportComponent from \"/home/andrew-dev/Projects/HIS-Core/node_modules/vue-loader-v16/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__"],"sourceRoot":""}