(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-1c02c7ce"],{"38e6":function(e,t,i){"use strict";var n=i("7a23");const l={id:"report-content"},a={id:"moh_template"},o={key:0,class:"main-title"},r={key:1,class:"main-title"},c={key:2,class:"main-title"},s={key:3,class:"table-section"},d={key:4,colspan:2,class:"table-section"},b={key:5},_=["onClick"];function u(e,t,i,u,p,m){const v=Object(n["resolveComponent"])("layout");return Object(n["openBlock"])(),Object(n["createBlock"])(v,{logo:"login-logos/Malawi-Coat_of_arms_of_arms.png",title:e.data.title,toCSV:e.exportCsv,toPDF:e.exportPdf,period:e.data.period,dateGenerated:e.data.dateGenerated,refreshReport:e.generate,configure:e.configure},{default:Object(n["withCtx"])(()=>[Object(n["createElementVNode"])("div",l,[Object(n["createElementVNode"])("table",a,[(Object(n["openBlock"])(!0),Object(n["createElementBlock"])(n["Fragment"],null,Object(n["renderList"])(e.indicators,(t,i)=>(Object(n["openBlock"])(),Object(n["createElementBlock"])("tr",{key:i},[t.isMainTitle?(Object(n["openBlock"])(),Object(n["createElementBlock"])("td",o,"#")):Object(n["createCommentVNode"])("",!0),t.isMainTitle?(Object(n["openBlock"])(),Object(n["createElementBlock"])("td",r,Object(n["toDisplayString"])(t.label),1)):Object(n["createCommentVNode"])("",!0),t.isMainTitle?(Object(n["openBlock"])(),Object(n["createElementBlock"])("td",c,"#")):Object(n["createCommentVNode"])("",!0),t.isSectionTitle?(Object(n["openBlock"])(),Object(n["createElementBlock"])("td",s)):Object(n["createCommentVNode"])("",!0),t.isSectionTitle?(Object(n["openBlock"])(),Object(n["createElementBlock"])("td",d,Object(n["toDisplayString"])(t.label),1)):Object(n["createCommentVNode"])("",!0),t.isMainTitle||t.isSectionTitle?Object(n["createCommentVNode"])("",!0):(Object(n["openBlock"])(),Object(n["createElementBlock"])("td",b,Object(n["toDisplayString"])(t.index),1)),t.isMainTitle||t.isSectionTitle?Object(n["createCommentVNode"])("",!0):(Object(n["openBlock"])(),Object(n["createElementBlock"])("td",{key:6,style:Object(n["normalizeStyle"])(t.style||{}),class:"table-key"},Object(n["toDisplayString"])(t.label),5)),t.isMainTitle||t.isSectionTitle?Object(n["createCommentVNode"])("",!0):(Object(n["openBlock"])(),Object(n["createElementBlock"])("td",{key:7,class:"table-value",onClick:i=>e.drill(t)},Object(n["toDisplayString"])(t._value),9,_))]))),128))])])]),_:1},8,["title","toCSV","toPDF","period","dateGenerated","refreshReport","configure"])}var p=i("954d"),m=i("d20e"),v=i("1c74"),g=i("b5e4"),f=i("ba82"),O=i("6179"),j=i("cf9e"),x=i("d867"),y=i("5a0c"),h=i.n(y),k=i("2ef0");const C=Object(n["reactive"])({model:[],indicators:{},dateGenerated:"",startDate:"",endDate:"",title:"",period:""}),N=Object(n["computed"])(()=>C.model.map(e=>{if("function"===typeof e.value){const t=e.value(C.indicators);Array.isArray(t)?(e._value=""+t.length,e._drill=t):e._value=t}return e})),w=Object(n["computed"])(()=>{const[e,...t]=N.value.map(e=>[e.index||"",e.label,e.index?e._value||0:""]);return{rows:t,columns:[["#",N.value[0].label,"#"]]}});function V(e){e.title!=C.title&&(C.indicators={}),C.title=e.title,C.model=e.indicators;const t=async(t="",i="")=>{(await x["X"].create({message:"Please wait .."})).present();try{const n=new m["a"](e.name);n.startDate=t||C.startDate,n.endDate=i||C.endDate,C.indicators=await n.requestReport({type:"moh"}),C.dateGenerated=h()(v["e"].getSessionDate()).format("DD/MMM/YYYY HH:mm:ss")}catch(n){Object(g["e"])("Unable to generate report")}x["X"].dismiss()},i=()=>Object(j["a"])({title:C.title,onFinish:(e,i,n)=>{C.period=n,C.startDate=e,C.endDate=i,t()}}),l=e=>{Array.isArray(e._drill)&&Object(O["a"])(e.label,e._drill)},a=()=>{const e=document.getElementById("report-content");e&&Object(f["c"])(`\n                <html>\n                <head>\n                    <link rel="stylesheet" media="print"  href="/assets/css/hts-report-style-print.css"/>\n                    <style> \n                        #moh_template { border: solid 1px #3333; width: 100%; } td { font-size: var(--his-sm-font-size); padding: 0.3em; } .main-title { background: #8EAADB; font-weight: bold; border: solid 3px black; } .table-value { padding: 1em; text-align: center; color: #337ab7; font-weight: bold; font-size: var(--his-md-font-size); border: solid 2px black; } .table-section { font-weight: bold; background: #D9E2F3; border: solid 3px black; }\n                    </style>\n                </head>\n                <body>\n                    ${e.innerHTML}\n                </body>\n                </html>\n            `,50)},o=()=>{const{rows:e,columns:t}=w.value;Object(f["b"])(t,Object(f["a"])(e,C),`MOH-${C.title}-${v["e"].getLocationName()}-${C.period}`)};return Object(n["onMounted"])(()=>Object(k["isEmpty"])(C.indicators)&&i()),{drill:l,data:C,indicators:N,exportable:w,generate:t,exportPdf:a,exportCsv:o,configure:i}}var T=Object(n["defineComponent"])({components:{Layout:p["a"]},props:{params:{type:Object,required:!0}},setup(e){return V(e.params)}}),S=(i("7b22"),i("d959")),I=i.n(S);const D=I()(T,[["render",u],["__scopeId","data-v-5c21aaf2"]]);t["a"]=D},4038:function(e,t,i){"use strict";i.r(t);var n=i("7a23");function l(e,t,i,l,a,o){const r=Object(n["resolveComponent"])("moh-template"),c=Object(n["resolveComponent"])("ion-page");return Object(n["openBlock"])(),Object(n["createBlock"])(c,null,{default:Object(n["withCtx"])(()=>[Object(n["createVNode"])(r,{params:e.params},null,8,["params"])]),_:1})}var a=i("d867"),o=i("38e6"),r=Object(n["defineComponent"])({components:{IonPage:a["D"],MohTemplate:o["a"]},setup(){const e={title:"Confirmatory HTS",name:"HTS CONFIRMATORY",indicators:[{isMainTitle:!0,label:"Confirmatory HIV Testing Register"},{label:"Total clients in confirmatory register",index:"1",value:e=>e["total_clients_in_confirmatory_register"]},{isSectionTitle:!0,label:"HIV test 2 result"},{label:"Negative",index:"2",value:e=>e["hiv_test_2_result_negative"]},{label:"Positive",index:"3",value:e=>e["hiv_test_2_result_positive"]},{label:"Invalid entry",index:"4",value:e=>e["hiv_test_2_result_invalid_entry"]},{label:"Missing",index:"5",value:e=>e["hiv_test_2_result_missing"]},{isSectionTitle:!0,label:"HIV test 3 result"},{label:"Negative",index:"6",value:e=>e["hiv_test_3_result_negative"]},{label:"Positive",index:"7",value:e=>e["hiv_test_3_result_positive"]},{label:"Invalid entry",index:"8",value:e=>e["hiv_test_3_result_invalid_entry"]},{label:"Not applicable / missing",index:"9",value:e=>e["hiv_test_3_result_not_applicable_or_missing"]},{isSectionTitle:!0,label:"HIV test 1 repeat result"},{label:"Negative",index:"10",value:e=>e["hiv_test_1_repeat_result_negative"]},{label:"Positive",index:"11",value:e=>e["hiv_test_1_repeat_result_positive"]},{label:"Invalid entry",index:"12",value:e=>e["hiv_test_1_repeat_result_invalid_entry"]},{label:"Not applicable / missing",index:"13",value:e=>e["hiv_test_1_repeat_result_not_applicable_or_missing"]},{isSectionTitle:!0,label:"Result given to client"},{label:"Negative",index:"14",value:e=>e["hiv_group_negative"]},{label:"New Positive",index:"15",value:e=>e["hiv_group_new_positive"]},{label:"New Inconclusive",index:"16",value:e=>e["hiv_group_new_inconclusive"]},{label:"Exposed infant",index:"17",value:e=>e["hiv_group_exposed_infant"]},{label:"Positive re-test",index:"18",value:e=>e["hiv_group_positive_retest"]},{label:"Inconclusive re-test",index:"19",value:e=>e["hiv_group_inconclusive_retest"]},{label:"Invalid entry",index:"20",value:e=>e["result_given_to_client_invalid_entry"]},{label:"Missing",index:"21",value:e=>e["result_given_to_client_missing"]},{isSectionTitle:!0,label:"RTRI result"},{label:"Long-term",index:"22",value:e=>e["rtri_result_longterm"]},{label:"Recent",index:"23",value:e=>e["rtri_result_recent"]},{label:"Negative",index:"24",value:e=>e["rtri_result_negative"]},{label:"Invalid RTRI result",index:"25",value:e=>e["invalid_rtri_result"]},{label:"Not done",index:"26",value:e=>e["rtri_result_not_done"]},{label:"Invalid entry",index:"27",value:e=>e["rtri_result_invalid_entry"]},{label:"Missing",index:"28",value:e=>e["rtri_result_missing_among_hiv_positive_clients"]},{isSectionTitle:!0,label:"DBS collected"},{label:"No",index:"29",value:e=>e["dbs_collected_no"]},{label:"Yes",index:"30",value:e=>e["dbs_collected_yes"]},{label:"Invalid entry",index:"30",value:e=>e["dbs_collected_invalid_entry"]},{label:"Missing (where RTRI recent)",index:"31",value:e=>e["dbs_collected_missing_where_rtri_recent"]},{label:"Not applicable",index:"32",value:e=>e["dbs_collected_not_applicable"]},{isSectionTitle:!0,label:"Specimen IDs"},{label:"Valid IDs entered",index:"33",value:e=>e["specimen_ids_valid_ids_entered"]},{label:"Invalid entry",index:"34",value:e=>e["specimen_ids_invalid_entry"]},{label:"Missing (where DBS collected)",index:"35",value:e=>e["specimen_ids_missing_where_dbs_collected"]},{label:"Not applicable",index:"36",value:e=>e["specimen_ids_not_applicable"]},{isSectionTitle:!0,label:"Referral for re-testing (after confirmatory)"},{label:"No",index:"37",value:e=>e["referral_for_retesting_after_confirmatory_no"]},{label:"Yes",index:"38",value:e=>e["referral_for_retesting_after_confirmatory_yes"]},{label:"Invalid entry",index:"39",value:e=>e["referral_for_retesting_after_confirmatory_invalid_entry"]},{label:"Missing",index:"40",value:e=>e["referral_for_retesting_after_confirmatory_missing"]},{isSectionTitle:!0,label:"Referral for ART initiation"},{label:"No",index:"41",value:e=>e["referral_for_art_initiation_no"]},{label:"Yes",index:"42",value:e=>e["referral_for_art_initiation_yes"]},{label:"Invalid entry",index:"43",value:e=>e["referral_for_art_initiation_invalid_entry"]},{label:"Missing",index:"44",value:e=>e["referral_for_art_initiation_missing"]},{isSectionTitle:!0,label:"ART referral outcome"},{label:"Linked",index:"45",value:e=>e["art_referral_outcome_linked"]},{label:"Refused",index:"46",value:e=>e["art_referral_outcome_refused"]},{label:"Died",index:"47",value:e=>e["art_referral_outcome_died"]},{label:"Unknown",index:"48",value:e=>e["art_referral_outcome_unknown"]},{label:"Invalid entry",index:"49",value:e=>e["art_referral_outcome_invalid_entry"]},{label:"Missing (where referred for ART)",index:"50",value:e=>e["art_referral_outcome_missing_where_referred_for_art"]},{label:"Not applicable",index:"51",value:e=>e["art_referral_outcome_not_applicable"]},{isSectionTitle:!0,label:"ART clinic registration indexber"},{label:"Valid entry",index:"52",value:e=>e["art_clinic_registration_indexber_valid_entry"]},{label:"Invalid entry",index:"53",value:e=>e["art_clinic_registration_indexber_invalid_entry"]},{label:"Missing (among clients linked to ART)",index:"54",value:e=>e["art_clinic_registration_indexber_missing_among_clients_linked_to_art"]},{label:"Not applicable",index:"55",value:e=>e["art_clinic_registration_indexber_not_applicable"]},{isSectionTitle:!0,label:"Linking with initial register"},{label:"Valid Link-ID",index:"56",value:e=>e["linking_with_initial_register_valid_linkid"]},{label:"Invalid Link-ID",index:"57",value:e=>e["linking_with_initial_register_invalid_linkid"]},{label:"Missing Link-ID",index:"58",value:e=>e["linking_with_initial_register_missing_linkid"]}]};return{params:e}}}),c=i("d959"),s=i.n(c);const d=s()(r,[["render",l]]);t["default"]=d},5454:function(e,t,i){},6179:function(e,t,i){"use strict";i.d(t,"a",(function(){return d}));i("14d9");var n=i("d867"),l=i("d6aa"),a=i("9ceb"),o=i("7a23"),r=i("23e6"),c=i("afbc");const s=Object(o["reactive"])({});function d(e,t){b({title:e,columns:[[a["a"].thTxt("National ID"),a["a"].thTxt("First name"),a["a"].thTxt("Last name"),a["a"].thTxt("Gender"),a["a"].thTxt("Birthdate"),a["a"].thTxt("Action")]],data:t,generator:async e=>{const t=e.map(async e=>{let t=null;return s[e]?t=s[e]:(t=new r["a"](await r["a"].findByID(e)),s[e]=t),[a["a"].td(t.getNationalID()),a["a"].td(t.getGivenName()),a["a"].td(t.getFamilyName()),a["a"].td(t.getGender()),a["a"].tdDate(""+t.getBirthdate()),a["a"].tdBtn("Show",()=>{c["a"].push({path:"/patient/dashboard/"+e}),n["Z"].dismiss({})})]});return Promise.all(t)}})}async function b(e={}){(await n["Z"].create({component:l["a"],cssClass:"large-modal",componentProps:{title:e.title,columns:e.columns,rows:e.data,footerColor:"light",rowParser:t=>e.generator(t),paginated:!0,showFilters:!0,rowsPerPage:20,showReportStamp:!1,onFinish:()=>n["Z"].dismiss()}})).present()}},"7b22":function(e,t,i){"use strict";i("bdcc")},"954d":function(e,t,i){"use strict";var n=i("7a23");const l={class:"header-text-list"},a={key:0},o={id:"report-content"};function r(e,t,i,r,c,s){const d=Object(n["resolveComponent"])("ion-img"),b=Object(n["resolveComponent"])("ion-thumbnail"),_=Object(n["resolveComponent"])("ion-label"),u=Object(n["resolveComponent"])("ion-item"),p=Object(n["resolveComponent"])("ion-toolbar"),m=Object(n["resolveComponent"])("ion-header"),v=Object(n["resolveComponent"])("ion-content"),g=Object(n["resolveComponent"])("ion-chip"),f=Object(n["resolveComponent"])("ion-footer"),O=Object(n["resolveComponent"])("his-footer"),j=Object(n["resolveComponent"])("ion-page");return Object(n["openBlock"])(),Object(n["createBlock"])(j,null,{default:Object(n["withCtx"])(()=>[Object(n["createVNode"])(m,null,{default:Object(n["withCtx"])(()=>[Object(n["createVNode"])(p,null,{default:Object(n["withCtx"])(()=>[Object(n["createVNode"])(u,null,{default:Object(n["withCtx"])(()=>[e.reportLogo?(Object(n["openBlock"])(),Object(n["createBlock"])(b,{key:0},{default:Object(n["withCtx"])(()=>[Object(n["createVNode"])(d,{src:e.reportLogo},null,8,["src"])]),_:1})):Object(n["createCommentVNode"])("",!0),Object(n["createVNode"])(_,null,{default:Object(n["withCtx"])(()=>[Object(n["createElementVNode"])("ul",l,[Object(n["createElementVNode"])("li",null,[Object(n["createElementVNode"])("b",null,Object(n["toDisplayString"])(e.title),1)]),e.period?(Object(n["openBlock"])(),Object(n["createElementBlock"])("li",a,[Object(n["createElementVNode"])("b",null,Object(n["toDisplayString"])(e.period),1)])):Object(n["createCommentVNode"])("",!0)])]),_:1})]),_:1})]),_:1})]),_:1}),Object(n["createVNode"])(v,{"scroll-y":"","scroll-x":""},{default:Object(n["withCtx"])(()=>[Object(n["createElementVNode"])("div",o,[Object(n["renderSlot"])(e.$slots,"default",{},void 0,!0)])]),_:3}),Object(n["createVNode"])(f,null,{default:Object(n["withCtx"])(()=>[Object(n["createVNode"])(p,null,{default:Object(n["withCtx"])(()=>[Object(n["createVNode"])(g,{color:"primary"},{default:Object(n["withCtx"])(()=>[Object(n["createTextVNode"])("Date Generated: "),Object(n["createElementVNode"])("b",null,Object(n["toDisplayString"])(e.dateGenerated),1)]),_:1}),Object(n["createVNode"])(g,{color:"primary"},{default:Object(n["withCtx"])(()=>[Object(n["createTextVNode"])("APP version: "),Object(n["createElementVNode"])("b",null,Object(n["toDisplayString"])(e.appVersion),1)]),_:1}),Object(n["createVNode"])(g,{color:"primary"},{default:Object(n["withCtx"])(()=>[Object(n["createTextVNode"])("API version: "),Object(n["createElementVNode"])("b",null,Object(n["toDisplayString"])(e.apiVersion),1)]),_:1})]),_:1})]),_:1}),Object(n["createVNode"])(O,{color:"dark",btns:e.buttons},null,8,["btns"])]),_:3})}i("14d9");var c=i("d867"),s=i("1718"),d=i("0f25"),b=i("6605"),_=i("1c74"),u=Object(n["defineComponent"])({components:{IonLabel:c["x"],IonItem:c["w"],HisFooter:d["a"],IonPage:c["D"],IonHeader:c["q"],IonContent:c["n"],IonToolbar:c["S"],IonChip:c["l"],IonFooter:c["o"],IonThumbnail:c["Q"],IonImg:c["s"]},props:{title:{type:String},period:{type:String},logo:{type:String},toCSV:{type:Function,required:!1},toPDF:{type:Function,required:!1},configure:{type:Function,required:!1},refreshReport:{type:Function,required:!0},dateGenerated:{type:String,default:"-"}},setup(e){const t=Object(b["i"])(),i=[],l=_["e"].getCoreVersion(),a=_["e"].getApiVersion(),o=Object(n["computed"])(()=>e.logo?Object(s["a"])(e.logo):null);function r(e,t){return{name:e.name||"Btn",size:e.size||"large",slot:e.slot||"start",color:e.color||"primary",visible:e.visible||!0,onClick:t}}return"function"===typeof e.toCSV&&i.push(r({name:"CSV"},e.toCSV)),"function"===typeof e.toPDF&&i.push(r({name:"PDF"},e.toPDF)),"function"===typeof e.configure&&i.push(r({name:"Set Date",slot:"end",color:"primary"},()=>e.configure&&e.configure())),i.push(r({name:"Refresh",slot:"end",color:"warning"},()=>e.refreshReport())),i.push(r({name:"Finish",slot:"end",color:"success"},()=>t.push("/"))),{buttons:i,appVersion:l,apiVersion:a,reportLogo:o}}}),p=(i("f47e"),i("d959")),m=i.n(p);const v=m()(u,[["render",r],["__scopeId","data-v-3e4a390e"]]);t["a"]=v},bdcc:function(e,t,i){},f47e:function(e,t,i){"use strict";i("5454")}}]);
//# sourceMappingURL=chunk-1c02c7ce.10ac5e65.js.map