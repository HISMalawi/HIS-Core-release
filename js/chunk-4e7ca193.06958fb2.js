(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-4e7ca193"],{"80ff":function(e,t,a){"use strict";a.r(t);var i=a("7a23");function n(e,t,a,n,r,o){const s=Object(i["resolveComponent"])("his-standard-form");return Object(i["openBlock"])(),Object(i["createBlock"])(s,{cancelDestinationPath:e.cancelDestination,fields:e.fields,onFinishAction:e.onSubmit},null,8,["cancelDestinationPath","fields","onFinishAction"])}var r=a("9441"),o=a("7365"),s=a("2706"),c=a("d95e"),l=a("e86e"),d=a("cc6f");class u extends d["a"]{constructor(e,t){super(e,114,t)}}class m extends d["a"]{constructor(e,t){super(e,42,t)}}var f=Object(i["defineComponent"])({components:{HisStandardForm:r["a"]},mixins:[o["a"]],data:()=>({referralService:{},admissionService:{}}),watch:{ready:{async handler(e){e&&(this.referralService=new u(this.patientID,this.providerID),this.admissionService=new m(this.patientID,this.providerID),this.fields=this.getFields())},immediate:!0,deep:!0}},methods:{async onSubmit(e,t){if("Admission"===e.opd_outcome.value){await this.admissionService.createEncounter();const e=await this.resolveObs({...t},"admission");await this.admissionService.saveObservationList(e)}else{await this.referralService.createEncounter();const e=await this.resolveObs({...t},"referral");await this.referralService.saveObservationList(e)}this.nextTask()},getFields(){return[{id:"opd_outcome",helpText:"Select outcome",type:c["b"].TT_SELECT,validation:e=>s["a"].required(e),options:()=>[{label:"Admit",value:"Admission"},{label:"Internal referral",value:"Internal referral"},{label:"Refer to another hospital/clinic",value:"External referral"}]},{id:"facility_name",helpText:"Select Facility name",type:c["b"].TT_SELECT,validation:e=>s["a"].required(e),computedValue:({value:e})=>({tag:"referral",obs:this.referralService.buildValueText("Referred",e)}),condition:e=>"External referral"===e.opd_outcome.value,options:(e,t="")=>Object(l["b"])(t),config:{showKeyboard:!0,isFilterDataViaApi:!0}},{id:"specialist_clinic",helpText:"Select clinic",type:c["b"].TT_SELECT,validation:e=>s["a"].required(e),computedValue:({other:e})=>({tag:"referral",obs:this.referralService.buildValueCodedFromConceptId("Specialist clinic",e.concept_id)}),condition:e=>"Internal referral"===e.opd_outcome.value,options:()=>Object(l["f"])(),config:{showKeyboard:!0}},{id:"wards",helpText:"Select ward",type:c["b"].TT_SELECT,condition:e=>"Admission"===e.opd_outcome.value,validation:e=>s["a"].required(e),computedValue:({value:e})=>({tag:"admission",obs:this.admissionService.buildValueText("Admit to ward",e)}),options:(e,t="")=>Object(l["c"])(t),config:{showKeyboard:!0,isFilterDataViaApi:!0}}]}}}),p=a("6b0d"),h=a.n(p);const v=h()(f,[["render",n]]);t["default"]=v},e86e:function(e,t,a){"use strict";a.d(t,"b",(function(){return r})),a.d(t,"d",(function(){return o})),a.d(t,"c",(function(){return s})),a.d(t,"f",(function(){return c})),a.d(t,"e",(function(){return l})),a.d(t,"a",(function(){return d})),a.d(t,"g",(function(){return u})),a.d(t,"h",(function(){return m}));var i=a("5713"),n=a("2ef0");async function r(e=""){const t=await i["a"].getFacilities({name:e});return t.filter(e=>!Object(n["isEmpty"])(e)).map(e=>({label:e.name,value:e.location_id,other:e}))}async function o(e=""){const t=await i["a"].getLabs({search_name:e});return t.map(e=>({label:e,value:e}))}async function s(e=""){const t=await i["a"].getFacilities({name:e,tag:"Facility adult sections"});return t.map(e=>({label:e.name,value:e.name,other:e}))}async function c(){const e=await i["a"].getSpecialistClinics();return e.map(e=>({label:e.name,value:e.name,other:e}))}async function l(){const e=await i["a"].getRegions();return e.map(e=>({label:e.name,value:e.region_id,other:e}))}async function d(e){const t=await i["a"].getDistricts(e);return t.map(e=>({label:e.name,value:e.district_id,other:e}))}async function u(e,t=""){const a=await i["a"].getTraditionalAuthorities(e,t);return a.map(e=>({label:e.name,value:e.traditional_authority_id,other:e}))}async function m(e,t=""){const a=await i["a"].getVillages(e,t);return a.map(e=>({label:e.name,value:e.village_id,other:e}))}}}]);
//# sourceMappingURL=chunk-4e7ca193.06958fb2.js.map