(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-29a8b44a"],{"38e6":function(e,t,o){"use strict";var n=o("7a23");const a={id:"report-content"},l={id:"moh_template"},c={key:0,class:"main-title"},i={key:1,class:"main-title"},r={key:2,class:"main-title"},s={key:3,class:"table-section"},d={key:4,colspan:2,class:"table-section"},b={key:5},p=["onClick"];function m(e,t,o,m,u,O){const j=Object(n["resolveComponent"])("layout");return Object(n["openBlock"])(),Object(n["createBlock"])(j,{logo:"login-logos/Malawi-Coat_of_arms_of_arms.png",title:e.data.title,toCSV:e.exportCsv,toPDF:e.exportPdf,period:e.data.period,dateGenerated:e.data.dateGenerated,refreshReport:e.generate,configure:e.configure},{default:Object(n["withCtx"])(()=>[Object(n["createElementVNode"])("div",a,[Object(n["createElementVNode"])("table",l,[(Object(n["openBlock"])(!0),Object(n["createElementBlock"])(n["Fragment"],null,Object(n["renderList"])(e.indicators,(t,o)=>(Object(n["openBlock"])(),Object(n["createElementBlock"])("tr",{key:o},[t.isMainTitle?(Object(n["openBlock"])(),Object(n["createElementBlock"])("td",c,"#")):Object(n["createCommentVNode"])("",!0),t.isMainTitle?(Object(n["openBlock"])(),Object(n["createElementBlock"])("td",i,Object(n["toDisplayString"])(t.label),1)):Object(n["createCommentVNode"])("",!0),t.isMainTitle?(Object(n["openBlock"])(),Object(n["createElementBlock"])("td",r,"#")):Object(n["createCommentVNode"])("",!0),t.isSectionTitle?(Object(n["openBlock"])(),Object(n["createElementBlock"])("td",s)):Object(n["createCommentVNode"])("",!0),t.isSectionTitle?(Object(n["openBlock"])(),Object(n["createElementBlock"])("td",d,Object(n["toDisplayString"])(t.label),1)):Object(n["createCommentVNode"])("",!0),t.isMainTitle||t.isSectionTitle?Object(n["createCommentVNode"])("",!0):(Object(n["openBlock"])(),Object(n["createElementBlock"])("td",b,Object(n["toDisplayString"])(t.index),1)),t.isMainTitle||t.isSectionTitle?Object(n["createCommentVNode"])("",!0):(Object(n["openBlock"])(),Object(n["createElementBlock"])("td",{key:6,style:Object(n["normalizeStyle"])(t.style||{}),class:"table-key"},Object(n["toDisplayString"])(t.label),5)),t.isMainTitle||t.isSectionTitle?Object(n["createCommentVNode"])("",!0):(Object(n["openBlock"])(),Object(n["createElementBlock"])("td",{key:7,class:"table-value",onClick:o=>e.drill(t)},Object(n["toDisplayString"])(t._value),9,p))]))),128))])])]),_:1},8,["title","toCSV","toPDF","period","dateGenerated","refreshReport","configure"])}var u=o("954d"),O=o("d20e"),j=o("1c74"),f=o("b5e4"),v=o("ba82"),y=o("6179"),g=o("cf9e"),h=o("d867"),_=o("5a0c"),C=o.n(_),x=o("2ef0");const k=Object(n["reactive"])({model:[],indicators:{},dateGenerated:"",startDate:"",endDate:"",title:"",period:""}),w=Object(n["computed"])(()=>k.model.map(e=>{if("function"===typeof e.value){const t=e.value(k.indicators);Array.isArray(t)?(e._value=""+t.length,e._drill=t):e._value=t}return e})),V=Object(n["computed"])(()=>{const[e,...t]=w.value.map(e=>[e.index||"",e.label,e.index?e._value||0:""]);return{rows:t,columns:[["#",w.value[0].label,"#"]]}});function N(e){e.title!=k.title&&(k.indicators={}),k.title=e.title,k.model=e.indicators;const t=async(t="",o="")=>{(await h["X"].create({message:"Please wait .."})).present();try{const n=new O["a"](e.name);n.startDate=t||k.startDate,n.endDate=o||k.endDate,k.indicators=await n.requestReport({type:"moh"}),k.dateGenerated=C()(j["e"].getSessionDate()).format("DD/MMM/YYYY HH:mm:ss")}catch(n){Object(f["e"])("Unable to generate report")}h["X"].dismiss()},o=()=>Object(g["a"])({title:k.title,onFinish:(e,o,n)=>{k.period=n,k.startDate=e,k.endDate=o,t()}}),a=e=>{Array.isArray(e._drill)&&Object(y["a"])(e.label,e._drill)},l=()=>{const e=document.getElementById("report-content");e&&Object(v["c"])(`\n                <html>\n                <head>\n                    <link rel="stylesheet" media="print"  href="/assets/css/hts-report-style-print.css"/>\n                    <style> \n                        #moh_template { border: solid 1px #3333; width: 100%; } td { font-size: var(--his-sm-font-size); padding: 0.3em; } .main-title { background: #8EAADB; font-weight: bold; border: solid 3px black; } .table-value { padding: 1em; text-align: center; color: #337ab7; font-weight: bold; font-size: var(--his-md-font-size); border: solid 2px black; } .table-section { font-weight: bold; background: #D9E2F3; border: solid 3px black; }\n                    </style>\n                </head>\n                <body>\n                    ${e.innerHTML}\n                </body>\n                </html>\n            `,50)},c=()=>{const{rows:e,columns:t}=V.value;Object(v["b"])(t,Object(v["a"])(e,k),`MOH-${k.title}-${j["e"].getLocationName()}-${k.period}`)};return Object(n["onMounted"])(()=>Object(x["isEmpty"])(k.indicators)&&o()),{drill:a,data:k,indicators:w,exportable:V,generate:t,exportPdf:l,exportCsv:c,configure:o}}var B=Object(n["defineComponent"])({components:{Layout:u["a"]},props:{params:{type:Object,required:!0}},setup(e){return N(e.params)}}),D=(o("7b22"),o("d959")),S=o.n(D);const T=S()(B,[["render",m],["__scopeId","data-v-5c21aaf2"]]);t["a"]=T},5454:function(e,t,o){},6179:function(e,t,o){"use strict";o.d(t,"a",(function(){return d}));o("14d9");var n=o("d867"),a=o("d6aa"),l=o("9ceb"),c=o("7a23"),i=o("23e6"),r=o("afbc");const s=Object(c["reactive"])({});function d(e,t){b({title:e,columns:[[l["a"].thTxt("National ID"),l["a"].thTxt("First name"),l["a"].thTxt("Last name"),l["a"].thTxt("Gender"),l["a"].thTxt("Birthdate"),l["a"].thTxt("Action")]],data:t,generator:async e=>{const t=e.map(async e=>{let t=null;return s[e]?t=s[e]:(t=new i["a"](await i["a"].findByID(e)),s[e]=t),[l["a"].td(t.getNationalID()),l["a"].td(t.getGivenName()),l["a"].td(t.getFamilyName()),l["a"].td(t.getGender()),l["a"].tdDate(""+t.getBirthdate()),l["a"].tdBtn("Show",()=>{r["a"].push({path:"/patient/dashboard/"+e}),n["Z"].dismiss({})})]});return Promise.all(t)}})}async function b(e={}){(await n["Z"].create({component:a["a"],cssClass:"large-modal",componentProps:{title:e.title,columns:e.columns,rows:e.data,footerColor:"light",rowParser:t=>e.generator(t),paginated:!0,showFilters:!0,rowsPerPage:20,showReportStamp:!1,onFinish:()=>n["Z"].dismiss()}})).present()}},"7b22":function(e,t,o){"use strict";o("bdcc")},"954d":function(e,t,o){"use strict";var n=o("7a23");const a={class:"header-text-list"},l={key:0},c={id:"report-content"};function i(e,t,o,i,r,s){const d=Object(n["resolveComponent"])("ion-img"),b=Object(n["resolveComponent"])("ion-thumbnail"),p=Object(n["resolveComponent"])("ion-label"),m=Object(n["resolveComponent"])("ion-item"),u=Object(n["resolveComponent"])("ion-toolbar"),O=Object(n["resolveComponent"])("ion-header"),j=Object(n["resolveComponent"])("ion-content"),f=Object(n["resolveComponent"])("ion-chip"),v=Object(n["resolveComponent"])("ion-footer"),y=Object(n["resolveComponent"])("his-footer"),g=Object(n["resolveComponent"])("ion-page");return Object(n["openBlock"])(),Object(n["createBlock"])(g,null,{default:Object(n["withCtx"])(()=>[Object(n["createVNode"])(O,null,{default:Object(n["withCtx"])(()=>[Object(n["createVNode"])(u,null,{default:Object(n["withCtx"])(()=>[Object(n["createVNode"])(m,null,{default:Object(n["withCtx"])(()=>[e.reportLogo?(Object(n["openBlock"])(),Object(n["createBlock"])(b,{key:0},{default:Object(n["withCtx"])(()=>[Object(n["createVNode"])(d,{src:e.reportLogo},null,8,["src"])]),_:1})):Object(n["createCommentVNode"])("",!0),Object(n["createVNode"])(p,null,{default:Object(n["withCtx"])(()=>[Object(n["createElementVNode"])("ul",a,[Object(n["createElementVNode"])("li",null,[Object(n["createElementVNode"])("b",null,Object(n["toDisplayString"])(e.title),1)]),e.period?(Object(n["openBlock"])(),Object(n["createElementBlock"])("li",l,[Object(n["createElementVNode"])("b",null,Object(n["toDisplayString"])(e.period),1)])):Object(n["createCommentVNode"])("",!0)])]),_:1})]),_:1})]),_:1})]),_:1}),Object(n["createVNode"])(j,{"scroll-y":"","scroll-x":""},{default:Object(n["withCtx"])(()=>[Object(n["createElementVNode"])("div",c,[Object(n["renderSlot"])(e.$slots,"default",{},void 0,!0)])]),_:3}),Object(n["createVNode"])(v,null,{default:Object(n["withCtx"])(()=>[Object(n["createVNode"])(u,null,{default:Object(n["withCtx"])(()=>[Object(n["createVNode"])(f,{color:"primary"},{default:Object(n["withCtx"])(()=>[Object(n["createTextVNode"])("Date Generated: "),Object(n["createElementVNode"])("b",null,Object(n["toDisplayString"])(e.dateGenerated),1)]),_:1}),Object(n["createVNode"])(f,{color:"primary"},{default:Object(n["withCtx"])(()=>[Object(n["createTextVNode"])("APP version: "),Object(n["createElementVNode"])("b",null,Object(n["toDisplayString"])(e.appVersion),1)]),_:1}),Object(n["createVNode"])(f,{color:"primary"},{default:Object(n["withCtx"])(()=>[Object(n["createTextVNode"])("API version: "),Object(n["createElementVNode"])("b",null,Object(n["toDisplayString"])(e.apiVersion),1)]),_:1})]),_:1})]),_:1}),Object(n["createVNode"])(y,{color:"dark",btns:e.buttons},null,8,["btns"])]),_:3})}o("14d9");var r=o("d867"),s=o("1718"),d=o("0f25"),b=o("6605"),p=o("1c74"),m=Object(n["defineComponent"])({components:{IonLabel:r["x"],IonItem:r["w"],HisFooter:d["a"],IonPage:r["D"],IonHeader:r["q"],IonContent:r["n"],IonToolbar:r["S"],IonChip:r["l"],IonFooter:r["o"],IonThumbnail:r["Q"],IonImg:r["s"]},props:{title:{type:String},period:{type:String},logo:{type:String},toCSV:{type:Function,required:!1},toPDF:{type:Function,required:!1},configure:{type:Function,required:!1},refreshReport:{type:Function,required:!0},dateGenerated:{type:String,default:"-"}},setup(e){const t=Object(b["i"])(),o=[],a=p["e"].getCoreVersion(),l=p["e"].getApiVersion(),c=Object(n["computed"])(()=>e.logo?Object(s["a"])(e.logo):null);function i(e,t){return{name:e.name||"Btn",size:e.size||"large",slot:e.slot||"start",color:e.color||"primary",visible:e.visible||!0,onClick:t}}return"function"===typeof e.toCSV&&o.push(i({name:"CSV"},e.toCSV)),"function"===typeof e.toPDF&&o.push(i({name:"PDF"},e.toPDF)),"function"===typeof e.configure&&o.push(i({name:"Set Date",slot:"end",color:"primary"},()=>e.configure&&e.configure())),o.push(i({name:"Refresh",slot:"end",color:"warning"},()=>e.refreshReport())),o.push(i({name:"Finish",slot:"end",color:"success"},()=>t.push("/"))),{buttons:o,appVersion:a,apiVersion:l,reportLogo:c}}}),u=(o("f47e"),o("d959")),O=o.n(u);const j=O()(m,[["render",i],["__scopeId","data-v-3e4a390e"]]);t["a"]=j},bdcc:function(e,t,o){},d6ac:function(e,t,o){"use strict";o.r(t);var n=o("7a23");function a(e,t,o,a,l,c){const i=Object(n["resolveComponent"])("moh-template"),r=Object(n["resolveComponent"])("ion-page");return Object(n["openBlock"])(),Object(n["createBlock"])(r,null,{default:Object(n["withCtx"])(()=>[Object(n["createVNode"])(i,{params:e.params},null,8,["params"])]),_:1})}var l=o("d867"),c=o("38e6"),i=Object(n["defineComponent"])({components:{IonPage:l["D"],MohTemplate:c["a"]},setup(){const e={paddingRight:"50%",fontWeight:"bold",textAlign:"right"},t={title:"HTS Summary",name:"HTS SUMMARY",indicators:[{isMainTitle:!0,label:"HIV testing summary (from initial and confirmatory register)"},{label:"Total clients tested for HIV",index:"1",value:e=>e["total_clients_tested_for_hiv"]},{isSectionTitle:!0,label:"HIV test results by sex"},{label:"New negative",index:"2",value:e=>e["new_negative"]},{label:"New positive total",index:"3",value:e=>e["new_positive_total"]},{label:"Male",index:"4",style:e,value:e=>e["new_positive_male"]},{label:"Female",index:"5",style:e,value:e=>e["new_positive_female"]},{label:"Confirmatory positive total (prev. pos. professional test)",index:"6",value:e=>e["confirmatory_positive_total_prev_pos_professional_test"]},{label:"Male",index:"7",style:e,value:e=>e["confirmed_positive_male"]},{label:"Female",index:"8",style:e,value:e=>e["confirmed_positive_female"]},{label:"Confirmatory inconclusive total (prev. pos. professional test)",index:"9",value:e=>e["confirmatory_inconclusive_total_prev_pos_professional_test"]},{label:"Male",index:"10",style:e,value:e=>e["confirmed_inconclusive_male"]},{label:"Female",index:"11",style:e,value:e=>e["confirmed_inconclusive_female"]},{label:"New exposed infant",index:"12",value:e=>e["new_exposed_infant"]},{label:"New inconclusive",index:"13",value:e=>e["new_inconclusive"]}]};return{params:t}}}),r=o("d959"),s=o.n(r);const d=s()(i,[["render",a]]);t["default"]=d},f47e:function(e,t,o){"use strict";o("5454")}}]);
//# sourceMappingURL=chunk-29a8b44a.c46e96d6.js.map