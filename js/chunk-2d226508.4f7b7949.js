(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d226508"],{e7aa:function(e,t,n){"use strict";n.r(t);var a=n("7a23");function r(e,t,n,r,i,s){var o=Object(a["resolveComponent"])("his-standard-form");return Object(a["openBlock"])(),Object(a["createBlock"])(o,{fields:e.fields,onFinishAction:e.onFinish,skipSummary:!1,cancelDestinationPath:e.cancelDestination},null,8,["fields","onFinishAction","cancelDestinationPath"])}var i=n("2909"),s=n("1da1"),o=(n("d3b7"),n("159b"),n("b64b"),n("3ca3"),n("ddb0"),n("99af"),n("ac1f"),n("466d"),n("96cf"),n("d95e")),u=n("7920"),l=n("2706"),c=n("7365"),d=n("bee2"),b=n("d4ec"),f=n("262e"),v=n("2caf"),p=n("cc6f"),m=function(e){Object(f["a"])(n,e);var t=Object(v["a"])(n);function n(e,a){return Object(b["a"])(this,n),t.call(this,e,181,a)}return Object(d["a"])(n)}(p["a"]),C=n("b5e4"),h=n("b446"),x=n("e86e"),T=Object(a["defineComponent"])({mixins:[c["a"]],components:{HisStandardForm:u["a"]},data:function(){return{assessment:{},obs:[],showHIVQuestions:!0,offerCxCa:!1}},watch:{patient:{handler:function(){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.assessment=new m(e.patientID,e.providerID),t.next=3,e.setOfferCxCa();case 3:return t.next=5,e.getFields();case 5:e.fields=t.sent;case 6:case"end":return t.stop()}}),t)})))()},deep:!0}},methods:{onFinish:function(e,t){var n=this;return Object(s["a"])(regeneratorRuntime.mark((function e(){var a,r,s,o;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,n.assessment.createEncounter();case 2:if(a=e.sent,a){e.next=5;break}return e.abrupt("return",Object(C["e"])("Unable to create encounter"));case 5:return r=[],Object.keys(t).forEach((function(e){r.push(t[e].obs)})),e.next=9,Promise.all([].concat(Object(i["a"])(n.obs),r));case 9:return s=e.sent,e.next=12,n.assessment.saveObservationList(s);case 12:if(o=e.sent,o){e.next=15;break}return e.abrupt("return",Object(C["e"])("Unable to save patient observations"));case 15:Object(C["d"])("Observations and encounter created!"),n.nextTask();case 17:case"end":return e.stop()}}),e)})))()},setOfferCxCa:function(){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.assessment.getFirstValueCoded("Offer CxCa");case 2:return n=t.sent,e.offerCxCa=n&&"Yes"===n,e.offerCxCa||e.obs.push(e.assessment.buildValueCoded("Ever had CxCa","No")),t.abrupt("return",!0);case 6:case"end":return t.stop()}}),t)})))()},enterPreviousCxCaData:function(e){var t="Yes"===e.ever_had_cxca.value,n="Yes"===e.results_available.value;return t&&n},getFacilities:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return Object(x["b"])(e)},getFields:function(){var e=this;return[{id:"reason_for_visit",helpText:"Reason for visit",type:o["b"].TT_SELECT,validation:function(e){return l["a"].required(e)},options:function(){return[{label:"Initial screening",value:"Initial screening"},{label:"Postponed treatmment",value:"Postponed treatment"},{label:"One year subsequent check-up after treatment",value:"One year subsequent check-up after treatment"},{label:"Subsequent screening",value:"Subsequent screening"},{label:"Problem visit after treatment",value:"Problem visit after treatment"},{label:"Referral",value:"Referral"}]},computedValue:function(t){return{obs:e.assessment.buildValueCoded("Reason for visit",t.value)}}},{id:"hiv_status",helpText:"HIV status",type:o["b"].TT_SELECT,condition:function(){return e.showHIVQuestions},validation:function(e){return l["a"].required(e)},options:function(){return[{label:"Positive on ART",value:"Positive on ART"},{label:"Positive Not on ART",value:"Positive Not on ART"},{label:"Negative",value:"Negative"},{label:"Never tested",value:"Never tested"},{label:"Prefers Not to disclose",value:"Undisclosed"}]},computedValue:function(t){return{obs:e.assessment.buildValueCoded("HIV status",t.value)}}}].concat(Object(i["a"])(Object(h["b"])({id:"hiv_test_date",helpText:"HIV test result date",required:!0,condition:function(e){return e.hiv_status.value.match(/Negative|ART/i)},minDate:function(){return e.patient.getBirthdate()},maxDate:function(){return e.assessment.getDate()},estimation:{allowUnknown:!1},computeValue:function(t,n){return{date:t,tag:"cxca screening",isEstimate:n,obs:e.assessment.buildValueDate("HIV test date",t)}}},this.assessment.getDate())),[{id:"ever_had_cxca",helpText:"Ever had CxCa screening",type:o["b"].TT_SELECT,condition:function(e){return"Initial screening"!==e.reason_for_visit.value},options:function(){return e.yesNoOptions()},validation:function(e){return l["a"].required(e)},computedValue:function(t){return{obs:e.assessment.buildValueCoded("Ever had CxCa",t.value)}}},{id:"results_available",helpText:"Results available?",type:o["b"].TT_SELECT,validation:function(e){return l["a"].required(e)},condition:function(e){return"Initial screening"!==e.reason_for_visit.value&&"No"!==e.ever_had_cxca.value},options:function(){return e.yesNoOptions()},computedValue:function(t){return{obs:e.assessment.buildValueCoded("CxCa test results",t.value)}}},{id:"location",helpText:"CxCa screening location",type:o["b"].TT_SELECT,validation:function(e){return l["a"].required(e)},options:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return e.getFacilities(n)},config:{showKeyboard:!0,isFilterDataViaApi:!0},condition:function(t){return e.enterPreviousCxCaData(t)},computedValue:function(t){return{obs:e.assessment.buildValueText("Previous CxCa location",t.value)}}}],Object(i["a"])(Object(h["b"])({id:"cxca_date",helpText:"Previous CxCa test",required:!0,minDate:function(){return e.patient.getBirthdate()},maxDate:function(){return e.assessment.getDate()},estimation:{allowUnknown:!1},condition:function(t){return e.enterPreviousCxCaData(t)},computeValue:function(t,n){return{date:t,tag:"cxca screening",isEstimate:n,obs:e.assessment.buildValueDate("cxca test date",t)}}},this.assessment.getDate())),[{id:"previous_screening_method",helpText:"Previous screening method",type:o["b"].TT_SELECT,validation:function(e){return l["a"].required(e)},condition:function(t){return e.enterPreviousCxCaData(t)},options:function(){return[{label:"VIA",value:"VIA"},{label:"PAP Smear",value:"PAP Smear"},{label:"HPV DNA",value:"HPV DNA"},{label:"Speculum Exam",value:"Speculum Exam"}]},computedValue:function(t){return{obs:e.assessment.buildValueCoded("Previous CxCa screening method",t.value)}}},{id:"offer_CxCa",helpText:"Offer CxCa screening today",type:o["b"].TT_SELECT,validation:function(e){return l["a"].required(e)},options:function(){return e.yesNoOptions()},computedValue:function(t){return{obs:e.assessment.buildValueCoded("Offer CxCa",t.value)}}},{id:"screening_method",helpText:"Screening method being offered",type:o["b"].TT_SELECT,validation:function(e){return l["a"].required(e)},condition:function(e){return"Yes"===e.offer_CxCa.value},options:function(){return[{label:"VIA",value:"VIA"},{label:"PAP Smear",value:"PAP Smear"},{label:"HPV DNA",value:"HPV DNA"},{label:"Speculum Exam",value:"Speculum Exam"}]},computedValue:function(t){return{obs:e.assessment.buildValueCoded("CxCa screening method",t.value)}}},{id:"reason_for_no_cxca",helpText:"Reason for NOT offering CxCa screening",type:o["b"].TT_SELECT,validation:function(e){return l["a"].required(e)},condition:function(e){return"No"===e.offer_CxCa.value},options:function(){return[{label:"Client preferred counselling",value:"Preferred counseling"},{label:"Not applicable",value:"Not applicable"},{label:"Provider not available",value:"Provider NOT available"},{label:"Services not available",value:"Services NOT available"},{label:"Chemotherapy",value:"Chemotherapy"}]},computedValue:function(t){return{obs:e.assessment.buildValueCoded("Reason for NOT offering CxCa",t.value)}}}])}}}),g=n("d959"),V=n.n(g);const O=V()(T,[["render",r]]);t["default"]=O}}]);
//# sourceMappingURL=chunk-2d226508.4f7b7949.js.map