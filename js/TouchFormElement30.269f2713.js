(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["TouchFormElement30","TouchFormElement38","TouchFormElement51","TouchFormElement8"],{"04a0":function(e,t,n){},"0a79":function(e,t,n){"use strict";var r=n("7a23"),c=Object(r["withScopeId"])("data-v-7c293cad"),o=c((function(e,t,n,c,o,a){return Object(r["openBlock"])(),Object(r["createBlock"])("div",{id:"view-port",class:e.showFull?"":"half"},[Object(r["renderSlot"])(e.$slots,"default")],2)})),a=Object(r["defineComponent"])({name:"ViewPort",props:{showFull:{type:Boolean,default:function(){return!0}}}}),i=(n("a4d3f"),n("d959")),s=n.n(i);const u=s()(a,[["render",o],["__scopeId","data-v-7c293cad"]]);t["a"]=u},"0cb1":function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var r=n("bee2"),c=n("d4ec"),o=n("262e"),a=n("2caf"),i=n("cc6f"),s=function(e){Object(o["a"])(n,e);var t=Object(a["a"])(n);function n(e,r){return Object(c["a"])(this,n),t.call(this,e,57,r)}return Object(r["a"])(n)}(i["a"])},"51c8":function(e,t,n){"use strict";n.r(t);n("a9e3");var r=n("7a23"),c=Object(r["defineComponent"])({emits:["onValue","onFieldActivated"],props:{config:{type:Object,default:function(){return{}}},preset:{type:Object,default:function(){return{label:"",value:""}}},defaultValue:{type:Function},fdata:{type:Object,required:!0},cdata:{type:Object,required:!0},clear:{type:Number,required:!0},options:{type:Function,default:function(){return[]}},activationState:{type:String,default:""},onValue:{type:Function},onValueUpdate:{type:Function},footerButtonEvent:{type:Object}}});const o=c;t["default"]=o},"6dc9":function(e,t,n){"use strict";n("c17f")},a4d3f:function(e,t,n){"use strict";n("04a0")},bc14:function(e,t,n){"use strict";n("d717")},c17f:function(e,t,n){},c4e4:function(e,t,n){"use strict";n("b0c0");var r=n("7a23"),c=Object(r["withScopeId"])("data-v-9adaf5e2");Object(r["pushScopeId"])("data-v-9adaf5e2");var o=Object(r["createTextVNode"])("Lab orders"),a={class:"ion-margin-bottom"},i=Object(r["createVNode"])("div",{class:"his-md-text side-title"}," Select specimen ",-1),s=Object(r["createVNode"])("div",{class:"his-md-text side-title"}," Main test(s) reason ",-1),u={style:{background:"lightyellow",height:"34vh"}},l={class:"his-sm-text"},d=Object(r["createVNode"])("thead",null,[Object(r["createVNode"])("tr",null,[Object(r["createVNode"])("th",null,"Test"),Object(r["createVNode"])("th",null,"Specimen"),Object(r["createVNode"])("th",null,"Reason"),Object(r["createVNode"])("th",null,"Action")])],-1),b=Object(r["createTextVNode"])("X"),p=Object(r["createTextVNode"])(" Place orders "),O=Object(r["createTextVNode"])(" Close ");Object(r["popScopeId"])();var f=c((function(e,t,n,f,j,m){var v=Object(r["resolveComponent"])("ion-title"),h=Object(r["resolveComponent"])("ion-toolbar"),k=Object(r["resolveComponent"])("ion-header"),x=Object(r["resolveComponent"])("ion-label"),V=Object(r["resolveComponent"])("ion-checkbox"),g=Object(r["resolveComponent"])("ion-item"),y=Object(r["resolveComponent"])("ion-list"),N=Object(r["resolveComponent"])("ion-col"),w=Object(r["resolveComponent"])("ion-radio"),I=Object(r["resolveComponent"])("ion-radio-group"),C=Object(r["resolveComponent"])("ion-button"),_=Object(r["resolveComponent"])("ion-row"),T=Object(r["resolveComponent"])("ion-grid"),B=Object(r["resolveComponent"])("ion-content"),S=Object(r["resolveComponent"])("ion-footer");return Object(r["openBlock"])(),Object(r["createBlock"])(r["Fragment"],null,[Object(r["createVNode"])(k,null,{default:c((function(){return[Object(r["createVNode"])(h,null,{default:c((function(){return[Object(r["createVNode"])(v,{class:"his-lg-text"},{default:c((function(){return[o]})),_:1})]})),_:1})]})),_:1}),Object(r["createVNode"])(B,{style:{overflow:"hidden",background:"grey",height:"70vh"}},{default:c((function(){return[Object(r["createVNode"])(T,null,{default:c((function(){return[Object(r["createVNode"])(_,null,{default:c((function(){return[Object(r["createVNode"])(N,{size:"6"},{default:c((function(){return[Object(r["createVNode"])(y,{style:{overflowY:"auto",height:"75vh"}},{default:c((function(){return[(Object(r["openBlock"])(!0),Object(r["createBlock"])(r["Fragment"],null,Object(r["renderList"])(e.testTypes,(function(t,n){return Object(r["openBlock"])(),Object(r["createBlock"])(g,{class:"his-sm-text",key:t,disabled:null!==e.activeIndex&&e.activeIndex!==n&&!e.isOrderComplete,detail:""},{default:c((function(){return[Object(r["createVNode"])(x,{"text-wrap":""},{default:c((function(){return[Object(r["createTextVNode"])(Object(r["toDisplayString"])(t.name),1)]})),_:2},1024),Object(r["createVNode"])(V,{modelValue:t.isChecked,"onUpdate:modelValue":function(e){return t.isChecked=e},slot:"start",onIonChange:function(r){return e.onSelectTest(t.name,n,r)}},null,8,["modelValue","onUpdate:modelValue","onIonChange"])]})),_:2},1032,["disabled"])})),128))]})),_:1})]})),_:1}),null!=e.activeIndex&&e.selectedOrders.length>0?(Object(r["openBlock"])(),Object(r["createBlock"])(N,{key:0,style:{overflowY:"auto",height:"79vh"}},{default:c((function(){return[Object(r["createVNode"])("div",a,[e.extendedLabsEnabled?Object(r["createCommentVNode"])("",!0):(Object(r["openBlock"])(),Object(r["createBlock"])(y,{key:0},{default:c((function(){return[Object(r["createVNode"])(I,{modelValue:e.testTypes[e.activeIndex]["specimen"],"onUpdate:modelValue":t[1]||(t[1]=function(t){return e.testTypes[e.activeIndex]["specimen"]=t})},{default:c((function(){return[i,(Object(r["openBlock"])(!0),Object(r["createBlock"])(r["Fragment"],null,Object(r["renderList"])(e.specimens,(function(t){return Object(r["openBlock"])(),Object(r["createBlock"])(g,{key:t},{default:c((function(){return[Object(r["createVNode"])(x,null,{default:c((function(){return[Object(r["createTextVNode"])(Object(r["toDisplayString"])(t.name),1)]})),_:2},1024),Object(r["createVNode"])(w,{slot:"start",value:t.name,onClick:function(n){return e.addSpecimen(t)}},null,8,["value","onClick"])]})),_:2},1024)})),128))]})),_:1},8,["modelValue"])]})),_:1})),Object(r["createVNode"])(I,{modelValue:e.testTypes[e.activeIndex]["reason"],"onUpdate:modelValue":t[2]||(t[2]=function(t){return e.testTypes[e.activeIndex]["reason"]=t})},{default:c((function(){return[s,(Object(r["openBlock"])(!0),Object(r["createBlock"])(r["Fragment"],null,Object(r["renderList"])(e.reasons,(function(e){return Object(r["openBlock"])(),Object(r["createBlock"])(g,{class:"his-sm-text",key:e},{default:c((function(){return[Object(r["createVNode"])(x,null,{default:c((function(){return[Object(r["createTextVNode"])(Object(r["toDisplayString"])(e),1)]})),_:2},1024),Object(r["createVNode"])(w,{slot:"start",value:e},null,8,["value"])]})),_:2},1024)})),128))]})),_:1},8,["modelValue"])]),Object(r["createVNode"])("div",u,[Object(r["createVNode"])("table",l,[d,Object(r["createVNode"])("tbody",null,[(Object(r["openBlock"])(!0),Object(r["createBlock"])(r["Fragment"],null,Object(r["renderList"])(e.finalOrders,(function(t,n){return Object(r["openBlock"])(),Object(r["createBlock"])("tr",{key:n},[Object(r["createVNode"])("td",null,Object(r["toDisplayString"])(t.name),1),Object(r["createVNode"])("td",null,Object(r["toDisplayString"])(t.specimen||"N/A"),1),Object(r["createVNode"])("td",null,Object(r["toDisplayString"])(t.reason),1),Object(r["createVNode"])("td",null,[Object(r["createVNode"])(C,{onClick:function(n){return e.removeOrder(t.currentIndex)},slot:"end",color:"danger"},{default:c((function(){return[b]})),_:1},8,["onClick"])])])})),128))])])])]})),_:1})):Object(r["createCommentVNode"])("",!0)]})),_:1})]})),_:1})]})),_:1}),Object(r["createVNode"])(S,null,{default:c((function(){return[Object(r["createVNode"])(h,null,{default:c((function(){return[Object(r["createVNode"])(C,{onClick:e.postActivities,size:"large",slot:"end",disabled:0===e.finalOrders.length},{default:c((function(){return[p]})),_:1},8,["onClick","disabled"]),Object(r["createVNode"])(C,{onClick:t[3]||(t[3]=function(t){return e.closeModal([])}),size:"large",slot:"start",color:"danger"},{default:c((function(){return[O]})),_:1})]})),_:1})]})),_:1})],64)})),j=n("1da1"),m=n("2909"),v=(n("4de4"),n("d3b7"),n("4e82"),n("d81d"),n("caad"),n("2532"),n("159b"),n("96cf"),n("8a30")),h=n("b5e4"),k=n("9b7c"),x=n("0cb1"),V=n("b89f"),g=n("d1ca"),y=n("8e8b"),N=Object(r["defineComponent"])({name:"Modal",props:{activities:{type:Object,required:!0},testFilters:{type:Array},title:{type:String,default:""}},watch:{activities:{handler:function(e){e&&(this.appActivities=Object(m["a"])(e),this.getActivities())},immediate:!0}},created:function(){var e=this;return Object(j["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,g["b"].extendedLabEnabled();case 2:e.extendedLabsEnabled=t.sent;case 3:case"end":return t.stop()}}),t)})))()},methods:{onSelectTest:function(e,t,n){var r=this;return Object(j["a"])(regeneratorRuntime.mark((function c(){return regeneratorRuntime.wrap((function(c){while(1)switch(c.prev=c.next){case 0:r.$nextTick(Object(j["a"])(regeneratorRuntime.mark((function c(){return regeneratorRuntime.wrap((function(c){while(1)switch(c.prev=c.next){case 0:if(r.testTypes[t]["isChecked"]=n.target.checked,!r.testTypes[t]["isChecked"]){c.next=9;break}return c.next=4,k["a"].getSpecimens(e);case 4:r.specimens=c.sent,r.testTypes[t]["currentIndex"]=t,r.activeIndex=t,c.next=10;break;case 9:r.removeOrder(t);case 10:case"end":return c.stop()}}),c)}))));case 1:case"end":return c.stop()}}),c)})))()},getActivities:function(){var e=this;return Object(j["a"])(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,k["a"].getTestTypes();case 2:n=t.sent,e.testTypes=n.map((function(e,t){return e.index="HIV viral load"===e.name?e.index=0:e.index=t+1,e})).sort((function(e,t){return e.index<t.index?0:1})).filter((function(t){return!Array.isArray(e.testFilters)||e.testFilters.includes(t.name)}));case 4:case"end":return t.stop()}}),t)})))()},removeOrder:function(e){this.testTypes[e]["isChecked"]=!1,this.testTypes[e]["reason"]=null,this.testTypes[e]["specimen"]=null,this.testTypes[e]["specimenConcept"]=null,this.activeIndex=null,this.specimens=[]},addSpecimen:function(e){this.testTypes[this.activeIndex]["specimenConcept"]=e.concept_id},postActivities:function(){var e=this;return Object(j["a"])(regeneratorRuntime.mark((function t(){var n,r,c,o,a,i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n="".concat(e.$route.params.patient_id),r=new x["a"](parseInt(n),-1),t.next=4,r.createEncounter();case 4:if(c=t.sent,!c){t.next=25;break}return t.next=8,k["a"].buildLabOrders(c,e.finalOrders);case 8:return o=t.sent,t.next=11,k["a"].saveOrdersArray(c.encounter_id,o);case 11:if(a=t.sent,a){t.next=14;break}return t.abrupt("return",Object(h["e"])("Unable to save lab orders"));case 14:return y["a"].invalidate("PATIENT_LAB_ORDERS"),t.next=17,Object(h["a"])("Lab orders and encounter created!, print out your last orders?",{confirmBtnLabel:"Yes",cancelBtnLabel:"No"});case 17:if(i=t.sent,!i){t.next=23;break}return t.next=21,e.printOrders(a);case 21:t.next=25;break;case 23:return t.next=25,e.closeModal(a);case 25:case"end":return t.stop()}}),t)})))()},closeModal:function(e){return Object(j["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,v["modalController"].dismiss(e);case 2:case"end":return t.stop()}}),t)})))()},printOrders:function(e){return Object(j["a"])(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n=new V["a"],t.next=3,e.forEach(function(){var e=Object(j["a"])(regeneratorRuntime.mark((function e(t){var r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r="lab/labels/order?order_id=".concat(t.order_id),e.next=3,n.printLbl(r);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 3:return t.next=5,v["modalController"].dismiss(e);case 5:case"end":return t.stop()}}),t)})))()}},computed:{isOrderComplete:function(){return this.extendedLabsEnabled?!!this.testTypes[this.activeIndex]["reason"]:(this.testTypes[this.activeIndex]["specimenConcept"]||this.testTypes[this.activeIndex]["specimen"])&&this.testTypes[this.activeIndex]["reason"]},selectedOrders:function(){return this.testTypes.filter((function(e){return!0===e.isChecked}))},finalOrders:function(){var e=this;return this.selectedOrders.filter((function(t){return t.reason&&(t.specimen&&!e.extendedLabsEnabled||e.extendedLabsEnabled)}))}},mounted:function(){this.getActivities()},data:function(){return{content:"Content",extendedLabsEnabled:!1,appActivities:[],testTypes:[],specimens:[],reasons:["Routine","Targeted","Confirmatory","Stat","Repeat / Missing"],activeIndex:null}},components:{IonButton:v["IonButton"],IonContent:v["IonContent"],IonHeader:v["IonHeader"],IonTitle:v["IonTitle"],IonToolbar:v["IonToolbar"],IonLabel:v["IonLabel"],IonList:v["IonList"],IonItem:v["IonItem"],IonCheckbox:v["IonCheckbox"],IonRadioGroup:v["IonRadioGroup"],IonRow:v["IonRow"]}}),w=(n("6dc9"),n("d959")),I=n.n(w);const C=I()(N,[["render",f],["__scopeId","data-v-9adaf5e2"]]);t["a"]=C},d717:function(e,t,n){},e614:function(e,t,n){"use strict";n.r(t);var r=n("7a23"),c=Object(r["withScopeId"])("data-v-356b70ce");Object(r["pushScopeId"])("data-v-356b70ce");var o={class:"view-port-content"},a={class:"his-sm-text"},i=Object(r["createVNode"])("tr",null,[Object(r["createVNode"])("th",null,"Accession #"),Object(r["createVNode"])("th",null,"Test Name"),Object(r["createVNode"])("th",null,"Specimen"),Object(r["createVNode"])("th",null,"Ordered"),Object(r["createVNode"])("th",null,"Result"),Object(r["createVNode"])("th",null,"Released"),Object(r["createVNode"])("th",null,"Given")],-1),s=Object(r["createVNode"])("br",null,null,-1);Object(r["popScopeId"])();var u=c((function(e,t,n,u,l,d){var b=Object(r["resolveComponent"])("ion-button"),p=Object(r["resolveComponent"])("view-port");return Object(r["openBlock"])(),Object(r["createBlock"])(p,null,{default:c((function(){return[Object(r["createVNode"])("div",o,[Object(r["createVNode"])("table",a,[i,(Object(r["openBlock"])(!0),Object(r["createBlock"])(r["Fragment"],null,Object(r["renderList"])(e.rows,(function(t,n){return Object(r["openBlock"])(),Object(r["createBlock"])("tr",{key:n},[Object(r["createVNode"])("td",null,[Object(r["createVNode"])(b,{color:"light",fill:"none",onClick:function(n){return e.printOrder(t)}},{default:c((function(){return[Object(r["createTextVNode"])(Object(r["toDisplayString"])(t.accession_number),1)]})),_:2},1032,["onClick"])]),Object(r["createVNode"])("td",null,Object(r["toDisplayString"])(t.test_name),1),Object(r["createVNode"])("td",null,Object(r["toDisplayString"])(t.specimen),1),Object(r["createVNode"])("td",null,Object(r["toDisplayString"])(t.ordered),1),Object(r["createVNode"])("td",null,[(Object(r["openBlock"])(!0),Object(r["createBlock"])(r["Fragment"],null,Object(r["renderList"])(t.result,(function(e,t){return Object(r["openBlock"])(),Object(r["createBlock"])("span",{key:t},[Object(r["createTextVNode"])(Object(r["toDisplayString"])(e)+" ",1),s])})),128))]),Object(r["createVNode"])("td",null,Object(r["toDisplayString"])(t.released),1),Object(r["createVNode"])("td",null,[Object(r["createVNode"])("span",{style:"color: ".concat("Yes"===t.result_given?"green;":"black;")},Object(r["toDisplayString"])(t.result_given),5)])])})),128))])])]})),_:1})})),l=n("2909"),d=n("1da1"),b=(n("96cf"),n("d3b7"),n("ddb0"),n("d81d"),n("b0c0"),n("99af"),n("0a79")),p=n("8a30"),O=n("c4e4"),f=n("2ef0"),j=n("51c8"),m=n("9283"),v=n("b5e4"),h=Object(r["defineComponent"])({components:{ViewPort:b["a"],IonButton:p["IonButton"]},mixins:[j["default"]],data:function(){return{HisDate:m["c"],rows:[]}},methods:{init:function(){var e=this;return Object(d["a"])(regeneratorRuntime.mark((function t(){var n,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.$emit("onFieldActivated",e),t.next=3,e.options(e.fdata);case 3:n=t.sent,r=n[0].other.values,e.rows=r.map((function(e){return e.id=e.order_id,e.ordered&&(e.ordered=m["c"].toStandardHisDisplayFormat(e.ordered)),e.released&&(e.released=m["c"].toStandardHisDisplayFormat(e.released)),e}));case 6:case"end":return t.stop()}}),t)})))()},printOrder:function(e){var t=this;return Object(d["a"])(regeneratorRuntime.mark((function n(){var r,c;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if("function"!==typeof(null===(r=t.config)||void 0===r?void 0:r.printOrder)){n.next=5;break}return n.next=3,Object(v["a"])("Do you want to print order with accession number ".concat(e.accession_number,"?"));case 3:c=n.sent,c&&t.config.printOrder(e.id);case 5:case"end":return n.stop()}}),n)})))()},formatOrders:function(e){return e.map((function(e){return{id:e.order_id,encounter_id:e.encounter_id,result_given:e.result_given,accession_number:e.accession_number,test_name:e.tests[0].name,specimen:e.specimen.name,ordered:m["c"].toStandardHisDisplayFormat(e.order_date),result:[],release:""}}))},launchOrderSelection:function(){var e=arguments,t=this;return Object(d["a"])(regeneratorRuntime.mark((function n(){var r,c,o,a;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return r=e.length>0&&void 0!==e[0]?e[0]:null,n.next=3,p["modalController"].create({component:O["a"],backdropDismiss:!1,cssClass:"large-modal",componentProps:{testFilters:r}});case 3:return c=n.sent,c.present(),n.next=7,c.onDidDismiss();case 7:o=n.sent,a=o.data,Object(f["isEmpty"])(a)||(t.rows=[].concat(Object(l["a"])(t.formatOrders(a)),Object(l["a"])(t.rows)));case 10:case"end":return n.stop()}}),n)})))()}},mounted:function(){this.init()},activated:function(){this.init()}}),k=(n("bc14"),n("d959")),x=n.n(k);const V=x()(h,[["render",u],["__scopeId","data-v-356b70ce"]]);t["default"]=V}}]);
//# sourceMappingURL=TouchFormElement30.269f2713.js.map