(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["TouchFormElement13","TouchFormElement38","TouchFormElement8"],{"04a0":function(t,e,a){},"0a79":function(t,e,a){"use strict";var n=a("7a23");const i=Object(n["withScopeId"])("data-v-7c293cad"),o=i((function(t,e,a,i,o,c){return Object(n["openBlock"])(),Object(n["createBlock"])("div",{id:"view-port",class:t.showFull?"":"half"},[Object(n["renderSlot"])(t.$slots,"default")],2)}));var c=Object(n["defineComponent"])({name:"ViewPort",props:{showFull:{type:Boolean,default:()=>!0}}}),s=(a("a4d3"),a("d959")),l=a.n(s);const r=l()(c,[["render",o],["__scopeId","data-v-7c293cad"]]);e["a"]=r},"39ac":function(t,e,a){},"51c8":function(t,e,a){"use strict";a.r(e);var n=a("7a23"),i=Object(n["defineComponent"])({emits:["onValue","onFieldActivated"],props:{config:{type:Object,default:()=>({})},preset:{type:Object,default:()=>({label:"",value:""})},defaultValue:{type:Function},fdata:{type:Object,required:!0},cdata:{type:Object,required:!0},clear:{type:Number,required:!0},options:{type:Function,default:()=>[]},activationState:{type:String,default:""},onValue:{type:Function},onValueUpdate:{type:Function},footerButtonEvent:{type:Object}}});const o=i;e["default"]=o},"83af":function(t,e,a){"use strict";a.d(e,"a",(function(){return i}));var n=a("cc6f");class i extends n["a"]{constructor(t,e){super(t,7,e)}async getNextAppointment(){const t=n["a"].getProgramID();return n["a"].getJson(`/programs/${t}/patients/${this.patientID}/next_appointment_date`,{date:this.date})}static async getDailiyAppointments(t){const e=n["a"].getProgramID();return n["a"].getJson(`/programs/${e}/booked_appointments`,{date:t,paginate:!1})}}},a4d3:function(t,e,a){"use strict";a("04a0")},b2eb:function(t,e,a){"use strict";a.r(e);var n=a("7a23");const i={class:"view-port-content"},o={key:0,class:"appointments"},c=Object(n["createVNode"])("b",null,"Medication Run out Date",-1),s=Object(n["createVNode"])("p",null,null,-1),l=Object(n["createVNode"])("b",null,"User set appointment date",-1),r=Object(n["createVNode"])("p",null,null,-1),d=Object(n["createVNode"])("b",null,"Appointment(s)",-1),u=Object(n["createVNode"])("p",null,null,-1),p=Object(n["createVNode"])("b",null,"Appointment limit (per/day)",-1),b=Object(n["createVNode"])("p",null,null,-1);function m(t,e,a,m,h,O){const j=Object(n["resolveComponent"])("Calendar"),D=Object(n["resolveComponent"])("ion-col"),y=Object(n["resolveComponent"])("ion-label"),w=Object(n["resolveComponent"])("ion-item"),f=Object(n["resolveComponent"])("ion-list"),g=Object(n["resolveComponent"])("ion-row"),C=Object(n["resolveComponent"])("ion-grid"),v=Object(n["resolveComponent"])("view-port");return Object(n["openBlock"])(),Object(n["createBlock"])(v,null,{default:Object(n["withCtx"])(()=>[Object(n["createVNode"])("div",i,[Object(n["createVNode"])(C,null,{default:Object(n["withCtx"])(()=>[Object(n["createVNode"])(g,null,{default:Object(n["withCtx"])(()=>[Object(n["createVNode"])(D,{size:"8"},{default:Object(n["withCtx"])(()=>[Object(n["createVNode"])(j,{color:"blue",ref:"calendar","is-expanded":"",class:"custom-calendar","min-date":t.sessionDate,"max-date":t.runOutDate,attributes:t.attributes,masks:t.masks,"disable-page-swipe":""},{"day-content":Object(n["withCtx"])(({day:e})=>[Object(n["createVNode"])("div",{onClick:a=>t.dayClicked(e),class:{selected:e.id===t.cDate,isDisabled:e.isDisabled}},[Object(n["createVNode"])("span",null,Object(n["toDisplayString"])(e.day),1),e.id===t.cDate?(Object(n["openBlock"])(),Object(n["createBlock"])("sup",o,Object(n["toDisplayString"])(t.appointments.length),1)):Object(n["createCommentVNode"])("",!0)],10,["onClick"])]),_:1},8,["min-date","max-date","attributes","masks"])]),_:1}),Object(n["createVNode"])(D,{size:"4",class:"his-card"},{default:Object(n["withCtx"])(()=>[Object(n["createVNode"])(f,null,{default:Object(n["withCtx"])(()=>[t.showMedicationRunoutDate&&t.rDate?(Object(n["openBlock"])(),Object(n["createBlock"])(w,{key:0,class:"his-sm-text"},{default:Object(n["withCtx"])(()=>[Object(n["createVNode"])(y,{class:"ion-text-wrap"},{default:Object(n["withCtx"])(()=>[c,s,Object(n["createVNode"])("span",null,Object(n["toDisplayString"])(t.rDate),1)]),_:1})]),_:1})):Object(n["createCommentVNode"])("",!0),Object(n["createVNode"])(w,{class:"his-sm-text"},{default:Object(n["withCtx"])(()=>[Object(n["createVNode"])(y,{class:"ion-text-wrap"},{default:Object(n["withCtx"])(()=>[l,r,Object(n["createVNode"])("span",null,Object(n["toDisplayString"])(t.aDate),1)]),_:1})]),_:1}),Object(n["createVNode"])(w,{class:"his-sm-text"},{default:Object(n["withCtx"])(()=>[Object(n["createVNode"])(y,{class:"ion-text-wrap"},{default:Object(n["withCtx"])(()=>[d,u,Object(n["createVNode"])("span",null,Object(n["toDisplayString"])(t.appointments.length),1)]),_:1})]),_:1}),Object(n["createVNode"])(w,{class:"his-sm-text"},{default:Object(n["withCtx"])(()=>[Object(n["createVNode"])(y,{class:"ion-text-wrap"},{default:Object(n["withCtx"])(()=>[p,b,Object(n["createVNode"])("span",null,Object(n["toDisplayString"])(t.appointmentLimit),1)]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})])]),_:1})}var h=a("0a79"),O=a("8a30"),j=a("7b37"),D=a("9283"),y=a("83af"),w=a("51c8"),f=a("d1ca"),g=a("b5e4"),C=a("5a0c"),v=a.n(C),V=Object(n["defineComponent"])({components:{ViewPort:h["a"],Calendar:j["a"],IonGrid:O["IonGrid"],IonCol:O["IonCol"],IonRow:O["IonRow"]},mixins:[w["default"]],watch:{startDate:{async handler(t){const e=t||D["c"].toStandardHisDisplayFormat(this.sessionDate);this.$emit("onValue",{label:"",value:e})},immediate:!0}},data:()=>({rows:[],startDate:null,runOutDate:null,appointments:[],clinicHolidays:[],clinicDays:[],patientAge:0,appointmentLimit:0,sessionDate:null,masks:{weekdays:"WWW"}}),mounted(){this.$emit("onFieldActivated",this)},activated(){this.$emit("onFieldActivated",this)},async created(){this.patientAge=this.config.patientAge||0,await this.getAppointmentLimit(),await this.getClinicHolidays(),await this.getClinicDays();const t=await this.options(this.fdata);this.sessionDate=y["a"].getSessionDate();const e=t[0].other.appointmentDate;this.appointments=await this.getAppointments(e),this.setDate(e),this.runOutDate=t[0].other.runOutDate?new Date(t[0].other.runOutDate):null},methods:{getAppointments(t){return y["a"].getDailiyAppointments(D["c"].toStandardHisFormat(t))},async getAppointmentLimit(){const t=await f["b"].appointmentLimit();t&&(this.appointmentLimit=t)},async getClinicHolidays(){const t=await f["b"].clinicHolidays();t&&(this.clinicHolidays=t.split(","))},async getClinicDays(){let t="";t=this.patientAge>=18?await f["b"].adultClinicDays():await f["b"].peadsClinicDays(),t&&(this.clinicDays=t.split(","))},async isDateAvalaible(t){const e=await this.getAppointments(t);if(0!==e.length&&e.length>=this.appointmentLimit){const e=await Object(g["a"])("Appointment limit reached for the selected date "+D["c"].toStandardHisDisplayFormat(t),{header:"APPOINTMENT LIMIT REACHED",cancelBtnLabel:"Proceed with Selected Date",confirmBtnLabel:"Select Another Date"});if(e)return!1}if(this.clinicHolidays.includes(D["c"].toStandardHisFormat(t))){const t=await Object(g["a"])("Selected date is a clinic holiday, do you want to set an appointment?");if(!t)return!1}const a=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],n=a[v()(t).day()];if(!this.clinicDays.includes(n)){const e=await Object(g["a"])(`The selected date ${D["c"].toStandardHisDisplayFormat(t)} is not a clinic day. Do you want to proceed with this date?`);if(!e)return!1}return this.appointments=e,!0},async setDate(t){this.startDate=new Date(t);const e=this.$refs.calendar;await e.move(this.startDate),await e.focusDate(this.startDate)},async dayClicked(t){!t.isDisabled&&await this.isDateAvalaible(t.id)&&this.setDate(t.id)}},computed:{showMedicationRunoutDate(){var t,e;return"boolean"!==typeof(null===(t=this.config)||void 0===t?void 0:t.hideRunoutDate)||!(null!==(e=this.config)&&void 0!==e&&e.hideRunoutDate)},aDate(){return D["c"].toStandardHisDisplayFormat(this.startDate)},rDate(){return D["c"].toStandardHisDisplayFormat(this.runOutDate)},cDate(){return D["c"].toStandardHisFormat(this.startDate)},attributes(){return[{highlight:!0,dates:this.aDate}]}}}),N=(a("d09b"),a("d959")),x=a.n(N);const S=x()(V,[["render",m]]);e["default"]=S},d09b:function(t,e,a){"use strict";a("39ac")}}]);
//# sourceMappingURL=TouchFormElement13.26c64994.js.map