{"version":3,"sources":["webpack:///./src/apps/ART/services/reports/disaggregated_service.ts","webpack:///./src/apps/EMC/utils/common.ts","webpack:///./src/apps/EMC/Components/tables/DrilldownTable.vue?61a2","webpack:///./src/apps/EMC/Components/tables/DrilldownTable.vue","webpack:///./src/apps/EMC/Components/tables/DrilldownTable.vue?8030","webpack:///./src/apps/ART/services/reports/art_report_service.ts","webpack:///./src/apps/EMC/Components/tables/BaseReportTable.vue?8627","webpack:///./src/apps/EMC/utils/exports.ts","webpack:///./src/apps/EMC/Components/tables/BaseReportTable.vue","webpack:///./src/apps/EMC/Components/tables/BaseReportTable.vue?5f58","webpack:///./src/apps/ART/services/reports/regimen_report_service.ts","webpack:///./src/apps/ART/services/reports/patient_report_service.ts","webpack:///./src/utils/modal.ts","webpack:///./src/apps/EMC/views/reports/moh/CohortDisaggregated.vue?b06a","webpack:///./src/apps/EMC/views/reports/moh/CohortDisaggregated.vue","webpack:///./src/apps/EMC/views/reports/moh/CohortDisaggregated.vue?f5e8"],"names":["DisaggregatedReportService","gender","ageGroup","AGE_GROUPS","initialize","rebuildOutcome","this","getCohort","req","temp_disaggregated","isInit","isRebuild","getReport","ArtReportService","sortByARV","arvNumber","parseInt","split","_hoisted_1","_createTextVNode","render","_ctx","_cache","$props","$setup","$data","$options","_component_IonIcon","_resolveComponent","_component_IonButton","_component_IonButtons","_component_IonTitle","_component_IonToolbar","_component_IonHeader","_component_data_table","_component_IonContent","_component_IonFooter","_component_IonPage","_openBlock","_createBlock","default","_withCtx","_createVNode","slot","onClick","$event","modal","hide","icon","close","_","_toDisplayString","title","rows","asyncRows","columns","rowActionButtons","color","class","defineComponent","name","components","DataTable","IonButton","IonPage","IonHeader","IonContent","IonToolbar","IonButtons","IonFooter","IonTitle","IonIcon","props","type","String","Array","Function","actionButtons","canExportCsv","Boolean","period","setup","__exports__","endDate","startDate","quarter","date","Service","getSessionDate","programID","getProgramID","HisDate","toStandardHisDisplayFormat","url","params","getJson","buildRequest","config","payload","year","daysInMonth","m","dayjs","startMonth","endMonth","qtr","start","end","qtrBounds","getQuarterBounds","getFullYear","Date","qtrName","maxQuarters","qtrs","currDate","currYear","curYr","getMonth","getDate","currentQtr","getQtrByDate","i","push","buildQtrObj","key","_hoisted_2","_hoisted_3","_hoisted_4","_component_ion_col","_component_ion_row","_component_ion_grid","_component_ion_card_header","_component_ion_card_content","_component_ion_card","_component_Layout","style","size","src","reportIcon","height","subtitle","width","innerHTML","_createCommentVNode","useDateRangeFilter","useQuarterFilter","value","useDateFilter","format","totalClients","actionBtns","filters","onCustomFilter","onDrilldown","sanitize","str","replace","trim","error","convertToCsv","filter","column","exportable","map","label","join","row","get","path","formatter","drillable","isArray","length","getAppVersion","getApiVersion","getSiteUUID","exportToCSV","opts","csvData","Blob","link","document","createElement","href","window","URL","createObjectURL","setAttribute","filename","body","appendChild","click","removeChild","IonCard","IonCardHeader","IonCardContent","Layout","IonGrid","IonRow","IonCol","Object","Number","canExportPDF","showRefreshButton","customFilters","emits","emit","computed","PatientReportService","getLocationName","btns","action","_a","f","id","gridSize","options","getReportQuarters","q","other","customfilters","dateRange","isAfter","toastWarning","every","required","isEmpty","values","v","data","REGIMENS","REGIMEN_WEIGHT_DISTRIBUTION","WEIGHT_BAND","FORMULATIONS","RegimenReportService","regimen","formulation","isPepfar","pepfar","range","outcome","show","component","componentProps","cssClass","backdropDismiss","modalController","create","present","onWillDismiss","dismiss","_component_base_report_table","fetchData","onRegenerate","BaseReportTable","report","cohortData","reactive","ref","sortIndexes","aggregations","keys","sort","a","b","reduce","acc","concat","index","initialSort","initialSortOrder","toGenderString","r","addAggregation","col","getRegimenRow","group","getRegimenDistribution","distribution","total","val","getTotalAggregations","getTotalRegimensAggregations","setTotalMalesRow","txNew","txCurr","txGivenIpt","txScreenTB","isPregnant","patientID","match","accum","cur","includes","setFemaleNotPregnantRow","fnpTD","fnpRegimensRow","buildRows","category","setGender","altAgeGroup","toLowerCase","altGender","ageGroups","setAgeGroup","setRebuildOutcome","getTxIpt","getTxCurrTB","getGender","regenerate","loader","setStartDate","setEndDate","setQuarter","getDateIntervalPeriod","init","initialised","categories","preSort","DISPLAY_DATE_FORMAT","patients","setRows","patient","Patientservice","findByID","p","getArvNumber","getBirthdate","getCurrentVillage","DrilldownTableVue","age_group","onMounted","useRoute","query","toString"],"mappings":"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","file":"js/chunk-6e488bb6.d4aa6053.js","sourcesContent":["import { ArtReportService } from \"./art_report_service\";\nimport { AGE_GROUPS } from \"./patient_report_service\";\n\nexport class DisaggregatedReportService extends ArtReportService {\n    gender: string;\n    ageGroup: string;\n    initialize: boolean;\n    rebuildOutcome: boolean;\n\n    constructor() {\n        super()\n        this.gender = ''\n        this.ageGroup = AGE_GROUPS[0]\n        this.initialize = true\n        this.rebuildOutcome = true\n    }\n\n    async init() {\n        this.initialize = true\n        const req = await this.getCohort()\n        if (req && req.temp_disaggregated === 'created') {\n            this.initialize = false\n            return true\n        }\n        return false\n    }\n\n    setAgeGroup(ageGroup: string) {\n        this.ageGroup = ageGroup\n    }\n\n    setInitialization(isInit: boolean) {\n        this.initialize = isInit\n    }\n\n    setRebuildOutcome(isRebuild: boolean) {\n        this.rebuildOutcome = isRebuild\n    }\n\n    setGender(gender: string) {\n        this.gender = gender\n    }\n\n    getGender() {\n        return this.gender\n    }\n\n    getCohort() {\n        return this.getReport('cohort_disaggregated', {\n            'age_group': `${this.ageGroup}`,\n            'rebuild_outcome': `${this.rebuildOutcome}`,\n            'initialize': `${this.initialize}`\n        })\n    }\n\n    getTxIpt() {\n        return this.getReport('clients_given_ipt', { \n            'gender': this.gender, 'age_group': `${this.ageGroup}` \n        })\n    }\n\n    getTxCurrTB() {\n        return this.getReport('screened_for_tb', { \n            'gender': this.gender, 'age_group': `${this.ageGroup}` \n        })\n    }\n\n    getRegimenDistribution() {\n        return this.getReport('disaggregated_regimen_distribution', {\n            'gender': `${this.gender}`, 'age_group': `${this.ageGroup}`\n        })\n    }\n}\n","export function sortByARV(arvNumber: string) {\n  return parseInt(arvNumber.split(\"-\")[2]) || 0\n}","import { resolveComponent as _resolveComponent, createVNode as _createVNode, withCtx as _withCtx, toDisplayString as _toDisplayString, createTextVNode as _createTextVNode, openBlock as _openBlock, createBlock as _createBlock } from \"vue\"\n\nconst _hoisted_1 = /*#__PURE__*/_createTextVNode(\"Close\")\n\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  const _component_IonIcon = _resolveComponent(\"IonIcon\")\n  const _component_IonButton = _resolveComponent(\"IonButton\")\n  const _component_IonButtons = _resolveComponent(\"IonButtons\")\n  const _component_IonTitle = _resolveComponent(\"IonTitle\")\n  const _component_IonToolbar = _resolveComponent(\"IonToolbar\")\n  const _component_IonHeader = _resolveComponent(\"IonHeader\")\n  const _component_data_table = _resolveComponent(\"data-table\")\n  const _component_IonContent = _resolveComponent(\"IonContent\")\n  const _component_IonFooter = _resolveComponent(\"IonFooter\")\n  const _component_IonPage = _resolveComponent(\"IonPage\")\n\n  return (_openBlock(), _createBlock(_component_IonPage, null, {\n    default: _withCtx(() => [\n      _createVNode(_component_IonHeader, null, {\n        default: _withCtx(() => [\n          _createVNode(_component_IonToolbar, null, {\n            default: _withCtx(() => [\n              _createVNode(_component_IonButtons, { slot: \"end\" }, {\n                default: _withCtx(() => [\n                  _createVNode(_component_IonButton, {\n                    slot: \"end\",\n                    onClick: _cache[1] || (_cache[1] = $event => (_ctx.modal.hide())),\n                    \"icon-only\": \"\"\n                  }, {\n                    default: _withCtx(() => [\n                      _createVNode(_component_IonIcon, { icon: _ctx.close }, null, 8, [\"icon\"])\n                    ]),\n                    _: 1\n                  })\n                ]),\n                _: 1\n              }),\n              _createVNode(_component_IonTitle, null, {\n                default: _withCtx(() => [\n                  _createTextVNode(_toDisplayString(_ctx.title), 1 /* TEXT */)\n                ]),\n                _: 1\n              })\n            ]),\n            _: 1\n          })\n        ]),\n        _: 1\n      }),\n      _createVNode(_component_IonContent, null, {\n        default: _withCtx(() => [\n          _createVNode(_component_data_table, {\n            rows: _ctx.rows,\n            \"async-rows\": _ctx.asyncRows,\n            columns: _ctx.columns,\n            \"row-actions-buttons\": _ctx.rowActionButtons,\n            color: \"custom\"\n          }, null, 8, [\"rows\", \"async-rows\", \"columns\", \"row-actions-buttons\"])\n        ]),\n        _: 1\n      }),\n      _createVNode(_component_IonFooter, null, {\n        default: _withCtx(() => [\n          _createVNode(_component_IonButton, {\n            class: \"ion-margin ion-float-right\",\n            onClick: _cache[2] || (_cache[2] = $event => (_ctx.modal.hide()))\n          }, {\n            default: _withCtx(() => [\n              _hoisted_1\n            ]),\n            _: 1\n          })\n        ]),\n        _: 1\n      })\n    ]),\n    _: 1\n  }))\n}","\nimport { defineComponent, PropType } from \"vue\";\nimport { IonButton, IonPage, IonHeader, IonToolbar, IonContent, IonButtons, IonFooter, IonTitle, IonIcon } from \"@ionic/vue\";\nimport { DataTable, ActionButtonInterface, TableColumnInterface, RowActionButtonInterface } from \"@uniquedj95/vtable\";\nimport { close } from \"ionicons/icons\";\nimport { modal } from \"@/utils/modal\";\n\nexport default defineComponent({\n  name: \"DrilldownTable\",\n  components: {\n    DataTable,\n    IonButton,\n    IonPage,\n    IonHeader,\n    IonContent,\n    IonToolbar,\n    IonButtons,\n    IonFooter,\n    IonTitle,\n    IonIcon,\n  },\n  props: {\n    title: {\n      type: String,\n      default: \"Report\",\n    },\n    rows: {\n      type: Array as PropType<any[]>,\n      default: () => [],\n    },\n    asyncRows: {\n      type: Function as PropType<() => Promise<any[]>>,\n    },\n    columns: {\n      type: Array as PropType<TableColumnInterface[]>,\n      default: () => [],\n    },\n    rowActionButtons: {\n      type: Array as PropType<RowActionButtonInterface[]>,\n      default: () => [],\n    },\n    actionButtons: {\n      type: Array as PropType<ActionButtonInterface[]>,\n      default: () => [],\n    },\n    canExportCsv: {\n      type: Boolean,\n      default: false,\n    },\n    period: {\n      type: String,\n      default: \"\",\n    },\n  },\n  setup(){\n    return {\n      close,\n      modal,\n    }\n  }\n})\n","import { render } from \"./DrilldownTable.vue?vue&type=template&id=f3cd7122&ts=true\"\nimport script from \"./DrilldownTable.vue?vue&type=script&lang=ts\"\nexport * from \"./DrilldownTable.vue?vue&type=script&lang=ts\"\n\nimport exportComponent from \"/home/daniel/local-repos/HIS-Core/node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","import { Service } from \"@/services/service\";\nimport HisDate from \"@/utils/Date\"\nimport dayjs from \"dayjs\";\n\nexport interface QuarterInterface {\n    name: string;\n    start: string;\n    end: string;\n}\n\nexport class ArtReportService extends Service {\n    programID: number;\n    startDate: string;\n    endDate: string;\n    date: string;\n    quarter: string\n    constructor() {\n        super()\n        this.endDate = ''\n        this.startDate = ''\n        this.quarter = ''\n        this.date = Service.getSessionDate()\n        this.programID = Service.getProgramID()\n    }\n\n    getDateIntervalPeriod() {\n        return `${HisDate.toStandardHisDisplayFormat(this.startDate)} - ${HisDate.toStandardHisDisplayFormat(this.endDate)}`\n    }\n\n    setStartDate(startDate: string) {\n        this.startDate = startDate\n    }  \n\n    setEndDate(endDate: string) {\n        this.endDate = endDate\n    }\n\n    setQuarter(quarter: string) {\n        this.quarter = quarter\n    }\n\n    getReport(url: string, params={}) {\n        return Service.getJson(url, this.buildRequest(params))\n    }\n\n    buildRequest(config: Record<string, any> = {}) {\n        const payload: any = {'date': this.date, 'program_id': this.programID}\n        if (this.startDate && this.endDate) {\n            payload['start_date'] = this.startDate\n            payload['end_date'] = this.endDate\n        }\n        if (this.quarter) {\n            payload['quarter'] = this.quarter\n        }\n        return { ...payload, ...config }\n    }\n\n    static getQuarterBounds(year: number) {\n        const daysInMonth = (m: string) => dayjs(`${year}-${m}-01`).daysInMonth()\n        const startMonth = (m: string) => `${year}-${m}-01 00:00`\n        const endMonth = (m: string) => `${year}-${m}-${daysInMonth(m)} 00:00`\n\n        return {\n            'Q1': {\n                qtr: 1,\n                start: startMonth('01'),\n                end: endMonth('03')\n            },\n            'Q2': {\n                qtr: 2,\n                start: startMonth('04'),\n                end: endMonth('06')\n            },\n            'Q3': {\n                qtr: 3,\n                start: startMonth('07'),\n                end: endMonth('09')\n            },\n            'Q4': {\n                qtr: 4,\n                start: startMonth('10'),\n                end: endMonth('12')\n            }\n        }\n    }\n\n    static getQtrByDate(date: Date) {\n        const qtrBounds: any = this.getQuarterBounds(date.getFullYear())\n        for(const qtr in qtrBounds) {\n            const { start, end } = qtrBounds[qtr]\n            if (date >= new Date(start) && date <= new Date(end)) {\n                return qtrBounds[qtr]\n            }\n        }\n        return null\n    }\n\n    static buildQtrObj(qtrName: string, year: number): QuarterInterface {\n        const qtrBounds: any = this.getQuarterBounds(year)\n        const { start, end } = qtrBounds[qtrName]\n        return {\n            start,\n            end,\n            name: `${qtrName} ${year}`,\n        }\n    }\n\n    static getReportQuarters(maxQuarters=5) {\n        const qtrs: QuarterInterface[] = [];\n        let currDate = new Date();\n        let currYear = currDate.getFullYear();\n        const curYr = currYear\n        \n        currDate = new Date(`${curYr}-${currDate.getMonth() + 1}-${currDate.getDate()} 00:00`);\n        const currentQtr = this.getQtrByDate(currDate);\n        let qtr = currentQtr.qtr;\n        let i = 0;\n\n        if (qtr === 4) qtrs.push(this.buildQtrObj('Q1', currYear + 1))\n\n        while (i < maxQuarters) {\n          // Add following quarter\n          if (i === 0 && qtr < 4) qtrs.push(this.buildQtrObj(`Q${qtr + 1}`, currYear))\n\n          qtrs.push(this.buildQtrObj(`Q${qtr}`, currYear))\n          qtr = qtr > 0 ? (qtr -= 1) : qtr;\n          currYear = qtr == 0 ? currYear - 1 : currYear;\n          qtr =  qtr == 0 ? ( qtr += 4) : qtr;\n          i++;\n        }\n        return qtrs;\n    }\n}\n","import { createVNode as _createVNode, resolveComponent as _resolveComponent, withCtx as _withCtx, openBlock as _openBlock, createBlock as _createBlock, createCommentVNode as _createCommentVNode, toDisplayString as _toDisplayString } from \"vue\"\n\nconst _hoisted_1 = { key: 1 }\nconst _hoisted_2 = { key: 2 }\nconst _hoisted_3 = { key: 3 }\nconst _hoisted_4 = { key: 4 }\n\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  const _component_ion_col = _resolveComponent(\"ion-col\")\n  const _component_ion_row = _resolveComponent(\"ion-row\")\n  const _component_ion_grid = _resolveComponent(\"ion-grid\")\n  const _component_ion_card_header = _resolveComponent(\"ion-card-header\")\n  const _component_data_table = _resolveComponent(\"data-table\")\n  const _component_ion_card_content = _resolveComponent(\"ion-card-content\")\n  const _component_ion_card = _resolveComponent(\"ion-card\")\n  const _component_Layout = _resolveComponent(\"Layout\")\n\n  return (_openBlock(), _createBlock(_component_Layout, null, {\n    default: _withCtx(() => [\n      _createVNode(_component_ion_card, {\n        class: \"his-card\",\n        style: {\"padding\":\"0 !important\"}\n      }, {\n        default: _withCtx(() => [\n          _createVNode(_component_ion_card_header, { style: {\"border-bottom\":\"1px solid #c2c2c2\",\"font-weight\":\"500\",\"color\":\"#000\"} }, {\n            default: _withCtx(() => [\n              _createVNode(_component_ion_grid, null, {\n                default: _withCtx(() => [\n                  _createVNode(_component_ion_row, null, {\n                    default: _withCtx(() => [\n                      _createVNode(_component_ion_col, {\n                        size: \"1\",\n                        class: \"ion-padding ion-margin-end\"\n                      }, {\n                        default: _withCtx(() => [\n                          _createVNode(\"img\", {\n                            src: `assets/images/${_ctx.reportIcon}`,\n                            style: {height: _ctx.subtitle ? 7 : 5 + 'rem', width: _ctx.subtitle ? 7 : 5 + 'rem'}\n                          }, null, 12, [\"src\"])\n                        ]),\n                        _: 1\n                      }),\n                      _createVNode(_component_ion_col, null, {\n                        default: _withCtx(() => [\n                          _createVNode(\"h1\", { innerHTML: _ctx.title }, null, 8, [\"innerHTML\"]),\n                          (_ctx.subtitle)\n                            ? (_openBlock(), _createBlock(\"h3\", {\n                                key: 0,\n                                innerHTML: _ctx.subtitle,\n                                style: {\"color\":\"#818181\"}\n                              }, null, 8, [\"innerHTML\"]))\n                            : _createCommentVNode(\"\", true),\n                          (_ctx.useDateRangeFilter)\n                            ? (_openBlock(), _createBlock(\"h5\", _hoisted_1, \" Period: \" + _toDisplayString(_ctx.period), 1))\n                            : (_ctx.useQuarterFilter)\n                              ? (_openBlock(), _createBlock(\"h5\", _hoisted_2, \" Quarter: \" + _toDisplayString(_ctx.quarter.value), 1))\n                              : (_ctx.useDateFilter)\n                                ? (_openBlock(), _createBlock(\"h5\", _hoisted_3, \"Date: \" + _toDisplayString(_ctx.dayjs(_ctx.date).format(\"DD/MMM/YYYY\")), 1))\n                                : _createCommentVNode(\"\", true),\n                          (_ctx.totalClients)\n                            ? (_openBlock(), _createBlock(\"h5\", _hoisted_4, \"Total Clients: \" + _toDisplayString(_ctx.totalClients), 1))\n                            : _createCommentVNode(\"\", true)\n                        ]),\n                        _: 1\n                      })\n                    ]),\n                    _: 1\n                  })\n                ]),\n                _: 1\n              })\n            ]),\n            _: 1\n          }),\n          _createVNode(_component_ion_card_content, {\n            class: \"ion-no-padding\",\n            style: {\"min-height\":\"45vh\"}\n          }, {\n            default: _withCtx(() => [\n              _createVNode(_component_data_table, {\n                rows: _ctx.rows,\n                \"async-rows\": _ctx.asyncRows,\n                columns: _ctx.columns,\n                \"actions-buttons\": _ctx.actionBtns,\n                \"row-actions-buttons\": _ctx.rowActionButtons,\n                \"custom-filters\": _ctx.filters,\n                onCustomFilter: _ctx.onCustomFilter,\n                onDrilldown: _ctx.onDrilldown,\n                color: \"custom\"\n              }, null, 8, [\"rows\", \"async-rows\", \"columns\", \"actions-buttons\", \"row-actions-buttons\", \"custom-filters\", \"onCustomFilter\", \"onDrilldown\"])\n            ]),\n            _: 1\n          })\n        ]),\n        _: 1\n      })\n    ]),\n    _: 1\n  }))\n}","import { TableColumnInterface } from '@uniquedj95/vtable';\nimport { get, isEmpty } from 'lodash';\nimport { Service } from '@/services/service';\n\nfunction sanitize(str: string) {\n  try {\n    return str.replace(/<(?:.|\\n)*?>/gm, \" \")\n      .replace(/\\n/g, \" \")\n      .replace(/\\t/g, \" \")\n      .replace(/\\s{2,}/g, \" \")\n      .replace(/=/g, \" \")\n      .replace(/,/g, \" \")\n      .trim();\n  } catch (error) {\n    return str;\n  }\n}\n\ninterface CsvOptions {\n  columns: TableColumnInterface[];\n  rows: any[];\n  filename: string;\n  quarter?: string;\n  period?: string;\n}\n\nfunction convertToCsv({columns, rows, quarter, period}: CsvOptions) {\n  let str = columns.filter((column) => column.exportable !== false)\n    .map((column) => column.label)\n    .join(\",\");\n\n  str += \"\\n\";\n  str += rows.map((row) => columns\n    .filter(column => column.exportable !== false)\n    .map(column => {\n      let value = get(row, column.path);\n      if (typeof column.formatter === 'function' && value) value = column.formatter(value)\n      return sanitize(column.drillable && Array.isArray(value) ? value.length : value);\n    })\n    .join(\",\")\n  ).join(\"\\n\");\n\n  str += \"\\n\" + `Date Created:  ${new Date()}`;\n  if (quarter) str += \"\\n\" + `Quarter: ${quarter}`;\n  if (period) str += \"\\n\" + `Quarter: ${period}`;\n  str += \"\\n\" + `e-Mastercard Version : ${Service.getAppVersion()}`;\n  str += \"\\n\" + `API Version ${Service.getApiVersion()}`;\n  str += \"\\n\" + `Site UUID: ${Service.getSiteUUID()}`;\n\n  return str;\n}\n\nexport function exportToCSV(opts: CsvOptions) {\n  const csvData = new Blob([convertToCsv(opts)], { type: \"text/csv;charset=utf-8;\" });\n  const link = document.createElement(\"a\");\n  link.href = window.URL.createObjectURL(csvData);\n  link.setAttribute(\"download\", `${opts.filename}.csv`);\n  document.body.appendChild(link);\n  link.click();\n  document.body.removeChild(link);\n}\n","\nimport { computed, defineComponent, PropType } from \"vue\";\nimport { IonCard, IonCardContent, IonCardHeader, IonGrid, IonRow, IonCol } from \"@ionic/vue\";\nimport { PatientReportService } from \"@/apps/ART/services/reports/patient_report_service\";\nimport dayjs from \"dayjs\";\nimport Layout from \"@/apps/EMC/Components/Layout.vue\";\nimport { ArtReportService } from \"@/apps/ART/services/reports/art_report_service\";\nimport { Option } from '@/components/Forms/FieldInterface';\nimport { \n  ActionButtonInterface, \n  CustomFilterInterface, \n  DataTable, \n  RowActionButtonInterface, \n  TableColumnInterface \n} from '@uniquedj95/vtable'\nimport { toastWarning } from \"@/utils/Alerts\";\nimport { isEmpty } from \"lodash\";\nimport { exportToCSV } from \"../../utils/exports\";\n\nexport default defineComponent({\n  name: \"BaseReportTable\",\n  components: {\n    IonCard,\n    IonCardHeader,\n    IonCardContent,\n    Layout,\n    IonGrid,\n    IonRow,\n    IonCol,\n    DataTable,\n  },\n  props: {\n    title: {\n      type: String,\n      default: \"Report\",\n    },\n    subtitle: {\n      type: String,\n      default: \"\",\n    },\n    period: {\n      type: String,\n      default: \"\",\n    },\n    date: {\n      type: String,\n      default: \"\",\n    },\n    quarter: {\n      type: Object as PropType<Option>,\n      default: () => ({}),\n    },\n    totalClients: {\n      type: Number,\n      default: 0,\n    },\n    reportIcon: {\n      type: String,\n      default: \"reports/report.png\",\n    },\n    columns: {\n      type: Array as PropType<TableColumnInterface[]>,\n      default: () => [],\n    },\n    rows: {\n      type: Array as PropType<any[]>,\n      default: () => [],\n    },\n    asyncRows: {\n      type: Function as PropType<() => Promise<any[]>>,\n    },\n    actionButtons: {\n      type: Array as PropType<ActionButtonInterface[]>,\n      default: () => [],\n    },\n    rowActionButtons: {\n      type: Array as PropType<RowActionButtonInterface[]>,\n      default: () => [],\n    },\n    canExportCsv: {\n      type: Boolean,\n      default: true,\n    },\n    canExportPDF: {\n      type: Boolean,\n      default: true,\n    },\n    showRefreshButton: {\n      type: Boolean,\n      default: true,\n    },\n    useDateRangeFilter: {\n      type: Boolean,\n      default: false,\n    },\n    useQuarterFilter: {\n      type: Boolean,\n      default: false,\n    },\n    useDateFilter: {\n      type: Boolean,\n      default: false,\n    },\n    customFilters: {\n      type: Array as PropType<CustomFilterInterface[]>,\n      default: () => [],\n    },\n  },\n  emits: [\"regenerate\", \"customFilter\", \"drilldown\"],\n  setup(props, { emit }) {\n    const filename = computed(() => {\n      return `${PatientReportService.getLocationName()} ${props.title} ${ props.period ? props.period : props.date }`;\n    })\n\n    const actionBtns = computed<ActionButtonInterface[]>(() => {\n      const btns = [...props.actionButtons];\n\n      if(props.showRefreshButton){\n        btns.push({ label: \"Refresh/Rebuild\", color: 'success', action: () => emit(\"regenerate\") });\n      }\n\n      if (props.canExportCsv) {\n        btns.push({\n          label: \"CSV\",\n          color: \"primary\",\n          action: async (_a, rows) => exportToCSV({\n            rows, \n            columns: props.columns, \n            quarter: props.quarter?.label,\n            period: props.period,\n            filename: filename.value\n          })\n        })\n      }\n      return btns;\n    })\n\n    const filters = computed<CustomFilterInterface[]>(() => {\n      const f = [...props.customFilters];\n      if(props.useDateRangeFilter) {\n        f.push({\n          id: \"dateRange\",\n          label: \"Date Range\",\n          type: \"dateRange\",\n          gridSize: 5,\n          value: {\n            startDate: props.period.split(\"-\")[0],\n            endDate: props.period.split(\"-\")[1],\n          },\n        })\n      } else if(props.useQuarterFilter) {\n        f.push({\n          id: \"quarter\",\n          label: \"Quarter:\",\n          type: \"select\",\n          value: props.quarter,\n          options: ArtReportService.getReportQuarters().map(q => ({label: q.name, value: q.name, other: q})),\n        })\n      } else if (props.useDateFilter) {\n        f.push({\n          id: \"date\",\n          label: \"Date\",\n          type: \"date\",\n          value: props.date,\n        })\n      }\n      return f;\n    })\n\n    const onCustomFilter = (customfilters: Record<string, any>) => {\n      if (\"dateRange\" in customfilters && (dayjs(customfilters.dateRange.startDate).isAfter(customfilters.dateRange.endDate))) {\n        return toastWarning(\"Invalid date range\")\n      }\n      if (filters.value.every(f => {\n        if (f.required === false) return true;\n        if (!isEmpty(customfilters[f.id]) && typeof customfilters[f.id] === 'object') return Object.values(customfilters[f.id]).every(v => !isEmpty(v));\n        return !isEmpty(customfilters[f.id]);\n      })) {\n        return emit(\"customFilter\", customfilters);\n      }\n      toastWarning(\"Invalid filters\")\n    }\n\n    const onDrilldown = (data: {column: TableColumnInterface; row: any}) => {\n      emit(\"drilldown\", data);\n    }\n\n    return {\n      actionBtns,\n      filters,\n      onCustomFilter,\n      onDrilldown,\n      dayjs,\n    }\n  }\n})\n","import { render } from \"./BaseReportTable.vue?vue&type=template&id=8b3a2834&ts=true\"\nimport script from \"./BaseReportTable.vue?vue&type=script&lang=ts\"\nexport * from \"./BaseReportTable.vue?vue&type=script&lang=ts\"\n\nimport exportComponent from \"/home/daniel/local-repos/HIS-Core/node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","import { ArtReportService } from './art_report_service';\n\nexport const REGIMENS = [\n    '0A', '2A', '4A', '5A', '6A', '7A', '8A', '9A', '10A', '11A', '12A', '13A', '14A', '15A', '16A', '17A',\n    '0P', '2P', '4PP', '4PA', '9PP', '9PA', '11PP', '11PA', '12PP', '12PA', '14PP', '14PA', '15PP', '15PA', '16P', '17PP', '17PA'\n]\n\nexport const REGIMEN_WEIGHT_DISTRIBUTION = [\n    '0A', '2A', '4A', '5A', '6A', '7A', '8A', \n    '9A', '10A', '11A', '12A', '13A', '14A', '15A', '16A', '17A',\n    '0P', '2P', '4P', '4PP', '4PA', '9P', '9PP', '9PA', '11P', '11PP', \n    '11PA', '12PP', '12PA', '14P', '14PP', '14PA', '15P', '15PP', \n    '15PA', '16P', '17P', '17PP', '17PA'\n]\nexport const WEIGHT_BAND = [\n    '10 - 13.9 Kg',\n    '14 - 19.9 Kg',\n    '20 - 24.9 Kg',\n    '25 - 29.9 Kg',\n    '3 - 3.9 Kg',\n    '30 - 34.9 Kg',\n    '35 - 39.9 Kg',\n    '4 - 4.9 Kg',\n    '40 Kg +',\n    '40 - 49.9 Kg',\n    '50 Kg +',\n    '6 - 9.9 Kg',\n    'Unknown'\n]\n\nexport const FORMULATIONS = [\n    'pellets',\n    'tablets',\n    'granules'\n]\n\nexport class RegimenReportService extends ArtReportService {\n    type: string;\n    constructor() {\n        super()\n        this.type = 'pepfar'\n    }\n\n    setReportType(type: string) {\n        this.type = type\n    }\n\n    getTptNewInitiations() {\n        return this.getReport(`programs/${this.programID}/reports/tpt_newly_initiated`)\n    }\n\n    getRegimenFormulationReport(regimen: string, formulation: string) {\n        return this.getReport(`programs/${this.programID}/reports/regimens_and_formulations`, { regimen, formulation })\n    }\n\n    getRegimenReport() {\n        return this.getReport('regimen_report', { type: this.type})\n    }\n\n    getRegimenSwitchReport(isPepfar=false) {\n        return this.getReport('regimen_switch', { pepfar: isPepfar })\n    }\n\n    getRegimensByWeight() {\n        return this.getReport(`programs/${this.programID}/reports/regimens_by_weight_and_gender`)\n    }\n    \n    getSCReport(isPepfar=false) {\n        return this.getReport('sc_arvdisp', { pepfar: isPepfar })\n    }\n    \n}\n","import { ArtReportService } from \"./art_report_service\";\n\nexport const AGE_GROUPS = [\n    '<1 year',\n    '1-4 years', \n    '5-9 years', \n    '10-14 years', \n    '15-19 years', \n    '20-24 years', \n    '25-29 years', \n    '30-34 years', \n    '35-39 years', \n    '40-44 years', \n    '45-49 years', \n    '50-54 years',\n    '55-59 years',\n    '60-64 years',\n    '65-69 years',\n    '70-74 years',\n    '75-79 years',\n    '80-84 years',\n    '85-89 years',\n    '90 plus years'\n]\n\nexport class PatientReportService extends ArtReportService {\n    constructor() {\n        super()\n    }\n    \n    getBookedAppointments(date: string) {\n        return ArtReportService.getJson(`programs/${this.programID}/scheduled_appointments`, { date })\n    }\n\n    getViralLoadResults(range: string) {\n        return this.getReport(`/programs/${this.programID}/reports/high_vl_patients`, { range })\n    }\n\n    getOtherOutcome(outcome: string) {\n        return this.getReport('patient_outcome_list', { outcome })\n    }\n\n    getPatientVisitTypes() {\n        return this.getReport('patient_visit_types')\n    }\n\n    getClientsDueForVl() {\n        return this.getReport('clients_due_vl')\n    }\n\n    getClientRentention() {\n        return this.getReport(`/programs/${this.programID}/reports/retention`)\n    }\n\n    getExternalConsultationClients() {\n        return this.getReport(`${this.programID}/external_consultation_clients`)\n    }\n\n    getMissedAppointments() {\n        return this.getReport('missed_appointments')\n    }\n\n    getPregnantWomen() {\n        return this.getReport(`/programs/${this.programID}/reports/pregnant_patients`)\n    }\n\n    getArchivingCandidates() {\n        return ArtReportService.getJson(`programs/${this.programID}/reports/archiving_candidates`, { \n            'start_date': this.date\n        })\n    }\n\n    getIncompleteVisits() {\n        return this.getReport('incomplete_visits', {\n            \"tool_name\": \"INCOMPLETE VISITS\",\n        })\n    }\n}\n","import { modalController } from \"@ionic/vue\";\n\nexport const modal = {\n  async show(component: any, componentProps?: Record<string, any>, cssClass = 'custom-modal', backdropDismiss = true) {\n    const m = await modalController.create({\n      component,\n      cssClass,\n      backdropDismiss,\n      componentProps,\n    });\n    m.present();\n    const { data } = await m.onWillDismiss();\n    if(data) return data;\n  },\n  async hide(data?: Record<string, any>) {\n    await modalController.dismiss(data);\n  }\n}","import { resolveComponent as _resolveComponent, createVNode as _createVNode, openBlock as _openBlock, createBlock as _createBlock } from \"vue\"\n\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  const _component_base_report_table = _resolveComponent(\"base-report-table\")\n\n  return (_openBlock(), _createBlock(_component_base_report_table, {\n    title: \"MoH Cohort Disaggregated Report\",\n    \"report-icon\": \"reports/split.png\",\n    columns: _ctx.columns,\n    rows: _ctx.rows,\n    period: _ctx.period,\n    useDateRangeFilter: \"\",\n    onCustomFilter: _ctx.fetchData,\n    onDrilldown: _ctx.onDrilldown,\n    onRegenerate: _ctx.onRegenerate\n  }, null, 8, [\"columns\", \"rows\", \"period\", \"onCustomFilter\", \"onDrilldown\", \"onRegenerate\"]))\n}","\nimport { computed, defineComponent, onMounted, reactive, ref } from \"vue\";\nimport { loader } from \"@/utils/loader\";\nimport BaseReportTable from \"@/apps/EMC/Components/tables/BaseReportTable.vue\";\nimport { TableColumnInterface } from \"@uniquedj95/vtable\";\nimport { modal } from \"@/utils/modal\";\nimport DrilldownTableVue from \"@/apps/EMC/Components/tables/DrilldownTable.vue\";\nimport { REGIMENS } from \"@/apps/ART/services/reports/regimen_report_service\";\nimport dayjs from \"dayjs\";\nimport { DisaggregatedReportService } from \"@/apps/ART/services/reports/disaggregated_service\";\nimport { toastWarning } from \"@/utils/Alerts\";\nimport { get, isEmpty } from \"lodash\";\nimport { AGE_GROUPS } from \"@/apps/ART/services/reports/patient_report_service\";\nimport { Patientservice } from \"@/services/patient_service\";\nimport { useRoute } from \"vue-router\";\nimport { DISPLAY_DATE_FORMAT } from \"@/utils/Date\";\nimport { toGenderString } from \"@/utils/Strs\";\nimport { sortByARV } from \"@/apps/EMC/utils/common\";\n\ninterface Category {\n  index: number;\n  gender: string;\n  altGender: string;\n  ageGroups: string[];\n  altAgeGroup?: string;\n  other?: string;\n}\nexport default defineComponent({\n  name: \"CohortDisaggregated\",\n  components: { BaseReportTable },\n  setup() {\n    const report = new DisaggregatedReportService()\n    let cohortData = reactive({} as Record<string, any>);\n    const period = ref(\"-\");\n    let sortIndexes = reactive({} as Record<string, any[]>);\n    let aggregations = reactive([] as any[]);\n    \n    const rows = computed(() => \n      Object.keys(sortIndexes).sort((a, b) => parseInt(a) - parseInt(b))\n        .reduce((acc, key) => acc.concat(sortIndexes[key]), [] as any[])\n        .map((row, i) => ({ index: i + 1, ...row, }))\n    )\n    \n    const columns: TableColumnInterface[] = [\n      { path: \"index\", label: \"#\", initialSort: true, initialSortOrder: 'asc'}, \n      { path: \"age_group\", label: \"Age Group\" },\n      { path: \"gender\", label: \"Gender\", formatter: toGenderString },\n      { path: \"txNew\", label: \"Tx new (new on ART)\", drillable: true },\n      { path: \"txCurr\", label: \"TX curr (receiving ART)\", drillable: true },\n      { path: \"txGivenIpt\", label: \"TX curr (received IPT)\", drillable: true },\n      { path: \"txScreenTB\", label: \"TX curr (screened for TB)\", drillable: true },\n      ...REGIMENS.map(r => ({ \n        path: r, label: r, drillable: true\n      })),\n      { path: \"N/A\", label: \"Unknown\", drillable: true },\n      { path: \"total\", label: \"Total\", drillable: true },\n    ]\n\n    const addAggregation = (col: string, gender: string, data = [] as any[]) => {\n      aggregations.push({col, gender, data});\n    }\n\n    const getRegimenRow = async (group: string, gender: string) => {\n      const row: Record<string, any> = {}\n      const distribution = await report.getRegimenDistribution()\n      for (const regimen of [...REGIMENS, 'N/A']) {\n        const data = get(distribution, regimen, [])\n        row[regimen] = data\n        addAggregation(regimen, gender, data)\n      }\n      row.total = Object.values(row).reduce((acc, val) => acc.concat(val), [])\n      addAggregation('regimenTotals', gender, row.total)\n      return row\n    }\n\n    const getTotalAggregations = (column: string, gender: string) => {\n      return aggregations\n        .filter(a => a.col === column && a.gender === gender)\n        .reduce((acc, val) => acc.concat(val.data), [])\n    }\n\n    const getTotalRegimensAggregations = (gender: string) => {\n      const row: Record<string, any> = {}\n      for (const regimen of [...REGIMENS, 'N/A']) {\n        row[regimen] = getTotalAggregations(regimen, gender)\n      }\n      return row\n    }\n\n    const setTotalMalesRow = (index: number) => {\n      sortIndexes[index] = [{\n          'age_group': \"All\",\n          gender: \"Male\",\n          txNew: getTotalAggregations('txNew', 'Male'),\n          txCurr: getTotalAggregations('txCurr', 'Male'),\n          txGivenIpt: getTotalAggregations('txGivenIpt', 'Male'),\n          txScreenTB: getTotalAggregations('txScreenTB', 'Male'),\n          ...getTotalRegimensAggregations(\"Male\"),\n          total: getTotalAggregations('regimenTotals', 'Male'),\n        }]\n    }\n\n    const isPregnant = (patientID: number, column: string) => {\n      return aggregations\n        .filter((a: any) => a.gender.match(/fp|fbf/i) && a.col === column)\n        .reduce((accum: any, cur: any) => accum.concat(cur.data || []), [])\n        .includes(patientID)\n    }\n\n    const setFemaleNotPregnantRow = (index: number) => {\n      const fnpTD = (column: string) => aggregations\n        .filter((a: any) => a.gender === 'Female' && a.col === column)\n        .reduce((accum: any, cur: any) => accum.concat(cur.data.filter((i: any) => !isPregnant(i, column))), [])\n\n      const fnpRegimensRow = () => {\n        const row: Record<string, any> = {}\n        for (const regimen of [...REGIMENS, 'N/A']) {\n          row[regimen] = fnpTD(regimen)\n        }\n        return row\n      }\n\n      sortIndexes[index] = [{\n        'age_group': \"All\",\n        gender: \"FNP\",\n        txNew: fnpTD('txNew'),\n        txCurr: fnpTD('txCurr'),\n        txGivenIpt: fnpTD('txGivenIpt'),\n        txScreenTB: fnpTD('txScreenTB'),\n        ...fnpRegimensRow(),\n        total: fnpTD('regimenTotals'),\n      }]\n    }\n\n    const buildRows = async (category: Category) => {\n      report.setGender(category.altAgeGroup ? category.altAgeGroup.toLowerCase() : category.altGender.toLowerCase());\n      for (const ageGroup of category.ageGroups) {\n        let txNew = []\n        let txCurr = []\n        let txGivenIpt = []\n        let txScreenTB = []\n        const group = category.altAgeGroup ? category.altAgeGroup : ageGroup\n        report.setAgeGroup(group);\n\n        if(!(group in cohortData)) {\n          const data = await report.getCohort()\n          report.setRebuildOutcome(false)\n          cohortData[group] = isEmpty(data) ? {} : data[group]\n        }\n\n        if(!isEmpty(cohortData[group])) {\n          txNew = get(cohortData, `${group}.${category.gender}.tx_new`, [])\n          txCurr = get(cohortData, `${group}.${category.gender}.tx_curr`, [])\n          txGivenIpt = await report.getTxIpt()\n          txScreenTB = await report.getTxCurrTB()\n          addAggregation('txNew', category.altGender, txNew)\n          addAggregation('txCurr', category.altGender, txCurr)\n          addAggregation('txGivenIpt', category.altGender, txGivenIpt)\n          addAggregation('txScreenTB', category.altGender, txScreenTB)\n        }\n\n        switch(report.getGender()) {\n          case 'breastfeeding':\n            report.setAgeGroup('All')\n            report.setGender('Fbf')\n            break\n          case 'pregnant':\n            report.setAgeGroup('All')\n            report.setGender('FP')\n            break\n        }\n\n        if(!sortIndexes[category.index]) sortIndexes[category.index] = []\n        sortIndexes[category.index].push({\n          'age_group': ageGroup,\n          gender: category.altGender,\n          txNew,\n          txCurr,\n          txGivenIpt,\n          txScreenTB,\n          ...await getRegimenRow(group, category.altGender),\n        })\n      }\n    }\n\n    const fetchData =  async ({ dateRange }: Record<string, any>, regenerate=false, quarter=\"Custom\") => {\n      await loader.show()\n      report.setStartDate(dateRange.startDate)\n      report.setEndDate(dateRange.endDate)\n      report.setRebuildOutcome(regenerate)\n      report.setQuarter(quarter)     \n      period.value = report.getDateIntervalPeriod()\n      const initialised = await report.init()\n      if (!initialised) return toastWarning('Unable to initialise report')\n      const categories: Category[] = [\n        {index: 1, gender: \"F\", altGender: \"Female\", ageGroups: AGE_GROUPS },\n        {index: 2, gender: \"M\", altGender: \"Male\", ageGroups: AGE_GROUPS },\n        {index: 4, gender: \"F\", altGender: \"FP\", ageGroups: ['All'], altAgeGroup: 'Pregnant' },\n        {index: 6, gender: \"F\", altGender: \"FBf\", ageGroups: ['All'], altAgeGroup: 'Breastfeeding' },\n      ]\n\n      for (const category of categories) {\n        await buildRows(category)\n      }\n      \n      setTotalMalesRow(3)\n      setFemaleNotPregnantRow(5)\n      \n      await loader.hide();\n    }\n\n    const onRegenerate = async () => {\n      sortIndexes = {}\n      aggregations = []\n      cohortData = {}\n      const [ start, end ] = period.value.split('-')\n      if(start && end ) {\n        await fetchData({dateRange: {\n          startDate: dayjs(start).format(\"YYYY-MM-DD\"), \n          endDate: dayjs(end).format(\"YYYY-MM-DD\")\n        }}, true)\n      }\n    }\n\n    const onDrilldown = async (data: {column: TableColumnInterface; row: any}) => {\n      const columns: TableColumnInterface[] = [\n        { path: \"arv_number\", label: \"ARV Number\", preSort: sortByARV, initialSort: true },\n        { path: \"birthdate\", label: \"Date of Birth\", formatter: (v) => dayjs(v).format(DISPLAY_DATE_FORMAT) },\n        { path: \"gender\", label: \"Gender\", formatter: toGenderString },\n        { path: \"address\", label: \"Address\" }\n      ]\n      const patients = data.row[data.column.path]\n      const rows = ref<any[]>([])      \n      const setRows = async () => {\n        for(const patient of patients) {\n          const data = await Patientservice.findByID(patient)\n          const p = new Patientservice(data)\n          rows.value.push({\n            \"arv_number\": p.getArvNumber(),\n            \"birthdate\": p.getBirthdate(),\n            \"gender\": p.getGender(),\n            \"address\": `${p.getCurrentVillage()}`\n          })\n        }\n      }\n\n      setRows();\n      await modal.show(DrilldownTableVue, {\n        title: `${data.row.age_group} ${data.column.label} | ${data.row.gender}s`,\n        columns,\n        rows: rows.value,\n      })\n    }\n\n    onMounted(() => {\n      const { 'start_date': startDate, 'end_date': endDate, quarter } = useRoute().query\n      if(startDate && endDate && quarter) {\n        const dateRange = {\n          startDate: dayjs(startDate.toString()).format(\"YYYY-MM-DD\"), \n          endDate: dayjs(endDate.toString()).format(\"YYYY-MM-DD\")\n        }\n        fetchData({dateRange}, false, quarter.toString())    \n      }\n    })\n\n    return {\n      rows,\n      columns,\n      period,\n      fetchData,\n      onDrilldown,\n      onRegenerate,\n    }\n  }\n})\n","import { render } from \"./CohortDisaggregated.vue?vue&type=template&id=e00dda2a&ts=true\"\nimport script from \"./CohortDisaggregated.vue?vue&type=script&lang=ts\"\nexport * from \"./CohortDisaggregated.vue?vue&type=script&lang=ts\"\n\nimport exportComponent from \"/home/daniel/local-repos/HIS-Core/node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__"],"sourceRoot":""}