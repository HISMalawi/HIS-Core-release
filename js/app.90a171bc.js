(function(e){function t(t){for(var a,o,r=t[0],s=t[1],l=t[2],d=0,u=[];d<r.length;d++)o=r[d],Object.prototype.hasOwnProperty.call(i,o)&&i[o]&&u.push(i[o][0]),i[o]=0;for(a in s)Object.prototype.hasOwnProperty.call(s,a)&&(e[a]=s[a]);p&&p(t);while(u.length)u.shift()();return c.push.apply(c,l||[]),n()}function n(){for(var e,t=0;t<c.length;t++){for(var n=c[t],a=!0,o=1;o<n.length;o++){var r=n[o];0!==i[r]&&(a=!1)}a&&(c.splice(t--,1),e=s(s.s=n[0]))}return e}var a={},o={app:0},i={app:0},c=[];function r(e){return s.p+"js/"+({TouchFormElement0:"TouchFormElement0",TouchFormElement1:"TouchFormElement1",TouchFormElement10:"TouchFormElement10",TouchFormElement11:"TouchFormElement11",TouchFormElement12:"TouchFormElement12","TouchFormElement13~TouchFormElement20~TouchFormElement24":"TouchFormElement13~TouchFormElement20~TouchFormElement24",TouchFormElement13:"TouchFormElement13",TouchFormElement20:"TouchFormElement20",TouchFormElement24:"TouchFormElement24",TouchFormElement14:"TouchFormElement14",TouchFormElement15:"TouchFormElement15",TouchFormElement16:"TouchFormElement16",TouchFormElement17:"TouchFormElement17",TouchFormElement18:"TouchFormElement18",TouchFormElement19:"TouchFormElement19",TouchFormElement2:"TouchFormElement2",TouchFormElement21:"TouchFormElement21",TouchFormElement22:"TouchFormElement22",TouchFormElement23:"TouchFormElement23",TouchFormElement25:"TouchFormElement25",TouchFormElement26:"TouchFormElement26",TouchFormElement27:"TouchFormElement27",TouchFormElement28:"TouchFormElement28",TouchFormElement29:"TouchFormElement29",TouchFormElement3:"TouchFormElement3",TouchFormElement30:"TouchFormElement30",TouchFormElement31:"TouchFormElement31",TouchFormElement32:"TouchFormElement32",TouchFormElement33:"TouchFormElement33",TouchFormElement34:"TouchFormElement34",TouchFormElement35:"TouchFormElement35",TouchFormElement36:"TouchFormElement36",TouchFormElement37:"TouchFormElement37",TouchFormElement38:"TouchFormElement38",TouchFormElement39:"TouchFormElement39",TouchFormElement4:"TouchFormElement4",TouchFormElement40:"TouchFormElement40",TouchFormElement41:"TouchFormElement41",TouchFormElement42:"TouchFormElement42",TouchFormElement43:"TouchFormElement43",TouchFormElement44:"TouchFormElement44",TouchFormElement45:"TouchFormElement45",TouchFormElement46:"TouchFormElement46",TouchFormElement47:"TouchFormElement47",TouchFormElement48:"TouchFormElement48",TouchFormElement49:"TouchFormElement49",TouchFormElement5:"TouchFormElement5",TouchFormElement50:"TouchFormElement50",TouchFormElement51:"TouchFormElement51",TouchFormElement52:"TouchFormElement52",TouchFormElement53:"TouchFormElement53",TouchFormElement54:"TouchFormElement54",TouchFormElement6:"TouchFormElement6",TouchFormElement7:"TouchFormElement7",TouchFormElement8:"TouchFormElement8",TouchFormElement9:"TouchFormElement9","polyfills-core-js":"polyfills-core-js","polyfills-dom":"polyfills-dom"}[e]||e)+"."+{TouchFormElement0:"bfec69b3",TouchFormElement1:"f31a7501",TouchFormElement10:"2e21f1d9",TouchFormElement11:"bbe00631",TouchFormElement12:"d95d84d1","TouchFormElement13~TouchFormElement20~TouchFormElement24":"479b19bf",TouchFormElement13:"9f1bc934",TouchFormElement20:"c32ee019",TouchFormElement24:"c076a6cf",TouchFormElement14:"7cbb4228",TouchFormElement15:"af131b0e",TouchFormElement16:"145e1832",TouchFormElement17:"0528b758",TouchFormElement18:"b4d67598",TouchFormElement19:"226a85cf",TouchFormElement2:"f5ed4f32",TouchFormElement21:"9b380c6e",TouchFormElement22:"6b0b1f62",TouchFormElement23:"dddc6431",TouchFormElement25:"5ebaa72c",TouchFormElement26:"602679f4",TouchFormElement27:"d32b3c4d",TouchFormElement28:"50c0240a",TouchFormElement29:"73d3b8da",TouchFormElement3:"7e9da5cd",TouchFormElement30:"81f40c5b",TouchFormElement31:"4c7f6fb0",TouchFormElement32:"5fe442c4",TouchFormElement33:"9bd94ace",TouchFormElement34:"3fb2f597",TouchFormElement35:"aa3b5aee",TouchFormElement36:"0db62f38",TouchFormElement37:"a4d2cdf1",TouchFormElement38:"0e74fb39",TouchFormElement39:"a814e441",TouchFormElement4:"f23290b3",TouchFormElement40:"08496626","chunk-0fd5c64e":"b80e841c",TouchFormElement41:"7937a21f",TouchFormElement42:"ebf20f9d",TouchFormElement43:"66c560e4",TouchFormElement44:"e27d239a",TouchFormElement45:"285ddd6f",TouchFormElement46:"d2062b53",TouchFormElement47:"ef295721",TouchFormElement48:"cd125429",TouchFormElement49:"07a9941c",TouchFormElement5:"5dc632e8",TouchFormElement50:"7e08b655",TouchFormElement51:"5dbc7bd4",TouchFormElement52:"6f9c02c3",TouchFormElement53:"73acb4f0",TouchFormElement54:"93ce1cf6",TouchFormElement6:"b2f9c00e",TouchFormElement7:"7d49d574",TouchFormElement8:"1d18bd79",TouchFormElement9:"f19f2697","chunk-01a5b102":"69b7562a","chunk-02c995b5":"544c579d","chunk-04673748":"54a103a6","chunk-0490c4ce":"c3bdc233","chunk-056c0c95":"55c84477","chunk-07d1414d":"a0ca3c89","chunk-089a5b7a":"b056f15e","chunk-2d2288cf":"ad530d7a","chunk-4183a6cc":"cda6a133","chunk-09155df3":"5a4ea1ca","chunk-09162720":"891da1b8","chunk-097e0872":"77506139","chunk-09a4aadc":"c4e944b8","chunk-0a797c6c":"08232ae1","chunk-0adaa4ea":"1fbc4b5b","chunk-0b6f0372":"ac13c95e","chunk-0d411be7":"0d399931","chunk-0d67dc9b":"ec5d4514","chunk-0d68fded":"58a482ff","chunk-0d8a9648":"1024e2a8","chunk-0e8d09cc":"51478b78","chunk-0e93a01c":"91d03143","chunk-0f8148d5":"0bbb058a","chunk-102f4ba4":"f5d50583","chunk-106fab1a":"44a2a7c7","chunk-10fb4a0e":"01b447e0","chunk-117a9a3c":"0077d273","chunk-138b25ac":"265186de","chunk-159e38ab":"7d1d81d3","chunk-15eccd71":"cdac46e7","chunk-16767ceb":"4308b0b4","chunk-169b062e":"54a0e7ff","chunk-171427f8":"dd6e7b5f","chunk-17ba928e":"7efaf9a9","chunk-17dae17c":"a43798ec","chunk-18c74980":"4c98cb38","chunk-1a035943":"4a639639","chunk-1aaa69a2":"84afcd86","chunk-1b36f5ab":"a896c211","chunk-1dbc15a2":"395be322","chunk-1e09cff8":"9b92b052","chunk-1e242795":"7ae7f589","chunk-1f3eb972":"a9cb4cff","chunk-21649554":"cb8f8247","chunk-21a76241":"5be2ccee","chunk-22341d62":"5dfb1e0d","chunk-22496fff":"f46228eb","chunk-23cae350":"b6107b14","chunk-252498a0":"1aac9609","chunk-25532402":"8a2d2d46","chunk-25d83ca8":"d3255247","chunk-2759f0ea":"6f29e889","chunk-2799cd62":"ca271527","chunk-2813dbbf":"bf39c6bd","chunk-2a19e2a2":"958676a7","chunk-2af68944":"addf287a","chunk-2b71730d":"cd53f1b5","chunk-2d0a463b":"2b0209f5","chunk-2d0a4885":"a02a2fae","chunk-2d0b66fc":"acfcb91c","chunk-2d0c073f":"0c8a4e98","chunk-2d0d43da":"ce77bc5b","chunk-2d0da04a":"bafbb0ec","chunk-2d0e5812":"4d76033f","chunk-2d213189":"80b53e76","chunk-2d216214":"bf22d4a1","chunk-2d216257":"46d40ab5","chunk-2d217e6a":"7a8d7abb","chunk-2d218068":"99ad2938","chunk-2d21da73":"999724e2","chunk-2d21db89":"b91554c1","chunk-2d22ca72":"8a4f29f5","chunk-2d22d5a8":"da716127","chunk-2d2304d2":"89410a8b","chunk-2d237b00":"84cd3449","chunk-2d7b0dba":"8a60ee13","chunk-2e892804":"5a61707d","chunk-2fa7d8e1":"2c2b66e5","chunk-30dd9750":"151c173b","chunk-31c5e014":"68c2b755","chunk-3235309e":"a2e0486a","chunk-332ee734":"86afa36d","chunk-3683df0e":"93c16641","chunk-373eba62":"942d1f6e","chunk-374f5cda":"3c6b1233","chunk-37c65eed":"561df3c2","chunk-37f2300e":"59f2d191","chunk-3818227b":"d547920b","chunk-2d0deb82":"d6d31e53","chunk-2d226ccc":"c52205df","chunk-2d2297b9":"4d5948ac","chunk-388cc6a8":"4f9e6e75","chunk-39ae0fda":"c0a55844","chunk-3a01580a":"5b82dc5e","chunk-3b53fd66":"4216c09e","chunk-3b8ea58b":"de5e7c6b","chunk-2d0cbe29":"4f03d494","chunk-2d0e8fe4":"1fc53a9b","chunk-3c19eeed":"94076e57","chunk-10fc5096":"7233ad16","chunk-2d0e1fde":"7ac831ee","chunk-3ed29de3":"3f5d6ddd","chunk-3fba66f4":"2a0ff1cc","chunk-3fd801f4":"4f029413","chunk-40a31bd6":"9e11f376","chunk-41c0f7a4":"e40ad8e3","chunk-4255b9ec":"76617d1f","chunk-428a91f2":"e8f6868d","chunk-444bebfd":"b5d05010","chunk-449ba214":"8b7f2d56","chunk-45b19b4c":"a7e3763f","chunk-4620dd96":"e2b3ffe8","chunk-4620f548":"23a0eb8b","chunk-4621dc90":"c8c560bd","chunk-46236a85":"67e6481e","chunk-46239ead":"fe123aef","chunk-4623e302":"da64b1f8","chunk-462480cb":"ca555288","chunk-462c869e":"a2d575ec","chunk-4638c0b4":"e68b5872","chunk-4639117c":"40d88886","chunk-46397160":"c181353c","chunk-466beead":"4b61cdba","chunk-4828ad16":"51ef6c79","chunk-482a9e72":"6781b495","chunk-2d0d9fe2":"698bf429","chunk-36b25d50":"c5d2ad2f","chunk-37a3135d":"9cb909ff","chunk-3b454c76":"0ec7cb1e","chunk-6b96b9e2":"d3562b80","chunk-6bc31a49":"99d221c1","chunk-b1605bee":"85576b06","chunk-d9a86b86":"dbc71568","chunk-485adc83":"8d7f7ae2","chunk-48a533fb":"1f89d5bb","chunk-2d0bb1cf":"81f8f6d1","chunk-2d0ddf11":"3c585d7c","chunk-49088940":"6361f96f","chunk-4c1657e5":"d31c2e6f","chunk-4c40fe44":"113325b0","chunk-4c4b4134":"69429ccc","chunk-4c7d4cdd":"68475e5a","chunk-4cacbac4":"55420372","chunk-4d7a31cb":"c010bd4e","chunk-50220066":"ec3d7bc7","chunk-502a4fea":"8fb62183","chunk-515474f6":"9be46fa2","chunk-51a01568":"a0988ec1","chunk-5209708a":"b12de090","chunk-52d6026b":"8fa00f1c","chunk-53dc0a89":"df32071e","chunk-53dfc2ec":"de863817","chunk-541ea42d":"5ee3df1d","chunk-54bbd082":"924fa3e1","chunk-54f23343":"068a3844","chunk-558c7b2c":"1a94be94","chunk-56873b06":"05952289","chunk-59d4c87c":"c92cf015","chunk-5a8ac886":"4befd59c","chunk-5b707f09":"34c736c0","chunk-5bfa378c":"e8f873df","chunk-5cabb54e":"75812903","chunk-5d065fa7":"34369505","chunk-5d9db78a":"4bffe217","chunk-5de8a60e":"2f59af7f","chunk-5ea256d6":"415acc14","chunk-5edbc3a2":"2f698cdc","chunk-603b7233":"ba51e964","chunk-6072d4d7":"d26a67ba","chunk-61325c54":"ffce3d92","chunk-614857ee":"30883769","chunk-617c561a":"35b76444","chunk-621afa11":"04607b04","chunk-6349c9bc":"2686a440","chunk-654c8487":"9b3bf1c1","chunk-6595c582":"6e71ffbe","chunk-69eb8776":"a4bb9c4e","chunk-6b69d832":"39351b7a","chunk-6b71f156":"c8df5fed","chunk-6c28dc14":"eb58b4cb","chunk-6d375f34":"8a5c3f99","chunk-6e2ef908":"e3db848e","chunk-2d0db1ed":"6606d824","chunk-2d229c15":"c2ff6cb8","chunk-6f5d748c":"2c7c21ea","chunk-70e95d33":"a5290e94","chunk-74c63811":"d7fa2050","chunk-74d31e01":"c698d6a6","chunk-753a9bc9":"e0285b19","chunk-7548ca2d":"f75b511d","chunk-75953fe1":"4c0adcc0","chunk-7709102e":"34bffb29","chunk-03e87f92":"55f6476a","chunk-bfe33a92":"c642a71f","chunk-79f1dac7":"e6d90698","chunk-7b204f29":"ff838172","chunk-7b8bfad3":"308c6c58","chunk-7e518abc":"bd97a20c","chunk-80b50b94":"e50736d6","chunk-2d0af6a8":"dfd43d7c","chunk-2d21d9f6":"47c259b4","chunk-2d2219e6":"6dd85658","chunk-7094e908":"07bb11db","chunk-e523fed2":"47614779","chunk-8109adf2":"5bb8cf14","chunk-8431eb1e":"80b19dd2","chunk-858cd918":"53ab8f61","chunk-8916defa":"da7a394b","chunk-8bb7f81e":"e3903ed0","chunk-8c241af4":"0f007c69","chunk-8c9b74a6":"503a5fa7","chunk-8cf3d17c":"f8176ebc","chunk-8f04b8cc":"a08462f7","chunk-2d0c8493":"06a32400","chunk-2d0f028e":"e6e1d09d","chunk-8f3cd08c":"a5d59f1c","chunk-943f0b86":"19d09e42","chunk-9a316cbe":"05325ae1","chunk-9c3ba9b2":"cc893b00","chunk-9e1fb024":"e9d36827","chunk-a07f7ae6":"2c478433","chunk-a3f4f504":"ff97d282","chunk-a5563906":"b4e8d57b","chunk-a6d3d518":"1ca56fd5","chunk-a7c378ee":"204e72d9","chunk-a9395c36":"3ddd7897","chunk-b14c2520":"24591155","chunk-bc09139e":"b44e466f","chunk-c1897600":"772b6792","chunk-c71d4ad6":"cbd5391a","chunk-c8611e9e":"cc6d898d","chunk-2d0aedb1":"dc652527","chunk-2d0cc98a":"ee056f97","chunk-2d0e8fc6":"3cca86d3","chunk-2d20ee25":"37d75fb6","chunk-2d21f07a":"c2d4de56","chunk-2d225875":"b6b88ce1","chunk-2d229b3d":"3973ba0a","chunk-3526ee86":"b81fd173","chunk-46bff48c":"906ea2fe","chunk-65365de6":"deccebeb","chunk-c8719bfe":"b4f23358","chunk-cc6c9ed2":"dcb989ce","chunk-cd588f90":"d223df87","chunk-d0e8aa0a":"349eb4a3","chunk-d8413eac":"c5a81092","chunk-d99d2ac4":"f465438b","chunk-dc7f244e":"ca7dce2a","chunk-e264e05c":"029624e3","chunk-eaa2b130":"3657c159","chunk-ebc0ec76":"63ee6056","chunk-ed3d470c":"6da34e56","chunk-f6fc5a8a":"bf79123d","chunk-2d0a3c5e":"2b7905ed","chunk-2d0c49e8":"1a874358","chunk-2d0ce780":"df5119bc","chunk-2d0f0ba4":"c6120456","chunk-2d2133a2":"efb1fd85","chunk-2d217e09":"2d025da2","chunk-2d22c0fe":"1f324b54","chunk-f79e9b48":"cdcc3eaf","chunk-fccffe56":"759dcc4d","polyfills-core-js":"ada8da51","polyfills-dom":"aae81a66","chunk-2d0b33e3":"3ccf2dd4","chunk-2d0dd4c8":"6fb79ef9","chunk-2d0dd790":"66d73c59","chunk-2d2176ae":"4aca0957","chunk-2d21d0c2":"ce3f552f","chunk-2d2376e6":"d962d94b","chunk-2d2297f7":"f614af8d","chunk-5f6b00a9":"579ca40b","chunk-2d0c4649":"73bee354","chunk-1f0442db":"6f8e6e38"}[e]+".js"}function s(t){if(a[t])return a[t].exports;var n=a[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,s),n.l=!0,n.exports}s.e=function(e){var t=[],n={TouchFormElement0:1,TouchFormElement1:1,TouchFormElement10:1,TouchFormElement11:1,TouchFormElement12:1,TouchFormElement13:1,TouchFormElement20:1,TouchFormElement24:1,TouchFormElement14:1,TouchFormElement15:1,TouchFormElement16:1,TouchFormElement17:1,TouchFormElement18:1,TouchFormElement19:1,TouchFormElement2:1,TouchFormElement21:1,TouchFormElement22:1,TouchFormElement23:1,TouchFormElement25:1,TouchFormElement27:1,TouchFormElement28:1,TouchFormElement29:1,TouchFormElement3:1,TouchFormElement30:1,TouchFormElement31:1,TouchFormElement32:1,TouchFormElement33:1,TouchFormElement34:1,TouchFormElement35:1,TouchFormElement36:1,TouchFormElement37:1,TouchFormElement38:1,TouchFormElement39:1,TouchFormElement4:1,TouchFormElement40:1,"chunk-0fd5c64e":1,TouchFormElement41:1,TouchFormElement42:1,TouchFormElement43:1,TouchFormElement44:1,TouchFormElement45:1,TouchFormElement46:1,TouchFormElement47:1,TouchFormElement48:1,TouchFormElement49:1,TouchFormElement5:1,TouchFormElement50:1,TouchFormElement51:1,TouchFormElement52:1,TouchFormElement53:1,TouchFormElement54:1,TouchFormElement6:1,TouchFormElement7:1,TouchFormElement9:1,"chunk-04673748":1,"chunk-056c0c95":1,"chunk-07d1414d":1,"chunk-0a797c6c":1,"chunk-0adaa4ea":1,"chunk-0b6f0372":1,"chunk-0d411be7":1,"chunk-0d67dc9b":1,"chunk-0f8148d5":1,"chunk-117a9a3c":1,"chunk-138b25ac":1,"chunk-171427f8":1,"chunk-17dae17c":1,"chunk-1e09cff8":1,"chunk-1f3eb972":1,"chunk-252498a0":1,"chunk-2813dbbf":1,"chunk-2af68944":1,"chunk-332ee734":1,"chunk-3683df0e":1,"chunk-374f5cda":1,"chunk-3818227b":1,"chunk-3a01580a":1,"chunk-3b53fd66":1,"chunk-3b8ea58b":1,"chunk-10fc5096":1,"chunk-3fd801f4":1,"chunk-4828ad16":1,"chunk-482a9e72":1,"chunk-36b25d50":1,"chunk-37a3135d":1,"chunk-3b454c76":1,"chunk-6b96b9e2":1,"chunk-6bc31a49":1,"chunk-b1605bee":1,"chunk-d9a86b86":1,"chunk-4c1657e5":1,"chunk-4c40fe44":1,"chunk-4c4b4134":1,"chunk-4c7d4cdd":1,"chunk-4cacbac4":1,"chunk-4d7a31cb":1,"chunk-50220066":1,"chunk-51a01568":1,"chunk-5209708a":1,"chunk-52d6026b":1,"chunk-5b707f09":1,"chunk-5bfa378c":1,"chunk-5cabb54e":1,"chunk-5de8a60e":1,"chunk-5ea256d6":1,"chunk-61325c54":1,"chunk-617c561a":1,"chunk-6595c582":1,"chunk-6b69d832":1,"chunk-6c28dc14":1,"chunk-6e2ef908":1,"chunk-6f5d748c":1,"chunk-70e95d33":1,"chunk-7709102e":1,"chunk-bfe33a92":1,"chunk-7e518abc":1,"chunk-80b50b94":1,"chunk-8431eb1e":1,"chunk-8916defa":1,"chunk-8c241af4":1,"chunk-8c9b74a6":1,"chunk-943f0b86":1,"chunk-9a316cbe":1,"chunk-9c3ba9b2":1,"chunk-9e1fb024":1,"chunk-a07f7ae6":1,"chunk-a3f4f504":1,"chunk-a6d3d518":1,"chunk-c1897600":1,"chunk-c8611e9e":1,"chunk-c8719bfe":1,"chunk-cc6c9ed2":1,"chunk-d99d2ac4":1,"chunk-dc7f244e":1,"chunk-ed3d470c":1,"chunk-f6fc5a8a":1,"chunk-5f6b00a9":1,"chunk-1f0442db":1};o[e]?t.push(o[e]):0!==o[e]&&n[e]&&t.push(o[e]=new Promise((function(t,n){for(var a="css/"+({TouchFormElement0:"TouchFormElement0",TouchFormElement1:"TouchFormElement1",TouchFormElement10:"TouchFormElement10",TouchFormElement11:"TouchFormElement11",TouchFormElement12:"TouchFormElement12","TouchFormElement13~TouchFormElement20~TouchFormElement24":"TouchFormElement13~TouchFormElement20~TouchFormElement24",TouchFormElement13:"TouchFormElement13",TouchFormElement20:"TouchFormElement20",TouchFormElement24:"TouchFormElement24",TouchFormElement14:"TouchFormElement14",TouchFormElement15:"TouchFormElement15",TouchFormElement16:"TouchFormElement16",TouchFormElement17:"TouchFormElement17",TouchFormElement18:"TouchFormElement18",TouchFormElement19:"TouchFormElement19",TouchFormElement2:"TouchFormElement2",TouchFormElement21:"TouchFormElement21",TouchFormElement22:"TouchFormElement22",TouchFormElement23:"TouchFormElement23",TouchFormElement25:"TouchFormElement25",TouchFormElement26:"TouchFormElement26",TouchFormElement27:"TouchFormElement27",TouchFormElement28:"TouchFormElement28",TouchFormElement29:"TouchFormElement29",TouchFormElement3:"TouchFormElement3",TouchFormElement30:"TouchFormElement30",TouchFormElement31:"TouchFormElement31",TouchFormElement32:"TouchFormElement32",TouchFormElement33:"TouchFormElement33",TouchFormElement34:"TouchFormElement34",TouchFormElement35:"TouchFormElement35",TouchFormElement36:"TouchFormElement36",TouchFormElement37:"TouchFormElement37",TouchFormElement38:"TouchFormElement38",TouchFormElement39:"TouchFormElement39",TouchFormElement4:"TouchFormElement4",TouchFormElement40:"TouchFormElement40",TouchFormElement41:"TouchFormElement41",TouchFormElement42:"TouchFormElement42",TouchFormElement43:"TouchFormElement43",TouchFormElement44:"TouchFormElement44",TouchFormElement45:"TouchFormElement45",TouchFormElement46:"TouchFormElement46",TouchFormElement47:"TouchFormElement47",TouchFormElement48:"TouchFormElement48",TouchFormElement49:"TouchFormElement49",TouchFormElement5:"TouchFormElement5",TouchFormElement50:"TouchFormElement50",TouchFormElement51:"TouchFormElement51",TouchFormElement52:"TouchFormElement52",TouchFormElement53:"TouchFormElement53",TouchFormElement54:"TouchFormElement54",TouchFormElement6:"TouchFormElement6",TouchFormElement7:"TouchFormElement7",TouchFormElement8:"TouchFormElement8",TouchFormElement9:"TouchFormElement9","polyfills-core-js":"polyfills-core-js","polyfills-dom":"polyfills-dom"}[e]||e)+"."+{TouchFormElement0:"02b06d02",TouchFormElement1:"00d70ffe",TouchFormElement10:"4cc09c9b",TouchFormElement11:"2d7f04c8",TouchFormElement12:"5f2f8cdb","TouchFormElement13~TouchFormElement20~TouchFormElement24":"31d6cfe0",TouchFormElement13:"43a52b89",TouchFormElement20:"b4553361",TouchFormElement24:"64a327fa",TouchFormElement14:"da239032",TouchFormElement15:"47f97257",TouchFormElement16:"2709cd01",TouchFormElement17:"c6fb955f",TouchFormElement18:"1b535cb5",TouchFormElement19:"b3178265",TouchFormElement2:"dc1e9092",TouchFormElement21:"071b9a40",TouchFormElement22:"98e1fd34",TouchFormElement23:"00d70ffe",TouchFormElement25:"e5b20d9e",TouchFormElement26:"31d6cfe0",TouchFormElement27:"36bb8006",TouchFormElement28:"b6cb73b5",TouchFormElement29:"fc81d1d0",TouchFormElement3:"68c4e3a9",TouchFormElement30:"5f2f8cdb",TouchFormElement31:"8ec363a4",TouchFormElement32:"313932fa",TouchFormElement33:"5f2f8cdb",TouchFormElement34:"6696e5bb",TouchFormElement35:"36bb8006",TouchFormElement36:"68fe5a33",TouchFormElement37:"551c3577",TouchFormElement38:"5f2f8cdb",TouchFormElement39:"607c038a",TouchFormElement4:"fb68ef23",TouchFormElement40:"cde8e45b","chunk-0fd5c64e":"ced5d908",TouchFormElement41:"8e931363",TouchFormElement42:"85238b69",TouchFormElement43:"b089d015",TouchFormElement44:"f755ec67",TouchFormElement45:"fd5166dd",TouchFormElement46:"626f334f",TouchFormElement47:"397325f8",TouchFormElement48:"efce02c3",TouchFormElement49:"e47d4f4d",TouchFormElement5:"5f2f8cdb",TouchFormElement50:"ba798de3",TouchFormElement51:"0138e36e",TouchFormElement52:"c3d78712",TouchFormElement53:"36bb8006",TouchFormElement54:"6138c20f",TouchFormElement6:"a9613508",TouchFormElement7:"9367cb76",TouchFormElement8:"31d6cfe0",TouchFormElement9:"145053b3","chunk-01a5b102":"31d6cfe0","chunk-02c995b5":"31d6cfe0","chunk-04673748":"b270ce5d","chunk-0490c4ce":"31d6cfe0","chunk-056c0c95":"b270ce5d","chunk-07d1414d":"b270ce5d","chunk-089a5b7a":"31d6cfe0","chunk-2d2288cf":"31d6cfe0","chunk-4183a6cc":"31d6cfe0","chunk-09155df3":"31d6cfe0","chunk-09162720":"31d6cfe0","chunk-097e0872":"31d6cfe0","chunk-09a4aadc":"31d6cfe0","chunk-0a797c6c":"b270ce5d","chunk-0adaa4ea":"c89a3600","chunk-0b6f0372":"c89a3600","chunk-0d411be7":"4568a9ee","chunk-0d67dc9b":"b2499045","chunk-0d68fded":"31d6cfe0","chunk-0d8a9648":"31d6cfe0","chunk-0e8d09cc":"31d6cfe0","chunk-0e93a01c":"31d6cfe0","chunk-0f8148d5":"b6e10e8e","chunk-102f4ba4":"31d6cfe0","chunk-106fab1a":"31d6cfe0","chunk-10fb4a0e":"31d6cfe0","chunk-117a9a3c":"b270ce5d","chunk-138b25ac":"09c3dee7","chunk-159e38ab":"31d6cfe0","chunk-15eccd71":"31d6cfe0","chunk-16767ceb":"31d6cfe0","chunk-169b062e":"31d6cfe0","chunk-171427f8":"54dcb621","chunk-17ba928e":"31d6cfe0","chunk-17dae17c":"1f82bf77","chunk-18c74980":"31d6cfe0","chunk-1a035943":"31d6cfe0","chunk-1aaa69a2":"31d6cfe0","chunk-1b36f5ab":"31d6cfe0","chunk-1dbc15a2":"31d6cfe0","chunk-1e09cff8":"c89a3600","chunk-1e242795":"31d6cfe0","chunk-1f3eb972":"6f957f7b","chunk-21649554":"31d6cfe0","chunk-21a76241":"31d6cfe0","chunk-22341d62":"31d6cfe0","chunk-22496fff":"31d6cfe0","chunk-23cae350":"31d6cfe0","chunk-252498a0":"c89a3600","chunk-25532402":"31d6cfe0","chunk-25d83ca8":"31d6cfe0","chunk-2759f0ea":"31d6cfe0","chunk-2799cd62":"31d6cfe0","chunk-2813dbbf":"6f957f7b","chunk-2a19e2a2":"31d6cfe0","chunk-2af68944":"b24d7c7c","chunk-2b71730d":"31d6cfe0","chunk-2d0a463b":"31d6cfe0","chunk-2d0a4885":"31d6cfe0","chunk-2d0b66fc":"31d6cfe0","chunk-2d0c073f":"31d6cfe0","chunk-2d0d43da":"31d6cfe0","chunk-2d0da04a":"31d6cfe0","chunk-2d0e5812":"31d6cfe0","chunk-2d213189":"31d6cfe0","chunk-2d216214":"31d6cfe0","chunk-2d216257":"31d6cfe0","chunk-2d217e6a":"31d6cfe0","chunk-2d218068":"31d6cfe0","chunk-2d21da73":"31d6cfe0","chunk-2d21db89":"31d6cfe0","chunk-2d22ca72":"31d6cfe0","chunk-2d22d5a8":"31d6cfe0","chunk-2d2304d2":"31d6cfe0","chunk-2d237b00":"31d6cfe0","chunk-2d7b0dba":"31d6cfe0","chunk-2e892804":"31d6cfe0","chunk-2fa7d8e1":"31d6cfe0","chunk-30dd9750":"31d6cfe0","chunk-31c5e014":"31d6cfe0","chunk-3235309e":"31d6cfe0","chunk-332ee734":"6f957f7b","chunk-3683df0e":"b270ce5d","chunk-373eba62":"31d6cfe0","chunk-374f5cda":"c89a3600","chunk-37c65eed":"31d6cfe0","chunk-37f2300e":"31d6cfe0","chunk-3818227b":"c89a3600","chunk-2d0deb82":"31d6cfe0","chunk-2d226ccc":"31d6cfe0","chunk-2d2297b9":"31d6cfe0","chunk-388cc6a8":"31d6cfe0","chunk-39ae0fda":"31d6cfe0","chunk-3a01580a":"c89a3600","chunk-3b53fd66":"c89a3600","chunk-3b8ea58b":"c89a3600","chunk-2d0cbe29":"31d6cfe0","chunk-2d0e8fe4":"31d6cfe0","chunk-3c19eeed":"31d6cfe0","chunk-10fc5096":"97defb9a","chunk-2d0e1fde":"31d6cfe0","chunk-3ed29de3":"31d6cfe0","chunk-3fba66f4":"31d6cfe0","chunk-3fd801f4":"b270ce5d","chunk-40a31bd6":"31d6cfe0","chunk-41c0f7a4":"31d6cfe0","chunk-4255b9ec":"31d6cfe0","chunk-428a91f2":"31d6cfe0","chunk-444bebfd":"31d6cfe0","chunk-449ba214":"31d6cfe0","chunk-45b19b4c":"31d6cfe0","chunk-4620dd96":"31d6cfe0","chunk-4620f548":"31d6cfe0","chunk-4621dc90":"31d6cfe0","chunk-46236a85":"31d6cfe0","chunk-46239ead":"31d6cfe0","chunk-4623e302":"31d6cfe0","chunk-462480cb":"31d6cfe0","chunk-462c869e":"31d6cfe0","chunk-4638c0b4":"31d6cfe0","chunk-4639117c":"31d6cfe0","chunk-46397160":"31d6cfe0","chunk-466beead":"31d6cfe0","chunk-4828ad16":"b270ce5d","chunk-482a9e72":"23db031a","chunk-2d0d9fe2":"31d6cfe0","chunk-36b25d50":"7bb8ee6c","chunk-37a3135d":"7bb8ee6c","chunk-3b454c76":"7bb8ee6c","chunk-6b96b9e2":"0a97d55e","chunk-6bc31a49":"7bb8ee6c","chunk-b1605bee":"7bb8ee6c","chunk-d9a86b86":"7bb8ee6c","chunk-485adc83":"31d6cfe0","chunk-48a533fb":"31d6cfe0","chunk-2d0bb1cf":"31d6cfe0","chunk-2d0ddf11":"31d6cfe0","chunk-49088940":"31d6cfe0","chunk-4c1657e5":"9604c264","chunk-4c40fe44":"c89a3600","chunk-4c4b4134":"c89a3600","chunk-4c7d4cdd":"daedacd7","chunk-4cacbac4":"15d5d283","chunk-4d7a31cb":"c89a3600","chunk-50220066":"c89a3600","chunk-502a4fea":"31d6cfe0","chunk-515474f6":"31d6cfe0","chunk-51a01568":"c89a3600","chunk-5209708a":"6f957f7b","chunk-52d6026b":"c89a3600","chunk-53dc0a89":"31d6cfe0","chunk-53dfc2ec":"31d6cfe0","chunk-541ea42d":"31d6cfe0","chunk-54bbd082":"31d6cfe0","chunk-54f23343":"31d6cfe0","chunk-558c7b2c":"31d6cfe0","chunk-56873b06":"31d6cfe0","chunk-59d4c87c":"31d6cfe0","chunk-5a8ac886":"31d6cfe0","chunk-5b707f09":"b270ce5d","chunk-5bfa378c":"8b4a4149","chunk-5cabb54e":"c89a3600","chunk-5d065fa7":"31d6cfe0","chunk-5d9db78a":"31d6cfe0","chunk-5de8a60e":"b270ce5d","chunk-5ea256d6":"6f957f7b","chunk-5edbc3a2":"31d6cfe0","chunk-603b7233":"31d6cfe0","chunk-6072d4d7":"31d6cfe0","chunk-61325c54":"6f957f7b","chunk-614857ee":"31d6cfe0","chunk-617c561a":"b270ce5d","chunk-621afa11":"31d6cfe0","chunk-6349c9bc":"31d6cfe0","chunk-654c8487":"31d6cfe0","chunk-6595c582":"6ccbc42c","chunk-69eb8776":"31d6cfe0","chunk-6b69d832":"c89a3600","chunk-6b71f156":"31d6cfe0","chunk-6c28dc14":"c89a3600","chunk-6d375f34":"31d6cfe0","chunk-6e2ef908":"c89a3600","chunk-2d0db1ed":"31d6cfe0","chunk-2d229c15":"31d6cfe0","chunk-6f5d748c":"c89a3600","chunk-70e95d33":"9c71c637","chunk-74c63811":"31d6cfe0","chunk-74d31e01":"31d6cfe0","chunk-753a9bc9":"31d6cfe0","chunk-7548ca2d":"31d6cfe0","chunk-75953fe1":"31d6cfe0","chunk-7709102e":"eeac45b7","chunk-03e87f92":"31d6cfe0","chunk-bfe33a92":"cbe9a55f","chunk-79f1dac7":"31d6cfe0","chunk-7b204f29":"31d6cfe0","chunk-7b8bfad3":"31d6cfe0","chunk-7e518abc":"6f957f7b","chunk-80b50b94":"c89a3600","chunk-2d0af6a8":"31d6cfe0","chunk-2d21d9f6":"31d6cfe0","chunk-2d2219e6":"31d6cfe0","chunk-7094e908":"31d6cfe0","chunk-e523fed2":"31d6cfe0","chunk-8109adf2":"31d6cfe0","chunk-8431eb1e":"1f8beb44","chunk-858cd918":"31d6cfe0","chunk-8916defa":"310fb37b","chunk-8bb7f81e":"31d6cfe0","chunk-8c241af4":"6f957f7b","chunk-8c9b74a6":"6f957f7b","chunk-8cf3d17c":"31d6cfe0","chunk-8f04b8cc":"31d6cfe0","chunk-2d0c8493":"31d6cfe0","chunk-2d0f028e":"31d6cfe0","chunk-8f3cd08c":"31d6cfe0","chunk-943f0b86":"b270ce5d","chunk-9a316cbe":"092e74d8","chunk-9c3ba9b2":"c89a3600","chunk-9e1fb024":"36390afd","chunk-a07f7ae6":"6f957f7b","chunk-a3f4f504":"6e65d29c","chunk-a5563906":"31d6cfe0","chunk-a6d3d518":"69b889d4","chunk-a7c378ee":"31d6cfe0","chunk-a9395c36":"31d6cfe0","chunk-b14c2520":"31d6cfe0","chunk-bc09139e":"31d6cfe0","chunk-c1897600":"c89a3600","chunk-c71d4ad6":"31d6cfe0","chunk-c8611e9e":"c89a3600","chunk-2d0aedb1":"31d6cfe0","chunk-2d0cc98a":"31d6cfe0","chunk-2d0e8fc6":"31d6cfe0","chunk-2d20ee25":"31d6cfe0","chunk-2d21f07a":"31d6cfe0","chunk-2d225875":"31d6cfe0","chunk-2d229b3d":"31d6cfe0","chunk-3526ee86":"31d6cfe0","chunk-46bff48c":"31d6cfe0","chunk-65365de6":"31d6cfe0","chunk-c8719bfe":"af4f97f0","chunk-cc6c9ed2":"c89a3600","chunk-cd588f90":"31d6cfe0","chunk-d0e8aa0a":"31d6cfe0","chunk-d8413eac":"31d6cfe0","chunk-d99d2ac4":"26c7943b","chunk-dc7f244e":"c89a3600","chunk-e264e05c":"31d6cfe0","chunk-eaa2b130":"31d6cfe0","chunk-ebc0ec76":"31d6cfe0","chunk-ed3d470c":"c89a3600","chunk-f6fc5a8a":"6f957f7b","chunk-2d0a3c5e":"31d6cfe0","chunk-2d0c49e8":"31d6cfe0","chunk-2d0ce780":"31d6cfe0","chunk-2d0f0ba4":"31d6cfe0","chunk-2d2133a2":"31d6cfe0","chunk-2d217e09":"31d6cfe0","chunk-2d22c0fe":"31d6cfe0","chunk-f79e9b48":"31d6cfe0","chunk-fccffe56":"31d6cfe0","polyfills-core-js":"31d6cfe0","polyfills-dom":"31d6cfe0","chunk-2d0b33e3":"31d6cfe0","chunk-2d0dd4c8":"31d6cfe0","chunk-2d0dd790":"31d6cfe0","chunk-2d2176ae":"31d6cfe0","chunk-2d21d0c2":"31d6cfe0","chunk-2d2376e6":"31d6cfe0","chunk-2d2297f7":"31d6cfe0","chunk-5f6b00a9":"f55e5447","chunk-2d0c4649":"31d6cfe0","chunk-1f0442db":"2c5e759a"}[e]+".css",i=s.p+a,c=document.getElementsByTagName("link"),r=0;r<c.length;r++){var l=c[r],d=l.getAttribute("data-href")||l.getAttribute("href");if("stylesheet"===l.rel&&(d===a||d===i))return t()}var u=document.getElementsByTagName("style");for(r=0;r<u.length;r++){l=u[r],d=l.getAttribute("data-href");if(d===a||d===i)return t()}var p=document.createElement("link");p.rel="stylesheet",p.type="text/css",p.onload=t,p.onerror=function(t){var a=t&&t.target&&t.target.src||i,c=new Error("Loading CSS chunk "+e+" failed.\n("+a+")");c.code="CSS_CHUNK_LOAD_FAILED",c.request=a,delete o[e],p.parentNode.removeChild(p),n(c)},p.href=i;var m=document.getElementsByTagName("head")[0];m.appendChild(p)})).then((function(){o[e]=0})));var a=i[e];if(0!==a)if(a)t.push(a[2]);else{var c=new Promise((function(t,n){a=i[e]=[t,n]}));t.push(a[2]=c);var l,d=document.createElement("script");d.charset="utf-8",d.timeout=120,s.nc&&d.setAttribute("nonce",s.nc),d.src=r(e);var u=new Error;l=function(t){d.onerror=d.onload=null,clearTimeout(p);var n=i[e];if(0!==n){if(n){var a=t&&("load"===t.type?"missing":t.type),o=t&&t.target&&t.target.src;u.message="Loading chunk "+e+" failed.\n("+a+": "+o+")",u.name="ChunkLoadError",u.type=a,u.request=o,n[1](u)}i[e]=void 0}};var p=setTimeout((function(){l({type:"timeout",target:d})}),12e4);d.onerror=d.onload=l,document.head.appendChild(d)}return Promise.all(t)},s.m=e,s.c=a,s.d=function(e,t,n){s.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},s.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},s.t=function(e,t){if(1&t&&(e=s(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(s.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)s.d(n,a,function(t){return e[t]}.bind(null,a));return n},s.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return s.d(t,"a",t),t},s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},s.p="/",s.oe=function(e){throw console.error(e),e};var l=window["webpackJsonp"]=window["webpackJsonp"]||[],d=l.push.bind(l);l.push=t,l=l.slice();for(var u=0;u<l.length;u++)t(l[u]);var p=d;c.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("cd49")},"0011":function(e,t,n){"use strict";n.d(t,"d",(function(){return i})),n.d(t,"c",(function(){return c})),n.d(t,"b",(function(){return r})),n.d(t,"a",(function(){return s})),n.d(t,"e",(function(){return l})),n.d(t,"f",(function(){return d})),n.d(t,"g",(function(){return u}));var a=n("5a0c"),o=n.n(a);function i(e){try{return!!(""+e).match(/(^\s*$|undefined|null)/i)}catch(t){return!0}}function c(e){return!!(""+e).match(/(^\s*$|Unknown|None|undefined|null)/i)}function r(e){const t=["th","st","nd","rd"],n=e%100;return t[(n-20)%10]||t[n]||t[0]}function s(e){return e<10?"0"+e:e}function l(e){return e?o()(e).format("DD/MMM/YYYY"):e}function d(e){let t=e;return"string"===typeof t&&""!=t&&(t=parseInt(t)),"number"===typeof t?t.toLocaleString():e}function u(e){return e.toLowerCase().replace(/(^\w|\s\w)/g,e=>e.toUpperCase())}},"04a0":function(e,t,n){},"0526":function(e,t,n){},"062e":function(e,t,n){},"0882":function(e,t,n){"use strict";n.d(t,"b",(function(){return j})),n.d(t,"a",(function(){return I}));n("14d9");var a,o=n("2706"),i=n("d95e"),c=n("2ef0"),r=n("9283"),s=n("1c74"),l=n("d867"),d=n("d6aa"),u=n("9ceb"),p=n("23e6"),m=n("6605"),h=n("7a23"),b=n("b446"),g=n("c731"),f=n("b5e4"),_=n("0011"),v=n("5a0c"),O=n.n(v),y=n("0ba8");(function(e){e["MULTI_FIELD_DATE"]="Multipage date fields",e["CALENDAR_FIELD"]="Calendar",e["SINGLE_DATE_INPUT_FIELD"]="Single page date"})(a||(a={}));const T=Object(h["reactive"])({});var j;(function(e){e["CAN_CACHE"]="hts_report_can_cache",e["PERIOD_INPUT_TYPE"]="hts_report_date_period_type"})(j||(j={}));const k=Object(h["reactive"])({canCacheReport:localStorage.getItem(j.CAN_CACHE)||!1,datePeriodInputType:localStorage.getItem(j.PERIOD_INPUT_TYPE)||a.MULTI_FIELD_DATE});function I(e="Report"){e in T||(T[e]={title:"",dateGenerated:"",other:{},appVersion:s["e"].getCoreVersion(),apiVersion:s["e"].getApiVersion(),rows:[],columns:[],intermediateColumns:[],fields:[],period:"",drill:[],data:[],prePopulateData:[],prefix:"",indicatorData:{},indicators:{},initialSort:null,formData:{},computedFormData:{},generationFunc:null});const t=Object(h["computed"])(()=>{var t;return null===(t=T[e])||void 0===t?void 0:t.indicators}),n=Object(h["computed"])(()=>{var t;return(null===(t=T[e])||void 0===t?void 0:t.rows)||[]}),v=Object(h["computed"])(()=>{var t;return(null===(t=T[e])||void 0===t?void 0:t.period)||""}),I=Object(h["computed"])(()=>{var t;return(null===(t=T[e])||void 0===t?void 0:t.fields)||[]}),E=Object(h["computed"])(()=>{var t;return(null===(t=T[e])||void 0===t?void 0:t.columns)||[]}),C=Object(h["computed"])(()=>{var t;return(null===(t=T[e])||void 0===t?void 0:t.title)||e}),D=Object(m["i"])(),N=Object(h["computed"])(()=>{var t;return(null===(t=T[e])||void 0===t?void 0:t.dateGenerated)||"-"});function w(){for(const t in T)T[t]={title:e,dateGenerated:"",other:{},appVersion:s["e"].getCoreVersion(),apiVersion:s["e"].getApiVersion(),rows:[],columns:[],intermediateColumns:[],fields:[],period:"",drill:[],data:[],initialSort:null,formData:{},computedFormData:{},generationFunc:null}}function S(){return`${T[e].prefix||""}-${e}-${s["e"].getLocationName()}-${v.value}`}function A(e){D.push("/patient/dashboard/"+e)}function P(t=[]){return[...t,[],[],["Date Created: "+T[e].dateGenerated],["Quarter: "+T[e].period],["HIS-Core Version: "+T[e].appVersion],["API Version: "+T[e].apiVersion],["Site UUID: "+s["e"].getSiteUUID()]]}function F(e){const t=open("","","width:1024px, height:768px"),n=document.getElementById(e.containerID);n&&t&&(t.document.write(`\n                <html>\n                <head>\n                    <title>${n.title}</title>\n                    <link rel="stylesheet" media="print"  href="${e.cssFile}"/>\n                </head>\n                <body>\n                    ${n.innerHTML}\n                </body>\n                </html>\n            `),setTimeout(()=>{t.print(),t.close()},3500))}async function x(e={}){(await l["ab"].create({component:d["a"],cssClass:"large-modal",componentProps:{title:e.title,columns:e.columns,rows:e.data,footerColor:"light",rowParser:t=>e.generator(t),paginated:!0,showFilters:!0,rowsPerPage:20,showReportStamp:!1,onFinish:()=>l["ab"].dismiss()}})).present()}function V(t,n){x({title:t,columns:[[u["a"].thTxt("National ID"),u["a"].thTxt("First name"),u["a"].thTxt("Last name"),u["a"].thTxt("Birthdate"),u["a"].thTxt("Action")]],data:n,generator:async t=>{const n=[];for(const o of t)if(T[e].drill[o])n.push(T[e].drill[o]);else try{const t=new p["a"](await p["a"].findByID(o));T[e].drill[o]=[u["a"].td(t.getNationalID()),u["a"].td(t.getGivenName()),u["a"].td(t.getFamilyName()),u["a"].tdDate(""+t.getBirthdate()),u["a"].tdBtn("Show",()=>{D.push({path:"/patient/dashboard/"+o}),l["ab"].dismiss({})})],n.push(T[e].drill[o])}catch(a){console.error(a)}return n}})}function R(e,t){return t.length?u["a"].tdLink(t.length,()=>V(e,t)):u["a"].td(0)}function B(e,t,n){return e.length?u["a"].tdLink(n||e.length,()=>x(t)):u["a"].td(0)}async function L(){const{generationFunc:t,data:n,formData:a,computedFormData:o,prePopulateData:i}=T[e];if("function"==typeof t){(await l["Y"].create({message:"Please wait..",backdropDismiss:!1})).present();try{T[e].drill=[],T[e].rows=[],T[e].data=[];const i=await t(n,a,o);T[e].dateGenerated=O()().format("DD/MM/YYYY hh:mm:ss"),Object(c["isEmpty"])(i)||(T[e].data=i),Object(c["isEmpty"])(T[e].data)||"function"===typeof T[e].initialSort&&(T[e].data=T[e].initialSort(T[e].data)),l["Y"].dismiss()}catch(r){Object(c["isEmpty"])(i)||(T[e].data=i),T[e].dateGenerated="_ERROR_",console.error(""+r),Object(f["e"])(""+r),l["Y"].dismiss()}}}function H(){Object(g["a"])([{id:"configuration_options",helpText:"Select setting to change",type:i["b"].TT_MULTIPLE_SELECT,isRequired:()=>!0,options:()=>[{label:"Date selection",value:"date_selection"},{label:"Report caching",value:"caching"}]},{id:"date_field_type",helpText:"Report period input type",type:i["b"].TT_SELECT,isRequired:()=>!0,defaultValue:()=>k.datePeriodInputType,condition:e=>e.configuration_options.some(e=>/date_selection/i.test(""+e.value)),options:()=>[{label:"Calendar",value:a.CALENDAR_FIELD},{label:"Single page date",value:a.SINGLE_DATE_INPUT_FIELD},{label:"Multipage date fields",value:a.MULTI_FIELD_DATE}]},{id:"report_memory",helpText:"Persist reports in Memory?",type:i["b"].TT_SELECT,isRequired:()=>!0,defaultValue:()=>k.canCacheReport,condition:e=>e.configuration_options.some(e=>/caching/i.test(""+e.value)),options:()=>[{label:"Yes",value:"Yes"},{label:"No",value:"No"}]}],{skipSummary:!0,onFinish:e=>{var t,n;null!==(t=e.report_memory)&&void 0!==t&&t.value&&(k.canCacheReport=e.report_memory.value,"No"===k.canCacheReport&&w()),null!==(n=e.date_field_type)&&void 0!==n&&n.value&&(k.datePeriodInputType=e.date_field_type.value),l["ab"].dismiss()}})}function M(t){Object(g["a"])([...Object(b["b"])({id:"start_date",helpText:"Start",required:!0,minDate:()=>(null===t||void 0===t?void 0:t.minDate)||"",maxDate:()=>(null===t||void 0===t?void 0:t.maxDate)||s["e"].getSessionDate(),condition:()=>t.isPeriodSelection&&k.datePeriodInputType===a.MULTI_FIELD_DATE,estimation:{allowUnknown:!1},computeValue:e=>e}),...Object(b["b"])({id:"end_date",helpText:"End",required:!0,minDate:(e,t)=>t.start_date,maxDate:()=>(null===t||void 0===t?void 0:t.maxDate)||s["e"].getSessionDate(),condition:()=>t.isPeriodSelection&&k.datePeriodInputType===a.MULTI_FIELD_DATE,estimation:{allowUnknown:!1},computeValue:e=>e}),{id:"alt_start_date",proxyID:"start_date",helpText:"Start Date",type:i["b"].TT_FULL_DATE,isRequired:()=>!0,validation:e=>{const n=t.maxDate||s["e"].getSessionDate();return t.minDate&&new Date(e.value)<new Date(t.minDate)?[`${Object(_["e"])(""+e.value)} is less than minimum date of ${Object(_["e"])(t.minDate)}`]:n&&new Date(e.value)>new Date(n)?[`${Object(_["e"])(""+e.value)} is greater than max date of ${Object(_["e"])(n)}`]:null},computedValue:e=>e.value,condition:()=>t.isPeriodSelection&&k.datePeriodInputType===a.SINGLE_DATE_INPUT_FIELD},{id:"alt_end_date",proxyID:"end_date",helpText:"End Date",type:i["b"].TT_FULL_DATE,isRequired:()=>!0,defaultValue:e=>e.start_date.value,validation:(e,n)=>{const a=t.maxDate||s["e"].getSessionDate();return n.start_date.value&&new Date(e.value)<new Date(n.start_date.value)?[`${Object(_["e"])(""+e.value)} is less than minimum date of ${Object(_["e"])(n.start_date.value)}`]:a&&new Date(e.value)>new Date(a)?[`${Object(_["e"])(""+e.value)} is greater than max date of ${Object(_["e"])(a)}`]:null},computedValue:e=>e.label,condition:()=>t.isPeriodSelection&&k.datePeriodInputType===a.SINGLE_DATE_INPUT_FIELD},{id:"calendar_start_date",proxyID:"start_date",helpText:"Start Date",type:i["b"].TT_DATE_PICKER,isRequired:()=>!0,computedValue:e=>e.value,condition:()=>t.isPeriodSelection&&k.datePeriodInputType===a.CALENDAR_FIELD,config:{minDate:()=>t.minDate||null,maxDate:()=>t.maxDate||s["e"].getSessionDate(),infoItems:(e,t)=>{var n;return[{label:"Start Date",value:Object(_["e"])(e)||"-"},{label:"End Date",value:Object(_["e"])(null===(n=t.end_date)||void 0===n?void 0:n.value)||"-"}]},persistInfoItems:!1}},{id:"calendar_end_date",proxyID:"end_date",helpText:"End Date",type:i["b"].TT_DATE_PICKER,defaultValue:e=>e.start_date.value,isRequired:()=>!0,computedValue:e=>e.value,condition:()=>t.isPeriodSelection&&k.datePeriodInputType===a.CALENDAR_FIELD,config:{minDate:e=>e.start_date.value,maxDate:()=>t.maxDate||s["e"].getSessionDate(),infoItems:(e,t)=>{var n;return[{label:"Start Date",value:Object(_["e"])(null===(n=t.start_date)||void 0===n?void 0:n.value)||"-"},{label:"End Date",value:Object(_["e"])(e)}]},persistInfoItems:!1}},{id:"year",helpText:"Select Year",type:i["b"].TT_NUMBER,isRequired:()=>!0,computedValue:e=>e.value,condition:()=>t.isMonthlySelection,validation:e=>{const t=Object(c["isPlainObject"])(e)?e.value:-1;return o["a"].validateSeries([()=>isNaN(parseInt(""+t))?["Invalid year"]:null,()=>o["a"].rangeOf(e,2e3,r["b"].getYear(s["e"].getSessionDate()))])}},{id:"month",helpText:"Select Month",type:i["b"].TT_SELECT,isRequired:()=>!0,computedValue:e=>e.value,condition:()=>t.isMonthlySelection,options:()=>[{label:"January",value:"01"},{label:"February",value:"02"},{label:"March",value:"03"},{label:"April",value:"04"},{label:"May",value:"05"},{label:"June",value:"06"},{label:"July",value:"07"},{label:"August",value:"08"},{label:"September",value:"09"},{label:"October",value:"10"},{label:"November",value:"11"},{label:"December",value:"12"}]},{id:"start_n_end_date_period",proxyID:"report_period",helpText:"report_period",type:i["b"].TT_HIDDEN,condition:(e,t)=>t.start_date&&t.end_date,computedValue:(e,t,n)=>`${Object(_["e"])(n.start_date)}-${Object(_["e"])(n.end_date)}`}],{skipSummary:!0,formLabel:e,onFinish:(n,a)=>{l["ab"].dismiss(),T[e].dateGenerated="-",T[e].formData=n,T[e].computedFormData=a,T[e].generationFunc=t.generate,T[e].period=a.report_period||"N/A",T[e].initialSort=t.initialSort||null,T[e].prefix=(null===t||void 0===t?void 0:t.prefix)||"",L()},onCancel:()=>T[e].period?null:D.push("/")})}return Object(h["onUnmounted"])(()=>{"No"===k.canCacheReport&&T[e]&&delete T[e]}),Object(h["watch"])(()=>k.datePeriodInputType,e=>{localStorage.setItem(j.PERIOD_INPUT_TYPE,e)}),Object(h["watch"])(()=>k.canCacheReport,e=>{localStorage.setItem(j.CAN_CACHE,e)}),y["b"].on(y["a"].LOGOUT,()=>w()),{drill:R,drillCustom:B,setReportPreferences:H,updateReportData:L,defaultDrillDown:V,showPrintWindow:F,setReportPeriod:M,gotoPatientDashboard:A,reportDescription:S,appendReportStamp:P,dateGenerated:N,ReportPreferences:k,reportData:T[e],indicators:t,rows:n,period:v,fields:I,columns:E,title:C}}},"0a79":function(e,t,n){"use strict";var a=n("7a23");function o(e,t,n,o,i,c){return Object(a["openBlock"])(),Object(a["createElementBlock"])("div",{id:"view-port",class:Object(a["normalizeClass"])(e.showFull?"":"half")},[Object(a["renderSlot"])(e.$slots,"default",{},void 0,!0)],2)}var i=Object(a["defineComponent"])({name:"ViewPort",props:{showFull:{type:Boolean,default:()=>!0}}}),c=(n("a4d3"),n("d959")),r=n.n(c);const s=r()(i,[["render",o],["__scopeId","data-v-7c293cad"]]);t["a"]=s},"0ba8":function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var a,o=n("c0e2");t["b"]=new o["TinyEmitter"],function(e){e["SHOW_MODAL"]="show-modal",e["LOGOUT"]="logout"}(a||(a={}))},"0cb1":function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var a=n("cc6f");class o extends a["a"]{constructor(e,t){super(e,57,t)}}},"0f25":function(e,t,n){"use strict";var a=n("7a23");function o(e,t,n,o,i,c){const r=Object(a["resolveComponent"])("ion-button"),s=Object(a["resolveComponent"])("ion-toolbar"),l=Object(a["resolveComponent"])("ion-footer");return Object(a["openBlock"])(),Object(a["createBlock"])(l,null,{default:Object(a["withCtx"])(()=>[Object(a["createVNode"])(s,{color:e.color},{default:Object(a["withCtx"])(()=>[(Object(a["openBlock"])(!0),Object(a["createElementBlock"])(a["Fragment"],null,Object(a["renderList"])(e.footerBtns,(e,t)=>Object(a["withDirectives"])((Object(a["openBlock"])(),Object(a["createBlock"])(r,{key:t,slot:e.slot,onClick:t=>e.onClick(e),color:e.color,class:Object(a["normalizeClass"])(e.styleClass),size:e.size},{default:Object(a["withCtx"])(()=>[Object(a["createTextVNode"])(Object(a["toDisplayString"])(e.name),1)]),_:2},1032,["slot","onClick","color","class","size"])),[[a["vShow"],e.visible]])),128))]),_:1},8,["color"])]),_:1})}var i=n("d867"),c=Object(a["defineComponent"])({name:"HisNavFooter",data:()=>({footerBtns:[]}),created(){this.$emit("onFooterInstance",this)},props:{color:{type:String,default:"dark"},state:{type:Object},btns:{type:Object,required:!0}},components:{IonButton:i["d"],IonFooter:i["o"],IonToolbar:i["T"]},watch:{state:{handler(e){e&&(this.footerBtns=this.footerBtns.map(t=>(t.visibleOnStateChange&&(t.visible=t.visibleOnStateChange(e)),t)))},deep:!0,immediate:!0},btns:{handler(e){e&&(this.footerBtns=[...e])},deep:!0,immediate:!0}}}),r=n("d959"),s=n.n(r);const l=s()(c,[["render",o]]);t["a"]=l},"0fa1":function(e,t,n){"use strict";n.d(t,"a",(function(){return y})),n.d(t,"c",(function(){return j})),n.d(t,"b",(function(){return k})),n.d(t,"d",(function(){return I}));n("14d9");var a=n("7a23");const o=["onClick"];function i(e,t,n,i,c,r){const s=Object(a["resolveComponent"])("ion-title"),l=Object(a["resolveComponent"])("ion-toolbar"),d=Object(a["resolveComponent"])("ion-header"),u=Object(a["resolveComponent"])("ion-checkbox"),p=Object(a["resolveComponent"])("ion-col"),m=Object(a["resolveComponent"])("ion-row"),h=Object(a["resolveComponent"])("multi-column-view"),b=Object(a["resolveComponent"])("ion-content"),g=Object(a["resolveComponent"])("ion-button"),f=Object(a["resolveComponent"])("ion-footer");return Object(a["openBlock"])(),Object(a["createElementBlock"])(a["Fragment"],null,[Object(a["createVNode"])(d,null,{default:Object(a["withCtx"])(()=>[Object(a["createVNode"])(l,null,{default:Object(a["withCtx"])(()=>[Object(a["createVNode"])(s,null,{default:Object(a["withCtx"])(()=>[Object(a["createTextVNode"])("Select activities")]),_:1})]),_:1})]),_:1}),Object(a["createVNode"])(b,null,{default:Object(a["withCtx"])(()=>[Object(a["createVNode"])(h,{items:e.appActivities,numberOfColumns:2},{default:Object(a["withCtx"])(({entries:e})=>[(Object(a["openBlock"])(!0),Object(a["createElementBlock"])(a["Fragment"],null,Object(a["renderList"])(e,(e,t)=>(Object(a["openBlock"])(),Object(a["createElementBlock"])("div",{class:"his-card clickable",key:t,onClick:t=>e.selected=!e.selected},[Object(a["createVNode"])(m,null,{default:Object(a["withCtx"])(()=>[Object(a["createVNode"])(p,{size:"1"},{default:Object(a["withCtx"])(()=>[Object(a["createVNode"])(u,{modelValue:e.selected,"onUpdate:modelValue":t=>e.selected=t,onClick:t=>e.selected=!e.selected},null,8,["modelValue","onUpdate:modelValue","onClick"])]),_:2},1024),Object(a["createVNode"])(p,{class:"ion-text-center his-md-text"},{default:Object(a["withCtx"])(()=>[Object(a["createTextVNode"])(Object(a["toDisplayString"])(e.value.toUpperCase()),1)]),_:2},1024)]),_:2},1024)],8,o))),128))]),_:1},8,["items"])]),_:1}),Object(a["createVNode"])(f,null,{default:Object(a["withCtx"])(()=>[Object(a["createVNode"])(l,null,{default:Object(a["withCtx"])(()=>[Object(a["createVNode"])(g,{onClick:e.postActivities,color:"success",disabled:e.appActivities.length>1&&0==e.selectedActivities.length,size:"large",style:{float:"right"}},{default:Object(a["withCtx"])(()=>[Object(a["createTextVNode"])("finish")]),_:1},8,["onClick","disabled"])]),_:1})]),_:1})],64)}var c=n("d867"),r=n("b5e4"),s=n("2ef0"),l=n("92c1"),d=n("85d6"),u=Object(a["defineComponent"])({name:"Modal",props:{activities:{type:Object,required:!0},property:{type:String,default:"activities"}},watch:{activities:{handler(e){e&&(this.appActivities=[...e],this.getActivities())},immediate:!0}},methods:{async getActivities(){const{getUserProp:e}=Object(d["a"])(),t=await e(this.property);Object(s["isEmpty"])(t)?Object(r["e"])("Activities not found"):this.appActivities=this.appActivities.map(e=>(t.search(e.value)>=0&&(e.selected=!0),e))},async postActivities(){const{setUserProp:e}=Object(d["a"])(),t=await e(this.property,this.selectedActivities||"None");t?c["ab"].dismiss():Object(r["e"])("Could not save activities")}},computed:{selectedActivities(){return this.appActivities.filter(e=>1==e.selected).map(e=>e.value).join(",")}},data(){return{content:"Content",appActivities:[]}},components:{IonButton:c["d"],IonContent:c["n"],IonHeader:c["q"],IonTitle:c["S"],IonToolbar:c["T"],IonCheckbox:c["k"],MultiColumnView:l["a"]}}),p=(n("db7c"),n("d959")),m=n.n(p);const h=m()(u,[["render",i],["__scopeId","data-v-02a172c7"]]);var b,g=h,f=n("50e7"),_=n("3e53"),v=n("afbc"),O=n("b432");function y(e,t){sessionStorage.getItem(b.NextTask)||sessionStorage.setItem(b.NextTask,JSON.stringify({patientID:e,tasks:[]}));const n=JSON.parse(sessionStorage.getItem(b.NextTask));e===n.patientID?n.tasks.push(t):(n.patientID=e,n.tasks=[t]),sessionStorage.setItem(b.NextTask,JSON.stringify(n))}function T(e,t,n){const a=sessionStorage.getItem(b.NextTask);if(!a)return-1;const o=JSON.parse(a);if(e!=o.patientID)return-1;let i="",c=-1;return o.tasks.forEach((e,t)=>{e.from===n.name&&(i=e.to,c=t)}),i?(o.tasks.splice(c,1),sessionStorage.setItem(b.NextTask,JSON.stringify(o)),t.push(i),1):-1}function j(e,t){const n=_["a"].getActiveApp(),a=t=>new RegExp(""+t,"i").test(e);if(!n)return;const o=n.primaryPatientActivites.filter(e=>a(e.workflowID)||a(e.name)||a(e.id))[0]||{};return"function"===typeof o.action?o.action({patientID:t},v["a"]):"string"===typeof o.url?v["a"].push(o.url):"string"===typeof o.patientUrl?v["a"].push(`${o.patientUrl}/${t}`):void v["a"].push({name:o.id,params:{patient_id:t}})}async function k(e,t,n={}){try{if(O["b"].value){const n=Object(O["a"])().nextPatientWorkflowActivity(e);return n&&n.patientUrl?t.push(`${n.patientUrl}/${e}`):t.push("/patient/dashboard/"+e)}if(!Object(s["isEmpty"])(n)){const a=T(e,t,n);if(-1!=a)return}return j((await f["a"].nextTask(e)).name,e)}catch(a){console.warn(a)}t.push("/patient/dashboard/"+e)}async function I(e,t="activities"){const n=e.filter(e=>"boolean"===typeof e.availableOnActivitySelection&&e.availableOnActivitySelection||"boolean"!==typeof e.availableOnActivitySelection).map(e=>({value:e.workflowID||e.name,selected:!1})),a=await c["ab"].create({component:g,cssClass:"large-modal",backdropDismiss:!1,componentProps:{activities:n,property:t}});a.present(),await a.onDidDismiss()}(function(e){e["NextTask"]="next-task"})(b||(b={}))},"10be":function(e,t,n){"use strict";var a=n("7a23");const o={class:"keypad"};function i(e,t,n,i,c,r){const s=Object(a["resolveComponent"])("ion-input"),l=Object(a["resolveComponent"])("ion-checkbox"),d=Object(a["resolveComponent"])("ion-label"),u=Object(a["resolveComponent"])("ion-item"),p=Object(a["resolveComponent"])("ion-chip"),m=Object(a["resolveComponent"])("center"),h=Object(a["resolveComponent"])("base-keyboard"),b=Object(a["resolveComponent"])("ion-content");return Object(a["openBlock"])(),Object(a["createBlock"])(b,null,{default:Object(a["withCtx"])(()=>[Object(a["createElementVNode"])("div",o,[Object(a["createVNode"])(s,{value:e.value,disabled:!0,class:"keypad-input"},null,8,["value"]),Object(a["createVNode"])(m,null,{default:Object(a["withCtx"])(()=>[e.toggleButton?(Object(a["openBlock"])(),Object(a["createBlock"])(u,{key:0,lines:"none",class:"his-sm-text"},{default:Object(a["withCtx"])(()=>[Object(a["createVNode"])(l,{slot:"start",modelValue:e.toggle,"onUpdate:modelValue":t[0]||(t[0]=t=>e.toggle=t)},null,8,["modelValue"]),Object(a["createVNode"])(d,null,{default:Object(a["withCtx"])(()=>[Object(a["createTextVNode"])(Object(a["toDisplayString"])(e.toggleButton),1)]),_:1})]),_:1})):Object(a["createCommentVNode"])("",!0),e.toggleButton?Object(a["createCommentVNode"])("",!0):(Object(a["openBlock"])(),Object(a["createBlock"])(p,{key:1,class:"his-sm-text"},{default:Object(a["withCtx"])(()=>[Object(a["createTextVNode"])(Object(a["toDisplayString"])(e.title||"keypad"),1)]),_:1}))]),_:1}),Object(a["createVNode"])(h,{btnSize:"96px",layout:e.keypad,onKeyPress:e.keypress},null,8,["layout","onKeyPress"])])]),_:1})}var c=n("c924"),r=n("3800"),s=n("2345"),l=n("fe70"),d=n("d867"),u=Object(a["defineComponent"])({components:{IonChip:d["l"],BaseKeyboard:c["a"],IonItem:d["w"],IonLabel:d["x"],IonCheckbox:d["k"]},props:{title:{type:String},toggleButton:{type:String},preset:{type:String},onKeyPress:{type:Function,required:!0},noFloat:{type:Boolean},customKeyboard:{type:Array},strictNumbers:{type:Boolean,default:!1}},data:()=>({value:"0",toggle:!1,keypad:r["d"]}),watch:{customKeyboard:{handler(e){Array.isArray(e)&&(this.keypad=e)},immediate:!0},preset:{handler(e){e&&(this.value=e.toString())},immediate:!0},toggle:{handler(e){this.onKeyPress(parseInt(this.value),e)}}},methods:{async keypress(e){if(e.match(/done/i))await l["j"].dismiss(this.value);else if(this.strictNumbers){if(e.includes(".")&&this.value.includes("."))return;e.includes(".")||"0"!==this.value||(this.value=""),this.value=Object(s["a"])(e,this.value),this.value||(this.value="0"),""+parseInt(this.value)===this.value||"boolean"===typeof this.noFloat&&this.noFloat?this.onKeyPress(parseInt(this.value),this.toggle):this.onKeyPress(this.value,this.toggle)}else this.value=Object(s["a"])(e,this.value),this.onKeyPress(this.value,this.toggle)}}}),p=(n("5383"),n("d959")),m=n.n(p);const h=m()(u,[["render",i],["__scopeId","data-v-468034ce"]]);t["a"]=h},"133d":function(e,t,n){"use strict";n("ff2d")},"156d":function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var a,o=n("0ba8");(function(e){e["BEFORE_API_REQUEST"]="before_api_request",e["AFTER_API_REQUEST"]="after_api_request",e["ON_API_CRASH"]="un_reachable_api"})(a||(a={}));const i=(()=>{async function e(){const e=await fetch("/config.json");if(!e.ok)throw"Unable to retrieve configuration file/ Invalid config.json";try{const{apiURL:t,apiPort:n,apiProtocol:a,appConf:o,apps:i,thirdpartyApps:c,platformProfiles:r}=await e.json();return sessionStorage.setItem("apiURL",t),sessionStorage.setItem("apiPort",n),sessionStorage.setItem("apiProtocol",a),sessionStorage.setItem("appConf",JSON.stringify(o)),sessionStorage.setItem("apps",JSON.stringify(i)),sessionStorage.setItem("thirdpartyApps",JSON.stringify(c)),sessionStorage.setItem("platformProfiles",JSON.stringify(r)),{host:t,port:n,protocol:a,thirdpartyapps:c}}catch(t){throw console.error(t),'API Configuration file "/config.json" has errors. Please check console log for more details'}}function t(){const e=localStorage.apiURL,t=localStorage.apiPort,n=localStorage.apiProtocol,a=localStorage.thirdpartyApps;if(e&&t&&n)return{host:e,port:t,protocol:n,thirdpartyapps:a}}function n(){const e=sessionStorage.apiURL,t=sessionStorage.apiPort,n=sessionStorage.apiProtocol,a=sessionStorage.thirdpartyApps;if(e&&t&&n)return{host:e,port:t,protocol:n,thirdpartyapps:a}}function i(){const a=t(),o=n();return localStorage.useLocalStorage&&a?a:o||e()}async function c(e){const t=await i();return`${t.protocol}://${t.host}:${t.port}/api/v1/${e}`}function r(){return{Authorization:sessionStorage.apiKey,"Content-Type":"application/json"}}function s(e,t,n){localStorage.setItem("useLocalStorage","true"),localStorage.setItem("apiURL",t),localStorage.setItem("apiPort",n),localStorage.setItem("apiProtocol",e)}function l(e){e.forEach(t=>{e.includes(t)&&localStorage.removeItem(t)})}async function d(e,t){t={...t,mode:"cors"},"headers"in t||(t={...t,headers:r()});const n=await c(e);try{o["b"].emit(a.BEFORE_API_REQUEST,e);const i=await fetch(n,t);return o["b"].emit(a.AFTER_API_REQUEST,i),i}catch(i){console.error(i),(""+i).match(/NetworkError|Failed to fetch/i)?o["b"].emit(a.ON_API_CRASH,i):o["b"].emit(a.AFTER_API_REQUEST,{})}}const u=e=>d(e,{method:"GET"}),p=(e,t)=>d(e,{method:"POST",body:JSON.stringify(t)}),m=(e,t)=>d(e,{method:"DELETE",body:JSON.stringify(t)}),h=(e,t)=>d(e,{method:"PUT",body:JSON.stringify(t)}),b=()=>u("_health");return{get:u,post:p,put:h,remove:m,getConfig:i,setLocalStorage:s,removeOnly:l,expandPath:c,healthCheck:b,getFileConfig:e}})();t["b"]=i},1718:function(e,t,n){"use strict";function a(e){return"/assets/images/"+e}n.d(t,"a",(function(){return a}))},1799:function(e,t,n){"use strict";var a=n("7a23");const o={class:"pagination"},i={class:"btn-group"};function c(e,t,n,c,r,s){const l=Object(a["resolveComponent"])("ion-button"),d=Object(a["resolveComponent"])("ion-icon");return Object(a["openBlock"])(),Object(a["createElementBlock"])("div",o,[Object(a["createElementVNode"])("div",i,[Object(a["createVNode"])(l,{color:"light",onClick:e.setFirstPage,disabled:e.isInFirstPage},{default:Object(a["withCtx"])(()=>[Object(a["createTextVNode"])(" First ")]),_:1},8,["onClick","disabled"]),Object(a["createVNode"])(l,{color:"light",onClick:e.prevPage},{default:Object(a["withCtx"])(()=>[Object(a["createVNode"])(d,{icon:e.caretBack},null,8,["icon"])]),_:1},8,["onClick"]),(Object(a["openBlock"])(!0),Object(a["createElementBlock"])(a["Fragment"],null,Object(a["renderList"])(e.pages,e=>(Object(a["openBlock"])(),Object(a["createBlock"])(l,{onClick:t=>e.show(),color:e.isActive?"primary":"light",key:e.index},{default:Object(a["withCtx"])(()=>[Object(a["createTextVNode"])(Object(a["toDisplayString"])(e.name),1)]),_:2},1032,["onClick","color"]))),128)),Object(a["createVNode"])(l,{color:"light",onClick:e.nextPage},{default:Object(a["withCtx"])(()=>[Object(a["createVNode"])(d,{icon:e.caretForward},null,8,["icon"])]),_:1},8,["onClick"]),Object(a["createVNode"])(l,{color:"light",onClick:e.setLastPage,disabled:e.isInLastPage},{default:Object(a["withCtx"])(()=>[Object(a["createTextVNode"])(" Last ")]),_:1},8,["onClick","disabled"])]),Object(a["createElementVNode"])("h6",null,"Page "+Object(a["toDisplayString"])(e.currentPage+1)+" of "+Object(a["toDisplayString"])(e.totalPages),1)])}n("14d9");var r=n("ff79"),s=n("d867"),l=Object(a["defineComponent"])({components:{IonIcon:s["r"],IonButton:s["d"]},props:{maxVisibleButtons:{type:Number,required:!1,default:3},totalPages:{type:Number,required:!0}},emits:["onChangePage"],setup(e,{emit:t}){const n=Object(a["ref"])(0),o=Object(a["computed"])(()=>0===n.value),i=Object(a["computed"])(()=>n.value===e.totalPages),c=Object(a["computed"])(()=>0===n.value?0:n.value===e.totalPages?e.totalPages-e.maxVisibleButtons:n.value-1),s=e=>t("onChangePage",e),l=Object(a["computed"])(()=>{const t=[];for(let a=c.value;a<=Math.min(c.value+e.maxVisibleButtons-1,e.totalPages-1);a++)t.push({index:a,name:a+1,show:()=>n.value=a,isActive:a===n.value});return t});Object(a["watch"])(e,({totalPages:e})=>{"number"===typeof e&&(n.value=0)},{immediate:!0,deep:!0}),Object(a["watch"])(n,e=>s(e));const d=()=>n.value=0,u=()=>n.value=e.totalPages-1,p=()=>{n.value>0&&(n.value-=1)},m=()=>{n.value+1<e.totalPages&&(n.value+=1)};return{currentPage:n,caretBack:r["j"],caretForward:r["l"],startPage:c,pages:l,isInFirstPage:o,isInLastPage:i,nextPage:m,prevPage:p,setPage:s,setFirstPage:d,setLastPage:u}}}),d=(n("f099"),n("d959")),u=n.n(d);const p=u()(l,[["render",c],["__scopeId","data-v-04a5a269"]]);t["a"]=p},1985:function(e,t,n){},"1a5e":function(e,t,n){},"1b47":function(e,t,n){"use strict";var a=n("7a23");function o(e,t,n,o,i,c){const r=Object(a["resolveComponent"])("action-header"),s=Object(a["resolveComponent"])("ion-radio"),l=Object(a["resolveComponent"])("ion-label"),d=Object(a["resolveComponent"])("ion-item"),u=Object(a["resolveComponent"])("ion-radio-group"),p=Object(a["resolveComponent"])("ion-list"),m=Object(a["resolveComponent"])("ion-content"),h=Object(a["resolveComponent"])("action-footer");return Object(a["openBlock"])(),Object(a["createElementBlock"])(a["Fragment"],null,[Object(a["createVNode"])(r,{title:e.title,subtitle:e.subtitle,color:e.color},null,8,["title","subtitle","color"]),Object(a["createVNode"])(m,{class:"ion-text-center"},{default:Object(a["withCtx"])(()=>[Object(a["createVNode"])(p,null,{default:Object(a["withCtx"])(()=>[Object(a["createVNode"])(u,{value:e.activeLabel},{default:Object(a["withCtx"])(()=>[(Object(a["openBlock"])(!0),Object(a["createElementBlock"])(a["Fragment"],null,Object(a["renderList"])(e.list,(t,n)=>(Object(a["openBlock"])(),Object(a["createBlock"])(d,{class:"his-md-text",onClick:n=>e.onclick(t),key:n},{default:Object(a["withCtx"])(()=>[Object(a["createVNode"])(s,{slot:"start",value:t},null,8,["value"]),Object(a["createVNode"])(l,null,{default:Object(a["withCtx"])(()=>[Object(a["createTextVNode"])(Object(a["toDisplayString"])(t),1)]),_:2},1024)]),_:2},1032,["onClick"]))),128))]),_:1},8,["value"])]),_:1})]),_:1}),Object(a["createVNode"])(h,{buttons:e.buttons},null,8,["buttons"])],64)}var i=n("8efc"),c=n("d867"),r=n("b5e4"),s=Object(a["defineComponent"])({components:{IonList:c["y"],IonItem:c["w"],IonContent:c["n"],IonRadio:c["F"],IonRadioGroup:c["G"]},mixins:[i["a"]],data:()=>({activeLabel:""}),props:{closeOnSelect:{type:Boolean,default:!1},preset:{type:String,default:""},list:{type:Object,required:!0}},created(){this.activeLabel=this.preset},methods:{onclick(e){this.activeLabel=e,this.closeOnSelect&&c["ab"].dismiss({selection:this.activeLabel})}},computed:{buttons(){return this.actionButtons.map(e=>({...e,onClick:async()=>e.role&&e.role.match(/default/i)?c["ab"].dismiss({action:e.name}):e.role&&e.role.match(/action/i)&&!this.activeLabel?Object(r["e"])("Please select one of the options"):void await c["ab"].dismiss({selection:this.activeLabel,action:e.name})}))}}}),l=(n("917f"),n("d959")),d=n.n(l);const u=d()(s,[["render",o],["__scopeId","data-v-559ff678"]]);t["a"]=u},"1bb3":function(e,t,n){"use strict";n("a78a")},"1c74":function(e,t,n){"use strict";n.d(t,"b",(function(){return u})),n.d(t,"d",(function(){return p})),n.d(t,"c",(function(){return m})),n.d(t,"a",(function(){return h})),n.d(t,"e",(function(){return f}));var a=n("ade3"),o=(n("d9e2"),n("14d9"),n("156d")),i=n("bef6"),c=n("3e53"),r=n("5d6c"),s=n("89b4"),l=n("f768"),d=n("2ef0");class u extends Error{constructor(e,t){super("ENTITY Error: "+e),Object(a["a"])(this,"entity",void 0),this.entity=t}}class p extends Error{constructor(e,t){super(e),Object(a["a"])(this,"errors",void 0),this.errors=t}}class m extends Error{constructor(e){super("RECORD NOT FOUND: "+e)}}class h extends Error{constructor(e,t){super(e),Object(a["a"])(this,"errors",void 0),this.errors=t}}class b extends Error{constructor(e){super("API SERVICE_ERROR: "+e)}}class g extends Error{constructor(e){super("API ERROR: "+e)}}class f{static ajxGet(e,t={}){return o["b"].get(`${e}?${i["a"].parameterizeObjToString(t)}`)}static async getText(e){const t=await o["b"].get(e);if(t&&t.ok)return null===t||void 0===t?void 0:t.text()}static getJsonSWR(e,t={}){const n=`${e}?${i["a"].parameterizeObjToString(t)}`,{data:a,error:o}=Object(r["a"])(n,e=>this.getJson(e));return a}static async getJson(e,t={}){const n=`${e}?${i["a"].parameterizeObjToString(t)}`;return this.jsonResponseHandler(o["b"].get(n))}static async postJson(e,t){return this.jsonResponseHandler(o["b"].post(e,t))}static putJson(e,t){return this.jsonResponseHandler(o["b"].put(e,t))}static async void(e,t){return this.jsonResponseHandler(o["b"].remove(e,t))}static async getThirdpartyApps(){return JSON.parse((await o["b"].getConfig()).thirdpartyapps)}static async jsonResponseHandler(e){const t=await e;if(t){if([200,201].includes(t.status))return null===t||void 0===t?void 0:t.json();if(400===t.status){const{errors:e}=await(null===t||void 0===t?void 0:t.json());throw new h(t.statusText,e)}if(404===t.status){const{errors:e}=await(null===t||void 0===t?void 0:t.json());throw new m(e)}if(422===t.status){const{errors:e,entity:n}=await(null===t||void 0===t?void 0:t.json());throw new u(e,n)}if(502===t.status){const{errors:e}=await(null===t||void 0===t?void 0:t.json());throw new b(e||"Getway Error")}if(409===t.status){const{errors:e}=await(null===t||void 0===t?void 0:t.json());throw new p(t.statusText,e)}if(500===t.status)throw new g("An internal server errror has occured")}}static async getApiDate(){const e=await this.getJson("current_time");if(e)return e.date}static getApiVersion(){return sessionStorage.getItem("APIVersion")||"-"}static getActiveApp(){return c["a"].getActiveApp()||{}}static getUserID(){const e=sessionStorage.getItem("userID");return e?parseInt(e):null}static getUserLocation(){return sessionStorage.getItem("userLocation")}static getLocationName(){return sessionStorage.getItem("locationName")}static getSessionDate(){return sessionStorage.getItem("sessionDate")||""}static getCachedApiDate(){return sessionStorage.getItem("apiDate")}static async setSessionDate(e){const t=await this.getApiDate();if(t)return sessionStorage.setItem("apiDate",t),void sessionStorage.setItem("sessionDate",e);throw"Unable to set api date"}static async resetSessionDate(){const e=await this.getApiDate();if(e)return sessionStorage.removeItem("apiDate"),void sessionStorage.setItem("sessionDate",e);throw"Unable to reset session date"}static isBDE(){const e=sessionStorage.getItem("apiDate"),t=sessionStorage.getItem("sessionDate");return e&&e!=t}static getSiteUUID(){return sessionStorage.siteUUID||""}static getProgramName(){const e=this.getActiveApp();return"applicationName"in e?e.applicationName:""}static getSuspendedProgram(){return sessionStorage.getItem("suspendedApp")||""}static getProgramID(){const e=this.getActiveApp();return"programID"in e?e.programID:0}static getUserRoles(){const e=sessionStorage.getItem("userRoles");return e?JSON.parse(e):[]}static getUserName(){return sessionStorage.username}static getCoreVersion(){return localStorage.getItem(s["b"].CORE_VERSION)||"-"}static getAppVersion(){return localStorage.getItem(s["b"].CORE_VERSION)||"-"}static getFullVersion(){return`${this.getCoreVersion()} / ${this.getApiVersion()}`}static getAvailableApps(){const e=JSON.parse(sessionStorage.getItem("userPrograms")||"[]").map(e=>e["program_id"]),t=[];for(const n of JSON.parse(sessionStorage.getItem("apps")||"[]")){const a=Object(d["find"])(l["b"],{applicationName:n.name})||{},o=Object(d["isEmpty"])(e)||e.includes(a.programID);n.available&&!Object(d["isEmpty"])(a)&&t.push({...a,hasPriviledge:o})}return t}}Object(a["a"])(f,"delay",e=>new Promise(t=>setTimeout(t,e)))},"1cac":function(e,t,n){"use strict";n("1985")},"1eb2":function(e,t,n){},"1f9a":function(e,t,n){"use strict";n.d(t,"a",(function(){return l}));var a=n("ade3"),o=n("1c74"),i=n("ad60"),c=n("d10e");class r extends o["e"]{constructor(){super()}static create(e){return super.postJson("/person_attributes",e)}}var s=n("4db7");class l extends o["e"]{constructor(){super(),Object(a["a"])(this,"personId",void 0),this.personId=0}getPersonID(){return this.personId}setPersonID(e){this.personId=e}async registerPatient(e,t){await this.createPerson(e),await this.createPersonAttributes(t);const n=await this.createPatient();return await this.printPatient(),n}async registerBasicPatient(e){return await this.createPerson(e),this.createPatient()}async registerGuardian(e){return this.createPerson(e)}updatePerson(e){return new c["a"](e).update(this.personId)}async createPerson(e){const t=await new c["a"](e).create();return this.personId=t.person_id,t}createPatient(){return i["a"].createPatient(this.personId)}async createPersonAttributes(e){for(const t in e)await r.create({...e[t],person_id:this.personId})}printPatient(){return new s["a"](this.personId).printNidLbl()}}},"201d":function(e,t,n){"use strict";n("744a")},2345:function(e,t,n){"use strict";function a(e,t,n){let a=t;if(e.match(/enter/i))return a+"\r\n";if(e.match(/clear/i))return"";if(a=e.match(/delete|del/i)?a.match(/unknown|unk/i)||a.match(/n\/a/i)?"":a.substring(0,a.length-1):e.match(/space/i)?t+" ":e.match(/unknown|unk/i)?"Unknown":e.match(/n\/a/i)?"N/A":a.match(/unknown|unk/i)||a.match(/n\/a/i)?e:`${t}${e}`,"string"===typeof a&&a)switch(n){case"lowercase":a=a.toLowerCase();break;case"uppercase":a=a.toUpperCase();break;default:a=a.charAt(0).toUpperCase()+a.slice(1);break}return a}n.d(t,"a",(function(){return a}))},"23e6":function(e,t,n){"use strict";n.d(t,"a",(function(){return f}));var a=n("ade3"),o=(n("13d5"),n("7941"));const i=(e,t)=>{const n=e.filter(e=>e.type.patient_identifier_type_id===t);return n.length>0?n[0].identifier:""};var c=n("7957"),r=n("8158"),s=n("1c74"),l=n("9283"),d=n("aee2"),u=n("2ef0"),p=n("0011");class m extends s["e"]{constructor(){super()}static create(e,t,n){return super.postJson("patient_identifiers",{identifier:n,identifier_type:t,patient_id:e})}}var h=n("4db7"),b=n("5a0c"),g=n.n(b);class f extends s["e"]{constructor(e){super(),Object(a["a"])(this,"patient",void 0),this.patient=e}static mergePatients(e){return e["program_id"]=super.getProgramID(),super.postJson("dde/patients/merge",e)}static voidPatient(e,t=""){return super.void("patients/"+e,{reason:t})}static async search(e){return super.getJson("/search/patients",e)}static findByNpid(e,t={}){return super.getJson("search/patients/by_npid",{npid:e,...t})}static findByOtherID(e,t){return super.getJson("search/patients/by_identifier",{type_id:e,identifier:t})}static async findByID(e){return super.getJson("/patients/"+e)}static async assignNHID(e,t){return super.postJson(`/patients/${e}/npid`,{program_id:t})}static reassignARVNumber(e,t){return super.putJson("patient_identifiers/"+e,t)}static toPatient(e){return JSON.parse(e)}static patientToJson(e){return JSON.stringify(e)}static async getPatientVisits(e,t){const n=await super.getJson(`patients/${e}/visits`,{program_id:super.getProgramID(),include_defaulter_dates:1==t});return n?n.sort((e,t)=>new Date(e)<new Date(t)?1:0):[]}getWeightLossPercentageFromTrail(e){const[t,n]=e.map(e=>e.weight);if(!t||!n)return!1;const a=parseFloat(n)-parseFloat(t),o=a/n*100;return Math.round(o)}getGuardian(){return f.getJson(`people/${this.getID()}/relationships`)}assignNpid(){return f.assignNHID(this.getID(),s["e"].getProgramID())}createArvNumber(e){return m.create(this.getID(),4,e)}updateARVNumber(e){var t;const n=(null===(t=this.getIdentifiers().find(e=>"ARV Number"===e.type.name))||void 0===t?void 0:t.patient_identifier_id)||"";return f.reassignARVNumber(n,{identifier:e})}updateMWNationalId(e){return m.create(this.getID(),28,e)}isMale(){return["Male","M"].includes(this.getGender())}isFemale(){return["Female","F"].includes(this.getGender())}async isPregnant(){const e=await c["a"].getFirstObs(this.getID(),"Is patient pregnant");return e&&!!e.value_coded.match(/Yes/i)&&c["a"].obsInValidPeriod(e)}async hasPregnancyObsToday(){const e=await c["a"].getFirstObsDatetime(this.getID(),"Is patient pregnant");return e&&l["b"].toStandardHisFormat(e)===s["e"].getSessionDate()&&this.isFemale()}isChildBearing(){const e=this.getAge();return this.isFemale()&&e>=12&&e<=50}async getInitialObs(e,t="value_numeric"){try{const n=await c["a"].getAll(this.getID(),e);if(!n)return;const a=n.length-1;return"value_coded"===t?r["a"].getConceptName(n[a][t]):n[a][t]}catch(n){console.error(n)}}async getInitialWeight(){return this.getInitialObs("weight")}async getRecentWeight(){const e=await r["a"].getConceptID("weight",!0),t=await c["a"].getObs({person_id:this.getID(),concept_id:e,page_size:1});return t.length>=1?t[0].value_numeric:-1}async getInitialHeight(){return this.getInitialObs("Height")}getRecentHeightObs(){return c["a"].getFirstObs(this.getID(),"Height")}async getRecentHeight(){const e=await r["a"].getConceptID("Height",!0),t=await c["a"].getObs({person_id:this.getID(),concept_id:e,page_size:1});return t.length>=1?t[0].value_numeric:-1}async getWeightHistory(){try{const e=await c["a"].getAll(this.getID(),"weight");return e.map(e=>({weight:e.value_numeric,date:e.obs_datetime}))}catch(e){return console.warn(e),[]}}async getCompleteTBTherapyHistory(){const e=await c["a"].getAll(this.getID(),"TB treatment history");return e.filter(e=>e.value_text.match(/Complete/i))}async getInitialBMI(){return this.getInitialObs("BMI")}async getBMI(){const e=await this.getRecentWeight(),t=await this.getRecentHeight();if(!e||!t)return 0;const n=this.isMale()?"M":"F",a=await d["a"].getBMI(e,t,n,this.getAge());return a}async calculateWeightPercentile(){const e=await this.getRecentWeight(),t=await this.getMedianWeightHeight();try{return parseFloat(e)/parseFloat(t["weight"])*100}catch(n){return 0}}async getMedianWeightHeight(){return s["e"].getJson(`patients/${this.getID()}/median_weight_height`,{date:s["e"].getSessionDate()})}getObj(){return this.patient}getID(){return this.patient.patient_id}getPatientInfoString(){const e=[this.getFullName(),`(${this.getGender()})`,this.getBirthdate(),", "+this.getCurrentDistrict()];return e.join(" ")}getCurrentDistrict(){return this.getAddresses().currentDistrict}getGender(){return this.patient.person.gender}getAge(){return g()(s["e"].getSessionDate()).diff(this.patient.person.birthdate,"years")}getAgeInMonths(){return 12*this.getAge()}getBirthdate(){return this.patient.person.birthdate}getGivenName(){return this.patient.person.names[0].given_name}getFamilyName(){return this.patient.person.names[0].family_name}normaliseName(e){return e.replace(/n\/a|unknown|null|undefined/gi,"").trim()}async printNationalID(){return new h["a"](this.getID()).printNidLbl()}getFullName(){try{const e=this.patient.person.names[0],t=e.given_name,n=e.family_name,a=e.middle_name;return this.normaliseName(`${t} ${a} ${n}`)}catch(e){return console.error(e),"Unknown"}}getDocID(){const e=this.findIdentifierByType("DDE person document ID");return e.match(/unknown/i)?null:e}getNationalID(){return this.findIdentifierByType("National id")}getMWNationalID(){return this.findIdentifierByType("Malawi National ID")}getArvNumber(){return this.findIdentifierByType("ARV Number")}hasActiveFilingNumber(){return this.hasIdentifierType("Filing number")}hasDormantFilingNumber(){return this.hasIdentifierType("Archived filing number")}hasIdentifierType(e){const t=Object(u["find"])(this.patient.patient_identifiers,{type:{name:e}});return!!t}getFilingNumber(){const e=this.patient.patient_identifiers.filter(e=>"Filing number"===e.type.name||"Archived filing number"===e.type.name);return Object(u["isEmpty"])(e)?"N/A":e[0].identifier}findIdentifierByType(e){return this.patient.patient_identifiers.filter(t=>t.type.name===e).sort((e,t)=>e["date_created"]<t["date_created"]?1:0).reduce((e,t)=>"Unknown"===e?t.identifier:e,"Unknown")}getIdentifiers(){return this.patient.patient_identifiers}getHomeDistrict(){return this.getAddresses().ancestryDistrict}getHomeTA(){return this.getAddresses().ancestryTA}getHomeVillage(){return this.getAddresses().ancestryVillage}getCurrentVillage(){return this.getAddresses().currentVillage}getCurrentTA(){return this.getAddresses().currentTA}getClosestLandmark(){return this.getAttribute(19)}getPhoneNumber(){return this.getAttribute(12)}getAttribute(e){return Object(o["a"])(this.patient.person.person_attributes,e)}getPatientIdentifier(e){return i(this.patient.patient_identifiers,e)}patientIsComplete(){return[this.getGender(),this.getBirthdate(),this.getGivenName(),this.getFamilyName(),...Object.values(this.getAddresses())].every(e=>!Object(p["d"])(e))}getAddresses(){const e={ancestryDistrict:"",ancestryTA:"",ancestryVillage:"",currentDistrict:"",currentTA:"",currentVillage:""};if(this.patient.person.addresses.length>0){const t=this.patient.person.addresses[0];e.ancestryDistrict=t.address2,e.ancestryTA=t.county_district,e.ancestryVillage=t.neighborhood_cell,e.currentDistrict=t.state_province,e.currentTA=t.township_division,e.currentVillage=t.city_village}return e}}},2706:function(e,t,n){"use strict";var a=n("2ef0");function o(e){try{for(const t in e){const n=e[t]();if(n)return n}}catch(t){return[t]}}function i(e){return Object(a["isEmpty"])(e)?["Value is required"]:null}function c(e){const t=/^(\+?265|0)(((8[89]|9[89])\d{7})|(1\d{6})|(2\d{8})|(31\d{8}))$/;return e&&e.value.match(t)?null:["Not a valid phone number"]}function r(e){const t=/^(?=[a-zA-Z0-9]*$)(?=\d+[a-zA-Z]|[a-zA-Z]+\d)([a-zA-Z\d]){8}$/;return Object(a["isEmpty"])(e)||!e.value.toString().match(t)?["Not a valid Malawi National ID number"]:null}function s(e){const t=/\b(?:(?:2(?:[0-4][0-9]|5[0-5])|[0-1]?[0-9]?[0-9])\.){3}(?:(?:2([0-4][0-9]|5[0-5])|[0-1]?[0-9]?[0-9]))\b/;return e&&e.value.match(t)?null:["Not a valid IP address"]}function l(e){const t=/^(?=.{2,100}$)[a-z!A-Z]+(?:['_.\-!\][a-z]+[a-z!A-Z])*$/;return e&&e.label.match(t)?null:["Invalid name Input"]}function d(e){return isNaN(parseInt(e.value))?["Value must be a number"]:null}function u(e,t,n){const a=e?e.label.length:0;return a>=t&&a<=n?null:[`Value length not within range of ${t} - ${n}`]}function p(e,t,n){const a=parseInt(e.label);return a>=t&&a<=n?null:[`${a} not within range of ${t} - ${n}`]}function m(e){const t=e.filter(e=>{const t=e.value||e.other.value;return"No"===t});return t.length==e.length?["All values can not be no"]:null}function h(e){const t=["all must be selected"];if(!e)return t;const n=e.filter(e=>""===e.value);return n.length>0?t:null}function b(e,t){return e===t?["Values can not be the same"]:null}t["a"]={validateSeries:o,required:i,isMWPhoneNumber:c,isName:l,isNumber:d,hasLengthRangeOf:u,rangeOf:p,neitherOr:m,anyEmpty:h,notTheSame:b,isIPAddress:s,isMWNationalID:r}},"276d":function(e,t,n){"use strict";n.d(t,"b",(function(){return u}));var a=n("74f4"),o=n("c1e4"),i=n("23e6"),c=n("89b4"),r=n("2ef0"),s=n("cc74"),l=n("5713"),d=n("9b7c");function u(){return(new c["a"]).cachingIsEnabled()}const p={CURRENT_LOCATION:{get:async()=>l["a"].getLocation(await s["b"].healthCenterID()),canReloadCache:e=>!u()||Object(r["isEmpty"])(e.state)},ACTIVE_HOME_TAB:{get:()=>1,canReloadCache:e=>"number"!=typeof e.state},ACTIVE_HOME_SUB_TAB_NAME:{get:()=>"",canReloadCache:e=>"string"!=typeof e.state||""===e.state},ACTIVE_PATIENT:{get:async e=>{const t=await i["a"].findByID(e.patientID);return t?new i["a"](t):{}},canReloadCache:({state:e,params:t})=>!u()||!(!Object(r["isEmpty"])(e)&&"number"===typeof t.patientID&&"function"===typeof(null===e||void 0===e?void 0:e.getID)&&e.getID()===t.patientID)},PATIENT_PROGRAM:{get:async e=>new a["a"](e.patientID).getProgram(),canReloadCache:({state:e,params:t})=>!u()||!(!Object(r["isEmpty"])(e)&&(null===e||void 0===e?void 0:e.programID)===a["a"].getProgramID()&&e.patientID===t.patientID)},PROVIDERS:{get:()=>o["a"].getUsers(),canReloadCache:e=>!u()||Object(r["isEmpty"])(e.state)},SITE_PREFIX:{get:()=>s["b"].sitePrefix(),canReloadCache:e=>!u()||"string"!==typeof e.state},IS_MILITARY_SITE:{get:()=>s["b"].militarySiteEnabled(),canReloadCache:e=>!u()||"boolean"!=typeof e.state},IS_DDE_ENABLED:{get:()=>s["b"].ddeEnabled(),canReloadCache:e=>!u()||"boolean"!=typeof e.state},PATIENT_LAB_ORDERS:{get:e=>"number"===typeof e.patientID?d["a"].getOrders(e.patientID):[],canReloadCache:({params:e,state:t})=>!u()||!(e.patientID&&Array.isArray(t)&&t.length&&t[0].patient_id===e.patientID)},IS_MW_NATIONAL_ID_SCANNER_ENABLED:{get:()=>s["b"].malawiNationalIDScannerEnabled(),canReloadCache:e=>!u()||"boolean"!=typeof e.state}};t["a"]=p},2989:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var a=n("cc6f"),o=n("b89f");class i extends a["a"]{constructor(e,t){super(e,84,t)}printSocialHistory(){return(new o["a"]).printLbl(`/programs/${this.programID}/patients/${this.patientID}/labels/history`)}}},"2a92":function(e,t,n){},"2b3a":function(e,t,n){"use strict";var a=n("7a23");function o(e,t,n,o,i,c){const r=Object(a["resolveComponent"])("ion-title"),s=Object(a["resolveComponent"])("ion-label"),l=Object(a["resolveComponent"])("ion-toolbar"),d=Object(a["resolveComponent"])("ion-header"),u=Object(a["resolveComponent"])("application-card"),p=Object(a["resolveComponent"])("ion-col"),m=Object(a["resolveComponent"])("ion-row"),h=Object(a["resolveComponent"])("ion-content"),b=Object(a["resolveComponent"])("ion-button"),g=Object(a["resolveComponent"])("ion-footer");return Object(a["openBlock"])(),Object(a["createElementBlock"])(a["Fragment"],null,[Object(a["createVNode"])(d,null,{default:Object(a["withCtx"])(()=>[Object(a["createVNode"])(l,null,{default:Object(a["withCtx"])(()=>[Object(a["createVNode"])(r,null,{default:Object(a["withCtx"])(()=>[Object(a["createTextVNode"])("Select Module")]),_:1}),Object(a["createVNode"])(s,{style:{"font-weight":"bold",padding:"0.5em"},slot:"end"},{default:Object(a["withCtx"])(()=>[Object(a["createTextVNode"])(" Version: "+Object(a["toDisplayString"])(e.appVersion),1)]),_:1})]),_:1})]),_:1}),Object(a["createVNode"])(h,null,{default:Object(a["withCtx"])(()=>[Object(a["createVNode"])(m,null,{default:Object(a["withCtx"])(()=>[(Object(a["openBlock"])(!0),Object(a["createElementBlock"])(a["Fragment"],null,Object(a["renderList"])(e.apps,(t,n)=>(Object(a["openBlock"])(),Object(a["createBlock"])(p,{key:n,"size-md":"4","size-sm":"12"},{default:Object(a["withCtx"])(()=>[Object(a["createVNode"])(u,{class:Object(a["normalizeClass"])({inactive:!t.hasPriviledge,clickable:t.hasPriviledge}),onClick:n=>e.setApplication(t),name:t.applicationName,details:t.applicationDescription,programID:t.programID,iconURL:e.img(t.applicationIcon)},null,8,["class","onClick","name","details","programID","iconURL"])]),_:2},1024))),128))]),_:1})]),_:1}),Object(a["createVNode"])(g,null,{default:Object(a["withCtx"])(()=>[Object(a["createVNode"])(l,null,{default:Object(a["withCtx"])(()=>[e.noAppPriviledges||e.canClose?(Object(a["openBlock"])(),Object(a["createBlock"])(b,{key:0,color:"danger",size:"large",onClick:e.closeModal},{default:Object(a["withCtx"])(()=>[Object(a["createTextVNode"])(" Close ")]),_:1},8,["onClick"])):Object(a["createCommentVNode"])("",!0)]),_:1})]),_:1})],64)}n("14d9");const i={class:"his-md-text"};function c(e,t,n,o,c,r){const s=Object(a["resolveComponent"])("ion-img"),l=Object(a["resolveComponent"])("ion-card-title"),d=Object(a["resolveComponent"])("ion-card-header"),u=Object(a["resolveComponent"])("ion-card-content"),p=Object(a["resolveComponent"])("center"),m=Object(a["resolveComponent"])("ion-card");return Object(a["openBlock"])(),Object(a["createBlock"])(m,{class:"his-card"},{default:Object(a["withCtx"])(()=>[Object(a["createVNode"])(p,null,{default:Object(a["withCtx"])(()=>[Object(a["createVNode"])(s,{src:e.iconURL},null,8,["src"]),Object(a["createVNode"])(d,null,{default:Object(a["withCtx"])(()=>[Object(a["createVNode"])(l,null,{default:Object(a["withCtx"])(()=>[Object(a["createTextVNode"])(Object(a["toDisplayString"])(e.name),1)]),_:1})]),_:1}),Object(a["createVNode"])(u,null,{default:Object(a["withCtx"])(()=>[Object(a["createElementVNode"])("b",i,Object(a["toDisplayString"])(e.details),1)]),_:1})]),_:1})]),_:1})}var r=n("d867"),s=Object(a["defineComponent"])({props:["name","details","programID","iconURL"],components:{IonCard:r["f"],IonCardContent:r["g"],IonCardTitle:r["j"],IonCardHeader:r["h"],IonImg:r["s"]}}),l=(n("1bb3"),n("d959")),d=n.n(l);const u=d()(s,[["render",c],["__scopeId","data-v-1e3d0694"]]);var p=u,m=n("1718"),h=Object(a["defineComponent"])({name:"Modal",props:{title:{type:String,default:""},apps:{type:Array,default:()=>[]},appVersion:{type:String},canClose:{type:Boolean,default:()=>!1}},computed:{noAppPriviledges(){return this.apps.every(e=>!e.hasPriviledge)}},methods:{closeModal(){this.noAppPriviledges?this.$router.push("/login"):r["ab"].dismiss()},img(e){return Object(m["a"])(e)},setApplication(e){e.hasPriviledge&&("function"===typeof e.onAppSelected?e.onAppSelected(e):r["ab"].dismiss(e))}},components:{IonFooter:r["o"],IonContent:r["n"],IonHeader:r["q"],IonTitle:r["S"],IonToolbar:r["T"],ApplicationCard:p,IonButton:r["d"],IonCol:r["m"],IonRow:r["I"]}});n("ae2a");const b=d()(h,[["render",o],["__scopeId","data-v-7da5155a"]]);t["a"]=b},"2b47":function(e,t,n){"use strict";var a=n("7a23");const o={class:"tool-bar-medium-card"};function i(e,t,n,i,c,r){return Object(a["openBlock"])(),Object(a["createElementBlock"])("div",o,[Object(a["renderSlot"])(e.$slots,"default")])}var c=Object(a["defineComponent"])({name:"ToolBarMediumCard"}),r=n("d959"),s=n.n(r);const l=s()(c,[["render",i]]);t["a"]=l},"2ed9":function(e,t,n){"use strict";n.d(t,"a",(function(){return o})),n.d(t,"d",(function(){return i})),n.d(t,"c",(function(){return c})),n.d(t,"b",(function(){return r})),n.d(t,"e",(function(){return p}));var a,o,i,c,r,s=n("d867"),l=n("2ef0"),d=n("7a23");(function(e){e["ACTIVE_PLOFILE"]="active_profile",e["PLATFORM_PROFILES"]="platformProfiles"})(a||(a={})),function(e){e["WEB"]="WEB",e["FILE_SYSTEM"]="FILE_SYSTEM"}(o||(o={})),function(e){e["BARCODE_SCANNER"]="BARCODE_SCANNER",e["CAMERA_SCANNER"]="CAMERA_SCANNER"}(i||(i={})),function(e){e["WEB"]="WEB",e["BLUETOOTH"]="BLUETOOTH"}(c||(c={})),function(e){e["HIS_KEYBOARD_ONLY"]="HIS_KEYBOARD_ONLY",e["NATIVE_AND_HIS_KEYBOARD"]="NATIVE_AND_HIS_KEYBOARD"}(r||(r={}));const u={Desktop:{profileName:"Desktop",fileExport:o.WEB,scanner:i.BARCODE_SCANNER,printer:c.WEB,keyboard:r.NATIVE_AND_HIS_KEYBOARD},Mobile:{profileName:"Mobile",fileExport:o.FILE_SYSTEM,scanner:i.CAMERA_SCANNER,printer:c.BLUETOOTH,keyboard:r.HIS_KEYBOARD_ONLY}};function p(){const e=Object(d["ref"])(u["Desktop"]),t=Object(d["ref"])({}),n=localStorage.getItem(a.ACTIVE_PLOFILE),o=localStorage.getItem(a.PLATFORM_PROFILES);return t.value="string"===typeof o?JSON.parse(o):u,"string"===typeof n&&(""+n).match(/\{.*\}/)?e.value=JSON.parse(n):Object(l["isEmpty"])(t.value)||(Object(s["X"])("mobile")&&"Mobile"in t.value?e.value=t.value["Mobile"]:Object(s["X"])("desktop")&&"Desktop"in t.value&&(e.value=t.value["Desktop"])),Object(d["watch"])(()=>e.value,e=>{localStorage.setItem(a.ACTIVE_PLOFILE,JSON.stringify(e))}),{activePlatformProfile:e,platformProfiles:t}}},"2f2a":function(e,t,n){"use strict";var a=n("7a23");const o=["disabled"],i=["selected"],c=["selected"],r=["selected"],s=["selected"],l=["selected"],d=["selected"],u=["selected","value"];function p(e,t,n,p,m,h){const b=Object(a["resolveComponent"])("ion-col"),g=Object(a["resolveComponent"])("ion-input"),f=Object(a["resolveComponent"])("ion-button"),_=Object(a["resolveComponent"])("ion-item"),v=Object(a["resolveComponent"])("ion-row");return Object(a["openBlock"])(),Object(a["createBlock"])(v,null,{default:Object(a["withCtx"])(()=>[e.showPerPageFilter?(Object(a["openBlock"])(),Object(a["createBlock"])(b,{key:0},{default:Object(a["withCtx"])(()=>[Object(a["withDirectives"])(Object(a["createElementVNode"])("select",{class:"input_display","onUpdate:modelValue":t[0]||(t[0]=t=>e.itemsPerPage=t),disabled:e.disablePerPageFilter},[Object(a["createElementVNode"])("option",{selected:5===e.itemsPerPage,value:5},"5 rows/page",8,i),Object(a["createElementVNode"])("option",{selected:10===e.itemsPerPage,value:10},"10 rows/page",8,c),Object(a["createElementVNode"])("option",{selected:20===e.itemsPerPage,value:20},"20 rows/page",8,r),Object(a["createElementVNode"])("option",{selected:50===e.itemsPerPage,value:50},"50 rows/page",8,s),Object(a["createElementVNode"])("option",{selected:100===e.itemsPerPage,value:100},"100 rows/page",8,l),Object(a["createElementVNode"])("option",{selected:1e3===e.itemsPerPage,value:1e3},"1000 rows/page",8,d),Object(a["createElementVNode"])("option",{selected:e.itemsPerPage===e.totalRowCount,value:e.totalRowCount},"Show all rows("+Object(a["toDisplayString"])(e.totalRowCount)+")",9,u)],8,o),[[a["vModelSelect"],e.itemsPerPage]])]),_:1})):Object(a["createCommentVNode"])("",!0),Object(a["createVNode"])(b,null,{default:Object(a["withCtx"])(()=>[Object(a["createVNode"])(_,{lines:"none"},{default:Object(a["withCtx"])(()=>[Object(a["createVNode"])(g,{disabled:e.disableSearchFilter,class:"input_display",value:e.searchFilter,onClick:e.launchSearcher,placeholder:"Search here..."},null,8,["disabled","value","onClick"]),e.searchFilter?(Object(a["openBlock"])(),Object(a["createBlock"])(f,{key:0,class:"reset_button",size:"large",onClick:t[1]||(t[1]=t=>e.reset()),color:"secondary"},{default:Object(a["withCtx"])(()=>[Object(a["createTextVNode"])(" Reset ")]),_:1})):Object(a["createCommentVNode"])("",!0)]),_:1})]),_:1})]),_:1})}var m=n("d867"),h=n("e6e9"),b=n("d95e"),g=Object(a["defineComponent"])({emits:["onItemsPerPage","onSearchFilter"],components:{IonItem:m["w"],IonCol:m["m"],IonRow:m["I"],IonInput:m["v"],IonButton:m["d"]},props:{totalRowCount:{type:Number,default:15e3},disableSearchFilter:{type:Boolean,default:!1},disablePerPageFilter:{type:Boolean,default:!1},showPerPageFilter:{type:Boolean,default:!1}},setup(e,{emit:t}){const n=Object(a["ref"])(50),o=Object(a["ref"])("");async function i(e,t){const n=await m["ab"].create({component:h["a"],backdropDismiss:!1,cssClass:"full-modal",componentProps:{dismissType:"modal",currentField:e,onFinish:t}});n.present()}function c(e){t("onSearchFilter",e)}function r(){o.value="",c("")}function s(){i({id:"search",helpText:"Search table data",defaultValue:()=>o.value,type:b["b"].TT_TEXT},e=>{o.value=e?e.value:"",c(o.value)})}return Object(a["watch"])(n,e=>{"number"===typeof e&&t("onItemsPerPage",e)},{immediate:!0}),{reset:r,itemsPerPage:n,searchFilter:o,launchKeyboard:i,launchSearcher:s}}}),f=(n("1cac"),n("d959")),_=n.n(f);const v=_()(g,[["render",p],["__scopeId","data-v-fa06c574"]]);t["a"]=v},"2fdd":function(e,t,n){},3386:function(e,t,n){},"369d":function(e,t,n){"use strict";n("6d73")},"37ca":function(e,t,n){"use strict";n("5df8")},3800:function(e,t,n){"use strict";n.d(t,"d",(function(){return a})),n.d(t,"l",(function(){return o})),n.d(t,"e",(function(){return i})),n.d(t,"b",(function(){return c})),n.d(t,"k",(function(){return r})),n.d(t,"i",(function(){return s})),n.d(t,"g",(function(){return l})),n.d(t,"a",(function(){return d})),n.d(t,"j",(function(){return u})),n.d(t,"c",(function(){return p})),n.d(t,"h",(function(){return m})),n.d(t,"f",(function(){return h}));const a=[["1","2","3"],["4","5","6"],["7","8","9"],[".","0","Del"],["","Done",""]],o=[["1","2","3"],["4","5","6"],["7","8","9"],[".","0","Del"],["Clear","%","/"]],i=[["1","2","3"],["4","5","6"],["7","8","9"],["Del.","0","Clear"]],c=[["1","2","3","<"],["4","5","6",">"],["7","8","9","="],["","0",""]],r=[["1","2","3","+","-","/","*"],["4","5","6","%","=","<",">","Qwerty"],["7","8","9",".",","],["","0",""]],s=[["1","2","3"],["4","5","6"],["7","8","9"],["","0",""]],l=[["1","2","3","4","5","6","7"],["8","9","10","11","12","13","14"],["15","16","17","18","19","20","21"],["22","23","24","25","26","27","28"],["29","30","31"]],d=[["a","b","c","d","e","f","g","h","."],["i","j","k","l","m","n","o","p","q"],["r","s","t","u","v","w","x","y","z"]],u=[["q","w","e","r","t","y","u","i","o","p"],["a","s","d","f","g","h","j","k","l","'"],["z","x","c","v","b","n","m",",",".","A-Z"]],p=[["1","2","3","4","5","6","7","8","9","0"],["a","b","c","d","e","f","g","h","-","."],["i","j","k","l","m","n","o","p","q"],["r","s","t","u","v","w","x","y","z"]],m=[["1","2","3","4","5","6","7","8","9","0","Del"],["q","w","e","r","t","y","u","i","o","p","Clear"],["a","s","d","f","g","h","j","k","l",".","Caps"],["z","x","c","v","b","n","m","<",">","/","Enter"]],h=[["1","2","3","4","5","6","7","8","9","0"],["q","w","e","r","t","y","u","i","o","p"],["a","s","d","f","g","h","j","k","l","Del."],["z","x","c","v","b","n","m","Caps","Login"]]},"3d6c":function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var a=n("1c74");const o=[{drugID:105,shortName:"Acyclovir 200mg",fullName:"Acyclovir 200mg",packSizes:[30]},{drugID:1044,shortName:"ABC 120 /3TC 60mg",fullName:"Abacavir and Lamivudine 120mg pack of 60 tablets",packSizes:[60],categories:["p"]},{drugID:969,shortName:"ABC 600 / 3TC 300mg",fullName:"Abacavir sulfate 600mg / Lamivudine 300mg, tin of 30 tablets",packSizes:[30],categories:["a"]},{drugID:932,shortName:"ATV 300 / r 100mg",fullName:"Atazanavir / Ritonavir 300 / 100mg, tin of 30 tablets",packSizes:[30],categories:["a"]},{drugID:39,shortName:"AZT 300 /3TC 150mg",fullName:"Zidovudine / lamivudine 300 / 150mg, tin of 60 tablets",packSizes:[60],categories:["a"]},{drugID:731,shortName:"AZT 300 / 3TC 150 / NVP 200mg",fullName:"Zidovudine / lamivudine /Nevirapine 300 / 150 / 200mg, tin of 60 tablets",packSizes:[60],categories:["a"]},{drugID:732,shortName:"AZT 60 / 3TC 30 / NVP 50mg",fullName:"Zidovudine / lamivudine /Nevirapine 60 / 30 / 50mg, tin of 60 tablets",packSizes:[60],categories:["p"]},{drugID:736,shortName:"AZT 60 / 3TC 30mg",fullName:"Zidovudine / lamivudine 60 / 30mg, tin of 60 tablets",packSizes:[60],categories:["p"]},{drugID:963,shortName:"CPT 120mg",fullName:"Cotrimoxazole 120mg, blister pack of 1000 dispersible tablets",packSizes:[1e3],categories:["p"]},{drugID:297,shortName:"CPT 480mg",fullName:"Cotrimoxazole 480mg, tin of 1000 tablets",packSizes:[1e3],categories:["a"]},{drugID:576,shortName:"CPT 960mg",fullName:"Cotrimoxazole 960mg, blister pack of 1000 tablets",packSizes:[1e3],categories:["a"]},{drugID:976,shortName:"DRV 600mg",fullName:"Darunavir 600mg pack of 60 tablets",packSizes:[60],categories:["a"]},{drugID:980,shortName:"DTG 10mg",fullName:"Dolutegravir 10mg pack of 90 tablets",packSizes:[90]},{drugID:982,shortName:"DTG 50mg",fullName:"Dolutegravir 50mg pack of 30 tablets",packSizes:[30],categories:["a"]},{drugID:30,shortName:"EFV 200mg",fullName:"Efavirenz 200mg, tin of 90 tablets",packSizes:[90],categories:["p"]},{drugID:11,shortName:"EFV 600mg",fullName:"Efavirenz 600mg, tin of 30 tablets",packSizes:[30],categories:["a"]},{drugID:978,shortName:"ETV 100mg",fullName:"Etravirine 100mg, tin of 120 tablets",packSizes:[120],categories:["a"]},{drugID:24,shortName:"Isoniazid 100mg",fullName:"Isoniazid (H) 100mg, blist packs of 100 tablets",packSizes:[100],categories:["p"]},{drugID:991,shortName:"Isoniazid 300mg",fullName:"Isoniazid (H) 300mg, blist packs of 1000 tablets",packSizes:[1e3,672]},{drugID:74,shortName:"LPV 100 / r 25mg",fullName:"Lopinavir / Ritonavir 100 / 25mg, tin of 60 tablets",packSizes:[60],categories:["p"]},{drugID:73,shortName:"LPV 200 / r 50mg",fullName:"Lopinavir / Ritonavir 200 / 50mg, tin of 120 tablets",packSizes:[120],categories:["a"]},{drugID:1045,shortName:"LPV 40 / r 10mg granules",fullName:"Lopinavir/Ritonavir(LPV/r ), 40/10mg granules, pack of 120 sachets",packSizes:[120]},{drugID:979,shortName:"LPV 40 / r 10mg pellets",fullName:"Lopinavir/Ritonavir(LPV/r ), 40/10mg granules, pack of 120 pellets",packSizes:[120],categories:["p"]},{drugID:22,shortName:"NVP 200mg",fullName:"Nevirapine 200mg, tin of 60 tablets",packSizes:[60],categories:["a"]},{drugID:968,shortName:"NVP 50mg",fullName:"Nevirapine 50mg, tin of 60 tablets",packSizes:[60],categories:["p"]},{drugID:1039,shortName:"Pyridoxine 25mg",fullName:"Pyridoxine (25mg)",packSizes:[1e3],categories:["a"]},{drugID:977,shortName:"r 100mg",fullName:"Ritonavir 100mg pack of 60 tablets",packSizes:[60],categories:["a"]},{drugID:1043,shortName:"RAL 25mg",fullName:"Raltegravir 25mg pack of 60 tablets",packSizes:[60],categories:["p"]},{drugID:954,shortName:"RAL 400mg",fullName:"Raltegravir 400mg pack of 60 tablets",packSizes:[60],categories:["a"]},{drugID:1056,shortName:"Rifapentine 150mg",fullName:"Rifapentine 150mg pack of 24 tablets",packSizes:[24],categories:["a"]},{drugID:734,shortName:"TDF 300 / 3TC 300mg ",fullName:"Lamivudine / Tenofovir disoproxil fumarate 300 / 300mg, tin of 30 tablets",packSizes:[30],categories:["a"]},{drugID:735,shortName:"TDF 300 / 3TC 300 / EFV 600mg",fullName:"Tenofovir disoproxil fumarate / Lamivudine / Efavirenz 300 / 300 / 600mg, tin of 30 tablets",packSizes:[30],categories:["a"]},{drugID:983,shortName:"TDF 300 / 3TC 300 / DTG 50mg",fullName:"Tenofovir Disoproxil Fumarate/Lamivudine/Dolutegravir (TDF/3TC /DTG), 300/300/50mg, pack of 90 tablets",packSizes:[90],categories:["a"]}];class i extends a["e"]{constructor(){super()}postItems(e){return a["e"].postJson("/pharmacy/batches",e)}getItems(){return a["e"].getJson("pharmacy/items",{paginate:!1})}getItem(e){return a["e"].getJson("pharmacy/items",{drug_id:e})}updateItem(e,t){return a["e"].putJson("pharmacy/items/"+e,t)}relocateItems(e,t){return a["e"].postJson(`pharmacy/items/${e}/reallocate`,t)}disposeItems(e,t){return a["e"].postJson(`pharmacy/items/${e}/dispose`,t)}getConsumptionRate(e){return a["e"].getJson("pharmacy/drug_consumption",{drug_id:e})}drugList(){return o}static getShortName(e){const t=o.filter(t=>t.drugID===e);return t.length>0?t[0].shortName:""}static getPackSize(e){const t=o.filter(t=>t.drugID===e);return t.length>0?t[0].packSizes[0]:30}static getPaedeatricDrugs(){return console.log(o.filter(e=>{var t;return null===(t=e.categories)||void 0===t?void 0:t.includes("p")})),o.filter(e=>{var t;return null===(t=e.categories)||void 0===t?void 0:t.includes("p")})}static getAdultDrugs(){return o.filter(e=>{var t;return null===(t=e.categories)||void 0===t?void 0:t.includes("a")})}}},"3e53":function(e,t,n){"use strict";var a=n("f768"),o=n("2b3a"),i=n("d867"),c=n("2ef0"),r=(n("14d9"),n("4db7")),s=n("c1e4"),l=n("cc74"),d=n("7a23");const u=["innerHTML"];function p(e,t,n,a,o,i){const c=Object(d["resolveComponent"])("ion-title"),r=Object(d["resolveComponent"])("ion-toolbar"),s=Object(d["resolveComponent"])("ion-header"),l=Object(d["resolveComponent"])("text-skeleton"),p=Object(d["resolveComponent"])("ion-label"),m=Object(d["resolveComponent"])("ion-item"),h=Object(d["resolveComponent"])("ion-list"),b=Object(d["resolveComponent"])("ion-content"),g=Object(d["resolveComponent"])("ion-button"),f=Object(d["resolveComponent"])("ion-footer"),_=Object(d["resolveComponent"])("ion-page");return Object(d["openBlock"])(),Object(d["createBlock"])(_,null,{default:Object(d["withCtx"])(()=>[Object(d["createVNode"])(s,null,{default:Object(d["withCtx"])(()=>[Object(d["createVNode"])(r,null,{default:Object(d["withCtx"])(()=>[Object(d["createVNode"])(c,{class:"his-lg-text"},{default:Object(d["withCtx"])(()=>[Object(d["createTextVNode"])(Object(d["toDisplayString"])(e.dialogTitle),1)]),_:1})]),_:1})]),_:1}),Object(d["createVNode"])(b,null,{default:Object(d["withCtx"])(()=>[e.isLoading?(Object(d["openBlock"])(),Object(d["createBlock"])(l,{key:0,itemCount:5})):Object(d["createCommentVNode"])("",!0),e.isLoading?Object(d["createCommentVNode"])("",!0):(Object(d["openBlock"])(),Object(d["createBlock"])(h,{key:1},{default:Object(d["withCtx"])(()=>[(Object(d["openBlock"])(!0),Object(d["createElementBlock"])(d["Fragment"],null,Object(d["renderList"])(e.items,(e,t)=>(Object(d["openBlock"])(),Object(d["createBlock"])(m,{class:"his-md-text",key:t},{default:Object(d["withCtx"])(()=>[Object(d["createVNode"])(p,null,{default:Object(d["withCtx"])(()=>[Object(d["createTextVNode"])(Object(d["toDisplayString"])(e.label),1)]),_:2},1024),Object(d["createElementVNode"])("b",{style:Object(d["normalizeStyle"])({backgroundColor:e.color||"",padding:"0.4em"}),innerHTML:e.value},null,12,u)]),_:2},1024))),128))]),_:1}))]),_:1}),Object(d["createVNode"])(f,null,{default:Object(d["withCtx"])(()=>[Object(d["createVNode"])(r,null,{default:Object(d["withCtx"])(()=>[Object(d["createVNode"])(g,{disabled:e.isLoading,onClick:e.updateData,color:"success",size:"large",slot:"end"},{default:Object(d["withCtx"])(()=>[Object(d["createTextVNode"])(" Refresh ")]),_:1},8,["disabled","onClick"]),Object(d["createVNode"])(g,{disabled:e.isLoading,onClick:e.onClose,size:"large",slot:"end"},{default:Object(d["withCtx"])(()=>[Object(d["createTextVNode"])(" Close ")]),_:1},8,["disabled","onClick"])]),_:1})]),_:1})]),_:1})}var m=n("b5e4"),h=n("ded6"),b=Object(d["defineComponent"])({setup:e=>{const t=Object(d["ref"])(e.title),n=Object(d["ref"])(!1),a=Object(d["ref"])([]);async function o(){if(n.value=!0,"function"===typeof e.loadData)try{a.value=await e.loadData(t)}catch(o){Object(m["c"])(""+o)}n.value=!1}return Object(d["onMounted"])(()=>{o()}),{items:a,dialogTitle:t,isLoading:n,updateData:o}},props:{title:{type:String,default:""},loadData:{type:Function,required:!0},onClose:{type:Function,required:!0}},components:{TextSkeleton:h["a"],IonPage:i["D"],IonTitle:i["S"],IonHeader:i["q"],IonContent:i["n"],IonFooter:i["o"],IonToolbar:i["T"],IonButton:i["d"],IonItem:i["w"],IonList:i["y"]}}),g=n("d959"),f=n.n(g);const _=f()(b,[["render",p]]);var v,O=_,y=n("fa73"),T=n("5a0c"),j=n.n(T),k=n("8734"),I=n("2ed9"),E=n("276d"),C=n("b432"),D={GlobalStore:E["a"],GlobalAppSettings:[{name:"Sync",icon:"programs.png",action:()=>{Object(C["a"])().launchSynchronizationDialog()},files:[]},{name:"Session Management",icon:"time.png",pathUrl:"/session/date",files:[]},{name:"Portal Settings",icon:"portal.png",condition:()=>s["a"].isAdmin(),pathUrl:"/portal/config",files:[]},{name:"Network",icon:"portal.png",condition:()=>s["a"].isAdmin(),pathUrl:"/settings/host",files:[]},{name:"Printer Settings",icon:"printer-settings.png",pathUrl:"/settings/printer",condition:()=>s["a"].isAdmin()&&Object(I["e"])().activePlatformProfile.value.printer===I["c"].BLUETOOTH,files:[]},{name:"Location",icon:"location.png",files:[{name:"Print Location",pathUrl:"/print/location"},{name:"Set Site Location",condition:()=>s["a"].isAdmin(),pathUrl:"/location/update/site"},{name:"Set Site Code",condition:()=>s["a"].isAdmin(),pathUrl:"/location/update/code"}]},{name:"User management",icon:"edit-user.png",files:[{name:"New user",condition:()=>s["a"].isAdmin(),pathUrl:"/user?activity=add"},{name:"Edit Users",condition:()=>s["a"].isAdmin(),pathUrl:"/user?activity=edit"},{name:"Change Password",pathUrl:"/user?activity=edit&update_password=true"},{name:"System usage report",pathUrl:"/users/usage",condition:()=>s["a"].isAdmin()}]},{name:"Data Management",icon:"list.png",condition:()=>s["a"].isAdmin(),files:[{name:"View Duplicates",pathUrl:"/view_duplicates"},{name:"Manage Drug Sets",pathUrl:"/anc/drugset",condition:()=>{var e;return!!L.getActiveApp()&&"ANC"===(null===(e=L.getActiveApp())||void 0===e?void 0:e.applicationName)}},{name:"Data Cleaning",pathUrl:"/anc/datacleaning",condition:()=>{var e;return!!L.getActiveApp()&&"ANC"===(null===(e=L.getActiveApp())||void 0===e?void 0:e.applicationName)}},{name:"Data Cleaning",pathUrl:"/data_cleaning",condition:()=>{var e;return!!L.getActiveApp()&&"ART"===(null===(e=L.getActiveApp())||void 0===e?void 0:e.applicationName)}},{name:"Merge patients",pathUrl:"/patients/merge",condition:()=>{var e;return!!L.getActiveApp()&&"ART"===(null===(e=L.getActiveApp())||void 0===e?void 0:e.applicationName)}},{name:"Patient visit stats",pathUrl:"/art/patient_visits",condition:()=>{var e;return!!L.getActiveApp()&&"ART"===(null===(e=L.getActiveApp())||void 0===e?void 0:e.applicationName)}},{name:"Data cleaning verification",pathUrl:"/art/data_cleaning_verification",condition:()=>{var e;return!!L.getActiveApp()&&"ART"===(null===(e=L.getActiveApp())||void 0===e?void 0:e.applicationName)}}]},{name:"DDE Settings",icon:"programs.png",condition:()=>s["a"].isAdmin(),files:[{name:"DDE Activation",pathUrl:"/preferences?label=Activate DDE&property="+l["a"].DDE_ENABLED},{name:"DDE NPID Status",action:async()=>{(await i["ab"].create({component:O,backdropDismiss:!1,componentProps:{title:"DDE NPID Status",loadData:async e=>{await Object(k["a"])(400);const t=await y["a"].getRemainingNpids();if(t){const n=t["npid_status"][0],a=n["location_id"],o=n["avg_consumption_rate_per_day"]||1,i=n["unassigned"],c=n["assigned"],r=Math.floor(i/o),s=j()(n["date_last_updated"]).format("DD/MMM/YYYY HH:mm:ss");return e.value=n["location_name"]+" DDE NPID Status",[{label:"Location ID",value:a},{label:"Estimated days left",value:r,color:(()=>{let e="";return r<=30&&(e="#FFFF00"),r<=20&&(e="#FFA500"),r<=15&&(e="#ff0000"),e})()},{label:"Unassigned",value:i},{label:"Assigned",value:c},{label:"Average consumption per day",value:o},{label:"Last update",value:s}]}return[]},onClose:()=>i["ab"].dismiss()}})).present()}}]},{name:"Malawi National ID Settings",icon:"card.png",condition:()=>s["a"].isAdmin(),files:[{name:"Malawi National ID Scanner Activation",pathUrl:"/preferences?label=Activate Scanning of Malawi National ID&property="+l["a"].MALAWI_NATIONAL_ID_SCANNER_ENABLED}]}],GlobalProgramActivities:[{id:"npid",name:"National Health ID (Print)",description:"Print Patient National Health ID",action({patient:e}){return new r["a"](e.patient_id).printNidLbl()},icon:"barcode.svg"},{id:"lab activities",name:"Lab activities",description:"Do lab orders",icon:"lab.png",condition:()=>{var e;return!["RADIOLOGY","ITS"].includes(""+(null===(e=L.getActiveApp())||void 0===e?void 0:e.applicationName))}},{id:"demographics",name:"Demographics (Print)",description:"Print Patient Demographics",action:({patient:e})=>{const t=new r["a"](e.patient_id);return t.printDemographicsLbl()},icon:"print.png",condition:()=>{var e;return!["CxCa","ITS"].includes(""+(null===(e=L.getActiveApp())||void 0===e?void 0:e.applicationName))}},{id:"demographics_edit",name:"Demographics (Edit)",description:"Edit Patient Demographics",action:({patient:e},t)=>{t.push({path:"/patient/registration",query:{edit_person:e.patient_id}})},icon:"print.png"},{id:"guardian_edit",name:"Edit Guardians",description:"Edit guardian information",condition:()=>{var e;return!["ITS"].includes(""+(null===(e=L.getActiveApp())||void 0===e?void 0:e.applicationName))},action:({patient:e},t)=>{t.push({path:"/guardian/registration/"+e.patient_id,query:{edit_guardian:!0}})},icon:"print.png"},{id:"change_session_Date",name:"Change session date",action:({patient:e},t)=>{t.push({path:"/session/date",query:{patient_id:e.patient_id}})},description:"Change session date (for retrospective entry)",icon:"time.png"},{id:"program_management",name:"Program(s)",description:"View / update patient's programs",action:({patient:e},t)=>{t.push({path:"/patient/programs/"+e.patient_id})},icon:"programs.png"},{id:"visit_summary",name:"Visit Summary (Print)",description:"Print Patient Visit Summary",action({patient:e,visitDate:t}){const n=new r["a"](e.patient_id);return n.printVisitSummaryLbl(t)},icon:"folder.png",condition:()=>{var e;return!["CxCa","ITS"].includes(""+(null===(e=L.getActiveApp())||void 0===e?void 0:e.applicationName))}},{id:"enter_lab_result",name:"Enter Lab Result",description:"Enter Lab Test Result",condition:()=>{var e;return!["ITS"].includes(""+(null===(e=L.getActiveApp())||void 0===e?void 0:e.applicationName))},action:({patient:e},t)=>{t.push({path:"/lab/results/"+e.patient_id})},icon:"enter.png"}]},N=n("1c74"),w=n("0fa1");function S(e){const t={...e};return t.secondaryPatientActivites=[...D.GlobalProgramActivities,...t.secondaryPatientActivites],t.appStore={...D.GlobalStore,...t.appStore||{}},t.globalPropertySettings=[...D.GlobalAppSettings,...t.globalPropertySettings||[]],t}function A(){const e=sessionStorage.getItem(v.APPLICATION_NAME);if(e){const t=Object(c["find"])(a["b"],{applicationName:e});if(t)return S(t)}}function P(){const e=A();e&&sessionStorage.setItem(v.SUSPENDED_APP,e.applicationName)}async function F(e,t="",n=!1){sessionStorage.setItem(v.APPLICATION_NAME,e.applicationName);const a=S(e);return"function"!==typeof e.init||n||await e.init(t),a}function x(){const e=sessionStorage.getItem(v.SUSPENDED_APP);if(e){const t=Object(c["find"])(a["b"],{applicationName:e});t&&(sessionStorage.removeItem(v.SUSPENDED_APP),F(t,"",!0))}}async function V(e,t,n,o){const i=Object(c["find"])(a["b"],{applicationName:e});i&&(P(),await F(i),"function"===typeof o&&await o(),Object(w["b"])(t,n))}async function R(e="",t=!1){const n=await i["ab"].create({id:"_APPLICATION_SELECTION_MODAL_",component:o["a"],cssClass:"large-modal",backdropDismiss:!1,componentProps:{appVersion:N["e"].getFullVersion(),apps:N["e"].getAvailableApps(),canClose:t}});n.present();const{data:a}=await n.onDidDismiss();if(a&&!Object(c["isEmpty"])(a))return sessionStorage.getItem(v.SUSPENDED_APP)&&sessionStorage.removeItem(v.SUSPENDED_APP),F(a,e)}async function B(){const e=sessionStorage.getItem(v.SUSPENDED_APP);if(e){const t=await Object(m["a"])("Do you want to resume "+e+" application?");if(t)return x()}}(function(e){e["SUSPENDED_APP"]="suspendedApp",e["APPLICATION_NAME"]="applicationName"})(v||(v={}));var L=t["a"]={doAppManagementTasks:B,resumeSuspendedApp:x,startApplication:F,switchAppWorkflow:V,selectApplication:R,getActiveApp:A}},"3e8d":function(e,t,n){},"3f31":function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));n("14d9");var a=n("7a23"),o=n("1c74");class i extends o["e"]{static read(e){return this.putJson("notifications/update",{alerts:e})}static unread(){return this.getJson("notifications")}}var c=n("9283"),r=n("afbc"),s=n("2ef0"),l=n("b5e4");const d=Object(a["ref"])([]);function u(){const e=Object(a["computed"])(()=>d.value.filter(e=>!e.read)),t=Object(a["computed"])(()=>d.value.length>0),n=Object(a["computed"])(()=>e.value.length>0),o=Object(a["computed"])(()=>e.value.length),u=Object(a["computed"])(()=>d.value.sort((e,t)=>new Date(e.date)>new Date(t.date)?-1:1));async function p(){const e=await i.unread();Object(s["isEmpty"])(e)||(d.value=e.map(e=>{let t="General",n=e.text,a=null;try{const o=JSON.parse(e.text);o["Type"].match(/lims/i)&&(t=`${o["Test type"]} results for ${o["ARV-Number"]||o["Accession number"]}`,n=`Ordered by <b>${o["Ordered By"]||"N/A"}</b>`,a=()=>r["a"].push("/art/encounters/lab/"+o["PatientID"]))}catch(o){console.warn(o)}return{handler:a,message:n,title:t,id:e.alert_id,date:c["b"].toStandardHisDisplayFormat(e.date_created)}}),Object(l["e"])(`You have ${e.length} unread notification(s)`))}async function m(){const e=d.value.filter(e=>!e.read);Object(s["isEmpty"])(e)||await i.read(e.map(e=>e.id))&&(d.value=d.value.map(e=>({...e,read:!0})))}function h(e){"function"===typeof e.handler&&e.handler()}return{markAllAsRead:m,openNotification:h,loadNotifications:p,sortedNotifications:u,hasUnreadNotifications:n,notificationCount:o,hasNotifications:t,notificationData:d}}},"454a":function(e,t,n){},"45b3":function(e,t,n){var a={"./ion-icon.entry.js":["ec64","chunk-2d2304d2"]};function o(e){if(!n.o(a,e))return Promise.resolve().then((function(){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}));var t=a[e],o=t[0];return n.e(t[1]).then((function(){return n(o)}))}o.keys=function(){return Object.keys(a)},o.id="45b3",e.exports=o},"4cf3":function(e,t,n){"use strict";n("3386")},"4db7":function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var a=n("ade3"),o=n("b89f"),i=n("bef6");class c extends o["a"]{constructor(e){super(),Object(a["a"])(this,"patient",void 0),Object(a["a"])(this,"baseUrl",void 0),Object(a["a"])(this,"useQrPrinting",void 0),this.patient=e,this.baseUrl=`patients/${this.patient}/labels/`,this.useQrPrinting=["RADIOLOGY","Registration"].includes(o["a"].getProgramName())}getLblUrl(e,t={}){const n=i["a"].parameterizeObjToString(t);return`${this.baseUrl}${e}${n?"?"+n:""}`}printPatientLbl(e,t={}){return this.printLbl(this.getLblUrl(e,t))}printFilingNumberLbl(){return this.printPatientLbl("filing_number")}printNidLbl(e=this.useQrPrinting){return this.printPatientLbl("national_health_id?qr_code="+e)}printVisitSummaryLbl(e=o["a"].getSessionDate()){const t=`programs/${o["a"].getProgramID()}/${this.baseUrl}/visits?date=${e}`;return this.printLbl(t)}printDemographicsLbl(){const e=`programs/${o["a"].getProgramID()}/${this.baseUrl}/patient_history`;return this.printLbl(e)}printTransferOutLbl(){return this.printPatientLbl("transfer_out")}printLabOrderLbl(e){return this.printLbl("lab/labels/order?order_id="+e)}}},"50e7":function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var a=n("1c74");class o extends a["e"]{constructor(){super()}static nextTask(e){return super.getJson(`/workflows/${super.getProgramID()}/${e}`,{date:super.getSessionDate()})}static async getNextTaskParams(e,t=""){let n=t;try{if(!n){const{name:t}=await o.nextTask(e);n=t}}catch(a){n=""}return{name:n.toLowerCase(),params:{patient_id:e}}}}},5383:function(e,t,n){"use strict";n("2a92")},"55ff":function(e,t,n){"use strict";n("ab67")},5713:function(e,t,n){"use strict";n.d(t,"a",(function(){return l}));var a=n("9ab4"),o=n("1c74"),i=n("8158"),c=n("8e3d"),r=n("b432");const s=Object(c["a"])("IndexedDBStorage");class l extends o["e"]{constructor(){super()}static getLocation(e){return this.getJson("locations/"+e)}static createAddress(e,t,n){return this.postJson("addresses",{address_type:e,addresses_name:t,parent_location:n})}static getLabs(e={}){return super.getJson(`/programs/${o["e"].getProgramID()}/lab_tests/labs`,e)}static getFacilities(e={}){return super.getJson("/locations",e)}static async getSpecialistClinics(){const e=await i["a"].getConceptID("Specialist clinic");return super.getJson("/concept_set",{id:e})}static getRegions(){return super.getJson("/regions")}static getDistricts(e){return super.getJson("/districts",{region_id:e,page_size:1e3})}static getVillages(e,t=""){return super.getJson("/villages",{traditional_authority_id:e,name:t})}static getTraditionalAuthorities(e,t=""){return super.getJson("/traditional_authorities",{district_id:e,name:t})}}function d(e){const t={districts:"region_id",traditional_authorities:"district_id",villages:"traditional_authority_id"};return function(n,a,o){const i=o.value;return o.value=async function(...n){const o=n[0],c={};if(!r["c"].value)return"getFacilities"==a?await s.getFromStorage(e,n[0]):(o&&(c[t[e]]=o),await s.getFromStorage(e,c));const l=i.apply(this,n);return l},o}}Object(a["e"])([d("locations")],l,"getFacilities",null),Object(a["e"])([d("regions")],l,"getRegions",null),Object(a["e"])([d("districts")],l,"getDistricts",null),Object(a["e"])([d("villages")],l,"getVillages",null),Object(a["e"])([d("traditional_authorities")],l,"getTraditionalAuthorities",null)},"580a":function(e,t,n){},"5df8":function(e,t,n){},6460:function(e,t,n){},"66fd":function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var a,o=n("ad49");function i(e){return o["a"].set(a.PACS_ENABLED,""+e)}function c(){return o["a"].isProp(a.PACS_ENABLED+"=true")}(function(e){e["PACS_ENABLED"]="enable_pacs"})(a||(a={})),t["b"]={enablePACs:i,isPACsEnabled:c}},"6be2":function(e,t,n){"use strict";n.d(t,"d",(function(){return i})),n.d(t,"g",(function(){return c})),n.d(t,"f",(function(){return r})),n.d(t,"e",(function(){return s})),n.d(t,"c",(function(){return l})),n.d(t,"b",(function(){return d})),n.d(t,"h",(function(){return p})),n.d(t,"a",(function(){return m}));var a=n("3800");const o=[a["k"],[["","Delete"]]],i=[a["i"],[["Delete"]]],c=[a["i"],[["Delete","Unknown"]]],r=[a["i"],[["N/A"],["Delete","Unknown"]]],s=[a["i"],[["Delete"]]],l=[a["i"],[["Unknown","Delete"],["Qwerty","A-Z"]]],d=[a["g"],[["Unknown"]]],u=[a["a"],[["0-9","Delete"],["Qwerty","Unknown"],["","Space"]]],p=[a["j"],[["","Delete"],["?123","0-9"],["Space","Unknown"]]],m=[{btn:"0-9",keyboard:l},{btn:"?123",keyboard:o},{btn:"A-Z",keyboard:u},{btn:"Qwerty",keyboard:p}]},"6be7":function(e,t,n){"use strict";n("75ba")},"6d73":function(e,t,n){},"744a":function(e,t,n){},"74f4":function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var a=n("ade3"),o=n("ad60"),i=n("cc6f"),c=n("b89f"),r=n("2ef0");class s extends o["a"]{constructor(e){super(),Object(a["a"])(this,"patientId",void 0),Object(a["a"])(this,"programId",void 0),Object(a["a"])(this,"stateId",void 0),Object(a["a"])(this,"patientProgramId",void 0),Object(a["a"])(this,"programDate",void 0),Object(a["a"])(this,"stateDate",void 0),this.patientId=e,this.patientProgramId=-1,this.programId=o["a"].getProgramID(),this.stateId=-1,this.programDate=o["a"].getSessionDate(),this.stateDate=""}getProgramId(){return this.programId}getStateDate(){return this.stateDate}getProgramDate(){return this.programDate}getPatientProgramId(){return this.patientProgramId}getPrograms(){return o["a"].getPatientPrograms(this.patientId)}async getProgram(){const e={patientID:-1,programID:-1,program:"N/A",outcome:"N/A",startDate:"",endDate:""},t=await this.getPrograms();if(Object(r["isEmpty"])(t))return e;const n=t.filter(e=>e.program.program_id===o["a"].getProgramID()).map(e=>{const t=e.patient_states;let n="",a="",o="N/A";if(!Object(r["isEmpty"])(t)){const e=t.length-1;n=t[e].start_date,a=t[e].end_date,o=t[e].name}return{patientID:e.patient_id,programID:e.program_id,program:e.program.name,outcome:o,startDate:n,endDate:a}});return Object(r["isEmpty"])(n)?e:n[0]}getProgramStates(){return o["a"].getPatientStates(this.patientId,this.programId)}voidProgram(e){return o["a"].voidProgram(this.patientProgramId,e)}voidState(e){return o["a"].voidState(this.patientId,this.programId,this.stateId,e)}enrollProgram(){return o["a"].enrollProgram(this.patientId,this.programId,this.programDate)}printTransferout(e){const t=new c["a"];return t.printLbl(`/programs/${this.programId}/patients/${this.patientId}/labels/transfer_out?date=${e}`)}async transferOutEncounter(e){const t=new i["a"](this.patientId,119);t.setDate(this.stateDate);const n=await t.createEncounter();if(!n)throw"Unable to transfer out encounter";return t.saveValueTextObs("Transfer to",e.name)}updateState(){return o["a"].createState(this.patientId,this.programId,{state:this.stateId,date:this.stateDate})}setProgramDate(e){this.programDate=e}setStateDate(e){this.stateDate=e}setPatientProgramId(e){this.patientProgramId=e}setProgramId(e){this.programId=e}setStateId(e){this.stateId=e}}},"75ba":function(e,t,n){},7708:function(e,t,n){},7941:function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));const a=(e,t)=>{const n=e.filter(e=>e.person_attribute_type_id==t);return n.length>0?n[0].value:""}},7957:function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var a=n("8158"),o=n("9283"),i=n("2ef0");class c extends a["a"]{constructor(){super()}static get(e){return super.getJson("/observations/"+e)}static create(e){return super.postJson("/observations",e)}static voidObs(e){return super.void("observations/"+e,{})}static saveObs(e,t){return this.create({encounter_id:e,observations:[t]})}static saveObsArray(e,t){return this.create({encounter_id:e,observations:t})}static async buildValueCoded(e,t,n=this.getSessionDate()){const o=await a["a"].getConceptID(e,!0),i="number"===typeof t?t:await a["a"].getConceptID(t,!0);return{concept_id:o,value_coded:i,obs_datetime:n}}static async buildValueCodedFromConceptId(e,t,n=this.getSessionDate()){const o=await a["a"].getConceptID(e,!0);return{concept_id:o,value_coded:t,obs_datetime:n}}static async buildValueText(e,t,n=this.getSessionDate()){const o=await a["a"].getConceptID(e,!0);return{concept_id:o,value_text:t,obs_datetime:n}}static async buildValueNumber(e,t,n=null,o=null,i=this.getSessionDate()){const c=await a["a"].getConceptID(e,!0),r={concept_id:c,value_numeric:t,obs_datetime:i};return n&&Object.assign(r,{value_modifier:n}),o&&Object.assign(r,{order_id:o}),r}static async buildValueDate(e,t,n=this.getSessionDate()){const o=await a["a"].getConceptID(e,!0);return{concept_id:o,value_datetime:t,obs_datetime:n}}static getObservations(e,t){return super.getJson(`/observations?person_id=${e}&concept_id=${t}`)}static getObs(e){return super.getJson("/observations",e)}static async getFirstObs(e,t,n=this.getSessionDate(),o=!0){const r=await a["a"].getConceptID(t,o),s=await c.getObs({person_id:e,concept_id:r,date:n,page_size:1});if(!Object(i["isEmpty"])(s)){const[e]=s;return"number"===typeof e["value_coded"]&&(e["value_coded"]=await a["a"].getConceptName(e["value_coded"])),e}}static obsInValidPeriod(e){return e&&a["a"].getSessionDate()>=o["b"].toStandardHisFormat(e.obs_datetime)}static async getFirstObsValue(e,t,n,a=this.getSessionDate(),o=!0){const c=await this.getFirstObs(e,t,a,o);if(!Object(i["isEmpty"])(c))return c[n]}static async getAll(e,t,n=this.getSessionDate(),o=!0){const c=await a["a"].getConceptID(t,o),r=await this.getObs({person_id:e,concept_id:c,date:n});if(!Object(i["isEmpty"])(r))return r}static async getAllValueCoded(e,t,n=this.getSessionDate(),o=!0){const c=await this.getAll(e,t,n,o);return Object(i["isEmpty"])(c)?[]:Promise.all(c.map(e=>a["a"].getConceptName(e["value_coded"])))}static getFirstValueText(e,t,n=this.getSessionDate(),a=!0){return this.getFirstObsValue(e,t,"value_text",n,a)}static getFirstValueCoded(e,t,n=this.getSessionDate(),a=!0){return this.getFirstObsValue(e,t,"value_coded",n,a)}static getFirstValueNumber(e,t,n=this.getSessionDate(),a=!0){return this.getFirstObsValue(e,t,"value_numeric",n,a)}static getFirstValueDatetime(e,t,n=this.getSessionDate(),a=!0){return this.getFirstObsValue(e,t,"value_datetime",n,a)}static getFirstObsDatetime(e,t,n=this.getSessionDate(),a=!0){return this.getFirstObsValue(e,t,"obs_datetime",n,a)}static async resolvePrimaryValue(e){let t="";return null!=e.value_datetime&&(t=o["b"].toStandardHisDisplayFormat(e.value_datetime)),null!=e.value_text&&(t=e.value_text),null!=e.value_numeric&&(t=e.value_numeric),null!=e.value_coded&&(t=await super.getConceptName(e.value_coded)),null!=e.value_modifier&&(t=`${t} ${e.value_modifier}`),t}}},"7def":function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var a=n("1c74");const o=e=>{const t=e.given_name,n=e.family_name,a=e.middle_name?e.middle_name:"";return`${t} ${a} ${n}`};var i=n("7941"),c=n("2ef0");class r extends a["e"]{constructor(){super()}static getRelationships(e){return super.getJson(`/people/${e}/relationships`)}static async getGuardianDetails(e){return await this.getRelationships(e).then(e=>e.map(e=>{const t=Object(c["get"])(e,"relation.names[0]");return{name:t?o(t):"",relationshipType:Object(c["get"])(e,"type.b_is_to_a",""),phoneNumber:Object(i["a"])(Object(c["get"])(e,"relation.person_attributes",[]),12)}}))}}},"7e73":function(e,t,n){"use strict";n("13d5"),n("14d9");function a(e,t=2){return e.reduce((n,a,o)=>(o%t===0&&n.push(e.slice(o,o+t)),n),[])}function o(e,t){return Object.keys(e).sort((e,n)=>t(e,n)).reduce((t,n)=>(t[n]=e[n],t),{})}t["a"]={convertArrayToTurples:a,orderObj:o}},"7ea3":function(e,t,n){},"7f35":function(e,t,n){"use strict";n.d(t,"d",(function(){return E})),n.d(t,"b",(function(){return C})),n.d(t,"a",(function(){return D})),n.d(t,"c",(function(){return N}));var a=n("7a23");function o(e,t,n,o,i,c){const r=Object(a["resolveComponent"])("action-header"),s=Object(a["resolveComponent"])("his-table"),l=Object(a["resolveComponent"])("ion-content"),d=Object(a["resolveComponent"])("action-footer");return Object(a["openBlock"])(),Object(a["createElementBlock"])(a["Fragment"],null,[Object(a["createVNode"])(r,{title:e.title,subtitle:e.subtitle,color:e.color},null,8,["title","subtitle","color"]),Object(a["createVNode"])(l,null,{default:Object(a["withCtx"])(()=>[Object(a["createVNode"])(s,{columns:e.columns,rowColors:e.rowColors,rows:e.rows},null,8,["columns","rowColors","rows"])]),_:1}),Object(a["createVNode"])(d,{buttons:e.actionButtons},null,8,["buttons"])],64)}var i=n("a3a5"),c=n("8efc"),r=Object(a["defineComponent"])({mixins:[c["a"]],components:{HisTable:i["a"]},props:{rowColors:{type:Object},columns:{type:Object,required:!0},rows:{type:Object,required:!0}}}),s=n("d959"),l=n.n(s);const d=l()(r,[["render",o]]);var u=d;const p={class:"info-content his-md-text"},m=["innerHTML"];function h(e,t,n,o,i,c){const r=Object(a["resolveComponent"])("action-header"),s=Object(a["resolveComponent"])("ion-content"),l=Object(a["resolveComponent"])("action-footer");return Object(a["openBlock"])(),Object(a["createElementBlock"])(a["Fragment"],null,[Object(a["createVNode"])(r,{title:e.title,subtitle:e.subtitle,color:e.color},null,8,["title","subtitle","color"]),Object(a["createVNode"])(s,null,{default:Object(a["withCtx"])(()=>[Object(a["createElementVNode"])("div",p,[Object(a["createElementVNode"])("h2",{class:Object(a["normalizeClass"])(e.color)},Object(a["toDisplayString"])(e.bodyTitle),3),Object(a["createElementVNode"])("p",{class:"description",innerHTML:e.bodyText},null,8,m)])]),_:1}),Object(a["createVNode"])(l,{buttons:e.actionButtons},null,8,["buttons"])],64)}var b=Object(a["defineComponent"])({mixins:[c["a"]],props:{bodyTitle:{type:String,required:!0},bodyText:{type:String,required:!1}}});n("55ff");const g=l()(b,[["render",h],["__scopeId","data-v-1c798292"]]);var f=g,_=n("1b47");const v=["innerHTML"];function O(e,t,n,o,i,c){const r=Object(a["resolveComponent"])("action-header"),s=Object(a["resolveComponent"])("ion-content"),l=Object(a["resolveComponent"])("action-footer");return Object(a["openBlock"])(),Object(a["createElementBlock"])(a["Fragment"],null,[Object(a["createVNode"])(r,{title:e.title,subtitle:e.subtitle,color:e.color},null,8,["title","subtitle","color"]),Object(a["createVNode"])(s,null,{default:Object(a["withCtx"])(()=>[Object(a["createElementVNode"])("ul",null,[(Object(a["openBlock"])(!0),Object(a["createElementBlock"])(a["Fragment"],null,Object(a["renderList"])(e.list,(e,t)=>(Object(a["openBlock"])(),Object(a["createElementBlock"])("li",{key:t},[Object(a["createElementVNode"])("span",{class:"his-md-text",innerHTML:e},null,8,v)]))),128))])]),_:1}),Object(a["createVNode"])(l,{buttons:e.actionButtons},null,8,["buttons"])],64)}var y=Object(a["defineComponent"])({mixins:[c["a"]],props:{list:{type:Array,required:!0}}});n("4cf3");const T=l()(y,[["render",O],["__scopeId","data-v-d609962e"]]);var j=T,k=n("d867");function I(){const e=(t,n)=>{setTimeout(()=>{const a=document.getElementsByClassName("modal-wrapper");if(a.length){const o=a[0],i=o.getElementsByTagName("ion-header");i.length>=2?i[1].remove():t<20&&e(t+1,n+100);const c=o.getElementsByTagName("ion-content");c.length>=2&&c[1].remove();const r=o.getElementsByTagName("ion-footer");r.length>=2&&r[1].parentElement&&r[1].parentElement.remove()}else t<5&&e(t+1,n+100)},n)};e(0,0)}async function E(e,t,n,a,o,i="",c=[]){const r=await k["ab"].create({component:u,backdropDismiss:!1,cssClass:"action-sheet-modal",componentProps:{title:e,subtitle:t,columns:n,rows:a,rowColors:c,actionButtons:o,color:i}});await r.present(),I();const{data:s}=await r.onDidDismiss();return s.action}async function C(e,t,n,a,o=""){const i=await k["ab"].create({component:j,backdropDismiss:!1,cssClass:"action-sheet-modal",componentProps:{title:e,subtitle:t,actionButtons:a,list:n,color:o}});await i.present(),I();const{data:c}=await i.onDidDismiss();return c.action}async function D(e,t,n,a,o=""){const i=await k["ab"].create({component:f,backdropDismiss:!1,cssClass:"action-sheet-modal",componentProps:{title:e,bodyTitle:t,bodyText:n,actionButtons:a,color:o}});await i.present(),I();const{data:c}=await i.onDidDismiss();return c.action}async function N(e,t,n,a,o="darkred",i="action-sheet-modal"){const c=await k["ab"].create({component:_["a"],backdropDismiss:!1,cssClass:i,componentProps:{title:e,subtitle:t,color:o,list:n,actionButtons:a}});await c.present(),I();const{data:r}=await c.onDidDismiss();return r}},8081:function(e,t,n){"use strict";n("85a2")},"80e3":function(e,t,n){"use strict";var a=n("7a23");const o={key:0,class:"stick-report-header"},i=["colspan","onClick"],c={key:1},r=["colspan"],s={key:2},l=["colspan"],d={key:0},u=["onClick"],p={key:1},m=["innerHTML"],h={key:0,class:"no-data-section vertically-align"},b={key:0},g={key:1};function f(e,t,n,f,_,v){const O=Object(a["resolveComponent"])("ion-icon"),y=Object(a["resolveComponent"])("ion-skeleton-text"),T=Object(a["resolveComponent"])("ion-button");return Object(a["openBlock"])(),Object(a["createElementBlock"])(a["Fragment"],null,[Object(a["createElementVNode"])("table",{class:Object(a["normalizeClass"])(["report-table",e.config.tableCssTheme||""])},[e.tableColumns?(Object(a["openBlock"])(),Object(a["createElementBlock"])("thead",o,[(Object(a["openBlock"])(!0),Object(a["createElementBlock"])(a["Fragment"],null,Object(a["renderList"])(e.tableColumns,(t,n)=>(Object(a["openBlock"])(),Object(a["createElementBlock"])("tr",{key:n},[(Object(a["openBlock"])(!0),Object(a["createElementBlock"])(a["Fragment"],null,Object(a["renderList"])(t,(t,o)=>(Object(a["openBlock"])(),Object(a["createElementBlock"])("th",{key:o,colspan:t.colspan||0,onClick:n=>e.sort(o,t),style:Object(a["normalizeStyle"])(t.style),class:Object(a["normalizeClass"])(t.cssClass)},[Object(a["createTextVNode"])(Object(a["toDisplayString"])(t.th)+" ",1),e.sortedIndex===o&&t.sortable&&n+1===e.tableColumns.length?(Object(a["openBlock"])(),Object(a["createBlock"])(O,{key:0,icon:"ascSort"===e.sortOrder?e.arrowUp:e.arrowDown},null,8,["icon"])):Object(a["createCommentVNode"])("",!0)],14,i))),128))]))),128))])):Object(a["createCommentVNode"])("",!0),e.isLoading?(Object(a["openBlock"])(),Object(a["createElementBlock"])("tbody",c,[(Object(a["openBlock"])(!0),Object(a["createElementBlock"])(a["Fragment"],null,Object(a["renderList"])(e.skeletonRows,(t,n)=>(Object(a["openBlock"])(),Object(a["createElementBlock"])("tr",{key:n},[Object(a["createElementVNode"])("td",{colspan:e.columnLength},[Object(a["createVNode"])(y,{animated:"",style:{width:"100%",height:"30px"}})],8,r)]))),128))])):Object(a["createCommentVNode"])("",!0),e.noData?Object(a["createCommentVNode"])("",!0):(Object(a["openBlock"])(),Object(a["createElementBlock"])("tbody",s,[(Object(a["openBlock"])(!0),Object(a["createElementBlock"])(a["Fragment"],null,Object(a["renderList"])(e.activeRows,(e,t)=>(Object(a["openBlock"])(),Object(a["createElementBlock"])("tr",{key:t},[(Object(a["openBlock"])(!0),Object(a["createElementBlock"])(a["Fragment"],null,Object(a["renderList"])(e,(e,t)=>{var n,o,i;return Object(a["openBlock"])(),Object(a["createElementBlock"])("td",{key:t,colspan:e.colspan||0,class:Object(a["normalizeClass"])(e.cssClass),style:Object(a["normalizeStyle"])(e.style)},[e.event?(Object(a["openBlock"])(),Object(a["createElementBlock"])("div",d,["link"===(null===e||void 0===e||null===(n=e.event)||void 0===n?void 0:n.obj)?(Object(a["openBlock"])(),Object(a["createElementBlock"])("a",{key:0,href:"#",class:Object(a["normalizeClass"])(["his-sm-text",e.cssClass]),style:Object(a["normalizeStyle"])(e.style),onClick:Object(a["withModifiers"])(t=>e.event.click(),["prevent"])},Object(a["toDisplayString"])(e.td),15,u)):Object(a["createCommentVNode"])("",!0),"button"===e.event.obj?(Object(a["openBlock"])(),Object(a["createBlock"])(T,{key:1,color:(null===e||void 0===e||null===(o=e.event)||void 0===o?void 0:o.color)||"",class:Object(a["normalizeClass"])(e.cssClass),style:Object(a["normalizeStyle"])(e.style),disabled:void 0!=(null===e||void 0===e||null===(i=e.event)||void 0===i?void 0:i.disabled)&&!0===e.event.disabled,onClick:t=>e.event.click()},{default:Object(a["withCtx"])(()=>[Object(a["createTextVNode"])(Object(a["toDisplayString"])(e.td),1)]),_:2},1032,["color","class","style","disabled","onClick"])):Object(a["createCommentVNode"])("",!0)])):(Object(a["openBlock"])(),Object(a["createElementBlock"])("div",p,[Object(a["createElementVNode"])("span",{class:"his-sm-text",innerHTML:e.td},null,8,m)]))],14,l)}),128))]))),128))]))],2),e.noData?(Object(a["openBlock"])(),Object(a["createElementBlock"])("h1",h,[e.errorMessage?(Object(a["openBlock"])(),Object(a["createElementBlock"])("span",b,Object(a["toDisplayString"])(e.errorMessage),1)):(Object(a["openBlock"])(),Object(a["createElementBlock"])("span",g," No data available in table "))])):Object(a["createCommentVNode"])("",!0)],64)}n("14d9");var _=n("ff79"),v=n("9ceb"),O=n("2ef0"),y=n("8734"),T=n("b5e4"),j=n("d867"),k=Object(a["defineComponent"])({emits:["onActiveRows","onActiveColumns","onPagination","onIsLoading","onTableRows"],components:{IonButton:j["d"],IonIcon:j["r"],IonSkeletonText:j["N"]},props:{config:{type:Object,default:()=>({})},columns:{type:Object,required:!0},rows:{type:Array,default:()=>[]},newPage:{type:Number},rowsPerPage:{type:Number},asyncRows:{type:Function},asyncRowParser:{type:Function},rowParser:{type:Function},searchFilter:{type:String},showFilters:{type:Boolean,default:!1},paginated:{type:Boolean,default:!1}},data:()=>({arrowUp:_["h"],arrowDown:_["g"],caretBack:_["j"],caretForward:_["l"],sortedIndex:-1,sortOrder:"descSort",tableColumns:[],tableRows:[],paginatedRows:[],activeRows:[],currentPage:0,itemsPerPage:20,isLoading:!1,errorMessage:""}),watch:{isLoading:{handler(e){"boolean"===typeof e&&this.$emit("onIsLoading",e)},immediate:!0},newPage:{handler(e){"number"===typeof e&&this.onChangePage(e)},immediate:!0},rowsPerPage:{handler(e){"number"===typeof e&&(this.itemsPerPage=e)},immediate:!0},async itemsPerPage(e){Object(O["isEmpty"])(this.tableRows)||(this.currentPage=0,await Object(y["a"])(100),this.paginateTableRows(e),await this.setPage(this.currentPage))},tableRows:{handler(e){Object(O["isEmpty"])(e)||this.$emit("onTableRows",e)},immediate:!0,deep:!0},searchFilter(e){e?this.activeRows=this.searchDataSet(e,this.tableRows):this.paginated?this.setPage(this.currentPage):this.activeRows=this.tableRows},activeRows:{handler(e){this.$emit("onActiveRows",e)},immediate:!0,deep:!0},columns:{handler(e){if(!Object(O["isEmpty"])(e)){if(this.showIndex()){const e=[...this.columns],t=this.columns.length-1;e[t]=[v["a"].thNum("#"),...e[t]],this.tableColumns=e}else this.tableColumns=e;this.$emit("onActiveColumns",this.tableColumns)}},immediate:!0,deep:!0},asyncRows:{async handler(e){if(this.errorMessage="","function"===typeof e){this.isLoading=!0;try{this.tableRows=this.addColumnIndexes(await e()),this.paginated?(this.paginateTableRows(),await this.setPage(0)):this.activeRows=this.tableRows}catch(t){this.errorMessage=""+t,Object(T["c"])(""+t),console.error(t)}this.isLoading=!1}},immediate:!0,deep:!0},rows:{async handler(e){if(this.errorMessage="",!e||Object(O["isEmpty"])(e))return this.activeRows=[],void(this.tableRows=[]);this.tableRows=this.addColumnIndexes(e),this.paginated?(this.paginateTableRows(),await this.setPage(0)):this.activeRows=this.tableRows},immediate:!0,deep:!0}},methods:{showIndex(){return!(!this.config||!("showIndex"in this.config))&&this.config.showIndex},addColumnIndexes(e){return this.showIndex()?e.map((e,t)=>{const n=[v["a"].td(t+1)];return Array.isArray(e)?n.concat(e):[...n,e]}):e},paginateTableRows(e=0){this.paginatedRows=Object(O["chunk"])(this.tableRows,e||this.itemsPerPage),this.$emit("onPagination",this.paginatedRows)},async setPage(e){this.activeRows=[];const t=this.paginatedRows[e];if(t){try{if("function"===typeof this.asyncRowParser){this.activeRows=t;for(const e in t)this.activeRows[e]=await this.asyncRowParser(t[e])}else this.isLoading=!0,this.activeRows="function"===typeof this.rowParser?await this.rowParser(t):t}catch(n){Object(T["c"])(""+n),this.errorMessage=""+n,console.error(n)}this.isLoading=!1}},async sort(e,t){this.showIndex()&&"function"===typeof this.rowParser&&0!=e||(e===this.sortedIndex?this.sortOrder="ascSort"===this.sortOrder?"descSort":"ascSort":this.sortOrder="ascSort",this.sortedIndex=e,this.sortOrder in t&&(this.paginated?(this.tableRows=t[this.sortOrder](e,this.tableRows),this.paginateTableRows(),await this.setPage(this.currentPage)):this.activeRows=t[this.sortOrder](e,this.tableRows)))},searchDataSet(e,t){return t.filter(t=>{var n;const a=null===(n=JSON.stringify(t).match(/"td":"(.*?)"/g))||void 0===n?void 0:n.join(" ").replace(/"td":|"/g,"");return(null===a||void 0===a?void 0:a.match(new RegExp(e,"i")))||!1})},async onChangePage(e){this.currentPage=e,await this.setPage(e)}},computed:{noData(){return!this.isLoading&&Object(O["isEmpty"])(this.activeRows)},columnLength(){try{return this.tableColumns[0].length}catch(e){return console.warn(e),5}},skeletonRows(){const e=[],t=this.config.skeletonTextRows?this.config.skeletonTextRows:10;for(let n=0;n<t;++n)e.push(n);return e}}}),I=(n("6be7"),n("d959")),E=n.n(I);const C=E()(k,[["render",f],["__scopeId","data-v-bde6a7c4"]]);t["a"]=C},8158:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var a=n("1c74"),o=[{name:"Re-Test",concept_id:10616,categories:["hts_program_concept"]},{name:"Refer client to HIV Clinic",concept_id:10647,categories:["hts_program_concept"]},{name:"Died",concept_id:1742,categories:["hts_program_concept"]},{name:"Already on ART",concept_id:10625,categories:["hts_program_concept"]},{name:"Reason for not giving self-test kit",concept_id:10633,categories:["hts_program_concept"]},{name:"Reason for not giving FRS",concept_id:10635,categories:["hts_program_concept"]},{name:"Index patient",concept_id:8020,categories:["hts_program_concept"]},{name:"No partner",concept_id:1914,categories:["hts_program_concept"]},{name:"Most recent drug taken",concept_id:10651,categories:["hts_program_concept"]},{name:"Immediate Repeat Test 1 Result",concept_id:9785,categories:["hts_program_concept"]},{name:"Inconclusive",concept_id:10609,categories:["hts_program_concept"]},{name:"Kit name",concept_id:10653,categories:["hts_program_concept"]},{name:"Self-Test kit given",concept_id:10632,categories:["hts_program_concept"]},{name:"Contact HIV test date",concept_id:10627,categories:["hts_program_concept"]},{name:"Passive",concept_id:10642,categories:["hts_program_concept"]},{name:"FRS given",concept_id:10634,categories:["hts_program_concept"]},{name:"Contact current region",concept_id:10628,categories:["hts_program_concept"]},{name:"Contact current district",concept_id:10629,categories:["hts_program_concept"]},{name:"Contact current TA",concept_id:10630,categories:["hts_program_concept"]},{name:"Contact current village",concept_id:10631,categories:["hts_program_concept"]},{name:"Contact Date ART started",concept_id:10640,categories:["hts_program_concept"]},{name:"Contact ART number at previous location",concept_id:10641,categories:["hts_program_concept"]},{name:"Contact appointment date",concept_id:10636,categories:["hts_program_concept"]},{name:"Referral type",concept_id:10624,categories:["hts_program_concept"]},{name:"Contact location of ART initiation",concept_id:10639,categories:["hts_program_concept"]},{name:"Contact Appointment location",concept_id:10637,categories:["hts_program_concept"]},{name:"Contact ever registered at ART clinic",concept_id:10638,categories:["hts_program_concept"]},{name:"HTC serial number",concept_id:7879,categories:["hts_program_concept"]},{name:"Comments",concept_id:2592,categories:["hts_program_concept"]},{name:"Linked",concept_id:10645,categories:["hts_program_concept"]},{name:"Art number",concept_id:7014,categories:["hts_program_concept"]},{name:"DBS (Free drop to DBS card)",concept_id:10095,categories:["hts_program_concept"]},{name:"Referral for Re-Testing",concept_id:9762,categories:["hts_program_concept"]},{categories:["hts_program_concept"],concept_id:10609,name:"Inconclusive"},{categories:["hts_program_concept"],concept_id:9775,name:"New inconclusive"},{categories:["hts_program_concept"],concept_id:10650,name:"Taken Prep before"},{categories:["hts_program_concept"],concept_id:10648,name:"Taken ARV Before"},{categories:["hts_program_concept"],concept_id:10649,name:"Taken PEP before"},{categories:["hts_program_concept"],concept_id:9773,name:"New Negative"},{categories:["hts_program_concept"],concept_id:10655,name:"Self test distribution"},{categories:["hts_program_concept"],name:"Visit type",concept_id:5315},{categories:["hts_program_concept"],concept_id:1,name:"Kit lot number"},{categories:["hts_program_concept"],concept_id:2,name:"Kit expiry date"},{categories:["hts_program_concept"],concept_id:10644,name:"Invalid or inconclusive"},{categories:["art_program_concept","hts_program_concept"],concept_id:856,name:"HIV viral load"},{categories:["hts_program_concept"],concept_id:1325,name:"Patient contacts construct"},{categories:["hts_program_concept"],concept_id:10601,name:"Self-Test and FRS"},{categories:["hts_program_concept"],concept_id:10602,name:"Dual referral"},{categories:["hts_program_concept"],concept_id:10600,name:"Contact referral"},{categories:["hts_program_concept"],concept_id:10599,name:"Provider referral"},{categories:["hts_program_concept"],concept_id:10598,name:"Notification Means"},{categories:["hts_program_concept"],concept_id:10597,name:"Consent to contact the contact"},{categories:["hts_program_concept"],concept_id:10594,name:"IPV Status"},{categories:["hts_program_concept"],concept_id:10591,name:"Biological Parents"},{categories:["hts_program_concept"],concept_id:10590,name:"Biological Children"},{categories:["hts_program_concept"],concept_id:1328,name:"Relationships of contact"},{categories:["hts_program_concept"],concept_id:10593,name:"Contact physical address"},{categories:["hts_program_concept"],concept_id:6194,name:"Contact phone number"},{categories:["hts_program_concept"],concept_id:2724,name:"Last name of contact"},{categories:["hts_program_concept"],concept_id:2725,name:"First name of contact"},{categories:["hts_program_concept"],concept_id:10621,name:"Un-assisted"},{categories:["hts_program_concept"],concept_id:2844,name:"Female"},{categories:["hts_program_concept"],concept_id:10018,name:"Positive NOT on ART"},{categories:["hts_program_concept"],concept_id:10017,name:"Positive on ART"},{categories:["hts_program_concept"],concept_id:1059,name:"Widowed"},{categories:["hts_program_concept"],concept_id:1755,name:"Pregnant woman"},{categories:["hts_program_concept"],concept_id:5272,name:"Pregnancy status"},{categories:["hts_program_concept"],concept_id:10573,name:"DBS Specimen ID"},{categories:["hts_program_concept"],concept_id:10581,name:"Is DBS Sample Collected"},{categories:["hts_program_concept"],concept_id:10576,name:"Recent"},{categories:["hts_program_concept"],concept_id:9828,name:"Invalid"},{categories:["hts_program_concept"],concept_id:9439,name:"Risk assessment not done"},{categories:["hts_program_concept"],concept_id:9438,name:"High risk event in last 3 months"},{categories:["hts_program_concept"],concept_id:9749,name:"On-going risk"},{categories:["hts_program_concept"],concept_id:10579,name:"PrEP or infant NVP"},{categories:["hts_program_concept"],concept_id:9985,name:"Time of HIV test"},{categories:["hts_program_concept"],concept_id:3396,name:"Professional"},{categories:["hts_program_concept"],concept_id:10609,name:"Inconclusive"},{categories:["hts_program_concept"],concept_id:10612,name:"Exposed infant"},{categories:["hts_program_concept"],concept_id:10610,name:"Community"},{categories:["hts_program_concept"],concept_id:9601,name:"Refused"},{categories:["hts_program_concept"],concept_id:10614,name:"Link"},{categories:["hts_program_concept"],concept_id:9794,name:"Outcome date"},{categories:["hts_program_concept"],concept_id:1272,name:"Referrals ordered"},{categories:["hts_program_concept"],concept_id:10589,name:"Sexual Partner"},{categories:["hts_program_concept"],concept_id:9726,name:"Self"},{categories:["hts_program_concept"],concept_id:2843,name:"Male"},{categories:["hts_program_concept"],concept_id:10611,name:"Directly-assisted"},{categories:["hts_program_concept"],concept_id:1329,name:"Age of contact"},{categories:["hts_program_concept"],concept_id:10608,name:"Self-test end user"},{categories:["hts_program_concept"],concept_id:10592,name:"Self-Test Kit"},{categories:["hts_program_concept"],concept_id:10607,name:"Self-test approach"},{categories:["hts_program_concept"],concept_id:7859,name:"Female condoms"},{categories:["hts_program_concept"],concept_id:2845,name:"Gender of contact"},{categories:["hts_program_concept"],concept_id:7858,name:"Male condoms"},{categories:["hts_program_concept"],concept_id:9420,name:"Consent Confirmation"},{categories:["hts_program_concept"],concept_id:10011,name:"Referral location"},{categories:["hts_program_concept"],concept_id:3576,name:"ART referral"},{categories:["hts_program_concept"],concept_id:2530,name:"Antiretroviral status or outcome"},{categories:["hts_program_concept"],concept_id:10575,name:"Long-Term"},{categories:["hts_program_concept"],concept_id:9774,name:"New Positive"},{categories:["hts_program_concept"],concept_id:9437,name:"Low risk"},{categories:["hts_program_concept"],concept_id:10578,name:"PEP"},{categories:["hts_program_concept"],concept_id:8019,name:"Health Facility"},{categories:["hts_program_concept"],concept_id:9432,name:"Never Tested"},{categories:["hts_program_concept"],concept_id:9485,name:"Test 2"},{categories:["hts_program_concept"],concept_id:10574,name:"Recency Test"},{categories:["hts_program_concept"],concept_id:9427,name:"client risk category"},{categories:["hts_program_concept"],concept_id:1377,name:"HIV group"},{categories:["hts_program_concept"],concept_id:9756,name:"HTS Access Type"},{categories:["hts_program_concept"],concept_id:9486,name:"Test 3"},{categories:["hts_program_concept"],concept_id:9484,name:"Test 1"},{categories:["hts_program_concept"],concept_id:10572,name:"Hepatitis B Test Result"},{categories:["hts_program_concept"],concept_id:10577,name:"Patient consents to recency test"},{categories:["hts_program_concept"],concept_id:7984,name:"Syphilis Test Result"},{categories:["hts_program_concept"],concept_id:2170,name:"Location where test took place"},{categories:["hts_program_concept"],concept_id:10582,name:"Time since last taken medication"},{categories:["hts_program_concept"],concept_id:1289,name:"Antiretroviral medication history"},{categories:["hts_program_concept"],concept_id:9236,name:"Given drugs"},{categories:["hts_program_concept"],concept_id:9750,name:"HIV unknown"},{categories:["hts_program_concept"],concept_id:9760,name:"Partner HIV Status"},{categories:["hts_program_concept"],concept_id:9761,name:"Partner present"},{categories:["hts_program_concept"],concept_id:10620,name:"Single"},{categories:["hts_program_concept"],concept_id:9579,name:"Circumcision status"},{categories:[],concept_id:5680,name:"Active"},{categories:[],concept_id:7795,name:"ART"},{categories:[],concept_id:10609,name:"Inconclusive"},{categories:[],concept_id:10588,name:"Positive ART unknown"},{categories:[],concept_id:412,name:"ARV"},{categories:[],concept_id:1333,name:"Contact HIV tested"},{categories:[],concept_id:9758,name:"FRS"},{categories:[],concept_id:8259,name:"Routine TB Screening"},{categories:[],concept_id:7459,name:"TB Status"},{categories:[],concept_id:7454,name:"TB Not Suspected",shortName:"Nosup"},{categories:[],concept_id:7455,name:"TB Suspected"},{categories:[],concept_id:6195,name:"Why does the woman not use birth control"},{categories:[],concept_id:6328,name:"New"},{categories:[],concept_id:7977,name:"Hemorrhage"},{categories:[],concept_id:7156,name:"Eclampsia"},{categories:[],concept_id:8758,name:"Episiotomy"},{categories:[],concept_id:228,name:"APH"},{categories:[],concept_id:230,name:"PPH"},{categories:[],concept_id:2895,name:"Alive"},{categories:[],concept_id:9656,name:"Previous HIV Test Results"},{categories:[],concept_id:2473,name:"B-HCG"},{categories:[],concept_id:9655,name:"Previous HIV Test Done"},{categories:[],concept_id:9657,name:"Previous HIV Test Date"},{categories:[],concept_id:3340,name:"Currently taking alcohol"},{categories:[],concept_id:1057,name:"Never Married"},{categories:[],concept_id:5555,name:"Married"},{categories:[],concept_id:1056,name:"Seperated"},{categories:[],concept_id:1058,name:"Divorced"},{categories:[],concept_id:6686,name:"Ultrasound"},{categories:[],concept_id:7433,name:"Presentation"},{categories:[],concept_id:7979,name:"Fetal Heart Beat"},{categories:[],concept_id:9637,name:"Fetal movement heard"},{categories:[],concept_id:9562,name:"Fetal movement felt"},{categories:[],concept_id:7835,name:"Fundus"},{categories:[],concept_id:7837,name:"Position"},{categories:[],concept_id:7142,name:"Multiple gestation"},{categories:[],concept_id:7919,name:"LIQUOR"},{categories:[],concept_id:9563,name:"Last Fetal movement felt"},{categories:[],concept_id:7836,name:"Lie"},{categories:[],concept_id:9654,name:"Fetal heart movement seen"},{categories:[],concept_id:7839,name:"Fetal heart rate"},{categories:["anc_medical_history"],concept_id:5,name:"Asthma"},{categories:["anc_medical_history"],concept_id:155,name:"Epilepsy"},{categories:["anc_medical_history"],concept_id:174,name:"Sexually transmitted infection"},{categories:["anc_medical_history"],concept_id:1063,name:"Blood transfusion"},{categories:["anc_medical_history"],concept_id:6033,name:"Renal disease"},{categories:["anc_medical_history"],concept_id:7978,name:"Spine/Leg Deformity"},{categories:["anc_medical_history"],concept_id:8809,name:"Hypertension"},{categories:[],concept_id:7439,name:"Procedure done"},{categories:["anc_surgical_history"],concept_id:1171,name:"Caesarean section"},{categories:["anc_surgical_history"],concept_id:1719,name:"Tubal ligation"},{categories:["anc_surgical_history"],concept_id:3593,name:"Biopsy"},{categories:["anc_surgical_history","reason_for_no_cxca"],concept_id:5276,name:"Hysterectomy"},{categories:["anc_surgical_history"],concept_id:7440,name:"Uterine evacuation"},{categories:["anc_surgical_history"],concept_id:7441,name:"Exam under anaesthesia"},{categories:["anc_surgical_history"],concept_id:7443,name:"Total abdominal hysterectomy +/- adnexectomy"},{categories:["anc_surgical_history"],concept_id:7444,name:"Subtotal abdominal hysterectomy +/- adnexectomy"},{categories:["anc_surgical_history"],concept_id:7462,name:"Suturing of cervical or vaginal injury under anaesthesia"},{categories:["anc_surgical_history"],concept_id:7469,name:"Vaginal Reconstruction"},{categories:["anc_surgical_history"],concept_id:7470,name:"Exploratory laparatomy +/- adnexectomy"},{categories:["anc_surgical_history"],concept_id:7471,name:"Cauterization of vulva or perineal warts"},{categories:["anc_surgical_history"],concept_id:7472,name:"Marsupilisation"},{categories:["anc_surgical_history"],concept_id:7474,name:"Salpingectomy"},{categories:["anc_surgical_history"],concept_id:7475,name:"Dilation and curettage"},{categories:["anc_medical_history","anc_surgical_history"],concept_id:7477,name:"Fistula repair"},{categories:["anc_surgical_history"],concept_id:7478,name:"Myomectomy"},{categories:["anc_surgical_history"],concept_id:7480,name:"Hysterescopy"},{categories:["anc_surgical_history"],concept_id:7481,name:"Cystoscopy"},{categories:["anc_surgical_history"],concept_id:7482,name:"Vulvectomy"},{categories:["anc_surgical_history"],concept_id:8380,name:"Suturing of perineum"},{categories:["anc_surgical_history"],concept_id:8381,name:"Repair of uterus"},{categories:["anc_surgical_history"],concept_id:8765,name:"Cystectomy"},{categories:["anc_surgical_history"],concept_id:8766,name:"Ceclage"},{categories:["anc_surgical_history"],concept_id:8767,name:"Bilateral tubal ligation"},{categories:["anc_surgical_history"],concept_id:8773,name:"Excision"},{categories:["anc_surgical_history"],concept_id:9058,name:"Evacuation/Manual Vacuum Aspiration"},{categories:["anc_surgical_history"],concept_id:9304,name:"Polypectomy"},{categories:["anc_surgical_history"],concept_id:9305,name:"Decapitation"},{categories:["anc_surgical_history"],concept_id:9306,name:"Abdominal Washout"},{categories:["anc_surgical_history"],concept_id:9307,name:"Vaginal hysterectomy"},{categories:["anc_surgical_history"],concept_id:9308,name:"Gaped episiotomy repair"},{categories:["anc_surgical_history"],concept_id:9309,name:"Macdonald suture"},{categories:["anc_surgical_history"],concept_id:9314,name:"Oophorectomy"},{categories:[],concept_id:7124,name:"Tetanus toxoid vaccine"},{categories:[],concept_id:6408,name:"Other conditions"},{categories:[],concept_id:10546,name:"Punch Biopsy"},{categories:[],concept_id:10547,name:"LLETZ sample"},{categories:[],concept_id:1115,name:"Normal"},{categories:[],concept_id:10551,name:"CIN 1"},{categories:[],concept_id:10552,name:"CIN 2"},{categories:[],concept_id:10553,name:"CIN 3"},{categories:[],concept_id:10554,name:"Carcinoma in Situ"},{categories:[],concept_id:2588,name:"Invasive cancer of cervix"},{categories:[],concept_id:10550,name:"Benign cervical warts"},{categories:[],concept_id:1107,name:"Not available"},{categories:[],concept_id:7918,name:"Bleeding"},{categories:[],concept_id:5276,name:"Hysterectomy"},{categories:[],concept_id:10521,name:"Cryotherapy"},{categories:[],concept_id:10002,name:"Leep"},{categories:[],concept_id:9053,name:"Palliative Care"},{categories:[],concept_id:10560,name:"LLETZ"},{categories:[],concept_id:10557,name:"Conisation"},{categories:[],concept_id:9996,name:"Thermocoagulation"},{categories:[],concept_id:10549,name:"Chronic cervicitis"},{categories:[],concept_id:3580,name:"Patient refused"},{categories:[],concept_id:10556,name:"Hysyrectomy"},{categories:[],concept_id:10558,name:"Trachelectomy"},{categories:[],concept_id:3626,name:"Discharged"},{categories:[],concept_id:8882,name:"Continue follow-up"},{categories:[],concept_id:10559,name:"No Dysplasia/Cancer"},{categories:[],concept_id:1742,name:"Patient died"},{categories:[],concept_id:8739,name:"Cervical cancer stage 1"},{categories:[],concept_id:8787,name:"Cervical cancer stage 2"},{categories:[],concept_id:8788,name:"Cervical cancer stage 3"},{categories:[],concept_id:8740,name:"Cervical cancer stage 4"},{categories:[],concept_id:10041,name:"VIA Negative"},{categories:[],concept_id:10032,name:"Suspect Cancer"},{categories:[],concept_id:10023,name:"PAP Smear Normal"},{categories:[],concept_id:10025,name:"HPV negative"},{categories:[],concept_id:10028,name:"No visible Lesion"},{categories:[],concept_id:6537,name:"Other Gynae"},{categories:[],concept_id:10042,name:"VIA Positive"},{categories:[],concept_id:10024,name:"PAP Smear Abnormal"},{categories:[],concept_id:10026,name:"HPV Positive"},{categories:[],concept_id:10027,name:"Visible Lesion"},{categories:[],concept_id:174,name:"STI"},{categories:[],concept_id:149,name:"Cervicitis"},{categories:[],name:"Result Given to Client",concept_id:9764},{categories:["art_extra_medication_order"],name:"INH 300 / RFP 300 (3HP)",concept_id:10565},{categories:[],concept_id:10563,name:"Drug received from previous facility"},{categories:[],concept_id:10564,name:"Date drug received from previous facility"},{categories:[],concept_id:6397,name:"Height for age percent of median"},{categories:[],concept_id:6969,name:"Refer to clinician"},{categories:[],concept_id:10031,name:"Further Investigation and Management"},{categories:[],concept_id:9066,name:"Cancer of cervix"},{categories:[],concept_id:10030,name:"Large Lesion (Greater than 75 percent)"},{categories:[],concept_id:1739,name:"Referral reason"},{categories:[],concept_id:9514,name:"VIA Results"},{categories:[],concept_id:9522,name:"Patient went for VIA?"},{concept_id:2690,name:"TB treatment"},{categories:[],concept_id:7458,name:"Confirmed TB on treatment"},{categories:[],concept_id:7456,name:"Confirmed TB NOT on treatment"},{categories:[],concept_id:9195,name:"Discuss with spouse"},{categories:[],concept_id:7951,name:"Other side effect"},{categories:[],concept_id:7755,name:"Malawi ART side effects"},{categories:[],concept_id:9994,name:"CxCa test date"},{categories:[],concept_id:10008,name:"Reason for NOT offering CxCa"},{categories:[],concept_id:9992,name:"Offer CxCa"},{categories:["reason_for_no_cxca"],concept_id:8387,name:"Not due for screening"},{categories:["reason_for_no_cxca"],concept_id:10007,name:"Client preferred counseling"},{categories:["reason_for_no_cxca"],concept_id:1175,name:"Not applicable"},{categories:["reason_for_no_cxca"],concept_id:3580,name:"Patient refused"},{categories:["reason_for_no_cxca"],concept_id:10001,name:"Chemotherapy"},{categories:["reason_for_no_cxca"],concept_id:10543,name:"Services not available"},{categories:["reason_for_no_cxca"],concept_id:10544,name:"Provider not available"},{categories:[],concept_id:7215,name:"Other (Specify)"},{categories:[],concept_id:1618,name:"Family planning"},{categories:[],concept_id:374,name:"Method of family planning"},{categories:[],concept_id:2431,name:"Other reason for not seeking services"},{categories:[],concept_id:2592,name:"Clinician notes"},{categories:[],concept_id:6986,name:"Transferred"},{categories:[],concept_id:1588,name:"Previous TB treatment history"},{categories:["bp_measures"],concept_id:5085,name:"Systolic blood pressure"},{categories:["bp_measures"],concept_id:5086,name:"Diastolic blood pressure"},{categories:[],concept_id:7054,name:"Art clinic location"},{categories:[],concept_id:8677,name:"Specific presenting complaint"},{categories:[],concept_id:8578,name:"Presenting complaint"},{categories:[],concept_id:10319,name:"Presenting complaint group"},{categories:[],concept_id:6266,name:"Trauma"},{categories:[],concept_id:7027,name:"General"},{categories:[],concept_id:7411,name:"ILI"},{categories:[],concept_id:7644,name:"Respiratory"},{categories:[],concept_id:7661,name:"Gastrointestinal"},{categories:[],concept_id:9546,name:"Haema"},{categories:[],concept_id:9551,name:"Nephro"},{categories:[],concept_id:9560,name:"Cardiovascular"},{categories:["art_patient_type"],order:1,concept_id:7572,name:"New patient"},{categories:["art_patient_type"],order:2,concept_id:10522,name:"Drug Refill"},{categories:["risk factors","anc_medical_history"],concept_id:3720,name:"Diabetes"},{categories:["risk factors"],concept_id:7623,name:"CKD"},{categories:["risk factors"],concept_id:9499,name:"history of CVD"},{categories:["risk factors"],concept_id:9501,name:"relative with CVD"},{categories:["risk factors"],concept_id:3339,name:"patient smokes"},{categories:["risk factors"],concept_id:2318,name:"Patient drinks alcohol"},{categories:[],concept_id:9675,name:"Referral"},{categories:[],concept_id:1054,name:"Marital status"},{categories:[],concept_id:8366,name:"Religion"},{categories:[],concept_id:6541,name:"Referred"},{categories:[],concept_id:8717,name:"Specialist clinic"},{categories:[],concept_id:6734,name:"Admit to ward"},{categories:[],concept_id:9674,name:"Re-visiting"},{categories:[],concept_id:3753,name:"HIV status"},{categories:[],concept_id:7878,name:"HIV test location"},{categories:[],concept_id:7409,name:"Qech outpatient diagnosis list"},{categories:["anc_diagnosis"],concept_id:123,name:"Malaria"},{categories:["anc_diagnosis"],concept_id:3,name:"Anaemia"},{categories:["anc_diagnosis"],concept_id:7941,name:"Pre-eclampsia"},{categories:["anc_diagnosis"],concept_id:9665,name:"Vaginal bleeding"},{categories:["anc_diagnosis"],concept_id:9664,name:"Early rupture of membranes"},{categories:["anc_diagnosis"],concept_id:7883,name:"Premature labour"},{categories:["anc_diagnosis"],concept_id:43,name:"Pneumonia"},{categories:[],concept_id:9227,name:"Malaria Test Result"},{categories:[],concept_id:703,name:"Positive"},{categories:[],concept_id:9436,name:"Inconclusive"},{categories:[],concept_id:6698,name:"Trace"},{categories:[],concept_id:664,name:"Negative"},{categories:[],concept_id:6542,name:"Primary diagnosis"},{categories:[],concept_id:6543,name:"Secondary diagnosis"},{categories:[],concept_id:2688,name:"Clinical notes construct"},{categories:[],concept_id:1837,name:"HIV test date"},{categories:[],concept_id:6189,name:"Type of visit"},{categories:[],concept_id:3003,name:"Transfer to"},{categories:[],concept_id:7414,name:"Transfer from"},{categories:[],concept_id:1744,name:"Patient transferred out"},{categories:[],concept_id:9144,name:"Repeat / Missing"},{categories:[],concept_id:3280,name:"Targeted"},{categories:[],concept_id:1345,name:"Confirmatory"},{categories:[],concept_id:6368,name:"Stat"},{categories:[],concept_id:432,name:"Routine"},{categories:[],concept_id:730,name:"CD4 percent"},{categories:[],concept_id:2552,name:"Agrees to followup"},{categories:[],concept_id:7882,name:"Confirmatory HIV test date"},{categories:[],concept_id:2516,name:"Date ART started"},{categories:[],concept_id:1499,name:"Drug start date"},{categories:[],concept_id:7750,name:"Location of ART initiation"},{categories:[],concept_id:6394,name:"Has the patient taken ART in the last two weeks"},{categories:[],concept_id:7752,name:"Has the patient taken ART in the last two months"},{categories:[],concept_id:7751,name:"Date ART last taken"},{categories:[],concept_id:6981,name:"ART number at previous location"},{categories:[],concept_id:7881,name:"Confirmatory HIV test location"},{categories:[],concept_id:7754,name:"Ever received ART"},{categories:[],concept_id:7937,name:"Ever registered at ART clinic"},{categories:[],concept_id:6393,name:"Has transfer letter"},{categories:[],concept_id:9685,name:"Phone"},{categories:[],concept_id:9686,name:"Home visit"},{categories:["art_extra_medication_order"],concept_id:9974,name:"3HP (RFP + INH)"},{categories:[],concept_id:656,name:"IPT"},{categories:["side_effect"],sortIndex:{side_effect:10},concept_id:1773,name:"Heavy alcohol use"},{categories:["tb_symptom","side_effect"],sortIndex:{side_effect:4,tb_symptom:4},concept_id:8260,name:"Weight loss / Failure to thrive / malnutrition"},{categories:[],concept_id:9661,name:"Contraindications"},{categories:[],concept_id:7567,name:"Drug induced"},{categories:["tb_symptom","side_effect","adverse_effect"],sortIndex:{side_effect:9,tb_symptom:3},concept_id:6029,name:"Night sweats"},{categories:["tb_symptom","0_art_regimen_side_effect","9_art_regimen_side_effect","14_art_regimen_side_effect","side_effect","adverse_effect"],sortIndex:{side_effect:1,tb_symptom:2},concept_id:5945,name:"Fever"},{categories:["0_art_regimen_side_effect","2_art_regimen_side_effect","4_art_regimen_side_effect","8_art_regimen_side_effect","9_art_regimen_side_effect","10_art_regimen_side_effect","11_art_regimen_side_effect","12_art_regimen_side_effect","13_art_regimen_side_effect","14_art_regimen_side_effect","16_art_regimen_side_effect","17_art_regimen_side_effect","side_effect","adverse_effect"],sortIndex:{side_effect:3},concept_id:5980,name:"Vomiting"},{categories:["5_art_regimen_side_effect","9_art_regimen_side_effect","10_art_regimen_side_effect","11_art_regimen_side_effect","side_effect","adverse_effect"],sortIndex:{side_effect:5},concept_id:877,name:"Dizziness"},{categories:["9_art_regimen_side_effect","10_art_regimen_side_effect","11_art_regimen_side_effect","13_art_regimen_side_effect","14_art_regimen_side_effect","side_effect","adverse_effect"],sortIndex:{side_effect:7},concept_id:620,name:"Headache"},{categories:["13_art_regimen_side_effect","14_art_regimen_side_effect","side_effect","adverse_effect"],sortIndex:{side_effect:2},concept_id:5978,name:"Nausea"},{categories:["0_art_regimen_side_effect","2_art_regimen_side_effect","4_art_regimen_side_effect","5_art_regimen_side_effect","6_art_regimen_side_effect","7_art_regimen_side_effect","8_art_regimen_side_effect","9_art_regimen_side_effect","10_art_regimen_side_effect","11_art_regimen_side_effect","12_art_regimen_side_effect","13_art_regimen_side_effect","14_art_regimen_side_effect","adverse_effect"],concept_id:843,name:"Treatment failure"},{categories:["2_art_regimen_side_effect","4_art_regimen_side_effect","8_art_regimen_side_effect","11_art_regimen_side_effect","side_effect","adverse_effect"],sortIndex:{side_effect:6},concept_id:1458,name:"Lactic acidosis"},{categories:["tb_symptom","0_art_regimen_side_effect","9_art_regimen_side_effect","15_art_regimen_side_effect","16_art_regimen_side_effect","17_art_regimen_side_effect","side_effect","adverse_effect"],sortIndex:{side_effect:8,tb_symptom:1},concept_id:107,name:"Cough"},{categories:["11_art_regimen_contraindication","contraindication","adverse_effect"],sortIndex:{contraindication:1},concept_id:821,name:"Peripheral neuropathy"},{categories:["0_art_regimen_contraindication","2_art_regimen_contraindication","6_art_regimen_contraindication","7_art_regimen_contraindication","8_art_regimen_contraindication","contraindication","adverse_effect"],sortIndex:{contraindication:3},concept_id:215,name:"Jaundice"},{categories:["2_art_regimen_contraindication","4_art_regimen_contraindication","8_art_regimen_contraindication","11_art_regimen_contraindication","contraindication","adverse_effect"],sortIndex:{contraindication:5},concept_id:2148,name:"Lipodystrophy"},{categories:["5_art_regimen_contraindication","6_art_regimen_contraindication","7_art_regimen_contraindication","10_art_regimen_contraindication","contraindication","adverse_effect"],sortIndex:{contraindication:7},concept_id:9242,name:"Kidney Failure"},{categories:["4_art_regimen_contraindication","5_art_regimen_contraindication","contraindication","adverse_effect"],sortIndex:{contraindication:2},concept_id:219,name:"Psychosis"},{categories:["4_art_regimen_contraindication","5_art_regimen_contraindication","contraindication","adverse_effect"],sortIndex:{contraindication:4},concept_id:9440,name:"Gynaecomastia"},{categories:["2_art_regimen_contraindication","4_art_regimen_contraindication","8_art_regimen_contraindication","11_art_regimen_contraindication","contraindication","adverse_effect"],sortIndex:{contraindication:6},concept_id:3,name:"Anemia"},{categories:["0_art_regimen_contraindication","contraindication","adverse_effect"],sortIndex:{contraindication:9},concept_id:512,name:"Skin rash"},{categories:["contraindication","adverse_effect"],sortIndex:{contraindication:8},concept_id:867,name:"Insomnia"},{categories:[],concept_id:1588,name:"TB treatment history"},{categories:["fast_track"],concept_id:9533,name:"Adult 18 years +"},{categories:["fast_track"],concept_id:9534,name:"On ART for 12 months "},{categories:["fast_track"],concept_id:9535,name:"On 1st line ART"},{categories:["fast_track"],concept_id:9537,name:"Good current adherence"},{categories:["fast_track"],concept_id:9536,name:"Last VL <1000"},{categories:["fast_track"],concept_id:9538,name:"Not Pregnant / Breastfeeding"},{categories:["fast_track"],concept_id:9539,name:"Side effects / HIV-rel. diseases"},{categories:["fast_track"],concept_id:9540,name:"Needs BP / diabetes treatment"},{categories:["fast_track"],concept_id:9527,name:"Started IPT <12m ago"},{categories:["fast_track"],concept_id:2186,name:"Any sign for TB"},{categories:["reasons_for_art","stage_1_conditions_adults_who_reason"],concept_id:7561,name:"WHO STAGE I ADULT"},{categories:["reasons_for_art","stage_1_conditions_pedaids_who_reason","stage_1_conditions_adults_who_reason"],concept_id:7041,name:"WHO STAGE I ADULT AND PEDS"},{categories:["reasons_for_art","stage_1_conditions_pedaids_who_reason"],concept_id:7049,name:"WHO STAGE I PEDS"},{categories:["reasons_for_art","stage_2_conditions_adults_who_reason"],concept_id:7046,name:"WHO STAGE II ADULT"},{categories:["reasons_for_art","stage_2_conditions_pedaids_who_reason","stage_2_conditions_adults_who_reason"],concept_id:7042,name:"WHO STAGE II ADULT AND PEDS"},{categories:["reasons_for_art","stage_2_conditions_pedaids_who_reason"],concept_id:7050,name:"WHO STAGE II PEDS"},{categories:["reasons_for_art","stage_3_conditions_adults_who_reason"],concept_id:7047,name:"WHO STAGE III ADULT"},{categories:["reasons_for_art","stage_3_conditions_pedaids_who_reason","stage_3_conditions_adults_who_reason"],concept_id:7043,name:"WHO STAGE III ADULT AND PEDS"},{categories:["reasons_for_art","stage_3_conditions_pedaids_who_reason"],concept_id:7051,name:"WHO STAGE III PEDS"},{categories:["reasons_for_art","stage_4_conditions_adults_who_reason"],concept_id:7048,name:"WHO STAGE IV ADULT"},{categories:["reasons_for_art","stage_4_conditions_pedaids_who_reason","stage_4_conditions_adults_who_reason"],concept_id:7044,name:"WHO STAGE IV ADULT AND PEDS"},{categories:["reasons_for_art","stage_4_conditions_pedaids_who_reason"],concept_id:7052,name:"WHO STAGE IV PEDS"},{categories:[],concept_id:1805,name:"Patient present"},{categories:[],concept_id:2122,name:"Guardian present"},{categories:[],concept_id:5092,name:"SP02"},{categories:[],concept_id:5087,name:"Pulse"},{categories:[],concept_id:5088,name:"Temp"},{categories:[],concept_id:1484,name:"Treatment status"},{categories:[],concept_id:3140,name:"Reason for poor treatment adherence"},{categories:[],concept_id:6987,name:"Drug adherence"},{categories:[],concept_id:2540,name:"Number of tablets brought to clinic"},{categories:[],concept_id:7880,name:"Confirmatory hiv test type"},{categories:["hiv_test_types"],concept_id:1040,name:"HIV rapid test"},{categories:["hiv_test_types"],concept_id:844,name:"HIV DNA polymerase chain reaction"},{categories:["hiv_test_types"],concept_id:1118,name:"Not done"},{categories:["hiv_test_types"],concept_id:1067,name:"Unknown"},{categories:["reason_for_art"],concept_id:8263,name:"PRESUMED SEVERE HIV"},{categories:["reason_for_art"],concept_id:844,name:"HIV DNA POLYMERASE CHAIN REACTION"},{categories:["reason_for_art"],concept_id:1169,name:"HIV infected"},{categories:["reason_for_art"],concept_id:1755,name:"PATIENT PREGNANT"},{categories:["reason_for_art"],concept_id:5632,name:"BREASTFEEDING"},{categories:["reason_for_art"],concept_id:5006,name:"Asymptomatic"},{categories:["reason_for_art"],concept_id:8376,name:"LYMPHOCYTE COUNT BELOW THRESHOLD WITH WHO STAGE 1"},{categories:["reason_for_art"],concept_id:7559,name:"LYMPHOCYTE COUNT BELOW THRESHOLD WITH WHO STAGE 2"},{categories:[""],concept_id:2743,name:"Who stages criteria present"},{categories:[""],concept_id:7965,name:"Is patient breast feeding"},{categories:[""],concept_id:6131,name:"Is patient pregnant"},{categories:[""],concept_id:7563,name:"Reason for ART eligibility"},{categories:[""],concept_id:7562,name:"Who stage"},{categories:[""],concept_id:2540,name:"Pills brought"},{categories:[""],concept_id:5089,name:"weight"},{categories:[],concept_id:5090,name:"Height"},{categories:["art_medication_order"],concept_id:9974,name:"Rifapentine"},{categories:["art_medication_order","art_extra_medication_order"],concept_id:916,name:"CPT"},{categories:["art_medication_order","art_extra_medication_order"],concept_id:656,name:"INH"},{categories:[""],concept_id:6784,name:"Appointment type"},{categories:[""],concept_id:1779,name:"Reason for ARV switch"},{categories:[""],concept_id:9561,name:"Assess for fast track"},{categories:[""],concept_id:1282,name:"Medication orders"},{categories:[""],concept_id:8471,name:"Fast track"},{categories:[""],concept_id:7755,name:"Art Side effects"},{categories:["art_medication_order"],concept_id:1085,name:"Antiretroviral drugs"},{categories:[""],concept_id:1066,name:"No"},{categories:[""],concept_id:1065,name:"Yes"},{categories:[""],concept_id:5096,name:"Appointment date"},{categories:[""],concept_id:3289,name:"Type of patient"},{categories:["art_patient_type"],concept_id:9684,order:3,name:"External consultation"},{categories:[""],concept_id:6830,name:"Cd4 count location"},{categories:[""],concept_id:6831,name:"Cd4 count datetime"},{categories:[""],concept_id:5497,name:"CD4 count"},{categories:["cd4_count"],concept_id:8208,name:"cd4 less than or equal to 750"},{categories:["cd4_count"],concept_id:8262,name:"cd4 less than or equal to 250"},{categories:["cd4_count"],concept_id:8207,name:"cd4 less than or equal to 350"},{categories:["cd4_count"],concept_id:9389,name:"cd4 less than or equal to 500"},{categories:["whole_staging_numbers"],concept_id:9145,name:"WHO STAGE 1"},{categories:["whole_staging_numbers"],concept_id:9146,name:"WHO STAGE 2"},{categories:["whole_staging_numbers"],concept_id:2932,name:"WHO STAGE 3"},{categories:["whole_staging_numbers"],concept_id:2933,name:"WHO STAGE 4"},{categories:["whole_staging_numbers"],concept_id:7561,name:"WHO STAGE I ADULT"},{categories:["whole_staging_numbers"],concept_id:7041,name:"WHO STAGE I ADULT AND PEDS"},{categories:["whole_staging_numbers"],concept_id:7049,name:"WHO STAGE I PEDS"},{categories:["whole_staging_numbers"],concept_id:7046,name:"WHO STAGE II ADULT"},{categories:["whole_staging_numbers"],concept_id:7042,name:"WHO STAGE II ADULT AND PEDS"},{categories:["whole_staging_numbers"],concept_id:7050,name:"WHO STAGE II PEDS"},{categories:["whole_staging_numbers"],concept_id:7047,name:"WHO STAGE III ADULT"},{categories:["whole_staging_numbers"],concept_id:7043,name:"WHO STAGE III ADULT AND PEDS"},{categories:["whole_staging_numbers"],concept_id:7051,name:"WHO STAGE III PEDS"},{categories:["whole_staging_numbers"],concept_id:7048,name:"WHO STAGE IV ADULT"},{categories:["whole_staging_numbers"],concept_id:7044,name:"WHO STAGE IV ADULT AND PEDS"},{categories:["whole_staging_numbers"],concept_id:7052,name:"WHO STAGE IV PEDS"},{categories:["pshd_condition","stage_4_conditions_pedaids","stage_4_conditions_adults","who_staging_conditions","staging_4_conditions"],concept_id:7548,name:"Cryptococcal meningitis or other extrapulmonary cryptococcosis"},{categories:["pshd_condition","stage_4_conditions_pedaids","stage_4_conditions_adults","who_staging_conditions","staging_4_conditions"],concept_id:5340,name:"Candidiasis of oseophagus, trachea and bronchi or lungs"},{categories:["stage_4_conditions_pedaids","stage_4_conditions_adults","who_staging_conditions","staging_4_conditions"],concept_id:1547,name:"Extrapulmonary tuberculosis (EPTB)"},{categories:["stage_4_conditions_pedaids","stage_4_conditions_adults","who_staging_conditions","staging_4_conditions"],concept_id:507,name:"Kaposis sarcoma"},{categories:["stage_3_conditions_pedaids","stage_4_conditions_adults","who_staging_conditions","staging_4_conditions"],concept_id:1215,name:"Bacterial pneumonia, severe recurrent"},{categories:["stage_4_conditions_adults","staging_4_conditions","who_staging_conditions"],concept_id:7959,name:"Non-typhoidal Salmonella bacteraemia, recurrent"},{categories:["stage_4_conditions_adults","stage_4_conditions_pedaids","who_staging_conditions","staging_4_conditions"],concept_id:7957,name:"Symptomatic HIV-associated nephropathy or cardiomyopathy"},{categories:["stage_4_conditions_pedaids","stage_4_conditions_adults","who_staging_conditions","staging_4_conditions"],concept_id:2587,name:"Cerebral or B-cell non Hodgkin lymphoma"},{categories:["pshd_condition","stage_4_conditions_pedaids","stage_4_conditions_adults","who_staging_conditions","staging_4_conditions"],concept_id:882,name:"Pneumocystis pneumonia"},{categories:["stage_4_conditions_adults","who_staging_conditions","staging_4_conditions"],concept_id:5344,name:"Chronic herpes simplex infection (orolabial, gential / anorectal >1 month or visceral at any site)"},{categories:["stage_4_conditions_adults","who_staging_conditions","staging_4_conditions"],concept_id:7551,name:"Cytomegalovirus infection (retinitis or infection or other organs)"},{categories:["pshd_condition","stage_4_conditions_adults","who_staging_conditions"],concept_id:2583,name:"Toxoplasmosis of the brain"},{categories:["stage_4_conditions_adults","who_staging_conditions","staging_4_conditions"],concept_id:2588,name:"Invasive cancer of cervix"},{categories:["stage_4_conditions_adults","who_staging_conditions","staging_4_conditions"],concept_id:7040,name:"Unspecified stage 4 condition"},{categories:["stage_4_conditions_adults","who_staging_conditions","staging_4_conditions"],concept_id:6408,name:"Other"},{categories:["stage_4_conditions_pedaids","who_staging_conditions"],concept_id:1362,name:"HIV encephalopathy"},{categories:["stage_4_conditions_pedaids","who_staging_conditions"],concept_id:2585,name:"Disseminated non-tuberculosis mycobacterial infection"},{categories:["stage_4_conditions_pedaids","who_staging_conditions"],concept_id:7549,name:"Cryptosporidiosis, chronic with diarroea"},{categories:["stage_4_conditions_pedaids","who_staging_conditions"],concept_id:7956,name:"Isosporiasis >1 month"},{categories:["stage_4_conditions_pedaids","who_staging_conditions"],concept_id:7550,name:"Disseminated mycosis (coccidiomycosis or histoplasmosis)"},{categories:["stage_4_conditions_pedaids","who_staging_conditions"],concept_id:5046,name:"Progressive multifocal leukoencephalopathy"},{categories:["pshd_condition","stage_4_conditions_pedaids","who_staging_conditions"],concept_id:3068,name:"Severe unexplained wasting or malnutrition not responding to treatment (weight-for-height/ -age <70% or MUAC less than 11cm or oedema)"},{categories:["who_staging_conditions"],concept_id:2894,name:"Bacterial infections, severe recurrent  (empyema, pyomyositis, meningitis, bone/joint infections but EXCLUDING pneumonia)"},{categories:["stage_4_conditions_pedaids","who_staging_conditions"],concept_id:7960,name:"Chronic herpes simplex infection (orolabial or cutaneous >1 month or visceral at any site)"},{categories:["stage_4_conditions_pedaids","who_staging_conditions"],concept_id:7552,name:"Cytomegalovirus infection: rentinitis or other organ (from age 1 month)"},{categories:["pshd_condition","stage_4_conditions_pedaids","who_staging_conditions","staging_4_conditions"],concept_id:5048,name:"Toxoplasmosis of the brain (from age 1 month)"},{categories:["stage_4_conditions_pedaids","who_staging_conditions"],concept_id:7961,name:"Recto-vaginal fistula, HIV-associated"},{categories:["severe_hiv_wasting_syndrome","stage_3_conditions_adults","who_staging_conditions"],concept_id:7540,name:"Severe weight loss >10% and/or BMI <18.5kg/m^2, unexplained"},{categories:["severe_hiv_wasting_syndrome","stage_3_conditions_adults","who_staging_conditions"],concept_id:5018,name:"Diarrhoea, chronic (>1 month) unexplained"},{categories:["severe_hiv_wasting_syndrome","stage_3_conditions_adults","stage_3_conditions_pedaids","who_staging_conditions"],concept_id:5027,name:"Fever, persistent unexplained, intermittent or constant, >1 month"},{categories:["stage_3_conditions_pedaids","stage_3_conditions_adults","who_staging_conditions"],concept_id:8206,name:"Pulmonary tuberculosis (current)"},{categories:["stage_3_conditions_pedaids","stage_3_conditions_adults","who_staging_conditions"],concept_id:7539,name:"Tuberculosis (PTB or EPTB) within the last 2 years"},{categories:["stage_3_conditions_adults","who_staging_conditions"],concept_id:5334,name:"Oral candidiasis"},{categories:["stage_3_conditions_adults","stage_3_conditions_pedaids","who_staging_conditions"],concept_id:7546,name:"Acute necrotizing ulcerative gingivitis or periodontitis"},{categories:["stage_3_conditions_pedaids","stage_3_conditions_adults","who_staging_conditions"],concept_id:2582,name:"Anaemia, unexplained < 8 g/dl"},{categories:["stage_3_conditions_pedaids","stage_3_conditions_adults","who_staging_conditions"],concept_id:7954,name:"Neutropaenia, unexplained < 500 /mm(cubed)"},{categories:["stage_3_conditions_adults","who_staging_conditions"],concept_id:7541,name:"Severe bacterial infections (pneumonia, empyema, pyomyositis, bone/joint, meningitis, bacteraemia)"},{categories:["stage_3_conditions_adults","stage_3_conditions_pedaids","who_staging_conditions"],concept_id:7955,name:"Thrombocytopaenia, chronic < 50,000 /mm(cubed)"},{categories:["stage_3_conditions_adults","who_staging_conditions"],concept_id:8205,name:"Hepatitis B or C infection"},{categories:["stage_3_conditions_pedaids","stage_3_conditions_adults","who_staging_conditions"],concept_id:5337,name:"Oral hairy leukoplakia"},{categories:["stage_3_conditions_adults","who_staging_conditions"],concept_id:7039,name:"Unspecified stage 3 condition"},{categories:["stage_3_conditions_pedaids","who_staging_conditions"],concept_id:7543,name:"Moderate unexplained wasting/malnutrition not responding to treatment (weight-for-height/ -age 70-79% or muac 11-12 cm)"},{categories:["stage_3_conditions_pedaids","who_staging_conditions"],concept_id:7544,name:"Diarrhoea, persistent unexplained (14 days or more)"},{categories:["pshd_condition","stage_3_conditions_pedaids","who_staging_conditions"],concept_id:7545,name:"Oral candidiasis (from age 2 months)"},{categories:["stage_3_conditions_pedaids","who_staging_conditions"],concept_id:7547,name:"Lymph node tuberculosis"},{categories:["stage_3_conditions_pedaids","who_staging_conditions"],concept_id:5024,name:"Symptomatic lymphoid interstitial pneumonia"},{categories:["stage_3_conditions_pedaids","who_staging_conditions"],concept_id:2889,name:"Chronic HIV-associated lung disease, including bronchiectasis"},{categories:["stage_2_conditions_adults","who_staging_conditions"],concept_id:5332,name:"Moderate weight loss less than or equal to 10 percent, unexplained"},{categories:["stage_2_conditions_pedaids","stage_2_conditions_adults","who_staging_conditions"],concept_id:5012,name:"Respiratory tract infections, recurrent (sinusitis, tonsilitus, otitis media, pharyngitis)"},{categories:["stage_2_conditions_adults","who_staging_conditions"],concept_id:2578,name:"Seborrhoeic dermatitis"},{categories:["stage_2_conditions_adults","stage_2_conditions_pedaids","who_staging_conditions"],concept_id:7536,name:"Papular pruritic eruptions / Fungal nail infections"},{categories:["stage_2_conditions_pedaids","stage_2_conditions_adults","who_staging_conditions"],concept_id:836,name:"Herpes zoster"},{categories:["stage_2_conditions_pedaids","stage_2_conditions_adults","who_staging_conditions"],concept_id:2575,name:"Angular cheilitis"},{categories:["stage_2_conditions_pedaids","stage_2_conditions_adults","who_staging_conditions"],concept_id:2576,name:"Oral ulcerations, recurrent"},{categories:["stage_2_conditions_adults","who_staging_conditions"],concept_id:7038,name:"Unspecified stage 2 condition"},{categories:["stage_2_conditions_pedaids","who_staging_conditions"],concept_id:7537,name:"Hepatosplenomegaly, persistent unexplained"},{categories:["stage_2_conditions_pedaids","who_staging_conditions"],concept_id:2891,name:"Lineal gingival erythema"},{categories:["anc_diagnosis","stage_2_conditions_pedaids","who_staging_conditions"],concept_id:6775,name:"Wart virus infection, extensive"},{categories:["stage_2_conditions_pedaids","who_staging_conditions"],concept_id:6776,name:"Molluscum contagiosum, extensive"},{categories:["stage_2_conditions_pedaids","who_staging_conditions"],concept_id:1210,name:"Parotid enlargement, persistent unexplained"},{categories:["stage_1_conditions_pedaids","stage_1_conditions_adults","who_staging_conditions"],concept_id:5327,name:"Asymptomatic HIV infection"},{categories:["stage_1_conditions_pedaids","stage_1_conditions_adults","who_staging_conditions"],concept_id:5328,name:"Persistent generalized lymphadenopathy"},{categories:[],concept_id:8426,name:"Radiology Orders"},{name:"Hand x-ray",concept_id:10337},{name:"Foot x-ray",concept_id:10334},{name:"Leg x-ray",concept_id:10342},{name:"Pelvis x-ray",concept_id:10343},{name:"Shoulder x-ray",concept_id:10344},{concept_id:10539,name:"History of COVID-19 contact"}];class i extends a["e"]{constructor(){super()}static getConceptsByCategory(e,t=!1){const n=o.filter(t=>{try{return t.categories.includes(e)}catch(n){return!1}});return t?n.sort((t,n)=>{try{return t.sortIndex[e]>n.sortIndex[e]?1:0}catch(a){return 0}}):n}static async getConceptSet(e,t=""){const n=await this.getConceptID(e),a=super.getJson("concept_set",{id:n,name:t});if(a)return a}static async getConceptName(e){const t=this.getCachedConceptName(e);return t||this.getConceptNameFromApi(e)}static getConceptID(e,t=!1){try{return this.getCachedConceptID(e,t)}catch(n){return this.getConceptIDFromApi(e)}}static getCachedConceptID(e,t=!1){const n=o.filter(n=>t?n.name.toLowerCase()===e.toLowerCase():n.name.match(new RegExp(e,"i")));return this.resolveConcept(n,e)}static async getConceptIDFromApi(e){const t=await super.getJson("concepts",{name:e}),n=this.resolveConcept(t,e);if(localStorage.getItem("concept_cache")){const t=JSON.parse(localStorage.getItem("concept_cache")||"{}");t[e]={name:e,concept_id:n,categories:["hts_program_concept"]},localStorage.setItem("concept_cache",JSON.stringify(t))}else localStorage.setItem("concept_cache",JSON.stringify({[e]:{name:e,concept_id:n,categories:["hts_program_concept"]}}));return n}static async getConceptNameFromApi(e){const t=await super.getJson("concepts/"+e);if(t)return t.concept_names[0].name}static getCachedConceptName(e){const t=o.filter(t=>t.concept_id===e);if(t.length>=1)return t[0].name}static resolveConcept(e,t){if(1===e.length)return e[0].concept_id;throw`Concept name ${t} was not found or has a duplicates`}}},"85a2":function(e,t,n){},"85d6":function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var a=n("1c74"),o=n("b432");function i(e){return`userprop-${a["e"].getProgramID()}-${a["e"].getUserID()}-${e}`}async function c(e){if(o["b"].value||!o["c"].value)return sessionStorage.getItem(i(e));try{const t=await a["e"].getJson("user_properties",{property:e});return null===t||void 0===t?void 0:t.property_value}catch(t){console.error(""+t)}}function r(e,t){const n={property:e,property_value:t};return sessionStorage.setItem(i(e),t),a["e"].postJson("user_properties",n)}function s(){return{getUserProp:c,setUserProp:r}}},"866d":function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var a=n("ade3"),o=n("1c74"),i=n("9283");class c extends o["e"]{constructor(e,t,n,i=o["e"].getSessionDate(),c=o["e"].getProgramID()){super(),Object(a["a"])(this,"startDate",void 0),Object(a["a"])(this,"endDate",void 0),Object(a["a"])(this,"date",void 0),Object(a["a"])(this,"name",void 0),Object(a["a"])(this,"programID",void 0),this.startDate=t,this.endDate=n,this.date=i,this.name=e,this.programID=c}requestReport(e={}){return o["e"].getJson("radiology_reports",{program_id:this.programID,report_name:this.name,start_date:this.startDate,end_date:this.endDate,date:this.date,...e})}periodStr(){const e=e=>i["b"].toStandardHisDisplayFormat(e);return`${e(this.startDate)} - ${e(this.endDate)}`}}},8734:function(e,t,n){"use strict";function a(e){return new Promise(t=>{setTimeout(()=>{t("")},e)})}n.d(t,"a",(function(){return a}))},"89b4":function(e,t,n){"use strict";n.d(t,"c",(function(){return l})),n.d(t,"b",(function(){return a})),n.d(t,"a",(function(){return d}));var a,o=n("ade3"),i=(n("d9e2"),n("156d")),c=n("9283"),r=n("9224");class s extends Error{constructor(e){super(),Object(o["a"])(this,"message",void 0),this.message=`Your current API Version of "${e}" does not meet "${r["min-api-version"]}". Contact administrator to update your API Version`}}class l extends Error{constructor(){super(),Object(o["a"])(this,"message",void 0),this.message="Invalid username/password"}}(function(e){e["CORE_VERSION"]="core_version"})(a||(a={}));class d{constructor(){Object(o["a"])(this,"username",void 0),Object(o["a"])(this,"userID",void 0),Object(o["a"])(this,"roles",void 0),Object(o["a"])(this,"token",void 0),Object(o["a"])(this,"programs",void 0),Object(o["a"])(this,"sessionDate",void 0),Object(o["a"])(this,"systemVersion",void 0),Object(o["a"])(this,"coreVersion",void 0),this.token="",this.username="",this.roles=[],this.programs=[],this.userID=-1,this.sessionDate="",this.systemVersion="",this.coreVersion=""}setUsername(e){this.username=e}async loadConfig(){i["b"].getFileConfig()}async login(e){const t=await this.requestLogin(e);if(!t)throw"Unable to login";{const{authorization:{token:e,user:n}}=t;this.token=e,this.roles=n.roles,this.programs=n.programs,this.userID=n.user_id,this.sessionDate=await this.getSystemDate(),this.systemVersion=await this.getApiVersion(),this.coreVersion=this.getHeadVersion()}}startSession(){sessionStorage.setItem("apiKey",this.token),sessionStorage.setItem("username",this.username),sessionStorage.setItem("userID",this.userID.toString()),sessionStorage.setItem("userRoles",JSON.stringify(this.roles)),sessionStorage.setItem("userPrograms",JSON.stringify(this.programs)),sessionStorage.setItem("sessionDate",this.sessionDate),sessionStorage.setItem("APIVersion",this.systemVersion),localStorage.setItem(a.CORE_VERSION,this.coreVersion)}clearSession(){sessionStorage.clear()}isLoggedIn(){return!!sessionStorage.getItem("apiKey")}requestLogin(e){return this.postLogin("auth/login",{username:this.username,password:e})}async validateIfCorrectAPIVersion(){const e=await this.getApiVersion(),t=e=>e.replace("v","").split("-")[0].split(".").map(e=>parseInt(e||"0")),[n,a,o]=t(e),[i,c,l]=t(r["min-api-version"]);if(n>=i&&a>=c&&o>=l)return!0;throw new s(e)}async checkTimeIntegrity(){const e=await this.getSystemDate(),t=c["b"].currentDate();if(!e)throw"Unable to fetch server date";return t===e}initDateSync(e=1e3){setInterval(async()=>{const e=await this.getSystemDate();sessionStorage.getItem("apiDate")?sessionStorage.setItem("apiDate",e):sessionStorage.setItem("sessionDate",e)},e)}setActiveVersion(e){return localStorage.setItem(a.CORE_VERSION,e)}getActiveCoreVersion(){return localStorage.getItem(a.CORE_VERSION)}getHeadVersion(){return r["version"]}cachingIsEnabled(){const e=this.getAppConf("dataCaching");return"boolean"!==typeof e||e}versionLockingIsEnabled(){const e=this.getAppConf("enableVersionLocking");return"boolean"!==typeof e||e}getAppConf(e){const t=sessionStorage.getItem("appConf");if(t)try{const n=JSON.parse(t);return n[e]}catch(n){console.error(n)}return null}async getApiVersion(){const e=await this.getJson("version");return e&&e["System version"]?e["System version"]:"-"}async getSystemDate(){const{date:e}=await this.getJson("current_time");return e}async getJson(e){const t=await i["b"].get(e);if(t&&t.ok)return null===t||void 0===t?void 0:t.json()}async postLogin(e,t){const n=await i["b"].post(e,t);if(n){if(n.ok)return n.json();if(401===n.status)throw new l}}}},"8c28":function(e,t,n){},"8df6":function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var a=n("ade3"),o=n("cc6f"),i=n("8158");class c extends o["a"]{constructor(e,t){super(e,5,t),Object(a["a"])(this,"patientType",void 0),Object(a["a"])(this,"locationName",void 0),this.patientType="N/A",this.locationName=""}setLocationName(e){this.locationName=e}setPatientType(e){this.patientType=e}getType(){return this.patientType}static getPatientTypes(){return i["a"].getConceptsByCategory("art_patient_type").map(({name:e})=>({label:e,value:e}))}static async isDrugRefillPatient(e){const t=await o["a"].getFirstValueCoded(e,"Type of patient");return t&&"Drug Refill"===t}async loadPatientType(){const e=await this.getFirstValueCoded("Type of patient");e&&(this.patientType=e)}async save(){await this.savePatientType(this.patientType),this.locationName&&["External consultation","Drug Refill"].includes(this.patientType)&&await this.saveLocationClinic(this.locationName)}saveLocationClinic(e){return this.saveValueTextObs("Art clinic location",e)}savePatientType(e){return this.saveValueCodedObs("Type of patient",e)}}},"8e30":function(e,t,n){},"8e3d":function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return storageFactory}));var _home_andrew_dev_Projects_HIS_Core_node_modules_babel_runtime_helpers_esm_defineProperty_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("ade3");const storageFactory=storageName=>eval(`new ${storageName}()`);class LocalStorage{existsinStorage(e){const t=localStorage.getItem(e);return t?Promise.resolve(!0):Promise.resolve(!1)}getFromStorage(e){return new Promise((t,n)=>{const a=localStorage.getItem(e);if(a)return t(JSON.parse(a));t([])})}deleteFromStorage(e){return localStorage.removeItem(e),!0}saveToStorage(e,t){return localStorage.setItem(e,JSON.stringify(t)),!0}}class IndexedDBStorage{constructor(){Object(_home_andrew_dev_Projects_HIS_Core_node_modules_babel_runtime_helpers_esm_defineProperty_js__WEBPACK_IMPORTED_MODULE_0__["a"])(this,"db",void 0);const e=indexedDB.open("offline_db",1);e.onupgradeneeded=function(){e.result.createObjectStore("openmrs")},e.onsuccess=()=>{this.db=e.result}}existsinStorage(e){return new Promise((t,n)=>{const a=this.db.transaction("openmrs").objectStore("openmrs").get(e);a.onsuccess=()=>{t(a.result)},a.onerror=()=>{n(a.error)}})}getFromStorage(e,t){return new Promise((n,a)=>{const o=this.db.transaction("openmrs").objectStore("openmrs").openCursor();o.onsuccess=()=>{const a=o.result;if(a){if(a.key===e)if(t){const e=a.value.filter(e=>{for(const n in t)if(t[n]&&e[n]!==t[n])return!1;return!0});n(e)}else n(a.value.data);a.continue()}else n([])},o.onerror=()=>{a("error")}})}saveToStorage(e,t){return this.db.transaction("openmrs","readwrite").objectStore("openmrs").put(t,e),!0}deleteFromStorage(e){return this.db.transaction("openmrs","readwrite").objectStore("openmrs").delete(e),!0}}},"8e8b":function(e,t,n){"use strict";var a=n("7a23"),o=n("276d"),i=n("3e53");const c=Object(a["ref"])({}),r=Object(a["ref"])({});t["a"]={async get(e,t={}){var n;const a=(null===(n=i["a"].getActiveApp())||void 0===n?void 0:n.appStore)||o["a"];if(e in a){var s,l;const n=t||{};if("function"===typeof(null===(s=a[e])||void 0===s?void 0:s.canReloadCache)&&null!==(l=a[e])&&void 0!==l&&l.canReloadCache({params:n,state:c.value[e]})){var d;if(!r.value[e])r.value[e]=null===(d=a[e])||void 0===d?void 0:d.get(n);c.value[e]=await r.value[e],r.value[e]=void 0}return c.value[e]}throw`Store ${e} not found`},set(e,t){return c.value[e]=t,c.value[e]},invalidate(e){c.value[e]=void 0},invalidateAll(){Object.keys(c.value).forEach(e=>{c.value[e]=void 0})}}},"8efc":function(e,t,n){"use strict";var a=n("7a23");const o={key:0};function i(e,t,n,i,c,r){const s=Object(a["resolveComponent"])("ion-title"),l=Object(a["resolveComponent"])("ion-toolbar"),d=Object(a["resolveComponent"])("ion-header");return Object(a["openBlock"])(),Object(a["createBlock"])(d,null,{default:Object(a["withCtx"])(()=>[Object(a["createVNode"])(l,null,{default:Object(a["withCtx"])(()=>[Object(a["createVNode"])(s,{class:"ion-text-center"},{default:Object(a["withCtx"])(()=>[Object(a["createElementVNode"])("span",{class:Object(a["normalizeClass"])(["his-lg-text",e.color])},Object(a["toDisplayString"])(e.title),3),e.subtitle?(Object(a["openBlock"])(),Object(a["createElementBlock"])("h1",o,Object(a["toDisplayString"])(e.subtitle),1)):Object(a["createCommentVNode"])("",!0)]),_:1})]),_:1})]),_:1})}var c=n("d867"),r=Object(a["defineComponent"])({components:{IonToolbar:c["T"],IonTitle:c["S"],IonHeader:c["q"]},props:{title:{type:String,required:!0},subtitle:{type:String},color:{type:String}}}),s=(n("b744"),n("d959")),l=n.n(s);const d=l()(r,[["render",i],["__scopeId","data-v-069a3628"]]);var u=d;const p={style:{padding:"10px"}};function m(e,t,n,o,i,c){const r=Object(a["resolveComponent"])("dynamic-nav");return Object(a["openBlock"])(),Object(a["createElementBlock"])("div",p,[Object(a["createVNode"])(r,{color:"light",btns:e.btns},null,8,["btns"])])}var h=n("0f25"),b=Object(a["defineComponent"])({components:{DynamicNav:h["a"]},props:{buttons:{type:Object,default:()=>[]}},computed:{btns(){return this.buttons.map(e=>(e.size="large",e.color=e.color||"primary",e.visible=!0,e.styleClass="full-width-ion-btn",e.onClick||(e.onClick=async()=>{await c["ab"].dismiss({action:e.name})}),e))}}});const g=l()(b,[["render",m]]);var f=g,_=Object(a["defineComponent"])({components:{ActionHeader:u,ActionFooter:f},props:{title:{type:String,required:!0},subtitle:{type:String},actionButtons:{type:Object,required:!0},color:{type:String}}});const v=_;t["a"]=v},"8f12":function(e,t,n){"use strict";n.d(t,"b",(function(){return a})),n.d(t,"a",(function(){return o}));const a=28,o="hts_provider_code"},"917f":function(e,t,n){"use strict";n("cae9")},9224:function(e){e.exports=JSON.parse('{"name":"HIS-Core","version":"2.22.2-alpha","min-api-version":"4.16.1","private":true,"scripts":{"serve":"vue-cli-service serve","build":"vue-cli-service build","test:unit":"vue-cli-service test:unit","test:e2e":"vue-cli-service test:e2e","lint":"vue-cli-service lint","postversion":"git push && git push --tags"},"dependencies":{"@awesome-cordova-plugins/barcode-scanner":"^5.40.0","@awesome-cordova-plugins/bluetooth-serial":"^5.40.0","@awesome-cordova-plugins/core":"^5.44.0","@capacitor/android":"^4.6.0","@capacitor/core":"^4.6.0","@capacitor/device":"^4.1.0","@capacitor/filesystem":"^4.1.4","@ionic-native/barcode-scanner":"^5.36.0","@ionic-native/core":"^5.36.0","@ionic-native/pdf-generator":"^5.36.0","@ionic/vue":"^5.4.0","@ionic/vue-router":"^5.4.0","@popperjs/core":"^2.10.1","@types/lodash":"^4.14.170","apexcharts":"^3.26.1","capacitor-blob-writer":"^1.1.0","cordova-pdf-generator":"^2.1.1","cordova-plugin-bluetooth-serial":"^0.4.7","core-js":"^3.6.5","dayjs":"^1.10.4","fast-sort":"^3.0.2","fuse.js":"^6.6.2","jspdf":"^2.3.1","jspdf-autotable":"^3.5.20","lodash":"^4.17.21","npm":"^8.15.0","nprogress":"^0.2.0","onscan.js":"^1.5.2","phonegap-plugin-barcodescanner":"^8.1.0","rxjs":"^7.6.0","swrv":"^1.0.0-beta.8","tiny-emitter":"^2.1.0","v-calendar":"^3.0.0-alpha.5","vue":"^3.0.0-0","vue-router":"^4.0.0-0","vue3-apexcharts":"^1.3.0"},"devDependencies":{"@capacitor/cli":"^3.6.0","@types/jest":"^24.0.19","@types/nprogress":"^0.2.0","@types/onscan.js":"^1.5.2","@types/rails__actioncable":"^6.1.6","@typescript-eslint/eslint-plugin":"^5.46.1","@typescript-eslint/parser":"^5.46.1","@vue/cli-plugin-babel":"~4.5.0","@vue/cli-plugin-e2e-cypress":"~4.5.0","@vue/cli-plugin-eslint":"~4.5.0","@vue/cli-plugin-router":"~4.5.0","@vue/cli-plugin-typescript":"~4.5.0","@vue/cli-plugin-unit-jest":"~4.5.0","@vue/cli-service":"4.5.9","@vue/compiler-sfc":"^3.0.0-0","@vue/eslint-config-typescript":"^5.0.2","@vue/test-utils":"^2.0.0-0","cordova-res":"0.15.4","eslint":"^7.32.0","eslint-plugin-vue":"^7.0.0-0","typescript":"^4.9.3","vue-jest":"^5.0.0-0"},"description":"An Ionic project"}')},9283:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var a=n("5a0c"),o=n.n(a);const i="YYYY-MM-DD",c="DD/MMM/YYYY";function r(){return sessionStorage.getItem("sessionDate")||o()().format(i)}function s(){return o()().format(c)}function l(){return o()().format(i)}function d(e,t){return o()(e).diff(t,"days")}function u(e){return o()().diff(e,"years")}function p(e){return o()(e).format("HH:mm")}function m(e){const t=o()(e).format(c);return t.match(/invalid/i)?"":t}function h(e){const t=o()(e).format(i);return t.match(/invalid/i)?"":t}function b(e){const t=o()(r()).subtract(e,"years");return t.format(i)}function g(e){return o()(r()).subtract(e,"years").year()}function f(e){return o()(e).year()}function _(e){return o()(e).format("MMM")}function v(e){return o()(e).date()}function O(e,t,n){return o()(e).add(n,t)}function y(e,t,n){return o()(e).subtract(n,t)}function T(){return o()().year()}function j(e,t){const n=new Date(e);return n.setDate(n.getDate()-t),h(n)}function k(e){const[t]=b(e).split("-");return parseInt(t)}function I(e,t=-1,n=-1){let a=t.toString(),o=n.toString(),i=e;const c=e=>e.toString().match(/Unknown/i);return parseInt(i.toString())<1900&&(i="1900"),t&&!c(t)||(a="07"),n&&!c(n)||(o="15"),h(`${i}-${a}-${o}`)}t["b"]={sessionDate:r,currentDate:l,getYearOfAge:k,getYear:f,dateDiffInDays:d,getAgeInYears:u,toStandardHisTimeFormat:p,toStandardHisDisplayFormat:m,currentDisplayDate:s,stitchDate:I,toStandardHisFormat:h,estimateDateFromAge:b,getYearFromAge:g,getCurrentYear:T,getDateBeforeByDays:j,getMonth:_,getDay:v,add:O,subtract:y}},"92c1":function(e,t,n){"use strict";var a=n("7a23");function o(e,t,n,o,i,c){const r=Object(a["resolveComponent"])("ion-col"),s=Object(a["resolveComponent"])("ion-row"),l=Object(a["resolveComponent"])("ion-grid");return Object(a["openBlock"])(),Object(a["createBlock"])(l,null,{default:Object(a["withCtx"])(()=>[Object(a["createVNode"])(s,null,{default:Object(a["withCtx"])(()=>[(Object(a["openBlock"])(!0),Object(a["createElementBlock"])(a["Fragment"],null,Object(a["renderList"])(e.computedItems,(t,n)=>(Object(a["openBlock"])(),Object(a["createBlock"])(r,{key:n,size:e.grid[e.numberOfColumns]},{default:Object(a["withCtx"])(()=>[Object(a["renderSlot"])(e.$slots,"default",{entries:t})]),_:2},1032,["size"]))),128))]),_:3})]),_:3})}var i=n("d867"),c=n("2ef0"),r=Object(a["defineComponent"])({name:"MultiColumnView",components:{IonGrid:i["p"],IonRow:i["I"],IonCol:i["m"]},props:{items:{type:Object,required:!0},numberOfColumns:{type:Number,default:1}},setup(e){const t={1:12,2:6,3:4,4:3,6:2},n=Object(a["computed"])(()=>Object(c["chunk"])(e.items,Math.ceil(e.items.length/e.numberOfColumns)));return{computedItems:n,grid:t}}}),s=n("d959"),l=n.n(s);const d=l()(r,[["render",o]]);t["a"]=d},"92c9":function(e,t,n){"use strict";n("8e30")},9441:function(e,t,n){"use strict";var a=n("7a23");function o(e,t,n,o,i,c){const r=Object(a["resolveComponent"])("ion-title"),s=Object(a["resolveComponent"])("ion-toolbar"),l=Object(a["resolveComponent"])("ion-header"),d=Object(a["resolveComponent"])("ion-label"),u=Object(a["resolveComponent"])("ion-item"),p=Object(a["resolveComponent"])("ion-list"),m=Object(a["resolveComponent"])("ion-content"),h=Object(a["resolveComponent"])("ion-menu"),b=Object(a["resolveComponent"])("ion-menu-button"),g=Object(a["resolveComponent"])("ion-buttons"),f=Object(a["resolveComponent"])("info-card"),_=Object(a["resolveComponent"])("ion-chip"),v=Object(a["resolveComponent"])("ion-button"),O=Object(a["resolveComponent"])("ion-footer"),y=Object(a["resolveComponent"])("ion-page");return Object(a["openBlock"])(),Object(a["createElementBlock"])(a["Fragment"],null,[Object(a["createTextVNode"])(Object(a["toDisplayString"])(e.currentField)+" ",1),Object(a["createVNode"])(y,null,{default:Object(a["withCtx"])(()=>[Object(a["createVNode"])(h,{"menu-id":"app-menu","content-id":"main-content",type:"overlay"},{default:Object(a["withCtx"])(()=>[Object(a["createVNode"])(l,null,{default:Object(a["withCtx"])(()=>[Object(a["createVNode"])(s,null,{default:Object(a["withCtx"])(()=>[Object(a["createVNode"])(r,{class:"his-lg-text"},{default:Object(a["withCtx"])(()=>[Object(a["createTextVNode"])(" History ")]),_:1})]),_:1})]),_:1}),Object(a["createVNode"])(m,null,{default:Object(a["withCtx"])(()=>[Object(a["createVNode"])(p,null,{default:Object(a["withCtx"])(()=>[(Object(a["openBlock"])(!0),Object(a["createElementBlock"])(a["Fragment"],null,Object(a["renderList"])(e.history,(t,n)=>(Object(a["openBlock"])(),Object(a["createBlock"])(u,{key:n,color:parseInt(n)===e.currentIndex?"primary":"",detail:"true",class:"hydrated",disabled:!t[2],onClick:t=>e.onMenuNav(parseInt(n))},{default:Object(a["withCtx"])(()=>[Object(a["createVNode"])(d,null,{default:Object(a["withCtx"])(()=>[Object(a["createTextVNode"])(Object(a["toDisplayString"])(t[0])+": "+Object(a["toDisplayString"])(t[1]),1)]),_:2},1024)]),_:2},1032,["color","disabled","onClick"]))),128))]),_:1})]),_:1})]),_:1}),Object(a["createVNode"])(l,null,{default:Object(a["withCtx"])(()=>[Object(a["createVNode"])(s,null,{default:Object(a["withCtx"])(()=>{var t,n,o,i;return[Object(a["createVNode"])(g,null,{default:Object(a["withCtx"])(()=>[Object(a["createVNode"])(b),Object(a["createVNode"])(r,{class:"his-lg-text"},{default:Object(a["withCtx"])(()=>[Object(a["createTextVNode"])(Object(a["toDisplayString"])(e.helpText),1)]),_:1})]),_:1}),null!==(t=e.currentField)&&void 0!==t&&null!==(n=t.config)&&void 0!==n&&n.toolbarInfo?(Object(a["openBlock"])(),Object(a["createBlock"])(f,{key:0,slot:"end",style:{height:"100%",width:"50%"},items:null===(o=e.currentField)||void 0===o||null===(i=o.config)||void 0===i?void 0:i.toolbarInfo},null,8,["items"])):Object(a["createCommentVNode"])("",!0),e.formLabel?(Object(a["openBlock"])(),Object(a["createBlock"])(_,{key:1,class:"his-md-text",color:"success",slot:"end"},{default:Object(a["withCtx"])(()=>[Object(a["createTextVNode"])(Object(a["toDisplayString"])(e.formLabel),1)]),_:1})):Object(a["createCommentVNode"])("",!0)]}),_:1})]),_:1}),Object(a["createVNode"])(m,{id:"main-content"},{default:Object(a["withCtx"])(()=>[(Object(a["openBlock"])(),Object(a["createBlock"])(a["KeepAlive"],null,[(Object(a["openBlock"])(),Object(a["createBlock"])(Object(a["resolveDynamicComponent"])(e.currentField.type),{key:e.currentField.id,config:e.currentField.config,options:e.currentField.options,preset:e.currentField.preset,fdata:e.formData,cdata:e.computedFormData,activationState:e.state,onValue:e.currentField.onValue,defaultValue:e.currentField.defaultValue,onValueUpdate:e.currentField.onValueUpdate,footerButtonEvent:e.ftBtnEvent,onOnValue:e.onFieldValue,onOnFieldActivated:e.onFieldActivated},null,40,["config","options","preset","fdata","cdata","activationState","onValue","defaultValue","onValueUpdate","footerButtonEvent","onOnValue","onOnFieldActivated"]))],1024))]),_:1}),Object(a["createVNode"])(O,null,{default:Object(a["withCtx"])(()=>[Object(a["createVNode"])(s,{color:"dark"},{default:Object(a["withCtx"])(()=>[(Object(a["openBlock"])(!0),Object(a["createElementBlock"])(a["Fragment"],null,Object(a["renderList"])(e.footerBtns,(t,n)=>Object(a["withDirectives"])((Object(a["openBlock"])(),Object(a["createBlock"])(v,{key:n,slot:t.slot||"start",onClick:n=>e.onFtButtonClicked(t),color:t.color||"primary",size:t.size||"large",disabled:e.onDisabledBtnState(t)},{default:Object(a["withCtx"])(()=>[Object(a["createTextVNode"])(Object(a["toDisplayString"])(t.name),1)]),_:2},1032,["slot","onClick","color","size","disabled"])),[[a["vShow"],e.onVisibleBtnState(t)]])),128))]),_:1})]),_:1})]),_:1})],64)}n("14d9");var i=n("d95e"),c=n("2ef0"),r=n("d867"),s=n("b5e4");function l(e,t,n,o,i,c){const r=Object(a["resolveComponent"])("ion-col"),s=Object(a["resolveComponent"])("ion-row"),l=Object(a["resolveComponent"])("ion-grid"),d=Object(a["resolveComponent"])("tool-bar-medium-card");return Object(a["openBlock"])(),Object(a["createBlock"])(d,null,{default:Object(a["withCtx"])(()=>[Object(a["createVNode"])(l,null,{default:Object(a["withCtx"])(()=>[(Object(a["openBlock"])(!0),Object(a["createElementBlock"])(a["Fragment"],null,Object(a["renderList"])(e.rowItems,(e,t)=>(Object(a["openBlock"])(),Object(a["createBlock"])(s,{key:t},{default:Object(a["withCtx"])(()=>[(Object(a["openBlock"])(!0),Object(a["createElementBlock"])(a["Fragment"],null,Object(a["renderList"])(e,(e,t)=>(Object(a["openBlock"])(),Object(a["createBlock"])(r,{class:"col his-sm-text",key:t},{default:Object(a["withCtx"])(()=>[Object(a["createElementVNode"])("b",null,Object(a["toDisplayString"])(e.label)+":",1),Object(a["createTextVNode"])(" "+Object(a["toDisplayString"])(e.value),1)]),_:2},1024))),128))]),_:2},1024))),128))]),_:1})]),_:1})}var d=n("2b47"),u=n("7e73"),p=Object(a["defineComponent"])({name:"HisResultCard",components:{ToolBarMediumCard:d["a"],IonGrid:r["p"],IonCol:r["m"],IonRow:r["I"]},props:{items:{type:Object,required:!0}},computed:{rowItems(){return u["a"].convertArrayToTurples(this.items,2)}}}),m=(n("369d"),n("d959")),h=n.n(m);const b=h()(p,[["render",l],["__scopeId","data-v-1842fa50"]]);var g=b;const f=e=>(Object(a["pushScopeId"])("data-v-429ebf1c"),e=e(),Object(a["popScopeId"])(),e),_=f(()=>Object(a["createElementVNode"])("div",{class:"linear-background"},[Object(a["createElementVNode"])("div",{class:"inter-draw"})],-1));function v(e,t,n,o,i,c){const r=Object(a["resolveComponent"])("view-port");return Object(a["openBlock"])(),Object(a["createBlock"])(r,null,{default:Object(a["withCtx"])(()=>[_]),_:1})}var O=n("0a79"),y=Object(a["defineComponent"])({components:{ViewPort:O["a"]}});n("be3c");const T=h()(y,[["render",v],["__scopeId","data-v-429ebf1c"]]);var j=T;const k=Object(a["createElementVNode"])("div",{class:"vertically-align"}," Error Loading form element. Exit app and try again and check your network. ",-1);function I(e,t,n,o,i,c){const r=Object(a["resolveComponent"])("view-port");return Object(a["openBlock"])(),Object(a["createBlock"])(r,null,{default:Object(a["withCtx"])(()=>[k]),_:1})}var E=Object(a["defineComponent"])({components:{ViewPort:O["a"]}});const C=h()(E,[["render",I]]);var D=C;function N(){const e={};return i["a"].forEach(t=>{e[t]=Object(a["defineAsyncComponent"])({loader:()=>n("f159")(`./${t}.vue`),loadingComponent:j,errorComponent:D,delay:150,timeout:5e4})}),e}var w=Object(a["defineComponent"])({name:"TouchscreenForm",components:{IonList:r["y"],IonLabel:r["x"],IonItem:r["w"],IonMenu:r["A"],IonChip:r["l"],InfoCard:g,IonMenuButton:r["B"],IonButtons:r["e"],IonPage:r["D"],IonContent:r["n"],IonFooter:r["o"],IonToolbar:r["T"],IonButton:r["d"],IonHeader:r["q"],IonTitle:r["S"],IonCol:r["m"],IonRow:r["I"],...N()},emits:["onFinish","onIndex"],props:{disableAutoModalDismiss:{type:Boolean,default:!1},onFinish:{type:Function},formLabel:{type:String},skipSummary:{type:Boolean,default:!1},activeField:{type:String},fields:{type:Object,required:!0},cancelAction:{type:Function,required:!1},cancelDestinationPath:{type:String}},data:()=>({history:{},ftBtnEvent:{eventIndex:0,btnName:"",btnOutput:null},helpText:"",valueClearIndex:0,currentIndex:0,currentField:{},currentFieldContext:null,formData:{},computedFormData:{},footerBtns:[],currentFields:[],fieldsInitialisedOnce:{},state:""}),watch:{fields:{async handler(e){if(!Object(c["isEmpty"])(e)){this.buildFormData(e);let t=e;this.skipSummary||(t=[...t,this.getDefaultSummaryField()]),this.currentFields=t,this.activeField?this.mountField(this.activeField):await this.onNext()}},immediate:!0,deep:!0},state:{handler(e){["onValue","onClear","next","prev","onfinish","onload","unload"].includes(e)&&(r["Y"].getTop().then(e=>e?r["Y"].dismiss():null),this.disableAutoModalDismiss||r["ab"].getTop().then(e=>e&&r["ab"].dismiss()),r["W"].getTop().then(e=>e?r["W"].dismiss():null),r["bb"].getTop().then(e=>e?r["bb"].dismiss():null))},immediate:!0,deep:!0},activeField:{async handler(e){e&&this.mountField(e)}}},mounted(){this.footerBtns=[this.getCancelBtn()]},methods:{clearValue(){Object(c["isEmpty"])(this.currentFieldContext)||"function"===typeof this.currentFieldContext.clearValue&&(this.currentFieldContext.clearValue(),this.setActiveFieldValue(null),"function"===typeof this.currentField.onClear&&this.currentField.onClear())},onMenuNav(e){this.setActiveField(e),r["Z"].close("app-menu")},appendCurrentIndexToHistory(){if(this.currentField&&this.helpText){var e;const t=(null===(e=this.formData[this.currentField.id])||void 0===e?void 0:e.label)||"...";this.history[""+this.currentIndex]=[this.helpText,t,!0]}},clearHistoryIndexValuesAfterCurrentIndex(){Object(c["isEmpty"])(this.history)||Object.keys(this.history).forEach(e=>{parseInt(e)>=this.currentIndex&&(this.history[e][2]=!1)})},async onFtButtonClicked(e){this.currentFieldContext&&"function"===typeof this.currentFieldContext.onTTsetValueComponentEvent&&e.onClickComponentEvents&&"function"===typeof e.onClickComponentEvents.setValue?this.currentFieldContext.onTTsetValueComponentEvent(e.onClickComponentEvents.setValue(this.formData)):(this.ftBtnEvent.eventIndex+=1,this.ftBtnEvent.btnName=e.name,this.ftBtnEvent.btnOutput=await e.onClick(this.formData,this.computedFormData,this.currentFieldContext),e.onClickComponentEvents?this.ftBtnEvent.onClickComponentEvents=e.onClickComponentEvents:this.ftBtnEvent.onClickComponentEvents&&delete this.ftBtnEvent.onClickComponentEvents)},async mountField(e){if("_NEXT_FIELD_"===e)return await this.goNext(),this.$emit("onIndex",this.currentIndex);const t=Object(c["findIndex"])(this.currentFields,{id:e});t>=0&&t<=this.currentFields.length&&(this.setActiveField(t),this.$emit("onIndex",t))},getCancelBtn(e={}){const t=e||{};return{name:t.name||"Cancel",color:t.color||"danger",onClick:async()=>{if(t.onClick)return t.onClick();if(await Object(s["a"])("Are you sure you want to cancel?")){if("function"===typeof this.cancelAction)return this.cancelAction();this.cancelDestinationPath?this.$router.push(this.cancelDestinationPath):this.$router.back()}}}},getClearBtn(e={}){const t=e||{},n=()=>!Object(c["isEmpty"])(this.currentFieldContext)&&"function"===typeof this.currentFieldContext.clearValue;return{name:t.name||"Clear",color:t.color||"warning",slot:"end",state:{visible:{default:()=>n(),onload:()=>n()}},onClick:async()=>{if(t.onClick)return t.onClick();const e=await Object(s["a"])("Are you sure you want to clear field data?");e&&this.clearValue()}}},getBackBtn(e={}){const t=e||{},n=()=>!(1===this.currentFields.length||this.currentIndex<=0);return{name:(null===t||void 0===t?void 0:t.name)||"Back",slot:"end",state:{disabled:{default:()=>!1,onsubmit:()=>!0},visible:{onload:()=>n(),default:()=>n()}},onClick:()=>t.onClick?t.onClick():this.goBack()}},getNextBtn(e={}){const t=e||{},n=()=>!(this.currentIndex+1>=this.currentFields.length||this.currentFields.length<=1);return{name:(null===t||void 0===t?void 0:t.name)||"Next",color:(null===t||void 0===t?void 0:t.color)||"success",slot:"end",state:{disabled:{onsubmit:()=>!0,default(e){return"requireNext"in e&&!e.requireNext}},visible:{onsubmit:()=>!1,onfinish:()=>!1,default:()=>n(),onload:()=>n()}},onClick:()=>t.onClick?t.onClick(this.formData,this.computedFormData):this.goNext()}},getFinishBtn(e={}){const t=e||{},n=()=>this.currentIndex+1>=this.currentFields.length;return{name:(null===t||void 0===t?void 0:t.name)||"Finish",color:(null===t||void 0===t?void 0:t.color)||"success",slot:"end",state:{disabled:{default:()=>!1,onsubmit:()=>!0},visible:{onfinish:()=>!0,onsubmit:()=>!0,default:()=>n(),onload:()=>n()}},onClick:()=>t.onClick?t.onClick():this.goNext()}},onVisibleBtnState(e){var t;try{var n,a;if(null!==(n=this.currentField)&&void 0!==n&&null!==(a=n.config)&&void 0!==a&&a.hiddenFooterBtns.includes(e.name))return!1}catch(o){}if(null!==e&&void 0!==e&&null!==(t=e.state)&&void 0!==t&&t.visible){if(this.state in e.state.visible)return e.state.visible[this.state](this.currentField,this.formData);if("default"in e.state.visible)return e.state.visible["default"](this.currentField,this.formData)}return!0},onDisabledBtnState(e){var t;if(null!==e&&void 0!==e&&null!==(t=e.state)&&void 0!==t&&t.disabled){if(this.state in e.state.disabled)return e.state.disabled[this.state](this.currentField,this.formData);if("default"in e.state.disabled)return e.state.disabled["default"](this.currentField,this.formData)}return!1},getDefaultSummaryField(){return{id:"__form_summary__",helpText:"Summary",type:i["b"].TT_SUMMARY,config:{hiddenFooterBtns:["Clear"]},options:(e,t)=>{let n=[];for(const a in this.currentFields){const o=this.currentFields[a],i=o.proxyID||o.id;if(!e[i])continue;const c=Array.isArray(e[i])?e[i]:[e[i]];("function"!==typeof o.appearInSummary||o.appearInSummary(e))&&c.forEach(a=>{if("function"!==typeof o.summaryMapValue)n.push({label:o.helpText,value:"object"===typeof a?a.label:a});else{const i=o.summaryMapValue(a,e,t[o.id],t);Array.isArray(i)?n=n.concat(i):i&&n.push(i)}})}return n}}},resolveFormValues(e){const t={};for(const n in e)null!=e[n]&&(t[n]=e[n]);return t},getFinalComputedValues(e){const t={};for(const n in e){const a=Object(c["find"])(this.fields,{proxyID:n})||Object(c["find"])(this.fields,{id:n});a&&"function"===typeof a.finalComputedValue&&(t[n]=a.finalComputedValue(e[n],e,t))}return t},async onFinishAction(){const e=this.resolveFormValues(this.formData),t=this.resolveFormValues(this.computedFormData);if(this.computedFormData={...t,...this.getFinalComputedValues(e)},this.onFinish)try{this.state="onsubmit",await this.onFinish(e,this.computedFormData)}catch(n){console.error(n),Object(s["c"])(""+n)}this.state="onfinish",this.$emit("onFinish",e,this.computedFormData)},async goNext(){if("function"===typeof this.currentField.isRequired&&this.currentField.isRequired(this.formData,this.computedFormData)&&Object(c["isEmpty"])(this.formData[this.currentField.id]))return Object(s["e"])("Field cannot be empty",3e3);if(this.currentField.validation){const e=this.formData[this.currentField.id],t=this.currentField.validation(e,this.formData,this.computedFormData);if(t)return Object(s["e"])(t.join(", "),2e3)}this.currentField.beforeNext&&!await this.currentField.beforeNext(this.formData[this.currentField.id],this.formData,this.computedFormData,this)||await this.onNext()},async goBack(){for(let t=this.currentIndex;t>=0;--t){const n=this.currentFields[t];if(!this.isHiddenField(n)&&(Object(c["isEmpty"])(this.currentField)||this.currentField.id!==n.id)){await this.initFieldOnce(n);try{if(!await this.checkFieldCondition(n))continue}catch(e){continue}return void await this.setActiveField(t,"prev")}}Object(s["e"])("Previous page not available at the moment!")},async checkFieldCondition(e){let t=!0;if("function"!=typeof e.condition)return t;try{t=await e.condition(this.formData,this.computedFormData)}catch(n){t=!1}return t||("function"===typeof e.onConditionFalse&&e.onConditionFalse(),this.formData[e.id]="function"===typeof e.defaultOutput&&e.defaultOutput(this.formData,this.computedFormData)||null,e.computedValue&&(this.computedFormData[e.id]="function"===typeof e.defaultComputedOutput&&e.defaultComputedOutput(this.formData,this.computedFormData)||null),t)},onFieldActivated(e){this.currentFieldContext=e,this.state="onload",this.history[""+this.currentIndex]&&null===this.formData[this.currentField.id]&&this.clearValue(),this.currentField.onload&&this.currentField.onload(e)},async onUnload(e=""){try{if(this.state="unload",!Object(c["isEmpty"])(this.currentField)&&this.currentField.unload){const t=this.formData[this.currentField.id];await this.currentField.unload(t,e,this.formData,this.computedFormData,this)}}catch(t){console.error(t)}},buildFormData(e){this.formData={},e.forEach(e=>{e.proxyID&&(this.formData[e.proxyID]=null),this.formData[e.id]=null})},async setActiveFieldValue(e){this.state="onValue";const t=this.currentField.proxyID,n=this.currentField.id;if(t&&(this.formData[t]=e),this.formData[n]=e,"object"===typeof this.currentField&&"function"===typeof this.currentField.computedValue){const t=this.currentField.proxyID||this.currentField.id;this.computedFormData[t]="object"===typeof e&&null!=e||"string"===typeof e&&!e?this.currentField.computedValue(e,this.formData,this.computedFormData):null}"function"===typeof this.currentField.updateHelpTextOnValue&&(this.helpText=this.currentField.updateHelpTextOnValue(e,this.formData)),this.clearHistoryIndexValuesAfterCurrentIndex()},async onNext(){const e=this.currentFields.length;for(let n=this.currentIndex;n<e;++n){const e=this.currentFields[n];if(this.isHiddenField(e))await this.processHiddenField(e);else if(Object(c["isEmpty"])(this.currentField)||this.currentField.id!==e.id){await this.initFieldOnce(e);try{if(!await this.checkFieldCondition(e))continue}catch(t){continue}if("function"===typeof this.currentField.exitsForm&&this.currentField.exitsForm(this.formData,this.computedFormData))break;return void this.setActiveField(n,"next")}}await this.onFinishAction()},async setActiveField(e,t=""){var n;if(this.isHiddenField(this.currentFields[e]))return console.warn("Cannot navigate to hidden field!!");await this.onUnload(t),this.appendCurrentIndexToHistory(),this.state=t,this.currentIndex=e,this.currentField=this.currentFields[this.currentIndex],await this.initFieldOnce(this.currentField),this.helpText=this.currentField.dynamicHelpText?this.currentField.dynamicHelpText(this.formData,t):"function"===typeof this.currentField.updateHelpTextOnValue?this.currentField.updateHelpTextOnValue(this.formData[this.currentField.id],this.computedFormData[this.currentField.id]):this.currentField.helpText,this.footerBtns=[this.getCancelBtn()],this.currentField.config&&this.currentField.config.footerBtns&&(this.footerBtns=this.footerBtns.concat(this.currentField.config.footerBtns));const a=null===(n=this.currentField.config)||void 0===n?void 0:n.overrideDefaultFooterBtns;this.footerBtns.push(this.getClearBtn(null===a||void 0===a?void 0:a.clearBtn)),this.footerBtns.push(this.getBackBtn(null===a||void 0===a?void 0:a.backBtn)),this.footerBtns.push(this.getNextBtn(null===a||void 0===a?void 0:a.nextBtn)),this.footerBtns.push(this.getFinishBtn(null===a||void 0===a?void 0:a.finishBtn))},onFieldValue(e){this.setActiveFieldValue(e),"requireNext"in this.currentField&&!this.currentField.requireNext&&this.goNext()},async initFieldOnce(e){"function"===typeof e.init&&(this.fieldsInitialisedOnce[e.id]||(this.fieldsInitialisedOnce[""+e.id]=await e.init(this.formData,this.computedFormData)))},isHiddenField(e){return e.type===i["b"].TT_HIDDEN},async processHiddenField(e){const t=e.proxyID||e.id;if("function"===typeof e.init&&await this.initFieldOnce(e),"function"===typeof e.condition)try{if(!await e.condition(this.formData,this.computedFormData))return this.formData[t]=null,void(this.computedFormData[t]=null)}catch(n){return this.formData[t]=null,void(this.computedFormData[t]=null)}"function"===typeof e.onload&&await e.onload(this.formData),"function"===typeof e.defaultValue&&(this.formData[t]=await e.defaultValue(this.formData,this.computedFormData)),"function"===typeof e.computedValue&&(this.computedFormData[t]=await e.computedValue(this.formData[t],this.formData,this.computedFormData)),"function"===typeof e.unload&&await e.unload(this.formData,this.computedFormData)}}});const S=h()(w,[["render",o]]);t["a"]=S},"95a0":function(e,t,n){"use strict";n("454a")},9708:function(e,t,n){},"985a":function(e,t,n){"use strict";n("9e7e")},"9b7c":function(e,t,n){"use strict";n.d(t,"a",(function(){return d}));n("13d5"),n("14d9");var a=n("1c74"),o=n("9283"),i=n("8158"),c=n("7957"),r=n("2ef0"),s=n("5a0c"),l=n.n(s);class d extends a["e"]{constructor(){super()}static create(e){return super.postJson("/lab/orders",e)}static getOrders(e,t={}){return super.getJson("/lab/orders",{patient_id:e,...t})}static async getOrdersIncludingGivenResultStatus(e,t={}){const n=(await this.getOrders(e,t)).map(async e=>{const t={...e,result_given:!1},n=e.tests.filter(e=>null!=e.result).map(e=>e.result).reduce((e,t)=>[...e,...t],[]).reduce((e,t)=>t.id,null);try{t["result_given"]=n?await(await c["a"].get(n)).children.reduce(async(e,t)=>await i["a"].getConceptID("Result Given to Client")===t.concept_id&&"Yes"===await i["a"].getConceptName(t.value_coded)?"Yes":e,"No"):"N/A"}catch(a){console.error(a)}return t});return await Promise.all(n)}static getTestTypes(){return super.getJson("/lab/test_types")}static getTestTypesBySpecimen(e=""){return super.getJson("/lab/test_types",{specimen_type:e})}static getSpecimens(e){return super.getJson("/lab/specimen_types",{test_type:e})}static getViralLoadOrders(e){return e.filter(e=>{try{const t=e.tests[0].result;return!!Array.isArray(t)&&(e.tests.length>0&&e.tests[0].result.length>0)}catch(t){console.log(t)}})}static async getLatestMalariaTestResult(e,t=this.getSessionDate()){const n=await this.getOrders(e),a=l()(t).subtract(7,"day"),o=n.filter(e=>{for(const t of e.tests)if(!Object(r["isEmpty"])(t.result)&&t.name.match(/Malaria/i)&&l()(e.order_date).isAfter(a))return!0;return!1});if(o.length>0){const e=o[0].tests.some(e=>e.result.some(e=>e.value.toString().match(/negative|no/i)));return e?"Negative":"Positive"}return"No"}static isDBSResult(e){return e.match(/DBS/i)}static isValidVLResult(e,t,n){return this.isDBSResult(e)?t.match(/</)&&n.match(/ldl|400|550|839/i)||t.match(/=/)&&parseFloat(n)>=400||">"!==t:t.match(/</)&&n.match(/ldl|20|40|150/i)||t.match(/=/)&&parseFloat(n)>=20}static isHighViralLoadResult(e){return"="===e.value_modifier&&parseFloat(e.value)>=1e3||(("<"===e.value_modifier||"&lt"===e.value_modifier)&&parseFloat(e.value)>1e3||(">"===e.value_modifier||"&gt"===e.value_modifier)&&(parseFloat(e.value)>=1e3||"LDL"==(""+e.value).toUpperCase().replace(/\s+/g,"")))}static formatLabs(e){const t=[];for(let n=0;n<e.length;n++){const a=e[n].accession_number,i="Unknown"==e[n].specimen.name?"N/A":e[n].specimen.name,c=e[n].order_date,r=e[n].tests;for(let s=0;s<r.length;s++){const l=r[s].result?r[s].result:[],d=[],u=[];let p="";for(let e=0;e<l.length;e++){p=null===l[e].date?"":""+l[e].date;const t=l[e].indicator.name,n=l[e].value,a=l[e].value_modifier.replace("&lt;","<").replace("&gt;",">");d.push(t+"   "+a+n),u.push(l[e].id)}t.push({encounter_id:e[n].encounter_id,order_id:e[n].order_id,result_given:e[n]["result_given"]||"N/A",accession_number:a,test_name:r[s].name,specimen:i,ordered:c?o["b"].toStandardHisFormat(c):"",result:d,resultIds:u,released:p?o["b"].toStandardHisFormat(p):""})}}return t}static buildLabOrders(e,t){return t.map(t=>{const n=i["a"].getCachedConceptID(t.reason,!0),a={encounter_id:e.encounter_id,tests:[{concept_id:t.concept_id}],reason_for_test_id:n,target_lab:super.getLocationName(),date:o["b"].toStandardHisFormat(super.getSessionDate()),requesting_clinician:super.getUserName()};return t.accessionNumber&&(a["accession_number"]=t.accessionNumber),t.specimenConcept&&(a["specimen"]={concept_id:t.specimenConcept}),a})}static saveOrdersArray(e,t){return this.create({encounter_id:e,orders:t})}}},"9c73":function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));n("14d9");var a=n("cc6f"),o=n("9b7c"),i=n("b89f");class c extends a["a"]{constructor(e){super(e,57)}getOrders(e){return o["a"].getOrders(this.patientID,{status:e})}voidOrder(e,t){return o["a"].void("lab/orders/"+e,{reason:t})}updateOrderSpecimen(e,t){return o["a"].putJson("lab/orders/"+e,{specimen:{concept_id:t}})}printSpecimenLabel(e){return(new i["a"]).printLbl("lab/labels/order?order_id="+e)}async placeOrder(e){let t=[];const n=await this.createEncounter();if(!n)throw"Unable to create encounter";const a={encounter_id:n.encounter_id,date:this.date,...e};return a.requesting_clinician||(a["requesting_clinician"]=o["a"].getUserName()),t=e.combine_tests?[a]:a.tests.map(e=>{const t={...a};return t.tests=[e],t}),o["a"].postJson("lab/orders",{orders:t})}static async getSpecimensForTests(e){const t=await Promise.all(e.map(e=>o["a"].getSpecimens(e.name)));return this.getCommonSpecimens(t)}static getCommonSpecimens(e){const t={},n=[];e.forEach(e=>{e.forEach(({name:e,...n})=>{const a={name:e,...n};t[e]?t[e].push(a):t[e]=[a]})});for(const a in t)t[a].length>=e.length&&n.push(t[a][0]);return n}}},"9ceb":function(e,t,n){"use strict";n.d(t,"b",(function(){return s}));n("14d9");var a=n("9283"),o=n("0011"),i=n("25da"),c=n("2ef0");function r(e){return"string"!==typeof e?e:e.replace(/,/gi," ").trim()}function s(e,t){const n=[],a=[];for(const o in t){const a=[];t[o].forEach((t,n)=>{const o=e[e.length-1][n];"exportable"in o&&o.exportable&&a.push(t.value?r(t.value):r(t.td))}),n.push(a)}for(const o in e){const t=[];e[o].forEach(e=>{e.exportable&&t.push(e.value?r(e.value):r(e.th))}),Object(c["isEmpty"])(t)||a.push(t)}return{columns:a,rows:n}}function l(e){const t={th:()=>e.th?e.th:"",td:()=>e.td?e.td:"",value:()=>e.value?e.value:"",sortValue:()=>e.sortValue?e.sortValue:0,type(){return e.type?e.type:"string"},exportable(){return!("exportable"in e)||e.exportable},sortable(){return!("sortable"in e)||e.sortable},colspan(){return e.colspan?e.colspan:0},cssClass(){return e.cssClass?e.cssClass:0},style(){return e.style?e.style:0},ascSort(){return e.ascSort?e.ascSort:(e,t)=>Object(i["a"])(t).asc(t=>{var n,a;return(null===(n=t[e])||void 0===n?void 0:n.sortValue)||(null===(a=t[e])||void 0===a?void 0:a.td)})},descSort(){return e.descSort?e.descSort:(e,t)=>Object(i["a"])(t).desc(t=>{var n,a;return(null===(n=t[e])||void 0===n?void 0:n.sortValue)||(null===(a=t[e])||void 0===a?void 0:a.td)})}},n={};for(const a in t)n[a]=t[a]();return n}function d(e,t={}){const n=t;return n.th=e,n.type="string",l(n)}function u(e,t={}){const n=t;return n.th=e,n.type="date",l(n)}function p(e,t={}){const n=t;return n.th=e,n.type="number",l(n)}function m(e,t={}){const n={...t};return n.td=Object(o["f"])(e),n.sortValue=parseInt(""+e),n.style={...n.style,textAlign:"right",paddingRight:"2rem"},l(n)}function h(e,t={}){const n=t;return n.td=e?a["b"].toStandardHisDisplayFormat(e):"",l(n)}function b(e,t={}){return{td:e,...t}}function g(e,t,n={}){return{td:e,event:{click:t,obj:"link"},...n}}function f(e,t,n={},a=""){const o={td:e,event:{click:t,color:a,obj:"button"}};return n.event&&(o.event={...o.event,...n.event},delete n.event),Object.assign(o,n)}t["a"]={thTxt:d,thNum:p,thDate:u,tdNum:m,td:b,tdBtn:f,tdDate:h,tdLink:g}},"9e49":function(e,t,n){"use strict";n.d(t,"a",(function(){return l}));var a=n("ade3"),o=n("cc6f"),i=n("1c74"),c=n("b89f"),r=n("5a0c"),s=n.n(r);class l extends o["a"]{constructor(e,t){super(e,32,t),Object(a["a"])(this,"hivStatus",void 0),Object(a["a"])(this,"artStatus",void 0),Object(a["a"])(this,"arvNumber",void 0),Object(a["a"])(this,"arvStartDate",void 0),Object(a["a"])(this,"isSubsequentVisit",void 0),Object(a["a"])(this,"isPregnancyTestDone",void 0),this.hivStatus="",this.artStatus="",this.arvNumber="",this.arvStartDate="",this.isPregnancyTestDone=!1,this.isSubsequentVisit=!1}getHivStatus(){return this.hivStatus}getArtStatus(){return this.artStatus}getArvNumber(){return this.arvNumber}getArvStartDate(){return this.arvStartDate}isHivPositive(){return!!this.hivStatus.match(/positive/i)}async isAtRiskOfPreEclampsia(){const e=await o["a"].getFirstValueNumber(this.patientID,"Systolic blood pressure"),t=await o["a"].getFirstValueNumber(this.patientID,"Diastolic blood pressure");return e&&t&&e>=140&&t>=90}async loadSubsequentVisit(){const e=await i["e"].getJson(`programs/${this.programID}/patients/${this.patientID}/subsequent_visit`,{date:this.date});if(e){if(this.hivStatus=e["hiv_status"],!this.hivStatus){const e=await this.getFirstValueCoded("HIV status");this.hivStatus=(""+e).match(/positive/i)?"Positive":""}this.isSubsequentVisit=e["subsequent_visit"],this.isPregnancyTestDone=e["pregnancy_test"]}}printLabResults(){return(new c["a"]).printLbl(`/programs/${this.programID}/patients/${this.patientID}/labels/lab_results?date=${this.date}`)}async loadArtStatus(){const e=await i["e"].getJson(`programs/${this.programID}/patients/${this.patientID}/art_hiv_status`),t=e["arv_start_date"]||"";t&&s()(this.date).isBefore(t)||e&&(this.hivStatus=e["hiv_status"]||this.hivStatus,this.artStatus=e["art_status"]||"",this.arvNumber=e["arv_number"]||"",this.arvStartDate=e["arv_start_date"]||"")}}},"9e7e":function(e,t,n){},a280:function(e,t,n){},a3a5:function(e,t,n){"use strict";var a=n("7a23");const o={key:0},i={key:0},c=["onClick"],r={key:1},s={key:1},l={key:2},d=["innerHTML"];function u(e,t,n,u,p,m){const h=Object(a["resolveComponent"])("ion-button");return Object(a["openBlock"])(),Object(a["createElementBlock"])("table",{class:Object(a["normalizeClass"])(["his-md-text",e.classStyles])},[Object(a["createElementVNode"])("tr",null,[(Object(a["openBlock"])(!0),Object(a["createElementBlock"])(a["Fragment"],null,Object(a["renderList"])(e.columns,(e,t)=>(Object(a["openBlock"])(),Object(a["createElementBlock"])("th",{key:t},Object(a["toDisplayString"])(e),1))),128))]),(Object(a["openBlock"])(!0),Object(a["createElementBlock"])(a["Fragment"],null,Object(a["renderList"])(e.rows,(t,n)=>(Object(a["openBlock"])(),Object(a["createElementBlock"])("tr",{key:n},[(Object(a["openBlock"])(!0),Object(a["createElementBlock"])(a["Fragment"],null,Object(a["renderList"])(t,(u,p)=>(Object(a["openBlock"])(),Object(a["createElementBlock"])("td",{class:Object(a["normalizeClass"])(e.getColorCodeClass(n,p)),key:p},[e.isLink(u)?(Object(a["openBlock"])(),Object(a["createElementBlock"])("div",o,[u.isActive?(Object(a["openBlock"])(),Object(a["createElementBlock"])("div",i,[Object(a["createElementVNode"])("a",{href:"#",onClick:Object(a["withModifiers"])(e=>u.action(t),["prevent"])},Object(a["toDisplayString"])(u.value),9,c)])):(Object(a["openBlock"])(),Object(a["createElementBlock"])("div",r,Object(a["toDisplayString"])(u.value),1))])):e.isActionButton(u)?(Object(a["openBlock"])(),Object(a["createElementBlock"])("div",s,[Object(a["createVNode"])(h,{color:(null===u||void 0===u?void 0:u.color)||"primary",style:Object(a["normalizeStyle"])(u.style),onClick:e=>u.action(t)},{default:Object(a["withCtx"])(()=>[Object(a["createTextVNode"])(Object(a["toDisplayString"])(u.name),1)]),_:2},1032,["color","style","onClick"])])):(Object(a["openBlock"])(),Object(a["createElementBlock"])("div",l,[Object(a["createElementVNode"])("span",{innerHTML:u},null,8,d)]))],2))),128))]))),128))],2)}var p=n("2ef0"),m=n("d867"),h=Object(a["defineComponent"])({components:{IonButton:m["d"]},props:{styles:{type:Array},rowColors:{type:Array,default:()=>[]},cellColors:{type:Array,default:()=>[]},columns:{type:Object,required:!0},rows:{type:Object}},computed:{classStyles(){const e=this.styles?this.styles.join(" "):"";return"his-table "+e}},methods:{isLink(e){try{return"object"===typeof e&&"link"===e.type}catch(t){return e}},isActionButton(e){try{return"object"===typeof e&&"button"===e.type}catch(t){return e}},getColorCodeClass(e,t){let n="";if(!Object(p["isEmpty"])(this.rowColors)){const t=this.rowColors.filter(t=>t.indexes.includes(e));Object(p["isEmpty"])(t)||(n+=" "+t[0].class)}if(!Object(p["isEmpty"])(this.cellColors)){const a=this.cellColors.filter(n=>n.index===t&&n.row===e);Object(p["isEmpty"])(a)||(n+=" "+a[0].class)}return n}}}),b=n("d959"),g=n.n(b);const f=g()(h,[["render",u]]);t["a"]=f},a4d3:function(e,t,n){"use strict";n("04a0")},a78a:function(e,t,n){},aa55:function(e,t,n){var a={"./ion-action-sheet.entry.js":["6618","chunk-485adc83"],"./ion-alert.entry.js":["f06c","chunk-106fab1a"],"./ion-app_8.entry.js":["c215","chunk-1b36f5ab"],"./ion-avatar_3.entry.js":["cf12","chunk-59d4c87c"],"./ion-back-button.entry.js":["4b35","chunk-69eb8776"],"./ion-backdrop.entry.js":["429d","chunk-2d0c073f"],"./ion-button_2.entry.js":["4453","chunk-25d83ca8"],"./ion-card_5.entry.js":["070b","chunk-541ea42d"],"./ion-checkbox.entry.js":["dfd8","chunk-09162720"],"./ion-chip.entry.js":["430d","chunk-09155df3"],"./ion-col_3.entry.js":["6a8a","chunk-2d0da04a"],"./ion-datetime_3.entry.js":["c15b","chunk-21a76241"],"./ion-fab_3.entry.js":["dd47","chunk-3ed29de3"],"./ion-img.entry.js":["9588","chunk-2d0e5812"],"./ion-infinite-scroll_2.entry.js":["d1e5","chunk-2d21da73"],"./ion-input.entry.js":["d111","chunk-37f2300e"],"./ion-item-option_3.entry.js":["1bb3d","chunk-b14c2520"],"./ion-item_8.entry.js":["69da","chunk-5a8ac886"],"./ion-loading.entry.js":["53a5","chunk-6d375f34"],"./ion-menu_3.entry.js":["cb00","chunk-097e0872"],"./ion-modal.entry.js":["1ad0","chunk-8cf3d17c"],"./ion-nav_2.entry.js":["e44f","chunk-22496fff"],"./ion-popover.entry.js":["4285","chunk-54f23343"],"./ion-progress-bar.entry.js":["9b72","chunk-1dbc15a2"],"./ion-radio_2.entry.js":["beb3","chunk-0e93a01c"],"./ion-range.entry.js":["719f","chunk-54bbd082"],"./ion-refresher_2.entry.js":["0a47","chunk-d8413eac"],"./ion-reorder_2.entry.js":["6672","chunk-d0e8aa0a"],"./ion-ripple-effect.entry.js":["c8da","chunk-2d218068"],"./ion-route_4.entry.js":["10e8","chunk-858cd918"],"./ion-searchbar.entry.js":["8625","chunk-a9395c36"],"./ion-segment_2.entry.js":["0c02","chunk-462c869e"],"./ion-select_3.entry.js":["d25f","chunk-79f1dac7"],"./ion-slide_2.entry.js":["05dd","chunk-2d0a463b"],"./ion-spinner.entry.js":["e11b","chunk-8bb7f81e"],"./ion-split-pane.entry.js":["aae8","chunk-2d213189"],"./ion-tab-bar_2.entry.js":["a2bb","chunk-02c995b5"],"./ion-tab_2.entry.js":["6725","chunk-22341d62"],"./ion-text.entry.js":["ed3b","chunk-30dd9750"],"./ion-textarea.entry.js":["8798","chunk-eaa2b130"],"./ion-toast.entry.js":["c1a5","chunk-41c0f7a4"],"./ion-toggle.entry.js":["bef2","chunk-7548ca2d"],"./ion-virtual-scroll.entry.js":["5fd7","chunk-2d0d43da"]};function o(e){if(!n.o(a,e))return Promise.resolve().then((function(){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}));var t=a[e],o=t[0];return n.e(t[1]).then((function(){return n(o)}))}o.keys=function(){return Object.keys(a)},o.id="aa55",e.exports=o},ab67:function(e,t,n){},ad49:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var a=n("1c74");class o extends a["e"]{constructor(){super()}static async get(e){try{const t=await super.getJson("global_properties",{property:e});if(t&&e in t)return t[e]}catch(t){console.error(t)}}static async isProp(e){try{const[t,n]=e.split("="),a=await this.get(t);if(a)return n===a}catch(t){console.error(t)}return!1}static set(e,t){return super.postJson("global_properties",{property:e,property_value:t})}}},ad60:function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var a=n("1c74"),o=n("2b3a"),i=n("d867");class c extends a["e"]{constructor(){super()}static getAllPrograms(){return super.getJson("programs",{page_size:1e3})}static getPatientPrograms(e){return super.getJson(`patients/${e}/programs`)}static getPatientVLInfo(e){const t=super.getProgramID();return super.getJson(`programs/${t}/patients/${e}/vl_info`,{date:this.getSessionDate()})}static getProgramWorkflows(e){return super.getJson(`programs/${e}/workflows`)}static getPatientStates(e,t){return super.getJson(`programs/${t}/patients/${e}/states`)}static voidProgram(e,t=""){return super.void(`patient_programs/${e}/`,{reason:t})}static createState(e,t,n){return super.postJson(`programs/${t}/patients/${e}/states`,n)}static voidState(e,t,n,a=""){return super.void(`programs/${t}/patients/${e}/states/${n}`,{reason:a})}static getProgramSummary(e,t){return super.getJson(`/programs/${t}/patients/${e}`)}static async getProgramInformation(e){try{const t=await super.getJson(`/programs/${super.getProgramID()}/patients/${e}`);return t}catch(t){return{}}}static getCurrentProgramInformation(e,t){return super.getJson(`/programs/${super.getProgramID()}/patients/${e}/visit?date=${t}`)}static getMastercardDrugInformation(e,t){return super.getJson(`/programs/${super.getProgramID()}/patients/${e}/mastercard_data?date=${t}`)}static getNextTask(e){return super.getJson(`/workflows/${super.getProgramID()}/${e}`,{date:super.getSessionDate()})}static getNextSuggestedARVNumber(){return super.getJson("/programs/1/next_available_arv_number")}static getFastTrackStatus(e){return super.getJson("/on_fast_track",{person_id:e,date:super.getSessionDate()})}static createPatient(e){return super.postJson("/patients/",{program_id:super.getProgramID(),person_id:e})}static enrollPatient(e){return super.postJson(`/patients/${e}/programs`,{program_id:super.getProgramID(),date_enrolled:super.getSessionDate()})}static enrollProgram(e,t,n){return super.postJson(`/patients/${e}/programs`,{program_id:t,date_enrolled:n})}static getWeightForHeightValues(){return super.getJson("/patient_weight_for_height_values")}static async selectApplication(){const e=await i["ab"].create({component:o["a"],cssClass:"my-custom-class",backdropDismiss:!1,componentProps:{appVersion:a["e"].getFullVersion()}});return e.present(),e}}},ae2a:function(e,t,n){"use strict";n("580a")},aeb4:function(e,t,n){"use strict";n("a280")},aee2:function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));class a{static async getBMIData(){const e=await fetch("/bmi.json");return e.json()}static async getBMIResult(e,t,n){let a={result:"",color:"",index:n};if(n<=0)return a.index=0,a;if(t<5&&t>0)a.result="Use MUAC to calculate nutrition status",a.color="red";else{t>18&&(t=19);const o=await this.getBMIData(),i=o[e][t];i&&(a=this.buildBounds(Object.keys(i),i,n,o.colors))}return a}static buildBounds(e,t,n,a){const o={result:"",color:"",index:n};return e.forEach(e=>{if(e.indexOf("-")>=0){const i=e.split("-");n>=parseFloat(i[0])&&n<=parseFloat(i[1])&&(o.result=t[e],o.color=a[t[e]])}else if(e.indexOf("<")>=0){const i=e.replace("<","");n<parseFloat(i)&&(o.result=t[e],o.color=a[t[e]])}else if(e.indexOf(">=")>=0){const i=e.replace(">=","");n>=parseFloat(i)&&(o.result=t[e],o.color=a[t[e]])}}),o}static getBMI(e,t,n,a){const o=this.calculateBMI(e,t);return this.getBMIResult(n,a,o)}static calculateBMI(e,t){if(0==t||0==e)return 0;let n=e/t/t*1e4;return Math.round(10*n)/10}}},afbc:function(e,t,n){"use strict";var a=n("bec5"),o=n("7a23");const i=e=>(Object(o["pushScopeId"])("data-v-1e6b9446"),e=e(),Object(o["popScopeId"])(),e),c=["src"],r={class:"tool-bar-medium-card"},s={class:"tool-bar-medium-card"},l={class:"his-sm-text tool-bar-medium-content"},d=i(()=>Object(o["createElementVNode"])("br",null,null,-1)),u=i(()=>Object(o["createElementVNode"])("br",null,null,-1)),p=i(()=>Object(o["createElementVNode"])("br",null,null,-1)),m={key:0},h={key:0,id:"container",class:"his-card overview"},b={key:0};function g(e,t,n,a,i,g){const f=Object(o["resolveComponent"])("ion-title"),_=Object(o["resolveComponent"])("ion-thumbnail"),v=Object(o["resolveComponent"])("ion-buttons"),O=Object(o["resolveComponent"])("ion-toolbar"),y=Object(o["resolveComponent"])("barcode-input"),T=Object(o["resolveComponent"])("ion-col"),j=Object(o["resolveComponent"])("ion-label"),k=Object(o["resolveComponent"])("program-icon"),I=Object(o["resolveComponent"])("ion-row"),E=Object(o["resolveComponent"])("ion-header"),C=Object(o["resolveComponent"])("ion-icon"),D=Object(o["resolveComponent"])("ion-segment-button"),N=Object(o["resolveComponent"])("ion-segment"),w=Object(o["resolveComponent"])("home-folder"),S=Object(o["resolveComponent"])("home-notification"),A=Object(o["resolveComponent"])("ion-content"),P=Object(o["resolveComponent"])("ion-button"),F=Object(o["resolveComponent"])("ion-footer"),x=Object(o["resolveComponent"])("ion-page");return Object(o["openBlock"])(),Object(o["createBlock"])(x,null,{default:Object(o["withCtx"])(()=>[Object(o["createVNode"])(E,{translucent:!0},{default:Object(o["withCtx"])(()=>[Object(o["createVNode"])(O,{class:"mobile-component-view"},{default:Object(o["withCtx"])(()=>[Object(o["createVNode"])(f,null,{default:Object(o["withCtx"])(()=>[Object(o["createTextVNode"])(Object(o["toDisplayString"])(e.facilityName),1)]),_:1}),Object(o["createVNode"])(v,{slot:"end"},{default:Object(o["withCtx"])(()=>[Object(o["createVNode"])(_,null,{default:Object(o["withCtx"])(()=>[Object(o["createElementVNode"])("img",{src:e.appLogo,class:"logo",alt:"App Logo"},null,8,c)]),_:1})]),_:1})]),_:1}),Object(o["createVNode"])(O,{class:"full-component-view"},{default:Object(o["withCtx"])(()=>[Object(o["createVNode"])(I,null,{default:Object(o["withCtx"])(()=>[Object(o["createVNode"])(T,null,{default:Object(o["withCtx"])(()=>[Object(o["createElementVNode"])("div",r,[Object(o["createVNode"])(y,{onOnScan:e.onBarcode,size:"small"},null,8,["onOnScan"])])]),_:1}),Object(o["createVNode"])(T,{size:"5"},{default:Object(o["withCtx"])(()=>[Object(o["createElementVNode"])("div",s,[Object(o["createElementVNode"])("div",l,[Object(o["createElementVNode"])("span",null,[Object(o["createTextVNode"])("Facility name: "),Object(o["createElementVNode"])("b",null,Object(o["toDisplayString"])(e.facilityName),1)]),Object(o["createTextVNode"])(),d,Object(o["createElementVNode"])("span",null,[Object(o["createTextVNode"])("Location: "),Object(o["createElementVNode"])("b",null,Object(o["toDisplayString"])(e.userLocation),1)]),u,Object(o["createElementVNode"])("span",null,[Object(o["createTextVNode"])("User: "),Object(o["createElementVNode"])("b",null,Object(o["toDisplayString"])(e.userName),1),Object(o["createTextVNode"])(" | Date: "),Object(o["createVNode"])(j,{color:e.isBDE?"danger":"success"},{default:Object(o["withCtx"])(()=>[Object(o["createElementVNode"])("b",null,Object(o["toDisplayString"])(e.sessionDate),1)]),_:1},8,["color"])]),p])])]),_:1}),Object(o["createVNode"])(T,{size:"3"},{default:Object(o["withCtx"])(()=>[Object(o["createVNode"])(k,{icon:e.appLogo,version:e.appVersion},null,8,["icon","version"])]),_:1})]),_:1})]),_:1})]),_:1}),Object(o["createVNode"])(O,null,{default:Object(o["withCtx"])(()=>[Object(o["createVNode"])(N,{scrollable:"",value:e.activeTab,class:"ion-justify-content-center"},{default:Object(o["withCtx"])(()=>[Object(o["createVNode"])(D,{value:1,onClick:t[0]||(t[0]=t=>e.onSegmentClick(1))},{default:Object(o["withCtx"])(()=>[Object(o["createVNode"])(C,{icon:e.statsChart},null,8,["icon"]),Object(o["createVNode"])(j,{class:"his-sm-text"},{default:Object(o["withCtx"])(()=>[Object(o["createTextVNode"])(" Overview ")]),_:1})]),_:1}),e.canReport?(Object(o["openBlock"])(),Object(o["createBlock"])(D,{key:0,value:2,onClick:t[1]||(t[1]=t=>e.onSegmentClick(2))},{default:Object(o["withCtx"])(()=>[Object(o["createVNode"])(C,{icon:e.pieChart},null,8,["icon"]),Object(o["createVNode"])(j,{class:"his-sm-text"},{default:Object(o["withCtx"])(()=>[e.showSegmentBackArrow&&2===e.activeTab?(Object(o["openBlock"])(),Object(o["createBlock"])(C,{key:0,icon:e.arrowBack},null,8,["icon"])):Object(o["createCommentVNode"])("",!0),Object(o["createTextVNode"])(" Reports ")]),_:1})]),_:1})):Object(o["createCommentVNode"])("",!0),Object(o["createVNode"])(D,{value:3,onClick:t[2]||(t[2]=t=>e.onSegmentClick(3))},{default:Object(o["withCtx"])(()=>[Object(o["createVNode"])(C,{icon:e.settings},null,8,["icon"]),Object(o["createVNode"])(j,{class:"his-sm-text"},{default:Object(o["withCtx"])(()=>[e.showSegmentBackArrow&&3===e.activeTab?(Object(o["openBlock"])(),Object(o["createBlock"])(C,{key:0,icon:e.arrowBack},null,8,["icon"])):Object(o["createCommentVNode"])("",!0),Object(o["createTextVNode"])(" Administration ")]),_:1})]),_:1}),Object(o["createVNode"])(D,{value:4,onClick:t[3]||(t[3]=t=>e.onSegmentClick(4))},{default:Object(o["withCtx"])(()=>[Object(o["createVNode"])(C,{color:e.hasUnreadNotifications?"danger":"",icon:e.notifications},null,8,["color","icon"]),Object(o["createVNode"])(j,{color:e.hasUnreadNotifications?"danger":"",class:"his-sm-text"},{default:Object(o["withCtx"])(()=>[Object(o["createTextVNode"])(" Alerts "),e.hasUnreadNotifications?(Object(o["openBlock"])(),Object(o["createElementBlock"])("b",m,"("+Object(o["toDisplayString"])(e.notificationCount)+")",1)):Object(o["createCommentVNode"])("",!0)]),_:1},8,["color"])]),_:1})]),_:1},8,["value"])]),_:1}),Object(o["createVNode"])(A,{fullscreen:!0},{default:Object(o["withCtx"])(()=>[e.ready?(Object(o["openBlock"])(),Object(o["createElementBlock"])("div",h,[Object(o["withDirectives"])(Object(o["createElementVNode"])("div",null,[(Object(o["openBlock"])(),Object(o["createBlock"])(Object(o["resolveDynamicComponent"])(e.appOverview)))],512),[[o["vShow"],1==e.activeTab]]),Object(o["withDirectives"])(Object(o["createElementVNode"])("div",null,[Object(o["createVNode"])(w,{onOnSublist:t[4]||(t[4]=t=>e.showSegmentBackArrow=!0),items:e.appReports,resetList:e.resetReport},null,8,["items","resetList"])],512),[[o["vShow"],2==e.activeTab]]),Object(o["withDirectives"])(Object(o["createElementVNode"])("div",null,[Object(o["createVNode"])(w,{onOnSublist:t[5]||(t[5]=t=>e.showSegmentBackArrow=!0),items:e.app.globalPropertySettings,resetList:e.resetAdmin},null,8,["items","resetList"])],512),[[o["vShow"],3==e.activeTab]]),4==e.activeTab?(Object(o["openBlock"])(),Object(o["createElementBlock"])("div",b,[Object(o["createVNode"])(S)])):Object(o["createCommentVNode"])("",!0)])):Object(o["createCommentVNode"])("",!0)]),_:1}),Object(o["createVNode"])(F,null,{default:Object(o["withCtx"])(()=>[Object(o["createVNode"])(O,null,{default:Object(o["withCtx"])(()=>[Object(o["createVNode"])(I,null,{default:Object(o["withCtx"])(()=>[Object(o["createVNode"])(T,null,{default:Object(o["withCtx"])(()=>[Object(o["createVNode"])(P,{class:"xl-button mobile-component-view",color:"danger",onClick:e.signOut},{default:Object(o["withCtx"])(()=>[Object(o["createVNode"])(C,{icon:e.logOut},null,8,["icon"])]),_:1},8,["onClick"]),Object(o["createVNode"])(P,{class:"xl-button full-component-view",color:"danger",size:"large",onClick:e.signOut},{default:Object(o["withCtx"])(()=>[Object(o["createVNode"])(C,{icon:e.logOut},null,8,["icon"]),Object(o["createVNode"])(j,null,{default:Object(o["withCtx"])(()=>[Object(o["createTextVNode"])(" Logout ")]),_:1})]),_:1},8,["onClick"])]),_:1}),Object(o["createVNode"])(T,null,{default:Object(o["withCtx"])(()=>[e.canFindByIdentifier?(Object(o["openBlock"])(),Object(o["createBlock"])(P,{key:0,class:"xl-button mobile-component-view",color:"primary","router-link":"/patients/search/id"},{default:Object(o["withCtx"])(()=>[Object(o["createVNode"])(C,{icon:e.search},null,8,["icon"])]),_:1})):Object(o["createCommentVNode"])("",!0),e.canFindByIdentifier?(Object(o["openBlock"])(),Object(o["createBlock"])(P,{key:1,class:"xl-button full-component-view",color:"primary",size:"large","router-link":"/patients/search/id"},{default:Object(o["withCtx"])(()=>[Object(o["createVNode"])(C,{icon:e.search},null,8,["icon"]),Object(o["createVNode"])(j,null,{default:Object(o["withCtx"])(()=>[Object(o["createTextVNode"])(" Find By ")]),_:1})]),_:1})):Object(o["createCommentVNode"])("",!0),e.htcProgram?(Object(o["openBlock"])(),Object(o["createBlock"])(P,{key:2,class:"xl-button full-component-view",color:"primary",size:"large","router-link":"/hts_self_test"},{default:Object(o["withCtx"])(()=>[Object(o["createVNode"])(C,{icon:e.medkit},null,8,["icon"]),Object(o["createVNode"])(j,null,{default:Object(o["withCtx"])(()=>[Object(o["createTextVNode"])(" Self-Test Register ")]),_:1})]),_:1})):Object(o["createCommentVNode"])("",!0),e.htcProgram?(Object(o["openBlock"])(),Object(o["createBlock"])(P,{key:3,class:"xl-button mobile-component-view",color:"primary",size:"medium","router-link":"/hts_self_test"},{default:Object(o["withCtx"])(()=>[Object(o["createVNode"])(C,{icon:e.medkit},null,8,["icon"])]),_:1})):Object(o["createCommentVNode"])("",!0)]),_:1}),Object(o["createVNode"])(T,null,{default:Object(o["withCtx"])(()=>[Object(o["createVNode"])(P,{class:"xl-button mobile-component-view",color:"success","router-link":"/patient/registration"},{default:Object(o["withCtx"])(()=>[Object(o["createVNode"])(C,{icon:e.person},null,8,["icon"])]),_:1}),Object(o["createVNode"])(P,{class:"xl-button full-component-view",color:"success",size:"large","router-link":"/patient/registration"},{default:Object(o["withCtx"])(()=>[Object(o["createVNode"])(C,{icon:e.person},null,8,["icon"]),Object(o["createVNode"])(j,null,{default:Object(o["withCtx"])(()=>[Object(o["createTextVNode"])(Object(o["toDisplayString"])(e.htcProgram?"Professional Test":"Find/Register"),1)]),_:1})]),_:1})]),_:1}),Object(o["createVNode"])(T,null,{default:Object(o["withCtx"])(()=>[Object(o["createVNode"])(P,{class:"xl-button mobile-component-view",color:"primary",onClick:e.openModal},{default:Object(o["withCtx"])(()=>[Object(o["createVNode"])(C,{icon:e.apps},null,8,["icon"])]),_:1},8,["onClick"]),Object(o["createVNode"])(P,{class:"xl-button full-component-view",color:"primary",size:"large",onClick:e.openModal},{default:Object(o["withCtx"])(()=>[Object(o["createVNode"])(C,{icon:e.apps},null,8,["icon"]),Object(o["createVNode"])(j,null,{default:Object(o["withCtx"])(()=>[Object(o["createTextVNode"])(" Apps ")]),_:1})]),_:1},8,["onClick"])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})}n("14d9");var f=n("3e53"),_=n("9283"),v=n("1c74"),O=n("89b4"),y=n("cc74"),T=n("3f31"),j=n("1718"),k=n("ff79"),I=n("d867"),E=n("2ed9"),C=n("b5e4"),D=n("6605"),N=n("8e8b"),w=n("efaf"),S=n("23e6"),A=n("8f12"),P=n("2ef0"),F=(n("33d1"),n("ea98"),n("0011"));function x(e){var t,n;const a=null===(t=e.split("<"))||void 0===t||null===(n=t.at(-1))||void 0===n?void 0:n.split("~");if(a&&a.length>=6)return{gender:a[5],birthdate:a[6],nationalIDStatus:"true",malawiNationalID:a[2],given_name:Object(F["g"])(a[3]),family_name:Object(F["g"])(a[1])}}var V=n("0ba8"),R=n("b432"),B=Object(o["defineComponent"])({name:"Home",components:{IonTitle:I["S"],IonThumbnail:I["R"],IonIcon:I["r"],IonContent:I["n"],IonHeader:I["q"],IonPage:I["D"],IonButtons:I["e"],IonToolbar:I["T"],IonRow:I["I"],IonCol:I["m"],IonButton:I["d"],IonFooter:I["o"],IonSegment:I["J"],IonSegmentButton:I["K"],IonLabel:I["x"],BarcodeInput:w["a"],ProgramIcon:Object(o["defineAsyncComponent"])(()=>n.e("chunk-8916defa").then(n.bind(null,"111c"))),HomeFolder:Object(o["defineAsyncComponent"])(()=>n.e("chunk-4c7d4cdd").then(n.bind(null,"ce5d"))),HomeNotification:Object(o["defineAsyncComponent"])(()=>n.e("chunk-4cacbac4").then(n.bind(null,"b61c")))},setup(){const e=Object(D["i"])(),{activePlatformProfile:t}=Object(E["e"])(),n=async t=>{if(t.length>30&&await N["a"].get("IS_MW_NATIONAL_ID_SCANNER_ENABLED")){const n=x(t);if(!n)return;const a=await S["a"].findByOtherID(A["b"],n.malawiNationalID);if(Object(P["isEmpty"])(a))return e.push({path:"/patient/registration",query:n});e.push({path:"/patients/confirm",query:{person_id:a[0]["patient_id"]}})}t.length>4&&e.push("/patients/confirm?patient_barcode="+t)};Object(o["watch"])(R["c"],e=>{if(e){R["b"].value=!1;const{launchSynchronizationDialog:e,cleanUpOfflineData:t,offlineData:n}=Object(R["a"])();t(),n.value.length&&e(!0)}},{immediate:!0});const{notificationData:a,notificationCount:i,hasUnreadNotifications:c}=Object(T["a"])();return{medkit:k["B"],hasUnreadNotifications:c,notificationData:a,notificationCount:i,notifications:k["E"],apps:k["c"],person:k["F"],search:k["K"],logOut:k["x"],statsChart:k["O"],pieChart:k["G"],arrowBack:k["e"],settings:k["N"],activePlatformProfile:t,onBarcode:n}},data(){return{app:{},facilityName:"",userLocation:"",sessionDate:"",userName:"",appVersion:"",activeTab:1,ready:!1,overviewComponent:{},isBDE:!1,showSegmentBackArrow:!1,resetReport:0,resetAdmin:0}},computed:{appOverview(){return this.app.homeOverviewComponent},appLogo(){return Object(j["a"])(this.app.applicationIcon)},appReports(){return this.app.programReports?this.app.programReports:[]},appAdministration(){return this.app.globalPropertySettings?this.app.globalPropertySettings:[]},canFindByIdentifier(){return!!this.app.programPatientIdentifiers},canReport(){return!!this.app.programReports},htcProgram(){return"ITS"===this.app.applicationName}},methods:{onSegmentClick(e){this.activeTab=e,2===this.activeTab?this.resetReport+=1:3===this.activeTab&&(this.resetAdmin+=1),this.showSegmentBackArrow=!1,N["a"].set("ACTIVE_HOME_TAB",this.activeTab)},async setLocation(){const e=await N["a"].get("CURRENT_LOCATION");this.facilityName=e.name,this.createSessionLocationName(e)},createSessionLocationName(e){sessionStorage.location=e.name,sessionStorage.locationName=e.name,sessionStorage.siteUUID=e.uuid},loadApplicationData(){this.ready=!0,this.isBDE=!0===v["e"].isBDE(),this.userLocation=sessionStorage.userLocation,this.userName=sessionStorage.username,this.setLocation(),this.sessionDate=_["b"].toStandardHisDisplayFormat(v["e"].getSessionDate()),this.appVersion=v["e"].getFullVersion()},async openModal(){const e=await f["a"].selectApplication("HomePage");e&&(this.app=e,this.activeTab=1,this.loadApplicationData())},async signOut(){const e=await Object(C["a"])("Are you sure you want to logout ?");if(!e)return;const t=new O["a"];try{if(N["a"].invalidateAll(),V["b"].emit(V["a"].LOGOUT),await y["b"].portalEnabled()){const e=await y["b"].portalProperties();window.location=e}else this.$router.push("/login")}catch(n){console.warn(""+n)}t.clearSession()}},async created(){this.activeTab=await N["a"].get("ACTIVE_HOME_TAB");const{launchSynchronizationDialog:e,cleanUpOfflineData:t,offlineData:n}=Object(R["a"])(),{loadNotifications:a}=Object(T["a"])();await a(),t(),n.value.length&&e(),setInterval(()=>{const e=this.$refs.scanBarcode;e&&e.focus()},1500)},async mounted(){await f["a"].doAppManagementTasks();const e=f["a"].getActiveApp();e?(this.app=e,this.loadApplicationData()):this.openModal()}}),L=(n("201d"),n("d959")),H=n.n(L);const M=H()(B,[["render",g],["__scopeId","data-v-1e6b9446"]]);var U=M,$=n("f768");const G=[...Object($["a"])(),{path:"/",name:"Home",component:U},{path:"/npid/duplicates/:npid",name:"NPID Duplicates",component:()=>n.e("chunk-2d0b66fc").then(n.bind(null,"1cc7"))},{name:"Merge rollback",path:"/merge/rollback/:id",component:()=>n.e("chunk-70e95d33").then(n.bind(null,"8eed"))},{name:"View Duplicates",path:"/view_duplicates",component:()=>n.e("chunk-0adaa4ea").then(n.bind(null,"7bdc"))},{name:"Update site location",path:"/location/update/site",component:()=>n.e("chunk-4620f548").then(n.bind(null,"07a9"))},{name:"Update site code",path:"/location/update/code",component:()=>n.e("chunk-4621dc90").then(n.bind(null,"2867"))},{path:"/login",name:"Login",component:()=>n.e("chunk-d99d2ac4").then(n.bind(null,"7101"))},{path:"/session/date",name:"Session Date",component:()=>n.e("chunk-4639117c").then(n.bind(null,"e8ff"))},{path:"/users/usage",name:"User system usage",component:()=>n.e("chunk-0b6f0372").then(n.bind(null,"0964"))},{path:"/print/location",name:"Print Location",component:()=>n.e("chunk-46239ead").then(n.bind(null,"6439"))},{path:"/select_hc_location",name:"HC Location",component:()=>n.e("chunk-0f8148d5").then(n.bind(null,"c85f"))},{path:"/patient/dashboard/:id",name:"Patient Dashboard",component:()=>n.e("chunk-4c1657e5").then(n.bind(null,"5906"))},{path:"/patient/registration",name:"Patient Registration",component:()=>n.e("chunk-6349c9bc").then(n.bind(null,"8d15"))},{path:"/guardian/registration/:patient_id",name:"Guardian Registration",component:()=>n.e("chunk-2fa7d8e1").then(n.bind(null,"0a4b"))},{path:"/example",name:"Example",component:()=>n.e("chunk-2d22ca72").then(n.bind(null,"f3c2"))},{path:"/patients/search/id",name:"ID Search",component:()=>n.e("chunk-46236a85").then(n.bind(null,"4d5a"))},{path:"/patients/confirm",name:"Patient confirmation",component:()=>n.e("chunk-9e1fb024").then(n.bind(null,"3171"))},{path:"/patients/merge",name:"Patient Merging",component:()=>n.e("chunk-9a316cbe").then(n.bind(null,"7fcd"))},{path:"/patient/programs/:patient_id",name:"Program(s)",component:()=>n.e("chunk-cd588f90").then(n.bind(null,"357c"))},{path:"/preferences",name:"Preferences",component:()=>n.e("chunk-462480cb").then(n.bind(null,"829a"))},{path:"/user",name:"User",component:()=>n.e("chunk-4623e302").then(n.bind(null,"5e8a"))},{path:"/settings/host",name:"API host settings",component:()=>n.e("chunk-46397160").then(n.bind(null,"f49b"))},{path:"/settings/printer",name:"Printer settings",component:()=>n.e("chunk-4638c0b4").then(n.bind(null,"cb7c"))},{path:"/lab/results/:patient_id",name:"Lab Results",component:()=>n.e("chunk-2759f0ea").then(n.bind(null,"188c"))},{path:"/portal/config",name:"Portal settings",component:()=>n.e("chunk-4620dd96").then(n.bind(null,"027b"))}],z=Object(a["a"])({history:Object(a["b"])("/"),routes:G});z.beforeEach((e,t,n)=>{I["Y"].getTop().then(e=>e?I["Y"].dismiss():null),I["ab"].getTop().then(e=>e?I["ab"].dismiss():null),I["W"].getTop().then(e=>e?I["W"].dismiss():null),I["bb"].getTop().then(e=>e?I["bb"].dismiss():null);const a=["/login","/settings/host"];sessionStorage.getItem("apiKey")||a.includes(e.path)||n("/login"),n()});t["a"]=z},b432:function(e,t,n){"use strict";n.d(t,"c",(function(){return B})),n.d(t,"b",(function(){return L})),n.d(t,"a",(function(){return oe}));n("14d9"),n("d9e2");var a,o=n("d867"),i=n("7a23"),c=n("1f9a");(function(e){e["OfflineDB"]="offline_db"})(a||(a={}));var r=n("cc6f"),s=n("b5e4");function l(e){return e?(e^16*Math.random()>>e/4).toString(16):([1e10]+"1e101000000000").replace(/[01]/g,l)}var d=n("156d"),u=n("23e6"),p=n("0cb1"),m=n("9b7c"),h=n("8158"),b=n("3e53");const g={key:1,style:{width:"45vw",margin:"0px auto","margin-top":"3%"},class:"ion-text-center his-card"},f=Object(i["createElementVNode"])("h1",{class:"his-lg-text"},"Nothing to synchronize",-1);function _(e,t,n,a,o,c){const r=Object(i["resolveComponent"])("ion-title"),s=Object(i["resolveComponent"])("ion-toolbar"),l=Object(i["resolveComponent"])("ion-header"),d=Object(i["resolveComponent"])("ion-progress-bar"),u=Object(i["resolveComponent"])("ion-icon"),p=Object(i["resolveComponent"])("ion-badge"),m=Object(i["resolveComponent"])("ion-label"),h=Object(i["resolveComponent"])("ion-button"),b=Object(i["resolveComponent"])("ion-item"),_=Object(i["resolveComponent"])("ion-list"),v=Object(i["resolveComponent"])("ion-content"),O=Object(i["resolveComponent"])("ion-footer"),y=Object(i["resolveComponent"])("ion-page");return Object(i["openBlock"])(),Object(i["createBlock"])(y,null,{default:Object(i["withCtx"])(()=>[Object(i["createVNode"])(l,null,{default:Object(i["withCtx"])(()=>[Object(i["createVNode"])(s,null,{default:Object(i["withCtx"])(()=>[Object(i["createVNode"])(r,{class:"his-lg-text"},{default:Object(i["withCtx"])(()=>[Object(i["createTextVNode"])("Synchronization Backlog")]),_:1})]),_:1})]),_:1}),Object(i["createVNode"])(v,null,{default:Object(i["withCtx"])(()=>[e.synchronizationStarted?(Object(i["openBlock"])(),Object(i["createBlock"])(d,{key:0,type:"indeterminate"})):Object(i["createCommentVNode"])("",!0),e.offlineData.length?Object(i["createCommentVNode"])("",!0):(Object(i["openBlock"])(),Object(i["createElementBlock"])("div",g,[Object(i["createVNode"])(u,{size:"large",color:"success",icon:e.checkmarkCircle},null,8,["icon"]),f])),Object(i["createVNode"])(_,null,{default:Object(i["withCtx"])(()=>[(Object(i["openBlock"])(!0),Object(i["createElementBlock"])(i["Fragment"],null,Object(i["renderList"])(e.offlineData,(t,n)=>(Object(i["openBlock"])(),Object(i["createBlock"])(b,{class:"his-md-text",key:n},{default:Object(i["withCtx"])(()=>[Object(i["createVNode"])(m,null,{default:Object(i["withCtx"])(()=>[Object(i["createElementVNode"])("strong",null,Object(i["toDisplayString"])(t.label),1),Object(i["createTextVNode"])("-"+Object(i["toDisplayString"])(t.userName)+" ",1),Object(i["createElementVNode"])("div",null,[Object(i["createTextVNode"])("Client: "),Object(i["createElementVNode"])("b",null,Object(i["toDisplayString"])(`${t.personParams.person.given_name} ${t.personParams.person.family_name}`),1)]),Object(i["createElementVNode"])("div",null,[Object(i["createTextVNode"])("Program: "),Object(i["createElementVNode"])("b",null,Object(i["toDisplayString"])(t.programName),1)]),Object(i["createElementVNode"])("div",null,[Object(i["createTextVNode"])("Created encounters: "),Object(i["createElementVNode"])("b",null,Object(i["toDisplayString"])((t.observationParams||[]).length),1)]),Object(i["createElementVNode"])("div",null,[Object(i["createTextVNode"])("Create on: "),Object(i["createElementVNode"])("b",null,Object(i["toDisplayString"])(t.date),1)]),Object(i["createElementVNode"])("div",null,[Object(i["createVNode"])(p,{class:"his-sm-text",color:"warning"},{default:Object(i["withCtx"])(()=>[Object(i["createTextVNode"])(Object(i["toDisplayString"])(t.status)+" : "+Object(i["toDisplayString"])(t.statusMessage),1)]),_:2},1024)])]),_:2},1024),Object(i["createVNode"])(h,{onClick:()=>e.gotoDashboard(t.id),disabled:e.synchronizationStarted,size:"large",color:"success",slot:"end"},{default:Object(i["withCtx"])(()=>[Object(i["createVNode"])(u,{icon:e.document},null,8,["icon"])]),_:2},1032,["onClick","disabled"])]),_:2},1024))),128))]),_:1})]),_:1}),Object(i["createVNode"])(O,null,{default:Object(i["withCtx"])(()=>[Object(i["createVNode"])(s,null,{default:Object(i["withCtx"])(()=>[Object(i["createVNode"])(h,{onClick:e.close,disabled:e.synchronizationStarted,color:"danger",size:"large",slot:"start"},{default:Object(i["withCtx"])(()=>[Object(i["createTextVNode"])(" Close ")]),_:1},8,["onClick","disabled"]),e.offlineData.length?(Object(i["openBlock"])(),Object(i["createBlock"])(h,{key:0,onClick:e.synchronize,disabled:e.synchronizationStarted||!e.offlineData.length,color:"success",size:"large",slot:"end"},{default:Object(i["withCtx"])(()=>[Object(i["createTextVNode"])(" Sync Now ")]),_:1},8,["onClick","disabled"])):Object(i["createCommentVNode"])("",!0),e.offlineData.length?Object(i["createCommentVNode"])("",!0):(Object(i["openBlock"])(),Object(i["createBlock"])(h,{key:1,onClick:e.close,disabled:e.synchronizationStarted,color:"success",size:"large",slot:"end"},{default:Object(i["withCtx"])(()=>[Object(i["createTextVNode"])(" Finish ")]),_:1},8,["onClick","disabled"]))]),_:1})]),_:1})]),_:1})}var v=n("13ea"),O=n.n(v),y=n("ff79"),T=n("afbc"),j=Object(i["defineComponent"])({components:{IonIcon:o["r"],IonProgressBar:o["E"],IonBadge:o["c"],IonLabel:o["x"],IonButton:o["d"],IonToolbar:o["T"],IonList:o["y"],IonItem:o["w"],IonPage:o["D"],IonHeader:o["q"],IonTitle:o["S"],IonContent:o["n"],IonFooter:o["o"]},props:{autoSync:{type:Boolean},onClose:{type:Function}},setup(e){const{offlineData:t,synchronizationStarted:n,synchronize:a}=oe();function o(){B.value&&(L.value=!1),"function"===typeof e.onClose&&e.onClose()}function i(e){o(),T["a"].push("/patient/dashboard/"+e)}async function c(){B.value&&(L.value=!1),await a()}function r(e){Object(s["a"])("Are you sure you want to delete backlog?").then(n=>{n&&(t.value=t.value.filter(t=>t.id!=e),O()(t.value)&&o())})}return e.autoSync&&c(),{close:o,startSync:c,removeSync:r,gotoDashboard:i,document:y["u"],checkmarkCircle:y["m"],trash:y["S"],synchronize:a,offlineData:t,synchronizationStarted:n}}}),k=n("d959"),I=n.n(k);const E=I()(j,[["render",_]]);var C=E,D=n("5a0c"),N=n.n(D);const w={key:1,style:{width:"45vw",margin:"0px auto","margin-top":"3%"},class:"ion-text-center his-card"},S=Object(i["createElementVNode"])("h1",{class:"his-lg-text"},"No offline observations yet",-1);function A(e,t,n,a,o,c){const r=Object(i["resolveComponent"])("ion-title"),s=Object(i["resolveComponent"])("ion-toolbar"),l=Object(i["resolveComponent"])("ion-header"),d=Object(i["resolveComponent"])("ion-progress-bar"),u=Object(i["resolveComponent"])("ion-icon"),p=Object(i["resolveComponent"])("ion-label"),m=Object(i["resolveComponent"])("ion-badge"),h=Object(i["resolveComponent"])("ion-button"),b=Object(i["resolveComponent"])("ion-item"),g=Object(i["resolveComponent"])("ion-list"),f=Object(i["resolveComponent"])("ion-content"),_=Object(i["resolveComponent"])("ion-footer"),v=Object(i["resolveComponent"])("ion-page");return Object(i["openBlock"])(),Object(i["createBlock"])(v,null,{default:Object(i["withCtx"])(()=>[Object(i["createVNode"])(l,null,{default:Object(i["withCtx"])(()=>[Object(i["createVNode"])(s,null,{default:Object(i["withCtx"])(()=>[Object(i["createVNode"])(r,{class:"his-lg-text"},{default:Object(i["withCtx"])(()=>[Object(i["createTextVNode"])(" Offline observations ")]),_:1})]),_:1})]),_:1}),Object(i["createVNode"])(f,null,{default:Object(i["withCtx"])(()=>[e.synchronizationStarted?(Object(i["openBlock"])(),Object(i["createBlock"])(d,{key:0,type:"indeterminate"})):Object(i["createCommentVNode"])("",!0),e.listData.length?Object(i["createCommentVNode"])("",!0):(Object(i["openBlock"])(),Object(i["createElementBlock"])("div",w,[Object(i["createVNode"])(u,{size:"large",color:"success",icon:e.checkmarkCircle},null,8,["icon"]),S])),Object(i["createVNode"])(g,null,{default:Object(i["withCtx"])(()=>[(Object(i["openBlock"])(!0),Object(i["createElementBlock"])(i["Fragment"],null,Object(i["renderList"])(e.listData,(t,n)=>(Object(i["openBlock"])(),Object(i["createBlock"])(b,{class:"his-md-text",key:n},{default:Object(i["withCtx"])(()=>[Object(i["createVNode"])(p,null,{default:Object(i["withCtx"])(()=>[Object(i["createElementVNode"])("strong",null,Object(i["toDisplayString"])((""+t.encounterName).toUpperCase()),1),Object(i["createElementVNode"])("div",null,"Created by: "+Object(i["toDisplayString"])(t.createdBy),1)]),_:2},1024),Object(i["createVNode"])(m,{class:"his-md-text",color:"light"},{default:Object(i["withCtx"])(()=>[Object(i["createTextVNode"])(Object(i["toDisplayString"])(t.date),1)]),_:2},1024),Object(i["createVNode"])(h,{onClick:()=>e.removeEncounter(t.id),disabled:e.synchronizationStarted,size:"large",color:"danger",slot:"end"},{default:Object(i["withCtx"])(()=>[Object(i["createVNode"])(u,{icon:e.trash},null,8,["icon"])]),_:2},1032,["onClick","disabled"])]),_:2},1024))),128))]),_:1})]),_:1}),Object(i["createVNode"])(_,null,{default:Object(i["withCtx"])(()=>[Object(i["createVNode"])(s,null,{default:Object(i["withCtx"])(()=>[Object(i["createVNode"])(h,{disabled:e.synchronizationStarted,onClick:e.close,color:"success",size:"large",slot:"end"},{default:Object(i["withCtx"])(()=>[Object(i["createTextVNode"])(" Finish ")]),_:1},8,["disabled","onClick"])]),_:1})]),_:1})]),_:1})}var P=Object(i["defineComponent"])({components:{IonIcon:o["r"],IonProgressBar:o["E"],IonBadge:o["c"],IonLabel:o["x"],IonButton:o["d"],IonToolbar:o["T"],IonList:o["y"],IonItem:o["w"],IonPage:o["D"],IonHeader:o["q"],IonTitle:o["S"],IonContent:o["n"],IonFooter:o["o"]},props:{id:{type:String,required:!0},programID:{type:Number,required:!0},onClose:{type:Function},onDelete:{type:Function},onSync:{type:Function}},setup(e){const{offlineData:t,getOfflinePerson:n,isOnline:a,synchronizeRecord:o}=oe(),c=Object(i["ref"])(!1),r=Object(i["computed"])(()=>{if(!e.id)return[];const t=n(e.id);return t&&t.programID==e.programID&&t.observationParams?t.observationParams.map(e=>({...e,createdBy:t.createdBy})):[]});function l(){"function"===typeof e.onClose&&e.onClose()}function d(n){Object(s["a"])("Are you sure you want to delete observation?").then(a=>{a&&(t.value=t.value.map(t=>(t.id===e.id&&t.observationParams&&(t.observationParams=t.observationParams.filter(e=>e.id!=n)),t)),"function"===typeof e.onDelete&&e.onDelete())})}return Object(i["watch"])(a,async n=>{if(n){c.value=!0;try{const n=await o(e.id);"Success"===n.status&&(t.value=t.value.filter(t=>t.id!=e.id),"function"===typeof e.onSync&&e.onSync(n))}catch(a){console.error(""+a)}c.value=!1}},{immediate:!0}),{close:l,removeEncounter:d,listData:r,checkmarkCircle:y["m"],trash:y["S"],synchronizationStarted:c}}});const F=I()(P,[["render",A]]);var x=F,V=n("0ba8"),R=n("0011");const B=Object(i["ref"])(!0),L=Object(i["ref"])(""+sessionStorage.getItem("offline_mode")==="true"),H=Object(i["ref"])(!1),M=Object(i["ref"])(!1),U=Object(i["ref"])(!1),$=Object(i["ref"])([]);function G(e){var t;const n=$.value.find(t=>t.id===e||t.personID===parseInt(""+e));var a,o;if(n&&!O()(null===n||void 0===n||null===(t=n.personParams)||void 0===t?void 0:t.person))return{...null===(a=n.personParams)||void 0===a?void 0:a.person,npid:null===(o=n.personParams)||void 0===o?void 0:o.npid,programID:n.programID,createdBy:n.userName,observationParams:n.observationParams}}function z(e){const t=b["a"].getActiveApp();if(t){const n={id:l(),label:"Offline",programID:t.programID,programName:t.applicationName,status:"Pending",type:"new",date:N()().format("DD/MM/YYYY hh:mm:ss"),userID:c["a"].getUserID()||-1,userName:c["a"].getUserName()};return $.value.push({...n,...e}),n.id}return""}function Y(e){const t=e.getID(),n=$.value.find(e=>e.id===t||e.personID===t);return n||z({id:t,label:"Returning client",type:"temp",personID:t,personParams:{npid:e.getNationalID(),person:{age:e.getAge(),birthdate:e.getBirthdate(),gender:e.getGender(),given_name:e.getGivenName(),family_name:e.getFamilyName(),phone:e.getPhoneNumber(),current_village:e.getCurrentVillage()}}})}function J(e,t,n,a){return z({label:e,personParams:{npid:a,person:t,attributes:n}})}function W(e){if(!e.id)return"";const t={...e,id:l(),date:N()().format("DD/MM/YYYY hh:mm:ss")};return $.value.forEach(n=>{[""+e.id,""+e.patientID].includes(""+n.id)&&(Array.isArray(n.observationParams)?n.observationParams.push(t):n.observationParams=[t])}),e.id}async function q(e=!1){M.value||(M.value=!0,(await o["ab"].create({component:C,backdropDismiss:!1,cssClass:"large-modal",componentProps:{autoSync:e,onClose:()=>{M.value=!1,o["ab"].getTop().then(e=>e&&o["ab"].dismiss())}}})).present())}async function K(e,t={}){H.value||(H.value=!0,(await o["ab"].create({component:x,backdropDismiss:!1,cssClass:"large-modal",componentProps:{id:e,programID:c["a"].getProgramID(),onDelete:()=>{"function"===typeof t.onDeleteEncounter&&t.onDeleteEncounter()},onSync:e=>{"function"===typeof t.onSyncObservations&&t.onSyncObservations(e)},onClose:()=>{H.value=!1,o["ab"].getTop().then(e=>e&&o["ab"].dismiss())}}})).present())}async function X(e,t){const n=new c["a"];return await n.registerBasicPatient(e),t.length&&await n.createPersonAttributes(t),n.getPersonID()}async function Q(e,t,n){const a=new p["a"](e,t),o=await a.createEncounter();if(!o)throw new Error("Unable to create order");const i=n.map(e=>({...e,concept_id:"string"===typeof e.conceptName?h["a"].getCachedConceptID(e.conceptName):e.conceptName,specimenConcept:"string"===typeof e.specimenConceptName?h["a"].getCachedConceptID(e.specimenConceptName):e.specimenConceptName}));return await m["a"].saveOrdersArray(null===o||void 0===o?void 0:o.encounter_id,m["a"].buildLabOrders(o,i)),!0}async function Z(e,t,n,a,o){const i=new r["a"](t,n);return i.programID=e,i.encounterTypeID=a,await i.createEncounter(),i.saveObservationList(o)}async function ee(){$.value=$.value.map(e=>(e.observationParams&&(e.observationParams=e.observationParams.filter(e=>!/success|Exception|cancel/i.test(""+e.uploadStatus))),e)).filter(e=>"temp"!==e.type||!O()(e.observationParams))}async function te(e){var t;const n=$.value.find(t=>""+t.id===""+e);if(!n)return;let a=(null===n||void 0===n?void 0:n.personID)||null;if(n.status="Synchronizing",n.statusMessage="Starting",null!==n&&void 0!==n&&null!==(t=n.personParams)&&void 0!==t&&t.npid){n.statusMessage="Searching npid "+n.personParams.npid;try{const e=await u["a"].findByNpid(n.personParams.npid);Array.isArray(e)&&e.length<=1&&(a=e[0].patient_id)}catch(i){n.statusMessage="NPID not found",console.error(""+i)}}if(!a&&n.personParams&&"temp"!=n.type){n.statusMessage="Registering patient record";try{var o;a=await X(n.personParams.person,(null===(o=n.personParams)||void 0===o?void 0:o.attributes)||[])}catch(i){return n.status="Error",n.statusMessage="Registration failed",console.error(""+i),n}}if(Array.isArray(n.observationParams)&&n.observationParams.length){n.statusMessage="Creating observations";const e=n.observationParams.map(async e=>{if("Success"===e.uploadStatus)return e;try{const t=await Z(n.programID,a||-1,n.userID,e.encounterTypeID,e.observations);Array.isArray(e.labOrders)&&(n.statusMessage="Creating lab orders",await Q(a||-1,n.userID,e.labOrders)),t&&(e.uploadStatus="Success")}catch(i){/NetworkError|Failed to fetch/i.test(""+i)?e.uploadStatus="NetworkError":e.uploadStatus="Exception",n.status="Error",n.statusMessage="Observation error: "+i,console.error(""+i)}return e});await Promise.all(e)}return n.personID=a||(null===n||void 0===n?void 0:n.personID),n.status="Success",n.statusMessage="-",n}async function ne(){if(!U.value&&$.value.length){Object(s["d"])("Synchronization started");for(let e of $.value)U.value=!0,"Success"!==e.status&&(e=await te(e.id)||e);return $.value=$.value.filter(e=>"Error"===e.status),setTimeout(()=>U.value=!1,500),Object(s["d"])("Synchronization Complete"),$.value}}function ae(e){const t=b["a"].getActiveApp(),n=G(e);if(!n)return;const a=((null===t||void 0===t?void 0:t.primaryPatientActivites)||[]).filter(e=>"number"===typeof e.offlineWorkflowIndex).sort((e,t)=>e.offlineWorkflowIndex-t.offlineWorkflowIndex).filter(e=>{const t=(n.observationParams||[]).find(t=>{if(t.encounterName===e.id){const e=(""+t.date).split("/"),n=Object(R["a"])(parseInt(e[0],10)),a=Object(R["a"])(parseInt(e[1],10)),o=parseInt(e[2],10);return`${o}-${a}-${n}`===u["a"].getSessionDate()}return!1});return!t&&("function"!==typeof e.offlineWorkflowCondition||e.offlineWorkflowCondition({...n,observationParams:n.observationParams||[]}))});return a.length?a[0]:null}function oe(){return{isOnline:B,isOfflineMode:L,offlineData:$,synchronize:ne,saveObsOffline:W,cachePatient:Y,getOfflinePerson:G,savePersonOffline:J,cleanUpOfflineData:ee,synchronizeRecord:te,synchronizationStarted:U,launchObservationDialog:K,launchSynchronizationDialog:q,nextPatientWorkflowActivity:ae}}V["b"].on(d["a"].ON_API_CRASH,()=>B.value=!1),V["b"].on(d["a"].AFTER_API_REQUEST,()=>B.value=!0),$.value&&$.value.length||($.value=JSON.parse(localStorage.getItem(a.OfflineDB)||"[]")),Object(i["watch"])($,e=>{localStorage.setItem(a.OfflineDB,JSON.stringify(e))},{deep:!0}),Object(i["watch"])(L,e=>sessionStorage.setItem("offline_mode",""+e))},b446:function(e,t,n){"use strict";n.d(t,"a",(function(){return a})),n.d(t,"b",(function(){return j}));n("14d9"),n("13d5");var a,o=n("d95e"),i=[{label:"Jan",value:1},{label:"Feb",value:2},{label:"Mar",value:3},{label:"Apr",value:4},{label:"May",value:5},{label:"Jun",value:6},{label:"Jul",value:7},{label:"Aug",value:8},{label:"Sep",value:9},{label:"Oct",value:10},{label:"Nov",value:11},{label:"Dec",value:12}],c=n("9283"),r=n("2706"),s=n("3800"),l=n("6be2"),d=n("5a0c"),u=n.n(d),p=n("1c74"),m=n("2ef0");function h(e,t,n=!0){const a=[];return n&&a.push("UNKNOWN"),{id:e,helpText:t+" Year",appearInSummary:()=>!1,type:o["b"].TT_TEXT,config:{customKeyboard:[s["i"],[a,["DELETE"]]]}}}function b(e,t){return{id:e,helpText:t+" Month",appearInSummary:()=>!1,type:o["b"].TT_SELECT,options:()=>i}}function g(e,t){return{id:e,helpText:t+" Day",type:o["b"].TT_MONTHLY_DAYS,appearInSummary:()=>!1}}function f(e,t){return{id:e,helpText:t+" Estimated period",type:o["b"].TT_SELECT,appearInSummary:()=>!1,options:()=>[{label:"6 months ago",value:180},{label:"12 months ago",value:365},{label:"18 months ago",value:540},{label:"24 months ago",value:730},{label:"Over 2 years ago",value:730}]}}function _(e,t){return{id:e,helpText:t+" Age Estimate",type:o["b"].TT_NUMBER,appearInSummary:()=>!1,config:{keypad:l["e"]}}}function v(e){return parseInt(e)<10?"0"+e:e}async function O(e,t,n){if(t.defaultValue){const a=await t.defaultValue(e);if(a){const[e,t,o]=a.split("-");switch(n){case"Year":return e||"";case"Month":return parseInt(t)||"";case"Day":return parseInt(o)||""}}}return""}function y(e){return c["b"].toStandardHisDisplayFormat(e)}function T(e,t,n,a){if(t.minDate){const o=t.minDate(n,a);if(new Date(e)<new Date(o))return[`${y(e)} is less than minimum date of ${y(o)}`]}if(t.maxDate){const o=t.maxDate(n,a);if(o&&new Date(e)>new Date(o))return[`${y(e)} is greater than max date of  ${y(o)}`]}}function j(e,t=""){let n="",s="",l="",d="",j=!1;const k="year_"+e.id,I="month_"+e.id,E="day_"+e.id,C="age_estimate_"+e.id,D="duration_estimate_"+e.id,N=h(k,e.helpText,e.estimation.allowUnknown),w=b(I,e.helpText),S=g(E,e.helpText),A=_(C,e.helpText),P=f(D,e.helpText),F="boolean"===typeof e.estimation.allowUnknownMonthDay&&e.estimation.allowUnknownMonthDay,x=t=>!(t[k]&&t[k].value&&["Unknown"].includes(t[k].value))&&(!e.condition||e.condition(t)),V=(e,t)=>{const n=[{type:"year",value:s,default:"YYYY"},{type:"month",value:l,default:"MM"},{type:"day",value:d,default:"DD"}];return n.reduce((n,a)=>{const o=[null,void 0,"Unknown",""];return t===a.type?o.includes(e)?n.push(a.default):n.push(e):o.includes(a.value)?n.push(a.default):n.push(a.value),n},[]).join("-")};"function"===typeof e.init&&(N.init=e.init),N.updateHelpTextOnValue=e=>`${N.helpText} (${V(null===e||void 0===e?void 0:e.label,"year")})`,N.proxyID=e.id,N.unload=e=>s=e.value.toString(),N.config={...N.config,...e.config},N.defaultValue=t=>O(t,e,"Year"),N.condition=t=>!e.condition||e.condition(t),N.validation=(t,n,a)=>{if(e.required&&r["a"].required(t))return["Year cannot be empty"];const o=t?t.value:"";if(!e.estimation.allowUnknown&&o.toString().match(/unknown/i))return["Value unknown is not permitted"];if(o&&!["Unknown"].includes(o)&&isNaN(o)||o<1900)return["Invalid Year"];if(o&&"function"===typeof e.minDate){const t=c["b"].getYear(e.minDate(n,a));if(parseInt(o)<t)return[`Year of ${o} is less than Minimum year of ${t}`]}if(o&&"function"===typeof e.maxDate){const t=e.maxDate(n,a);if(t&&o>c["b"].getYear(t))return[`Year of ${o} exceeds Maximum year of ${c["b"].getYear(t)}`]}return null},N.summaryMapValue=()=>({label:e.summaryLabel||e.helpText,value:n?y(n):"Unknown"}),N.appearInSummary=(t,n)=>n===e.id,N.computedValue=t=>{if(n){const[a,o,i]=n.split("-");return n=`${t.value}-${o}-${i}`,e.computeValue(n,!1)}if(t&&"Unknown"===t.value)return n="",e.computeValue("Unknown",!1)},w.updateHelpTextOnValue=e=>`${w.helpText} (${V(null===e||void 0===e?void 0:e.label,"month")})`,w.proxyID=e.id,w.unload=e=>l=v(e.value.toString()),w.condition=e=>x(e),w.validation=e=>r["a"].required(e),w.defaultValue=t=>O(t,e,"Month"),F&&(w.options=()=>[...i,{label:"Unknown",value:"Unknown"}]),w.computedValue=(t,a)=>{if((""+t.value).match(/unknown/i))return n=a[k].value+"-07-15",e.computeValue(n,!0);if(n){const[a,o,i]=n.split("-"),c=v(""+t.value);return n=`${a}-${c}-${i}`,e.computeValue(n,!1)}},S.proxyID=e.id,S.updateHelpTextOnValue=e=>`${S.helpText} (${V(null===e||void 0===e?void 0:e.label,"day")})`,S.condition=e=>!(""+e[I].value).match(/unknown/i)&&x(e),S.validation=(t,a,o)=>r["a"].required(t)?["Day is required for date"]:T(n,e,a,o),S.defaultValue=t=>O(t,e,"Day"),S.computedValue=t=>(j=!!(""+t.value).match(/unknown/i),d=j?"15":v(""+t.value),n=`${s}-${l}-${d}`,e.computeValue(n,j)),S.unload=(t,n,a,o)=>{e.unload&&e.unload(t,n,a,o)},S.beforeNext=(t,a)=>!e.beforeNext||e.beforeNext(n,a),S.config={year:e=>e[k].value,month:e=>e[I].value},F||(S.config.keyboardActions=[]);const R=(t,n)=>{const a=["Unknown"===t[k].value,!e.condition||e.condition(t),e.estimation.estimationFieldType===n];return a.every(Boolean)};return A.proxyID=e.id,A.validation=(t,a,o)=>{if(t&&t.value>300)return["Age estimate is too high and exceeding hard limit of 300"];if(isNaN(parseInt(t.value.toString())))return["Please enter a valid number"];const i=/^(12[0-7]|1[01][0-9]|[1-9]?[0-9])$/;return t.value.toString().match(i)?T(n,e,a,o):["Not a valid age estimate"]},A.condition=e=>R(e,a.AGE_ESTIMATE_FIELD),A.computedValue=t=>{const a=u()(p["e"].getSessionDate()).subtract(t.value,"years").year();return n=a+"-07-15",e.computeValue(n,!0)},A.beforeNext=(t,a)=>!e.beforeNext||e.beforeNext(n,a),P.proxyID=e.id,P.validation=(t,a,o)=>r["a"].required(t)?["Please select an estimate"]:T(n,e,a,o),P.condition=e=>R(e,a.MONTH_ESTIMATE_FIELD),P.computedValue=t=>(n=u()(p["e"].getSessionDate()).subtract(t.value,"day").format(c["a"]),e.computeValue(n,!0)),P.beforeNext=(t,a)=>!e.beforeNext||e.beforeNext(n,a),[N,w,S,A,P,{id:e.id+"_summary_field",helpText:e.helpText,type:o["b"].TT_HIDDEN,appearInSummary:t=>"function"!==typeof e.appearInSummary||e.appearInSummary(t),condition:t=>!Object(m["isEmpty"])(t[e.id]),defaultValue:()=>({label:c["b"].toStandardHisDisplayFormat(n),value:n})}]}(function(e){e["AGE_ESTIMATE_FIELD"]="age-estimate-field",e["MONTH_ESTIMATE_FIELD"]="month-period-estimate-field"})(a||(a={}))},b5e4:function(e,t,n){"use strict";n.d(t,"e",(function(){return h})),n.d(t,"d",(function(){return b})),n.d(t,"c",(function(){return g})),n.d(t,"a",(function(){return _})),n.d(t,"b",(function(){return v}));var a=n("d867"),o=n("7a23");const i={class:"vertically-align ion-padding-horizontal"};function c(e,t,n,a,c,r){const s=Object(o["resolveComponent"])("action-header"),l=Object(o["resolveComponent"])("ion-content"),d=Object(o["resolveComponent"])("action-footer");return Object(o["openBlock"])(),Object(o["createElementBlock"])(o["Fragment"],null,[Object(o["withDirectives"])(Object(o["createVNode"])(s,{title:e.title,subtitle:e.subtitle,color:e.color},null,8,["title","subtitle","color"]),[[o["vShow"],e.title||e.subtitle]]),Object(o["createVNode"])(l,{style:{"text-align":"center"}},{default:Object(o["withCtx"])(()=>[Object(o["createElementVNode"])("h2",i,Object(o["toDisplayString"])(e.body),1)]),_:1}),Object(o["createVNode"])(d,{buttons:e.actionButtons},null,8,["buttons"])],64)}var r=n("8efc"),s=Object(o["defineComponent"])({mixins:[r["a"]],props:{body:{type:String,require:!0}}}),l=n("d959"),d=n.n(l);const u=d()(s,[["render",c]]);var p=u;async function m(e,t="primary",n=2e3){const o=await a["bb"].create({message:e,position:"top",animated:!0,duration:n,color:t,cssClass:"his-md-text",keyboardClose:!0,buttons:[{side:"end",icon:"close",role:"cancel"}]});return o.present()}function h(e,t=2e3){return m(e,"warning",t)}function b(e,t=1e3){return m(e,"success",t)}function g(e,t=2e3){return m(e,"danger",t)}function f(e,t="",n=[]){return a["ab"].create({component:p,backdropDismiss:!1,cssClass:"small-modal custom-modal-backdrop",componentProps:{subtitle:t,body:e,actionButtons:n}})}async function _(e,t={}){const n=await f(e,t.header||"Confirmation",[{name:t.cancelBtnLabel||"No",size:"large",slot:"start",color:"danger",visible:!0,role:"Cancel",onClick:({role:e})=>a["ab"].dismiss(e)},{name:t.confirmBtnLabel||"Yes",size:"large",slot:"end",color:"success",visible:!0,role:"Confirm",onClick:({role:e})=>a["ab"].dismiss(e)}]);n.present();const{data:o}=await n.onDidDismiss();return"Confirm"===o}async function v(e,t="Information"){const n=await f(e,t,[{name:"OK",size:"large",slot:"end",color:"success",visible:!0,role:"Confirm",onClick:()=>a["ab"].dismiss()}]);n.present()}},b744:function(e,t,n){"use strict";n("b7a3")},b7a3:function(e,t,n){},b89f:function(e,t,n){"use strict";n.d(t,"a",(function(){return b}));n("d9e2"),n("14d9");var a=n("1c74"),o=n("b5e4"),i=n("0ba8"),c=n("0a15"),r=n("7f35"),s=n("5a0c"),l=n.n(s),d=n("2ef0"),u=n("1547");const p=Object(u["c"])("LabelPrinter",{web:()=>n.e("chunk-2d21db89").then(n.bind(null,"d304")).then(e=>new e.LabelPrinterWeb)});var m=n("323e"),h=n.n(m);class b extends a["e"]{constructor(){super()}async _print(e){var t;const n=await a["e"].getText(e);if(!n)throw"Unable to print Label. Try again later";let o=await this.getDefaultPrinter();if(Object(d["isEmpty"])(o)&&(o=await this.selectDefaultPrinter()),Object(d["isEmpty"])(o))throw new Error("No printer device found");return"USB"===(null===(t=o)||void 0===t?void 0:t.port)?p.write({deviceID:o.deviceID,rawString:n,url:e}):this.printToBluetoothDevice(o,n)}async batchPrintLbls(e,t=!0){t&&i["b"].emit(i["a"].SHOW_MODAL,"zebra-modal");const n=[];for(const o of e)try{await this._print(o)}catch(a){n.push(a)}t&&await b.delay(2e3),n.length>0&&await Object(o["e"])(n.filter((e,t,n)=>n.indexOf(e)===t).join(),3e3)}async printLbl(e,t=!0){try{t&&i["b"].emit(i["a"].SHOW_MODAL,"zebra-modal"),await this._print(e),t&&await b.delay(2e3)}catch(n){Object(o["e"])(n)}}async printLocation(e){await this.printLbl("labels/location?location_id="+e)}async printDrug(e,t){await this.printLbl(`drugs/${e}/barcode?quantity=${t}`)}async getDefaultPrinter(){const e=localStorage.getItem("defaultPrinter");try{return e&&JSON.parse(e)}catch(t){Object(o["e"])(""+t)}}async getUsbPrinters(){try{const{devices:e}=await p.discover();return e.map(e=>({deviceID:e,name:e,port:"USB"}))}catch(e){console.log(e)}return[]}async getBluetoothPrinters(){try{const e=await c["a"].list();return e.map(e=>({deviceID:e.name,name:`${e.name} (${e.address})`,port:"BLUETOOTH",address:e.address}))}catch(e){console.log(e)}return[]}async getAllPrinters(){h.a.start();const e=await this.getUsbPrinters(),t=await this.getBluetoothPrinters();return h.a.done(),[...e,...t]}async selectDefaultPrinter(){let e=void 0;const t=await this.getAllPrinters();if(0!==t.length){if(t.every(e=>"webPrinter"===e.deviceID)&&(e=t[0]),Object(d["isEmpty"])(e)){const n=await Object(r["c"])("Select Printer","Please, select default printer",t.map(e=>e.name||e.deviceID),[{name:"Cancel",slot:"start",color:"danger"},{name:"Continue",slot:"end",role:"action"}]);if("Cancel"===n.action)return;e=t.find(e=>e.name===n.selection||e.deviceID===n.selection)}return e&&this.setDefaultPrinter(e),e}Object(o["e"])("No printers found. Please connect a printer or make sure a bluetooth printer is paired")}setDefaultPrinter(e){Object(d["isEmpty"])(e)||localStorage.setItem("defaultPrinter",JSON.stringify(e))}async printTestLbl(e){const t=`\nN\nq801\nQ329,026\nZT\nB50,180,0,1,5,15,120,N,"Barcode"\nA35,30,0,2,2,2,N,""\nA35,76,0,2,2,2,N,"Test Label Printing"\nA35,122,0,2,2,2,N,"Date: ${l()().format("DD/MMM/YYYY")}"\nP1\n`;try{return i["b"].emit(i["a"].SHOW_MODAL,"zebra-modal"),"USB"===(null===e||void 0===e?void 0:e.port)?p.write({deviceID:e.deviceID,rawString:t}):this.printToBluetoothDevice(e,t)}catch(n){Object(o["e"])(""+n)}}printToBluetoothDevice(e,t){c["a"].connect((null===e||void 0===e?void 0:e.address)||"").subscribe(async()=>{c["a"].write(t).catch(e=>Object(o["e"])(e)).finally(()=>c["a"].disconnect())},e=>Object(o["e"])(e))}}},ba82:function(e,t,n){"use strict";n.d(t,"a",(function(){return h})),n.d(t,"c",(function(){return f})),n.d(t,"b",(function(){return _})),n.d(t,"d",(function(){return v}));n("13d5"),n("5b81");var a=n("8baf"),o=n("0da4"),i=n.n(o),c=n("17b6"),r=n("2ed9"),s=n("b5e4"),l=n("0244"),d=n("8eaf"),u=n("5a0c"),p=n.n(u),m=n("1c74");function h(e,t){return[...e,[""],["Date Created: "+p()().format("DD/MMM/YYYY HH:MM:ss")],[`Quarter: ${t.startDate||""} - ${t.endDate||""}`],["HIS-Core Version: "+m["e"].getCoreVersion()],["API Version: "+m["e"].getApiVersion()],["Site: "+m["e"].getLocationName()],["Site UUID: "+m["e"].getSiteUUID()]]}function b(e){return e.reduce((e,t)=>e+t.map(e=>`"${e}"`).join(",")+"\n","")}function g(e,t,n){let a=null;const o="HIS-Core/"+e.replaceAll("/","_");Object(s["d"])(`Exporting file to "Documents/${o}"...`),a="blob"===n?Object(l["a"])({path:o,blob:t,directory:c["a"].Documents,recursive:!0}):c["c"].writeFile({path:o,data:t,directory:c["a"].Documents,encoding:c["b"].UTF8,recursive:!0}),null!=a&&a.then(()=>Object(s["d"])(`File exported to "Documents/${o}"!`,3e3)).catch(e=>Object(s["c"])(e))}function f(e,t=3500){const{activePlatformProfile:n}=Object(r["e"])();if(n.value.fileExport===r["a"].FILE_SYSTEM)d["a"].fromData(e,{documentSize:"a4",type:"share"}).catch(e=>Object(s["c"])(e));else if(n.value.fileExport===r["a"].WEB){const n=open("","","width:1024px, height:768px");n&&(null===n||void 0===n||n.document.write(e),setTimeout(()=>{n.print(),n.close()},t))}else Object(s["e"])("Platform not supported")}function _(e,t,n="document"){const a=b(e.concat(t)),{activePlatformProfile:o}=Object(r["e"])(),i=n+".csv";if(o.value.fileExport===r["a"].WEB){const e=new Blob([a],{type:"text/csv;charset=utf-8;"}),t=document.createElement("a");t.setAttribute("id","csv"),t.href=window.URL.createObjectURL(e),t.setAttribute("download",n+".csv"),document.body.appendChild(t),t.click(),t.remove()}else o.value.fileExport===r["a"].FILE_SYSTEM?g(i,a,"text"):Object(s["e"])("Platform not supported")}function v(e,t,n="document",o=!1){const c=new a["default"],l=c.splitTextToSize(n,180),d=l.length<=1?20:10*l.length;c.text(l,14,10);const u={startY:d,head:[e[e.length-1]],body:t};o&&(u.tableWidth="wrap",u.horizontalPageBreak=!0,u.horizontalPageBreakRepeat=0),i()(c,u);const{activePlatformProfile:p}=Object(r["e"])(),m=n+".pdf";p.value.fileExport===r["a"].WEB?c.save(m):p.value.fileExport===r["a"].FILE_SYSTEM?g(m,c.output(),"blob"):Object(s["c"])("Platform not supported")}},be3c:function(e,t,n){"use strict";n("3e8d")},bef6:function(e,t,n){"use strict";function a(e){let t="";for(const[n,a]of Object.entries(e))t+=`${n}=${a}&`;return t}t["a"]={parameterizeObjToString:a}},c1e4:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var a=n("1c74"),o=n("2ef0");class i extends a["e"]{constructor(){super()}static getUserProperty(e,t=a["e"].getUserID()){return a["e"].getJson("user_properties",{property:e,user_id:t})}static userPropertyExists(e,t){return a["e"].getJson("validate_properties",{property_value:t,property:e})}static setUserProperty(e,t,n=a["e"].getUserID()){return a["e"].postJson("user_properties",{user_id:n,property:e,property_value:t})}static getCurrentUser(){const e=a["e"].getUserID();if(e)return this.getUserByID(e)}static getUserByID(e){return this.getJson("users/"+e)}static createUser(e){return this.postJson("users",e)}static updateUser(e,t){return this.putJson("users/"+e,t)}static activateUser(e){return this.postJson(`users/${e}/activate`,{})}static deactivateUser(e){return this.postJson(`users/${e}/deactivate`,{})}static isAdmin(){const e=super.getUserRoles().filter(e=>e.role.match(/Program Manager|Superuser|System Developer/i));return e.length>0}static isProvider(){return!!Object(o["find"])(super.getUserRoles(),{role:"Provider"})}static isNurse(){const e=super.getUserRoles().filter(e=>e.role.match(/Nurse/i));return e.length>0}static isDoctor(){const e=super.getUserRoles().filter(e=>e.role.match(/Doctor/i));return e.length>0}static isClinician(){const e=super.getUserRoles().filter(e=>e.role.match(/Clinician/i));return e.length>0}static getAllUsers(){return this.getJson("users",{page_size:100})}static getAllRoles(){return this.getJson("roles",{page_size:100})}static getUsers(){return super.getJson("users",{role:"Provider"})}static getSystemUsageByUsers(e,t){return super.getJson("user_system_usage",{start_date:e,end_date:t,program_id:super.getProgramID(),date:super.getSessionDate()})}}},c731:function(e,t,n){"use strict";n.d(t,"d",(function(){return s})),n.d(t,"c",(function(){return l})),n.d(t,"a",(function(){return d})),n.d(t,"b",(function(){return u}));var a=n("d867"),o=n("e6e9"),i=n("9441"),c=n("1b47"),r=n("10be");async function s(e,t,n={}){const o=await a["ab"].create({component:c["a"],backdropDismiss:!1,cssClass:((null===n||void 0===n?void 0:n.size)||"list-modal")+" custom-modal-backdrop",componentProps:{list:e,preset:(null===n||void 0===n?void 0:n.preset)||"",actionButtons:[{name:"Cancel",slot:"start"}],closeOnSelect:!0,title:(null===n||void 0===n?void 0:n.title)||"Select"}});await o.present();const{data:i}=await o.onDidDismiss();t(i.selection)}async function l(e,t={}){const n="boolean"!==typeof(null===t||void 0===t?void 0:t.strictNumbers)||(null===t||void 0===t?void 0:t.strictNumbers),o=await a["ab"].create({component:r["a"],backdropDismiss:!1,cssClass:"keypad-modal custom-modal-backdrop",componentProps:{title:(null===t||void 0===t?void 0:t.title)||"",preset:(null===t||void 0===t?void 0:t.preset)||"",toggleButton:null===t||void 0===t?void 0:t.toggleButton,strictNumbers:n,customKeyboard:null===t||void 0===t?void 0:t.customKeyboard,noFloat:"boolean"===typeof(null===t||void 0===t?void 0:t.noFloat)&&t.noFloat,onKeyPress(t,a){e(n?parseInt(t):t,a)}}});o.present()}async function d(e,t={}){const n=await a["ab"].create({component:i["a"],backdropDismiss:!1,cssClass:"full-modal",componentProps:{fields:e,formLabel:t.formLabel,disableAutoModalDismiss:!0,cancelAction:()=>{a["ab"].dismiss(),"function"===typeof t.onCancel&&t.onCancel()},onFinish:t.onFinish,skipSummary:"boolean"===typeof t.skipSummary&&t.skipSummary}});return n.present(),n}async function u(e,t){const n=await a["ab"].create({component:o["a"],backdropDismiss:!1,cssClass:"full-modal",componentProps:{dismissType:"modal",currentField:e,onFinish:t}});return n.present(),n}},c924:function(e,t,n){"use strict";var a=n("7a23");function o(e,t,n,o,i,c){const r=Object(a["resolveComponent"])("ion-button");return Object(a["openBlock"])(),Object(a["createElementBlock"])("table",null,[(Object(a["openBlock"])(!0),Object(a["createElementBlock"])(a["Fragment"],null,Object(a["renderList"])(e.layout,(t,n)=>(Object(a["openBlock"])(),Object(a["createElementBlock"])("tr",{key:n},[(Object(a["openBlock"])(!0),Object(a["createElementBlock"])(a["Fragment"],null,Object(a["renderList"])(t,(t,n)=>(Object(a["openBlock"])(),Object(a["createElementBlock"])("td",{class:"his-keyboard-margin",key:"btn-"+n},[t?(Object(a["openBlock"])(),Object(a["createBlock"])(r,{key:0,style:Object(a["normalizeStyle"])({width:e.btnSize}),class:"his-keyboard-btn",onClick:()=>e.keyPress(t)},{default:Object(a["withCtx"])(()=>[Object(a["createTextVNode"])(Object(a["toDisplayString"])(t),1)]),_:2},1032,["style","onClick"])):Object(a["createCommentVNode"])("",!0)]))),128))]))),128))])}var i=n("d867"),c=Object(a["defineComponent"])({components:{IonButton:i["d"]},props:{btnSize:{type:String,default:"90%"},layout:{type:Array,required:!0,default:()=>[]},onKeyPress:{type:Function,required:!0}},methods:{keyPress(e){this.onKeyPress(e)}}}),r=n("d959"),s=n.n(r);const l=s()(c,[["render",o]]);t["a"]=l},cae9:function(e,t,n){},cc6f:function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var a=n("ade3"),o=n("7957"),i=n("ec2a"),c=n("8158");class r extends o["a"]{constructor(e,t,n=-1){super(),Object(a["a"])(this,"encounterTypeID",void 0),Object(a["a"])(this,"programID",void 0),Object(a["a"])(this,"encounterID",void 0),Object(a["a"])(this,"providerID",void 0),Object(a["a"])(this,"patientID",void 0),Object(a["a"])(this,"date",void 0),this.encounterTypeID=t,this.patientID=e,this.encounterID=0,this.date=o["a"].getSessionDate(),this.providerID=n,this.programID=o["a"].getProgramID()}getDate(){return this.date}setDate(e){this.date=e}setEncounterID(e){this.encounterID=e}getEncounterID(){return this.encounterID}getFirstValueCoded(e){return r.getFirstValueCoded(this.patientID,e,this.date)}getFirstValueNumber(e){return r.getFirstValueNumber(this.patientID,e,this.date)}async buildObs(e,t){const n={...t,person_id:this.patientID,obs_datetime:this.date};return n["concept_id"]=await c["a"].getConceptID(e),t.value_coded&&(n["value_coded"]=await c["a"].getConceptID(t.value_coded)),n}buildValueText(e,t){return r.buildValueText(e,t,this.date)}buildValueCoded(e,t){return r.buildValueCoded(e,t,this.date)}buildValueCodedFromConceptId(e,t){return r.buildValueCodedFromConceptId(e,t,this.date)}buildValueNumber(e,t,n=null,a=null){return r.buildValueNumber(e,t,n,a,this.date)}buildValueDate(e,t){return r.buildValueDate(e,t,this.date)}async buildNumericEstimate(e,t){return{concept_id:await r.getConceptID(e),value_numeric:t,value_text:"Estimated",obs_datetime:this.date}}buildValueDateEstimated(e,t){return this.buildObs(e,{value_datetime:t,value_text:"Estimated"})}async saveObservationList(e){return o["a"].saveObsArray(this.encounterID,e)}async saveValueTextObs(e,t){const n=await o["a"].buildValueText(e,t);return this.saveObs(n)}async saveValueCodedObs(e,t){const n=await o["a"].buildValueCoded(e,t);return this.saveObs(n)}async saveValueNumericObs(e,t,n=null){const a=await o["a"].buildValueNumber(e,t,n);return this.saveObs(a)}async saveValueDatetimeObs(e,t){const n=await o["a"].buildValueDate(e,t,o["a"].getSessionDate());return this.saveObs(n)}async createEncounter(){const e={encounter_type_id:this.encounterTypeID,patient_id:this.patientID,encounter_datetime:this.date};-1!=this.providerID&&(e["provider_id"]=this.providerID);const t=await i["a"].create(e);if(t)return this.encounterID=t.encounter_id,t}saveObs(e){return r.saveObs(this.encounterID,e)}}},cc74:function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var a,o=n("ad49");function i(){return o["a"].isProp(a.DDE_ENABLED+"=true")}function c(){return o["a"].isProp(a.MALAWI_NATIONAL_ID_SCANNER_ENABLED+"=true")}function r(){return o["a"].isProp(a.MILITARY_SITE+"=true")}function s(){return o["a"].isProp(a.PORTAL_ENABLED+"=true")}function l(){return o["a"].get(a.SITE_UUID)}function d(){return o["a"].get(a.SITE_PREFIX)}function u(){return o["a"].get(a.PORTAL_PROPERTIES)}function p(){return o["a"].get(a.HEALTH_CENTER_ID)}function m(e){return o["a"].set(a.HEALTH_CENTER_ID,e)}function h(){return o["a"].get(a.SITE_PREFIX)}function b(e){return o["a"].set(a.SITE_PREFIX,e)}function g(e){return o["a"].set(a.PORTAL_PROPERTIES,e)}function f(e){return o["a"].set(a.PORTAL_ENABLED,""+e)}(function(e){e["MILITARY_SITE"]="military_site",e["HEALTH_CENTER_ID"]="current_health_center_id",e["SITE_PREFIX"]="site_prefix",e["SITE_UUID"]="site_uuid",e["PORTAL_ENABLED"]="portal.enabled",e["PORTAL_PROPERTIES"]="portal.properties",e["DDE_ENABLED"]="dde_enabled",e["MALAWI_NATIONAL_ID_SCANNER_ENABLED"]="malawi.nationalID.scanner.enabled"})(a||(a={})),t["b"]={setHealthCenterID:m,sitePrefix:d,siteUUID:l,portalProperties:u,ddeEnabled:i,militarySiteEnabled:r,healthCenterID:p,siteCode:h,portalEnabled:s,setSitePrefix:b,setPortalIP:g,setPortalEnabled:f,malawiNationalIDScannerEnabled:c}},cd49:function(e,t,n){"use strict";n.r(t);var a=n("7a23");function o(e,t,n,o,i,c){const r=Object(a["resolveComponent"])("modal-container"),s=Object(a["resolveComponent"])("full-screen-notice"),l=Object(a["resolveComponent"])("update-notification"),d=Object(a["resolveComponent"])("ion-router-outlet"),u=Object(a["resolveComponent"])("connection-error"),p=Object(a["resolveComponent"])("ion-app");return Object(a["openBlock"])(),Object(a["createBlock"])(p,null,{default:Object(a["withCtx"])(()=>[Object(a["createVNode"])(r,{onModalDismissed:t[0]||(t[0]=t=>e.activeModal=""),modalName:e.activeModal},null,8,["modalName"]),e.checkFullScreen?(Object(a["openBlock"])(),Object(a["createBlock"])(s,{key:0})):Object(a["createCommentVNode"])("",!0),e.checkForUpdates?(Object(a["openBlock"])(),Object(a["createBlock"])(l,{key:1})):Object(a["createCommentVNode"])("",!0),(Object(a["openBlock"])(),Object(a["createBlock"])(d,{key:e.$route.fullPath})),e.notConfigPage?(Object(a["openBlock"])(),Object(a["createBlock"])(u,{key:2})):Object(a["createCommentVNode"])("",!0)]),_:1})}n("14d9");var i=n("d867"),c=n("156d"),r=n("0ba8"),s=n("b5e4"),l=n("6605"),d=(n("a5d8"),n("323e")),u=n.n(d),p=n("afbc"),m=n("89b4"),h=Object(a["defineComponent"])({name:"App",components:{IonApp:i["a"],IonRouterOutlet:i["H"],ModalContainer:Object(a["defineAsyncComponent"])(()=>n.e("chunk-2d22d5a8").then(n.bind(null,"f6ac"))),FullScreenNotice:Object(a["defineAsyncComponent"])(()=>n.e("chunk-a3f4f504").then(n.bind(null,"5282"))),ConnectionError:Object(a["defineAsyncComponent"])(()=>n.e("chunk-6595c582").then(n.bind(null,"ef86"))),UpdateNotification:Object(a["defineAsyncComponent"])(()=>n.e("chunk-2af68944").then(n.bind(null,"76bd")))},setup(){const e=Object(a["ref"])(!0),t=Object(l["h"])(),n=Object(a["ref"])(!0),o=Object(a["ref"])(null),d=Object(a["ref"])(!1),h=Object(a["ref"])(!0),b=new m["a"],g=Object(a["ref"])("");return b.initDateSync(36e5),"boolean"===typeof b.getAppConf("promptFullScreenDialog")&&(d.value=b.getAppConf("promptFullScreenDialog")),"boolean"===typeof b.getAppConf("showUpdateNotifications")&&(h.value=b.getAppConf("showUpdateNotifications")),u.a.configure({easing:"ease",speed:330,trickleSpeed:8}),Object(a["watch"])(t,e=>n.value="API host settings"!=e.name,{immediate:!0}),Object(a["watch"])(o,t=>{e.value=!t}),r["b"].on(r["a"].SHOW_MODAL,e=>g.value=e),r["b"].on(c["a"].BEFORE_API_REQUEST,e=>{"_health"!=e&&u.a.start()}),r["b"].on(c["a"].AFTER_API_REQUEST,async e=>{o.value&&(clearInterval(o.value),o.value=null,Object(s["d"])("Back online!",6500)),e&&401===e.status&&"Login"!=t.name&&p["a"].push("/login"),u.a.done()}),r["b"].on(c["a"].ON_API_CRASH,()=>{o.value||(i["Y"].dismiss(),o.value=setInterval(()=>{"API host settings"!=t.name&&c["b"].healthCheck()},2500),Object(s["e"])("Unable to reach api. You can fix the error below")),u.a.done()}),{apiOk:e,checkForUpdates:h,activeModal:g,notConfigPage:n,checkFullScreen:d}}}),b=n("d959"),g=n.n(b);const f=g()(h,[["render",o]]);var _=f;n("4b63"),n("4041"),n("51ef"),n("a237"),n("e09e"),n("46e5"),n("98b6"),n("2d22"),n("66b0"),n("ce1f"),n("1a5e"),n("7708"),n("1eb2"),n("2fdd"),n("6460"),n("8c28"),n("09c5");const v=Object(a["createApp"])(_).use(i["U"]).use(p["a"]);p["a"].isReady().then(()=>{v.mount("#app")})},cf9e:function(e,t,n){"use strict";n.d(t,"b",(function(){return h})),n.d(t,"a",(function(){return b}));var a,o,i=n("d95e"),c=n("1c74"),r=n("b446"),s=n("0011"),l=n("c731"),d=n("b5e4"),u=n("d867"),p=n("7a23");(function(e){e["MULTI_FIELD_DATE"]="Multipage date fields",e["CALENDAR_FIELD"]="Calendar",e["SINGLE_DATE_INPUT_FIELD"]="Single page date"})(a||(a={})),function(e){e["PERIOD_INPUT_TYPE"]="hts_report_date_period_type"}(o||(o={}));const m=Object(p["reactive"])({datePeriodInputType:localStorage.getItem(o.PERIOD_INPUT_TYPE)||a.MULTI_FIELD_DATE});function h(){Object(l["a"])([{id:"date_field_type",helpText:"Report period input type",type:i["b"].TT_SELECT,isRequired:()=>!0,defaultValue:()=>m.datePeriodInputType,options:()=>[{label:"Calendar",value:a.CALENDAR_FIELD},{label:"Single page date",value:a.SINGLE_DATE_INPUT_FIELD},{label:"Multipage date fields",value:a.MULTI_FIELD_DATE}]}],{skipSummary:!0,onFinish:e=>{m.datePeriodInputType=e.date_field_type.value,localStorage.setItem(o.PERIOD_INPUT_TYPE,m.datePeriodInputType),u["ab"].dismiss()}})}function b(e){Object(l["a"])([...Object(r["b"])({id:"start_date",helpText:"Start",required:!0,minDate:()=>(null===e||void 0===e?void 0:e.minDate)||"",maxDate:()=>(null===e||void 0===e?void 0:e.maxDate)||c["e"].getSessionDate(),condition:()=>m.datePeriodInputType===a.MULTI_FIELD_DATE,estimation:{allowUnknown:!1},computeValue:e=>e}),...Object(r["b"])({id:"end_date",helpText:"End",required:!0,minDate:(e,t)=>t.start_date,maxDate:()=>(null===e||void 0===e?void 0:e.maxDate)||c["e"].getSessionDate(),condition:()=>m.datePeriodInputType===a.MULTI_FIELD_DATE,estimation:{allowUnknown:!1},computeValue:e=>e}),{id:"alt_start_date",proxyID:"start_date",helpText:"Start Date",type:i["b"].TT_FULL_DATE,isRequired:()=>!0,validation:t=>{const n=e.maxDate||c["e"].getSessionDate();return e.minDate&&new Date(t.value)<new Date(e.minDate)?[`${Object(s["e"])(""+t.value)} is less than minimum date of ${Object(s["e"])(e.minDate)}`]:n&&new Date(t.value)>new Date(n)?[`${Object(s["e"])(""+t.value)} is greater than max date of ${Object(s["e"])(n)}`]:null},computedValue:e=>e.value,condition:()=>m.datePeriodInputType===a.SINGLE_DATE_INPUT_FIELD},{id:"alt_end_date",proxyID:"end_date",helpText:"End Date",type:i["b"].TT_FULL_DATE,isRequired:()=>!0,defaultValue:e=>e.start_date.value,validation:(t,n)=>{const a=e.maxDate||c["e"].getSessionDate();return n.start_date.value&&new Date(t.value)<new Date(n.start_date.value)?[`${Object(s["e"])(""+t.value)} is less than minimum date of ${Object(s["e"])(n.start_date.value)}`]:a&&new Date(t.value)>new Date(a)?[`${Object(s["e"])(""+t.value)} is greater than max date of ${Object(s["e"])(a)}`]:null},computedValue:e=>e.label,condition:()=>m.datePeriodInputType===a.SINGLE_DATE_INPUT_FIELD},{id:"calendar_start_date",proxyID:"start_date",helpText:"Start Date",type:i["b"].TT_DATE_PICKER,isRequired:()=>!0,computedValue:e=>e.value,condition:()=>m.datePeriodInputType===a.CALENDAR_FIELD,config:{minDate:()=>e.minDate||null,maxDate:()=>e.maxDate||c["e"].getSessionDate(),infoItems:(e,t)=>{var n;return[{label:"Start Date",value:Object(s["e"])(e)||"-"},{label:"End Date",value:Object(s["e"])(null===(n=t.end_date)||void 0===n?void 0:n.value)||"-"}]},persistInfoItems:!1}},{id:"calendar_end_date",proxyID:"end_date",helpText:"End Date",type:i["b"].TT_DATE_PICKER,defaultValue:e=>e.start_date.value,isRequired:()=>!0,computedValue:e=>e.value,condition:()=>m.datePeriodInputType===a.CALENDAR_FIELD,config:{minDate:e=>e.start_date.value,maxDate:()=>e.maxDate||c["e"].getSessionDate(),infoItems:(e,t)=>{var n;return[{label:"Start Date",value:Object(s["e"])(null===(n=t.start_date)||void 0===n?void 0:n.value)||"-"},{label:"End Date",value:Object(s["e"])(e)}]},persistInfoItems:!1}},{id:"report_period",helpText:"report_period",type:i["b"].TT_HIDDEN,computedValue:(e,t,n)=>`${Object(s["e"])(n.start_date)}-${Object(s["e"])(n.end_date)}`}],{skipSummary:!0,formLabel:e.title||"Date selection",onFinish:async(t,n)=>{try{await e.onFinish(n.start_date,n.end_date,n.report_period),u["ab"].dismiss()}catch(a){Object(d["c"])("An error has occurred")}}})}},d10e:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var a=n("ade3"),o=n("1c74");class i extends o["e"]{constructor(e){super(),Object(a["a"])(this,"person",void 0),this.person=e}create(){return o["e"].postJson("/people",this.person)}update(e){return o["e"].putJson("people/"+e,{...this.person,program_id:o["e"].getProgramID()})}static searchFamilyName(e){return super.getJson("/search/family_name",{search_string:e})}static searchGivenName(e){return super.getJson("/search/given_name",{search_string:e})}static async getPersonFullName(e){const t=await super.getJson(`/people/${e}/names`);return t&&t.length?t[0].given_name+" "+t[0].family_name:""}}},d1ca:function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var a,o=n("ad49");function i(){return o["a"].get(a.TARGET_LAB)}function c(){return o["a"].isProp(a.CERVICAL_CANCER_SCREENING+"=true")}function r(){return o["a"].isProp(a.VL_ROUTINE_CHECK+"=true")}function s(){return o["a"].isProp(a.FAST_TRACK+"=true")}function l(){return o["a"].isProp(a.THREE_HP_AUTO_SELECT+"=true")}function d(){return o["a"].isProp(a.EXTENDED_LABS+"=true")}function u(){return o["a"].isProp(a.FILING_NUMBERS+"=true")}function p(){return o["a"].isProp(a.DRUG_MANAGEMENT+"=true")}function m(){return o["a"].get(a.HTN_SYSTOLIC_THRESHOLD)}function h(){return o["a"].get(a.HTN_DIASTOLIC_THRESHOLD)}function b(){return o["a"].isProp(a.HTN_ENHANCEMENT+"=true")}function g(){return o["a"].isProp(a.PILLS_REMAINING+"=true")}function f(){return o["a"].get(a.APPOINTMENT_LIMIT)}function _(){return o["a"].get(a.HTN_SCREENING_AGE_THRESHOLD)}async function v(){const e=await o["a"].get(a.CERVICAL_CANCER_AGE_BOUNDS);if(e){const[t,n]=e.split(":");return{start:t,end:n}}return{start:-1,end:-1}}function O(){return o["a"].get(a.FILING_NUMBER_LIMIT)}function y(){return o["a"].get(a.FILING_NUMBER_PREFIX)}function T(){return o["a"].get(a.ADULT_CLINIC_DAYS)}function j(){return o["a"].get(a.PEADS_CLINIC_DAYS)}function k(){return o["a"].get(a.CLINIC_HOLIDAYS)}function I(e){return o["a"].set(a.HTN_SCREENING_AGE_THRESHOLD,e)}function E(e){return o["a"].set(a.APPOINTMENT_LIMIT,e)}function C(e){return o["a"].set(a.ADULT_CLINIC_DAYS,e)}function D(e){return o["a"].set(a.PEADS_CLINIC_DAYS,e)}function N(e){return o["a"].set(a.FILING_NUMBER_LIMIT,e)}(function(e){e["TARGET_LAB"]="target.lab",e["EXTENDED_LABS"]="extended_labs",e["VL_ROUTINE_CHECK"]="activate.vl.routine.check",e["PILLS_REMAINING"]="ask.pills.remaining.at.home",e["FILING_NUMBERS"]="use.filing.number",e["DRUG_MANAGEMENT"]="activate.drug.management",e["HTN_ENHANCEMENT"]="activate.htn.enhancement",e["FAST_TRACK"]="enable_fast_track",e["THREE_HP_AUTO_SELECT"]="activate_3hp_auto_select",e["APPOINTMENT_LIMIT"]="clinic.appointment.limit",e["HTN_SCREENING_AGE_THRESHOLD"]="htn.screening.age.threshold",e["HTN_SYSTOLIC_THRESHOLD"]="htn.systolic.threshold",e["HTN_DIASTOLIC_THRESHOLD"]="htn.diastolic.threshold",e["PEADS_CLINIC_DAYS"]="peads.clinic.days",e["ADULT_CLINIC_DAYS"]="clinic.days",e["FILING_NUMBER_LIMIT"]="filing.number.limit",e["FILING_NUMBER_PREFIX"]="filing.number.prefix",e["CERVICAL_CANCER_SCREENING"]="activate.cervical.cancer.screening",e["CERVICAL_CANCER_AGE_BOUNDS"]="cervical.cancer.screening.age.bounds",e["CLINIC_HOLIDAYS"]="clinic.holidays",e["EXCLUDE_EXTERNAL_AND_DRUG_REFILLS"]="can.remove.external.and.drug.refills.from.data.cleaning"})(a||(a={})),t["b"]={targetLab:i,cervicalCancerScreeningAgeBounds:v,systolicThreshold:m,diastolicThreshold:h,htnAgeThreshold:_,setHtnAgeThreshold:I,setFilingNumberLimit:N,setAppointmentLimit:E,filingNumberLimit:O,filingNumberPrefix:y,adultClinicDays:T,peadsClinicDays:j,setAdultClinicDays:C,setPeadsClinicDays:D,filingNumbersEnabled:u,drugManagementEnabled:p,htnEnabled:b,appointmentLimit:f,askPillsRemaining:g,extendedLabEnabled:d,threeHPAutoSelectEnabled:l,VLEnabled:r,fastTrackEnabled:s,cervicalCancerScreeningEnabled:c,clinicHolidays:k}},d20e:function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var a=n("ade3"),o=n("1c74"),i=n("9283");class c extends o["e"]{constructor(e,t=o["e"].getSessionDate(),n=o["e"].getProgramID()){super(),Object(a["a"])(this,"startDate",void 0),Object(a["a"])(this,"endDate",void 0),Object(a["a"])(this,"date",void 0),Object(a["a"])(this,"name",void 0),Object(a["a"])(this,"programID",void 0),this.startDate="",this.endDate="",this.date=t,this.name=e,this.programID=n}requestReport(e={}){return o["e"].getJson("hts_reports",{start_date:this.startDate,end_date:this.endDate,name:this.name,...e})}periodStr(){const e=e=>i["b"].toStandardHisDisplayFormat(e);return`${e(this.startDate)} - ${e(this.endDate)}`}}},d323:function(e,t,n){},d6aa:function(e,t,n){"use strict";var a=n("7a23");const o={class:"report-content"};function i(e,t,n,i,c,r){const s=Object(a["resolveComponent"])("ion-col"),l=Object(a["resolveComponent"])("ion-row"),d=Object(a["resolveComponent"])("ion-toolbar"),u=Object(a["resolveComponent"])("report-filter"),p=Object(a["resolveComponent"])("ion-header"),m=Object(a["resolveComponent"])("report-table"),h=Object(a["resolveComponent"])("ion-content"),b=Object(a["resolveComponent"])("pagination"),g=Object(a["resolveComponent"])("ion-chip"),f=Object(a["resolveComponent"])("ion-footer"),_=Object(a["resolveComponent"])("his-footer"),v=Object(a["resolveComponent"])("ion-page");return Object(a["openBlock"])(),Object(a["createBlock"])(v,null,{default:Object(a["withCtx"])(()=>[Object(a["createVNode"])(p,null,{default:Object(a["withCtx"])(()=>[Object(a["createVNode"])(d,null,{default:Object(a["withCtx"])(()=>[Object(a["createVNode"])(l,null,{default:Object(a["withCtx"])(()=>[Object(a["createVNode"])(s,null,{default:Object(a["withCtx"])(()=>[Object(a["createElementVNode"])("h1",null,Object(a["toDisplayString"])(e.title),1)]),_:1})]),_:1})]),_:1}),Object(a["createVNode"])(d,null,{default:Object(a["withCtx"])(()=>[Object(a["createVNode"])(u,{showPerPageFilter:e.showFilters||e.paginated,disableSearchFilter:e.isTableLoading,disablePerPageFilter:e.isTableLoading,totalRowCount:e.tableRows.length,onOnItemsPerPage:t[0]||(t[0]=t=>e.itemsPerPage=t),onOnSearchFilter:t[1]||(t[1]=t=>e.searchFilter=t)},null,8,["showPerPageFilter","disableSearchFilter","disablePerPageFilter","totalRowCount"])]),_:1})]),_:1}),Object(a["createVNode"])(h,null,{default:Object(a["withCtx"])(()=>[Object(a["createElementVNode"])("div",o,[Object(a["createVNode"])(m,{rows:e.rows,paginated:e.paginated,asyncRows:e.asyncRows,rowParser:e.rowParser,columns:e.columns,showFilters:e.showFilters,newPage:e.currentPage,searchFilter:e.searchFilter,rowsPerPage:e.itemsPerPage,onOnIsLoading:t[2]||(t[2]=t=>e.isTableLoading=t),onOnTableRows:t[3]||(t[3]=t=>e.tableRows=t),onOnPagination:t[4]||(t[4]=t=>e.totalPages=t.length),onOnActiveColumns:t[5]||(t[5]=t=>e.activeColumns=t),onOnActiveRows:t[6]||(t[6]=t=>e.activeRows=t)},null,8,["rows","paginated","asyncRows","rowParser","columns","showFilters","newPage","searchFilter","rowsPerPage"])])]),_:1}),Object(a["createVNode"])(f,null,{default:Object(a["withCtx"])(()=>[Object(a["createVNode"])(d,null,{default:Object(a["withCtx"])(()=>[!e.searchFilter&&e.paginated||!e.searchFilter&&e.totalPages>0&&e.paginated?(Object(a["openBlock"])(),Object(a["createBlock"])(b,{key:0,perPage:e.itemsPerPage,maxVisibleButtons:10,totalPages:e.totalPages,onOnChangePage:t[7]||(t[7]=t=>e.currentPage=t)},null,8,["perPage","totalPages"])):Object(a["createCommentVNode"])("",!0)]),_:1}),e.showReportStamp?(Object(a["openBlock"])(),Object(a["createBlock"])(d,{key:0},{default:Object(a["withCtx"])(()=>[Object(a["createVNode"])(g,{color:"primary"},{default:Object(a["withCtx"])(()=>[Object(a["createTextVNode"])("Date Generated: "),Object(a["createElementVNode"])("b",null,Object(a["toDisplayString"])(e.date),1)]),_:1}),Object(a["createVNode"])(g,{color:"primary"},{default:Object(a["withCtx"])(()=>[Object(a["createTextVNode"])("API version: "),Object(a["createElementVNode"])("b",null,Object(a["toDisplayString"])(e.apiVersion),1)]),_:1})]),_:1})):Object(a["createCommentVNode"])("",!0)]),_:1}),Object(a["createVNode"])(_,{color:e.footerColor,btns:e.btns},null,8,["color","btns"])]),_:1})}n("14d9");var c=n("0f25"),r=n("9ceb"),s=n("80e3"),l=n("d867"),d=n("ba82"),u=n("1c74"),p=n("9283"),m=n("2f2a"),h=n("1799"),b=Object(a["defineComponent"])({components:{IonCol:l["m"],IonRow:l["I"],Pagination:h["a"],ReportTable:s["a"],ReportFilter:m["a"],HisFooter:c["a"],IonPage:l["D"],IonHeader:l["q"],IonContent:l["n"],IonToolbar:l["T"],IonChip:l["l"],IonFooter:l["o"]},props:{title:{type:String,required:!0},columns:{type:Object,required:!0},rows:{type:Object,default:()=>[]},rowParser:{type:Function},showFilters:{type:Boolean,default:!1},rowsPerPage:{type:Number},asyncRows:{type:Function},paginated:{type:Boolean,default:!1},customBtns:{type:Array,default:()=>[]},showReportStamp:{type:Boolean,default:!0},footerColor:{type:String,default:"dark"},customFileName:{type:String,default:""},canExport:{type:Boolean,default:!0},onFinish:{type:Function}},data:()=>({btns:[],isTableLoading:!1,searchFilter:"",itemsPerPage:50,currentPage:0,tableRows:[],totalPages:0,activeColumns:[],activeRows:[],date:p["b"].toStandardHisDisplayFormat(u["e"].getSessionDate()),apiVersion:u["e"].getApiVersion()}),methods:{getFileName(){return this.customFileName?this.customFileName:this.title}},created(){this.btns=[...this.customBtns,{name:"CSV",size:"large",slot:"start",color:"primary",visible:this.canExport,onClick:()=>{const{columns:e,rows:t}=Object(r["b"])(this.activeColumns,this.activeRows);Object(d["b"])(e,t,this.getFileName())}},{name:"PDF",size:"large",slot:"start",color:"primary",visible:this.canExport,onClick:()=>{const{columns:e,rows:t}=Object(r["b"])(this.activeColumns,this.activeRows);Object(d["d"])(e,t,this.getFileName())}},{name:"Finish",size:"large",slot:"end",color:"success",visible:!0,onClick:()=>{if("function"===typeof this.onFinish)return this.onFinish();this.$router.push({path:"/"})}}]}}),g=n("d959"),f=n.n(g);const _=f()(b,[["render",i]]);t["a"]=_},d95e:function(e,t,n){"use strict";var a;n.d(t,"b",(function(){return a})),n.d(t,"a",(function(){return o})),function(e){e["TT_HIDDEN"]="_HIDDEN_FIELD_",e["TT_INPUT_ARRAY"]="HisInputArray",e["TT_MULTI_SELECT_GRID"]="HisMultiSelectGrid",e["TT_AGE_INPUT"]="HisAgeInput",e["TT_GROUP_SELECTOR"]="HisGroupSelector",e["TT_DATA_TABLE"]="HisDataTable",e["TT_SELECT_GRID"]="HisGridSingleSelect",e["TT_GRID_SELECTOR"]="HisGridSelector",e["TT_NOTE"]="HisNote",e["TT_BARCODE"]="HisBarcodeInput",e["TT_MONTHLY_DAYS"]="HisMonthlyDays",e["TT_TEXT"]="HisTextInput",e["TT_NUMBER"]="HisNumberInput",e["TT_DATETIME"]="datetime",e["TT_SELECT"]="HisSelect",e["TT_MULTIPLE_SELECT"]="HisMultipleSelect",e["TT_ART_REGIMEN_SELECTION"]="HisArtRegimenSelection",e["TT_NEXT_VISIT_INTERVAL_SELECTION"]="HisNextVisitInterval",e["TT_TABLE_VIEWER"]="HisTableViewer",e["TT_DOSAGE_INPUT"]="HisDosageInput",e["TT_YES_NO"]="YesNoSelect",e["TT_MULTIPLE_YES_NO"]="MultiYesNoSelect",e["TT_SUMMARY"]="HisSummary",e["TT_WEIGHT_CHART"]="HisWeightChart",e["TT_VITALS_ENTRY"]="HisVitalsEntry",e["TT_ADHERENCE_INPUT"]="HisAdherenceInput",e["TT_ART_STAGING_SUMMARY"]="ArtStagingSummary",e["TT_LAB_ORDERS"]="HisLabOrders",e["TT_APPOINTMENTS_ENTRY"]="HisAppointments",e["TT_DISPENSATION_INPUT"]="DrugDispensationSelection",e["TT_PROGRAM_SELECTION"]="ProgramSelection",e["TT_DATE_PICKER"]="HisDatePicker",e["TT_PERSON_RESULT_VIEW"]="PersonSearchView",e["TT_RELATION_SELECTION"]="RelationsSelection",e["TT_FILING_NUMBER_VIEW"]="FilingNumberView",e["TT_CARD_SELECTOR"]="HisCardSelector",e["TT_PERSON_MATCH_VIEW"]="PersonMatchView",e["TT_FULL_DATE"]="HisDateInput",e["TT_BATCH_ENTRY"]="HisBatchEntry",e["TT_BATCH_VERIFICATION"]="HisBatchVerification",e["TT_BATCH_MOVEMENT"]="HisBatchMovement",e["TT_COMPLAINTS_PICKER"]="HisComplaintsPicker",e["TT_RADIOLOGY_PICKER"]="HisRadiologyPicker",e["TT_IP_ADDRESS"]="HisIPAddress",e["TT_TEXT_BANNER"]="HisTextBanner",e["TT_DRUG_DISPENSER"]="GeneralDrugDispenser",e["TT_CLINIC_HOLIDAY_PICKER"]="HisClinicHolidayPicker",e["TT_ANC_PREGNANCY_INPUT_CONFIG"]="AncPregnancyInfoConfig",e["TT_ANC_PREGNANCY_DETAILS_INPUT"]="AncPregnancyDetailsInput",e["TT_ANC_LMP_DATE_INPUT"]="AncLmpDateInput",e["TT_ANC_DRUGSET_INPUT"]="AncDrugSetInput",e["TT_DRUG_TRANSFER_IN"]="DrugTransferInput",e["TT_PRESCRIPTION_INPUT"]="HisPrescriptionInput",e["TT_INFINITE_SCROLL_MULTIPLE_SELECT"]="HisInfiniteScrollMultipleSelect"}(a||(a={}));const o=[a.TT_SELECT_GRID,a.TT_INPUT_ARRAY,a.TT_MULTI_SELECT_GRID,a.TT_AGE_INPUT,a.TT_BARCODE,a.TT_NOTE,a.TT_SELECT,a.TT_CARD_SELECTOR,a.TT_MULTIPLE_SELECT,a.TT_TEXT,a.TT_NUMBER,a.TT_MONTHLY_DAYS,a.TT_ART_REGIMEN_SELECTION,a.TT_NEXT_VISIT_INTERVAL_SELECTION,a.TT_TABLE_VIEWER,a.TT_DOSAGE_INPUT,a.TT_YES_NO,a.TT_MULTIPLE_YES_NO,a.TT_WEIGHT_CHART,a.TT_VITALS_ENTRY,a.TT_APPOINTMENTS_ENTRY,a.TT_COMPLAINTS_PICKER,a.TT_CLINIC_HOLIDAY_PICKER,a.TT_SUMMARY,a.TT_ART_STAGING_SUMMARY,a.TT_ADHERENCE_INPUT,a.TT_LAB_ORDERS,a.TT_PERSON_RESULT_VIEW,a.TT_PROGRAM_SELECTION,a.TT_DATE_PICKER,a.TT_RELATION_SELECTION,a.TT_FILING_NUMBER_VIEW,a.TT_PERSON_MATCH_VIEW,a.TT_FULL_DATE,a.TT_BATCH_ENTRY,a.TT_BATCH_VERIFICATION,a.TT_BATCH_MOVEMENT,a.TT_IP_ADDRESS,a.TT_TEXT_BANNER,a.TT_DISPENSATION_INPUT,a.TT_DATA_TABLE,a.TT_GROUP_SELECTOR,a.TT_ANC_PREGNANCY_INPUT_CONFIG,a.TT_ANC_PREGNANCY_DETAILS_INPUT,a.TT_ANC_LMP_DATE_INPUT,a.TT_DRUG_TRANSFER_IN,a.TT_GRID_SELECTOR,a.TT_ANC_DRUGSET_INPUT,a.TT_RADIOLOGY_PICKER,a.TT_PRESCRIPTION_INPUT,a.TT_INFINITE_SCROLL_MULTIPLE_SELECT,a.TT_DRUG_DISPENSER]},db7c:function(e,t,n){"use strict";n("0526")},ded6:function(e,t,n){"use strict";var a=n("7a23");function o(e,t,n,o,i,c){const r=Object(a["resolveComponent"])("ion-skeleton-text"),s=Object(a["resolveComponent"])("ion-item"),l=Object(a["resolveComponent"])("ion-list");return Object(a["openBlock"])(),Object(a["createBlock"])(l,null,{default:Object(a["withCtx"])(()=>[(Object(a["openBlock"])(!0),Object(a["createElementBlock"])(a["Fragment"],null,Object(a["renderList"])(e.items,(e,t)=>(Object(a["openBlock"])(),Object(a["createBlock"])(s,{key:t},{default:Object(a["withCtx"])(()=>[Object(a["createVNode"])(r,{animated:"",style:{width:"100%"}})]),_:2},1024))),128))]),_:1})}n("14d9");var i=n("d867"),c=Object(a["defineComponent"])({components:{IonSkeletonText:i["N"],IonList:i["y"],IonItem:i["w"]},props:{itemCount:{type:Number,default:10}},setup(e){const t=[];for(let n=0;n<e.itemCount;++n)t.push(n);return{items:t}}}),r=(n("95a0"),n("d959")),s=n.n(r);const l=s()(c,[["render",o],["__scopeId","data-v-65e1cf74"]]);t["a"]=l},e109:function(e,t,n){"use strict";n("9708")},e63c:function(e,t,n){"use strict";n("7ea3")},e6e9:function(e,t,n){"use strict";var a=n("7a23");function o(e,t,n,o,i,c){const r=Object(a["resolveComponent"])("ion-title"),s=Object(a["resolveComponent"])("ion-toolbar"),l=Object(a["resolveComponent"])("ion-header"),d=Object(a["resolveComponent"])("ion-content"),u=Object(a["resolveComponent"])("ion-button"),p=Object(a["resolveComponent"])("ion-footer"),m=Object(a["resolveComponent"])("ion-page");return Object(a["openBlock"])(),Object(a["createBlock"])(m,null,{default:Object(a["withCtx"])(()=>[Object(a["createVNode"])(l,null,{default:Object(a["withCtx"])(()=>[Object(a["createVNode"])(s,null,{default:Object(a["withCtx"])(()=>[Object(a["createVNode"])(r,{class:"his-lg-text ion-text-center"},{default:Object(a["withCtx"])(()=>[Object(a["createTextVNode"])(Object(a["toDisplayString"])(e.currentField.helpText),1)]),_:1})]),_:1})]),_:1}),Object(a["createVNode"])(d,null,{default:Object(a["withCtx"])(()=>[(Object(a["openBlock"])(),Object(a["createBlock"])(a["KeepAlive"],null,[(Object(a["openBlock"])(),Object(a["createBlock"])(Object(a["resolveDynamicComponent"])(e.currentField.type),{key:e.currentField.id,options:e.currentField.options,clear:e.valueClearIndex,fdata:e.formData,config:e.currentField.config,cdata:e.computedFormData,activationState:e.state,onValue:e.currentField.onValue,defaultValue:e.currentField.defaultValue,onValueUpdate:e.currentField.onValueUpdate,onOnValue:e.onFieldValue},null,40,["options","clear","fdata","config","cdata","activationState","onValue","defaultValue","onValueUpdate","onOnValue"]))],1024))]),_:1}),Object(a["createVNode"])(p,null,{default:Object(a["withCtx"])(()=>[Object(a["createVNode"])(s,{color:"light"},{default:Object(a["withCtx"])(()=>[e.hideCloseBtn?Object(a["createCommentVNode"])("",!0):(Object(a["openBlock"])(),Object(a["createBlock"])(u,{key:0,disabled:e.disableBtn,onClick:e.onClose,slot:"start",color:"danger",size:"large"},{default:Object(a["withCtx"])(()=>[Object(a["createTextVNode"])(" Close ")]),_:1},8,["disabled","onClick"])),Object(a["createVNode"])(u,{disabled:e.disableBtn,onClick:e.onClear,slot:"end",color:"warning",size:"large"},{default:Object(a["withCtx"])(()=>[Object(a["createTextVNode"])(" Clear ")]),_:1},8,["disabled","onClick"]),Object(a["createVNode"])(u,{disabled:e.disableBtn,onClick:e.onDone,slot:"end",color:"success",size:"large"},{default:Object(a["withCtx"])(()=>[Object(a["createTextVNode"])(" Done ")]),_:1},8,["disabled","onClick"])]),_:1})]),_:1})]),_:1})}var i=n("b5e4"),c=n("d95e"),r=n("d867"),s=n("2ef0");function l(){const e={};return c["a"].forEach(t=>{e[t]=Object(a["defineAsyncComponent"])(()=>n("f159")(`./${t}.vue`))}),e}var d=Object(a["defineComponent"])({name:"SingleFieldTouchForm",components:{IonPage:r["D"],IonContent:r["n"],IonFooter:r["o"],IonToolbar:r["T"],IonButton:r["d"],IonHeader:r["q"],IonTitle:r["S"],...l()},props:{dismissType:{type:String},onFinish:{type:Function,required:!0},currentField:{type:Object,required:!0}},data:()=>({valueClearIndex:0,formData:{},computedFormData:{},state:"",value:null,disableBtn:!1}),computed:{hideCloseBtn(){var e,t,n,a;return"boolean"===typeof(null===(e=this.currentField)||void 0===e||null===(t=e.config)||void 0===t?void 0:t.hideCloseFooterBtn)&&(null===(n=this.currentField)||void 0===n||null===(a=n.config)||void 0===a?void 0:a.hideCloseFooterBtn)}},methods:{onClose(){"modal"===this.dismissType?r["ab"].dismiss():this.$router.back()},onClear(){this.valueClearIndex+=1,this.value=null},onFieldValue(e){this.value=e,"boolean"!==typeof this.currentField.requireNext||this.currentField.requireNext||this.onDone()},onDone(){var e;if(this.disableBtn=!0,Object(s["isEmpty"])(this.value)&&"function"===typeof(null===(e=this.currentField)||void 0===e?void 0:e.isRequired)&&this.currentField.isRequired(this.value,{}))return this.disableBtn=!1,Object(i["e"])("Field cannot be empty");if(this.currentField.validation){const e=this.currentField.validation(this.value);if(this.disableBtn=!1,e)return Object(i["e"])(e.join(", "),6e4)}try{this.onFinish(this.value)}catch(t){Object(i["c"])(""+t),console.error(t)}this.onClose(),this.disableBtn=!1}}}),u=n("d959"),p=n.n(u);const m=p()(d,[["render",o]]);t["a"]=m},e805:function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var a,o=n("ad49");function i(){return o["a"].isProp(a.OFFER_RECENCY_TEST+"=true")}(function(e){e["OFFER_RECENCY_TEST"]="hts.recency.test"})(a||(a={})),t["b"]={offerRecencyTest:i}},e897:function(e,t,n){"use strict";n("d323")},ec2a:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var a=n("1c74");class o extends a["e"]{constructor(){super()}static create(e){const t={...e};return"program_id"in t||Object.assign(t,{program_id:this.getProgramID()}),"encounter_datetime"in t||Object.assign(t,{encounter_datetime:this.getSessionDate()}),a["e"].postJson("/encounters",t)}static voidEncounter(e,t="Unknown"){return super.void("/encounters/"+e,{reason:t})}static getSavedEncounters(e,t=super.getProgramID()){return super.getJson(`programs/${t}/patients/${e}/saved_encounters`)}static getEncounters(e,t={}){return super.getJson("/encounters",{program_id:super.getProgramID(),patient_id:e,paginate:!1,...t})}}},efaf:function(e,t,n){"use strict";var a=n("7a23");const o=e=>(Object(a["pushScopeId"])("data-v-53e6d064"),e=e(),Object(a["popScopeId"])(),e),i=o(()=>Object(a["createElementVNode"])("img",{id:"barcode-img",class:"clickable",src:"/assets/images/barcode.svg"},null,-1)),c=["readonly"];function r(e,t,n,o,r,s){const l=Object(a["resolveComponent"])("ion-col"),d=Object(a["resolveComponent"])("ion-row"),u=Object(a["resolveComponent"])("ion-grid");return Object(a["openBlock"])(),Object(a["createBlock"])(u,null,{default:Object(a["withCtx"])(()=>[Object(a["createVNode"])(d,null,{default:Object(a["withCtx"])(()=>[Object(a["createVNode"])(l,{size:e.iconSize,onClick:e.useCameraScanner,style:{"max-height":"100px"}},{default:Object(a["withCtx"])(()=>[i]),_:1},8,["size","onClick"]),Object(a["createVNode"])(l,{size:e.inputSize},{default:Object(a["withCtx"])(()=>[Object(a["withDirectives"])(Object(a["createElementVNode"])("input",{readonly:e.activePlatformProfile.keyboard===e.KeyboardType.HIS_KEYBOARD_ONLY,id:"barcode-inputbox",placeholder:"Scan barcode or QR Code","onUpdate:modelValue":t[0]||(t[0]=t=>e.typedBarcode=t),autofocus:!0,style:Object(a["normalizeStyle"])({fontSize:e.fontSize,textShadow:"wrap"})},null,12,c),[[a["vModelText"],e.typedBarcode]])]),_:1},8,["size"])]),_:1})]),_:1})}var s=n("d867"),l=n("2ed9"),d=(n("5b81"),n("14d9"),n("c6fe")),u=n.n(d);function p(){const e=Object(a["ref"])(""),t=Object(a["ref"])([]);return Object(a["onMounted"])(()=>{u.a.attachTo(document,{reactToPaste:!0,minLength:1,onScan:function(n){t.value.length?t.value.includes("$")&&(e.value=t.value.join("").replaceAll(/\$/gi,""),t.value=[]):e.value=n.replaceAll(/\$/gi,"")},onScanError(e){console.log("onScanError: "+JSON.stringify(e))},onKeyDetect(e,n){n.key.match(/backspace/i)&&t.value.length?t.value.pop():(n.key.match(/enter/i)&&t.value.push("$"),1===n.key.length&&t.value.push(n.key),console.log("onKeyDetect: "+e,n.key))}})}),Object(a["onBeforeUnmount"])(()=>{u.a.detachFrom(document)}),e}var m=n("8642"),h=Object(a["defineComponent"])({name:"BarcodeInput",components:{IonRow:s["I"],IonCol:s["m"],IonGrid:s["p"]},props:{clearValue:String,virtualText:String,size:{type:String,default:"large"}},emits:["onScan","onValue"],setup(e,{emit:t}){const{activePlatformProfile:n}=Object(l["e"])(),o=p(),i=Object(a["ref"])(""),c=()=>{try{m["a"].scan().then(e=>{o.value=e.text})}catch(e){console.log(e)}};return Object(a["watch"])(()=>e.clearValue,()=>i.value=""),Object(a["watch"])(()=>e.virtualText,e=>i.value=e||""),Object(a["watch"])(o,e=>{if(i.value&&!i.value.match(/.+\$$/i))return;const n=i.value?i.value.replace(/\$/gi,""):e;t("onScan",n),t("onValue",n),i.value=""}),{typedBarcode:i,KeyboardType:l["b"],activePlatformProfile:n,iconSize:Object(a["computed"])(()=>"small"===e.size?3:2),inputSize:Object(a["computed"])(()=>"small"===e.size?9:10),fontSize:Object(a["computed"])(()=>"small"===e.size?"15px":"42px"),useCameraScanner:c}}}),b=(n("aeb4"),n("d959")),g=n.n(b);const f=g()(h,[["render",r],["__scopeId","data-v-53e6d064"]]);t["a"]=f},f01e:function(e,t,n){"use strict";n.d(t,"a",(function(){return a})),n.d(t,"b",(function(){return i}));var a,o=n("fa94");(function(e){e["MALES_WITH_ANC_ENCOUNTERS"]="MALES WITH ANC ENCOUNTERS",e["ENCOUNTERS_AFTER_DEATH"]="ENCOUNTERS AFTER DEATH",e["INCOMPLETE_VISITS"]="INCOMPLETE VISITS",e["DUPLICATE_ENCOUNTERS"]="DUPLICATE ENCOUNTERS",e["MISSING_HIV_STATUS"]="NO HIV STATUS"})(a||(a={}));class i extends o["a"]{constructor(){super()}getDataToolReport(e){return o["a"].getJson("anc_data_cleaning_tools",this.buildRequestParams({report_name:e}))}}},f099:function(e,t,n){"use strict";n("062e")},f159:function(e,t,n){var a={"./AncDrugSetInput.vue":["c99f","TouchFormElement0"],"./AncLmpDateInput.vue":["101a","TouchFormElement1"],"./AncPregnancyDetailsInput.vue":["b043","TouchFormElement2"],"./AncPregnancyInfoConfig.vue":["262e","TouchFormElement3"],"./ArtStagingSummary.vue":["43db","TouchFormElement4"],"./BaseTextInput.vue":["36ad","TouchFormElement5"],"./DrugDispensationSelection.vue":["05d5","TouchFormElement6"],"./DrugTransferInput.vue":["de42","TouchFormElement7"],"./FieldMixin.vue":["51c8","TouchFormElement8"],"./FilingNumberView.vue":["c650","TouchFormElement9"],"./GeneralDrugDispenser.vue":["7737","TouchFormElement10"],"./HisAdherenceInput.vue":["f2c3","TouchFormElement11"],"./HisAgeInput.vue":["c05f","TouchFormElement12"],"./HisAppointments.vue":["b2eb","TouchFormElement13~TouchFormElement20~TouchFormElement24","TouchFormElement13"],"./HisArtRegimenSelection.vue":["47b9","TouchFormElement14"],"./HisBarcodeInput.vue":["dd65","TouchFormElement15"],"./HisBatchEntry.vue":["f2ab","TouchFormElement16"],"./HisBatchMovement.vue":["5148","TouchFormElement17"],"./HisBatchVerification.vue":["7b0f","TouchFormElement18"],"./HisCardSelector.vue":["0734","TouchFormElement19"],"./HisClinicHolidayPicker.vue":["4030","TouchFormElement13~TouchFormElement20~TouchFormElement24","TouchFormElement20"],"./HisComplaintsPicker.vue":["82d1","TouchFormElement21"],"./HisDataTable.vue":["a6ba","TouchFormElement22"],"./HisDateInput.vue":["374c","TouchFormElement23"],"./HisDatePicker.vue":["9b30","TouchFormElement13~TouchFormElement20~TouchFormElement24","TouchFormElement24"],"./HisDosageInput.vue":["b34c","TouchFormElement25"],"./HisGridSelector.vue":["112a","TouchFormElement26"],"./HisGridSingleSelect.vue":["6367","TouchFormElement27"],"./HisGroupSelector.vue":["81cf","TouchFormElement28"],"./HisIPAddress.vue":["2a82","TouchFormElement29"],"./HisInfiniteScrollMultipleSelect.vue":["52a3","TouchFormElement30"],"./HisInputArray.vue":["c3d7","TouchFormElement31"],"./HisLabOrders.vue":["e614","TouchFormElement32"],"./HisMonthlyDays.vue":["69cf","TouchFormElement33"],"./HisMultiSelectGrid.vue":["0fa3","TouchFormElement34"],"./HisMultipleSelect.vue":["2fd5","TouchFormElement35"],"./HisNextVisitInterval.vue":["3126","TouchFormElement36"],"./HisNote.vue":["c927","TouchFormElement37"],"./HisNumberInput.vue":["5e75","TouchFormElement38"],"./HisPrescriptionInput.vue":["87e5","TouchFormElement39"],"./HisRadiologyPicker.vue":["adc7","TouchFormElement40"],"./HisSelect.vue":["d11f","TouchFormElement41"],"./HisSummary.vue":["e0bd","TouchFormElement42"],"./HisTableViewer.vue":["8904","TouchFormElement43"],"./HisTextBanner.vue":["952c","TouchFormElement44"],"./HisTextInput.vue":["6ef9","TouchFormElement45"],"./HisVitalsEntry.vue":["e333","TouchFormElement46"],"./HisWeightChart.vue":["26a1","TouchFormElement47"],"./MultiYesNoSelect.vue":["5fd1","TouchFormElement48"],"./PersonMatchView.vue":["6591","TouchFormElement49"],"./PersonSearchView.vue":["28b2","TouchFormElement50"],"./ProgramSelection.vue":["e3b4","TouchFormElement51"],"./RelationsSelection.vue":["0e57","TouchFormElement52"],"./SelectMixin.vue":["82a9","TouchFormElement53"],"./YesNoSelect.vue":["71f2","TouchFormElement54"]};function o(e){if(!n.o(a,e))return Promise.resolve().then((function(){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}));var t=a[e],o=t[0];return Promise.all(t.slice(1).map(n.e)).then((function(){return n(o)}))}o.keys=function(){return Object.keys(a)},o.id="f159",e.exports=o},f768:function(e,t,n){"use strict";n.d(t,"a",(function(){return ra}));n("13d5");var a=n("d1ca"),o=[{name:"Data cleaning verification",path:"/art/data_cleaning_verification",component:()=>n.e("chunk-6b71f156").then(n.bind(null,"b791"))},{name:"Edit ARV Number",path:"/art/arv-number/:patient_id",component:()=>n.e("chunk-444bebfd").then(n.bind(null,"1769"))},{name:"preferences",path:"/art/preferences",component:()=>n.e("chunk-138b25ac").then(n.bind(null,"b236"))},{name:"target_lab",path:"/art/preferences/target_lab",component:()=>n.e("chunk-40a31bd6").then(n.bind(null,"1ac1"))},{name:a["a"].CLINIC_HOLIDAYS,path:"/art/preferences/clinic_holidays",component:()=>n.e("chunk-40a31bd6").then(n.bind(null,"1ac1"))},{name:"bp_thresholds",path:"/art/preferences/bp_thresholds",component:()=>n.e("chunk-40a31bd6").then(n.bind(null,"1ac1"))},{name:"clinic_days",path:"/art/preferences/clinic_days",component:()=>n.e("chunk-40a31bd6").then(n.bind(null,"1ac1"))},{name:"cervical_cancer",path:"/art/preferences/cervical_cancer_screening",component:()=>n.e("chunk-40a31bd6").then(n.bind(null,"1ac1"))},{name:a["a"].HTN_SCREENING_AGE_THRESHOLD,path:"/art/preferences/htn_age",component:()=>n.e("chunk-40a31bd6").then(n.bind(null,"1ac1"))},{name:a["a"].FILING_NUMBER_LIMIT,path:"/art/preferences/fn/limit",component:()=>n.e("chunk-40a31bd6").then(n.bind(null,"1ac1"))},{name:a["a"].APPOINTMENT_LIMIT,path:"/art/preferences/appointment/limit",component:()=>n.e("chunk-40a31bd6").then(n.bind(null,"1ac1"))},{name:"art_patient_visit_stats",path:"/art/patient_visits",component:()=>n.e("chunk-373eba62").then(n.bind(null,"fe31"))},{name:"filing management",path:"/art/filing_numbers/:patient_id",component:()=>n.e("chunk-21649554").then(n.bind(null,"12c7"))},{name:"Enter stock",path:"/art/stock/enter",component:()=>n.e("chunk-428a91f2").then(n.bind(null,"8a4e"))},{name:"Audit trail",path:"/art/stock/trail",component:()=>n.e("chunk-374f5cda").then(n.bind(null,"4dbc"))},{name:"Verify stock",path:"/art/stock/verify",component:()=>n.e("chunk-16767ceb").then(n.bind(null,"7dd5"))},{name:"Move stock",path:"/art/stock/move",component:()=>n.e("chunk-17ba928e").then(n.bind(null,"7052"))},{name:"Stock report",path:"/art/stock/report",component:()=>n.e("chunk-fccffe56").then(n.bind(null,"719a"))},{name:"Print drug barcode",path:"/drug/print",component:()=>n.e("chunk-1e242795").then(n.bind(null,"da8f"))},{name:"treatment",path:"/art/encounters/prescriptions/:patient_id",component:()=>Promise.all([n.e("chunk-3c19eeed"),n.e("chunk-2d0e1fde")]).then(n.bind(null,"7d94"))},{name:"bp_alert",path:"/art/encounters/bp/alert/:patient_id",component:()=>Promise.all([n.e("chunk-7709102e"),n.e("chunk-bfe33a92")]).then(n.bind(null,"7337"))},{name:"art adherence",path:"/art/encounters/adherence/:patient_id",component:()=>n.e("chunk-2799cd62").then(n.bind(null,"9d38"))},{name:"hiv clinic consultation (clinician)",path:"/art/encounters/consultation/:patient_id",component:()=>Promise.all([n.e("chunk-3c19eeed"),n.e("chunk-10fc5096")]).then(n.bind(null,"6c3f"))},{name:"hiv clinic consultation",path:"/art/encounters/consultation/:patient_id",component:()=>Promise.all([n.e("chunk-3c19eeed"),n.e("chunk-10fc5096")]).then(n.bind(null,"6c3f"))},{name:"hiv clinic registration",path:"/art/encounters/registration/:patient_id",component:()=>Promise.all([n.e("chunk-089a5b7a"),n.e("chunk-4183a6cc")]).then(n.bind(null,"308a"))},{name:"hiv reception",path:"/art/encounters/reception/:patient_id",component:()=>n.e("chunk-5edbc3a2").then(n.bind(null,"754d"))},{name:"hiv staging",path:"/art/encounters/staging/:patient_id",component:()=>Promise.all([n.e("chunk-089a5b7a"),n.e("chunk-2d2288cf")]).then(n.bind(null,"da51"))},{name:"appointment",path:"/art/encounters/appointment/:patient_id",component:()=>n.e("chunk-15eccd71").then(n.bind(null,"1c9e"))},{name:"dispensing",path:"/art/encounters/dispensation/:patient_id",component:()=>n.e("chunk-bc09139e").then(n.bind(null,"9e6a"))},{name:"vitals",path:"/art/encounters/vitals/:patient_id",component:()=>n.e("chunk-25532402").then(n.bind(null,"ab49"))},{name:"htn_vitals",path:"/art/encounters/vitals/:patient_id",component:()=>n.e("chunk-25532402").then(n.bind(null,"ab49"))},{name:"patient type",path:"/art/encounters/patient_type/:patient_id",component:()=>n.e("chunk-0490c4ce").then(n.bind(null,"e5e5"))},{name:"fast track assesment",path:"/art/encounters/fast_track/:patient_id",component:()=>n.e("chunk-0e8d09cc").then(n.bind(null,"d1b9"))},{name:"bp_management",path:"/art/encounters/bp_management/:patient_id",component:()=>Promise.all([n.e("chunk-7709102e"),n.e("chunk-03e87f92")]).then(n.bind(null,"72e3"))},{name:"Hypertesnion diagnosis",path:"/art/encounters/hypertension_diagnosis/:patient_id",component:()=>n.e("chunk-39ae0fda").then(n.bind(null,"f7b2"))},{name:"BP prescription",path:"/art/encounters/bp_prescription/:patient_id",component:()=>n.e("chunk-8431eb1e").then(n.bind(null,"313e"))},{name:"Social history",path:"/art/encounters/social_history/:patient_id",component:()=>n.e("chunk-1a035943").then(n.bind(null,"75fa"))},{name:"BP adherence",path:"/art/encounters/bp_adherence/:patient_id",component:()=>n.e("chunk-a6d3d518").then(n.bind(null,"3f4a"))},{name:"lab activities",path:"/art/encounters/lab/:patient_id",component:()=>n.e("chunk-74c63811").then(n.bind(null,"5697"))},{name:"patient mstercard",path:"/art/mastercard/:patient_id",component:()=>n.e("chunk-17dae17c").then(n.bind(null,"12f0"))},{name:"Data cleaning",path:"/data_cleaning",component:()=>n.e("chunk-cc6c9ed2").then(n.bind(null,"c92b"))},{name:"moh_disaggregated_report",path:"/art/moh_disaggregated_report",component:()=>Promise.all([n.e("chunk-c8611e9e"),n.e("chunk-46bff48c")]).then(n.bind(null,"1b7d"))},{name:"moh_regimen_report",path:"/art/moh_regimen_report",component:()=>n.e("chunk-6f5d748c").then(n.bind(null,"4a54"))},{path:"/art/report/moh/moh_cohort",name:"moh_cohort",component:()=>n.e("chunk-5bfa378c").then(n.bind(null,"1509"))},{path:"/art/report/moh/moh_survial_analysis",name:"moh_survial_analysis",component:()=>n.e("chunk-9c3ba9b2").then(n.bind(null,"1f15"))},{path:"/art/report/moh/moh_tpt_new_initiations",name:"moh_tpt_new_initiations",component:()=>Promise.all([n.e("chunk-c8611e9e"),n.e("chunk-65365de6")]).then(n.bind(null,"30f4"))},{name:"moh_tx_curr_mmd",path:"/art/report/moh/moh_tx_curr_mmd",component:()=>Promise.all([n.e("chunk-80b50b94"),n.e("chunk-7094e908")]).then(n.bind(null,"8f57"))},{name:"moh_regimen_weight_distribution",path:"/art/report/moh/moh_regimen_weight_distribution",component:()=>Promise.all([n.e("chunk-c8611e9e"),n.e("chunk-2d225875")]).then(n.bind(null,"e57f"))},{name:"clinic_archiving_candidates",path:"/art/report/clinic/clinic_archiving_candidates",component:()=>n.e("chunk-3fba66f4").then(n.bind(null,"6955"))},{name:"clinic_retention_report",path:"/art/report/clinic/clinic_retention_report",component:()=>n.e("chunk-1e09cff8").then(n.bind(null,"008b"))},{name:"clinic_external_consultation_report",path:"/art/report/clinic/clinic_external_consultation_report",component:()=>n.e("chunk-52d6026b").then(n.bind(null,"f63f"))},{name:"clinic_due_viral_load_report",path:"/art/report/clinic/clinic_due_viral_load_report",component:()=>n.e("chunk-50220066").then(n.bind(null,"d20c"))},{name:"clinic_lab_results",path:"/art/report/clinic/clinic_lab_results",component:()=>Promise.all([n.e("chunk-3818227b"),n.e("chunk-2d0deb82")]).then(n.bind(null,"879f"))},{name:"clinic_missed_appointments",path:"/art/report/clinic/clinic_missed_appointments",component:()=>n.e("chunk-ed3d470c").then(n.bind(null,"d778"))},{name:"clinic_defaulters_report",path:"/art/report/clinic/clinic_defaulters",component:()=>Promise.all([n.e("chunk-3b8ea58b"),n.e("chunk-2d0cbe29")]).then(n.bind(null,"4c26"))},{name:"clinic_regimen_report",path:"/art/report/clinic/clinic_regimen_report",component:()=>Promise.all([n.e("chunk-c8611e9e"),n.e("chunk-2d20ee25")]).then(n.bind(null,"b0ef"))},{name:"clinic_regimen_switch",path:"/art/report/clinic/clinic_regimen_switch",component:()=>Promise.all([n.e("chunk-c8611e9e"),n.e("chunk-2d0cc98a")]).then(n.bind(null,"4f35"))},{name:"clinic_pregnant_patients",path:"/art/report/clinic/clinic_pregnant_patients",component:()=>n.e("chunk-dc7f244e").then(n.bind(null,"ccb7"))},{name:"clinic_appointments",path:"/art/report/clinic/clinic_appointments",component:()=>n.e("chunk-8c9b74a6").then(n.bind(null,"2e46"))},{name:"stock_card_report",path:"/art/report/clinic/stock_card_report",component:()=>n.e("chunk-6c28dc14").then(n.bind(null,"c016"))},{name:"clinic_viral_load",path:"/art/report/clinic/clinic_viral_load",component:()=>n.e("chunk-5cabb54e").then(n.bind(null,"36da"))},{name:"clinic_other_outcome_list",path:"/art/report/clinic/clinic_other_outcome_list",component:()=>n.e("chunk-4c40fe44").then(n.bind(null,"93a7"))},{name:"clinic_regimen_formulation",path:"/art/report/clinic/clinic_regimen_formulation",component:()=>Promise.all([n.e("chunk-c8611e9e"),n.e("chunk-2d21f07a")]).then(n.bind(null,"d7a2"))},{name:"pepfar_disaggregated_report",path:"/art/report/pepfar/disaggregated",component:()=>Promise.all([n.e("chunk-c8611e9e"),n.e("chunk-3526ee86")]).then(n.bind(null,"c753"))},{name:"pepfar_defaulters_report",path:"/art/report/pepfar/defaulters",component:()=>Promise.all([n.e("chunk-3b8ea58b"),n.e("chunk-2d0e8fe4")]).then(n.bind(null,"8c47"))},{name:"pepfar_regimen_report",path:"/art/report/pepfar/regimens",component:()=>Promise.all([n.e("chunk-c8611e9e"),n.e("chunk-2d0e8fc6")]).then(n.bind(null,"8c38"))},{name:"pepfar_regimen_switch",path:"/art/report/pepfar/regimen_switch",component:()=>Promise.all([n.e("chunk-c8611e9e"),n.e("chunk-2d229b3d")]).then(n.bind(null,"df27"))},{name:"pepfar_tb_prev_report",path:"/art/report/pepfar/tb_prev",component:()=>n.e("chunk-51a01568").then(n.bind(null,"1aa7"))},{name:"pepfar_tx_curr_mmd_report",path:"/art/report/pepfar/tx_cur_mmd",component:()=>Promise.all([n.e("chunk-80b50b94"),n.e("chunk-e523fed2")]).then(n.bind(null,"cca6"))},{name:"pepfar_tx_ml_report",path:"/art/report/pepfar/tx_ml",component:()=>Promise.all([n.e("chunk-80b50b94"),n.e("chunk-2d2219e6")]).then(n.bind(null,"cab4"))},{name:"pepfar_tx_rtt",path:"/art/report/pepfar/tx_rtt",component:()=>Promise.all([n.e("chunk-80b50b94"),n.e("chunk-2d21d9f6")]).then(n.bind(null,"d1a4"))},{name:"pepfar_vl_coverage",path:"/art/report/pepfar/pepfar_vl_coverage",component:()=>n.e("chunk-252498a0").then(n.bind(null,"af8a"))},{name:"sc_arv",path:"/art/report/pepfar/sc_arv",component:()=>Promise.all([n.e("chunk-c8611e9e"),n.e("chunk-2d0aedb1")]).then(n.bind(null,"0c9a"))},{name:"clinic_tx_rrt",path:"/art/report/clinic_tx_rtt",component:()=>Promise.all([n.e("chunk-80b50b94"),n.e("chunk-2d0af6a8")]).then(n.bind(null,"0ddb"))},{name:"clinic_tpt_outcomes",path:"/art/report/clinic_tpt_outcomes",component:()=>n.e("chunk-6b69d832").then(n.bind(null,"1d39"))}],i=n("7a23");const c=e=>(Object(i["pushScopeId"])("data-v-49203e3e"),e=e(),Object(i["popScopeId"])(),e),r=c(()=>Object(i["createElementVNode"])("span",{class:"his-md-text"},"Total visits / incomplete visits: last 5 days",-1)),s=c(()=>Object(i["createElementVNode"])("span",{class:"his-md-text"},"Encounters created today",-1)),l={class:"his-sm-text"},d=c(()=>Object(i["createElementVNode"])("tr",null,[Object(i["createElementVNode"])("th"),Object(i["createElementVNode"])("th",null,"Female"),Object(i["createElementVNode"])("th",null,"Male"),Object(i["createElementVNode"])("th",null,"Me"),Object(i["createElementVNode"])("th",null,"Facility")],-1)),u={class:"encounter-td"},p={class:"other-td"},m={class:"other-td"},h={class:"other-td"},b={class:"other-td"};function g(e,t,n,a,o,c){const g=Object(i["resolveComponent"])("ApexChart"),f=Object(i["resolveComponent"])("ion-col"),_=Object(i["resolveComponent"])("ion-row"),v=Object(i["resolveComponent"])("ion-grid");return Object(i["openBlock"])(),Object(i["createBlock"])(v,null,{default:Object(i["withCtx"])(()=>[Object(i["createVNode"])(_,null,{default:Object(i["withCtx"])(()=>[Object(i["createVNode"])(f,{"size-lg":"6","size-sm":"12"},{default:Object(i["withCtx"])(()=>[r,Object(i["createVNode"])(g,{width:"100%",type:"bar",options:e.options,series:e.series},null,8,["options","series"])]),_:1}),Object(i["createVNode"])(f,{"size-lg":"6","size-sm":"12"},{default:Object(i["withCtx"])(()=>[s,Object(i["createElementVNode"])("table",l,[d,(Object(i["openBlock"])(!0),Object(i["createElementBlock"])(i["Fragment"],null,Object(i["renderList"])(e.rows,(t,n)=>(Object(i["openBlock"])(),Object(i["createElementBlock"])("tr",{key:n},[Object(i["createElementVNode"])("td",u,Object(i["toDisplayString"])(e.getEncounterName(t.encounter)),1),Object(i["createElementVNode"])("td",p,Object(i["toDisplayString"])(t.female),1),Object(i["createElementVNode"])("td",m,Object(i["toDisplayString"])(t.male),1),Object(i["createElementVNode"])("td",h,Object(i["toDisplayString"])(t.me),1),Object(i["createElementVNode"])("td",b,Object(i["toDisplayString"])(t.facility),1)]))),128))])]),_:1})]),_:1})]),_:1})}n("14d9");var f=n("d867"),_=n("156d"),v=n("5a0c"),O=n.n(v),y=n("1c74"),T=n("ae27"),j=n.n(T),k=Object(i["defineComponent"])({data:function(){return{dayjs:O.a,startDate:"",endDate:"",options:{chart:{id:"vuechart-example"},xaxis:{categories:["","","","",""]}},series:[{name:"Total visits",data:[0,0,0,0,0],color:"#7cb5ec"},{name:"Total incomplete visits",data:[0,0,0,0,0],color:"#434348"}],rows:[],encounters:[{"HIV clinic registration":9},{"HIV reception":51},{Vitals:6},{"HIV staging":52},{"HIV clinic consultation":53},{"ART adherence":68},{Treatment:25},{Dispensing:54},{Appointments:7}]}},components:{IonGrid:f["p"],IonRow:f["I"],IonCol:f["m"],ApexChart:j.a},created(){this.rows=this.encounters.map(e=>({encounter:Object.values(e)[0],female:"",male:"",me:"",facility:""}))},mounted(){this.endDate=this.dayjs().subtract(1,"days").format("YYYY-MM-DD"),this.startDate=this.dayjs().subtract(5,"days").format("YYYY-MM-DD"),this.getVisits(),this.getEncounters()},methods:{getVisits:async function(){const e=await _["b"].get(`programs/1/reports/visits?name=visits&start_date=${this.startDate}&end_date=${this.endDate}`);if(e&&200==e.status){const t=await e.json(),n=Object.keys(t),a=[],o=[];n.forEach((e,n)=>{a[n]=t[e].incomplete,o[n]=t[e].complete+t[e].incomplete}),this.series[0].data=[...o],this.series[1].data=[...a];const i=n.map(e=>this.dayjs(e).format("dddd"));this.options={...this.options,xaxis:{categories:[...i]}}}},getEncounterName(e){if(!e)return"";const t=this.encounters.filter(t=>Object.values(t)[0]===e);return Object.keys(t[0])[0]},getEncounters:async function(){const e={encounter_types:[...this.encounters.map(e=>Object.values(e)[0])]},t={all:!0,encounter_types:[...this.encounters.map(e=>Object.values(e)[0])]},n=await _["b"].post(`reports/encounters?date=${y["e"].getSessionDate()}&program_id=${y["e"].getProgramID()}`,e),a=await _["b"].post(`reports/encounters?date=${y["e"].getSessionDate()}&program_id=${y["e"].getProgramID()}`,t);if(n&&a&&200==n.status&&200==a.status){const e=await n.json(),t=await a.json(),o=[];this.encounters.forEach(n=>{const a=Object.values(n)[0];o.push({encounter:a,female:t[a]["F"],male:t[a]["M"],me:e[a]["F"]+e[a]["M"],facility:t[a]["F"]+t[a]["M"]})}),this.rows=[...o]}}}}),I=(n("37ca"),n("d959")),E=n.n(I);const C=E()(k,[["render",g],["__scopeId","data-v-49203e3e"]]);var D=C,N=n("8e8b");const w=[{name:"MoH",icon:"login-logos/Malawi-Coat_of_arms_of_arms.png",defaultFilesIcon:"reports.png",files:[{name:"Cohort / disaggregated",pathName:"moh_cohort"},{name:"Disaggregated",pathName:"moh_disaggregated",condition:()=>!1},{name:"Regimen Distribution (Weight)",pathName:"moh_regimen_weight_distribution"},{name:"Survival analysis",pathName:"moh_survial_analysis"},{name:"TPT new initiations",pathName:"moh_tpt_new_initiations"},{name:"TX CURR MMD",pathName:"moh_tx_curr_mmd"},{name:"Regimen Report",pathName:"moh_regimen_report"}]},{name:"Clinic",icon:"reports.png",defaultFilesIcon:"reports.png",files:[{name:"Active clients with adverse outcomes",pathName:"clinic_archiving_candidates"},{name:"Defaulter list",pathName:"clinic_defaulters_report"},{name:"Regimen Dispensation",pathName:"clinic_regimen_report"},{name:"Lab results",pathName:"clinic_lab_results"},{name:"Regimen switch",pathName:"clinic_regimen_switch"},{name:"Clients due for VL",pathName:"clinic_due_viral_load_report"},{name:"External and Drug Refill clients",pathName:"clinic_external_consultation_report"},{name:"Retention report",pathName:"clinic_retention_report"},{name:"Pregnant Patient",pathName:"clinic_pregnant_patients"},{name:"Missed Appointment",pathName:"clinic_missed_appointments"},{name:"VL results",pathName:"clinic_viral_load"},{name:"Other outcome list",pathName:"clinic_other_outcome_list"},{name:"Regimens and Formulation",pathName:"clinic_regimen_formulation"},{name:"Appointments",pathName:"clinic_appointments"},{name:"Stock card report",pathName:"stock_card_report",condition:()=>N["a"].get("IS_ART_DRUG_MANAGEMENT_ENABLED")},{name:"TX RTT",pathUrl:"/art/report/clinic_tx_rtt"},{name:"TPT Outcomes",pathUrl:"/art/report/clinic_tpt_outcomes"}]},{name:"PEPFAR",icon:"login-logos/PEPFAR.png",defaultFilesIcon:"reports.png",files:[{name:"Defaulter list",pathName:"pepfar_defaulters_report"},{name:"Disaggregated",pathName:"pepfar_disaggregated_report"},{name:"Regimen Report",pathName:"pepfar_regimen_report"},{name:"Regimen Switch",pathName:"pepfar_regimen_switch"},{name:"TB PREV",pathName:"pepfar_tb_prev_report"},{name:"TX CURR MMD",pathName:"pepfar_tx_curr_mmd_report"},{name:"TX ML",pathName:"pepfar_tx_ml_report"},{name:"TX RTT",pathName:"pepfar_tx_rtt"},{name:"Viral Load Coverage",pathName:"pepfar_vl_coverage"},{name:"SC ARV",pathName:"sc_arv"}]}];var S=n("c1e4"),A=n("cc74");function P(e,t){return{name:e,pathUrl:`/preferences?label=${e}&property=${t}`}}const F=[{name:"Drug Management",icon:"drug.png",condition:async()=>S["a"].isAdmin()&&await N["a"].get("IS_ART_DRUG_MANAGEMENT_ENABLED"),files:[{name:"Enter Receipts",pathUrl:"/art/stock/enter"},{name:"Enter Product relocation/Disposal",pathUrl:"/art/stock/move"},{name:"Enter verified physical stock count",pathUrl:"/art/stock/verify"},{name:"Print Barcode",pathUrl:"/drug/print"},{name:"Audit Trail",pathUrl:"/art/stock/trail"},{name:"Stock report",pathUrl:"/art/stock/report"}]},{name:"System Preferences",icon:"hiv-staging.png",condition:()=>S["a"].isAdmin(),files:[{name:"View Systems settings",pathUrl:"/art/preferences"},P("Activate Extended Lab",a["a"].EXTENDED_LABS),P("Activate VL routine check",a["a"].VL_ROUTINE_CHECK),P("Activate Filing Numbers",a["a"].FILING_NUMBERS),P("Activate drug management",a["a"].DRUG_MANAGEMENT),P("Activate Hypertension screening",a["a"].HTN_ENHANCEMENT),P("Activate fast track",a["a"].FAST_TRACK),P("Activate 3HP auto select",a["a"].THREE_HP_AUTO_SELECT),P("Is this a military site?",A["a"].MILITARY_SITE),P("(DATA CLEANING) Exclude External and Drug refill",a["a"].EXCLUDE_EXTERNAL_AND_DRUG_REFILLS),{name:"Target lab",pathUrl:"/art/preferences/target_lab"},{name:"Activate CxCa Screening",pathUrl:"/art/preferences/cervical_cancer_screening"},{name:"Set Hypertension Thresholds",pathUrl:"/art/preferences/bp_thresholds"},{name:"Set Clinic Days",pathUrl:"/art/preferences/clinic_days"},{name:"Set HTN Age",pathUrl:"/art/preferences/htn_age"},{name:"Set Appointment Limit",pathUrl:"/art/preferences/appointment/limit"},{name:"Set Filing Numbers Limit",pathUrl:"/art/preferences/fn/limit"},{name:"Set Clinic Holidays",pathUrl:"/art/preferences/clinic_holidays"}]}];var x=n("4db7"),V=n("23e6"),R=n("b5e4"),B=n("8734");const L=[{id:"hiv clinic registration",name:"Hiv clinic registration",workflowID:"HIV first visits",icon:"registration.png"},{id:"hiv reception",name:"HIV reception",workflowID:"HIV reception visits",icon:"reception.png"},{id:"vitals",name:"Vitals",icon:"vitals.png",taskCompletionChecklist:["Weight"]},{id:"hiv staging",name:"HIV staging",workflowID:"HIV staging visits",icon:"hiv-staging.png"},{id:"hiv clinic consultation",name:"HIV clinic consultation",workflowID:"HIV clinic consultations",taskCompletionChecklist:["Medication orders"],icon:"consultation.png"},{id:"art adherence",name:"ART adherence",workflowID:"ART adherence",icon:"adherence.png"},{id:"treatment",name:"Treatment",workflowID:"Prescriptions",icon:"prescription.png",patientUrl:"/art/encounters/prescriptions"},{id:"fast track assesment",name:"Fast Track assesment",icon:"fast-track.png",condition:()=>N["a"].get("IS_ART_FAST_TRACK_ENABLED"),availableOnActivitySelection:!1},{id:"dispensing",name:"Drug Dispensations",encounterTypeName:"DISPENSING",workflowID:"Drug Dispensations",icon:"dispensing.png",patientUrl:"/art/encounters/dispensation"},{id:"appointment",name:"Manage Appointments",encounterTypeName:"APPOINTMENT",workflowID:"Manage Appointments",icon:"appointment.png",patientUrl:"/art/encounters/appointment"},{id:"patient type",name:"Patient Type",encounterTypeName:"Registration",icon:"patient-type.png",availableOnActivitySelection:!1},{id:"bp_management",name:"bp_management",icon:"dispensing.png",encounterTypeName:"Hypertension management",condition:()=>N["a"].get("IS_ART_HTN_ENABLED"),availableOnActivitySelection:!1},{id:"bp_alert",name:"bp_alert",icon:"dispensing.png",condition:()=>N["a"].get("IS_ART_HTN_ENABLED"),availableOnActivitySelection:!1}],H=[{id:"master_card",name:"Master card",description:"View mastercard",action:({patient:e},t)=>{t.push("/art/mastercard/"+e.patient_id)},icon:"card.png"},{id:"f_number",name:"Filing Number (Print)",description:"Print Patient Filing Number",condition:async({patient:e})=>{const t=new V["a"](e);return await N["a"].get("IS_ART_FILING_NUMBER_ENABLED")&&(t.hasActiveFilingNumber()||t.hasDormantFilingNumber())},action({patient:e}){const t=new x["a"](e.patient_id);return t.printFilingNumberLbl()},icon:"folder.png"},{id:"archive_client",name:"Archive client",description:"Archive a client",action:({patient:e},t)=>{Object(B["a"])(200).then(()=>{Object(R["a"])("Are you sure you want to archive patient?").then(n=>{n&&t.push(`/art/filing_numbers/${e.patient_id}?archive=true`)})})},condition:async({patient:e})=>await N["a"].get("IS_ART_FILING_NUMBER_ENABLED")&&new V["a"](e).hasActiveFilingNumber(),icon:"archive.png"},{id:"assign_filing_number",name:"Assign filing number",description:"Assign a new filing number",condition:async({patient:e})=>{const t=new V["a"](e);return await N["a"].get("IS_ART_FILING_NUMBER_ENABLED")&&(t.hasDormantFilingNumber()||!t.hasActiveFilingNumber())},action:({patient:e},t)=>{Object(B["a"])(200).then(()=>{Object(R["a"])("Are you sure you want to assign a filing number?").then(n=>{n&&t.push(`/art/filing_numbers/${e.patient_id}?assign=true`)})})},icon:"archive.png"},{id:"filing_number_trail",name:"View filing number trail",description:"view trail",action:({patient:e},t)=>{t.push(`/art/filing_numbers/${e.patient_id}?trail=true`)},condition:()=>N["a"].get("IS_ART_FILING_NUMBER_ENABLED"),icon:"folder.png"}];var M=n("50e7"),U=n("7957"),$=n("8158");async function G(e,t="Malawi ART side effects"){const n=await U["a"].getObservations(e,$["a"].getCachedConceptID(t));return n.filter(e=>{try{return e.children[0].value_coded==$["a"].getCachedConceptID("Yes")}catch(t){return!1}})}var z={alertSideEffects:G},Y=n("7def"),J=n("74f4"),W=n("ad60"),q=n("9b7c"),K=n("9283"),X=n("8df6");function Q(e,t,n,a,o,c){const r=Object(i["resolveComponent"])("ion-title"),s=Object(i["resolveComponent"])("ion-button"),l=Object(i["resolveComponent"])("ion-toolbar"),d=Object(i["resolveComponent"])("ion-header"),u=Object(i["resolveComponent"])("ion-label"),p=Object(i["resolveComponent"])("ion-segment-button"),m=Object(i["resolveComponent"])("ion-segment"),h=Object(i["resolveComponent"])("ApexChart"),b=Object(i["resolveComponent"])("ion-content");return Object(i["openBlock"])(),Object(i["createElementBlock"])(i["Fragment"],null,[Object(i["createVNode"])(d,null,{default:Object(i["withCtx"])(()=>[Object(i["createVNode"])(l,null,{default:Object(i["withCtx"])(()=>[Object(i["createVNode"])(r,null,{default:Object(i["withCtx"])(()=>[Object(i["createTextVNode"])(" Stock levels (Consumption rate calculated over a 3 month period) ")]),_:1}),Object(i["createVNode"])(s,{color:"danger",slot:"end",onClick:t[0]||(t[0]=t=>e.closeModal()),class:"ion-margin-end"},{default:Object(i["withCtx"])(()=>[Object(i["createTextVNode"])("X")]),_:1})]),_:1})]),_:1}),Object(i["createVNode"])(l,null,{default:Object(i["withCtx"])(()=>[Object(i["createVNode"])(m,{onIonChange:t[1]||(t[1]=t=>e.segmentChanged(t)),value:e.segment},{default:Object(i["withCtx"])(()=>[Object(i["createVNode"])(p,{value:"paeds"},{default:Object(i["withCtx"])(()=>[Object(i["createVNode"])(u,null,{default:Object(i["withCtx"])(()=>[Object(i["createTextVNode"])("Paeds")]),_:1})]),_:1}),Object(i["createVNode"])(p,{value:"adults"},{default:Object(i["withCtx"])(()=>[Object(i["createVNode"])(u,null,{default:Object(i["withCtx"])(()=>[Object(i["createTextVNode"])("Adults")]),_:1})]),_:1})]),_:1},8,["value"])]),_:1}),Object(i["createVNode"])(b,{class:"ion-padding"},{default:Object(i["withCtx"])(()=>[Object(i["createVNode"])(h,{width:"100%",type:"bar",options:e.options,series:e.series},null,8,["options","series"])]),_:1})],64)}var Z=n("3d6c"),ee=Object(i["defineComponent"])({name:"Modal",components:{ApexChart:j.a,IonContent:f["n"],IonHeader:f["q"],IonTitle:f["S"],IonToolbar:f["T"],IonButton:f["d"],IonSegment:f["J"],IonSegmentButton:f["K"]},methods:{async closeModal(){await f["ab"].dismiss()},getDrugs(){this.paedDrugs=Z["a"].getPaedeatricDrugs(),this.adultDrugs=Z["a"].getAdultDrugs(),this.formatDrugs()},segmentChanged(e){this.segment=e.detail.value,this.formatDrugs()},async formatDrugs(){const e=new Z["a"],t="paeds"===this.segment?this.paedDrugs:this.adultDrugs,n=[];this.series[0].data=[...n],t.forEach(async t=>{const n=await e.getConsumptionRate(t.drugID),a=parseInt(n["stock_level_in_months"]);this.series[0].data.push({x:t.shortName,y:a})})}},created(){this.getDrugs()},data(){return{paedDrugs:[],adultDrugs:[],segment:"paeds",options:{chart:{id:"vuechart-example"},plotOptions:{bar:{borderRadius:4,horizontal:!0,dataLabels:{position:"top"},colors:{ranges:[{from:0,to:2,color:"#ff0000"},{from:2,to:4,color:"#66CDAA"},{from:4,to:1e6,color:"#ffff00"}]}}},dataLabels:{enabled:!0,offsetX:0,style:{fontSize:"12px",colors:["#656565"]}},stroke:{show:!0,width:1,colors:["#fff"]},tooltip:{shared:!0,intersect:!1},grid:{column:{colors:["#FFFFFF","#FFFFFF","green"]}},yaxis:{min:1,max:9,fillColor:"#ffff00",tickAmount:1},xaxis:{fillColor:"#ffff00"}},series:[{name:"Available",data:[]}]}}});const te=E()(ee,[["render",Q]]);var ne=te,ae=n("2ef0"),oe=n("0fa1"),ie=n("276d");const ce={ART_AUTO_3HP_SELECTION:{get:()=>a["b"].threeHPAutoSelectEnabled(),canReloadCache:e=>!Object(ie["b"])()||"boolean"!=typeof e.state},IS_ART_FAST_TRACK_ENABLED:{get:()=>a["b"].fastTrackEnabled(),canReloadCache:e=>!Object(ie["b"])()||"boolean"!=typeof e.state},IS_ART_HTN_ENABLED:{get:()=>a["b"].htnEnabled(),canReloadCache:e=>!Object(ie["b"])()||"boolean"!=typeof e.state},IS_ART_FILING_NUMBER_ENABLED:{get:()=>a["b"].filingNumbersEnabled(),canReloadCache:e=>!Object(ie["b"])()||"boolean"!=typeof e.state},ART_FILING_NUMBER_PREFIX:{get:()=>a["b"].filingNumberPrefix(),canReloadCache:e=>!Object(ie["b"])()||"string"!=typeof e.state},IS_ART_DRUG_MANAGEMENT_ENABLED:{get:()=>a["b"].drugManagementEnabled(),canReloadCache:e=>!Object(ie["b"])()||"boolean"!=typeof e.state},GET_LAB_ORDERS_WITH_GIVEN_RESULT_STATUS:{get:async e=>{const t=(await N["a"].get("PATIENT_LAB_ORDERS",{patientID:e.patientID})).map(async e=>{const t={...e,result_given:!1},n=e.tests.filter(e=>null!=e.result).map(e=>e.result).reduce((e,t)=>[...e,...t],[]).reduce((e,t)=>t.id,null);try{t["result_given"]=n?await(await U["a"].get(n)).children.reduce(async(e,t)=>await $["a"].getConceptID("Result Given to Client")===t.concept_id&&"Yes"===await $["a"].getConceptName(t.value_coded)?"Yes":e,"No"):"N/A"}catch(a){console.error(a)}return t});return await Promise.all(t)},canReloadCache:()=>!0}};async function re(e,t,n){const a=new J["a"](e);await a.enrollProgram();const o=new X["a"](e,-1);o.setPatientType(t),o.setLocationName(n),await o.createEncounter(),await o.save()}async function se(){if(await N["a"].get("IS_ART_DRUG_MANAGEMENT_ENABLED")){const e=await f["ab"].create({component:ne,cssClass:"large-modal",backdropDismiss:!1});e.present(),await e.onDidDismiss()}}function le(e,t=!0){const n=e.tests[0],a=n.result[0],o=t?"<br> Result date: &nbsp; "+K["b"].toStandardHisDisplayFormat(a.date):"",i=q["a"].isHighViralLoadResult(a)?'(<b style="color: #eb445a;">High</b>)':"";return`${n.name} &nbsp; ${a.value_modifier}${a.value} ${i} ${o}`}async function de(e=""){await Object(oe["d"])(L),"HomePage"===e&&await se()}async function ue(e,t,n,o,i){return await re(e,t.patient_type,t.location),"Yes"===t.relationship&&Object(oe["a"])(e,{from:"Patient Registration",to:"/guardian/registration/"+e}),await a["b"].filingNumbersEnabled()&&"New patient"===t.patient_type&&Object(oe["a"])(e,{from:"Yes"===(null===t||void 0===t?void 0:t.relationship)?"Guardian Registration":"Patient Registration",to:`/art/filing_numbers/${e}?assign=true`}),Object(oe["b"])(e,o,i),!0}async function pe(e){const t=await z.alertSideEffects(e.getID()),n=await e.getBMI();return[{label:"Side effects",value:""+t.length},{label:"Patient BMI is",value:""+n.result}]}function me(e){let t={};return[{label:"ART- Start Date",value:"...",init:async()=>{t=await W["a"].getProgramInformation(e)},staticValue:()=>{const[e,n,a]=t.art_start_date.split("/"),o=t.art_start_date.match(/n\/a/i)?"":`(${O()(y["e"].getSessionDate()).diff(`${a}-${n}-${e}`,"months")} Month(s))`;return`${t.art_start_date} ${o}`}},{label:"ARV Number",value:"...",staticValue:()=>`${t.arv_number} | Regimen: ${t.current_regimen}`},{label:"File Number",value:"...",staticValue:()=>t.filing_number.number},{label:"Current Outcome",value:"...",staticValue:()=>t.current_outcome}]}async function he(e){const t=(await N["a"].get("PATIENT_LAB_ORDERS",{patientID:e})).reduce((e,t)=>{const n=t.tests.filter(e=>e.name.match(/HIV/i)&&!Object(ae["isEmpty"])(e.result)).map(e=>null===e||void 0===e?void 0:e.result);return e.concat(n.reduce((e,t)=>e.concat(t),[]))},[]).map(e=>{const t=q["a"].isHighViralLoadResult(e)?'(<b style="color: #eb445a;">High</b>)':"";return{label:`${e.indicator.name} &nbsp ${e.value_modifier}${e.value} ${t}`,value:K["b"].toStandardHisDisplayFormat(e.date),other:{wrapTxt:!0}}}).sort((e,t)=>new Date(e.value)>new Date(t.value)?-1:1);if(t.length>=2){const[e,n]=t;return[e,n]}return t}function be(e){N["a"].invalidate("PATIENT_LAB_ORDERS");const t=Object(ae["isEmpty"])(e)?-1:null===e||void 0===e?void 0:e.getID();let n=null;return{"PROGRAM INFORMATION":()=>[{label:"Next Task",value:"...",asyncValue:async()=>{const e=await M["a"].getNextTaskParams(t);return e.name?""+e.name:"NONE"}},{label:"ART Duration",value:"...",init:async()=>{n=await W["a"].getProgramInformation(t)},asyncValue:async()=>n.art_duration},{label:"Fast Track",value:"...",asyncValue:async()=>{const e=await W["a"].getFastTrackStatus(t);return!0===e["Continue FT"]?"Yes":"No"}},{label:"Next Appointment",value:"...",asyncValue:async()=>{const e=await U["a"].getFirstValueDatetime(t,"appointment date");return e?K["b"].toStandardHisDisplayFormat(e):""}}],"PATIENT IDENTIFIERS":()=>[{label:"ARV Number",value:"...",staticValue:()=>e.getArvNumber()},{label:"NPID",value:"...",staticValue:()=>e.getNationalID()},{label:"Filing Number",value:"...",staticValue:()=>e.getFilingNumber()}],ALERTS:()=>[{label:"Side effects",value:"...",asyncValue:async()=>(await z.alertSideEffects(t)).length},{label:"Patient BMI is",value:"...",asyncValue:async()=>{const t=await e.getBMI();return t.result}}],"LAB ORDERS":async()=>{const e=[];return await N["a"].get("PATIENT_LAB_ORDERS",{patientID:t}).then(t=>{const n=q["a"].getViralLoadOrders(t);for(let a=0;a<2&&a<n.length;a++)e.push({value:le(n[a]),label:""})}),e},OUTCOME:()=>[{label:"Current Outcome",value:"...",staticValue:()=>n.current_outcome||"N/A"}],GUARDIAN:async()=>{const e=[],n=await Y["a"].getGuardianDetails(t)||[];return n.length?(n.forEach(t=>{e.push({label:t.name,value:t.relationshipType}),e.push({label:"Phone",value:t.phoneNumber})}),e):[]}}}const ge={init:de,programID:1,applicationName:"ART",applicationIcon:"aids.png",applicationDescription:"HIV Client management app",appRoutes:o,primaryPatientActivites:L,secondaryPatientActivites:H,globalPropertySettings:F,programReports:w,appStore:ce,homeOverviewComponent:D,confirmationSummary:be,patientProgramInfoData:me,getPatientDashboardAlerts:pe,onRegisterPatient:ue,getPatientDashboardLabOrderCardItems:he,programPatientIdentifiers:{"ARV Number":{id:4,name:"ARV Number",isPrimary:!0,useForSearch:!0,prefix:async()=>await N["a"].get("SITE_PREFIX")+"-ARV-"},"Filing number":{id:17,name:"Active Filing number",isPrimary:!1,useForSearch:!0,prefix:async()=>{try{const[e]=(await N["a"].get("ART_FILING_NUMBER_PREFIX")).split(",");return e}catch(e){return console.warn(e),""}},visible:()=>N["a"].get("IS_ART_FILING_NUMBER_ENABLED")},"Archived filing number":{id:18,name:"Archived filing number",isPrimary:!1,useForSearch:!0,prefix:async()=>{try{const[e,t]=(await N["a"].get("ART_FILING_NUMBER_PREFIX")).split(",");return t}catch(e){return console.warn(e),""}},visible:()=>N["a"].get("IS_ART_FILING_NUMBER_ENABLED")}}};var fe=ge;const _e={class:"los-overview"};function ve(e,t,n,a,o,c){const r=Object(i["resolveComponent"])("report-table");return Object(i["openBlock"])(),Object(i["createElementBlock"])("div",_e,[Object(i["createVNode"])(r,{rows:e.rows,columns:e.columns},null,8,["rows","columns"])])}var Oe=n("80e3"),ye=n("9ceb");class Te extends y["e"]{constructor(){super()}static async overviewStats(){const e={},t=await this.ordersMade("ordered"),n=await this.ordersMade("drawn");return t.forEach(t=>{t.name in e||(e[t.name]={ordered:0}),e[t.name].ordered+=1}),n.forEach(t=>{t.name in e||(e[t.name]={drawn:0}),e[t.name].drawn||(e[t.name].drawn=0),e[t.name].drawn+=1}),e}static ordersMade(e){return super.getJson("orders_made",{date:super.getSessionDate(),status:e,start_date:super.getSessionDate(),end_date:super.getSessionDate(),program_id:super.getProgramID()})}}var je=Object(i["defineComponent"])({components:{ReportTable:Oe["a"]},data:()=>({rows:[],columns:[[ye["a"].thTxt("Test"),ye["a"].thTxt("Ordered"),ye["a"].thTxt("Drawn")]]}),created(){this.setRows()},methods:{async setRows(){const e=await Te.overviewStats();if(!Object(ae["isEmpty"])(e))for(const t in e){const n=e[t];this.rows.push([ye["a"].td(t),ye["a"].td(n.ordered),ye["a"].td(n.drawn)])}}}});n("133d");const ke=E()(je,[["render",ve],["__scopeId","data-v-a517e22e"]]);var Ie=ke;const Ee=Object(i["createElementVNode"])("p",null,null,-1),Ce=Object(i["createElementVNode"])("p",null,null,-1),De={style:{overflowX:"auto",height:"84%"}},Ne=Object(i["createElementVNode"])("b",null,"Select specimen",-1);function we(e,t,n,a,o,c){const r=Object(i["resolveComponent"])("ion-label"),s=Object(i["resolveComponent"])("ion-segment-button"),l=Object(i["resolveComponent"])("ion-segment"),d=Object(i["resolveComponent"])("report-table"),u=Object(i["resolveComponent"])("ion-title"),p=Object(i["resolveComponent"])("ion-toolbar"),m=Object(i["resolveComponent"])("ion-header"),h=Object(i["resolveComponent"])("ion-item"),b=Object(i["resolveComponent"])("ion-list"),g=Object(i["resolveComponent"])("ion-col"),f=Object(i["resolveComponent"])("ion-chip"),_=Object(i["resolveComponent"])("ion-row"),v=Object(i["resolveComponent"])("ion-content"),O=Object(i["resolveComponent"])("ion-button"),y=Object(i["resolveComponent"])("ion-footer"),T=Object(i["resolveComponent"])("ion-page"),j=Object(i["resolveComponent"])("ion-modal");return Object(i["openBlock"])(),Object(i["createElementBlock"])(i["Fragment"],null,[Ee,Object(i["createVNode"])(l,{scrollable:"",value:e.activeTab,class:"ion-justify-content-center"},{default:Object(i["withCtx"])(()=>[Object(i["createVNode"])(s,{value:"openOrders",onClick:t[0]||(t[0]=t=>e.activeTab="openOrders")},{default:Object(i["withCtx"])(()=>[Object(i["createVNode"])(r,{class:"his-lg-text"},{default:Object(i["withCtx"])(()=>[Object(i["createTextVNode"])("Open")]),_:1})]),_:1}),Object(i["createVNode"])(s,{class:"his-lg-text",value:"drawnOrders",onClick:t[1]||(t[1]=t=>e.activeTab="drawnOrders")},{default:Object(i["withCtx"])(()=>[Object(i["createVNode"])(r,null,{default:Object(i["withCtx"])(()=>[Object(i["createTextVNode"])("Drawn")]),_:1})]),_:1})]),_:1},8,["value"]),Ce,Object(i["createElementVNode"])("div",De,["openOrders"===e.activeTab?(Object(i["openBlock"])(),Object(i["createBlock"])(d,{key:0,config:{showIndex:!1},rows:e.labOrderRows,columns:e.openColumns},null,8,["rows","columns"])):Object(i["createCommentVNode"])("",!0),"drawnOrders"===e.activeTab?(Object(i["openBlock"])(),Object(i["createBlock"])(d,{key:1,config:{showIndex:!1},rows:e.drawnOrders,columns:e.drawnColumns},null,8,["rows","columns"])):Object(i["createCommentVNode"])("",!0)]),Object(i["createVNode"])(j,{"is-open":e.showSpecimenModal,class:"custom-modal"},{default:Object(i["withCtx"])(()=>[Object(i["createVNode"])(T,null,{default:Object(i["withCtx"])(()=>[Object(i["createVNode"])(m,null,{default:Object(i["withCtx"])(()=>[Object(i["createVNode"])(p,null,{default:Object(i["withCtx"])(()=>[Object(i["createVNode"])(u,null,{default:Object(i["withCtx"])(()=>[Ne]),_:1})]),_:1})]),_:1}),Object(i["createVNode"])(v,{class:"ion-padding"},{default:Object(i["withCtx"])(()=>[Object(i["createVNode"])(_,null,{default:Object(i["withCtx"])(()=>[Object(i["createVNode"])(g,null,{default:Object(i["withCtx"])(()=>[Object(i["createVNode"])(b,null,{default:Object(i["withCtx"])(()=>[(Object(i["openBlock"])(!0),Object(i["createElementBlock"])(i["Fragment"],null,Object(i["renderList"])(e.specimens,(t,n)=>(Object(i["openBlock"])(),Object(i["createBlock"])(h,{key:n,color:e.selectedSpecimen.name===t.name?"primary":"",onClick:n=>e.selectedSpecimen=t},{default:Object(i["withCtx"])(()=>[Object(i["createVNode"])(r,null,{default:Object(i["withCtx"])(()=>[Object(i["createTextVNode"])(Object(i["toDisplayString"])(t.name),1)]),_:2},1024)]),_:2},1032,["color","onClick"]))),128))]),_:1})]),_:1}),Object(i["createVNode"])(g,null,{default:Object(i["withCtx"])(()=>[Object(i["createVNode"])(b,null,{default:Object(i["withCtx"])(()=>[(Object(i["openBlock"])(!0),Object(i["createElementBlock"])(i["Fragment"],null,Object(i["renderList"])(e.order.tests,(e,t)=>(Object(i["openBlock"])(),Object(i["createBlock"])(h,{lines:"none",key:t},{default:Object(i["withCtx"])(()=>[Object(i["createVNode"])(f,{color:"success"},{default:Object(i["withCtx"])(()=>[Object(i["createTextVNode"])("Test: "),Object(i["createElementVNode"])("b",null,Object(i["toDisplayString"])(e.name),1)]),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1})]),_:1})]),_:1}),Object(i["createVNode"])(y,null,{default:Object(i["withCtx"])(()=>[Object(i["createVNode"])(p,null,{default:Object(i["withCtx"])(()=>[Object(i["createVNode"])(O,{color:"danger",slot:"start",onClick:t[2]||(t[2]=t=>{e.showSpecimenModal=!1,e.selectedSpecimen={}})},{default:Object(i["withCtx"])(()=>[Object(i["createTextVNode"])(" Close ")]),_:1}),Object(i["createVNode"])(O,{disabled:!e.selectedSpecimen.name,color:"success",slot:"end",onClick:t[3]||(t[3]=()=>{e.showSpecimenModal=!0,e.drawOrder()})},{default:Object(i["withCtx"])(()=>[Object(i["createTextVNode"])(" Submit ")]),_:1},8,["disabled"])]),_:1})]),_:1})]),_:1})]),_:1},8,["is-open"])],64)}var Se=n("9c73");async function Ae(e,t=[]){const n=await Object(R["a"])("Are you sure you want to void?");if(!n)return;let a=[{text:"Mistake/ Wrong Entry",role:"Mistake/ Wrong Entry"},{text:"Duplicate",role:"Duplicate"},{text:"System Error",role:"System Error"},{text:"Cancel",role:"cancel"}];Object(ae["isEmpty"])(t)||(a=t.map(e=>({text:e,role:e})),a.push({text:"Cancel",role:"Cancel"}));const o=await f["V"].create({header:"Are you sure you want to void this Encounter?",subHeader:"Please specify reason for voiding this encounter",mode:"ios",buttons:a});o.present();const{role:i}=await o.onDidDismiss();"cancel"!=i&&e(i)}const Pe={style:{background:"#f1f1f1",color:"#333",fontSize:"1.1rem !important"}};var Fe=Object(i["defineComponent"])({components:{IonTitle:f["S"],IonCol:f["m"],IonRow:f["I"],IonButton:f["d"],IonList:f["y"],IonFooter:f["o"],IonToolbar:f["T"],IonHeader:f["q"],IonItem:f["w"],IonChip:f["l"],IonModal:f["C"],IonContent:f["n"],IonPage:f["D"],ReportTable:Oe["a"],IonSegment:f["J"],IonLabel:f["x"],IonSegmentButton:f["K"]},data:()=>({initiated:!1,showSpecimenModal:!1,specimens:[],order:{},selectedSpecimen:{},service:{},activeTab:"openOrders",drawnColumns:[[ye["a"].thTxt("Accession #",Pe),ye["a"].thTxt("Test",Pe),ye["a"].thTxt("Actions",Pe)]],openColumns:[[ye["a"].thTxt("Accession #",Pe),ye["a"].thTxt("Test",Pe),ye["a"].thTxt("Reason for test",Pe),ye["a"].thTxt("Drawn",Pe),ye["a"].thTxt("Void",Pe)]],drawnOrdersData:[],openOrdersData:[],drawnOrders:[],labOrderRows:[]}),watch:{visitDate:{async handler(e){this.initiated||(await this.init(),this.initiated=!0),e&&this.activeTab&&(this.drawnOrders=this.getdrawnOrders(this.drawnOrdersData.filter(t=>this.toDate(t.order_date)===e)),this.labOrderRows=this.getLabOrderRows(this.openOrdersData.filter(t=>this.toDate(t.order_date)===e)))},immediate:!0}},methods:{async init(){this.service=new Se["a"](this.patient.getID()),this.openOrdersData=await this.service.getOrders("ordered"),this.drawnOrdersData=await this.service.getOrders("drawn")},toDate(e){return K["b"].toStandardHisFormat(e)},removeLabOrderRow(e){this.labOrderRows=this.labOrderRows.filter(t=>{var n,a;return(null===(n=t[0])||void 0===n||null===(a=n.value)||void 0===a?void 0:a.orderID)!=e})},async drawOrder(){try{const e=await this.service.updateOrderSpecimen(this.order.order_id,this.selectedSpecimen.concept_id);if(!e)throw"Unable to draw sample";this.drawnOrders=this.drawnOrders.concat(this.getdrawnOrders([e])),this.removeLabOrderRow(this.order.order_id),this.showSpecimenModal=!1,this.service.printSpecimenLabel(this.order.order_id)}catch(e){console.error(e),Object(R["c"])(""+e)}},getLabOrderRows(e){return e.map(e=>[ye["a"].td(e.accession_number,{value:{orderID:e.order_id}}),ye["a"].td(e.tests.map(e=>e.name).join(",")),ye["a"].td(e.reason_for_test.name||"N/A"),ye["a"].tdBtn("Draw",async()=>{this.order=e,this.showSpecimenModal=!0,this.specimens=await Se["a"].getSpecimensForTests(e.tests)},{},"success"),ye["a"].tdBtn("Void",async()=>{Ae(async t=>{try{await this.service.voidOrder(e.order_id,t),this.removeLabOrderRow(e.order_id)}catch(n){Object(R["c"])(""+n)}},["Duplicate order","Wrong client"])},{},"danger")])},getdrawnOrders(e){return e.map(e=>[ye["a"].td(e.accession_number),ye["a"].td(e.tests.map(e=>e.name).join(",")),ye["a"].tdBtn("Print",()=>this.service.printSpecimenLabel(e.order_id))])}},props:{patient:{type:Object,required:!0},visitDate:{type:String}}});const xe=E()(Fe,[["render",we]]);var Ve=xe;const Re=[{id:"draw samples",name:"Draw Samples",icon:"social_history.png",action:({patient:e},t)=>{t.push(`/los/forms/order/${e.patient_id}?type=DRAW_SAMPLES`)}}];var Be=[{name:"order tests",path:"/los/forms/order/:patient_id",component:()=>n.e("chunk-3235309e").then(n.bind(null,"fabb"))},{name:"Tests requested report",path:"/los/report/tests/requests",component:()=>Promise.all([n.e("chunk-3818227b"),n.e("chunk-2d2297b9")]).then(n.bind(null,"de46"))},{name:"Test results report",path:"/los/report/tests/results",component:()=>Promise.all([n.e("chunk-3818227b"),n.e("chunk-2d226ccc")]).then(n.bind(null,"e9ce"))}];const Le={programID:23,applicationName:"LOS",applicationIcon:"order.png",applicationDescription:"Lab Order System",appRoutes:Be,primaryPatientActivites:Re,secondaryPatientActivites:[],globalPropertySettings:[],homeOverviewComponent:Ie,customPatientDashboardContentComponent:Ve,confirmationSummary:e=>({"PATIENT IDENTIFIERS":()=>[{label:"NPID",value:e.getNationalID()}],"LAB ORDERS":async()=>{const t=await q["a"].getOrders(e.getID());return t.map(e=>({label:e.specimen.name,value:`${e.accession_number} - ${K["b"].toStandardHisDisplayFormat(e.order_date)}`}))}}),programReports:[{name:"Clinical",icon:"reports.png",defaultFilesIcon:"reports.png",files:[{name:"Test requested",pathUrl:"/los/report/tests/requests"},{name:"Test results",pathUrl:"/los/report/tests/results"}]}]};var He=Le;function Me(e,t,n,a,o,c){const r=Object(i["resolveComponent"])("opd-stat-card"),s=Object(i["resolveComponent"])("ion-col"),l=Object(i["resolveComponent"])("ion-row"),d=Object(i["resolveComponent"])("opd-stat-chart"),u=Object(i["resolveComponent"])("syndromic-stat-chart"),p=Object(i["resolveComponent"])("ion-grid");return Object(i["openBlock"])(),Object(i["createBlock"])(p,null,{default:Object(i["withCtx"])(()=>[Object(i["createVNode"])(l,null,{default:Object(i["withCtx"])(()=>[(Object(i["openBlock"])(!0),Object(i["createElementBlock"])(i["Fragment"],null,Object(i["renderList"])(e.patientSummaryStats,e=>(Object(i["openBlock"])(),Object(i["createBlock"])(s,{key:e.label},{default:Object(i["withCtx"])(()=>{var t;return[Object(i["createVNode"])(r,{label:e.label,value:e.value,color:null!==(t=e.color)&&void 0!==t?t:""},null,8,["label","value","color"])]}),_:2},1024))),128))]),_:1}),Object(i["createVNode"])(l,null,{default:Object(i["withCtx"])(()=>[Object(i["createVNode"])(s,null,{default:Object(i["withCtx"])(()=>[Object(i["createVNode"])(d,{series:e.accumulativeVisits.visits,categories:e.accumulativeVisits.days},null,8,["series","categories"])]),_:1}),Object(i["createVNode"])(s,null,{default:Object(i["withCtx"])(()=>[Object(i["createVNode"])(u,{categories:e.AccumulativePatietRespiratoryComplaints.categories,series:e.AccumulativePatietRespiratoryComplaints.series},null,8,["categories","series"])]),_:1})]),_:1})]),_:1})}function Ue(e,t,n,a,o,c){const r=Object(i["resolveComponent"])("ion-card-subtitle"),s=Object(i["resolveComponent"])("ion-spinner"),l=Object(i["resolveComponent"])("ion-card-content"),d=Object(i["resolveComponent"])("ion-card");return Object(i["openBlock"])(),Object(i["createBlock"])(d,{style:Object(i["normalizeStyle"])(e.bgColor)},{default:Object(i["withCtx"])(()=>[Object(i["createVNode"])(l,null,{default:Object(i["withCtx"])(()=>[Object(i["createVNode"])(r,null,{default:Object(i["withCtx"])(()=>[Object(i["createTextVNode"])(Object(i["toDisplayString"])(e.label),1)]),_:1}),-1===e.value?(Object(i["openBlock"])(),Object(i["createBlock"])(r,{key:0},{default:Object(i["withCtx"])(()=>[Object(i["createVNode"])(s,{name:"crescent"})]),_:1})):(Object(i["openBlock"])(),Object(i["createBlock"])(r,{key:1},{default:Object(i["withCtx"])(()=>[Object(i["createTextVNode"])(Object(i["toDisplayString"])(e.value),1)]),_:1}))]),_:1})]),_:1},8,["style"])}var $e=Object(i["defineComponent"])({props:{label:String,value:Number,color:String},components:{IonCard:f["f"],IonCardContent:f["g"],IonCardSubtitle:f["i"],IonSpinner:f["O"]},setup(e){var t;return{bgColor:"background-color: "+(null!==(t=e.color)&&void 0!==t?t:"")}}});n("985a");const Ge=E()($e,[["render",Ue],["__scopeId","data-v-5ce582b2"]]);var ze=Ge;function Ye(e,t,n,a,o,c){const r=Object(i["resolveComponent"])("ApexChart");return Object(i["openBlock"])(),Object(i["createBlock"])(r,{width:"100%",height:"350px",type:"bar",options:e.options,series:e.series},null,8,["options","series"])}var Je=Object(i["defineComponent"])({components:{ApexChart:j.a},props:{categories:Array,series:Array},setup(e){const t=Object(i["ref"])({chart:{height:"auto",animations:{enabled:!0,easing:"easeinout",speed:800,animateGradually:{enabled:!0,delay:150},dynamicAnimation:{enabled:!0,speed:350}},toolbar:{show:!1}},title:{text:"New registered , Returning and Referred clients",margin:20,align:"center",style:{fontWeight:"regular"}},subtitle:{text:"For the past 12 months",align:"center",margin:10},xaxis:{categories:e.categories},yaxis:{min:0,forceNiceScale:!0,title:{text:"Number of clients"}},noData:{text:"Loading data. Please wait...",align:"center",verticalAlign:"middle",offsetX:0,offsetY:0,style:{color:"#000000",fontSize:"30px",fontFamily:"Helvetica"}}});return{options:t}}});const We=E()(Je,[["render",Ye]]);var qe=We;function Ke(e,t,n,a,o,c){const r=Object(i["resolveComponent"])("ApexChart");return Object(i["openBlock"])(),Object(i["createBlock"])(r,{width:"99%",height:"350px",type:"area",options:e.options,series:e.series},null,8,["options","series"])}var Xe=Object(i["defineComponent"])({components:{ApexChart:j.a},props:{categories:Array,series:Array},setup(e){const t=Object(i["ref"])({chart:{height:"auto",animations:{enabled:!0,easing:"easeinout",speed:800,animateGradually:{enabled:!0,delay:150},dynamicAnimation:{enabled:!0,speed:350}},toolbar:{show:!1}},title:{text:"Influenza Like Illness , Respiratory",margin:20,align:"center",style:{fontWeight:"regular"}},subtitle:{text:"For the past 12 months",align:"center",margin:10},xaxis:{categories:e.categories},yaxis:{min:0,forceNiceScale:!0,title:{text:"Number of clients"}},noData:{text:"Loading data. Please wait...",align:"center",verticalAlign:"middle",offsetX:0,offsetY:0,style:{color:"#000000",fontSize:"30px",fontFamily:"Helvetica"}}});return{options:t}}});const Qe=E()(Xe,[["render",Ke]]);var Ze=Qe;function et(e){return e.charAt(0).toUpperCase()+e.slice(1)}var tt={capitalizeFirstLetter:et};class nt extends y["e"]{constructor(){super()}static getStatistics(){return super.getJsonSWR("dashboard_stats",{date:super.getSessionDate(),program_id:super.getProgramID()})}static getTodaysPatientVisits(e){const t=Object.keys(e);let n=0;const a=[];return t.forEach(t=>{a.push({label:tt.capitalizeFirstLetter(t.replace("_"," ")),value:e[t],color:"lightyellow"}),n+=e[t]}),a.push({label:"Total",value:n,color:"yellowgreen"}),a}static getAccumulativePatientVisits(e){const t=Object.keys(e),n=Object.keys(e[t[0]]),a=[],o=[];for(const i in t){const c=[];for(const o in n){const r=e[t[i]][n[o]].start_date,s=O()(r).format("MMM/YYYY");s!==a[o]&&a.push(s),c.push(e[t[i]][n[o]].count)}o.push({name:tt.capitalizeFirstLetter(t[i]),data:c})}return{days:a,visits:o}}static getRespiratory(){return super.getJsonSWR("/dashboard_stats_for_syndromic_statistics",{date:super.getSessionDate(),program_id:super.getProgramID()})}static getAccumulativePatietRespiratoryComplaints(e){let t=[];const n=e,a=[],o=[],i=[];let c=[];const r=[{name:"Influenza Like Illness ",data:[0,0,0,0,0,0,0,0,0,0,0,0,0]},{name:"Respiratory",data:[0,0,0,0,0,0,0,0,0,0,0,0,0]}];for(let d in n){const e=n[d];for(d in e)t.push(parseInt(d));break}t=t.sort((e,t)=>e-t);const s=["ILI","Respiratory"],l={};for(let d=0;d<t.length;d++){const e=n[s[0]][t[d]].start_date,o=O()(e).format("MMM/YYYY");a.push(o)}for(let d=0;d<a.length;d++){for(const e in n){const t=n[e];for(const c in t){const t=n[e][c].start_date,r=O()(t).format("MMM/YYYY");r==a[d]&&(void 0==l[e]&&(l[e]=[]),"ILI"==e&&o.push(n[e][c].count),"Respiratory"==e&&i.push(n[e][c].count))}}r[0].data=[...o],r[1].data=[...i],c=[...a]}return{categories:c,series:r}}}var at=Object(i["defineComponent"])({components:{OpdStatCard:ze,OpdStatChart:qe,IonGrid:f["p"],IonRow:f["I"],IonCol:f["m"],SyndromicStatChart:Ze},setup(){const e=nt.getStatistics(),t=Object(i["computed"])(()=>{var t;return e.value?nt.getTodaysPatientVisits(null===(t=e.value)||void 0===t?void 0:t.top):[{label:"Registered today",value:-1,color:"lightyellow"},{label:"Returning today",value:-1,color:"lightyellow"},{label:"Referred today",value:-1,color:"lightyellow"},{label:"Total",value:-1,color:"yellowgreen"}]}),n=Object(i["computed"])(()=>{var t;return e.value?nt.getAccumulativePatientVisits(null===(t=e.value)||void 0===t?void 0:t.down):{days:[],visits:[]}}),a=nt.getRespiratory(),o=Object(i["computed"])(()=>{var e;return a.value?nt.getAccumulativePatietRespiratoryComplaints(null===(e=a.value)||void 0===e?void 0:e.down):{categories:[],series:[]}});return{patientSummaryStats:t,accumulativeVisits:n,AccumulativePatietRespiratoryComplaints:o}}});n("e897");const ot=E()(at,[["render",Me],["__scopeId","data-v-8f1b8bca"]]);var it=ot;const ct=[{id:"patient registration",name:"Patient registration",icon:"attributes.png"},{id:"vitals",name:"Vitals",icon:"vitals.png"},{id:"presenting complaints",name:"Presenting complaints",icon:"complaints.png"},{id:"hiv status",name:"HIV STatus",icon:"aids.png",encounterTypeName:"update hiv status",availableOnActivitySelection:!1},{id:"outpatient diagnosis",name:"Outpatient diagnosis",icon:"diagnosis.png"},{id:"outcome status",name:"Outcome status",icon:"outcomes.png",availableOnActivitySelection:!1},{id:"lab orders",name:"Lab orders",icon:"clinical-notes.png",availableOnActivitySelection:!1,action:({patient:e},t)=>{t.push(`/los/forms/order/${e.patient_id}?type=DRAW_SAMPLES`)}},{id:"lab results",name:"Lab results",icon:"enter.png",availableOnActivitySelection:!1,action:({patient:e},t)=>{t.push({path:"/lab/results/"+e.patient_id})}},{id:"OPD social history",name:"OPD social history",icon:"medical-report.png",availableOnActivitySelection:!1},{id:"prescription",name:"Prescription",encounterTypeName:"Treatment",icon:"drugs-given.png"},{id:"dispensation",name:"Dispensation",workflowID:"Dispensing",icon:"dispensing.png",availableOnActivitySelection:!1}],rt=[{id:"radiology examination",name:"radiology examination",icon:"radiology_types.png"}],st=["Queen Elizabeth Central Hospital","Kamuzu Central Hospital","Mzuzu Central Hospital","Zomba Central Hospital"];function lt(){for(const e of st)if(e==y["e"].getLocationName())return!0;return!1}const dt=[{name:"MoH",icon:"login-logos/Malawi-Coat_of_arms_of_arms.png",defaultFilesIcon:"reports.png",condition:()=>!0,files:[{name:"LA report",pathName:"moh_la",condition:()=>!1},{name:"Drug report",pathName:"moh_drug",condition:()=>!1},{name:"Malaria report",pathName:"moh_malaria",condition:()=>!1},{name:"IPT",pathName:"moh_ipt",condition:()=>!1},{name:"IDSR Weekley Report",pathName:"idsr_weekly"},{name:"IDSR Monthly Report",pathName:"idsr_monthly"},{name:"HMIS 15 Report",pathName:"hmis_15",condition:()=>!lt()},{name:"HMIS 17 Report",pathName:"hmis_17",condition:()=>lt()}]},{name:"Clinic",icon:"reports.png",defaultFilesIcon:"reports.png",files:[{name:"Diagnosis by address",pathName:"clinic_diagnosis_by_address"},{name:"Diagnosis",pathName:"clinic_diagnosis"},{name:"Registration report",pathName:"clinic_registration"},{name:"LA report",pathName:"clinic_la"},{name:"Cases seen report",pathName:"clinic_cases_seen"},{name:"Mental health report",pathName:"clinic_mental_health"},{name:"Drugs (dispensed without prescription)",pathName:"clinic_drugs_given"},{name:"Drugs (prescribed and dispensed)",pathName:"clinic_drugs"},{name:"With NIDs",pathName:"clinic_with_nids"}]}];var ut=[{name:"patient registration",path:"/opd/encounters/registration/:patient_id",component:()=>n.e("chunk-75953fe1").then(n.bind(null,"c751"))},{name:"hiv status",path:"/opd/encounters/hiv-status/:patient_id",component:()=>n.e("chunk-388cc6a8").then(n.bind(null,"8652"))},{name:"vitals",path:"/opd/encounters/vitals/:patient_id",component:()=>n.e("chunk-25532402").then(n.bind(null,"ab49"))},{name:"outpatient diagnosis",path:"/opd/encounters/diagnosis/:patient_id",component:()=>n.e("chunk-74d31e01").then(n.bind(null,"a16a6"))},{name:"outcome status",path:"/opd/encounters/outcome-status/:patient_id",component:()=>n.e("chunk-753a9bc9").then(n.bind(null,"80ff"))},{name:"OPD social history",path:"/opd/encounters/social/:patient_id",component:()=>n.e("chunk-5d065fa7").then(n.bind(null,"a949"))},{name:"presenting complaints",path:"/opd/encounters/complaints/:patient_id",component:()=>Promise.all([n.e("TouchFormElement40"),n.e("chunk-0fd5c64e")]).then(n.bind(null,"fea9"))},{name:"prescription",path:"/opd/encounters/prescription/:patient_id",component:()=>n.e("chunk-6072d4d7").then(n.bind(null,"13c2"))},{name:"dispensation",path:"/opd/encounters/dispensing/:patient_id",component:()=>n.e("chunk-0d8a9648").then(n.bind(null,"4fc0"))},{name:"radiology examination",path:"/opd/encounters/radiology/:patient_id",component:()=>n.e("chunk-a7c378ee").then(n.bind(null,"640e"))},{name:"clinic_with_nids",path:"/opd/reports/clinic/clinic_with_nids",component:()=>n.e("chunk-a07f7ae6").then(n.bind(null,"efa6"))},{name:"clinic_drugs_given",path:"/opd/reports/clinic/clinic_drugs_given",component:()=>n.e("chunk-1f3eb972").then(n.bind(null,"d48c"))},{name:"clinic_drugs",path:"/opd/reports/clinic/clinic_drugs",component:()=>n.e("chunk-5209708a").then(n.bind(null,"2941"))},{name:"clinic_registration",path:"/opd/reports/clinic/cclinic_registration",component:()=>n.e("chunk-332ee734").then(n.bind(null,"fd0a"))},{name:"clinic_la",path:"/opd/reports/clinic/clinic_la",component:()=>n.e("chunk-5ea256d6").then(n.bind(null,"7666"))},{name:"clinic_cases_seen",path:"/opd/reports/clinic/clinic_cases_seen",component:()=>n.e("chunk-2813dbbf").then(n.bind(null,"f482"))},{name:"clinic_mental_health",path:"/opd/reports/clinic/clinic_mental_health",component:()=>n.e("chunk-8c241af4").then(n.bind(null,"3c87"))},{name:"clinic_diagnosis",path:"/opd/reports/clinic/clinic_diagnosis",component:()=>n.e("chunk-7e518abc").then(n.bind(null,"15ab"))},{name:"clinic_diagnosis_by_address",path:"/opd/reports/clinic/clinic_diagnosis_by_address",component:()=>n.e("chunk-61325c54").then(n.bind(null,"e4c1"))},{name:"idsr_weekly",path:"/opd/reports/moh/idsr_weekly",component:()=>Promise.all([n.e("chunk-8f04b8cc"),n.e("chunk-2d0c8493")]).then(n.bind(null,"53dc"))},{name:"idsr_monthly",path:"/opd/reports/moh/idsr_monthly",component:()=>Promise.all([n.e("chunk-8f04b8cc"),n.e("chunk-2d0f028e")]).then(n.bind(null,"9ad4"))},{name:"hmis_15",path:"/opd/reports/moh/hmis_15",component:()=>Promise.all([n.e("chunk-48a533fb"),n.e("chunk-2d0bb1cf")]).then(n.bind(null,"39a4"))},{name:"hmis_17",path:"/opd/reports/moh/hmis_17",component:()=>Promise.all([n.e("chunk-48a533fb"),n.e("chunk-2d0ddf11")]).then(n.bind(null,"8410"))}],pt=n("cc6f"),mt=n("66fd");function ht(e,t){return{name:e,pathUrl:`/preferences?label=${e}&property=${t}`}}const bt=[{name:"System Preferences",icon:"diagnosis.png",condition:()=>S["a"].isAdmin(),files:[ht("Activate PACs",mt["a"].PACS_ENABLED)]}];var gt=n("2706");async function ft(e){const t=new J["a"](e);await t.enrollProgram();const n=new pt["a"](e,5);await n.createEncounter(),await n.saveValueCodedObs("Type of patient","New Patient")}function _t(e){return[{label:"Malawi National ID",value:"...",asyncValue:async()=>{const t=await N["a"].get("ACTIVE_PATIENT",{patientID:e});return t?t.getMWNationalID():"unknown"}},{label:"HIV Status",value:"...",asyncValue:async()=>await U["a"].getFirstValueText(e,"HIV Status")||"N/A"}]}async function vt(e){const t=await z.alertSideEffects(e.getID()),n=await e.getBMI();return[{label:"Side effects",value:""+t.length},{label:"Patient BMI is",value:""+n.result}]}function Ot(e){const t=e.tests[0],n=t.result[0],a=q["a"].isHighViralLoadResult(n)?'(<b style="color: #eb445a;">High</b>)':"";return`${t.name} ${n.value_modifier}${n.value} ${a}`}function yt(e,t){return{"PATIENT IDENTIFIERS":()=>[{label:"NPID",value:e.getNationalID()}],ALERTS:()=>vt(e),"LAB ORDERS":async()=>{const t=[];return await q["a"].getOrders(e.getID()).then(e=>{const n=q["a"].getViralLoadOrders(e);n.forEach(e=>{t.push({value:Ot(e),label:""})})}),t},OUTCOME:()=>[{label:"Current Outcome",value:t.outcome||"N/A"}],GUARDIAN:async()=>{const t=await Y["a"].getGuardianDetails(e.getID());return t?t.map(e=>({label:e.name,value:e.relationshipType})):[]}}}const Tt={programID:14,applicationName:"OPD",applicationIcon:"opd.png",applicationDescription:"Outpatient Program",appRoutes:ut,programReports:dt,primaryPatientActivites:ct,secondaryPatientActivites:rt,homeOverviewComponent:it,globalPropertySettings:bt,onRegisterPatient:ft,patientProgramInfoData:_t,confirmationSummary:yt,init:async()=>await Object(oe["d"])(ct,"OPD_activities"),programPatientIdentifiers:{"National ID":{id:28,name:"National ID",isPrimary:!0,useForSearch:!0,prefix:()=>"",validation:e=>gt["a"].isMWNationalID(e),keyboardName:"Qwerty"}}};var jt=Tt,kt=[{name:"ANC Vitals",path:"/anc/encounters/vitals/:patient_id",component:()=>n.e("chunk-f79e9b48").then(n.bind(null,"8866"))},{name:"anc_pepfar_disaggregated",path:"/anc/pepfar_disaggregated",component:()=>Promise.all([n.e("chunk-6e2ef908"),n.e("chunk-2d0db1ed")]).then(n.bind(null,"6f07"))},{name:"anc_clinic_appointment",path:"/anc/clinic_appointments",component:()=>n.e("chunk-3a01580a").then(n.bind(null,"9db1"))},{name:"anc_moh_report",path:"/anc/moh_report/:template_id",component:()=>n.e("chunk-171427f8").then(n.bind(null,"0128"))},{name:"art_followup",path:"/anc/pmtct/:patient_id",component:()=>n.e("chunk-8f3cd08c").then(n.bind(null,"60fb"))},{name:"anc data-cleaning tools",path:"/anc/datacleaning",component:()=>n.e("chunk-4d7a31cb").then(n.bind(null,"8a2d"))},{name:"drugset management",path:"/anc/drugset",component:()=>n.e("chunk-0d67dc9b").then(n.bind(null,"3286"))},{name:"add anc drugset",path:"/anc/drugset/add",component:()=>n.e("chunk-56873b06").then(n.bind(null,"668a"))},{name:"anc dispensing",path:"/anc/ttv/:patient_id",component:()=>n.e("chunk-5d9db78a").then(n.bind(null,"dc52"))},{name:"anc visit type",path:"/anc/visit/:patient_id",component:()=>n.e("chunk-603b7233").then(n.bind(null,"dc75"))},{name:"surgical history",path:"/anc/surgical_history/:patient_id",component:()=>n.e("chunk-159e38ab").then(n.bind(null,"1226"))},{name:"medical history",path:"/anc/medical_history/:patient_id",component:()=>n.e("chunk-01a5b102").then(n.bind(null,"ba823"))},{name:"anc examination",path:"/anc/examination/:patient_id",component:()=>n.e("chunk-18c74980").then(n.bind(null,"2819"))},{name:"social history",path:"/anc/social_history/:patient_id",component:()=>n.e("chunk-49088940").then(n.bind(null,"83a6"))},{name:"lab results",path:"/anc/lab_results/:patient_id",component:()=>n.e("chunk-a5563906").then(n.bind(null,"d8ba"))},{name:"obstetric history",path:"/anc/obsteric/:patient_id",component:()=>n.e("chunk-0d68fded").then(n.bind(null,"0773"))},{name:"current pregnancy",path:"/anc/current_pregnancy/:patient_id",component:()=>n.e("chunk-7b8bfad3").then(n.bind(null,"9841"))},{name:"anc treatment",path:"/anc/treatment/:patient_id",component:()=>n.e("chunk-c8719bfe").then(n.bind(null,"46d3"))},{name:"anc pepfar pmtct report",path:"/anc/report/pmtct_pepfar",component:()=>Promise.all([n.e("chunk-6e2ef908"),n.e("chunk-2d229c15")]).then(n.bind(null,"df96"))}];function It(e,t,n,a,o,c){const r=Object(i["resolveComponent"])("report-data-table");return Object(i["openBlock"])(),Object(i["createBlock"])(r,{asyncRows:e.getRows,columns:e.columns,config:{tableCssTheme:"art-report-theme",skeletonTextRows:5,showIndex:!1}},null,8,["asyncRows","columns"])}class Et extends y["e"]{constructor(){super()}static getStats(){return this.getJson(`programs/${this.getProgramID()}/reports/visits`,{name:"visits_report",start_date:this.getSessionDate()})}}var Ct=Object(i["defineComponent"])({components:{ReportDataTable:Oe["a"]},setup(){const e=[[ye["a"].thTxt("Total with:"),ye["a"].thTxt("Me"),ye["a"].thTxt("Today"),ye["a"].thTxt("This Year")]];async function t(){const e=await Et.getStats(),t=[1,2,3,4,">5"];return t.map(t=>[ye["a"].td(`${t} ${1===t?"visit":"visits"}`),ye["a"].td(e.user[t]),ye["a"].td(e.today[t]),ye["a"].td(e.year[t])])}return{getRows:t,columns:e}}});const Dt=E()(Ct,[["render",It]]);var Nt=Dt,wt=n("3e53"),St=n("9e49"),At=n("2989"),Pt=n("afbc");async function Ft(e){await Object(R["a"])("Do you want switch to ART Application to proceed with PMTCT tasks?")?wt["a"].switchAppWorkflow("ART",e.patientID,e.router,async()=>{const t=new X["a"](e.patientID,-1);await t.createEncounter(),await t.savePatientType("New patient");const n=new J["a"](e.patientID);await n.enrollProgram()}):e.router.push("/patient/dashboard/"+e.patientID)}function xt(e,t){return!!Array.isArray(e)&&e.includes(t)}const Vt=[{id:"print_session_lab_results",name:"Lab results (Print)",icon:"barcode.svg",action:async({patientID:e,visitDate:t})=>{const n=new St["a"](e,-1);n.date=t,await n.printLabResults()}},{id:"print_session_social_history",name:"Patient history (Print)",icon:"barcode.svg",action:({patientID:e})=>{const t=new At["a"](e,-1);t.printSocialHistory()}}],Rt=[{id:"anc dispensing",name:"TTV VACCINATION",encounterTypeName:"DISPENSING",icon:"prescription/medication.png"},{id:"anc visit type",name:"ANC VISIT TYPE",icon:"registration.png"},{id:"surgical history",name:"SURGICAL HISTORY",icon:"surgical_history.png",disabled:e=>xt(e.savedEncounters,"SURGICAL HISTORY")},{id:"medical history",name:"Medical History",icon:"medical_history.png",disabled:e=>xt(e.savedEncounters,"MEDICAL HISTORY")},{id:"anc examination",name:"Examination",workflowID:"ANC examination",encounterTypeName:"ANC EXAMINATION",icon:"diagnosis.png"},{id:"social history",name:"Social History",icon:"social_history.png",disabled:e=>xt(e.savedEncounters,"SOCIAL HISTORY")},{id:"lab results",name:"Lab Results",icon:"lab.png"},{id:"obstetric history",name:"Obstetric history",icon:"obstetric_history.png",disabled:e=>xt(e.savedEncounters,"OBSTETRIC HISTORY")},{id:"current pregnancy",name:"Current Pregnancy",icon:"current_preg.png",disabled:e=>xt(e.savedEncounters,"CURRENT PREGNANCY")},{id:"anc treatment",workflowID:"Give drugs",name:"anc treatment",encounterTypeName:"TREATMENT",icon:"dispensing.png"},{id:"art_followup",name:"art_followup",workflowID:"ARV Follow Up",icon:"pmtct.png"},{id:"vitals",name:"Vitals",icon:"vitals.png",action:e=>{Pt["a"].push("/anc/encounters/vitals/"+e.patientID)},taskCompletionChecklist:["Weight"]},{id:"appointment",name:"Manage Appointments",encounterTypeName:"APPOINTMENT",workflowID:"Manage appointment",icon:"appointment.png"},{id:"hiv clinic registration",name:"Hiv clinic registration",workflowID:"HIV first visits",icon:"registration.png",action:e=>Ft(e),condition:()=>!1},{id:"hiv reception",name:"HIV reception",workflowID:"HIV reception visits",icon:"reception.png",action:e=>Ft(e),condition:()=>!1}];var Bt=n("f01e");const Lt=[{name:"MoH",icon:"login-logos/Malawi-Coat_of_arms_of_arms.png",defaultFilesIcon:"reports.png",files:[{name:"Cohort",pathUrl:"/anc/moh_report/CohortTemplate"},{name:"Monthly",pathUrl:"/anc/moh_report/MonthlyTemplate"}]},{name:"Clinic",icon:"reports.png",defaultFilesIcon:"reports.png",files:[{name:"Appointments",pathName:"anc_clinic_appointment"},{name:"Incomplete visits",pathUrl:"/anc/datacleaning?cleaning_tool="+Bt["a"].INCOMPLETE_VISITS}]},{name:"PEPFAR",icon:"login-logos/PEPFAR.png",defaultFilesIcon:"reports.png",files:[{name:"Disaggregated",pathName:"anc_pepfar_disaggregated"},{name:"PMTCT",pathName:"anc pepfar pmtct report"}]}],Ht={programID:12,applicationName:"ANC",applicationIcon:"anc.png",applicationDescription:"Antenatal Program",appRoutes:kt,primaryPatientActivites:Rt,secondaryPatientActivites:Vt,programReports:Lt,homeOverviewComponent:Nt,init:async()=>await Object(oe["d"])(Rt),patientProgramInfoData:e=>{let t={};return[{label:"Date of last ANC visit",value:"...",init:async()=>{t=await W["a"].getProgramInformation(e)},staticValue:()=>t.date_of_lnmp||"N/A"},{label:"Gestation:",value:"...",staticValue:()=>t.gestation?t.gestation+" week(s)":"N/A"},{label:"ANC Visits",value:"...",staticValue:()=>t.anc_visits||"N/A"},{label:"Current outcome",value:"...",staticValue:()=>t.current_outcome||"N/A"}]},confirmationSummary(e,t){const n=e.getID(),a=e=>K["b"].toStandardHisDisplayFormat(e);return{"PATIENT IDENTIFIERS":()=>[{label:"NPID",value:e.getNationalID()},{label:"National ID",value:e.getMWNationalID()}],"PROGRAM INFO":()=>{let e=null;return[{label:"ANC visit",value:"...",init:async()=>{e=await W["a"].getProgramInformation(n)},staticValue:()=>e.anc_visits||"N/A"},{label:"Next Appointment Date",value:"...",asyncValue:async()=>{const e=await U["a"].getFirstValueDatetime(n,"appointment date");return e?a(e):"N/A"}},{label:"Gestation Age",value:"...",staticValue:()=>e.gestation?e.gestation+" week(s)":"N/A"},{label:"Date of LMP",value:"...",staticValue:()=>e.date_of_lnmp?a(e.date_of_lnmp):"N/A"},{label:"EDOD",staticValue:()=>e.edod?a(e.edod):"N/A"},{label:"Next task",value:"...",asyncValue:async()=>(await M["a"].getNextTaskParams(n)).name.toUpperCase()||"N/A"}]},OUTCOME:()=>[{label:"Current Outcome",value:"...",staticValue:()=>t.outcome||"N/A"}],LABS:async()=>(await q["a"].getOrders(n)).map(e=>({label:e.tests.map(e=>e.name).join(" & "),value:K["b"].toStandardHisDisplayFormat(e.order_date)})),GUARDIANS:async()=>{const e=await Y["a"].getGuardianDetails(n);return e?e.map(e=>({label:e.name,value:e.relationshipType})):[]}}},async onRegisterPatient(e){const t=new pt["a"](e,5,-1);await t.createEncounter(),await t.saveValueCodedObs("Type of patient","New patient")},programPatientIdentifiers:{"National ID":{id:28,name:"National ID",isPrimary:!0,useForSearch:!0,prefix:()=>"",keyboardName:"Qwerty"}}};var Mt=Ht;const Ut=e=>(Object(i["pushScopeId"])("data-v-87abacbc"),e=e(),Object(i["popScopeId"])(),e),$t={class:"los-overview"},Gt=Ut(()=>Object(i["createElementVNode"])("h4",null,"Today's clients booked from HIV/ART program",-1));function zt(e,t,n,a,o,c){const r=Object(i["resolveComponent"])("his-basic-table"),s=Object(i["resolveComponent"])("ion-col"),l=Object(i["resolveComponent"])("ion-row"),d=Object(i["resolveComponent"])("ion-grid");return Object(i["openBlock"])(),Object(i["createElementBlock"])("div",$t,[Object(i["createVNode"])(d,{style:{height:"100%"}},{default:Object(i["withCtx"])(()=>[Object(i["createVNode"])(l,null,{default:Object(i["withCtx"])(()=>[Object(i["createVNode"])(s,{size:"6"},{default:Object(i["withCtx"])(()=>[Object(i["createVNode"])(r,{columns:e.columns,rows:e.rows},null,8,["columns","rows"])]),_:1}),Object(i["createVNode"])(s,{size:"6",style:{"border-left":"5px solid black"}},{default:Object(i["withCtx"])(()=>[Gt,Object(i["createVNode"])(r,{columns:e.screenedColumns,rows:e.screenedRows},null,8,["columns","rows"])]),_:1})]),_:1})]),_:1})])}var Yt=n("a3a5");class Jt extends y["e"]{constructor(){super()}static async overviewStats(){const e=await this.dashboardStats(),t=[];for(const n in e)t.push([n,e[n]]);return t}static async screenedOverviewStats(){const e=await this.screenedStats(),t=[];for(const n in e){const a=e[n];let o=0;for(const e of a)1==e["screening_method_present"]&&o++;t.push([n,a.length,o])}return t}static dashboardStats(){return super.getJson("dashboard_stats",{date:super.getSessionDate(),program_id:super.getProgramID()})}static screenedStats(){return super.getJson("screened_for_cxca",{date:super.getSessionDate(),program_id:super.getProgramID(),report_name:"BOOKED CLIENTS FROM ART",start_date:super.getSessionDate(),end_date:super.getSessionDate()})}}var Wt=Object(i["defineComponent"])({components:{HisBasicTable:Yt["a"]},data:()=>({rows:[],columns:["Today's screening method","Count"],screenedColumns:["Age group","Booked","Screened"],screenedRows:[]}),async created(){await this.setRows()},methods:{async setRows(){const e=await Jt.overviewStats();this.rows=[...e];const t=await Jt.screenedOverviewStats();this.screenedRows=[...t]}}});n("8081");const qt=E()(Wt,[["render",zt],["__scopeId","data-v-87abacbc"]]);var Kt=qt;const Xt=[{id:"cxca test",name:"cxca test",workflowID:"cxca test",icon:"via-test.png"},{id:"cxca screening result",name:"cxca screening result",workflowID:"cxca screening result",icon:"first-aid-kit.png"},{id:"cxca treatment",name:"cxca treatment",workflowID:"cxca treatment",icon:"cancer.png"},{id:"cxca referral feedback",name:"cxca referral feedback",workflowID:"cxca referral feedback",icon:"referral.png"},{id:"appointment",name:"Manage Appointments",workflowID:"Manage Appointments",encounterTypeName:"appointment",icon:"appointment.png"}];var Qt=[{name:"cxca test",path:"/cxca/encounters/clinical_assessment/:patient_id",component:()=>n.e("chunk-2d7b0dba").then(n.bind(null,"e7aa"))},{name:"cxca treatment",path:"/cxca/encounters/cancer_treatment/:patient_id",component:()=>n.e("chunk-515474f6").then(n.bind(null,"0605"))},{name:"cxca reception",path:"/cxca/encounters/cancer_reception/:patient_id",component:()=>n.e("chunk-654c8487").then(n.bind(null,"ba9c"))},{name:"cxca referral feedback",path:"/cxca/encounters/cancer_feedback/:patient_id",component:()=>n.e("chunk-2b71730d").then(n.bind(null,"01bd"))},{name:"cxca screening result",path:"/cxca/encounters/cancer_screening_result/:patient_id",component:()=>n.e("chunk-23cae350").then(n.bind(null,"d66c"))},{name:"cxca result",path:"/cxca/encounters/cancer_result/:patient_id",component:()=>n.e("chunk-449ba214").then(n.bind(null,"1411"))},{name:"cc_basic_results",path:"/cxca/report/pepfar/cc_basic_results",component:()=>Promise.all([n.e("chunk-f6fc5a8a"),n.e("chunk-2d0ce780")]).then(n.bind(null,"601a"))},{name:"cc_all_questions",path:"/cxca/report/pepfar/cc_all_questions",component:()=>Promise.all([n.e("chunk-f6fc5a8a"),n.e("chunk-2d22c0fe")]).then(n.bind(null,"f240"))},{name:"cc_type_of_screen",path:"/cxca/report/pepfar/cc_type_of_screen",component:()=>Promise.all([n.e("chunk-f6fc5a8a"),n.e("chunk-2d2133a2")]).then(n.bind(null,"ac7a"))},{name:"cc_screen_result",path:"/cxca/report/pepfar/cc_screen_result",component:()=>Promise.all([n.e("chunk-f6fc5a8a"),n.e("chunk-2d0c49e8")]).then(n.bind(null,"3c35"))},{name:"cc_type_of_treatment",path:"/cxca/report/pepfar/cc_type_of_treatment",component:()=>Promise.all([n.e("chunk-f6fc5a8a"),n.e("chunk-2d0a3c5e")]).then(n.bind(null,"0437"))},{name:"cc_visit_reasons",path:"/cxca/report/clinic/cc_visit_reasons",component:()=>Promise.all([n.e("chunk-f6fc5a8a"),n.e("chunk-2d0f0ba4")]).then(n.bind(null,"9e35"))},{name:"cc_booked_clients",path:"/cxca/report/clinic/cc_booked_clients",component:()=>Promise.all([n.e("chunk-f6fc5a8a"),n.e("chunk-2d217e09")]).then(n.bind(null,"c930"))}];const Zt=[{name:"MoH",icon:"login-logos/Malawi-Coat_of_arms_of_arms.png",defaultFilesIcon:"reports.png",files:[{name:"MoH report",pathName:"screened_for_cxca"}]},{name:"Clinic",icon:"reports.png",defaultFilesIcon:"reports.png",files:[{name:"Visit reason",pathName:"cc_visit_reasons"},{name:"Booked clients",pathName:"cc_booked_clients"}]},{name:"PEPFAR",icon:"login-logos/PEPFAR.png",defaultFilesIcon:"reports.png",files:[{name:"CC All Questions",pathName:"cc_all_questions"},{name:"CC Basic Results",pathName:"cc_basic_results"},{name:"CC Type of Screen",pathName:"cc_type_of_screen"},{name:"CC Screen Result",pathName:"cc_screen_result"},{name:"CC Type of Treatment",pathName:"cc_type_of_treatment"}]}];async function en(e){const t=new J["a"](e);await t.enrollProgram();const n=new pt["a"](e,5);await n.createEncounter(),await n.saveValueCodedObs("Type of patient","New Patient")}const tn={programID:24,applicationName:"CxCa",applicationIcon:"ccm.png",applicationDescription:"Cervical cancer screening module",appRoutes:Qt,primaryPatientActivites:Xt,secondaryPatientActivites:[],globalPropertySettings:[],onRegisterPatient:en,homeOverviewComponent:Kt,confirmationSummary:(e,t)=>({"PATIENT IDENTIFIERS":()=>[{label:"NPID",value:e.getNationalID()}],OUTCOME:()=>[{label:"Current Outcome",value:t.outcome||"N/A"}],"PROGRAM INFORMATION":async()=>{const t=e.getID(),n=[],a=await M["a"].getNextTaskParams(t);n.push({label:"Next Task",value:a.name?""+a.name:"NONE"});const o=await U["a"].getAll(t,"appointment date"),i=o?K["b"].toStandardHisDisplayFormat(o[0].value_datetime):"Not Available";return n.push({label:"Next Appointment",value:i}),n}}),programReports:Zt};var nn=tn;const an={class:"overview"};function on(e,t,n,a,o,c){const r=Object(i["resolveComponent"])("report-table");return Object(i["openBlock"])(),Object(i["createElementBlock"])("div",an,[Object(i["createVNode"])(r,{rows:e.rows,columns:e.columns,config:{tableCssTheme:"art-report-theme",skeletonTextRows:5,showIndex:!1}},null,8,["rows","columns"])])}var cn=n("866d"),rn=Object(i["defineComponent"])({components:{ReportTable:Oe["a"]},setup(){const e=[[ye["a"].thTxt("Task"),ye["a"].thTxt("Me"),ye["a"].thTxt("Today")]],t=Object(i["ref"])([]);return Object(i["onMounted"])(()=>{const e=cn["a"].getSessionDate(),n=new cn["a"]("DASHBOARD STATISTICS",e,e),a=n.requestReport();"object"===typeof a&&a.then&&a.then(e=>{e.forEach(e=>{t.value.push([ye["a"].td(e.name),ye["a"].td(e.me),ye["a"].td(e.clinic)])})}).catch(e=>Object(R["c"])(""+e))}),{columns:e,rows:t}}});n("e63c");const sn=E()(rn,[["render",on],["__scopeId","data-v-14f2eb30"]]);var ln=sn;const dn={programID:28,applicationName:"RADIOLOGY",applicationIcon:"radiology_types.png",applicationDescription:"Radiology service",homeOverviewComponent:ln,configDefaultPatientDashboardCards:{alertsEnabled:!1,medicationsEnabled:!1,labEnabled:!1},confirmationSummary(e){return{"Patient Identifiers":()=>[{label:"NPID",value:"...",staticValue:()=>e.getNationalID()}]}},globalPropertySettings:[{name:"System Preferences",condition:()=>S["a"].isAdmin(),files:[{name:"Default External Referral",pathUrl:"/radiology/preferences/default_referral_location"}]}],appRoutes:[{name:"Radiology preferences",path:"/radiology/preferences/:name",component:()=>n.e("chunk-1aaa69a2").then(n.bind(null,"9178"))},{name:"Examination",path:"/radiology/examination/:patient_id",component:()=>n.e("chunk-169b062e").then(n.bind(null,"b14f"))},{name:"Radiology Appointment",path:"/radiology/appointment",component:()=>n.e("chunk-45b19b4c").then(n.bind(null,"a93b"))},{name:"daily radiology report",path:"/radiology/report/daily",component:()=>n.e("chunk-4c4b4134").then(n.bind(null,"a61b"))},{name:"revenue radiology report",path:"/radiology/report/revenue",component:()=>n.e("chunk-c1897600").then(n.bind(null,"752f"))},{name:"radiology referral report",path:"/radiology/report/referral",component:()=>n.e("chunk-3b53fd66").then(n.bind(null,"5195"))},{name:"radiology activities",path:"/radiology/activities/:patient_id",component:()=>n.e("chunk-4255b9ec").then(n.bind(null,"7681"))}],programReports:[{name:"Daily Report",icon:"reports.png",defaultFilesIcon:"reports.png",files:[{name:"Daily Report",pathUrl:"/radiology/report/daily"}]},{name:"Revenue Collection Report",icon:"reports.png",defaultFilesIcon:"reports.png",files:[{name:"Revenue Collection",pathUrl:"/radiology/report/revenue"}]},{name:"Referral Report",icon:"reports.png",defaultFilesIcon:"reports.png",files:[{name:"Referral Report",pathUrl:"/radiology/report/referral"}]}],primaryPatientActivites:[{id:"Examination",name:"Examination",icon:"radiology_types.png"},{id:"Radiology Appointment",name:"Radiology Appointment",icon:"appointment.png"}],secondaryPatientActivites:[{id:"radiology activities",name:"Radiology Activities",icon:"radiology_types.png"}]};var un=dn;const pn={class:"overview"};function mn(e,t,n,a,o,c){const r=Object(i["resolveComponent"])("report-table");return Object(i["openBlock"])(),Object(i["createElementBlock"])("div",pn,[Object(i["createVNode"])(r,{rows:e.rows,columns:e.columns,config:{tableCssTheme:"art-report-theme",skeletonTextRows:5,showIndex:!1}},null,8,["rows","columns"])])}class hn extends y["e"]{constructor(){super()}requestReport(){return y["e"].getJson("dashboard_stats",{program_id:y["e"].getProgramID(),date:y["e"].getSessionDate()})}}var bn=Object(i["defineComponent"])({components:{ReportTable:Oe["a"]},setup(){const e=[[ye["a"].thTxt("Task"),ye["a"].thTxt("Me"),ye["a"].thTxt("Today")]],t=Object(i["ref"])([]);return Object(i["onMounted"])(()=>{const e=new hn,n=e.requestReport();"object"===typeof n&&n.then&&n.then(e=>{["Newly Registered Patients","Returning Patients"].forEach(n=>{const a=e[n];t.value.push([ye["a"].td(n),ye["a"].td(a.me),ye["a"].td(a.total)]),delete e[n]}),Object.keys(e).forEach(n=>{t.value.push([ye["a"].td(n),ye["a"].td(e[n].me),ye["a"].td(e[n].total)])})}).catch(e=>Object(R["c"])(""+e))}),{columns:e,rows:t}}});n("e109");const gn=E()(bn,[["render",mn],["__scopeId","data-v-1e3de004"]]);var fn=gn;const _n=[{id:"Outpatient Reception",name:"Outpatient Reception",icon:"reception.png"},{id:"Patient Services",name:"Patient Services",icon:"attributes.png"}],vn=[];var On=[{name:"Outpatient Reception",path:"/registration/encounters/outpatient_reception/:patient_id",component:()=>n.e("chunk-558c7b2c").then(n.bind(null,"b805"))},{name:"Patient Services",path:"/registration/encounters/patient_services/:patient_id",component:()=>n.e("chunk-614857ee").then(n.bind(null,"3be8"))}];async function yn(e){const t=new J["a"](e);await t.enrollProgram();const n=new pt["a"](e,5);return await n.createEncounter(),await n.saveValueCodedObs("Type of patient","New Patient"),Pt["a"].push("/registration/encounters/outpatient_reception/"+e),!0}function Tn(e){let t={};return[{label:"Malawi National ID",value:"...",init:async()=>{t=await N["a"].get("ACTIVE_PATIENT",{patientID:e})},staticValue:()=>t.getMWNationalID()}]}function jn(e){return{"PATIENT IDENTIFIERS":()=>[{label:"NPID",value:e.getNationalID()}]}}const kn={programID:29,applicationName:"Registration",applicationIcon:"active-files.png",applicationDescription:"Patient Registration Program",appRoutes:On,programReports:vn,primaryPatientActivites:_n,secondaryPatientActivites:_n,homeOverviewComponent:fn,onRegisterPatient:yn,patientProgramInfoData:Tn,confirmationSummary:jn,programPatientIdentifiers:{"National ID":{id:28,name:"National ID",isPrimary:!0,useForSearch:!0,prefix:()=>"",validation:e=>gt["a"].isMWNationalID(e),keyboardName:"Qwerty"}}};var In=kn;const En=e=>(Object(i["pushScopeId"])("data-v-b1fd19f4"),e=e(),Object(i["popScopeId"])(),e),Cn={class:"his-card ion-text-center"},Dn=En(()=>Object(i["createElementVNode"])("p",{class:"subtext"},"Total tested for HIV today",-1)),Nn={class:"his-card ion-text-center"},wn=En(()=>Object(i["createElementVNode"])("p",{class:"subtext"},"Total HIV Positive today",-1)),Sn={class:"his-card ion-text-center"},An=En(()=>Object(i["createElementVNode"])("p",{class:"subtext"},"Total Linked to ART today",-1)),Pn={class:"his-card ion-text-center"},Fn=En(()=>Object(i["createElementVNode"])("p",{class:"subtext"},"Retesting appointments expected today",-1));function xn(e,t,n,a,o,c){const r=Object(i["resolveComponent"])("ion-text"),s=Object(i["resolveComponent"])("ion-col"),l=Object(i["resolveComponent"])("ion-row"),d=Object(i["resolveComponent"])("ion-grid");return Object(i["openBlock"])(),Object(i["createBlock"])(d,null,{default:Object(i["withCtx"])(()=>[Object(i["createVNode"])(l,null,{default:Object(i["withCtx"])(()=>[Object(i["createVNode"])(s,{"size-lg":"6","size-sm":"12"},{default:Object(i["withCtx"])(()=>[Object(i["createElementVNode"])("div",Cn,[Dn,Object(i["createVNode"])(r,{color:"primary",class:"large-number"},{default:Object(i["withCtx"])(()=>[Object(i["createTextVNode"])(Object(i["toDisplayString"])(e.totalRegistered),1)]),_:1})])]),_:1}),Object(i["createVNode"])(s,{"size-lg":"6","size-sm":"12"},{default:Object(i["withCtx"])(()=>[Object(i["createElementVNode"])("div",Nn,[wn,Object(i["createVNode"])(r,{color:"primary",class:"large-number"},{default:Object(i["withCtx"])(()=>[Object(i["createTextVNode"])(Object(i["toDisplayString"])(e.totalPositive),1)]),_:1})])]),_:1})]),_:1}),Object(i["createVNode"])(l,null,{default:Object(i["withCtx"])(()=>[Object(i["createVNode"])(s,{"size-lg":"6","size-sm":"12"},{default:Object(i["withCtx"])(()=>[Object(i["createElementVNode"])("div",Sn,[An,Object(i["createVNode"])(r,{color:"primary",class:"large-number"},{default:Object(i["withCtx"])(()=>[Object(i["createTextVNode"])(Object(i["toDisplayString"])(e.totalEnrolledInArt),1)]),_:1})])]),_:1}),Object(i["createVNode"])(s,{"size-lg":"6","size-sm":"12"},{default:Object(i["withCtx"])(()=>[Object(i["createElementVNode"])("div",Pn,[Fn,Object(i["createVNode"])(r,{color:"primary",class:"large-number"},{default:Object(i["withCtx"])(()=>[Object(i["createTextVNode"])(Object(i["toDisplayString"])(e.totalTestedReturning),1)]),_:1})])]),_:1})]),_:1})]),_:1})}var Vn=n("d20e"),Rn=n("b432"),Bn=n("8e3d");const Ln=["ITS"],Hn=Object(Bn["a"])("IndexedDBStorage"),Mn=Object(i["ref"])(0),Un=[{key:"villages",endpoint:"villages"},{key:"traditional_authorities",endpoint:"traditional_authorities"},{key:"districts",endpoint:"districts"},{key:"regions",endpoint:"regions"},{key:"locations",endpoint:"locations"}];function $n(){const e=y["e"].getActiveApp();if(Ln.includes(e.applicationName))try{if(Rn["b"].value)return;Un.forEach(async e=>{if(!await Hn.existsinStorage(e.key)){const t=await y["e"].getJson(e.endpoint,{paginate:!1});Hn.saveToStorage(e.key,t)}})}catch(t){console.error(t),Mn.value<3&&setTimeout(()=>{console.log("retrying sync offline metadata"),Mn.value+=1,$n()},5e3)}}var Gn=Object(i["defineComponent"])({components:{IonGrid:f["p"],IonRow:f["I"],IonCol:f["m"],IonText:f["P"]},setup(){const e=Object(i["ref"])(0),t=Object(i["ref"])(0),n=Object(i["ref"])(0),a=Object(i["ref"])(0);async function o(){const o=new Vn["a"]("HTS DASHBOARD STATS");o.startDate=Vn["a"].getSessionDate(),o.endDate=o.startDate;const i=await o.requestReport()||{};$n(),e.value=i.total_registered||0,t.value=i.total_enrolled_into_art||0,n.value=i.total_tested_returning||0,a.value=i.total_positive||0}return Object(i["watch"])(Rn["c"],e=>{e&&o()},{immediate:!0}),{totalPositive:a,totalRegistered:e,totalEnrolledInArt:t,totalTestedReturning:n}}});n("92c9");const zn=E()(Gn,[["render",xn],["__scopeId","data-v-b1fd19f4"]]);var Yn=zn,Jn=[{name:"hts legacy report",path:"/hts/legacy_report",component:()=>Promise.all([n.e("chunk-482a9e72"),n.e("chunk-2d0d9fe2")]).then(n.bind(null,"6a67"))},{name:"hts kit",path:"/hts/kits",component:()=>n.e("chunk-0d411be7").then(n.bind(null,"857e"))},{name:"dbs order",path:"/hts/dbs/order/:patient_id",component:()=>n.e("chunk-2a19e2a2").then(n.bind(null,"68cb"))},{name:"hts recency test",path:"/hts/recency/:patient_id",component:()=>n.e("chunk-621afa11").then(n.bind(null,"41bd"))},{name:"hts dbs result",path:"/hts/dbs/:patient_id",component:()=>n.e("chunk-c71d4ad6").then(n.bind(null,"bb8a"))},{name:"hts code",path:"/hts/code/:patient_id",component:()=>n.e("chunk-7b204f29").then(n.bind(null,"114c"))},{name:"hts items given",path:"/hts/items/:patient_id",component:()=>n.e("chunk-466beead").then(n.bind(null,"5953"))},{name:"hts art referral outcome",path:"/hts/referral/outcome/:patient_id",component:()=>n.e("chunk-2e892804").then(n.bind(null,"dac9"))},{name:"testing",path:"/hts/testing/:patient_id",component:()=>n.e("chunk-502a4fea").then(n.bind(null,"78a8"))},{name:"hts art initiation",path:"/hts/art/initiation/:patient_id",component:()=>n.e("chunk-53dfc2ec").then(n.bind(null,"3383"))},{name:"hts referral appointment",path:"/hts/appointment/:patient_id",component:()=>n.e("chunk-10fb4a0e").then(n.bind(null,"8dd5"))},{name:"hts referral",path:"/hts/referral/:patient_id",component:()=>n.e("chunk-37c65eed").then(n.bind(null,"d76a"))},{name:"hts partner reception",path:"/hts/partner/:patient_id",component:()=>n.e("chunk-8109adf2").then(n.bind(null,"8b54"))},{name:"hts contact",path:"/hts/contact/:patient_id",component:()=>n.e("chunk-ebc0ec76").then(n.bind(null,"0f42"))},{name:"pregnancy status",path:"/hts/status/pregnancy/:patient_id",component:()=>n.e("chunk-53dc0a89").then(n.bind(null,"209b"))},{name:"circumcision status",path:"/hts/status/circumcision/:patient_id",component:()=>n.e("chunk-31c5e014").then(n.bind(null,"05cc"))},{name:"hts social history",path:"/hts/social/history/:patient_id",component:()=>n.e("chunk-e264e05c").then(n.bind(null,"f45e"))},{name:"E Self Test Register",path:"/hts_self_test",component:()=>n.e("chunk-09a4aadc").then(n.bind(null,"61ef"))},{name:"hts clinic report",path:"/hts/clinic/hts_summary",component:()=>Promise.all([n.e("chunk-482a9e72"),n.e("chunk-6b96b9e2")]).then(n.bind(null,"ebde"))},{name:"hts_index report",path:"/hts/report/pepfar/hts_index",component:()=>n.e("chunk-117a9a3c").then(n.bind(null,"bb1b"))},{name:" hts_tst_com report",path:"/hts/report/pepfar/hts_tst_com",component:()=>n.e("chunk-5b707f09").then(n.bind(null,"4d4b"))},{name:" hts_tst_fac1 report",path:"/hts/report/pepfar/hts_tst_fac1",component:()=>n.e("chunk-3fd801f4").then(n.bind(null,"d35a"))},{name:" hts_tst_kp report",path:"/hts/report/pepfar/hts_tst_kp",component:()=>n.e("chunk-0a797c6c").then(n.bind(null,"0a5e"))},{name:" hts_recent_com report",path:"/hts/report/pepfar/hts_recent_com",component:()=>n.e("chunk-5de8a60e").then(n.bind(null,"d002"))},{name:" hts_recent_fac report",path:"/hts/report/pepfar/hts_recent_fac",component:()=>n.e("chunk-04673748").then(n.bind(null,"d25d"))},{name:" hts_recent_kp report",path:"/hts/report/pepfar/hts_recent_kp",component:()=>n.e("chunk-056c0c95").then(n.bind(null,"604d"))},{name:" hts_self report",path:"/hts/report/pepfar/hts_self",component:()=>n.e("chunk-943f0b86").then(n.bind(null,"bab5"))},{name:" hts_self_kp report",path:"/hts/report/pepfar/hts_self_kp",component:()=>n.e("chunk-07d1414d").then(n.bind(null,"db59"))},{name:"HTS_LINK report",path:"/hts/report/clinic/HtsLink",component:()=>n.e("chunk-4828ad16").then(n.bind(null,"e010"))},{name:"Monthly_activiy_Log report",path:"/hts/report/clinic/MonthlyActiviyLog",component:()=>n.e("chunk-3683df0e").then(n.bind(null,"2808"))},{name:"Monthly_AIT report",path:"/hts/report/clinic/MonthlyAit",component:()=>n.e("chunk-617c561a").then(n.bind(null,"f951"))},{name:"HTS summary report",path:"/hts/report/moh/hts_summary",component:()=>Promise.all([n.e("chunk-482a9e72"),n.e("chunk-6bc31a49")]).then(n.bind(null,"d6ac"))},{name:"Initial - tested for HIV report",path:"/hts/report/moh/initial_tested_for_hiv",component:()=>Promise.all([n.e("chunk-482a9e72"),n.e("chunk-36b25d50")]).then(n.bind(null,"5b4b"))},{name:"Initial - tested for HepB report",path:"/hts/report/moh/initial_tested_for_hepb",component:()=>Promise.all([n.e("chunk-482a9e72"),n.e("chunk-d9a86b86")]).then(n.bind(null,"9e51"))},{name:"Initial - tested for syphilis report",path:"/hts/report/moh/initial_tested_for_syphilis",component:()=>Promise.all([n.e("chunk-482a9e72"),n.e("chunk-b1605bee")]).then(n.bind(null,"0e65"))},{name:"Confirmatory HTS report",path:"/hts/report/moh/confirmatory_hts",component:()=>Promise.all([n.e("chunk-482a9e72"),n.e("chunk-3b454c76")]).then(n.bind(null,"4038"))},{name:"HTS Self test summary report",path:"/hts/report/moh/self_test_summary",component:()=>Promise.all([n.e("chunk-482a9e72"),n.e("chunk-37a3135d")]).then(n.bind(null,"d6c9"))}],Wn=n("c731"),qn=n("d95e");const Kn=[{id:"pregnancy status",name:"Pregnancy status",icon:"current_preg.png",workflowID:"PREGNANCY STATUS",patientUrl:"/hts/status/pregnancy",offlineWorkflowIndex:1,offlineWorkflowCondition(e){return"F"===e.gender},condition:({gender:e})=>"F"===e},{id:"circumcision status",name:"Circumcision status",icon:"medical_male_circumcision.png",encounterTypeName:"Circumcision",workflowID:"CIRCUMCISION",patientUrl:"/hts/status/circumcision",offlineWorkflowIndex:1,condition:({gender:e})=>"M"===e,offlineWorkflowCondition(e){return"M"===e.gender}},{id:"testing",name:"Testing",icon:"lab.png",encounterTypeName:"Testing",workflowID:"Testing",offlineWorkflowIndex:2,taskCompletionChecklist:["HTS Access Type","Previous HIV Test Results"],patientUrl:"/hts/testing"},{id:"hts referral appointment",name:"Appointment",icon:"summary.png",workflowID:"APPOINTMENT",patientUrl:"/hts/appointment",offlineWorkflowIndex:6,offlineWorkflowCondition(e){return e.observationParams.some(e=>{var t,n,a,o,i,c,r,s;return!!e.meta&&("testing"===e.encounterName&&!(/inconclusive/i.test(null===e||void 0===e||null===(t=e.meta)||void 0===t||null===(n=t.last_hiv_result)||void 0===n?void 0:n.label)&&/inconclusive/i.test(null===e||void 0===e||null===(a=e.meta)||void 0===a||null===(o=a.hiv_result)||void 0===o?void 0:o.label))&&!(/health facility/i.test(null===e||void 0===e||null===(i=e.meta)||void 0===i||null===(c=i.accesspoint_type)||void 0===c?void 0:c.value)&&"Positive"===(null===e||void 0===e||null===(r=e.meta)||void 0===r||null===(s=r.hiv_result)||void 0===s?void 0:s.label)))})}},{id:"hts art initiation",name:"ART (Re-)Initiation",icon:"referral.png",workflowID:"ART Enrollment",encounterTypeName:"ART Enrollment",patientUrl:"/hts/art/initiation",offlineWorkflowIndex:9,offlineWorkflowCondition:e=>e.observationParams.some(e=>{var t,n;return"testing"===e.encounterName&&"Positive"===(null===(t=e.meta)||void 0===t||null===(n=t.hiv_result)||void 0===n?void 0:n.label)})},{id:"hts referral",name:"Referral",icon:"referral.png",workflowID:"REFERRAL",patientUrl:"/hts/referral",offlineWorkflowIndex:10},{id:"hts contact",name:"Contact tracing",icon:"patient-type.png",encounterTypeName:"HTS contact",workflowID:"HTS Contact",patientUrl:"/hts/contact",offlineWorkflowIndex:7,offlineWorkflowCondition:e=>e.observationParams.some(e=>{var t,n,a,o;return"testing"===e.encounterName&&/health facility/i.test(null===(t=e.meta)||void 0===t||null===(n=t.accesspoint_type)||void 0===n?void 0:n.value)&&"Positive"===(null===(a=e.meta)||void 0===a||null===(o=a.hiv_result)||void 0===o?void 0:o.label)})},{id:"hts partner reception",name:"Partner reception",icon:"edit-user.png",workflowID:"Partner Reception",patientUrl:"/hts/partner",offlineWorkflowIndex:5,offlineWorkflowCondition:e=>e.observationParams.some(e=>{var t,n;return"testing"===e.encounterName&&!/community/i.test(""+(null===(t=e.meta)||void 0===t||null===(n=t.accesspoint_type)||void 0===n?void 0:n.value))})},{id:"hts art referral outcome",name:"ART Referral Outcome",icon:"aids.png",patientUrl:"/hts/referral/outcome"},{id:"hts items given",name:"Items Given",icon:"first-aid-kit.png",patientUrl:"/hts/items",offlineWorkflowIndex:8},{id:"hts recency test",name:"Recency",icon:"usage.png",patientUrl:"/hts/recency",offlineWorkflowIndex:3,offlineWorkflowCondition(e){return e.observationParams.some(e=>{var t,n,a;return!!e.meta&&!("testing"!==e.encounterName||"Community"!==(null===(t=e.meta)||void 0===t||null===(n=t.accesspoint_type)||void 0===n?void 0:n.label)||!((null===(a=e.meta)||void 0===a?void 0:a.test_results)||[]).find(e=>"test_2"===e.other.id))})}},{id:"hts dbs result",name:"DBS Result",icon:"lab.png",patientUrl:"/hts/dbs"},{id:"dbs order",name:"DBS Order",icon:"lab.png",patientUrl:"/hts/dbs/order",offlineWorkflowIndex:4,offlineWorkflowCondition:e=>e.observationParams.some(t=>{var n;return"hts recency test"===t.encounterName&&"Recent"===(null===t||void 0===t||null===(n=t.meta)||void 0===n?void 0:n.recency_test.label)&&e.observationParams.some(t=>{var n,a,o,i,c,r,s;return e.person.age<=0&&"testing"===t.encounterName&&"Positive"===(null===t||void 0===t||null===(n=t.meta)||void 0===n?void 0:n.hiv_result)&&/Health facility/i.test(""+(null===t||void 0===t||null===(a=t.meta)||void 0===a||null===(o=a.accesspoint_type)||void 0===o?void 0:o.value))||!(e.person.age>0&&"testing"===t.encounterName&&/inconclusive/i.test(""+(null===t||void 0===t||null===(i=t.meta)||void 0===i||null===(c=i.last_hiv_result)||void 0===c?void 0:c.label))&&/inconclusive/i.test(""+(null===t||void 0===t||null===(r=t.meta)||void 0===r||null===(s=r.hiv_result)||void 0===s?void 0:s.label)))})})}],Xn=[{id:"hts linkage code",name:"View Linkage Code",icon:"barcode.svg",patientUrl:"/hts/code"}],Qn=[{name:"MoH",icon:"login-logos/Malawi-Coat_of_arms_of_arms.png",defaultFilesIcon:"reports.png",files:[{name:"HTS summary",pathUrl:"/hts/report/moh/hts_summary"},{name:"HIV Testing Regular Clients",pathUrl:"/hts/legacy_report?report=HTS LEGACY REGULAR"},{name:"HIV Testing Regular Returning Clients",pathUrl:"/hts/legacy_report?report=HTS LEGACY RETURNING"},{name:"Initial - tested for HIV",pathUrl:"/hts/report/moh/initial_tested_for_hiv"},{name:"Initial - tested for HepB",pathUrl:"/hts/report/moh/initial_tested_for_hepb"},{name:"Initial - tested for syphilis",pathUrl:"/hts/report/moh/initial_tested_for_syphilis"},{name:"Confirmatory HTS",pathUrl:"/hts/report/moh/confirmatory_hts"},{name:"HIV Self-test Distribution Monthly Report",pathUrl:"/hts/report/moh/self_test_summary"}]},{name:"Clinic",icon:"reports.png",defaultFilesIcon:"reports.png",files:[{name:"HIV Testing summary",pathUrl:"/hts/clinic/hts_summary"},{name:"HTS Linkage",pathUrl:"/hts/report/clinic/HtsLink"},{name:"Monthly activity log",pathUrl:"/hts/report/clinic/MonthlyActiviyLog"},{name:"Monthly AIT",condition:()=>!1,pathUrl:"/hts/report/clinic/MonthlyAit"}]},{name:"PEPFAR",icon:"login-logos/PEPFAR.png",defaultFilesIcon:"reports.png",files:[{name:"Index",pathUrl:"/hts/report/pepfar/hts_index"},{name:"TST Community",pathUrl:"/hts/report/pepfar/hts_tst_com"},{name:"TST Facility",pathUrl:"/hts/report/pepfar/hts_tst_fac1"},{name:"TST KP",condition:()=>!1,pathUrl:"/hts/report/pepfar/hts_tst_kp"},{name:"Recent community",condition:()=>!1,pathUrl:"/hts/report/pepfar/hts_recent_com"},{name:"Recent Facility",pathUrl:"/hts/report/pepfar/hts_recent_fac"},{name:"Recent KP",condition:()=>!1,pathUrl:"/hts/report/pepfar/hts_recent_kp"},{name:"Self",pathUrl:"/hts/report/pepfar/hts_self"},{name:"Self KP",condition:()=>!1,pathUrl:"/hts/report/pepfar/hts_self_kp"}]}];var Zn=n("0882"),ea=n("8f12"),ta=n("e805"),na=n("cf9e");function aa(e,t,n){const a=[],o=Object(ae["find"])(e,{type:{name:t}});if(!o)return[];const{observations:i}=o;return i.forEach(e=>{e.concept.concept_names.forEach(t=>{n[t.name]&&a.push(n[t.name](e,o))})}),a}const oa={programID:18,applicationName:"ITS",applicationIcon:"hts2.png",applicationDescription:"Integrated Testing Service",appRoutes:Jn,programReports:Qn,globalPropertySettings:[{name:"Report Preferences",action:()=>Object(na["b"])(),files:[]},{name:"Workflow Preferences",condition:()=>S["a"].isAdmin(),files:[{name:"Offer recency test services",pathUrl:"/preferences?label=Offer recency test services&property="+ta["a"].OFFER_RECENCY_TEST}]}],onAppSelected:async e=>{const t=()=>{f["ab"].dismiss(e,void 0,"_APPLICATION_SELECTION_MODAL_"),Pt["a"].push("/hts/kits")};if(await ta["b"].offerRecencyTest()&&await Object(oe["d"])([{id:"hts hiv test",name:"HIV Test",icon:""},{id:"hts syphilis",name:"Syphilis Test",icon:""},{id:"hts hepatitis b",name:"Hepatitis B Test",icon:""},{id:"hts recency test",name:"Recency",icon:"usage.png",patientUrl:"/hts/recency"}],"HTS_PROGRAMS"),S["a"].isAdmin())return t();S["a"].isProvider()&&Object(Wn["b"])({id:"provider_code",helpText:"Enter HTS Provider Code",type:qn["b"].TT_TEXT,isRequired:()=>!0},e=>{S["a"].getUserProperty(ea["a"]).then(n=>{n["property_value"]===""+e.value?t():Object(R["e"])("Invalid provider code provided")}).catch(e=>Object(R["e"])(""+e))})},appStore:{OFFER_RECENCY:{get:()=>ta["b"].offerRecencyTest(),canReloadCache:e=>!Object(ie["b"])()||"boolean"!==typeof e.state},REPORT_HISTORY:{get:()=>({}),canReloadCache:({state:e})=>Object(ie["b"])()&&!!localStorage.getItem(Zn["b"].CAN_CACHE)&&Object(ae["isEmpty"])(e)}},patientProgramInfoData(e){let t={};return[{label:"HIV Status",value:"...",init:async()=>{try{t=await W["a"].getProgramInformation(e)}catch(n){console.error(n)}},staticValue:()=>t.hiv_status||"None"},{label:"Is Pregnant",value:"...",staticValue:()=>t.is_pregnant||"N/A"},{label:"Is circumcised",value:"...",staticValue:()=>t.is_circumcised||"N/A"},{label:"ART Outcome",value:"...",staticValue:()=>t.art_outcome||"N/A"}]},confirmationSummary:e=>{const t=null===e||void 0===e?void 0:e.getID();return{"Patient Identifiers":()=>[{label:"NPID",value:"...",staticValue:()=>e.getNationalID()}],"GIVEN RESULTS":()=>{const e=async e=>await U["a"].getFirstValueCoded(t,e)||"Unknown";return[{label:"HIV status",value:"...",asyncValue:async()=>e("HIV status")},{label:"Hepatitis B",value:"...",asyncValue:async()=>e("Hepatitis B Test Result")},{label:"Syphilis",value:"...",asyncValue:async()=>e("Syphilis Test Result")}]},REFERRALS:async()=>{const e=[];return await U["a"].getAll(t,"Referrals ordered").then(t=>{t&&t.forEach(n=>{e.push({label:n.value_text||"",value:K["b"].toStandardHisDisplayFormat(t.obs_datetime)})})}),e},APPOINTMENTS:()=>[{label:"Next appointment",value:"...",asyncValue:async()=>{const e=await U["a"].getFirstObs(t,"Appointment date");return e?K["b"].toStandardHisDisplayFormat(e.value_datetime):"N/A"}},{label:"ART appointment",value:"...",asyncValue:async()=>{const e=await U["a"].getFirstObs(t,"ART visit");return e?K["b"].toStandardHisDisplayFormat(e.value_datetime):"N/A"}}],"ITEMS RECEIVED":()=>{const e=async e=>{const n=await U["a"].getFirstObs(t,e);return n?`${n.value_numeric} (${K["b"].toStandardHisDisplayFormat(n.obs_datetime)})`:"N/A"};return[{label:"Male condoms",value:"...",asyncValue:()=>e("Male condoms")},{label:"Female condoms",value:"...",asyncValue:()=>e("Female condoms")},{label:"FRS",value:"...",asyncValue:()=>e("FRS")}]},OTHER:()=>{const n=[{label:"Marital status",value:"...",asyncValue:async()=>await U["a"].getFirstValueCoded(t,"Marital status")||"Unknown"}];return e.isMale()?n.push({label:"Is Circumcised",value:"...",asyncValue:async()=>await U["a"].getFirstValueCoded(t,"Circumcision status")||"Unknown"}):n.push({label:"Pregnancy status",value:"...",asyncValue:async()=>await U["a"].getFirstValueCoded(t,"Pregnancy status")||"Unknown"}),n}}},overridePatientDashboardCards:()=>[{id:"c2",items:[],cache:{},color:"success",isLoading:!1,label:"Appointments",icon:"",isEnabled:!0,subscription:{c1:({encounters:e,card:t,date:n})=>{t.items=[];const a=e=>K["b"].toStandardHisDisplayFormat(e);t.items=aa(e,"APPOINTMENT",{"Appointment date":e=>({label:"Next test",value:a(""+e.value_datetime)})}),t.items=[...t.items,...aa(e,"REFERRAL",{"ART visit":e=>({label:"ART Date",value:a(""+e.value_datetime)})})],t.cache[n]=t.items}},onClick:()=>{}},{id:"c3",items:[],cache:{},color:"warning",isLoading:!1,label:"Referrals",icon:"",isEnabled:!0,subscription:{c1:({encounters:e,card:t,date:n})=>{t.items=aa(e,"REFERRAL",{"Referrals ordered":(e,t)=>({label:e.value_text,value:K["b"].toStandardHisTimeFormat(t.encounter_datetime)})}),t.cache[n]=t.items}},onClick:()=>{}},{id:"c4",items:[],cache:{},color:"primary",isLoading:!1,label:"Given Results",icon:"",isEnabled:!0,subscription:{c1:({encounters:e,card:t,date:n})=>{t.items=aa(e,"Testing",{"HIV status":e=>({label:"HIV Result",value:$["a"].getCachedConceptName(e.value_coded||0)}),"Hepatitis B Test Result":e=>({label:"Hepatitis B Result",value:$["a"].getCachedConceptName(e.value_coded||0)}),"Syphilis Test Result":e=>({label:"Syphilis Result",value:$["a"].getCachedConceptName(e.value_coded||0)})}),t.cache[n]=t.items}},onClick:()=>{}}],homeOverviewComponent:Yn,primaryPatientActivites:Kn,secondaryPatientActivites:Xn};var ia=oa;const ca=[fe,ia,He,jt,Mt,nn,un,In];function ra(){return ca.reduce((e,t)=>e.concat(t.appRoutes),[])}t["b"]=ca},fa73:function(e,t,n){"use strict";n.d(t,"a",(function(){return d}));var a=n("ade3"),o=(n("14d9"),n("1c74")),i=n("2ef0"),c=n("4db7"),r=n("9283"),s=n("23e6"),l=n("cc74");class d extends o["e"]{constructor(){super(),Object(a["a"])(this,"patientID",void 0),Object(a["a"])(this,"enabled",void 0),this.patientID=-1,this.enabled=!1}static getRemainingNpids(){return o["e"].getJson("dde/patients/remaining_npids",{program_id:o["e"].getProgramID()})}setPatientID(e){this.patientID=e}async loadDDEStatus(){this.enabled=await l["b"].ddeEnabled()}isEnabled(){return this.enabled}postMerge(e){const[t,...n]=e.map(e=>({patient_id:e.patientID,doc_id:e.docID||""}));return this.patientID=t.patient_id,this.mergePatients({primary:t,secondary:n,program_id:o["e"].getProgramID()})}checkPotentialDuplicates(e){return o["e"].getJson("dde/patients/match_by_demographics",{...e,program_id:o["e"].getProgramID()})}hasPatientDoubles(e){return e.map(t=>e.map(e=>e.patient_id).includes(t.patient_id)).some(Boolean)}async searchDemographics(e){const t=await o["e"].getJson("dde/patients/find_by_name_and_gender",{program_id:o["e"].getProgramID(),...e}),n=(e,t)=>{const n=new s["a"](e);return{patient_type:t,doc_id:n.getPatientIdentifier(27),...e}};if(t){const e=t.locals.map(e=>n(e,"Local")),a=t.remotes.map(e=>n(e,"Remote"));return e.concat(a)}return[]}async searchNpid(e){const t=await this.findNpid(e);if(t){const e=t.locals.concat(t.remotes);if(Object(i["isEmpty"])(e))return[];const n=this.hasPatientDoubles(t.locals),a=this.hasPatientDoubles(t.remotes);return this.patientID=e[0].patient_id,n||a?e:e[0]}return[]}findNpid(e){return o["e"].getJson("dde/patients/find_by_npid",{npid:e,program_id:o["e"].getProgramID()})}findVoidedIdentifier(e){return o["e"].getJson("search/patients/by_identifier",{type_id:3,voided:!0,identifier:e})}shouldCreateNpid(e){return!Object(i["isEmpty"])(e)&&e.npid}formatDiffValuesByType(e,t){const n={};for(const a in e)n[a]=e[t];return n}diffsToTurple(e){const t=[],n=(e,t)=>"string"===typeof t&&e.match(/date/i)?r["b"].toStandardHisDisplayFormat(t):t;for(const a in e){const o=e[a],i=a.split("_").map(e=>e.charAt(0).toUpperCase()+e.slice(1)).join(" ");t.push([i,n(a,o.local),n(a,o.remote)])}return t}shouldUpdateDiffs(e){return!Object(i["isEmpty"])(e)}mergePatients(e){return o["e"].postJson("dde/patients/merge",e)}reassignNpid(e,t=this.patientID){return o["e"].postJson("dde/patients/reassign_npid",{program_id:o["e"].getProgramID(),patient_id:t,doc_id:e})}createNPID(e){return o["e"].postJson("patient_identifiers",{identifier:e,patient_id:this.patientID,identifier_type:3})}printNpid(e=this.patientID){return new c["a"](e).printNidLbl()}getLocalAndRemoteDiffs(){return o["e"].getJson("dde/patients/diff",{patient_id:this.patientID,program_id:o["e"].getProgramID()})}updateLocalDifferences(e){return o["e"].putJson("people/"+this.patientID,{program_id:o["e"].getProgramID(),...e})}refreshDemographics(){return o["e"].getJson("dde/patients/refresh",{patient_id:this.patientID,program_id:o["e"].getProgramID()})}}},fa94:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var a=n("ade3"),o=n("1c74");class i extends o["e"]{constructor(){super(),Object(a["a"])(this,"programID",void 0),Object(a["a"])(this,"startDate",void 0),Object(a["a"])(this,"endDate",void 0),Object(a["a"])(this,"date",void 0),this.startDate="",this.endDate="",this.date=o["e"].getSessionDate(),this.programID=o["e"].getProgramID()}setStartDate(e){this.startDate=e}setEndDate(e){this.endDate=e}buildRequestParams(e){const t={};return this.startDate&&(t["start_date"]=this.startDate),this.endDate&&(t["end_date"]=this.endDate),this.date&&(t["date"]=this.date),this.programID&&(t["program_id"]=this.programID),{...t,...e}}}},ff2d:function(e,t,n){}});
//# sourceMappingURL=app.90a171bc.js.map