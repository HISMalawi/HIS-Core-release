{"version":3,"sources":["webpack:///./node_modules/eslint-loader/index.js","webpack:///./node_modules/vue-loader-v16/dist/templateLoader.js","webpack:///./node_modules/cache-loader/dist/cjs.js","webpack:///./src/apps/OPD/views/reports/moh/HMIS/HMIS17.vue","webpack:///./src/apps/OPD/views/reports/moh/HMIS/HMISTemplate.vue"],"names":["HMISReportService","OpdReportService","constructor","super","this","regenerate","setRegenerate","requestHMIS15","getReport","request","requestHMIS17","renderResults","params","all","count","key","value","Object","entries","temp","condition","item","id","name","total","totalPatientIds","key1","value1","conditionDetails","length","push","getCSVString","IDSRConditionsObj","CSVString","row","_hoisted_1","_hoisted_2","_createVNode","render","_ctx","_cache","$props","$setup","$data","$options","_component_ion_loading","_resolveComponent","_component_his_standard_form","_component_hmis_header","_component_hmis_template","_component_ion_content","_component_his_footer","_component_ion_page","_openBlock","_createBlock","_Fragment","isLoading","message","reportReady","_createCommentVNode","onOnFinish","onPeriod","skipSummary","fields","default","_withCtx","componentKey","reportName","ref","periodLabel","periodDates","clinicName","totalOPDVisits","TotalOPDVisits","onDrillDown","hmis15Data","_","btns","defineComponent","mixins","ReportMixinVue","components","IonLoading","HmisHeader","HmisTemplate","HisStandardForm","HisFooter","IonPage","IonContent","data","formData","computedFormData","reportID","getLocationName","created","getBtns","getDateDurationFields","methods","form","config","report","setStartDate","HisDate","toStandardHisFormat","start_date","setEndDate","end_date","getReportPeriod","hmis","visits","getClinicRegistrations","error","console","log","size","slot","color","visible","onClick","rep","$refs","onDownload","exportToCustomPDF","$router","path","__exports__","class","style","_component_report_table","columns","rows","tableCssTheme","ReportTable","conditions","table","thTxt","props","Conditions","buildRows","dayjs","format","Service","getCoreVersion","getApiVersion","getSiteUUID","csvData","Blob","type","reportTitle","quarter","navigator","msSaveBlob","link","document","createElement","href","window","URL","createObjectURL","setAttribute","body","appendChild","click","removeChild","forEach","td","textAlign","buildRow","patientIds","tdLink","async","watch","immediate","handler"],"mappings":"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","file":"js/chunk-6afe013c.5e6c647b.js","sourcesContent":["import { OpdReportService } from \"./opd_report_service\";\n\nexport class HMISReportService extends OpdReportService {\n    regenerate: boolean;\n    constructor() {\n        super()\n        this.regenerate = false\n    }\n\n    setRegenerate(regenerate: boolean) {\n        this.regenerate = regenerate\n    }\n\n    requestHMIS15() {\n        return this.getReport('generate_hmis_15_report', {\n            request: 'true'\n        })\n    }\n\n    requestHMIS17() {\n        return this.getReport('generate_hmis_17_report', {\n            request: 'true',\n        })\n    }\n\n    renderResults(params: any) {\n        const all = []\n        let count = 1\n        for (const [key, value] of Object.entries(params)) {\n            const temp: any = []\n            const condition: any = value\n            const item = {\n                id: 0,\n                name: '',\n                total: 0,\n                totalPatientIds: ''\n            }\n            item.name = key\n            let total = 0\n            item.id = count\n            count += 1 \n            for (const [key1, value1] of Object.entries(condition)) {\n                key1\n                const conditionDetails: any = value1\n                if (conditionDetails != null) {\n                    total +=conditionDetails.length;\n                    item.total = total\n                    if(conditionDetails.length) {\n                        temp.push(...conditionDetails)\n                        item.totalPatientIds = temp\n                    }\n            }\n          }\n          all.push(item)\n        }\n        return all\n    }\n\n    getCSVString(IDSRConditionsObj: any) {\n        let CSVString = `Diseases/Events/Conditions, #,\\n`\n        for(const condition of IDSRConditionsObj) {\n          const row = `${condition.name},${condition.total},\\n`\n          CSVString+=row\n        }\n        return {CSVString}\n    }\n}\n","import { resolveComponent as _resolveComponent, createVNode as _createVNode, openBlock as _openBlock, createBlock as _createBlock } from \"vue\"\n\nconst _hoisted_1 = {\n  class: \"my-table\",\n  style: {\"margin\":\"auto\",\"width\":\"95%\",\"margin-top\":\"3%\",\"margin-bottom\":\"3%\"}\n}\n\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  const _component_report_table = _resolveComponent(\"report-table\")\n\n  return (_openBlock(), _createBlock(\"div\", _hoisted_1, [\n    _createVNode(_component_report_table, {\n      columns: _ctx.columns,\n      rows: _ctx.rows,\n      config: {tableCssTheme: _ctx.tableCssTheme}\n    }, null, 8, [\"columns\", \"rows\", \"config\"])\n  ]))\n}","\n/* eslint-disable @typescript-eslint/camelcase */\nimport { defineComponent } from 'vue'\nimport { HMISReportService } from \"@/apps/OPD/services/hmis_report_service\"\nimport { Service } from \"@/services/service\"\nimport dayjs from 'dayjs'\nimport ReportTable from \"@/components/DataViews/tables/ReportDataTable.vue\"\nimport table, { ColumnInterface, RowInterface } from \"@/components/DataViews/tables/ReportDataTable\"\n\nexport default defineComponent({\n  components: { ReportTable },\n  data: function(){\n    return {\n      conditions: [] as any,\n      tableCssTheme: 'opd-report-theme',\n      total: ' Total ',\n      rows: [] as RowInterface[][],\n      columns: [\n      [\n        table.thTxt(''),\n        table.thTxt('Diseases/Events/Conditions'),\n        table.thTxt('UNVERIFIED'),\n        table.thTxt('VERIFIED'),\n      ]\n    ] as ColumnInterface[][],\n    }\n  },\n  props: ['params', 'periodDates', 'quarter', 'onDrillDown', 'reportName'],\n  methods: {\n   renderResults() {\n     const report = new HMISReportService()\n     const Conditions = report.renderResults(this.params)\n     if(Conditions.length) {\n       this.conditions = Conditions\n       this.rows = this.buildRows(Conditions)\n     } \n   },\n   onDownload() {\n     const report = new HMISReportService()\n     let {CSVString} = report.getCSVString(this.conditions)\n     CSVString += `\n          Date Created: ${dayjs().format('DD/MMM/YYYY HH:MM:ss')}\n          His-Core Version: ${Service.getCoreVersion()}\n          API Version: ${Service.getApiVersion()}\n          Report Period: ${this.periodDates}\n          Site: ${Service.getLocationName()}\n          Site UUID: ${Service.getSiteUUID()}`\n          ;\n      // }\n      const csvData = new Blob([CSVString], { type: \"text/csv;charset=utf-8;\" });\n      //IE11 & Edge\n      const reportTitle = `${Service.getLocationName()} ${this.reportName} ${this.quarter}`;\n      \n      if (navigator.msSaveBlob) {\n        navigator.msSaveBlob(csvData, 'exportFilename');\n      } else {\n        //In FF link must be added to DOM to be clicked\n        const link = document.createElement(\"a\");\n        link.href = window.URL.createObjectURL(csvData);\n        link.setAttribute(\"download\", `${reportTitle}.csv`);\n        document.body.appendChild(link);\n        link.click();\n        document.body.removeChild(link);\n      }\n   },\n   buildRows(data: any): RowInterface[][] {\n     const rows: RowInterface[][] = []\n     data.forEach((condition: { \n       id: number;\n       name: string;\n       total: number;\n       totalPatientIds: any;\n\n       }) => {\n        rows.push([\n          table.td(condition.id, {style: {textAlign: 'left'}}),\n          table.td(condition.name, {style: {textAlign: 'left'}}),\n          this.buildRow(this.total+'('+condition.name+')', condition.total, condition.totalPatientIds),\n          table.td(''),\n        ])\n     })\n     return rows\n   },\n   buildRow(name: string, count: number, patientIds: any) {\n    if (!(count > 0)) {\n      return table.td(0)\n     } else {\n      return table.tdLink(\n      count,\n      async () =>  this.onDrillDown(name, patientIds)\n      )\n     }\n   }\n  },\n  watch: {\n    params: {\n      immediate: true,\n      handler() {\n        this.renderResults();\n      }\n    }\n  }\n})\n","import { render } from \"./HMIS17.vue?vue&type=template&id=6cea49ac&ts=true\"\nimport script from \"./HMIS17.vue?vue&type=script&lang=ts\"\nexport * from \"./HMIS17.vue?vue&type=script&lang=ts\"\n\nimport exportComponent from \"/home/andrew-dev/Projects/HIS-Core/node_modules/vue-loader-v16/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","import { render } from \"./HMISTemplate.vue?vue&type=template&id=0bcecae1&ts=true\"\nimport script from \"./HMISTemplate.vue?vue&type=script&lang=ts\"\nexport * from \"./HMISTemplate.vue?vue&type=script&lang=ts\"\n\nimport exportComponent from \"/home/andrew-dev/Projects/HIS-Core/node_modules/vue-loader-v16/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__"],"sourceRoot":""}