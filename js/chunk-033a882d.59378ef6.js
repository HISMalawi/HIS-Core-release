(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-033a882d"],{"8ee8":function(e,t,n){"use strict";n.d(t,"b",(function(){return o})),n.d(t,"a",(function(){return d}));var a=n("cc6f"),i=n("71c3"),s=n("2ef0"),r=n("9283");const o={"Once a day (OD)":1,"Twice a day (BD)":2,"Three a day (TDS)":3,"Four times a day (QID)":4,"Five times a day (5X/D)":5,"Six times a day (Q4HRS)":6,"In the morning (QAM)":.5,"Once a week (QWK)":.14,"Once a month":.03,"Twice a month":.071};class d extends a["a"]{constructor(e,t){super(e,25,t)}ttvDrugObj(){return{drug_inventory_id:609,dose:.5,equivalent_daily_dose:.5,frequency:"Once a day (od)",start_date:this.date,auto_expire_date:this.date,instructions:"Once a day",units:"ml"}}async updateTTvOrder(){const e=await this.dispenseTTV();if(!Object(s["isEmpty"])(e)){const t=e[0].order_id;return i["a"].updateDispensationOrders([{order_id:t,quantity:1}])}throw"Unable to dispense"}dispenseTTV(){return this.createOrders([this.ttvDrugObj()])}createOrders(e){return i["a"].create({drug_orders:e,encounter_id:this.getEncounterID()})}async submitTreatment(e){await this.createEncounter();const t=await this.createOrders(e.map(e=>this.buildDrugOrderObj(e))),n=new a["a"](this.patientID,54,this.providerID);await n.createEncounter(),e.forEach(e=>{const n=o[e.frequency]*e.duration;t.forEach(t=>{t.drug_inventory_id===e.id&&(t.quantity=n)})}),await i["a"].updateDispensationOrders(t)}buildDrugOrderObj(e){const t=new Date(this.date),n=t.setDate(t.getDate()+parseInt(""+e.duration)),a=e.dose||o[e.frequency],i=parseFloat(a)*o[e.frequency];return{drug_inventory_id:e.id,dose:a,equivalent_daily_dose:i,frequency:e.frequency,start_date:this.date,auto_expire_date:r["b"].toStandardHisFormat(new Date(n)),instructions:e.drug_name+":"+e.dose+" "+e.units+" "+e.frequency+"days",units:e.units}}}},dc52:function(e,t,n){"use strict";n.r(t);var a=n("7a23");function i(e,t,n,i,s,r){const o=Object(a["resolveComponent"])("his-standard-form"),d=Object(a["resolveComponent"])("ion-page");return Object(a["openBlock"])(),Object(a["createBlock"])(d,null,{default:Object(a["withCtx"])(()=>[Object(a["createVNode"])(o,{fields:e.formFields,skipSummary:!0,onFinishAction:e.onFinish,cancelDestinationPath:e.cancelDestination},null,8,["fields","onFinishAction","cancelDestinationPath"])]),_:1})}var s=n("7365"),r=n("d95e"),o=n("cc6f");class d extends o["a"]{constructor(e,t){super(e,54,t)}saveNoDispensationObs(){return this.saveValueTextObs("Tetanus toxoid vaccine","Not dispensed")}}var c=n("8ee8"),u=n("8a30"),l=Object(a["defineComponent"])({components:{IonPage:u["D"]},mixins:[s["a"]],data:()=>({formFields:[],service:{}}),watch:{ready:{handler(e){e&&(this.formFields=this.getFields())},immediate:!0}},methods:{async onFinish(e,t){await t["prescription"].action(),this.nextTask()},getFields(){return[{id:"prescription",helpText:"Prescription",type:r["b"].TT_YES_NO,validation:e=>e?null:["Value is required"],computedValue:e=>e.match(/true/i)?{action:async()=>{const e=new c["a"](this.patientID,this.providerID);await e.createEncounter(),await e.updateTTvOrder()}}:{action:async()=>{const e=new d(this.patientID,this.providerID);await e.createEncounter(),await e.saveNoDispensationObs()}},options:()=>[{label:"TTV has been given today",values:[{label:"yes",value:"true"},{label:"no",value:"false"}]}]}]}}}),p=n("6b0d"),h=n.n(p);const y=h()(l,[["render",i]]);t["default"]=y}}]);
//# sourceMappingURL=chunk-033a882d.59378ef6.js.map