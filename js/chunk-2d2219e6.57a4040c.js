(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d2219e6"],{cab4:function(t,e,a){"use strict";a.r(e);var o=a("7a23");function n(t,e,a,n,r,i){const s=Object(o["resolveComponent"])("report-template"),d=Object(o["resolveComponent"])("ion-page");return Object(o["openBlock"])(),Object(o["createBlock"])(d,null,{default:Object(o["withCtx"])(()=>[Object(o["createVNode"])(s,{title:t.title,period:t.period,rows:t.rows,fields:t.fields,columns:t.columns,config:{showIndex:!0},reportPrefix:"PEPFAR",onReportConfiguration:t.onPeriod},null,8,["title","period","rows","fields","columns","onReportConfiguration"])]),_:1})}var r=a("44e3"),i=a("9a5e"),s=a("4ba2"),d=a("9ceb"),l=a("8a30"),h=a("ad8d"),p=Object(o["defineComponent"])({mixins:[r["a"]],components:{ReportTemplate:s["a"],IonPage:l["D"]},data:()=>({title:"PEPFAR Curr Ml Report",rows:[],drillData:{},columns:[[d["a"].thTxt("Age group"),d["a"].thTxt("Gender"),d["a"].thTxt("Died"),d["a"].thTxt("IIT <3 mo"),d["a"].thTxt("IIT 3-5 mo"),d["a"].thTxt("IIT 6+ mo"),d["a"].thTxt("Transferred out"),d["a"].thTxt("Refused (Stopped)")]],cohort:{}}),created(){this.fields=this.getDateDurationFields()},methods:{async onPeriod(t,e){this.rows=[],this.report=new i["a"],this.report.setStartDate(e.start_date),this.report.setEndDate(e.end_date),this.period=this.report.getDateIntervalPeriod(),this.cohort=await this.report.getTxMlReport(),await this.setRows("F"),await this.setRows("M")},drilldown(t,e){const a=[[d["a"].thTxt("ARV#"),d["a"].thTxt("DOB"),d["a"].thTxt("Dispensed"),d["a"].thTxt("ARVs")]],o=async()=>{if(e in this.drillData)return this.drillData[e];const a=await this.report.getTxMMDClientLevelData(t);if(!a)return[];const o=this.report.remapTxClientLevelData(a).map(t=>{const e=t.drugs.map(t=>{const e=`\n                                <table style='width: 100%;'> \n                                    <td style='width: 65%;'>${t.name}</td>\n                                    <td style='width: 30%;'>(${t.quantity}, ${t.dose} a day)</td>\n                                </table>`,a=`${t.name} (Quantity: ${t.quantity} Dose: ${t.dose})`;return{tableView:e,dataView:a}});return[d["a"].td(t.id||"N/A"),d["a"].tdDate(t.dob),d["a"].tdDate(t.dispenseDate),d["a"].td(e.map(t=>t.tableView).join("<p/>"),{value:e.map(t=>t.dataView).join("|")})]});return this.drillData[e]=o,o};return t.length<=0?d["a"].td(0):d["a"].tdLink(t.length,()=>this.drilldownAsyncRows(e,a,o))},async setRows(t){const e=["Defaulted (new registration)","Defaulted (old registration)","Died","Stopped","Tranferred out","Unknown"];for(const o in h["a"]){const n=h["a"][o];try{const a=this.cohort[n][t],o=`${t} ${n}`,r=a.map((t,a)=>this.drilldown(t,`${o} ${e[a]}`));this.rows.push([d["a"].td(n),d["a"].td(t),...r])}catch(a){this.rows.push([d["a"].td(n),d["a"].td(t),d["a"].td(0),d["a"].td(0),d["a"].td(0),d["a"].td(0),d["a"].td(0),d["a"].td(0)])}}}}}),c=a("6b0d"),u=a.n(c);const w=u()(p,[["render",n]]);e["default"]=w}}]);
//# sourceMappingURL=chunk-2d2219e6.57a4040c.js.map