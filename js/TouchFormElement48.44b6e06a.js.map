{"version":3,"sources":["webpack:///./src/components/FormElements/FieldMixin.vue","webpack:///./src/components/FormElements/FieldMixin.vue?27e2","webpack:///./src/components/FormElements/LinkageCodeInput.vue?9bb9","webpack:///./src/utils/Damm.ts","webpack:///./src/components/FormElements/LinkageCodeInput.vue","webpack:///./src/components/FormElements/LinkageCodeInput.vue?62d4","webpack:///./src/components/Keyboard/HisKeyboard.vue?dcb9","webpack:///./src/components/Keyboard/HisKeyboard.vue","webpack:///./src/components/Keyboard/HisKeyboard.vue?396a","webpack:///./src/components/FormElements/LinkageCodeInput.vue?fcfc"],"names":["defineComponent","emits","props","config","type","Object","default","preset","label","value","defaultValue","Function","fdata","required","cdata","options","activationState","String","onValue","onValueUpdate","footerButtonEvent","__exports__","render","_ctx","_cache","$props","$setup","$data","$options","_component_ion_input","_resolveComponent","_component_ion_col","_component_ion_row","_component_ion_grid","_component_view_port","_component_his_keyboard","_openBlock","_createElementBlock","_Fragment","_createVNode","showFull","_withCtx","mode","readonly","inputIsReadOnly","inputmode","onClick","$event","onClickMask","modelValue","checkDigit","bookNo","style","textAlign","placeholder","class","_normalizeClass","activeMask","_","maxlength","inputLengthLimit","pageNo","rowNo","showKeyboard","_createBlock","key","onKeyPress","kbConfig","activeKeyboard","_createCommentVNode","CHECK_DIGIT_MAP","DAMM_LOOKUP_TABLE","zeroPadAdigit","digit","limit","paddingCount","length","Array","from","map","join","dammCheckDigit","input","match","replace","row","i","col","charAt","validateScanFormLinkageCode","checkDigitLetter","split","formattedPageNo","parseInt","formattedRowNo","checkDigitNo","toUpperCase","rebuiltCode","components","IonInput","IonRow","IonCol","IonGrid","HisKeyboard","ViewPort","mixins","FieldMixinVue","watch","clear","this","setup","emit","onActivated","computed","Platform","activePlatformProfile","keyboard","ref","NumberKeyboard","NUMBER_PAD_LO","kbMap","reactive","maxLength","val","handleVirtualInput","maskName","other","isValidLinkageCode","deep","_hoisted_1","_hoisted_2","_component_base_keyboard","_createElementVNode","_renderList","activeLayout","layout","index","keypress","BaseKeyboard","initalKeyboardName","data","handler","name","$nextTick","switchKeyboard","immediate","methods","isFunctionKey","kbIndex","KEY_BTN_NAV","item","btn","indexOf"],"mappings":"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","file":"js/TouchFormElement48.44b6e06a.js","sourcesContent":["\nimport { isPlatform } from '@ionic/core'\nimport { defineComponent } from 'vue'\n\nexport default defineComponent({\n    emits: [\n        'onValue',\n        'onFieldActivated'\n    ],\n    props: {\n        config: {\n            type: Object,\n            default: () => ({})\n        },\n        preset: {\n            type: Object,\n            default: () => ({\n                label: '',\n                value: ''\n            })\n        },\n        defaultValue: {\n            type: Function\n        },\n        fdata: {\n            type: Object,\n            required: true\n        },\n        cdata: {\n            type: Object,\n            required: true\n        },\n        options: {\n            type: Function,\n            default: () => ([])\n        },\n        activationState: {\n            type: String,\n            default: ''\n        },\n        onValue: {\n            type: Function\n        },\n        onValueUpdate: {\n            type: Function\n        },\n        footerButtonEvent: {\n            type: Object\n        }\n    }\n})\n","import script from \"./FieldMixin.vue?vue&type=script&lang=ts\"\nexport * from \"./FieldMixin.vue?vue&type=script&lang=ts\"\n\nconst __exports__ = script;\n\nexport default __exports__","import { resolveComponent as _resolveComponent, normalizeClass as _normalizeClass, createVNode as _createVNode, withCtx as _withCtx, openBlock as _openBlock, createBlock as _createBlock, createCommentVNode as _createCommentVNode, Fragment as _Fragment, createElementBlock as _createElementBlock } from \"vue\"\n\nexport function render(_ctx: any,_cache: any,$props: any,$setup: any,$data: any,$options: any) {\n  const _component_ion_input = _resolveComponent(\"ion-input\")!\n  const _component_ion_col = _resolveComponent(\"ion-col\")!\n  const _component_ion_row = _resolveComponent(\"ion-row\")!\n  const _component_ion_grid = _resolveComponent(\"ion-grid\")!\n  const _component_view_port = _resolveComponent(\"view-port\")!\n  const _component_his_keyboard = _resolveComponent(\"his-keyboard\")!\n\n  return (_openBlock(), _createElementBlock(_Fragment, null, [\n    _createVNode(_component_view_port, { showFull: false }, {\n      default: _withCtx(() => [\n        _createVNode(_component_ion_grid, null, {\n          default: _withCtx(() => [\n            _createVNode(_component_ion_row, null, {\n              default: _withCtx(() => [\n                _createVNode(_component_ion_col, null, {\n                  default: _withCtx(() => [\n                    _createVNode(_component_ion_input, {\n                      mode: \"md\",\n                      readonly: _ctx.inputIsReadOnly,\n                      inputmode: \"numeric\",\n                      type: \"number\",\n                      onClick: _cache[0] || (_cache[0] = ($event: any) => (_ctx.onClickMask('bookNo'))),\n                      modelValue: _ctx.checkDigit.bookNo,\n                      \"onUpdate:modelValue\": _cache[1] || (_cache[1] = ($event: any) => ((_ctx.checkDigit.bookNo) = $event)),\n                      style: { textAlign: 'center' },\n                      placeholder: \"Book No.\",\n                      class: _normalizeClass([{\n                            'highlighted-input' : _ctx.activeMask === 'bookNo'\n                        }, \"input_display\"])\n                    }, null, 8, [\"readonly\", \"modelValue\", \"class\"])\n                  ]),\n                  _: 1\n                }),\n                _createVNode(_component_ion_col, null, {\n                  default: _withCtx(() => [\n                    _createVNode(_component_ion_input, {\n                      mode: \"md\",\n                      readonly: _ctx.inputIsReadOnly,\n                      type: \"number\",\n                      inputmode: \"numeric\",\n                      maxlength: _ctx.inputLengthLimit.pageNo,\n                      onClick: _cache[2] || (_cache[2] = ($event: any) => (_ctx.onClickMask('pageNo'))),\n                      modelValue: _ctx.checkDigit.pageNo,\n                      \"onUpdate:modelValue\": _cache[3] || (_cache[3] = ($event: any) => ((_ctx.checkDigit.pageNo) = $event)),\n                      style: { textAlign: 'center' },\n                      placeholder: \"Page No.\",\n                      class: _normalizeClass([{\n                            'highlighted-input' : _ctx.activeMask === 'pageNo'\n                        }, \"input_display\"])\n                    }, null, 8, [\"readonly\", \"maxlength\", \"modelValue\", \"class\"])\n                  ]),\n                  _: 1\n                }),\n                _createVNode(_component_ion_col, null, {\n                  default: _withCtx(() => [\n                    _createVNode(_component_ion_input, {\n                      mode: \"md\",\n                      readonly: _ctx.inputIsReadOnly,\n                      inputmode: \"numeric\",\n                      type: \"number\",\n                      maxlength: _ctx.inputLengthLimit.rowNo,\n                      onClick: _cache[4] || (_cache[4] = ($event: any) => (_ctx.onClickMask('rowNo'))),\n                      modelValue: _ctx.checkDigit.rowNo,\n                      \"onUpdate:modelValue\": _cache[5] || (_cache[5] = ($event: any) => ((_ctx.checkDigit.rowNo) = $event)),\n                      class: _normalizeClass([{\n                            'highlighted-input' : _ctx.activeMask === 'rowNo'\n                        }, \"input_display\"]),\n                      style: { textAlign: 'center' },\n                      placeholder: \"Row No.\"\n                    }, null, 8, [\"readonly\", \"maxlength\", \"modelValue\", \"class\"])\n                  ]),\n                  _: 1\n                }),\n                _createVNode(_component_ion_col, null, {\n                  default: _withCtx(() => [\n                    _createVNode(_component_ion_input, {\n                      mode: \"md\",\n                      readonly: _ctx.inputIsReadOnly,\n                      maxlength: _ctx.inputLengthLimit.checkDigit,\n                      onClick: _cache[6] || (_cache[6] = ($event: any) => (_ctx.onClickMask('checkDigit'))),\n                      class: _normalizeClass([{\n                            'highlighted-input' : _ctx.activeMask === 'checkDigit'\n                        }, \"input_display\"]),\n                      modelValue: _ctx.checkDigit.checkDigit,\n                      \"onUpdate:modelValue\": _cache[7] || (_cache[7] = ($event: any) => ((_ctx.checkDigit.checkDigit) = $event)),\n                      style: { textAlign: 'center' },\n                      placeholder: \"Check digit\"\n                    }, null, 8, [\"readonly\", \"maxlength\", \"class\", \"modelValue\"])\n                  ]),\n                  _: 1\n                })\n              ]),\n              _: 1\n            })\n          ]),\n          _: 1\n        })\n      ]),\n      _: 1\n    }),\n    (_ctx.showKeyboard)\n      ? (_openBlock(), _createBlock(_component_his_keyboard, {\n          key: 0,\n          onKeyPress: _ctx.onKeyPress,\n          kbConfig: _ctx.activeKeyboard\n        }, null, 8, [\"onKeyPress\", \"kbConfig\"]))\n      : _createCommentVNode(\"\", true)\n  ], 64))\n}","const CHECK_DIGIT_MAP: Record<string, number> = {\n    'B': 0,\n    'F': 1,\n    'G': 2,\n    'H': 3,\n    'J': 4,\n    'P': 5,\n    'V': 6,\n    'W': 7,\n    'X': 8,\n    'Z': 9\n}\n\nconst DAMM_LOOKUP_TABLE = [\n    [0, 3, 1, 7, 5, 9, 8, 6, 4, 2],\n    [7, 0, 9, 2, 1, 5, 4, 8, 6, 3],\n    [4, 2, 0, 6, 8, 7, 1, 3, 5, 9],\n    [1, 7, 5, 0, 9, 8, 3, 4, 2, 6],\n    [6, 1, 2, 3, 0, 4, 5, 9, 7, 8],\n    [3, 6, 7, 4, 2, 0, 9, 5, 8, 1],\n    [5, 8, 6, 9, 7, 2, 0, 1, 3, 4],\n    [8, 9, 4, 5, 3, 6, 2, 0, 1, 7],\n    [9, 4, 3, 8, 6, 1, 7, 2, 0, 5],\n    [2, 5, 8, 1, 4, 3, 6, 7, 9, 0]\n]\n\n/**\n * Appends zeros at the begining of a string using a provided limit\n * @param digit \n * @param limit \n * @returns \n */\nexport function zeroPadAdigit(digit: number, limit: number) {\n    const paddingCount = limit - `${digit}`.length\n    if (paddingCount <= 0) return `${digit}`\n    return `${Array.from({ length: paddingCount }).map(() => 0).join('') }${digit}`\n}\n\n/**\n * Uses lookup take to generate a check digit that can be used for validation..\n * Lookup Damm algorithm on google, too lazy to post links here ;)\n * @param input \n * @returns \n */\nexport function dammCheckDigit(input: string) {\n    if (!input.match(/^\\d+$/)) {\n        input = input.replace(/\\D/g, '');\n    }\n    let row = 0;\n    for(let i = 0; i < input.length; i++) {\n        let col: any = input.charAt(i);\n        row = DAMM_LOOKUP_TABLE[row][col];\n    }\n    return `${row}`\n}\n\n/**\n * Validates scanform linkage code using a check digit generated by damm and extracted\n * check digit from provided string\n * @param input \n * @returns \n */\nexport function validateScanFormLinkageCode(input: string) {\n    const [bookNo, pageNo, rowNo, checkDigitLetter] = input.split('-')\n    if (!(bookNo && pageNo && rowNo && checkDigitLetter)) return false\n    const formattedPageNo = zeroPadAdigit(parseInt(pageNo), 3)\n    const formattedRowNo = zeroPadAdigit(parseInt(rowNo), 2)\n    const checkDigitNo = CHECK_DIGIT_MAP[checkDigitLetter.toUpperCase()]\n    const rebuiltCode = `${bookNo}-${formattedPageNo}-${formattedRowNo}`\n    return dammCheckDigit(rebuiltCode) === `${checkDigitNo}`\n}\n","\nimport { \n    IonInput,\n    IonRow,\n    IonCol,\n    IonGrid\n} from \"@ionic/vue\"\nimport { computed, defineComponent, onActivated, reactive, ref, watch } from 'vue'\nimport HisKeyboard from \"@/components/Keyboard/HisKeyboard.vue\"\nimport { NUMBER_PAD_LO } from \"@/components/Keyboard/KbLayouts\"\nimport ViewPort from \"@/components/DataViews/ViewPort.vue\"\nimport FieldMixinVue from './FieldMixin.vue'\nimport handleVirtualInput from \"@/components/Keyboard/KbHandler\"\nimport Platform from \"@/composables/usePlatform\"\nimport { validateScanFormLinkageCode } from \"@/utils/Damm\"\n\nexport default defineComponent({\n    components: { \n        IonInput, \n        IonRow,\n        IonCol,\n        IonGrid,\n        HisKeyboard, \n        ViewPort\n    },\n    mixins: [FieldMixinVue],\n    watch: {\n        clear() {\n            this.checkDigit.bookNo = ''\n            this.checkDigit.pageNo = ''\n            this.checkDigit.rowNo = ''\n            this.checkDigit.checkDigit = ''\n            this.activeMask = 'bookNo'\n            this.showKeyboard = true\n        }\n    },\n    setup(props, { emit }) {\n        onActivated(() => emit('onFieldActivated', this))\n        const inputLengthLimit: any = {\n            'bookNo': 5,\n            'checkDigit': 1,\n            'pageNo': 3,\n            'rowNo': 2,\n        }\n        const inputIsReadOnly = computed(() => Platform().activePlatformProfile.value.keyboard === 'HIS_KEYBOARD_ONLY')\n        const activeMask = ref<'bookNo'|'pageNo'|'rowNo'|'checkDigit'|''>('bookNo')\n        const showKeyboard = ref(true)\n        const activeKeyboard = computed(() =>  {\n            const NumberKeyboard = [\n                NUMBER_PAD_LO,\n                [\n                   ['Delete'],\n                   ['Clear']\n                ]\n            ]\n            const kbMap: Record<string, any> = {\n                bookNo: NumberKeyboard,\n                pageNo: NumberKeyboard,\n                rowNo: NumberKeyboard,\n                checkDigit: [\n                    [\n                        ['B', 'F', 'G'],\n                        ['H', 'J', 'P'],\n                        ['V', 'W', 'X'],\n                        ['', 'Z', '']\n                    ],\n                    [\n                        ['Delete'],\n                        ['Clear']\n                    ]\n                ] \n            }\n            return kbMap[activeMask.value]\n        })\n\n        const checkDigit = reactive<Record<string, number|string>>({\n            bookNo:  '',\n            pageNo: '',\n            rowNo:  '',\n            checkDigit: ''\n        })\n\n        function onKeyPress(input: string) {\n            if (activeMask.value) {\n                const maxLength = inputLengthLimit[activeMask.value] || 0 \n                const val = handleVirtualInput(input, maxLength === 1 ? '' : `${checkDigit[activeMask.value]}`)\n                if (maxLength <= 1 || `${val}`.length <= maxLength ) {\n                    checkDigit[activeMask.value] = val\n                }\n            }\n        }\n\n        function onClickMask(maskName: 'bookNo'|'pageNo'|'rowNo'|'checkDigit') {\n            activeMask.value = maskName\n            showKeyboard.value = true\n        }\n\n        watch(checkDigit, (input) => {\n            const value = `${input.bookNo}-${input.pageNo}-${input.rowNo}-${input.checkDigit}`\n            emit('onValue', {  \n                label: value, \n                value: `${input.bookNo}${input.pageNo}${input.rowNo}${input.checkDigit}`,\n                other: {\n                    isValidLinkageCode: validateScanFormLinkageCode(value)\n                }\n            })\n        }, { deep: true })\n\n        return {\n            activeMask,\n            checkDigit,\n            showKeyboard,\n            inputIsReadOnly,\n            inputLengthLimit,\n            activeKeyboard,\n            onClickMask,\n            onKeyPress\n        }\n    }\n})\n","import { render } from \"./LinkageCodeInput.vue?vue&type=template&id=30658ee2&scoped=true&ts=true\"\nimport script from \"./LinkageCodeInput.vue?vue&type=script&lang=ts\"\nexport * from \"./LinkageCodeInput.vue?vue&type=script&lang=ts\"\n\nimport \"./LinkageCodeInput.vue?vue&type=style&index=0&id=30658ee2&scoped=true&lang=css\"\n\nimport exportComponent from \"/home/andrew-dev/Projects/HIS-Core/node_modules/vue-loader-v16/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-30658ee2\"]])\n\nexport default __exports__","import { renderList as _renderList, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock, resolveComponent as _resolveComponent, createVNode as _createVNode, createElementVNode as _createElementVNode } from \"vue\"\n\nconst _hoisted_1 = { class: \"his-floating-keyboard\" }\nconst _hoisted_2 = { class: \"his-floating-keyboard-content\" }\n\nexport function render(_ctx: any,_cache: any,$props: any,$setup: any,$data: any,$options: any) {\n  const _component_base_keyboard = _resolveComponent(\"base-keyboard\")!\n\n  return (_openBlock(), _createElementBlock(\"div\", _hoisted_1, [\n    _createElementVNode(\"div\", _hoisted_2, [\n      (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(_ctx.activeLayout, (layout, index) => {\n        return (_openBlock(), _createElementBlock(\"div\", { key: index }, [\n          _createVNode(_component_base_keyboard, {\n            layout: layout,\n            onKeyPress: _ctx.keypress\n          }, null, 8, [\"layout\", \"onKeyPress\"])\n        ]))\n      }), 128))\n    ])\n  ]))\n}","\nimport { defineComponent } from \"vue\";\nimport { KEY_BTN_NAV } from \"@/components/Keyboard/HisKbConfigurations\"\nimport BaseKeyboard from \"@/components/Keyboard/BaseKeyboard.vue\";\nexport default defineComponent({\n  components: { BaseKeyboard},\n  props: {\n    initalKeyboardName: {\n      type: String\n    },\n    kbConfig: {\n      type: Array,\n      required: true\n    },\n    onKeyPress: {\n      type: Function,\n      required: true,\n    },\n  },\n  data: () => ({\n    activeLayout: {} as Array<any>\n  }),\n  watch: {\n    initalKeyboardName: {\n      handler(name: string) {\n        if (name) {\n          this.$nextTick(() => this.switchKeyboard(name))\n        }\n      },\n      immediate: true\n    },\n    kbConfig: {\n      handler(keyboard: Array<any>){\n        if(keyboard) {\n          this.activeLayout = keyboard\n        }\n      },\n      deep: true,\n      immediate: true\n    }\n  },\n  methods: {\n    keypress(key: any) {\n      if (!this.isFunctionKey(key)) {\n        this.onKeyPress(key);\n      }\n    },\n    isFunctionKey(key: string) {  \n      if (this.switchKeyboard(key)) {\n        return true\n      }\n      return false\n    },\n    switchKeyboard(key: string): boolean {\n      const kbIndex = KEY_BTN_NAV.map(item => item.btn).indexOf(key)\n      if (kbIndex >= 0) {\n        this.activeLayout = KEY_BTN_NAV[kbIndex].keyboard\n        return true\n      }\n      return false\n    }\n  },\n});\n","import { render } from \"./HisKeyboard.vue?vue&type=template&id=7167c7d4&ts=true\"\nimport script from \"./HisKeyboard.vue?vue&type=script&lang=ts\"\nexport * from \"./HisKeyboard.vue?vue&type=script&lang=ts\"\n\nimport exportComponent from \"/home/andrew-dev/Projects/HIS-Core/node_modules/vue-loader-v16/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./LinkageCodeInput.vue?vue&type=style&index=0&id=30658ee2&scoped=true&lang=css\""],"sourceRoot":""}