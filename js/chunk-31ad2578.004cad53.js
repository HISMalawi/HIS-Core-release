(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-31ad2578"],{6472:function(e,t,c){},6967:function(e,t,c){"use strict";c("6472")},"868d":function(e,t,c){},a3fe:function(e,t,c){"use strict";c("868d")},b111:function(e,t,c){"use strict";var a=c("7a23");const n=Object(a["withScopeId"])("data-v-154d9c56");Object(a["pushScopeId"])("data-v-154d9c56");const r=Object(a["createTextVNode"])(" NPID : "),o=Object(a["createTextVNode"])(" Arv# : "),i=Object(a["createTextVNode"])(" Name : "),l=Object(a["createTextVNode"])(" Birth date : "),d=Object(a["createTextVNode"])(" Gender : "),s=Object(a["createTextVNode"])(" Home District : "),b=Object(a["createTextVNode"])(" Home Village : "),u=Object(a["createTextVNode"])(" Current District : "),O=Object(a["createTextVNode"])(" Current Village : ");Object(a["popScopeId"])();const j=n((function(e,t,c,n,j,p){return Object(a["openBlock"])(),Object(a["createBlock"])("div",{class:["his-card clickable",e.stateClass]},[Object(a["createVNode"])("li",null,[Object(a["createVNode"])("ul",null,[r,Object(a["createVNode"])("b",null,Object(a["toDisplayString"])(e.patient.npid),1)]),Object(a["createVNode"])("ul",null,[o,Object(a["createVNode"])("b",null,Object(a["toDisplayString"])(e.patient.arvNum),1)]),Object(a["createVNode"])("ul",null,[i,Object(a["createVNode"])("b",null,Object(a["toDisplayString"])(e.patient.name),1)]),Object(a["createVNode"])("ul",null,[l,Object(a["createVNode"])("b",null,Object(a["toDisplayString"])(e.patient.birthdate),1)]),Object(a["createVNode"])("ul",null,[d,Object(a["createVNode"])("b",null,Object(a["toDisplayString"])(e.patient.gender),1)]),Object(a["createVNode"])("ul",null,[s,Object(a["createVNode"])("b",null,Object(a["toDisplayString"])(e.patient.homeDistrict),1)]),Object(a["createVNode"])("ul",null,[b,Object(a["createVNode"])("b",null,Object(a["toDisplayString"])(e.patient.homeVillage),1)]),Object(a["createVNode"])("ul",null,[u,Object(a["createVNode"])("b",null,Object(a["toDisplayString"])(e.patient.currentDistrict),1)]),Object(a["createVNode"])("ul",null,[O,Object(a["createVNode"])("b",null,Object(a["toDisplayString"])(e.patient.currentVillage),1)])])],2)}));var p=Object(a["defineComponent"])({props:{patient:{type:Object,required:!0},isActive:{type:Boolean}},computed:{stateClass(){return{"active-card-color":this.isActive,"inactive-card-color":!this.isActive}}}}),m=(c("6967"),c("d959")),h=c.n(m);const g=h()(p,[["render",j],["__scopeId","data-v-154d9c56"]]);t["a"]=g},d725:function(e,t,c){"use strict";c.r(t);var a=c("7a23");const n={class:"ion-margin-start"},r=Object(a["createTextVNode"])(" Patient Merging "),o=Object(a["createTextVNode"])(" Merge Selected Patients ");function i(e,t,c,i,l,d){const s=Object(a["resolveComponent"])("ion-button"),b=Object(a["resolveComponent"])("ion-col"),u=Object(a["resolveComponent"])("ion-card-title"),O=Object(a["resolveComponent"])("ion-searchbar"),j=Object(a["resolveComponent"])("ion-card-header"),p=Object(a["resolveComponent"])("patient-card"),m=Object(a["resolveComponent"])("ion-card-content"),h=Object(a["resolveComponent"])("ion-card"),g=Object(a["resolveComponent"])("ion-row"),V=Object(a["resolveComponent"])("ion-grid"),y=Object(a["resolveComponent"])("Layout");return Object(a["openBlock"])(),Object(a["createBlock"])(y,null,{default:Object(a["withCtx"])(()=>[Object(a["createVNode"])(V,null,{default:Object(a["withCtx"])(()=>[Object(a["createVNode"])(g,null,{default:Object(a["withCtx"])(()=>[Object(a["createVNode"])(b,{size:"12",class:"padding"},{default:Object(a["withCtx"])(()=>[Object(a["createVNode"])("h2",n,[r,Object(a["createVNode"])(s,{class:"ion-float-end ion-margin-end",disabled:!e.enableMergeBtn,onClick:e.merge},{default:Object(a["withCtx"])(()=>[o]),_:1},8,["disabled","onClick"])])]),_:1}),(Object(a["openBlock"])(!0),Object(a["createBlock"])(a["Fragment"],null,Object(a["renderList"])(e.patients,t=>(Object(a["openBlock"])(),Object(a["createBlock"])(b,{size:"6",key:t.category},{default:Object(a["withCtx"])(()=>[Object(a["createVNode"])(h,null,{default:Object(a["withCtx"])(()=>[Object(a["createVNode"])(j,{color:"light"},{default:Object(a["withCtx"])(()=>[Object(a["createVNode"])(u,{class:"ion-margin-bottom"},{default:Object(a["withCtx"])(()=>[Object(a["createTextVNode"])(Object(a["toDisplayString"])(t.category)+" patients ",1)]),_:2},1024),Object(a["createVNode"])(O,{style:{width:"100%",height:"45px"},class:"box-input ion-no-padding ion-margin-end",placeholder:"Type Name or ARV Number and press enter",modelValue:t.query,"onUpdate:modelValue":e=>t.query=e,onKeyup:Object(a["withKeys"])(c=>e.searchPatient(t),["enter"])},null,8,["modelValue","onUpdate:modelValue","onKeyup"])]),_:2},1024),Object(a["createVNode"])(m,{color:"light",style:{height:"70vh","overflow-y":"auto"}},{default:Object(a["withCtx"])(()=>[(Object(a["openBlock"])(!0),Object(a["createBlock"])(a["Fragment"],null,Object(a["renderList"])(t.results,(c,n)=>(Object(a["openBlock"])(),Object(a["createBlock"])(p,{onClick:a=>e.onPatient(c,t.category),key:n,patient:c,isActive:c.isChecked},null,8,["onClick","patient","isActive"]))),128))]),_:2},1024)]),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1})]),_:1})}var l=c("8d56"),d=c("8a30"),s=c("23e6"),b=c("cc74"),u=c("6c02"),O=c("b111"),j=c("b5e4"),p=Object(a["defineComponent"])({components:{Layout:l["a"],IonGrid:d["IonGrid"],IonRow:d["IonRow"],IonCol:d["IonCol"],PatientCard:O["a"],IonSearchbar:d["IonSearchbar"]},setup(){const e=Object(u["f"])(),t=Object(a["reactive"])([{category:"primary",query:"",results:[]},{category:"secondary",query:"",results:[]}]),c=Object(a["computed"])(()=>t.every(e=>e.results.length>0&&e.results.some(e=>e.isChecked))),n=async e=>{if(e.match(/^(\w+-ARV-\w+)$/))return{type:"arv_number",value:e};if(e.match(/^(\d+)$/)){const t=await b["b"].sitePrefix();return{type:"arv_number",value:`${t}-ARV-${e}`}}return{type:"name",value:e}},r=e=>{const t={},c=e.split(" ").filter(e=>/\S/.test(e));return c.length>0&&(t["given_name"]=c[0],c[1]&&(t["family_name"]=c[1]),c[2]&&(t["middle_name"]=c[1],t["family_name"]=c[2])),t},o=async e=>{if(e.query)try{const{type:t,value:c}=await n(e.query),a="name"===t?await s["a"].search(r(c)):"arv_number"===t?await s["a"].findByOtherID(4,c):[];e.results=a.map((e,t)=>{const c=new s["a"](e);return{index:t,id:c.getID(),name:c.getFullName(),docID:c.getDocID(),birthdate:c.getBirthdate(),arvNum:c.getArvNumber(),npid:c.getNationalID(),gender:c.getGender(),homeDistrict:c.getHomeDistrict(),homeVillage:c.getHomeVillage(),currentDistrict:c.getCurrentDistrict(),currentVillage:c.getCurrentVillage(),isChecked:!1}})}catch(t){console.log(""+t)}},i=(e,c)=>{if("primary"===c)t[0].results.forEach(t=>{t.id===e.id?t.isChecked=!t.isChecked:t.isChecked=!1}),e.isChecked&&t[1].results.forEach(t=>{t.id===e.id&&(t.isChecked=!1)});else{if(e.isChecked)return e.isChecked=!1;e.isChecked=!t[0].results.some(t=>t.isChecked&&t.id===e.id)}},l=async()=>{if(await Object(j["a"])("Are you sure you want to merge these patients?"))try{const c=t[0].results.find(e=>e.isChecked),a=await s["a"].mergePatients({primary:{patient_id:c.id,doc_id:c.docID},secondary:t[1].results.filter(e=>e.isChecked).map(e=>({patient_id:e.id,doc_id:e.docID}))});e.push({name:"EMC Mastercard",params:{patientId:a["patient_id"]}})}catch(c){Object(j["c"])(""+c)}};return{patients:t,enableMergeBtn:c,searchPatient:o,onPatient:i,merge:l}}}),m=(c("a3fe"),c("d959")),h=c.n(m);const g=h()(p,[["render",i]]);t["default"]=g}}]);
//# sourceMappingURL=chunk-31ad2578.004cad53.js.map