(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-718da392"],{"1cf1":function(n,e,t){"use strict";(function(n){function r(){if("undefined"===typeof n){var e="undefined"!==typeof window?window:{},t=5e3,r=Date.now(),i=!1;e.document.addEventListener("deviceready",(function(){console.log("Ionic Native: deviceready event fired after "+(Date.now()-r)+" ms"),i=!0})),setTimeout((function(){!i&&e.cordova&&console.warn("Ionic Native: deviceready did not fire within "+t+"ms. This can happen when plugins are in an inconsistent state. Try removing plugins from plugins/ and reinstalling them.")}),t)}}t.d(e,"a",(function(){return r}))}).call(this,t("4362"))},"28e9":function(n,e,t){"use strict";(function(n){t.d(e,"a",(function(){return d})),t.d(e,"b",(function(){return w})),t.d(e,"c",(function(){return I})),t.d(e,"d",(function(){return N}));var r=t("e9b9"),i=t("6e77"),o={error:"cordova_not_available"},a={error:"plugin_not_installed"};function c(n){var e=function(){if(Promise)return new Promise((function(e,t){n(e,t)}));console.error("No Promise support or polyfill found. To enable Ionic Native support, please add the es6-promise polyfill before this script, or run with a library like Angular or on a recent browser.")};if("undefined"!==typeof window&&window.angular){var t=window.document,r=window.angular.element(t.querySelector("[ng-app]")||t.body).injector();if(r){var i=r.get("$q");return i((function(e,t){n(e,t)}))}console.warn("Angular 1 was detected but $q couldn't be retrieved. This is usually when the app is not bootstrapped on the html or body tag. Falling back to native promises which won't trigger an automatic digest when promises resolve.")}return e()}function u(n,e,t,r){var i,o;void 0===r&&(r={});var a=c((function(a,c){i=r.destruct?g(n,e,t,r,(function(){for(var n=[],e=0;e<arguments.length;e++)n[e]=arguments[e];return a(n)}),(function(){for(var n=[],e=0;e<arguments.length;e++)n[e]=arguments[e];return c(n)})):g(n,e,t,r,a,c),o=c}));return i&&i.error&&(a.catch((function(){})),"function"===typeof o&&o(i.error)),a}function s(n,e,t,r){return void 0===r&&(r={}),c((function(i,o){var a=g(n,e,t,r);a?a.error?o(a.error):a.then&&a.then(i).catch(o):o({error:"unexpected_error"})}))}function l(n,e,t,i){return void 0===i&&(i={}),new r["a"]((function(r){var o;return o=i.destruct?g(n,e,t,i,(function(){for(var n=[],e=0;e<arguments.length;e++)n[e]=arguments[e];return r.next(n)}),(function(){for(var n=[],e=0;e<arguments.length;e++)n[e]=arguments[e];return r.error(n)})):g(n,e,t,i,r.next.bind(r),r.error.bind(r)),o&&o.error&&(r.error(o.error),r.complete()),function(){try{if(i.clearFunction)return i.clearWithArgs?g(n,i.clearFunction,t,i,r.next.bind(r),r.error.bind(r)):g(n,i.clearFunction,[])}catch(o){console.warn("Unable to clear the previous observable watch for",n.constructor.getPluginName(),e),console.warn(o)}}}))}function f(n,e){return e="undefined"!==typeof window&&e?b(window,e):e||("undefined"!==typeof window?window:{}),Object(i["a"])(e,n)}function d(n,e,t){var r,i,c;return"string"===typeof n?r=n:(r=n.constructor.getPluginRef(),t=n.constructor.getPluginName(),c=n.constructor.getPluginInstallName()),i=w(r),!(!i||e&&"undefined"===typeof i[e])||("undefined"!==typeof window&&window.cordova?(m(t,c,e),a):(y(t,e),o))}function p(n,e){return n._objectInstance&&(!e||"undefined"!==typeof n._objectInstance[e])}function h(n,e,t,r){if(void 0===e&&(e={}),e.sync)return n;if("reverse"===e.callbackOrder)n.unshift(r),n.unshift(t);else if("node"===e.callbackStyle)n.push((function(n,e){n?r(n):t(e)}));else if("object"===e.callbackStyle&&e.successName&&e.errorName){var i={};i[e.successName]=t,i[e.errorName]=r,n.push(i)}else if("undefined"!==typeof e.successIndex||"undefined"!==typeof e.errorIndex){var o=function(){e.successIndex>n.length?n[e.successIndex]=t:n.splice(e.successIndex,0,t)},a=function(){e.errorIndex>n.length?n[e.errorIndex]=r:n.splice(e.errorIndex,0,r)};e.successIndex>e.errorIndex?(a(),o()):(o(),a())}else n.push(t),n.push(r);return n}function g(n,e,t,r,i,o){void 0===r&&(r={}),t=h(t,r,i,o);var a=d(n,e);if(!0===a){var c=w(n.constructor.getPluginRef());return c[e].apply(c,t)}return a}function v(n,e,t,r,i,o){if(void 0===r&&(r={}),t=h(t,r,i,o),p(n,e))return n._objectInstance[e].apply(n._objectInstance,t)}function w(n){return"undefined"!==typeof window?b(window,n):null}function b(n,e){for(var t=e.split("."),r=n,i=0;i<t.length;i++){if(!r)return null;r=r[t[i]]}return r}function m(n,e,t){t?console.warn("Native: tried calling "+n+"."+t+", but the "+n+" plugin is not installed."):console.warn("Native: tried accessing the "+n+" plugin but it's not installed."),e&&console.warn("Install the "+n+" plugin: 'ionic cordova plugin add "+e+"'")}function y(e,t){"undefined"===typeof n&&(t?console.warn("Native: tried calling "+e+"."+t+", but Cordova is not available. Make sure to include cordova.js or run in a device/simulator"):console.warn("Native: tried accessing the "+e+" plugin but Cordova is not available. Make sure to include cordova.js or run in a device/simulator"))}var I=function(n,e,t){return void 0===t&&(t={}),function(){for(var r=[],i=0;i<arguments.length;i++)r[i]=arguments[i];return t.sync?g(n,e,r,t):t.observable?l(n,e,r,t):t.eventObservable&&t.event?f(t.event,t.element):t.otherPromise?s(n,e,r,t):u(n,e,r,t)}};function N(n,e,t){return void 0===t&&(t={}),function(){for(var i=[],o=0;o<arguments.length;o++)i[o]=arguments[o];if(t.sync)return v(n,e,i,t);if(t.observable)return new r["a"]((function(r){var o;return o=t.destruct?v(n,e,i,t,(function(){for(var n=[],e=0;e<arguments.length;e++)n[e]=arguments[e];return r.next(n)}),(function(){for(var n=[],e=0;e<arguments.length;e++)n[e]=arguments[e];return r.error(n)})):v(n,e,i,t,r.next.bind(r),r.error.bind(r)),o&&o.error&&r.error(o.error),function(){try{return t.clearWithArgs?v(n,t.clearFunction,i,t,r.next.bind(r),r.error.bind(r)):v(n,t.clearFunction,[])}catch(o){console.warn("Unable to clear the previous observable watch for",n.constructor.getPluginName(),e),console.warn(o)}}}));if(t.otherPromise)return c((function(r,o){var a;a=t.destruct?v(n,e,i,t,(function(){for(var n=[],e=0;e<arguments.length;e++)n[e]=arguments[e];return r(n)}),(function(){for(var n=[],e=0;e<arguments.length;e++)n[e]=arguments[e];return o(n)})):v(n,e,i,t,r,o),a&&a.then?a.then(r,o):o()}));var a,u,s=c((function(r,o){a=t.destruct?v(n,e,i,t,(function(){for(var n=[],e=0;e<arguments.length;e++)n[e]=arguments[e];return r(n)}),(function(){for(var n=[],e=0;e<arguments.length;e++)n[e]=arguments[e];return o(n)})):v(n,e,i,t,r,o),u=o}));return a&&a.error&&(s.catch((function(){})),"function"===typeof u&&u(a.error)),s}}}).call(this,t("4362"))},"6b70":function(n,e,t){"use strict";t.d(e,"a",(function(){return a})),t.d(e,"b",(function(){return c}));var r=t("1cf1"),i=t("28e9");function o(n,e){for(var t=e.split("."),r=n,i=0;i<t.length;i++){if(!r)return null;r=r[t[i]]}return r}var a=function(){function n(){}return n.installed=function(){var n=!0===Object(i["a"])(this.pluginRef);return n},n.getPlugin=function(){return"undefined"!==typeof window?o(window,this.pluginRef):null},n.getPluginName=function(){var n=this.pluginName;return n},n.getPluginRef=function(){var n=this.pluginRef;return n},n.getPluginInstallName=function(){var n=this.plugin;return n},n.getSupportedPlatforms=function(){var n=this.platforms;return n},n.pluginName="",n.pluginRef="",n.plugin="",n.repo="",n.platforms=[],n.install="",n}();function c(n,e,t,r){return Object(i["c"])(n,e,t).apply(this,r)}t("e9b9");Object(r["a"])()},ada4:function(n,e,t){"use strict";t.r(e);var r=t("7a23"),i=t("23e6"),o=t("6b70"),a=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,e){n.__proto__=e}||function(n,e){for(var t in e)Object.prototype.hasOwnProperty.call(e,t)&&(n[t]=e[t])},n(e,t)};return function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}}(),c=function(n){function e(){var e=null!==n&&n.apply(this,arguments)||this;return e.Encode={TEXT_TYPE:"TEXT_TYPE",EMAIL_TYPE:"EMAIL_TYPE",PHONE_TYPE:"PHONE_TYPE",SMS_TYPE:"SMS_TYPE"},e}return a(e,n),e.prototype.scan=function(n){return Object(o["b"])(this,"scan",{callbackOrder:"reverse"},arguments)},e.prototype.encode=function(n,e){return Object(o["b"])(this,"encode",{},arguments)},e.pluginName="BarcodeScanner",e.plugin="phonegap-plugin-barcodescanner",e.pluginRef="cordova.plugins.barcodeScanner",e.repo="https://github.com/phonegap/phonegap-plugin-barcodescanner",e.platforms=["Android","BlackBerry 10","Browser","iOS","Windows"],e}(o["a"]),u=new c,s=t("b5e4"),l=t("cc74"),f=Object(r["defineComponent"])({name:"Scanner",data(){return{app:{},patientID:"",firstname:"",surname:"",gender:"",birthday:"",district:"",clientID:"",nationalID:"",patient:{},malawiNationalID:[],displayModal:!1}},async mounted(){this.scanBarcodeQRcode()},methods:{async scanBarcodeQRcode(){await u.scan().then(async n=>{if(n.text.length>30)if(await l["b"].malawiNationalIDScannerEnabled()){this.filterNationalID(n);const e=await i["a"].findByOtherID(28,this.clientID);if(0==e.length)this.searchPatientByNameGender();else{Object(s["d"])("Patient found");const n="person_id="+e[0].patient_id;this.$router.push("/patients/confirm?"+n)}}else Object(s["e"])("Scanning of Malawi National ID is disabled"),this.goHome();else{const e=await i["a"].findByNpid(n.text);0==e.length?(Object(s["e"])("Patient not found"),this.goHome()):this.filterPatientData(e)}}).catch(n=>{Object(s["e"])("Fails to scan"),this.goHome()})},async filterPatientData(n){const e=await i["a"].findByID(n[0].patient_id);e&&(this.patient=new i["a"](e),this.firstname=this.patient.getGivenName(),this.surname=this.patient.getFamilyName(),this.gender=this.patient.getGender(),this.birthday=this.patient.getBirthdate(),this.clientID=this.patient.getMalawiNationalID())},async goHome(){this.$router.push("/home")},filterNationalID(n){this.malawiNationalID=n.text.split("<"),this.malawiNationalID=this.malawiNationalID.at(-1).split("~"),this.clientID=this.malawiNationalID[2],this.surname=this.capitaliseFirstLetter(this.malawiNationalID[1].toLowerCase()),this.firstname=this.capitaliseFirstLetter(this.malawiNationalID[3].split(",")[0].toLowerCase()),this.gender=this.malawiNationalID[5],this.birthday=this.malawiNationalID[6]},searchPatientByNameGender(){this.$router.push({path:"/patient/registration",query:{given_name:this.firstname,family_name:this.surname,gender:this.gender,birthdate:this.birthday,malawiNationalID:this.clientID,nationalIDStatus:"true"}})},capitaliseFirstLetter(n){return n.replace(/(^\w|\s\w)/g,n=>n.toUpperCase())}}});const d=f;e["default"]=d}}]);
//# sourceMappingURL=chunk-718da392.4e83a79a.js.map