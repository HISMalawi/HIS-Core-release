import{F as r}from"./dynamic-import-helper-Bsjrd6Ro.js";import{H as p}from"./HisStandardForm-lonwENLb.js";import{d as u,be as n,aN as c,t as f,V as t,ad as m,_ as g,r as h,o as _,c as T}from"./index-DTBWhHAq.js";import{N as S}from"./KbLayouts-VRA-vjeH.js";import"./TouchScreenForm-BeJsJnwt.js";import"./ToolbarMediumCard-wr9sTFDK.js";import"./Transformers-BPPLlH12.js";import"./ViewPort-DbAo6hHM.js";const y=u({components:{HisStandardForm:p},methods:{async onFinish(e){const s=e.protocol.value,i=e.ip_address.value,a=e.port.value;n.setLocalStorage(s,i,a),await(await c.create({message:"Please wait...",backdropDismiss:!1})).present();const o=await n.healthCheck();c.dismiss(),!(o&&o.status===200)||!o?(f("\n          Unable to connect to: ".concat(s,"://").concat(i,": ").concat(a,"\n        ")),this.clearLocalStorage()):this.$router.back()},getFields(){this.fields=[{id:"protocol",helpText:"Select Protocol",type:r.TT_SELECT,requireNext:!1,validation:e=>t.required(e),options:()=>[{label:"HTTP",value:"http"},{label:"HTTPS",value:"https"}]},{id:"ip_address",helpText:"Enter IP Address",type:r.TT_IP_ADDRESS,validation:e=>t.required(e)||t.isIPAddress(e)},{id:"port",helpText:"Enter Port",validation:e=>t.required(e),type:r.TT_TEXT,config:{customKeyboard:[S,[["Delete"]]]}}]},async showConfigNotice(){this.isUsingLocalStorage()&&await m("Config notice","The system is currently using user specified configurations.                 Do you wish to reset back to server configurations?","",[{name:"Reset configurations",slot:"start",color:"success"},{name:"New configurations",slot:"end"}])==="Reset configurations"&&(this.clearLocalStorage(),this.$router.back())},isUsingLocalStorage(){return localStorage.getItem("useLocalStorage")==="true"},clearLocalStorage(){const e=["useLocalStorage","apiURL","apiPort","apiProtocol"];n.removeOnly(e)}},data(){return{fields:[]}},async mounted(){await this.showConfigNotice(),this.getFields()}});function L(e,s,i,a,l,o){const d=h("his-standard-form");return _(),T(d,{fields:e.fields,onFinishAction:e.onFinish,skipSummary:!0},null,8,["fields","onFinishAction"])}const k=g(y,[["render",L]]);export{k as default};
