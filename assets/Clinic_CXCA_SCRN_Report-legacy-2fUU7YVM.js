System.register(["./index-legacy-pSEoxn3J.js","./TableView-legacy-zlZiPhqK.js","./cxca_report_service-legacy-jMn3bXxR.js","./DrillPatientIds-legacy-Clv7og7q.js","./Export-legacy-YUdcFBN9.js","./index-legacy-0e7Z_1i0.js"],(function(e,t){"use strict";var a,r,l,s,n,i,o,c,u,d,p,v,_,g,f,m,b,y,h,L,w;return{setters:[e=>{a=e.d,r=e.v,l=e.m,s=e.o,n=e.aF,i=e.r,o=e.z,c=e.q,u=e.y,d=e.an,p=e.ao,v=e.cw,_=e.am,g=e.ar,f=e.a,m=e.b,b=e.w,y=e.e},e=>{h=e.v},e=>{L=e.C},e=>{w=e.D},null,null],execute:function(){const t=i([]),C=i(""),P=i(""),$=i(""),D=i(""),S=i(!1),x=i(""),T=a({components:{IonPage:l,IonLoading:r,v2Datatable:h},setup(){const e=async(e,t)=>{t.length<=0||(await o.create({component:w,backdropDismiss:!1,cssClass:"large-modal",componentProps:{title:e,subtitle:D,patientIdentifiers:t,onFinish:()=>o.getTop().then((e=>e&&o.dismiss()))}})).present()},a=[[{label:"#",ref:"index",span:{thRowspan:2}},{label:"Age group",ref:"age_group",span:{thRowspan:2}},{label:"Gender",ref:"gender",exportable:!1,span:{thRowspan:2}},{label:"1st time screened",ref:"",span:{thColspan:3}},{label:"Rescreened after previous negative",ref:"",span:{thColspan:3}},{label:"Post-treatment follow-up",ref:"",span:{thColspan:3}}],[{label:"Negative",ref:"first_time_screened_negative",secondaryLabel:"1st screened (Negative)",value:e=>e.first_time_screened.negative.length,tdClick:({column:t,data:a})=>e(`${a.age_group} ${t.secondaryLabel}`,a.first_time_screened.negative)},{label:"Positive",ref:"first_time_screened_positive",secondaryLabel:"1st time screened (Positive)",value:e=>e.first_time_screened.positive.length,tdClick:({column:t,data:a})=>e(`${a.age_group} ${t.secondaryLabel}`,a.first_time_screened.positive)},{label:"Suspected Cancer",ref:"first_time_screened_suspected_cancer",secondaryLabel:"1st screened(Suspected cancer)",value:e=>e.first_time_screened.suspected.length,tdClick:({column:t,data:a})=>e(`${a.age_group} ${t.secondaryLabel}`,a.first_time_screened.suspected)},{label:"Negative",ref:"rescreened_after_prev_visit_negative",secondaryLabel:"Rescreen after prev visit (Negative)",value:e=>e.rescreened_after_prev_visit.negative.length,tdClick:({column:t,data:a})=>e(`${a.age_group} ${t.secondaryLabel}`,a.rescreened_after_prev_visit.negative)},{label:"Positive",ref:"rescreened_after_prev_visit_positive",secondaryLabel:"Rescreen after prev visit (Positive)",value:e=>e.rescreened_after_prev_visit.positive.length,tdClick:({column:t,data:a})=>e(`${a.age_group} ${t.secondaryLabel}`,a.rescreened_after_prev_visit.positive)},{label:"Suspected cancer",ref:"rescreened_after_prev_visit_suspected",secondaryLabel:"Rescreen after prev visit (Suspected)",value:e=>e.rescreened_after_prev_visit.suspected.length,tdClick:({column:t,data:a})=>e(`${a.age_group} ${t.secondaryLabel}`,a.rescreened_after_prev_visit.suspected)},{label:"Negative",ref:"post_treatment_followup_negative",secondaryLabel:"Post-treatment followup(Negative)",value:e=>e.post_treatment_followup.negative.length,tdClick:({column:t,data:a})=>e(`${a.age_group} ${t.secondaryLabel}`,a.post_treatment_followup.negative)},{label:"Positive",ref:"post_treatment_followup_positive",secondaryLabel:"Post-treatment followup (Positive)",value:e=>e.post_treatment_followup.positive.length,tdClick:({column:t,data:a})=>e(`${a.age_group} ${t.secondaryLabel}`,a.post_treatment_followup.positive)},{label:"Suspected cancer",ref:"post_treatment_followup_suspected",secondaryLabel:"Post-treatment followup (Suspected)",value:e=>e.post_treatment_followup.suspected.length,tdClick:({column:t,data:a})=>e(`${a.age_group} ${t.secondaryLabel}`,a.post_treatment_followup.suspected)}]],r=async()=>{if(!C.value||!P.value)return c("Start date and end date required!");S.value=!0,t.value=[];const e=new L;e.startDate=C.value,e.endDate=P.value;try{t.value=(await e.getClinicReport("CLINIC CXCA SCRN",$.value)).slice(5).map(((e,t)=>(e.index=t+1,e.gender="Female",e)));const a=e=>{const a=a=>t.value.reduce(((t,r)=>t.concat(r[e][a]||[])),[]);return{positive:a("positive"),negative:a("negative"),suspected:a("suspected")}};t.value.push({age_group:"All",gender:"Female",index:t.value.length+1,first_time_screened:a("first_time_screened"),post_treatment_followup:a("post_treatment_followup"),rescreened_after_prev_visit:a("rescreened_after_prev_visit")})}catch(a){u("Unable to generate report!")}S.value=!1},l=()=>n([{id:"start_date",helpText:"Start Date",type:p.TT_FULL_DATE,validation:e=>d.required(e),computedValue:e=>e.value},{id:"end_date",helpText:"End Date",type:p.TT_FULL_DATE,validation:e=>d.required(e),computedValue:e=>e.value},{id:"screening_method",helpText:"Disaggregate by Screening Methods",type:p.TT_SELECT,computedValue:e=>e.value,validation:e=>d.required(e),options:()=>[{label:"All",value:"All"},{label:"VIA",value:"VIA"},{label:"PAP Smear",value:"PAP Smear"},{label:"HPV DNA",value:"HPV DNA"},{label:"Speculum Exam",value:"Speculum Exam"}]}],((e,t)=>{C.value=t.start_date,P.value=t.end_date,$.value=t.screening_method,D.value=`Period (${v(C.value)} to ${v(P.value)})`,o.dismiss(),x.value=`${v(C.value)} to ${v(P.value)}`,r()}));return s((()=>!t.value.length&&l())),{columns:a,isLoading:S,reportData:t,period:D,csvQuarter:x,generate:r,configure:l}}});e("default",_(T,[["render",function(e,t,a,r,l,s){const n=g("ion-loading"),i=g("v2Datatable"),o=g("ion-page");return m(),f(o,null,{default:b((()=>[y(n,{"is-open":e.isLoading,message:"Please wait..."},null,8,["is-open"]),y(i,{title:"CLINIC SCRN Report",csvQuarter:e.csvQuarter,subtitle:e.period,columns:e.columns,columnData:e.reportData,rowsPerPage:25,onConfigure:e.configure,onRefresh:()=>e.generate()},null,8,["csvQuarter","subtitle","columns","columnData","onConfigure","onRefresh"])])),_:1})}]]))}}}));
