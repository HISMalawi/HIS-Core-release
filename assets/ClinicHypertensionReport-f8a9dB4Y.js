import{d as f,a5 as h,ap as w,ca as y,cW as A,a8 as b,ad as m,u as D,v,w as C,x as $,r as _,t as E,aI as M,as as g,cK as R,Q as F}from"./index-DrPQ21-i.js";import{v as P}from"./TableView-DYQq8HZp.js";import{C as S}from"./clinic_report_service-DWxckQD3.js";import{w as G}from"./v2utils-B87E9iaX.js";import"./Export-CWTuI3QV.js";const H=f({components:{v2Datatable:P,IonPage:h},props:{title:String,patients:Array,onFinish:Function},setup(){const l=w();return{ITEMS_PER_PAGE:20,columns:[[{label:"ARV Number",ref:"arv_number"},{label:"Gender",ref:"gender",value:n=>y(n.gender)},{label:"Systolic/Diastolic",ref:"diastolic",value:n=>"".concat(n.systolic,"/").concat(n.diastolic)},{label:"Art start date",ref:"art_start_Date",value:n=>A(n.art_start_date)},{label:"Action",ref:"patient_id",exportable:!1,tdClick:({data:n})=>l.push({path:"/patient/dashboard/".concat(n.patient_id)}),value:()=>"View client"}]]}}});function N(t,l,s,n,e,d){const c=m("v2Datatable"),p=m("ion-page");return D(),v(p,null,{default:C(()=>[$(c,{title:t.title,columnData:t.patients,columns:t.columns,"on-finish":t.onFinish,"icon-url":"/assets/images/folder.png",rowsPerPage:t.ITEMS_PER_PAGE},null,8,["title","columnData","columns","on-finish","rowsPerPage"])]),_:1})}const T=b(H,[["render",N]]),I=f({components:{IonPage:h,v2Datatable:P},setup(){const t=M("reports.png"),l=_([]),s=_(""),n=new S,e=(a,r)=>({label:a,ref:r,toValue:o=>o.length,tdClick:o=>c("".concat(o.column.label),o.refData)}),d=[[{label:"#",ref:"index"},{label:"Age group",ref:"age_group"},{label:"Gender",ref:"gender"},e("Screened for HTN","screened"),e("Normal <140/<90","normal_reading"),e("Mild 140-159/90-99","mild_reading"),e("Moderate 160-180/100-110","moderate_reading"),e("Severe >180/>110","severe_reading"),e("Hydrochlorothiazide 25mg","hydrochlorothiazide_25mg"),e("Amlodipine 5mg","amlodipine_5mg"),e("Amlodipine 10 mg","amlodipine_10mg"),e("Captopril 25mg","captopril_25mg"),e("Captopril 6-25mg","captopril_6_25mg"),e("Captopril 12-5mg","captopril_12_5mg"),e("Captopril 50mg","captopril_50mg"),e("Enalapril 5 mg","enalapril_5mg"),e("Enalapril 10mg","enalapril_10mg"),e("Atenolol 50mg","atenolol_50mg"),e("Atenolol 100mg","atenolol_100mg"),e("Nifedipine 10mg","nifedipine_10mg"),e("Nifedipine 20mg","nifedipine_20mg"),e("Total (regimen)","total_regimen")]],c=async(a,r)=>{r.length&&(await g.create({component:T,backdropDismiss:!1,cssClass:"large-modal",componentProps:{title:a,subtitle:s,patients:r,onFinish:()=>g.getTop().then(o=>o&&g.dismiss())}})).present()},p=()=>G(async()=>{if(!(n.startDate&&n.endDate))return F("Start date and end date required!");l.value=[];const a=await n.getHypertensionReport(),r=Object.keys(a).reduce((o,i)=>(o.M.push({age_group:i,gender:"Male",...a[i].M}),o.F.push({age_group:i,gender:"Female",...a[i].F}),o),{F:[],M:[]});l.value=r.F.concat(r.M).map((o,i)=>({index:i+1,...o}))}),u=()=>R({onFinish:(a,r,o,i)=>{i&&n.setOccupation(i),s.value="".concat(o),n.startDate=a,n.endDate=r,p()}});return E(()=>u()),{logo:t,reportData:l,configure:u,generate:p,columns:d,period:s}}});function V(t,l,s,n,e,d){const c=m("v2Datatable"),p=m("ion-page");return D(),v(p,null,{default:C(()=>[$(c,{title:"Hypertension Report","icon-url":t.logo,subtitle:t.period,columns:t.columns,columnData:t.reportData,rowsPerPage:50,onConfigure:t.configure,onRefresh:()=>t.generate(),"report-prefix":"Clinic"},null,8,["icon-url","subtitle","columns","columnData","onConfigure","onRefresh"])]),_:1})}const j=b(I,[["render",V]]);export{j as default};
