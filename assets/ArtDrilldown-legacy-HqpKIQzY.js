System.register(["./index-legacy-C7wj4ngT.js","./TableView-legacy-tIfQofZG.js"],(function(t,e){"use strict";var a,n,i,r,l,o,s,u,c,d,b,f,p,h,g,_,v;return{setters:[t=>{a=t.d,n=t.I,i=t.K,r=t.J,l=t.ab,o=t.ae,s=t.aY,u=t.ct,c=t.bL,d=t.b6,b=t._,f=t.r,p=t.o,h=t.c,g=t.w,_=t.b},t=>{v=t.v}],execute:function(){const e=a({props:{title:{type:String,default:"Drilldown"},patientIdentifiers:{type:Object},onFinish:{type:Function}},components:{IonPage:n,v2Datatable:v},setup(t){const e=i(!0),a=i("-"),n=i([]),b=r(),f=[[{label:"ARV Number",ref:"identifier"},{label:"Gender",ref:"gender"},{label:"Birthdate",ref:"birthdate"},{label:"Art start date",ref:"art_start_date"},{label:"Action",ref:"patient_id",exportable:!1,tdClick:({data:t})=>b.push({path:`/patient/dashboard/${t.person_id}`}),value:()=>"View client"}]];return l((()=>t.patientIdentifiers),(async t=>{if(n.value=[],a.value="Total: 0",!t||!t.length)return;const i=o.chunk(t,1e3);for(const l of i){try{if(!e.value)break;const t=(await s.getPersons(l)).map((t=>({...t,birthdate:u(t.birthdate),art_start_date:u(t.art_start_date),gender:c(t.gender)})));n.value=[...n.value,...t]}catch(r){console.error(r)}a.value=`Total: ${n.value.length} of ${(t||[]).length}`,await d(100)}}),{immediate:!0}),{columns:f,subtitle:a,reportData:n,canLoadData:e,ITEMS_PER_PAGE:25,runFinishAction:function(){e.value=!1,"function"==typeof t.onFinish&&t.onFinish()}}}});t("A",b(e,[["render",function(t,e,a,n,i,r){const l=f("v2Datatable"),o=f("ion-page");return p(),h(o,null,{default:g((()=>[_(l,{title:t.title,subtitle:t.subtitle,columnData:t.reportData,columns:t.columns,"on-finish":t.runFinishAction,rowsPerPage:t.ITEMS_PER_PAGE},null,8,["title","subtitle","columnData","columns","on-finish","rowsPerPage"])])),_:1})}]]))}}}));
