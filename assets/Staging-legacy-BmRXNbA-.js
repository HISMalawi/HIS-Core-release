System.register(["./StagingMixin.vue_vue_type_script_lang-legacy-BQ2DJERS.js","./index-legacy-C29Eb2Qm.js","./dynamic-import-helper-legacy-DYK5bIOV.js","./EncounterMixin.vue_vue_type_script_lang-legacy-rPdlUSmp.js","./encounter_guidelines-legacy-BDiBaLGJ.js","./GuidelineEngine-legacy-KsvQuFdF.js","./HisStandardForm-legacy-BpfFI5_j.js","./TouchScreenForm-legacy-BmEuIwWy.js","./ToolbarMediumCard-legacy-CF38wqjC.js","./Transformers-legacy-DhNYVLaS.js","./ViewPort-legacy-CDi_rmkw.js","./MultiFieldDateHelper-legacy-DNe3hLpD.js","./KbLayouts-legacy-BKvPSxzZ.js","./HisKbConfigurations-legacy-vrLd9Pgz.js","./LocationFieldOptions-legacy-CSWOIX88.js"],(function(e,i){"use strict";var n,t,s,a,l,c,o,r;return{setters:[e=>{n=e._},e=>{t=e.d,s=e.n,a=e.T,l=e._,c=e.r,o=e.o,r=e.c},null,null,null,null,null,null,null,null,null,null,null,null,null],execute:function(){const i=t({mixins:[n],watch:{ready:{async handler(e){e&&(await this.initStaging(this.patient),this.fields=[...this.getStagingFields(),this.getStagingSummaryField()])},immediate:!0}},methods:{async assessAhdCriteria(e){const i={"Has advance HIV staging conditions":()=>Object.keys(e).some((i=>["stage_4_conditions","stage_3_conditions"].includes(i)&&(e?.[i]||[]).length>=1)),"CD4 count is less than equal to 200":()=>{const[i,...n]=`${e.cd4_count?.value||""}`.replace(/\s/g,"");return/<|=/i.test(i)&&parseInt(n.join(""))<=200}};Object.keys(i).some((e=>i[e]()))&&await s("Continue with AHD screening?",{header:"Client meets AHD criteria"})&&await this.staging.saveObservationList([await this.staging.buildValueCoded("Continue with AHD","Yes")])},async onSubmit(e,i){await this.submitStaging(i),await this.assessAhdCriteria(e),a("Staging information has been saved"),this.nextTask()}}});e("default",l(i,[["render",function(e,i,n,t,s,a){const l=c("his-standard-form");return o(),r(l,{skipSummary:!0,cancelDestinationPath:e.cancelDestination,fields:e.fields,onFinishAction:e.onSubmit},null,8,["cancelDestinationPath","fields","onFinishAction"])}]]))}}}));
