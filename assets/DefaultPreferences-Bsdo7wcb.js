import{d as _,a5 as m,a7 as T,K as f,aV as h,d$ as n,a9 as r,aa as p,dZ as c,a6 as g,v as S,w as P,ab as d,u as D,x as L}from"./index-BMVUUxuO.js";import{P as y}from"./patient_diagnosis_service-D3kkckpT.js";import{H as E}from"./HisStandardForm-BJZg4csl.js";import{a as I}from"./drug_prescription_service-B77lXDGo.js";import"./drug_order_service-j6Pw6kDS.js";import"./drug_service-BRxmxyXB.js";const O=_({components:{HisStandardForm:E,IonPage:m},data:()=>({preference:"",fields:[]}),created(){this.preference=this.$route.name,this.fields=[...this.setTopTenDiagnosis(),...this.setTopTenDrugs()]},methods:{isProp(s){return!this.preference||s===this.preference},async onFinish(s,t){for(const e in t)await T.set(e,t[e]),f("Property has been updated",2e3);this.$router.back()},mapListToOptions(s){return h.isEmpty(s)?[]:s.map(t=>({label:t.name,value:t.name,other:t.concept_id,isChecked:!1})).sort((t,e)=>t.label<e.label?-1:t.label>e.label?1:0)},setTopTenDiagnosis(){const s=n.SET_TOP_10_DIAGNOSIS,t=e=>e.map(o=>o.value).join();return[{id:"primary_diagnosis",helpText:"Select top ten diagnosis",type:r.TT_INFINITE_SCROLL_MULTIPLE_SELECT,validation:e=>p.required(e),options:async(e,o="",a=1,i=10)=>this.mapListToOptions(await y.getDiagnosis(o,a,i)),computedValue:e=>t(e),condition:()=>this.isProp(s),defaultValue:()=>c.topTenDiagnosis(),config:{isFilterDataViaApi:!0,showKeyboard:!0}}]},setTopTenDrugs(){const s=n.SET_TOP_10_DRUGS,t=e=>e.map(o=>o.value).join();return[{id:"primary_drugs",helpText:"Select top ten drugs",type:r.TT_INFINITE_SCROLL_MULTIPLE_SELECT,validation:e=>p.required(e),options:async(e="",o=1,a=10)=>this.mapListToOptions(await I.getDrugs(e,o,a)),computedValue:e=>t(e),condition:()=>this.isProp(s),defaultValue:()=>c.topTenDiagnosis(),config:{isFilterDataViaApi:!0,showKeyboard:!0}}]}}});function b(s,t,e,o,a,i){const l=d("his-standard-form"),u=d("ion-page");return D(),S(u,null,{default:P(()=>[L(l,{fields:s.fields,onFinishAction:s.onFinish,skipSummary:!0},null,8,["fields","onFinishAction"])]),_:1})}const $=g(O,[["render",b]]);export{$ as default};
