import{H as c}from"./HisStandardForm-CWpBcokh.js";import{_ as u}from"./EncounterMixin.vue_vue_type_script_lang-iYCFdq6R.js";import{d,M as s,ab as t,ac as i,a8 as v,ad as h,u as m,v as p}from"./index-CG6KEPsv.js";import{S as b}from"./social_history_service-CjLxMNCG.js";import"./encounter_guidelines-fPxboxGG.js";import"./GuidelineEngine-D6V1_Znr.js";const S=d({components:{HisStandardForm:c},mixins:[u],data:()=>({socialService:{}}),watch:{ready:{async handler(e){e&&(this.socialService=new b(this.patient.getID(),this.providerID),this.fields=this.getFields())},immediate:!0,deep:!0}},methods:{async onSubmit(e,a){if(!await this.socialService.createEncounter())return s("Unable to create social history encounter");const l=await this.resolveObs({...a});if(!await this.socialService.saveObservationList(l))return s("Unable to save observations");this.nextTask()},getFields(){return[{id:"social_acitivites",helpText:"Social Activities",type:t.TT_MULTIPLE_YES_NO,validation:e=>this.validateSeries([()=>i.required(e),()=>i.anyEmpty(e)]),computedValue:e=>({obs:e.map(a=>this.socialService.buildValueCoded(a.label,a.value))}),summaryMapValue:e=>({label:e.label,value:e.value}),options:()=>[{label:"Patient smokes",value:"",other:{values:this.yesNoOptions()}},{label:"Patient drinks alcohol",value:"",other:{values:this.yesNoOptions()}}]},{id:"marital_status",helpText:"Marital Status",type:t.TT_SELECT,validation:e=>i.required(e),computedValue:({value:e})=>({obs:this.socialService.buildValueText("Marital status",e)}),options:()=>[{label:"Single",value:"Single"},{label:"Engaged",value:"Engaged"},{label:"Married",value:"Married"},{label:"Separated",value:"Separated"},{label:"Widowed",value:"Widowed"},{label:"Other",value:"Other"}]},{id:"religion",helpText:"Religion",type:t.TT_SELECT,validation:e=>i.required(e),computedValue:({value:e})=>({obs:this.socialService.buildValueText("Religion",e)}),options:()=>[{label:"Catholic",value:"Catholic"},{label:"CCAP",value:"CCAP"},{label:"SDA",value:"SDA"},{label:"Angelican",value:"Angelican"},{label:"Muslim",value:"Muslim"},{label:"Pentecostalism",value:"Pentecostalism"},{label:"Jehovah witness",value:"Jehovah witness"},{label:"Other",value:"Other"}]}]}}});function f(e,a,o,l,n,_){const r=h("his-standard-form");return m(),p(r,{cancelDestinationPath:e.cancelDestination,fields:e.fields,onFinishAction:e.onSubmit},null,8,["cancelDestinationPath","fields","onFinishAction"])}const w=v(S,[["render",f]]);export{w as default};
