import{d as T,I as D,cm as I,J as E,K as l,dE as S,N as C,af as L,t as N,q as V,F as R,ct as t,_ as y,r as b,o as B,c as A,w as P,b as _}from"./index-C6EjxQ0a.js";import{v as F}from"./TableView-DKbvhgCs.js";import{D as w}from"./ReportDateSelectionPrompt-CPWu87fZ.js";import"./fuse-YdZE3OCN.js";import"./HisKeyboard-B8oB68Wv.js";const G=T({components:{IonPage:D,IonLoading:I,v2Datatable:F},setup(){const a=E(),r=l([]),u=l(""),i=l(!1),n=new S(""),c=l([]),s=l("No report selected!"),f=l([]),d=async()=>{if(!(n.startDate&&n.endDate))return N("Start date and end date required!");i.value=!0,r.value=[];try{r.value=await n.retrieveDataCleaningTool()}catch(e){V("Unable to generate report!")}i.value=!1},o=()=>({label:"Action",ref:"patient_id",value:()=>"View client",tdClick:({data:e})=>{e!=null&&e.patient_id&&a.push("/patients/confirm?person_id=".concat(e.patient_id))}}),g=[[{ref:"identifier",label:"ID"},{ref:"given_name",label:"First name"},{ref:"family_name",label:"Last name"},{ref:"gender",label:"Gender"},{ref:"birthdate",label:"Birthdate",toValue:e=>t(e)},o()]],p=()=>w({additionalFields:[{id:"data_cleaning_tool",helpText:"Select data cleaning tool",type:R.TT_SELECT,requireNext:!1,isRequired:()=>!0,options:()=>[{label:"Incomplete visits",value:"INCOMPLETE VISITS",other:{columns:[[{ref:"identifier",label:"ID"},{ref:"given_name",label:"First name"},{ref:"family_name",label:"Last name"},{ref:"gender",label:"Gender"},{ref:"birthdate",label:"Birthdate",toValue:e=>t(e)},{ref:"visit_date",label:"Visit date",toValue:e=>t(e)},o()]]}},{label:"Missing Linkage Number",value:"MISSING LINKAGE",other:{columns:g}},{label:"Partner status: <14 years with partner details",value:"PARTNER STATUS",other:{columns:g}},{label:"Test date earlier than birthdate",value:"TEST DATE EARLIER THAN BIRTHDATE",other:{columns:[[{ref:"identifier",label:"ID"},{ref:"given_name",label:"First name"},{ref:"family_name",label:"Last name"},{ref:"gender",label:"Gender"},{ref:"birthdate",label:"Birthdate",toValue:e=>t(e)},{ref:"test_date",label:"Test date",toValue:e=>t(e)},o()]]}},{label:"Duplicate Encounters",value:"DUPLICATE ENCOUNTERS",other:{columns:[[{ref:"identifier",label:"ID"},{ref:"given_name",label:"First name"},{ref:"family_name",label:"Last name"},{ref:"gender",label:"Gender"},{ref:"total",label:"Total"},{ref:"birthdate",label:"Birthdate",toValue:e=>t(e)},o()]]}},{label:"Missing Birthdate",value:"MISSING BIRTHDATE",other:{columns:[[{ref:"identifier",label:"ID"},{ref:"given_name",label:"First name"},{ref:"family_name",label:"Last name"},{ref:"gender",label:"Gender"},{ref:"birthdate",label:"Birthdate",toValue:e=>t(e)},{ref:"visit_date",label:"Visit date",toValue:e=>t(e)},o()]]}}]}],onFinish:(e,h,v,m)=>{u.value="Period (".concat(v,")"),n.startDate=e,n.endDate=h,n.name=m.data_cleaning_tool.value,c.value=m.data_cleaning_tool.other.columns,s.value=m.data_cleaning_tool.label,d()}});return C(()=>!r.value.length&&p()),{Img:L,headerBadges:f,reportTitle:s,reportData:r,isLoading:i,configure:p,generate:d,columns:c,period:u}}});function M(a,r,u,i,n,c){const s=b("ion-loading"),f=b("v2Datatable"),d=b("ion-page");return B(),A(d,null,{default:P(()=>[_(s,{"is-open":a.isLoading,message:"Please wait..."},null,8,["is-open"]),_(f,{iconUrl:a.Img("sys-setting.png"),title:a.reportTitle,subtitle:a.period,columns:a.columns,columnData:a.reportData,rowsPerPage:20,onConfigure:a.configure,onRefresh:()=>a.generate()},null,8,["iconUrl","title","subtitle","columns","columnData","onConfigure","onRefresh"])]),_:1})}const O=y(G,[["render",M]]);export{O as default};
