System.register(["./FieldMixin.vue_vue_type_script_lang-legacy-Ctrzw-s_.js","./index-legacy-C29Eb2Qm.js","./HisKeypad-legacy-CPvjpCHl.js","./drug_prescription_service-legacy-CUI1g_vw.js","./BaseKeyboard-legacy-BwPGWdsO.js","./KbLayouts-legacy-BKvPSxzZ.js","./KbHandler-legacy-De8o5nTq.js","./drug_order_service-legacy-86SUKlch.js","./drug_service-legacy-Chl_3BEp.js"],(function(e,t){"use strict";var a,n,l,o,c,r,s,d,i,u,h,g,p,y,b,v,m,f,_,k,C,q,D,w,x,j;return{setters:[e=>{a=e._},e=>{n=e.d,l=e.bb,o=e.ai,c=e.ak,r=e.ao,s=e.aj,d=e.f,i=e.cF,u=e.O,h=e.d1,g=e._,p=e.r,y=e.o,b=e.c,v=e.w,m=e.b,f=e.A,_=e.x,k=e.F,C=e.y,q=e.v,D=e.a3,w=e.a4},e=>{x=e.H},e=>{j=e.D},null,null,null,null,null],execute:function(){var t=document.createElement("style");t.textContent="ion-label[data-v-eb1c835c]{font-weight:700}.border-right[data-v-eb1c835c]{border-right:solid 1px #ccc}.scroll-list[data-v-eb1c835c]{height:70vh;overflow:auto}.input_display[data-v-eb1c835c]{font-size:1.3em}.dosage-input[data-v-eb1c835c]{text-align:center;border:solid 1px #ccc;height:50px;width:100%;background-color:#fcfcf1}table[data-v-eb1c835c]{width:100%}.drug-section-style[data-v-eb1c835c]{padding:0;background:#fff}td[data-v-eb1c835c],th[data-v-eb1c835c]{border:solid 1px #3333}th[data-v-eb1c835c]{padding:.8em}td[data-v-eb1c835c]{padding:.4em;font-size:.9rem}\n",document.head.appendChild(t);const F=n({components:{IonInput:l,IonGrid:o,IonCol:c,IonIcon:r,IonRow:s,IonButton:d},mixins:[a],data:()=>({trash:i,drugs:[]}),activated(){this.init()},mounted(){this.init()},methods:{async init(){this.$emit("onFieldActivated",this);const e=await this.options(this.fdata,this.cdata);this.drugs=e.map((e=>(e.other.frequency=this.getFrequency(e),e.other.dosage=this.getDosage(e),void 0===e.other.duration&&(e.other.duration=""),e)))},getFrequency(e){if(e.other.frequency){const t=j.find((t=>t.value===parseInt(e.other.frequency)));if(t)return t.label}return""},getDosage:e=>e.other.dosage?e.other.dosage:e.other.dose_strength?e.other.dose_strength:"",removeDrug(e){this.drugs=this.drugs.filter((t=>t.label!=e.label))},async selectFrequency(e){const t=await u.create({component:h,backdropDismiss:!1,componentProps:{title:`${e.label} Frequency`,list:j.map((e=>e.label)),actionButtons:[{name:"Cancel",color:"danger",slot:"start",role:"default"},{name:"Ok",slot:"end",role:"action"}]}});t.present();const{data:a}=await t.onDidDismiss();"Cancel"!==a.action&&(e.other.frequency=a.selection)},async launchKeyPad(e,t){(await u.create({component:x,backdropDismiss:!1,cssClass:"keypad-modal",componentProps:{title:`${e.label} ${t}`,preset:e.other[t],strictNumbers:!0,onKeyPress(a){e.other[t]=a}}})).present()}},computed:{},watch:{clear(){this.drugs=this.drugs.map((e=>(e.frequency="",e.duration="",e.dose="",e.units="",e)))},drugs:{async handler(){this.$emit("onValue",this.drugs)},immediate:!0,deep:!0}}}),I=(e=>(D("data-v-eb1c835c"),e=e(),w(),e))((()=>f("thead",null,[f("tr",null,[f("th",null,"Drug"),f("th",null,"Frequency"),f("th",null,"Dosage"),f("th",null,"Duration"),f("th")])],-1)));e("default",g(F,[["render",function(e,t,a,n,l,o){const c=p("ion-input"),r=p("ion-icon"),s=p("ion-button"),d=p("ion-col"),i=p("ion-row"),u=p("ion-grid");return y(),b(u,null,{default:v((()=>[m(i,{class:"his-card section drug-section-style"},{default:v((()=>[m(d,null,{default:v((()=>[f("table",null,[I,f("tbody",null,[(y(!0),_(k,null,C(e.drugs,((t,a)=>(y(),_("tr",{key:a},[f("td",null,[f("b",null,q(t.label),1)]),f("td",null,[m(c,{readonly:"",onClick:a=>e.selectFrequency(t),value:t.other.frequency,class:"dosage-input",placeholder:"Add frequency.."},null,8,["onClick","value"])]),f("td",null,[m(c,{readonly:"",onClick:a=>e.launchKeyPad(t,"dosage"),value:t.other.dosage,placeholder:"Add dosage..",class:"dosage-input"},null,8,["onClick","value"])]),f("td",null,[m(c,{readonly:"",onClick:a=>e.launchKeyPad(t,"duration"),value:t.other.duration,placeholder:"Add duration..",class:"dosage-input"},null,8,["onClick","value"])]),f("td",null,[m(s,{onClick:a=>e.removeDrug(t),color:"danger"},{default:v((()=>[m(r,{icon:e.trash},null,8,["icon"])])),_:2},1032,["onClick"])])])))),128))])])])),_:1})])),_:1})])),_:1})}],["__scopeId","data-v-eb1c835c"]]))}}}));
