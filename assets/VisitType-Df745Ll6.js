import{_ as l}from"./EncounterMixin.vue_vue_type_script_lang-CBh-AybA.js";import{d,I as c,ad as a,ae as i,aa as h,af as n,a as u,c as m,w as p,b as v}from"./index-DpVM51Mk.js";import{A as f}from"./anc_visit_type_service-BgdUpIS3.js";import"./encounter_guidelines-Cnr48ESD.js";import"./GuidelineEngine-D6V1_Znr.js";import"./HisStandardForm-CyU-At7_.js";const _=d({components:{IonPage:c},mixins:[l],data:()=>({service:{},helpText:"ANC Visit Number"}),watch:{ready:{async handler(e){e&&(this.service=new f(this.patientID,this.providerID),await this.service.loadLastVisitNumber(),this.fields=this.getFields())},immediate:!0}},methods:{async onFinish(e,t){await this.service.createEncounter();const s=await this.resolveObs(t);await this.service.saveObservationList(s),this.nextTask()},getFields(){return[{id:"visit_number",helpText:this.helpText,dynamicHelpText:()=>this.service.lastVisitNumber?"".concat(this.helpText," (Last visit number: ").concat(this.service.lastVisitNumber,")"):this.helpText,defaultValue:()=>this.service.lastVisitNumber+1,type:a.TT_NUMBER,computedValue:e=>({obs:[this.service.buildValueNumber("Type of visit",e.value),this.service.buildValueCoded("Has extended ANC visits",e.value>8?"Yes":"No")]}),validation:e=>this.validateSeries([()=>i.required(e),()=>i.rangeOf(e,this.service.lastVisitNumber+1,15)])},{id:"reasons",helpText:"Provide reason for having more than 8 visits",type:a.TT_TEXT,computedValue:e=>({obs:this.service.buildValueText("Reason for extended ANC visits",e.value)}),condition:e=>e.visit_number.value>8,validation:e=>i.required(e)}]}}});function b(e,t,s,T,V,x){const r=n("his-standard-form"),o=n("ion-page");return u(),m(o,null,{default:p(()=>[v(r,{fields:e.fields,skipSummary:!0,onFinishAction:e.onFinish,cancelDestinationPath:e.cancelDestination},null,8,["fields","onFinishAction","cancelDestinationPath"])]),_:1})}const F=h(_,[["render",b]]);export{F as default};
