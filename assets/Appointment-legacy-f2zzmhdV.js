System.register(["./index-legacy-Dg5P6bX-.js","./dynamic-import-helper-legacy-arUa2LZV.js","./HisStandardForm-legacy-BXV61qjj.js","./useEncounter-legacy-Bp6E5sCN.js","./util-legacy-CjANJSja.js","./commons-legacy-CiEua9CM.js","./appointment_service-legacy-DYXZTYsv.js","./TouchScreenForm-legacy-Bqug27CT.js","./ToolbarMediumCard-legacy-DWokgyDV.js","./Transformers-legacy-DhNYVLaS.js","./ViewPort-legacy-D3j1oaCn.js","./isEmpty-legacy-rdjCNuhy.js","./_Set-legacy-BL8ow4HL.js","./_setToArray-legacy-jEwcQpqP.js","./encounter_guidelines-legacy-mRSBdMQj.js","./GuidelineEngine-legacy-KsvQuFdF.js"],(function(e,t){"use strict";var a,n,l,i,o,s,u,r,c,d,p,m,g,_,y,T,j,v,A,b;return{setters:[e=>{a=e.d,n=e.K,l=e.b5,i=e.cV,o=e.G,s=e.cZ,u=e.V,r=e.cb,c=e.o,d=e.c,p=e.w,m=e.b,g=e.cl,_=e.I},e=>{y=e.F},e=>{T=e.H},e=>{j=e.u},e=>{v=e.g},e=>{A=e.r},e=>{b=e.A},null,null,null,null,null,null,null,null,null],execute:function(){e("default",a({__name:"Appointment",setup(e){const t=n([]),a=new l(-1,i.APPOINTMENT),{goToNextTask:I,patientDashboardUrl:D}=j(((e,n)=>{a.patientID=n,a.providerID=e,t.value=[(()=>{let e={},t=-1,l={};return{id:"appointment",helpText:"Appointment booking",type:y.TT_DATE_PICKER,init:async()=>(t=await o.get(s.CLINIC_APPOINTMENT_LIMIT),e=await b.getJson(`programs/${a.programID}/patients/${n}/next_appointment_date`,{date:a.date}),!0),defaultValue:()=>e?.appointment_date,validation:e=>u.required(e),computedValue:t=>[{concept_id:v("APPOINTMENT_DATE"),value_datetime:t,obs_datetime:a.date},{concept_id:v("ESTIMATED_DATE"),value_datetime:e?.appointment_date,obs_datetime:a.date}],config:{minDate:()=>a.date,maxDate:()=>e?.drugs_run_out_date,supValue:e=>`${(l[e]||[]).length}`,infoItems:async n=>(l[n]||(l[n]=await b.getJson(`programs/${a.programID}/booked_appointments`,{date:n,paginate:!1})),[{label:"Medication Run out Date",value:r(e?.drugs_run_out_date||"Not available")},{label:"User set appointment date",value:r(n)},{label:"Appointments",value:(l[n]||[]).length},{label:"Appointment limit (per/day)",value:t||"N/A"}]),hiddenFooterBtns:["Clear"]}}})()]}));async function E(e,t){await a.createEncounter(),await a.saveObservationList(await A(t)),I()}return(e,a)=>(c(),d(g(_),null,{default:p((()=>[m(T,{cancelDestinationPath:g(D),onFinishAction:E,fields:t.value,skipSummary:!0},null,8,["cancelDestinationPath","fields"])])),_:1}))}}))}}}));
