System.register(["./index-legacy-DzF0J2nr.js","./TableView-legacy-MOnYpOJS.js","./aetc_report_service-legacy-Fm9bfoAO.js","./DrillPatientIds-legacy-BwxFUUet.js","./PopupKeyboard-legacy-D5AXh9gb.js","./dynamic-import-helper-legacy-DYK5bIOV.js","./Export-legacy-nGdXEsf9.js","./TableView-legacy-BJva-ODI.js","./fuse-legacy-CQoBB3MK.js","./HisKeyboard-legacy-BA3ln4in.js","./HisKbConfigurations-legacy-vrLd9Pgz.js","./KbLayouts-legacy-BKvPSxzZ.js","./BaseKeyboard-legacy-BtsNQhim.js","./KbHandler-legacy-De8o5nTq.js","./SIngleTouchField-legacy-C-DlUswk.js","./TouchScreenForm-legacy-CDzY5o9b.js","./ToolbarMediumCard-legacy-BDSK2XWR.js","./Transformers-legacy-DhNYVLaS.js","./ViewPort-legacy-BcrZm7RF.js","./HisKeypad-legacy-B0uHUR4Q.js"],(function(e,a){"use strict";var t,l,r,n,u,o,s,i,g,p,v,c,d,_,D,y,h,b,S,$;return{setters:[e=>{t=e.d,l=e.K,r=e.I,n=e.c4,u=e.N,o=e.a$,s=e.cb,i=e.O,g=e.V,p=e._,v=e.r,c=e.o,d=e.c,_=e.w,D=e.b},e=>{y=e.v},e=>{h=e.A},e=>{b=e.D},e=>{S=e.M},e=>{$=e.F},null,null,null,null,null,null,null,null,null,null,null,null,null,null],execute:function(){const a=l([]),T=l(""),m=l(""),w=l(""),f=l(!1),M=l(""),k=l(""),Y=l(""),E=l(""),L=t({components:{IonPage:r,IonLoading:n,v2Datatable:y},setup(){const e=async()=>{const e=new h;e.startDate=T.value,e.endDate=m.value,e.startAge=k.value,e.endAge=Y.value,e.reportType=E.value;try{const t=await e.getClinicReport("OPD GENERAL");a.value=t}catch(t){console.log(t)}},t=e=>e.map((e=>({label:e,value:e}))),l=[[{label:"No",ref:"",value:(e,a)=>++a},{label:"Data Element",ref:"",value:e=>e.diagnosis},{label:"Value",ref:"",value:e=>e.patients.length,tdClick:({column:e,data:a})=>(async(e,a)=>{a.length<=0||(await i.create({component:b,backdropDismiss:!1,cssClass:"large-modal",componentProps:{title:e,subtitle:w,patientIdentifiers:a,onFinish:()=>i.getTop().then((e=>e&&i.dismiss()))}})).present()})(`${e.secondaryLabel} ${a.diagnosis} `,a.patients)}]],r=()=>S([{id:"start_age",helpText:"Start Age",type:$.TT_NUMBER,computedValue:e=>e.value,validation:e=>g.required(e)},{id:"end_age",helpText:"End Age",type:$.TT_NUMBER,computedValue:e=>e.value,validation:e=>g.required(e)},{id:"report_type",helpText:"Report type",type:$.TT_SELECT,computedValue:e=>e.value,options:()=>[{label:"General Outpatient",value:"General Outpatient"},{label:"Pediatrics",value:"Pediatrics"},{label:"General Diagnoses",value:"General Diagnoses"},{label:"Pediatrics Diagnosis",value:"Pediatrics Diagnosis"}]},{id:"report_range",helpText:"Select Range",type:$.TT_SELECT,computedValue:e=>e.value,options:()=>[{label:"Week",value:"Week"},{label:"Month",value:"Month"},{label:"Quarter",value:"Quarter"},{label:"Year",value:"Year"},{label:"Select Range",value:"Select-Range"}]},{id:"report_range_year",helpText:"Select Year",type:$.TT_SELECT,condition:e=>"Year"===e.report_range.value||"Month"===e.report_range.value||"Week"===e.report_range.value,computedValue:e=>e.label,options:()=>{const e=(()=>{let e=[];const a=(new Date).getFullYear();for(let t=2008;t<=a;t++)e.push(t+"");return e.reverse()})();return[...t(e)]}},{id:"report_range_quaters",helpText:"Select Quater",type:$.TT_SELECT,condition:e=>"Quarter"===e.report_range.value,computedValue:e=>e.value,options:()=>{const e=(()=>{let e=[];const a=(new Date).getFullYear(),t=(new Date).getMonth()+1,l=t<=3?1:t<=6?2:t<=9?3:4;for(let r=2008;r<=a;r++)for(let t=1;t<=4;t++)(r<a||r===a&&t<=l)&&e.push(`Q${t} ${r}`);return e.reverse()})();return[...t(e)]}},{id:"start_date",helpText:"Start Date",type:$.TT_FULL_DATE,validation:e=>g.required(e),computedValue:e=>e.value,condition:e=>"Select-Range"===e.report_range.value},{id:"report_range_month",helpText:"Select Month",type:$.TT_SELECT,validation:e=>g.required(e),computedValue:e=>e.value,condition:e=>"Month"===e.report_range.value,options:()=>[{label:"January",value:"01"},{label:"February",value:"02"},{label:"March",value:"03"},{label:"April",value:"04"},{label:"May",value:"05"},{label:"June",value:"06"},{label:"July",value:"07"},{label:"August",value:"08"},{label:"September",value:"09"},{label:"October",value:"10"},{label:"November",value:"11"},{label:"December",value:"12"}]},{id:"report_range_week",helpText:"Select Week",type:$.TT_SELECT,condition:e=>{const a=(new Date).getFullYear()+"";return"Week"===e.report_range.value&&e.report_range_year.value===a},options:()=>[{label:"This Week",value:"This Week"},{label:"Last Week",value:"Last Week"},{label:"This Month",value:"This Month"},{label:"Last Month",value:"Last Month"},{label:"All Dates",value:"All Dates"}]}],((a,t)=>{if("Month"===a.report_range?.value&&(T.value=`${t.report_range_year}-${t.report_range_month}-01`,m.value=o(new Date(T.value).toISOString()).endOf("month").format("YYYY-MM-DD")),"Select-Range"===a.report_range?.value&&(T.value=`${a.year.value}-${a.month.value}-01`,m.value=o(new Date(T.value).toISOString()).endOf("month").format("YYYY-MM-DD")),"Year"===a.report_range?.value&&(T.value=`${t.report_range_year}-01-01`,m.value=`${t.report_range_year}-12-31`),"Week"===a.report_range?.value&&"This Week"===a.report_range_week?.value){const e=new Date,a=e.getFullYear(),t=String(e.getMonth()+1).padStart(2,"0"),l=new Date(e);l.setDate(e.getDate()-e.getDay());const r=new Date(e);r.setDate(e.getDate()+(6-e.getDay()));const n=`${a}-${t}-${String(l.getDate()).padStart(2,"0")}`,u=`${a}-${t}-${String(r.getDate()).padStart(2,"0")}`;T.value=n,m.value=u}if("Week"===a.report_range?.value&&"Last Week"===a.report_range_week?.value){const e=new Date;e.setDate(e.getDate()-7);const a=e.getFullYear(),t=String(e.getMonth()+1).padStart(2,"0"),l=new Date(e);l.setDate(e.getDate()-e.getDay());const r=new Date(e);r.setDate(e.getDate()+(6-e.getDay()));const n=`${a}-${t}-${String(l.getDate()).padStart(2,"0")}`,u=`${a}-${t}-${String(r.getDate()).padStart(2,"0")}`;T.value=n,m.value=u}if("Week"===a.report_range?.value&&"This Month"===a.report_range_week?.value){const e=new Date,a=e.getFullYear(),t=String(e.getMonth()+1).padStart(2,"0"),l=`${a}-${t}-01`,r=new Date(a,e.getMonth()+1,0),n=`${a}-${t}-${String(r.getDate()).padStart(2,"0")}`;T.value=l,m.value=n}if("Week"===a.report_range?.value&&"Last Month"===a.report_range_week?.value){const e=new Date,a=e.getFullYear(),t=e.getMonth()+1,l=1===t?12:t-1,r=12===l?a-1:a,n=new Date(a,t-1,0),u=`${r}-${String(l).padStart(2,"0")}-01`,o=`${r}-${String(l).padStart(2,"0")}-${String(n.getDate()).padStart(2,"0")}`;T.value=u,m.value=o}if("Week"===a.report_range?.value&&"All Dates"===a.report_range_week?.value){const e=new Date,a=e.getFullYear(),t=`${a}-01-01`,l=`${a}-${String(e.getMonth()+1).padStart(2,"0")}-${String(e.getDate()).padStart(2,"0")}`;T.value=t,m.value=l}if("Quarter"===a.report_range?.value){const e=t.report_range_quaters.split(" "),a=parseInt(e[0].slice(1),10),l=parseInt(e[1],10),r={1:`${l}-01-01`,2:`${l}-04-01`,3:`${l}-07-01`,4:`${l}-10-01`},n={1:`${l}-03-31`,2:`${l}-06-30`,3:`${l}-09-30`,4:`${l}-12-31`};T.value=r[a],m.value=n[a]}"Week"===a.report_range?.value&&a.report_range_year?.value<(new Date).getFullYear()&&(T.value=`${a.report_range_year.value}-01-01`,m.value=`${a.report_range_year.value}-12-31`),k.value=t.start_age,Y.value=t.end_age,E.value=t.report_type,w.value=`Period (${s(T.value)} to ${s(m.value)})`,i.dismiss(),M.value=`${s(T.value)} to ${s(m.value)}`,e()}));return u((()=>!a.value.length&&r())),{columns:l,isLoading:f,reportData:a,period:w,csvQuarter:M,csvheaders:["Data Element","Value"],generate:e,configure:r}}});e("default",p(L,[["render",function(e,a,t,l,r,n){const u=v("ion-loading"),o=v("v2Datatable"),s=v("ion-page");return c(),d(s,null,{default:_((()=>[D(u,{"is-open":e.isLoading,message:"Please wait..."},null,8,["is-open"]),D(o,{title:"OPD General Report",subtitle:e.period,columns:e.columns,columnData:e.reportData,rowsPerPage:25,onConfigure:e.configure,csvQuarter:e.csvQuarter,headers:e.csvheaders,onRefresh:()=>e.generate()},null,8,["subtitle","columns","columnData","onConfigure","csvQuarter","headers","onRefresh"])])),_:1})}]]))}}}));
