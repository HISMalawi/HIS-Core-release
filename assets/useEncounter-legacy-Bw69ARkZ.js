System.register(["./index-legacy-B-IGLekl.js","./encounter_guidelines-legacy-By_-ThMW.js","./GuidelineEngine-legacy-KsvQuFdF.js"],(function(t,e){"use strict";var n,r,a,i,u,o,c,s,l,f,d,v,g,p,h,E,D,m,T,I,_,y,A,b,O,N,S,w,P,C;return{setters:[t=>{n=t.dM,r=t.dN,a=t.dO,i=t.dP,u=t.dQ,o=t.dR,c=t.dS,s=t.dT,l=t.dU,f=t.dV,d=t.dW,v=t.dX,g=t.dY,p=t.dZ,h=t.d_,E=t.d$,D=t.cn,m=t.am,T=t.a,I=t.r,_=t.an,y=t.t,A=t.as,b=t.ae,O=t.bl,N=t.c4,S=t.e0},t=>{w=t.E,P=t.F},t=>{C=t.m}],execute:function(){t("u",(function(t){const e=m();let n=T({});const r=I(-1),a=T({}),i=I(-1),u=I([]),o=_(),c=I(""),s=()=>o.push(c.value),l=(t,e=null)=>{const r={};if(r[P.SET_PROVIDER]=t=>{const[e]=t.split(" ");return i.value=S(u.value,{username:e})?.person_id??-1,P.CONTINUE},r[P.CHANGE_SESSION_DATE]=()=>(o.push(`/session/date?patient_dashboard_redirection_id=${n.getID()}`),P.EXIT),r[P.CHANGE_PATIENT_OUTCOME]=()=>(o.push(`/patient/programs/${n.getID()}`),P.EXIT),r[P.GO_TO_PATIENT_DASHBOARD]=()=>(s(),P.EXIT),t in r)return r[t](e)};return y((async()=>{try{r.value=parseInt(e.params.patient_id),c.value=`/patient/dashboard/${r.value}`,n=await A.get("ACTIVE_PATIENT",{patientID:r.value}),await(async(t="N/A")=>{const e=await A.get("PATIENT_PROGRAM",{patientID:n.getID()});a.outcome=e.outcome,a.outcomeStartDate=e.startDate,a.sessionDate=O.getSessionDate(),a.apiDate=O.getCachedApiDate(),a.isBdeMode=O.isBDE(),a.birthDate=n.getBirthdate(),a.encounterName=t.toUpperCase(),O.isBDE()&&(u.value=await A.get("PROVIDERS"),a.providers=Ot(u.value,(({username:t})=>t)).map((t=>{let e=`${t.username}`;if(!N(t?.person?.names)){const[n]=t.person?.names||[];e+=` (${n.given_name} ${n.family_name})`}return e})))})(e.name),await(async t=>{const e=C(t,w);for(const n in e){const r=e[n];if(r?.actions?.alert&&l(await(r?.actions?.alert(t)))===P.EXIT)return;if(r?.actions?.selection){const e=await(r?.actions?.selection(t));l(e.flowState,e.value)}}})(a),"function"==typeof t&&t(i.value,r.value,n,a)}catch(o){console.error("Error in useEncounter hook:",o)}})),{patient:n,patientId:r,provider:i,providers:u,facts:a,patientDashboardUrl:c,goToPatientDashboard:s,goToNextTask:()=>b(n.getID(),o)}}));var e,R,$,x,j=r,B=a,G=n?n.isConcatSpreadable:void 0,M=i,U=function(t){return B(t)||j(t)||!!(G&&t&&t[G])},X=function t(e,n,r,a,i){var u=-1,o=e.length;for(r||(r=U),i||(i=[]);++u<o;){var c=e[u];n>0&&r(c)?n>1?t(c,n-1,r,a,i):M(i,c):a||(i[i.length]=c)}return i},V=function(t,n,r){for(var a=-1,i=Object(t),u=r(t),o=u.length;o--;){var c=u[e?o:++a];if(!1===n(i[c],c,i))break}return t},k=u,H=o,F=function(t,e){return function(n,r){if(null==n)return n;if(!H(n))return t(n,r);for(var a=n.length,i=e?a:-1,u=Object(n);(e?i--:++i<a)&&!1!==r(u[i],i,u););return n}}((function(t,e){return t&&V(t,e,k)})),Q=o,W=c,Y=function(t,e){if(t!==e){var n=void 0!==t,r=null===t,a=t==t,i=W(t),u=void 0!==e,o=null===e,c=e==e,s=W(e);if(!o&&!s&&!i&&t>e||i&&u&&c&&!o&&!s||r&&u&&c||!n&&c||!a)return 1;if(!r&&!i&&!s&&t<e||s&&n&&a&&!r&&!i||o&&n&&a||!u&&a||!c)return-1}return 0},Z=s,q=f,z=d,J=function(t,e){var n=-1,r=Q(t)?Array(t.length):[];return F(t,(function(t,a,i){r[++n]=e(t,a,i)})),r},K=function(t,e){var n=t.length;for(t.sort(e);n--;)t[n]=t[n].value;return t},L=v,tt=function(t,e,n){for(var r=-1,a=t.criteria,i=e.criteria,u=a.length,o=n.length;++r<u;){var c=Y(a[r],i[r]);if(c)return r>=o?c:c*("desc"==n[r]?-1:1)}return t.index-e.index},et=l,nt=a,rt=function(t,e,n){e=e.length?Z(e,(function(t){return nt(t)?function(e){return q(e,1===t.length?t[0]:t)}:t})):[et];var r=-1;e=Z(e,L(z));var a=J(t,(function(t,n,a){return{criteria:Z(e,(function(e){return e(t)})),index:++r,value:t}}));return K(a,(function(t,e){return tt(t,e,n)}))},at=function(t,e,n){switch(n.length){case 0:return t.call(e);case 1:return t.call(e,n[0]);case 2:return t.call(e,n[0],n[1]);case 3:return t.call(e,n[0],n[1],n[2])}return t.apply(e,n)},it=Math.max,ut=function(t,e,n){return e=it(void 0===e?t.length-1:e,0),function(){for(var r=arguments,a=-1,i=it(r.length-e,0),u=Array(i);++a<i;)u[a]=r[e+a];a=-1;for(var o=Array(e+1);++a<e;)o[a]=r[a];return o[e]=n(u),at(t,this,o)}},ot=function(t){return function(){return t}},ct=g,st=function(){try{var t=ct(Object,"defineProperty");return t({},"",{}),t}catch(e){}}(),lt=ot,ft=st,dt=ft?function(t,e){return ft(t,"toString",{configurable:!0,enumerable:!1,value:lt(e),writable:!0})}:l,vt=Date.now,gt=(R=dt,$=0,x=0,function(){var t=vt(),e=16-(t-x);if(x=t,e>0){if(++$>=800)return arguments[0]}else $=0;return R.apply(void 0,arguments)}),pt=l,ht=ut,Et=gt,Dt=p,mt=o,Tt=h,It=E,_t=X,yt=rt,At=function(t,e,n){if(!It(n))return!1;var r=typeof e;return!!("number"==r?mt(n)&&Tt(e,n.length):"string"==r&&e in n)&&Dt(n[e],t)},bt=function(t,e){return Et(ht(t,e,pt),t+"")}((function(t,e){if(null==t)return[];var n=e.length;return n>1&&At(t,e[0],e[1])?e=[]:n>2&&At(e[0],e[1],e[2])&&(e=[e[0]]),yt(t,_t(e,1),[])}));const Ot=D(bt)}}}));
