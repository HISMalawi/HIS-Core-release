import{d as T,r as E,bV as v,bX as S,al as i,am as d,e2 as t,u as f,a as A,w as L,e as R,f as r,n as b,b as D}from"./index-SU-Girx6.js";import{H as I}from"./HisStandardForm-Cci7ZDn0.js";import{u as O}from"./useEncounter-Bt5p6UT7.js";import{r as P}from"./commons-iamvHq_i.js";import"./isEmpty-BiYYqPeM.js";import"./encounter_guidelines-JE_mnohA.js";import"./GuidelineEngine-D6V1_Znr.js";const w=T({__name:"Lam",setup(h){const n=E([]),e=new v(-1,S.LAB_RESULTS),l=f(),{goToNextTask:u,patientDashboardUrl:c}=O((s,o)=>{e.patientID=o,e.providerID=s;const p=()=>({id:"sampleResult",helpText:"LAM Result:",type:d.TT_SELECT,validation:a=>i.required(a),computedValue:a=>[{concept_id:t("TB_STATUS"),value_coded:t("".concat(a.value)),obs_datetime:e.date},{concept_id:t("BACTERIOLOGICALLY_DIAGNOSED"),value_coded:t("YES_ANSWER"),obs_datetime:e.date},{concept_id:t("PROCEDURE_TYPE"),value_coded:t("LAM"),obs_datetime:e.date},...a.value==="POSITIVE"?[{concept_id:t("TB_TYPE"),value_coded:t("EXTRA_PULMONARY_TB"),obs_datetime:e.date},{concept_id:t("TUBERCULOSIS_CLASS"),value_coded:t("LAM"),obs_datetime:e.date}]:[]],options:()=>[{value:"POSITIVE",label:"Positive"},{value:"NEGATIVE",label:"Negative"}]}),m=()=>({id:"resultDate",field_type:"date",helpText:"Sample Result Date:",type:d.TT_FULL_DATE,computedValue:a=>({concept_id:t("RESULT_DATE"),value_datetime:a.value,obs_datetime:e.date}),validation:a=>i.validateSeries([()=>i.required(a),()=>i.dateRangeOf(a,"".concat(l.query.date),e.date)])});n.value=[p(),m()]});async function _(s,o){await e.createEncounter(),await e.saveObservationList(await P(o)),u()}return(s,o)=>(D(),A(r(b),null,{default:L(()=>[R(I,{cancelDestinationPath:r(c),onFinishAction:_,fields:n.value,skipSummary:!0},null,8,["cancelDestinationPath","fields"])]),_:1}))}});export{w as default};
