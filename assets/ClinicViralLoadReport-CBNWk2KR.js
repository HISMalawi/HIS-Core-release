import{d as n,I as p,L as e,F as d,V as m,cF as a,_ as u,r as s,o as c,c as h,w as f,b as _}from"./index-ox16Qeox.js";import{_ as w}from"./ReportMixin.vue_vue_type_script_lang-SuNQu3mZ.js";import{R as b}from"./TableReportTemplate-dB3Sd6aE.js";import"./BasicReportTemplate-CLyE-zUI.js";import"./Export-CDG7TPF5.js";import"./Pagination-B5WML80w.js";import"./HisStandardForm-DO24IwRD.js";import"./ReportErrors-DbqiDIdi.js";const v=n({mixins:[w],components:{ReportTemplate:b,IonPage:p},data:()=>({title:"",totalClients:[],rows:[],reportReady:!1,isLoading:!1,columns:[[e.thTxt("ARV#"),e.thTxt("Gender"),e.thTxt("Birthdate"),e.thTxt("Specimen"),e.thTxt("Ordered"),e.thTxt("Result"),e.thTxt("Released"),e.thTxt("Curr. Regimen"),e.thTxt("Action",{csvExportable:!1,pdfExportable:!1})]]}),created(){this.fields=[...this.getDateDurationFields(),{id:"result_type",helpText:"Select result type",type:d.TT_SELECT,validation:r=>m.required(r),options:()=>[{label:"Viraemia 1000+",value:"viraemia-1000"},{label:"Suppressed",value:"suppressed"},{label:"Low level viraemia",value:"low-level-viraemia"}]}]},methods:{async onPeriod(r,t){const o=r.result_type;this.rows=[],this.report=new a,this.report.setStartDate(t.start_date),this.report.setEndDate(t.end_date),this.report.setOccupation(t.occupation),this.period=this.report.getDateIntervalPeriod(),this.title="".concat(o.label," Report <small><b>(between the period of (").concat(this.period,")</b></small>"),this.customFileName="Clinic ".concat(a.getLocationName()," ").concat(o.label," ").concat(this.period),this.setRows(await this.report.getViralLoadResults(o.value.toLowerCase()))},async setRows(r){this.sortByArvNumber(r).forEach(t=>{this.rows.push([e.td(t.arv_number),e.td(this.formatGender(t.gender)),e.tdDate(t.birthdate),e.td(t.specimen),e.tdDate(t.order_date),e.td("".concat(t.result_modifier||""," ").concat(t.result)),e.tdDate(t.result_date),e.td(t.current_regimen||""),e.tdBtn("View",()=>this.$router.push("/patient/dashboard/".concat(t.patient_id)))])})}}});function T(r,t,o,R,$,x){const i=s("report-template"),l=s("ion-page");return c(),h(l,null,{default:f(()=>[_(i,{title:r.title,period:r.period,rows:r.rows,fields:r.fields,columns:r.columns,canExportPDf:!1,showtitleOnly:!0,customFileName:r.customFileName,onReportConfiguration:r.onPeriod,"report-prefix":"Clinic"},null,8,["title","period","rows","fields","columns","customFileName","onReportConfiguration"])]),_:1})}const N=u(v,[["render",T]]);export{N as default};
