System.register(["./index-legacy-pSEoxn3J.js","./HisStandardForm-legacy-CGi-zolz.js","./useEncounter-legacy-D27v7I9F.js","./isEmpty-legacy-De9HmsH6.js","./encounter_guidelines-legacy-mYSO8ZN5.js","./GuidelineEngine-legacy-KsvQuFdF.js"],(function(e,a){"use strict";var t,n,l,o,i,r,s,u,c,d,f,m,p;return{setters:[e=>{t=e.bW,n=e.d,l=e.r,o=e.be,i=e.an,r=e.ao,s=e.a,u=e.f,c=e.b,d=e.q,f=e.p},e=>{m=e.H},e=>{p=e.u},null,null,null],execute:function(){class a extends t{constructor(e,a){super(e,184,a)}}e("default",n({__name:"CxCaOutcome",setup(e){let t,n;const g=l([]),v=l([]),b=o.getProgramID(),y=o.getLocationName(),w=o.getSessionDate(),{patientDashboardUrl:_,goToNextTask:C}=p((async(e,l)=>{n=l,t=new a(l,e),o.getProgramWorkflows(b).then((e=>{v.value=e})),g.value=[{id:"select_referral_outcome",helpText:"Referral outcome",type:r.TT_SELECT,validation:e=>i.required(e),options:()=>[{label:"Continue follow-up",value:"Continue follow-up"},{label:"No Dysplasia/Cancer",value:"No Dysplasia/Cancer"},{label:"Palliative Care",value:"Palliative Care"},{label:"Patient died",value:"Patient died"}]}]}));async function P(e){if(!(await t.createEncounter()))return d("Unable to create encounter");const a=e.select_referral_outcome.value,l=v.value.flatMap((e=>e.states)).find((e=>e.concept.concept_names.some((e=>e.name===a))));if(!l)return d(`Unable to find workflow state for outcome: ${a}`);if(!(await o.createState(n,b,{state:l.program_workflow_state_id,location_id:y,date:w})))return d("Unable to update state");const i=await t.buildValueCoded("Outcome",a);await t.saveObservationList([i]),f("Observations and encounter created!"),C()}return(e,a)=>(c(),s(m,{fields:g.value,onFinishAction:P,skipSummary:!0,cancelDestinationPath:u(_)},null,8,["fields","cancelDestinationPath"]))}}))}}}));
