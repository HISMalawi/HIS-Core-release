System.register(["./opd_report_service-legacy-Dq2AgplQ.js","./BaseTableReport-legacy-C0xAyzsG.js","./index-legacy-zV5Jd_xD.js","./ReportMixin.vue_vue_type_script_lang-legacy-CI-CwMr0.js","./Export-legacy-BX7NHYFH.js","./index-legacy-DBvie6Lp.js","./HisStandardForm-legacy-DUG6a-9J.js","./BasicReportTemplate-legacy-aIiJ5pa3.js","./Pagination-legacy-C0F3xQXP.js"],(function(t,e){"use strict";var s,a,i,r,l,o,n,d,u,h,m,c,g,p,y;return{setters:[t=>{s=t.O},t=>{a=t.R},t=>{i=t.d,r=t.ay,l=t.n,o=t.aZ,n=t.at,d=t.p,u=t.ak,h=t.ap,m=t.a,c=t.b,g=t.w,p=t.e},t=>{y=t._},null,null,null,null,null],execute:function(){const e=i({components:{ReportTemplate:a,IonPage:l},mixins:[y],data:()=>({title:"OPD Diagnosis",rows:[],reportService:{},customInfo:{label:"Total OPD Visits",value:0},columns:[[r.thTxt("Age Groups",{sortable:!1,exportable:!1}),r.thTxt("<6 months",{colspan:2,sortable:!1,exportable:!1}),r.thTxt("6 months < 5 yrs",{colspan:2,sortable:!1,exportable:!1}),r.thTxt("5 yrs < 14 yrs",{colspan:2,sortable:!1,exportable:!1}),r.thTxt("> 14 yrs",{colspan:2,sortable:!1,exportable:!1}),r.thTxt("",{sortable:!1,exportable:!1})],[r.thTxt("Diagnosis"),r.thTxt("F",{value:"Females <6 months"}),r.thTxt("M",{value:"Males <6 months"}),r.thTxt("F",{value:"Females 6 months < 5 yrs"}),r.thTxt("M",{value:"Males 6 months < 5 yrs"}),r.thTxt("F",{value:"Females 5 yrs < 14 yrs"}),r.thTxt("M",{value:"Males 5 yrs < 14 yrs"}),r.thTxt("F",{value:"Females > 14 yrs"}),r.thTxt("M",{value:"Males > 14 yrs"}),r.thTxt("Total")]]}),created(){this.fields=this.getDateDurationFields()},methods:{async init(t,e){this.reportService=new s,this.reportService.setStartDate(e.start_date),this.reportService.setEndDate(e.end_date),this.period=this.reportService.getDateIntervalPeriod(),this.rows=this.buildRows(await this.reportService.getDiagnosis());const a=await this.reportService.getAttendance();this.customInfo.value=a.length},totalDiagnosis:t=>Object.values(t).reduce(((t,e)=>t+e),0),getDrillDownColumns:()=>[[r.thTxt("Patient ID"),r.thTxt("First Name"),r.thTxt("Last Name"),r.thTxt("Gender"),r.thTxt("Phone Number"),r.thTxt("Address"),r.thTxt("View Client")]],buildColumn(t,e="Drilldown Data"){return o.isEmpty(t)?r.td(0):r.tdLink(t.length,(async()=>this.drilldownData(e,this.getDrillDownColumns(),t,(async t=>await Promise.all(t.map((async t=>{const e=await n.findByID(t),s=new n(e);return[r.td(t),r.td(s.getGivenName()),r.td(s.getFamilyName()),r.td(s.getGender()),r.td(s.getPhoneNumber()),r.td(`${s.getCurrentDistrict()}, ${s.getCurrentVillage()}, ${s.getClosestLandmark()}`),r.tdLink("View",(()=>d.push("/patient/dashboard/"+t)))]})))))))},buildRows(t){if(o.isEmpty(t))return[];const e=[];return Object.keys(t).forEach((s=>{const a=o.get(t[s],"F.0-5 months",[]),i=o.get(t[s],"M.0-5 months",[]),l=o.get(t[s],"F.6 mth < 5 yrs",[]),n=o.get(t[s],"M.6 mth < 5 yrs",[]),d=o.get(t[s],"F.5-14 yrs",[]),u=o.get(t[s],"M.5-14 yrs",[]),h=o.get(t[s],"F.>= 14 years",[]),m=o.get(t[s],"M.>= 14 years",[]);e.push([r.td(s,{style:{textAlign:"left"}}),this.buildColumn(a,`under 6 months females diagnosed with ${s}`),this.buildColumn(i,`under 6 months males diagnosed with ${s}`),this.buildColumn(l,`under 5 years females diagnosed with ${s}`),this.buildColumn(n,`under 5 years males diagnosed with ${s}`),this.buildColumn(d,`under 14 years females diagnosed with ${s}`),this.buildColumn(u,`under 14 years males diagnosed with ${s}`),this.buildColumn(h,`over 14 years females diagnosed with ${s}`),this.buildColumn(m,`over 14 years males diagnosed with ${s}`),this.buildColumn([...l,...n,...a,...i,...d,...u,...h,...m],`Total diagnosed with ${s}`)])})),e.sort(((t,e)=>t[0].td<e[0].td?-1:t[0].td>e[0].td?1:0))}}});t("default",u(e,[["render",function(t,e,s,a,i,r){const l=h("report-template"),o=h("ion-page");return c(),m(o,null,{default:g((()=>[p(l,{title:t.title,rows:t.rows,fields:t.fields,columns:t.columns,period:t.period,reportPrefix:"Clinic",customInfo:t.customInfo,onReportConfiguration:t.init},null,8,["title","rows","fields","columns","period","customInfo","onReportConfiguration"])])),_:1})}]]))}}}));
