import{R as l,F as d,a as u}from"./regimen_report_service-h6YMUV5e.js";import{_ as c}from"./ReportMixin.vue_vue_type_script_lang-CWVQISd9.js";import{R as h}from"./TableReportTemplate-BuIqEVhG.js";import{d as f,L as e,V as n,_ as R,r as T,o as _,c as v}from"./index-BCfs_J-V.js";import{F as p}from"./dynamic-import-helper-Bsjrd6Ro.js";import"./MultiFieldDateHelper-CW6lfYIk.js";import"./KbLayouts-VRA-vjeH.js";import"./HisKbConfigurations-GhFQZvlg.js";import"./BasicReportTemplate-Cx8Bs2Je.js";import"./Export-Ckt7Z8Mq.js";import"./SIngleTouchField-UCxZk0Bs.js";import"./Pagination-CEBNEafk.js";import"./HisStandardForm-DASCGMaQ.js";import"./TouchScreenForm-BEQyavf9.js";import"./ToolbarMediumCard-DFqt8bLl.js";import"./Transformers-BPPLlH12.js";import"./ViewPort-CUJ1kut7.js";import"./ReportErrors-CN9j2LPZ.js";const g=f({mixins:[c],components:{ReportTemplate:h},data:()=>({title:"Regimen Formulation: Patient level report",totalClients:[],rows:[],columns:[[e.thTxt("ARV#"),e.thTxt("Formulation"),e.thTxt("Gender"),e.thTxt("DOB")]]}),created(){this.fields=[...this.getDateDurationFields(),{id:"regimen",helpText:"Select regimen",type:p.TT_SELECT,validation:t=>n.required(t),options:()=>l.map(t=>({label:t,value:t}))},{id:"formulation",helpText:"Select formulation",type:p.TT_SELECT,validation:t=>n.required(t),options:()=>d.map(t=>({label:t,value:t}))}]},methods:{async onPeriod({regimen:t,formulation:i},r){this.rows=[],this.report=new u,this.report.setStartDate(r.start_date),this.report.setEndDate(r.end_date),this.report.setOccupation(r.occupation),this.period=this.report.getDateIntervalPeriod();const o=i.value,a=t.value,s=await this.report.getRegimenFormulationReport(a,o);this.setRows(s,a,o)},async setRows(t,i,r){this.sortByArvNumber(t).forEach(o=>{this.rows.push([e.td(o.arv_number),e.td("(".concat(i,") ").concat(r)),e.td(this.formatGender(o.gender)),e.tdDate(o.birthdate)])})}}});function w(t,i,r,o,a,s){const m=T("report-template");return _(),v(m,{title:t.title,period:t.period,rows:t.rows,fields:t.fields,columns:t.columns,onReportConfiguration:t.onPeriod,"report-prefix":"Clinic"},null,8,["title","period","rows","fields","columns","onReportConfiguration"])}const k=R(g,[["render",w]]);export{k as default};
