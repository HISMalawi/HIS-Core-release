import{_ as g}from"./ReportMixin.vue_vue_type_script_lang-DHsaLvda.js";import{b as d,a as w,W as _}from"./regimen_report_service-BwtO0cTA.js";import{d as R,I as D,L as t,ab as l,_ as E,r as c,o as I,c as b,w as T,b as N}from"./index-BCTN_bnC.js";import{R as k}from"./TableReportTemplate-vw3YSnxU.js";import"./MultiFieldDateHelper-CQ4seieZ.js";import"./dynamic-import-helper-BkBZiFw5.js";import"./KbLayouts-VRA-vjeH.js";import"./HisKbConfigurations-GhFQZvlg.js";import"./BasicReportTemplate-ARrW1sF6.js";import"./Export-nPQsqN2_.js";import"./SIngleTouchField-DeaPtOu6.js";import"./Pagination-141LZS_a.js";import"./HisStandardForm-CaDwl-hA.js";import"./TouchScreenForm-TKB9q3ZD.js";import"./ToolbarMediumCard-O_J6wu7C.js";import"./Transformers-BPPLlH12.js";import"./ViewPort-BCxYiILf.js";import"./ReportErrors-Dkeo3N9I.js";const P=R({mixins:[g],components:{ReportTemplate:k,IonPage:D},data:()=>({rows:[],title:"Regimen distribution (Weight)",columns:[]}),created(){this.columns=[[t.thTxt("Weight band"),t.thTxt("Gender"),...d.map(o=>t.thNum(o)),t.thNum("Unknown"),t.thNum("Total (regimen)")]],this.fields=this.getDateDurationFields()},methods:{async onPeriod(o,r){this.rows=[],this.report=new w,this.report.setOccupation(r.occupation),this.report.setStartDate(r.start_date),this.report.setEndDate(r.end_date),this.period=this.report.getDateIntervalPeriod();const n=await this.report.getRegimensByWeight();await this.setRows(n)},async setRows(o){const r=s=>[...d,"N/A"].map(a=>{const e=s.filter(i=>!!i[a]).map(i=>Object.values(i)[0]);return t.td(l.isEmpty(e)?0:e[0])}),n=s=>s.reduce((a,e)=>a+e.td,0);_.forEach(s=>{o.filter(e=>e.weight===s).forEach(e=>{const i=r(e.males),p=r(e.females),h=[t.td(s),t.td("Male"),...i,t.td(n(i))],u=[t.td(s),t.td("Female"),...p,t.td(n(p))];if(this.rows.push(h),this.rows.push(u),!l.isEmpty(e.unknown_gender)){const m=r(e.unknown_gender),f=n(m);this.rows.push([t.td(s),t.td("Unknown Gender"),...m,t.td(f)])}})})}}});function W(o,r,n,s,a,e){const i=c("report-template"),p=c("ion-page");return I(),b(p,null,{default:T(()=>[N(i,{title:o.title,period:o.period,rows:o.rows,fields:o.fields,columns:o.columns,reportPrefix:"MoH",config:{showIndex:!1},enabledPDFHorizontalPageBreak:!0,onReportConfiguration:o.onPeriod},null,8,["title","period","rows","fields","columns","onReportConfiguration"])]),_:1})}const q=E(P,[["render",W]]);export{q as default};
