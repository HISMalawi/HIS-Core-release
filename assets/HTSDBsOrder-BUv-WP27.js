import{bQ as h,d as B,a5 as C,r as u,ei as I,a9 as m,a6 as v,v as T,w as g,ab as f,u as O,x as R}from"./index-CyYd6aWW.js";import{H as E}from"./HisStandardForm-CuX9K_Ib.js";class c extends h{constructor(i,s=-1){super(i,199,s)}}const F=B({components:{IonPage:C,HisStandardForm:E},setup(){const o=u([]),i=u(""),s=new c(-1),{htsClient:l,yesNoOptions:d,saveEncounter:p,patientDashboardUrl:a}=I({onInitVisit:e=>{o.value=[S(e),_()]}});function r(e,t){let n;e.dbs_sample_collection==="Yes"&&(n=D(e.dbs_specimen_id)),p({encounterName:"DBS ORDER",encounterTypeID:s.encounterTypeID,formData:e,computedData:t,labOrders:n})}function D(e){const t=l.age;let n;return t<1||i.value=="Inconclusive Re-test"?n=844:n=c.getCachedConceptID("HIV viral load"),[{concept_id:n,specimenConcept:c.getCachedConceptID("DBS (Free drop to DBS card)",!0),accessionNumber:e,reason:"Routine"}]}function S(e){let t="DBS Sample";const n=e.age;return i.value=="Inconclusive Re-test"&&(t="DBS Sample for Incoclusive Re-test"),n<1&&(t="DBS Sample (EID)"),n<1&&(t="DBS Sample (EID)"),{id:"dbs_sample_collection",helpText:t,type:m.TT_YES_NO,isRequired:()=>!0,finalComputedValue:b=>({obs:s.buildValueCoded("Is DBS Sample Collected",b)}),options:()=>[{label:"Is DBS Sample Collected?",value:"",values:d()}]}}function _(){return{id:"dbs_specimen_id",helpText:"DBS Specimen ID",type:m.TT_BARCODE,requireNext:!1,condition:e=>/yes/i.test("".concat(e.dbs_sample_collection)),finalComputedValue:e=>({obs:s.buildValueText("DBS Specimen ID","".concat(e))}),config:{hiddenFooterBtns:["Clear"]},isRequired:()=>!0}}return{patientDashboardUrl:a,onFinish:r,fields:o}}});function x(o,i,s,l,d,p){const a=f("his-standard-form"),r=f("ion-page");return O(),T(r,null,{default:g(()=>[R(a,{formLabel:"DBS Order",fields:o.fields,onFinishAction:o.onFinish,cancelDestinationPath:o.patientDashboardUrl()},null,8,["fields","onFinishAction","cancelDestinationPath"])]),_:1})}const H=v(F,[["render",x]]);export{H as default};
