import{bk as h,d as B,I,K as u,dF as C,F as m,_ as v,r as f,o as T,c as g,w as F,b as O}from"./index-C6EjxQ0a.js";import{H as R}from"./HisStandardForm-CHL0RBXf.js";class c extends h{constructor(i,s=-1){super(i,199,s)}}const E=B({components:{IonPage:I,HisStandardForm:R},setup(){const o=u([]),i=u(""),s=new c(-1),{htsClient:l,yesNoOptions:d,saveEncounter:p,patientDashboardUrl:a}=C({onInitVisit:e=>{o.value=[S(e),_()]}});function r(e,t){let n;e.dbs_sample_collection==="Yes"&&(n=D(e.dbs_specimen_id)),p({encounterName:"DBS ORDER",encounterTypeID:s.encounterTypeID,formData:e,computedData:t,labOrders:n})}function D(e){const t=l.age;let n;return t<1||i.value=="Inconclusive Re-test"?n=844:n=c.getCachedConceptID("HIV viral load"),[{concept_id:n,specimenConcept:c.getCachedConceptID("DBS (Free drop to DBS card)",!0),accessionNumber:e,reason:"Routine"}]}function S(e){let t="DBS Sample";const n=e.age;return i.value=="Inconclusive Re-test"&&(t="DBS Sample for Incoclusive Re-test"),n<1&&(t="DBS Sample (EID)"),n<1&&(t="DBS Sample (EID)"),{id:"dbs_sample_collection",helpText:t,type:m.TT_YES_NO,isRequired:()=>!0,finalComputedValue:b=>({obs:s.buildValueCoded("Is DBS Sample Collected",b)}),options:()=>[{label:"Is DBS Sample Collected?",value:"",values:d()}]}}function _(){return{id:"dbs_specimen_id",helpText:"DBS Specimen ID",type:m.TT_BARCODE,requireNext:!1,condition:e=>/yes/i.test("".concat(e.dbs_sample_collection)),finalComputedValue:e=>({obs:s.buildValueText("DBS Specimen ID","".concat(e))}),config:{hiddenFooterBtns:["Clear"]},isRequired:()=>!0}}return{patientDashboardUrl:a,onFinish:r,fields:o}}});function y(o,i,s,l,d,p){const a=f("his-standard-form"),r=f("ion-page");return T(),g(r,null,{default:F(()=>[O(a,{formLabel:"DBS Order",fields:o.fields,onFinishAction:o.onFinish,cancelDestinationPath:o.patientDashboardUrl()},null,8,["fields","onFinishAction","cancelDestinationPath"])]),_:1})}const H=v(E,[["render",y]]);export{H as default};
