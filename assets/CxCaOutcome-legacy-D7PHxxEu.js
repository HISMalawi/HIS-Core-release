System.register(["./dynamic-import-helper-legacy-arUa2LZV.js","./HisStandardForm-legacy-BXV61qjj.js","./index-legacy-Dg5P6bX-.js","./EncounterMixin.vue_vue_type_script_lang-legacy-I8VbH9aw.js","./TouchScreenForm-legacy-Bqug27CT.js","./ToolbarMediumCard-legacy-DWokgyDV.js","./Transformers-legacy-DhNYVLaS.js","./ViewPort-legacy-D3j1oaCn.js","./encounter_guidelines-legacy-mRSBdMQj.js","./GuidelineEngine-legacy-KsvQuFdF.js"],(function(e,t){"use strict";var a,n,r,i,l,o,c,s,u,d,m,h,g;return{setters:[e=>{a=e.F},e=>{n=e.H},e=>{r=e.b5,i=e.d,l=e.t,o=e.aI,c=e.T,s=e.V,u=e._,d=e.r,m=e.o,h=e.c},e=>{g=e._},null,null,null,null,null,null],execute:function(){class t extends r{constructor(e,t){super(e,184,t)}}const f=i({mixins:[g],components:{HisStandardForm:n},data:()=>({outcome:{}}),watch:{patient:{async handler(){this.outcome=new t(this.patientID,this.providerID),this.fields=this.getFields()},deep:!0}},methods:{async onFinish(e){if(!(await this.outcome.createEncounter()))return l("Unable to create encounter");const t=o.getProgramID(),a=await o.getProgramWorkflows(o.getProgramID()),n=e.select_referral_outcome.value,r={};a.forEach((e=>{e.states.forEach((e=>{const t=e.program_workflow_state_id,a=e.concept.concept_names[0].name;r[a]=t}))}));const i={location_id:o.getLocationName(),state:r[n],date:o.getSessionDate()};if(!(await o.createState(this.patientID,t,i)))return l("Unable to update state");const s=e.select_referral_outcome.value,u=e.select_cancer_treatment.value,d=[await this.outcome.buildValueCoded("Outcome",s)];if(u.match(/cancer/)){const e=await this.outcome.buildValueCoded("Cancer treatment",u);d.push(e)}await this.outcome.saveObservationList(d),c("Observations and encounter created!"),this.nextTask()},getFields:()=>[{id:"select_referral_outcome",helpText:"Referral outcome",type:a.TT_SELECT,validation:e=>s.required(e),options:()=>[{label:"Cancer of cervix",value:"Cancer of cervix"},{label:"Continue follow-up",value:"Continue follow-up"},{label:"Discharged uninfected",value:"Discharged uninfected"},{label:"Treatment complete",value:"Treatment complete"}]},{id:"select_cancer_treatment",helpText:"Select cancer treatment",type:a.TT_SELECT,validation:e=>s.required(e),options:()=>[{label:"Surgery",value:"Surgery"},{label:"Palliative Care",value:"Palliative Care"},{label:"Discharged",value:"Discharged"},{label:"Other",value:"Other"}]}]}});e("default",u(f,[["render",function(e,t,a,n,r,i){const l=d("his-standard-form");return m(),h(l,{fields:e.fields,onFinishAction:e.onFinish,skipSummary:!0,cancelDestinationPath:e.cancelDestination},null,8,["fields","onFinishAction","cancelDestinationPath"])}]]))}}}));
