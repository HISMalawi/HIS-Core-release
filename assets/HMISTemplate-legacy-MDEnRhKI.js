System.register(["./opd_report_service-legacy-DRQcBQZi.js","./index-legacy-CA6M7ipO.js"],(function(t,e){"use strict";var n,s,o,r,i,a,l,c,d,u,h;return{setters:[t=>{n=t.O},t=>{s=t.d,o=t.aq,r=t.as,i=t.bC,a=t.ao,l=t.aa,c=t.af,d=t.a,u=t.E,h=t.b}],execute:function(){class e extends n{regenerate;constructor(){super(),this.regenerate=!1}setRegenerate(t){this.regenerate=t}requestHMIS15(){return this.getReport("generate_hmis_15_report",{request:"true"})}requestHMIS17(){return this.getReport("generate_hmis_17_report",{request:"true"})}renderResults(t){const e=[];let n=1;for(const[s,o]of Object.entries(t)){const t=[],r=o,i={id:0,name:"",total:0,totalPatientIds:""};i.name=s;let a=0;i.id=n,n+=1;for(const[e,n]of Object.entries(r)){const e=n;null!=e&&(a+=e.length,i.total=a,e.length&&(t.push(...e),i.totalPatientIds=t))}e.push(i)}return e}getCSVString(t){let e="Diseases/Events/Conditions, #,\n";for(const n of t)e+=`${n.name},${n.total},\n`;return{CSVString:e}}}t("a",e);const m=s({components:{ReportTable:o},data:function(){return{conditions:[],tableCssTheme:"opd-report-theme",total:" Total ",rows:[],columns:[[r.thTxt(""),r.thTxt("Diseases/Events/Conditions"),r.thTxt("UNVERIFIED"),r.thTxt("VERIFIED")]]}},props:["params","periodDates","quarter","onDrillDown","reportName"],methods:{renderResults(){const t=(new e).renderResults(this.params);t.length&&(this.conditions=t,this.rows=this.buildRows(t))},onDownload(t=""){const n=new e;let{CSVString:s}=n.getCSVString(this.conditions);s+=`\n          Date Created: ${i().format("DD/MMM/YYYY HH:MM:ss")}\n          His-Core Version: ${a.getCoreVersion()}\n          API Version: ${a.getApiVersion()}\n          Report Period: ${this.periodDates}\n          Site: ${a.getLocationName()}\n          Site UUID: ${a.getSiteUUID()}`;const o=new Blob([s],{type:"text/csv;charset=utf-8;"});if(navigator.msSaveBlob)navigator.msSaveBlob(o,"exportFilename");else{const e=document.createElement("a");e.href=window.URL.createObjectURL(o),e.setAttribute("download",`${t}.csv`),document.body.appendChild(e),e.click(),document.body.removeChild(e)}},buildRows(t){const e=[];return t.forEach((t=>{e.push([r.td(t.id,{style:{textAlign:"left"}}),r.td(t.name,{style:{textAlign:"left"}}),this.buildRow(this.total+"("+t.name+")",t.total,t.totalPatientIds),r.td("")])})),e},buildRow(t,e,n){return e>0?r.tdLink(e,(async()=>this.onDrillDown(t,n))):r.td(0)}},watch:{params:{immediate:!0,handler(){this.renderResults()}}}}),g={class:"my-table",style:{margin:"auto",width:"95%","margin-top":"3%","margin-bottom":"3%"}};t("H",l(m,[["render",function(t,e,n,s,o,r){const i=c("report-table");return d(),u("div",g,[h(i,{columns:t.columns,rows:t.rows,config:{tableCssTheme:t.tableCssTheme}},null,8,["columns","rows","config"])])}]]))}}}));
