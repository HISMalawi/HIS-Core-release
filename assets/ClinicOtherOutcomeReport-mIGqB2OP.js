import{d as g,r as n,dm as D,o as O,D as y,a as C,w as V,f as p,ct as a,cs as v,al as w,am as T,b as x,e as S,x as P,n as B}from"./index-Ds0zDBhU.js";import{v as F}from"./TableView-N12LtehS.js";import{b as _,c as b,w as G}from"./v2utils-CXC8pGQ5.js";import"./Export-DFDKXGhs.js";import"./index-DZD2XSQD.js";const N=g({__name:"ClinicOtherOutcomeReport",setup(L){const h=P("reports.png"),r=n([]),i=n(""),u=n(""),l=new D,s=n([]),c=[_("identifier"),{label:"First name",ref:"given_name",encrypted:!0},{label:"Last name",ref:"family_name",encrypted:!0},{label:"Birthdate",ref:"birthdate",toValue:e=>a(e)},{label:"Gender",ref:"gender",toValue:e=>v(e)},{label:"Outcome date",ref:"outcome_date",toValue:e=>a(e)},b()],d=()=>G(async()=>{r.value=[],r.value=await l.getOtherOutcome(u.value)}),m=()=>y({fields:[{id:"outcome",helpText:"Select outcome",type:T.TT_SELECT,validation:e=>w.required(e),options:()=>[{label:"Transfer Out",value:"Transfer Out",other:{columns:[_("identifier"),{label:"First name",ref:"given_name",encrypted:!0},{label:"Last name",ref:"family_name",encrypted:!0},{label:"Birthdate",ref:"birthdate",toValue:e=>a(e)},{label:"Gender",ref:"gender",toValue:e=>v(e)},{label:"Outcome date",ref:"outcome_date",toValue:e=>a(e)},{label:"TO Location",ref:"transferred_out_to"},b()]}},{label:"Died",value:"Died",other:{columns:c}},{label:"Stopped",value:"Stopped",other:{columns:c}}]}],defaultOnFinish:(e,t)=>{var o,f;t.occupation&&l.setOccupation(t.occupation),i.value="".concat(a(t.start_date)," to ").concat(a(t.end_date)),l.startDate=t.start_date,l.endDate=t.end_date,u.value="".concat(e.outcome.value),s.value=[(f=(o=e.outcome.other)==null?void 0:o.columns)!=null?f:[]],d()}});return O(()=>!r.value.length&&m()),(e,t)=>(x(),C(p(B),null,{default:V(()=>{var o;return[S(F,{"default-sort-order":"asc","default-sorted-column":"identifier","icon-url":p(h),subtitle:i.value,title:"".concat((o=u.value)!=null?o:"N/A"," Report"),"report-prefix":"Clinic",columns:s.value,onConfigure:m,columnData:r.value,rowsPerPage:50,onRefresh:d},null,8,["icon-url","subtitle","title","columns","columnData"])]}),_:1}))}});export{N as default};
