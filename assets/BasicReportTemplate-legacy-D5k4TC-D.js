System.register(["./index-legacy-HpoRL6sM.js","./Export-legacy-t2OOVOE7.js","./SIngleTouchField-legacy-58JVf1y9.js","./dynamic-import-helper-legacy-DYK5bIOV.js","./Pagination-legacy-BE-YB8Nw.js"],(function(e,t){"use strict";var o,a,r,s,l,n,i,c,u,d,p,g,h,P,m,F,y,w,f,b,v,C,I,S,R,_,D,V,k,T,x,B,U,N,A,E,O,j;return{setters:[e=>{o=e.d,a=e.h,r=e.ak,s=e.aj,l=e.bb,n=e.f,i=e.K,c=e.a8,u=e.O,d=e._,p=e.r,g=e.o,h=e.c,P=e.w,m=e.a0,F=e.A,y=e.v,w=e.bE,f=e.z,b=e.b,v=e.u,C=e.D,I=e.bn,S=e.I,R=e.j,_=e.l,D=e.i,V=e.an,k=e.m,T=e.S,x=e.H,B=e.br,U=e.ad},e=>{N=e.t,A=e.a},e=>{E=e.T},e=>{O=e.F},e=>{j=e.P}],execute:function(){var t=document.createElement("style");t.textContent=".reset_button[data-v-7bf42b5b]{height:5vh}.input_display[data-v-7bf42b5b]{text-align:left;font-size:var(--his-sm-font-size);width:30vw;height:5vh;margin-bottom:2%;border:solid 1px #9d9b9b;border-radius:5px;padding:9px;margin-top:2%}\n",document.head.appendChild(t);const z=o({emits:["onItemsPerPage","onSearchFilter","onItemsVLtype"],components:{IonItem:a,IonCol:r,IonRow:s,IonInput:l,IonButton:n},props:{customFilter:{type:Function},totalRowCount:{type:Number,default:15e3},disableSearchFilter:{type:Boolean,default:!1},disablePerPageFilter:{type:Boolean,default:!1},showPerPageFilter:{type:Boolean,default:!1}},setup(e,{emit:t}){const o=i(50),a=i(""),r=i("");async function s(e,t){(await u.create({component:E,backdropDismiss:!1,cssClass:"full-modal",componentProps:{dismissType:"modal",currentField:e,onFinish:t}})).present()}function l(e){t("onSearchFilter",e)}return c(o,(e=>{"number"==typeof e&&t("onItemsPerPage",e)}),{immediate:!0}),{reset:function(){a.value="",l("")},itemsPerPage:o,searchFilter:a,launchFilter:async function(){"function"==typeof e.customFilter&&(r.value=await e.customFilter())},launchKeyboard:s,launchSearcher:function(){s({id:"search",helpText:"Search table data",defaultValue:()=>a.value,type:O.TT_TEXT},(e=>{a.value=e?e.value:"",l(a.value)}))},customFilterValue:r}}}),L=["disabled"],H=["selected"],$=["selected"],q=["selected"],M=["selected"],G=["selected"],K=["selected"],X=["selected","value"],J=e("R",d(z,[["render",function(e,t,o,a,r,s){const l=p("ion-col"),n=p("ion-input"),i=p("ion-button"),c=p("ion-item"),u=p("ion-row");return g(),h(u,null,{default:P((()=>[e.showPerPageFilter?(g(),h(l,{key:0},{default:P((()=>[m(F("select",{class:"input_display","onUpdate:modelValue":t[0]||(t[0]=t=>e.itemsPerPage=t),disabled:e.disablePerPageFilter},[F("option",{selected:5===e.itemsPerPage,value:5},"5 rows/page",8,H),F("option",{selected:10===e.itemsPerPage,value:10},"10 rows/page",8,$),F("option",{selected:20===e.itemsPerPage,value:20},"20 rows/page",8,q),F("option",{selected:50===e.itemsPerPage,value:50},"50 rows/page",8,M),F("option",{selected:100===e.itemsPerPage,value:100},"100 rows/page",8,G),F("option",{selected:1e3===e.itemsPerPage,value:1e3},"1000 rows/page",8,K),F("option",{selected:e.itemsPerPage===e.totalRowCount,value:e.totalRowCount},"Show all rows("+y(e.totalRowCount)+")",9,X)],8,L),[[w,e.itemsPerPage]])])),_:1})):f("",!0),"function"==typeof e.customFilter?(g(),h(l,{key:1},{default:P((()=>[b(n,{class:"input_display",value:e.customFilterValue,onClick:e.launchFilter,placeholder:"Filter..."},null,8,["value","onClick"])])),_:1})):f("",!0),b(l,null,{default:P((()=>[b(c,{lines:"none"},{default:P((()=>[b(n,{disabled:e.disableSearchFilter,class:"input_display",value:e.searchFilter,onClick:e.launchSearcher,placeholder:"Search here..."},null,8,["disabled","value","onClick"]),e.searchFilter?(g(),h(i,{key:0,class:"reset_button",size:"large",onClick:t[1]||(t[1]=t=>e.reset()),color:"secondary"},{default:P((()=>[v(" Reset ")])),_:1})):f("",!0)])),_:1})])),_:1})])),_:1})}],["__scopeId","data-v-7bf42b5b"]])),Q=o({components:{IonCol:r,IonRow:s,Pagination:j,ReportTable:C,ReportFilter:J,HisFooter:I,IonPage:S,IonHeader:R,IonContent:_,IonToolbar:D,IonChip:V,IonFooter:k},props:{title:{type:String,required:!0},columns:{type:Array,required:!0},encryptPDF:{type:Boolean,default:!1},rows:{type:Array,default:()=>[]},rowParser:{type:Function},showFilters:{type:Boolean,default:!1},rowsPerPage:{type:Number},asyncRows:{type:Function},paginated:{type:Boolean,default:!1},customBtns:{type:Array,default:()=>[]},showReportStamp:{type:Boolean,default:!0},footerColor:{type:String,default:"dark"},customFileName:{type:String,default:""},canExport:{type:Boolean,default:!0},onFinish:{type:Function}},data:()=>({btns:[],isTableLoading:!1,searchFilter:"",itemsPerPage:50,currentPage:0,coreVersion:T.getCoreVersion(),tableRows:[],totalPages:0,activeColumns:[],activeRows:[],date:x.toStandardHisDisplayFormat(T.getSessionDate()),apiVersion:T.getApiVersion(),siteUUID:T.getSiteUUID()}),methods:{getFileName(){return this.customFileName?this.customFileName:this.title},pdfEncryptionData(){const e=T.getUserName();return{encryption:{userPassword:e,ownerPassword:e,userPermissions:["print"]}}}},created(){this.btns=[...this.customBtns,{name:"CSV",size:"large",slot:"start",color:"primary",visible:this.canExport,onClick:()=>{const{columns:e,rows:t}=B(this.activeColumns,this.activeRows,"csvMode");N(e,[...t,[`Date Created: ${this.date}`],[`HIS-Core Version: ${this.coreVersion}`],[`API Version: ${this.apiVersion}`],[`Site UUID: ${this.siteUUID}`],[`Generated by: ${T.getUserName()}`]],this.getFileName())}},{name:"PDF",size:"large",slot:"start",color:"primary",visible:this.canExport,onClick:async()=>{let e="pdfMode";this.encryptPDF&&(e="Secure PDF"===await U("Security warning","PDF may contain private data that will require a password to unlock","To access private data choose Secure PDF over Regular PDF",[{name:"Secure PDF",slot:"start",color:"success"},{name:"Regular PDF",slot:"start",color:"success"}],"his-danger-color")?"pdfMode":"ignorePDFColumnexport");const{columns:t,rows:o}=B(this.activeColumns,this.activeRows,e);A(t,o,this.getFileName(),!1,this.encryptPDF&&"ignorePDFColumnexport"!=e?this.pdfEncryptionData():{})}},{name:"Finish",size:"large",slot:"end",color:"success",visible:!0,onClick:()=>{if("function"==typeof this.onFinish)return this.onFinish();this.$router.push({path:"/"})}}]}}),W={class:"report-content"};e("D",d(Q,[["render",function(e,t,o,a,r,s){const l=p("ion-col"),n=p("ion-row"),i=p("ion-toolbar"),c=p("report-filter"),u=p("ion-header"),d=p("report-table"),m=p("ion-content"),w=p("pagination"),C=p("ion-chip"),I=p("ion-footer"),S=p("his-footer"),R=p("ion-page");return g(),h(R,null,{default:P((()=>[b(u,null,{default:P((()=>[b(i,null,{default:P((()=>[b(n,null,{default:P((()=>[b(l,null,{default:P((()=>[F("h1",null,y(e.title),1)])),_:1})])),_:1})])),_:1}),b(i,null,{default:P((()=>[b(c,{showPerPageFilter:e.showFilters||e.paginated,disableSearchFilter:e.isTableLoading,disablePerPageFilter:e.isTableLoading,totalRowCount:e.tableRows.length,onOnItemsPerPage:t[0]||(t[0]=t=>e.itemsPerPage=t),onOnSearchFilter:t[1]||(t[1]=t=>e.searchFilter=t)},null,8,["showPerPageFilter","disableSearchFilter","disablePerPageFilter","totalRowCount"])])),_:1})])),_:1}),b(m,null,{default:P((()=>[F("div",W,[b(d,{rows:e.rows,paginated:e.paginated,asyncRows:e.asyncRows,rowParser:e.rowParser,columns:e.columns,showFilters:e.showFilters,newPage:e.currentPage,searchFilter:e.searchFilter,rowsPerPage:e.itemsPerPage,onOnIsLoading:t[2]||(t[2]=t=>e.isTableLoading=t),onOnTableRows:t[3]||(t[3]=t=>e.tableRows=t),onOnPagination:t[4]||(t[4]=t=>e.totalPages=t.length),onOnActiveColumns:t[5]||(t[5]=t=>e.activeColumns=t),onOnActiveRows:t[6]||(t[6]=t=>e.activeRows=t)},null,8,["rows","paginated","asyncRows","rowParser","columns","showFilters","newPage","searchFilter","rowsPerPage"])])])),_:1}),b(I,null,{default:P((()=>[b(i,null,{default:P((()=>[!e.searchFilter&&e.paginated||!e.searchFilter&&e.totalPages>0&&e.paginated?(g(),h(w,{key:0,perPage:e.itemsPerPage,maxVisibleButtons:10,totalPages:e.totalPages,onOnChangePage:t[7]||(t[7]=t=>e.currentPage=t)},null,8,["perPage","totalPages"])):f("",!0)])),_:1}),e.showReportStamp?(g(),h(i,{key:0},{default:P((()=>[b(C,{color:"primary"},{default:P((()=>[v("Date Created: "),F("b",null,y(e.date),1)])),_:1}),b(C,{color:"primary"},{default:P((()=>[v("His-Core Version: "),F("b",null,y(e.coreVersion),1)])),_:1}),b(C,{color:"primary"},{default:P((()=>[v("API Version: "),F("b",null,y(e.apiVersion),1)])),_:1})])),_:1})):f("",!0)])),_:1}),b(S,{color:e.footerColor,btns:e.btns},null,8,["color","btns"])])),_:1})}]]))}}}));
