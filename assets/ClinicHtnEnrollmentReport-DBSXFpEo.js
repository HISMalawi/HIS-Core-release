import{d as D,r as w,o as T,D as C,a as P,c as H,w as E,b as R,u as v,I as B,i as I,au as d,W as k}from"./index-CMZASHAR.js";import{w as A,A as x}from"./v2utils-DPaBC-nQ.js";import{C as O}from"./clinic_report_service-Clk-6w4F.js";import{v as S}from"./TableView-DhTjQT8r.js";import"./Export-CpyT9Gk1.js";import"./index-_zuoFVCp.js";const $=D({__name:"ClinicHtnEnrollmentReport",setup(y){const b=I("reports.png"),o=w([]),l=w(""),i=new O,_={htn_enrollment:{_label:"HYPERTENSION (HTN) ENROLMENT",registered_with_hypertension:"Patients registered with hypertension",enrolled_and_active_in_care:"HTN Patients enrolled and active in care",who_have_defaulted_during_the_reporting_period:"HTN Patients who have defaulted during the reporting period",who_have_died:"HTN Patients who have died",who_have_transferred_out:"HTN Patients who have transferred out",who_have_stopped_htn_care:"HTN Patients who have stopped HTN care",with_a_visit_in_last_3_months:"HTN Patients with a visit in the last 3 months",with_a_visit_in_last_3_months_who_have_a_bp_measurement_recorded:"HTN Patients with a visit in the last 3 months who have a BP measurement recorded",with_a_visit_in_last_3_months_who_have_bp_below_140_90:"HTN Patients with a visit in the last 3 months who have BP below 140/90"},treatment_drug_classification:{_label:"TREATMENT BASED ON HTN DRUG CLASSIFICATION",diuretics:"Diuretics",beta_blockers:"Beta Blockers",calcium_channel_blockers:"Calcium Channel Blockers",ace_inhibitors:"ACE Inhibitors",angiotensin2_receptor_blockers:"Angiotensin 2 Receptor Blockers",vasodilator:"Vasodilator",others:"Others"}},h=(t,n)=>({ref:n,label:t,defaultValue:"",toValue:e=>e.length,tdClick:async e=>{e.refData.length&&(await d.create({component:x,backdropDismiss:!1,cssClass:"large-modal",componentProps:{title:e.column.label,subtitle:l,patientIdentifiers:e.refData,onFinish:()=>d.getTop().then(a=>a&&d.dismiss())}})).present()}}),N=[[{label:"#",ref:"index"},{label:"indicator",ref:"indicator"},h("Reporting period","reporting_period"),h("Cumulatively","cumulatively")]],c=(t={})=>{o.value=[];const n=e=>{let a=1;Object.keys(_[e]).forEach(s=>{var m,f,g;if(s==="_label"){o.value.push({indicator:"<b>".concat(_[e][s],"</b>"),index:""});return}const r=(m=t==null?void 0:t[e])==null?void 0:m[s];o.value.push({index:a,indicator:_[e][s],reporting_period:(f=r==null?void 0:r.reporting_period)!=null?f:[],cumulatively:(g=r==null?void 0:r.cummulative)!=null?g:[]}),++a})};n("htn_enrollment"),n("treatment_drug_classification")},u=()=>A(async()=>{if(!(i.startDate&&i.endDate))return k("Start date and end date required!");c({}),c(await i.getHtnEnrollmentReport())});T(()=>{c(),p()});const p=()=>C({onFinish:(t,n,e,a)=>{a&&i.setOccupation(a),l.value="".concat(e),i.startDate=t,i.endDate=n,u()}});return(t,n)=>(P(),H(v(B),null,{default:E(()=>[R(S,{title:"HTN Enrollment Report","icon-url":v(b),subtitle:l.value,columns:N,columnData:o.value,rowsPerPage:50,onConfigure:p,onRefresh:()=>u(),"report-prefix":"Clinic"},null,8,["icon-url","subtitle","columnData","onRefresh"])]),_:1}))}});export{$ as default};
