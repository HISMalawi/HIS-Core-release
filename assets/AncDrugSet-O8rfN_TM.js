import{F as r}from"./dynamic-import-helper-BkBZiFw5.js";import{H as p}from"./HisStandardForm-CaDwl-hA.js";import{d as m,I as c,T as f,t as o,V as a,_ as g,r as n,o as s,c as d,w as _}from"./index-BCTN_bnC.js";import{D as h}from"./drug_service-po90mf4X.js";import{D as v}from"./anc_treatment_service-Cn091EtZ.js";import{A as T}from"./anc_drug_set-DygraxVL.js";import"./TouchScreenForm-TKB9q3ZD.js";import"./ToolbarMediumCard-O_J6wu7C.js";import"./Transformers-BPPLlH12.js";import"./ViewPort-BCxYiILf.js";import"./drug_order_service-DUHTU9In.js";const y=m({components:{HisStandardForm:p,IonPage:c},data:()=>({hisFormKey:0,fields:[],allDrugs:[],fieldComponent:"",service:{}}),created(){this.fields=this.getFields()},methods:{async onFinish(e,t){try{if(await T.saveDrugSet(t))return f("Drugset saved successfully"),this.$router.back();o("Unable to save drugset")}catch(i){o("".concat(i))}},getFields(){return[{id:"name",helpText:"Enter drug set name",type:r.TT_TEXT,computedValue:e=>e.value,validation:e=>a.validateSeries([()=>a.required(e),()=>"".concat(e.value).match(/^([a-zA-Z_ ]{2,17})'?-?([a-zA-Z_ ]{1,17})$/)?null:["Enter a valid drug set name."]])},{id:"description",helpText:"Drug set description",type:r.TT_TEXT,computedValue:e=>e.value,validation:e=>a.validateSeries([()=>a.required(e),()=>"".concat(e.value).match(/^([a-zA-Z_ ]{2,100})'?-?([a-zA-Z_ ]{1,100})$/)?null:["Enter a valid drug set description"]])},{id:"drug_selection",helpText:"Select drugs to add",type:r.TT_ASYNC_MULTI_SELECT,options:async(e,t="")=>(await h.getDrugs({page_size:20,name:t})).map(i=>({label:i.name,value:i.id,other:{drug:i.name,quantity:0,frequency:""}})),validation:e=>a.required(e)},{id:"drugs",helpText:"Set drugs",type:r.TT_ANC_DRUGSET_INPUT,computedValue:e=>e.map(t=>t.other),validation:e=>a.validateSeries([()=>a.required(e),()=>e.map(t=>t.other.quantity&&t.other.frequency).every(Boolean)?null:["Data is not complete"]]),options:e=>e.drug_selection,config:{drugFrequencies:Object.keys(v).map(e=>({label:e,value:e}))}}]}}});function S(e,t,i,F,D,E){const l=n("his-standard-form"),u=n("ion-page");return s(),d(u,null,{default:_(()=>[(s(),d(l,{key:e.hisFormKey,activeField:e.fieldComponent,skipSummary:!0,fields:e.fields,onOnIndex:t[0]||(t[0]=$=>e.fieldComponent=""),onOnFinish:e.onFinish},null,8,["activeField","fields","onOnFinish"]))]),_:1})}const N=g(y,[["render",S]]);export{N as default};
