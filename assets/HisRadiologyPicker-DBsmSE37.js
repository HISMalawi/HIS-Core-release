import{d as x,ac as $,ak as R,aW as A,aJ as T,a6 as B,ab as l,u as n,B as h,x as i,w as t,E as _,C as g,z as f,Z as k,v as C,G as E,H as S}from"./index-ZHjf-rL0.js";import F from"./SelectMixin-BiW8IGY0.js";import{P as b}from"./patient_radiology_service-DGPukBjF.js";import"./BaseTextInput-jCg6YrmV.js";import"./FieldMixin.vue_vue_type_script_lang-BpYOJpAA.js";const N=x({components:{IonCheckbox:$,IonText:R,IonChip:A},name:"HisRadiologyPicker",mixins:[F],data:()=>({radiologyOrdersList:{},ActiveCategory:""}),methods:{async init(){this.$emit("onFieldActivated",this);const e=await b.getRadiologyList("Radiology Orders");this.listData=this.mapListToOptions(e),this.$emit("onValue",this.getChecked(this.radiologyOrdersList))},async onselect(e,o){this.$nextTick(async()=>{const a={...e};if(a.isChecked=o.target.checked,this.onValue&&a.isChecked&&!await this.onValue(a))return o.target.checked=!1;this.onValueUpdate&&(this.radiologyOrdersList=await this.onValueUpdate({...this.radiologyOrdersList},a)),this.$emit("onValue",this.getChecked(this.radiologyOrdersList))})},async getSpecificRadiologyOrders(e){if(!(e in this.radiologyOrdersList)){const o=await b.getRadiologyList(e);this.radiologyOrdersList[e]=this.mapListToOptions(o,e)}this.ActiveCategory=e},mapListToOptions(e,o=""){return T.isEmpty(e)?[]:e.map(a=>{const r={label:a.name,value:a.name,isChecked:!1,other:a};return o&&(r.other.parent=o),r})},uncheck(e){this.radiologyOrdersList[e.other.parent].forEach(o=>{o.label===e.label&&(o.isChecked=!1)})},getChecked(e){const o=[];for(const a in e)o.push(...e[a].filter(r=>r.isChecked));return o}},computed:{checkedItems(){return this.getChecked(this.radiologyOrdersList)},activeCategoryItems(){return this.radiologyOrdersList[this.ActiveCategory]}},watch:{clear(){for(const e in this.radiologyOrdersList)this.radiologyOrdersList[e]=this.radiologyOrdersList[e].map(o=>(o.isChecked=!1,o))}},mounted(){this.init()},activated(){this.init()}}),P={style:{}};function U(e,o,a,r,z,D){const u=l("ion-text"),p=l("ion-label"),L=l("ion-chip"),m=l("ion-col"),y=l("ion-row"),v=l("ion-item"),O=l("ion-list"),w=l("ion-checkbox"),V=l("ion-grid"),I=l("view-port");return n(),h("div",null,[i(I,{showFull:!e.showKeyboard,style:{padding:"0"}},{default:t(()=>[i(V,null,{default:t(()=>[i(y,null,{default:t(()=>[i(m,{size:"12"},{default:t(()=>[(n(!0),h(_,null,g(e.checkedItems,(s,d)=>(n(),h("span",{key:d},[i(L,{color:"danger",onClick:c=>e.uncheck(s)},{default:t(()=>[i(p,null,{default:t(()=>[i(u,{class:"his-md-text"},{default:t(()=>[f(k(s.label),1)]),_:2},1024)]),_:2},1024)]),_:2},1032,["onClick"])]))),128))]),_:1})]),_:1}),i(y,null,{default:t(()=>[i(m,{size:"4"},{default:t(()=>[i(O,{style:{overflowY:"auto",height:"80vh",margin:0}},{default:t(()=>[(n(!0),h(_,null,g(e.listData,(s,d)=>(n(),C(v,{key:d,onClick:c=>e.getSpecificRadiologyOrders(s.value),detail:!0,color:e.ActiveCategory===s.label?"lightblue":""},{default:t(()=>[i(p,null,{default:t(()=>[i(u,{class:"his-md-text"},{default:t(()=>[f(k(s.label),1)]),_:2},1024)]),_:2},1024)]),_:2},1032,["onClick","color"]))),128))]),_:1})]),_:1}),e.ActiveCategory?(n(),C(m,{key:0,style:{overflowY:"auto",height:"78vh"}},{default:t(()=>[E("div",P,[i(O,{class:"view-port-content"},{default:t(()=>[(n(!0),h(_,null,g(e.activeCategoryItems,(s,d)=>(n(),C(v,{key:d,color:s.isChecked?"lightblue":""},{default:t(()=>[i(p,null,{default:t(()=>[i(u,{class:"his-md-text"},{default:t(()=>[f(k(s.label),1)]),_:2},1024)]),_:2},1024),i(w,{slot:"end",modelValue:s.isChecked,"onUpdate:modelValue":c=>s.isChecked=c,onIonChange:c=>e.onselect(s,c),disabled:s==null?void 0:s.disabled},null,8,["modelValue","onUpdate:modelValue","onIonChange","disabled"])]),_:2},1032,["color"]))),128))]),_:1})])]),_:1})):S("",!0)]),_:1})]),_:1})]),_:1},8,["showFull"])])}const M=B(N,[["render",U],["__scopeId","data-v-caf0d928"]]);export{M as default};
