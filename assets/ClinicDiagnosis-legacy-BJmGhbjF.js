System.register(["./BaseTableReport-legacy-BR_LtMcB.js","./index-legacy-D1EyWbyq.js","./ReportMixin.vue_vue_type_script_lang-legacy-Dge918Ae.js","./Export-legacy-dCfnaBFd.js","./HisStandardForm-legacy-Yzj84zTJ.js","./TouchScreenForm-legacy-Cz0UXr2y.js","./dynamic-import-helper-legacy-DYK5bIOV.js","./ToolbarMediumCard-legacy-DG4P2wyL.js","./Transformers-legacy-DhNYVLaS.js","./ViewPort-legacy-Dt6qML7b.js","./BasicReportTemplate-legacy-CCzmEXag.js","./SIngleTouchField-legacy-25qOOxkK.js","./Pagination-legacy-zx7G8OyX.js","./MultiFieldDateHelper-legacy-CWf2uW0i.js","./KbLayouts-legacy-BKvPSxzZ.js","./HisKbConfigurations-legacy-vrLd9Pgz.js"],(function(e,t){"use strict";var s,l,a,r,i,o,n,u,d,h,m,c,g,y,p,b;return{setters:[e=>{s=e.R},e=>{l=e.d,a=e.I,r=e.L,i=e.cU,o=e.q,n=e.P,u=e.bC,d=e.ab,h=e._,m=e.r,c=e.o,g=e.c,y=e.w,p=e.b},e=>{b=e._},null,null,null,null,null,null,null,null,null,null,null,null,null],execute:function(){const t=l({components:{ReportTemplate:s,IonPage:a},mixins:[b],data:()=>({title:"Clinic Diagnosis Report",rows:[],reportService:{},customInfo:{label:"Total Visits",value:0},columns:[[r.thTxt("Age Groups",{sortable:!1,exportable:!1}),r.thTxt("<6 months",{colspan:2,sortable:!1,exportable:!1}),r.thTxt("6 months < 5 yrs",{colspan:2,sortable:!1,exportable:!1}),r.thTxt("5 yrs < 14 yrs",{colspan:2,sortable:!1,exportable:!1}),r.thTxt("> 14 yrs",{colspan:2,sortable:!1,exportable:!1}),r.thTxt("",{sortable:!1,exportable:!1})],[r.thTxt("Diagnosis"),r.thTxt("Female",{value:"Females <6 months"}),r.thTxt("Male",{value:"Males <6 months"}),r.thTxt("Female",{value:"Females 6 months < 5 yrs"}),r.thTxt("Male",{value:"Males 6 months < 5 yrs"}),r.thTxt("Female",{value:"Females 5 yrs < 14 yrs"}),r.thTxt("Male",{value:"Males 5 yrs < 14 yrs"}),r.thTxt("Female",{value:"Females > 14 yrs"}),r.thTxt("Male",{value:"Males > 14 yrs"}),r.thTxt("Total")]]}),created(){this.fields=this.getDateDurationFields()},methods:{async init(e,t){this.reportService=new i,this.reportService.startDate=t.start_date,this.reportService.endDate=t.end_date,this.period=this.reportService.getReportPeriod();try{this.rows=this.buildRows(await this.reportService.getDiagnosisReport());const e=await this.reportService.getAttendance();this.customInfo.value=e.length,this.customInfo.other={click:()=>this.drill(e,"Total Patients Visits")}}catch(s){o(`${s}`)}},totalDiagnosis:e=>Object.values(e).reduce(((e,t)=>e+t),0),getDrillDownColumns:()=>[[r.thTxt("First Name"),r.thTxt("Last Name"),r.thTxt("Gender"),r.thTxt("Phone Number"),r.thTxt("Address")]],drill(e,t){return this.drilldownData(t,this.getDrillDownColumns(),e,(async e=>await Promise.all(e.map((async e=>{const t=await n.findByID(e),s=new n(t);return[r.td(s.getGivenName()),r.td(s.getFamilyName()),r.td(u(s.getGender())),r.td(s.getPhoneNumber()),r.td(`${s.getCurrentDistrict()}, ${s.getCurrentVillage()}, ${s.getClosestLandmark()}`)]})))))},buildColumn(e,t="Drilldown Data"){return d.isEmpty(e)?r.td(0):r.tdLink(e.length,(()=>this.drill(e,t)))},buildRows(e){if(d.isEmpty(e))return[];const t=[];return Object.keys(e).forEach((s=>{const l=d.get(e[s],"F.0-5 months",[]),a=d.get(e[s],"M.0-5 months",[]),i=d.get(e[s],"F.6 mth < 5 yrs",[]),o=d.get(e[s],"M.6 mth < 5 yrs",[]),n=d.get(e[s],"F.5-14 yrs",[]),u=d.get(e[s],"M.5-14 yrs",[]),h=d.get(e[s],"F.>= 14 years",[]),m=d.get(e[s],"M.>= 14 years",[]);t.push([r.td(s,{style:{textAlign:"left"}}),this.buildColumn(l,`under 6 months females diagnosed with ${s}`),this.buildColumn(a,`under 6 months males diagnosed with ${s}`),this.buildColumn(i,`under 5 years females diagnosed with ${s}`),this.buildColumn(o,`under 5 years males diagnosed with ${s}`),this.buildColumn(n,`under 14 years females diagnosed with ${s}`),this.buildColumn(u,`under 14 years males diagnosed with ${s}`),this.buildColumn(h,`over 14 years females diagnosed with ${s}`),this.buildColumn(m,`over 14 years males diagnosed with ${s}`),this.buildColumn([...i,...o,...l,...a,...n,...u,...h,...m],`Total diagnosed with ${s}`)])})),t.sort(((e,t)=>e[0].td<t[0].td?-1:e[0].td>t[0].td?1:0))}}});e("default",h(t,[["render",function(e,t,s,l,a,r){const i=m("report-template"),o=m("ion-page");return c(),g(o,null,{default:y((()=>[p(i,{title:e.title,rows:e.rows,fields:e.fields,columns:e.columns,period:e.period,reportPrefix:"Clinic",customInfo:e.customInfo,onReportConfiguration:e.init},null,8,["title","rows","fields","columns","period","customInfo","onReportConfiguration"])])),_:1})}]]))}}}));
