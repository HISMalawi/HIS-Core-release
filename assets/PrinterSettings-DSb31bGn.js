import{d as h,as as g,aj as _,r as a,ao as y,o as b,a as D,b as S,f as T}from"./index-DrAzzURJ.js";import{H as k}from"./HisStandardForm-BuN2ARUl.js";import{i as w}from"./isEmpty-DpsHgz2w.js";const A=h({__name:"PrinterSettings",setup(x){const d=g(),s=new _,n=a({}),o=a([]),i=a(0),l=a(!1),m=[{id:"printer_settings",helpText:"Printer Settings",type:y.TT_TABLE_VIEWER,options:()=>[{label:"Available Devices",value:"",other:{rowColors:P(),columns:["Available Devices"],rows:o.value.map(e=>[e.name||e.address,{type:"button",name:"Print Test Label",action:()=>s.printTestLbl(e)},r(e)?"Default Printer":{type:"button",name:"Set as Default",visible:!r(e),action:()=>v(e)}])}}],config:{hiddenFooterBtns:["Clear"],footerBtns:[{name:"Refresh",size:"large",slot:"end",color:"warning",visible:!0,onClick:u}]}}];b(async()=>{n.value=await s.getDefaultPrinter()||{},o.value.push(n.value),u()});async function u(){if(l.value)return;l.value=!0;const e=await s.getAllPrinters();o.value=p(e),l.value=!1,i.value=Math.random()}function f(e,t){return(e.name||e.address).localeCompare(t.name||t.address)}function v(e){s.setDefaultPrinter(e),n.value=e,i.value=Math.random(),u()}function r(e){return f(e,n.value)===0}function p(e){return e.sort((t,c)=>r(t)&&!r(c)?-1:!r(t)&&r(c)?1:f(t,c))}function P(){return w(n.value)?[]:[{indexes:[0],class:"adherence-txt-good adherence-col-bg bold"}]}return(e,t)=>(S(),D(k,{formID:"printer_settings",fields:m,onFinish:T(d).back,skipSummary:!0,key:i.value},null,8,["onFinish"]))}});export{A as default};
