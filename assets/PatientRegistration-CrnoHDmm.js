import{d as A,bi as C,n as F,am as o,s as m,H as g,bG as N,aB as u,bH as P,al as l,at as c,aZ as _,bI as n,a$ as D,bq as E,bJ as S,B as v,bK as w,a_ as k,bL as M,bM as $,y as R,bN as f,bO as I,av as O,as as x,ak as V,ap as T,a as B,b as L,w as H,e as G}from"./index-BCOAvIf2.js";import{H as W}from"./HisStandardForm-CejSRcn9.js";const j=A({components:{HisStandardForm:W,IonPage:F},data:()=>({app:C.getActiveApp(),ddeInstance:{},ddeDocID:"",ddeIsReassign:!1,skipSummary:!1,currentAddressAttributes:["current_region","current_district","current_village","current_traditional_authority"],homeAddressAttributes:["home_region","home_district","home_traditional_authority","home_village"],hasIncompleteData:!1,patient:{},editPersonData:{},editPerson:-1,personAttribute:"",activeField:"",fieldComponent:"",fields:[],isMilitarySite:!1,presets:{},registrationSummary:{},form:{},ddeEnabled:!1,isEmergencyDrugRefillEnabled:!1}),watch:{$route:{async handler({query:e}){this.ddeInstance=new x,e.edit_person?(this.ddeIsReassign=e.dde_reassign,this.ddeDocID=e.doc_id,this.ddeInstance.setPatientID(e.edit_person),e.person_attribute&&(this.personAttribute=e.person_attribute),await this.initEditMode(e.edit_person)):this.presets=e,this.fields=this.getFields()},immediate:!0,deep:!0}},methods:{getFields(){let e=[];return e.push(this.personIndexField()),e.push(this.givenNameField()),e.push(this.familyNameField()),e.push(this.genderField()),e.push(this.raceField()),e.push(this.searchResultField()),e=e.concat(this.dobFields()),e.push(this.homeRegionField()),e.push(this.homeDistrictField()),e.push(this.homeTAField()),e.push(this.homeVillageField()),e.push(this.currentAddressSameAsHome()),e.push(this.currentRegionField()),e.push(this.currentDistrictField()),e.push(this.currentTAField()),e.push(this.currentVillage()),e=e.concat(this.landmarkFields()),e.push(this.cellPhoneField()),e.push(this.patientTypeField()),e.push(this.facilityLocationField()),e.push(this.occupationField()),e.push(this.relationshipField()),e.push(this.hasMalawiNationalIdField()),e.push(this.malawiNationalIdField()),e.push(this.possibleDuplicatesField()),e.push(this.patientRegistrationSummary()),e},isEditMode(){return this.editPerson>=1},isMinor(e){var i,a;const t=((i=this.presets)==null?void 0:i.birthdate)||((a=e==null?void 0:e.birth_date)==null?void 0:a.date);return t?v(f.getSessionDate()).diff(t,"years")<18:!1},async initEditMode(e){this.editPerson=e,this.patient=await u.get("ACTIVE_PATIENT",{patientID:parseInt("".concat(this.editPerson))});const{ancestryDistrict:t,ancestryTA:i,ancestryVillage:a,currentDistrict:s,currentVillage:r,currentTA:d}=this.patient.getAddresses();this.editPersonData={given_name:this.patient.getGivenName(),family_name:this.patient.getFamilyName(),gender:this.patient.getGender(),birthdate:this.patient.getBirthdate(),home_district:t,home_traditional_authority:i,home_village:a,current_district:s,current_village:r,current_traditional_authority:d,cell_phone_number:this.patient.getPhoneNumber(),landmark:this.patient.getClosestLandmark(),occupation:this.patient.getOccupation(),national_id:this.patient.getMWNationalID(),race:this.patient.getRaceAttribute()},this.presets=this.editPersonData,this.skipSummary=!0,this.personAttribute&&(this.activeField=this.personAttribute,this.fieldComponent=this.activeField)},async onFinish(e,t){var i,a,s,r,d;if(this.isEditMode()){if((i=e.malawi_national_identifier)!=null&&i.value){const h=this.patient.getIdNumber("Malawi National ID");if(h>-1){if((await c.findByOtherID(28,(a=e.malawi_national_identifier)==null?void 0:a.value)).length>0){m("The Malawi National ID is already in use");return}await this.patient.changeMwNationalId(h,(s=e.malawi_national_identifier)==null?void 0:s.value)}else await this.patient.updateMWNationalId((r=e.malawi_national_identifier)==null?void 0:r.value);this.editPersonData.national_id=(d=e.malawi_national_identifier)==null?void 0:d.value}return this.update(t)}else return this.create(e,t)},async create(e,t){var p,b,y;let i=n.resolvePerson(t);i=this.presets.nationalIDStatus=="true"?this.appendNationalIDData(i):i;const a=this.resolvePersonAttributes(t),s=new f,r=new c(await s.registerPatient(i,a)),d=s.getPersonID();u.set("ACTIVE_PATIENT",r);let h="";if(this.presets.nationalIDStatus=="true"?h=(p=this.presets)==null?void 0:p.identifier:((b=e.has_malawi_id)==null?void 0:b.value)==="Yes"&&(h=(y=e.malawi_national_identifier)==null?void 0:y.value),h&&(this.patient=r,await this.patient.updateMWNationalId(h),u.invalidate("ACTIVE_PATIENT")),!(this.app.onRegisterPatient&&await this.app.onRegisterPatient(d,i,a,this.$router,this.$route))){if(i.relationship==="Yes")return this.$router.push("/guardian/registration/".concat(d));await O(d,this.$router)}},appendNationalIDData(e){return Object.assign(e,{given_name:this.presets.given_name,family_name:this.presets.family_name,gender:this.presets.gender,birthdate:this.presets.birthdate,birthdate_estimated:!1})},async update(e){const t=n.resolvePerson(e),i=this.resolvePersonAttributes(e),a=new f;if(a.setPersonID(this.editPerson),await a.updatePerson(t),i.length)for(const s in i)i[s].id?await I.update(i[s]):await I.create({person_id:this.editPerson,...i[s]}),this.editPersonData[s]=i[s].value;for(const s in t)s in this.editPersonData&&(this.editPersonData[s]=t[s]);if(u.invalidate("ACTIVE_PATIENT"),await this.initEditMode(this.editPerson),!this.personAttribute)return this.fieldComponent="edit_user";this.$router.back()},editConditionCheck(e=[]){return this.isEditMode()?e.includes(this.activeField):!0},async confirmPatient(){if(this.ddeEnabled&&(!this.patient.getDocID()||this.patient.getDocID()&&this.patient.getNationalID().match(/unknown/i)))try{await this.patient.assignNpid(),await this.patient.printNationalID(),await $(300)}catch(e){R("Failed to assign new NPID: ".concat(e))}this.$router.push("/patients/confirm?person_id=".concat(this.patient.getID()))},resolvePersonAttributes(e){return Object.values(e).filter(t=>_.isPlainObject(t)&&"personAttributes"in t).map(({personAttributes:t})=>t)},mapToOption(e){return e.map(t=>({label:t,value:t}))},givenNameField(){const e=n.getGivenNameField();return e.condition=()=>this.editConditionCheck(["given_name"])&&(!this.presets.given_name&&this.presets.nationalIDStatus=="true"||this.presets.nationalIDStatus!="true"),e.defaultValue=()=>this.presets.given_name,e},familyNameField(){const e=n.getFamilyNameField();return e.condition=()=>this.editConditionCheck(["family_name"])&&(!this.presets.family_name&&this.presets.nationalIDStatus=="true"||this.presets.nationalIDStatus!="true"),e.defaultValue=()=>this.presets.family_name,e},raceField(){const e=n.getRacesField();return e.condition=async()=>{var t;return this.editConditionCheck(["race"])&&((t=C.getActiveApp())==null?void 0:t.applicationName)==="OPD"&&await M.canRegisterRace()},e.computedValue=t=>{var i;return this.isEditMode()?{personAttributes:{id:(i=this.patient.getAttributeObj(1))==null?void 0:i.person_attribute_id,person_attribute_type_id:1,value:t.value}}:{person:t.value,personAttributes:{person_attribute_type_id:1,value:t.value}}},e.defaultValue=()=>this.presets.race,e},genderField(){const e=this.app.applicationName==="ANC",t=this.app.applicationName==="CxCa",i=n.getGenderField();return i.requireNext=this.isEditMode(),i.defaultValue=()=>this.presets.gender,i.condition=()=>!this.isEditMode()&&(e||t)?!1:this.editConditionCheck(["gender"])&&(!this.presets.gender&&this.presets.nationalIDStatus=="true"||this.presets.nationalIDStatus!="true"),(e||t)&&!this.isEditMode()&&(i.defaultOutput=()=>({label:"Female",value:"F"}),i.defaultComputedOutput=()=>({person:"F"})),i.beforeNext=async a=>{const s=a.value,r=this.presets.gender;return this.isEditMode()&&s!=r?await k("Warning","Changing gender from ".concat(r," to ").concat(s),"This change will cause data inconsistency and will affect alot of Reports.",[{name:"Cancel",slot:"start"},{name:"Change gender",slot:"end",color:"danger"}])==="Change gender":!0},i},dobFields(){const e=n.getDobConfig();if(e.defaultValue=()=>this.presets.birthdate,e.condition=()=>!(this.presets.birthdate&&this.presets.nationalIDStatus)&&this.editConditionCheck(["year_birth_date","month_birth_date","day_birth_date"]),this.app.applicationName==="ANC"){const t=c.getSessionDate(),i=12;e.maxDate=()=>v(t).subtract(i,"years").format(w)}return this.app.applicationName==="ART"&&(e.beforeNext=t=>{const i=l.isEligibleForART(t);return i!=null&&i.length?(m(i.join(", ")),!1):!0}),D(e)},currentAddressSameAsHome(){return{id:"same_as_home",helpText:"Is the client currently based in the specified home address?",type:o.TT_SELECT,validation:e=>l.required(e),condition:()=>!this.isEditMode(),options:()=>[{label:"Yes",value:1},{label:"No",value:0}]}},homeRegionField(){const e=n.getHomeRegionField();return e.condition=()=>this.editConditionCheck(this.homeAddressAttributes),e},homeDistrictField(){const e=n.getHomeDistrictField();return e.condition=()=>this.editConditionCheck(this.homeAddressAttributes),e},homeTAField(){const e=n.getHomeTaField();return e.condition=t=>this.editConditionCheck(this.homeAddressAttributes)&&!t.home_region.label.match(/foreign/i),e},homeVillageField(){const e=n.getHomeVillageField();return e.condition=t=>this.editConditionCheck(this.homeAddressAttributes)&&!t.home_region.label.match(/foreign/i),e},currentRegionField(){const e=n.getCurrentRegionField();return e.defaultOutput=t=>{var i;if(/yes/i.test("".concat((i=t.same_as_home)==null?void 0:i.label)))return t.home_region},e.defaultComputedOutput=(t,i)=>{var a;if(/yes/i.test("".concat((a=t.same_as_home)==null?void 0:a.label)))return i.home_region},e.condition=t=>this.editConditionCheck(this.currentAddressAttributes)&&t.same_as_home?/No/i.test(t.same_as_home.label):this.editConditionCheck(this.currentAddressAttributes),e},currentDistrictField(){const e=n.getCurrentDistrictField();return e.defaultOutput=t=>{var i;if(/yes/i.test("".concat((i=t.same_as_home)==null?void 0:i.label)))return t.home_district},e.defaultComputedOutput=(t,i)=>{var a;if(/yes/i.test("".concat((a=t.same_as_home)==null?void 0:a.label)))return i.home_district},e.condition=t=>this.editConditionCheck(this.currentAddressAttributes)&&t.same_as_home?/No/i.test(t.same_as_home.label):this.editConditionCheck(this.currentAddressAttributes),e},currentTAField(){const e=n.getCurrentTAfield();return e.defaultOutput=t=>{var i;if(/yes/i.test("".concat((i=t.same_as_home)==null?void 0:i.label)))return t.home_traditional_authority},e.defaultComputedOutput=(t,i)=>{var a;if(/yes/i.test("".concat((a=t.same_as_home)==null?void 0:a.label)))return i.home_traditional_authority},e.condition=t=>this.editConditionCheck(this.currentAddressAttributes)&&!t.current_region.label.match(/foreign/i)&&t.same_as_home?/No/i.test(t.same_as_home.label):this.editConditionCheck(this.currentAddressAttributes),e},currentVillage(){const e=n.getCurrentVillageField();return e.defaultOutput=t=>{var i;if(/yes/i.test("".concat((i=t.same_as_home)==null?void 0:i.label)))return t.home_village},e.defaultComputedOutput=(t,i)=>{var a;if(/yes/i.test("".concat((a=t.same_as_home)==null?void 0:a.label)))return i.home_village},e.condition=t=>this.editConditionCheck(this.currentAddressAttributes)&&!t.current_region.label.match(/foreign/i)&&t.same_as_home?/No/i.test(t.same_as_home.label):this.editConditionCheck(this.currentAddressAttributes),e},cellPhoneField(){const e=n.getCellNumberField();return e.condition=()=>this.editConditionCheck(["cell_phone_number"]),e.defaultValue=()=>this.presets.cell_phone_number,e},facilityLocationField(){const e=n.getFacilityLocationField();return e.condition=t=>["Emergency supply","External consultation"].includes(t.patient_type.value),e},landmarkFields(){const e=n.getLandmarkFields();return e[0].condition=()=>this.editConditionCheck(["default_landmarks"]),e},patientTypeField(){return{id:"patient_type",helpText:"Type of patient",type:o.TT_SELECT,init:async()=>(this.app.applicationName==="ART"&&(this.isEmergencyDrugRefillEnabled=await u.get("EMERGENCY_DRUG_REFILL_ENABLED")),!0),computedValue:e=>({person:e.value}),condition:()=>this.editConditionCheck(["patient_type"])&&this.app.applicationName==="ART",validation:e=>l.required(e),options:()=>S.getPatientTypes(this.isEmergencyDrugRefillEnabled)}},occupationField(){const e=this.app.applicationName==="AETC";return{id:"occupation",helpText:"Occupation",type:o.TT_SELECT,init:async()=>(this.isMilitarySite=await u.get("IS_MILITARY_SITE"),!0),computedValue:t=>({person:t.value}),defaultOutput:(t,i)=>this.editConditionCheck(["occupation"])&&this.isMinor(i)&&this.isMilitarySite?{label:"Civilian",value:"Civilian"}:{},defaultComputedOutput:(t,i)=>{if(this.editConditionCheck(["occupation"])&&this.isMinor(i)&&this.isMilitarySite)return{person:"Civilian"}},condition:(t,i)=>this.editConditionCheck(["occupation"])&&!this.isMinor(i)&&this.isMilitarySite||e,validation:t=>l.required(t),options:()=>{const t=["Military","Civilian"];if(e){const i=["Business","Craftsman","Domestic Worker","Driver","Farmer","Healthcare Worker","House Wife","Mechanic","Messenger","Office Worker","Police","Preschool Child","Prisoner","Sales Person","Security Guard","Soldier","Student","Teacher","Other","unknown"];return this.mapToOption([...t,...i])}else return this.mapToOption(t)}}},regimentField(){return{id:"person_regiment_id",helpText:"Regiment ID",type:o.TT_TEXT,computedValue:({value:e})=>({personAttributes:{person_attribute_type_id:35,value:e}}),condition:e=>this.editConditionCheck(["person_regiment_id","occupation"])&&e.occupation&&e.occupation.value.match(/Military/i),validation:e=>l.required(e)}},rankField(){return{id:"rank",helpText:"Rank",type:o.TT_SELECT,validation:e=>l.required(e),computedValue:({value:e})=>({personAttributes:{person_attribute_type_id:36,value:e}}),condition:e=>this.editConditionCheck(["rank","occupation"])&&e.occupation&&e.occupation.value.match(/Military/i),options:()=>this.mapToOption(["First Lieutenant","Captain","Major","Lieutenant Colonel","Colonel","Brigadier General","Lieutenant General","General","Private","Corporal","Lance Corporal","Seargent","Staff Seargent","Warrant Officer class 1","Warrant Officer class 2"])}},dateJoinedMilitaryFields(){return D({id:"person_date_joined_military",helpText:"Joined Military",required:!0,condition:e=>this.editConditionCheck(["year_person_date_joined_military","month_person_date_joined_military","day_person_date_joined_military","occupation"])&&e.occupation&&e.occupation.value.match(/Military/i),minDate:()=>g.estimateDateFromAge(100),maxDate:()=>E.getSessionDate(),estimation:{allowUnknown:!1},computeValue:e=>({date:e,personAttributes:{person_attribute_type_id:37,value:e}})})},relationshipField(){const e=this.app.applicationName==="CxCa",t=this.app.applicationName==="OPD",i=this.app.applicationName==="Registration",a=this.app.applicationName==="TB";return{id:"relationship",helpText:"Register guardian?",type:o.TT_SELECT,computedValue:s=>({person:s.value}),condition:()=>this.editConditionCheck(["relationship"])&&!e&&!t&&!i&&!a,validation:s=>l.required(s),options:()=>this.mapToOption(["Yes","No"])}},searchResultField(){return{id:"results",helpText:"Search results",type:o.TT_PERSON_RESULT_VIEW,init:async()=>(this.isEditMode()||(this.ddeEnabled=await u.get("IS_DDE_ENABLED")),!0),dynamicHelpText:e=>this.presets.nationalIDStatus=="true"?'Search results for "'.concat(this.presets.given_name," ").concat(this.presets.family_name," | ").concat(this.presets.gender,'"'):'Search results for "'.concat(e.given_name.value," ").concat(e.family_name.value," | ").concat(e.gender.label,'"'),appearInSummary:()=>!1,condition:()=>!this.$route.query.skipSearch&&!this.isEditMode(),validation:e=>l.required(e),options:async e=>{let t;return this.presets.nationalIDStatus=="true"?(this.presets.gender=this.presets.gender=="Male"?"M":"F",t={given_name:this.presets.given_name,family_name:this.presets.family_name,gender:this.presets.gender}):t={given_name:e.given_name.value,family_name:e.family_name.value,gender:e.gender.value},this.ddeEnabled?(await this.ddeInstance.searchDemographics(t)).map(s=>{const r=n.getPersonAttributeOptions(s);return r.other.options.push({label:"Patient Type",value:s.patient_type}),r.other.options.push({label:"Doc ID",value:s.doc_id}),r}):(await c.search(t)).map(a=>n.getPersonAttributeOptions(a))},config:{hiddenFooterBtns:["Clear","Next","Back"],footerBtns:[{name:"Edit Search",slot:"end",onClick:()=>{this.fieldComponent="given_name"}},{name:"New Patient",slot:"end",onClick:()=>{this.presets.nationalIDStatus!="true"?this.fieldComponent="year_birth_date":this.fieldComponent="home_region"}},{name:"Continue",color:"success",slot:"end",state:{disabled:{default:()=>!0,onValue(e,t){return _.isEmpty(t.results)}}},onClick:e=>e.results.other.patientID?this.$router.push("/patients/confirm?person_id=".concat(e.results.value)):this.$router.push("/patients/confirm?patient_barcode=".concat(e.results.value))}]}}},possibleDuplicatesField(){let e={},t={};return{id:"possible_duplicates",helpText:"Possible Duplicate(s)",type:o.TT_PERSON_MATCH_VIEW,condition:async(i,a)=>this.ddeEnabled&&this.editPerson<=0?(e=n.resolvePerson(a),t=await this.ddeInstance.checkPotentialDuplicates(e),t.length>=1):!1,options:async()=>{const i=a=>g.toStandardHisDisplayFormat(a);return t.map(({score:a,person:s})=>({label:"".concat(s.given_name," ").concat(s.family_name),value:s.patient_id,other:{score:"".concat(a*100,"%"),newPerson:e,foundPerson:s,docID:s.id,comparisons:[["Name","".concat(e.given_name," ").concat(e.family_name),"".concat(s.given_name," ").concat(s.family_name)],["Gender",e.gender,s.gender],["Birthdate",i(e.birthdate),i(s.birthdate)],["Home District",e.home_district,s.home_district],["Home TA",e.home_traditional_authority,s.home_traditional_authority]]}}))},config:{hiddenFooterBtns:["Clear","Next"],footerBtns:[{name:"Not Duplicate",slot:"start",state:{visible:{default:()=>!1,onValue:(i,a)=>!_.isEmpty(a.possible_duplicates)}},onClick:()=>{this.fieldComponent="_NEXT_FIELD_"}},{name:"Select",slot:"end",color:"success",state:{visible:{default:()=>!1,onValue:(i,a)=>!_.isEmpty(a.possible_duplicates)}},onClick:i=>{this.ddeInstance.importPatient(i.possible_duplicates.other.docID).then(a=>{this.$router.push("/patients/confirm?person_id=".concat(a.patient_id))}).catch(()=>{this.$router.push("/patients/confirm?person_id=".concat(i.possible_duplicates.value))})}}]}}},hasMalawiNationalIdField(){return{id:"has_malawi_id",helpText:"Does client have/remembers their Malawi National ID Number?",type:o.TT_SELECT,condition:()=>this.editConditionCheck(["has_malawi_id"])&&this.presets.nationalIDStatus!="true",validation:e=>l.required(e),options:()=>[{label:"Yes",value:"Yes"},{label:"No",value:"No"}]}},malawiNationalIdField(){return{id:"malawi_national_identifier",helpText:"Malawi National ID",type:o.TT_TEXT,beforeNext:async e=>{const t=await c.findByOtherID(28,e.value);return(t!=null?t:[]).length?(m("The Malawi National ID is already in use"),!1):!0},computedValue:e=>({mwID:e.value}),condition:e=>this.editConditionCheck(["has_malawi_id"])&&e.has_malawi_id.value==="Yes",validation:e=>l.validateSeries([()=>l.required(e),()=>l.isMWNationalID(e)]),config:{customKeyboard:P}}},personIndexField(){return{id:"edit_user",helpText:"Edit Demographics",type:o.TT_TABLE_VIEWER,init:async()=>(this.isEditMode()&&(this.ddeEnabled=await u.get("IS_DDE_ENABLED"),this.isMilitarySite=await u.get("IS_MILITARY_SITE")),!0),condition:()=>this.isEditMode(),options:async()=>{const e=s=>({name:"Edit",type:"button",action:()=>{this.activeField=s,this.fieldComponent=this.activeField}}),t=["Attributes","Values","Edit"],i=[["Malawi National ID",this.editPersonData.national_id,e("has_malawi_id")],["Given Name",this.editPersonData.given_name,e("given_name")],["Family Name",this.editPersonData.family_name,e("family_name")],["Gender",this.editPersonData.gender,e("gender")],["Birthdate",g.toStandardHisDisplayFormat(this.editPersonData.birthdate),e("year_birth_date")],["Race",this.editPersonData.race,e("race")],["Cell Phone Number",this.editPersonData.cell_phone_number,e("cell_phone_number")],["Home District",this.editPersonData.home_district,e("home_region")],["Home TA",this.editPersonData.home_traditional_authority,e("home_region")],["Home Village",this.editPersonData.home_village,e("home_region")],["Current district",this.editPersonData.current_district,e("current_region")],["Current Village",this.editPersonData.current_village,e("current_region")],["Current T/A",this.editPersonData.current_traditional_authority,e("current_region")],["Landmark",this.editPersonData.landmark,e("default_landmarks")]];this.isMilitarySite&&i.push(["Occupation",this.editPersonData.occupation,e("occupation")]);const a={indexes:[],class:"his-empty-set-color"};return i.forEach((s,r)=>{N(s[1])&&a.indexes.push(r)}),this.hasIncompleteData=a.indexes.length>=1,[{label:"",value:"",other:{rows:i,columns:t,rowColors:[a]}}]},config:{footerBtns:[{name:"Reassign",slot:"end",color:"success",state:{visible:{default:()=>!1,onload:()=>this.ddeEnabled&&this.ddeIsReassign&&!this.hasIncompleteData}},onClick:async()=>{try{await this.ddeInstance.reassignNpid(this.ddeDocID,this.editPerson),await this.ddeInstance.printNpid(),this.$router.push("/patients/confirm?person_id=".concat(this.editPerson))}catch(e){m("".concat(e))}}},{name:"Confirm",slot:"end",color:"warning",state:{visible:{onload:()=>!this.ddeIsReassign&&!this.hasIncompleteData}},onClick:async()=>this.confirmPatient()}],hiddenFooterBtns:["Clear","Next"]}}},patientRegistrationSummary(){return{id:"registration_summary",helpText:"Summary",type:o.TT_SUMMARY,condition:()=>!this.skipSummary,options:(e,t)=>this.buildRegistrationSummary(t),config:{hiddenFooterBtns:["Clear"]}}},buildRegistrationSummary(e){e=Object.keys(e).map(function(i){if(e[i]!=null)return{label:i.replace(/_/g," ").replace(/(^\w|\s\w)/g,a=>a.toUpperCase()),value:i=="birth_date"?e[i].date:e[i].mwID||e[i].person}}),e=e.filter(i=>i!=null);const t=[{label:"Given Name",value:this.presets.given_name},{label:"Family Name",value:this.presets.family_name},{label:"Gender",value:this.presets.gender},{label:"Birthdate",value:this.presets.birthdate},{label:"Malawi National ID",value:this.presets.identifier}];return this.presets.nationalIDStatus=="true"&&(e=t.concat(e)),e}}});function Y(e,t,i,a,s,r){const d=T("his-standard-form"),h=T("ion-page");return L(),B(h,null,{default:H(()=>[G(d,{onOnIndex:t[0]||(t[0]=p=>e.fieldComponent=""),skipSummary:!0,activeField:e.fieldComponent,fields:e.fields,onFinishAction:e.onFinish},null,8,["activeField","fields","onFinishAction"])]),_:1})}const J=V(j,[["render",Y]]);export{J as default};
