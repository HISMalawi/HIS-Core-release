System.register(["./index-legacy-pSEoxn3J.js","./ReportMixin.vue_vue_type_script_lang-legacy-D3BWEpjk.js","./TableReportTemplate-legacy-DPUOpVvp.js","./BasicReportTemplate-legacy-5aAa1V_3.js","./Export-legacy-YUdcFBN9.js","./index-legacy-0e7Z_1i0.js","./Pagination-legacy-BMin-dh_.js","./HisStandardForm-legacy-CGi-zolz.js","./ReportErrors-legacy-AHBNG9vk.js"],(function(t,e){"use strict";var a,n,i,o,l,s,r,d,h,m,u,c,T,p,_,x,f,w,g;return{setters:[t=>{a=t.d,n=t.m,i=t.aA,o=t.dQ,l=t.dR,s=t.H,r=t.an,d=t.ao,h=t.b0,m=t.a_,u=t.S,c=t.am,T=t.ar,p=t.a,_=t.b,x=t.w,f=t.e},t=>{w=t._},t=>{g=t.R},null,null,null,null,null,null],execute:function(){const e=a({mixins:[w],components:{ReportTemplate:g,IonPage:n},data:()=>({title:"Data cleaning report",rows:[],columns:[],defaultIndicator:{}}),created(){this.fields=[{id:"indicator",helpText:"Select indicator",type:d.TT_SELECT,requireNext:!1,condition:()=>!this.defaultIndicator,defaultOutput:()=>this.defaultIndicator,validation:t=>r.required(t),options:()=>this.getIndicatorOptions()},...h({id:"start_date",helpText:"Start",required:!0,minDate:()=>"2000-01-01",maxDate:()=>u.getSessionDate(),estimation:{allowUnknown:!1},computeValue:t=>t}),...h({id:"end_date",helpText:"End",required:!0,minDate:(t,e)=>e.start_date,maxDate:()=>u.getSessionDate(),estimation:{allowUnknown:!1},computeValue:t=>t})],this.defaultIndicator=m.find(this.getIndicatorOptions(),{value:this.$route.query.cleaning_tool})||null},methods:{async onPeriod(t,e){const a=t=>s.toStandardHisDisplayFormat(t);this.rows=[],this.title=t.indicator.label;const n=t.indicator;this.columns=n.other.columns,this.report=new l,this.report.setStartDate(e.start_date),this.report.setEndDate(e.end_date),this.period=`${a(e.start_date)} - ${a(e.end_date)}`;const i=await this.report.getDataToolReport(n.value);i&&(this.rows=await Promise.all(i.map((t=>n.other.formatRow(t)))))},showPatientBtn(t){return i.tdBtn("View",(()=>this.$router.push("/patient/dashboard/"+t)))},getIndicatorOptions(){return[{label:"Males with ANC Encounters",value:o.MALES_WITH_ANC_ENCOUNTERS,other:{columns:[[i.thTxt("National ID"),i.thTxt("First name"),i.thTxt("Last name"),i.thTxt("Total Encounters"),i.thTxt("Action")]],formatRow:t=>[i.td(t.identifier),i.td(t.given_name),i.td(t.family_name),i.td(t.total_encounters),this.showPatientBtn(t.patient_id)]}},{label:"Encounters after death",value:o.ENCOUNTERS_AFTER_DEATH,other:{columns:[[i.thTxt("National ID"),i.thTxt("First name"),i.thTxt("Last name"),i.thTxt("Date of death"),i.thTxt("Recent encounter date"),i.thTxt("Count"),i.thTxt("Action")]],formatRow:t=>[i.td(t.identifier),i.td(t.given_name),i.td(t.family_name),i.tdDate(t.patient_died_date),i.tdDate(t.minimum_encounter_datetime),i.td(t.total_encounters),this.showPatientBtn(t.patient_id)]}},{label:"Incomplete visits",value:o.INCOMPLETE_VISITS,other:{columns:[[i.thTxt("National ID"),i.thTxt("Name"),i.thTxt("Visit date"),i.thTxt("Incomplete count"),i.thTxt("Action")]],formatRow:t=>[i.td(t.n_id),i.td(t.name),i.td(t.visit_date),i.td(t.visit_no),this.showPatientBtn(t.patient_id)]}},{label:"Duplicate encounters",value:o.DUPLICATE_ENCOUNTERS,other:{columns:[[i.thTxt("National ID"),i.thTxt("Given name"),i.thTxt("Family name"),i.thTxt("Name"),i.thTxt("Total"),i.thTxt("Action")]],formatRow:t=>[i.td(t.identifier),i.td(t.given_name),i.td(t.family_name),i.td(t.name),i.td(t.total),this.showPatientBtn(t.patient_id)]}},{label:"Missing HIV Status",value:o.MISSING_HIV_STATUS,other:{columns:[[i.thTxt("National ID"),i.thTxt("Given name"),i.thTxt("Family name"),i.thTxt("Action")]],formatRow:t=>[i.td(t.identifier),i.td(t.given_name),i.td(t.family_name),this.showPatientBtn(t.patient_id)]}},{label:"Missing Last Menstrual Period (LMP)",value:o.MISSING_LMP,other:{columns:[[i.thTxt("National ID"),i.thTxt("Given name"),i.thTxt("Family name"),i.thTxt("Action")]],formatRow:t=>[i.td(t.identifier),i.td(t.given_name),i.td(t.family_name),this.showPatientBtn(t.patient_id)]}}]}}});t("default",c(e,[["render",function(t,e,a,n,i,o){const l=T("report-template"),s=T("ion-page");return _(),p(s,null,{default:x((()=>[f(l,{title:t.title,period:t.period,rows:t.rows,fields:t.fields,columns:t.columns,showFilters:!0,onReportConfiguration:t.onPeriod},null,8,["title","period","rows","fields","columns","onReportConfiguration"])])),_:1})}]]))}}}));
