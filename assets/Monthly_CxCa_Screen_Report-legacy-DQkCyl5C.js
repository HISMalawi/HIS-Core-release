System.register(["./index-legacy-D1EyWbyq.js","./TableView-legacy-CXZAtc9Z.js","./cxca_report_service-legacy-4BkHEj54.js","./DrillPatientIds-legacy-BjtPySYF.js","./PopupKeyboard-legacy-CRDw2Fsm.js","./dynamic-import-helper-legacy-DYK5bIOV.js","./Export-legacy-dCfnaBFd.js","./TableView-legacy-NwqRzvee.js","./fuse-legacy-CQoBB3MK.js","./HisKeyboard-legacy-y6nW788Z.js","./HisKbConfigurations-legacy-vrLd9Pgz.js","./KbLayouts-legacy-BKvPSxzZ.js","./BaseKeyboard-legacy-DNjRE9bC.js","./KbHandler-legacy-De8o5nTq.js","./SIngleTouchField-legacy-25qOOxkK.js","./TouchScreenForm-legacy-Cz0UXr2y.js","./ToolbarMediumCard-legacy-DG4P2wyL.js","./Transformers-legacy-DhNYVLaS.js","./ViewPort-legacy-Dt6qML7b.js","./HisKeypad-legacy-CAd1Sv_G.js"],(function(e,a){"use strict";var t,l,r,o,s,n,c,d,u,i,g,p,v,b,_,y,f,m,h,C,L,T,$,x,S;return{setters:[e=>{t=e.d,l=e.I,r=e.c4,o=e.N,s=e.K,n=e.t,c=e.q,d=e.a$,u=e.cb,i=e.O,g=e.ab,p=e.V,v=e.H,b=e.S,_=e._,y=e.r,f=e.o,m=e.c,h=e.w,C=e.b},e=>{L=e.v},e=>{T=e.C},e=>{$=e.D},e=>{x=e.M},e=>{S=e.F},null,null,null,null,null,null,null,null,null,null,null,null,null,null],execute:function(){const a=s([]),P=s(""),j=s(""),k=s(""),D=s(!1),R=s(""),w=t({components:{IonPage:l,IonLoading:r,v2Datatable:L},setup(){const e=e=>e.map((e=>{const{age_group:a,...t}=e;return{...t,age_group:a}})),t=e=>{const a=[];for(const t in e){const l={};l[t]=e[t],a.push(l)}return a},l=async(e,a)=>{a.length<=0||(await i.create({component:$,backdropDismiss:!1,cssClass:"large-modal",componentProps:{title:e,subtitle:k,patientIdentifiers:a,onFinish:()=>i.getTop().then((e=>e&&i.dismiss()))}})).present()},r=[[{label:"Facility:",ref:""},{label:"Month/Year:",ref:"",span:{thColspan:1}},{label:"Report Officer:",ref:"",span:{thColspan:3}}],[{label:"Age Disaggregate:",ref:"data.age_group",value:e=>e.age_group},{label:"Negative",ref:"data.cryotherapy.length",secondaryLabel:"1st screened (negative)",value:e=>e.negative.length,tdClick:({column:e,data:a})=>l(`${a.age_group} ${e.secondaryLabel}`,a.negative)},{label:"Positive",ref:"data.positive.length",secondaryLabel:"1st screened (positive)",value:e=>e.positive.length,tdClick:({column:e,data:a})=>l(`${a.age_group} ${e.secondaryLabel}`,a.positive)},{label:"For same day Tx",ref:"data.for_same_day_tx.length",secondaryLabel:"1st screened (For same day Tx)",value:e=>e.for_same_day_tx.length,tdClick:({column:e,data:a})=>l(`${a.age_group} ${e.secondaryLabel}`,a.for_same_day_tx)},{label:"Suspected Cancer",ref:"data.suspected.length",secondaryLabel:"1st screened (Suspected Cancer)",value:e=>e.suspected.length,tdClick:({column:e,data:a})=>l(`${a.age_group} ${e.secondaryLabel}`,a.suspected)}],[{label:"Age Disaggregate:",ref:"data.age_group",value:e=>e.age_group},{label:"Negative",ref:"data.cryotherapy.length",secondaryLabel:"Rescreened after previous negative (negative)",value:e=>e.negative.length,tdClick:({column:e,data:a})=>l(`${a.age_group} ${e.secondaryLabel}`,a.negative)},{label:"Positive",ref:"data.positive.length",secondaryLabel:"Rescreened after previous negative (positive)",value:e=>e.positive.length,tdClick:({column:e,data:a})=>l(`${a.age_group} ${e.secondaryLabel}`,a.positive)},{label:"For same day Tx",ref:"data.for_same_day_tx.length",secondaryLabel:"Rescreened after previous negative (For same day Tx)",value:e=>e.for_same_day_tx.length,tdClick:({column:e,data:a})=>l(`${a.age_group} ${e.secondaryLabel}`,a.for_same_day_tx)},{label:"Suspected Cancer",ref:"data.suspected.length",secondaryLabel:"Rescreened after previous negative (Suspected Cancer)",value:e=>e.suspected.length,tdClick:({column:e,data:a})=>l(`${a.age_group} ${e.secondaryLabel}`,a.suspected)}],[{label:"Age Disaggregate:",ref:"data.age_group",value:e=>e.age_group},{label:"Negative",ref:"data.cryotherapy.length",secondaryLabel:"Post-treatment follow-up (negative)",value:e=>e.negative.length,tdClick:({column:e,data:a})=>l(`${a.age_group} ${e.secondaryLabel}`,a.negative)},{label:"Positive",ref:"data.positive.length",secondaryLabel:"Post-treatment follow-up positive)",value:e=>e.positive.length,tdClick:({column:e,data:a})=>l(`${a.age_group} ${e.secondaryLabel}`,a.positive)},{label:"For same day Tx",ref:"data.for_same_day_tx.length",secondaryLabel:"Post-treatment follow-up (For same day Tx)",value:e=>e.for_same_day_tx.length,tdClick:({column:e,data:a})=>l(`${a.age_group} ${e.secondaryLabel}`,a.for_same_day_tx)},{label:"Suspected Cancer",ref:"data.suspected.length",secondaryLabel:"Post-treatment follow-up (Suspected Cancer)",value:e=>e.suspected.length,tdClick:({column:e,data:a})=>l(`${a.age_group} ${e.secondaryLabel}`,a.suspected)}],[{label:"1st time Screened",ref:"",exportable:!1,span:{thColspan:7}}],[{label:"Rescreened after previous negative",ref:"",exportable:!1,span:{thColspan:7}}],[{label:"Post-treatment follow-up",ref:"",span:{thColspan:7}}],[{label:"Month Summary",ref:"",span:{thColspan:7}}],[{label:"Total Screened",ref:"data.total_screened.length",secondaryLabel:"Total Screened",value:e=>e.total_screened.length,tdClick:({column:e,data:a})=>l(`${e.secondaryLabel}`,a.total_screened)}],[{label:"Total Negative",ref:"data.total_negative.length",secondaryLabel:"Total Negative",value:e=>e.total_negative.length,tdClick:({column:e,data:a})=>l(`${e.secondaryLabel}`,a.total_negative)}],[{label:"Total Via + eligible for same day Tx",ref:"data.total_via_plus_eligible_for_same_day_tx.length",secondaryLabel:"Total Via + eligible for same day Tx",value:e=>e.total_via_plus_eligible_for_same_day_tx.length,tdClick:({column:e,data:a})=>l(`${e.secondaryLabel}`,a.total_via_plus_eligible_for_same_day_tx)}],[{label:"Total Positive",ref:"data.total_positive.length",secondaryLabel:"Total Positive",value:e=>e.total_positive.length,tdClick:({column:e,data:a})=>l(`${e.secondaryLabel}`,a.total_positive)}],[{label:"Total Suspected Cancer",ref:"data.total_suspect_cancer.length",secondaryLabel:"Total Suspected Cancer",value:e=>e.total_suspect_cancer.length,tdClick:({column:e,data:a})=>l(`${e.secondaryLabel}`,a.total_suspect_cancer)}],[{label:"Total VIA+ Referred",ref:"data.total_via_reffered.length",secondaryLabel:"Total VIA+ Referred",value:e=>e.total_via_reffered.length,tdClick:({column:e,data:a})=>l(`${e.secondaryLabel}`,a.total_via_reffered)}],[{label:"Total CXCA Suspect Referred",ref:"data.suspects_reffered.length",secondaryLabel:"Total CXCA Suspect Referred",value:e=>e.suspects_reffered.length,tdClick:({column:e,data:a})=>l(`${e.secondaryLabel}`,a.suspects_reffered)}],[{label:"Total Referred",ref:"data.total_reffered.length",secondaryLabel:"Total Referred",value:e=>e.total_reffered.length,tdClick:({column:e,data:a})=>l(`${e.secondaryLabel}`,a.total_reffered)}]],s=async()=>{if(!P.value||!j.value)return n("Start date and end date required!");D.value=!0,a.value=[];const l=new T;l.startDate=P.value,l.endDate=j.value;try{const r=await l.getClinicReport("MONTHLY SCREEN");a.value=((a,l)=>{const r=[e(a.first_time_screened),e(a.rescreened_after_prev_visit),e(a.post_treatment_followup)];return r.push(t(l)),r})(r.data,r.totals)}catch(r){c("Unable to generate report!"),console.error(r)}D.value=!1},_=()=>x([{id:"year",helpText:"Select Year",type:S.TT_NUMBER,computedValue:e=>e.value,validation:e=>{const a=g.isPlainObject(e)?e.value:-1;return p.validateSeries([()=>p.required(e),()=>isNaN(parseInt(`${a}`))?["Invalid year"]:null,()=>p.rangeOf(e,2e3,v.getYear(b.getSessionDate()))])}},{id:"month",helpText:"Select Month",type:S.TT_SELECT,validation:e=>p.required(e),computedValue:e=>e.value,options:()=>[{label:"January",value:"01"},{label:"February",value:"02"},{label:"March",value:"03"},{label:"April",value:"04"},{label:"May",value:"05"},{label:"June",value:"06"},{label:"July",value:"07"},{label:"August",value:"08"},{label:"September",value:"09"},{label:"October",value:"10"},{label:"November",value:"11"},{label:"December",value:"12"}]}],(e=>{P.value=`${e.year.value}-${e.month.value}-01`,j.value=d(new Date(P.value).toISOString()).endOf("month").format("YYYY-MM-DD"),k.value=`Period (${u(P.value)} to ${u(j.value)})`,i.dismiss(),R.value=`${u(P.value)} to ${u(j.value)}`,s()}));return o((()=>!a.value.length&&_())),{columns:r,isLoading:D,reportData:a,period:k,csvQuarter:R,generate:s,configure:_,order:["age_group","negative","positive","for_same_day_tx","suspected"],csvheaders:["Age Group","Negative","Positive","For same day Tx","Suspected Cancer"],spacing:3,subHeaders:[["","","1st time screened","",""],["","","Rescreened after previous negative","",""],["","","Post-treatment follow-up","",""],["","","Month Summary","",""]]}}});e("default",_(w,[["render",function(e,a,t,l,r,o){const s=y("ion-loading"),n=y("v2Datatable"),c=y("ion-page");return f(),m(c,null,{default:h((()=>[C(s,{"is-open":e.isLoading,message:"Please wait..."},null,8,["is-open"]),C(n,{title:"Monthly Screen Report",subtitle:e.period,columns:e.columns,columnData:e.reportData,rowsPerPage:25,onConfigure:e.configure,csvQuarter:e.csvQuarter,onRefresh:()=>e.generate(),order:e.order,headers:e.csvheaders,"csv-spacing":e.spacing,"csv-sub-header":e.subHeaders},null,8,["subtitle","columns","columnData","onConfigure","csvQuarter","onRefresh","order","headers","csv-spacing","csv-sub-header"])])),_:1})}]]))}}}));
