System.register(["./index-legacy-DSKrJPb4.js","./HisStandardForm-legacy-CmEkJw1V.js","./useEncounter-legacy-cWgDAB8I.js","./isEmpty-legacy-B4nQFqOP.js","./encounter_guidelines-legacy-Cub79fhD.js","./GuidelineEngine-legacy-KsvQuFdF.js"],(function(e,t){"use strict";var a,n,l,o,i,r,s,u,c,d,f,m,p;return{setters:[e=>{a=e.bT,n=e.d,l=e.r,o=e.bp,i=e.ai,r=e.aj,s=e.a,u=e.c,c=e.u,d=e.t,f=e._},e=>{m=e.H},e=>{p=e.u},null,null,null],execute:function(){class t extends a{constructor(e,t){super(e,184,t)}}e("default",n({__name:"CxCaOutcome",setup(e){let a,n;const g=l([]),v=l([]),y=o.getProgramID(),_=o.getLocationName(),b=o.getSessionDate(),{patientDashboardUrl:w,goToNextTask:C}=p((async(e,l)=>{n=l,a=new t(l,e),o.getProgramWorkflows(y).then((e=>{v.value=e})),g.value=[{id:"select_referral_outcome",helpText:"Referral outcome",type:i.TT_SELECT,validation:e=>r.required(e),options:()=>[{label:"Continue follow-up",value:"Continue follow-up"},{label:"No Dysplasia/Cancer",value:"No Dysplasia/Cancer"},{label:"Palliative Care",value:"Palliative Care"},{label:"Patient died",value:"Patient died"}]}]}));async function P(e){if(!(await a.createEncounter()))return d("Unable to create encounter");const t=e.select_referral_outcome.value,l=v.value.flatMap((e=>e.states)).find((e=>e.concept.concept_names.some((e=>e.name===t))));if(!l)return d(`Unable to find workflow state for outcome: ${t}`);if(!(await o.createState(n,y,{state:l.program_workflow_state_id,location_id:_,date:b})))return d("Unable to update state");const i=await a.buildValueCoded("Outcome",t);await a.saveObservationList([i]),f("Observations and encounter created!"),C()}return(e,t)=>(s(),u(m,{fields:g.value,onFinishAction:P,skipSummary:!0,cancelDestinationPath:c(w)},null,8,["fields","cancelDestinationPath"]))}}))}}}));
