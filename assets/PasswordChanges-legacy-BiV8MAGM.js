System.register(["./index-legacy-DhfIpXPN.js","./TableView-legacy-BtsAnnvm.js","./data_verification_service-legacy-DM2ut-tY.js","./Export-legacy-Cgt2NnmI.js","./index-legacy-Dzla8wKk.js"],(function(e,a){"use strict";var t,n,r,l,s,o,i,u,c,d,g,f,p,m,v,w,D,b;return{setters:[e=>{t=e.d,n=e.r,r=e.o,l=e.D,s=e.a,o=e.b,i=e.w,u=e.e,c=e.f,d=e.v,g=e.x,f=e.n,p=e.z,m=e.B,v=e.s,w=e.y},e=>{D=e.v},e=>{b=e.D},null,null],execute:function(){e("default",t({__name:"PasswordChanges",setup(e){const a=n([]),t=n(""),h=n(!1),y=new b,x=[[{label:"#",ref:"index"},{label:"User",ref:"provider"},{label:"Count",ref:"count"},{label:"View",ref:"drilldown",toValue:()=>"View",tdClick:async e=>{e.refData.length&&(await p.create({component:D,backdropDismiss:!1,cssClass:"large-modal",componentProps:{title:e.data.provider,columns:[[{label:"#",ref:"index"},{label:"Date changed",ref:"date",toValue:e=>m(e).format("DD/MMM/YYYY HH:mm:ss")}]],rowsPerPage:100,columnData:e.refData.reduce(((e,a,t)=>[...e,{...a,index:t+1}]),[]),onFinish:()=>p.getTop().then((e=>e&&p.dismiss()))}})).present()}}]],P=async()=>{if(!y.startDate||!y.endDate)return v("Start date and end date required!");h.value=!0;try{const e=await y.getPasswordChanges();a.value=Object.keys(e).reduce(((a,t,n)=>[...a,{index:n+1,provider:t,count:e[t].length,drilldown:e[t]}]),[])}catch(e){console.error(e),w("Unable to generate report!")}h.value=!1},C=()=>l({onFinish:(e,a,n)=>{t.value=n,y.startDate=e,y.endDate=a,P()}});return r((()=>C())),(e,n)=>(o(),s(c(f),null,{default:i((()=>[u(c(d),{"is-open":h.value,message:"Please wait.."},null,8,["is-open"]),u(D,{"icon-url":c(g)("reports.png"),title:"Password changes","report-prefix":"Clinic",subtitle:t.value,columns:x,columnData:a.value,rowsPerPage:100,onConfigure:C,onRefresh:P},null,8,["icon-url","subtitle","columnData"])])),_:1}))}}))}}}));
