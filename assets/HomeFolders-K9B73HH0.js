import{T as F}from"./TaskCard-DxknBMsF.js";import{d as U,r as _,aP as V,o as H,aA as T,a as c,g as b,e as d,w as i,a5 as m,a4 as x,b as N,i as r,d4 as O,h as j,t as z,d5 as P,af as R,ag as G,y as $,b4 as q,aR as J,j as w}from"./index-CJleCCtM.js";const W=U({__name:"HomeFolders",props:{items:Object,resetList:Number},emits:["onSublist"],setup(A,{emit:I}){const S=I,p=A,u=_(),v=_({}),f=_([]);function h(a,t=[],o="",n={}){return a.reduce((s,e)=>{var g,k,B,C;if(e.files&&!J.isEmpty(e.files)){const D={...(g=n[e.name])!=null?g:{}},E=[...t,e.name];s[e.name]||(s[e.name]={_breadcrumb:[],...e}),s[e.name]=h(e.files,E,(k=e.defaultFilesIcon)!=null?k:e.icon,D),s[e.name]._breadcrumb=E,s[e.name]._visible=e.condition?e.condition():!0,s[e.name]._icon=(B=e.icon)!=null?B:o}else s[e.name]=e,s[e.name].icon=(C=e.icon)!=null?C:o,s[e.name]._visible=e.condition?e.condition():!0;return s},{...n})}async function l(a){u.value=a,T.set("ACTIVE_HOME_SUB_TAB_NAME",u.value);const t=y(a,0,v.value);await L(t),S("onSublist")}async function L(a){var t;f.value=[];for(const o in a){const n=a[o];await n._visible&&f.value.push({name:o,icon:(t=n._icon)!=null?t:n.icon,action:()=>{typeof n.action=="function"?n.action():n._breadcrumb?l(n._breadcrumb):n.pathUrl?w.push(n.pathUrl):n.pathName&&w.push({name:n.pathName})}})}}function M(a){var o;const t=((o=u.value)!=null?o:[]).filter((n,s)=>s<=a);l(t)}function y(a,t=0,o={}){if(a[0]==="")return o;const n=a[t],s=t+1;let e=o[n];return s<a.length&&(e=y(a,s,e)),e}return V(()=>p.resetList,()=>l([""])),H(async()=>{var a,t;v.value=h((a=p.items)!=null?a:[]),l((t=await T.get("ACTIVE_HOME_SUB_TAB_NAME"))!=null?t:[""])}),(a,t)=>(c(),b(m,null,[d(r(P),null,{default:i(()=>[(c(!0),b(m,null,x(u.value,(o,n)=>(c(),N(r(O),{onClick:s=>M(n),key:n,class:"his-md-text"},{default:i(()=>[j(z(o),1)]),_:2},1032,["onClick"]))),128))]),_:1}),d(r(q),null,{default:i(()=>[d(r(R),null,{default:i(()=>[(c(!0),b(m,null,x(f.value,(o,n)=>(c(),N(r(G),{key:n,"size-lg":"4","size-sm":"12"},{default:i(()=>[d(F,{onClick:o.action,title:o.name,icon:r($)(o.icon)},null,8,["onClick","title","icon"])]),_:2},1024))),128))]),_:1})]),_:1})],64))}});export{W as default};
