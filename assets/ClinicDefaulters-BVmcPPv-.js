import{D as p}from"./defaulters_report_service-DWa7nqKL.js";import{_ as a}from"./ReportMixin.vue_vue_type_script_lang-BUZJnrGJ.js";import{R as l}from"./TableReportTemplate-Dfnljex-.js";import{d as m,I as d,L as e,_ as c,r as s,o as f,c as u,w as h,b as _}from"./index-CEHwIYqs.js";import"./MultiFieldDateHelper-3uh31nyF.js";import"./dynamic-import-helper-Bsjrd6Ro.js";import"./KbLayouts-VRA-vjeH.js";import"./HisKbConfigurations-GhFQZvlg.js";import"./BasicReportTemplate-C1LCpIKe.js";import"./Export-BQ97ckzh.js";import"./SIngleTouchField-l8pjEMFV.js";import"./Pagination-BZcHKApi.js";import"./HisStandardForm-CG-mBCAJ.js";import"./TouchScreenForm-CoH4BwNu.js";import"./ToolbarMediumCard-C9Oru3Lp.js";import"./Transformers-BPPLlH12.js";import"./ViewPort-CUJZqAQw.js";import"./ReportErrors-uaWLdTQ5.js";const b=m({mixins:[a],components:{ReportTemplate:l,IonPage:d},data:()=>({title:"Clinic Defaulters report",rows:[],columns:[[e.thTxt("ARV#"),e.thTxt("First name",{csvExportable:!1,pdfExportable:!0}),e.thTxt("Last name",{csvExportable:!1,pdfExportable:!0}),e.thTxt("Gender"),e.thTxt("Birthdate"),e.thTxt("Appointment date"),e.thTxt("Date defaulted"),e.thTxt("Address",{csvExportable:!1,pdfExportable:!0})]]}),created(){this.fields=this.getDateDurationFields(!1,!1,5,null)},methods:{async onPeriod(r,t){this.rows=[],this.report=new p,this.report.setIsPepfar(!1),this.report.setOccupation(t.occupation),this.report.setStartDate(t.start_date),this.report.setEndDate(t.end_date),this.period=this.report.getDateIntervalPeriod();const o=await this.report.getDefaulters();this.setRows(o),this.title="Clinic Defaulters report <b>(".concat(o.length," Defaulters)</b>")},async setRows(r){this.sortByArvNumber(r).forEach(t=>{this.rows.push([e.td(t.arv_number),e.td(t.given_name),e.td(t.family_name),e.td(this.formatGender(t.gender)),e.tdDate(t.birthdate),e.tdDate(t.appointment_date),e.tdDate(t.defaulter_date),e.td((t.cell_number?"CELL: ".concat(t.cell_number," <br/>"):"")+(t.village?"VILLAGE: ".concat(t.village," <br/>"):"")+(t.district?"DISTRICT: ".concat(t.district," <br/>"):"")+(t.ta?"TA: ".concat(t.ta," <br/>"):"")+(t.landmark?"Landmark: ".concat(t.landmark):""))])})}}});function D(r,t,o,x,w,T){const i=s("report-template"),n=s("ion-page");return f(),u(n,null,{default:h(()=>[_(i,{title:r.title,period:r.period,rows:r.rows,fields:r.fields,columns:r.columns,showtitleOnly:!0,onReportConfiguration:r.onPeriod,encryptPDF:!0,reportPrefix:"Clinic"},null,8,["title","period","rows","fields","columns","onReportConfiguration"])]),_:1})}const O=c(b,[["render",D]]);export{O as default};
