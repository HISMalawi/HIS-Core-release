System.register(["./index-legacy-D2iCn0VZ.js","./HisStandardForm-legacy-DWEtuKgE.js","./EncounterMixin.vue_vue_type_script_lang-legacy-l7IlPNdY.js","./encounter_guidelines-legacy-DtASQQT-.js","./GuidelineEngine-legacy-KsvQuFdF.js"],(function(e,t){"use strict";var n,i,a,r,s,o,l,d,c,u,h,f,g,m;return{setters:[e=>{n=e.d,i=e.am,a=e.aY,r=e.bi,s=e.bm,o=e.B,l=e.aZ,d=e.O,c=e.ak,u=e.a,h=e.ap,f=e.b},e=>{g=e.H},e=>{m=e._},null,null],execute:function(){const t=n({mixins:[m],components:{HisStandardForm:g},data:()=>({fields:[],fieldContext:{}}),watch:{ready:{handler(e){e&&(this.fields=this.getFields())}}},methods:{onFinish(){this.nextTask()},getFields(){return[{id:"patient_lab_orders",helpText:"Lab orders",type:i.TT_LAB_ORDERS,onload:e=>{this.fieldContext=e},options:async()=>{const e=await r.getOrdersIncludingGivenResultStatus(this.patientID);return[{label:"Lab orders",value:"order trail",other:{values:r.formatLabs(e)}}]},config:{printOrder:e=>d(e),hiddenFooterBtns:["Clear"],footerBtns:[{name:"Order",size:"large",slot:"end",color:"primary",visible:!0,onClick:async()=>{if(!a.isEmpty(this.fieldContext)){if("ART"!=r.getProgramName())return this.fieldContext.launchOrderSelection();if(await(async()=>{const e=parseInt(`${this.$route.params.patient_id}`),t=await s.getFirstObs(e,"Patient present");if(!t)return!1;const n=o(t.obs_datetime),i=o(s.getSessionDate());return n.isSame(i,"day")&&"No"===t.value_coded})())return l("Guardian visit warning","Doing lab orders on a guardian only visit is strictly forbidden.","Please arrange for a patient visit and update the HIV Reception encounter to proceed...",[{name:"Close",slot:"start",color:"primary"}],"his-danger-color");await this.fieldContext.launchOrderSelection()}}}]}}]}}});e("default",c(t,[["render",function(e,t,n,i,a,r){const s=h("his-standard-form");return f(),u(s,{fields:e.fields,onOnFinish:e.onFinish,skipSummary:!0,cancelDestinationPath:e.cancelDestination},null,8,["fields","onOnFinish","cancelDestinationPath"])}]]))}}}));
