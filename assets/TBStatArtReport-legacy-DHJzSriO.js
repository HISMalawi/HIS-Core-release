System.register(["./index-legacy-D3AimR5c.js","./v2utils-legacy-C5cbKIGF.js","./tb_report_service-legacy-BBkHRS2Q.js","./TableView-legacy-Dy3lcVgQ.js","./TBDrilldown-legacy-BBrqX3ZM.js","./Export-legacy-e4sEJcbx.js","./index-legacy-C8IfrPJu.js"],(function(e,t){"use strict";var n,a,l,r,s,o,i,u,g,c,d,p,_,v,w,T,y;return{setters:[e=>{n=e.d,a=e.r,l=e.o,r=e.a,s=e.b,o=e.w,i=e.e,u=e.i,g=e.D,c=e.q,d=e.y,p=e.z,_=e.l},e=>{v=e.w},e=>{w=e.T},e=>{T=e.v},e=>{y=e.T},null,null],execute:function(){e("default",n({__name:"TBStatArtReport",setup(e){const t=d("login-logos/PEPFAR.png"),n=a([]),f=a(""),m=new w,b=(e,t)=>({label:e,ref:t,toValue:e=>e.length,tdClick:async e=>(await p.create({component:y,backdropDismiss:!1,cssClass:"large-modal",componentProps:{title:e.column.label,patientIdentifiers:e.refData,subtitle:`Period: ${f.value}`,onFinish:()=>p.getTop().then((e=>e&&p.dismiss()))}})).present()}),R=[[{label:"#",ref:"index"},{label:"Age group",ref:"age_group"},{label:"Gender",ref:"gender"},b("Known positive","known_positive"),b("Newly Tested Positives","newly_tested_positive"),b("New Negatives","new_negative"),b("Recent negative","recent_negative"),b("Not Done","not_done"),b("New on ART","new_on_art"),b("Already on ART","already_on_art")]],A=()=>v((async()=>{if(!m.startDate||!m.endDate)return _("Start date and end date required!");n.value=[];const e=await w.getJson("programs/2/reports/TB_ART_STAT",m.buildRequestParams({})),t=Object.keys(e).reduce(((t,n)=>(/unknown|all/i.test(n)||(t.M.push({age_group:n,gender:"Male",...e[n].M}),t.F.push({age_group:n,gender:"Female",...e[n].F})),t)),{F:[],M:[]}),a=[...t.F,...t.M];n.value=a.map(((e,t)=>({index:t+1,...e})))})),D=()=>g({onFinish:(e,t,n)=>{f.value=`${n}`,m.startDate=e,m.endDate=t,A()}});return l((()=>D())),(e,a)=>(r(),s(u(c),null,{default:o((()=>[i(T,{title:"TB STAT ART Report","report-prefix":"PEPFAR","icon-url":u(t),subtitle:f.value,columns:R,columnData:n.value,rowsPerPage:50,onConfigure:D,onRefresh:()=>A()},null,8,["icon-url","subtitle","columnData","onRefresh"])])),_:1}))}}))}}}));
