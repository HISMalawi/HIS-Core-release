import{d as b,I as C,c2 as R,N as w,K as o,c9 as s,O as r,V as D,_ as y,r as c,o as $,c as L,w as P,b as _}from"./index-hoLU9YgK.js";import{v as E}from"./TableView-ogQ2-oNa.js";import{M as F}from"./PopupKeyboard-Ap666HVv.js";import{F as h}from"./dynamic-import-helper-9HnG3Mif.js";import{C as O}from"./cxca_report_service-BymYuRbN.js";import{D as N}from"./DrillPatientIds-GZg8XRsJ.js";import"./Export-g1vHKjsV.js";import"./SIngleTouchField-iKsJUYy8.js";import"./TouchScreenForm-3AdFBAzj.js";import"./ToolbarMediumCard-8sJVQ55x.js";import"./Transformers-XlEF3tgP.js";import"./ViewPort-kkmofE00.js";import"./HisKeypad-i5maK9vi.js";import"./BaseKeyboard-Atx0WGaP.js";import"./KbLayouts-9dqmDWmG.js";import"./KbHandler-oqPdZ1-Q.js";import"./overlays-3311e70e-kWORyLwR.js";import"./TableView-B9cOa_Ik.js";import"./fuse-lCMBsAWg.js";import"./HisKeyboard-9a4WjXaD.js";import"./HisKbConfigurations-a7K7dizM.js";const d=o([]),i=o(""),l=o(""),u=o(""),k=o(!1),T=o(""),S=b({components:{IonPage:C,IonLoading:R,v2Datatable:E},setup(){const a=async()=>{const e=new O;e.startDate=i.value,e.endDate=l.value;try{const t=await e.getClinicReport("REASON FOR NOT SCREENING REPORT"),n=m(t);d.value=n}catch(t){console.log(t)}},m=e=>Object.keys(e).map(t=>({reason:t,patients:e[t]})),v=async(e,t)=>{t.length<=0||(await r.create({component:N,backdropDismiss:!1,cssClass:"large-modal",componentProps:{title:e,subtitle:u,patientIdentifiers:t,onFinish:()=>r.getTop().then(n=>n&&r.dismiss())}})).present()},f=["Reason","Total"],g=[[{label:"Reason",ref:"data.reason",value:e=>e.reason},{label:"Total",ref:"data.patients.length",secondaryLabel:"Clients diagnosed with",value:e=>e.patients.length,tdClick:({column:e,data:t})=>v("".concat(e.secondaryLabel," ").concat(t.reason," "),t.patients)}]],p=()=>F([{id:"start_date",helpText:"Start Date",type:h.TT_FULL_DATE,validation:e=>D.required(e),computedValue:e=>e.value},{id:"end_date",helpText:"End Date",type:h.TT_FULL_DATE,validation:e=>D.required(e),computedValue:e=>e.value}],(e,t)=>{i.value=t.start_date,l.value=t.end_date,u.value="Period (".concat(s(i.value)," to ").concat(s(l.value),")"),r.dismiss(),T.value="".concat(s(i.value)," to ").concat(s(l.value)),a()});return w(()=>!d.value.length&&p()),{columns:g,isLoading:k,reportData:d,period:u,csvQuarter:T,csvheaders:f,generate:a,configure:p}}});function V(a,m,v,f,g,p){const e=c("ion-loading"),t=c("v2Datatable"),n=c("ion-page");return $(),L(n,null,{default:P(()=>[_(e,{"is-open":a.isLoading,message:"Please wait..."},null,8,["is-open"]),_(t,{title:"Denial Reason",subtitle:a.period,columns:a.columns,columnData:a.reportData,rowsPerPage:25,onConfigure:a.configure,csvQuarter:a.csvQuarter,headers:a.csvheaders,onRefresh:a.generate},null,8,["subtitle","columns","columnData","onConfigure","csvQuarter","headers","onRefresh"])]),_:1})}const oe=y(S,[["render",V]]);export{oe as default};
