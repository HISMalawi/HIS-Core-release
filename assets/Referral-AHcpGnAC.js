import{d as R,K as a,I as b,c2 as C,N as L,O as n,c9 as r,V as g,_ as $,r as c,o as w,c as P,w as y,b as D}from"./index-hoLU9YgK.js";import{v as E}from"./TableView-ogQ2-oNa.js";import{M as F}from"./PopupKeyboard-Ap666HVv.js";import{F as _}from"./dynamic-import-helper-9HnG3Mif.js";import{A}from"./aetc_report_service-3trVyipu.js";import{D as V}from"./DrillPatientIds-GZg8XRsJ.js";import"./Export-g1vHKjsV.js";import"./SIngleTouchField-iKsJUYy8.js";import"./TouchScreenForm-3AdFBAzj.js";import"./ToolbarMediumCard-8sJVQ55x.js";import"./Transformers-XlEF3tgP.js";import"./ViewPort-kkmofE00.js";import"./HisKeypad-i5maK9vi.js";import"./BaseKeyboard-Atx0WGaP.js";import"./KbLayouts-9dqmDWmG.js";import"./KbHandler-oqPdZ1-Q.js";import"./overlays-3311e70e-kWORyLwR.js";import"./TableView-B9cOa_Ik.js";import"./fuse-lCMBsAWg.js";import"./HisKeyboard-9a4WjXaD.js";import"./HisKbConfigurations-a7K7dizM.js";const d=a([]),s=a(""),i=a(""),u=a(""),k=a(!1),h=a(""),Q=R({components:{IonPage:b,IonLoading:C,v2Datatable:E},setup(){const o=async()=>{const e=new A;e.startDate=s.value,e.endDate=i.value;try{const t=await e.getClinicReport("REFERRAL_REPORT");d.value=t}catch(t){console.log(t)}},m=["Diagnosis","Total"],v=[[{label:"Diagnosis",ref:"data.location",value:e=>e.location},{label:"Total",ref:"data.patients.length",secondaryLabel:"Referred Clients",value:e=>e.patients.length,tdClick:({column:e,data:t})=>f("".concat(e.secondaryLabel," ").concat(t.diagnosis," "),t.patients)}]],f=async(e,t)=>{t.length<=0||(await n.create({component:V,backdropDismiss:!1,cssClass:"large-modal",componentProps:{title:e,subtitle:u,patientIdentifiers:t,onFinish:()=>n.getTop().then(p=>p&&n.dismiss())}})).present()},l=()=>F([{id:"start_date",helpText:"Start Date",type:_.TT_FULL_DATE,validation:e=>g.required(e),computedValue:e=>e.value},{id:"end_date",helpText:"End Date",type:_.TT_FULL_DATE,validation:e=>g.required(e),computedValue:e=>e.value}],(e,t)=>{s.value=t.start_date,i.value=t.end_date,u.value="Period (".concat(r(s.value)," to ").concat(r(i.value),")"),n.dismiss(),h.value="".concat(r(s.value)," to ").concat(r(i.value)),o()});return L(()=>!d.value.length&&l()),{columns:v,isLoading:k,reportData:d,period:u,csvQuarter:h,csvheaders:m,generate:o,configure:l}}});function I(o,m,v,f,l,e){const t=c("ion-loading"),p=c("v2Datatable"),T=c("ion-page");return w(),P(T,null,{default:y(()=>[D(t,{"is-open":o.isLoading,message:"Please wait..."},null,8,["is-open"]),D(p,{title:"AETC Referral Report",subtitle:o.period,columns:o.columns,columnData:o.reportData,rowsPerPage:25,onConfigure:o.configure,csvQuarter:o.csvQuarter,headers:o.csvheaders,onRefresh:()=>o.generate()},null,8,["subtitle","columns","columnData","onConfigure","csvQuarter","headers","onRefresh"])]),_:1})}const ae=$(Q,[["render",I]]);export{ae as default};
