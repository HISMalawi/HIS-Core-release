System.register(["./index-legacy-iEOS67hm.js","./HisStandardForm-legacy-UdjTFVCq.js","./useEncounter-legacy-0Rx46XKA.js","./commons-legacy-jt-vwAZb.js","./util-legacy-C4Rh4NgV.js","./isEmpty-legacy-j3LEhgDm.js","./encounter_guidelines-legacy-CLZ4M_-v.js","./GuidelineEngine-legacy--xbEVG44.js"],(function(e,a){"use strict";var t,l,i,d,o,u,n,_,s,p,c,r,T,E,S,v,O;return{setters:[e=>{t=e.d,l=e.r,i=e.bI,d=e.dO,o=e.ao,u=e.ab,n=e.ac,_=e.u,s=e.v,p=e.w,c=e.x,r=e.y,T=e.a5},e=>{E=e.H},e=>{S=e.u},e=>{v=e.r},e=>{O=e.g},null,null,null],execute:function(){e("default",t({__name:"Microscopy",setup(e){const a=l([]),t=new i(-1,d.LAB_RESULTS),m=o(),{goToNextTask:A,patientDashboardUrl:C}=S(((e,l)=>{t.patientID=l,t.providerID=e;const i=e=>({id:`sample${e}PhysicalAppearance`,helpText:`Sample ${e} Physical Appearance:`,type:u.TT_SELECT,computedValue:a=>({concept_id:O(`SAMPLE_${e.toUpperCase()}_MICROSCOPY_PHYSICAL_APPEARANCE`),value_coded:O(`${a.value}`),obs_datetime:t.date}),validation:e=>n.required(e),options:()=>[{value:"MUCO_PURULENT",label:"Muco-purulent"},{value:"BLOOD_STAINED",label:"Blood-stained"},{value:"SALIVA",label:"Saliva"},{value:"OTHER",label:"Other"}]}),d=e=>({id:`sample${e}Procedure`,helpText:`Sample ${e} Procedure:`,type:u.TT_SELECT,computedValue:a=>({concept_id:O(`SAMPLE_${e.toUpperCase()}_MICROSCOPY_PROCEDURE`),value_coded:O(`${a.value}`),obs_datetime:t.date}),validation:e=>n.required(e),options:()=>[{value:"ZIEHL_NEELSEN",label:"Ziehl-Neelsen"},{value:"FLUORESCENCE",label:"Fluorescence"}]}),o=e=>({id:`sample${e}Result`,helpText:`Sample ${e} Result:`,type:u.TT_SELECT,computedValue:a=>({concept_id:O(`SAMPLE_${e.toUpperCase()}_MICROSCOPY_RESULT`),value_coded:O(`${a.value}`),obs_datetime:t.date}),validation:e=>n.required(e),options:()=>[{value:"AFB_POSITIVE",label:"AFB Positive"},{value:"AFB_NEGATIVE",label:"AFB Negative"}]}),_=e=>({id:`sample${e}Grading`,helpText:`Sample ${e} Grading:`,type:u.TT_SELECT,validation:e=>n.required(e),condition:a=>"AFB_POSITIVE"===a[`sample${e}Result`].value,computedValue:a=>({concept_id:O(`SAMPLE_${e.toUpperCase()}_MICROSCOPY_GRADING`),value_text:a.value,obs_datetime:t.date}),options:()=>[{value:"1+",label:"1+"},{value:"2+",label:"2+"},{value:"3+",label:"3+"},{value:"OTHER",label:"Other"}]}),s=e=>({id:`sample${e}OtherGrading`,helpText:`Sample ${e} Other Grading:`,type:u.TT_TEXT,computedValue:a=>({concept_id:O(`SAMPLE_${e.toUpperCase()}_MICROSCOPY_GRADING`),value_text:a.value,obs_datetime:t.date}),validation:e=>n.required(e),condition:a=>"OTHER"===a[`sample${e}Grading`].value}),p=e=>({id:`sample${e}BaciliSeen`,type:u.TT_NUMBER,helpText:`Sample ${e} no. Of Bacilli Seen:`,computedValue:a=>({concept_id:O(`SAMPLE_${e.toUpperCase()}_NUMBER_OF_BACILI_SEEN`),value_numeric:a.value,obs_datetime:t.date}),validation:e=>n.required(e),condition:a=>"OTHER"===a[`sample${e}Grading`].value}),c=e=>({id:`sample${e}ResultDate`,helpText:`Sample ${e} Result Date:`,type:u.TT_FULL_DATE,computedValue:a=>({concept_id:O(`SAMPLE_${e.toUpperCase()}_MICROSCOPY_RESULT_DATE`),value_datetime:a.value,obs_datetime:t.date}),validation:e=>n.validateSeries([()=>n.required(e),()=>n.dateRangeOf(e,`${m.query.date}`,t.date)])});a.value=[i("One"),d("One"),o("One"),_("One"),s("One"),p("One"),c("One"),i("Two"),d("Two"),o("Two"),_("Two"),s("Two"),p("Two"),c("Two")]}));function R(e){const a=[];return"AFB_POSITIVE"===e.sampleOneResult.value||"AFB_POSITIVE"===e.sampleTwoResult.value?(a.push({concept_id:O("TB_TYPE"),value_coded:O("PULMONARY_TB"),obs_datetime:t.date}),a.push({concept_id:O("TB_STATUS"),value_coded:O("POSITIVE"),obs_datetime:t.date}),a.push({concept_id:O("TUBERCULOSIS_CLASS"),value_coded:O("All Other"),obs_datetime:t.date})):a.push({concept_id:O("TB_STATUS"),value_coded:O("NEGATIVE"),obs_datetime:t.date}),a.push({concept_id:O("BACTERIOLOGICALLY_DIAGNOSED"),value_coded:O("YES_ANSWER"),obs_datetime:t.date}),a.push({concept_id:O("PROCEDURE_TYPE"),value_coded:O("MICROSCOPY"),obs_datetime:t.date}),a}async function P(e,a){await t.createEncounter(),await t.saveObservationList([...R(e),...await v(a)]),A()}return(e,t)=>(_(),s(r(T),null,{default:p((()=>[c(E,{cancelDestinationPath:r(C),onFinishAction:P,fields:a.value,skipSummary:!0},null,8,["cancelDestinationPath","fields"])])),_:1}))}}))}}}));
