import{O as p,N as d}from"./opd_report_service-C2_8P3IH.js";import{R as c}from"./BaseTableReport-BV3SGI1Z.js";import{d as u,I as f,L as e,_ as h,r as m,o as _,c as C,w,b as v}from"./index-CtD5m6Vn.js";import{_ as g}from"./ReportMixin.vue_vue_type_script_lang-BmiIMaw4.js";import"./Export-BO963yok.js";import"./HisStandardForm-rceGCPQJ.js";import"./BasicReportTemplate-BNCwu9Pe.js";import"./Pagination-CrnY4UNw.js";const x=u({components:{ReportTemplate:c,IonPage:f},mixins:[g],data:()=>({title:"Cases seen report",rows:[],reportService:{},columns:[[e.thTxt("",{sortable:!1,exportable:!1}),e.thTxt("New cases",{colspan:2,sortable:!1,exportable:!1}),e.thTxt("All cases",{colspan:2,sortable:!1,exportable:!1})],[e.thTxt("NCD type"),e.thTxt("Male",{value:"Male (New Cases)"}),e.thTxt("Female",{value:"Female (New Cases)"}),e.thTxt("Male",{value:"Male (All Cases)"}),e.thTxt("Female",{value:"Female (All Cases)"})]]}),created(){this.fields=this.getDateDurationFields()},methods:{async init(t,s){this.reportService=new p,this.reportService.setStartDate(s.start_date),this.reportService.setEndDate(s.end_date),this.period=this.reportService.getDateIntervalPeriod();const l=await this.reportService.getCasesSeen();this.rows=this.buildRows(l)},toDrillColumn(t,s,l,n){const a=t.filter(o=>n?o.name===s&&o.gender===l&&/new patient/i.test(o.type_of_visit):o.name===s&&o.gender===l);if(a.length){const o=[[e.thTxt("Name"),e.thTxt("Age Group"),e.thTxt("Address")]],i=a.map(r=>[e.td("".concat(r.given_name," ").concat(r.family_name)),e.td(r.age_group),e.td("".concat(r.village,", ").concat(r.ta,", ").concat(r.district))]);return e.tdLink(a.length,()=>this.drilldownData("".concat(this.formatGender(l)," patients with ").concat(s),o,i,void 0))}return e.td(0)},buildRows(t){return d.map(s=>[e.td(s,{style:{textAlign:"left"}}),this.toDrillColumn(t,s,"M",!0),this.toDrillColumn(t,s,"F",!0),this.toDrillColumn(t,s,"M",!1),this.toDrillColumn(t,s,"F",!1)])}}});function D(t,s,l,n,a,o){const i=m("report-template"),r=m("ion-page");return _(),C(r,null,{default:w(()=>[v(i,{title:t.title,rows:t.rows,fields:t.fields,columns:t.columns,period:t.period,reportPrefix:"Clinic",onReportConfiguration:t.init},null,8,["title","rows","fields","columns","period","onReportConfiguration"])]),_:1})}const M=h(x,[["render",D]]);export{M as default};
