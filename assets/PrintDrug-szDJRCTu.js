import{H as p}from"./HisStandardForm-CNo-jxdn.js";import{D as c}from"./drug_service-sOskGl7r.js";import{F as s}from"./dynamic-import-helper-Bsjrd6Ro.js";import{d as u,V as o,cq as d,ab as r,ae as l,_ as m,r as h,o as _,c as y}from"./index-BF3WrZAg.js";import"./TouchScreenForm-DEXYdl71.js";import"./ToolbarMediumCard-CJsYT4iG.js";import"./Transformers-BPPLlH12.js";import"./ViewPort-J1DvtW6Z.js";const S=u({components:{HisStandardForm:p},data:()=>({fields:[],packSizes:[]}),async created(){this.fields=[{id:"drug",helpText:"Select drug",type:s.TT_SELECT,validation:e=>o.required(e),options:async(e,i="")=>(await c.getDrugs({name:i})).map(t=>({label:t.name,value:t.drug_id})),onValue:e=>(this.packSizes=d.getPackSizes(e.value),e),config:{showKeyboard:!0,isFilterDataViaApi:!0}},{id:"drug_pack_size",helpText:"Select Quantity",type:s.TT_SELECT,condition:()=>!r.isEmpty(this.packSizes),options:()=>[...this.packSizes.map(e=>({label:"".concat(e),value:e})),{label:"Other (specify)",value:"Other"}]},{id:"quantity",helpText:"Input quantity",type:s.TT_NUMBER,validation:e=>o.required(e),condition:e=>r.isEmpty(this.packSizes)||e.drug_pack_size.value.match(/other/i),config:{showKeyboard:!0}}]},methods:{async onSubmit(e){const i=new l,a=r.isEmpty(this.packSizes)||e.drug_pack_size.label.includes("Other")?e.quantity.value:e.drug_pack_size.value;try{await i.printDrug(e.drug.value,a),this.$router.push({path:"/"})}catch(t){console.log(t)}}}});function g(e,i,a,t,f,k){const n=h("his-standard-form");return _(),y(n,{skipSummary:!0,fields:e.fields,onOnFinish:e.onSubmit},null,8,["fields","onOnFinish"])}const $=m(S,[["render",g]]);export{$ as default};
