System.register(["./index-legacy-Ck8hVlzC.js"],(function(e,t){"use strict";var a,l,n,i,r,o,s,d,u,c,h,m,p;return{setters:[e=>{a=e.cs,l=e.M,n=e.J,i=e.H,r=e.O,o=e.bS,s=e.L,d=e.P,u=e.ai,c=e.F,h=e.ah,m=e.V,p=e.S}],execute:function(){e("A",(function(e="Report"){const t=a({title:e,rows:[],columns:[],fields:[],period:"",drill:[],service:{},other:{}}),b=l((()=>t.rows)),v=l((()=>t.period)),f=l((()=>t.fields)),w=l((()=>t.columns)),y=l((()=>t.title)),g=n();async function D(e,a){(await r.create({component:o,cssClass:"large-modal",componentProps:{title:e||"Drilldown",columns:[[s.thTxt("National ID"),s.thTxt("First name"),s.thTxt("Last name"),s.thTxt("Birthdate"),s.thTxt("Action")]],rows:a,rowParser:async e=>{const a=[];for(const n of e)if(t.drill[n])a.push(t.drill[n]);else try{const e=new d(await d.findByID(n));t.drill[n]=[s.td(e.getNationalID()),s.td(e.getGivenName()),s.td(e.getFamilyName()),s.tdDate(`${e.getBirthdate()}`),s.tdBtn("Show",(()=>{g.push({path:`/patient/dashboard/${n}`}),r.dismiss({})}))],a.push(t.drill[n])}catch(l){console.error(l)}return a},showFilters:!0,footerColor:"light",showReportStamp:!1,paginated:!0,rowsPerPage:20,onFinish:()=>r.dismiss()}})).present()}function x(e={}){return[...u({id:"start_date",helpText:"Start",required:!0,minDate:()=>e?.minDate||null,maxDate:()=>e?.maxDate||null,estimation:{allowUnknown:!1},computeValue:e=>e}),...u({id:"end_date",helpText:"End",required:!0,minDate:(e,t)=>t.start_date,maxDate:()=>e?.maxDate||null,estimation:{allowUnknown:!1},computeValue:e=>e})]}return t.fields=x(),{fd:function(e){return i.toStandardHisDisplayFormat(e)},drill:function(e,t){return t.length?s.tdLink(t.length,(()=>D(e,t))):s.td(0)},presentDrillDown:D,getMonthlyReportFields:function(){return[{id:"year",helpText:"Select Year",type:c.TT_NUMBER,computedValue:e=>e.value,validation:e=>{const t=h.isPlainObject(e)?e.value:-1;return m.validateSeries([()=>m.required(e),()=>isNaN(parseInt(`${t}`))?["Invalid year"]:null,()=>m.rangeOf(e,2e3,i.getYear(p.getSessionDate()))])}},{id:"month",helpText:"Select Month",type:c.TT_SELECT,validation:e=>m.required(e),computedValue:e=>e.value,options:()=>[{label:"January",value:"01"},{label:"February",value:"02"},{label:"March",value:"03"},{label:"April",value:"04"},{label:"May",value:"05"},{label:"June",value:"06"},{label:"July",value:"07"},{label:"August",value:"08"},{label:"September",value:"09"},{label:"October",value:"10"},{label:"November",value:"11"},{label:"December",value:"12"}]}]},showPrintWindow:function(e){const t=open("","","width:1024px, height:768px"),a=document.getElementById(e.containerID);a&&t&&(t.document.write(`\n                <html>\n                <head>\n                    <title>Print Cohort</title>\n                    <link rel="stylesheet" media="print"  href="${e.cssFile}"/>\n                </head>\n                <body>\n                    ${a.innerHTML}\n                </body>\n                </html>\n            `),setTimeout((()=>{t.print(),t.close()}),3500))},buildTimeIntervalFields:x,gotoPatientDashboard:function(e){g.push(`/patient/dashboard/${e}`)},reportData:t,rows:b,period:v,fields:f,columns:w,title:y}}))}}}));
