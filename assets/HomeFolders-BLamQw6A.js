import{T as F}from"./TaskCard-By_LEo27.js";import{d as U,r as _,aQ as V,o as H,aB as T,h as b,b as r,e as d,w as i,a9 as p,aa as g,a as N,f as c,d5 as O,j,t as z,d6 as G,ac as P,ad as Q,x as R,b4 as Y,aY as $,p as w}from"./index-y6JY22M4.js";const K=U({__name:"HomeFolders",props:{items:Object,resetList:Number},emits:["onSublist"],setup(I,{emit:A}){const S=A,m=I,u=_(),v=_({}),f=_([]);function h(a,t=[],o="",n={}){return a.reduce((s,e)=>{var k,y,C,x;if(e.files&&!$.isEmpty(e.files)){const D={...(k=n[e.name])!=null?k:{}},E=[...t,e.name];s[e.name]||(s[e.name]={_breadcrumb:[],...e}),s[e.name]=h(e.files,E,(y=e.defaultFilesIcon)!=null?y:e.icon,D),s[e.name]._breadcrumb=E,s[e.name]._visible=e.condition?e.condition():!0,s[e.name]._icon=(C=e.icon)!=null?C:o}else s[e.name]=e,s[e.name].icon=(x=e.icon)!=null?x:o,s[e.name]._visible=e.condition?e.condition():!0;return s},{...n})}async function l(a){u.value=a,T.set("ACTIVE_HOME_SUB_TAB_NAME",u.value);const t=B(a,0,v.value);await L(t),S("onSublist")}async function L(a){var t;f.value=[];for(const o in a){const n=a[o];await n._visible&&f.value.push({name:o,icon:(t=n._icon)!=null?t:n.icon,action:()=>{typeof n.action=="function"?n.action():n._breadcrumb?l(n._breadcrumb):n.pathUrl?w.push(n.pathUrl):n.pathName&&w.push({name:n.pathName})}})}}function M(a){var o;const t=((o=u.value)!=null?o:[]).filter((n,s)=>s<=a);l(t)}function B(a,t=0,o={}){if(a[0]==="")return o;const n=a[t],s=t+1;let e=o[n];return s<a.length&&(e=B(a,s,e)),e}return V(()=>m.resetList,()=>l([""])),H(async()=>{var a,t;v.value=h((a=m.items)!=null?a:[]),l((t=await T.get("ACTIVE_HOME_SUB_TAB_NAME"))!=null?t:[""])}),(a,t)=>(r(),b(p,null,[d(c(G),null,{default:i(()=>[(r(!0),b(p,null,g(u.value,(o,n)=>(r(),N(c(O),{onClick:s=>M(n),key:n,class:"his-md-text"},{default:i(()=>[j(z(o),1)]),_:2},1032,["onClick"]))),128))]),_:1}),d(c(Y),null,{default:i(()=>[d(c(P),null,{default:i(()=>[(r(!0),b(p,null,g(f.value,(o,n)=>(r(),N(c(Q),{key:n,"size-lg":"4","size-sm":"12"},{default:i(()=>[d(F,{onClick:o.action,title:o.name,icon:c(R)(o.icon)},null,8,["onClick","title","icon"])]),_:2},1024))),128))]),_:1})]),_:1})],64))}});export{K as default};
