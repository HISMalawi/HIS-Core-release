import{d,I as g,cj as _,K as i,N as b,ac as D,t as h,q as v,_ as w,r as c,o as R,c as C,w as I,b as u}from"./index-DsVZSn5I.js";import{D as A}from"./ReportDateSelectionPrompt-_rdzB85X.js";import{A as L}from"./ahd_report_service-CceaU5eg.js";import{v as P}from"./TableView-eB90pPNM.js";import"./Export-DXkekofu.js";const $=d({components:{IonPage:g,IonLoading:_,v2Datatable:P},setup(){const e=i([]),r=i(""),t=i(!1),a=new L,p=[[{label:"#",ref:"num"},{label:"Reason for enrollment",ref:"reason_for_enrollment"},{label:"New+",ref:"new_plus"},{label:"0-9yr",ref:"0-9"},{label:"10-19yr",ref:"10-19"},{label:"Stage 3/4",ref:"stage_3_or_4"},{label:"HVL",ref:"hvl"},{label:"IIT/ART Restart",ref:"iit_or_art_restart"},{label:"Discharged in-patient",ref:"discharged_in_patient"},{label:"Co-mobidities",ref:"co_mobilities"},{label:"Danger sign",ref:"danger_sign"},{label:"ART switch",ref:"art_switch"},{label:"3rd Line",ref:"third_line"},{label:"Total",ref:"total"}]],l=async()=>{if(!(a.startDate&&a.endDate))return h("Start date and end date required!");t.value=!0,e.value=[];try{e.value=await a.getEnrollmentReport()}catch(o){v("Unable to generate report!")}t.value=!1},n=()=>A({onFinish:(o,s,m,f)=>{r.value="Period: ".concat(m),a.startDate=o,a.endDate=s,f&&a.setOccupation(f),l()}});return b(()=>n()),{Img:D,reportData:e,isLoading:t,configure:n,generate:l,columns:p,period:r}}});function y(e,r,t,a,p,l){const n=c("ion-loading"),o=c("v2Datatable"),s=c("ion-page");return R(),C(s,null,{default:I(()=>[u(n,{"is-open":e.isLoading,message:"Please wait..."},null,8,["is-open"]),u(o,{title:"AHD Enrollment Report","icon-url":e.Img("reports.png"),subtitle:e.period,columns:e.columns,columnData:e.reportData,rowsPerPage:100,onConfigure:e.configure,onRefresh:e.generate,"report-prefix":"Clinic"},null,8,["icon-url","subtitle","columns","columnData","onConfigure","onRefresh"])]),_:1})}const k=w($,[["render",y]]);export{k as default};
