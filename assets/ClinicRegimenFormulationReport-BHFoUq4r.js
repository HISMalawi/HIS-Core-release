import{R as m,F as d,a as u}from"./regimen_report_service-2W1AhoT_.js";import{_ as c}from"./ReportMixin.vue_vue_type_script_lang-w4VtTENp.js";import{R as h}from"./TableReportTemplate-Bex2T2ri.js";import{d as f,L as t,F as n,V as l,_ as R,r as T,o as _,c as v}from"./index-C6EjxQ0a.js";import"./HisStandardForm-CHL0RBXf.js";import"./ReportErrors-DibpB--Z.js";const g=f({mixins:[c],components:{ReportTemplate:h},data:()=>({title:"Regimen Formulation: Patient level report",totalClients:[],rows:[],columns:[[t.thTxt("ARV#"),t.thTxt("Formulation"),t.thTxt("Gender"),t.thTxt("DOB")]]}),created(){this.fields=[...this.getDateDurationFields(),{id:"regimen",helpText:"Select regimen",type:n.TT_SELECT,validation:e=>l.required(e),options:()=>m.map(e=>({label:e,value:e}))},{id:"formulation",helpText:"Select formulation",type:n.TT_SELECT,validation:e=>l.required(e),options:()=>d.map(e=>({label:e,value:e}))}]},methods:{async onPeriod({regimen:e,formulation:i},r){this.rows=[],this.report=new u,this.report.setStartDate(r.start_date),this.report.setEndDate(r.end_date),this.report.setOccupation(r.occupation),this.period=this.report.getDateIntervalPeriod();const o=i.value,a=e.value,s=await this.report.getRegimenFormulationReport(a,o);this.setRows(s,a,o)},async setRows(e,i,r){this.sortByArvNumber(e).forEach(o=>{this.rows.push([t.td(o.arv_number),t.td("(".concat(i,") ").concat(r)),t.td(this.formatGender(o.gender)),t.tdDate(o.birthdate)])})}}});function w(e,i,r,o,a,s){const p=T("report-template");return _(),v(p,{title:e.title,period:e.period,rows:e.rows,fields:e.fields,columns:e.columns,onReportConfiguration:e.onPeriod,"report-prefix":"Clinic"},null,8,["title","period","rows","fields","columns","onReportConfiguration"])}const b=R(g,[["render",w]]);export{b as default};
