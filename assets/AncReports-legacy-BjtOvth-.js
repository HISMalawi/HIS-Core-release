System.register(["./index-legacy-BiNmSRfH.js","./BasicReportTemplate-legacy-D3ZA3AVF.js"],(function(e,t){"use strict";var a,l,n,i,r,o,s,d,u,c,m,h,p;return{setters:[e=>{a=e.C,l=e.c,n=e.aq,i=e.a$,r=e.am,o=e.al,s=e.aZ,d=e.H,u=e.S,c=e.z,m=e.ay,h=e.at},e=>{p=e.D}],execute:function(){e("A",(function(e="Report"){const t=a({title:e,rows:[],columns:[],fields:[],period:"",drill:[],service:{},other:{}}),b=l((()=>t.rows)),v=l((()=>t.period)),y=l((()=>t.fields)),f=l((()=>t.columns)),w=l((()=>t.title)),g=n();async function D(e,a){(await c.create({component:p,cssClass:"large-modal",componentProps:{title:e||"Drilldown",columns:[[m.thTxt("National ID"),m.thTxt("First name"),m.thTxt("Last name"),m.thTxt("Birthdate"),m.thTxt("Action")]],rows:a,rowParser:async e=>{const a=[];for(const n of e)if(t.drill[n])a.push(t.drill[n]);else try{const e=new h(await h.findByID(n));t.drill[n]=[m.td(e.getNationalID()),m.td(e.getGivenName()),m.td(e.getFamilyName()),m.tdDate(`${e.getBirthdate()}`),m.tdBtn("Show",(()=>{g.push({path:`/patient/dashboard/${n}`}),c.dismiss({})}))],a.push(t.drill[n])}catch(l){console.error(l)}return a},showFilters:!0,footerColor:"light",showReportStamp:!1,paginated:!0,rowsPerPage:20,onFinish:()=>c.dismiss()}})).present()}function T(e={}){return[...i({id:"start_date",helpText:"Start",required:!0,minDate:()=>e?.minDate||null,maxDate:()=>e?.maxDate||null,estimation:{allowUnknown:!1},computeValue:e=>e}),...i({id:"end_date",helpText:"End",required:!0,minDate:(e,t)=>t.start_date,maxDate:()=>e?.maxDate||null,estimation:{allowUnknown:!1},computeValue:e=>e})]}return t.fields=T(),{fd:function(e){return d.toStandardHisDisplayFormat(e)},drill:function(e,t){return t.length?m.tdLink(t.length,(()=>D(e,t))):m.td(0)},presentDrillDown:D,getMonthlyReportFields:function(){return[{id:"year",helpText:"Select Year",type:r.TT_NUMBER,computedValue:e=>e.value,validation:e=>{const t=s.isPlainObject(e)?e.value:-1;return o.validateSeries([()=>o.required(e),()=>isNaN(parseInt(`${t}`))?["Invalid year"]:null,()=>o.rangeOf(e,2e3,d.getYear(u.getSessionDate()))])}},{id:"month",helpText:"Select Month",type:r.TT_SELECT,validation:e=>o.required(e),computedValue:e=>e.value,options:()=>[{label:"January",value:"01"},{label:"February",value:"02"},{label:"March",value:"03"},{label:"April",value:"04"},{label:"May",value:"05"},{label:"June",value:"06"},{label:"July",value:"07"},{label:"August",value:"08"},{label:"September",value:"09"},{label:"October",value:"10"},{label:"November",value:"11"},{label:"December",value:"12"}]}]},showPrintWindow:function(e){const t=open("","","width:1024px, height:768px"),a=document.getElementById(e.containerID);a&&t&&(t.document.write(`\n                <html>\n                <head>\n                    <title>Print Cohort</title>\n                    <link rel="stylesheet" media="print"  href="${e.cssFile}"/>\n                </head>\n                <body>\n                    ${a.innerHTML}\n                </body>\n                </html>\n            `),setTimeout((()=>{t.print(),t.close()}),3500))},buildTimeIntervalFields:T,gotoPatientDashboard:function(e){g.push(`/patient/dashboard/${e}`)},reportData:t,rows:b,period:v,fields:y,columns:f,title:w}}))}}}));
