import{d as _,a5 as D,r as m,t as h,aH as C,cO as b,aq as d,O as v,a6 as w,v as H,u as T,w as R,x as F,ab as f}from"./index-CzgmKZtb.js";import{v as N}from"./TableView-CTS2Fyew.js";import{C as y}from"./clinic_report_service-k816ENBP.js";import{H as M}from"./HypertensionDrilldown-RNidPs49.js";import{w as $}from"./v2utils-q2IzLD8D.js";import"./Export-CwEmLj54.js";import"./index-cE2oHcbY.js";const x=_({components:{IonPage:D,v2Datatable:N},setup(){const r=C("reports.png"),l=m([]),i=m(""),a=new y,s=(o,n)=>({label:o,ref:n,toValue:e=>e.length,tdClick:e=>p("".concat(e.column.label),e.refData)}),u=[[{label:"#",ref:"index"},{label:"Age group",ref:"age_group"},{label:"Gender",ref:"gender"},s("TX CURR","tx_curr"),s("Ever Diagnosed HTN","ever_diagnosed_htn"),s("Screened for HTN","screened_for_htn"),s("Newly diagnosed HTN","newly_diagnosed_htn"),s("Controlled HTN","controlled_htn")]],p=async(o,n)=>{n.length&&(await d.create({component:M,backdropDismiss:!1,cssClass:"large-modal",componentProps:{title:o,subtitle:i,patients:n,onFinish:()=>d.getTop().then(e=>e&&d.dismiss())}})).present()},c=()=>$(async()=>{if(!(a.startDate&&a.endDate))return v("Start date and end date required!");l.value=[];const o=await a.getTxHtnReport(),n=Object.keys(o).reduce((e,t)=>(e.M.push({age_group:t,gender:"Male",...o[t].M}),e.F.push({age_group:t,gender:"Female",...o[t].F}),e),{F:[],M:[]});l.value=n.F.concat(n.M).map((e,t)=>({index:t+1,...e}))}),g=()=>b({onFinish:(o,n,e,t)=>{t&&a.setOccupation(t),i.value="".concat(e),a.startDate=o,a.endDate=n,c()}});return h(()=>g()),{logo:r,reportData:l,configure:g,generate:c,columns:u,period:i}}});function P(r,l,i,a,s,u){const p=f("v2Datatable"),c=f("ion-page");return T(),H(c,null,{default:R(()=>[F(p,{title:"TX HTN Report","icon-url":r.logo,subtitle:r.period,columns:r.columns,columnData:r.reportData,rowsPerPage:50,onConfigure:r.configure,onRefresh:()=>r.generate(),"report-prefix":"Clinic"},null,8,["icon-url","subtitle","columns","columnData","onConfigure","onRefresh"])]),_:1})}const X=w(x,[["render",P]]);export{X as default};
