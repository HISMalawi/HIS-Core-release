System.register(["./index-legacy-DaDUPm0b.js","./TableView-legacy-CmQ6PVWx.js","./ReportDateSelectionPrompt-legacy-DRhaZpji.js","./clinic_report_service-legacy-BUWA1sqi.js","./PopupKeyboard-legacy-BLGVkQrT.js","./SIngleTouchField-legacy-03Ka2vYO.js","./dynamic-import-helper-legacy-DYK5bIOV.js","./TouchScreenForm-legacy-kTjvZFWF.js","./ToolbarMediumCard-legacy-TC6u67eT.js","./Transformers-legacy-DhNYVLaS.js","./ViewPort-legacy-DVkjms5h.js","./HisKeypad-legacy-Chnrvz-z.js","./BaseKeyboard-legacy-CcZAcjlL.js","./KbLayouts-legacy-BKvPSxzZ.js","./KbHandler-legacy-De8o5nTq.js","./fuse-legacy-CQoBB3MK.js","./Export-legacy-DVLPpzkc.js","./HisKeyboard-legacy-QKalX9Cj.js","./HisKbConfigurations-legacy-vrLd9Pgz.js","./MultiFieldDateHelper-legacy-DbDPqams.js"],(function(e,l){"use strict";var n,a,t,o,r,i,s,c,u,g,d,p,m,y,f,b,_,h,j,D;return{setters:[e=>{n=e.d,a=e.I,t=e.J,o=e.bA,r=e._,i=e.r,s=e.o,c=e.c,u=e.w,g=e.b,d=e.c2,p=e.K,m=e.N,y=e.a9,f=e.O,b=e.t,_=e.q},e=>{h=e.v},e=>{j=e.D},e=>{D=e.C},null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null],execute:function(){const l=n({components:{v2Datatable:h,IonPage:a},props:{title:String,patients:Array,onFinish:Function},setup(){const e=t();return{ITEMS_PER_PAGE:20,columns:[[{label:"ARV Number",ref:"arv_number"},{label:"Gender",ref:"gender",value:e=>o(e.gender)},{label:"Systolic/Diastolic",ref:"diastolic",value:e=>`${e.systolic}/${e.diastolic}`},{label:"Action",ref:"patient_id",exportable:!1,tdClick:({data:l})=>e.push({path:`/patient/dashboard/${l.patient_id}`}),value:()=>"View client"}]]}}}),P=r(l,[["render",function(e,l,n,a,t,o){const r=i("v2Datatable"),d=i("ion-page");return s(),c(d,null,{default:u((()=>[g(r,{title:e.title,columnData:e.patients,columns:e.columns,"on-finish":e.onFinish,"icon-url":"/assets/images/folder.png",rowsPerPage:e.ITEMS_PER_PAGE},null,8,["title","columnData","columns","on-finish","rowsPerPage"])])),_:1})}]]),v=n({components:{IonPage:a,IonLoading:d,v2Datatable:h},setup(){const e=y("reports.png"),l=p([]),n=p(""),a=p(!1),t=new D,o=(e,l)=>({label:e,ref:l,toValue:e=>e.length,tdClick:e=>i(`${e.column.label}`,e.refData)}),r=[[{label:"#",ref:"index"},{label:"Age group",ref:"age_group"},{label:"Gender",ref:"gender"},o("Due for BP screening","due_for_screening"),o("Screened for HP","screened"),o("Normal <140/<90","normal_reading"),o("Mild 140-159/90-99","mild_reading"),o("Moderate 160-180/100-110","moderate_reading"),o("Severe >180/>110","severe_reading"),o("Hydrochlorothiazide 25mg","hydrochlorothiazide_25mg"),o("Amlodipine 5mg","amlodipine_5mg"),o("Amlodipine 10 mg","amlodipine_10mg"),o("Captopril","captopril"),o("Enalapril 5 mg","enalapril_5mg"),o("Enalapril 10mg","enalapril_10mg"),o("Atenolol 50mg","atenolol_50mg"),o("Atenolol 100mg","atenolol_100mg"),o("Nifedipine","nifedipine"),o("Total (regimen)","total_regimen")]],i=async(e,l)=>{l.length&&(await f.create({component:P,backdropDismiss:!1,cssClass:"large-modal",componentProps:{title:e,subtitle:n,patients:l,onFinish:()=>f.getTop().then((e=>e&&f.dismiss()))}})).present()},s=async()=>{if(!t.startDate||!t.endDate)return b("Start date and end date required!");a.value=!0,l.value=[];try{const e=await t.getHypertensionReport(),n=Object.keys(e).reduce(((l,n)=>(l.M.push({age_group:n,gender:"Male",...e[n].M}),l.F.push({age_group:n,gender:"Female",...e[n].F}),l)),{F:[],M:[]});l.value=n.F.concat(n.M).map(((e,l)=>({index:l+1,...e})))}catch(e){_("Unable to generate report!"),console.error(e)}a.value=!1},c=()=>j({onFinish:(e,l,a)=>{n.value=`Period (${a})`,t.startDate=e,t.endDate=l,s()}});return m((()=>c())),{logo:e,reportData:l,isLoading:a,configure:c,generate:s,columns:r,period:n}}});e("default",r(v,[["render",function(e,l,n,a,t,o){const r=i("ion-loading"),d=i("v2Datatable"),p=i("ion-page");return s(),c(p,null,{default:u((()=>[g(r,{"is-open":e.isLoading,message:"Please wait..."},null,8,["is-open"]),g(d,{title:"Hypertension Report","icon-url":e.logo,subtitle:e.period,columns:e.columns,columnData:e.reportData,rowsPerPage:30,onConfigure:e.configure,onRefresh:()=>e.generate(),"report-prefix":"Clinic"},null,8,["icon-url","subtitle","columns","columnData","onConfigure","onRefresh"])])),_:1})}]]))}}}));
