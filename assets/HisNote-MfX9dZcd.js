import{k as b}from"./KbHandler-BuQ4TFU6.js";import{V as w}from"./ViewPort-DiinNO5i.js";import{_ as V}from"./FieldMixin.vue_vue_type_script_lang-BReVEKp2.js";import{d as k,f as C,d0 as $,ab as g,_ as O,r as l,o as a,x as s,b as o,w as r,A as u,F as c,y as h,u as f,v as x,ar as B}from"./index-CZt4BSQf.js";import{d as D}from"./KbLayouts-VRA-vjeH.js";const N=k({components:{ViewPort:w,IonButton:C,IonTextarea:$},mixins:[V],data:()=>({value:"",capsOn:!1,layout:D}),mounted(){this.init()},activated(){this.init()},methods:{async init(){this.$emit("onFieldActivated",this),await this.setDefaultValue()},async setDefaultValue(){if(this.defaultValue&&!this.value){const t=await this.defaultValue(this.fdata,this.cdata);t&&(g.isPlainObject(t)?(this.emitValue(t),this.value=t.value.toString()):(this.value=t,this.emitValue({label:t,value:t})))}},updateKeyboardCaps(t=!1){this.layout=this.layout.map(e=>e.map(i=>t?i.toUpperCase():i.toLowerCase()))},async emitValue(t){this.onValue&&!await this.onValue(t)||(this.value=t.label,this.$emit("onValue",t))},async onKbValue(t){await this.emitValue({label:t,value:t})},async keypress(t){const e=b(this.capsOn?t.toUpperCase():t.toLowerCase(),this.value);if(e.match(/caps/i)){this.capsOn=!this.capsOn,this.updateKeyboardCaps(this.capsOn);return}await this.emitValue({label:e,value:e})}},watch:{clear(){this.value=""}}}),A={class:"his-floating-keyboard"},E={class:"his-floating-keyboard-content"},F={style:{width:"99.9%"}};function K(t,e,i,L,S,I){const m=l("ion-textarea"),_=l("view-port"),p=l("ion-button");return a(),s(c,null,[o(_,{showFull:!1},{default:r(()=>[o(m,{rows:"6",cols:"20",readonly:"",value:t.value,placeholder:"Start typing....",class:"input_display"},null,8,["value"])]),_:1}),u("div",A,[u("div",E,[u("table",F,[(a(!0),s(c,null,h(t.layout,(d,y)=>(a(),s("tr",{key:y},[(a(!0),s(c,null,h(d,(n,v)=>(a(),s("td",{key:v},[o(p,{style:{"text-transform":"none"},strong:"",onClick:P=>t.keypress(n),class:B("key__button ".concat(n.toLowerCase(),"_btn"))},{default:r(()=>[f(x(n),1)]),_:2},1032,["onClick","class"])]))),128))]))),128))])]),o(p,{onClick:e[0]||(e[0]=d=>t.keypress("space")),strong:"",style:{width:"100%"},shape:"round",size:"large"},{default:r(()=>[f(" Space ")]),_:1})])],64)}const R=O(N,[["render",K],["__scopeId","data-v-661413fc"]]);export{R as default};
