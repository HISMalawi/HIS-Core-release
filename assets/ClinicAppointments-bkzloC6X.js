import{d as a,I as p,L as o,cJ as r,F as l,V as d,cv as c,_ as m,r as s,o as f,c as h,w as u,b}from"./index-C6EjxQ0a.js";import{_}from"./ReportMixin.vue_vue_type_script_lang-w4VtTENp.js";import{R as x}from"./BaseTableReport-DivcG2Ui.js";import"./HisStandardForm-CHL0RBXf.js";const g=a({mixins:[_],components:{ReportTemplate:x,IonPage:p},data:()=>({title:"Booked clients",date:"",rows:[],appointments:{},columns:[[o.thTxt("ARV#"),o.thTxt("First name",{csvExportable:!1,pdfExportable:!0}),o.thTxt("Last name",{csvExportable:!1,pdfExportable:!0}),o.thTxt("Gender"),o.thTxt("birthdate"),o.thTxt("Outcome"),o.thTxt("Current Address",{csvExportable:!1,pdfExportable:!0}),o.thTxt("Actions",{csvExportable:!1,pdfExportable:!1})]]}),created(){this.report=new r,this.fields=[{id:"date",helpText:"Select date",type:l.TT_DATE_PICKER,defaultValue:()=>r.getSessionDate(),validation:e=>d.required(e),onValue:async e=>(this.report.setStartDate(e),this.appointments[e]||(this.appointments[e]=await this.report.getBookedAppointments(e)||[]),!0),config:{infoItems:e=>{var t;return[{label:"Appointments",value:((t=this.appointments[e])==null?void 0:t.length)||0}]}}}]},methods:{onPeriod(e){this.rows=[],this.period=e.date.label,this.setRows(this.appointments[e.date.value])},setRows(e){c(e).asc(t=>t.given_name).forEach(t=>{this.rows.push([this.tdARV(t.arv_number||"N/A"),o.td(t.given_name),o.td(t.family_name),o.td(this.formatGender(t.gender)),o.tdDate(t.birthdate),o.td(t.outcome),o.td("District: <br/> <b>".concat(t.district,"</b><br/>\n                        Village: <br/> <b>").concat(t.village,"</b><br/>\n                        Land-mark: <br/> <b>").concat(t.land_mark,"</b><br/>\n                        Cellphone: <br/> <b>").concat(t.cell_phone,"</b>")),o.tdBtn("Select",()=>this.confirmPatient(t.person_id))])})}}});function v(e,t,w,T,E,C){const n=s("report-template"),i=s("ion-page");return f(),h(i,null,{default:u(()=>[b(n,{title:e.title,period:e.period,rows:e.rows,fields:e.fields,columns:e.columns,showtitleOnly:!0,config:{showIndex:!1},encryptPDF:!0,reportPrefix:"Clinic",onReportConfiguration:e.onPeriod},null,8,["title","period","rows","fields","columns","onReportConfiguration"])]),_:1})}const V=m(g,[["render",v]]);export{V as default};
