System.register(["./stock_report_service-legacy-C9LosoVc.js","./ReportMixin.vue_vue_type_script_lang-legacy-Dge918Ae.js","./index-legacy-D1EyWbyq.js","./dynamic-import-helper-legacy-DYK5bIOV.js","./TableReportTemplate-legacy-B7H8_d5e.js","./MultiFieldDateHelper-legacy-CWf2uW0i.js","./KbLayouts-legacy-BKvPSxzZ.js","./HisKbConfigurations-legacy-vrLd9Pgz.js","./BasicReportTemplate-legacy-CCzmEXag.js","./Export-legacy-dCfnaBFd.js","./SIngleTouchField-legacy-25qOOxkK.js","./Pagination-legacy-zx7G8OyX.js","./HisStandardForm-legacy-Yzj84zTJ.js","./TouchScreenForm-legacy-Cz0UXr2y.js","./ToolbarMediumCard-legacy-DG4P2wyL.js","./Transformers-legacy-DhNYVLaS.js","./ViewPort-legacy-Dt6qML7b.js","./ReportErrors-legacy-CTsWmVCa.js"],(function(t,e){"use strict";var a,r,n,i,o,l,s,d,c,u,p,g,h,m,_,y;return{setters:[t=>{a=t.S},t=>{r=t._},t=>{n=t.d,i=t.L,o=t.V,l=t.cm,s=t.H,d=t.q,c=t._,u=t.r,p=t.o,g=t.c,h=t.w,m=t.b},t=>{_=t.F},t=>{y=t.R},null,null,null,null,null,null,null,null,null,null,null,null,null],execute:function(){const e={textAlign:"right",paddingRight:".5rem"},T=n({mixins:[r],components:{ReportTemplate:y},data:()=>({title:"Audit Trail",rows:[],columns:[[i.thTxt("Medication"),i.thTxt("Transaction type"),i.thTxt("Transaction date"),i.thTxt("Net Quantity",{style:e})]],fields:[{id:"start_date",helpText:"Start Date",type:_.TT_FULL_DATE,validation:t=>o.required(t),computedValue:t=>t.value},{id:"end_date",helpText:"End Date",type:_.TT_FULL_DATE,validation:t=>o.required(t),computedValue:t=>t.value}]}),methods:{async onPeriod(t,r){this.rows=[],this.report=new a,this.report.setStartDate(r.start_date),this.report.setEndDate(r.end_date),this.period=this.report.getDateIntervalPeriod(),this.report.loadTrail().then((t=>{t.forEach((t=>{this.rows.push([i.td(t.drug_name),i.td(t.transaction_type),i.tdDate(t.transaction_date),i.tdLink(l(Math.trunc(Math.abs(t.cum_per_day_stock_commited))),(async()=>{const a=await this.report.getTrailDetails(t.transaction_date,t.drug_id,t.transaction_type);this.drilldownData(`${t.drug_name} ${t.transaction_type.toLowerCase()} on ${s.toStandardHisDisplayFormat(t.transaction_date)}`,[[i.thTxt("Product Code"),i.thTxt("Batch Number"),i.thTxt("Medication"),i.thTxt("Amount Per Unit"),i.thTxt("Total Tins/Pallets",{style:e})]],a.map((t=>[i.td(t.product_code),i.td(t.batch_number),i.td(t.drug_name),i.td(t.pack_size),i.tdNum(Math.abs(Math.trunc(t.amount_committed_to_stock/t.pack_size||1)))])),!1)}),{style:{textAlign:"right",paddingRight:".5rem"}})])}))})).catch((t=>{d(t)}))}}});t("default",c(T,[["render",function(t,e,a,r,n,i){const o=u("report-template"),l=u("ion-page");return p(),g(l,null,{default:h((()=>[m(o,{title:t.title,rows:t.rows,paginated:!0,period:t.period,fields:t.fields,columns:t.columns,onReportConfiguration:t.onPeriod},null,8,["title","rows","period","fields","columns","onReportConfiguration"])])),_:1})}]]))}}}));
