System.register(["./ReportMixin.vue_vue_type_script_lang-legacy-BV1zhma7.js","./tx_report_service-legacy-B5-Mi2No.js","./TableReportTemplate-legacy-BFFBqjGk.js","./index-legacy-Brqe4EI3.js","./BasicReportTemplate-legacy-Qc-Ywd9S.js","./Export-legacy-HAUD0Wvp.js","./Pagination-legacy-BEdof1Aa.js","./HisStandardForm-legacy-CygYTnNn.js","./ReportErrors-legacy-1oXn_JBt.js"],(function(t,e){"use strict";var r,s,o,i,a,l,n,d,u,c,h,g,p;return{setters:[t=>{r=t._},t=>{s=t.T},t=>{o=t.R},t=>{i=t.d,a=t.L,l=t.ae,n=t.cQ,d=t._,u=t.r,c=t.o,h=t.c,g=t.w,p=t.b},null,null,null,null,null],execute:function(){const e=i({mixins:[r],components:{ReportTemplate:o},data:()=>({title:"TX RTT Report",cohort:{},rows:[],columns:[[a.thTxt("Age group"),a.thTxt("Gender"),a.thTxt("Returned <3 mo"),a.thTxt("Returned 3-5 mo"),a.thTxt("Returned 6+ mo")]],aggregated:[]}),created(){this.fields=this.getDateDurationFields()},methods:{async onPeriod(t,e){this.rows=[],this.aggregated=[],this.report=new s,this.report.setStartDate(e.start_date),this.report.setEndDate(e.end_date),this.report.setOccupation(e.occupation),this.period=this.report.getDateIntervalPeriod(),this.cohort=await this.report.getClinicTxRtt(),await this.setRows("F"),await this.setRows("M"),this.setMaleTotalsRow(),await this.setFemaleRows()},drillData(t,e,r,s){return this.aggregated.push({gender:r,ageGroup:e,column:s,data:t}),this.drill(t,`${e} (${r}s) ${s}`)},setMaleTotalsRow(){const t=t=>this.drill(this.aggregated.filter((e=>"Male"===e.gender&&e.column===t)).reduce(((t,e)=>t.concat(e.data)),[]),`All Male ${t}`);this.rows.push([a.td("All"),a.td("Male"),t("Returned <3 mo"),t("Returned 3-5 mo"),t("Returned 6+ mo")])},async setFemaleRows(){const t=this.aggregated.filter((t=>t.gender.match(/female/i))).reduce(((t,e)=>t.concat(e.data)),[]),e=await this.report.getMaternalStatus(l.uniq(t)),r=e.FBf.concat(e.FP),s=t=>this.aggregated.filter((t=>t.gender.match(/female/i))).filter((e=>e.column===t)).reduce(((t,e)=>l.uniq(t.concat(e.data))),[]),o=(t,r)=>this.drill(s(r).filter((r=>e[t].includes(r))),`All ${r}`),i=t=>this.drill(s(t).filter((t=>!r.includes(t))),`All ${t}`);this.rows.push([a.td("All"),a.td("FP"),o("FP","Returned <3 mo"),o("FP","Returned 3-5 mo"),o("FP","Returned 6+ mo")]),this.rows.push([a.td("All"),a.td("FNP"),i("Returned <3 mo"),i("Returned 3-5 mo"),i("Returned 6+ mo")]),this.rows.push([a.td("All"),a.td("FBF"),o("FBf","Returned <3 mo"),o("FBf","Returned 3-5 mo"),o("FBf","Returned 6+ mo")])},async setRows(t){const e=(t,e)=>t.filter((t=>e(t.months))).map((t=>t.patient_id));for(const r in n){const s=n[r],o=this.formatGender(t);if(s in this.cohort){const r=this.cohort[s][t],i=t=>e(r,t);this.rows.push([a.td(s),a.td(o),this.drillData(i((t=>t<3)),s,o,"Returned <3 mo"),this.drillData(i((t=>t>=3&&t<=5)),s,o,"Returned 3-5 mo"),this.drillData(i((t=>t>=6)),s,o,"Returned 6+ mo")])}else this.rows.push([a.td(s),a.td(o),a.td(0),a.td(0),a.td(0)])}}}});t("default",d(e,[["render",function(t,e,r,s,o,i){const a=u("report-template"),l=u("ion-page");return c(),h(l,null,{default:g((()=>[p(a,{title:t.title,period:t.period,rows:t.rows,fields:t.fields,columns:t.columns,config:{showIndex:!0},reportPrefix:"Clinic",onReportConfiguration:t.onPeriod},null,8,["title","period","rows","fields","columns","onReportConfiguration"])])),_:1})}]]))}}}));
