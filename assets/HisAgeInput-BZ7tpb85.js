import g from"./BaseTextInput-R_3uIRWn.js";import{d as k,aR as T,bW as I,W as $,a0 as A,a1 as D,dw as w,dr as B,eE as C,aV as R,bo as r,ag as d,bF as E,a6 as H,ab as t,u,B as m,x as i,w as n,E as c,C as K,v as N,z as F,Z as L}from"./index-CyYd6aWW.js";import{_ as O}from"./FieldMixin.vue_vue_type_script_lang-DVMlEpjU.js";const x=k({components:{BaseInput:g,HisKeyboard:T,ViewPort:I,IonItem:$,IonList:A,IonLabel:D,IonRadio:w,IonRadioGroup:B},mixins:[O],data:()=>({value:"",selectedTimeUnit:"",timeUnits:[],keyboard:C}),mounted(){this.init()},activated(){this.init()},methods:{init(){this.timeUnits=["Hours","Days","Weeks","Months","Years"],Array.isArray(this.config.excludeUnits)&&(this.timeUnits=this.timeUnits.filter(e=>!this.config.excludeUnits.includes(e))),!this.selectedTimeUnit&&this.timeUnits.includes(this.config.defaultUnit)&&(this.selectedTimeUnit=this.config.defaultUnit),this.$emit("onFieldActivated",this)},clearValue(){this.value="",this.selectedTimeUnit=""},onKbValue(e){this.value=e},keypress(e){this.value=R(e,this.value)},emitValue(e,s){if(!(e&&s))this.$emit("onValue",null);else{const l="".concat(e," ").concat(s),o=r(d.sessionDate()).subtract(parseInt("".concat(e)),s);this.$emit("onValue",e?{label:l,value:l,other:{value:e,timeUnit:s,monthsAgoInt:r(d.sessionDate()).diff(o,"month"),daysAgoInt:r(d.sessionDate()).diff(o,"day"),date:o.format(E)}}:null)}}},watch:{value(e){this.emitValue(e,this.selectedTimeUnit)},selectedTimeUnit(e){this.emitValue(this.value,e)}}});function M(e,s,l,o,P,S){const p=t("base-input"),_=t("ion-radio"),h=t("ion-label"),f=t("ion-item"),b=t("ion-radio-group"),U=t("ion-list"),v=t("view-port"),y=t("his-keyboard");return u(),m(c,null,[i(v,null,{default:n(()=>[i(p,{value:e.value,onOnValue:e.onKbValue},null,8,["value","onOnValue"]),i(U,{class:"view-port-content"},{default:n(()=>[i(b,{modelValue:e.selectedTimeUnit,"onUpdate:modelValue":s[0]||(s[0]=a=>e.selectedTimeUnit=a)},{default:n(()=>[(u(!0),m(c,null,K(e.timeUnits,(a,V)=>(u(),N(f,{class:"his-md-text",key:V},{default:n(()=>[i(_,{slot:"start",value:a},null,8,["value"]),i(h,null,{default:n(()=>[F(L(a),1)]),_:2},1024)]),_:2},1024))),128))]),_:1},8,["modelValue"])]),_:1})]),_:1}),i(y,{kbConfig:e.keyboard,onKeyPress:e.keypress},null,8,["kbConfig","onKeyPress"])],64)}const z=H(x,[["render",M]]);export{z as default};
