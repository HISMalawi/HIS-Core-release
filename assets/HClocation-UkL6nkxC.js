import{d as S,aj as T,l as V,j as K,I as N,k as P,i as $,f as w,m as B,aa as E,K as k,M as H,ak as x,S as U,ae as L,t as y,a2 as M,al as O,am as R,an as z,_ as A,r as n,o as d,c as _,w as t,b as s,u as p,z as C}from"./index-ox16Qeox.js";import{H as j}from"./HisKeyboard-CtGe8LVP.js";const F=S({name:"HC location",components:{BarcodeInput:T,IonContent:V,IonHeader:K,IonPage:N,IonTitle:P,IonToolbar:$,IonButton:w,IonFooter:B,HisKeyboard:j},setup(){const{activePlatformProfile:e}=E(),o=k(""),l=k(""),f=H(()=>e.value.scanner===z.CAMERA_SCANNER);async function r(){o.value.includes("$")||(o.value+="$");const a=await U.getJson("locations/".concat(o.value));if(L.isEmpty(a))y("Invalid location");else{const u=a;sessionStorage.userLocation=u.name;try{await M().setLocation()}catch(b){return y("Unable to set facility UUID. Please try again!")}O.push("/")}l.value=o.value,o.value=""}function m(a){o.value=a}function i(a){o.value=R(a,o.value),console.log("barcode",o.value)}async function c(a){o.value=a,await r()}return{onbarcodeText:m,onScan:c,onKbClick:i,searchLocation:r,useVirtualKeyboard:f,clearValue:l,barcodeText:o,NUMBERS:x}}});function D(e,o,l,f,r,m){const i=n("ion-title"),c=n("ion-toolbar"),a=n("ion-header"),u=n("barcode-input"),b=n("ion-content"),g=n("his-keyboard"),v=n("ion-button"),h=n("ion-footer"),I=n("ion-page");return d(),_(I,null,{default:t(()=>[s(a,{translucent:!0},{default:t(()=>[s(c,null,{default:t(()=>[s(i,null,{default:t(()=>[p("Scan work-station location")]),_:1})]),_:1})]),_:1}),s(b,{class:"ion-padding-top"},{default:t(()=>[s(u,{class:"his-card",clearValue:e.clearValue,virtualText:e.barcodeText,onOnValue:e.onbarcodeText,onOnScan:e.onScan},null,8,["clearValue","virtualText","onOnValue","onOnScan"])]),_:1}),e.useVirtualKeyboard?(d(),_(g,{key:0,kbConfig:e.NUMBERS,onKeyPress:e.onKbClick},null,8,["kbConfig","onKeyPress"])):C("",!0),s(h,null,{default:t(()=>[s(c,{color:"dark"},{default:t(()=>[s(v,{color:"danger",size:"large","router-link":"/login"},{default:t(()=>[p(" Cancel ")]),_:1}),e.barcodeText?(d(),_(v,{key:0,slot:"end",color:"success",size:"large",onClick:e.searchLocation},{default:t(()=>[p(" Next ")]),_:1},8,["onClick"])):C("",!0)]),_:1})]),_:1})]),_:1})}const q=A(F,[["render",D],["__scopeId","data-v-3f50a6e8"]]);export{q as default};
