System.register(["./index-legacy-DCqMHtVA.js","./TableView-legacy-7Qk78yFq.js","./viral_load_report-legacy-BzBRt9z_.js","./ReportDateSelectionPrompt-legacy-C164IJ-9.js","./fuse-legacy-CQoBB3MK.js","./Export-legacy-DXJPpqRT.js","./HisKeyboard-legacy-D5WWwS7Y.js"],(function(e,a){"use strict";var t,n,l,r,o,i,s,u,d,c,g,f,p,b,v,m,D,_,y,h,L;return{setters:[e=>{t=e.d,n=e.I,l=e.ch,r=e.J,o=e.K,i=e.M,s=e.N,u=e.T,d=e.t,c=e.q,g=e.bK,f=e.ct,p=e._,b=e.r,v=e.o,m=e.c,D=e.w,_=e.b},e=>{y=e.v},e=>{h=e.V},e=>{L=e.D},null,null,null],execute:function(){const a=t({components:{IonPage:n,IonLoading:l,v2Datatable:y},setup(){const e=r(),a=o([]),t=o(""),n=o(!1),l=new h,p=o(!1),b=i((()=>[[{label:p.value?"Filing#":"ARV#",ref:"identifier"},{label:"First name",ref:"given_name",exportable:!1},{label:"Last name",ref:"family_name",exportable:!1},{label:"Gender",ref:"gender",value:e=>g(e.gender)},{label:"DOB",ref:"birthdate",value:e=>f(e.birthdate)},{label:"Date of VL Order",ref:"order_date",value:e=>f(e.order_date)},{label:"Action",ref:"patient_id",exportable:!1,tdClick:({data:a})=>e.push({path:`/patient/dashboard/${a.patient_id}`}),value:()=>"View client"}]])),v=async()=>{if(!l.startDate||!l.endDate)return d("Start date and end date required!");n.value=!0,a.value=[];try{a.value=await l.getVlCollection()}catch(e){c("Unable to generate report!")}n.value=!1},m=()=>L({onFinish:(e,a,n)=>{t.value=`Period (${n})`,l.startDate=e,l.endDate=a,v()}});return s((()=>{u.get("IS_ART_FILING_NUMBER_ENABLED").then((e=>p.value=e)),!a.value.length&&m()})),{reportData:a,isLoading:n,configure:m,generate:v,columns:b,period:t}}});e("default",p(a,[["render",function(e,a,t,n,l,r){const o=b("ion-loading"),i=b("v2Datatable"),s=b("ion-page");return v(),m(s,null,{default:D((()=>[_(o,{"is-open":e.isLoading,message:"Please wait..."},null,8,["is-open"]),_(i,{title:"VL Collection",subtitle:e.period,columns:e.columns,columnData:e.reportData,rowsPerPage:20,onConfigure:e.configure,onRefresh:()=>e.generate(),"report-prefix":"Clinic"},null,8,["subtitle","columns","columnData","onConfigure","onRefresh"])])),_:1})}]]))}}}));
