System.register(["./index-legacy--hxN_V8z.js","./TableView-legacy-Bw3PienI.js","./person_service-legacy-BPtn1P_Z.js"],(function(e,t){"use strict";var n,a,i,r,l,o,s,u,c,d,b,f,p,h,g,v,m;return{setters:[e=>{n=e.d,a=e.I,i=e.K,r=e.J,l=e.a8,o=e.ab,s=e.c9,u=e.bA,c=e.aW,d=e._,b=e.r,f=e.o,p=e.c,h=e.w,g=e.b},e=>{v=e.v},e=>{m=e.P}],execute:function(){const t=n({props:{title:{type:String,default:"Drilldown"},patientIdentifiers:{type:Object},onFinish:{type:Function}},components:{IonPage:a,v2Datatable:v},setup(e){const t=i(!0),n=i("-"),a=i([]),d=r(),b=[[{label:"ARV Number",ref:"identifier"},{label:"Gender",ref:"gender"},{label:"Birthdate",ref:"birthdate"},{label:"Action",ref:"patient_id",exportable:!1,tdClick:({data:e})=>d.push({path:`/patient/dashboard/${e.person_id}`}),value:()=>"View client"}]];return l((()=>e.patientIdentifiers),(async e=>{if(a.value=[],n.value="Total: 0",!e||!e.length)return;const i=o.chunk(e,1e3);for(const l of i){try{if(!t.value)break;const e=(await m.getPersons(l)).map((e=>({...e,birthdate:s(e.birthdate),gender:u(e.gender)})));a.value=[...a.value,...e]}catch(r){console.error(r)}n.value=`Total: ${a.value.length} of ${(e||[]).length}`,await c(100)}}),{immediate:!0}),{columns:b,subtitle:n,reportData:a,canLoadData:t,ITEMS_PER_PAGE:25,runFinishAction:function(){t.value=!1,"function"==typeof e.onFinish&&e.onFinish()}}}});e("A",d(t,[["render",function(e,t,n,a,i,r){const l=b("v2Datatable"),o=b("ion-page");return f(),p(o,null,{default:h((()=>[g(l,{title:e.title,subtitle:e.subtitle,columnData:e.reportData,columns:e.columns,"on-finish":e.runFinishAction,rowsPerPage:e.ITEMS_PER_PAGE},null,8,["title","subtitle","columnData","columns","on-finish","rowsPerPage"])])),_:1})}]]))}}}));
