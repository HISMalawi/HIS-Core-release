System.register(["./index-legacy-2OuOZQ1w.js","./Export-legacy-D1zUexdI.js","./Pagination-legacy-BgwkMHfb.js"],(function(e,t){"use strict";var a,o,r,s,n,l,i,c,u,d,p,g,P,h,m,F,w,y,f,b,v,C,R,I,S,_,D,V,k,x,T,B,N,U,A,E,$,z;return{setters:[e=>{a=e.d,o=e.i,r=e.ai,s=e.ac,n=e.ad,l=e.a7,i=e.r,c=e.aR,u=e.z,d=e.cE,p=e.ao,g=e.am,P=e.a,h=e.w,m=e.a6,F=e.e,w=e.ar,y=e.aN,f=e.cF,b=e.g,v=e.t,C=e.j,R=e.b,I=e.S,S=e.H,_=e.k,D=e.ba,V=e.l,k=e.I,x=e.a4,T=e.m,B=e.cz,N=e.ay,U=e.cA,A=e.a$},e=>{E=e.a,$=e.t},e=>{z=e.P}],execute:function(){var t=document.createElement("style");t.textContent=".reset_button[data-v-7bf42b5b]{height:5vh}.input_display[data-v-7bf42b5b]{text-align:left;font-size:var(--his-sm-font-size);width:30vw;height:5vh;margin-bottom:2%;border:solid 1px #9d9b9b;border-radius:5px;padding:9px;margin-top:2%}\n/*$vite$:1*/",document.head.appendChild(t);const O=a({emits:["onItemsPerPage","onSearchFilter","onItemsVLtype"],components:{IonItem:l,IonCol:n,IonRow:s,IonInput:r,IonButton:o},props:{customFilter:{type:Function},totalRowCount:{type:Number,default:15e3},disableSearchFilter:{type:Boolean,default:!1},disablePerPageFilter:{type:Boolean,default:!1},showPerPageFilter:{type:Boolean,default:!1}},setup(e,{emit:t}){const a=i(50),o=i(""),r=i("");async function s(e,t){(await u.create({component:d,backdropDismiss:!1,cssClass:"full-modal",componentProps:{dismissType:"modal",currentField:e,onFinish:t}})).present()}function n(e){t("onSearchFilter",e)}return c(a,(e=>{"number"==typeof e&&t("onItemsPerPage",e)}),{immediate:!0}),{reset:function(){o.value="",n("")},itemsPerPage:a,searchFilter:o,launchFilter:async function(){"function"==typeof e.customFilter&&(r.value=await e.customFilter())},launchKeyboard:s,launchSearcher:function(){s({id:"search",helpText:"Search table data",defaultValue:()=>o.value,type:p.TT_TEXT},(e=>{o.value=e?e.value:"",n(o.value)}))},customFilterValue:r}}}),H=["disabled"],L=["selected"],j=["selected"],q=["selected"],M=["selected"],G=["selected"],K=["selected"],X=["selected","value"],J=e("R",g(O,[["render",function(e,t,a,o,r,s){const n=w("ion-col"),l=w("ion-input"),i=w("ion-button"),c=w("ion-item"),u=w("ion-row");return R(),P(u,null,{default:h((()=>[e.showPerPageFilter?(R(),P(n,{key:0},{default:h((()=>[y(b("select",{class:"input_display","onUpdate:modelValue":t[0]||(t[0]=t=>e.itemsPerPage=t),disabled:e.disablePerPageFilter},[b("option",{selected:5===e.itemsPerPage,value:5},"5 rows/page",8,L),b("option",{selected:10===e.itemsPerPage,value:10},"10 rows/page",8,j),b("option",{selected:20===e.itemsPerPage,value:20},"20 rows/page",8,q),b("option",{selected:50===e.itemsPerPage,value:50},"50 rows/page",8,M),b("option",{selected:100===e.itemsPerPage,value:100},"100 rows/page",8,G),b("option",{selected:1e3===e.itemsPerPage,value:1e3},"1000 rows/page",8,K),b("option",{selected:e.itemsPerPage===e.totalRowCount,value:e.totalRowCount},"Show all rows("+v(e.totalRowCount)+")",9,X)],8,H),[[f,e.itemsPerPage]])])),_:1})):m("",!0),"function"==typeof e.customFilter?(R(),P(n,{key:1},{default:h((()=>[F(l,{class:"input_display",value:e.customFilterValue,onClick:e.launchFilter,placeholder:"Filter..."},null,8,["value","onClick"])])),_:1})):m("",!0),F(n,null,{default:h((()=>[F(c,{lines:"none"},{default:h((()=>[F(l,{disabled:e.disableSearchFilter,class:"input_display",value:e.searchFilter,onClick:e.launchSearcher,placeholder:"Search here..."},null,8,["disabled","value","onClick"]),e.searchFilter?(R(),P(i,{key:0,class:"reset_button",size:"large",onClick:t[1]||(t[1]=t=>e.reset()),color:"secondary"},{default:h((()=>[C(" Reset ")])),_:1})):m("",!0)])),_:1})])),_:1})])),_:1})}],["__scopeId","data-v-7bf42b5b"]])),Q=a({components:{IonCol:n,IonRow:s,Pagination:z,ReportTable:N,ReportFilter:J,HisFooter:B,IonPage:T,IonHeader:x,IonContent:k,IonToolbar:V,IonChip:D,IonFooter:_},props:{title:{type:String,required:!0},columns:{type:Array,required:!0},encryptPDF:{type:Boolean,default:!1},rows:{type:Array,default:()=>[]},rowParser:{type:Function},showFilters:{type:Boolean,default:!1},rowsPerPage:{type:Number},asyncRows:{type:Function},paginated:{type:Boolean,default:!1},customBtns:{type:Array,default:()=>[]},showReportStamp:{type:Boolean,default:!0},footerColor:{type:String,default:"dark"},customFileName:{type:String,default:""},canExport:{type:Boolean,default:!0},onFinish:{type:Function}},data:()=>({btns:[],isTableLoading:!1,searchFilter:"",itemsPerPage:50,currentPage:0,coreVersion:I.getCoreVersion(),tableRows:[],totalPages:0,activeColumns:[],activeRows:[],date:S.toStandardHisDisplayFormat(I.getSessionDate()),apiVersion:I.getApiVersion(),siteUUID:I.getSiteUUID()}),methods:{getFileName(){return this.customFileName?this.customFileName:this.title},pdfEncryptionData(){const e=I.getUserName();return{encryption:{userPassword:e,ownerPassword:e,userPermissions:["print"]}}}},created(){this.btns=[...this.customBtns,{name:"CSV",size:"large",slot:"start",color:"primary",visible:this.canExport,onClick:()=>{const{columns:e,rows:t}=U(this.activeColumns,this.activeRows,"csvMode");E(e,[...t,[`Date Created: ${this.date}`],[`HIS-Core Version: ${this.coreVersion}`],[`API Version: ${this.apiVersion}`],[`Site UUID: ${this.siteUUID}`],[`Generated by: ${I.getUserName()}`]],this.getFileName())}},{name:"PDF",size:"large",slot:"start",color:"primary",visible:this.canExport,onClick:async()=>{let e="pdfMode";this.encryptPDF&&(e="Secure PDF"===await A("Security warning","PDF may contain private data that will require a password to unlock","To access private data choose Secure PDF over Regular PDF",[{name:"Secure PDF",slot:"start",color:"success"},{name:"Regular PDF",slot:"start",color:"success"}],"his-danger-color")?"pdfMode":"ignorePDFColumnexport");const{columns:t,rows:a}=U(this.activeColumns,this.activeRows,e);$(t,a,this.getFileName(),!1,this.encryptPDF&&"ignorePDFColumnexport"!=e?this.pdfEncryptionData():{})}},{name:"Finish",size:"large",slot:"end",color:"success",visible:!0,onClick:()=>{if("function"==typeof this.onFinish)return this.onFinish();this.$router.push({path:"/"})}}]}}),W={class:"report-content"};e("D",g(Q,[["render",function(e,t,a,o,r,s){const n=w("ion-col"),l=w("ion-row"),i=w("ion-toolbar"),c=w("report-filter"),u=w("ion-header"),d=w("report-table"),p=w("ion-content"),g=w("pagination"),y=w("ion-chip"),f=w("ion-footer"),I=w("his-footer"),S=w("ion-page");return R(),P(S,null,{default:h((()=>[F(u,null,{default:h((()=>[F(i,null,{default:h((()=>[F(l,null,{default:h((()=>[F(n,null,{default:h((()=>[b("h1",null,v(e.title),1)])),_:1})])),_:1})])),_:1}),F(i,null,{default:h((()=>[F(c,{showPerPageFilter:e.showFilters||e.paginated,disableSearchFilter:e.isTableLoading,disablePerPageFilter:e.isTableLoading,totalRowCount:e.tableRows.length,onOnItemsPerPage:t[0]||(t[0]=t=>e.itemsPerPage=t),onOnSearchFilter:t[1]||(t[1]=t=>e.searchFilter=t)},null,8,["showPerPageFilter","disableSearchFilter","disablePerPageFilter","totalRowCount"])])),_:1})])),_:1}),F(p,null,{default:h((()=>[b("div",W,[F(d,{rows:e.rows,paginated:e.paginated,asyncRows:e.asyncRows,rowParser:e.rowParser,columns:e.columns,showFilters:e.showFilters,newPage:e.currentPage,searchFilter:e.searchFilter,rowsPerPage:e.itemsPerPage,onOnIsLoading:t[2]||(t[2]=t=>e.isTableLoading=t),onOnTableRows:t[3]||(t[3]=t=>e.tableRows=t),onOnPagination:t[4]||(t[4]=t=>e.totalPages=t.length),onOnActiveColumns:t[5]||(t[5]=t=>e.activeColumns=t),onOnActiveRows:t[6]||(t[6]=t=>e.activeRows=t)},null,8,["rows","paginated","asyncRows","rowParser","columns","showFilters","newPage","searchFilter","rowsPerPage"])])])),_:1}),F(f,null,{default:h((()=>[F(i,null,{default:h((()=>[!e.searchFilter&&e.paginated||!e.searchFilter&&e.totalPages>0&&e.paginated?(R(),P(g,{key:0,perPage:e.itemsPerPage,maxVisibleButtons:10,totalPages:e.totalPages,onOnChangePage:t[7]||(t[7]=t=>e.currentPage=t)},null,8,["perPage","totalPages"])):m("",!0)])),_:1}),e.showReportStamp?(R(),P(i,{key:0},{default:h((()=>[F(y,{color:"primary"},{default:h((()=>[C("Date Created: "),b("b",null,v(e.date),1)])),_:1}),F(y,{color:"primary"},{default:h((()=>[C("His-Core Version: "),b("b",null,v(e.coreVersion),1)])),_:1}),F(y,{color:"primary"},{default:h((()=>[C("API Version: "),b("b",null,v(e.apiVersion),1)])),_:1})])),_:1})):m("",!0)])),_:1}),F(I,{color:e.footerColor,btns:e.btns},null,8,["color","btns"])])),_:1})}]]))}}}));
