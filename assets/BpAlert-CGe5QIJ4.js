import{_ as b}from"./EncounterMixin.vue_vue_type_script_lang-v2aYCq6R.js";import{d as _,a9 as v,_ as C,I as D,a8 as T,Y as R,au as F,aN as I,bx as N,by as $,bs as h,dh as u,aa as O,c as S,w as n,af as i,a as l,b as r,K as e,E as m,aH as g,cw as B,a2 as d,C as o,M as f}from"./index-CMZASHAR.js";import{B as V}from"./htn_service-B9DGYTze.js";import{R as A}from"./RiskFactorModal-Cpt0i1Kz.js";import"./encounter_guidelines-CJXpBOk4.js";import"./GuidelineEngine-D6V1_Znr.js";import"./HisStandardForm-BCjM4-bc.js";const E=_({mixins:[b],components:{IonFooter:v,IonContent:C,IonPage:D,IonButton:T,IonToolbar:R},data:()=>({sysBp:0,dsBP:0,riskFactors:[],patientOnBpDrugs:!1,isPregnant:!1,systolicThreshold:145,diastolicTheshold:94}),methods:{async showRiskFactors(){const t=await F.create({component:A,backdropDismiss:!1,cssClass:"large-modal",componentProps:{factors:this.riskFactors}});t.present();const{data:s}=await t.onDidDismiss();I.isEmpty(s)||this.nextTask()},async getRiskFactors(){const s=N.getConceptsByCategory("risk factors").map(async a=>{const p=await $.getFirstValueCoded(this.patientID,a.name);return{concept:a.name,value:p}});return Promise.all(s)},recaptureBp(){this.$router.push("/art/encounters/vitals/".concat(this.patientID,"?vital_options=BP"))}},watch:{ready:{async handler(t){if(!t)return;await(await h.create({message:"Verifying Blood Pressure...",backdropDismiss:!1})).present();const a=new V(this.patientID,this.providerID);this.riskFactors=await this.getRiskFactors(),this.systolicThreshold=await u.systolicThreshold()||145,this.diastolicTheshold=await u.diastolicThreshold()||94,this.dsBP=await a.getDiastolicBp()||0,this.sysBp=await a.getSystolicBp()||0,this.patientOnBpDrugs=await a.onBpDrugs()||!1,this.isPregnant=this.patient.isChildBearing()&&await this.patient.isPregnant()||!1,h.dismiss()},immediate:!0}},computed:{patientName(){return this.ready?this.patient.getFullName():"Patient"},hasPressureReading(){return this.sysBp>0&&this.dsBP>0},highBP(){return(this.sysBp>=this.systolicThreshold&&this.dsBP>=this.diastolicTheshold||this.dsBP>=this.diastolicTheshold)&&!this.isPregnant}}}),x={key:0,class:"vertically-align ion-text-center"},M={style:{"font-weight":"bold"}},z={class:"name"},H={class:"bp"},L={key:1,class:"vertically-align ion-text-center"};function Y(t,s,a,p,j,G){const y=i("ion-content"),c=i("ion-button"),P=i("ion-toolbar"),w=i("ion-footer"),k=i("ion-page");return l(),S(k,null,{default:n(()=>[r(y,null,{default:n(()=>[s[6]||(s[6]=e("h1",{class:"ion-text-center"}," HTN Alert ",-1)),t.hasPressureReading?(l(),m("div",x,[g(e("h2",M," (Patient already on BP drugs) ",512),[[B,t.patientOnBpDrugs]]),e("h2",null,[e("span",z,d(t.patientName),1),s[1]||(s[1]=o(" has ")),g(e("span",null," a high ",512),[[B,t.highBP]]),s[2]||(s[2]=o(" blood pressure of ")),e("span",H,d(t.sysBp)+" / "+d(t.dsBP),1),s[3]||(s[3]=e("br",null,null,-1)),s[4]||(s[4]=e("span",null,[o(" Retesting BP is "),e("span",{style:{"font-weight":"bold",color:"#000000","text-decoration":"underline"}},"optional"),o(". "),e("br"),o(" Do you want to test BP? ")],-1))])])):f("",!0),t.hasPressureReading?f("",!0):(l(),m("div",L,s[5]||(s[5]=[o(" No BP Reading found "),e("br",null,null,-1),e("h1",null," Do you want to test BP? ",-1)])))]),_:1}),r(w,null,{default:n(()=>[r(P,{color:"dark"},{default:n(()=>[r(c,{onClick:s[0]||(s[0]=()=>t.hasPressureReading?t.showRiskFactors():t.nextTask()),size:"large",color:"danger",slot:"start"},{default:n(()=>s[7]||(s[7]=[o(" No ")])),_:1}),r(c,{onClick:t.recaptureBp,size:"large",color:"success",slot:"end"},{default:n(()=>s[8]||(s[8]=[o(" Yes ")])),_:1},8,["onClick"])]),_:1})]),_:1})]),_:1})}const Z=O(E,[["render",Y],["__scopeId","data-v-acbdfaed"]]);export{Z as default};
