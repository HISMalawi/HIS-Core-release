import{d as D,r as w,o as T,D as C,a as P,b as H,w as E,e as R,f as v,x as B,m as k,z as d,q as x}from"./index-DrAzzURJ.js";import{w as A,A as I}from"./v2utils-CJMcTe3d.js";import{C as O}from"./clinic_report_service-B7d2_8N8.js";import{v as S}from"./TableView-BsrlHHo8.js";import"./Export-CbpvcCGj.js";import"./index-CKDW3HWh.js";const $=D({__name:"ClinicHtnEnrollmentReport",setup(y){const b=B("reports.png"),o=w([]),l=w(""),r=new O,_={htn_enrollment:{_label:"HYPERTENSION (HTN) ENROLMENT",registered_with_hypertension:"Patients registered with hypertension",enrolled_and_active_in_care:"HTN Patients enrolled and active in care",who_have_defaulted_during_the_reporting_period:"HTN Patients who have defaulted during the reporting period",who_have_died:"HTN Patients who have died",who_have_transferred_out:"HTN Patients who have transferred out",who_have_stopped_htn_care:"HTN Patients who have stopped HTN care",with_a_visit_in_last_3_months:"HTN Patients with a visit in the last 3 months",with_a_visit_in_last_3_months_who_have_a_bp_measurement_recorded:"HTN Patients with a visit in the last 3 months who have a BP measurement recorded",with_a_visit_in_last_3_months_who_have_bp_below_140_90:"HTN Patients with a visit in the last 3 months who have BP below 140/90"},treatment_drug_classification:{_label:"TREATMENT BASED ON HTN DRUG CLASSIFICATION",diuretics:"Diuretics",beta_blockers:"Beta Blockers",calcium_channel_blockers:"Calcium Channel Blockers",ace_inhibitors:"ACE Inhibitors",angiotensin2_receptor_blockers:"Angiotensin 2 Receptor Blockers",vasodilator:"Vasodilator",others:"Others"}},h=(t,n)=>({ref:n,label:t,defaultValue:"",toValue:e=>e.length,tdClick:async e=>{e.refData.length&&(await d.create({component:I,backdropDismiss:!1,cssClass:"large-modal",componentProps:{title:e.column.label,subtitle:l,patientIdentifiers:e.refData,onFinish:()=>d.getTop().then(a=>a&&d.dismiss())}})).present()}}),N=[[{label:"#",ref:"index"},{label:"indicator",ref:"indicator"},h("Reporting period","reporting_period"),h("Cumulatively","cumulatively")]],c=(t={})=>{o.value=[];const n=e=>{let a=1;Object.keys(_[e]).forEach(s=>{var m,f,g;if(s==="_label"){o.value.push({indicator:"<b>".concat(_[e][s],"</b>"),index:""});return}const i=(m=t==null?void 0:t[e])==null?void 0:m[s];o.value.push({index:a,indicator:_[e][s],reporting_period:(f=i==null?void 0:i.reporting_period)!=null?f:[],cumulatively:(g=i==null?void 0:i.cummulative)!=null?g:[]}),++a})};n("htn_enrollment"),n("treatment_drug_classification")},p=()=>A(async()=>{if(!(r.startDate&&r.endDate))return x("Start date and end date required!");c({}),c(await r.getHtnEnrollmentReport())});T(()=>{c(),u()});const u=()=>C({onFinish:(t,n,e,a)=>{a&&r.setOccupation(a),l.value="".concat(e),r.startDate=t,r.endDate=n,p()}});return(t,n)=>(H(),P(v(k),null,{default:E(()=>[R(S,{title:"HTN Enrollment Report","icon-url":v(b),subtitle:l.value,columns:N,columnData:o.value,rowsPerPage:50,onConfigure:u,onRefresh:()=>p(),"report-prefix":"Clinic"},null,8,["icon-url","subtitle","columnData","onRefresh"])]),_:1}))}});export{$ as default};
