System.register(["./index-legacy-CNrLGT3P.js","./TableView-legacy-DSuuxKFH.js","./ReportDateSelectionPrompt-legacy-DN4Nhexe.js","./fuse-legacy-CQoBB3MK.js","./HisKeyboard-legacy-DlfcKdJX.js"],(function(e,a){"use strict";var t,l,n,r,i,o,s,d,u,f,b,c,m,g,h,p,v,_,T,D;return{setters:[e=>{t=e.d,l=e.I,n=e.cm,r=e.J,i=e.K,o=e.dE,s=e.N,d=e.af,u=e.t,f=e.q,b=e.F,c=e.ct,m=e._,g=e.r,h=e.o,p=e.c,v=e.w,_=e.b},e=>{T=e.v},e=>{D=e.D},null,null],execute:function(){const a=t({components:{IonPage:l,IonLoading:n,v2Datatable:T},setup(){const e=r(),a=i([]),t=i(""),l=i(!1),n=new o(""),m=i([]),g=i("No report selected!"),h=i([]),p=async()=>{if(!n.startDate||!n.endDate)return u("Start date and end date required!");l.value=!0,a.value=[];try{a.value=await n.retrieveDataCleaningTool()}catch(e){f("Unable to generate report!")}l.value=!1},v=()=>({label:"Action",ref:"patient_id",value:()=>"View client",tdClick:({data:a})=>{a?.patient_id&&e.push(`/patients/confirm?person_id=${a.patient_id}`)}}),_=[[{ref:"identifier",label:"ID"},{ref:"given_name",label:"First name"},{ref:"family_name",label:"Last name"},{ref:"gender",label:"Gender"},{ref:"birthdate",label:"Birthdate",toValue:e=>c(e)},v()]],T=()=>D({additionalFields:[{id:"data_cleaning_tool",helpText:"Select data cleaning tool",type:b.TT_SELECT,requireNext:!1,isRequired:()=>!0,options:()=>[{label:"Incomplete visits",value:"INCOMPLETE VISITS",other:{columns:[[{ref:"identifier",label:"ID"},{ref:"given_name",label:"First name"},{ref:"family_name",label:"Last name"},{ref:"gender",label:"Gender"},{ref:"birthdate",label:"Birthdate",toValue:e=>c(e)},{ref:"visit_date",label:"Visit date",toValue:e=>c(e)},v()]]}},{label:"Missing Linkage Number",value:"MISSING LINKAGE",other:{columns:_}},{label:"Partner status: <14 years with partner details",value:"PARTNER STATUS",other:{columns:_}},{label:"Test date earlier than birthdate",value:"TEST DATE EARLIER THAN BIRTHDATE",other:{columns:[[{ref:"identifier",label:"ID"},{ref:"given_name",label:"First name"},{ref:"family_name",label:"Last name"},{ref:"gender",label:"Gender"},{ref:"birthdate",label:"Birthdate",toValue:e=>c(e)},{ref:"test_date",label:"Test date",toValue:e=>c(e)},v()]]}},{label:"Duplicate Encounters",value:"DUPLICATE ENCOUNTERS",other:{columns:[[{ref:"identifier",label:"ID"},{ref:"given_name",label:"First name"},{ref:"family_name",label:"Last name"},{ref:"gender",label:"Gender"},{ref:"total",label:"Total"},{ref:"birthdate",label:"Birthdate",toValue:e=>c(e)},v()]]}},{label:"Missing Birthdate",value:"MISSING BIRTHDATE",other:{columns:[[{ref:"identifier",label:"ID"},{ref:"given_name",label:"First name"},{ref:"family_name",label:"Last name"},{ref:"gender",label:"Gender"},{ref:"birthdate",label:"Birthdate",toValue:e=>c(e)},{ref:"visit_date",label:"Visit date",toValue:e=>c(e)},v()]]}}]}],onFinish:(e,a,l,r)=>{t.value=`Period (${l})`,n.startDate=e,n.endDate=a,n.name=r.data_cleaning_tool.value,m.value=r.data_cleaning_tool.other.columns,g.value=r.data_cleaning_tool.label,p()}});return s((()=>!a.value.length&&T())),{Img:d,headerBadges:h,reportTitle:g,reportData:a,isLoading:l,configure:T,generate:p,columns:m,period:t}}});e("default",m(a,[["render",function(e,a,t,l,n,r){const i=g("ion-loading"),o=g("v2Datatable"),s=g("ion-page");return h(),p(s,null,{default:v((()=>[_(i,{"is-open":e.isLoading,message:"Please wait..."},null,8,["is-open"]),_(o,{iconUrl:e.Img("sys-setting.png"),title:e.reportTitle,subtitle:e.period,columns:e.columns,columnData:e.reportData,rowsPerPage:20,onConfigure:e.configure,onRefresh:()=>e.generate()},null,8,["iconUrl","title","subtitle","columns","columnData","onConfigure","onRefresh"])])),_:1})}]]))}}}));
