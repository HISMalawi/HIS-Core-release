System.register(["./index-legacy-X--GYU37.js","./ReportMixin.vue_vue_type_script_lang-legacy-D4pyLDml.js","./TableReportTemplate-legacy-BGf2T7cz.js","./dynamic-import-helper-legacy-DYK5bIOV.js","./MultiFieldDateHelper-legacy-CxOWifLo.js","./KbLayouts-legacy-BKvPSxzZ.js","./HisKbConfigurations-legacy-vrLd9Pgz.js","./BasicReportTemplate-legacy-BTnU3dPa.js","./Export-legacy-DuqLSep7.js","./SIngleTouchField-legacy-DTkEGDmJ.js","./Pagination-legacy-C-UlluND.js","./HisStandardForm-legacy-DMJkhfrq.js","./TouchScreenForm-legacy-C_f8Ho2H.js","./ToolbarMediumCard-legacy-CdhT4OJW.js","./Transformers-legacy-DhNYVLaS.js","./ViewPort-legacy-1het9QhE.js","./ReportErrors-legacy-DSAcU8Yd.js"],(function(e,t){"use strict";var r,a,s,o,n,l,i,u,p,d,g,c,h,y,m;return{setters:[e=>{r=e.bD,a=e.d,s=e.I,o=e.L,n=e.V,l=e.ab,i=e._,u=e.r,p=e.o,d=e.c,g=e.w,c=e.b},e=>{h=e._},e=>{y=e.R},e=>{m=e.F},null,null,null,null,null,null,null,null,null,null,null,null,null],execute:function(){var t=(e=>(e.GENERAL="General",e.CHILDREN="Children",e.WOMEN="Women",e))(t||{});class T extends r{ageGroup;quarter;regenerate;constructor(){super(),this.quarter="",this.regenerate=!1,this.ageGroup="General"}setRegenerate(e){this.regenerate=e}getAgeGroup(){return this.ageGroup}setQuarter(e){this.quarter=e}setAgeGroup(e){this.ageGroup=e}getSurvivalAnalysis(){return this.getReport("cohort_survival_analysis",{quarter:this.quarter,regenerate:this.regenerate,date:this.date,age_group:this.ageGroup,program_id:this.programID})}}const f={style:{borderRight:"5px solid black !important"}},v=a({mixins:[h],components:{ReportTemplate:y,IonPage:s},data:()=>({title:"Survival analysis report",totalClients:[],rows:[],columns:[[o.thTxt("Reg cohort"),o.thTxt("Interval (months)"),o.thTxt("Sub group"),o.thTxt("Total Reg (database)"),o.thTxt("Total Reg (Confirmed)",f),o.thTxt("Alive"),o.thTxt("Died"),o.thTxt("Defaulted"),o.thTxt("Stopped"),o.thTxt("TO"),o.thTxt("Unknown")]]}),created(){this.fields=[...this.getDateDurationFields(!0,!1,17),{id:"group",helpText:"Select sub-group",type:m.TT_SELECT,validation:e=>n.required(e),options:()=>[{label:"General",value:t.GENERAL},{label:"Children",value:t.CHILDREN},{label:"Option B+",value:t.WOMEN}]}]},methods:{async onPeriod({quarter:e,group:t},r,a=!1){this.rows=[],this.period=e.label,this.report=new T,this.report.setOccupation(r.occupation),this.report.setRegenerate(a),this.report.setQuarter(e.label),this.report.setAgeGroup(t.value);const s=await this.report.getSurvivalAnalysis();this.title=`Survival analysis report ${t.label}`,this.rows=this.getRows(s)},getRows(e){return Object.keys(e).filter((t=>!l.isEmpty(e[t]))).sort(((e,t)=>{const r=e.split(" ")[1],a=t.split(" ")[1];return parseInt(r)-parseInt(a)})).map((t=>{const r=e[t];let a=0,s=0;const n={"On antiretrovirals":0,Defaulted:0,"Patient died":0,"Treatment stopped":0,"Patient transferred out":0,unknown:0};if(!l.isEmpty(r)){for(const e in r){const t=r[e];for(const r in t){const o=t[r];a=parseInt(r),e in n?n[e]=o:n.unknown=o,s+=o}}return[o.td(t),o.td(a),o.td(this.report.getAgeGroup()),o.td(s),o.td("",f),o.td(n["On antiretrovirals"]),o.td(n["Patient died"]),o.td(n.Defaulted),o.td(n["Treatment stopped"]),o.td(n["Patient transferred out"]),o.td(n.unknown)]}}))}}});e("default",i(v,[["render",function(e,t,r,a,s,o){const n=u("report-template"),l=u("ion-page");return p(),d(l,null,{default:g((()=>[c(n,{title:e.title,period:e.period,rows:e.rows,fields:e.fields,columns:e.columns,config:{showIndex:!1},reportPrefix:"MoH",hasServerSideCaching:!0,onReportConfiguration:e.onPeriod},null,8,["title","period","rows","fields","columns","onReportConfiguration"])])),_:1})}]]))}}}));
