import{d as p,L as t,cF as h,ae as d,cS as l,_ as c,r as m,o as u,c as f}from"./index-DsVZSn5I.js";import{_ as w}from"./ReportMixin.vue_vue_type_script_lang-BsTETnkR.js";import{R as _}from"./TableReportTemplate-DJ6TfteA.js";import"./BasicReportTemplate-CKFm3gFD.js";import"./Export-DXkekofu.js";import"./Pagination-DM4zaX5n.js";import"./HisStandardForm-CBASeHGe.js";import"./ReportErrors-D3YcE4_Z.js";const R=p({mixins:[w],components:{ReportTemplate:_},data:()=>({title:"Clinic Retention report",totalClients:[],rows:[],cohort:{},columns:[[t.thTxt("Age group"),t.thTxt("Gender"),t.thTxt("Initiated one month"),t.thTxt("Completed one month"),t.thTxt("Initiated Three months"),t.thTxt("Completed Three months"),t.thTxt("Initiated Six months"),t.thTxt("Completed Six months")]]}),created(){this.fields=this.getDateDurationFields()},methods:{async onPeriod(e,o){this.rows=[],this.report=new h,this.report.setStartDate(o.start_date),this.report.setEndDate(o.end_date),this.report.setOccupation(o.occupation),this.period=this.report.getDateIntervalPeriod(),this.cohort=await this.report.getClientRentention(),this.setRows("F"),this.setRows("M")},getValue(e,o,n,i){try{const r=this.cohort[e][i].filter(s=>s.gender===o&&s.age_group===n).map(s=>s.patient_id);return this.drill(r)}catch(r){return console.warn(r),0}},setRows(e){const o=[...l,"Unknown"];for(const n in o){const i=o[n],r=[t.td(i),t.td(this.formatGender(e))];if(d.isEmpty(this.cohort))this.rows.push([...r,t.td(0),t.td(0),t.td(0),t.td(0),t.td(0),t.td(0)]);else{for(const s in this.cohort)r.push(this.getValue(parseInt(s),e,i,"all")),r.push(this.getValue(parseInt(s),e,i,"retained"));this.rows.push(r)}}}}});function g(e,o,n,i,r,s){const a=m("report-template");return u(),f(a,{title:e.title,period:e.period,rows:e.rows,fields:e.fields,columns:e.columns,onReportConfiguration:e.onPeriod,"report-prefix":"Clinic"},null,8,["title","period","rows","fields","columns","onReportConfiguration"])}const $=c(R,[["render",g]]);export{$ as default};
