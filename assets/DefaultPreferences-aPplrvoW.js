import{F as r}from"./dynamic-import-helper-Bsjrd6Ro.js";import{d as m,I as _,G as T,T as f,ab as h,cQ as n,V as p,cP as c,_ as g,r as l,o as P,c as S,w as D,b as L}from"./index-BPESSmpp.js";import{P as y}from"./patient_diagnosis_service-CbzhFLAY.js";import{H as E}from"./HisStandardForm-CxcKR3FF.js";import{a as I}from"./drug_prescription_service-Cyz8K5Pv.js";import"./TouchScreenForm-BjDI66hA.js";import"./ToolbarMediumCard-DnRdVW_r.js";import"./Transformers-BPPLlH12.js";import"./ViewPort-DixuDTZA.js";import"./drug_order_service-Cp6kc4x5.js";import"./drug_service-CAbpi_h6.js";const b=m({components:{HisStandardForm:E,IonPage:_},data:()=>({preference:"",fields:[]}),created(){this.preference=this.$route.name,this.fields=[...this.setTopTenDiagnosis(),...this.setTopTenDrugs()]},methods:{isProp(o){return!this.preference||o===this.preference},async onFinish(o,t){for(const e in t)await T.set(e,t[e]),f("Property has been updated",2e3);this.$router.back()},mapListToOptions(o){return h.isEmpty(o)?[]:o.map(t=>({label:t.name,value:t.name,other:t.concept_id,isChecked:!1})).sort((t,e)=>t.label<e.label?-1:t.label>e.label?1:0)},setTopTenDiagnosis(){const o=n.SET_TOP_10_DIAGNOSIS,t=e=>e.map(s=>s.value).join();return[{id:"primary_diagnosis",helpText:"Select top ten diagnosis",type:r.TT_INFINITE_SCROLL_MULTIPLE_SELECT,validation:e=>p.required(e),options:async(e,s="",i=1,a=10)=>this.mapListToOptions(await y.getDiagnosis(s,i,a)),computedValue:e=>t(e),condition:()=>this.isProp(o),defaultValue:()=>c.topTenDiagnosis(),config:{isFilterDataViaApi:!0,showKeyboard:!0}}]},setTopTenDrugs(){const o=n.SET_TOP_10_DRUGS,t=e=>e.map(s=>s.value).join();return[{id:"primary_drugs",helpText:"Select top ten drugs",type:r.TT_INFINITE_SCROLL_MULTIPLE_SELECT,validation:e=>p.required(e),options:async(e="",s=1,i=10)=>this.mapListToOptions(await I.getDrugs(e,s,i)),computedValue:e=>t(e),condition:()=>this.isProp(o),defaultValue:()=>c.topTenDiagnosis(),config:{isFilterDataViaApi:!0,showKeyboard:!0}}]}}});function F(o,t,e,s,i,a){const d=l("his-standard-form"),u=l("ion-page");return P(),S(u,null,{default:D(()=>[L(d,{fields:o.fields,onFinishAction:o.onFinish,skipSummary:!0},null,8,["fields","onFinishAction"])]),_:1})}const R=g(b,[["render",F]]);export{R as default};
