System.register(["./index-legacy-CZA-oEdM.js","./tx_report_service-legacy-C4JS_iW9.js","./TableView-legacy-B074XVYw.js","./v2utils-legacy-BX0xyZSt.js","./Export-legacy-DJeT-aNB.js","./index-legacy-D7SSAUEF.js"],(function(e,t){"use strict";var n,a,r,s,l,_,o,u,i,h,c,m,g,d,f,v,p,F;return{setters:[e=>{n=e.d,a=e.r,r=e.cc,s=e.t,l=e.u,_=e.v,o=e.w,u=e.x,i=e.y,h=e.cP,c=e.a5,m=e.aH,g=e.dq,d=e.aJ},e=>{f=e.T},e=>{v=e.v},e=>{p=e.s,F=e.w},null,null],execute:function(){e("default",n({__name:"ClinicTxRtt",setup(e){const t=m("reports.png"),n=a([]),x=a(""),b=new f,y=e=>({...e,toValue:e=>e.length,tdClick:async e=>{p({subtitle:x.value,patientIdentifiers:e.refData,title:`${e.data.age_group} ${r(e.data.gender)} ${e.column.label}`})}}),j=[[{label:"Age group",ref:"age_group"},{label:"Gender",ref:"gender",toValue:e=>r(e)},y({label:"Returned <3 mo",ref:"less_than_three_months"}),y({label:"Returned 3-5 mo",ref:"three_to_five_months"}),y({label:"Returned 6+ mo",ref:"more_than_six_months"})]],M=()=>F((async()=>{n.value=[];const e={M:{less_than_three_months:[],three_to_five_months:[],more_than_six_months:[]},F:{less_than_three_months:[],three_to_five_months:[],more_than_six_months:[]}},t=await b.getClinicTxRtt(),a=g.reduce(((n,a)=>t[a]?(["M","F"].forEach((r=>{t[a][r].forEach((t=>{const s=(l=t.months)<3?"less_than_three_months":l>=3&&l<=5?"three_to_five_months":l>=6?"more_than_six_months":"unknown";var l;n[r]={...n[r]??{},[a]:{...n[r]?.[a]??{less_than_three_months:[],three_to_five_months:[],more_than_six_months:[]},[s]:[...n[r]?.[a]?.[s]??[],t.patient_id]}},e[r]={...e[r],[s]:[...e[r]?.[s]??[],t.patient_id]}}))})),n):{M:{...n.M,[a]:{less_than_three_months:[],three_to_five_months:[],more_than_six_months:[]}},F:{...n.F,[a]:{less_than_three_months:[],three_to_five_months:[],more_than_six_months:[]}}}),{}),r=e=>Object.keys(a[e]).map((t=>({...a[e][t],age_group:t,gender:e})));n.value=[...r("F"),...r("M"),{age_group:"All",gender:"Male",...e.M}];const s=Object.values(e.F).flat(1),l=await b.getMaternalStatus(d.uniq(s)),_=l?.FP??[],o=l?.FBf??[],u=l?.FNP??[];n.value=[...n.value,{age_group:"All",gender:"FP",...Object.keys(e.F).reduce(((t,n)=>({...t,[n]:e.F[n].filter((e=>_.includes(e)))})),{})},{age_group:"All",gender:"FNP",...Object.keys(e.F).reduce(((t,n)=>({...t,[n]:e.F[n].filter((e=>u.includes(e)))})),{})},{age_group:"All",gender:"FBF",...Object.keys(e.F).reduce(((t,n)=>({...t,[n]:e.F[n].filter((e=>o.includes(e)))})),{})}]})),w=()=>h({onFinish:(e,t,n,a)=>{a&&b.setOccupation(a),x.value=`${n}`,b.startDate=e,b.endDate=t,M()}});return s((()=>!n.value.length&&w())),(e,a)=>(l(),_(i(c),null,{default:o((()=>[u(v,{"icon-url":i(t),subtitle:x.value,title:"TX RTT Report","report-prefix":"Clinic",columns:j,onConfigure:w,columnData:n.value,rowsPerPage:100,onRefresh:M},null,8,["icon-url","subtitle","columnData"])])),_:1}))}}))}}}));
