import g from"./BaseTextInput-DSCmpGCY.js";import{H as k}from"./HisKeyboard-kCuG2DTL.js";import{d as T,br as I,h as $,g as A,D,cS as H,cO as w,dQ as B,ap as C,aW as r,H as d,ba as K,_ as N,r as t,o as u,x as m,b as i,w as n,B as c,y as O,c as R,u as x,v as L}from"./index-BFVcutZq.js";import{_ as S}from"./FieldMixin.vue_vue_type_script_lang-CwvFuJwx.js";const E=T({components:{BaseInput:g,HisKeyboard:k,ViewPort:I,IonItem:$,IonList:A,IonLabel:D,IonRadio:H,IonRadioGroup:w},mixins:[S],data:()=>({value:"",selectedTimeUnit:"",timeUnits:[],keyboard:B}),mounted(){this.init()},activated(){this.init()},methods:{init(){this.timeUnits=["Hours","Days","Weeks","Months","Years"],Array.isArray(this.config.excludeUnits)&&(this.timeUnits=this.timeUnits.filter(e=>!this.config.excludeUnits.includes(e))),!this.selectedTimeUnit&&this.timeUnits.includes(this.config.defaultUnit)&&(this.selectedTimeUnit=this.config.defaultUnit),this.$emit("onFieldActivated",this)},clearValue(){this.value="",this.selectedTimeUnit=""},onKbValue(e){this.value=e},keypress(e){this.value=C(e,this.value)},emitValue(e,s){if(!(e&&s))this.$emit("onValue",null);else{const l="".concat(e," ").concat(s),o=r(d.sessionDate()).subtract(parseInt("".concat(e)),s);this.$emit("onValue",e?{label:l,value:l,other:{value:e,timeUnit:s,monthsAgoInt:r(d.sessionDate()).diff(o,"month"),daysAgoInt:r(d.sessionDate()).diff(o,"day"),date:o.format(K)}}:null)}}},watch:{value(e){this.emitValue(e,this.selectedTimeUnit)},selectedTimeUnit(e){this.emitValue(this.value,e)}}});function F(e,s,l,o,M,P){const p=t("base-input"),_=t("ion-radio"),h=t("ion-label"),f=t("ion-item"),b=t("ion-radio-group"),U=t("ion-list"),y=t("view-port"),v=t("his-keyboard");return u(),m(c,null,[i(y,null,{default:n(()=>[i(p,{value:e.value,onOnValue:e.onKbValue},null,8,["value","onOnValue"]),i(U,{class:"view-port-content"},{default:n(()=>[i(b,{modelValue:e.selectedTimeUnit,"onUpdate:modelValue":s[0]||(s[0]=a=>e.selectedTimeUnit=a)},{default:n(()=>[(u(!0),m(c,null,O(e.timeUnits,(a,V)=>(u(),R(f,{class:"his-md-text",key:V},{default:n(()=>[i(_,{slot:"start",value:a},null,8,["value"]),i(h,null,{default:n(()=>[x(L(a),1)]),_:2},1024)]),_:2},1024))),128))]),_:1},8,["modelValue"])]),_:1})]),_:1}),i(v,{kbConfig:e.keyboard,onKeyPress:e.keypress},null,8,["kbConfig","onKeyPress"])],64)}const Q=N(E,[["render",F]]);export{Q as default};
