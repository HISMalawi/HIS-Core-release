System.register(["./index-legacy-DtHsTz02.js"],(function(e,t){"use strict";var l,a,o,n,r,s,c,i,u,d,f,v,g,h,m,p,k,b,y,V,C,_,w,P,L,x,j,D,I,N,R,S,O,z,T,A,E;return{setters:[e=>{l=e.d,a=e.R,o=e.W,n=e.au,r=e.a1,s=e.a3,c=e.a4,i=e.r,u=e.ap,d=e.cP,f=e.aM,v=e.aJ,g=e.cQ,h=e.cR,m=e.cS,p=e.a6,k=e.ab,b=e.u,y=e.B,V=e.G,C=e.E,_=e.C,w=e.x,P=e.w,L=e.v,x=e.H,j=e.Z,D=e.b0,I=e.z,N=e.cT,R=e.a,S=e.cg,O=e.y,z=e.b3,T=e.a_,A=e.b2,E=e.bz}],execute:function(){var t=document.createElement("style");t.textContent="th[data-v-6173022f],td[data-v-6173022f]{border-collapse:collapse;min-width:160px;border:1px solid rgb(158,158,158)}td[data-v-6173022f]{font-weight:500;font-size:.8em;padding:.4em}.stick-report-header[data-v-6173022f]{position:sticky;top:0;z-index:1000}tr[data-v-6173022f]:nth-child(2n){background-color:#f0f0f0}.clickable-cell[data-v-6173022f]{color:#0645ad}.his-floating-keyboard[data-v-6173022f]{bottom:70px!important}\n/*$vite$:1*/",document.head.appendChild(t);const H=l({components:{IonToolbar:a,IonItem:o,IonIcon:n,IonLabel:r,IonButton:s,IonFooter:c},props:{columns:{type:Object,required:!0},columnData:{type:Array,default:()=>[]},rowsPerPage:{type:Number,default:10},defaultSortedColumn:{type:String},defaultSortOrder:{type:Object}},setup(e){const t=i([]),l=i(0),a=i(""),o=i("desc"),n=u((()=>{let e=t.value;return o.value&&a.value&&(e=d(t.value)[o.value]((e=>e.sortData[a.value]))),e})),r=u((()=>f.chunk(n.value,e.rowsPerPage).length)),s=u((()=>l.value+2<=r.value)),c=u((()=>l.value>0)),p=u((()=>f.chunk(n.value,e.rowsPerPage)[l.value])),k=l=>{l.forEach((l=>{const a={...l},o=e.columns.reduce(((e,t)=>e.concat(t)),[]).filter((e=>e.value||e.ref)).map((e=>{let t="";const o=l[e.ref];try{t=f.isEmpty(l)?"":"function"==typeof e.toValue?`${e.toValue(o)}`:"function"==typeof e.value?e.value(l):l[e.ref]||""}catch(n){t=e?.defaultValue||"_ERROR_",console.error(n)}return a[e.ref]=t,"function"==typeof e.sortValue&&(a[e.ref]=e.sortValue(o)),{column:e,refData:o,value:t,data:l}}));t.value.push({row:o,data:l,sortData:a,searchIndex:[...o,o.map((e=>e.value)).join(" ")]})}))};return v((()=>e.columnData),(n=>{if(t.value=[],!Array.isArray(n)||!n.length)return l.value=0,a.value=e.defaultSortedColumn??"",o.value=e.defaultSortOrder||"desc",void k(Array.from({length:0}).map((()=>({}))));k(n)}),{immediate:!0,deep:!0}),{first:()=>l.value=0,last:()=>l.value=r.value-1||0,next:()=>l.value+=1,prev:()=>l.value-=1,selectPage:()=>m((e=>{const t=parseInt(e);parseInt(e)<=r.value&&(l.value=t)}),{title:"Select page"}),sortColumn:e=>{a.value=e,o.value="asc"===o.value?"desc":"asc"},onClickTablecell:e=>{try{return void("function"==typeof e.column?.tdClick&&e.column?.tdClick(e))}catch(t){console.error(t)}},close:close,arrowUp:g,arrowDown:h,page:p,canNext:s,totalPages:r,sortOrder:o,canPrev:c,currentPage:l,columnSorted:a}}}),M={style:{width:"100%"}},$={class:"stick-report-header"},U=["colspan","rowspan","onClick"],B=["onClick"],F=["innerHTML"],q=p(H,[["render",function(e,t,l,a,o,n){const r=k("ion-icon"),s=k("ion-label"),c=k("ion-item"),i=k("ion-button"),u=k("ion-toolbar"),d=k("ion-footer");return b(),y(C,null,[V("div",null,[V("table",M,[V("thead",$,[(b(!0),y(C,null,_(e.columns,((t,l)=>(b(),y("tr",{key:l},[(b(!0),y(C,null,_(t,((t,l)=>(b(),y("th",{key:l,colspan:t?.span?.thColspan||1,rowspan:t?.span?.thRowspan||1,onClick:l=>e.sortColumn(t.ref)},[w(c,{lines:"none"},{default:P((()=>[e.columnSorted&&e.columnSorted===t.ref?(b(),L(r,{key:0,icon:"asc"===e.sortOrder?e.arrowUp:e.arrowDown},null,8,["icon"])):x("",!0),w(s,null,{default:P((()=>[V("b",null,j(t.label),1)])),_:2},1024)])),_:2},1024)],8,U)))),128))])))),128))]),V("tbody",null,[(b(!0),y(C,null,_(e.page,((t,l)=>(b(),y("tr",{key:l},[(b(!0),y(C,null,_(t.row,((t,l)=>(b(),y("td",{key:l,onClick:()=>e.onClickTablecell(t),class:D({"clickable-cell":t?.column?.tdClick})},[V("span",{innerHTML:t.value,class:"his-sm-text"},null,8,F)],10,B)))),128))])))),128))])])]),t[4]||(t[4]=V("p",null,null,-1)),w(d,null,{default:P((()=>[w(u,{color:"light"},{default:P((()=>[e.totalPages>1?(b(),L(i,{key:0,onClick:e.first,disabled:0===e.currentPage||e.totalPages<=2,size:"large",slot:"end"},{default:P((()=>t[0]||(t[0]=[I(" First ")]))),_:1},8,["onClick","disabled"])):x("",!0),e.totalPages>1?(b(),L(i,{key:1,onClick:e.prev,disabled:!e.canPrev,color:"light",size:"large",slot:"end"},{default:P((()=>t[1]||(t[1]=[I(" Prev ")]))),_:1},8,["onClick","disabled"])):x("",!0),e.totalPages>1?(b(),L(i,{key:2,onClick:e.selectPage,size:"large",slot:"end",color:"light"},{default:P((()=>[I(j(e.currentPage)+" / "+j(e.totalPages-1),1)])),_:1},8,["onClick"])):x("",!0),e.totalPages>1?(b(),L(i,{key:3,onClick:e.next,disabled:!e.canNext,color:"light",size:"large",slot:"end"},{default:P((()=>t[2]||(t[2]=[I(" Next ")]))),_:1},8,["onClick","disabled"])):x("",!0),e.totalPages>1?(b(),L(i,{key:4,onClick:e.last,disabled:e.currentPage+1>=e.totalPages||e.totalPages<=2,size:"large",slot:"end"},{default:P((()=>t[3]||(t[3]=[I(" Last ")]))),_:1},8,["onClick","disabled"])):x("",!0)])),_:1})])),_:1})],64)}],["__scopeId","data-v-6173022f"]]),G={key:0},J={key:1,class:"his-card ion-text-center his-lg-text"};e("default",l({__name:"HomeNotifications",setup(e){const{sortedNotifications:t,hasNotifications:l,clearNotification:a,openNotification:o}=N(),n=i("highVL"),s=R({highVL:[],rejectedVL:[],normalVL:[],initiatedData:{},stats:{}}),c=u((()=>[[{ref:"arv",label:"ARV #"},{ref:"accession",label:"Accession #"},{ref:"order_date",label:"Order Date",toValue:e=>`${S(e)}`},..."rejectedVL"===n.value?[{ref:"rejection_reason",label:"Rejection Reason"}]:[],{ref:"id",label:"View",toValue:()=>"View",tdClick:e=>o(e.data)},{ref:"id",label:"Clear",toValue:()=>"Clear",tdClick:e=>a(e.refData,(e=>{s[n.value]=s[n.value].filter((t=>t.id!=e))}))}]]));async function d(e,l=t.value){if(l.length&&s.initiatedData[e])return;let a=6e3;const o=f.chunk(l?.[0]?.vlMessageObs?.[e]??{},7);s.initiatedData[e]=l.length>0,s[e]=[];for(const t of o)s[e]=[...s[e],...t],await E(a),a=80}return v(t,(async e=>{d(n.value,e),setTimeout((()=>{const t=e?.[0]?.vlMessageObs??{};s.stats.highVL=(t.highVL??[]).length,s.stats.normalVL=(t.normalVL??[]).length,s.stats.rejectedVL=(t.rejectedVL??[]).length}),450)}),{immediate:!0,deep:!0}),(e,t)=>(b(),y("div",null,[O(l)?(b(),y("div",G,[w(O(A),{mode:"ios",modelValue:n.value,"onUpdate:modelValue":t[3]||(t[3]=e=>n.value=e),class:"ion-justify-content-center"},{default:P((()=>[w(O(z),{onClick:t[0]||(t[0]=e=>d("highVL")),value:"highVL"},{default:P((()=>[w(O(r),{class:"his-sm-text",style:{"font-weight":"bold"}},{default:P((()=>t[4]||(t[4]=[I("High Vl")]))),_:1}),w(O(T),{color:"danger"},{default:P((()=>[I(j(s.stats?.highVL??"-"),1)])),_:1})])),_:1}),w(O(z),{onClick:t[1]||(t[1]=e=>d("rejectedVL")),value:"rejectedVL"},{default:P((()=>[w(O(r),{class:"his-sm-text",style:{"font-weight":"bold"}},{default:P((()=>t[5]||(t[5]=[I("Rejected")]))),_:1}),w(O(T),{color:"warning"},{default:P((()=>[I(j(s.stats?.rejectedVL??"-"),1)])),_:1})])),_:1}),w(O(z),{onClick:t[2]||(t[2]=e=>d("normalVL")),value:"normalVL"},{default:P((()=>[w(O(r),{class:"his-sm-text",style:{"font-weight":"bold"}},{default:P((()=>t[6]||(t[6]=[I("Normal Results")]))),_:1}),w(O(T),{color:"success"},{default:P((()=>[I(j(s.stats?.normalVL??"-"),1)])),_:1})])),_:1})])),_:1},8,["modelValue"]),t[7]||(t[7]=V("p",null,null,-1)),(b(),L(q,{key:n.value,columns:c.value,"column-data":s[n.value],"rows-per-page":7},null,8,["columns","column-data"]))])):(b(),y("div",J," No notifications "))]))}}))}}}));
