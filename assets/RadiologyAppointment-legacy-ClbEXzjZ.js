System.register(["./index-legacy-CA6M7ipO.js","./HisStandardForm-legacy-a9YJRGaH.js","./EncounterMixin.vue_vue_type_script_lang-legacy-qUwf12Yn.js","./appointment_service-legacy-C2qV7ECG.js","./encounter_guidelines-legacy-Bcz_Mw7r.js","./GuidelineEngine-legacy-KsvQuFdF.js"],(function(t,e){"use strict";var n,i,a,s,o,p,r,d,l,c,m;return{setters:[t=>{n=t.d,i=t.bC,a=t.ad,s=t.ae,o=t.aa,p=t.af,r=t.a,d=t.c},t=>{l=t.H},t=>{c=t._},t=>{m=t.A},null,null],execute:function(){const e=n({mixins:[c],components:{HisStandardForm:l},data:()=>({appointmentDate:"",maxAppointmentDate:"",appointment:{}}),watch:{ready:{async handler(t){t&&(this.appointment=new m(this.patientID,this.providerID),this.init())},immediate:!0}},methods:{async onFinish(t,e){await this.appointment.createEncounter(),await this.appointment.saveObservationList(await this.resolveObs(e,"obs")),this.gotoPatientDashboard()},init(){this.appointmentDate=m.getSessionDate(),this.maxAppointmentDate=i(this.appointmentDate).add(100,"year").format("YYYY-MM-DD"),this.fields=this.getFields()},getFields(){return[{id:"set_appointment",helpText:"Appointments booking",type:a.TT_APPOINTMENTS_ENTRY,validation:t=>s.required(t),computedValue:t=>({tag:"obs",obs:[this.appointment.buildValueDate("Appointment date",t.value)]}),config:{patientAge:this.patient.getAge(),hideRunoutDate:!0,hiddenFooterBtns:["Clear"]},options:()=>[{label:"",value:"",other:{runOutDate:this.maxAppointmentDate,appointmentDate:this.appointmentDate}}]}]}}});t("default",o(e,[["render",function(t,e,n,i,a,s){const o=p("his-standard-form");return r(),d(o,{fields:t.fields,onFinishAction:t.onFinish,skipSummary:!0,cancelDestinationPath:t.cancelDestination},null,8,["fields","onFinishAction","cancelDestinationPath"])}]]))}}}));
