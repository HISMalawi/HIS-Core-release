System.register(["./index-legacy-CHWOUhn2.js","./Export-legacy-B3zQASob.js","./Pagination-legacy-CTa0cSFC.js"],(function(e,t){"use strict";var o,a,r,s,l,n,i,c,u,d,p,g,h,P,m,F,w,y,b,f,v,C,R,I,S,_,D,V,k,x,T,B,N,U,A,O,E,z;return{setters:[e=>{o=e.d,a=e.h,r=e.ar,s=e.aq,l=e.bl,n=e.f,i=e.K,c=e.ab,u=e.O,d=e.bN,p=e.F,g=e._,h=e.r,P=e.o,m=e.c,F=e.w,w=e.a3,y=e.A,b=e.v,f=e.bO,v=e.z,C=e.b,R=e.u,I=e.R,S=e.bw,_=e.I,D=e.j,V=e.l,k=e.i,x=e.au,T=e.m,B=e.S,N=e.H,U=e.bA,A=e.ah},e=>{O=e.t,E=e.a},e=>{z=e.P}],execute:function(){var t=document.createElement("style");t.textContent=".reset_button[data-v-7bf42b5b]{height:5vh}.input_display[data-v-7bf42b5b]{text-align:left;font-size:var(--his-sm-font-size);width:30vw;height:5vh;margin-bottom:2%;border:solid 1px #9d9b9b;border-radius:5px;padding:9px;margin-top:2%}\n",document.head.appendChild(t);const H=o({emits:["onItemsPerPage","onSearchFilter","onItemsVLtype"],components:{IonItem:a,IonCol:r,IonRow:s,IonInput:l,IonButton:n},props:{customFilter:{type:Function},totalRowCount:{type:Number,default:15e3},disableSearchFilter:{type:Boolean,default:!1},disablePerPageFilter:{type:Boolean,default:!1},showPerPageFilter:{type:Boolean,default:!1}},setup(e,{emit:t}){const o=i(50),a=i(""),r=i("");async function s(e,t){(await u.create({component:d,backdropDismiss:!1,cssClass:"full-modal",componentProps:{dismissType:"modal",currentField:e,onFinish:t}})).present()}function l(e){t("onSearchFilter",e)}return c(o,(e=>{"number"==typeof e&&t("onItemsPerPage",e)}),{immediate:!0}),{reset:function(){a.value="",l("")},itemsPerPage:o,searchFilter:a,launchFilter:async function(){"function"==typeof e.customFilter&&(r.value=await e.customFilter())},launchKeyboard:s,launchSearcher:function(){s({id:"search",helpText:"Search table data",defaultValue:()=>a.value,type:p.TT_TEXT},(e=>{a.value=e?e.value:"",l(a.value)}))},customFilterValue:r}}}),L=["disabled"],$=["selected"],j=["selected"],q=["selected"],M=["selected"],K=["selected"],G=["selected"],X=["selected","value"],J=e("R",g(H,[["render",function(e,t,o,a,r,s){const l=h("ion-col"),n=h("ion-input"),i=h("ion-button"),c=h("ion-item"),u=h("ion-row");return P(),m(u,null,{default:F((()=>[e.showPerPageFilter?(P(),m(l,{key:0},{default:F((()=>[w(y("select",{class:"input_display","onUpdate:modelValue":t[0]||(t[0]=t=>e.itemsPerPage=t),disabled:e.disablePerPageFilter},[y("option",{selected:5===e.itemsPerPage,value:5},"5 rows/page",8,$),y("option",{selected:10===e.itemsPerPage,value:10},"10 rows/page",8,j),y("option",{selected:20===e.itemsPerPage,value:20},"20 rows/page",8,q),y("option",{selected:50===e.itemsPerPage,value:50},"50 rows/page",8,M),y("option",{selected:100===e.itemsPerPage,value:100},"100 rows/page",8,K),y("option",{selected:1e3===e.itemsPerPage,value:1e3},"1000 rows/page",8,G),y("option",{selected:e.itemsPerPage===e.totalRowCount,value:e.totalRowCount},"Show all rows("+b(e.totalRowCount)+")",9,X)],8,L),[[f,e.itemsPerPage]])])),_:1})):v("",!0),"function"==typeof e.customFilter?(P(),m(l,{key:1},{default:F((()=>[C(n,{class:"input_display",value:e.customFilterValue,onClick:e.launchFilter,placeholder:"Filter..."},null,8,["value","onClick"])])),_:1})):v("",!0),C(l,null,{default:F((()=>[C(c,{lines:"none"},{default:F((()=>[C(n,{disabled:e.disableSearchFilter,class:"input_display",value:e.searchFilter,onClick:e.launchSearcher,placeholder:"Search here..."},null,8,["disabled","value","onClick"]),e.searchFilter?(P(),m(i,{key:0,class:"reset_button",size:"large",onClick:t[1]||(t[1]=t=>e.reset()),color:"secondary"},{default:F((()=>[R(" Reset ")])),_:1})):v("",!0)])),_:1})])),_:1})])),_:1})}],["__scopeId","data-v-7bf42b5b"]])),Q=o({components:{IonCol:r,IonRow:s,Pagination:z,ReportTable:I,ReportFilter:J,HisFooter:S,IonPage:_,IonHeader:D,IonContent:V,IonToolbar:k,IonChip:x,IonFooter:T},props:{title:{type:String,required:!0},columns:{type:Array,required:!0},encryptPDF:{type:Boolean,default:!1},rows:{type:Array,default:()=>[]},rowParser:{type:Function},showFilters:{type:Boolean,default:!1},rowsPerPage:{type:Number},asyncRows:{type:Function},paginated:{type:Boolean,default:!1},customBtns:{type:Array,default:()=>[]},showReportStamp:{type:Boolean,default:!0},footerColor:{type:String,default:"dark"},customFileName:{type:String,default:""},canExport:{type:Boolean,default:!0},onFinish:{type:Function}},data:()=>({btns:[],isTableLoading:!1,searchFilter:"",itemsPerPage:50,currentPage:0,coreVersion:B.getCoreVersion(),tableRows:[],totalPages:0,activeColumns:[],activeRows:[],date:N.toStandardHisDisplayFormat(B.getSessionDate()),apiVersion:B.getApiVersion(),siteUUID:B.getSiteUUID()}),methods:{getFileName(){return this.customFileName?this.customFileName:this.title},pdfEncryptionData(){const e=B.getUserName();return{encryption:{userPassword:e,ownerPassword:e,userPermissions:["print"]}}}},created(){this.btns=[...this.customBtns,{name:"CSV",size:"large",slot:"start",color:"primary",visible:this.canExport,onClick:()=>{const{columns:e,rows:t}=U(this.activeColumns,this.activeRows,"csvMode");O(e,[...t,[`Date Created: ${this.date}`],[`HIS-Core Version: ${this.coreVersion}`],[`API Version: ${this.apiVersion}`],[`Site UUID: ${this.siteUUID}`],[`Generated by: ${B.getUserName()}`]],this.getFileName())}},{name:"PDF",size:"large",slot:"start",color:"primary",visible:this.canExport,onClick:async()=>{let e="pdfMode";this.encryptPDF&&(e="Secure PDF"===await A("Security warning","PDF may contain private data that will require a password to unlock","To access private data choose Secure PDF over Regular PDF",[{name:"Secure PDF",slot:"start",color:"success"},{name:"Regular PDF",slot:"start",color:"success"}],"his-danger-color")?"pdfMode":"ignorePDFColumnexport");const{columns:t,rows:o}=U(this.activeColumns,this.activeRows,e);E(t,o,this.getFileName(),!1,this.encryptPDF&&"ignorePDFColumnexport"!=e?this.pdfEncryptionData():{})}},{name:"Finish",size:"large",slot:"end",color:"success",visible:!0,onClick:()=>{if("function"==typeof this.onFinish)return this.onFinish();this.$router.push({path:"/"})}}]}}),W={class:"report-content"};e("D",g(Q,[["render",function(e,t,o,a,r,s){const l=h("ion-col"),n=h("ion-row"),i=h("ion-toolbar"),c=h("report-filter"),u=h("ion-header"),d=h("report-table"),p=h("ion-content"),g=h("pagination"),w=h("ion-chip"),f=h("ion-footer"),I=h("his-footer"),S=h("ion-page");return P(),m(S,null,{default:F((()=>[C(u,null,{default:F((()=>[C(i,null,{default:F((()=>[C(n,null,{default:F((()=>[C(l,null,{default:F((()=>[y("h1",null,b(e.title),1)])),_:1})])),_:1})])),_:1}),C(i,null,{default:F((()=>[C(c,{showPerPageFilter:e.showFilters||e.paginated,disableSearchFilter:e.isTableLoading,disablePerPageFilter:e.isTableLoading,totalRowCount:e.tableRows.length,onOnItemsPerPage:t[0]||(t[0]=t=>e.itemsPerPage=t),onOnSearchFilter:t[1]||(t[1]=t=>e.searchFilter=t)},null,8,["showPerPageFilter","disableSearchFilter","disablePerPageFilter","totalRowCount"])])),_:1})])),_:1}),C(p,null,{default:F((()=>[y("div",W,[C(d,{rows:e.rows,paginated:e.paginated,asyncRows:e.asyncRows,rowParser:e.rowParser,columns:e.columns,showFilters:e.showFilters,newPage:e.currentPage,searchFilter:e.searchFilter,rowsPerPage:e.itemsPerPage,onOnIsLoading:t[2]||(t[2]=t=>e.isTableLoading=t),onOnTableRows:t[3]||(t[3]=t=>e.tableRows=t),onOnPagination:t[4]||(t[4]=t=>e.totalPages=t.length),onOnActiveColumns:t[5]||(t[5]=t=>e.activeColumns=t),onOnActiveRows:t[6]||(t[6]=t=>e.activeRows=t)},null,8,["rows","paginated","asyncRows","rowParser","columns","showFilters","newPage","searchFilter","rowsPerPage"])])])),_:1}),C(f,null,{default:F((()=>[C(i,null,{default:F((()=>[!e.searchFilter&&e.paginated||!e.searchFilter&&e.totalPages>0&&e.paginated?(P(),m(g,{key:0,perPage:e.itemsPerPage,maxVisibleButtons:10,totalPages:e.totalPages,onOnChangePage:t[7]||(t[7]=t=>e.currentPage=t)},null,8,["perPage","totalPages"])):v("",!0)])),_:1}),e.showReportStamp?(P(),m(i,{key:0},{default:F((()=>[C(w,{color:"primary"},{default:F((()=>[R("Date Created: "),y("b",null,b(e.date),1)])),_:1}),C(w,{color:"primary"},{default:F((()=>[R("His-Core Version: "),y("b",null,b(e.coreVersion),1)])),_:1}),C(w,{color:"primary"},{default:F((()=>[R("API Version: "),y("b",null,b(e.apiVersion),1)])),_:1})])),_:1})):v("",!0)])),_:1}),C(I,{color:e.footerColor,btns:e.btns},null,8,["color","btns"])])),_:1})}]]))}}}));
