import K from"./BaseTextInput-BtojAuQK.js";import{H as I}from"./HisKeyboard-DWUKKpPK.js";import{k as $}from"./KbHandler-BuQ4TFU6.js";import{Q as C}from"./HisKbConfigurations-GhFQZvlg.js";import{V as N}from"./ViewPort-J1DvtW6Z.js";import{_ as D}from"./FieldMixin.vue_vue_type_script_lang-SyRF5aQR.js";import{d as T,bb as B,aj as F,ak as H,ai as O,g as P,h as z,C as E,ab as L,_ as R,r as t,o as s,x as d,b as a,w as i,c as u,z as c,F as h,y as j,u as Q,v as S}from"./index-BF3WrZAg.js";import"./BaseKeyboard-CDZD4guH.js";import"./KbLayouts-VRA-vjeH.js";const A=T({components:{IonInput:B,IonRow:F,IonCol:H,IonGrid:O,BaseInput:K,HisKeyboard:I,ViewPort:N,IonList:P,IonItem:z,IonLabel:E},mixins:[D],data:()=>({value:"",prependValue:"",initalKeyboardName:"",keyboard:{},listData:[]}),computed:{inputType(){return this.config&&"inputType"in this.config?this.config.inputType:"text"}},mounted(){this.init()},activated(){this.init()},methods:{async init(){var e,n,o,l;this.keyboard=((e=this.config)==null?void 0:e.customKeyboard)||C,this.initalKeyboardName=typeof((n=this.config)==null?void 0:n.initialKb)=="function"?(o=this.config)==null?void 0:o.initialKb(this.fdata,this.cdata):((l=this.config)==null?void 0:l.initialKb)||"",this.$emit("onFieldActivated",this),this.config&&this.config.prependValue&&(this.prependValue=await this.config.prependValue(this.fdata)),await this.setDefaultValue()},async setDefaultValue(){if(this.defaultValue&&!this.value){const e=await this.defaultValue(this.fdata,this.cdata);e&&(L.isPlainObject(e)?(this.emitValue(e),this.value=e.value.toString()):(this.value=e,this.emitValue({label:e,value:e})))}},async emitValue(e){if(e.value==="")return this.value="",this.$emit("onValue",null);this.onValue&&!await this.onValue(e)||(e.value=this.prependValue?"".concat(this.prependValue).concat(e.value):e.value,this.value=e.label,this.$emit("onValue",e))},async onselect(e){await this.emitValue(e)},async onKbValue(e){await this.emitValue({label:e,value:e})},async keypress(e){var o;const n=$(e,this.value,(o=this.config)==null?void 0:o.casing);await this.emitValue({label:n,value:n})}},watch:{value:{async handler(){this.options&&(this.listData=await this.options(this.fdata))},deep:!0},clear(){this.value=""}}});function G(e,n,o,l,W,Y){const m=t("ion-input"),r=t("ion-col"),f=t("base-input"),_=t("ion-row"),b=t("ion-grid"),y=t("ion-label"),V=t("ion-item"),v=t("ion-list"),k=t("view-port"),g=t("his-keyboard");return s(),d(h,null,[a(k,{showFull:!1},{default:i(()=>[a(b,null,{default:i(()=>[a(_,null,{default:i(()=>[e.prependValue?(s(),u(r,{key:0,"size-md":"4"},{default:i(()=>[a(m,{readonly:e.isReadOnly,value:e.prependValue,class:"input_display",disabled:!0},null,8,["readonly","value"])]),_:1})):c("",!0),a(r,{"size-md":""},{default:i(()=>[a(f,{type:e.inputType,value:e.value,onOnValue:e.onKbValue},null,8,["type","value","onOnValue"])]),_:1})]),_:1})]),_:1}),e.listData.length>0?(s(),u(v,{key:0,class:"view-port-content"},{default:i(()=>[(s(!0),d(h,null,j(e.listData,(p,w)=>(s(),u(V,{class:"his-md-text",button:"",key:w,onClick:q=>e.onselect(p)},{default:i(()=>[a(y,null,{default:i(()=>[Q(S(p.label),1)]),_:2},1024)]),_:2},1032,["onClick"]))),128))]),_:1})):c("",!0)]),_:1}),a(g,{initalKeyboardName:e.initalKeyboardName,kbConfig:e.keyboard,onKeyPress:e.keypress,disabled:!1},null,8,["initalKeyboardName","kbConfig","onKeyPress"])],64)}const ie=R(A,[["render",G],["__scopeId","data-v-667b219c"]]);export{ie as default};
