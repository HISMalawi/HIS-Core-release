System.register(["./HisStandardForm-legacy-CfaEhksJ.js","./EncounterMixin.vue_vue_type_script_lang-legacy-DgDsRgb3.js","./patient_radiology_service-legacy-VbywR0Vd.js","./index-legacy-rttSvejT.js","./dynamic-import-helper-legacy-DYK5bIOV.js","./TouchScreenForm-legacy-Bt9NJZEE.js","./ToolbarMediumCard-legacy-Bi2VVsZ_.js","./Transformers-legacy-DhNYVLaS.js","./ViewPort-legacy-BdWinx1S.js","./encounter_guidelines-legacy-Da880sWK.js","./GuidelineEngine-legacy-KsvQuFdF.js"],(function(i,e){"use strict";var t,a,o,n,s,r,l,d,c,u,h,g,y,m;return{setters:[i=>{t=i.H},i=>{a=i._},i=>{o=i.P},i=>{n=i.d,s=i.cC,r=i.a$,l=i.V,d=i._,c=i.r,u=i.o,h=i.c,g=i.w,y=i.b},i=>{m=i.F},null,null,null,null,null,null],execute:function(){const e=n({components:{HisStandardForm:t},mixins:[a],data:()=>({radiologyService:{},isPacsEnabled:!1,previousRadiologyExaminations:{}}),watch:{ready:{async handler(i){i&&(this.radiologyService=new o(this.patientID,this.providerID),this.isPacsEnabled=await s.isPACsEnabled(),this.previousRadiologyExaminations=await this.radiologyService.showPreviousRadiolgy(this.patient),this.fields=this.getFields())},immediate:!0,deep:!0}},methods:{async onSubmit(i,e){const t=await Promise.all(e.radiology);await this.radiologyService.createEncounter();const a=await this.radiologyService.obsObj(t),o=await this.radiologyService.saveObservationList(a);if(await this.radiologyService.printOrders(o,this.patient),this.isPacsEnabled)try{await this.radiologyService.submitToPacs(o,this.patient)}catch(n){console.log(n)}this.gotoPatientDashboard()},async getTableData(){const i=await this.radiologyService.getPreviousRadiologyExaminations(this.patient),e=i.data,t=i.url,a=[];for(const o in e){const i=[e[o].children[0].accession_number,e[o].value_text,e[o].children[0].value_text,r(e[o].obs_datetime).format("DD/MMM/YYYY"),`<ion-button slot="end" size="large" href="${t}" color="success">\n            View\n          </ion-button>`];a.push(i)}return[{label:"",value:"",other:{columns:["Accession#","Body Part","Order Type","Ordered","Result"],rows:a}}]},getFields(){return[{id:"radiology_results",helpText:"Previous Radiology Examinations",condition:()=>this.previousRadiologyExaminations,type:m.TT_TABLE_VIEWER,options:()=>this.getTableData(),config:{hiddenFooterBtns:["Clear"]}},{id:"radiology",helpText:"Radiology Examination",type:m.TT_RADIOLOGY_PICKER,validation:i=>l.required(i),config:{hiddenFooterBtns:[this.disableBackBtn()]},computedValue:i=>i.map((async i=>({...await this.radiologyService.buildValueCoded("Radiology Orders",i.other.parent),child:[await this.radiologyService.buildValueCodedFromConceptId(i.other.parent,i.other.concept_id)]})))}]},disableBackBtn(){return this.previousRadiologyExaminations?"":"Back"}}});i("default",d(e,[["render",function(i,e,t,a,o,n){const s=c("his-standard-form"),r=c("ion-page");return u(),h(r,null,{default:g((()=>[y(s,{cancelDestinationPath:i.cancelDestination,fields:i.fields,onFinishAction:i.onSubmit},null,8,["cancelDestinationPath","fields","onFinishAction"])])),_:1})}]]))}}}));
