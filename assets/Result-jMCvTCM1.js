import{d as p,K as m,F as _,H as v,t as T,V as f,o as E,c as b,w as h,b as R,cu as i,am as x,I as F}from"./index-C-Wf7IuL.js";import{H as M}from"./HisStandardForm-zCup__or.js";import{u as S}from"./useEncounter-Cdg-ySH1.js";import{L as A}from"./lab_service-V04oHBcf.js";import{g as t}from"./util-CyjuS_4X.js";import"./isEmpty-CAuO0MZq.js";import"./encounter_guidelines-p4GeYGc_.js";import"./GuidelineEngine-D6V1_Znr.js";const H=p({__name:"Result",setup(D){const o=m([]),n={[t("MICROSCOPY")]:{label:"Microscopy",value:"/tb/results/microscopy"},[t("XPERT_MTB_RIF")]:{label:"Xpert MTB/RIF",value:"/tb/results/xpert"},[t("XPERT_MTB_RIF_ULTRA")]:{label:"Xpert MTB/RIF Ultra",value:"/tb/results/xpert"},[t("LPA")]:{label:"LPA",value:"/tb/results/lpa"},[t("LAM")]:{label:"LAM",value:"/tb/results/lam"},[t("CULTURE_AND_DST")]:{label:"Culture and DST",value:"/tb/results/culture"}},{patientDashboardUrl:l,patientId:u}=S((a,s)=>{const d=()=>{const r={};return{id:"examination",helpText:"Recent Examination(s):",type:_.TT_SELECT,init:async()=>{try{(await A.getRecentOrders(s)).observations.forEach(e=>{e.concept_id===t("TEST_REQUESTED")&&n[e.value_coded]&&!r[e.value_coded]&&(r[e.value_coded]={...n[e.value_coded],other:v.toStandardHisFormat(e.obs_datetime)})})}catch(e){console.error("".concat(e)),T("No recent results found")}return!0},validation:e=>f.required(e),options:()=>Object.values(r)}};o.value=[d()]});function c(a){x.push("".concat(a.examination.value,"/").concat(u.value,"?date=").concat(a.examination.other))}return(a,s)=>(E(),b(i(F),null,{default:h(()=>[R(M,{cancelDestinationPath:i(l),onFinishAction:c,fields:o.value,skipSummary:!0},null,8,["cancelDestinationPath","fields"])]),_:1}))}});export{H as default};
