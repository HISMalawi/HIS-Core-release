System.register(["./index-legacy-DR3-kJVE.js","./ReportMixin.vue_vue_type_script_lang-legacy-BbENRnLs.js","./TableReportTemplate-legacy-CNaIiBQW.js","./BasicReportTemplate-legacy-Cw6SekeY.js","./Export-legacy-CgjR0K1_.js","./index-legacy-DsW4Gcwl.js","./Pagination-legacy-BCnktxxx.js","./HisStandardForm-legacy-utPdp3kG.js","./ReportErrors-legacy-BqxfQ3m5.js"],(function(t,e){"use strict";var a,n,i,o,l,s,r,d,h,m,u,c,T,p,_,x,f,g,w;return{setters:[t=>{a=t.d,n=t.I,i=t.ad,o=t.ae,l=t.aP,s=t.am,r=t.aN,d=t.dH,h=t.ar,m=t.dI,u=t.H,c=t.aa,T=t.af,p=t.a,_=t.c,x=t.w,f=t.b},t=>{g=t._},t=>{w=t.R},null,null,null,null,null,null],execute:function(){const e=a({mixins:[g],components:{ReportTemplate:w,IonPage:n},data:()=>({title:"Data cleaning report",rows:[],columns:[],defaultIndicator:{}}),created(){this.fields=[{id:"indicator",helpText:"Select indicator",type:i.TT_SELECT,requireNext:!1,condition:()=>!this.defaultIndicator,defaultOutput:()=>this.defaultIndicator,validation:t=>o.required(t),options:()=>this.getIndicatorOptions()},...l({id:"start_date",helpText:"Start",required:!0,minDate:()=>"2000-01-01",maxDate:()=>s.getSessionDate(),estimation:{allowUnknown:!1},computeValue:t=>t}),...l({id:"end_date",helpText:"End",required:!0,minDate:(t,e)=>e.start_date,maxDate:()=>s.getSessionDate(),estimation:{allowUnknown:!1},computeValue:t=>t})],this.defaultIndicator=r.find(this.getIndicatorOptions(),{value:this.$route.query.cleaning_tool})||null},methods:{async onPeriod(t,e){const a=t=>u.toStandardHisDisplayFormat(t);this.rows=[],this.title=t.indicator.label;const n=t.indicator;this.columns=n.other.columns,this.report=new d,this.report.setStartDate(e.start_date),this.report.setEndDate(e.end_date),this.period=`${a(e.start_date)} - ${a(e.end_date)}`;const i=await this.report.getDataToolReport(n.value);i&&(this.rows=await Promise.all(i.map((t=>n.other.formatRow(t)))))},showPatientBtn(t){return h.tdBtn("View",(()=>this.$router.push("/patient/dashboard/"+t)))},getIndicatorOptions(){return[{label:"Males with ANC Encounters",value:m.MALES_WITH_ANC_ENCOUNTERS,other:{columns:[[h.thTxt("National ID"),h.thTxt("First name"),h.thTxt("Last name"),h.thTxt("Total Encounters"),h.thTxt("Action")]],formatRow:t=>[h.td(t.identifier),h.td(t.given_name),h.td(t.family_name),h.td(t.total_encounters),this.showPatientBtn(t.patient_id)]}},{label:"Encounters after death",value:m.ENCOUNTERS_AFTER_DEATH,other:{columns:[[h.thTxt("National ID"),h.thTxt("First name"),h.thTxt("Last name"),h.thTxt("Date of death"),h.thTxt("Recent encounter date"),h.thTxt("Count"),h.thTxt("Action")]],formatRow:t=>[h.td(t.identifier),h.td(t.given_name),h.td(t.family_name),h.tdDate(t.patient_died_date),h.tdDate(t.minimum_encounter_datetime),h.td(t.total_encounters),this.showPatientBtn(t.patient_id)]}},{label:"Incomplete visits",value:m.INCOMPLETE_VISITS,other:{columns:[[h.thTxt("National ID"),h.thTxt("Name"),h.thTxt("Visit date"),h.thTxt("Incomplete count"),h.thTxt("Action")]],formatRow:t=>[h.td(t.n_id),h.td(t.name),h.td(t.visit_date),h.td(t.visit_no),this.showPatientBtn(t.patient_id)]}},{label:"Duplicate encounters",value:m.DUPLICATE_ENCOUNTERS,other:{columns:[[h.thTxt("National ID"),h.thTxt("Given name"),h.thTxt("Family name"),h.thTxt("Name"),h.thTxt("Total"),h.thTxt("Action")]],formatRow:t=>[h.td(t.identifier),h.td(t.given_name),h.td(t.family_name),h.td(t.name),h.td(t.total),this.showPatientBtn(t.patient_id)]}},{label:"Missing HIV Status",value:m.MISSING_HIV_STATUS,other:{columns:[[h.thTxt("National ID"),h.thTxt("Given name"),h.thTxt("Family name"),h.thTxt("Action")]],formatRow:t=>[h.td(t.identifier),h.td(t.given_name),h.td(t.family_name),this.showPatientBtn(t.patient_id)]}},{label:"Missing Last Menstrual Period (LMP)",value:m.MISSING_LMP,other:{columns:[[h.thTxt("National ID"),h.thTxt("Given name"),h.thTxt("Family name"),h.thTxt("Action")]],formatRow:t=>[h.td(t.identifier),h.td(t.given_name),h.td(t.family_name),this.showPatientBtn(t.patient_id)]}}]}}});t("default",c(e,[["render",function(t,e,a,n,i,o){const l=T("report-template"),s=T("ion-page");return p(),_(s,null,{default:x((()=>[f(l,{title:t.title,period:t.period,rows:t.rows,fields:t.fields,columns:t.columns,showFilters:!0,onReportConfiguration:t.onPeriod},null,8,["title","period","rows","fields","columns","onReportConfiguration"])])),_:1})}]]))}}}));
