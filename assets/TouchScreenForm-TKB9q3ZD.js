const __vite__fileDeps=["assets/AncDrugSetInput-BJTgS3Ip.js","assets/ViewPort-BCxYiILf.js","assets/index-BCTN_bnC.js","assets/index-BXhQs3gm.css","assets/ViewPort-DKk7q8jo.css","assets/FieldMixin.vue_vue_type_script_lang-BcY4Dt1h.js","assets/SIngleTouchField-DeaPtOu6.js","assets/dynamic-import-helper-BkBZiFw5.js","assets/AncDrugSetInput-sZOE2v_p.css","assets/AncPregnancyDetailsInput-CtelySph.js","assets/AncPregnancyDetailsInput-Bd4lYc2m.css","assets/AncPregnancyInfoConfig-Ds3J8mEA.js","assets/AncPregnancyInfoConfig-CsvoD3tK.css","assets/ArtStagingSummary-BwPS9_XY.js","assets/ArtStagingSummary-Bv6rAl4t.css","assets/AsyncMultiSelect-DSZRjNQc.js","assets/KbHandler-BuQ4TFU6.js","assets/HisKbConfigurations-GhFQZvlg.js","assets/KbLayouts-VRA-vjeH.js","assets/BaseTextInput-BVEuzlyj.js","assets/BaseTextInput-jjouflnV.css","assets/HisKeyboard-COmBOOo8.js","assets/BaseKeyboard-BdU8h7Jm.js","assets/fuse-YdZE3OCN.js","assets/DrNewRegimenInput-CnHg49CE.js","assets/DrNewRegimenInput-DiQs9ZLq.css","assets/DrPrescriptionInput-D9de77Gg.js","assets/DrPrescriptionInput-C4NEvo-n.css","assets/DrugDispensationSelection-B9SZgQ-2.js","assets/ActionSideButton-BmNlfY-h.js","assets/ActionSideButton-BoKZ0AEF.css","assets/ResetButton-DCu3Osnd.js","assets/ResetButton-C0uIE9UB.css","assets/DrugDispensationSelection-purqlm_o.css","assets/DrugTransferInput-CHGjiHj4.js","assets/HisKeypad-iWtx_mcq.js","assets/HisKeypad-DxkrL1bH.css","assets/DrugTransferInput-DSsbZW4_.css","assets/FieldMixin-B94mWyWi.js","assets/FilingNumberView-BzLW9Ema.js","assets/FilingNumberView-BznC1F1A.css","assets/GeneralDrugDispenser-BKFMmMSa.js","assets/GeneralDrugDispenser-D-TgdA60.css","assets/HisAdherenceInput-DdZDVbVD.js","assets/HisAdherenceInput-D0mBYZ-2.css","assets/HisAgeInput-BXi8qWcV.js","assets/HisAppointments-BBRvnnSO.js","assets/index-jqPBj3gu.js","assets/appointment_service-GvbXvyjD.js","assets/HisAppointments-CheL2Ref.css","assets/HisArtRegimenSelection-DGO6zstq.js","assets/SelectMixin-D-38L_rh.js","assets/SelectMixin-DIo6yi8o.css","assets/HisArtRegimenSelection-Bw6K25SG.css","assets/HisBarcodeInput-CsEQ8Fmi.js","assets/HisBarcodeInput-DnV7MNcD.css","assets/HisBatchEntry-CLiu4Fd5.js","assets/PopupKeyboard-DWLNjJL8.js","assets/ToolbarMediumCard-O_J6wu7C.js","assets/Transformers-BPPLlH12.js","assets/HisBatchEntry-CPaQnR4C.css","assets/HisBatchMovement-DxhJtXXL.js","assets/HisBatchMovement-B0cJwBqB.css","assets/HisBatchVerification-B1HrV1nn.js","assets/isEmpty-OXtHK5dz.js","assets/_Set-VKtKUQAI.js","assets/HisBatchVerification-BW8gu8f7.css","assets/HisCardSelector-D-CB5L2T.js","assets/HisCardSelector-CpvPbCp8.css","assets/HisClinicHolidayPicker-D4gp_4W3.js","assets/HisClinicHolidayPicker-CmH6PdgN.css","assets/HisComplaintsPicker-ty5732IF.js","assets/patient_complaints_service-D7eZQQJA.js","assets/HisComplaintsPicker-DD-3SBar.css","assets/HisDataTable-CGJ3HFmg.js","assets/HisDataTable-Bb5tajyV.css","assets/HisDateInput-ogs97iGH.js","assets/HisDateInput-WD1SoD43.css","assets/HisDatePicker-CdQ9HFYQ.js","assets/HisDatePicker-C0x1Cwlw.css","assets/HisDosageInput-CjAprm0f.js","assets/HisDosageInput-BCtb5uYm.css","assets/HisGridSelector-DAfSejYe.js","assets/HisGroupSelector-CXzJbkAv.js","assets/HisGroupSelector-D_k7l4_o.css","assets/HisIPAddress-BZ281CIH.js","assets/HisIPAddress-xVcxftPo.css","assets/HisInfiniteScrollMultipleSelect-CkwEhKhS.js","assets/Arrays-CufAqHE9.js","assets/HisLabOrders-CoR9-nBc.js","assets/LabOrderModal-C58uf0w4.js","assets/lab_order_service-0WRc4or6.js","assets/LabOrderModal-6XyNCe3x.css","assets/HisLabOrders-9obUNSIB.css","assets/HisMonthlyDays-B-1cd7Zn.js","assets/HisMultiSelectGrid-D2YY3isH.js","assets/HisMultiSelectGrid-CWjAxtQ0.css","assets/HisMultipleSelect-4tBSoHOr.js","assets/HisNextVisitInterval-u88H1mny.js","assets/HisNextVisitInterval-DBnGguHV.css","assets/HisNote-FHa90Dzl.js","assets/HisNote-Q9QVunoq.css","assets/HisNumberInput-BRa5mTb0.js","assets/HisPrescriptionInput-D8jE7OAJ.js","assets/drug_prescription_service-CAoLPsLJ.js","assets/drug_order_service-DUHTU9In.js","assets/drug_service-po90mf4X.js","assets/HisPrescriptionInput-CqxZ8Vcx.css","assets/HisRadiologyPicker-Bc-tQUF3.js","assets/patient_radiology_service-5FG2u3iQ.js","assets/HisRadiologyPicker-BlZT1rwY.css","assets/HisSelect-yLTGbeAb.js","assets/HisSelect-CLQiDytr.css","assets/HisSummary-BSudnJeO.js","assets/HisSummary-lx4az1Vr.css","assets/HisTableViewer-CIn2V9JC.js","assets/HisTableViewer-B_hZQXiY.css","assets/HisTextBanner-DZTZwXDS.js","assets/HisTextInput-DWFVHFDH.js","assets/HisTextInput-DwXzW2Uw.css","assets/HisVitalsEntry-C6h2mCpO.js","assets/HisVitalsEntry-BgDSB23T.css","assets/HisWeightChart-KqY0Qofe.js","assets/HisWeightChart-B7Yhg-AZ.css","assets/LinkageCodeInput-Bfk3Wvo3.js","assets/LinkageCodeInput-1TMIRyOy.css","assets/MultiYesNoSelect-DIEW5EZh.js","assets/MultiYesNoSelect-BD4_ZNTL.css","assets/PersonMatchView-D2n1BSM5.js","assets/PersonMatchView-DHXZ7g8K.css","assets/PersonSearchView-BgwdvrV6.js","assets/PersonSearchView-BR_DG_CY.css","assets/ProgramSelection-BHOBcGgF.js","assets/ProgramSelection-BICujTSo.css","assets/RelationsSelection-C4nnCY17.js","assets/RelationsSelection-Cy6ibZzH.css","assets/YesNoSelect-BP7gsTgH.js","assets/YesNoSelect-T7B2yquy.css"],__vite__mapDeps=i=>i.map(i=>__vite__fileDeps[i]);
import{d as A,ai as j,ak as S,aj as N,_ as T,r as s,o as a,c as m,w as r,b as u,x as V,F as y,y as L,A as p,v as f,u as I,a3 as U,a4 as z,bh as G,I as W,l as Y,m as K,i as X,f as J,j as Q,k as Z,ab as F,aN as k,O as x,bi as b,bj as w,n as H,q as tt,t as et,av as it,aV as i,z as ot,bk as nt,aW as rt,a0 as st,ar as at,bl as lt}from"./index-BCTN_bnC.js";import{F as ut,C as ct,_ as dt}from"./dynamic-import-helper-BkBZiFw5.js";import{T as mt}from"./ToolbarMediumCard-O_J6wu7C.js";import{T as _t}from"./Transformers-BPPLlH12.js";import{V as $}from"./ViewPort-BCxYiILf.js";const ht=A({name:"HisResultCard",components:{ToolBarMediumCard:mt,IonGrid:j,IonCol:S,IonRow:N},props:{items:{type:Object,required:!0}},computed:{rowItems(){return _t.convertArrayToTurples(this.items,2)}}});function pt(t,e,o,n,c,_){const h=s("ion-col"),d=s("ion-row"),C=s("ion-grid"),g=s("tool-bar-medium-card");return a(),m(g,null,{default:r(()=>[u(C,null,{default:r(()=>[(a(!0),V(y,null,L(t.rowItems,(E,O)=>(a(),m(d,{key:O},{default:r(()=>[(a(!0),V(y,null,L(E,(v,P)=>(a(),m(h,{class:"col his-sm-text",key:P},{default:r(()=>[p("b",null,f(v.label)+":",1),I(" "+f(v.value),1)]),_:2},1024))),128))]),_:2},1024))),128))]),_:1})]),_:1})}const Ft=T(ht,[["render",pt],["__scopeId","data-v-19f0802a"]]),ft=A({components:{ViewPort:$}}),Et=t=>(U("data-v-e764537f"),t=t(),z(),t),vt=Et(()=>p("div",{class:"linear-background"},[p("div",{class:"inter-draw"}),p("div",{class:"inter-crop"}),p("div",{class:"inter-right--top"}),p("div",{class:"inter-right--bottom"})],-1));function Dt(t,e,o,n,c,_){const h=s("view-port");return a(),m(h,null,{default:r(()=>[vt]),_:1})}const It=T(ft,[["render",Dt],["__scopeId","data-v-e764537f"]]),Vt=A({components:{ViewPort:$}}),yt=p("div",{class:"vertically-align"}," Error Loading form element. Exit app and try again and check your network. ",-1);function At(t,e,o,n,c,_){const h=s("view-port");return a(),m(h,null,{default:r(()=>[yt]),_:1})}const Tt=T(Vt,[["render",At]]);function Ct(){const t={};return ct.forEach(e=>{t[e]=it({loader:()=>dt(Object.assign({"../FormElements/AncDrugSetInput.vue":()=>i(()=>import("./AncDrugSetInput-BJTgS3Ip.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8])),"../FormElements/AncPregnancyDetailsInput.vue":()=>i(()=>import("./AncPregnancyDetailsInput-CtelySph.js"),__vite__mapDeps([9,5,2,3,1,4,6,7,10])),"../FormElements/AncPregnancyInfoConfig.vue":()=>i(()=>import("./AncPregnancyInfoConfig-Ds3J8mEA.js"),__vite__mapDeps([11,5,2,3,1,4,12])),"../FormElements/ArtStagingSummary.vue":()=>i(()=>import("./ArtStagingSummary-BwPS9_XY.js"),__vite__mapDeps([13,1,2,3,4,5,14])),"../FormElements/AsyncMultiSelect.vue":()=>i(()=>import("./AsyncMultiSelect-DSZRjNQc.js"),__vite__mapDeps([15,2,3,5,1,4,16,17,18,19,20,21,22,23])),"../FormElements/BaseTextInput.vue":()=>i(()=>import("./BaseTextInput-BVEuzlyj.js"),__vite__mapDeps([19,2,3,20])),"../FormElements/DrNewRegimenInput.vue":()=>i(()=>import("./DrNewRegimenInput-CnHg49CE.js"),__vite__mapDeps([24,2,3,1,4,5,25])),"../FormElements/DrPrescriptionInput.vue":()=>i(()=>import("./DrPrescriptionInput-D9de77Gg.js"),__vite__mapDeps([26,1,2,3,4,5,27])),"../FormElements/DrugDispensationSelection.vue":()=>i(()=>import("./DrugDispensationSelection-B9SZgQ-2.js"),__vite__mapDeps([28,1,2,3,4,29,30,31,32,5,33])),"../FormElements/DrugTransferInput.vue":()=>i(()=>import("./DrugTransferInput-CHGjiHj4.js"),__vite__mapDeps([34,1,2,3,4,35,22,18,16,36,5,37])),"../FormElements/FieldMixin.vue":()=>i(()=>import("./FieldMixin-B94mWyWi.js"),__vite__mapDeps([38,5,2,3])),"../FormElements/FilingNumberView.vue":()=>i(()=>import("./FilingNumberView-BzLW9Ema.js"),__vite__mapDeps([39,1,2,3,4,5,40])),"../FormElements/GeneralDrugDispenser.vue":()=>i(()=>import("./GeneralDrugDispenser-BKFMmMSa.js"),__vite__mapDeps([41,1,2,3,4,29,30,31,32,5,18,42])),"../FormElements/HisAdherenceInput.vue":()=>i(()=>import("./HisAdherenceInput-DdZDVbVD.js"),__vite__mapDeps([43,1,2,3,4,35,22,18,16,36,5,44])),"../FormElements/HisAgeInput.vue":()=>i(()=>import("./HisAgeInput-BXi8qWcV.js"),__vite__mapDeps([45,19,2,3,20,21,17,18,22,16,1,4,5])),"../FormElements/HisAppointments.vue":()=>i(()=>import("./HisAppointments-BBRvnnSO.js"),__vite__mapDeps([46,1,2,3,4,47,48,5,49])),"../FormElements/HisArtRegimenSelection.vue":()=>i(()=>import("./HisArtRegimenSelection-DGO6zstq.js"),__vite__mapDeps([50,1,2,3,4,51,21,17,18,22,16,19,20,5,52,53])),"../FormElements/HisBarcodeInput.vue":()=>i(()=>import("./HisBarcodeInput-CsEQ8Fmi.js"),__vite__mapDeps([54,5,2,3,55])),"../FormElements/HisBatchEntry.vue":()=>i(()=>import("./HisBatchEntry-CLiu4Fd5.js"),__vite__mapDeps([56,1,2,3,4,5,7,19,20,57,6,35,22,18,16,36,58,59,60])),"../FormElements/HisBatchMovement.vue":()=>i(()=>import("./HisBatchMovement-DxhJtXXL.js"),__vite__mapDeps([61,1,2,3,4,5,7,19,20,57,6,35,22,18,16,36,58,59,62])),"../FormElements/HisBatchVerification.vue":()=>i(()=>import("./HisBatchVerification-B1HrV1nn.js"),__vite__mapDeps([63,2,3,1,4,5,7,19,20,64,65,57,6,35,22,18,16,36,58,59,66])),"../FormElements/HisCardSelector.vue":()=>i(()=>import("./HisCardSelector-D-CB5L2T.js"),__vite__mapDeps([67,51,21,17,18,22,2,3,16,19,20,1,4,5,52,68])),"../FormElements/HisClinicHolidayPicker.vue":()=>i(()=>import("./HisClinicHolidayPicker-D4gp_4W3.js"),__vite__mapDeps([69,1,2,3,4,47,5,70])),"../FormElements/HisComplaintsPicker.vue":()=>i(()=>import("./HisComplaintsPicker-ty5732IF.js"),__vite__mapDeps([71,2,3,51,21,17,18,22,16,19,20,1,4,5,52,72,73])),"../FormElements/HisDataTable.vue":()=>i(()=>import("./HisDataTable-CGJ3HFmg.js"),__vite__mapDeps([74,2,3,1,4,5,75])),"../FormElements/HisDateInput.vue":()=>i(()=>import("./HisDateInput-ogs97iGH.js"),__vite__mapDeps([76,1,2,3,4,5,77])),"../FormElements/HisDatePicker.vue":()=>i(()=>import("./HisDatePicker-CdQ9HFYQ.js"),__vite__mapDeps([78,1,2,3,4,47,5,79])),"../FormElements/HisDosageInput.vue":()=>i(()=>import("./HisDosageInput-CjAprm0f.js"),__vite__mapDeps([80,1,2,3,4,35,22,18,16,36,5,81])),"../FormElements/HisGridSelector.vue":()=>i(()=>import("./HisGridSelector-DAfSejYe.js"),__vite__mapDeps([82,2,3,5,1,4])),"../FormElements/HisGroupSelector.vue":()=>i(()=>import("./HisGroupSelector-CXzJbkAv.js"),__vite__mapDeps([83,5,2,3,1,4,84])),"../FormElements/HisIPAddress.vue":()=>i(()=>import("./HisIPAddress-BZ281CIH.js"),__vite__mapDeps([85,21,17,18,22,2,3,1,4,5,16,86])),"../FormElements/HisInfiniteScrollMultipleSelect.vue":()=>i(()=>import("./HisInfiniteScrollMultipleSelect-CkwEhKhS.js"),__vite__mapDeps([87,17,18,1,2,3,4,16,19,20,5,21,22,88])),"../FormElements/HisLabOrders.vue":()=>i(()=>import("./HisLabOrders-CoR9-nBc.js"),__vite__mapDeps([89,1,2,3,4,90,91,17,18,21,22,16,23,92,5,93])),"../FormElements/HisMonthlyDays.vue":()=>i(()=>import("./HisMonthlyDays-B-1cd7Zn.js"),__vite__mapDeps([94,19,2,3,20,21,17,18,22,16,1,4,5])),"../FormElements/HisMultiSelectGrid.vue":()=>i(()=>import("./HisMultiSelectGrid-D2YY3isH.js"),__vite__mapDeps([95,5,2,3,1,4,96])),"../FormElements/HisMultipleSelect.vue":()=>i(()=>import("./HisMultipleSelect-4tBSoHOr.js"),__vite__mapDeps([97,51,21,17,18,22,2,3,16,19,20,1,4,5,52,23])),"../FormElements/HisNextVisitInterval.vue":()=>i(()=>import("./HisNextVisitInterval-u88H1mny.js"),__vite__mapDeps([98,2,3,1,4,51,21,17,18,22,16,19,20,5,52,59,99])),"../FormElements/HisNote.vue":()=>i(()=>import("./HisNote-FHa90Dzl.js"),__vite__mapDeps([100,16,1,2,3,4,5,18,101])),"../FormElements/HisNumberInput.vue":()=>i(()=>import("./HisNumberInput-BRa5mTb0.js"),__vite__mapDeps([102,19,2,3,20,21,17,18,22,16,1,4,5])),"../FormElements/HisPrescriptionInput.vue":()=>i(()=>import("./HisPrescriptionInput-D8jE7OAJ.js"),__vite__mapDeps([103,5,2,3,35,22,18,16,36,104,105,106,107])),"../FormElements/HisRadiologyPicker.vue":()=>i(()=>import("./HisRadiologyPicker-Bc-tQUF3.js"),__vite__mapDeps([108,2,3,51,21,17,18,22,16,19,20,1,4,5,52,109,110])),"../FormElements/HisSelect.vue":()=>i(()=>import("./HisSelect-yLTGbeAb.js"),__vite__mapDeps([111,51,21,17,18,22,2,3,16,19,20,1,4,5,52,112])),"../FormElements/HisSummary.vue":()=>i(()=>import("./HisSummary-BSudnJeO.js"),__vite__mapDeps([113,1,2,3,4,5,114])),"../FormElements/HisTableViewer.vue":()=>i(()=>import("./HisTableViewer-CIn2V9JC.js"),__vite__mapDeps([115,2,3,1,4,5,116])),"../FormElements/HisTextBanner.vue":()=>i(()=>import("./HisTextBanner-DZTZwXDS.js"),__vite__mapDeps([117,5,2,3])),"../FormElements/HisTextInput.vue":()=>i(()=>import("./HisTextInput-DWFVHFDH.js"),__vite__mapDeps([118,19,2,3,20,21,17,18,22,16,1,4,5,119])),"../FormElements/HisVitalsEntry.vue":()=>i(()=>import("./HisVitalsEntry-C6h2mCpO.js"),__vite__mapDeps([120,1,2,3,4,18,29,30,5,121])),"../FormElements/HisWeightChart.vue":()=>i(()=>import("./HisWeightChart-KqY0Qofe.js"),__vite__mapDeps([122,1,2,3,4,5,123])),"../FormElements/LinkageCodeInput.vue":()=>i(()=>import("./LinkageCodeInput-Bfk3Wvo3.js"),__vite__mapDeps([124,2,3,21,17,18,22,1,4,5,16,125])),"../FormElements/MultiYesNoSelect.vue":()=>i(()=>import("./MultiYesNoSelect-DIEW5EZh.js"),__vite__mapDeps([126,51,21,17,18,22,2,3,16,19,20,1,4,5,52,127])),"../FormElements/PersonMatchView.vue":()=>i(()=>import("./PersonMatchView-D2n1BSM5.js"),__vite__mapDeps([128,2,3,5,129])),"../FormElements/PersonSearchView.vue":()=>i(()=>import("./PersonSearchView-BgwdvrV6.js"),__vite__mapDeps([130,2,3,5,131])),"../FormElements/ProgramSelection.vue":()=>i(()=>import("./ProgramSelection-BHOBcGgF.js"),__vite__mapDeps([132,2,3,5,1,4,133])),"../FormElements/RelationsSelection.vue":()=>i(()=>import("./RelationsSelection-C4nnCY17.js"),__vite__mapDeps([134,5,2,3,59,1,4,135])),"../FormElements/SelectMixin.vue":()=>i(()=>import("./SelectMixin-D-38L_rh.js"),__vite__mapDeps([51,21,17,18,22,2,3,16,19,20,1,4,5,52])),"../FormElements/YesNoSelect.vue":()=>i(()=>import("./YesNoSelect-BP7gsTgH.js"),__vite__mapDeps([136,51,21,17,18,22,2,3,16,19,20,1,4,5,52,137]))}),"../FormElements/".concat(e,".vue")),loadingComponent:It,errorComponent:Tt,delay:150,timeout:5e4})}),t}const gt=A({name:"TouchscreenForm",components:{InfoCard:Ft,IonButtons:G,IonPage:W,IonContent:Y,IonFooter:K,IonToolbar:X,IonButton:J,IonHeader:Q,IonTitle:Z,IonCol:S,IonRow:N,...Ct()},emits:["onFinish","onIndex"],props:{onFinish:{type:Function},skipSummary:{type:Boolean,default:!1},activeField:{type:String},fields:{type:Object,required:!0},cancelDestinationPath:{type:String},disableAutoModalDismiss:{type:Boolean},cancelAction:{type:Function}},data:()=>({ftBtnEvent:{eventIndex:0,btnName:"",btnOutput:null},helpText:"",valueClearIndex:0,currentIndex:0,currentField:{},currentFieldContext:null,formData:{},computedFormData:{},footerBtns:[],currentFields:[],fieldsInitialisedOnce:{},state:""}),watch:{fields:{async handler(t){if(!F.isEmpty(t)){this.buildFormData(t);let e=t;this.skipSummary||(e=[...e,this.getDefaultSummaryField()]),this.currentFields=e,this.activeField?this.mountField(this.activeField):await this.onNext()}},immediate:!0,deep:!0},state:{handler(t){["onValue","onClear","next","prev","onfinish","onload","unload"].includes(t)&&(k.getTop().then(e=>e?k.dismiss():null),this.disableAutoModalDismiss||x.getTop().then(e=>e&&x.dismiss()),b.getTop().then(e=>e?b.dismiss():null),w.getTop().then(e=>e?w.dismiss():null))},immediate:!0,deep:!0},activeField:{async handler(t){t&&this.mountField(t)}}},mounted(){this.footerBtns=[this.getCancelBtn()]},methods:{clearValue(){this.valueClearIndex+=1,this.setActiveFieldValue(null)},async onFtButtonClicked(t){this.ftBtnEvent.eventIndex+=1,this.ftBtnEvent.btnName=t.name,this.ftBtnEvent.btnOutput=await t.onClick(this.formData,this.computedFormData,this.currentFieldContext),t.onClickComponentEvents?this.ftBtnEvent.onClickComponentEvents=t.onClickComponentEvents:this.ftBtnEvent.onClickComponentEvents&&delete this.ftBtnEvent.onClickComponentEvents},async mountField(t){if(t==="_NEXT_FIELD_")return await this.goNext(),this.$emit("onIndex",this.currentIndex);const e=F.findIndex(this.currentFields,{id:t});e>=0&&e<=this.currentFields.length&&(this.setActiveFieldComputedValue(),this.setActiveField(e),this.$emit("onIndex",e))},getCancelBtn(t={}){const e=t||{};return{name:e.name||"Cancel",color:e.color||"danger",onClick:async()=>{if(e.onClick)return e.onClick();if(await H("Are you sure you want to cancel?")){if(typeof this.cancelAction=="function")return this.cancelAction();this.cancelDestinationPath?this.$router.push(this.cancelDestinationPath):this.$router.back()}}}},getClearBtn(t={}){const e=t||{};return{name:e.name||"Clear",color:e.color||"warning",slot:"end",onClick:async()=>{if(e.onClick)return e.onClick();await H("Are you sure you want to clear field data?")&&this.clearValue()}}},getBackBtn(t={}){const e=t||{},o=()=>!(this.currentFields.length===1||this.currentIndex<=0);return{name:(e==null?void 0:e.name)||"Back",slot:"end",state:{disabled:{default:()=>!1,onsubmit:()=>!0},visible:{onload:()=>o(),default:()=>o()}},onClick:()=>e.onClick?e.onClick():this.goBack()}},getNextBtn(t={}){const e=t||{},o=()=>!(this.currentIndex+1>=this.currentFields.length||this.currentFields.length<=1);return{name:(e==null?void 0:e.name)||"Next",color:(e==null?void 0:e.color)||"success",slot:"end",state:(e==null?void 0:e.state)||{disabled:{onsubmit:()=>!0,default(n){return"requireNext"in n?!n.requireNext:!1}},visible:{onsubmit:()=>!1,onfinish:()=>!1,default:()=>o(),onload:()=>o()}},onClick:()=>e.onClick?e.onClick(this.formData,this.computedFormData):this.goNext()}},getFinishBtn(t={}){const e=t||{},o=()=>this.currentIndex+1>=this.currentFields.length;return{name:(e==null?void 0:e.name)||"Finish",color:(e==null?void 0:e.color)||"success",slot:"end",state:{disabled:{default:()=>!1,onsubmit:()=>!0},visible:{onfinish:()=>!0,onsubmit:()=>!0,default:()=>o(),onload:()=>o()}},onClick:()=>e.onClick?e.onClick():this.goNext()}},onVisibleBtnState(t){var e,o,n;try{if((o=(e=this.currentField)==null?void 0:e.config)!=null&&o.hiddenFooterBtns.includes(t.name))return!1}catch(c){}if((n=t==null?void 0:t.state)!=null&&n.visible){if(this.state in t.state.visible)return t.state.visible[this.state](this.currentField,this.formData);if("default"in t.state.visible)return t.state.visible.default(this.currentField,this.formData)}return!0},onDisabledBtnState(t){var e;if((e=t==null?void 0:t.state)!=null&&e.disabled){if(this.state in t.state.disabled)return t.state.disabled[this.state](this.currentField,this.formData);if("default"in t.state.disabled)return t.state.disabled.default(this.currentField,this.formData)}return!1},getDefaultSummaryField(){return{id:"__form_summary__",helpText:"Summary",type:ut.TT_SUMMARY,config:{hiddenFooterBtns:["Clear"]},options:(t,e)=>{const o=[];for(const n in t){const c=this.currentFields.filter(d=>d.id===n||d.proxyID===n)[0],_=t[n];if(!_||c.appearInSummary!=null&&!c.appearInSummary(t,n))continue;(Array.isArray(_)?_:[_]).forEach(d=>{if(c.summaryMapValue){o.push(c.summaryMapValue(d,t,e[n]));return}o.push({label:c.helpText,value:d.label})})}return o}}},resolveFormValues(t){const e={};for(const o in t)t[o]!=null&&(e[o]=t[o]);return e},async onFinishAction(){const t=this.resolveFormValues(this.formData),e=this.resolveFormValues(this.computedFormData);if(this.onFinish)try{this.state="onsubmit",await this.onFinish(t,e)}catch(o){console.error(o),tt("".concat(o))}this.state="onfinish",this.$emit("onFinish",t,e)},async goNext(){if(this.currentField.validation){const t=this.formData[this.currentField.id],e=this.currentField.validation(t,this.formData,this.computedFormData);if(e)return et(e.join(", "),2e3)}this.currentField.beforeNext&&!await this.currentField.beforeNext(this.formData[this.currentField.id],this.formData,this.computedFormData,this)||await this.onNext()},async goBack(){for(let t=this.currentIndex;t>=0;--t){const e=this.currentFields[t];if(!(!F.isEmpty(this.currentField)&&this.currentField.id===e.id)){await this.initFieldOnce(e);try{if(!await this.checkFieldCondition(e))continue}catch(o){continue}await this.setActiveField(t,"prev");return}}},async checkFieldCondition(t){return t.condition&&!await t.condition(this.formData,this.computedFormData)?(typeof t.onConditionFalse=="function"&&t.onConditionFalse(),this.formData[t.id]=t.defaultOutput?t.defaultOutput(this.formData,this.computedFormData):null,t.computedValue&&(this.computedFormData[t.id]=t.defaultComputedOutput?t.defaultComputedOutput(this.formData,this.computedFormData):null),!1):!0},onFieldActivated(t){this.state="onload",this.currentFieldContext=t,this.currentField.onload&&this.currentField.onload(t)},async onUnload(t=""){try{if(this.state="unload",!F.isEmpty(this.currentField)&&this.currentField.unload){const e=this.formData[this.currentField.id];await this.currentField.unload(e,t,this.formData,this.computedFormData,this)}}catch(e){console.error(e)}},buildFormData(t){this.formData={},t.forEach(e=>{e.proxyID&&(this.formData[e.proxyID]=null),this.formData[e.id]=null})},async setActiveFieldValue(t){this.state="onValue";const e=this.currentField.proxyID,o=this.currentField.id;e&&(this.formData[e]=t),this.formData[o]=t,typeof this.currentField.updateHelpTextOnValue=="function"&&(this.helpText=this.currentField.updateHelpTextOnValue(t,this.formData))},async onNext(){const t=this.currentFields.length;for(let e=this.currentIndex;e<t;++e){const o=this.currentFields[e];if(!(!F.isEmpty(this.currentField)&&this.currentField.id===o.id)){await this.initFieldOnce(o);try{if(!await this.checkFieldCondition(o))continue}catch(n){continue}if(typeof this.currentField.exitsForm=="function"&&this.currentField.exitsForm(this.formData,this.computedFormData))break;this.setActiveFieldComputedValue(),this.setActiveField(e,"next");return}}this.setActiveFieldComputedValue(),await this.onFinishAction()},async setActiveField(t,e=""){var n;await this.onUnload(e),this.state=e,this.currentIndex=t,this.currentField=this.currentFields[this.currentIndex],await this.initFieldOnce(this.currentField),this.helpText=this.currentField.dynamicHelpText?this.currentField.dynamicHelpText(this.formData):typeof this.currentField.updateHelpTextOnValue=="function"?this.currentField.updateHelpTextOnValue(this.formData[this.currentField.id],this.computedFormData[this.currentField.id]):this.currentField.helpText,this.footerBtns=[this.getCancelBtn()],this.currentField.config&&this.currentField.config.footerBtns&&(this.footerBtns=this.footerBtns.concat(this.currentField.config.footerBtns));const o=(n=this.currentField.config)==null?void 0:n.overrideDefaultFooterBtns;this.footerBtns.push(this.getClearBtn(o==null?void 0:o.clearBtn)),this.footerBtns.push(this.getBackBtn(o==null?void 0:o.backBtn)),this.footerBtns.push(this.getNextBtn(o==null?void 0:o.nextBtn)),this.footerBtns.push(this.getFinishBtn(o==null?void 0:o.finishBtn))},setActiveFieldComputedValue(){if(typeof this.currentField=="object"&&typeof this.currentField.computedValue=="function"){const t=this.currentField.proxyID||this.currentField.id,e=this.formData[t];e!=null||!e?this.computedFormData[t]=this.currentField.computedValue(e,this.formData,this.computedFormData):this.computedFormData[t]=null}},onFieldValue(t){this.setActiveFieldValue(t),"requireNext"in this.currentField&&!this.currentField.requireNext&&this.onNext()},async initFieldOnce(t){typeof t.init=="function"&&(this.fieldsInitialisedOnce[t.id]||(this.fieldsInitialisedOnce["".concat(t.id)]=await t.init(this.formData,this.computedFormData)))}}});function Ot(t,e,o,n,c,_){const h=s("ion-title"),d=s("ion-col"),C=s("info-card"),g=s("ion-row"),E=s("ion-toolbar"),O=s("ion-header"),v=s("ion-content"),P=s("ion-button"),M=s("ion-footer"),q=s("ion-page");return a(),V(y,null,[I(f(t.currentField)+" ",1),u(q,null,{default:r(()=>[u(O,null,{default:r(()=>[u(E,null,{default:r(()=>[u(g,null,{default:r(()=>{var l,D;return[u(d,null,{default:r(()=>[u(h,{class:"his-lg-text"},{default:r(()=>[I(f(t.helpText),1)]),_:1})]),_:1}),(D=(l=t.currentField)==null?void 0:l.config)!=null&&D.toolbarInfo?(a(),m(d,{key:0},{default:r(()=>{var R,B;return[u(C,{style:{height:"100%"},items:(B=(R=t.currentField)==null?void 0:R.config)==null?void 0:B.toolbarInfo},null,8,["items"])]}),_:1})):ot("",!0)]}),_:1})]),_:1})]),_:1}),u(v,null,{default:r(()=>[(a(),m(nt,null,[(a(),m(rt(t.currentField.type),{key:t.currentField.id,config:t.currentField.config,options:t.currentField.options,preset:t.currentField.preset,clear:t.valueClearIndex,fdata:t.formData,cdata:t.computedFormData,activationState:t.state,onValue:t.currentField.onValue,defaultValue:t.currentField.defaultValue,onValueUpdate:t.currentField.onValueUpdate,footerButtonEvent:t.ftBtnEvent,onOnValue:t.onFieldValue,onOnFieldActivated:t.onFieldActivated},null,40,["config","options","preset","clear","fdata","cdata","activationState","onValue","defaultValue","onValueUpdate","footerButtonEvent","onOnValue","onOnFieldActivated"]))],1024))]),_:1}),u(M,null,{default:r(()=>[u(E,{color:"dark"},{default:r(()=>[(a(!0),V(y,null,L(t.footerBtns,(l,D)=>st((a(),m(P,{key:D,slot:l.slot||"start",class:at(l.styleClass),onClick:R=>t.onFtButtonClicked(l),color:l.color||"primary",size:l.size||"large",disabled:t.onDisabledBtnState(l)},{default:r(()=>[I(f(l.name),1)]),_:2},1032,["slot","class","onClick","color","size","disabled"])),[[lt,t.onVisibleBtnState(l)]])),128))]),_:1})]),_:1})]),_:1})],64)}const xt=T(gt,[["render",Ot]]);export{xt as H};
