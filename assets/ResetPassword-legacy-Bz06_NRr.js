System.register(["./HisStandardForm-legacy-SfmqjxzI.js","./index-legacy-BN_YNxvw.js"],(function(e,a){"use strict";var o,t,i,s,n,d,r,l,u,c,p;return{setters:[e=>{o=e.H},e=>{t=e.d,i=e.r,s=e.ag,n=e.ad,d=e.ae,r=e.W,l=e.a,u=e.c,c=e.ah,p=e.U}],execute:function(){e("default",t({__name:"ResetPassword",setup(e){const a=new c,t=i(!1),v=i("code"),w=s(),h=[{id:"code",helpText:"Verification Code (Contact HelpDesk if you don't have one)",type:n.TT_BARCODE,validation:d.required,condition:()=>!t.value,onValue:async e=>{t.value=await a.validateResetPasswordToken(e.replace(/-/g,"")),t.value?v.value="new_password":r("Invalid verification code")},config:{hiddenFooterBtns:["Next","Clear"]}},{id:"new_password",proxyID:"password",helpText:"New Password",type:n.TT_PASSWORD,condition:()=>t.value,validation:e=>d.required(e),computedValue:e=>`${e.value}`.toLowerCase(),config:{hiddenFooterBtns:["Back"]}},{id:"verify_password",proxyID:"password",helpText:"Confirm Password",type:n.TT_PASSWORD,condition:()=>t.value,validation:(e,a)=>d.validateSeries([d.required,()=>e!==a.password.value?["Passwords do not match"]:null]),computedValue:e=>`${e.value}`.toLowerCase()}];async function y(e,o){await p.updateUser(a.userID,o)&&(await a.resetUserPasswordChangeCheck(),w.push("/login"))}return(e,a)=>(l(),u(o,{cancelDestinationPath:"/login",fields:h,onFinishAction:y,activeField:v.value,"skip-summary":""},null,8,["activeField"]))}}))}}}));
