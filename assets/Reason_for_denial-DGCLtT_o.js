import{d as b,I as C,cg as R,N as w,K as o,$,cn as s,O as r,F as D,V as _,_ as y,r as d,o as L,c as P,w as E,b as h}from"./index-PKQE-5WY.js";import{v as F}from"./TableView-CAqNQ_4k.js";import{C as O}from"./cxca_report_service-DGw1G2LH.js";import{D as N}from"./DrillPatientIds-BQk5t3Wk.js";import"./Export-BS7ZKrmx.js";import"./TableView-D_43BkE1.js";import"./fuse-YdZE3OCN.js";import"./HisKeyboard-DMN0icra.js";const p=o([]),l=o(""),i=o(""),u=o(""),k=o(!1),T=o(""),S=b({components:{IonPage:C,IonLoading:R,v2Datatable:F},setup(){const t=async()=>{const e=new O;e.startDate=l.value,e.endDate=i.value;try{const a=await e.getClinicReport("REASON FOR NOT SCREENING REPORT"),n=m(a);p.value=n}catch(a){console.log(a)}},m=e=>Object.keys(e).map(a=>({reason:a,patients:e[a]})),v=async(e,a)=>{a.length<=0||(await r.create({component:N,backdropDismiss:!1,cssClass:"large-modal",componentProps:{title:e,subtitle:u,patientIdentifiers:a,onFinish:()=>r.getTop().then(n=>n&&r.dismiss())}})).present()},f=["Reason","Total"],g=[[{label:"Reason",ref:"data.reason",value:e=>e.reason},{label:"Total",ref:"data.patients.length",secondaryLabel:"Clients diagnosed with",value:e=>e.patients.length,tdClick:({column:e,data:a})=>v("".concat(e.secondaryLabel," ").concat(a.reason," "),a.patients)}]],c=()=>$([{id:"start_date",helpText:"Start Date",type:D.TT_FULL_DATE,validation:e=>_.required(e),computedValue:e=>e.value},{id:"end_date",helpText:"End Date",type:D.TT_FULL_DATE,validation:e=>_.required(e),computedValue:e=>e.value}],(e,a)=>{l.value=a.start_date,i.value=a.end_date,u.value="Period (".concat(s(l.value)," to ").concat(s(i.value),")"),r.dismiss(),T.value="".concat(s(l.value)," to ").concat(s(i.value)),t()});return w(()=>!p.value.length&&c()),{columns:g,isLoading:k,reportData:p,period:u,csvQuarter:T,csvheaders:f,generate:t,configure:c}}});function V(t,m,v,f,g,c){const e=d("ion-loading"),a=d("v2Datatable"),n=d("ion-page");return L(),P(n,null,{default:E(()=>[h(e,{"is-open":t.isLoading,message:"Please wait..."},null,8,["is-open"]),h(a,{title:"Denial Reason",subtitle:t.period,columns:t.columns,columnData:t.reportData,rowsPerPage:25,onConfigure:t.configure,csvQuarter:t.csvQuarter,headers:t.csvheaders,onRefresh:t.generate},null,8,["subtitle","columns","columnData","onConfigure","csvQuarter","headers","onRefresh"])]),_:1})}const G=y(S,[["render",V]]);export{G as default};
