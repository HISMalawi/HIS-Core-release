import{d as P,r as M,B as z,a as _,b as l,w as t,e as n,f as s,a4 as U,m as j,a5 as A,j as C,I as R,b5 as B,h as D,a9 as w,aa as $,ac as V,ad as T,k as I,t as S,n as E,c as N,g as Y,bb as q,ak as G,aZ as H,aR as K,aC as J,em as Q,en as X,c0 as x,ai as ee,eo as te,H as g,z as F,S as ae,ap as b,ej as ne,a6 as se}from"./index-DWvBcSFv.js";import{_ as oe}from"./FieldMixin.vue_vue_type_script_lang-DKN5g0H1.js";const le=P({__name:"DateMonthSelector",props:{date:String,onMonth:Object},setup(e){const a=e,i=M(z(a.date).format("MMM")),h=[["Jan","Feb","Mar"],["Apr","May","Jun"],["Jul","Aug","Sep"],["Oct","Nov","Dec"]],u={Jan:1,Feb:2,Mar:3,Apr:4,May:5,Jun:6,Jul:7,Aug:8,Sep:9,Oct:10,Nov:11,Dec:12};function v(d){i.value=d;const p=u[d];typeof a.onMonth=="function"&&a.onMonth(p)}return(d,p)=>(l(),_(s(E),null,{default:t(()=>[n(s(U),null,{default:t(()=>[n(s(j),null,{default:t(()=>[n(s(A),{class:"ion-text-center"},{default:t(()=>[...p[0]||(p[0]=[C(" Select a month ",-1)])]),_:1})]),_:1})]),_:1}),n(s(R),null,{default:t(()=>[n(s(B),null,{default:t(()=>[(l(),D(w,null,$(h,(m,o)=>n(s(V),{key:o},{default:t(()=>[(l(!0),D(w,null,$(m,(y,r)=>(l(),_(s(T),{"size-sm":"12","size-md":"4",style:{height:"12.3vh"},key:r,class:"ion-padding ion-text-center"},{default:t(()=>[(l(),_(s(I),{key:r,style:{"font-size":"1.6rem"},mode:"ios",color:i.value.toUpperCase()===y.toUpperCase()?"primary":"dark",fill:i.value.toUpperCase()===y.toUpperCase()?"solid":"clear",onClick:f=>v(y),size:"large"},{default:t(()=>[C(S(y),1)]),_:2},1032,["color","fill","onClick"]))]),_:2},1024))),128))]),_:2},1024)),64))]),_:1})]),_:1})]),_:1}))}}),ie=P({__name:"DateDayPicker",props:{date:String,onDay:Object},setup(e){const a=e,i=["Sun","Mon","Tues","Wed","Thurs","Fri","Sat"],h=M(z(a.date).format("D")),u=N(()=>{const d=z(a.date),p=d.startOf("month"),o=d.endOf("month").date(),y=p.day(),r=[];let f=[],c=1;for(let O=0;O<6;O++){for(let k=0;k<7;k++)O===0&&k<y?f.push(0):(c<=o?f.push(c):f.push(0),c++);r.push(f),f=[]}return r});function v(d){h.value=d,typeof a.onDay=="function"&&a.onDay(d)}return(d,p)=>(l(),_(s(E),null,{default:t(()=>[n(s(U),null,{default:t(()=>[n(s(j),null,{default:t(()=>[n(s(A),{class:"ion-text-center"},{default:t(()=>[...p[0]||(p[0]=[C(" Select a day ",-1)])]),_:1})]),_:1})]),_:1}),n(s(R),null,{default:t(()=>[n(s(B),null,{default:t(()=>[n(s(V),null,{default:t(()=>[(l(),D(w,null,$(i,m=>n(s(T),{class:"calendar-day",key:m},{default:t(()=>[Y("b",null,S(m),1)]),_:2},1024)),64))]),_:1}),(l(!0),D(w,null,$(u.value,m=>(l(),_(s(V),{class:"calendar-row",key:"".concat(m)},{default:t(()=>[(l(!0),D(w,null,$(m,o=>(l(),_(s(T),{class:q(["calendar-date ion-padding",{"selected-date":"".concat(h.value)==="".concat(o)}]),onClick:y=>o>0?v(o):null,key:o},{default:t(()=>[C(S(o>0?o:""),1)]),_:2},1032,["class","onClick"]))),128))]),_:2},1024))),128))]),_:1})]),_:1})]),_:1}))}}),re=G(ie,[["__scopeId","data-v-67b6b8ab"]]),W=4,L=3,ue=P({__name:"DateYearPicker",props:{date:String,onYear:Object},setup(e){const a=e,i=W*L,h=M(0),u=M(0),v=M(0),d=N(()=>u.value-i),p=N(()=>{const r=[];for(let c=u.value;c>d.value;--c)r.push(c);const f=H.chunk(r.sort(),L);return H.chunk(f,W)[h.value]});function m(){u.value=d.value}function o(){u.value=u.value+i}function y(r){v.value=r,typeof a.onYear=="function"&&a.onYear(r)}return K(()=>a.date,r=>{v.value=z(r).get("year"),u.value=v.value},{immediate:!0}),(r,f)=>(l(),_(s(E),null,{default:t(()=>[n(s(U),null,{default:t(()=>[n(s(j),null,{default:t(()=>[n(s(I),{onClick:m,color:"dark",slot:"start",size:"large",fill:"clear"},{default:t(()=>[n(s(J),{icon:s(Q)},null,8,["icon"])]),_:1}),n(s(A),{class:"ion-text-center"},{default:t(()=>[f[0]||(f[0]=C(" Select a year ",-1)),f[1]||(f[1]=Y("br",null,null,-1)),Y("small",null,S(d.value+1)+" to "+S(u.value),1)]),_:1}),n(s(I),{onClick:o,color:"dark",slot:"end",size:"large",fill:"clear"},{default:t(()=>[n(s(J),{icon:s(X)},null,8,["icon"])]),_:1})]),_:1})]),_:1}),n(s(R),null,{default:t(()=>[n(s(B),null,{default:t(()=>[(l(!0),D(w,null,$(p.value,(c,O)=>(l(),_(s(V),{key:O},{default:t(()=>[(l(!0),D(w,null,$(c,(k,Z)=>(l(),_(s(T),{"size-sm":"12","size-md":"4",style:{height:"12.4vh"},key:Z,class:"ion-padding ion-text-center"},{default:t(()=>[n(s(I),{size:"large",mode:"ios",color:k===v.value?"primary":"dark",fill:k===v.value?"solid":"clear",style:{"font-size":"1.6rem"},onClick:fe=>y(k)},{default:t(()=>[C(S(k),1)]),_:2},1032,["color","fill","onClick"])]),_:2},1024))),128))]),_:2},1024))),128))]),_:1})]),_:1})]),_:1}))}}),de=P({components:{PickerSelector:te,IonInput:ee,ViewPort:x,IonGrid:B,IonCol:T,IonRow:V,IonButton:I},mixins:[oe],data:()=>({value:"",date:"",isInit:!0,canShowToday:!0,showMonthSelector:!1,showDaySelector:!1,showYearSelector:!1}),mounted(){this.init()},activated(){this.init()},methods:{async init(){var e,a,i;this.$emit("onFieldActivated",this),typeof this.config.initialDate=="function"?this.date=new Date(this.config.initialDate()):this.date=new Date,this.canShowToday=typeof((e=this.config)==null?void 0:e.addTodayBtn)=="function"?this.config.addTodayBtn(this.fdata,this.cdata):(i=(a=this.config)==null?void 0:a.addTodayBtn)!=null?i:!0,await this.setDefaultValue(),this.isInit=!1},async setDefaultValue(){if(this.value)this.date=new Date(this.value);else if(this.defaultValue){const e=await this.defaultValue(this.fdata,this.cdata);e&&(this.isInit=!1,this.date=new Date(e))}},add(e){this.date=g.add(this.fmt(this.date),e,1)},subtract(e){this.date=g.subtract(this.fmt(this.date),e,1)},today(){this.date=new Date(ae.getSessionDate())},fmt(e){return g.toStandardHisFormat(e)},async selectDay(){const e=await F.create({component:re,backdropDismiss:!0,cssClass:"custom-modal-backdrop",componentProps:{date:this.fmt(this.date),onDay:a=>{const[i,h]=this.fmt(this.date).split("-");this.date=new Date("".concat(i,"-").concat(h,"-").concat(a)),e.dismiss()}}});e.present()},async selectMonth(){const e=await F.create({component:le,backdropDismiss:!0,cssClass:"custom-modal-backdrop",componentProps:{date:this.fmt(this.date),onMonth:a=>{const[i,h,u]=this.fmt(this.date).split("-");this.date=new Date("".concat(i,"-").concat(a,"-").concat(u)),e.dismiss()}}});e.present()},async selectYear(){const e=await F.create({component:ue,backdropDismiss:!0,cssClass:"custom-modal-backdrop",componentProps:{date:this.fmt(this.date),onYear:a=>{const[i,h,u]=this.fmt(this.date).split("-");this.date=new Date("".concat(a,"-").concat(h,"-").concat(u)),e.dismiss()}}});e.present()}},computed:{getYear(){return g.getYear(this.fmt(this.date))},getMonth(){return g.getMonth(this.fmt(this.date))},getDay(){return g.getDay(this.fmt(this.date))}},watch:{date(e){this.isInit||(this.value=g.toStandardHisFormat(e))},value(e){if(!e){this.$emit("onValue",null);return}this.$emit("onValue",{label:e,value:this.value})},clear(){this.value=""}}});function ce(e,a,i,h,u,v){const d=b("ion-input"),p=b("view-port"),m=b("picker-selector"),o=b("ion-col"),y=b("ion-row"),r=b("ion-button"),f=b("ion-grid");return l(),D(w,null,[n(p,{showFull:!1},{default:t(()=>[n(d,{class:"input_display",readonly:!0,value:e.value},null,8,["value"]),ne(e.$slots,"default",{date:e.value})]),_:3}),n(f,{class:"his-floating-keyboard"},{default:t(()=>[n(y,null,{default:t(()=>[n(o,{"sm-size":"12"},{default:t(()=>[n(m,{value:e.getYear,onOnIncrement:a[0]||(a[0]=c=>e.add("year")),onOnDecrement:a[1]||(a[1]=c=>e.subtract("year")),onOnValue:e.selectYear},null,8,["value","onOnValue"])]),_:1}),n(o,{"sm-size":"12"},{default:t(()=>[n(m,{value:e.getMonth,onOnIncrement:a[2]||(a[2]=c=>e.add("month")),onOnDecrement:a[3]||(a[3]=c=>e.subtract("month")),onOnValue:e.selectMonth},null,8,["value","onOnValue"])]),_:1}),n(o,{"sm-size":"12"},{default:t(()=>[n(m,{value:e.getDay,onOnIncrement:a[4]||(a[4]=c=>e.add("day")),onOnDecrement:a[5]||(a[5]=c=>e.subtract("day")),onOnValue:e.selectDay},null,8,["value","onOnValue"])]),_:1})]),_:1}),n(y,null,{default:t(()=>[e.canShowToday?(l(),_(o,{key:0,class:"ion-text-center"},{default:t(()=>[n(r,{color:"success",style:{width:"100%",height:"6vh"},onClick:e.today},{default:t(()=>[...a[7]||(a[7]=[Y("b",null,"TODAY",-1)])]),_:1},8,["onClick"])]),_:1})):se("",!0),n(o,null,{default:t(()=>[n(r,{disabled:!e.config.allowUnknown,color:"warning",style:{width:"100%",height:"6vh"},onClick:a[6]||(a[6]=c=>e.value="Unknown")},{default:t(()=>[...a[8]||(a[8]=[Y("b",null,"Unknown",-1)])]),_:1},8,["disabled"])]),_:1})]),_:1})]),_:1})],64)}const he=G(de,[["render",ce]]);export{he as default};
