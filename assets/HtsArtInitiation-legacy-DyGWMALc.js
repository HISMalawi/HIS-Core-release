System.register(["./index-legacy-Ck8hVlzC.js","./hts_art_initiation_service-legacy-JopiRJBQ.js","./LocationFieldOptions-legacy-UgaUiM8M.js","./HisStandardForm-legacy-OroqgFde.js","./storage-legacy-CIkBlJKf.js"],(function(e,t){"use strict";var n,a,i,o,l,r,s,u,d,c,f,p,m,T,_,b;return{setters:[e=>{n=e.d,a=e.I,i=e.K,o=e.dF,l=e.F,r=e.ct,s=e.ah,u=e._,d=e.r,c=e.o,f=e.c,p=e.w,m=e.b},e=>{T=e.H},e=>{_=e.g},e=>{b=e.H},null],execute:function(){const t=n({components:{IonPage:a,HisStandardForm:b},setup(){const e=i([]),t=new T(-1),{toOption:n,yesNoOptions:a,saveEncounter:u,patientDashboardUrl:d}=o({onInitVisit:()=>{e.value=[{id:"is_referral",helpText:"Referral for ART (Re-)Initiation",type:l.TT_YES_NO,isRequired:()=>!0,finalComputedValue:e=>({obs:t.buildValueText("ART referral",e)}),options:()=>[{label:"Do you want to refer client?",value:"",values:a()}]},{id:"art_site",helpText:"Intended Site for ART",type:l.TT_SELECT,isRequired:()=>!0,finalComputedValue:({label:e})=>({obs:t.buildValueText("Referral location",e)}),options:(e,t="")=>_(t),condition:e=>"Yes"===e.is_referral,defaultValue:()=>T.getLocationName(),config:{footerBtns:[{name:"Here",slot:"end",onClickComponentEvents:{setValue:()=>T.getLocationName()},onClick:()=>null}],showKeyboard:!0,isFilterDataViaApi:!0}},{id:"art_appointment_date",helpText:"Appointment Date for ART Referral",type:l.TT_DATE_PICKER,isRequired:()=>!0,defaultValue:()=>t.date,condition:e=>"Yes"===e.is_referral,finalComputedValue:e=>({obs:t.buildValueDate("Appointment date",`${e.value}`)}),config:{minDate:()=>t.date,infoItems:e=>[{label:"Set appointment date",value:r(e)}],hiddenFooterBtns:["Clear"]}},c(),{id:"art_outcome_field",helpText:"Art outcome",type:l.TT_HIDDEN,defaultValue:()=>n("Unknown"),finalComputedValue:e=>({obs:t.buildValueCoded("Antiretroviral status or outcome",e.value)})}]}});function c(){let e=[];return{id:"linkage_code",helpText:"LINKAGE CODE",type:l.TT_LINKAGE_CODE,isRequired:()=>!0,validation:t=>t?.other?.isValidLinkageCode?null:(e=s.uniq(e.concat(`${t.value}`)),["Invalid Scanform linkage code"]),condition:e=>"Yes"===e.is_referral,finalComputedValue:n=>({obs:[t.buildValueText("HTC Serial number",`${n.value}`),...e.map((e=>t.buildValueText("Invalid",e)))]})}}return{patientDashboardUrl:d,onFinish:function(e,n){u({encounterName:"ART Enrollment",encounterTypeID:t.encounterTypeID,computedData:n})},fields:e}}});e("default",u(t,[["render",function(e,t,n,a,i,o){const l=d("his-standard-form"),r=d("ion-page");return c(),f(r,null,{default:p((()=>[m(l,{formLabel:"ART (Re-) Initiation",fields:e.fields,onFinishAction:e.onFinish,cancelDestinationPath:e.patientDashboardUrl()},null,8,["fields","onFinishAction","cancelDestinationPath"])])),_:1})}]]))}}}));
