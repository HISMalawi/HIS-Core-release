System.register(["./index-legacy-iEOS67hm.js","./HisStandardForm-legacy-UdjTFVCq.js","./useEncounter-legacy-0Rx46XKA.js","./util-legacy-C4Rh4NgV.js","./commons-legacy-jt-vwAZb.js","./appointment_service-legacy-4YAVhzi2.js","./isEmpty-legacy-j3LEhgDm.js","./encounter_guidelines-legacy-CLZ4M_-v.js","./GuidelineEngine-legacy--xbEVG44.js"],(function(e,t){"use strict";var a,n,i,l,o,s,u,r,d,p,c,m,g,_,y,T,v,I,A,D;return{setters:[e=>{a=e.d,n=e.r,i=e.bI,l=e.dO,o=e.ab,s=e.dS,u=e.a9,r=e.ac,d=e.cW,p=e.u,c=e.v,m=e.w,g=e.x,_=e.y,y=e.a5},e=>{T=e.H},e=>{v=e.u},e=>{I=e.g},e=>{A=e.r},e=>{D=e.A},null,null,null],execute:function(){e("default",a({__name:"Appointment",setup(e){const t=n([]),a=new i(-1,l.APPOINTMENT),{goToNextTask:b,patientDashboardUrl:E}=v(((e,n)=>{a.patientID=n,a.providerID=e,t.value=[(()=>{let e={},t=-1,i={};return{id:"appointment",helpText:"Appointment booking",type:o.TT_DATE_PICKER,init:async()=>(t=await u.get(s.CLINIC_APPOINTMENT_LIMIT),e=await D.getJson(`programs/${a.programID}/patients/${n}/next_appointment_date`,{date:a.date}),!0),defaultValue:()=>e?.appointment_date,validation:e=>r.required(e),computedValue:t=>[{concept_id:I("APPOINTMENT_DATE"),value_datetime:t,obs_datetime:a.date},{concept_id:I("ESTIMATED_DATE"),value_datetime:e?.appointment_date,obs_datetime:a.date}],config:{minDate:()=>a.date,maxDate:()=>e?.drugs_run_out_date,supValue:e=>`${(i[e]||[]).length}`,infoItems:async n=>(i[n]||(i[n]=await D.getJson(`programs/${a.programID}/booked_appointments`,{date:n,paginate:!1})),[{label:"Medication Run out Date",value:d(e?.drugs_run_out_date||"Not available")},{label:"User set appointment date",value:d(n)},{label:"Appointments",value:(i[n]||[]).length},{label:"Appointment limit (per/day)",value:t||"N/A"}]),hiddenFooterBtns:["Clear"]}}})()]}));async function f(e,t){await a.createEncounter(),await a.saveObservationList(await A(t)),b()}return(e,a)=>(p(),c(_(y),null,{default:m((()=>[g(T,{cancelDestinationPath:_(E),onFinishAction:f,fields:t.value,skipSummary:!0},null,8,["cancelDestinationPath","fields"])])),_:1}))}}))}}}));
