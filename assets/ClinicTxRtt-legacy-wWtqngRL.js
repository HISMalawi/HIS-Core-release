System.register(["./ReportMixin.vue_vue_type_script_lang-legacy-C9Ns8WHu.js","./tx_report_service-legacy-BQbAti7N.js","./TableReportTemplate-legacy-BuasS8uz.js","./index-legacy-C29Eb2Qm.js","./MultiFieldDateHelper-legacy-DNe3hLpD.js","./dynamic-import-helper-legacy-DYK5bIOV.js","./KbLayouts-legacy-BKvPSxzZ.js","./HisKbConfigurations-legacy-vrLd9Pgz.js","./BasicReportTemplate-legacy-Dme8z_3V.js","./Export-legacy-DkNEJvfQ.js","./SIngleTouchField-legacy-BRNk_9sq.js","./Pagination-legacy-mp0eCPy0.js","./HisStandardForm-legacy-BpfFI5_j.js","./TouchScreenForm-legacy-BmEuIwWy.js","./ToolbarMediumCard-legacy-CF38wqjC.js","./Transformers-legacy-DhNYVLaS.js","./ViewPort-legacy-CDi_rmkw.js","./ReportErrors-legacy-BEWHM-PZ.js"],(function(t,e){"use strict";var r,s,l,o,i,a,n,d,u,c,h,g,m;return{setters:[t=>{r=t._},t=>{s=t.T},t=>{l=t.R},t=>{o=t.d,i=t.L,a=t.ab,n=t.cz,d=t._,u=t.r,c=t.o,h=t.c,g=t.w,m=t.b},null,null,null,null,null,null,null,null,null,null,null,null,null,null],execute:function(){const e=o({mixins:[r],components:{ReportTemplate:l},data:()=>({title:"TX RTT Report",cohort:{},rows:[],columns:[[i.thTxt("Age group"),i.thTxt("Gender"),i.thTxt("Returned <3 mo"),i.thTxt("Returned 3-5 mo"),i.thTxt("Returned 6+ mo")]],aggregated:[]}),created(){this.fields=this.getDateDurationFields()},methods:{async onPeriod(t,e){this.rows=[],this.aggregated=[],this.report=new s,this.report.setStartDate(e.start_date),this.report.setEndDate(e.end_date),this.report.setOccupation(e.occupation),this.period=this.report.getDateIntervalPeriod(),this.cohort=await this.report.getClinicTxRtt(),await this.setRows("F"),await this.setRows("M"),this.setMaleTotalsRow(),await this.setFemaleRows()},drillData(t,e,r,s){return this.aggregated.push({gender:r,ageGroup:e,column:s,data:t}),this.drill(t,`${e} (${r}s) ${s}`)},setMaleTotalsRow(){const t=t=>this.drill(this.aggregated.filter((e=>"Male"===e.gender&&e.column===t)).reduce(((t,e)=>t.concat(e.data)),[]),`All Male ${t}`);this.rows.push([i.td("All"),i.td("Male"),t("Returned <3 mo"),t("Returned 3-5 mo"),t("Returned 6+ mo")])},async setFemaleRows(){const t=this.aggregated.filter((t=>t.gender.match(/female/i))).reduce(((t,e)=>t.concat(e.data)),[]),e=await this.report.getMaternalStatus(a.uniq(t)),r=e.FBf.concat(e.FP),s=t=>this.aggregated.filter((t=>t.gender.match(/female/i))).filter((e=>e.column===t)).reduce(((t,e)=>a.uniq(t.concat(e.data))),[]),l=(t,r)=>this.drill(s(r).filter((r=>e[t].includes(r))),`All ${r}`),o=t=>this.drill(s(t).filter((t=>!r.includes(t))),`All ${t}`);this.rows.push([i.td("All"),i.td("FP"),l("FP","Returned <3 mo"),l("FP","Returned 3-5 mo"),l("FP","Returned 6+ mo")]),this.rows.push([i.td("All"),i.td("FNP"),o("Returned <3 mo"),o("Returned 3-5 mo"),o("Returned 6+ mo")]),this.rows.push([i.td("All"),i.td("FBF"),l("FBf","Returned <3 mo"),l("FBf","Returned 3-5 mo"),l("FBf","Returned 6+ mo")])},async setRows(t){const e=(t,e)=>t.filter((t=>e(t.months))).map((t=>t.patient_id));for(const r in n){const s=n[r],l=this.formatGender(t);if(s in this.cohort){const r=this.cohort[s][t],o=t=>e(r,t);this.rows.push([i.td(s),i.td(l),this.drillData(o((t=>t<3)),s,l,"Returned <3 mo"),this.drillData(o((t=>t>=3&&t<=5)),s,l,"Returned 3-5 mo"),this.drillData(o((t=>t>=6)),s,l,"Returned 6+ mo")])}else this.rows.push([i.td(s),i.td(l),i.td(0),i.td(0),i.td(0)])}}}});t("default",d(e,[["render",function(t,e,r,s,l,o){const i=u("report-template"),a=u("ion-page");return c(),h(a,null,{default:g((()=>[m(i,{title:t.title,period:t.period,rows:t.rows,fields:t.fields,columns:t.columns,config:{showIndex:!0},reportPrefix:"Clinic",onReportConfiguration:t.onPeriod},null,8,["title","period","rows","fields","columns","onReportConfiguration"])])),_:1})}]]))}}}));
