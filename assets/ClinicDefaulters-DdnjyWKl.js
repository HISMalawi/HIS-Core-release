import{d as C,r as s,o as V,D as w,a as k,w as x,f as v,b as L,e as y,cv as A,cw as i,x as B,m as I,q as T,dc as G}from"./index-qFt4YszW.js";import{v as P}from"./TableView-Dd0ekOnk.js";import{D as R}from"./defaulters_report_service-CYfDTrOp.js";import{w as S,b as q}from"./v2utils-CSrGKWGQ.js";import"./Export-CDLTNdY8.js";import"./index-BckLFmVa.js";const z=C({__name:"ClinicDefaulters",setup(E){const $=B("reports.png"),t=s([]),u=s(""),o=s([]),a=new R;a.setIsPepfar(!1);const h=[[q(),{label:"First name",ref:"given_name",encrypted:!0},{label:"Last name",ref:"family_name",encrypted:!0},{label:"Gender",ref:"gender",toValue:e=>A(e)},{label:"Birthdate",ref:"birthdate",toValue:e=>"".concat(i(e))},{label:"Appointment date",ref:"appointment_date",toValue:e=>"".concat(i(e))},{label:"Date defaulted",ref:"defaulter_date",toValue:e=>"".concat(i(e))},{label:"Address",ref:"district",encrypted:!0,exportedValue:{dataValue:e=>{var r,n,l,m,f,p,b,g,D,_;return"\n                Cell: ".concat((n=(r=e.data)==null?void 0:r.cell_number)!=null?n:"-",",\n                Village: ").concat((m=(l=e.data)==null?void 0:l.village)!=null?m:"-",", \n                District: ").concat((p=(f=e.data)==null?void 0:f.district)!=null?p:"-",", \n                TA: ").concat((g=(b=e.data)==null?void 0:b.ta)!=null?g:"-",", \n                Landmark: ").concat((_=(D=e.data)==null?void 0:D.land_mark)!=null?_:"-"," \n            ")}},value:e=>(e.cell_number?"CELL: ".concat(e.cell_number," <br/>"):"")+(e.village?"VILLAGE: ".concat(e.village," <br/>"):"")+(e.district?"DISTRICT: ".concat(e.district," <br/>"):"")+(e.ta?"TA: ".concat(e.ta," <br/>"):"")+(e.landmark?"Landmark: ".concat(e.landmark):"")}]],d=()=>S(async()=>{if(!(a.startDate&&a.endDate))return T("Start date and end date required!");o.value=[],t.value=[],t.value=await a.getDefaulters(),o.value=[{text:"Total defaulters: <b>".concat(t.value.length,"</b>"),icon:G,color:"primary"}]}),c=()=>w({onFinish:(e,r,n,l)=>{l&&a.setOccupation(l),u.value="".concat(n),a.startDate=e,a.endDate=r,d()}});return V(()=>!t.value.length&&c()),(e,r)=>(L(),k(v(I),null,{default:x(()=>[y(P,{"default-sort-order":"asc","default-sorted-column":"arv_number","icon-url":v($),title:"Clinic Defaulters Report","report-prefix":"Clinic",subtitle:u.value,columns:h,columnData:t.value,rowsPerPage:50,onConfigure:c,onRefresh:d,headerBadge:o.value},null,8,["icon-url","subtitle","columnData","headerBadge"])]),_:1}))}});export{z as default};
