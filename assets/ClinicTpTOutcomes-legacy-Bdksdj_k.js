System.register(["./ReportMixin.vue_vue_type_script_lang-legacy-BXKt2hDv.js","./clinic_report_service-legacy-O5BJ4gcX.js","./TableReportTemplate-legacy-Hr5dz0VP.js","./index-legacy-CFSeLXed.js","./BasicReportTemplate-legacy-C58yS6Mm.js","./Export-legacy-B9XuHww0.js","./Pagination-legacy-s1QublXS.js","./HisStandardForm-legacy-CTqUDOsg.js","./ReportErrors-legacy-C883ai84.js"],(function(t,e){"use strict";var i,o,r,a,l,n,s,d,c,p,h,u;return{setters:[t=>{i=t._},t=>{o=t.C},t=>{r=t.R},t=>{a=t.d,l=t.L,n=t.ae,s=t._,d=t.r,c=t.o,p=t.c,h=t.w,u=t.b},null,null,null,null,null],execute:function(){const e=[{indicator:"started_tpt_new",label:t=>`Started (New on ART) ${t}`},{indicator:"started_tpt_prev",label:t=>`Started (Previous on ART) ${t}`},{indicator:"completed_tpt_new",label:t=>`Completed (New on ART) ${t}`},{indicator:"completed_tpt_prev",label:t=>`Completed (Previous on ART) ${t}`},{indicator:"not_completed_tpt",label:t=>`Not completed ${t}`},{indicator:"died",label:t=>`Died on ${t}`},{indicator:"defaulted",label:t=>`Defaulted ${t}`},{indicator:"stopped",label:t=>`Stopped ${t}`},{indicator:"transfer_out",label:t=>`Transfer out with ${t}`},{indicator:"confirmed_tb",label:t=>`Confirmed TB on ${t}`},{indicator:"pregnant",label:t=>`Pregnant on ${t}`},{indicator:"breast_feeding",label:t=>`Breastfeeding ${t}`},{indicator:"skin_rash",label:t=>`Skin rash ${t}`},{indicator:"peripheral_neuropathy",label:t=>`Peripheral neuropathy ${t}`},{indicator:"yellow_eyes",label:t=>`Yellow eyes ${t}`},{indicator:"nausea",label:t=>`Nausea ${t}`},{indicator:"dizziness",label:t=>`Dizziness ${t}`}],T=a({mixins:[i],components:{ReportTemplate:r},data:()=>({title:"TPT Outcome",cohort:{},rows:[],columns:[[l.thTxt("Age group"),l.thTxt("TPT Type"),l.thTxt("Started TPT (New on ART)"),l.thTxt("Started TPT (Previous on ART)"),l.thTxt("Completed TPT (New on ART)"),l.thTxt("Completed TPT (Previous on ART)"),l.thTxt("Not completed TPT"),l.thTxt("Died"),l.thTxt("Defaulted"),l.thTxt("Stopped ART"),l.thTxt("TO"),l.thTxt("Confirmed TB "),l.thTxt("Pregnant"),l.thTxt("Breastfeeding"),l.thTxt("Skin rash"),l.thTxt("Peripheral neuropathy"),l.thTxt("Yellow eyes"),l.thTxt("Nausea"),l.thTxt("Dizziness")]]}),created(){this.fields=this.getDateDurationFields()},methods:{async onPeriod(t,e){this.rows=[],this.report=new o,this.report.setStartDate(e.start_date),this.report.setEndDate(e.end_date),this.report.setOccupation(e.occupation),this.period=this.report.getDateIntervalPeriod(),this.cohort=await this.report.getTtpOutcomes()||[],this.setRows(),this.setMaleTotalsRow(),await this.setFemaleAggregations()},setMaleTotalsRow(){const t=this.cohort.reduce(((t,i)=>(e.forEach((e=>{t[e.indicator]||(t[e.indicator]=[]),i[e.indicator]&&(t[e.indicator]=t[e.indicator].concat(i[e.indicator].filter((t=>"M"===t.gender)).map((t=>t.patient_id))))})),t)),{});this.rows.push([l.td("All"),l.td("Male"),...e.map((e=>this.drill(t[e.indicator],e.label("All"))))])},async setFemaleAggregations(){const t=this.cohort.reduce(((t,i)=>(e.forEach((e=>{t[e.indicator]||(t[e.indicator]=[]),i[e.indicator]&&(t[e.indicator]=t[e.indicator].concat(i[e.indicator].filter((t=>"F"===t.gender)).map((t=>t.patient_id))),t.all=t.all.concat(t[e.indicator]))})),t)),{all:[]}),i=this.cohort.reduce(((t,e)=>n.uniq(t.concat(e.pregnant||[]))),[]),o=this.cohort.reduce(((t,e)=>n.uniq(t.concat(e.breast_feeding||[]))),[]),r=i.concat(o);this.rows.push([l.td("All"),l.td("FP"),...e.map((e=>this.drill(t[e.indicator].filter((t=>i.includes(t))),e.label("All FP"))))]),this.rows.push([l.td("All"),l.td("FNP"),...e.map((e=>this.drill(t[e.indicator].filter((t=>!r.includes(t))),e.label("All FNP"))))]),this.rows.push([l.td("All"),l.td("FBF"),...e.map((e=>this.drill(t[e.indicator].filter((t=>o.includes(t))),e.label("All FBF"))))])},setRows(){const t=[],i=[];this.cohort.forEach((o=>{const r=[l.td(o.age_group),l.td(o.tpt_type),...e.map((t=>this.drill((o[t.indicator]||[]).map((t=>t.patient_id)),t.label(o.tpt_type))))];"3HP"===o.tpt_type?i.push(r):t.push(r)})),this.rows=i.concat(t)}}});t("default",s(T,[["render",function(t,e,i,o,r,a){const l=d("report-template"),n=d("ion-page");return c(),p(n,null,{default:h((()=>[u(l,{title:t.title,period:t.period,rows:t.rows,fields:t.fields,columns:t.columns,config:{showIndex:!0},reportPrefix:"Clinic",onReportConfiguration:t.onPeriod},null,8,["title","period","rows","fields","columns","onReportConfiguration"])])),_:1})}]]))}}}));
