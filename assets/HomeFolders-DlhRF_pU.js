import{T as h}from"./TaskCard-7bqNaHi_.js";import{d as I,cc as w,ao as C,ap as E,aq as b,T as a,ae as k,ac as y,_ as B,r as o,o as r,c as l,w as c,b as d,x as A,B as g,y as T}from"./index-C234CYGF.js";const v=I({emits:["onSublist"],setup(){return{arrowBack:w}},components:{TaskCard:h,IonGrid:C,IonRow:E,IonCol:b},props:{resetList:{type:Number,required:!0},items:{type:Object,required:!0}},data:()=>({defaultIcon:"sys-setting.png",viewableItems:[]}),watch:{resetList:{handler(){a.set("ACTIVE_HOME_SUB_TAB_NAME",""),this.setItems(this.items)}},items:{async handler(e){if(e){const n=await this.filterViewable(e),t=await a.get("ACTIVE_HOME_SUB_TAB_NAME");if(typeof t=="string"&&t!=""){const s=k.find(n,{name:t});s&&this.onClick(s)}else a.invalidate("ACTIVE_HOME_SUB_TAB_NAME"),this.viewableItems=n}},immediate:!0,deep:!0}},methods:{async setItems(e){this.viewableItems=await this.filterViewable(e)},async filterViewable(e){const n=e.map(async t=>{const s={...t};return s.canShow=s.condition?await s.condition():!0,s});return(await Promise.all(n)).filter(t=>t.canShow)},async onClick(e){e.pathUrl?this.$router.push(e.pathUrl):typeof e.action=="function"?e.action():e.pathName?this.$router.push({name:e.pathName}):e.files&&(a.set("ACTIVE_HOME_SUB_TAB_NAME",e.name),this.defaultIcon="sys-setting.png",e.defaultFilesIcon&&(this.defaultIcon=e.defaultFilesIcon),this.$emit("onSublist"),this.setItems(e.files))},itemIcon(e){return y(e.icon?e.icon:this.defaultIcon)}}});function N(e,n,t,s,S,M){const u=o("task-card"),_=o("ion-col"),f=o("ion-row"),p=o("ion-grid");return r(),l(p,null,{default:c(()=>[d(f,null,{default:c(()=>[(r(!0),A(g,null,T(e.viewableItems,(i,m)=>(r(),l(_,{key:m,"size-lg":"4","size-sm":"12"},{default:c(()=>[d(u,{onClick:V=>e.onClick(i),title:i.name,icon:e.itemIcon(i)},null,8,["onClick","title","icon"])]),_:2},1024))),128))]),_:1})]),_:1})}const H=B(v,[["render",N]]);export{H as default};
