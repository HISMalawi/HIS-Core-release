import{_ as r}from"./StagingMixin.vue_vue_type_script_lang-CH36xvzS.js";import{d as c,n as m,T as d,_ as p,r as h,o as l,c as g}from"./index-DTBWhHAq.js";import"./dynamic-import-helper-Bsjrd6Ro.js";import"./EncounterMixin.vue_vue_type_script_lang-DZZc0yNk.js";import"./encounter_guidelines-BDvVJmZ6.js";import"./GuidelineEngine-D6V1_Znr.js";import"./HisStandardForm-lonwENLb.js";import"./TouchScreenForm-BeJsJnwt.js";import"./ToolbarMediumCard-wr9sTFDK.js";import"./Transformers-BPPLlH12.js";import"./ViewPort-DbAo6hHM.js";import"./MultiFieldDateHelper-BWKgkEkB.js";import"./KbLayouts-VRA-vjeH.js";import"./HisKbConfigurations-GhFQZvlg.js";import"./LocationFieldOptions-C65wr29G.js";const u=c({mixins:[r],watch:{ready:{async handler(t){t&&(await this.initStaging(this.patient),this.fields=[...this.getStagingFields(),this.getStagingSummaryField()])},immediate:!0}},methods:{async assessAhdCriteria(t){const s={"Has advance HIV staging conditions":()=>Object.keys(t).some(i=>["stage_4_conditions","stage_3_conditions"].includes(i)&&((t==null?void 0:t[i])||[]).length>=1),"CD4 count is less than equal to 200":()=>{var e;const[i,...n]="".concat(((e=t.cd4_count)==null?void 0:e.value)||"").replace(/\s/g,"");return/<|=/i.test(i)&&parseInt(n.join(""))<=200}};Object.keys(s).some(i=>s[i]())&&await m("Continue with AHD screening?",{header:"Client meets AHD criteria"})&&await this.staging.saveObservationList([await this.staging.buildValueCoded("Continue with AHD","Yes")])},async onSubmit(t,s){await this.submitStaging(s),await this.assessAhdCriteria(t),d("Staging information has been saved"),this.nextTask()}}});function _(t,s,a,i,n,e){const o=h("his-standard-form");return l(),g(o,{skipSummary:!0,cancelDestinationPath:t.cancelDestination,fields:t.fields,onFinishAction:t.onSubmit},null,8,["cancelDestinationPath","fields","onFinishAction"])}const O=p(u,[["render",_]]);export{O as default};
