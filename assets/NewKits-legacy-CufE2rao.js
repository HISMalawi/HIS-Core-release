System.register(["./index-legacy-B-IGLekl.js","./testKits-legacy-DAwI-xa_.js"],(function(e,t){"use strict";var a,o,l,n,r,i,u,s,d,c,p,v,x,f,y,_,h,D,k,b,I,E,m,g,C,N,w,T,S,L,z,F,K,$,j,B,G,O,U,W,A;return{setters:[e=>{a=e.d,o=e.aW,l=e.$,n=e._,r=e.a5,i=e.S,u=e.Q,s=e.R,d=e.U,c=e.a4,p=e.a3,v=e.aQ,x=e.W,f=e.a1,y=e.ak,_=e.r,h=e.ap,D=e.t,k=e.aj,b=e.dD,I=e.a9,E=e.ad,m=e.O,g=e.K,C=e.aU,N=e.ah,w=e.a6,T=e.v,S=e.w,L=e.ab,z=e.u,F=e.x,K=e.G,$=e.Z,j=e.B,B=e.C,G=e.E,O=e.z,U=e.b1,W=e.H},e=>{A=e.T}],execute:function(){var t=document.createElement("style");t.textContent=".active[data-v-d37657b0]{border:solid 2px #2196F3}.error[data-v-d37657b0]{border:solid 2px red}\n/*$vite$:1*/",document.head.appendChild(t);const H=a({components:{IonGrid:o,IonCol:l,IonRow:n,IonPage:r,IonTitle:i,IonHeader:u,IonToolbar:s,IonContent:d,IonFooter:c,IonButton:p,BarcodeInput:v,IonItem:x,IonLabel:f,IonText:y},setup(){const{kits:e,initKits:t,saveKits:a}=A(),o=_(),l=_(!1),n=h((()=>e.value.some((t=>!t.lotNo&&t.expiryDate||!t.expiryDate&&t.lotNo||e.value.some((e=>e.expiryDateError)))))),r=()=>{e.value.forEach((e=>(e.expiryDate&&new Date(e.expiryDate)<=new Date(k.getSessionDate())?e.expiryDateError="Kit has expired!!":e.expiryDateError="",e)))};function i(t){b({id:"expiry",helpText:e.value[t].kitName+" Expiry Date",type:I.TT_FULL_DATE,defaultValue:()=>e.value[t].expiryDate},(a=>{const o=a?.value||"";e.value[t].expiryDate=o,r()}))}return D((()=>t().then((()=>{r(),l.value=!0})))),{kits:e,activeIndex:o,hasErrors:n,canFinish:l,save:async function(){if(r(),n.value)return m("Some kits have errors! please fix them below");if(!e.value.every((e=>!(e.lotNo&&e.expiryDate)))||await E("Do you want to continue without updating test kits?")){l.value=!1;try{return await a(),g("Testkits updated!"),C.back()}catch(t){console.error(`${t}`),N("General error has occured!")}l.value=!0}},onScan:function(t){e.value[o.value].lotNo=t,e.value[o.value].expiryDate||i(o.value)},updateLot:function(t){b({id:"lot",helpText:e.value[t].kitName+" Lot No.",type:I.TT_TEXT,defaultValue:()=>e.value[t].lotNo},(a=>{const o=a?.value||"";e.value[t].lotNo=o}))},updateExpiryDate:i,clear:async function(){await E("Are you sure you want to clear everything?")&&(e.value.forEach((e=>{e.expiryDate="",e.lotNo="",e.expiryDateError=""})),o.value=null)}}}}),Q={class:"his-card"};e("default",w(H,[["render",function(e,t,a,o,l,n){const r=L("ion-title"),i=L("ion-toolbar"),u=L("barcode-input"),s=L("ion-header"),d=L("ion-label"),c=L("ion-item"),p=L("ion-col"),v=L("ion-text"),x=L("ion-row"),f=L("ion-grid"),y=L("ion-content"),_=L("ion-button"),h=L("ion-footer"),D=L("ion-page");return z(),T(D,null,{default:S((()=>[F(s,null,{default:S((()=>[F(i,{color:"light"},{default:S((()=>[F(r,{class:"ion-text-center his-md-text"},{default:S((()=>[K("b",null,$(e.kits[e.activeIndex]?.kitName||"-"),1)])),_:1})])),_:1}),F(i,null,{default:S((()=>[F(u,{style:{margin:"0px auto",width:"90%"},onOnScan:e.onScan},null,8,["onOnScan"])])),_:1})])),_:1}),F(y,null,{default:S((()=>[F(f,null,{default:S((()=>[(z(!0),j(G,null,B(e.kits,((a,o)=>(z(),T(x,{onClick:()=>e.activeIndex=o,class:U(e.activeIndex===o?"his-card active":""),key:o},{default:S((()=>[F(p,{size:"4"},{default:S((()=>[K("div",Q,[F(c,{lines:"none"},{default:S((()=>[F(d,null,{default:S((()=>t[0]||(t[0]=[O(" Kit name ")]))),_:1}),F(d,{slot:"end"},{default:S((()=>[K("b",null,$(a.kitName),1)])),_:2},1024)])),_:2},1024)])])),_:2},1024),F(p,{size:"4"},{default:S((()=>[K("div",{class:U(["his-card",a.expiryDate&&!a.lotNo?"error":""])},[F(c,{onClick:t=>e.updateLot(o),lines:"none"},{default:S((()=>[F(d,null,{default:S((()=>t[1]||(t[1]=[O(" Lot No. ")]))),_:1}),F(d,{slot:"end"},{default:S((()=>[K("b",null,$(a.lotNo),1)])),_:2},1024)])),_:2},1032,["onClick"])],2)])),_:2},1024),F(p,{size:"4"},{default:S((()=>[K("div",{class:U(["his-card",!a.expiryDate&&a.lotNo?"error":""])},[F(c,{onClick:t=>e.updateExpiryDate(o),lines:"none"},{default:S((()=>[F(d,null,{default:S((()=>t[2]||(t[2]=[O(" Expiry Date ")]))),_:1}),F(d,{color:a.expiryDateError?"danger":"",slot:"end"},{default:S((()=>[K("b",null,$(a.expiryDate),1)])),_:2},1032,["color"])])),_:2},1032,["onClick"]),a.expiryDateError?(z(),T(v,{key:0,color:"danger",class:"ion-text-center"},{default:S((()=>[O($(a.expiryDateError),1)])),_:2},1024)):W("",!0)],2)])),_:2},1024)])),_:2},1032,["onClick","class"])))),128))])),_:1})])),_:1}),F(h,null,{default:S((()=>[F(i,{color:"light"},{default:S((()=>[F(_,{onClick:e.clear,slot:"end",color:"warning",size:"large"},{default:S((()=>t[3]||(t[3]=[O(" Clear ")]))),_:1},8,["onClick"]),F(_,{onClick:e.save,disabled:!e.canFinish||e.hasErrors,slot:"end",color:"success",size:"large"},{default:S((()=>t[4]||(t[4]=[O(" Finish ")]))),_:1},8,["onClick","disabled"])])),_:1})])),_:1})])),_:1})}],["__scopeId","data-v-d37657b0"]]))}}}));
