import{H as u}from"./HisStandardForm-BOy0NDXg.js";import{D as d}from"./drug_service-Tg5KcLRW.js";import{d as c,ab as s,ac as r,dc as p,aK as n,p as l,a8 as h,ad as m,u as _,v as y}from"./index-BXYGQb-P.js";const g=c({components:{HisStandardForm:u},data:()=>({fields:[],packSizes:[]}),async created(){this.fields=[{id:"drug",helpText:"Select drug",type:s.TT_SELECT,validation:e=>r.required(e),options:async(e,t="")=>(await d.getDrugs({name:t})).map(i=>({label:i.name,value:i.drug_id})),onValue:e=>(this.packSizes=p.getPackSizes(e.value),e),config:{showKeyboard:!0,isFilterDataViaApi:!0}},{id:"drug_pack_size",helpText:"Select Quantity",type:s.TT_SELECT,condition:()=>!n.isEmpty(this.packSizes),options:()=>[...this.packSizes.map(e=>({label:"".concat(e),value:e})),{label:"Other (specify)",value:"Other"}]},{id:"quantity",helpText:"Input quantity",type:s.TT_NUMBER,validation:e=>r.required(e),condition:e=>n.isEmpty(this.packSizes)||e.drug_pack_size.value.match(/other/i),config:{showKeyboard:!0}}]},methods:{async onSubmit(e){const t=n.isEmpty(this.packSizes)||e.drug_pack_size.label.includes("Other")?e.quantity.value:e.drug_pack_size.value;try{await l(e.drug.value,t),this.$router.push({path:"/"})}catch(a){console.log(a)}}}});function S(e,t,a,i,f,k){const o=m("his-standard-form");return _(),y(o,{skipSummary:!0,fields:e.fields,onOnFinish:e.onSubmit},null,8,["fields","onOnFinish"])}const b=h(g,[["render",S]]);export{b as default};
