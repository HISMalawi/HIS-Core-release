import{d as T,I as C,c4 as R,N as w,K as o,cb as s,O as r,V as D,_ as y,r as c,o as $,c as L,w as P,b as _}from"./index-BCTN_bnC.js";import{v as E}from"./TableView-Briqb80_.js";import{M as F}from"./PopupKeyboard-DWLNjJL8.js";import{F as h}from"./dynamic-import-helper-BkBZiFw5.js";import{C as O}from"./cxca_report_service-B0MGX9qo.js";import{D as N}from"./DrillPatientIds-BMbsDVCC.js";import"./Export-nPQsqN2_.js";import"./SIngleTouchField-DeaPtOu6.js";import"./TouchScreenForm-TKB9q3ZD.js";import"./ToolbarMediumCard-O_J6wu7C.js";import"./Transformers-BPPLlH12.js";import"./ViewPort-BCxYiILf.js";import"./HisKeypad-iWtx_mcq.js";import"./BaseKeyboard-BdU8h7Jm.js";import"./KbLayouts-VRA-vjeH.js";import"./KbHandler-BuQ4TFU6.js";import"./TableView-Dtifi8zd.js";import"./fuse-YdZE3OCN.js";import"./HisKeyboard-COmBOOo8.js";import"./HisKbConfigurations-GhFQZvlg.js";const d=o([]),i=o(""),l=o(""),u=o(""),k=o(!1),b=o(""),S=T({components:{IonPage:C,IonLoading:R,v2Datatable:E},setup(){const a=async()=>{const e=new O;e.startDate=i.value,e.endDate=l.value;try{const t=await e.getClinicReport("REASON FOR NOT SCREENING REPORT"),n=m(t);d.value=n}catch(t){console.log(t)}},m=e=>Object.keys(e).map(t=>({reason:t,patients:e[t]})),v=async(e,t)=>{t.length<=0||(await r.create({component:N,backdropDismiss:!1,cssClass:"large-modal",componentProps:{title:e,subtitle:u,patientIdentifiers:t,onFinish:()=>r.getTop().then(n=>n&&r.dismiss())}})).present()},f=["Reason","Total"],g=[[{label:"Reason",ref:"data.reason",value:e=>e.reason},{label:"Total",ref:"data.patients.length",secondaryLabel:"Clients diagnosed with",value:e=>e.patients.length,tdClick:({column:e,data:t})=>v("".concat(e.secondaryLabel," ").concat(t.reason," "),t.patients)}]],p=()=>F([{id:"start_date",helpText:"Start Date",type:h.TT_FULL_DATE,validation:e=>D.required(e),computedValue:e=>e.value},{id:"end_date",helpText:"End Date",type:h.TT_FULL_DATE,validation:e=>D.required(e),computedValue:e=>e.value}],(e,t)=>{i.value=t.start_date,l.value=t.end_date,u.value="Period (".concat(s(i.value)," to ").concat(s(l.value),")"),r.dismiss(),b.value="".concat(s(i.value)," to ").concat(s(l.value)),a()});return w(()=>!d.value.length&&p()),{columns:g,isLoading:k,reportData:d,period:u,csvQuarter:b,csvheaders:f,generate:a,configure:p}}});function V(a,m,v,f,g,p){const e=c("ion-loading"),t=c("v2Datatable"),n=c("ion-page");return $(),L(n,null,{default:P(()=>[_(e,{"is-open":a.isLoading,message:"Please wait..."},null,8,["is-open"]),_(t,{title:"Denial Reason",subtitle:a.period,columns:a.columns,columnData:a.reportData,rowsPerPage:25,onConfigure:a.configure,csvQuarter:a.csvQuarter,headers:a.csvheaders,onRefresh:a.generate},null,8,["subtitle","columns","columnData","onConfigure","csvQuarter","headers","onRefresh"])]),_:1})}const ae=y(S,[["render",V]]);export{ae as default};
