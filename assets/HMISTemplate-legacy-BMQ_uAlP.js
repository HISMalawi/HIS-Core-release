System.register(["./opd_report_service-legacy-7E0rOikq.js","./index-legacy-CG62t_LC.js"],(function(t,e){"use strict";var n,s,r,o,i,a,l,c,d,u,h;return{setters:[t=>{n=t.O},t=>{s=t.d,r=t.at,o=t.av,i=t.g,a=t.S,l=t.af,c=t.ak,d=t.a,u=t.O,h=t.b}],execute:function(){class e extends n{regenerate;constructor(){super(),this.regenerate=!1}setRegenerate(t){this.regenerate=t}requestHMIS15(){return this.getReport("generate_hmis_15_report",{request:"true"})}requestHMIS17(){return this.getReport("generate_hmis_17_report",{request:"true"})}renderResults(t){const e=[];let n=1;for(const[s,r]of Object.entries(t)){const t=[],o=r,i={id:0,name:"",total:0,totalPatientIds:""};i.name=s;let a=0;i.id=n,n+=1;for(const[e,n]of Object.entries(o)){const e=n;null!=e&&(a+=e.length,i.total=a,e.length&&(t.push(...e),i.totalPatientIds=t))}e.push(i)}return e}getCSVString(t){let e="Diseases/Events/Conditions, #,\n";for(const n of t)e+=`${n.name},${n.total},\n`;return{CSVString:e}}}t("a",e);const m=s({components:{ReportTable:r},data:function(){return{conditions:[],tableCssTheme:"opd-report-theme",total:" Total ",rows:[],columns:[[o.thTxt(""),o.thTxt("Diseases/Events/Conditions"),o.thTxt("UNVERIFIED"),o.thTxt("VERIFIED")]]}},props:["params","periodDates","quarter","onDrillDown","reportName"],methods:{renderResults(){const t=(new e).renderResults(this.params);t.length&&(this.conditions=t,this.rows=this.buildRows(t))},onDownload(t=""){const n=new e;let{CSVString:s}=n.getCSVString(this.conditions);s+=`\n          Date Created: ${i().format("DD/MMM/YYYY HH:MM:ss")}\n          His-Core Version: ${a.getCoreVersion()}\n          API Version: ${a.getApiVersion()}\n          Report Period: ${this.periodDates}\n          Site: ${a.getLocationName()}\n          Site UUID: ${a.getSiteUUID()}`;const r=new Blob([s],{type:"text/csv;charset=utf-8;"});if(navigator.msSaveBlob)navigator.msSaveBlob(r,"exportFilename");else{const e=document.createElement("a");e.href=window.URL.createObjectURL(r),e.setAttribute("download",`${t}.csv`),document.body.appendChild(e),e.click(),document.body.removeChild(e)}},buildRows(t){const e=[];return t.forEach((t=>{e.push([o.td(t.id,{style:{textAlign:"left"}}),o.td(t.name,{style:{textAlign:"left"}}),this.buildRow(this.total+"("+t.name+")",t.total,t.totalPatientIds),o.td("")])})),e},buildRow(t,e,n){return e>0?o.tdLink(e,(async()=>this.onDrillDown(t,n))):o.td(0)}},watch:{params:{immediate:!0,handler(){this.renderResults()}}}}),g={class:"my-table",style:{margin:"auto",width:"95%","margin-top":"3%","margin-bottom":"3%"}};t("H",l(m,[["render",function(t,e,n,s,r,o){const i=c("report-table");return d(),u("div",g,[h(i,{columns:t.columns,rows:t.rows,config:{tableCssTheme:t.tableCssTheme}},null,8,["columns","rows","config"])])}]]))}}}));
