System.register(["./index-legacy-DR3-kJVE.js","./v2utils-legacy-BuopWODX.js","./tb_report_service-legacy-DRpzHBM9.js","./TableView-legacy-trV7z1rD.js","./TBDrilldown-legacy-DP1aw3sA.js","./Export-legacy-CgjR0K1_.js","./index-legacy-DsW4Gcwl.js"],(function(e,t){"use strict";var n,a,r,l,s,o,i,u,g,c,d,p,_,v,w,T,f;return{setters:[e=>{n=e.d,a=e.r,r=e.o,l=e.a,s=e.c,o=e.w,i=e.b,u=e.u,g=e.D,c=e.I,d=e.i,p=e.at,_=e.W},e=>{v=e.w},e=>{w=e.T},e=>{T=e.v},e=>{f=e.T},null,null],execute:function(){e("default",n({__name:"TBStatArtReport",setup(e){const t=d("login-logos/PEPFAR.png"),n=a([]),m=a(""),y=new w,b=(e,t)=>({label:e,ref:t,toValue:e=>e.length,tdClick:async e=>(await p.create({component:f,backdropDismiss:!1,cssClass:"large-modal",componentProps:{title:e.column.label,patientIdentifiers:e.refData,subtitle:`Period: ${m.value}`,onFinish:()=>p.getTop().then((e=>e&&p.dismiss()))}})).present()}),A=[[{label:"#",ref:"index"},{label:"Age group",ref:"age_group"},{label:"Gender",ref:"gender"},b("Known positive","known_positive"),b("Newly Tested Positives","newly_tested_positive"),b("New Negatives","new_negative"),b("Recent negative","recent_negative"),b("Not Done","not_done"),b("New on ART","new_on_art"),b("Already on ART","already_on_art")]],R=()=>v((async()=>{if(!y.startDate||!y.endDate)return _("Start date and end date required!");n.value=[];const e=await w.getJson("programs/2/reports/TB_ART_STAT",y.buildRequestParams({})),t=Object.keys(e).reduce(((t,n)=>(/unknown|all/i.test(n)||(t.M.push({age_group:n,gender:"Male",...e[n].M}),t.F.push({age_group:n,gender:"Female",...e[n].F})),t)),{F:[],M:[]}),a=[...t.F,...t.M];n.value=a.map(((e,t)=>({index:t+1,...e})))})),D=()=>g({onFinish:(e,t,n)=>{m.value=`${n}`,y.startDate=e,y.endDate=t,R()}});return r((()=>D())),(e,a)=>(l(),s(u(c),null,{default:o((()=>[i(T,{title:"TB STAT ART Report","report-prefix":"PEPFAR","icon-url":u(t),subtitle:m.value,columns:A,columnData:n.value,rowsPerPage:50,onConfigure:D,onRefresh:()=>R()},null,8,["icon-url","subtitle","columnData","onRefresh"])])),_:1}))}}))}}}));
