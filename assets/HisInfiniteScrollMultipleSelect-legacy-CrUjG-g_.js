System.register(["./index-legacy-CG62t_LC.js","./BaseTextInput-legacy-BzFUNu7K.js","./FieldMixin.vue_vue_type_script_lang-legacy-UvAkqIW9.js","./Arrays-legacy-K5SD4h1d.js"],(function(e,t){"use strict";var i,s,l,a,n,o,c,d,h,r,u,f,k,p,b,y,m,I,g,C,v,w,x,D,_,V,K,S,L,T;return{setters:[e=>{i=e.d,s=e.an,l=e.as,a=e.b6,n=e.bZ,o=e.a3,c=e.aa,d=e.a4,h=e.ab,r=e.a_,u=e.dH,f=e.dI,k=e.ce,p=e.b1,b=e.af,y=e.ak,m=e.a,I=e.O,g=e.b,C=e.w,v=e.c,w=e.X,x=e.R,D=e.Q,_=e.M,V=e.a7,K=e.W},e=>{S=e.default},e=>{L=e._},e=>{T=e.u}],execute:function(){const t=i({name:"HisInfiniteScrollMultipleSelect",mixins:[L],components:{IonCheckbox:s,IonText:l,IonChip:a,ViewPort:n,HisTextInput:S,IonContent:o,IonList:c,IonItem:d,IonLabel:h,HisKeyboard:r,IonInfiniteScroll:u,IonInfiniteScrollContent:f},data:()=>({showKeyboard:!1,keyboard:k,listData:[],checkedItems:[],disableScroll:!1,filter:"",selected:"",page:1,limit:10}),watch:{clear(){this.checkedItems=[],this.filter="",this.selected=""},checkedItems:{handler(e){this.listData.forEach((t=>{e.find((e=>e.value===t.value))?t.isChecked=!0:t.isChecked=!1})),this.$emit("onValue",e)},deep:!0,immediate:!0},filter:{async handler(){this.page=1,this.disableScroll=!1;const e=await this.getListData();[...this.checkedItems].forEach((t=>{const i=e.findIndex((e=>e.value===t.value));-1===i?e.push(t):e[i].isChecked=!0})),this.listData=e}}},mounted(){this.init()},activated(){this.init()},methods:{async init(){this.$emit("onFieldActivated",this),this.listData=await this.getListData()},async getListData(){return await this.options(this.fdata,this.filter,this.page,this.limit)},async keypress(e){this.filter||(this.selected=""),this.filter=p(e,this.selected),this.selected=this.filter},async onKBValue(e){this.listData&&this.selected!==e&&(this.filter=e,this.selected=this.filter)},async pushData(e){this.page++;const t=await this.getListData();t.length>0?this.listData=T([...this.listData,...t.filter((e=>!this.listData.find((t=>t.value===e.value))))],"label"):this.disableScroll=!0,setTimeout((()=>e.target.complete()),500)},onSelect(e){this.$nextTick((async()=>{e.isChecked?-1===this.checkedItems.findIndex((t=>t.value===e.value))&&this.checkedItems.push(e):this.unCheck(e),"function"==typeof this.onValueUpdate&&(this.checkedItems=await this.onValueUpdate([...this.checkedItems]))}))},unCheck(e){this.checkedItems=this.checkedItems.filter((t=>t.value!==e.value))}},created(){this.showKeyboard=this.config?.showKeyboard??!1,this.keyboard=this.config?.keyboard??k,this.page=this.config?.page??1,this.limit=this.config?.limit??10}});e("default",b(t,[["render",function(e,t,i,s,l,a){const n=y("his-text-input"),o=y("ion-chip"),c=y("ion-text"),d=y("ion-label"),h=y("ion-checkbox"),r=y("ion-item"),u=y("ion-list"),f=y("ion-infinite-scroll-content"),k=y("ion-infinite-scroll"),p=y("ion-content"),b=y("view-port"),S=y("his-keyboard");return m(),I(x,null,[g(b,{showFull:!e.showKeyboard},{default:C((()=>[e.showKeyboard?(m(),v(n,{key:0,value:e.selected,onOnValue:e.onKBValue},null,8,["value","onOnValue"])):w("",!0),(m(!0),I(x,null,D(e.checkedItems,((t,i)=>(m(),v(o,{color:"danger",key:i,onClick:i=>e.unCheck(t)},{default:C((()=>[_(V(t.label),1)])),_:2},1032,["onClick"])))),128)),g(p,{style:{width:"100%"},class:"ion-padding-bottom view-port-content"},{default:C((()=>[g(u,null,{default:C((()=>[(m(!0),I(x,null,D(e.listData,((t,i)=>(m(),v(r,{key:i,color:t.isChecked?"lightblue":"",lines:t.isChecked?"none":void 0},{default:C((()=>[g(d,null,{default:C((()=>[g(c,{class:"his-md-text"},{default:C((()=>[_(V(t.label),1)])),_:2},1024),t.description&&t.isChecked?(m(),v(c,{key:0,color:t.description?.color},{default:C((()=>[K("p",null,[K("i",null,V(t.description.text),1)])])),_:2},1032,["color"])):w("",!0)])),_:2},1024),g(h,{slot:"start",modelValue:t.isChecked,"onUpdate:modelValue":e=>t.isChecked=e,onIonChange:i=>e.onSelect(t),disabled:t.disabled},null,8,["modelValue","onUpdate:modelValue","onIonChange","disabled"])])),_:2},1032,["color","lines"])))),128))])),_:1}),g(k,{onIonInfinite:e.pushData,threshold:"100px",disabled:e.disableScroll},{default:C((()=>[g(f,{"loading-spinner":"crescent","loading-text":"Loading more data..."})])),_:1},8,["onIonInfinite","disabled"])])),_:1})])),_:1},8,["showFull"]),e.showKeyboard?(m(),v(S,{key:0,kbConfig:e.keyboard,onKeyPress:e.keypress},null,8,["kbConfig","onKeyPress"])):w("",!0)],64)}]]))}}}));
