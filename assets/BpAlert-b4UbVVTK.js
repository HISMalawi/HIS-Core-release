import{_ as v}from"./EncounterMixin.vue_vue_type_script_lang-_QSYmoce.js";import{d as b,m as D,l as C,I as R,f as I,i as T,O as F,ab as N,aR as S,aS as O,aN as u,cl as m,_ as $,r as n,o as c,c as V,w as i,b as r,x as g,a0 as _,bh as B,A as t,v as d,u as e,z as f,a3 as A,a4 as x}from"./index-LcKkVeBi.js";import{B as z}from"./htn_service-8_v3Y9Pt.js";import{R as E}from"./RiskFactorModal-wljx4M3t.js";import"./encounter_guidelines-F30Cj7_H.js";import"./GuidelineEngine-syyQoOzo.js";import"./HisStandardForm-EQOKz9NX.js";import"./TouchScreenForm-xHVNtrEx.js";import"./dynamic-import-helper-9HnG3Mif.js";import"./ToolbarMediumCard-8zGLRwn9.js";import"./Transformers-XlEF3tgP.js";import"./ViewPort-bfGE2-21.js";const L=b({mixins:[v],components:{IonFooter:D,IonContent:C,IonPage:R,IonButton:I,IonToolbar:T},data:()=>({sysBp:0,dsBP:0,riskFactors:[],patientOnBpDrugs:!1,isPregnant:!1,systolicThreshold:145,diastolicTheshold:94}),methods:{async showRiskFactors(){const s=await F.create({component:E,backdropDismiss:!1,cssClass:"large-modal",componentProps:{factors:this.riskFactors}});s.present();const{data:o}=await s.onDidDismiss();N.isEmpty(o)||this.nextTask()},async getRiskFactors(){const o=S.getConceptsByCategory("risk factors").map(async a=>{const p=await O.getFirstValueCoded(this.patientID,a.name);return{concept:a.name,value:p}});return Promise.all(o)},recaptureBp(){this.$router.push("/art/encounters/vitals/".concat(this.patientID,"?vital_options=BP"))}},watch:{ready:{async handler(s){if(!s)return;await(await u.create({message:"Verifying Blood Pressure...",backdropDismiss:!1})).present();const a=new z(this.patientID,this.providerID);this.riskFactors=await this.getRiskFactors(),this.systolicThreshold=await m.systolicThreshold()||145,this.diastolicTheshold=await m.diastolicThreshold()||94,this.dsBP=await a.getDiastolicBp()||0,this.sysBp=await a.getSystolicBp()||0,this.patientOnBpDrugs=await a.onBpDrugs()||!1,this.isPregnant=this.patient.isChildBearing()&&await this.patient.isPregnant()||!1,u.dismiss()},immediate:!0}},computed:{patientName(){return this.ready?this.patient.getFullName():"Patient"},hasPressureReading(){return this.sysBp>0&&this.dsBP>0},highBP(){return(this.sysBp>=this.systolicThreshold&&this.dsBP>=this.diastolicTheshold||this.dsBP>=this.diastolicTheshold)&&!this.isPregnant}}}),l=s=>(A("data-v-8630601f"),s=s(),x(),s),M=l(()=>t("h1",{class:"ion-text-center"}," High BP Alert ",-1)),j={key:0,class:"vertically-align ion-text-center"},G={style:{"font-weight":"bold"}},H={class:"name"},Y={class:"bp"},q=l(()=>t("br",null,null,-1)),J=l(()=>t("span",null,[e(" Retesting BP is "),t("span",{style:{"font-weight":"bold",color:"#000000","text-decoration":"underline"}},"optional"),e(". "),t("br"),e(" Do you want to test BP? ")],-1)),K={key:1,class:"vertically-align ion-text-center"},Q=l(()=>t("br",null,null,-1)),U=l(()=>t("h1",null," Do you want to test BP? ",-1));function W(s,o,a,p,X,Z){const P=n("ion-content"),h=n("ion-button"),y=n("ion-toolbar"),w=n("ion-footer"),k=n("ion-page");return c(),V(k,null,{default:i(()=>[r(P,null,{default:i(()=>[M,s.hasPressureReading?(c(),g("div",j,[_(t("h2",G," (Patient already on BP drugs) ",512),[[B,s.patientOnBpDrugs]]),t("h2",null,[t("span",H,d(s.patientName),1),e(" has "),_(t("span",null," a high ",512),[[B,s.highBP]]),e(" blood pressure of "),t("span",Y,d(s.sysBp)+" / "+d(s.dsBP),1),q,J])])):f("",!0),s.hasPressureReading?f("",!0):(c(),g("div",K,[e(" No BP Reading found "),Q,U]))]),_:1}),r(w,null,{default:i(()=>[r(y,{color:"dark"},{default:i(()=>[r(h,{onClick:o[0]||(o[0]=()=>s.hasPressureReading?s.showRiskFactors():s.nextTask()),size:"large",color:"danger",slot:"start"},{default:i(()=>[e(" No ")]),_:1}),r(h,{onClick:s.recaptureBp,size:"large",color:"success",slot:"end"},{default:i(()=>[e(" Yes ")]),_:1},8,["onClick"])]),_:1})]),_:1})]),_:1})}const hs=$(L,[["render",W],["__scopeId","data-v-8630601f"]]);export{hs as default};
