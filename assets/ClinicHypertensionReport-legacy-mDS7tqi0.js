System.register(["./index-legacy-X--GYU37.js","./TableView-legacy-TJC-wvFY.js","./ReportDateSelectionPrompt-legacy-Nxh72iIR.js","./clinic_report_service-legacy-DLR17KNs.js","./PopupKeyboard-legacy-BWPBlSAT.js","./SIngleTouchField-legacy-DTkEGDmJ.js","./dynamic-import-helper-legacy-DYK5bIOV.js","./TouchScreenForm-legacy-C_f8Ho2H.js","./ToolbarMediumCard-legacy-CdhT4OJW.js","./Transformers-legacy-DhNYVLaS.js","./ViewPort-legacy-1het9QhE.js","./HisKeypad-legacy-BCRIc7Jq.js","./BaseKeyboard-legacy-CHBQXo1z.js","./KbLayouts-legacy-BKvPSxzZ.js","./KbHandler-legacy-De8o5nTq.js","./overlays-04a9a43f-legacy-lkJ5ZVky.js","./fuse-legacy-CQoBB3MK.js","./Export-legacy-DuqLSep7.js","./HisKeyboard-legacy-xCeSPKZ_.js","./HisKbConfigurations-legacy-vrLd9Pgz.js","./MultiFieldDateHelper-legacy-CxOWifLo.js"],(function(e,l){"use strict";var a,n,t,o,r,i,s,c,u,g,d,p,m,y,b,f,_,h,j,v;return{setters:[e=>{a=e.d,n=e.I,t=e.J,o=e.bC,r=e._,i=e.r,s=e.o,c=e.c,u=e.w,g=e.b,d=e.c4,p=e.K,m=e.N,y=e.a9,b=e.O,f=e.t,_=e.q},e=>{h=e.v},e=>{j=e.D},e=>{v=e.C},null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null],execute:function(){const l=a({components:{v2Datatable:h,IonPage:n},props:{title:String,patients:Array,onFinish:Function},setup(){const e=t();return{ITEMS_PER_PAGE:20,columns:[[{label:"ARV Number",ref:"arv_number"},{label:"Gender",ref:"gender",value:e=>o(e.gender)},{label:"Systolic/Diastolic",ref:"diastolic",value:e=>`${e.systolic}/${e.diastolic}`},{label:"Action",ref:"patient_id",exportable:!1,tdClick:({data:l})=>e.push({path:`/patient/dashboard/${l.patient_id}`}),value:()=>"View client"}]]}}}),D=r(l,[["render",function(e,l,a,n,t,o){const r=i("v2Datatable"),d=i("ion-page");return s(),c(d,null,{default:u((()=>[g(r,{title:e.title,columnData:e.patients,columns:e.columns,"on-finish":e.onFinish,"icon-url":"/assets/images/folder.png",rowsPerPage:e.ITEMS_PER_PAGE},null,8,["title","columnData","columns","on-finish","rowsPerPage"])])),_:1})}]]),P=a({components:{IonPage:n,IonLoading:d,v2Datatable:h},setup(){const e=y("reports.png"),l=p([]),a=p(""),n=p(!1),t=new v,o=(e,l)=>({label:e,ref:l,toValue:e=>e.length,tdClick:e=>i(`${e.column.label}`,e.refData)}),r=[[{label:"#",ref:"index"},{label:"Age group",ref:"age_group"},{label:"Gender",ref:"gender"},o("Screened for HP","screened"),o("Normal <140/<90","normal_reading"),o("Mild 140-159/90-99","mild_reading"),o("Moderate 160-180/100-110","moderate_reading"),o("Severe >180/>110","severe_reading"),o("Hydrochlorothiazide 25mg","hydrochlorothiazide_25mg"),o("Amlodipine 5mg","amlodipine_5mg"),o("Amlodipine 10 mg","amlodipine_10mg"),o("Enalapril 5 mg","enalapril_5mg"),o("Enalapril 10mg","enalapril_10mg"),o("Atenolol 50mg","atenolol_50mg"),o("Atenolol 100mg","atenolol_100mg"),o("Total (regimen)","total_regimen")]],i=async(e,l)=>{l.length&&(await b.create({component:D,backdropDismiss:!1,cssClass:"large-modal",componentProps:{title:e,subtitle:a,patients:l,onFinish:()=>b.getTop().then((e=>e&&b.dismiss()))}})).present()},s=async()=>{if(!t.startDate||!t.endDate)return f("Start date and end date required!");n.value=!0,l.value=[];try{const e=await t.getHypertensionReport(),a=Object.keys(e).reduce(((l,a)=>(l.M.push({age_group:a,gender:"Male",...e[a].M}),l.F.push({age_group:a,gender:"Female",...e[a].F}),l)),{F:[],M:[]});l.value=a.F.concat(a.M).map(((e,l)=>({index:l+1,...e})))}catch(e){_("Unable to generate report!"),console.error(e)}n.value=!1},c=()=>j({onFinish:(e,l,n)=>{a.value=`Period (${n})`,t.startDate=e,t.endDate=l,s()}});return m((()=>c())),{logo:e,reportData:l,isLoading:n,configure:c,generate:s,columns:r,period:a}}});e("default",r(P,[["render",function(e,l,a,n,t,o){const r=i("ion-loading"),d=i("v2Datatable"),p=i("ion-page");return s(),c(p,null,{default:u((()=>[g(r,{"is-open":e.isLoading,message:"Please wait..."},null,8,["is-open"]),g(d,{title:"Hypertension Report","icon-url":e.logo,subtitle:e.period,columns:e.columns,columnData:e.reportData,rowsPerPage:30,onConfigure:e.configure,onRefresh:()=>e.generate(),"report-prefix":"Clinic"},null,8,["icon-url","subtitle","columns","columnData","onConfigure","onRefresh"])])),_:1})}]]))}}}));
