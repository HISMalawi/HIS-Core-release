var S=Object.defineProperty;var A=(t,e,i)=>e in t?S(t,e,{enumerable:!0,configurable:!0,writable:!0,value:i}):t[e]=i;var p=(t,e,i)=>A(t,typeof e!="symbol"?e+"":e,i);import{aj as b,bx as w,bQ as C,ax as f,d as F,bn as I,du as _,aN as g,bY as E,ad as o,ae as l,H as D,dt as v,aV as O}from"./index-CMZASHAR.js";import{_ as P}from"./EncounterMixin.vue_vue_type_script_lang-v2aYCq6R.js";import{m as h}from"./GuidelineEngine-D6V1_Znr.js";const d="2016-04-30",M={"Adults with stage 4 conditions":{concept:"WHO STAGE IV ADULT",priority:1,conditions:{stage:t=>t===4}},"Classify as stage 4 when reason for ART is WHO STAGE 4":{concept:"WHO STAGE IV ADULT",priority:2,conditions:{reasonForArt:t=>t==="WHO STAGE IV ADULT"}},"Adults with stage 3 conditions":{concept:"WHO STAGE III ADULT",priority:3,conditions:{stage:t=>t===3}},"Adults with stage 2 conditions":{concept:"WHO STAGE II ADULT",priority:4,conditions:{stage:t=>t===2}},"Adults with stage 1 conditions":{concept:"WHO STAGE I ADULT",priority:5,conditions:{stage:t=>t===1}}},L={"Children with stage 4 conditions":{concept:"WHO STAGE IV PEDS",priority:1,conditions:{stage:t=>t===4}},"Classify as stage 4 when reason for ART is WHO STAGE 4":{concept:"WHO STAGE IV PEDS",priority:2,conditions:{reasonForArt:t=>t==="WHO STAGE IV PEDS"}},"For children with stage 3 conditions":{concept:"WHO STAGE III PEDS",priority:3,conditions:{stage:t=>t===3}},"Children with stage 2 conditions":{concept:"WHO STAGE II PEDS",priority:4,conditions:{stage:t=>t===2}},"Children with stage 1 conditions":{concept:"WHO STAGE I PEDS",priority:5,conditions:{stage:t=>t===1}}},N={"Warn if Severe weight loss is selected when actual patient BMI is acceptable":{priority:1,actions:{alert:async t=>await b("Patient's BMI of ".concat(t.bmi," greater than 18.5, do you wish to proceed?"),{confirmBtnLabel:"Yes, keep severe weightloss",cancelBtnLabel:"No, cancel"})},conditions:{selectedCondition(t){return t==="Severe weight loss >10% and/or BMI <18.5kg/m^2, unexplained"},bmi:t=>t>18.5}},"Warn for contradicting stage defining conditions":{priority:1,actions:{alert:async t=>await b("CONTRADICTING STAGE DEFINING CONDITIONS",{confirmBtnLabel:"Keep Asymptomatic",cancelBtnLabel:"Keep other(s)"})?(t.stage=1,t.selectedConditions=[],t.stageThreeConditions=[],t.stageFourConditions=[],t.stageTwoConditions=[],!0):!1},conditions:{selectedCondition(t){return t==="Asymptomatic HIV infection"},stage:t=>t>=2}}},B={"Enable TB staging condition if client is TB positive":{priority:1,actions:{isChecked:!0},description:{color:"danger",show:"always",info:()=>"Client registered as a TB Patient in the TB Module"},conditions:{tbPositive:t=>t,selectedCondition:t=>/\bTuberculosis \(PTB or EPTB\)|\bPulmonary tuberculosis/i.test(t)}},"Enable TB staging condition if client is EPTB positive":{priority:1,actions:{isChecked:!0},description:{color:"danger",show:"always",info:()=>"Client registered with EPTB in TB Module"},conditions:{eptbPositive:t=>t,selectedCondition:t=>/Extrapulmonary tuberculosis/i.test(t)}},"For children whose current weight percentile is less than 70":{priority:1,actions:{isChecked:!0},description:{color:"danger",show:"always",info:t=>"Child has a low weight percentile of ".concat(t.weightPercentile)},conditions:{selectedCondition(t){return t==="Severe unexplained wasting or malnutrition not responding to treatment (weight-for-height/ -age <70% or MUAC less than 11cm or oedema)"},weightPercentile(t){return t<70}}},"Enable Moderate unexplained malnutrition for children whose weight for height is 70-79%":{priority:1,actions:{isChecked:!0},description:{color:"danger",show:"always",info:t=>"Child has weight percentile of ".concat(t.weightPercentile)},conditions:{selectedCondition(t){return t==="Moderate unexplained wasting/malnutrition not responding to treatment (weight-for-height/ -age 70-79% or muac 11-12 cm)"},weightPercentile(t){return t>=70&&t<=79}}},"Disable moderate weight loss when Severe unexplained weight loss is chosen":{priority:2,actions:{isChecked:!1,disabled:!0},description:{color:"secondary",show:"always",info:()=>"Severe weight loss/manutrition was already selected"},conditions:{selectedCondition(t){return t==="Moderate unexplained wasting/malnutrition not responding to treatment (weight-for-height/ -age 70-79% or muac 11-12 cm)"},selectedConditions(t){return t.includes("Severe unexplained wasting or malnutrition not responding to treatment (weight-for-height/ -age <70% or MUAC less than 11cm or oedema)")}}}},H={"Enable TB staging condition if client is TB positive":{priority:1,actions:{isChecked:!0},description:{color:"danger",show:"always",info:()=>"Client registered Positive in TB Module"},conditions:{tbPositive:t=>t,selectedCondition:t=>/\bTuberculosis \(PTB or EPTB\)|\bPulmonary tuberculosis/i.test(t)}},"Enable TB staging condition if client is EPTB positive":{priority:1,actions:{isChecked:!0},description:{color:"danger",show:"always",info:()=>"Client registered with EPTB in TB Module"},conditions:{eptbPositive:t=>t,selectedCondition:t=>/Extrapulmonary tuberculosis/i.test(t)}},"Adults with a BMI less than 16":{priority:1,actions:{isChecked:!0},description:{color:"danger",show:"always",info:t=>"Adult has a low BMI of ".concat(t.bmi)},conditions:{selectedCondition(t){return t==="Severe weight loss >10% and/or BMI <18.5kg/m^2, unexplained"},bmi:t=>t<16}},"Adults whose BMI is between 16 and 18":{priority:3,actions:{isChecked:!0},description:{color:"warning",show:"onChecked",info:t=>"BMI of ".concat(t.bmi," is between 16 and 18")},conditions:{selectedCondition:t=>t==="Moderate weight loss less than or equal to 10 percent, unexplained",bmi:t=>t>=16&&t<=18.5}},"Disable Moderate weight loss if severe weightloss is selected":{priority:2,actions:{isChecked:!1,disabled:!0},description:{color:"secondary",show:"always",info:()=>"Severe weight loss was already selected"},conditions:{selectedCondition(t){return t==="Moderate weight loss less than or equal to 10 percent, unexplained"},selectedConditions(t){return t.includes("Severe weight loss >10% and/or BMI <18.5kg/m^2, unexplained")}}}},W={"Children under twelve months who tested positive on Rapid test and have presumed severe HIV":{concept:"PRESUMED SEVERE HIV",priority:1,conditions:{ageInMonths(t){return t<12},selectedConditions:t=>w.getConceptsByCategory("pshd_condition").some(e=>t.includes(e.name)),testType(t){return t==="HIV rapid test"}}},"Has stage 4 conditions":{concept:"WHO STAGE IV PEDS",priority:2,conditions:{stage:t=>t===4}},"Has stage 3 conditions":{concept:"WHO STAGE III PEDS",priority:3,conditions:{stage:t=>t===3}},"Children under twelve who tested positive via HIV DNA Polymerase Chain Reaction test":{concept:"HIV DNA polymerase chain reaction",priority:4,conditions:{ageInMonths:t=>t<12,testType:t=>t==="HIV DNA polymerase chain reaction"}},"Children who are less than 24 months":{concept:"HIV infected",priority:5,conditions:{ageInMonths:t=>t<24}},"Children between 24 and 56 months who have stage 2 or 1 conditions":{concept:"CD4 COUNT LESS THAN OR EQUAL TO 750",priority:6,conditions:{ageInMonths(t){return t>=24&&t<=56},cd4Date:t=>new Date(t)<=new Date(d),cd4(t){return t<=750},cd4Modifier(t){return t==="<"||t==="="},stage(t){return t<=2}}},"Children with CD4 count less than 500 and have stage 1 and stage 2 conditions":{concept:"CD4 COUNT LESS THAN OR EQUAL TO 500",priority:7,conditions:{cd4(t){return t<=500},cd4Date:t=>new Date(t)<=new Date(d),cd4Modifier(t){return t==="<"||t==="="},stage(t){return t<=2}}},"Children who are more than five years old and have cd4 count less than 500":{concept:"CD4 COUNT LESS THAN OR EQUAL TO 500",priority:9,conditions:{cd4Date:t=>new Date(t)<=new Date(d),age(t){return t>5},cd4(t){return t<=500},cd4Modifier(t){return t==="<"||t==="="}}},"Children over date 2014-04-01 and less than Five years old":{concept:"HIV infected",priority:10,conditions:{date(t){return t>="2014-04-01"},age(t){return t<=5}}},"Women who are breast feeding":{concept:"BREASTFEEDING",priority:11,conditions:{gender(t){return t==="F"},breastFeeding(t){return t==="Yes"},stage:t=>t<=2}},"Women who are pregnant":{concept:"PATIENT PREGNANT",priority:12,conditions:{gender(t){return t==="F"},pregnant(t){return t==="Yes"},stage(t){return t<=2}}},"Asymptomatic patient with either stage one or stage two conditions":{concept:"Asymptomatic",priority:13,conditions:{stage:t=>t<=2}}},G={"Has stage 4 conditions":{concept:"WHO STAGE IV ADULT",priority:1,conditions:{stage:t=>t===4}},"Has HIV wasting syndrome identified in stage 3":{concept:"WHO STAGE IV ADULT",priority:2,conditions:{selectedConditions:t=>w.getConceptsByCategory("severe_hiv_wasting_syndrome").reduce((n,s)=>t.includes(s.name)?n+1:0,0)>=2}},"Has stage 3 conditions":{concept:"WHO STAGE III ADULT",priority:3,conditions:{stage:t=>t===3}},"CD4 less than 350 for adults before 2014":{concept:"cd4 less than or equal to 350",priority:4,conditions:{cd4Date:t=>new Date(t)<=new Date(d),cd4(t){return t<=350},cd4Modifier(t){return t==="<"||t==="="}}},"CD4 less than 250 for adults after 2014":{concept:"cd4 less than or equal to 250",priority:4,conditions:{cd4Date:t=>new Date(t)<=new Date(d),cd4(t){return t<=250},cd4Modifier(t){return t==="<"||t==="="}}},"CD4 less than 350 for adults after 2014":{concept:"cd4 less than or equal to 350",priority:5,conditions:{cd4Date:t=>new Date(t)<=new Date(d),cd4(t){return t<=350},cd4Modifier(t){return t==="<"||t==="="}}},"CD4 less than 500 for adults after 2014":{concept:"cd4 less than or equal to 500",priority:6,conditions:{cd4Date:t=>new Date(t)<=new Date(d),cd4(t){return t<=500},cd4Modifier(t){return t==="<"||t==="="}}},"Women who are breast feeding":{concept:"BREASTFEEDING",priority:8,conditions:{gender(t){return t==="F"},breastFeeding(t){return t==="Yes"},stage:t=>t<=2}},"Women who are pregnant":{concept:"PATIENT PREGNANT",priority:7,conditions:{gender(t){return t==="F"},pregnant(t){return t==="Yes"},stage(t){return t<=2}}},"Asymptomatic patient with either stage one or stage two conditions":{concept:"Asymptomatic",priority:9,conditions:{stage:t=>t<=2}}};class u extends C{constructor(i,n,s){super(i,52,s);p(this,"age");p(this,"confirmatoryTest");this.age=n,this.confirmatoryTest=null}isAdult(){return this.age>=15}isPedaid(){return this.age<=14}setAge(i){this.age=i}getFacilities(i=""){return f.getFacilities({name:i})}getConfirmatoryTestType(){return this.confirmatoryTest}cd4CountIsValid(i){try{return!!i.match(/^(=|<|>)([0-9]*)$/m)}catch(n){return!1}}getAlertGuidelines(){return N}getWhoStageGuidelines(){return this.isAdult()?M:L}getProgramEligibilityGuidelines(){return this.isAdult()?G:W}getRecommendedConditionGuidelines(){return this.isAdult()?H:B}getStagingConditions(i){const n=this.getStagingCategoryByNum(i);return C.getConceptsByCategory(n)}buildWhoStageObs(i){return this.buildValueCoded("Who stage",i)}buildWhoCriteriaObs(i){return this.buildValueCoded("Who stages criteria present",i)}buildReasonForArtObs(i){return this.buildValueCoded("Reason for ART eligibility",i)}getStagingCategoryByNum(i){switch(i){case 1:return this.isAdult()?"stage_1_conditions_adults":"stage_1_conditions_pedaids";case 2:return this.isAdult()?"stage_2_conditions_adults":"stage_2_conditions_pedaids";case 3:return this.isAdult()?"stage_3_conditions_adults":"stage_3_conditions_pedaids";case 4:return this.isAdult()?"stage_4_conditions_adults":"stage_4_conditions_pedaids";default:return""}}async loadHivConfirmatoryTestType(){const i=await C.getFirstValueCoded(this.patientID,"Confirmatory hiv test type");i&&(this.confirmatoryTest=i)}}const k=F({mixins:[P],data:()=>({staging:{},showStagingWeightChart:!0,canShowStagingFields:!0,bmiObj:{},stagingFacts:{age:-1,bmi:-1,gender:"",stage:-1,cd4:-1,cd4Date:"",date:"",isChildBearing:!1,stageOneConditions:[],stageTwoConditions:[],stageThreeConditions:[],stageFourConditions:[],tbPositive:!1,eptbPositive:!1,reasonForArt:"",testType:"",pregnant:"",breastFeeding:"",selectedCondition:"",selectedConditions:[],weightPercentile:-1,ageInMonths:-1,cd4Modifier:"",whoStage:""}}),watch:{ready:{handler(t){t&&(this.staging=new u(this.patient.getID(),this.patient.getAge(),this.providerID))},immediate:!0}},methods:{async initStaging(t){await this.staging.loadHivConfirmatoryTestType(),this.bmiObj=await t.getBMI(),this.stagingFacts.age=t.getAge(),this.stagingFacts.bmi=this.bmiObj.index,this.stagingFacts.date=u.getSessionDate(),this.stagingFacts.gender=t.isMale()?"M":"F",this.stagingFacts.testType=this.staging.getConfirmatoryTestType(),this.stagingFacts.ageInMonths=t.getAgeInMonths(),this.stagingFacts.isChildBearing=t.isChildBearing();const e=await I.getProgramInformation(t.getID(),_);this.stagingFacts.tbPositive=e.tb_positive,this.stagingFacts.eptbPositive=e.eptb,this.staging.isPedaid()&&(this.stagingFacts.weightPercentile=await t.calculateWeightPercentile())},async submitStaging(t){if(!await this.staging.createEncounter())throw"Unable to create staging encounter";const i=await this.resolveObs(t,"staging"),n=await Promise.all([this.buildReasonForArtObs(),this.buildWhoStageObs()]);if(!await this.staging.saveObservationList([...i,...n]))throw"Unable to save patient observations"},async onStagingCondition({label:t}){var n,s,a;this.stagingFacts.selectedCondition=t;const e=this.staging.getAlertGuidelines(),i=h(this.stagingFacts,e);return g.isEmpty(i)?!0:(n=i[0])!=null&&n.actions&&((s=i[0])!=null&&s.actions.alert)?!!await((a=i[0])==null?void 0:a.actions.alert(this.stagingFacts)):!0},getFacilities(t=""){return E(t)},updateStagingFacts(){const t=[this.stagingFacts.stageOneConditions,this.stagingFacts.stageTwoConditions,this.stagingFacts.stageThreeConditions,this.stagingFacts.stageFourConditions];this.stagingFacts.stage=t.reduce((e,i,n)=>g.isEmpty(i)?e:n+1,0),this.stagingFacts.selectedConditions=t.reduce((e,i)=>e.concat(i),[])},buildReasonForArtObs(){return this.staging.buildReasonForArtObs(this.stagingFacts.reasonForArt)},buildWhoStageObs(){return this.staging.buildWhoStageObs(this.stagingFacts.whoStage)},buildStagingOptions(t,e=[]){const i=this.staging.getRecommendedConditionGuidelines();return this.staging.getStagingConditions(t).map(n=>{var m,y;let s=!1,a,c=e.includes(n.name);this.stagingFacts.selectedCondition=n.name;const T=h(this.stagingFacts,i);if(!g.isEmpty(T)){const r=T[0];(m=r==null?void 0:r.actions)!=null&&m.isChecked&&(c=!0),(y=r==null?void 0:r.actions)!=null&&y.disabled&&(s=!0),a=r.description}return{label:n.name,value:n.concept_id,isChecked:c,disabled:s,description:a}})},setWhoStage(){var i;const t=this.staging.getWhoStageGuidelines(),e=h(this.stagingFacts,t);this.stagingFacts.whoStage=((i=e[0])==null?void 0:i.concept)||""},setReasonForArt(){var i;const t=this.staging.getProgramEligibilityGuidelines(),e=h(this.stagingFacts,t);this.stagingFacts.reasonForArt=((i=e[0])==null?void 0:i.concept)||""},notAsymptomatic(t){const e=t.stage_1_conditions;if(e){const i=e.filter(n=>n.label.match(/asymptomatic/i)&&n.isChecked);return g.isEmpty(i)}return!0},hasTransferLater(t){return"has_transfer_letter"in t?t.has_transfer_letter&&t.has_transfer_letter.value==="Yes":!1},hasStaging(t){return this.hasTransferLater(t)?!0:this.canShowStagingFields},getStagingSummaryField(t="Summary"){return{id:"summary",helpText:t,type:o.TT_ART_STAGING_SUMMARY,condition:e=>this.hasStaging(e),onload:()=>{this.setReasonForArt(),this.setWhoStage()},options:()=>[{label:"WHO Stage",value:this.stagingFacts.whoStage,other:{type:"title-section"}},{label:"Condition on starting ART",value:this.stagingFacts.reasonForArt,other:{type:"title-section"}},...this.stagingFacts.cd4>-1?[{label:"CD4 Result",value:"".concat(this.stagingFacts.cd4Modifier).concat(this.stagingFacts.cd4),other:{type:"title-section"}}]:[],...this.stagingFacts.selectedConditions.map(e=>({label:e,value:e}))],config:{title:"Selected stage defining conditions",hiddenFooterBtns:["Clear"]}}},isANCclient(){return u.getSuspendedProgram()==="ANC"},getStagingFields(){return[{id:"pregnancy_status",helpText:"Pregnant / Breastfeeding",type:o.TT_MULTIPLE_YES_NO,validation:t=>l.anyEmpty(t),summaryMapValue:t=>({label:t.label,value:t.value}),computedValue:(t,e)=>{let i=[];return this.isANCclient()&&!this.hasTransferLater(e)&&(this.stagingFacts.pregnant="Yes",i.push(this.staging.buildValueCoded("Is patient pregnant","Yes"))),i=i.concat(t.map(n=>{const{value:s,other:a}=n,c=a.factID;return this.stagingFacts[c]="".concat(s).match(/Yes/i)?"Yes":"No",this.staging.buildValueCoded(a.concept,s)})),{obs:i,tag:"staging"}},options:t=>{if(g.isEmpty(t.pregnancy_status)){const e=[];return(!this.isANCclient()||this.hasTransferLater(t))&&e.push({label:"Pregnant?",value:"",other:{values:this.yesNoOptions(),concept:"Is patient pregnant",factID:"pregnant"}}),e.push({label:"Breastfeeding?",value:"",other:{values:this.yesNoOptions(),concept:"Is patient breast feeding",factID:"breastFeeding"}}),e}else return t.pregnancy_status},condition:t=>this.hasStaging(t)&&this.stagingFacts.isChildBearing},{id:"patient_weight_chart",helpText:"Weight history",type:o.TT_WEIGHT_CHART,options:async()=>{let t=await this.patient.getWeightHistory();return t=t.map(e=>({x:D.toStandardHisDisplayFormat(e.date),y:e.weight})),[{label:"Weight for patient",value:"Weight trail",other:{values:t,age:this.patient.getAge(),bmi:this.bmiObj}}]},config:{hiddenFooterBtns:["Clear"]},condition:t=>this.hasStaging(t)&&this.showStagingWeightChart},{id:"stage_4_conditions",helpText:"Stage 4 conditions",type:o.TT_MULTIPLE_SELECT,options:()=>this.buildStagingOptions(4,this.stagingFacts.stageFourConditions),onValue:t=>this.onStagingCondition(t),computedValue:t=>({tag:"staging",obs:t.map(e=>this.staging.buildWhoCriteriaObs(e.label))}),unload:t=>{this.stagingFacts.stageFourConditions=t.map(e=>e.label),this.updateStagingFacts()},onConditionFalse:()=>{this.stagingFacts.stageFourConditions=[],this.updateStagingFacts()},condition:t=>this.hasStaging(t)&&this.notAsymptomatic(t)},{id:"stage_3_conditions",helpText:"Stage 3 conditions",type:o.TT_MULTIPLE_SELECT,options:()=>this.buildStagingOptions(3,this.stagingFacts.stageThreeConditions),onValue:t=>this.onStagingCondition(t),computedValue:t=>({tag:"staging",obs:t.map(e=>this.staging.buildWhoCriteriaObs(e.label))}),unload:t=>{this.stagingFacts.stageThreeConditions=t.map(e=>e.label),this.updateStagingFacts()},onConditionFalse:()=>{this.stagingFacts.stageThreeConditions=[],this.updateStagingFacts()},condition:t=>this.hasStaging(t)&&this.notAsymptomatic(t)},{id:"stage_2_conditions",helpText:"Stage 2 conditions",type:o.TT_MULTIPLE_SELECT,options:()=>this.buildStagingOptions(2,this.stagingFacts.stageTwoConditions),onValue:t=>this.onStagingCondition(t),computedValue:t=>({tag:"staging",obs:t.map(e=>this.staging.buildWhoCriteriaObs(e.label))}),unload:t=>{this.stagingFacts.stageTwoConditions=t.map(e=>e.label),this.updateStagingFacts()},onConditionFalse:()=>{this.stagingFacts.stageTwoConditions=[],this.updateStagingFacts()},condition:t=>this.hasStaging(t)&&this.notAsymptomatic(t)},{id:"stage_1_conditions",helpText:"Stage 1 conditions",type:o.TT_MULTIPLE_SELECT,validation:t=>{if(g.isEmpty(t)&&g.isEmpty(this.stagingFacts.selectedConditions))return["Please provide atleast one staging condition"]},options:()=>this.buildStagingOptions(1,this.stagingFacts.stageOneConditions),onValue:t=>this.onStagingCondition(t),computedValue:t=>{const e=t.map(i=>i.label);return this.stagingFacts.stageOneConditions=e,this.updateStagingFacts(),{tag:"staging",obs:e.map(i=>this.staging.buildWhoCriteriaObs(i))}},condition:t=>this.hasStaging(t)},{id:"cd4_available",helpText:"Recent CD4 count results available?",type:o.TT_SELECT,condition:t=>this.hasStaging(t),validation:t=>l.required(t),options:()=>this.yesNoOptions()},{id:"cd4_count",helpText:"CD4 Count",type:o.TT_TEXT,computedValue:t=>{const e=t.value.toString(),i=e.charAt(0),n=parseInt(e.substring(1));return{tag:"staging",modifier:i,count:n,obs:this.staging.buildValueNumber("CD4 count",n,i)}},unload:(t,e,i,n)=>{const{count:s,modifier:a}=n.cd4_count;this.stagingFacts.cd4=s,this.stagingFacts.cd4Modifier=a},onConditionFalse:()=>{this.stagingFacts.cd4=-1,this.stagingFacts.cd4Modifier=""},validation:t=>{const e=()=>this.staging.cd4CountIsValid(t.value);return this.validateSeries([()=>l.required(t),()=>e()?null:["Please start with either modifier first: >, <, or ="],()=>parseInt("".concat(t==null?void 0:t.value).substring(1))>1e4?["Invalid CD4 count value."]:null])},config:{customKeyboard:[v,[["Unknown","Delete"]]]},condition:t=>this.hasStaging(t)&&t.cd4_available.value==="Yes"},...O({id:"cd4_result_date",helpText:"Cd4 Results",required:!0,minDate:()=>this.patient.getBirthdate(),maxDate:()=>this.staging.getDate(),condition:t=>this.hasStaging(t)&&t.cd4_available.value==="Yes",estimation:{allowUnknown:!1},computeValue:(t,e)=>(this.stagingFacts.cd4Date=t,{date:t,tag:"staging",isEstimate:e,obs:this.staging.buildValueDate("Cd4 count datetime",t)})}),{id:"location",helpText:"CD4 Location",type:o.TT_SELECT,defaultValue:()=>u.getLocationName(),computedValue:({label:t})=>({tag:"staging",obs:this.staging.buildValueText("Cd4 count location",t)}),validation:t=>l.required(t),options:(t,e="")=>this.getFacilities(e),config:{showKeyboard:!0,isFilterDataViaApi:!0},condition:t=>this.hasStaging(t)&&t.cd4_available.value==="Yes"}]}}});export{k as _};
