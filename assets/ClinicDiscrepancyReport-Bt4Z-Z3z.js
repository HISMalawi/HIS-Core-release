import{d as m,r as c,t as D,u as g,v as _,w as v,x as b,y as u,cg as C,d7 as r,cU as w,a5 as x,aK as y,O as h}from"./index-BmYpiIZN.js";import{v as R}from"./TableView-B5NqTEaE.js";import{S}from"./stock_report_service-DfnWKU7Q.js";import{w as V}from"./v2utils-CAIxBHVv.js";import"./Export-ylc2T0WI.js";import"./index-BvXVjfY9.js";const E=m({__name:"ClinicDiscrepancyReport",setup(k){const a=c([]),p=y("reports.png"),n=c(""),t=new S,f=[[{label:"Drug Count Date",ref:"verification_date",toValue:e=>"".concat(C(e))},{label:"Drug Name",ref:"short_name"},{label:"Expected Count",ref:"expected_quantity",toValue:e=>r(e)},{label:"Verified Count",ref:"current_quantity",toValue:e=>r(e)},{label:"Difference",ref:"difference",toValue:e=>r(e)},{label:"Reason",ref:"variance_reason"}]],o=()=>V(async()=>{if(!(t.startDate&&t.endDate))return h("Start date and end date required!");a.value=[],a.value=await t.getDiscrepancyReport()}),i=()=>w({onFinish:(e,s,d,l)=>{l&&t.setOccupation(l),n.value="".concat(d),t.startDate=e,t.endDate=s,o()}});return D(()=>!a.value.length&&i()),(e,s)=>(g(),_(u(x),null,{default:v(()=>[b(R,{title:"Clinic Discrepancy Report","icon-url":u(p),"report-prefix":"Clinic",subtitle:n.value,columns:f,columnData:a.value,rowsPerPage:50,onConfigure:i,onRefresh:o},null,8,["icon-url","subtitle","columnData"])]),_:1}))}});export{E as default};
