System.register(["./index-legacy-CA6M7ipO.js","./HisStandardForm-legacy-a9YJRGaH.js","./EncounterMixin.vue_vue_type_script_lang-legacy-qUwf12Yn.js","./encounter_guidelines-legacy-Bcz_Mw7r.js","./GuidelineEngine-legacy-KsvQuFdF.js"],(function(t,e){"use strict";var s,a,i,n,o,l,r,c,u,d,h,f;return{setters:[t=>{s=t.bQ,a=t.d,i=t.W,n=t.R,o=t.ad,l=t.ae,r=t.aa,c=t.c,u=t.af,d=t.a},t=>{h=t.H},t=>{f=t._},null,null],execute:function(){class e extends s{constructor(t,e){super(t,156,e)}getAssessmentValues(){return s.getConceptsByCategory("fast_track")}}const p=a({mixins:[f],components:{HisStandardForm:h},data:()=>({fields:[],fastTrack:{},options:[],values:[],gender:null}),watch:{ready:{async handler(t){t&&this.init(this.patient)},immediate:!0}},methods:{async onFinish(t){if(!(await this.fastTrack.createEncounter()))return i("Unable to create fast track encounter");{const e=await this.buildObs(t);if(!(await this.fastTrack.saveObservationList(e)))return i("Unable to save patient observations");n("Observations and encounter created!"),this.nextTask()}},async init(t){this.gender=t.getGender(),this.fastTrack=new e(t.getID(),this.providerID),this.values=await this.getYesNo(),this.options=await this.getOptions(),this.fields=this.getFields()},async buildObs(t){const e=[];return e.push(await this.fastTrack.buildValueCoded("Assess for fast track",t.ft_assessment.value)),t.ft_questions&&(await t.ft_questions.forEach((async t=>{e.push(await this.fastTrack.buildValueCoded(t.label,t.value))})),e.push(await this.fastTrack.buildValueCoded("Fast track",t.book_client.value))),e},async getOptions(){const t=this.getYesNo(),e=await this.fastTrack.getAssessmentValues("fast_track").map((e=>({label:e.name,value:"",other:{values:t}})));return"M"===this.gender?e.filter((t=>!t.label.match(/Pregnant/i))):e},getYesNo:()=>[{label:"yes",value:"Yes"},{label:"no",value:"No"}],getFields(){return[{id:"ft_assessment",helpText:"Assess client for FT",type:o.TT_SELECT,validation:t=>l.required(t),options:()=>this.getYesNo()},{id:"ft_questions",helpText:"Assess client for FT",type:o.TT_MULTIPLE_YES_NO,condition:t=>"Yes"===t.ft_assessment.value,validation:t=>l.anyEmpty(t),options:()=>this.options},{id:"book_client",helpText:"Select type of visit to book",type:o.TT_SELECT,condition:t=>"Yes"===t.ft_assessment.value,validation:t=>l.required(t),options:()=>[{label:"Fast track",value:"No"},{label:"Normal visit",value:"No"}]}]}}});t("default",r(p,[["render",function(t,e,s,a,i,n){const o=u("his-standard-form");return d(),c(o,{fields:t.fields,onFinishAction:t.onFinish,skipSummary:!0,cancelDestinationPath:t.cancelDestination},null,8,["fields","onFinishAction","cancelDestinationPath"])}]]))}}}));
