System.register(["./ReportMixin.vue_vue_type_script_lang-legacy-Cbxcxwf4.js","./clinic_report_service-legacy-BtJ0vrOB.js","./TableReportTemplate-legacy-CxKxnBF6.js","./index-legacy--hxN_V8z.js","./MultiFieldDateHelper-legacy-B97J9Bxd.js","./dynamic-import-helper-legacy-DYK5bIOV.js","./KbLayouts-legacy-BKvPSxzZ.js","./HisKbConfigurations-legacy-vrLd9Pgz.js","./BasicReportTemplate-legacy-B1A4xCu4.js","./Export-legacy-BAJiCfrv.js","./SIngleTouchField-legacy-X9PnjTsk.js","./Pagination-legacy-Dw_YvCGa.js","./HisStandardForm-legacy-C7VqHmr3.js","./TouchScreenForm-legacy-DxIQwsU4.js","./ToolbarMediumCard-legacy-CzmL2SiF.js","./Transformers-legacy-DhNYVLaS.js","./ViewPort-legacy-TUlObaz7.js","./ReportErrors-legacy-Btn46Hsy.js"],(function(t,e){"use strict";var i,l,o,a,r,n,s,d,c,p,h,u;return{setters:[t=>{i=t._},t=>{l=t.C},t=>{o=t.R},t=>{a=t.d,r=t.L,n=t.ab,s=t._,d=t.r,c=t.o,p=t.c,h=t.w,u=t.b},null,null,null,null,null,null,null,null,null,null,null,null,null,null],execute:function(){const e=[{indicator:"started_tpt_new",label:t=>`Started (New on ART) ${t}`},{indicator:"started_tpt_prev",label:t=>`Started (Previous on ART) ${t}`},{indicator:"completed_tpt_new",label:t=>`Completed (New on ART) ${t}`},{indicator:"completed_tpt_prev",label:t=>`Completed (Previous on ART) ${t}`},{indicator:"not_completed_tpt",label:t=>`Not completed ${t}`},{indicator:"died",label:t=>`Died on ${t}`},{indicator:"defaulted",label:t=>`Defaulted ${t}`},{indicator:"stopped",label:t=>`Stopped ${t}`},{indicator:"transfer_out",label:t=>`Transfer out with ${t}`},{indicator:"confirmed_tb",label:t=>`Confirmed TB on ${t}`},{indicator:"pregnant",label:t=>`Pregnant on ${t}`},{indicator:"breast_feeding",label:t=>`Breastfeeding ${t}`},{indicator:"skin_rash",label:t=>`Skin rash ${t}`},{indicator:"peripheral_neuropathy",label:t=>`Peripheral neuropathy ${t}`},{indicator:"yellow_eyes",label:t=>`Yellow eyes ${t}`},{indicator:"nausea",label:t=>`Nausea ${t}`},{indicator:"dizziness",label:t=>`Dizziness ${t}`}],T=a({mixins:[i],components:{ReportTemplate:o},data:()=>({title:"TPT Outcome",cohort:{},rows:[],columns:[[r.thTxt("Age group"),r.thTxt("TPT Type"),r.thTxt("Started TPT (New on ART)"),r.thTxt("Started TPT (Previous on ART)"),r.thTxt("Completed TPT (New on ART)"),r.thTxt("Completed TPT (Previous on ART)"),r.thTxt("Not completed TPT"),r.thTxt("Died"),r.thTxt("Defaulted"),r.thTxt("Stopped ART"),r.thTxt("TO"),r.thTxt("Confirmed TB "),r.thTxt("Pregnant"),r.thTxt("Breastfeeding"),r.thTxt("Skin rash"),r.thTxt("Peripheral neuropathy"),r.thTxt("Yellow eyes"),r.thTxt("Nausea"),r.thTxt("Dizziness")]]}),created(){this.fields=this.getDateDurationFields()},methods:{async onPeriod(t,e){this.rows=[],this.report=new l,this.report.setStartDate(e.start_date),this.report.setEndDate(e.end_date),this.report.setOccupation(e.occupation),this.period=this.report.getDateIntervalPeriod(),this.cohort=await this.report.getTtpOutcomes()||[],this.setRows(),this.setMaleTotalsRow(),await this.setFemaleAggregations()},setMaleTotalsRow(){const t=this.cohort.reduce(((t,i)=>(e.forEach((e=>{t[e.indicator]||(t[e.indicator]=[]),i[e.indicator]&&(t[e.indicator]=t[e.indicator].concat(i[e.indicator].filter((t=>"M"===t.gender)).map((t=>t.patient_id))))})),t)),{});this.rows.push([r.td("All"),r.td("Male"),...e.map((e=>this.drill(t[e.indicator],e.label("All"))))])},async setFemaleAggregations(){const t=this.cohort.reduce(((t,i)=>(e.forEach((e=>{t[e.indicator]||(t[e.indicator]=[]),i[e.indicator]&&(t[e.indicator]=t[e.indicator].concat(i[e.indicator].filter((t=>"F"===t.gender)).map((t=>t.patient_id))),t.all=t.all.concat(t[e.indicator]))})),t)),{all:[]}),i=this.cohort.reduce(((t,e)=>n.uniq(t.concat(e.pregnant||[]))),[]),l=this.cohort.reduce(((t,e)=>n.uniq(t.concat(e.breast_feeding||[]))),[]),o=i.concat(l);this.rows.push([r.td("All"),r.td("FP"),...e.map((e=>this.drill(t[e.indicator].filter((t=>i.includes(t))),e.label("All FP"))))]),this.rows.push([r.td("All"),r.td("FNP"),...e.map((e=>this.drill(t[e.indicator].filter((t=>!o.includes(t))),e.label("All FNP"))))]),this.rows.push([r.td("All"),r.td("FBF"),...e.map((e=>this.drill(t[e.indicator].filter((t=>l.includes(t))),e.label("All FBF"))))])},setRows(){const t=[],i=[];this.cohort.forEach((l=>{const o=[r.td(l.age_group),r.td(l.tpt_type),...e.map((t=>this.drill((l[t.indicator]||[]).map((t=>t.patient_id)),t.label(l.tpt_type))))];"3HP"===l.tpt_type?i.push(o):t.push(o)})),this.rows=i.concat(t)}}});t("default",s(T,[["render",function(t,e,i,l,o,a){const r=d("report-template"),n=d("ion-page");return c(),p(n,null,{default:h((()=>[u(r,{title:t.title,period:t.period,rows:t.rows,fields:t.fields,columns:t.columns,config:{showIndex:!0},reportPrefix:"Clinic",onReportConfiguration:t.onPeriod},null,8,["title","period","rows","fields","columns","onReportConfiguration"])])),_:1})}]]))}}}));
