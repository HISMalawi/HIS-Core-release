import{d as m,K as T,b5 as E,cV as v,V as n,o as f,c as S,w as A,b as L,cl as s,I as D}from"./index-BCTN_bnC.js";import{H as I}from"./HisStandardForm-CaDwl-hA.js";import{u as b}from"./useEncounter-CDUT-p5Y.js";import{F as d}from"./dynamic-import-helper-BkBZiFw5.js";import{r as R}from"./commons-BDvZ1JFN.js";import{g as e}from"./util-CyjuS_4X.js";import"./TouchScreenForm-TKB9q3ZD.js";import"./ToolbarMediumCard-O_J6wu7C.js";import"./Transformers-BPPLlH12.js";import"./ViewPort-BCxYiILf.js";import"./isEmpty-OXtHK5dz.js";import"./_Set-VKtKUQAI.js";import"./_setToArray-BLmuRUHx.js";import"./encounter_guidelines-DZpIPlYY.js";import"./GuidelineEngine-D6V1_Znr.js";const G=m({__name:"Lam",setup(O){const r=T([]),t=new E(-1,v.LAB_RESULTS),{goToNextTask:l,patientDashboardUrl:c}=b((i,o)=>{t.patientID=o,t.providerID=i;const u=()=>({id:"sampleResult",helpText:"LAM Result:",type:d.TT_SELECT,validation:a=>n.required(a),computedValue:a=>[{concept_id:e("TB_STATUS"),value_coded:e("".concat(a.value)),obs_datetime:t.date},{concept_id:e("BACTERIOLOGICALLY_DIAGNOSED"),value_coded:e("YES_ANSWER"),obs_datetime:t.date},{concept_id:e("PROCEDURE_TYPE"),value_coded:e("LAM"),obs_datetime:t.date},...a.value==="POSITIVE"?[{concept_id:e("TB_TYPE"),value_coded:e("EXTRA_PULMONARY_TB"),obs_datetime:t.date},{concept_id:e("TUBERCULOSIS_CLASS"),value_coded:e("LAM"),obs_datetime:t.date}]:[]],options:()=>[{value:"POSITIVE",label:"Positive"},{value:"NEGATIVE",label:"Negative"}]}),_=()=>({id:"resultDate",field_type:"date",helpText:"Sample Result Date:",type:d.TT_FULL_DATE,computedValue:a=>({concept_id:e("RESULT_DATE"),value_datetime:a.value,obs_datetime:t.date}),validation:a=>n.required(a)});r.value=[u(),_()]});async function p(i,o){await t.createEncounter(),await t.saveObservationList(await R(o)),l()}return(i,o)=>(f(),S(s(D),null,{default:A(()=>[L(I,{cancelDestinationPath:s(c),onFinishAction:p,fields:r.value,skipSummary:!0},null,8,["cancelDestinationPath","fields"])]),_:1}))}});export{G as default};
