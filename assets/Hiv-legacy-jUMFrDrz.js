System.register(["./index-legacy-Dg5P6bX-.js","./dynamic-import-helper-legacy-arUa2LZV.js","./HisStandardForm-legacy-BXV61qjj.js","./useEncounter-legacy-Bp6E5sCN.js","./util-legacy-CjANJSja.js","./commons-legacy-CiEua9CM.js","./TouchScreenForm-legacy-Bqug27CT.js","./ToolbarMediumCard-legacy-DWokgyDV.js","./Transformers-legacy-DhNYVLaS.js","./ViewPort-legacy-D3j1oaCn.js","./isEmpty-legacy-rdjCNuhy.js","./_Set-legacy-BL8ow4HL.js","./_setToArray-legacy-jEwcQpqP.js","./encounter_guidelines-legacy-mRSBdMQj.js","./GuidelineEngine-legacy-KsvQuFdF.js"],(function(e,t){"use strict";var a,l,i,u,o,n,d,s,r,T,c,_,v,S,E,p;return{setters:[e=>{a=e.d,l=e.K,i=e.b5,u=e.cV,o=e.V,n=e.o,d=e.c,s=e.w,r=e.b,T=e.cl,c=e.I},e=>{_=e.F},e=>{v=e.H},e=>{S=e.u},e=>{E=e.g},e=>{p=e.r},null,null,null,null,null,null,null,null,null],execute:function(){e("default",a({__name:"Hiv",setup(e){const t=l([]),a=new i(-1,u.UPDATE_HIV_STATUS),{goToNextTask:A,patientDashboardUrl:m}=S(((e,l)=>{a.patientID=l,a.providerID=e,t.value=[{id:"hivStatus",helpText:"HIV Status",type:_.TT_SELECT,requireNext:!1,validation:e=>o.required(e),computedValue:e=>"NOT_DONE"===e.value?{concept_id:E("HIV_TEST_DONE_TODAY"),value_coded:E("NO_ANSWER"),obs_datetime:a.date}:{concept_id:E("HIV_STATUS"),value_coded:E(`${e.value}`),obs_datetime:a.date},options:()=>[{value:"POSITIVE",label:"Positive"},{value:"NEGATIVE",label:"Negative"},{value:"NOT_DONE",label:"Not Tested"}]},{id:"timeOfHIVTest",helpText:"Time of HIV test",type:_.TT_SELECT,requireNext:!1,validation:e=>o.required(e),computedValue:e=>({concept_id:E("TIME_OF_HIV_TEST"),value_coded:E(`${e.value}`),obs_datetime:a.date}),condition:e=>"POSITIVE"===e.hivStatus.value||"NEGATIVE"===e.hivStatus.value,options:()=>[{value:"HIV_BEFORE_TB",label:"Before TB Registration"},{value:"HIV_AFTER_TB",label:"After TB Registration"}]},{id:"artStatus",helpText:"ART Started",type:_.TT_SELECT,requireNext:!1,validation:e=>o.required(e),condition:e=>"POSITIVE"===e.hivStatus.value,computedValue:e=>({concept_id:E("ON_ART"),value_coded:E(`${e.value}`),obs_datetime:a.date}),options:()=>[{value:"YES_ANSWER",label:"Yes"},{value:"NO_ANSWER",label:"No"}]},{id:"arvStatus",helpText:"ARV Status",type:_.TT_SELECT,requireNext:!1,validation:e=>o.required(e),condition:e=>"YES_ANSWER"===e.artStatus.value,computedValue:e=>({concept_id:E("ARV_STATUS"),value_coded:E(`${e.value}`),obs_datetime:a.date}),options:()=>[{value:"ARV_BEFORE_TB",label:"Started ARV before TB Treatment"},{value:"ARV_WHILE_TB",label:"Started ARV while on TB Treatment"},{value:"ARV_AFTER_DISCHARGE",label:"ARV not started by the time when discharged from TB treatment"}]},{id:"cptStatus",helpText:"Started CPT",type:_.TT_SELECT,requireNext:!1,validation:e=>o.required(e),condition:e=>"YES_ANSWER"===e.artStatus.value,computedValue:e=>({concept_id:E("ON_CPT"),value_coded:E(`${e.value}`),obs_datetime:a.date}),options:()=>[{value:"YES_ANSWER",label:"Yes"},{value:"NO_ANSWER",label:"No"}]},{id:"cptStartDate",helpText:"CPT Start Date",type:_.TT_FULL_DATE,validation:e=>o.required(e),computedValue:e=>({concept_id:E("CPT_START_DATE"),[/unknown/i.test(`${e.value}`)?"value_text":"value_datetime"]:e.value,obs_datetime:a.date}),condition:e=>"YES_ANSWER"===e.cptStatus.value,config:{allowUnknown:!0}}]}));async function V(e,t){await a.createEncounter(),await a.saveObservationList(await p(t)),A()}return(e,a)=>(n(),d(T(c),null,{default:s((()=>[r(v,{cancelDestinationPath:T(m),onFinishAction:V,fields:t.value,skipSummary:!0},null,8,["cancelDestinationPath","fields"])])),_:1}))}}))}}}));
