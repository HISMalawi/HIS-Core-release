System.register(["./BaseTextInput-legacy--ddJuJ1D.js","./HisKeyboard-legacy-zNn6DvML.js","./KbHandler-legacy-YpKYWvgQ.js","./HisKbConfigurations-legacy-AV_G95Cg.js","./ViewPort-legacy-AULqwBLs.js","./KbLayouts-legacy-NQmKRJpJ.js","./FieldMixin.vue_vue_type_script_lang-legacy-9Y6tvN5T.js","./index-legacy-2bdI6aeZ.js","./BaseKeyboard-legacy-EPPfL8N-.js"],(function(e,t){"use strict";var a,i,s,n,l,o,r,u,h,y,d,c,f,g,b,m,v;return{setters:[e=>{a=e.default},e=>{i=e.H},e=>{s=e.k},e=>{n=e.M},e=>{l=e.V},e=>{o=e.M},e=>{r=e._},e=>{u=e.d,h=e._,y=e.r,d=e.o,c=e.x,f=e.b,g=e.w,b=e.v,m=e.z,v=e.F},null],execute:function(){const t=u({components:{BaseInput:a,HisKeyboard:i,ViewPort:l},mixins:[r],data:()=>({value:"",errors:"",minDays:1,maxDays:30,keyboard:[]}),mounted(){this.init()},activated(){this.init()},methods:{async init(){this.$emit("onFieldActivated",this);let e=o;this.config?(this.config.year&&this.config.month&&(e=this.generateKeypad(this.config.year(this.fdata),this.config.month(this.fdata))),this.config.keyboardActions?this.keyboard=[e,this.config.keyboardActions]:this.keyboard=[e,[["Unknown"]]]):this.keyboard=n,await this.setDefaultValue()},onKbValue(e){this.value=e,this.emitValue()},keypress(e){this.value=s(e,""),this.emitValue()},emitValue(){this.errors="";let e=this.value;if(e)if(e.toString().match(/unknown/i))this.$emit("onValue",{label:"Unknown",value:"Unknown"});else{if(isNaN(e))return this.errors="Invalid number",void this.$emit("onValue",null);e=parseInt(e),e<this.minDays||e>this.maxDays?(this.errors="Value number is out of range",this.$emit("onValue",null)):this.$emit("onValue",{label:e,value:e})}else this.$emit("onValue",null)},generateKeypad(e,t){const a=[[]];this.maxDays=new Date(e,t,0).getDate();let i=0,s=0;for(let n=0;n<this.maxDays;++n)s>7&&(++i,a[i]=[],s=0),a[i].push(`${n+1}`),++s;return a},async setDefaultValue(){if(this.defaultValue&&!this.value){const e=await this.defaultValue(this.fdata,this.cdata);e&&(this.value=e,this.emitValue())}}},watch:{clear(){this.value=""}}}),V={key:0,style:{color:"red","font-weight":"bold"}};e("default",h(t,[["render",function(e,t,a,i,s,n){const l=y("base-input"),o=y("view-port"),r=y("his-keyboard");return d(),c(v,null,[f(o,null,{default:g((()=>[f(l,{value:e.value,onOnValue:e.onKbValue},null,8,["value","onOnValue"]),e.errors?(d(),c("span",V," **"+b(e.errors)+"** ",1)):m("",!0)])),_:1}),f(r,{kbConfig:e.keyboard,onKeyPress:e.keypress,disabled:!1},null,8,["kbConfig","onKeyPress"])],64)}]]))}}}));
