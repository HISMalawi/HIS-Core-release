System.register(["./index-legacy-2OuOZQ1w.js"],(function(e,t){"use strict";var a,l,o,n,r,s,c,i,u,d,f,v,g,h,m,p,k,b,y,V,C,_,w,P,L,x,j,D,I,N,O,R,S,z,A,T,E,H,M;return{setters:[e=>{a=e.d,l=e.k,o=e.i,n=e.ah,r=e.aE,s=e.a7,c=e.l,i=e.r,u=e.c,d=e.aR,f=e.cf,v=e.cg,g=e.ck,h=e.cn,m=e.a_,p=e.am,k=e.ar,b=e.h,y=e.b,V=e.g,C=e.e,_=e.a9,w=e.aa,P=e.w,L=e.a,x=e.a6,j=e.t,D=e.bc,I=e.j,N=e.ak,O=e.al,R=e.d9,S=e.C,z=e.f,A=e.bg,T=e.b9,E=e.bh,H=e.bN,M=e.cw}],execute:function(){var t=document.createElement("style");t.textContent="th[data-v-6173022f],td[data-v-6173022f]{border-collapse:collapse;min-width:160px;border:1px solid rgb(158,158,158)}td[data-v-6173022f]{font-weight:500;font-size:.8em;padding:.4em}.stick-report-header[data-v-6173022f]{position:sticky;top:0;z-index:1000}tr[data-v-6173022f]:nth-child(2n){background-color:#f0f0f0}.clickable-cell[data-v-6173022f]{color:#0645ad}.his-floating-keyboard[data-v-6173022f]{bottom:70px!important}\n/*$vite$:1*/",document.head.appendChild(t);const $=a({components:{IonToolbar:c,IonItem:s,IonIcon:r,IonLabel:n,IonButton:o,IonFooter:l},props:{columns:{type:Object,required:!0},columnData:{type:Array,default:()=>[]},rowsPerPage:{type:Number,default:10},defaultSortedColumn:{type:String},defaultSortOrder:{type:Object}},setup(e){const t=i([]),a=i(0),l=i(""),o=i("desc"),n=u((()=>{let e=t.value;return o.value&&l.value&&(e=h(t.value)[o.value]((e=>e.sortData[l.value]))),e})),r=u((()=>m.chunk(n.value,e.rowsPerPage).length)),s=u((()=>a.value+2<=r.value)),c=u((()=>a.value>0)),p=u((()=>m.chunk(n.value,e.rowsPerPage)[a.value])),k=a=>{a.forEach((a=>{const l={...a},o=e.columns.reduce(((e,t)=>e.concat(t)),[]).filter((e=>e.value||e.ref)).map((e=>{let t="";const o=a[e.ref];try{t=m.isEmpty(a)?"":"function"==typeof e.toValue?`${e.toValue(o)}`:"function"==typeof e.value?e.value(a):a[e.ref]||""}catch(n){t=e?.defaultValue||"_ERROR_",console.error(n)}return l[e.ref]=t,"function"==typeof e.sortValue&&(l[e.ref]=e.sortValue(o)),{column:e,refData:o,value:t,data:a}}));t.value.push({row:o,data:a,sortData:l,searchIndex:[...o,o.map((e=>e.value)).join(" ")]})}))};return d((()=>e.columnData),(n=>{if(t.value=[],!Array.isArray(n)||!n.length)return a.value=0,l.value=e.defaultSortedColumn??"",o.value=e.defaultSortOrder||"desc",void k(Array.from({length:0}).map((()=>({}))));k(n)}),{immediate:!0,deep:!0}),{first:()=>a.value=0,last:()=>a.value=r.value-1||0,next:()=>a.value+=1,prev:()=>a.value-=1,selectPage:()=>g((e=>{const t=parseInt(e);parseInt(e)<=r.value&&(a.value=t)}),{title:"Select page"}),sortColumn:e=>{l.value=e,o.value="asc"===o.value?"desc":"asc"},onClickTablecell:e=>{try{return void("function"==typeof e.column?.tdClick&&e.column?.tdClick(e))}catch(t){console.error(t)}},close:close,arrowUp:v,arrowDown:f,page:p,canNext:s,totalPages:r,sortOrder:o,canPrev:c,currentPage:a,columnSorted:l}}}),U={style:{width:"100%"}},F={class:"stick-report-header"},q=["colspan","rowspan","onClick"],B=["onClick"],G=["innerHTML"],J=(e=>(N("data-v-6173022f"),e=e(),O(),e))((()=>V("p",null,null,-1))),K=p($,[["render",function(e,t,a,l,o,n){const r=k("ion-icon"),s=k("ion-label"),c=k("ion-item"),i=k("ion-button"),u=k("ion-toolbar"),d=k("ion-footer");return y(),b(_,null,[V("div",null,[V("table",U,[V("thead",F,[(y(!0),b(_,null,w(e.columns,((t,a)=>(y(),b("tr",{key:a},[(y(!0),b(_,null,w(t,((t,a)=>(y(),b("th",{key:a,colspan:t?.span?.thColspan||1,rowspan:t?.span?.thRowspan||1,onClick:a=>e.sortColumn(t.ref)},[C(c,{lines:"none"},{default:P((()=>[e.columnSorted&&e.columnSorted===t.ref?(y(),L(r,{key:0,icon:"asc"===e.sortOrder?e.arrowUp:e.arrowDown},null,8,["icon"])):x("",!0),C(s,null,{default:P((()=>[V("b",null,j(t.label),1)])),_:2},1024)])),_:2},1024)],8,q)))),128))])))),128))]),V("tbody",null,[(y(!0),b(_,null,w(e.page,((t,a)=>(y(),b("tr",{key:a},[(y(!0),b(_,null,w(t.row,((t,a)=>(y(),b("td",{key:a,onClick:()=>e.onClickTablecell(t),class:D({"clickable-cell":t?.column?.tdClick})},[V("span",{innerHTML:t.value,class:"his-sm-text"},null,8,G)],10,B)))),128))])))),128))])])]),J,C(d,null,{default:P((()=>[C(u,{color:"light"},{default:P((()=>[e.totalPages>1?(y(),L(i,{key:0,onClick:e.first,disabled:0===e.currentPage||e.totalPages<=2,size:"large",slot:"end"},{default:P((()=>[I(" First ")])),_:1},8,["onClick","disabled"])):x("",!0),e.totalPages>1?(y(),L(i,{key:1,onClick:e.prev,disabled:!e.canPrev,color:"light",size:"large",slot:"end"},{default:P((()=>[I(" Prev ")])),_:1},8,["onClick","disabled"])):x("",!0),e.totalPages>1?(y(),L(i,{key:2,onClick:e.selectPage,size:"large",slot:"end",color:"light"},{default:P((()=>[I(j(e.currentPage)+" / "+j(e.totalPages-1),1)])),_:1},8,["onClick"])):x("",!0),e.totalPages>1?(y(),L(i,{key:3,onClick:e.next,disabled:!e.canNext,color:"light",size:"large",slot:"end"},{default:P((()=>[I(" Next ")])),_:1},8,["onClick","disabled"])):x("",!0),e.totalPages>1?(y(),L(i,{key:4,onClick:e.last,disabled:e.currentPage+1>=e.totalPages||e.totalPages<=2,size:"large",slot:"end"},{default:P((()=>[I(" Last ")])),_:1},8,["onClick","disabled"])):x("",!0)])),_:1})])),_:1})],64)}],["__scopeId","data-v-6173022f"]]),Q={key:0},W=V("p",null,null,-1),X={key:1,class:"his-card ion-text-center his-lg-text"};e("default",a({__name:"HomeNotifications",setup(e){const{notificationData:t,hasNotifications:a,clearNotification:l,openNotification:o}=R(),r=i("highVL"),s=S({highVL:[],rejectedVL:[],normalVL:[],initiatedData:{},stats:{}}),c=u((()=>[[{ref:"arv",label:"ARV #"},{ref:"accession",label:"Accession #"},{ref:"order_date",label:"Order Date",toValue:e=>`${M(e)}`},..."rejectedVL"===r.value?[{ref:"rejection_reason",label:"Rejection Reason"}]:[],{ref:"id",label:"View",toValue:()=>"View",tdClick:e=>o(e.data)},{ref:"id",label:"Clear",toValue:()=>"Clear",tdClick:e=>l(e.refData,(e=>{s[r.value]=s[r.value].filter((t=>t.id!=e))}))}]]));async function f(e,a=t.value){if(a.length&&s.initiatedData[e])return;let l=6e3;const o=m.chunk(a?.[0]?.vlMessageObs?.[e]??{},7);s.initiatedData[e]=a.length>0,s[e]=[];for(const t of o)s[e]=[...s[e],...t],await H(l),l=30;s[e]=[...s[e]].sort(((e,t)=>new Date(e.order_date)>new Date(t.order_date)?-1:1))}return d(t,(async e=>{f(r.value,e),setTimeout((()=>{const t=e?.[0]?.vlMessageObs??{};s.stats.highVL=(t.highVL??[]).length,s.stats.normalVL=(t.normalVL??[]).length,s.stats.rejectedVL=(t.rejectedVL??[]).length}),50)}),{immediate:!0,deep:!0}),(e,t)=>(y(),b("div",null,[z(a)?(y(),b("div",Q,[C(z(E),{mode:"ios",modelValue:r.value,"onUpdate:modelValue":t[3]||(t[3]=e=>r.value=e),class:"ion-justify-content-center"},{default:P((()=>[C(z(A),{onClick:t[0]||(t[0]=e=>f("highVL")),value:"highVL"},{default:P((()=>[C(z(n),{class:"his-sm-text",style:{"font-weight":"bold"}},{default:P((()=>[I("High Vl")])),_:1}),C(z(T),{color:"danger"},{default:P((()=>[I(j(s.stats?.highVL??"-"),1)])),_:1})])),_:1}),C(z(A),{onClick:t[1]||(t[1]=e=>f("rejectedVL")),value:"rejectedVL"},{default:P((()=>[C(z(n),{class:"his-sm-text",style:{"font-weight":"bold"}},{default:P((()=>[I("Rejected")])),_:1}),C(z(T),{color:"warning"},{default:P((()=>[I(j(s.stats?.rejectedVL??"-"),1)])),_:1})])),_:1}),C(z(A),{onClick:t[2]||(t[2]=e=>f("normalVL")),value:"normalVL"},{default:P((()=>[C(z(n),{class:"his-sm-text",style:{"font-weight":"bold"}},{default:P((()=>[I("Normal Results")])),_:1}),C(z(T),{color:"success"},{default:P((()=>[I(j(s.stats?.normalVL??"-"),1)])),_:1})])),_:1})])),_:1},8,["modelValue"]),W,(y(),L(K,{key:r.value,columns:c.value,"column-data":s[r.value],"rows-per-page":7},null,8,["columns","column-data"]))])):(y(),b("div",X," No notifications "))]))}}))}}}));
