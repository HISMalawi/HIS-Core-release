import{V as y}from"./ViewPort-BCxYiILf.js";import{d as g,f as k,H as a,n as O,O as S,ab as D,_ as $,r as d,o as i,c as C,w as m,A as e,x as l,F as p,y as u,b as x,u as _,v as o,a2 as F,a3 as H,a4 as B}from"./index-BCTN_bnC.js";import{L as I}from"./LabOrderModal-C58uf0w4.js";import{_ as V}from"./FieldMixin.vue_vue_type_script_lang-BcY4Dt1h.js";import"./lab_order_service-0WRc4or6.js";import"./HisKbConfigurations-GhFQZvlg.js";import"./KbLayouts-VRA-vjeH.js";import"./HisKeyboard-COmBOOo8.js";import"./BaseKeyboard-BdU8h7Jm.js";import"./KbHandler-BuQ4TFU6.js";import"./fuse-YdZE3OCN.js";const L=g({components:{ViewPort:y,IonButton:k},mixins:[V],data:()=>({HisDate:a,rows:[]}),methods:{async init(){this.$emit("onFieldActivated",this);const t=(await this.options(this.fdata))[0].other.values;this.rows=t.map(r=>(r.id=r.order_id,r.ordered&&(r.ordered=a.toStandardHisDisplayFormat(r.ordered)),r.released&&(r.released=a.toStandardHisDisplayFormat(r.released)),r))},async printOrder(s){var t;typeof((t=this.config)==null?void 0:t.printOrder)=="function"&&await O("Do you want to print order with accession number ".concat(s.accession_number,"?"))&&this.config.printOrder(s.id)},formatOrders(s){return s.map(t=>({id:t.order_id,encounter_id:t.encounter_id,result_given:t.result_given,accession_number:t.accession_number,test_name:t.tests[0].name,specimen:t.specimen.name,ordered:a.toStandardHisDisplayFormat(t.order_date),result:[],release:""}))},async launchOrderSelection(s=null){const t=await S.create({component:I,backdropDismiss:!1,cssClass:"large-modal",componentProps:{testFilters:s}});t.present();const{data:r}=await t.onDidDismiss();D.isEmpty(r)||(this.rows=[...this.formatOrders(r),...this.rows])}},mounted(){this.init()},activated(){this.init()}}),h=s=>(H("data-v-b274fd21"),s=s(),B(),s),N={class:"view-port-content"},A={class:"his-sm-text"},E=h(()=>e("tr",null,[e("th",null,"Accession #"),e("th",null,"Test Name"),e("th",null,"Specimen"),e("th",null,"Ordered"),e("th",null,"Result"),e("th",null,"Released"),e("th",null,"Given")],-1)),P=h(()=>e("br",null,null,-1));function R(s,t,r,T,z,G){const f=d("ion-button"),w=d("view-port");return i(),C(w,null,{default:m(()=>[e("div",N,[e("table",A,[E,(i(!0),l(p,null,u(s.rows,(n,b)=>(i(),l("tr",{key:b},[e("td",null,[x(f,{color:"light",fill:"none",onClick:c=>s.printOrder(n)},{default:m(()=>[_(o(n.accession_number),1)]),_:2},1032,["onClick"])]),e("td",null,o(n.test_name),1),e("td",null,o(n.specimen),1),e("td",null,o(n.ordered),1),e("td",null,[(i(!0),l(p,null,u(n.result,(c,v)=>(i(),l("span",{key:v},[_(o(c)+" ",1),P]))),128))]),e("td",null,o(n.released),1),e("td",null,[e("span",{style:F("color: ".concat(n.result_given==="Yes"?"green;":"black;"))},o(n.result_given),5)])]))),128))])])]),_:1})}const ee=$(L,[["render",R],["__scopeId","data-v-b274fd21"]]);export{ee as default};
