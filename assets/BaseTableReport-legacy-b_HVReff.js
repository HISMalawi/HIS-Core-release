System.register(["./index-legacy-CNrLGT3P.js","./HisStandardForm-legacy-OekRIZB_.js"],(function(e,t){"use strict";var o,a,r,s,i,n,l,c,u,d,p,m,h,g,f,P,y,F,b,w,C,D,v,R,I,S,k,_,V,x,L,O,B,T,$,A,H,U,E;return{setters:[e=>{o=e.d,a=e.j,r=e.R,s=e.bI,i=e.I,n=e.l,l=e.i,c=e.cF,u=e.cG,d=e.m,p=e.av,m=e.D,h=e.H,g=e.S,f=e.bL,P=e.a0,y=e.q,F=e.bM,b=e.bN,w=e.aj,C=e.bO,D=e._,v=e.r,R=e.o,I=e.x,S=e.a5,k=e.bP,_=e.b,V=e.c,x=e.w,L=e.A,O=e.u,B=e.v,T=e.bQ,$=e.B,A=e.z,H=e.a8,U=e.a9},e=>{E=e.H}],execute:function(){var t=document.createElement("style");t.textContent=".report-content[data-v-2b6cbb18]{margin:auto;width:99.9%;height:99%;overflow:auto}.header-text-list[data-v-2b6cbb18]{list-style:none}\n",document.head.appendChild(t);const N=o({components:{HisStandardForm:E,IonHeader:a,ReportTable:r,HisFooter:s,IonPage:i,IonContent:n,IonToolbar:l,Pagination:c,ReportFilter:u,IonFooter:d,IonChip:p,IonLabel:m},props:{title:{type:String,required:!0},customFilter:{type:Function},period:{type:String,default:""},encryptPDF:{type:Boolean,default:!1},config:{type:Object},fields:{type:Array,default:()=>[]},columns:{type:Array,required:!0},rows:{type:Array,required:!0},paginated:{type:Boolean,default:!1},customBtns:{type:Array,default:()=>[]},canExportPDf:{type:Boolean,default:!0},canExportCsv:{type:Boolean,default:!0},onReportConfiguration:{type:Function,required:!1},rowParser:{type:Function},showFilters:{type:Boolean,default:!1},showVLFilter:{type:Boolean,default:!1},rowsPerPage:{type:Number},asyncRows:{type:Function},footerColor:{type:String,default:"dark"},customFileName:{type:String,default:""},canExport:{type:Boolean,default:!0},showReportStamp:{type:Boolean,default:!0},customInfo:{type:Object},reportPrefix:{type:String,default:""}},data:()=>({formData:{},computeFormData:{},btns:[],isLoadingData:!1,showForm:!1,logo:"/assets/images/login-logos/Malawi-Coat_of_arms_of_arms.png",isTableLoading:!1,searchFilter:"",itemsPerPage:50,itemsVLtype:"",currentPage:0,tableRows:[],totalPages:0,activeColumns:[],activeRows:[],date:h.toStandardHisDisplayFormat(g.getSessionDate()),apiVersion:g.getApiVersion(),coreVersion:g.getCoreVersion(),siteUUID:g.getSiteUUID(),tableCssTheme:"opd-report-theme"}),methods:{getFileName(){return`${this.reportPrefix??""} ${g.getLocationName()} ${f(this.title).replace(this.reportPrefix,"")} ${this.period??this.date}`},pdfEncryptionData(){const e=g.getUserName();return{encryption:{userPassword:e,ownerPassword:e,userPermissions:["print"]}}},async onFinish(e,t){this.formData=e,this.computeFormData=t,this.showForm=!1,await this.presentLoading();try{this.onReportConfiguration&&await this.onReportConfiguration(this.formData,this.computeFormData),P.dismiss()}catch(o){console.error(o),y(`${o}`),P.dismiss()}},async reloadReport(){await this.onFinish(this.formData,this.computeFormData)},async presentLoading(){const e=await P.create({message:"Please wait...",backdropDismiss:!1});await e.present()}},created(){this.showForm=!!this.fields.length,this.btns=this.customBtns,this.btns.push({name:"CSV",size:"large",slot:"start",color:"primary",visible:this.canExportCsv,onClick:async()=>{const{columns:e,rows:t}=F(this.columns,this.rows,"csvMode");b(e,[...t,[`Date Created: ${this.date}`],[`Period: ${this.period}`],[`HIS-Core Version: ${this.coreVersion}`],[`API Version: ${this.apiVersion}`],[`Site UUID: ${this.siteUUID}`]],this.getFileName())}},{name:"PDF",size:"large",slot:"start",color:"primary",visible:this.canExportPDf,onClick:async()=>{let e="pdfMode";this.encryptPDF&&(e="Secure PDF"===await w("Security warning","PDF may contain private data that will require a password to unlock","To access private data choose Secure PDF over Regular PDF",[{name:"Secure PDF",slot:"start",color:"success"},{name:"Regular PDF",slot:"start",color:"success"}],"his-danger-color")?"pdfMode":"ignorePDFColumnexport");const{columns:t,rows:o}=F(this.activeColumns,this.activeRows,e);C(t,o,this.getFileName(),!1,this.encryptPDF&&"ignorePDFColumnexport"!=e?this.pdfEncryptionData():{})}},{name:"Back",size:"large",slot:"end",color:"primary",visible:!0,onClick:()=>this.showForm=!0},{name:"Refresh",size:"large",slot:"end",color:"warning",visible:!0,onClick:()=>this.reloadReport()},{name:"Finish",size:"large",slot:"end",color:"success",visible:!0,onClick:()=>this.$router.push({path:"/"})})}}),j={class:"header-text-list"},q={key:0},z=(e=>(H("data-v-2b6cbb18"),e=e(),U(),e))((()=>L("template",null,null,-1))),M={class:"report-content"};e("R",D(N,[["render",function(e,t,o,a,r,s){const i=v("his-standard-form"),n=v("ion-img"),l=v("ion-thumbnail"),c=v("ion-label"),u=v("report-filter"),d=v("ion-toolbar"),p=v("ion-header"),m=v("report-table"),h=v("ion-content"),g=v("pagination"),f=v("ion-chip"),P=v("ion-footer"),y=v("his-footer"),F=v("ion-page");return R(),I($,null,[S(_(i,{onOnFinish:e.onFinish,skipSummary:!0,fields:e.fields},null,8,["onOnFinish","fields"]),[[k,e.showForm]]),e.showForm?A("",!0):(R(),V(F,{key:0},{default:x((()=>[_(p,null,{default:x((()=>[_(d,null,{default:x((()=>[_(l,{slot:"start"},{default:x((()=>[_(n,{src:e.logo},null,8,["src"])])),_:1}),_(c,null,{default:x((()=>[L("ul",j,[L("li",null,[O("Title "),L("b",null,B(e.title),1)]),L("li",null,[O("Period "),L("b",null,B(e.period),1)]),e.customInfo?(R(),I("li",q,[O(B(e.customInfo.label)+" ",1),L("b",null,["function"==typeof e.customInfo?.other?.click?(R(),I("a",{key:0,href:"#",onClick:t[0]||(t[0]=T((t=>e.customInfo.other.click()),["prevent"]))},B(e.customInfo.value),1)):(R(),I($,{key:1},[O(B(e.customInfo.value),1)],64))])])):A("",!0),z])])),_:1}),_(u,{slot:"end",showPerPageFilter:e.showFilters||e.paginated,disableSearchFilter:e.isTableLoading,disablePerPageFilter:e.isTableLoading,totalRowCount:e.tableRows.length,customFilter:e.customFilter,onOnItemsPerPage:t[1]||(t[1]=t=>e.itemsPerPage=t),onOnItemsVLtype:t[2]||(t[2]=t=>e.itemsVLtype=t),onOnSearchFilter:t[3]||(t[3]=t=>e.searchFilter=t)},null,8,["showPerPageFilter","disableSearchFilter","disablePerPageFilter","totalRowCount","customFilter"])])),_:1})])),_:1}),_(h,null,{default:x((()=>[L("div",M,[_(m,{rows:e.rows,paginated:e.paginated,asyncRows:e.asyncRows,rowParser:e.rowParser,config:{...e.config,tableCssTheme:e.tableCssTheme},columns:e.columns,showFilters:e.showFilters,newPage:e.currentPage,searchFilter:e.searchFilter,rowsPerPage:e.itemsPerPage,onOnIsLoading:t[4]||(t[4]=t=>e.isTableLoading=t),onOnTableRows:t[5]||(t[5]=t=>e.tableRows=t),onOnPagination:t[6]||(t[6]=t=>e.totalPages=t.length),onOnActiveColumns:t[7]||(t[7]=t=>e.activeColumns=t),onOnActiveRows:t[8]||(t[8]=t=>e.activeRows=t)},null,8,["rows","paginated","asyncRows","rowParser","config","columns","showFilters","newPage","searchFilter","rowsPerPage"])])])),_:1}),_(P,null,{default:x((()=>[!e.searchFilter&&e.paginated||!e.searchFilter&&e.totalPages>0&&e.paginated?(R(),V(d,{key:0},{default:x((()=>[_(g,{perPage:e.itemsPerPage,maxVisibleButtons:10,totalPages:e.totalPages,onOnChangePage:t[9]||(t[9]=t=>e.currentPage=t)},null,8,["perPage","totalPages"])])),_:1})):A("",!0),e.showReportStamp?(R(),V(d,{key:1},{default:x((()=>[_(f,{color:"primary"},{default:x((()=>[O("Date Created: "),L("b",null,B(e.date),1)])),_:1}),_(f,{color:"primary"},{default:x((()=>[O("His-Core Version: "),L("b",null,B(e.coreVersion),1)])),_:1}),_(f,{color:"primary"},{default:x((()=>[O("API Version: "),L("b",null,B(e.apiVersion),1)])),_:1})])),_:1})):A("",!0)])),_:1}),_(y,{color:e.footerColor,btns:e.btns},null,8,["color","btns"])])),_:1}))],64)}],["__scopeId","data-v-2b6cbb18"]]))}}}));
