System.register(["./index-legacy-CG62t_LC.js","./v2utils-legacy-DwWvLf7u.js","./tb_report_service-legacy-GS7vSMFx.js","./TableView-legacy-blk0L5Qu.js","./TBDrilldown-legacy-DM2Aj765.js","./Export-legacy-Dkv5aOoC.js","./index-legacy-Dh4DTBjm.js"],(function(e,t){"use strict";var n,a,r,l,s,o,i,u,c,g,d,p,_,v,m,w,T;return{setters:[e=>{n=e.d,a=e.r,r=e.o,l=e.a,s=e.c,o=e.w,i=e.b,u=e.u,c=e.D,g=e.f,d=e.i,p=e.m,_=e.t},e=>{v=e.w},e=>{m=e.T},e=>{w=e.v},e=>{T=e.T},null,null],execute:function(){e("default",n({__name:"TBStatArtReport",setup(e){const t=d("login-logos/PEPFAR.png"),n=a([]),f=a(""),y=new m,b=(e,t)=>({label:e,ref:t,toValue:e=>e.length,tdClick:async e=>(await p.create({component:T,backdropDismiss:!1,cssClass:"large-modal",componentProps:{title:e.column.label,patientIdentifiers:e.refData,subtitle:`Period: ${f.value}`,onFinish:()=>p.getTop().then((e=>e&&p.dismiss()))}})).present()}),R=[[{label:"#",ref:"index"},{label:"Age group",ref:"age_group"},{label:"Gender",ref:"gender"},b("Known positive","known_positive"),b("Newly Tested Positives","newly_tested_positive"),b("New Negatives","new_negative"),b("Recent negative","recent_negative"),b("Not Done","not_done"),b("New on ART","new_on_art"),b("Already on ART","already_on_art")]],A=()=>v((async()=>{if(!y.startDate||!y.endDate)return _("Start date and end date required!");n.value=[];const e=await m.getJson("programs/2/reports/TB_ART_STAT",y.buildRequestParams({})),t=Object.keys(e).reduce(((t,n)=>(/unknown|all/i.test(n)||(t.M.push({age_group:n,gender:"Male",...e[n].M}),t.F.push({age_group:n,gender:"Female",...e[n].F})),t)),{F:[],M:[]}),a=[...t.F,...t.M];n.value=a.map(((e,t)=>({index:t+1,...e})))})),D=()=>c({onFinish:(e,t,n)=>{f.value=`${n}`,y.startDate=e,y.endDate=t,A()}});return r((()=>D())),(e,a)=>(l(),s(u(g),null,{default:o((()=>[i(w,{title:"TB STAT ART Report","report-prefix":"PEPFAR","icon-url":u(t),subtitle:f.value,columns:R,columnData:n.value,rowsPerPage:50,onConfigure:D,onRefresh:()=>A()},null,8,["icon-url","subtitle","columnData","onRefresh"])])),_:1}))}}))}}}));
