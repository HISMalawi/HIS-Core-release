import{d as b,I as C,ch as $,N as w,K as a,t as L,q as D,O as p,ct as m,_ as P,r as u,o as R,c as k,w as T,b as g}from"./index-ox16Qeox.js";import{v as E}from"./TableView-BrOaniw6.js";import{C as X}from"./cxca_report_service-C1fhWInE.js";import{D as A}from"./ReportDateSelectionPrompt-BX8tCBHK.js";import{D as Q}from"./DrillPatientIds-DpLZ7W-N.js";import"./fuse-YdZE3OCN.js";import"./Export-CDG7TPF5.js";import"./HisKeyboard-CtGe8LVP.js";const n=a([]),l=a(""),s=a(""),_=a(""),d=a(!1),v=a(""),F=b({components:{IonPage:C,IonLoading:$,v2Datatable:E},setup(){const r=async(e,t)=>{t.length<=0||(await p.create({component:Q,backdropDismiss:!1,cssClass:"large-modal",componentProps:{title:e,subtitle:_,patientIdentifiers:t,onFinish:()=>p.getTop().then(o=>o&&p.dismiss())}})).present()},f=[[{label:"#",ref:"index",span:{thRowspan:2}},{label:"Age group",ref:"age_group",span:{thRowspan:2}},{label:"Gender",ref:"gender",exportable:!1,span:{thRowspan:2}},{label:"1st time screened",ref:"",span:{thColspan:3}},{label:"Rescreened after previous negative",ref:"",span:{thColspan:3}},{label:"Post-treatment follow-up",ref:"",span:{thColspan:3}}],[{label:"Cryotherapy",ref:"first_time_screened_cryotherapy",secondaryLabel:"1st screened (cryotherapy)",value:e=>e.first_time_screened.cryotherapy.length,tdClick:({column:e,data:t})=>r("".concat(t.age_group," ").concat(e.secondaryLabel),t.first_time_screened.cryotherapy)},{label:"Thermocoagulation",ref:"first_time_screened_thermocoagulation",secondaryLabel:"1st time screened (Thermocoagulation)",value:e=>e.first_time_screened.thermocoagulation.length,tdClick:({column:e,data:t})=>r("".concat(t.age_group," ").concat(e.secondaryLabel),t.first_time_screened.thermocoagulation)},{label:"LEEP",ref:"first_time_screened_leep",secondaryLabel:"1st screened(leep)",value:e=>e.first_time_screened.leep.length,tdClick:({column:e,data:t})=>r("".concat(t.age_group," ").concat(e.secondaryLabel),t.first_time_screened.leep)},{label:"Cryotherapy",ref:"post_treatment_followup_cryotherapy",secondaryLabel:"Post-treatment followup(Cryotherapy)",value:e=>e.post_treatment_followup.cryotherapy.length,tdClick:({column:e,data:t})=>r("".concat(t.age_group," ").concat(e.secondaryLabel),t.post_treatment_followup.cryotherapy)},{label:"Thermocoagulation",ref:"post_treatment_followup_thermocoagulation",secondaryLabel:"Post-treatment followup (Thermocoagulation)",value:e=>e.post_treatment_followup.thermocoagulation.length,tdClick:({column:e,data:t})=>r("".concat(t.age_group," ").concat(e.secondaryLabel),t.post_treatment_followup.thermocoagulation)},{label:"LEEP",ref:"post_treatment_followup_leep",secondaryLabel:"Post-treatment followup (leep)",value:e=>e.post_treatment_followup.leep.length,tdClick:({column:e,data:t})=>r("".concat(t.age_group," ").concat(e.secondaryLabel),t.post_treatment_followup.leep)},{label:"Cryotherapy",ref:"rescreened_after_prev_visit_cryotherapy",secondaryLabel:"Rescreen after prev visit (Cryotherapy)",value:e=>e.rescreened_after_prev_visit.cryotherapy.length,tdClick:({column:e,data:t})=>r("".concat(t.age_group," ").concat(e.secondaryLabel),t.rescreened_after_prev_visit.cryotherapy)},{label:"Thermocoagulation",ref:"rescreened_after_prev_visit_thermocoagulation",secondaryLabel:"Rescreen after prev visit (Thermocoagulation)",value:e=>e.rescreened_after_prev_visit.thermocoagulation.length,tdClick:({column:e,data:t})=>r("".concat(t.age_group," ").concat(e.secondaryLabel),t.rescreened_after_prev_visit.thermocoagulation)},{label:"LEEP",ref:"rescreened_after_prev_visit_leep",secondaryLabel:"Rescreen after prev visit (leep)",value:e=>e.rescreened_after_prev_visit.leep.length,tdClick:({column:e,data:t})=>r("".concat(t.age_group," ").concat(e.secondaryLabel),t.rescreened_after_prev_visit.leep)}]],c=async()=>{if(!(l.value&&s.value))return L("Start date and end date required!");d.value=!0,n.value=[];const e=new X;e.startDate=l.value,e.endDate=s.value;try{n.value=(await e.getClinicReport("CXCA TX")).slice(5).map((t,o)=>(t.index=o+1,t.gender="Female",t))}catch(t){D("Unable to generate report!")}d.value=!1},i=()=>A({onFinish:(e,t,o)=>{l.value=e,s.value=t,_.value="Period (".concat(o,")"),v.value="".concat(m(l.value)," to ").concat(m(s.value)),c()}});return w(()=>!n.value.length&&i()),{columns:f,isLoading:d,reportData:n,period:_,csvQuarter:v,generate:c,configure:i}}});function I(r,f,c,i,e,t){const o=u("ion-loading"),h=u("v2Datatable"),y=u("ion-page");return R(),k(y,null,{default:T(()=>[g(o,{"is-open":r.isLoading,message:"Please wait..."},null,8,["is-open"]),g(h,{title:"CXCA TX Report",subtitle:r.period,columns:r.columns,columnData:r.reportData,rowsPerPage:25,onConfigure:r.configure,csvQuarter:r.csvQuarter,onRefresh:()=>r.generate()},null,8,["subtitle","columns","columnData","onConfigure","csvQuarter","onRefresh"])]),_:1})}const O=P(F,[["render",I]]);export{O as default};
