import{d as S,af as T,l as V,j as N,I as K,k as $,i as P,f as w,m as B,a7 as E,K as k,M as H,S as x,ab as U,t as y,$ as L,ag as M,ah as O,_ as R,r as a,o as d,c as p,w as t,b as s,u as _,z as g}from"./index-ChqjXh1q.js";import{H as z}from"./HisKeyboard-BFJHNqBd.js";import{N as A}from"./HisKbConfigurations-GhFQZvlg.js";import{k as F}from"./KbHandler-BuQ4TFU6.js";import"./BaseKeyboard-pj9TNcmG.js";import"./KbLayouts-VRA-vjeH.js";const j=S({name:"HC location",components:{BarcodeInput:T,IonContent:V,IonHeader:N,IonPage:K,IonTitle:$,IonToolbar:P,IonButton:w,IonFooter:B,HisKeyboard:z},setup(){const{activePlatformProfile:e}=E(),o=k(""),c=k(""),f=H(()=>e.value.scanner===O.CAMERA_SCANNER);async function l(){o.value.includes("$")||(o.value+="$");const n=await x.getJson("locations/".concat(o.value));if(U.isEmpty(n))y("Invalid location");else{const u=n;sessionStorage.userLocation=u.name;try{await L().setLocation()}catch(b){return y("Unable to set facility UUID. Please try again!")}M.push("/")}c.value=o.value,o.value=""}function m(n){o.value=n}function i(n){o.value=F(n,o.value),console.log("barcode",o.value)}async function r(n){o.value=n,await l()}return{onbarcodeText:m,onScan:r,onKbClick:i,searchLocation:l,useVirtualKeyboard:f,clearValue:c,barcodeText:o,NUMBERS:A}}});function D(e,o,c,f,l,m){const i=a("ion-title"),r=a("ion-toolbar"),n=a("ion-header"),u=a("barcode-input"),b=a("ion-content"),C=a("his-keyboard"),v=a("ion-button"),h=a("ion-footer"),I=a("ion-page");return d(),p(I,null,{default:t(()=>[s(n,{translucent:!0},{default:t(()=>[s(r,null,{default:t(()=>[s(i,null,{default:t(()=>[_("Scan work-station location")]),_:1})]),_:1})]),_:1}),s(b,{class:"ion-padding-top"},{default:t(()=>[s(u,{class:"his-card",clearValue:e.clearValue,virtualText:e.barcodeText,onOnValue:e.onbarcodeText,onOnScan:e.onScan},null,8,["clearValue","virtualText","onOnValue","onOnScan"])]),_:1}),e.useVirtualKeyboard?(d(),p(C,{key:0,kbConfig:e.NUMBERS,onKeyPress:e.onKbClick},null,8,["kbConfig","onKeyPress"])):g("",!0),s(h,null,{default:t(()=>[s(r,{color:"dark"},{default:t(()=>[s(v,{color:"danger",size:"large","router-link":"/login"},{default:t(()=>[_(" Cancel ")]),_:1}),e.barcodeText?(d(),p(v,{key:0,slot:"end",color:"success",size:"large",onClick:e.searchLocation},{default:t(()=>[_(" Next ")]),_:1},8,["onClick"])):g("",!0)]),_:1})]),_:1})]),_:1})}const Y=R(j,[["render",D],["__scopeId","data-v-3f50a6e8"]]);export{Y as default};
