import{_ as b}from"./EncounterMixin.vue_vue_type_script_lang-COomaHs0.js";import{d as _,m as v,k as D,n as C,I as T,l as R,br as h,dj as u,bm as F,bn as I,z as N,aZ as $,ak as O,a as S,w as n,ap as i,b as l,e as r,g as e,h as m,a6 as g,aM as B,cy as f,j as o,t as d}from"./index-SU-Girx6.js";import{B as V}from"./htn_service-CK-Kk7WV.js";import{R as A}from"./RiskFactorModal-MQTagz5e.js";import"./encounter_guidelines-JE_mnohA.js";import"./GuidelineEngine-D6V1_Znr.js";import"./HisStandardForm-Cci7ZDn0.js";const j=_({mixins:[b],components:{IonFooter:R,IonContent:T,IonPage:C,IonButton:D,IonToolbar:v},data:()=>({sysBp:0,dsBP:0,riskFactors:[],patientOnBpDrugs:!1,isPregnant:!1,systolicThreshold:145,diastolicTheshold:94}),methods:{async showRiskFactors(){const t=await N.create({component:A,backdropDismiss:!1,cssClass:"large-modal",componentProps:{factors:this.riskFactors}});t.present();const{data:s}=await t.onDidDismiss();$.isEmpty(s)||this.nextTask()},async getRiskFactors(){const s=F.getConceptsByCategory("risk factors").map(async a=>{const p=await I.getFirstValueCoded(this.patientID,a.name);return{concept:a.name,value:p}});return Promise.all(s)},recaptureBp(){this.$router.push("/art/encounters/vitals/".concat(this.patientID,"?vital_options=BP"))}},watch:{ready:{async handler(t){if(!t)return;await(await h.create({message:"Verifying Blood Pressure...",backdropDismiss:!1})).present();const a=new V(this.patientID,this.providerID);this.riskFactors=await this.getRiskFactors(),this.systolicThreshold=await u.systolicThreshold()||145,this.diastolicTheshold=await u.diastolicThreshold()||94,this.dsBP=await a.getDiastolicBp()||0,this.sysBp=await a.getSystolicBp()||0,this.patientOnBpDrugs=await a.onBpDrugs()||!1,this.isPregnant=this.patient.isChildBearing()&&await this.patient.isPregnant()||!1,h.dismiss()},immediate:!0}},computed:{patientName(){return this.ready?this.patient.getFullName():"Patient"},hasPressureReading(){return this.sysBp>0&&this.dsBP>0},highBP(){return(this.sysBp>=this.systolicThreshold&&this.dsBP>=this.diastolicTheshold||this.dsBP>=this.diastolicTheshold)&&!this.isPregnant}}}),z={key:0,class:"vertically-align ion-text-center"},E={style:{"font-weight":"bold"}},M={class:"name"},x={class:"bp"},L={key:1,class:"vertically-align ion-text-center"};function G(t,s,a,p,H,Y){const y=i("ion-content"),c=i("ion-button"),P=i("ion-toolbar"),k=i("ion-footer"),w=i("ion-page");return l(),S(w,null,{default:n(()=>[r(y,null,{default:n(()=>[s[6]||(s[6]=e("h1",{class:"ion-text-center"}," HTN Alert ",-1)),t.hasPressureReading?(l(),m("div",z,[B(e("h2",E," (Patient already on BP drugs) ",512),[[f,t.patientOnBpDrugs]]),e("h2",null,[e("span",M,d(t.patientName),1),s[1]||(s[1]=o(" has ",-1)),B(e("span",null," a high ",512),[[f,t.highBP]]),s[2]||(s[2]=o(" blood pressure of ",-1)),e("span",x,d(t.sysBp)+" / "+d(t.dsBP),1),s[3]||(s[3]=e("br",null,null,-1)),s[4]||(s[4]=e("span",null,[o(" Retesting BP is "),e("span",{style:{"font-weight":"bold",color:"#000000","text-decoration":"underline"}},"optional"),o(". "),e("br"),o(" Do you want to test BP? ")],-1))])])):g("",!0),t.hasPressureReading?g("",!0):(l(),m("div",L,[...s[5]||(s[5]=[o(" No BP Reading found ",-1),e("br",null,null,-1),e("h1",null," Do you want to test BP? ",-1)])]))]),_:1}),r(k,null,{default:n(()=>[r(P,{color:"dark"},{default:n(()=>[r(c,{onClick:s[0]||(s[0]=()=>t.hasPressureReading?t.showRiskFactors():t.nextTask()),size:"large",color:"danger",slot:"start"},{default:n(()=>[...s[7]||(s[7]=[o(" No ",-1)])]),_:1}),r(c,{onClick:t.recaptureBp,size:"large",color:"success",slot:"end"},{default:n(()=>[...s[8]||(s[8]=[o(" Yes ",-1)])]),_:1},8,["onClick"])]),_:1})]),_:1})]),_:1})}const X=O(j,[["render",G],["__scopeId","data-v-acbdfaed"]]);export{X as default};
