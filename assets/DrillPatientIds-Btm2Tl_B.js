import{d,a5 as h,r as c,ap as _,aI as b,aL as g,ah as p,c$ as v,bz as D,a8 as P,ad as u,u as I,v as w,w as y,x as $}from"./index-CG6KEPsv.js";import{v as E}from"./TableView-QLAT3IiF.js";const m=20,k=d({props:{title:{type:String,default:"Drilldown"},patientIdentifiers:{type:Object},onFinish:{type:Function}},components:{IonPage:h,v2Datatable:E},setup(e){const o=c("-"),n=c([]),l=_(),r=[[{label:"National ID",ref:"national_id"},{label:"First name",ref:"given_name"},{label:"Last name",ref:"family_name"},{label:"Birthdate",ref:"birthdate"},{label:"Action",ref:"patient_id",exportable:!1,tdClick:({data:t})=>l.push({path:"/patient/dashboard/".concat(t.patient_id)}),value:()=>"View client"}]];return b(()=>e.patientIdentifiers,async t=>{if(n.value=[],o.value="Total: 0",!(t&&t.length))return;const i=g.chunk(t,m);for(const s of i){for(const f of s){try{const a=new p(await p.findByID(f));n.value.push({patient_id:a.getID(),national_id:a.getNationalID(),given_name:a.getGivenName(),family_name:a.getFamilyName(),birthdate:v(a.getBirthdate())})}catch(a){console.error(a),n.value.push({})}o.value="Total: ".concat(n.value.length," of ").concat((t||[]).length)}await D(500)}},{immediate:!0}),{columns:r,subtitle:o,reportData:n,ITEMS_PER_PAGE:m}}});function B(e,o,n,l,r,t){const i=u("v2Datatable"),s=u("ion-page");return I(),w(s,null,{default:y(()=>[$(i,{title:e.title,subtitle:e.subtitle,columnData:e.reportData,columns:e.columns,"on-finish":e.onFinish,rowsPerPage:e.ITEMS_PER_PAGE},null,8,["title","subtitle","columnData","columns","on-finish","rowsPerPage"])]),_:1})}const C=P(k,[["render",B]]);export{C as D};
