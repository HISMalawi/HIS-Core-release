System.register(["./index-legacy-Ck8hVlzC.js","./TableView-legacy-qV2ZlJHi.js"],(function(e,t){"use strict";var a,n,i,l,o,r,s,u,c,d,f,m,p,b,h,g;return{setters:[e=>{a=e.d,n=e.I,i=e.K,l=e.J,o=e.ae,r=e.ah,s=e.P,u=e.ct,c=e.b9,d=e._,f=e.r,m=e.o,p=e.c,b=e.w,h=e.b},e=>{g=e.v}],execute:function(){const t={},_=a({props:{title:{type:String,default:"Drilldown"},patientIdentifiers:{type:Object},onFinish:{type:Function}},components:{IonPage:n,v2Datatable:g},setup(e){const a=i("-"),n=i([]),d=l(),f=[[{label:"National ID",ref:"national_id"},{label:"First name",ref:"given_name"},{label:"Last name",ref:"family_name"},{label:"Birthdate",ref:"birthdate"},{label:"Action",ref:"patient_id",exportable:!1,tdClick:({data:e})=>d.push({path:`/patient/dashboard/${e.patient_id}`}),value:()=>"View client"}]];return o((()=>e.patientIdentifiers),(async e=>{if(n.value=[],a.value="Total: 0",!e||!e.length)return;const i=r.chunk(e,20);for(const o of i){for(const i of o){try{let e=null;t[i]?e=t[i]:(e=new s(await s.findByID(i)),t[i]=e),n.value.push({patient_id:e.getID(),national_id:e.getNationalID(),given_name:e.getGivenName(),family_name:e.getFamilyName(),birthdate:u(e.getBirthdate())})}catch(l){console.error(l),n.value.push({})}a.value=`Total: ${n.value.length} of ${(e||[]).length}`}await c(500)}}),{immediate:!0}),{columns:f,subtitle:a,reportData:n,ITEMS_PER_PAGE:20}}});e("D",d(_,[["render",function(e,t,a,n,i,l){const o=f("v2Datatable"),r=f("ion-page");return m(),p(r,null,{default:b((()=>[h(o,{title:e.title,subtitle:e.subtitle,columnData:e.reportData,columns:e.columns,"on-finish":e.onFinish,rowsPerPage:e.ITEMS_PER_PAGE},null,8,["title","subtitle","columnData","columns","on-finish","rowsPerPage"])])),_:1})}]]))}}}));
