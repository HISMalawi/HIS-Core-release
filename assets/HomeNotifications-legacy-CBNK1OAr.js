System.register(["./index-legacy-CA6M7ipO.js"],(function(e,t){"use strict";var a,l,o,n,r,s,c,i,u,d,f,v,g,h,m,p,b,k,y,V,C,_,w,L,P,x,j,D,I,N,O,S,R,z,A,T,E;return{setters:[e=>{a=e.d,l=e.Y,o=e.$,n=e.ay,r=e.a6,s=e.a8,c=e.a9,i=e.r,u=e.at,d=e.ce,f=e.aN,v=e.aL,g=e.c9,h=e.ca,m=e.cd,p=e.aa,b=e.af,k=e.a,y=e.E,V=e.K,C=e.J,_=e.G,w=e.b,L=e.w,P=e.c,x=e.M,j=e.a2,D=e.b7,I=e.C,N=e.d5,O=e.e,S=e.ci,R=e.u,z=e.ba,A=e.b5,T=e.b9,E=e.bF}],execute:function(){var t=document.createElement("style");t.textContent="th[data-v-6173022f],td[data-v-6173022f]{border-collapse:collapse;min-width:160px;border:1px solid rgb(158,158,158)}td[data-v-6173022f]{font-weight:500;font-size:.8em;padding:.4em}.stick-report-header[data-v-6173022f]{position:sticky;top:0;z-index:1000}tr[data-v-6173022f]:nth-child(2n){background-color:#f0f0f0}.clickable-cell[data-v-6173022f]{color:#0645ad}.his-floating-keyboard[data-v-6173022f]{bottom:70px!important}\n/*$vite$:1*/",document.head.appendChild(t);const M=a({components:{IonToolbar:l,IonItem:o,IonIcon:n,IonLabel:r,IonButton:s,IonFooter:c},props:{columns:{type:Object,required:!0},columnData:{type:Array,default:()=>[]},rowsPerPage:{type:Number,default:10},defaultSortedColumn:{type:String},defaultSortOrder:{type:Object}},setup(e){const t=i([]),a=i(0),l=i(""),o=i("desc"),n=u((()=>{let e=t.value;return o.value&&l.value&&(e=d(t.value)[o.value]((e=>e.sortData[l.value]))),e})),r=u((()=>f.chunk(n.value,e.rowsPerPage).length)),s=u((()=>a.value+2<=r.value)),c=u((()=>a.value>0)),p=u((()=>f.chunk(n.value,e.rowsPerPage)[a.value])),b=a=>{a.forEach((a=>{const l={...a},o=e.columns.reduce(((e,t)=>e.concat(t)),[]).filter((e=>e.value||e.ref)).map((e=>{let t="";const o=a[e.ref];try{t=f.isEmpty(a)?"":"function"==typeof e.toValue?`${e.toValue(o)}`:"function"==typeof e.value?e.value(a):a[e.ref]||""}catch(n){t=e?.defaultValue||"_ERROR_",console.error(n)}return l[e.ref]=t,"function"==typeof e.sortValue&&(l[e.ref]=e.sortValue(o)),{column:e,refData:o,value:t,data:a}}));t.value.push({row:o,data:a,sortData:l,searchIndex:[...o,o.map((e=>e.value)).join(" ")]})}))};return v((()=>e.columnData),(n=>{if(t.value=[],!Array.isArray(n)||!n.length)return a.value=0,l.value=e.defaultSortedColumn??"",o.value=e.defaultSortOrder||"desc",void b(Array.from({length:0}).map((()=>({}))));b(n)}),{immediate:!0,deep:!0}),{first:()=>a.value=0,last:()=>a.value=r.value-1||0,next:()=>a.value+=1,prev:()=>a.value-=1,selectPage:()=>m((e=>{const t=parseInt(e);parseInt(e)<=r.value&&(a.value=t)}),{title:"Select page"}),sortColumn:e=>{l.value=e,o.value="asc"===o.value?"desc":"asc"},onClickTablecell:e=>{try{return void("function"==typeof e.column?.tdClick&&e.column?.tdClick(e))}catch(t){console.error(t)}},close:close,arrowUp:g,arrowDown:h,page:p,canNext:s,totalPages:r,sortOrder:o,canPrev:c,currentPage:a,columnSorted:l}}}),$={style:{width:"100%"}},H={class:"stick-report-header"},F=["colspan","rowspan","onClick"],U=["onClick"],q=["innerHTML"],B=p(M,[["render",function(e,t,a,l,o,n){const r=b("ion-icon"),s=b("ion-label"),c=b("ion-item"),i=b("ion-button"),u=b("ion-toolbar"),d=b("ion-footer");return k(),y(C,null,[V("div",null,[V("table",$,[V("thead",H,[(k(!0),y(C,null,_(e.columns,((t,a)=>(k(),y("tr",{key:a},[(k(!0),y(C,null,_(t,((t,a)=>(k(),y("th",{key:a,colspan:t?.span?.thColspan||1,rowspan:t?.span?.thRowspan||1,onClick:a=>e.sortColumn(t.ref)},[w(c,{lines:"none"},{default:L((()=>[e.columnSorted&&e.columnSorted===t.ref?(k(),P(r,{key:0,icon:"asc"===e.sortOrder?e.arrowUp:e.arrowDown},null,8,["icon"])):x("",!0),w(s,null,{default:L((()=>[V("b",null,j(t.label),1)])),_:2},1024)])),_:2},1024)],8,F)))),128))])))),128))]),V("tbody",null,[(k(!0),y(C,null,_(e.page,((t,a)=>(k(),y("tr",{key:a},[(k(!0),y(C,null,_(t.row,((t,a)=>(k(),y("td",{key:a,onClick:()=>e.onClickTablecell(t),class:D({"clickable-cell":t?.column?.tdClick})},[V("span",{innerHTML:t.value,class:"his-sm-text"},null,8,q)],10,U)))),128))])))),128))])])]),t[4]||(t[4]=V("p",null,null,-1)),w(d,null,{default:L((()=>[w(u,{color:"light"},{default:L((()=>[e.totalPages>1?(k(),P(i,{key:0,onClick:e.first,disabled:0===e.currentPage||e.totalPages<=2,size:"large",slot:"end"},{default:L((()=>t[0]||(t[0]=[I(" First ")]))),_:1},8,["onClick","disabled"])):x("",!0),e.totalPages>1?(k(),P(i,{key:1,onClick:e.prev,disabled:!e.canPrev,color:"light",size:"large",slot:"end"},{default:L((()=>t[1]||(t[1]=[I(" Prev ")]))),_:1},8,["onClick","disabled"])):x("",!0),e.totalPages>1?(k(),P(i,{key:2,onClick:e.selectPage,size:"large",slot:"end",color:"light"},{default:L((()=>[I(j(e.currentPage)+" / "+j(e.totalPages-1),1)])),_:1},8,["onClick"])):x("",!0),e.totalPages>1?(k(),P(i,{key:3,onClick:e.next,disabled:!e.canNext,color:"light",size:"large",slot:"end"},{default:L((()=>t[2]||(t[2]=[I(" Next ")]))),_:1},8,["onClick","disabled"])):x("",!0),e.totalPages>1?(k(),P(i,{key:4,onClick:e.last,disabled:e.currentPage+1>=e.totalPages||e.totalPages<=2,size:"large",slot:"end"},{default:L((()=>t[3]||(t[3]=[I(" Last ")]))),_:1},8,["onClick","disabled"])):x("",!0)])),_:1})])),_:1})],64)}],["__scopeId","data-v-6173022f"]]),G={key:0},J={key:1,class:"his-card ion-text-center his-lg-text"};e("default",a({__name:"HomeNotifications",setup(e){const{sortedNotifications:t,hasNotifications:a,clearNotification:l,openNotification:o}=N(),n=i("highVL"),s=O({highVL:[],rejectedVL:[],normalVL:[],initiatedData:{},stats:{}}),c=u((()=>[[{ref:"arv",label:"ARV #"},{ref:"accession",label:"Accession #"},{ref:"order_date",label:"Order Date",toValue:e=>`${S(e)}`},..."rejectedVL"===n.value?[{ref:"rejection_reason",label:"Rejection Reason"}]:[],{ref:"id",label:"View",toValue:()=>"View",tdClick:e=>o(e.data)},{ref:"id",label:"Clear",toValue:()=>"Clear",tdClick:e=>l(e.refData,(e=>{s[n.value]=s[n.value].filter((t=>t.id!=e))}))}]]));async function d(e,a=t.value){if(a.length&&s.initiatedData[e])return;let l=6e3;const o=f.chunk(a?.[0]?.vlMessageObs?.[e]??{},7);s.initiatedData[e]=a.length>0,s[e]=[];for(const t of o)s[e]=[...s[e],...t],await E(l),l=80}return v(t,(async e=>{d(n.value,e),setTimeout((()=>{const t=e?.[0]?.vlMessageObs??{};s.stats.highVL=(t.highVL??[]).length,s.stats.normalVL=(t.normalVL??[]).length,s.stats.rejectedVL=(t.rejectedVL??[]).length}),450)}),{immediate:!0,deep:!0}),(e,t)=>(k(),y("div",null,[R(a)?(k(),y("div",G,[w(R(T),{mode:"ios",modelValue:n.value,"onUpdate:modelValue":t[3]||(t[3]=e=>n.value=e),class:"ion-justify-content-center"},{default:L((()=>[w(R(z),{onClick:t[0]||(t[0]=e=>d("highVL")),value:"highVL"},{default:L((()=>[w(R(r),{class:"his-sm-text",style:{"font-weight":"bold"}},{default:L((()=>t[4]||(t[4]=[I("High Vl")]))),_:1}),w(R(A),{color:"danger"},{default:L((()=>[I(j(s.stats?.highVL??"-"),1)])),_:1})])),_:1}),w(R(z),{onClick:t[1]||(t[1]=e=>d("rejectedVL")),value:"rejectedVL"},{default:L((()=>[w(R(r),{class:"his-sm-text",style:{"font-weight":"bold"}},{default:L((()=>t[5]||(t[5]=[I("Rejected")]))),_:1}),w(R(A),{color:"warning"},{default:L((()=>[I(j(s.stats?.rejectedVL??"-"),1)])),_:1})])),_:1}),w(R(z),{onClick:t[2]||(t[2]=e=>d("normalVL")),value:"normalVL"},{default:L((()=>[w(R(r),{class:"his-sm-text",style:{"font-weight":"bold"}},{default:L((()=>t[6]||(t[6]=[I("Normal Results")]))),_:1}),w(R(A),{color:"success"},{default:L((()=>[I(j(s.stats?.normalVL??"-"),1)])),_:1})])),_:1})])),_:1},8,["modelValue"]),t[7]||(t[7]=V("p",null,null,-1)),(k(),P(B,{key:n.value,columns:c.value,"column-data":s[n.value],"rows-per-page":7},null,8,["columns","column-data"]))])):(k(),y("div",J," No notifications "))]))}}))}}}));
