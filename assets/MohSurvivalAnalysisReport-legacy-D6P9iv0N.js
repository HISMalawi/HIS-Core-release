System.register(["./index-legacy-BMlbNY-s.js","./ReportMixin.vue_vue_type_script_lang-legacy-2SvNq4cg.js","./TableReportTemplate-legacy-D_9SwXSf.js","./BasicReportTemplate-legacy-CrTlY8w5.js","./Export-legacy-DwG6cs3Y.js","./index-legacy-D3Ffs9hJ.js","./Pagination-legacy-C1WcRPPs.js","./HisStandardForm-legacy-Cp4zUqRh.js","./ReportErrors-legacy-BaHUBFnD.js"],(function(t,e){"use strict";var r,a,s,o,n,i,l,u,p,d,g,c,h,m,f;return{setters:[t=>{r=t.cz,a=t.d,s=t.I,o=t.as,n=t.ad,i=t.ae,l=t.aN,u=t.aa,p=t.c,d=t.w,g=t.af,c=t.a,h=t.b},t=>{m=t._},t=>{f=t.R},null,null,null,null,null,null],execute:function(){var e=(t=>(t.GENERAL="General",t.CHILDREN="Children",t.WOMEN="Women",t))(e||{});class v extends r{ageGroup;quarter;regenerate;constructor(){super(),this.quarter="",this.regenerate=!1,this.ageGroup="General"}setRegenerate(t){this.regenerate=t}getAgeGroup(){return this.ageGroup}setQuarter(t){this.quarter=t}setAgeGroup(t){this.ageGroup=t}getSurvivalAnalysis(){return this.getReport("cohort_survival_analysis",{quarter:this.quarter,regenerate:this.regenerate,date:this.date,age_group:this.ageGroup,program_id:this.programID})}}const T={style:{borderRight:"5px solid black !important"}},x=a({mixins:[m],components:{ReportTemplate:f,IonPage:s},data:()=>({title:"Survival analysis report",totalClients:[],rows:[],columns:[[o.thTxt("Reg cohort"),o.thTxt("Interval (months)"),o.thTxt("Sub group"),o.thTxt("Total Reg (database)"),o.thTxt("Total Reg (Confirmed)",T),o.thTxt("Alive"),o.thTxt("Died"),o.thTxt("Defaulted"),o.thTxt("Stopped"),o.thTxt("TO"),o.thTxt("Unknown")]]}),created(){this.fields=[...this.getDateDurationFields(!0,!1,17),{id:"group",helpText:"Select sub-group",type:n.TT_SELECT,validation:t=>i.required(t),options:()=>[{label:"General",value:e.GENERAL},{label:"Children",value:e.CHILDREN},{label:"Option B+",value:e.WOMEN}]}]},methods:{async onPeriod({quarter:t,group:e},r,a=!1){this.rows=[],this.period=t.label,this.report=new v,this.report.setOccupation(r.occupation),this.report.setRegenerate(a),this.report.setQuarter(t.label),this.report.setAgeGroup(e.value);const s=await this.report.getSurvivalAnalysis();this.title=`Survival analysis report ${e.label}`,this.rows=this.getRows(s)},getRows(t){return Object.keys(t).filter((e=>!l.isEmpty(t[e]))).sort(((t,e)=>{const r=t.split(" ")[1],a=e.split(" ")[1];return parseInt(r)-parseInt(a)})).map((e=>{const r=t[e];let a=0,s=0;const n={"On antiretrovirals":0,Defaulted:0,"Patient died":0,"Treatment stopped":0,"Patient transferred out":0,unknown:0};if(!l.isEmpty(r)){for(const t in r){const e=r[t];for(const r in e){const o=e[r];a=parseInt(r),t in n?n[t]=o:n.unknown=o,s+=o}}return[o.td(e),o.td(a),o.td(this.report.getAgeGroup()),o.td(s),o.td("",T),o.td(n["On antiretrovirals"]),o.td(n["Patient died"]),o.td(n.Defaulted),o.td(n["Treatment stopped"]),o.td(n["Patient transferred out"]),o.td(n.unknown)]}}))}}});t("default",u(x,[["render",function(t,e,r,a,s,o){const n=g("report-template"),i=g("ion-page");return c(),p(i,null,{default:d((()=>[h(n,{title:t.title,period:t.period,rows:t.rows,fields:t.fields,columns:t.columns,config:{showIndex:!1},reportPrefix:"MoH",hasServerSideCaching:!0,onReportConfiguration:t.onPeriod},null,8,["title","period","rows","fields","columns","onReportConfiguration"])])),_:1})}]]))}}}));
