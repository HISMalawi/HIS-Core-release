import{d as f,r as o,da as p,t as g,u as _,v,w as h,x as y,y as c,cb as A,cZ as d,dp as D,ab as C,ac as V,a5 as $,aJ as w}from"./index-Cpa1Vu_O.js";import{v as k}from"./TableView-SYr53Aoi.js";import{A as x}from"./appointment_service-CyAYM7-I.js";import{a as P,c as B,w as S}from"./v2utils-smiQ2r8w.js";import"./Export-Cf2ZJ_nH.js";import"./index-BlK7Pvm-.js";const L=f({__name:"ClinicAppointments",setup(T){const t=o([]),l=o(""),a=new p,r=o({}),m=w("reports.png"),b=[[P(),{label:"First name",ref:"given_name",encrypted:!0},{label:"Last name",ref:"family_name",encrypted:!0},{label:"Gender",ref:"gender",toValue:e=>A(e)},{label:"Birthdate",ref:"birthdate",toValue:e=>"".concat(d(e))},{label:"Outcome",ref:"outcome"},{ref:"district",label:"Current Address",encrypted:!0,exportedValue:{dataValue:e=>"\n                ".concat(e.data.district,",\n                ").concat(e.data.village,",\n                ").concat(e.data.land_mark,",\n                ").concat(e.data.cell_phone,"\n            ")},value:e=>"District: <br/> <b>".concat(e.district,"</b><br/>\n            Village: <br/> <b>").concat(e.village,"</b><br/>\n            Land-mark: <br/> <b>").concat(e.land_mark,"</b><br/>\n            Cellphone: <br/> <b>").concat(e.cell_phone,"</b>\n        ")},B("person_id","/patients/confirm?person_id=")]],i=()=>S(async()=>{t.value=[],t.value=await a.getBookedAppointments(a.startDate)}),s=()=>{D({id:"date",helpText:"Select date",type:C.TT_DATE_PICKER,defaultValue:()=>p.getSessionDate(),validation:e=>V.required(e),onValue:async e=>{var n,u;return r.value[e]||(r.value[e]=(u=(n=await x.getDailiyAppointments(e))==null?void 0:n.length)!=null?u:0),!0},config:{infoItems:e=>[{label:"Appointments",value:r.value[e]}]}},e=>{a.setStartDate(e),l.value="Appointment date: ".concat(d(e)),i()})};return g(()=>!t.value.length&&s()),(e,n)=>(_(),v(c($),null,{default:h(()=>[y(k,{"default-sort-order":"asc","default-sorted-column":"given_name","icon-url":c(m),title:"Booked clients","report-prefix":"Clinic",subtitle:l.value,columns:b,columnData:t.value,rowsPerPage:50,onConfigure:s,onRefresh:i},null,8,["icon-url","subtitle","columnData"])]),_:1}))}});export{L as default};
