import{_ as k}from"./FieldMixin.vue_vue_type_script_lang-qMf9z2fm.js";import{d as C,b8 as D,ai as I,ak as q,ao as $,aj as w,f as F,cD as P,O as p,c_ as B,_ as S,r,o as d,c as A,w as i,b as a,A as o,x as h,F as K,y as E,v as N,a3 as R,a4 as H}from"./index-BPESSmpp.js";import{H as V}from"./HisKeypad-BqXUAOKr.js";import{D as m}from"./drug_prescription_service-Cyz8K5Pv.js";import"./BaseKeyboard-DxmkwR6c.js";import"./KbLayouts-VRA-vjeH.js";import"./KbHandler-BuQ4TFU6.js";import"./overlays-04a9a43f-pvrUHYCC.js";import"./drug_order_service-Cp6kc4x5.js";import"./drug_service-CAbpi_h6.js";const G=C({components:{IonInput:D,IonGrid:I,IonCol:q,IonIcon:$,IonRow:w,IonButton:F},mixins:[k],data:()=>({trash:P,drugs:[]}),activated(){this.init()},mounted(){this.init()},methods:{async init(){this.$emit("onFieldActivated",this);const e=await this.options(this.fdata,this.cdata);this.drugs=e.map(t=>(t.other.frequency=this.getFrequency(t),t.other.dosage=this.getDosage(t),t.other.duration===void 0&&(t.other.duration=""),t))},getFrequency(e){if(e.other.frequency){const t=m.find(s=>s.value===parseInt(e.other.frequency));if(t)return t.label}return""},getDosage(e){return e.other.dosage?e.other.dosage:e.other.dose_strength?e.other.dose_strength:""},removeDrug(e){this.drugs=this.drugs.filter(t=>t.label!=e.label)},async selectFrequency(e){const t=await p.create({component:B,backdropDismiss:!1,componentProps:{title:"".concat(e.label," Frequency"),list:m.map(l=>l.label),actionButtons:[{name:"Cancel",color:"danger",slot:"start",role:"default"},{name:"Ok",slot:"end",role:"action"}]}});t.present();const{data:s}=await t.onDidDismiss();s.action!=="Cancel"&&(e.other.frequency=s.selection)},async launchKeyPad(e,t){(await p.create({component:V,backdropDismiss:!1,cssClass:"keypad-modal",componentProps:{title:"".concat(e.label," ").concat(t),preset:e.other[t],strictNumbers:!0,onKeyPress(l){e.other[t]=l}}})).present()}},computed:{},watch:{clear(){this.drugs=this.drugs.map(e=>(e.frequency="",e.duration="",e.dose="",e.units="",e))},drugs:{async handler(){this.$emit("onValue",this.drugs)},immediate:!0,deep:!0}}}),O=e=>(R("data-v-26eef265"),e=e(),H(),e),U=O(()=>o("thead",null,[o("tr",null,[o("th",null,"Drug"),o("th",null,"Frequency"),o("th",null,"Dosage"),o("th",null,"Duration"),o("th")])],-1));function j(e,t,s,l,L,Q){const c=r("ion-input"),_=r("ion-icon"),f=r("ion-button"),y=r("ion-col"),g=r("ion-row"),v=r("ion-grid");return d(),A(v,null,{default:i(()=>[a(g,{class:"his-card section drug-section-style"},{default:i(()=>[a(y,null,{default:i(()=>[o("table",null,[U,o("tbody",null,[(d(!0),h(K,null,E(e.drugs,(n,b)=>(d(),h("tr",{key:b},[o("td",null,[o("b",null,N(n.label),1)]),o("td",null,[a(c,{readonly:"",onClick:u=>e.selectFrequency(n),value:n.other.frequency,class:"dosage-input",placeholder:"Add frequency.."},null,8,["onClick","value"])]),o("td",null,[a(c,{readonly:"",onClick:u=>e.launchKeyPad(n,"dosage"),value:n.other.dosage,placeholder:"Add dosage..",class:"dosage-input"},null,8,["onClick","value"])]),o("td",null,[a(c,{readonly:"",onClick:u=>e.launchKeyPad(n,"duration"),value:n.other.duration,placeholder:"Add duration..",class:"dosage-input"},null,8,["onClick","value"])]),o("td",null,[a(f,{onClick:u=>e.removeDrug(n),color:"danger"},{default:i(()=>[a(_,{icon:e.trash},null,8,["icon"])]),_:2},1032,["onClick"])])]))),128))])])]),_:1})]),_:1})]),_:1})}const te=S(G,[["render",j],["__scopeId","data-v-26eef265"]]);export{te as default};
