import{d as C,r as s,t as V,u as k,v as w,w as x,x as y,y as v,cm as L,cn as i,d1 as A,a5 as B,aP as I,O as P,db as T}from"./index-ii3Qn3XY.js";import{v as G}from"./TableView-VVZCLID7.js";import{D as R}from"./defaulters_report_service-UFn1SEtQ.js";import{a as S,w as E}from"./v2utils-E9_vWRTr.js";import"./Export-K1a5kYdx.js";import"./index--iKDbRto.js";const z=C({__name:"ClinicDefaulters",setup(F){const $=I("reports.png"),t=s([]),u=s(""),o=s([]),a=new R;a.setIsPepfar(!1);const h=[[S(),{label:"First name",ref:"given_name",encrypted:!0},{label:"Last name",ref:"family_name",encrypted:!0},{label:"Gender",ref:"gender",toValue:e=>L(e)},{label:"Birthdate",ref:"birthdate",toValue:e=>"".concat(i(e))},{label:"Appointment date",ref:"appointment_date",toValue:e=>"".concat(i(e))},{label:"Date defaulted",ref:"defaulter_date",toValue:e=>"".concat(i(e))},{label:"Address",ref:"district",encrypted:!0,exportedValue:{dataValue:e=>{var r,n,l,m,f,p,b,g,D,_;return"\n                Cell: ".concat((n=(r=e.data)==null?void 0:r.cell_number)!=null?n:"-",",\n                Village: ").concat((m=(l=e.data)==null?void 0:l.village)!=null?m:"-",", \n                District: ").concat((p=(f=e.data)==null?void 0:f.district)!=null?p:"-",", \n                TA: ").concat((g=(b=e.data)==null?void 0:b.ta)!=null?g:"-",", \n                Landmark: ").concat((_=(D=e.data)==null?void 0:D.land_mark)!=null?_:"-"," \n            ")}},value:e=>(e.cell_number?"CELL: ".concat(e.cell_number," <br/>"):"")+(e.village?"VILLAGE: ".concat(e.village," <br/>"):"")+(e.district?"DISTRICT: ".concat(e.district," <br/>"):"")+(e.ta?"TA: ".concat(e.ta," <br/>"):"")+(e.landmark?"Landmark: ".concat(e.landmark):"")}]],d=()=>E(async()=>{if(!(a.startDate&&a.endDate))return P("Start date and end date required!");o.value=[],t.value=[],t.value=await a.getDefaulters(),o.value=[{text:"Total defaulters: <b>".concat(t.value.length,"</b>"),icon:T,color:"primary"}]}),c=()=>A({onFinish:(e,r,n,l)=>{l&&a.setOccupation(l),u.value="".concat(n),a.startDate=e,a.endDate=r,d()}});return V(()=>!t.value.length&&c()),(e,r)=>(k(),w(v(B),null,{default:x(()=>[y(G,{"default-sort-order":"asc","default-sorted-column":"arv_number","icon-url":v($),title:"Clinic Defaulters Report","report-prefix":"Clinic",subtitle:u.value,columns:h,columnData:t.value,rowsPerPage:50,onConfigure:c,onRefresh:d,headerBadge:o.value},null,8,["icon-url","subtitle","columnData","headerBadge"])]),_:1}))}});export{z as default};
