System.register(["./dynamic-import-helper-legacy-DYK5bIOV.js","./HisStandardForm-legacy-CturMrfg.js","./index-legacy-DaDUPm0b.js","./EncounterMixin.vue_vue_type_script_lang-legacy-BDi4Plhg.js","./TouchScreenForm-legacy-kTjvZFWF.js","./ToolbarMediumCard-legacy-TC6u67eT.js","./Transformers-legacy-DhNYVLaS.js","./ViewPort-legacy-DVkjms5h.js","./encounter_guidelines-legacy-i6miv9ib.js","./GuidelineEngine-legacy-KsvQuFdF.js"],(function(e,t){"use strict";var s,a,i,n,l,o,r,c,u,d,h,f;return{setters:[e=>{s=e.F},e=>{a=e.H},e=>{i=e.b3,n=e.d,l=e.t,o=e.T,r=e.V,c=e._,u=e.r,d=e.o,h=e.c},e=>{f=e._},null,null,null,null,null,null],execute:function(){class t extends i{constructor(e,t){super(e,156,t)}getAssessmentValues(){return i.getConceptsByCategory("fast_track")}}const g=n({mixins:[f],components:{HisStandardForm:a},data:()=>({fields:[],fastTrack:{},options:[],values:[],gender:null}),watch:{ready:{async handler(e){e&&this.init(this.patient)},immediate:!0}},methods:{async onFinish(e){if(!(await this.fastTrack.createEncounter()))return l("Unable to create fast track encounter");{const t=await this.buildObs(e);if(!(await this.fastTrack.saveObservationList(t)))return l("Unable to save patient observations");o("Observations and encounter created!"),this.nextTask()}},async init(e){this.gender=e.getGender(),this.fastTrack=new t(e.getID(),this.providerID),this.values=await this.getYesNo(),this.options=await this.getOptions(),this.fields=this.getFields()},async buildObs(e){const t=[];return t.push(await this.fastTrack.buildValueCoded("Assess for fast track",e.ft_assessment.value)),e.ft_questions&&(await e.ft_questions.forEach((async e=>{t.push(await this.fastTrack.buildValueCoded(e.label,e.value))})),t.push(await this.fastTrack.buildValueCoded("Fast track",e.book_client.value))),t},async getOptions(){const e=this.getYesNo(),t=await this.fastTrack.getAssessmentValues("fast_track").map((t=>({label:t.name,value:"",other:{values:e}})));return"M"===this.gender?t.filter((e=>!e.label.match(/Pregnant/i))):t},getYesNo:()=>[{label:"yes",value:"Yes"},{label:"no",value:"No"}],getFields(){return[{id:"ft_assessment",helpText:"Assess client for FT",type:s.TT_SELECT,validation:e=>r.required(e),options:()=>this.getYesNo()},{id:"ft_questions",helpText:"Assess client for FT",type:s.TT_MULTIPLE_YES_NO,condition:e=>"Yes"===e.ft_assessment.value,validation:e=>r.anyEmpty(e),options:()=>this.options},{id:"book_client",helpText:"Select type of visit to book",type:s.TT_SELECT,condition:e=>"Yes"===e.ft_assessment.value,validation:e=>r.required(e),options:()=>[{label:"Fast track",value:"No"},{label:"Normal visit",value:"No"}]}]}}});e("default",c(g,[["render",function(e,t,s,a,i,n){const l=u("his-standard-form");return d(),h(l,{fields:e.fields,onFinishAction:e.onFinish,skipSummary:!0,cancelDestinationPath:e.cancelDestination},null,8,["fields","onFinishAction","cancelDestinationPath"])}]]))}}}));
