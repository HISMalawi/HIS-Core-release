import{d as f,r as o,db as v,t as _,u as b,v as g,w,x as V,y as c,cc as C,c_ as r,cO as D,a9 as y,aa as $,a5 as h,aH as R,O as S}from"./index-BY8l3Vlw.js";import{v as x}from"./TableView-JK_S0K3F.js";import{a as T,c as L,w as O}from"./v2utils-CzhqV1Lq.js";import"./Export-BUNiM-87.js";import"./index-BK3yxlfM.js";const F=f({__name:"ClinicViralLoadReport",setup(P){const p=R("reports.png"),n=o(""),s=o(""),l=o([]),u=o(""),t=new v,m=[[T(),{label:"Gender",ref:"gender",toValue:e=>C(e)},{label:"Birthdate",ref:"birthdate",toValue:e=>"".concat(r(e))},{label:"Specimen",ref:"specimen"},{label:"Ordered",ref:"order_date",toValue:e=>"".concat(r(e))},{label:"Result",ref:"result",value:e=>{var a;return"".concat((a=e.result_modifier)!=null?a:""," ").concat(e.result)}},{label:"Released",ref:"result_date",toValue:e=>"".concat(r(e))},{label:"Curr. Regimen",ref:"current_regimen",defaultValue:""},L()]],i=()=>O(async()=>{if(!(t.startDate&&t.endDate))return S("Start date and end date required!");l.value=[],l.value=await t.getViralLoadResults("".concat(s.value).toLowerCase())}),d=()=>D({fields:[{id:"result_type",helpText:"Select result type",type:y.TT_SELECT,validation:e=>$.required(e),options:()=>[{label:"Viraemia 1000+",value:"viraemia-1000"},{label:"Suppressed",value:"suppressed"},{label:"Low level viraemia",value:"low-level-viraemia"}]}],defaultOnFinish:(e,a)=>{u.value="".concat(r(a.start_date)," to ").concat(r(a.end_date)),t.startDate=a.start_date,t.endDate=a.end_date,a.occupation&&t.setOccupation(a.occupation),n.value="".concat(e.result_type.label," Report"),s.value=e.result_type.value,i()}});return _(()=>!l.value.length&&d()),(e,a)=>(b(),g(c(h),null,{default:w(()=>[V(x,{"default-sort-order":"asc","default-sorted-column":"arv_number","icon-url":c(p),title:n.value,"report-prefix":"Clinic",subtitle:u.value,columns:m,columnData:l.value,rowsPerPage:50,onConfigure:d,onRefresh:i},null,8,["icon-url","title","subtitle","columnData"])]),_:1}))}});export{F as default};
