import{d as f,I as _,cJ as C,r as d,o as D,i as h,D as b,au as g,W as v,aa as y,c as M,w,af as u,a as F,b as H}from"./index-CMZASHAR.js";import{v as R}from"./TableView-DhTjQT8r.js";import{C as A}from"./clinic_report_service-Clk-6w4F.js";import{w as N}from"./v2utils-DPaBC-nQ.js";import{H as P}from"./HypertensionDrilldown-Gxk-3jNB.js";import"./Export-CpyT9Gk1.js";import"./index-_zuoFVCp.js";const S=f({components:{IonPage:_,IonLoading:C,v2Datatable:R},setup(){const a=h("reports.png"),l=d([]),s=d(""),t=new A,e=(r,i)=>({label:r,ref:i,toValue:o=>o.length,tdClick:async o=>{o.refData.length&&(await g.create({component:P,backdropDismiss:!1,cssClass:"large-modal",componentProps:{title:o.column.label,subtitle:s,patients:o.refData,onFinish:()=>g.getTop().then(n=>n&&g.dismiss())}})).present()}}),c=[[{label:"#",ref:"index"},{label:"Age group",ref:"age_group"},{label:"Gender",ref:"gender"},e("Due for BP screening","due_screening"),e("Screened for HTN","screened"),e("Normal <140/<90","normal_reading"),e("Mild 140-159/90-99","mild_reading"),e("Moderate 160-180/100-110","moderate_reading"),e("Severe >180/>110","severe_reading"),e("Hydrochlorothiazide 25mg","hydrochlorothiazide_25mg"),e("Amlodipine 5mg","amlodipine_5mg"),e("Amlodipine 10 mg","amlodipine_10mg"),e("Captopril 25mg","captopril_25mg"),e("Captopril 6-25mg","captopril_6_25mg"),e("Captopril 12-5mg","captopril_12_5mg"),e("Captopril 50mg","captopril_50mg"),e("Enalapril 5 mg","enalapril_5mg"),e("Enalapril 10mg","enalapril_10mg"),e("Atenolol 50mg","atenolol_50mg"),e("Atenolol 100mg","atenolol_100mg"),e("Nifedipine 10mg","nifedipine_10mg"),e("Nifedipine 20mg","nifedipine_20mg"),e("Total (regimen)","total_regimen")]],p=()=>N(async()=>{if(!(t.startDate&&t.endDate))return v("Start date and end date required!");l.value=[];const r=await t.getHypertensionReport(!0),i=Object.keys(r).reduce((o,n)=>(o.M.push({age_group:n,gender:"Male",...r[n].M}),o.F.push({age_group:n,gender:"Female",...r[n].F}),o),{F:[],M:[]});l.value=i.F.concat(i.M).map((o,n)=>({index:n+1,...o}))}),m=()=>b({onFinish:(r,i,o,n)=>{n&&t.setOccupation(n),s.value="".concat(o),t.startDate=r,t.endDate=i,p()}});return D(()=>m()),{logo:a,reportData:l,configure:m,generate:p,columns:c,period:s}}});function $(a,l,s,t,e,c){const p=u("v2Datatable"),m=u("ion-page");return F(),M(m,null,{default:w(()=>[H(p,{title:"Hypertension Cascade Report","icon-url":a.logo,subtitle:a.period,columns:a.columns,columnData:a.reportData,rowsPerPage:50,onConfigure:a.configure,onRefresh:()=>a.generate(),"report-prefix":"Clinic"},null,8,["icon-url","subtitle","columns","columnData","onConfigure","onRefresh"])]),_:1})}const O=y(S,[["render",$]]);export{O as default};
