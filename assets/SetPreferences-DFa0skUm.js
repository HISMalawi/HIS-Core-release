import{d as C,r as P,o as I,u as L,al as s,am as c,a as S,w as A,e as v,f as E,n as N,aY as g,aq as x,b as V,ao as D,q as H,y as M}from"./index-y6JY22M4.js";import{a as u,A as l}from"./anc_global_props-CCtKe3Hk.js";import{H as O}from"./HisStandardForm-CXnAooxi.js";const w=C({__name:"SetPreferences",setup(R){const o=P(""),d=L(),y=x(),m=[...T(),...h(),..._()];I(()=>o.value=d.name);function r(e){return console.log("prop",e,o.value),e===o.value}async function f(e,t){try{for(const n in t)await D.set(n,t[n]),H("Property has been updated",2e3);y.back()}catch(n){console.error(n),M("An error occurred while saving the preferences")}}function _(){const e=u.CLINIC_HOLIDAYS;return[{id:e,helpText:"Set clinic holiday(s)",type:c.TT_CLINIC_HOLIDAY_PICKER,condition:()=>r(e),computedValue:t=>t.value,defaultValue:()=>l.clinicHolidays(),validation:t=>s.required(t)}]}function T(){const e=u.APPOINTMENT_LIMIT;return[{id:e,helpText:"Enter Appointment Limit",type:c.TT_NUMBER,computedValue:t=>t.value,condition:()=>r(e),defaultValue:()=>l.appointmentLimit(),validation:t=>s.required(t)}]}function h(){const e=u.CLINIC_DAYS,t=a=>a.map(p=>p.value).join(),n=a=>["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"].map(i=>({label:i,value:i,isChecked:!g.isEmpty(a)&&a.search(i)>=0}));return[{id:e,helpText:"Set Clinic day(s)",type:c.TT_MULTIPLE_SELECT,condition:()=>r(e),computedValue:a=>t(a),validation:a=>s.required(a),options:async()=>n(await l.clinicDays())}]}return(e,t)=>(V(),S(E(N),null,{default:A(()=>[v(O,{fields:m,onFinishAction:f,skipSummary:!0})]),_:1}))}});export{w as default};
