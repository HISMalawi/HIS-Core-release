import{e3 as s,d as c,a5 as u,a9 as f,aa as h,ao as t,a6 as g,ab as i,u as _,v as T,w as v,x as A}from"./index-CyYd6aWW.js";import{R as w}from"./TableReportTemplate-DYGrVqT5.js";import{A as b}from"./AncReports-DTr6l2dE.js";import"./HisStandardForm-CuX9K_Ib.js";import"./ReportErrors-buNL-Vye.js";class p extends s{generateBookedAppointments(){return s.getJson("programs/".concat(this.programID,"/booked_appointments"),{date:this.startDate,paginated:!1})}}const C=c({components:{ReportTemplate:w,IonPage:u},setup(){const n=b("Booked clients"),{reportData:e,gotoPatientDashboard:r}=n;return e.service=new p,e.other.appointments=[],e.fields=[{id:"date",helpText:"Select date",type:f.TT_DATE_PICKER,defaultValue:()=>p.getSessionDate(),validation:o=>h.required(o),onValue:async o=>(e.service.setStartDate(o),e.other.appointments[o]||(e.other.appointments[o]=await e.service.generateBookedAppointments()||[]),!0),config:{infoItems:o=>{var a;return[{label:"Appointments",value:((a=e.other.appointments[o])==null?void 0:a.length)||0}]}}}],e.columns=[[t.thTxt("Identifier"),t.thTxt("First name"),t.thTxt("Last name"),t.thTxt("Gender"),t.thTxt("birthdate"),t.thTxt("Actions")]],{...n,onPeriod:async o=>{e.rows=[],e.period=o.date.label,e.rows=e.other.appointments[o.date.value].map(a=>[t.td(a.npid),t.td(a.given_name),t.td(a.family_name),t.td(a.gender),t.tdDate(a.birthdate),t.tdBtn("View",()=>r(a.person_id))])}}}});function D(n,e,r,d,o,a){const l=i("report-template"),m=i("ion-page");return _(),T(m,null,{default:v(()=>[A(l,{title:n.title,period:n.period,rows:n.rows,fields:n.fields,columns:n.columns,onReportConfiguration:n.onPeriod},null,8,["title","period","rows","fields","columns","onReportConfiguration"])]),_:1})}const y=g(C,[["render",D]]);export{y as default};
