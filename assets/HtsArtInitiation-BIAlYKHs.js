import{d as A,a5 as C,r as b,ei as V,a9 as i,bY as D,d8 as I,aN as R,a6 as E,v,w as F,ab as f,u as g,x}from"./index-CyYd6aWW.js";import{H as s}from"./hts_art_initiation_service-ChqMeIi4.js";import{H as y}from"./HisStandardForm-CuX9K_Ib.js";const S=A({components:{IonPage:C,HisStandardForm:y},setup(){const a=b([]),n=new s(-1),{toOption:u,yesNoOptions:d,saveEncounter:c,patientDashboardUrl:p}=V({onInitVisit:()=>{a.value=[l(),m(),_(),T(),h()]}});function r(e,t){c({encounterName:"ART Enrollment",encounterTypeID:n.encounterTypeID,computedData:t})}function l(){return{id:"is_referral",helpText:"Referral for ART (Re-)Initiation",type:i.TT_YES_NO,isRequired:()=>!0,finalComputedValue:e=>({obs:n.buildValueText("ART referral",e)}),options:()=>[{label:"Do you want to refer client?",value:"",values:d()}]}}function m(){return{id:"art_site",helpText:"Intended Site for ART",type:i.TT_SELECT,isRequired:()=>!0,finalComputedValue:({label:e})=>({obs:n.buildValueText("Referral location",e)}),options:(e,t="")=>D(t),condition:e=>e.is_referral==="Yes",defaultValue:()=>s.getLocationName(),config:{footerBtns:[{name:"Here",slot:"end",onClickComponentEvents:{setValue:()=>s.getLocationName()},onClick:()=>null}],showKeyboard:!0,isFilterDataViaApi:!0}}}function _(){return{id:"art_appointment_date",helpText:"Appointment Date for ART Referral",type:i.TT_DATE_PICKER,isRequired:()=>!0,defaultValue:()=>n.date,condition:e=>e.is_referral==="Yes",finalComputedValue:e=>({obs:n.buildValueDate("Appointment date","".concat(e.value))}),config:{minDate:()=>n.date,infoItems:e=>[{label:"Set appointment date",value:I(e)}],hiddenFooterBtns:["Clear"]}}}function T(){let e=[];return{id:"linkage_code",helpText:"LINKAGE CODE",type:i.TT_LINKAGE_CODE,isRequired:()=>!0,validation:t=>{var o;return(o=t==null?void 0:t.other)!=null&&o.isValidLinkageCode?null:(e=R.uniq(e.concat("".concat(t.value))),["Invalid Scanform linkage code"])},condition:t=>t.is_referral==="Yes",finalComputedValue:t=>({obs:[n.buildValueText("HTC Serial number","".concat(t.value)),...e.map(o=>n.buildValueText("Invalid",o))]})}}function h(){return{id:"art_outcome_field",helpText:"Art outcome",type:i.TT_HIDDEN,defaultValue:()=>u("Unknown"),finalComputedValue:e=>({obs:n.buildValueCoded("Antiretroviral status or outcome",e.value)})}}return{patientDashboardUrl:p,onFinish:r,fields:a}}});function k(a,n,u,d,c,p){const r=f("his-standard-form"),l=f("ion-page");return g(),v(l,null,{default:F(()=>[x(r,{formLabel:"ART (Re-) Initiation",fields:a.fields,onFinishAction:a.onFinish,cancelDestinationPath:a.patientDashboardUrl()},null,8,["fields","onFinishAction","cancelDestinationPath"])]),_:1})}const $=E(S,[["render",k]]);export{$ as default};
