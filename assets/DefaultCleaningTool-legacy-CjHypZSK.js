System.register(["./index-legacy-B-IGLekl.js","./TableView-legacy-DfP0o5vc.js"],(function(e,a){"use strict";var t,l,n,r,i,o,s,d,u,f,b,c,m,g,h,v,_,p,T,I;return{setters:[e=>{t=e.d,l=e.a5,n=e.cv,r=e.an,i=e.r,o=e.eh,s=e.t,d=e.aK,u=e.O,f=e.ah,b=e.c_,c=e.a9,m=e.d8,g=e.a6,h=e.v,v=e.w,_=e.ab,p=e.u,T=e.x},e=>{I=e.v}],execute:function(){const a=t({components:{IonPage:l,IonLoading:n,v2Datatable:I},setup(){const e=r(),a=i([]),t=i(""),l=i(!1),n=new o(""),g=i([]),h=i("No report selected!"),v=i([]),_=async()=>{if(!n.startDate||!n.endDate)return u("Start date and end date required!");l.value=!0,a.value=[];try{a.value=await n.retrieveDataCleaningTool()}catch(e){f("Unable to generate report!")}l.value=!1},p=()=>({label:"Action",ref:"patient_id",value:()=>"View client",tdClick:({data:a})=>{a?.patient_id&&e.push(`/patients/confirm?person_id=${a.patient_id}`)}}),T=[[{ref:"identifier",label:"ID"},{ref:"given_name",label:"First name"},{ref:"family_name",label:"Last name"},{ref:"gender",label:"Gender"},{ref:"birthdate",label:"Birthdate",toValue:e=>m(e)},p()]],I=()=>b({additionalFields:[{id:"data_cleaning_tool",helpText:"Select data cleaning tool",type:c.TT_SELECT,requireNext:!1,isRequired:()=>!0,options:()=>[{label:"Incomplete visits",value:"INCOMPLETE VISITS",other:{columns:[[{ref:"identifier",label:"ID"},{ref:"given_name",label:"First name"},{ref:"family_name",label:"Last name"},{ref:"gender",label:"Gender"},{ref:"birthdate",label:"Birthdate",toValue:e=>m(e)},{ref:"visit_date",label:"Visit date",toValue:e=>m(e)},p()]]}},{label:"Missing Linkage Number",value:"MISSING LINKAGE",other:{columns:T}},{label:"Partner status: <14 years with partner details",value:"PARTNER STATUS",other:{columns:T}},{label:"Test date earlier than birthdate",value:"TEST DATE EARLIER THAN BIRTHDATE",other:{columns:[[{ref:"identifier",label:"ID"},{ref:"given_name",label:"First name"},{ref:"family_name",label:"Last name"},{ref:"gender",label:"Gender"},{ref:"birthdate",label:"Birthdate",toValue:e=>m(e)},{ref:"test_date",label:"Test date",toValue:e=>m(e)},p()]]}},{label:"Duplicate Encounters",value:"DUPLICATE ENCOUNTERS",other:{columns:[[{ref:"identifier",label:"ID"},{ref:"given_name",label:"First name"},{ref:"family_name",label:"Last name"},{ref:"gender",label:"Gender"},{ref:"total",label:"Total"},{ref:"birthdate",label:"Birthdate",toValue:e=>m(e)},p()]]}},{label:"Missing Birthdate",value:"MISSING BIRTHDATE",other:{columns:[[{ref:"identifier",label:"ID"},{ref:"given_name",label:"First name"},{ref:"family_name",label:"Last name"},{ref:"gender",label:"Gender"},{ref:"birthdate",label:"Birthdate",toValue:e=>m(e)},{ref:"visit_date",label:"Visit date",toValue:e=>m(e)},p()]]}}]}],onFinish:(e,a,l,r)=>{t.value=`Period (${l})`,n.startDate=e,n.endDate=a,n.name=r.data_cleaning_tool.value,g.value=r.data_cleaning_tool.other.columns,h.value=r.data_cleaning_tool.label,_()}});return s((()=>!a.value.length&&I())),{Img:d,headerBadges:v,reportTitle:h,reportData:a,isLoading:l,configure:I,generate:_,columns:g,period:t}}});e("default",g(a,[["render",function(e,a,t,l,n,r){const i=_("ion-loading"),o=_("v2Datatable"),s=_("ion-page");return p(),h(s,null,{default:v((()=>[T(i,{"is-open":e.isLoading,message:"Please wait..."},null,8,["is-open"]),T(o,{iconUrl:e.Img("sys-setting.png"),title:e.reportTitle,subtitle:e.period,columns:e.columns,columnData:e.reportData,rowsPerPage:20,onConfigure:e.configure,onRefresh:()=>e.generate()},null,8,["iconUrl","title","subtitle","columns","columnData","onConfigure","onRefresh"])])),_:1})}]]))}}}));
