import{H as S}from"./HisStandardForm-CiMWbvzt.js";import{bd as T,d as f,K as _,F as s,V as i,o as g,c as h,cz as y,t as n}from"./index-DWvBkLVO.js";import{b as E,m as r,r as x}from"./commons-DT3RuUt-.js";import{u as O}from"./useEncounter-zxZajc6Y.js";import"./isEmpty-pFIi68wj.js";import"./_Set-DTNmtdXE.js";import"./_setToArray-DQmR8emy.js";import"./encounter_guidelines-DpDkFxzq.js";import"./GuidelineEngine-D6V1_Znr.js";class V extends T{constructor(a,o){super(a,84,o)}}const q=f({__name:"SocialHistory",setup(l){let a;const o=_([]),{goToNextTask:c,patientDashboardUrl:u}=O((e,t)=>{a=new V(t,e),o.value=[p(),m(),b()]});async function d(e,t){if(!await a.createEncounter())return n("Unable to create social history encounter");const v=await x({...t});if(!await a.saveObservationList(v))return n("Unable to save observations");c()}function p(){return{id:"social_acitivites",helpText:"Social Activities",type:s.TT_MULTIPLE_YES_NO,validation:e=>i.validateSeries([()=>i.required(e),()=>i.anyEmpty(e)]),computedValue:e=>({obs:e.map(t=>a.buildValueCoded(t.label,t.value))}),summaryMapValue:e=>({label:e.label,value:e.value}),options:(e,t)=>E(["Patient smokes","Patient drinks alcohol"],t)}}function m(){return{id:"marital_status",helpText:"Marital Status",type:s.TT_SELECT,validation:e=>i.required(e),computedValue:e=>({obs:a.buildValueText("Marital status",e.label)}),options:()=>r(["Single","Engaged","Married","Separated","Widowed","Other"])}}function b(){return{id:"religion",helpText:"Religion",type:s.TT_SELECT,validation:e=>i.required(e),computedValue:e=>({obs:a.buildValueText("Religion",e.label)}),options:()=>r(["Catholic","CCAP","SDA","Angelican","Muslim","Pentecostalism","Jehovah witness","Other"])}}return(e,t)=>(g(),h(S,{cancelDestinationPath:y(u),fields:o.value,onFinishAction:d},null,8,["cancelDestinationPath","fields"]))}});export{q as default};
