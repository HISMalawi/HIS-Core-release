System.register(["./index-legacy-D3AimR5c.js","./opd_report_service-legacy-Bj8jsuVz.js","./TableView-legacy-Dy3lcVgQ.js","./v2utils-legacy-C5cbKIGF.js","./Export-legacy-e4sEJcbx.js","./index-legacy-C8IfrPJu.js"],(function(e,a){"use strict";var t,n,r,o,l,i,s,c,u,g,d,p,f,b,m,D,v,h,y,x,j;return{setters:[e=>{t=e.d,n=e.q,r=e.x,o=e.r,l=e.o,i=e.y,s=e.l,c=e.v,u=e.db,g=e.D,d=e.z,p=e.ak,f=e.ap,b=e.a,m=e.b,D=e.w,v=e.e},e=>{h=e.O,y=e.D},e=>{x=e.v},e=>{j=e.A},null,null],execute:function(){const a=t({components:{IonPage:n,IonLoading:r,v2Datatable:x},setup(){const e=o([]),a=o(""),t=o(""),n=o(!1),r=new h,p=o([]);let f=0;const b=(e,t)=>({ref:t,label:e,defaultValue:"0",toValue:e=>e.length,tdClick:async e=>{e.refData.length&&(async e=>{(await d.create({component:j,backdropDismiss:!1,cssClass:"large-modal",componentProps:{...e,subtitle:a.value,onFinish:()=>d.getTop().then((e=>e&&d.dismiss()))}})).present()})({patientIdentifiers:e.refData,title:`${e.data.age_group} ${e.data.gender} ${e.column.label}`})}}),m=[[{label:"#",ref:"index",toValue:()=>++f},{label:"Age group",ref:"ageGroup"},{label:"Gender",ref:"gender"},...Object.entries(y).map((([e,a])=>b(a,e)))]],D=async()=>{if(!r.startDate||!r.endDate)return s("Start date and end date required!");n.value=!0;try{e.value=await r.getDisaggReport()}catch(a){console.error(a);const e="Unable to generate report!";c(e),p.value=[{text:e,color:"danger",icon:u,action:function(){p.value=[{text:`Exception occured: <b>${a}</b>`,color:"danger",icon:u}]}}]}n.value=!1,t.value=""},v=()=>g({onFinish:(e,t,n)=>{a.value=n,r.startDate=e,r.endDate=t,D()}});return l((()=>v())),{Img:i,headerBadge:p,reportData:e,isLoading:n,configure:v,generate:D,columns:m,period:a}}});e("default",p(a,[["render",function(e,a,t,n,r,o){const l=f("ion-loading"),i=f("v2Datatable"),s=f("ion-page");return b(),m(s,null,{default:D((()=>[v(l,{"is-open":e.isLoading,message:"Please wait.."},null,8,["is-open"]),v(i,{"icon-url":e.Img("reports.png"),title:"Clinic Disaggregated Report","report-prefix":"clinic",subtitle:e.period,columns:e.columns,columnData:e.reportData,rowsPerPage:100,onConfigure:e.configure,onRefresh:e.generate,headerBadge:e.headerBadge},null,8,["icon-url","subtitle","columns","columnData","onConfigure","onRefresh","headerBadge"])])),_:1})}]]))}}}));
