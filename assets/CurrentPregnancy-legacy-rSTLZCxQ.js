System.register(["./EncounterMixin.vue_vue_type_script_lang-legacy-Cn_hTh7z.js","./dynamic-import-helper-legacy-BhGHTWZn.js","./anc_current_pregnancy-legacy-_2sKn11D.js","./index-legacy-uRreDP0D.js","./LocationFieldOptions-legacy-fksPScRO.js","./encounter_guidelines-legacy-1bSidp7g.js","./GuidelineEngine-legacy--xbEVG44.js","./HisStandardForm-legacy-U_iL4SQp.js","./TouchScreenForm-legacy-ogo2k9RR.js","./ToolbarMediumCard-legacy-ppaO_MMI.js","./Transformers-legacy-PbfCTy2a.js","./ViewPort-legacy-ItUHAnm-.js"],(function(e,t){"use strict";var i,s,n,a,l,o,r,u,d,c,h,p,v,m,y;return{setters:[e=>{i=e._},e=>{s=e.F},e=>{n=e.A},e=>{a=e.d,l=e.I,o=e.ba,r=e.n,u=e.V,d=e._,c=e.r,h=e.o,p=e.c,v=e.w,m=e.b},e=>{y=e.g},null,null,null,null,null,null,null],execute:function(){const t=a({components:{IonPage:l},mixins:[i],data:()=>({service:{},gestationWeeks:0,delieveryDate:"",lnmp:""}),watch:{ready:{async handler(e){e&&(this.service=new n(this.patientID,this.providerID),this.fields=this.getFields())},immediate:!0}},methods:{async onFinish(e,t){try{await this.service.enrollPatient()}catch(s){if(!(s instanceof o))throw s;console.warn(`${s}`)}const i=await this.resolveObs(t);await this.service.createEncounter(),await this.service.saveObservationList(i),this.nextTask()},buildLnmpObs(e=!1){return[e?this.service.buildValueDateEstimated("Last menstrual period",this.lnmp):this.service.buildValueDate("Last menstrual period",this.lnmp),this.service.buildValueNumber("Week of First Visit",this.gestationWeeks)]},getFields(){return[{id:"lnmp",helpText:"Last Normal Menstrual Period",type:s.TT_FULL_DATE,config:{allowUnknown:!0},computedValue:this.buildLnmpObs,beforeNext:async e=>(this.lnmp=e.value,this.gestationWeeks=this.service.calculateWeekOfFirstVisit(this.lnmp),!(this.gestationWeeks<=0||this.gestationWeeks>42)||r("Gestation weeks out of range of 0-42. Are you sure you want to continue?")),validation:e=>this.validateSeries([()=>u.required(e),()=>e.value&&new Date(e.value)>new Date?["Last menstrual period cannot be in the future"]:null])},{id:"estimate_lmp",helpText:"Gestation (months)",type:s.TT_NUMBER,condition:e=>"Unknown"===e.lnmp.value,computedValue:()=>this.buildLnmpObs(!0),validation:e=>this.validateSeries([()=>u.required(e),()=>u.rangeOf(e,1,10)]),beforeNext:e=>(this.lnmp=this.service.calculateGestationDateFromPeriod(e.value),this.gestationWeeks=this.service.calculateWeekOfFirstVisit(this.lnmp),!0)},{id:"expected_delivary_date",helpText:"Expected Date Of Delivery",type:s.TT_FULL_DATE,dynamicHelpText:()=>`Expected Date Of Delivery (Gestation Weeks: ${this.gestationWeeks})`,defaultValue:()=>this.service.estimateDelieveryDate(this.lnmp),computedValue:e=>this.service.buildValueDate("Estimated date of delivery",e.value),validation:e=>u.required(e)},{id:"planned_delivery_place",helpText:"Planned delivery place",type:s.TT_SELECT,computedValue:e=>this.service.buildValueText("Planned Delivery Place",e.label),validation:e=>u.required(e),options:(e,t="")=>y(t),config:{footerBtns:[{name:"Here",slot:"end",onClickComponentEvents:{setValue:e=>e.btnOutput},onClick:()=>n.getLocationName()}],showKeyboard:!0,isFilterDataViaApi:!0}},{id:"bed_net_available_for_use",helpText:"Mosquito net in good condition available for own use",type:s.TT_SELECT,condition:()=>!1,computedValue:e=>this.service.buildValueCoded("Do you use bed nets",e.value),validation:e=>u.required(e),options:()=>this.yesNoOptions()},{id:"bed_net_given",helpText:"Bed net given today",type:s.TT_SELECT,computedValue:e=>this.service.buildValueCoded("Mosquito net started",e.value),validation:e=>u.required(e),options:()=>this.yesNoOptions()},{id:"previous_td_given",helpText:"Previous TD given before this pregnancy",type:s.TT_NUMBER,computedValue:e=>this.service.buildValueNumber("TD Booster",e.value),validation:e=>u.required(e)}]}}});e("default",d(t,[["render",function(e,t,i,s,n,a){const l=c("his-standard-form"),o=c("ion-page");return h(),p(o,null,{default:v((()=>[m(l,{fields:e.fields,skipSummary:!0,onFinishAction:e.onFinish,cancelDestinationPath:e.cancelDestination},null,8,["fields","onFinishAction","cancelDestinationPath"])])),_:1})}]]))}}}));
