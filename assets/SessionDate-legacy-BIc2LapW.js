System.register(["./index-legacy-Dg5P6bX-.js","./MultiFieldDateHelper-legacy-DBQBHUfA.js","./HisStandardForm-legacy-BXV61qjj.js","./dynamic-import-helper-legacy-arUa2LZV.js","./KbLayouts-legacy-BKvPSxzZ.js","./HisKbConfigurations-legacy-vrLd9Pgz.js","./TouchScreenForm-legacy-Bqug27CT.js","./ToolbarMediumCard-legacy-DWokgyDV.js","./Transformers-legacy-DhNYVLaS.js","./ViewPort-legacy-D3j1oaCn.js"],(function(e,t){"use strict";var s,a,i,n,o,r,c,d,l,u,D,h,m,y;return{setters:[e=>{s=e.d,a=e.S,i=e.H,n=e.ad,o=e.R,r=e.T,c=e.t,d=e.p,l=e._,u=e.r,D=e.o,h=e.c},e=>{m=e.g},e=>{y=e.H},null,null,null,null,null,null,null],execute:function(){const t=s({components:{HisStandardForm:y},data:()=>({apiDate:"",fields:[]}),async created(){this.apiDate=await a.getApiDate(),this.fields=m({id:"session_date",helpText:"Session Date",required:!0,minDate:()=>"2000-01-01",maxDate:()=>this.apiDate,estimation:{allowUnknown:!1},computeValue:e=>e,config:{footerBtns:[{name:"Reset",slot:"end",color:"success",state:{visible:{default:()=>a.isBDE()}},onClick:async()=>{await this.resetSessionDate()}}]}})},async mounted(){await this.showBdeNotice()},methods:{async showBdeNotice(){if(!a.isBDE())return;const e=i.toStandardHisDisplayFormat(a.getCachedApiDate()||""),t=i.toStandardHisDisplayFormat(a.getSessionDate()),s=await n("BDE Notice",`The system is currently in Back Data Entry Mode(BDE).                 Do you wish to reset the date to ${e}?`,`BDE Date: ${t}`,[{name:"Reset Date",slot:"start",color:"success"},{name:"Keep BDE Date",slot:"end",color:"danger"},{name:"New date",slot:"end"}]);if("Reset Date"===s)return await this.resetSessionDate();"Keep BDE Date"===s&&this.redirect()},async resetSessionDate(){try{await a.resetSessionDate(),o.invalidate("PROVIDERS"),r(`Session date has been reset to ${this.formatDate(this.apiDate)}`),this.redirect()}catch(e){c(`${e}`)}},redirect(){const e=this.$route.query.patient_dashboard_redirection_id;e?this.$router.push(`/patient/dashboard/${e}`):this.$router.back()},async onSubmit(e,t){const s=t.session_date;try{await a.setSessionDate(s),r(`Successfully Back dated to ${this.formatDate(s)}`);const e=this.$route?.query?.patient_id;e?d(e,this.$router):this.redirect()}catch(i){c(`${i}`)}},formatDate:e=>i.toStandardHisDisplayFormat(e)}});e("default",l(t,[["render",function(e,t,s,a,i,n){const o=u("his-standard-form");return D(),h(o,{skipSummary:!0,fields:e.fields,onOnFinish:e.onSubmit},null,8,["fields","onOnFinish"])}]]))}}}));
