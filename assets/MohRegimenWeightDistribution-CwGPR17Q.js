import{_ as g}from"./ReportMixin.vue_vue_type_script_lang-BFLFjbJ1.js";import{W as w,b as d,a as _}from"./regimen_report_service-D1zOB8Hi.js";import{d as R,m as D,aA as t,a_ as l,am as E,a as I,w as T,ar as c,b,e as N}from"./index-qFt4YszW.js";import{R as k}from"./TableReportTemplate-DTUeDl0J.js";import"./BasicReportTemplate-Cv5LTxdO.js";import"./Export-CDLTNdY8.js";import"./index-BckLFmVa.js";import"./Pagination-CAVMmFhb.js";import"./HisStandardForm-B3LOSMqB.js";import"./ReportErrors-DWdHzp12.js";const C=R({mixins:[g],components:{ReportTemplate:k,IonPage:D},data:()=>({rows:[],title:"Regimen distribution (Weight)",columns:[]}),created(){this.columns=[[t.thTxt("Weight band"),t.thTxt("Gender"),...d.map(o=>t.thNum(o)),t.thNum("Unknown"),t.thNum("Total (regimen)")]],this.fields=this.getDateDurationFields()},methods:{async onPeriod(o,r,a=!1){this.rows=[],this.report=new _,this.report.setOccupation(r.occupation),this.report.setStartDate(r.start_date),this.report.setEndDate(r.end_date),this.period=this.report.getDateIntervalPeriod();const s=await this.report.getRegimensByWeight(a);await this.setRows(s)},async setRows(o){const r=s=>[...d,"N/A"].map(i=>{const e=s.filter(n=>!!n[i]).map(n=>Object.values(n)[0]);return t.td(l.isEmpty(e)?0:e[0])}),a=s=>s.reduce((i,e)=>i+e.td,0);w.forEach(s=>{o.filter(e=>e.weight===s).forEach(e=>{const n=r(e.males),m=r(e.females),h=[t.td(s),t.td("Male"),...n,t.td(a(n))],u=[t.td(s),t.td("Female"),...m,t.td(a(m))];if(this.rows.push(h),this.rows.push(u),!l.isEmpty(e.unknown_gender)){const p=r(e.unknown_gender),f=a(p);this.rows.push([t.td(s),t.td("Unknown Gender"),...p,t.td(f)])}})})}}});function P(o,r,a,s,i,e){const n=c("report-template"),m=c("ion-page");return b(),I(m,null,{default:T(()=>[N(n,{title:o.title,period:o.period,rows:o.rows,fields:o.fields,columns:o.columns,reportPrefix:"MoH",config:{showIndex:!1},enabledPDFHorizontalPageBreak:!0,onReportConfiguration:o.onPeriod,hasServerSideCaching:!0},null,8,["title","period","rows","fields","columns","onReportConfiguration"])]),_:1})}const A=E(C,[["render",P]]);export{A as default};
