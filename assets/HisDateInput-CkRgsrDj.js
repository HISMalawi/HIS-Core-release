import{d as P,r as M,B as z,a as y,b as l,w as t,e as a,f as s,a4 as U,l as A,a5 as E,j as O,I as R,b6 as B,h as k,a9 as w,aa as b,ac as V,ad as T,i as I,t as S,m as j,c as N,g as Y,bc as K,am as q,aR as Q,aE as H,eo as X,ep as Z,a_ as J,c1 as x,ai as ee,eq as te,H as g,z as F,S as ae,ar as $,el as ne,a6 as se}from"./index-qFt4YszW.js";import{_ as oe}from"./FieldMixin.vue_vue_type_script_lang-BY_wT7wI.js";const le=P({__name:"DateMonthSelector",props:{date:String,onMonth:Object},setup(e){const n=e,i=M(z(n.date).format("MMM")),h=[["Jan","Feb","Mar"],["Apr","May","Jun"],["Jul","Aug","Sep"],["Oct","Nov","Dec"]],u={Jan:1,Feb:2,Mar:3,Apr:4,May:5,Jun:6,Jul:7,Aug:8,Sep:9,Oct:10,Nov:11,Dec:12};function _(c){i.value=c;const v=u[c];typeof n.onMonth=="function"&&n.onMonth(v)}return(c,v)=>(l(),y(s(j),null,{default:t(()=>[a(s(U),null,{default:t(()=>[a(s(A),null,{default:t(()=>[a(s(E),{class:"ion-text-center"},{default:t(()=>[O(" Select a month ")]),_:1})]),_:1})]),_:1}),a(s(R),null,{default:t(()=>[a(s(B),null,{default:t(()=>[(l(),k(w,null,b(h,(f,o)=>a(s(V),{key:o},{default:t(()=>[(l(!0),k(w,null,b(f,(m,r)=>(l(),y(s(T),{"size-sm":"12","size-md":"4",style:{height:"12.3vh"},key:r,class:"ion-padding ion-text-center"},{default:t(()=>[(l(),y(s(I),{key:r,style:{"font-size":"1.6rem"},mode:"ios",color:i.value.toUpperCase()===m.toUpperCase()?"primary":"dark",fill:i.value.toUpperCase()===m.toUpperCase()?"solid":"clear",onClick:p=>_(m),size:"large"},{default:t(()=>[O(S(m),1)]),_:2},1032,["color","fill","onClick"]))]),_:2},1024))),128))]),_:2},1024)),64))]),_:1})]),_:1})]),_:1}))}}),ie=P({__name:"DateDayPicker",props:{date:String,onDay:Object},setup(e){const n=e,i=["Sun","Mon","Tues","Wed","Thurs","Fri","Sat"],h=M(z(n.date).format("D")),u=N(()=>{const c=z(n.date),v=c.startOf("month"),o=c.endOf("month").date(),m=v.day(),r=[];let p=[],d=1;for(let C=0;C<6;C++){for(let D=0;D<7;D++)C===0&&D<m?p.push(0):(d<=o?p.push(d):p.push(0),d++);r.push(p),p=[]}return r});function _(c){h.value=c,typeof n.onDay=="function"&&n.onDay(c)}return(c,v)=>(l(),y(s(j),null,{default:t(()=>[a(s(U),null,{default:t(()=>[a(s(A),null,{default:t(()=>[a(s(E),{class:"ion-text-center"},{default:t(()=>[O(" Select a day ")]),_:1})]),_:1})]),_:1}),a(s(R),null,{default:t(()=>[a(s(B),null,{default:t(()=>[a(s(V),null,{default:t(()=>[(l(),k(w,null,b(i,f=>a(s(T),{class:"calendar-day",key:f},{default:t(()=>[Y("b",null,S(f),1)]),_:2},1024)),64))]),_:1}),(l(!0),k(w,null,b(u.value,f=>(l(),y(s(V),{class:"calendar-row",key:"".concat(f)},{default:t(()=>[(l(!0),k(w,null,b(f,o=>(l(),y(s(T),{class:K(["calendar-date ion-padding",{"selected-date":"".concat(h.value)==="".concat(o)}]),onClick:m=>o>0?_(o):null,key:o},{default:t(()=>[O(S(o>0?o:""),1)]),_:2},1032,["class","onClick"]))),128))]),_:2},1024))),128))]),_:1})]),_:1})]),_:1}))}}),re=q(ie,[["__scopeId","data-v-67b6b8ab"]]),ue=Y("br",null,null,-1),W=4,L=3,ce=P({__name:"DateYearPicker",props:{date:String,onYear:Object},setup(e){const n=e,i=W*L,h=M(0),u=M(0),_=M(0),c=N(()=>u.value-i),v=N(()=>{const r=[];for(let d=u.value;d>c.value;--d)r.push(d);const p=J.chunk(r.sort(),L);return J.chunk(p,W)[h.value]});function f(){u.value=c.value}function o(){u.value=u.value+i}function m(r){_.value=r,typeof n.onYear=="function"&&n.onYear(r)}return Q(()=>n.date,r=>{_.value=z(r).get("year"),u.value=_.value},{immediate:!0}),(r,p)=>(l(),y(s(j),null,{default:t(()=>[a(s(U),null,{default:t(()=>[a(s(A),null,{default:t(()=>[a(s(I),{onClick:f,color:"dark",slot:"start",size:"large",fill:"clear"},{default:t(()=>[a(s(H),{icon:s(X)},null,8,["icon"])]),_:1}),a(s(E),{class:"ion-text-center"},{default:t(()=>[O(" Select a year "),ue,Y("small",null,S(c.value+1)+" to "+S(u.value),1)]),_:1}),a(s(I),{onClick:o,color:"dark",slot:"end",size:"large",fill:"clear"},{default:t(()=>[a(s(H),{icon:s(Z)},null,8,["icon"])]),_:1})]),_:1})]),_:1}),a(s(R),null,{default:t(()=>[a(s(B),null,{default:t(()=>[(l(!0),k(w,null,b(v.value,(d,C)=>(l(),y(s(V),{key:C},{default:t(()=>[(l(!0),k(w,null,b(d,(D,G)=>(l(),y(s(T),{"size-sm":"12","size-md":"4",style:{height:"12.4vh"},key:G,class:"ion-padding ion-text-center"},{default:t(()=>[a(s(I),{size:"large",mode:"ios",color:D===_.value?"primary":"dark",fill:D===_.value?"solid":"clear",style:{"font-size":"1.6rem"},onClick:pe=>m(D)},{default:t(()=>[O(S(D),1)]),_:2},1032,["color","fill","onClick"])]),_:2},1024))),128))]),_:2},1024))),128))]),_:1})]),_:1})]),_:1}))}}),de=P({components:{PickerSelector:te,IonInput:ee,ViewPort:x,IonGrid:B,IonCol:T,IonRow:V,IonButton:I},mixins:[oe],data:()=>({value:"",date:"",isInit:!0,canShowToday:!0,showMonthSelector:!1,showDaySelector:!1,showYearSelector:!1}),mounted(){this.init()},activated(){this.init()},methods:{async init(){var e,n,i;this.$emit("onFieldActivated",this),typeof this.config.initialDate=="function"?this.date=new Date(this.config.initialDate()):this.date=new Date,this.canShowToday=typeof((e=this.config)==null?void 0:e.addTodayBtn)=="function"?this.config.addTodayBtn(this.fdata,this.cdata):(i=(n=this.config)==null?void 0:n.addTodayBtn)!=null?i:!0,await this.setDefaultValue(),this.isInit=!1},async setDefaultValue(){if(this.value)this.date=new Date(this.value);else if(this.defaultValue){const e=await this.defaultValue(this.fdata,this.cdata);e&&(this.isInit=!1,this.date=new Date(e))}},add(e){this.date=g.add(this.fmt(this.date),e,1)},subtract(e){this.date=g.subtract(this.fmt(this.date),e,1)},today(){this.date=new Date(ae.getSessionDate())},fmt(e){return g.toStandardHisFormat(e)},async selectDay(){const e=await F.create({component:re,backdropDismiss:!0,cssClass:"custom-modal-backdrop",componentProps:{date:this.fmt(this.date),onDay:n=>{const[i,h]=this.fmt(this.date).split("-");this.date=new Date("".concat(i,"-").concat(h,"-").concat(n)),e.dismiss()}}});e.present()},async selectMonth(){const e=await F.create({component:le,backdropDismiss:!0,cssClass:"custom-modal-backdrop",componentProps:{date:this.fmt(this.date),onMonth:n=>{const[i,h,u]=this.fmt(this.date).split("-");this.date=new Date("".concat(i,"-").concat(n,"-").concat(u)),e.dismiss()}}});e.present()},async selectYear(){const e=await F.create({component:ce,backdropDismiss:!0,cssClass:"custom-modal-backdrop",componentProps:{date:this.fmt(this.date),onYear:n=>{const[i,h,u]=this.fmt(this.date).split("-");this.date=new Date("".concat(n,"-").concat(h,"-").concat(u)),e.dismiss()}}});e.present()}},computed:{getYear(){return g.getYear(this.fmt(this.date))},getMonth(){return g.getMonth(this.fmt(this.date))},getDay(){return g.getDay(this.fmt(this.date))}},watch:{date(e){this.isInit||(this.value=g.toStandardHisFormat(e))},value(e){if(!e){this.$emit("onValue",null);return}this.$emit("onValue",{label:e,value:this.value})},clear(){this.value=""}}}),fe=Y("b",null,"TODAY",-1),he=Y("b",null,"Unknown",-1);function me(e,n,i,h,u,_){const c=$("ion-input"),v=$("view-port"),f=$("picker-selector"),o=$("ion-col"),m=$("ion-row"),r=$("ion-button"),p=$("ion-grid");return l(),k(w,null,[a(v,{showFull:!1},{default:t(()=>[a(c,{class:"input_display",readonly:!0,value:e.value},null,8,["value"]),ne(e.$slots,"default",{date:e.value})]),_:3}),a(p,{class:"his-floating-keyboard"},{default:t(()=>[a(m,null,{default:t(()=>[a(o,{"sm-size":"12"},{default:t(()=>[a(f,{value:e.getYear,onOnIncrement:n[0]||(n[0]=d=>e.add("year")),onOnDecrement:n[1]||(n[1]=d=>e.subtract("year")),onOnValue:e.selectYear},null,8,["value","onOnValue"])]),_:1}),a(o,{"sm-size":"12"},{default:t(()=>[a(f,{value:e.getMonth,onOnIncrement:n[2]||(n[2]=d=>e.add("month")),onOnDecrement:n[3]||(n[3]=d=>e.subtract("month")),onOnValue:e.selectMonth},null,8,["value","onOnValue"])]),_:1}),a(o,{"sm-size":"12"},{default:t(()=>[a(f,{value:e.getDay,onOnIncrement:n[4]||(n[4]=d=>e.add("day")),onOnDecrement:n[5]||(n[5]=d=>e.subtract("day")),onOnValue:e.selectDay},null,8,["value","onOnValue"])]),_:1})]),_:1}),a(m,null,{default:t(()=>[e.canShowToday?(l(),y(o,{key:0,class:"ion-text-center"},{default:t(()=>[a(r,{color:"success",style:{width:"100%",height:"6vh"},onClick:e.today},{default:t(()=>[fe]),_:1},8,["onClick"])]),_:1})):se("",!0),a(o,null,{default:t(()=>[a(r,{disabled:!e.config.allowUnknown,color:"warning",style:{width:"100%",height:"6vh"},onClick:n[6]||(n[6]=d=>e.value="Unknown")},{default:t(()=>[he]),_:1},8,["disabled"])]),_:1})]),_:1})]),_:1})],64)}const ve=q(de,[["render",me]]);export{ve as default};
