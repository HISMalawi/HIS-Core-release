System.register(["./index-legacy-B837ziyX.js","./TableView-legacy-BncesURx.js","./cxca_report_service-legacy-v-B0YBRx.js","./DrillPatientIds-legacy-hvuqGj4-.js","./Export-legacy-CJ5Hk7vI.js","./index-legacy-DV7Qsz0v.js","./TableView-legacy-C0NmK7NG.js"],(function(e,a){"use strict";var t,l,r,o,s,n,d,c,u,i,g,p,v,_,b,f,y,m,h,C,L,$,T,x,S;return{setters:[e=>{t=e.d,l=e.v,r=e.n,o=e.o,s=e.aE,n=e.r,d=e.z,c=e.s,u=e.y,i=e.am,g=e.al,p=e.aZ,v=e.H,_=e.S,b=e.B,f=e.ct,y=e.ak,m=e.ap,h=e.a,C=e.b,L=e.w,$=e.e},e=>{T=e.v},e=>{x=e.C},e=>{S=e.D},null,null,null],execute:function(){const a=n([]),k=n(""),P=n(""),D=n(""),R=n(!1),w=n(""),N=t({components:{IonPage:r,IonLoading:l,v2Datatable:T},setup(){const e=e=>e.map((e=>{const{age_group:a,...t}=e;return{...t,age_group:a}})),t=e=>{const a=[];for(const t in e){const l={};l[t]=e[t],a.push(l)}return a},l=async(e,a)=>{a.length<=0||(await d.create({component:S,backdropDismiss:!1,cssClass:"large-modal",componentProps:{title:e,subtitle:D,patientIdentifiers:a,onFinish:()=>d.getTop().then((e=>e&&d.dismiss()))}})).present()},r=[[{label:"Facility:",ref:""},{label:"Month/Year:",ref:"",span:{thColspan:1}},{label:"Report Officer:",ref:"",span:{thColspan:3}}],[{label:"Age Disaggregate:",ref:"data.age_group",value:e=>e.age_group},{label:"Negative",ref:"data.cryotherapy.length",secondaryLabel:"1st screened (negative)",value:e=>e.negative?.length,tdClick:({column:e,data:a})=>l(`${a.age_group} ${e.secondaryLabel}`,a.negative)},{label:"Positive",ref:"data.positive.length",secondaryLabel:"1st screened (positive)",value:e=>e.positive?.length,tdClick:({column:e,data:a})=>l(`${a.age_group} ${e.secondaryLabel}`,a.positive)},{label:"For same day Tx",ref:"data.for_same_day_tx.length",secondaryLabel:"1st screened (For same day Tx)",value:e=>e.for_same_day_tx?.length,tdClick:({column:e,data:a})=>l(`${a.age_group} ${e.secondaryLabel}`,a.for_same_day_tx)},{label:"Suspected Cancer",ref:"data.suspected.length",secondaryLabel:"1st screened (Suspected Cancer)",value:e=>e.suspected?.length,tdClick:({column:e,data:a})=>l(`${a.age_group} ${e.secondaryLabel}`,a.suspected)}],[{label:"Age Disaggregate:",ref:"data.age_group",value:e=>e.age_group},{label:"Negative",ref:"data.cryotherapy.length",secondaryLabel:"Rescreened after previous negative (negative)",value:e=>e.negative?.length,tdClick:({column:e,data:a})=>l(`${a.age_group} ${e.secondaryLabel}`,a.negative)},{label:"Positive",ref:"data.positive.length",secondaryLabel:"Rescreened after previous negative (positive)",value:e=>e.positive?.length,tdClick:({column:e,data:a})=>l(`${a.age_group} ${e.secondaryLabel}`,a.positive)},{label:"For same day Tx",ref:"data.for_same_day_tx.length",secondaryLabel:"Rescreened after previous negative (For same day Tx)",value:e=>e.for_same_day_tx?.length,tdClick:({column:e,data:a})=>l(`${a.age_group} ${e.secondaryLabel}`,a.for_same_day_tx)},{label:"Suspected Cancer",ref:"data.suspected.length",secondaryLabel:"Rescreened after previous negative (Suspected Cancer)",value:e=>e.suspected?.length,tdClick:({column:e,data:a})=>l(`${a.age_group} ${e.secondaryLabel}`,a.suspected)}],[{label:"Age Disaggregate:",ref:"data.age_group",value:e=>e.age_group},{label:"Negative",ref:"data.cryotherapy.length",secondaryLabel:"Post-treatment follow-up (negative)",value:e=>e.negative?.length,tdClick:({column:e,data:a})=>l(`${a.age_group} ${e.secondaryLabel}`,a.negative)},{label:"Positive",ref:"data.positive.length",secondaryLabel:"Post-treatment follow-up positive)",value:e=>e.positive?.length,tdClick:({column:e,data:a})=>l(`${a.age_group} ${e.secondaryLabel}`,a.positive)},{label:"For same day Tx",ref:"data.for_same_day_tx.length",secondaryLabel:"Post-treatment follow-up (For same day Tx)",value:e=>e.for_same_day_tx?.length,tdClick:({column:e,data:a})=>l(`${a.age_group} ${e.secondaryLabel}`,a.for_same_day_tx)},{label:"Suspected Cancer",ref:"data.suspected.length",secondaryLabel:"Post-treatment follow-up (Suspected Cancer)",value:e=>e.suspected?.length,tdClick:({column:e,data:a})=>l(`${a.age_group} ${e.secondaryLabel}`,a.suspected)}],[{label:"1st time Screened",ref:"",exportable:!1,span:{thColspan:7}}],[{label:"Rescreened after previous negative",ref:"",exportable:!1,span:{thColspan:7}}],[{label:"Post-treatment follow-up",ref:"",span:{thColspan:7}}],[{label:"Month Summary",ref:"",span:{thColspan:7}}],[{label:"Total Screened",ref:"data.total_screened.length",secondaryLabel:"Total Screened",value:e=>e.total_screened?.length,tdClick:({column:e,data:a})=>l(`${e.secondaryLabel}`,a.total_screened)}],[{label:"Total Negative",ref:"data.total_negative.length",secondaryLabel:"Total Negative",value:e=>e.total_negative?.length,tdClick:({column:e,data:a})=>l(`${e.secondaryLabel}`,a.total_negative)}],[{label:"Total Via + eligible for same day Tx",ref:"data.total_via_plus_eligible_for_same_day_tx.length",secondaryLabel:"Total Via + eligible for same day Tx",value:e=>e.total_via_plus_eligible_for_same_day_tx?.length,tdClick:({column:e,data:a})=>l(`${e.secondaryLabel}`,a.total_via_plus_eligible_for_same_day_tx)}],[{label:"Total Positive",ref:"data.total_positive.length",secondaryLabel:"Total Positive",value:e=>e.total_positive?.length,tdClick:({column:e,data:a})=>l(`${e.secondaryLabel}`,a.total_positive)}],[{label:"Total Suspected Cancer",ref:"data.total_suspect_cancer.length",secondaryLabel:"Total Suspected Cancer",value:e=>e.total_suspect_cancer?.length,tdClick:({column:e,data:a})=>l(`${e.secondaryLabel}`,a.total_suspect_cancer)}],[{label:"Total VIA+ Referred",ref:"data.total_via_reffered.length",secondaryLabel:"Total VIA+ Referred",value:e=>e.total_via_reffered?.length,tdClick:({column:e,data:a})=>l(`${e.secondaryLabel}`,a.total_via_reffered)}],[{label:"Total CXCA Suspect Referred",ref:"data.suspects_reffered.length",secondaryLabel:"Total CXCA Suspect Referred",value:e=>e.suspects_reffered?.length,tdClick:({column:e,data:a})=>l(`${e.secondaryLabel}`,a.suspects_reffered)}],[{label:"Total Referred",ref:"data.total_reffered.length",secondaryLabel:"Total Referred",value:e=>e.total_reffered?.length,tdClick:({column:e,data:a})=>l(`${e.secondaryLabel}`,a.total_reffered)}]],n=async()=>{if(!k.value||!P.value)return c("Start date and end date required!");R.value=!0,a.value=[];const l=new x;l.startDate=k.value,l.endDate=P.value;try{const r=await l.getClinicReport("MONTHLY SCREEN");a.value=((a,l)=>{const r=[e(a.first_time_screened),e(a.rescreened_after_prev_visit),e(a.post_treatment_followup)];return r.push(t(l)),r})(r.data,r.totals)}catch(r){u("Unable to generate report!"),console.error(r)}R.value=!1},y=()=>s([{id:"year",helpText:"Select Year",type:i.TT_NUMBER,computedValue:e=>e.value,validation:e=>{const a=p.isPlainObject(e)?e.value:-1;return g.validateSeries([()=>g.required(e),()=>isNaN(parseInt(`${a}`))?["Invalid year"]:null,()=>g.rangeOf(e,2e3,v.getYear(_.getSessionDate()))])}},{id:"month",helpText:"Select Month",type:i.TT_SELECT,validation:e=>g.required(e),computedValue:e=>e.value,options:()=>[{label:"January",value:"01"},{label:"February",value:"02"},{label:"March",value:"03"},{label:"April",value:"04"},{label:"May",value:"05"},{label:"June",value:"06"},{label:"July",value:"07"},{label:"August",value:"08"},{label:"September",value:"09"},{label:"October",value:"10"},{label:"November",value:"11"},{label:"December",value:"12"}]}],(e=>{k.value=`${e.year.value}-${e.month.value}-01`,P.value=b(new Date(k.value).toISOString()).endOf("month").format("YYYY-MM-DD"),D.value=`Period (${f(k.value)} to ${f(P.value)})`,d.dismiss(),w.value=`${f(k.value)} to ${f(P.value)}`,n()}));return o((()=>!a.value.length&&y())),{columns:r,isLoading:R,reportData:a,period:D,csvQuarter:w,generate:n,configure:y,order:["age_group","negative","positive","for_same_day_tx","suspected"],csvheaders:["Age Group","Negative","Positive","For same day Tx","Suspected Cancer"],spacing:3,subHeaders:[["","","1st time screened","",""],["","","Rescreened after previous negative","",""],["","","Post-treatment follow-up","",""],["","","Month Summary","",""]]}}});e("default",y(N,[["render",function(e,a,t,l,r,o){const s=m("ion-loading"),n=m("v2Datatable"),d=m("ion-page");return C(),h(d,null,{default:L((()=>[$(s,{"is-open":e.isLoading,message:"Please wait..."},null,8,["is-open"]),$(n,{title:"Monthly Screen Report",subtitle:e.period,columns:e.columns,columnData:e.reportData,rowsPerPage:25,onConfigure:e.configure,csvQuarter:e.csvQuarter,onRefresh:()=>e.generate(),order:e.order,headers:e.csvheaders,"csv-spacing":e.spacing,"csv-sub-header":e.subHeaders},null,8,["subtitle","columns","columnData","onConfigure","csvQuarter","onRefresh","order","headers","csv-spacing","csv-sub-header"])])),_:1})}]]))}}}));
