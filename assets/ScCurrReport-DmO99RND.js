import{d,I as f,c4 as D,K as p,N as _,a9 as b,cm as u,O as v,t as C,q as P,_ as R,r as m,o as S,c as w,w as h,b as g}from"./index-BFG-WECc.js";import{v as y}from"./TableView-9M7asFjO.js";import{S as I}from"./stock_report_service-BB7dXtTQ.js";import{D as k}from"./ReportDateSelectionPrompt-CXB5PXhN.js";import{D as $}from"./DrillTableModal-D8UfYPBp.js";import"./PopupKeyboard-DXNkcTjV.js";import"./SIngleTouchField-OvqCQtJi.js";import"./dynamic-import-helper-Bsjrd6Ro.js";import"./TouchScreenForm-DiI3Xfhg.js";import"./ToolbarMediumCard-C3iotOe-.js";import"./Transformers-BPPLlH12.js";import"./ViewPort-0kHLdkku.js";import"./HisKeypad-DWBoYqiR.js";import"./BaseKeyboard-C1F0dD78.js";import"./KbLayouts-VRA-vjeH.js";import"./KbHandler-BuQ4TFU6.js";import"./overlays-04a9a43f-sOHkVQfY.js";import"./fuse-YdZE3OCN.js";import"./Export-CRv3Yrt4.js";import"./HisKeyboard-CNCznGxV.js";import"./HisKbConfigurations-GhFQZvlg.js";import"./MultiFieldDateHelper-CAg9Dfet.js";const A=d({components:{IonPage:f,IonLoading:D,v2Datatable:y},setup(){const e=p([]),i=p(""),r=p(!1),a=new I,c=[[{label:"#",ref:"index"},{label:"ARV drug category",ref:"category"},{label:"# of bottles (units) remaining",ref:"units",value:o=>u(o.units),tdClick:async o=>{(await v.create({component:$,cssClass:"custom-modal",componentProps:{title:o.data.category,columns:["Drug","Quantity"],onRows:()=>{var t;return(((t=o.data)==null?void 0:t.granular_spec)||[]).map(s=>[s.drug_name,u(s.units)])}}})).present()}}]],l=async()=>{if(!(a.startDate&&a.endDate))return C("Start date and end date required!");r.value=!0,e.value=[];try{e.value=(await a.getScCurrReport()).map((o,t)=>({...o,index:t+1}))}catch(o){P("Unable to generate report!")}r.value=!1},n=()=>k({onFinish:(o,t,s)=>{i.value=s,a.startDate=o,a.endDate=t,l()}});return _(()=>!e.value.length&&n()),{Img:b,reportData:e,isLoading:r,configure:n,generate:l,columns:c,period:i}}});function F(e,i,r,a,c,l){const n=m("ion-loading"),o=m("v2Datatable"),t=m("ion-page");return S(),w(t,null,{default:h(()=>[g(n,{"is-open":e.isLoading,message:"Please wait..."},null,8,["is-open"]),g(o,{title:"Sc Curr","icon-url":e.Img("login-logos/PEPFAR.png"),subtitle:e.period,columns:e.columns,columnData:e.reportData,rowsPerPage:20,onConfigure:e.configure,onRefresh:()=>e.generate(),reportPrefix:"PEPFAR"},null,8,["icon-url","subtitle","columns","columnData","onConfigure","onRefresh"])]),_:1})}const ee=R(A,[["render",F]]);export{ee as default};
