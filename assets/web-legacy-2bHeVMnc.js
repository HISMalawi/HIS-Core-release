System.register(["./index-legacy-2OuOZQ1w.js"],(function(e,n){"use strict";var o,a,c,t;return{setters:[e=>{o=e.ee,a=e.ef,c=e.eg,t=e.eh}],execute:function(){e("CapacitorBarcodeScannerWeb",class extends o{async stopAndHideScanner(){console.log(window.OSBarcodeWebScanner),window.OSBarcodeWebScanner&&(await window.OSBarcodeWebScanner.stop(),window.OSBarcodeWebScanner=null),document.getElementById("cap-os-barcode-scanner-container-dialog").style.display="none"}buildScannerElement(){if(document.getElementById("cap-os-barcode-scanner-container"))return void(document.getElementById("cap-os-barcode-scanner-container").className="scanner-container-display");const e=document.body.appendChild(document.createElement("div"));e.id="cap-os-barcode-scanner-container";const n=document.createElement("div");n.id="cap-os-barcode-scanner-container-dialog",n.className="scanner-dialog";const o=document.createElement("div");o.className="scanner-dialog-inner";const a=document.createElement("span");a.className="close-button",a.innerHTML="&times;",o.appendChild(a);const c=document.createElement("p");c.innerHTML="&nbsp;",o.appendChild(c);const t=document.createElement("div");t.className="scanner-container-full-width",t.id="cap-os-barcode-scanner-container-scanner",o.appendChild(t),n.appendChild(o),e.appendChild(n),a.onclick=this.stopAndHideScanner}async scanBarcode(e){return this.buildScannerElement(),document.getElementById("cap-os-barcode-scanner-container-dialog").style.display="block",new Promise(((n,o)=>{var r,i;const d={facingMode:1===e.cameraDirection?"environment":"user",scanButton:void 0!==e.scanButton&&e.scanButton,scanInstructions:e.scanInstructions?e.scanInstructions:"",orientation:e.scanOrientation?e.scanOrientation:a.PORTRAIT,showCameraSelection:!!(null===(r=e.web)||void 0===r?void 0:r.showCameraSelection)&&e.web.showCameraSelection,typeHint:17===e.hint?void 0:e.hint,scannerFPS:(null===(i=e.web)||void 0===i?void 0:i.scannerFPS)?e.web.scannerFPS:50},s=document.getElementById("cap-os-barcode-scanner-container-scanner");if(!s)throw new Error("Scanner Element is required for web");window.OSBarcodeWebScanner=new c(s.id,{formatsToSupport:void 0!==d.typeHint?[d.typeHint]:void 0,verbose:void 0});const l={fps:d.scannerFPS,qrbox:s.getBoundingClientRect().width*(9/16)-10,aspectRatio:16/9,videoConstraints:{focusMode:"continuous",height:{min:576,ideal:1920},deviceId:void 0,facingMode:d.facingMode}};window.OSBarcodeWebScanner.start({facingMode:d.facingMode},l,((e,o)=>{var a,c;this.stopAndHideScanner(),n({ScanResult:e,format:null!==(c=null===(a=o.result.format)||void 0===a?void 0:a.format)&&void 0!==c?c:t.ALL})}),(e=>{["NotFoundException","No barcode or QR code detected","No MultiFormat Readers were able to detect the code"].find((n=>-1!==e.indexOf(n)))||(this.stopAndHideScanner(),console.error(`[Scanner Web Error] ${e}`),o(e))}))}))}})}}}));
