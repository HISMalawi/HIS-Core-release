import{d as _,a5 as C,r as u,t as h,aH as D,cN as b,aq as g,O as v,a6 as w,v as y,w as H,ab as f,u as M,x as F}from"./index-ATRrruTT.js";import{v as N}from"./TableView-C0_sXf7R.js";import{C as R}from"./clinic_report_service-CGkQKSzt.js";import{H as $}from"./HypertensionDrilldown-MDLRBFX2.js";import{w as A}from"./v2utils-CjCFVQDN.js";import"./Export-BikdWX3S.js";import"./index-_1Jf0d3I.js";const S=_({components:{IonPage:C,v2Datatable:N},setup(){const t=D("reports.png"),l=u([]),s=u(""),i=new R,e=(n,a)=>({label:n,ref:a,toValue:o=>o.length,tdClick:o=>m("".concat(o.column.label),o.refData)}),c=[[{label:"#",ref:"index"},{label:"Age group",ref:"age_group"},{label:"Gender",ref:"gender"},e("Screened for HTN","screened"),e("Normal <140/<90","normal_reading"),e("Mild 140-159/90-99","mild_reading"),e("Moderate 160-180/100-110","moderate_reading"),e("Severe >180/>110","severe_reading"),e("Hydrochlorothiazide 25mg","hydrochlorothiazide_25mg"),e("Amlodipine 5mg","amlodipine_5mg"),e("Amlodipine 10 mg","amlodipine_10mg"),e("Captopril 25mg","captopril_25mg"),e("Captopril 6-25mg","captopril_6_25mg"),e("Captopril 12-5mg","captopril_12_5mg"),e("Captopril 50mg","captopril_50mg"),e("Enalapril 5 mg","enalapril_5mg"),e("Enalapril 10mg","enalapril_10mg"),e("Atenolol 50mg","atenolol_50mg"),e("Atenolol 100mg","atenolol_100mg"),e("Nifedipine 10mg","nifedipine_10mg"),e("Nifedipine 20mg","nifedipine_20mg"),e("Total (regimen)","total_regimen")]],m=async(n,a)=>{a.length&&(await g.create({component:$,backdropDismiss:!1,cssClass:"large-modal",componentProps:{title:n,subtitle:s,patients:a,onFinish:()=>g.getTop().then(o=>o&&g.dismiss())}})).present()},p=()=>A(async()=>{if(!(i.startDate&&i.endDate))return v("Start date and end date required!");l.value=[];const n=await i.getHypertensionReport(),a=Object.keys(n).reduce((o,r)=>(o.M.push({age_group:r,gender:"Male",...n[r].M}),o.F.push({age_group:r,gender:"Female",...n[r].F}),o),{F:[],M:[]});l.value=a.F.concat(a.M).map((o,r)=>({index:r+1,...o}))}),d=()=>b({onFinish:(n,a,o,r)=>{r&&i.setOccupation(r),s.value="".concat(o),i.startDate=n,i.endDate=a,p()}});return h(()=>d()),{logo:t,reportData:l,configure:d,generate:p,columns:c,period:s}}});function P(t,l,s,i,e,c){const m=f("v2Datatable"),p=f("ion-page");return M(),y(p,null,{default:H(()=>[F(m,{title:"Hypertension Report","icon-url":t.logo,subtitle:t.period,columns:t.columns,columnData:t.reportData,rowsPerPage:50,onConfigure:t.configure,onRefresh:()=>t.generate(),"report-prefix":"Clinic"},null,8,["icon-url","subtitle","columns","columnData","onConfigure","onRefresh"])]),_:1})}const E=w(S,[["render",P]]);export{E as default};
