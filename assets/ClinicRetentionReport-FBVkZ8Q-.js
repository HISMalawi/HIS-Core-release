import{d as a,L as t,cn as h,ab as m,cx as d,_ as l,r as c,o as u,c as f}from"./index-iM2cGz0p.js";import{_ as w}from"./ReportMixin.vue_vue_type_script_lang-r1arG92A.js";import{R as _}from"./TableReportTemplate-A4sKSoQg.js";import"./MultiFieldDateHelper-BIZNjBD7.js";import"./dynamic-import-helper-9HnG3Mif.js";import"./KbLayouts-9dqmDWmG.js";import"./HisKbConfigurations-a7K7dizM.js";import"./BasicReportTemplate-Cy-G-sIO.js";import"./Export-VO9zGhWb.js";import"./SIngleTouchField-TVlhbHrr.js";import"./Pagination-nCJl9BUM.js";import"./HisStandardForm-tiWNF5wA.js";import"./TouchScreenForm-hvB0I83y.js";import"./ToolbarMediumCard-ny9gUih7.js";import"./Transformers-XlEF3tgP.js";import"./ViewPort-4mhPlN2U.js";import"./ReportErrors-SvbbPxAT.js";const R=a({mixins:[w],components:{ReportTemplate:_},data:()=>({title:"Clinic Retention report",totalClients:[],rows:[],cohort:{},columns:[[t.thTxt("Age group"),t.thTxt("Gender"),t.thTxt("Initiated one month"),t.thTxt("Completed one month"),t.thTxt("Initiated Three months"),t.thTxt("Completed Three months"),t.thTxt("Initiated Six months"),t.thTxt("Completed Six months")]]}),created(){this.fields=this.getDateDurationFields()},methods:{async onPeriod(o,e){this.rows=[],this.report=new h,this.report.setStartDate(e.start_date),this.report.setEndDate(e.end_date),this.report.setOccupation(e.occupation),this.period=this.report.getDateIntervalPeriod(),this.cohort=await this.report.getClientRentention(),this.setRows("F"),this.setRows("M")},getValue(o,e,n,s){try{const r=this.cohort[o][s].filter(i=>i.gender===e&&i.age_group===n).map(i=>i.patient_id);return this.drill(r)}catch(r){return console.warn(r),0}},setRows(o){const e=[...d,"Unknown"];for(const n in e){const s=e[n],r=[t.td(s),t.td(this.formatGender(o))];if(m.isEmpty(this.cohort))this.rows.push([...r,t.td(0),t.td(0),t.td(0),t.td(0),t.td(0),t.td(0)]);else{for(const i in this.cohort)r.push(this.getValue(parseInt(i),o,s,"all")),r.push(this.getValue(parseInt(i),o,s,"retained"));this.rows.push(r)}}}}});function g(o,e,n,s,r,i){const p=c("report-template");return u(),f(p,{title:o.title,period:o.period,rows:o.rows,fields:o.fields,columns:o.columns,onReportConfiguration:o.onPeriod,"report-prefix":"Clinic"},null,8,["title","period","rows","fields","columns","onReportConfiguration"])}const F=l(R,[["render",g]]);export{F as default};
