System.register(["./EncounterMixin.vue_vue_type_script_lang-legacy-B-rKFJn9.js","./index-legacy-pSEoxn3J.js","./anc_visit_type_service-legacy-BEW5ByuU.js","./encounter_guidelines-legacy-mYSO8ZN5.js","./GuidelineEngine-legacy-KsvQuFdF.js","./HisStandardForm-legacy-CGi-zolz.js"],(function(e,i){"use strict";var t,s,a,n,r,l,u,c,o,d,h,v;return{setters:[e=>{t=e._},e=>{s=e.d,a=e.m,n=e.ao,r=e.an,l=e.am,u=e.ar,c=e.a,o=e.b,d=e.w,h=e.e},e=>{v=e.A},null,null,null],execute:function(){const i=s({components:{IonPage:a},mixins:[t],data:()=>({service:{},helpText:"ANC Visit Number"}),watch:{ready:{async handler(e){e&&(this.service=new v(this.patientID,this.providerID),await this.service.loadLastVisitNumber(),this.fields=this.getFields())},immediate:!0}},methods:{async onFinish(e,i){await this.service.createEncounter();const t=await this.resolveObs(i);await this.service.saveObservationList(t),this.nextTask()},getFields(){return[{id:"visit_number",helpText:this.helpText,dynamicHelpText:()=>this.service.lastVisitNumber?`${this.helpText} (Last visit number: ${this.service.lastVisitNumber})`:this.helpText,defaultValue:()=>this.service.lastVisitNumber+1,type:n.TT_NUMBER,computedValue:e=>({obs:[this.service.buildValueNumber("Type of visit",e.value),this.service.buildValueCoded("Has extended ANC visits",e.value>8?"Yes":"No")]}),validation:e=>this.validateSeries([()=>r.required(e),()=>r.rangeOf(e,this.service.lastVisitNumber+1,15)])},{id:"reasons",helpText:"Provide reason for having more than 8 visits",type:n.TT_TEXT,computedValue:e=>({obs:this.service.buildValueText("Reason for extended ANC visits",e.value)}),condition:e=>e.visit_number.value>8,validation:e=>r.required(e)}]}}});e("default",l(i,[["render",function(e,i,t,s,a,n){const r=u("his-standard-form"),l=u("ion-page");return o(),c(l,null,{default:d((()=>[h(r,{fields:e.fields,skipSummary:!0,onFinishAction:e.onFinish,cancelDestinationPath:e.cancelDestination},null,8,["fields","onFinishAction","cancelDestinationPath"])])),_:1})}]]))}}}));
