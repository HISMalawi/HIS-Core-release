import{d as a,I as p,L as o,cE as r,F as l,V as m,H as d,cx as c,_ as f,r as s,o as h,c as u,w as b,b as _}from"./index-BBbw6-oc.js";import{_ as x}from"./ReportMixin.vue_vue_type_script_lang-BwEqdtdY.js";import{R as g}from"./BaseTableReport-BBiI14qy.js";import"./BasicReportTemplate-DIfw5aau.js";import"./Export-DGgo6aCj.js";import"./Pagination-CACJEzfQ.js";import"./HisStandardForm-BhUAZgIK.js";const w=a({mixins:[x],components:{ReportTemplate:g,IonPage:p},data:()=>({title:"Booked clients",date:"",rows:[],appointments:{},columns:[[o.thTxt("ARV#"),o.thTxt("First name",{csvExportable:!1,pdfExportable:!0}),o.thTxt("Last name",{csvExportable:!1,pdfExportable:!0}),o.thTxt("Gender"),o.thTxt("birthdate"),o.thTxt("Outcome"),o.thTxt("Current Address",{csvExportable:!1,pdfExportable:!0}),o.thTxt("Actions",{csvExportable:!1,pdfExportable:!1})]]}),created(){this.report=new r,this.fields=[{id:"date",helpText:"Select date",type:l.TT_DATE_PICKER,defaultValue:()=>r.getSessionDate(),validation:t=>m.required(t),onValue:async t=>(this.report.setStartDate(t),this.appointments[t]||(this.appointments[t]=await this.report.getBookedAppointments(t)||[]),!0),config:{infoItems:t=>{var e;return[{label:"Appointments",value:((e=this.appointments[t])==null?void 0:e.length)||0}]}}}]},methods:{onPeriod(t){this.rows=[],this.period=d.toStandardHisDisplayFormat(t.date),this.setRows(this.appointments[t.date])},setRows(t){c(t).asc(e=>e.given_name).forEach(e=>{this.rows.push([this.tdARV(e.arv_number||"N/A"),o.td(e.given_name),o.td(e.family_name),o.td(this.formatGender(e.gender)),o.tdDate(e.birthdate),o.td(e.outcome),o.td("District: <br/> <b>".concat(e.district,"</b><br/>\n                        Village: <br/> <b>").concat(e.village,"</b><br/>\n                        Land-mark: <br/> <b>").concat(e.land_mark,"</b><br/>\n                        Cellphone: <br/> <b>").concat(e.cell_phone,"</b>")),o.tdBtn("Select",()=>this.confirmPatient(e.person_id))])})}}});function T(t,e,v,E,C,R){const i=s("report-template"),n=s("ion-page");return h(),u(n,null,{default:b(()=>[_(i,{title:t.title,period:t.period,rows:t.rows,fields:t.fields,columns:t.columns,showtitleOnly:!0,config:{showIndex:!1},encryptPDF:!0,reportPrefix:"Clinic",onReportConfiguration:t.onPeriod},null,8,["title","period","rows","fields","columns","onReportConfiguration"])]),_:1})}const S=f(w,[["render",T]]);export{S as default};
