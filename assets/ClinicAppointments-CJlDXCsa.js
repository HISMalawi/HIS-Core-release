import{d as p,I as l,L as o,cF as s,F as m,V as c,H as d,cq as f,_ as h,r as i,o as u,c as b,w as _,b as x}from"./index-BbPYANJn.js";import{_ as g}from"./ReportMixin.vue_vue_type_script_lang-BdKiUyjt.js";import{R as A}from"./BaseTableReport-TUrF02Zd.js";import{A as w}from"./appointment_service-DL5-mw5A.js";import"./BasicReportTemplate-BDBwxYU4.js";import"./Export-BN6ZqWE3.js";import"./Pagination-DHHxTtaM.js";import"./HisStandardForm-Qxx6S8J3.js";const T=p({mixins:[g],components:{ReportTemplate:A,IonPage:l},data:()=>({title:"Booked clients",date:"",rows:[],totalAppointments:{},columns:[[o.thTxt("ARV#"),o.thTxt("First name",{csvExportable:!1,pdfExportable:!0}),o.thTxt("Last name",{csvExportable:!1,pdfExportable:!0}),o.thTxt("Gender"),o.thTxt("birthdate"),o.thTxt("Outcome"),o.thTxt("Current Address",{csvExportable:!1,pdfExportable:!0}),o.thTxt("Actions",{csvExportable:!1,pdfExportable:!1})]]}),created(){this.report=new s,this.fields=[{id:"date",helpText:"Select date",type:m.TT_DATE_PICKER,defaultValue:()=>s.getSessionDate(),validation:t=>c.required(t),onValue:async t=>{var e,r;return this.report.setStartDate(t),this.totalAppointments[t]||(this.totalAppointments[t]=(r=(e=await w.getDailiyAppointments(t))==null?void 0:e.length)!=null?r:0),!0},config:{infoItems:t=>[{label:"Appointments",value:this.totalAppointments[t]}]}}]},methods:{async onPeriod(t){try{this.rows=[],this.period=d.toStandardHisDisplayFormat(t.date);const e=await this.report.getBookedAppointments(t.date)||[];this.setRows(e)}catch(e){}},setRows(t){f(t).asc(e=>e.given_name).forEach(e=>{this.rows.push([this.tdARV(e.arv_number||"N/A"),o.td(e.given_name),o.td(e.family_name),o.td(this.formatGender(e.gender)),o.tdDate(e.birthdate),o.td(e.outcome),o.td("District: <br/> <b>".concat(e.district,"</b><br/>\n                        Village: <br/> <b>").concat(e.village,"</b><br/>\n                        Land-mark: <br/> <b>").concat(e.land_mark,"</b><br/>\n                        Cellphone: <br/> <b>").concat(e.cell_phone,"</b>")),o.tdBtn("Select",()=>this.confirmPatient(e.person_id))])})}}});function v(t,e,r,E,y,C){const n=i("report-template"),a=i("ion-page");return u(),b(a,null,{default:_(()=>[x(n,{title:t.title,period:t.period,rows:t.rows,fields:t.fields,columns:t.columns,showtitleOnly:!0,config:{showIndex:!1},encryptPDF:!0,reportPrefix:"Clinic",onReportConfiguration:t.onPeriod},null,8,["title","period","rows","fields","columns","onReportConfiguration"])]),_:1})}const B=h(T,[["render",v]]);export{B as default};
