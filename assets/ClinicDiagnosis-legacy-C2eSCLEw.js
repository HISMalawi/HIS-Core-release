System.register(["./BaseTableReport-legacy-BsY2p3H_.js","./index-legacy-BoFMGMh4.js","./ReportMixin.vue_vue_type_script_lang-legacy-Djsv7vuW.js","./Export-legacy-CzjitY0y.js","./index-legacy-Cko7jwhT.js","./HisStandardForm-legacy-COVbZ4u5.js","./BasicReportTemplate-legacy-DY6TV1hx.js","./Pagination-legacy-BaOnjZI1.js"],(function(t,e){"use strict";var s,l,a,i,r,o,n,d,u,h,m,c,g,p,y,x;return{setters:[t=>{s=t.R},t=>{l=t.d,a=t.ay,i=t.n,r=t.aZ,o=t.at,n=t.cs,d=t.d$,u=t.y,h=t.ak,m=t.ap,c=t.a,g=t.b,p=t.w,y=t.e},t=>{x=t._},null,null,null,null,null],execute:function(){const e=l({components:{ReportTemplate:s,IonPage:i},mixins:[x],data:()=>({title:"Clinic Diagnosis Report",rows:[],reportService:{},customInfo:{label:"Total Visits",value:0},columns:[[a.thTxt("Age Groups",{sortable:!1,exportable:!1}),a.thTxt("<6 months",{colspan:2,sortable:!1,exportable:!1}),a.thTxt("6 months < 5 yrs",{colspan:2,sortable:!1,exportable:!1}),a.thTxt("5 yrs < 14 yrs",{colspan:2,sortable:!1,exportable:!1}),a.thTxt("> 14 yrs",{colspan:2,sortable:!1,exportable:!1}),a.thTxt("",{sortable:!1,exportable:!1})],[a.thTxt("Diagnosis"),a.thTxt("Female",{value:"Females <6 months"}),a.thTxt("Male",{value:"Males <6 months"}),a.thTxt("Female",{value:"Females 6 months < 5 yrs"}),a.thTxt("Male",{value:"Males 6 months < 5 yrs"}),a.thTxt("Female",{value:"Females 5 yrs < 14 yrs"}),a.thTxt("Male",{value:"Males 5 yrs < 14 yrs"}),a.thTxt("Female",{value:"Females > 14 yrs"}),a.thTxt("Male",{value:"Males > 14 yrs"}),a.thTxt("Total")]]}),created(){this.fields=this.getDateDurationFields()},methods:{async init(t,e){this.reportService=new d,this.reportService.startDate=e.start_date,this.reportService.endDate=e.end_date,this.period=this.reportService.getReportPeriod();try{this.rows=this.buildRows(await this.reportService.getDiagnosisReport());const t=await this.reportService.getAttendance();this.customInfo.value=t.length,this.customInfo.other={click:()=>this.drill(t,"Total Patients Visits")}}catch(s){u(`${s}`)}},totalDiagnosis:t=>Object.values(t).reduce(((t,e)=>t+e),0),getDrillDownColumns:()=>[[a.thTxt("First Name"),a.thTxt("Last Name"),a.thTxt("Gender"),a.thTxt("Phone Number"),a.thTxt("Address")]],drill(t,e){return this.drilldownData(e,this.getDrillDownColumns(),t,(async t=>await Promise.all(t.map((async t=>{const e=await o.findByID(t),s=new o(e);return[a.td(s.getGivenName()),a.td(s.getFamilyName()),a.td(n(s.getGender())),a.td(s.getPhoneNumber()),a.td(`${s.getCurrentDistrict()}, ${s.getCurrentVillage()}, ${s.getClosestLandmark()}`)]})))))},buildColumn(t,e="Drilldown Data"){return r.isEmpty(t)?a.td(0):a.tdLink(t.length,(()=>this.drill(t,e)))},buildRows(t){if(r.isEmpty(t))return[];const e=[];return Object.keys(t).forEach((s=>{const l=r.get(t[s],"F.0-5 months",[]),i=r.get(t[s],"M.0-5 months",[]),o=r.get(t[s],"F.6 mth < 5 yrs",[]),n=r.get(t[s],"M.6 mth < 5 yrs",[]),d=r.get(t[s],"F.5-14 yrs",[]),u=r.get(t[s],"M.5-14 yrs",[]),h=r.get(t[s],"F.>= 14 years",[]),m=r.get(t[s],"M.>= 14 years",[]);e.push([a.td(s,{style:{textAlign:"left"}}),this.buildColumn(l,`under 6 months females diagnosed with ${s}`),this.buildColumn(i,`under 6 months males diagnosed with ${s}`),this.buildColumn(o,`under 5 years females diagnosed with ${s}`),this.buildColumn(n,`under 5 years males diagnosed with ${s}`),this.buildColumn(d,`under 14 years females diagnosed with ${s}`),this.buildColumn(u,`under 14 years males diagnosed with ${s}`),this.buildColumn(h,`over 14 years females diagnosed with ${s}`),this.buildColumn(m,`over 14 years males diagnosed with ${s}`),this.buildColumn([...o,...n,...l,...i,...d,...u,...h,...m],`Total diagnosed with ${s}`)])})),e.sort(((t,e)=>t[0].td<e[0].td?-1:t[0].td>e[0].td?1:0))}}});t("default",h(e,[["render",function(t,e,s,l,a,i){const r=m("report-template"),o=m("ion-page");return g(),c(o,null,{default:p((()=>[y(r,{title:t.title,rows:t.rows,fields:t.fields,columns:t.columns,period:t.period,reportPrefix:"Clinic",customInfo:t.customInfo,onReportConfiguration:t.init},null,8,["title","rows","fields","columns","period","customInfo","onReportConfiguration"])])),_:1})}]]))}}}));
