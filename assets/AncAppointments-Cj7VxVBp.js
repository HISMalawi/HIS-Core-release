import{dz as s,d as c,a5 as u,a9 as f,aa as h,ao as t,a6 as g,ab as p,u as _,v as T,w as A,x as v}from"./index-ZHjf-rL0.js";import{R as w}from"./TableReportTemplate-7HimX9Xc.js";import{A as b}from"./AncReports-XTfpuXtB.js";import"./Export-B_lPSBZx.js";import"./index-cOIZtJfG.js";import"./HisStandardForm-DV91SVN0.js";import"./ReportErrors-DsFNAGwl.js";import"./BasicReportTemplate-DV8whV1l.js";import"./Pagination-BiJtOdHu.js";class d extends s{generateBookedAppointments(){return s.getJson("programs/".concat(this.programID,"/booked_appointments"),{date:this.startDate,paginated:!1})}}const C=c({components:{ReportTemplate:w,IonPage:u},setup(){const a=b("Booked clients"),{reportData:e,fd:r,gotoPatientDashboard:i}=a;return e.service=new d,e.other.appointments=[],e.fields=[{id:"date",helpText:"Select date",type:f.TT_DATE_PICKER,defaultValue:()=>d.getSessionDate(),validation:o=>h.required(o),onValue:async o=>(e.service.setStartDate(o),e.other.appointments[o]||(e.other.appointments[o]=await e.service.generateBookedAppointments()||[]),!0),config:{infoItems:o=>{var n;return[{label:"Appointments",value:((n=e.other.appointments[o])==null?void 0:n.length)||0}]}}}],e.columns=[[t.thTxt("Identifier"),t.thTxt("First name"),t.thTxt("Last name"),t.thTxt("Gender"),t.thTxt("birthdate"),t.thTxt("Actions")]],{...a,onPeriod:async o=>{e.rows=[],e.period=r(o.date),e.rows=e.other.appointments[o.date].map(n=>[t.td(n.npid),t.td(n.given_name),t.td(n.family_name),t.td(n.gender),t.tdDate(n.birthdate),t.tdBtn("View",()=>i(n.person_id))])}}}});function D(a,e,r,i,m,o){const n=p("report-template"),l=p("ion-page");return _(),T(l,null,{default:A(()=>[v(n,{title:a.title,period:a.period,rows:a.rows,fields:a.fields,columns:a.columns,onReportConfiguration:a.onPeriod},null,8,["title","period","rows","fields","columns","onReportConfiguration"])]),_:1})}const $=g(C,[["render",D]]);export{$ as default};
