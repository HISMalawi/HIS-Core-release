System.register(["./index-legacy-Dg5P6bX-.js","./TableView-legacy-D9drx_2x.js","./cxca_report_service-legacy-ZpHNCI8R.js","./ReportDateSelectionPrompt-legacy-CYILbQs6.js","./DrillPatientIds-legacy-TumkZg0j.js","./PopupKeyboard-legacy-Cz-tBZHa.js","./SIngleTouchField-legacy-SRHCPnWv.js","./dynamic-import-helper-legacy-arUa2LZV.js","./TouchScreenForm-legacy-Bqug27CT.js","./ToolbarMediumCard-legacy-DWokgyDV.js","./Transformers-legacy-DhNYVLaS.js","./ViewPort-legacy-D3j1oaCn.js","./HisKeypad-legacy-CAj098_i.js","./BaseKeyboard-legacy-DbTjgoKo.js","./KbLayouts-legacy-BKvPSxzZ.js","./KbHandler-legacy-De8o5nTq.js","./fuse-legacy-CQoBB3MK.js","./Export-legacy-3ZHnhIid.js","./HisKeyboard-legacy-C-8xTqW8.js","./HisKbConfigurations-legacy-vrLd9Pgz.js","./MultiFieldDateHelper-legacy-DBQBHUfA.js"],(function(e,t){"use strict";var a,l,s,r,n,o,i,c,u,p,d,_,g,v,f,m,b,y,h;return{setters:[e=>{a=e.d,l=e.I,s=e.c4,r=e.N,n=e.K,o=e.t,i=e.q,c=e.O,u=e.cb,p=e._,d=e.r,_=e.o,g=e.c,v=e.w,f=e.b},e=>{m=e.v},e=>{b=e.C},e=>{y=e.D},e=>{h=e.D},null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null],execute:function(){const t=n([]),C=n(""),w=n(""),j=n(""),L=n(!1),$=n(""),P=a({components:{IonPage:l,IonLoading:s,v2Datatable:m},setup(){const e=async(e,t)=>{t.length<=0||(await c.create({component:h,backdropDismiss:!1,cssClass:"large-modal",componentProps:{title:e,subtitle:j,patientIdentifiers:t,onFinish:()=>c.getTop().then((e=>e&&c.dismiss()))}})).present()},a=[[{label:"#",ref:"index",span:{thRowspan:2}},{label:"Age group",ref:"age_group",span:{thRowspan:2}},{label:"Gender",ref:"gender",exportable:!1,span:{thRowspan:2}},{label:"1st time screened",ref:"",span:{thColspan:3}},{label:"Rescreened after previous negative",ref:"",span:{thColspan:3}},{label:"Post-treatment follow-up",ref:"",span:{thColspan:3}}],[{label:"Negative",ref:"first_time_screened_negative",secondaryLabel:"1st screened (Negative)",value:e=>e.first_time_screened.negative.length,tdClick:({column:t,data:a})=>e(`${a.age_group} ${t.secondaryLabel}`,a.first_time_screened.negative)},{label:"Positive",ref:"first_time_screened_positive",secondaryLabel:"1st time screened (Positive)",value:e=>e.first_time_screened.positive.length,tdClick:({column:t,data:a})=>e(`${a.age_group} ${t.secondaryLabel}`,a.first_time_screened.positive)},{label:"Suspected Cancer",ref:"first_time_screened_suspected_cancer",secondaryLabel:"1st screened(Suspected cancer)",value:e=>e.first_time_screened.suspected.length,tdClick:({column:t,data:a})=>e(`${a.age_group} ${t.secondaryLabel}`,a.first_time_screened.suspected)},{label:"Negative",ref:"rescreened_after_prev_visit_negative",secondaryLabel:"Rescreen after prev visit (Negative)",value:e=>e.rescreened_after_prev_visit.negative.length,tdClick:({column:t,data:a})=>e(`${a.age_group} ${t.secondaryLabel}`,a.rescreened_after_prev_visit.negative)},{label:"Positive",ref:"rescreened_after_prev_visit_positive",secondaryLabel:"Rescreen after prev visit (Positive)",value:e=>e.rescreened_after_prev_visit.positive.length,tdClick:({column:t,data:a})=>e(`${a.age_group} ${t.secondaryLabel}`,a.rescreened_after_prev_visit.positive)},{label:"Suspected cancer",ref:"rescreened_after_prev_visit_suspected",secondaryLabel:"Rescreen after prev visit (Suspected)",value:e=>e.rescreened_after_prev_visit.suspected.length,tdClick:({column:t,data:a})=>e(`${a.age_group} ${t.secondaryLabel}`,a.rescreened_after_prev_visit.suspected)},{label:"Negative",ref:"post_treatment_followup_negative",secondaryLabel:"Post-treatment followup(Negative)",value:e=>e.post_treatment_followup.negative.length,tdClick:({column:t,data:a})=>e(`${a.age_group} ${t.secondaryLabel}`,a.post_treatment_followup.negative)},{label:"Positive",ref:"post_treatment_followup_positive",secondaryLabel:"Post-treatment followup (Positive)",value:e=>e.post_treatment_followup.positive.length,tdClick:({column:t,data:a})=>e(`${a.age_group} ${t.secondaryLabel}`,a.post_treatment_followup.positive)},{label:"Suspected cancer",ref:"post_treatment_followup_suspected",secondaryLabel:"Post-treatment followup (Suspected)",value:e=>e.post_treatment_followup.suspected.length,tdClick:({column:t,data:a})=>e(`${a.age_group} ${t.secondaryLabel}`,a.post_treatment_followup.suspected)}]],l=async()=>{if(!C.value||!w.value)return o("Start date and end date required!");L.value=!0,t.value=[];const e=new b;e.startDate=C.value,e.endDate=w.value;try{t.value=(await e.getClinicReport("CXCA SCRN")).slice(5).map(((e,t)=>(e.index=t+1,e.gender="Female",e)));const a=e=>{const a=a=>t.value.reduce(((t,l)=>t.concat(l[e][a]||[])),[]);return{positive:a("positive"),negative:a("negative"),suspected:a("suspected")}};t.value.push({age_group:"All",gender:"Female",index:t.value.length+1,first_time_screened:a("first_time_screened"),post_treatment_followup:a("post_treatment_followup"),rescreened_after_prev_visit:a("rescreened_after_prev_visit")})}catch(a){i("Unable to generate report!")}L.value=!1},s=()=>y({onFinish:(e,t,a)=>{C.value=e,w.value=t,j.value=`Period (${a})`,$.value=`${u(C.value)} to ${u(w.value)}`,l()}});return r((()=>!t.value.length&&s())),{columns:a,isLoading:L,reportData:t,period:j,csvQuarter:$,generate:l,configure:s}}});e("default",p(P,[["render",function(e,t,a,l,s,r){const n=d("ion-loading"),o=d("v2Datatable"),i=d("ion-page");return _(),g(i,null,{default:v((()=>[f(n,{"is-open":e.isLoading,message:"Please wait..."},null,8,["is-open"]),f(o,{title:"CXCA SCRN Report",csvQuarter:e.csvQuarter,subtitle:e.period,columns:e.columns,columnData:e.reportData,rowsPerPage:25,onConfigure:e.configure,onRefresh:()=>e.generate()},null,8,["csvQuarter","subtitle","columns","columnData","onConfigure","onRefresh"])])),_:1})}]]))}}}));
