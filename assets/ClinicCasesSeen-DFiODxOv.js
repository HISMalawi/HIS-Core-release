import{N as p,O as d}from"./opd_report_service-BuYDcNd3.js";import{R as c}from"./BaseTableReport-DbTZg4GZ.js";import{d as u,ay as e,n as f,ak as h,ap as m,a as C,b as _,w,e as v}from"./index-DO7Erl4-.js";import{_ as g}from"./ReportMixin.vue_vue_type_script_lang-CkTYY5dD.js";import"./Export-D9QvNgBk.js";import"./index-D93MWXf-.js";import"./HisStandardForm-DUMUlSHj.js";import"./BasicReportTemplate-C86tUV65.js";import"./Pagination-19Zodjag.js";const x=u({components:{ReportTemplate:c,IonPage:f},mixins:[g],data:()=>({title:"Cases seen report",rows:[],reportService:{},columns:[[e.thTxt("",{sortable:!1,exportable:!1}),e.thTxt("New cases",{colspan:2,sortable:!1,exportable:!1}),e.thTxt("All cases",{colspan:2,sortable:!1,exportable:!1})],[e.thTxt("NCD type"),e.thTxt("Male",{value:"Male (New Cases)"}),e.thTxt("Female",{value:"Female (New Cases)"}),e.thTxt("Male",{value:"Male (All Cases)"}),e.thTxt("Female",{value:"Female (All Cases)"})]]}),created(){this.fields=this.getDateDurationFields()},methods:{async init(t,s){this.reportService=new d,this.reportService.setStartDate(s.start_date),this.reportService.setEndDate(s.end_date),this.period=this.reportService.getDateIntervalPeriod();const a=await this.reportService.getCasesSeen();this.rows=this.buildRows(a)},toDrillColumn(t,s,a,n){const l=t.filter(o=>n?o.name===s&&o.gender===a&&/new patient/i.test(o.type_of_visit):o.name===s&&o.gender===a);if(l.length){const o=[[e.thTxt("Name"),e.thTxt("Age Group"),e.thTxt("Address")]],i=l.map(r=>[e.td("".concat(r.given_name," ").concat(r.family_name)),e.td(r.age_group),e.td("".concat(r.village,", ").concat(r.ta,", ").concat(r.district))]);return e.tdLink(l.length,()=>this.drilldownData("".concat(this.formatGender(a)," patients with ").concat(s),o,i,void 0))}return e.td(0)},buildRows(t){return p.map(s=>[e.td(s,{style:{textAlign:"left"}}),this.toDrillColumn(t,s,"M",!0),this.toDrillColumn(t,s,"F",!0),this.toDrillColumn(t,s,"M",!1),this.toDrillColumn(t,s,"F",!1)])}}});function D(t,s,a,n,l,o){const i=m("report-template"),r=m("ion-page");return _(),C(r,null,{default:w(()=>[v(i,{title:t.title,rows:t.rows,fields:t.fields,columns:t.columns,period:t.period,reportPrefix:"Clinic",onReportConfiguration:t.init},null,8,["title","rows","fields","columns","period","onReportConfiguration"])]),_:1})}const k=h(x,[["render",D]]);export{k as default};
