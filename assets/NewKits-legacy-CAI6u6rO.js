System.register(["./index-legacy-CNrLGT3P.js","./testKits-legacy-DYvG61Vg.js"],(function(e,t){"use strict";var a,o,l,n,r,i,u,s,d,c,p,v,x,f,y,_,h,D,k,I,b,m,E,g,N,C,w,T,S,z,F,L,K,j,A,B,G,q,O,U,V;return{setters:[e=>{a=e.d,o=e.aq,l=e.as,n=e.ar,r=e.I,i=e.k,u=e.j,s=e.i,d=e.l,c=e.m,p=e.f,v=e.al,x=e.h,f=e.D,y=e.C,_=e.K,h=e.M,D=e.N,k=e.S,I=e.dG,b=e.F,m=e.n,E=e.t,g=e.U,N=e.ao,C=e.q,w=e._,T=e.r,S=e.o,z=e.c,F=e.w,L=e.b,K=e.A,j=e.v,A=e.x,B=e.y,G=e.az,q=e.u,O=e.z,U=e.B},e=>{V=e.T}],execute:function(){var t=document.createElement("style");t.textContent=".active[data-v-d37657b0]{border:solid 2px #2196F3}.error[data-v-d37657b0]{border:solid 2px red}\n",document.head.appendChild(t);const H=a({components:{IonGrid:o,IonCol:l,IonRow:n,IonPage:r,IonTitle:i,IonHeader:u,IonToolbar:s,IonContent:d,IonFooter:c,IonButton:p,BarcodeInput:v,IonItem:x,IonLabel:f,IonText:y},setup(){const{kits:e,initKits:t,saveKits:a}=V(),o=_(),l=_(!1),n=h((()=>e.value.some((t=>!t.lotNo&&t.expiryDate||!t.expiryDate&&t.lotNo||e.value.some((e=>e.expiryDateError)))))),r=()=>{e.value.forEach((e=>(e.expiryDate&&new Date(e.expiryDate)<=new Date(k.getSessionDate())?e.expiryDateError="Kit has expired!!":e.expiryDateError="",e)))};function i(t){I({id:"expiry",helpText:e.value[t].kitName+" Expiry Date",type:b.TT_FULL_DATE,defaultValue:()=>e.value[t].expiryDate},(a=>{const o=a?.value||"";e.value[t].expiryDate=o,r()}))}return D((()=>t().then((()=>{r(),l.value=!0})))),{kits:e,activeIndex:o,hasErrors:n,canFinish:l,save:async function(){if(r(),n.value)return E("Some kits have errors! please fix them below");if(!e.value.every((e=>!(e.lotNo&&e.expiryDate)))||await m("Do you want to continue without updating test kits?")){l.value=!1;try{return await a(),g("Testkits updated!"),N.back()}catch(t){console.error(`${t}`),C("General error has occured!")}l.value=!0}},onScan:function(t){e.value[o.value].lotNo=t,e.value[o.value].expiryDate||i(o.value)},updateLot:function(t){I({id:"lot",helpText:e.value[t].kitName+" Lot No.",type:b.TT_TEXT,defaultValue:()=>e.value[t].lotNo},(a=>{const o=a?.value||"";e.value[t].lotNo=o}))},updateExpiryDate:i,clear:async function(){await m("Are you sure you want to clear everything?")&&(e.value.forEach((e=>{e.expiryDate="",e.lotNo="",e.expiryDateError=""})),o.value=null)}}}}),M={class:"his-card"};e("default",w(H,[["render",function(e,t,a,o,l,n){const r=T("ion-title"),i=T("ion-toolbar"),u=T("barcode-input"),s=T("ion-header"),d=T("ion-label"),c=T("ion-item"),p=T("ion-col"),v=T("ion-text"),x=T("ion-row"),f=T("ion-grid"),y=T("ion-content"),_=T("ion-button"),h=T("ion-footer"),D=T("ion-page");return S(),z(D,null,{default:F((()=>[L(s,null,{default:F((()=>[L(i,{color:"light"},{default:F((()=>[L(r,{class:"ion-text-center his-md-text"},{default:F((()=>[K("b",null,j(e.kits[e.activeIndex]?.kitName||"-"),1)])),_:1})])),_:1}),L(i,null,{default:F((()=>[L(u,{style:{margin:"0px auto",width:"90%"},onOnScan:e.onScan},null,8,["onOnScan"])])),_:1})])),_:1}),L(y,null,{default:F((()=>[L(f,null,{default:F((()=>[(S(!0),A(U,null,B(e.kits,((t,a)=>(S(),z(x,{onClick:()=>e.activeIndex=a,class:G(e.activeIndex===a?"his-card active":""),key:a},{default:F((()=>[L(p,{size:"4"},{default:F((()=>[K("div",M,[L(c,{lines:"none"},{default:F((()=>[L(d,null,{default:F((()=>[q(" Kit name ")])),_:1}),L(d,{slot:"end"},{default:F((()=>[K("b",null,j(t.kitName),1)])),_:2},1024)])),_:2},1024)])])),_:2},1024),L(p,{size:"4"},{default:F((()=>[K("div",{class:G(["his-card",t.expiryDate&&!t.lotNo?"error":""])},[L(c,{onClick:t=>e.updateLot(a),lines:"none"},{default:F((()=>[L(d,null,{default:F((()=>[q(" Lot No. ")])),_:1}),L(d,{slot:"end"},{default:F((()=>[K("b",null,j(t.lotNo),1)])),_:2},1024)])),_:2},1032,["onClick"])],2)])),_:2},1024),L(p,{size:"4"},{default:F((()=>[K("div",{class:G(["his-card",!t.expiryDate&&t.lotNo?"error":""])},[L(c,{onClick:t=>e.updateExpiryDate(a),lines:"none"},{default:F((()=>[L(d,null,{default:F((()=>[q(" Expiry Date ")])),_:1}),L(d,{color:t.expiryDateError?"danger":"",slot:"end"},{default:F((()=>[K("b",null,j(t.expiryDate),1)])),_:2},1032,["color"])])),_:2},1032,["onClick"]),t.expiryDateError?(S(),z(v,{key:0,color:"danger",class:"ion-text-center"},{default:F((()=>[q(j(t.expiryDateError),1)])),_:2},1024)):O("",!0)],2)])),_:2},1024)])),_:2},1032,["onClick","class"])))),128))])),_:1})])),_:1}),L(h,null,{default:F((()=>[L(i,{color:"light"},{default:F((()=>[L(_,{onClick:e.clear,slot:"end",color:"warning",size:"large"},{default:F((()=>[q(" Clear ")])),_:1},8,["onClick"]),L(_,{onClick:e.save,disabled:!e.canFinish||e.hasErrors,slot:"end",color:"success",size:"large"},{default:F((()=>[q(" Finish ")])),_:1},8,["onClick","disabled"])])),_:1})])),_:1})])),_:1})}],["__scopeId","data-v-d37657b0"]]))}}}));
