System.register(["./index-legacy-Ck8hVlzC.js","./TableView-legacy-qV2ZlJHi.js","./ReportDateSelectionPrompt-legacy-C6DFDcqK.js","./clinic_report_service-legacy-rik2TDq3.js","./fuse-legacy-CQoBB3MK.js","./HisKeyboard-legacy-rJko9SJC.js"],(function(e,n){"use strict";var a,t,o,r,l,i,s,c,g,u,d,p,m,f,_,b,h,D,v,y;return{setters:[e=>{a=e.d,t=e.I,o=e.J,r=e.bR,l=e._,i=e.r,s=e.o,c=e.c,g=e.w,u=e.b,d=e.cm,p=e.K,m=e.N,f=e.af,_=e.O,b=e.t,h=e.q},e=>{D=e.v},e=>{v=e.D},e=>{y=e.C},null,null],execute:function(){const n=a({components:{v2Datatable:D,IonPage:t},props:{title:String,patients:Array,onFinish:Function},setup(){const e=o();return{ITEMS_PER_PAGE:20,columns:[[{label:"ARV Number",ref:"arv_number"},{label:"Gender",ref:"gender",value:e=>r(e.gender)},{label:"Systolic/Diastolic",ref:"diastolic",value:e=>`${e.systolic}/${e.diastolic}`},{label:"Action",ref:"patient_id",exportable:!1,tdClick:({data:n})=>e.push({path:`/patient/dashboard/${n.patient_id}`}),value:()=>"View client"}]]}}}),P=l(n,[["render",function(e,n,a,t,o,r){const l=i("v2Datatable"),d=i("ion-page");return s(),c(d,null,{default:g((()=>[u(l,{title:e.title,columnData:e.patients,columns:e.columns,"on-finish":e.onFinish,"icon-url":"/assets/images/folder.png",rowsPerPage:e.ITEMS_PER_PAGE},null,8,["title","columnData","columns","on-finish","rowsPerPage"])])),_:1})}]]),w=a({components:{IonPage:t,IonLoading:d,v2Datatable:D},setup(){const e=f("reports.png"),n=p([]),a=p(""),t=p(!1),o=new y,r=(e,n)=>({label:e,ref:n,toValue:e=>e.length,tdClick:e=>i(`${e.column.label}`,e.refData)}),l=[[{label:"#",ref:"index"},{label:"Age group",ref:"age_group"},{label:"Gender",ref:"gender"},r("Due for BP screening","due_for_screening"),r("Screened for HP","screened"),r("Normal <140/<90","normal_reading"),r("Mild 140-159/90-99","mild_reading"),r("Moderate 160-180/100-110","moderate_reading"),r("Severe >180/>110","severe_reading"),r("Hydrochlorothiazide 25mg","hydrochlorothiazide_25mg"),r("Amlodipine 5mg","amlodipine_5mg"),r("Amlodipine 10 mg","amlodipine_10mg"),r("Captopril","captopril"),r("Enalapril 5 mg","enalapril_5mg"),r("Enalapril 10mg","enalapril_10mg"),r("Atenolol 50mg","atenolol_50mg"),r("Atenolol 100mg","atenolol_100mg"),r("Nifedipine","nifedipine"),r("Total (regimen)","total_regimen")]],i=async(e,n)=>{n.length&&(await _.create({component:P,backdropDismiss:!1,cssClass:"large-modal",componentProps:{title:e,subtitle:a,patients:n,onFinish:()=>_.getTop().then((e=>e&&_.dismiss()))}})).present()},s=async()=>{if(!o.startDate||!o.endDate)return b("Start date and end date required!");t.value=!0,n.value=[];try{const e=await o.getHypertensionReport(),a=Object.keys(e).reduce(((n,a)=>(n.M.push({age_group:a,gender:"Male",...e[a].M}),n.F.push({age_group:a,gender:"Female",...e[a].F}),n)),{F:[],M:[]});n.value=a.F.concat(a.M).map(((e,n)=>({index:n+1,...e})))}catch(e){h("Unable to generate report!"),console.error(e)}t.value=!1},c=()=>v({onFinish:(e,n,t)=>{a.value=`Period (${t})`,o.startDate=e,o.endDate=n,s()}});return m((()=>c())),{logo:e,reportData:n,isLoading:t,configure:c,generate:s,columns:l,period:a}}});e("default",l(w,[["render",function(e,n,a,t,o,r){const l=i("ion-loading"),d=i("v2Datatable"),p=i("ion-page");return s(),c(p,null,{default:g((()=>[u(l,{"is-open":e.isLoading,message:"Please wait..."},null,8,["is-open"]),u(d,{title:"Hypertension Report","icon-url":e.logo,subtitle:e.period,columns:e.columns,columnData:e.reportData,rowsPerPage:30,onConfigure:e.configure,onRefresh:()=>e.generate(),"report-prefix":"Clinic"},null,8,["icon-url","subtitle","columns","columnData","onConfigure","onRefresh"])])),_:1})}]]))}}}));
