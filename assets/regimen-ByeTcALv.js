import{d as f,r as u,t as g,u as _,v,w as b,x as D,y as c,co as R,d8 as d,c_ as C,a5 as w,aK as V,O as h}from"./index-CyYd6aWW.js";import{v as x}from"./TableView-KUf7rG9H.js";import{a as O}from"./regimen_report_service-COTLMePC.js";import{a as y,w as A}from"./v2utils-Ce6mchJu.js";const j=f({__name:"regimen",setup(B){const m=V("reports.png"),r=u([]),o=u(""),t=new O,p=[[y(),{label:"Gender",ref:"gender",toValue:e=>R(e)},{label:"DOB",ref:"birthdate",toValue:e=>d(e)},{label:"Curr.Reg",ref:"current_regimen",defaultValue:"N/A"},{label:"ARVs",ref:"medication",toValue:e=>e.map(a=>"".concat(a.medication," (").concat(a.quantity,")")).join(", ")},{label:"Curr.reg dispensed",ref:"last_dispensation_date",toValue:e=>d(e)}]],s=()=>A(async()=>{if(!(t.startDate&&t.endDate))return h("Start date and end date required!");r.value=[];const e=await t.getRegimenReport();r.value=Object.values(e).map(a=>({...a,last_dispensation_date:a.medication.reduce((i,n)=>n.start_date,"")}))}),l=()=>C({onFinish:(e,a,i,n)=>{n&&t.setOccupation(n),o.value="".concat(i),t.startDate=e,t.endDate=a,s()}});return g(()=>!r.value.length&&l()),(e,a)=>(_(),v(c(w),null,{default:b(()=>[D(x,{"default-sort-order":"asc","default-sorted-column":"arv_number","icon-url":c(m),title:"Clinic Regimen Report","report-prefix":"Clinic",subtitle:o.value,columns:p,columnData:r.value,rowsPerPage:50,onConfigure:l,onRefresh:s},null,8,["icon-url","subtitle","columnData"])]),_:1}))}});export{j as default};
