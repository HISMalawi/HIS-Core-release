import{d as p,I as a,L as o,cn as r,V as l,H as m,ch as d,_ as c,r as i,o as f,c as h,w as u,b}from"./index-BPESSmpp.js";import{_}from"./ReportMixin.vue_vue_type_script_lang-B2wwlsIV.js";import{R as x}from"./BaseTableReport-C1xhjHE9.js";import{F as g}from"./dynamic-import-helper-Bsjrd6Ro.js";import"./MultiFieldDateHelper-9oePsxGD.js";import"./KbLayouts-VRA-vjeH.js";import"./HisKbConfigurations-GhFQZvlg.js";import"./BasicReportTemplate-BGLF91Mz.js";import"./Export-Cn7OK4o3.js";import"./SIngleTouchField-Bfe7QxF5.js";import"./Pagination-Dz5sIsSZ.js";import"./HisStandardForm-CxcKR3FF.js";import"./TouchScreenForm-BjDI66hA.js";import"./ToolbarMediumCard-DnRdVW_r.js";import"./Transformers-BPPLlH12.js";import"./ViewPort-DixuDTZA.js";const w=p({mixins:[_],components:{ReportTemplate:x,IonPage:a},data:()=>({title:"Booked clients",date:"",rows:[],appointments:{},columns:[[o.thTxt("ARV#"),o.thTxt("First name",{csvExportable:!1,pdfExportable:!0}),o.thTxt("Last name",{csvExportable:!1,pdfExportable:!0}),o.thTxt("Gender"),o.thTxt("birthdate"),o.thTxt("Outcome"),o.thTxt("Current Address",{csvExportable:!1,pdfExportable:!0}),o.thTxt("Actions",{csvExportable:!1,pdfExportable:!1})]]}),created(){this.report=new r,this.fields=[{id:"date",helpText:"Select date",type:g.TT_DATE_PICKER,defaultValue:()=>r.getSessionDate(),validation:t=>l.required(t),onValue:async t=>(this.report.setStartDate(t),this.appointments[t]||(this.appointments[t]=await this.report.getBookedAppointments(t)||[]),!0),config:{infoItems:t=>{var e;return[{label:"Appointments",value:((e=this.appointments[t])==null?void 0:e.length)||0}]}}}]},methods:{onPeriod(t){this.rows=[],this.period=m.toStandardHisDisplayFormat(t.date),this.setRows(this.appointments[t.date])},setRows(t){d(t).asc(e=>e.given_name).forEach(e=>{this.rows.push([this.tdARV(e.arv_number||"N/A"),o.td(e.given_name),o.td(e.family_name),o.td(this.formatGender(e.gender)),o.tdDate(e.birthdate),o.td(e.outcome),o.td("District: <br/> <b>".concat(e.district,"</b><br/>\n                        Village: <br/> <b>").concat(e.village,"</b><br/>\n                        Land-mark: <br/> <b>").concat(e.land_mark,"</b><br/>\n                        Cellphone: <br/> <b>").concat(e.cell_phone,"</b>")),o.tdBtn("Select",()=>this.confirmPatient(e.person_id))])})}}});function T(t,e,v,E,C,R){const s=i("report-template"),n=i("ion-page");return f(),h(n,null,{default:u(()=>[b(s,{title:t.title,period:t.period,rows:t.rows,fields:t.fields,columns:t.columns,showtitleOnly:!0,config:{showIndex:!1},encryptPDF:!0,reportPrefix:"Clinic",onReportConfiguration:t.onPeriod},null,8,["title","period","rows","fields","columns","onReportConfiguration"])]),_:1})}const q=c(w,[["render",T]]);export{q as default};
