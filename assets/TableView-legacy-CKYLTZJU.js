System.register(["./index-legacy-BoFMGMh4.js","./Export-legacy-CzjitY0y.js"],(function(e,t){"use strict";var n,l,o,a,c,r,s,i,u,d,p,m,f,h,y,b,k,v,C,g,w,x,_,I,R,D,E,S,T,O,$,A,F,j,z,H,M,U,V,B,P;return{setters:[e=>{n=e.d,l=e.cb,o=e.I,a=e.l,c=e.k,r=e.a4,s=e.a5,i=e.ah,u=e.aC,d=e.a7,p=e.m,m=e.r,f=e.c,h=e.aR,y=e.bD,b=e.dX,k=e.ce,v=e.cf,C=e.cg,g=e.ch,w=e.ci,x=e.aq,_=e.aZ,I=e.S,R=e.B,D=e.ak,E=e.ap,S=e.h,T=e.b,O=e.e,$=e.w,A=e.j,F=e.a6,j=e.g,z=e.t,H=e.a,M=e.a9,U=e.aa,V=e.bb},e=>{B=e.b,P=e.a}],execute:function(){var t=b.createElement("style");t.textContent="th[data-v-663672d2],td[data-v-663672d2]{width:4%;border-collapse:collapse;text-align:center}td[data-v-663672d2]{border-bottom:1px solid rgb(165,165,165);padding:.6em;font-weight:500;font-size:.8em}.stick-report-header[data-v-663672d2]{background:#fff;border-bottom:2px solid #ccc;position:sticky;top:0;z-index:1000}tr[data-v-663672d2]:nth-child(2n){background-color:#f0f0f0}.clickable-cell[data-v-663672d2]{color:#0645ad;font-weight:600;font-size:1em}\n/*$vite$:1*/",b.head.appendChild(t);const Y=n({components:{IonToolbar:p,IonItem:d,IonIcon:u,IonLabel:i,IonTitle:s,IonHeader:r,IonButton:c,IonFooter:a,IonContent:o,IonButtons:l},props:{title:{type:String,default:"Report"},subtitle:{type:String},columns:{type:Object,required:!0},columnData:{type:Array,default:()=>[]},onFinish:{type:Function},onRefresh:{type:Function},onConfigure:{type:Function},csvQuarter:{type:String},headers:{type:Array,default:()=>[]},order:{type:Array,default:()=>[]},csvSpacing:{type:Number},csvSubHeader:{type:Array,default:()=>[]}},setup(e){const t=x(),n=m([]),l=m(""),o=m("desc"),a=f((()=>e.columns.slice(0,2))),c=f((()=>{const t=[];return e.columnData[0]?.forEach((n=>{const l=e.columns[1].map((e=>{let t="";try{t=_.isEmpty(n)?"...":"function"==typeof e.value?e.value(n):n[e.ref]||""}catch(l){t="_ERROR_",console.error(l)}return{column:e,data:n,value:t,[e.ref||"nada"]:t}}));t.push({row:l,data:n,searchIndex:[...l,l.map((e=>e.value)).join(" ")]})})),t})),r=f((()=>{const t=[];return e.columnData[1]?.forEach((n=>{const l=e.columns[2].map((e=>{let t="";try{t=_.isEmpty(n)?"...":"function"==typeof e.value?e.value(n):n[e.ref]||""}catch(l){t="_ERROR_",console.error(l)}return{column:e,data:n,value:t,[e.ref||"nada"]:t}}));t.push({row:l,data:n,searchIndex:[...l,l.map((e=>e.value)).join(" ")]})})),t})),s=f((()=>{const t=[];return e.columnData[2]?.forEach((n=>{const l=e.columns[3].map((e=>{let t="";try{t=_.isEmpty(n)?"...":"function"==typeof e.value?e.value(n):n[e.ref]||""}catch(l){t="_ERROR_",console.error(l)}return{column:e,data:n,value:t,[e.ref||"nada"]:t}}));t.push({row:l,data:n,searchIndex:[...l,l.map((e=>e.value)).join(" ")]})})),t})),i=f((()=>{const t=[];return e.columnData[3]?.forEach(((n,l)=>{const o=e.columns[8+l].map((e=>{let t="";try{t=_.isEmpty(n)?"...":"function"==typeof e.value?e.value(n):n[e.ref]||""}catch(l){t="_ERROR_",console.error(l)}return{column:e,data:n,value:t,[e.ref||"nada"]:t}}));t.push({row:o,data:n,searchIndex:[...o,o.map((e=>e.value)).join(" ")]})})),t})),u=t=>{t.forEach((t=>{const l=e.columns.reduce(((e,t)=>e.concat(t)),[]).filter((e=>e.value||e.ref)).map((e=>{let n="";try{n=_.isEmpty(t)?"...":"function"==typeof e.value?e.value(t):t[e.ref]||""}catch(l){n="_ERROR_",console.error(l)}return{column:e,data:t,value:n,[e.ref||"nada"]:n}}));n.value.push({row:l,data:t,searchIndex:[...l,l.map((e=>e.value)).join(" ")]})}))};return h((()=>e.columnData),(e=>{n.value=[],Array.isArray(e)&&u(e)}),{immediate:!0,deep:!0}),{sortColumn:e=>{l.value=e,o.value="asc"===o.value?"desc":"asc"},onClickTablecell:e=>{try{return void("function"==typeof e.column?.tdClick&&e.column?.tdClick(e))}catch(t){console.error(t)}},toPDF:()=>{const e=window?.document?.getElementById("report-content");B(`\n                <html>\n                    <head> \n                        <style> \n                        table {\n                            border-collapse: collapse;\n                        }\n                        th, td {\n                            width: 4%;\n                            text-align: center;\n                            border: solid 1px black;\n                        }\n                        td {\n                            border-bottom: 1px solid rgb(165, 165, 165);\n                            padding: 0.6em;\n                            font-weight: 500;\n                            font-size: .8em;\n                        }\n                        </style>    \n                    </head>\n                <body> \n                 ${e.innerHTML}    \n                </body>\n                </html>\n            `)},toCSV:()=>{const t=e.columnData.map((t=>t.map((t=>e.order.map((e=>{const n=t[e];return Array.isArray(n)?n.length:n})).filter((e=>void 0!==e)))).filter((e=>e.length>0)))).filter((e=>e.length>0)),n=e.columnData[3].map((e=>{const[t]=Object.keys(e),n=e[t],l=[t,Array.isArray(n)?n.length:0];for(let o=0;o<5;o++)l.push("");return l})),l=t.flat();n.forEach((e=>{l.push(e)}));const o=`${I.getLocationName()||"Unknown site"}-${e.title}-${e.subtitle}-${I.getSessionDate()}`;P([e.headers],[...(()=>{const t=[...l],n=e.csvSubHeader.length;return[0,9,18,27].forEach(((l,o)=>{const a=e.csvSubHeader[o%n];t.splice(l,0,[...a])})),t})(),[`Date Created: ${R().format("DD/MMM/YYYY HH:MM:ss")}`],[`Quarter: ${e.csvQuarter||e.subtitle}`],[`HIS-Core Version: ${I.getCoreVersion()}`],[`API Version: ${I.getApiVersion()}`],[`Site UUID: ${I.getSiteUUID()}`],[`Generated by: ${I.getUserName()}`]],o)},finish:()=>{"function"==typeof e.onFinish?e.onFinish():t.push("/")},columnsMinusOne:a,sync:w,search:g,close:C,arrowUp:v,arrowDown:k,document:b,calendar:y,sortOrder:o,sectionOne:c,sectionTwo:r,sectionThree:s,sectionTotals:i,columnSorted:l}}}),L={key:0},N={class:"his-sm-text"},Q={id:"report-content"},q={class:"art-report-theme"},G={class:"stick-report-header"},X=["colspan","rowspan","onClick"],Z={colspan:7},J={class:"his-sm-text"},K=["onClick"],W={class:"his-sm-text"},ee={colspan:7},te={class:"his-sm-text"},ne=["onClick"],le={class:"his-sm-text"},oe={colspan:7},ae={class:"his-sm-text"},ce=["onClick"],re={class:"his-sm-text"},se={colspan:7},ie={class:"his-sm-text"},ue={colspan:"2"},de={class:"his-sm-text"},pe={colspan:"6"},me=["onClick"];e("v",D(Y,[["render",function(e,t,n,l,o,a){const c=E("ion-title"),r=E("ion-icon"),s=E("ion-button"),i=E("ion-buttons"),u=E("ion-toolbar"),d=E("ion-header"),p=E("ion-label"),m=E("ion-item"),f=E("ion-content"),h=E("ion-footer");return T(),S(M,null,[O(d,null,{default:$((()=>[O(u,null,{default:$((()=>[O(c,{class:"his-md-text"},{default:$((()=>[A(z(e.title)+" ",1),e.subtitle?(T(),S("br",L)):F("",!0),j("span",N,z(e.subtitle),1)])),_:1}),O(i,{slot:"end"},{default:$((()=>["function"==typeof e.onConfigure?(T(),H(s,{key:0,onClick:e.onConfigure},{default:$((()=>[O(r,{size:"large",icon:e.calendar},null,8,["icon"])])),_:1},8,["onClick"])):F("",!0),"function"==typeof e.onRefresh?(T(),H(s,{key:1,onClick:e.onRefresh,color:"success",size:"large"},{default:$((()=>[O(r,{size:"large",icon:e.sync},null,8,["icon"])])),_:1},8,["onClick"])):F("",!0)])),_:1})])),_:1})])),_:1}),O(f,{"scroll-y":"","scroll-x":""},{default:$((()=>[j("div",Q,[j("table",q,[j("thead",G,[(T(!0),S(M,null,U(e.columnsMinusOne,((t,n)=>(T(),S("tr",{key:n},[(T(!0),S(M,null,U(t,((t,l)=>(T(),S("th",{key:l,colspan:t?.span?.thColspan||1,rowspan:t?.span?.thRowspan||1,onClick:n=>e.sortColumn(t.ref)},[O(m,{lines:"none"},{default:$((()=>[e.columnSorted&&e.columnSorted===t.ref?(T(),H(r,{key:0,icon:"asc"===e.sortOrder?e.arrowUp:e.arrowDown},null,8,["icon"])):F("",!0),n<e.columns.length-1?(T(),H(p,{key:1,class:"ion-text-center"},{default:$((()=>[j("b",null,z(t.label),1)])),_:2},1024)):F("",!0)])),_:2},1024)],8,X)))),128))])))),128))]),j("tbody",null,[j("tr",null,[j("td",Z,[j("span",J,z(e.columns[4][0].label),1)])]),(T(!0),S(M,null,U(e.sectionOne,((t,n)=>(T(),S("tr",{key:n},[(T(!0),S(M,null,U(t.row||[],((t,n)=>(T(),S("td",{key:n,onClick:()=>e.onClickTablecell(t),class:V({"clickable-cell":t?.column?.tdClick})},[j("b",W,z(t.value),1)],10,K)))),128))])))),128)),j("tr",null,[j("td",ee,[j("span",te,z(e.columns[5][0].label),1)])]),(T(!0),S(M,null,U(e.sectionTwo,((t,n)=>(T(),S("tr",{key:n},[(T(!0),S(M,null,U(t.row,((t,n)=>(T(),S("td",{key:n,onClick:()=>e.onClickTablecell(t),class:V({"clickable-cell":t?.column?.tdClick})},[j("span",le,z(t.value),1)],10,ne)))),128))])))),128)),j("tr",null,[j("td",oe,[j("span",ae,z(e.columns[6][0].label),1)])]),(T(!0),S(M,null,U(e.sectionThree,((t,n)=>(T(),S("tr",{key:n},[(T(!0),S(M,null,U(t.row,((t,n)=>(T(),S("td",{key:n,onClick:()=>e.onClickTablecell(t),class:V({"clickable-cell":t?.column?.tdClick})},[j("span",re,z(t.value),1)],10,ce)))),128))])))),128)),j("tr",null,[j("td",se,[j("span",ie,z(e.columns[7][0].label),1)])]),(T(!0),S(M,null,U(e.sectionTotals,((t,n)=>(T(),S("tr",{key:n},[(T(!0),S(M,null,U(t.row,((t,n)=>(T(),S(M,{key:n},[j("td",ue,[j("span",de,z(t.column.label),1)]),j("td",pe,[j("span",{class:V(["his-sm-text",{"clickable-cell":t?.column?.tdClick}]),onClick:()=>e.onClickTablecell(t)},z(t.value),11,me)])],64)))),128))])))),128))])])])])),_:1}),O(h,null,{default:$((()=>[O(u,{color:"dark"},{default:$((()=>[O(s,{onClick:t[0]||(t[0]=t=>e.toCSV()),size:"large"},{default:$((()=>[...t[2]||(t[2]=[A(" CSV ",-1)])])),_:1}),O(s,{onClick:t[1]||(t[1]=t=>e.toPDF()),size:"large"},{default:$((()=>[...t[3]||(t[3]=[A(" PDF ",-1)])])),_:1}),O(s,{onClick:e.finish,color:"success",size:"large",slot:"end"},{default:$((()=>[...t[4]||(t[4]=[A(" Finish ",-1)])])),_:1},8,["onClick"])])),_:1})])),_:1})],64)}],["__scopeId","data-v-663672d2"]]))}}}));
