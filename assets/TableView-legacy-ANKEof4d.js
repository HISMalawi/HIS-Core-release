System.register(["./index-legacy-BiNmSRfH.js","./Export-legacy-BgkRP-kP.js"],(function(e,t){"use strict";var n,o,a,l,r,c,s,i,u,d,f,p,b,m,y,h,g,k,v,C,w,I,_,S,x,D,$,R,F,O,z,A,E,j,M,U,V,B,H,N,T;return{setters:[e=>{n=e.d,o=e.cb,a=e.I,l=e.l,r=e.k,c=e.a4,s=e.a5,i=e.ah,u=e.aC,d=e.a7,f=e.m,p=e.r,b=e.c,m=e.aR,y=e.bD,h=e.dX,g=e.ce,k=e.cf,v=e.cg,C=e.ch,w=e.ci,I=e.aq,_=e.aZ,S=e.S,x=e.B,D=e.ak,$=e.ap,R=e.h,F=e.b,O=e.e,z=e.w,A=e.j,E=e.a6,j=e.g,M=e.t,U=e.a,V=e.a9,B=e.aa,H=e.bb},e=>{N=e.b,T=e.a}],execute:function(){var t=h.createElement("style");t.textContent="th[data-v-f1278bbd],td[data-v-f1278bbd]{width:4%;border-collapse:collapse;text-align:center}td[data-v-f1278bbd]{border-bottom:1px solid rgb(165,165,165);padding:.6em;font-weight:500;font-size:.8em}.stick-report-header[data-v-f1278bbd]{background:#fff;border-bottom:2px solid #ccc;position:sticky;top:0;z-index:1000}tr[data-v-f1278bbd]:nth-child(2n){background-color:#f0f0f0}.clickable-cell[data-v-f1278bbd]{color:#0645ad;font-weight:600;font-size:1em}\n/*$vite$:1*/",h.head.appendChild(t);const P=n({components:{IonToolbar:f,IonItem:d,IonIcon:u,IonLabel:i,IonTitle:s,IonHeader:c,IonButton:r,IonFooter:l,IonContent:a,IonButtons:o},props:{title:{type:String,default:"Report"},subtitle:{type:String},columns:{type:Object,required:!0},columnData:{type:Array,default:()=>[]},onFinish:{type:Function},onRefresh:{type:Function},onConfigure:{type:Function},csvQuarter:{type:String},headers:{type:Array,default:()=>[]},order:{type:Array,default:()=>[]},csvSpacing:{type:Number},csvSubHeader:{type:Array,default:()=>[]}},setup(e){const t=I(),n=p([]),o=p(""),a=p("desc"),l=b((()=>e.columns.slice(0,2))),r=b((()=>{const t=[];return e.columnData?.forEach(((n,o)=>{const a=e.columns[0].map((e=>{let t="";try{t=_.isEmpty(n)?"...":"function"==typeof e.value?e.value(n,o):n[e.ref]||""}catch(a){t="_ERROR_",console.error(a)}return{column:e,data:n,value:t,[e.ref||"nada"]:t}}));t.push({row:a,data:n,searchIndex:[...a,a.map((e=>e.value)).join(" ")]})})),t})),c=t=>{t.forEach(((t,o)=>{const a=e.columns.reduce(((e,t)=>e.concat(t)),[]).filter((e=>e.value||e.ref)).map((e=>{let n="";try{n=_.isEmpty(t)?"...":"function"==typeof e.value?e.value(t,o):t[e.ref]||""}catch(a){n="_ERROR_",console.error(a)}return{column:e,data:t,value:n,[e.ref||"nada"]:n}}));n.value.push({row:a,data:t,searchIndex:[...a,a.map((e=>e.value)).join(" ")]})}))};return m((()=>e.columnData),(e=>{n.value=[],Array.isArray(e)&&c(e)}),{immediate:!0,deep:!0}),{sortColumn:e=>{o.value=e,a.value="asc"===a.value?"desc":"asc"},onClickTablecell:e=>{try{return void("function"==typeof e.column?.tdClick&&e.column?.tdClick(e))}catch(t){console.error(t)}},toPDF:()=>{const e=window?.document?.getElementById("report-content");N(`\n                <html>\n                    <head> \n                        <style> \n                        table {\n                            border-collapse: collapse;\n                        }\n                        th, td {\n                            width: 4%;\n                            text-align: center;\n                            border: solid 1px black;\n                        }\n                        td {\n                            border-bottom: 1px solid rgb(165, 165, 165);\n                            padding: 0.6em;\n                            font-weight: 500;\n                            font-size: .8em;\n                        }\n                        </style>    \n                    </head>\n                <body> \n                 ${e.innerHTML}    \n                </body>\n                </html>\n            `)},toCSV:()=>{const t=(e=>{const t=(e=>e.map((e=>Object.values(e).map((e=>Array.isArray(e)?e.length:e)))))(JSON.parse(JSON.stringify(e))),n=(e=>e.map((e=>Object.values(e))))(t);return n})(e.columnData),n=`${S.getLocationName()||"Unknown site"}-${e.title}-${e.subtitle}-${S.getSessionDate()}`;T([e.headers],[...t,[`Date Created: ${x().format("DD/MMM/YYYY HH:MM:ss")}`],[`Quarter: ${e.csvQuarter||e.subtitle}`],[`HIS-Core Version: ${S.getCoreVersion()}`],[`API Version: ${S.getApiVersion()}`],[`Site UUID: ${S.getSiteUUID()}`],[`Generated by: ${S.getUserName()}`]],n)},finish:()=>{"function"==typeof e.onFinish?e.onFinish():t.push("/")},columnsMinusOne:l,sync:w,search:C,close:v,arrowUp:k,arrowDown:g,document:h,calendar:y,sortOrder:a,reportBody:r,columnSorted:o}}}),Y={key:0},L={class:"his-sm-text"},Q={id:"report-content"},q={class:"art-report-theme"},J={class:"stick-report-header"},G=["colspan","rowspan","onClick"],X=["onClick"],Z={class:"his-sm-text"};e("v",D(P,[["render",function(e,t,n,o,a,l){const r=$("ion-title"),c=$("ion-icon"),s=$("ion-button"),i=$("ion-buttons"),u=$("ion-toolbar"),d=$("ion-header"),f=$("ion-label"),p=$("ion-item"),b=$("ion-content"),m=$("ion-footer");return F(),R(V,null,[O(d,null,{default:z((()=>[O(u,null,{default:z((()=>[O(r,{class:"his-md-text"},{default:z((()=>[A(M(e.title)+" ",1),e.subtitle?(F(),R("br",Y)):E("",!0),j("span",L,M(e.subtitle),1)])),_:1}),O(i,{slot:"end"},{default:z((()=>["function"==typeof e.onConfigure?(F(),U(s,{key:0,onClick:e.onConfigure},{default:z((()=>[O(c,{size:"large",icon:e.calendar},null,8,["icon"])])),_:1},8,["onClick"])):E("",!0),"function"==typeof e.onRefresh?(F(),U(s,{key:1,onClick:e.onRefresh,color:"success",size:"large"},{default:z((()=>[O(c,{size:"large",icon:e.sync},null,8,["icon"])])),_:1},8,["onClick"])):E("",!0)])),_:1})])),_:1})])),_:1}),O(b,{"scroll-y":"","scroll-x":""},{default:z((()=>[j("div",Q,[j("table",q,[j("thead",J,[(F(!0),R(V,null,B(e.columnsMinusOne,((t,n)=>(F(),R("tr",{key:n},[(F(!0),R(V,null,B(t,((t,n)=>(F(),R("th",{key:n,colspan:t?.span?.thColspan||1,rowspan:t?.span?.thRowspan||1,onClick:n=>e.sortColumn(t.ref)},[O(p,{lines:"none"},{default:z((()=>[e.columnSorted&&e.columnSorted===t.ref?(F(),U(c,{key:0,icon:"asc"===e.sortOrder?e.arrowUp:e.arrowDown},null,8,["icon"])):E("",!0),O(f,{class:"ion-text-center"},{default:z((()=>[j("b",null,M(t.label),1)])),_:2},1024)])),_:2},1024)],8,G)))),128))])))),128))]),j("tbody",null,[(F(!0),R(V,null,B(e.reportBody,((t,n)=>(F(),R("tr",{key:n},[(F(!0),R(V,null,B(t.row||[],((t,n)=>(F(),R("td",{key:n,onClick:()=>e.onClickTablecell(t),class:H({"clickable-cell":t?.column?.tdClick})},[j("b",Z,M(t.value),1)],10,X)))),128))])))),128))])])])])),_:1}),O(m,null,{default:z((()=>[O(u,{color:"dark"},{default:z((()=>[O(s,{onClick:t[0]||(t[0]=t=>e.toCSV()),size:"large"},{default:z((()=>[...t[2]||(t[2]=[A(" CSV ",-1)])])),_:1}),O(s,{onClick:t[1]||(t[1]=t=>e.toPDF()),size:"large"},{default:z((()=>[...t[3]||(t[3]=[A(" PDF ",-1)])])),_:1}),O(s,{onClick:e.finish,color:"success",size:"large",slot:"end"},{default:z((()=>[...t[4]||(t[4]=[A(" Finish ",-1)])])),_:1},8,["onClick"])])),_:1})])),_:1})],64)}],["__scopeId","data-v-f1278bbd"]]))}}}));
