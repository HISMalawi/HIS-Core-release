System.register(["./dynamic-import-helper-legacy-DYK5bIOV.js","./HisStandardForm-legacy-Yzj84zTJ.js","./index-legacy-D1EyWbyq.js","./drug_service-legacy-CUqkuQXl.js","./anc_treatment_service-legacy-Dd7z0XCZ.js","./anc_drug_set-legacy-BmgSTVpD.js","./TouchScreenForm-legacy-Cz0UXr2y.js","./ToolbarMediumCard-legacy-DG4P2wyL.js","./Transformers-legacy-DhNYVLaS.js","./ViewPort-legacy-Dt6qML7b.js","./drug_order_service-legacy-AWvU6H6L.js"],(function(e,a){"use strict";var t,i,r,n,l,s,d,u,o,c,g,m,y,p,v;return{setters:[e=>{t=e.F},e=>{i=e.H},e=>{r=e.d,n=e.I,l=e.T,s=e.t,d=e.V,u=e._,o=e.r,c=e.o,g=e.c,m=e.w},e=>{y=e.D},e=>{p=e.D},e=>{v=e.A},null,null,null,null,null],execute:function(){const a=r({components:{HisStandardForm:i,IonPage:n},data:()=>({hisFormKey:0,fields:[],allDrugs:[],fieldComponent:"",service:{}}),created(){this.fields=this.getFields()},methods:{async onFinish(e,a){try{if(await v.saveDrugSet(a))return l("Drugset saved successfully"),this.$router.back();s("Unable to save drugset")}catch(t){s(`${t}`)}},getFields:()=>[{id:"name",helpText:"Enter drug set name",type:t.TT_TEXT,computedValue:e=>e.value,validation:e=>d.validateSeries([()=>d.required(e),()=>`${e.value}`.match(/^([a-zA-Z_ ]{2,17})'?-?([a-zA-Z_ ]{1,17})$/)?null:["Enter a valid drug set name."]])},{id:"description",helpText:"Drug set description",type:t.TT_TEXT,computedValue:e=>e.value,validation:e=>d.validateSeries([()=>d.required(e),()=>`${e.value}`.match(/^([a-zA-Z_ ]{2,100})'?-?([a-zA-Z_ ]{1,100})$/)?null:["Enter a valid drug set description"]])},{id:"drug_selection",helpText:"Select drugs to add",type:t.TT_ASYNC_MULTI_SELECT,options:async(e,a="")=>(await y.getDrugs({page_size:20,name:a})).map((e=>({label:e.name,value:e.id,other:{drug:e.name,quantity:0,frequency:""}}))),validation:e=>d.required(e)},{id:"drugs",helpText:"Set drugs",type:t.TT_ANC_DRUGSET_INPUT,computedValue:e=>e.map((e=>e.other)),validation:e=>d.validateSeries([()=>d.required(e),()=>e.map((e=>e.other.quantity&&e.other.frequency)).every(Boolean)?null:["Data is not complete"]]),options:e=>e.drug_selection,config:{drugFrequencies:Object.keys(p).map((e=>({label:e,value:e})))}}]}});e("default",u(a,[["render",function(e,a,t,i,r,n){const l=o("his-standard-form"),s=o("ion-page");return c(),g(s,null,{default:m((()=>[(c(),g(l,{key:e.hisFormKey,activeField:e.fieldComponent,skipSummary:!0,fields:e.fields,onOnIndex:a[0]||(a[0]=a=>e.fieldComponent=""),onOnFinish:e.onFinish},null,8,["activeField","fields","onOnFinish"]))])),_:1})}]]))}}}));
