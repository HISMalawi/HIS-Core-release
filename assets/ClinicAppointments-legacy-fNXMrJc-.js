System.register(["./index-legacy-sLIX6Wy9.js","./TableView-legacy-BZrsRpgs.js","./appointment_service-legacy-BXq11FHy.js","./v2utils-legacy-DHHar4G5.js","./Export-legacy-BGgpK2Oo.js","./index-legacy-PkN6GP8O.js"],(function(e,t){"use strict";var a,l,n,r,i,s,u,o,d,c,p,b,m,g,f,v,y,_,$,h,x;return{setters:[e=>{a=e.d,l=e.r,n=e.df,r=e.t,i=e.u,s=e.v,u=e.w,o=e.x,d=e.y,c=e.ce,p=e.cg,b=e.dr,m=e.a9,g=e.aa,f=e.a5,v=e.aK},e=>{y=e.v},e=>{_=e.A},e=>{$=e.a,h=e.c,x=e.w},null,null],execute:function(){e("default",a({__name:"ClinicAppointments",setup(e){const t=l([]),a=l(""),A=new n,D=l({}),V=v("reports.png"),j=[[$(),{label:"First name",ref:"given_name",encrypted:!0},{label:"Last name",ref:"family_name",encrypted:!0},{label:"Gender",ref:"gender",toValue:e=>c(e)},{label:"Birthdate",ref:"birthdate",toValue:e=>`${p(e)}`},{label:"Outcome",ref:"outcome"},{ref:"district",label:"Current Address",encrypted:!0,exportedValue:{dataValue:e=>`\n                ${e.data.district},\n                ${e.data.village},\n                ${e.data.land_mark},\n                ${e.data.cell_phone}\n            `},value:e=>`District: <br/> <b>${e.district}</b><br/>\n            Village: <br/> <b>${e.village}</b><br/>\n            Land-mark: <br/> <b>${e.land_mark}</b><br/>\n            Cellphone: <br/> <b>${e.cell_phone}</b>\n        `},h("person_id","/patients/confirm?person_id=")]],w=()=>x((async()=>{t.value=[],t.value=await A.getBookedAppointments(A.startDate)})),C=()=>{b({id:"date",helpText:"Select date",type:m.TT_DATE_PICKER,defaultValue:()=>n.getSessionDate(),validation:e=>g.required(e),onValue:async e=>(D.value[e]||(D.value[e]=(await _.getDailiyAppointments(e))?.length??0),!0),config:{infoItems:e=>[{label:"Appointments",value:D.value[e]}]}},(e=>{A.setStartDate(e),a.value=`Appointment date: ${p(e)}`,w()}))};return r((()=>!t.value.length&&C())),(e,l)=>(i(),s(d(f),null,{default:u((()=>[o(y,{"default-sort-order":"asc","default-sorted-column":"given_name","icon-url":d(V),title:"Booked clients","report-prefix":"Clinic",subtitle:a.value,columns:j,columnData:t.value,rowsPerPage:50,onConfigure:C,onRefresh:w},null,8,["icon-url","subtitle","columnData"])])),_:1}))}}))}}}));
