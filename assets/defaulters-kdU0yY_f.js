import{D as n}from"./defaulters_report_service-CqjYVKl4.js";import{_ as p}from"./ReportMixin.vue_vue_type_script_lang-KTz0lrel.js";import{R as l}from"./TableReportTemplate-CgWmLoQk.js";import{d as m,I as d,L as e,_ as f,r as s,o as u,c,w as h,b as _}from"./index-CZt4BSQf.js";import"./MultiFieldDateHelper-BeQr4Gt4.js";import"./dynamic-import-helper-Bsjrd6Ro.js";import"./KbLayouts-VRA-vjeH.js";import"./HisKbConfigurations-GhFQZvlg.js";import"./BasicReportTemplate-B2bgDnCL.js";import"./Export-BOa-_uep.js";import"./SIngleTouchField-CGdD-Bed.js";import"./Pagination-CNLqe0_D.js";import"./HisStandardForm-B93s5uaV.js";import"./TouchScreenForm-JVgeEWDh.js";import"./ToolbarMediumCard-CyRn44E2.js";import"./Transformers-BPPLlH12.js";import"./ViewPort-DiinNO5i.js";import"./ReportErrors-DXzOSZA6.js";const b=m({mixins:[p],components:{ReportTemplate:l,IonPage:d},data:()=>({title:"Defaulters report",rows:[],columns:[[e.thTxt("ARV#"),e.thTxt("First name",{csvExportable:!1,pdfExportable:!0}),e.thTxt("Last name",{csvExportable:!1,pdfExportable:!0}),e.thTxt("Gender"),e.thDate("Birthdate"),e.thDate("Date defaulted"),e.thTxt("Address",{csvExportable:!1,pdfExportable:!0})]]}),created(){this.fields=this.getDateDurationFields(!1,!1,5,null)},methods:{async onPeriod(r,t){this.rows=[],this.report=new n,this.report.setOccupation(t.occupation),this.report.setStartDate(t.start_date),this.report.setEndDate(t.end_date),this.period=this.report.getDateIntervalPeriod();const o=await this.report.getDefaulters();this.setRows(o),this.title="PEPFAR Defaulters report <b>(".concat(o.length," Defaulters)</b>")},async setRows(r){this.sortByArvNumber(r).forEach(t=>{this.rows.push([e.td(t.arv_number),e.td(t.given_name),e.td(t.family_name),e.td(this.formatGender(t.gender)),e.tdDate(t.birthdate),e.tdDate(t.defaulter_date),e.td((t.cell_number?"CELL: ".concat(t.cell_number," <br/>"):"")+(t.village?"VILLAGE: ".concat(t.village," <br/>"):"")+(t.district?"DISTRICT: ".concat(t.district," <br/>"):"")+(t.ta?"TA: ".concat(t.ta," <br/>"):"")+(t.landmark?"Landmark: ".concat(t.landmark):""))])})}}});function D(r,t,o,w,E,g){const i=s("report-template"),a=s("ion-page");return u(),c(a,null,{default:h(()=>[_(i,{title:r.title,period:r.period,rows:r.rows,fields:r.fields,columns:r.columns,showtitleOnly:!0,reportPrefix:"PEPFAR",encryptPDF:!0,onReportConfiguration:r.onPeriod},null,8,["title","period","rows","fields","columns","onReportConfiguration"])]),_:1})}const O=f(b,[["render",D]]);export{O as default};
