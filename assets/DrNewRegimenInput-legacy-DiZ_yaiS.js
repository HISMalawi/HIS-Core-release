System.register(["./index-legacy-Dg5P6bX-.js","./ViewPort-legacy-D3j1oaCn.js","./FieldMixin.vue_vue_type_script_lang-legacy-VHNBowxO.js"],(function(t,e){"use strict";var s,i,a,n,o,l,d,r,u,c,h,b,m,g,p,v,f,_,k,x,y,C,$,w;return{setters:[t=>{s=t.d,i=t.bb,a=t.e,n=t.aj,o=t.ak,l=t.ai,d=t._,r=t.r,u=t.o,c=t.c,h=t.w,b=t.b,m=t.x,g=t.F,p=t.y,v=t.A,f=t.v,_=t.u,k=t.z,x=t.ar,y=t.a3,C=t.a4},t=>{$=t.V},t=>{w=t._}],execute:function(){var e=document.createElement("style");e.textContent="th[data-v-1e1e7c97]{font-weight:700;padding:1.3%;border-bottom:1.5px solid #343434}td[data-v-1e1e7c97]{padding:1.5%}.drug_danger[data-v-1e1e7c97]{color:red}.drug_ok[data-v-1e1e7c97]{color:green}\n",document.head.appendChild(e);const D=s({components:{IonInput:i,IonCheckbox:a,ViewPort:$,IonRow:n,IonCol:o,IonGrid:l},mixins:[w],data:()=>({listData:[]}),mounted(){this.init()},activated(){this.init()},watch:{listData:{handler(t){const e=this.toDrugs(t).filter((t=>t.isChecked)).reduce(((t,e)=>[...t,e,...e.substitute?.concept?[e.substitute]:[]]),[]).map((t=>({label:t.name,value:t.concept.concept_id,other:this.regimenComposition})));this.$emit("onValue",e.length?e:null)},deep:!0},clear(){this.listData.forEach((t=>t.other.drugs.forEach((t=>{t.isChecked=!1,t.disabled=!1}))))}},computed:{regimenComposition(){const t=[];return(this.toDrugs(this.listData).filter((t=>t.isChecked))||[]).forEach((e=>{if(Object.keys(e.substitute).length>0){const s=`${e.abbreviation}/${e.substitute.abbreviation}`,i=`${e.substitute.abbreviation}/${e.abbreviation}`;t.includes(s)||t.includes(i)||t.push(s)}else t.push(e.abbreviation)})),t.join("-")}},methods:{onCheck(t,e){e?.substitute?.abbreviation&&this.listData.forEach((s=>{s.other.drugs.forEach((s=>{e.abbreviation===s?.substitute?.abbreviation&&(s.disabled=t.detail.checked)}))}))},toDrugs:t=>t.map((t=>t.other.drugs)).flat(1),async init(){this.$emit("onFieldActivated",this),this.listData=await this.options(this.fdata)}}}),I=t=>(y("data-v-1e1e7c97"),t=t(),C(),t),V={class:"his-md-text"},j=I((()=>v("br",null,null,-1))),E={style:{width:"100%","text-align":"left"}},A=I((()=>v("thead",null,[v("th"),v("th",{class:"his-sm-text"},"Drug"),v("th",{class:"his-sm-text"},"Resistant"),v("th",{class:"his-sm-text"},"Side effects"),v("th",{class:"his-sm-text"},"Alternative")],-1))),z={class:"his-sm-text"},F={key:0},N={key:1},P={class:"his-sm-text"};t("default",d(D,[["render",function(t,e,s,i,a,n){const o=r("ion-input"),l=r("ion-col"),d=r("ion-checkbox"),y=r("ion-row"),C=r("ion-grid"),$=r("view-port");return u(),c($,null,{default:h((()=>[b(o,{value:t.regimenComposition,class:"input_display",disabled:!0},null,8,["value"]),b(C,{class:"view-port-content"},{default:h((()=>[(u(!0),m(g,null,p(t.listData,((e,s)=>(u(),c(y,{key:s},{default:h((()=>[b(l,{size:"3"},{default:h((()=>[v("b",V,f(e.label),1),_(),j,v("i",null,f(e.value),1)])),_:2},1024),b(l,{size:"9"},{default:h((()=>[v("table",E,[A,v("tbody",null,[(u(!0),m(g,null,p(e.other.drugs,((e,s)=>(u(),m("tr",{key:s},[v("td",null,[b(d,{onIonChange:s=>t.onCheck(s,e),disabled:e.resistant||e.disabled,modelValue:e.isChecked,"onUpdate:modelValue":t=>e.isChecked=t},null,8,["onIonChange","disabled","modelValue","onUpdate:modelValue"])]),v("td",z,[e.disabled?(u(),m("s",F,f(`${e.name} (${e.abbreviation})`),1)):k("",!0),e.disabled?k("",!0):(u(),m("span",N,f(`${e.name} (${e.abbreviation})`),1))]),v("td",{class:x(["his-sm-text",{drug_danger:e.resistant,drug_ok:!e.resistant}])},f(e.resistant?"Yes":"No"),3),v("td",{class:x(["his-sm-text",{drug_danger:e.side_effects,drug_ok:!e.side_effects}])},f(e.side_effects?"Yes":"No"),3),v("td",P,f(e.substitute?.name?`${e.substitute?.name} (${e.substitute?.abbreviation})`:"N/A"),1)])))),128))])])])),_:2},1024)])),_:2},1024)))),128))])),_:1})])),_:1})}],["__scopeId","data-v-1e1e7c97"]]))}}}));
