import{d as C,r as P,ar as I,ag as L,o as S,ad as s,ae as c,a as A,c as v,w as N,b as E,u as g,I as x,ab as R,R as V,ai as b,aN as D}from"./index-cHXRFGhh.js";import{a as u,A as l}from"./anc_global_props-CpeRulNo.js";import{H}from"./HisStandardForm-CajTOt5M.js";const F=C({__name:"SetPreferences",setup(M){const o=P(""),d=I(),y=L(),m=[...T(),...h(),..._()];S(()=>o.value=d.name);function r(e){return console.log("prop",e,o.value),e===o.value}async function f(e,a){try{for(const n in a)await R.set(n,a[n]),V("Property has been updated",2e3);y.back()}catch(n){console.error(n),b("An error occurred while saving the preferences")}}function _(){const e=u.CLINIC_HOLIDAYS;return[{id:e,helpText:"Set clinic holiday(s)",type:s.TT_CLINIC_HOLIDAY_PICKER,condition:()=>r(e),computedValue:a=>a.value,defaultValue:()=>l.clinicHolidays(),validation:a=>c.required(a)}]}function T(){const e=u.APPOINTMENT_LIMIT;return[{id:e,helpText:"Enter Appointment Limit",type:s.TT_NUMBER,computedValue:a=>a.value,condition:()=>r(e),defaultValue:()=>l.appointmentLimit(),validation:a=>c.required(a)}]}function h(){const e=u.CLINIC_DAYS,a=t=>t.map(p=>p.value).join(),n=t=>["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"].map(i=>({label:i,value:i,isChecked:!D.isEmpty(t)&&t.search(i)>=0}));return[{id:e,helpText:"Set Clinic day(s)",type:s.TT_MULTIPLE_SELECT,condition:()=>r(e),computedValue:t=>a(t),validation:t=>c.required(t),options:async()=>n(await l.clinicDays())}]}return(e,a)=>(A(),v(g(x),null,{default:N(()=>[E(H,{fields:m,onFinishAction:f,skipSummary:!0})]),_:1}))}});export{F as default};
