import{M as h,O as p}from"./opd_report_service-D5wAMyTM.js";import{R as c}from"./BaseTableReport-z5I5iKLf.js";import{d as f,aA as e,m as d,cw as y,am as C,ar as u,a as v,b as w,w as _,e as x}from"./index-qFt4YszW.js";import{_ as D}from"./ReportMixin.vue_vue_type_script_lang-BFLFjbJ1.js";import"./Export-CDLTNdY8.js";import"./index-BckLFmVa.js";import"./HisStandardForm-B3LOSMqB.js";import"./BasicReportTemplate-Cv5LTxdO.js";import"./Pagination-CAVMmFhb.js";const T=f({components:{ReportTemplate:c,IonPage:d},mixins:[D],data:()=>({title:"Mental health report",rows:[],reportService:{},columns:[[e.thTxt("",{sortable:!1,exportable:!1}),e.thTxt("New cases",{colspan:4,sortable:!1,exportable:!1}),e.thTxt("Subsequent cases",{colspan:4,sortable:!1,exportable:!1})],[e.thTxt("Diagnosis"),e.thTxt("Male (0-15 years)",{value:"Males (0-15 years New Cases)"}),e.thTxt("Male (>=16 years)",{value:"Males (>=16 years New Cases)"}),e.thTxt("Female (0-15 years)",{value:"Females (0-15 years New Cases)"}),e.thTxt("Female (>=16 years)",{value:"Females (>=16 years New Cases)"}),e.thTxt("Male (0-15 years)",{value:"Males (0-15 years Subsequent Cases)"}),e.thTxt("Male (>=16 years)",{value:"Males (>=16 years Subsequent Cases)"}),e.thTxt("Female (0-15 years)",{value:"Females (0-15 years Subsequent Cases)"}),e.thTxt("Female (>=16 years)",{value:"Females (>=16 years Subsequent Cases)"})]]}),created(){this.fields=this.getDateDurationFields()},methods:{async init(t,s){this.reportService=new p,this.reportService.setStartDate(s.start_date),this.reportService.setEndDate(s.end_date),this.period=this.reportService.getDateIntervalPeriod();const l=await this.reportService.getMentalHealth();this.rows=this.buildRows(l)},buildRows(t){return h.map(s=>[e.td(s,{style:{textAlign:"left"}}),this.toDrillColumn(t,s,"M","0-15 years",!0),this.toDrillColumn(t,s,"M",">=16 years",!0),this.toDrillColumn(t,s,"F","0-15 years",!0),this.toDrillColumn(t,s,"F",">=16 years",!0),this.toDrillColumn(t,s,"M","0-15 years"),this.toDrillColumn(t,s,"M",">=16 years"),this.toDrillColumn(t,s,"F","0-15 years"),this.toDrillColumn(t,s,"F",">=16 years")])},getAgeGroup(t){return t<16?"0-15 years":">=16 years"},toDrillColumn(t,s,l,i,m=!1){const o=t.filter(r=>r.name===s&&r.gender===l&&this.getAgeGroup(r.age)===i&&(m?/new patient/i.test(r.type_of_visit):!0));if(o.length){const r=[[e.thTxt("Name"),e.thTxt("Birthdate (Age)"),e.thTxt("Address")]],n=o.map(a=>[e.td("".concat(a.given_name," ").concat(a.family_name)),e.td("".concat(y(a.birthdate)," (").concat(a.age,")")),e.td("".concat(a.village,", ").concat(a.ta,", ").concat(a.district))]);return e.tdLink(o.length,()=>this.drilldownData("".concat(i," ").concat(this.formatGender(l)," patients with ").concat(s),r,n,void 0))}return e.td(0)}}});function M(t,s,l,i,m,o){const r=u("report-template"),n=u("ion-page");return w(),v(n,null,{default:_(()=>[x(r,{title:t.title,rows:t.rows,fields:t.fields,columns:t.columns,period:t.period,reportPrefix:"Clinic",onReportConfiguration:t.init},null,8,["title","rows","fields","columns","period","onReportConfiguration"])]),_:1})}const H=C(T,[["render",M]]);export{H as default};
