System.register(["./index-legacy-BiNmSRfH.js","./TableView-legacy-BoNa1PFd.js","./v2utils-legacy-CmiiGQ5W.js","./Export-legacy-BgkRP-kP.js","./index-legacy-CJn60hmf.js"],(function(e,t){"use strict";var a,l,u,r,n,s,i,o,c,d,b,f,m,g,v,y;return{setters:[e=>{a=e.d,l=e.r,u=e.H,r=e.o,n=e.D,s=e.a,i=e.b,o=e.w,c=e.e,d=e.f,b=e.x,f=e.n,m=e.U},e=>{g=e.v},e=>{v=e.s,y=e.w},null,null],execute:function(){e("default",a({__name:"SystemAudits",setup(e){const t=l([]),a=l(""),p=l(""),h=l(""),w=b("reports.png"),j=[[{label:"Encounter",ref:"auditable_type"},{label:"Action Type",ref:"action"},{label:"User",ref:"user",toValue:e=>e?`${e.username} (${e.name})`:""},{label:"Timestamp",ref:"created_at",toValue:u.toStandardHisDisplayFormat},{label:"Changes",ref:"changes",toValue:e=>e?.length??0,tdClick:async e=>{const t=e.data.changes.map((e=>{const[t,a]=Object.entries(e)[0]||[];return t?/password/i.test(t)?{attribute:t,previous:"*******",current:"*******"}:{attribute:t,...a}:null})).filter((e=>null!==e));await v({title:`Changes made by ${e.data.user.name} on ${e.data.auditable_type}`,columns:[[{label:"Attribute",ref:"attribute"},{label:"Previous Value",ref:"previous"},{label:"Current Value",ref:"current"}]],columnData:t})}}]],V=()=>y((async()=>{t.value=await m.getAuditReports(p.value,h.value)})),_=()=>n({onFinish:(e,t,l)=>{a.value=`${l}`,p.value=e,h.value=t,V()}});return r((()=>!t.value.length&&_())),(e,l)=>(i(),s(d(f),null,{default:o((()=>[c(g,{"default-sort-order":"asc","default-sorted-column":"encounter",title:"System Audits","icon-url":d(w),subtitle:a.value,columns:j,columnData:t.value,rowsPerPage:20,onConfigure:_,onRefresh:V},null,8,["icon-url","subtitle","columnData"])])),_:1}))}}))}}}));
