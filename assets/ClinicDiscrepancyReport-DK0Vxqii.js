import{d as m,K as n,N as v,o as D,c as g,w as _,b as u,cz as f,cn as b,cA as o,t as y,q as C,cg as h,I as x}from"./index-C234CYGF.js";import{v as q}from"./TableView-D3zkwj8Y.js";import{S as w}from"./stock_report_service-C-kPLjJv.js";import{D as R}from"./ReportDateSelectionPrompt-BZbcaTYD.js";import"./fuse-YdZE3OCN.js";import"./Export-9qIusFpp.js";import"./HisKeyboard-Dt_TzYc6.js";const z=m({__name:"ClinicDiscrepancyReport",setup(S){const a=n([]),i=n(""),r=n(!1),t=new w,p=[[{label:"Drug Count Date",ref:"verification_date",value:e=>b(e.verification_date)},{label:"Drug Name",ref:"short_name"},{label:"Expected Count",ref:"expected_quantity",value:e=>o(e.expected_quantity)},{label:"Verified Count",ref:"current_quantity",value:e=>o(e.current_quantity)},{label:"Difference",ref:"difference",value:e=>o(e.difference)},{label:"Reason",ref:"variance_reason"}]],s=async()=>{if(!(t.startDate&&t.endDate))return y("Start date and end date required!");r.value=!0,a.value=[];try{a.value=await t.getDiscrepancyReport()}catch(e){C("Unable to generate report!")}r.value=!1},c=()=>R({onFinish:(e,l,d)=>{i.value="Period (".concat(d,")"),t.startDate=e,t.endDate=l,s()}});return v(()=>!a.value.length&&c()),(e,l)=>(D(),g(f(x),null,{default:_(()=>[u(f(h),{"is-open":r.value,message:"Please wait..."},null,8,["is-open"]),u(q,{title:"Clinic Discrepancy Report","report-prefix":"Clinic",subtitle:i.value,columns:p,columnData:a.value,rowsPerPage:20,onConfigure:c,onRefresh:s},null,8,["subtitle","columnData"])]),_:1}))}});export{z as default};
