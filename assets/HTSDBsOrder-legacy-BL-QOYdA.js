System.register(["./index-legacy-B-IGLekl.js","./HisStandardForm-legacy-zrsmj5en.js"],(function(e,n){"use strict";var t,i,o,s,a,l,c,r,d,u,p,D,m;return{setters:[e=>{t=e.bQ,i=e.d,o=e.a5,s=e.r,a=e.ei,l=e.a9,c=e.a6,r=e.v,d=e.w,u=e.ab,p=e.u,D=e.x},e=>{m=e.H}],execute:function(){class n extends t{constructor(e,n=-1){super(e,199,n)}}const S=i({components:{IonPage:o,HisStandardForm:m},setup(){const e=s([]),t=s(""),i=new n(-1),{htsClient:o,yesNoOptions:c,saveEncounter:r,patientDashboardUrl:d}=a({onInitVisit:n=>{e.value=[u(n),{id:"dbs_specimen_id",helpText:"DBS Specimen ID",type:l.TT_BARCODE,requireNext:!1,condition:e=>/yes/i.test(`${e.dbs_sample_collection}`),finalComputedValue:e=>({obs:i.buildValueText("DBS Specimen ID",`${e}`)}),config:{hiddenFooterBtns:["Clear"]},isRequired:()=>!0}]}});function u(e){let n="DBS Sample";const o=e.age;return"Inconclusive Re-test"==t.value&&(n="DBS Sample for Incoclusive Re-test"),o<1&&(n="DBS Sample (EID)"),o<1&&(n="DBS Sample (EID)"),{id:"dbs_sample_collection",helpText:n,type:l.TT_YES_NO,isRequired:()=>!0,finalComputedValue:e=>({obs:i.buildValueCoded("Is DBS Sample Collected",e)}),options:()=>[{label:"Is DBS Sample Collected?",value:"",values:c()}]}}return{patientDashboardUrl:d,onFinish:function(e,s){let a;"Yes"===e.dbs_sample_collection&&(a=function(e){let i;return i=o.age<1||"Inconclusive Re-test"==t.value?844:n.getCachedConceptID("HIV viral load"),[{concept_id:i,specimenConcept:n.getCachedConceptID("DBS (Free drop to DBS card)",!0),accessionNumber:e,reason:"Routine"}]}(e.dbs_specimen_id)),r({encounterName:"DBS ORDER",encounterTypeID:i.encounterTypeID,formData:e,computedData:s,labOrders:a})},fields:e}}});e("default",c(S,[["render",function(e,n,t,i,o,s){const a=u("his-standard-form"),l=u("ion-page");return p(),r(l,null,{default:d((()=>[D(a,{formLabel:"DBS Order",fields:e.fields,onFinishAction:e.onFinish,cancelDestinationPath:e.patientDashboardUrl()},null,8,["fields","onFinishAction","cancelDestinationPath"])])),_:1})}]]))}}}));
