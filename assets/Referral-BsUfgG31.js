import{d as R,K as o,I as b,cg as C,N as $,O as n,$ as L,cn as s,F as f,V as D,_ as w,r as d,o as P,c as y,w as E,b as _}from"./index-BzVWU-6u.js";import{v as F}from"./TableView-Ce964lOX.js";import{A}from"./aetc_report_service-fi-_4a4p.js";import{D as V}from"./DrillPatientIds-BjjEG7-1.js";import"./Export-PjGFz1RJ.js";import"./TableView-CIAE159z.js";import"./fuse-YdZE3OCN.js";import"./HisKeyboard-mYPg-10z.js";const p=o([]),r=o(""),l=o(""),u=o(""),k=o(!1),h=o(""),Q=R({components:{IonPage:b,IonLoading:C,v2Datatable:F},setup(){const t=async()=>{const e=new A;e.startDate=r.value,e.endDate=l.value;try{const a=await e.getClinicReport("REFERRAL_REPORT");p.value=a}catch(a){console.log(a)}},m=["Diagnosis","Total"],v=[[{label:"Diagnosis",ref:"data.location",value:e=>e.location},{label:"Total",ref:"data.patients.length",secondaryLabel:"Referred Clients",value:e=>e.patients.length,tdClick:({column:e,data:a})=>g("".concat(e.secondaryLabel," ").concat(a.diagnosis," "),a.patients)}]],g=async(e,a)=>{a.length<=0||(await n.create({component:V,backdropDismiss:!1,cssClass:"large-modal",componentProps:{title:e,subtitle:u,patientIdentifiers:a,onFinish:()=>n.getTop().then(c=>c&&n.dismiss())}})).present()},i=()=>L([{id:"start_date",helpText:"Start Date",type:f.TT_FULL_DATE,validation:e=>D.required(e),computedValue:e=>e.value},{id:"end_date",helpText:"End Date",type:f.TT_FULL_DATE,validation:e=>D.required(e),computedValue:e=>e.value}],(e,a)=>{r.value=a.start_date,l.value=a.end_date,u.value="Period (".concat(s(r.value)," to ").concat(s(l.value),")"),n.dismiss(),h.value="".concat(s(r.value)," to ").concat(s(l.value)),t()});return $(()=>!p.value.length&&i()),{columns:v,isLoading:k,reportData:p,period:u,csvQuarter:h,csvheaders:m,generate:t,configure:i}}});function I(t,m,v,g,i,e){const a=d("ion-loading"),c=d("v2Datatable"),T=d("ion-page");return P(),y(T,null,{default:E(()=>[_(a,{"is-open":t.isLoading,message:"Please wait..."},null,8,["is-open"]),_(c,{title:"AETC Referral Report",subtitle:t.period,columns:t.columns,columnData:t.reportData,rowsPerPage:25,onConfigure:t.configure,csvQuarter:t.csvQuarter,headers:t.csvheaders,onRefresh:()=>t.generate()},null,8,["subtitle","columns","columnData","onConfigure","csvQuarter","headers","onRefresh"])]),_:1})}const j=w(Q,[["render",I]]);export{j as default};
