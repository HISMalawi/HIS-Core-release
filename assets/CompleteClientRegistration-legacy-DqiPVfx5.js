System.register(["./index-legacy-B-IGLekl.js","./HisStandardForm-legacy-zrsmj5en.js"],(function(e,n){"use strict";var i,t,r,a,l,o,s,u,d,c,g,m,f,h,v;return{setters:[e=>{i=e.d,t=e.a5,r=e.r,a=e.ei,l=e.O,o=e.bD,s=e.aO,u=e.bn,d=e.a6,c=e.v,g=e.w,m=e.ab,f=e.u,h=e.x},e=>{v=e.H}],execute:function(){const n=i({components:{IonPage:t,HisStandardForm:v},setup(){const e=r([]),{htsClient:n}=a(),{visitData:i,visitID:t,nextTask:d,patientDashboardUrl:c}=a({onInitVisit:async()=>{if("unknown unknown"!=`${n.givenName} ${n.familyName}`.toLowerCase())return l("Client already registered");e.value=[o.getGivenNameField(),o.getFamilyNameField(),...s(o.getDobConfig()),o.getHomeRegionField(),o.getHomeDistrictField(),o.getHomeTaField(),o.getHomeVillageField(),{...o.getCurrentRegionField(),summaryMapValue:(e,n,i)=>{if(/use home/i.test(`${e.value}`)){const e=i.person;return[{label:"Current region",value:e?.current_region},{label:"Current District/Country",value:e?.current_district},{label:"Current Traditional Authority",value:e?.current_traditional_authority},{label:"Current village",value:e?.current_village}]}return{label:"Current Region",value:e.label}}},{...o.getCurrentDistrictField(),condition:e=>!e.current_region.label.match(/foreign|use home/i)},{...o.getCurrentTAfield(),condition:e=>!e.current_region.label.match(/foreign|use home/i)},{...o.getCurrentVillageField(),condition:e=>!e.current_region.label.match(/foreign|use home/i)},...o.getLandmarkFields(),o.getCellNumberField()]}});return{patientDashboardUrl:c,onFinish:async function(e,r){u().saveOffline({id:t.value,label:"HTS Full Client Registration",personParams:{npid:n.npid,person:{...i.value?.personParams?.person||{},...o.resolvePerson(r)}}}),d(),u().synchronizeRecord(t.value).then((e=>u().saveOffline(e)))},fields:e}}});e("default",d(n,[["render",function(e,n,i,t,r,a){const l=m("his-standard-form"),o=m("ion-page");return f(),c(o,null,{default:g((()=>[h(l,{formLabel:"Additional client information",cancelDestinationPath:e.patientDashboardUrl(),"on-finish-action":e.onFinish,fields:e.fields},null,8,["cancelDestinationPath","on-finish-action","fields"])])),_:1})}]]))}}}));
