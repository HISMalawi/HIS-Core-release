System.register(["./SelectMixin-legacy-Zc1cteYy.js","./index-legacy--hxN_V8z.js","./KbHandler-legacy-De8o5nTq.js","./fuse-legacy-CQoBB3MK.js","./HisKeyboard-legacy-C2eWFoVg.js","./HisKbConfigurations-legacy-vrLd9Pgz.js","./KbLayouts-legacy-BKvPSxzZ.js","./BaseKeyboard-legacy-B0v61IaY.js","./BaseTextInput-legacy-D04rqkTE.js","./ViewPort-legacy-TUlObaz7.js","./FieldMixin.vue_vue_type_script_lang-legacy-pVr7UKj2.js"],(function(e,t){"use strict";var i,s,l,a,n,o,c,h,d,u,r,k,y,f,p,b,C,m,g,w,D,V,x,v,I,K;return{setters:[e=>{i=e.default},e=>{s=e.d,l=e.e,a=e.B,n=e.an,o=e.h,c=e.g,h=e.C,d=e.ao,u=e.ab,r=e.cd,k=e._,y=e.r,f=e.o,p=e.x,b=e.b,C=e.w,m=e.c,g=e.z,w=e.F,D=e.y,V=e.u,x=e.v,v=e.A},e=>{I=e.k},e=>{K=e.F},null,null,null,null,null,null,null],execute:function(){const t=s({components:{IonCheckbox:l,IonText:a,IonChip:n,IonItem:o,IonList:c,IonLabel:h,IonIcon:d},data:()=>({listData:[],filter:""}),name:"HisMultipleSelect",mixins:[i],methods:{async init(){this.$emit("onFieldActivated",this),!u.isEmpty(this.listData)&&this.config.buildOptionsOnce||(this.listData=await this.options(this.fdata,this.getChecked(this.listData),this.cdata,this.listData),this.$emit("onValue",this.getChecked(this.listData)))},async onselect(e){setTimeout((()=>this.filter=""),30),"function"==typeof e?.other?.onEvent&&await e.other.onEvent(e.isChecked),this.onValue&&e.isChecked&&!(await this.onValue(e,this.fdata,this.cdata))?e.isChecked=!1:(this.onValueUpdate&&(this.listData=await this.onValueUpdate([...this.listData],e,this.fdata,this.cdata)),this.$emit("onValue",this.getChecked(this.listData)))},onKbValue(e){this.filter=e},keypress(e){this.filter=I(e,this.filter)},uncheck(e){this.listData.forEach((t=>{t.label!==e||t.disabled||(t.isChecked=!1)}))},getChecked:e=>e.filter((e=>e.isChecked)),isDescription:(e,t=!1)=>!!e&&(!e?.show||"onChecked"===e.show&&t||"always"===e.show)},computed:{closeIcon:()=>r,listValues(){return this.filter?new K(this.listData,{threshold:.3,keys:["label"],useExtendedSearch:!0}).search(this.filter).map((e=>e.item)):this.listData},checkedItems(){return this.getChecked(this.listData)}},watch:{clear(){this.listData.forEach((e=>e.isChecked=!1))},footerButtonEvent:{async handler(e){e&&"function"==typeof e.onClickComponentEvents?.refreshOptions&&(this.listData=await(e.onClickComponentEvents?.refreshOptions(e,this.listData,this.fdata,this.cdata)),this.$emit("onValue",this.getChecked(this.listData)))},deep:!0,immediate:!0}},mounted(){this.init()},activated(){this.init()}});e("default",k(t,[["render",function(e,t,i,s,l,a){const n=y("his-text-input"),o=y("ion-icon"),c=y("ion-chip"),h=y("ion-checkbox"),d=y("ion-text"),u=y("ion-label"),r=y("ion-item"),k=y("ion-list"),I=y("view-port"),K=y("his-keyboard");return f(),p(w,null,[b(I,{showFull:!e.showKeyboard},{default:C((()=>[e.showKeyboard?(f(),m(n,{key:0,value:e.filter,onOnValue:t[0]||(t[0]=t=>e.onKbValue(t,e.showKeyboard)),disabled:!1},null,8,["value"])):g("",!0),(f(!0),p(w,null,D(e.checkedItems,((t,i)=>(f(),p("span",{key:i},[b(c,{class:"his-md-text",color:"primary",onClick:i=>e.uncheck(t.label)},{default:C((()=>[V(x(t.label)+" ",1),b(o,{icon:e.closeIcon},null,8,["icon"])])),_:2},1032,["onClick"])])))),128)),b(k,{class:"view-port-content"},{default:C((()=>[(f(!0),p(w,null,D(e.listValues,((t,i)=>(f(),m(r,{onClick:()=>e.onselect(t),key:i,color:t.isChecked?"lightblue":"",lines:t.isChecked?"none":""},{default:C((()=>[b(h,{slot:"start",modelValue:t.isChecked,"onUpdate:modelValue":e=>t.isChecked=e,disabled:t?.disabled},null,8,["modelValue","onUpdate:modelValue","disabled"]),b(u,null,{default:C((()=>[b(d,{class:"his-md-text"},{default:C((()=>[V(x(t.label),1)])),_:2},1024),e.isDescription(t.description,t.isChecked)?(f(),m(d,{key:0,color:t.description.color},{default:C((()=>[v("p",null,[v("i",null,x(t.description.text),1)])])),_:2},1032,["color"])):g("",!0)])),_:2},1024)])),_:2},1032,["onClick","color","lines"])))),128))])),_:1})])),_:1},8,["showFull"]),e.showKeyboard?(f(),m(K,{key:0,kbConfig:e.keyboard,onKeyPress:e.keypress},null,8,["kbConfig","onKeyPress"])):g("",!0)],64)}]]))}}}));
