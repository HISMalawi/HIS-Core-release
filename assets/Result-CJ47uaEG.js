import{d as p,r as m,ab as _,dO as v,ai as f,Q as T,ac as h,u as E,v as x,w as b,x as R,y as i,aR as S,a5 as D}from"./index-DrPQ21-i.js";import{H as y}from"./HisStandardForm-rh8Trs2q.js";import{u as A}from"./useEncounter-DKfF-d5Z.js";import{g as a}from"./util-CyjuS_4X.js";import"./isEmpty-BSlM0y0K.js";import"./encounter_guidelines-D8L0Wl1z.js";import"./GuidelineEngine-D6V1_Znr.js";const B=p({__name:"Result",setup(C){const n=m([]),o={[a("MICROSCOPY")]:{label:"Microscopy",value:"/tb/results/microscopy"},[a("XPERT_MTB_RIF")]:{label:"Xpert MTB/RIF",value:"/tb/results/xpert"},[a("LPA")]:{label:"LPA",value:"/tb/results/lpa"},[a("LAM")]:{label:"LAM",value:"/tb/results/lam"},[a("CULTURE_AND_DST")]:{label:"Culture and DST",value:"/tb/results/culture"}},{patientDashboardUrl:l,patientId:u}=A((t,s)=>{const d=()=>{const r={};return{id:"examination",helpText:"Recent Examination(s):",type:_.TT_SELECT,init:async()=>{try{(await v.getRecentOrders(s)).observations.forEach(e=>{e.concept_id===a("TEST_REQUESTED")&&o[e.value_coded]&&!r[e.value_coded]&&(r[e.value_coded]={...o[e.value_coded],other:f.toStandardHisFormat(e.obs_datetime)})})}catch(e){console.error("".concat(e)),T("No recent results found")}return!0},validation:e=>h.required(e),options:()=>Object.values(r)}};n.value=[d()]});function c(t){S.push("".concat(t.examination.value,"/").concat(u.value,"?date=").concat(t.examination.other))}return(t,s)=>(E(),x(i(D),null,{default:b(()=>[R(y,{cancelDestinationPath:i(l),onFinishAction:c,fields:n.value,skipSummary:!0},null,8,["cancelDestinationPath","fields"])]),_:1}))}});export{B as default};
