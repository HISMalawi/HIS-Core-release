System.register(["./index-legacy-2OuOZQ1w.js","./TableView-legacy-qKxmf6r2.js"],(function(e,t){"use strict";var a,n,i,l,r,o,s,u,c,d,f,m,p,b,g,h;return{setters:[e=>{a=e.d,n=e.m,i=e.r,l=e.aR,r=e.as,o=e.a_,s=e.av,u=e.cw,c=e.bN,d=e.am,f=e.ar,m=e.a,p=e.b,b=e.w,g=e.e},e=>{h=e.v}],execute:function(){const t=a({props:{title:{type:String,default:"Drilldown"},patientIdentifiers:{type:Object},onFinish:{type:Function}},components:{IonPage:n,v2Datatable:h},setup(e){const t=i("-"),a=i([]),n=r(),d=[[{label:"National ID",ref:"national_id"},{label:"First name",ref:"given_name"},{label:"Last name",ref:"family_name"},{label:"Birthdate",ref:"birthdate"},{label:"Action",ref:"patient_id",exportable:!1,tdClick:({data:e})=>n.push({path:`/patient/dashboard/${e.patient_id}`}),value:()=>"View client"}]];return l((()=>e.patientIdentifiers),(async e=>{if(a.value=[],t.value="Total: 0",!e||!e.length)return;const n=o.chunk(e,20);for(const l of n){for(const n of l){try{const e=new s(await s.findByID(n));a.value.push({patient_id:e.getID(),national_id:e.getNationalID(),given_name:e.getGivenName(),family_name:e.getFamilyName(),birthdate:u(e.getBirthdate())})}catch(i){console.error(i),a.value.push({})}t.value=`Total: ${a.value.length} of ${(e||[]).length}`}await c(500)}}),{immediate:!0}),{columns:d,subtitle:t,reportData:a,ITEMS_PER_PAGE:20}}});e("D",d(t,[["render",function(e,t,a,n,i,l){const r=f("v2Datatable"),o=f("ion-page");return p(),m(o,null,{default:b((()=>[g(r,{title:e.title,subtitle:e.subtitle,columnData:e.reportData,columns:e.columns,"on-finish":e.onFinish,rowsPerPage:e.ITEMS_PER_PAGE},null,8,["title","subtitle","columnData","columns","on-finish","rowsPerPage"])])),_:1})}]]))}}}));
