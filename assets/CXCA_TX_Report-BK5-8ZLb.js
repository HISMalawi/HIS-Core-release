import{d as b,I as C,cJ as $,o as w,r as o,W as L,am as D,D as P,ci as g,au as p,aa as R,af as u,a as k,c as T,w as E,b as m}from"./index-CMZASHAR.js";import{v as X}from"./TableView-DhTjQT8r.js";import{C as A}from"./cxca_report_service-BLTGK-Am.js";import{D as Q}from"./DrillPatientIds-CwQBWjf6.js";import"./Export-CpyT9Gk1.js";import"./index-_zuoFVCp.js";const n=o([]),l=o(""),s=o(""),_=o(""),d=o(!1),v=o(""),F=b({components:{IonPage:C,IonLoading:$,v2Datatable:X},setup(){const r=async(e,t)=>{t.length<=0||(await p.create({component:Q,backdropDismiss:!1,cssClass:"large-modal",componentProps:{title:e,subtitle:_,patientIdentifiers:t,onFinish:()=>p.getTop().then(a=>a&&p.dismiss())}})).present()},f=[[{label:"#",ref:"index",span:{thRowspan:2}},{label:"Age group",ref:"age_group",span:{thRowspan:2}},{label:"Gender",ref:"gender",exportable:!1,span:{thRowspan:2}},{label:"1st time screened",ref:"",span:{thColspan:3}},{label:"Rescreened after previous negative",ref:"",span:{thColspan:3}},{label:"Post-treatment follow-up",ref:"",span:{thColspan:3}}],[{label:"Cryotherapy",ref:"first_time_screened_cryotherapy",secondaryLabel:"1st screened (cryotherapy)",value:e=>e.first_time_screened.cryotherapy.length,tdClick:({column:e,data:t})=>r("".concat(t.age_group," ").concat(e.secondaryLabel),t.first_time_screened.cryotherapy)},{label:"Thermocoagulation",ref:"first_time_screened_thermocoagulation",secondaryLabel:"1st time screened (Thermocoagulation)",value:e=>e.first_time_screened.thermocoagulation.length,tdClick:({column:e,data:t})=>r("".concat(t.age_group," ").concat(e.secondaryLabel),t.first_time_screened.thermocoagulation)},{label:"LEEP",ref:"first_time_screened_leep",secondaryLabel:"1st screened(leep)",value:e=>e.first_time_screened.leep.length,tdClick:({column:e,data:t})=>r("".concat(t.age_group," ").concat(e.secondaryLabel),t.first_time_screened.leep)},{label:"Cryotherapy",ref:"post_treatment_followup_cryotherapy",secondaryLabel:"Post-treatment followup(Cryotherapy)",value:e=>e.post_treatment_followup.cryotherapy.length,tdClick:({column:e,data:t})=>r("".concat(t.age_group," ").concat(e.secondaryLabel),t.post_treatment_followup.cryotherapy)},{label:"Thermocoagulation",ref:"post_treatment_followup_thermocoagulation",secondaryLabel:"Post-treatment followup (Thermocoagulation)",value:e=>e.post_treatment_followup.thermocoagulation.length,tdClick:({column:e,data:t})=>r("".concat(t.age_group," ").concat(e.secondaryLabel),t.post_treatment_followup.thermocoagulation)},{label:"LEEP",ref:"post_treatment_followup_leep",secondaryLabel:"Post-treatment followup (leep)",value:e=>e.post_treatment_followup.leep.length,tdClick:({column:e,data:t})=>r("".concat(t.age_group," ").concat(e.secondaryLabel),t.post_treatment_followup.leep)},{label:"Cryotherapy",ref:"rescreened_after_prev_visit_cryotherapy",secondaryLabel:"Rescreen after prev visit (Cryotherapy)",value:e=>e.rescreened_after_prev_visit.cryotherapy.length,tdClick:({column:e,data:t})=>r("".concat(t.age_group," ").concat(e.secondaryLabel),t.rescreened_after_prev_visit.cryotherapy)},{label:"Thermocoagulation",ref:"rescreened_after_prev_visit_thermocoagulation",secondaryLabel:"Rescreen after prev visit (Thermocoagulation)",value:e=>e.rescreened_after_prev_visit.thermocoagulation.length,tdClick:({column:e,data:t})=>r("".concat(t.age_group," ").concat(e.secondaryLabel),t.rescreened_after_prev_visit.thermocoagulation)},{label:"LEEP",ref:"rescreened_after_prev_visit_leep",secondaryLabel:"Rescreen after prev visit (leep)",value:e=>e.rescreened_after_prev_visit.leep.length,tdClick:({column:e,data:t})=>r("".concat(t.age_group," ").concat(e.secondaryLabel),t.rescreened_after_prev_visit.leep)}]],c=async()=>{if(!(l.value&&s.value))return L("Start date and end date required!");d.value=!0,n.value=[];const e=new A;e.startDate=l.value,e.endDate=s.value;try{n.value=(await e.getClinicReport("CXCA TX")).slice(5).map((t,a)=>(t.index=a+1,t.gender="Female",t))}catch(t){D("Unable to generate report!")}d.value=!1},i=()=>P({onFinish:(e,t,a)=>{l.value=e,s.value=t,_.value="Period (".concat(a,")"),v.value="".concat(g(l.value)," to ").concat(g(s.value)),c()}});return w(()=>!n.value.length&&i()),{columns:f,isLoading:d,reportData:n,period:_,csvQuarter:v,generate:c,configure:i}}});function I(r,f,c,i,e,t){const a=u("ion-loading"),h=u("v2Datatable"),y=u("ion-page");return k(),T(y,null,{default:E(()=>[m(a,{"is-open":r.isLoading,message:"Please wait..."},null,8,["is-open"]),m(h,{title:"CXCA TX Report",subtitle:r.period,columns:r.columns,columnData:r.reportData,rowsPerPage:25,onConfigure:r.configure,csvQuarter:r.csvQuarter,onRefresh:()=>r.generate()},null,8,["subtitle","columns","columnData","onConfigure","csvQuarter","onRefresh"])]),_:1})}const J=R(F,[["render",I]]);export{J as default};
