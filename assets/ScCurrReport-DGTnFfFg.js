import{d,a5 as f,cv as D,r as c,t as v,aK as _,df as g,aq as b,O as C,ah as P,c_ as R,a6 as S,v as h,w,ab as u,u as y,x as m}from"./index-CyYd6aWW.js";import{v as k}from"./TableView-KUf7rG9H.js";import{S as I}from"./stock_report_service-DIgMerh6.js";import{D as $}from"./DrillTableModal-BZ9wFwgY.js";const A=d({components:{IonPage:f,IonLoading:D,v2Datatable:k},setup(){const e=c([]),l=c(""),n=c(!1),t=new I,p=[[{label:"#",ref:"index"},{label:"ARV drug category",ref:"category"},{label:"# of bottles (units) remaining",ref:"units",value:a=>g(a.units),tdClick:async a=>{(await b.create({component:$,cssClass:"custom-modal",componentProps:{title:a.data.category,columns:["Drug","Quantity"],onRows:()=>{var o;return(((o=a.data)==null?void 0:o.granular_spec)||[]).map(s=>[s.drug_name,g(s.units)])}}})).present()}}]],i=async()=>{if(!(t.startDate&&t.endDate))return C("Start date and end date required!");n.value=!0,e.value=[];try{e.value=(await t.getScCurrReport()).map((a,o)=>({...a,index:o+1}))}catch(a){P("Unable to generate report!")}n.value=!1},r=()=>R({onFinish:(a,o,s)=>{l.value=s,t.startDate=a,t.endDate=o,i()}});return v(()=>!e.value.length&&r()),{Img:_,reportData:e,isLoading:n,configure:r,generate:i,columns:p,period:l}}});function F(e,l,n,t,p,i){const r=u("ion-loading"),a=u("v2Datatable"),o=u("ion-page");return y(),h(o,null,{default:w(()=>[m(r,{"is-open":e.isLoading,message:"Please wait..."},null,8,["is-open"]),m(a,{title:"Sc Curr","icon-url":e.Img("login-logos/PEPFAR.png"),subtitle:e.period,columns:e.columns,columnData:e.reportData,rowsPerPage:20,onConfigure:e.configure,onRefresh:()=>e.generate(),reportPrefix:"PEPFAR"},null,8,["icon-url","subtitle","columns","columnData","onConfigure","onRefresh"])]),_:1})}const N=S(A,[["render",F]]);export{N as default};
