import{cm as wr,ar as Jr,e as tr,r as D,ag as Qr,o as Wr,aw as z,ak as Vr,bn as x}from"./index-CMZASHAR.js";import{_ as Z,a as J,b as A,c as kr,d as Dr,e as xr,f as Mr,g as jr,h as Lr,j as Nr,k as re,l as P,m as ee,n as Q,o as ae,p as te,i as ne}from"./isEmpty-DjKeGqZh.js";import{E as ie,F as T}from"./encounter_guidelines-CJXpBOk4.js";import{m as se}from"./GuidelineEngine-D6V1_Znr.js";function ue(r,e){for(var a=-1,t=e.length,n=r.length;++a<t;)r[n+a]=e[a];return r}var Fr=ue,nr=Z,fe=J,oe=A,ir=nr?nr.isConcatSpreadable:void 0;function _e(r){return oe(r)||fe(r)||!!(ir&&r&&r[ir])}var ce=_e,ve=Fr,le=ce;function Gr(r,e,a,t,n){var i=-1,s=r.length;for(a||(a=le),n||(n=[]);++i<s;){var u=r[i];e>0&&a(u)?e>1?Gr(u,e-1,a,t,n):ve(n,u):t||(n[n.length]=u)}return n}var he=Gr;function pe(r,e){for(var a=-1,t=r==null?0:r.length,n=Array(t);++a<t;)n[a]=e(r[a],a,r);return n}var Rr=pe,de=kr,$e=Dr,ge="[object Symbol]";function ye(r){return typeof r=="symbol"||$e(r)&&de(r)==ge}var w=ye,be=A,me=w,Ae=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Ce=/^\w*$/;function Te(r,e){if(be(r))return!1;var a=typeof r;return a=="number"||a=="symbol"||a=="boolean"||r==null||me(r)?!0:Ce.test(r)||!Ae.test(r)||e!=null&&r in Object(e)}var W=Te,Ee=xr,Oe=Ee(Object,"create"),N=Oe,sr=N;function Se(){this.__data__=sr?sr(null):{},this.size=0}var Ie=Se;function Pe(r){var e=this.has(r)&&delete this.__data__[r];return this.size-=e?1:0,e}var we=Pe,De=N,xe="__lodash_hash_undefined__",Me=Object.prototype,Le=Me.hasOwnProperty;function Ne(r){var e=this.__data__;if(De){var a=e[r];return a===xe?void 0:a}return Le.call(e,r)?e[r]:void 0}var Fe=Ne,Ge=N,Re=Object.prototype,He=Re.hasOwnProperty;function Be(r){var e=this.__data__;return Ge?e[r]!==void 0:He.call(e,r)}var Ke=Be,Ue=N,ze="__lodash_hash_undefined__";function qe(r,e){var a=this.__data__;return this.size+=this.has(r)?0:1,a[r]=Ue&&e===void 0?ze:e,this}var Xe=qe,Ye=Ie,Ze=we,Je=Fe,Qe=Ke,We=Xe;function E(r){var e=-1,a=r==null?0:r.length;for(this.clear();++e<a;){var t=r[e];this.set(t[0],t[1])}}E.prototype.clear=Ye;E.prototype.delete=Ze;E.prototype.get=Je;E.prototype.has=Qe;E.prototype.set=We;var Ve=E;function ke(){this.__data__=[],this.size=0}var je=ke;function ra(r,e){return r===e||r!==r&&e!==e}var V=ra,ea=V;function aa(r,e){for(var a=r.length;a--;)if(ea(r[a][0],e))return a;return-1}var F=aa,ta=F,na=Array.prototype,ia=na.splice;function sa(r){var e=this.__data__,a=ta(e,r);if(a<0)return!1;var t=e.length-1;return a==t?e.pop():ia.call(e,a,1),--this.size,!0}var ua=sa,fa=F;function oa(r){var e=this.__data__,a=fa(e,r);return a<0?void 0:e[a][1]}var _a=oa,ca=F;function va(r){return ca(this.__data__,r)>-1}var la=va,ha=F;function pa(r,e){var a=this.__data__,t=ha(a,r);return t<0?(++this.size,a.push([r,e])):a[t][1]=e,this}var da=pa,$a=je,ga=ua,ya=_a,ba=la,ma=da;function O(r){var e=-1,a=r==null?0:r.length;for(this.clear();++e<a;){var t=r[e];this.set(t[0],t[1])}}O.prototype.clear=$a;O.prototype.delete=ga;O.prototype.get=ya;O.prototype.has=ba;O.prototype.set=ma;var G=O,ur=Ve,Aa=G,Ca=Mr;function Ta(){this.size=0,this.__data__={hash:new ur,map:new(Ca||Aa),string:new ur}}var Ea=Ta;function Oa(r){var e=typeof r;return e=="string"||e=="number"||e=="symbol"||e=="boolean"?r!=="__proto__":r===null}var Sa=Oa,Ia=Sa;function Pa(r,e){var a=r.__data__;return Ia(e)?a[typeof e=="string"?"string":"hash"]:a.map}var R=Pa,wa=R;function Da(r){var e=wa(this,r).delete(r);return this.size-=e?1:0,e}var xa=Da,Ma=R;function La(r){return Ma(this,r).get(r)}var Na=La,Fa=R;function Ga(r){return Fa(this,r).has(r)}var Ra=Ga,Ha=R;function Ba(r,e){var a=Ha(this,r),t=a.size;return a.set(r,e),this.size+=a.size==t?0:1,this}var Ka=Ba,Ua=Ea,za=xa,qa=Na,Xa=Ra,Ya=Ka;function S(r){var e=-1,a=r==null?0:r.length;for(this.clear();++e<a;){var t=r[e];this.set(t[0],t[1])}}S.prototype.clear=Ua;S.prototype.delete=za;S.prototype.get=qa;S.prototype.has=Xa;S.prototype.set=Ya;var k=S,Hr=k,Za="Expected a function";function j(r,e){if(typeof r!="function"||e!=null&&typeof e!="function")throw new TypeError(Za);var a=function(){var t=arguments,n=e?e.apply(this,t):t[0],i=a.cache;if(i.has(n))return i.get(n);var s=r.apply(this,t);return a.cache=i.set(n,s)||i,s};return a.cache=new(j.Cache||Hr),a}j.Cache=Hr;var Ja=j,Qa=Ja,Wa=500;function Va(r){var e=Qa(r,function(t){return a.size===Wa&&a.clear(),t}),a=e.cache;return e}var ka=Va,ja=ka,rt=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,et=/\\(\\)?/g,at=ja(function(r){var e=[];return r.charCodeAt(0)===46&&e.push(""),r.replace(rt,function(a,t,n,i){e.push(n?i.replace(et,"$1"):t||a)}),e}),tt=at,fr=Z,nt=Rr,it=A,st=w,ut=1/0,or=fr?fr.prototype:void 0,_r=or?or.toString:void 0;function Br(r){if(typeof r=="string")return r;if(it(r))return nt(r,Br)+"";if(st(r))return _r?_r.call(r):"";var e=r+"";return e=="0"&&1/r==-ut?"-0":e}var ft=Br,ot=ft;function _t(r){return r==null?"":ot(r)}var ct=_t,vt=A,lt=W,ht=tt,pt=ct;function dt(r,e){return vt(r)?r:lt(r,e)?[r]:ht(pt(r))}var Kr=dt,$t=w,gt=1/0;function yt(r){if(typeof r=="string"||$t(r))return r;var e=r+"";return e=="0"&&1/r==-gt?"-0":e}var H=yt,bt=Kr,mt=H;function At(r,e){e=bt(e,r);for(var a=0,t=e.length;r!=null&&a<t;)r=r[mt(e[a++])];return a&&a==t?r:void 0}var rr=At,Ct=G;function Tt(){this.__data__=new Ct,this.size=0}var Et=Tt;function Ot(r){var e=this.__data__,a=e.delete(r);return this.size=e.size,a}var St=Ot;function It(r){return this.__data__.get(r)}var Pt=It;function wt(r){return this.__data__.has(r)}var Dt=wt,xt=G,Mt=Mr,Lt=k,Nt=200;function Ft(r,e){var a=this.__data__;if(a instanceof xt){var t=a.__data__;if(!Mt||t.length<Nt-1)return t.push([r,e]),this.size=++a.size,this;a=this.__data__=new Lt(t)}return a.set(r,e),this.size=a.size,this}var Gt=Ft,Rt=G,Ht=Et,Bt=St,Kt=Pt,Ut=Dt,zt=Gt;function I(r){var e=this.__data__=new Rt(r);this.size=e.size}I.prototype.clear=Ht;I.prototype.delete=Bt;I.prototype.get=Kt;I.prototype.has=Ut;I.prototype.set=zt;var Ur=I,qt="__lodash_hash_undefined__";function Xt(r){return this.__data__.set(r,qt),this}var Yt=Xt;function Zt(r){return this.__data__.has(r)}var Jt=Zt,Qt=k,Wt=Yt,Vt=Jt;function L(r){var e=-1,a=r==null?0:r.length;for(this.__data__=new Qt;++e<a;)this.add(r[e])}L.prototype.add=L.prototype.push=Wt;L.prototype.has=Vt;var kt=L;function jt(r,e){for(var a=-1,t=r==null?0:r.length;++a<t;)if(e(r[a],a,r))return!0;return!1}var rn=jt;function en(r,e){return r.has(e)}var an=en,tn=kt,nn=rn,sn=an,un=1,fn=2;function on(r,e,a,t,n,i){var s=a&un,u=r.length,f=e.length;if(u!=f&&!(s&&f>u))return!1;var o=i.get(r),p=i.get(e);if(o&&p)return o==e&&p==r;var h=-1,c=!0,g=a&fn?new tn:void 0;for(i.set(r,e),i.set(e,r);++h<u;){var $=r[h],_=e[h];if(t)var l=s?t(_,$,h,e,r,i):t($,_,h,r,e,i);if(l!==void 0){if(l)continue;c=!1;break}if(g){if(!nn(e,function(v,d){if(!sn(g,d)&&($===v||n($,v,a,t,i)))return g.push(d)})){c=!1;break}}else if(!($===_||n($,_,a,t,i))){c=!1;break}}return i.delete(r),i.delete(e),c}var zr=on,_n=jr,cn=_n.Uint8Array,vn=cn;function ln(r){var e=-1,a=Array(r.size);return r.forEach(function(t,n){a[++e]=[n,t]}),a}var hn=ln;function pn(r){var e=-1,a=Array(r.size);return r.forEach(function(t){a[++e]=t}),a}var dn=pn,cr=Z,vr=vn,$n=V,gn=zr,yn=hn,bn=dn,mn=1,An=2,Cn="[object Boolean]",Tn="[object Date]",En="[object Error]",On="[object Map]",Sn="[object Number]",In="[object RegExp]",Pn="[object Set]",wn="[object String]",Dn="[object Symbol]",xn="[object ArrayBuffer]",Mn="[object DataView]",lr=cr?cr.prototype:void 0,q=lr?lr.valueOf:void 0;function Ln(r,e,a,t,n,i,s){switch(a){case Mn:if(r.byteLength!=e.byteLength||r.byteOffset!=e.byteOffset)return!1;r=r.buffer,e=e.buffer;case xn:return!(r.byteLength!=e.byteLength||!i(new vr(r),new vr(e)));case Cn:case Tn:case Sn:return $n(+r,+e);case En:return r.name==e.name&&r.message==e.message;case In:case wn:return r==e+"";case On:var u=yn;case Pn:var f=t&mn;if(u||(u=bn),r.size!=e.size&&!f)return!1;var o=s.get(r);if(o)return o==e;t|=An,s.set(r,e);var p=gn(u(r),u(e),t,n,i,s);return s.delete(r),p;case Dn:if(q)return q.call(r)==q.call(e)}return!1}var Nn=Ln,Fn=Fr,Gn=A;function Rn(r,e,a){var t=e(r);return Gn(r)?t:Fn(t,a(r))}var Hn=Rn;function Bn(r,e){for(var a=-1,t=r==null?0:r.length,n=0,i=[];++a<t;){var s=r[a];e(s,a,r)&&(i[n++]=s)}return i}var Kn=Bn;function Un(){return[]}var zn=Un,qn=Kn,Xn=zn,Yn=Object.prototype,Zn=Yn.propertyIsEnumerable,hr=Object.getOwnPropertySymbols,Jn=hr?function(r){return r==null?[]:(r=Object(r),qn(hr(r),function(e){return Zn.call(r,e)}))}:Xn,Qn=Jn;function Wn(r,e){for(var a=-1,t=Array(r);++a<r;)t[a]=e(a);return t}var Vn=Wn,kn=9007199254740991,jn=/^(?:0|[1-9]\d*)$/;function ri(r,e){var a=typeof r;return e=e==null?kn:e,!!e&&(a=="number"||a!="symbol"&&jn.test(r))&&r>-1&&r%1==0&&r<e}var er=ri,ei=Vn,ai=J,ti=A,ni=Lr,ii=er,si=Nr,ui=Object.prototype,fi=ui.hasOwnProperty;function oi(r,e){var a=ti(r),t=!a&&ai(r),n=!a&&!t&&ni(r),i=!a&&!t&&!n&&si(r),s=a||t||n||i,u=s?ei(r.length,String):[],f=u.length;for(var o in r)(e||fi.call(r,o))&&!(s&&(o=="length"||n&&(o=="offset"||o=="parent")||i&&(o=="buffer"||o=="byteLength"||o=="byteOffset")||ii(o,f)))&&u.push(o);return u}var _i=oi,ci=_i,vi=re,li=P;function hi(r){return li(r)?ci(r):vi(r)}var B=hi,pi=Hn,di=Qn,$i=B;function gi(r){return pi(r,$i,di)}var yi=gi,pr=yi,bi=1,mi=Object.prototype,Ai=mi.hasOwnProperty;function Ci(r,e,a,t,n,i){var s=a&bi,u=pr(r),f=u.length,o=pr(e),p=o.length;if(f!=p&&!s)return!1;for(var h=f;h--;){var c=u[h];if(!(s?c in e:Ai.call(e,c)))return!1}var g=i.get(r),$=i.get(e);if(g&&$)return g==e&&$==r;var _=!0;i.set(r,e),i.set(e,r);for(var l=s;++h<f;){c=u[h];var v=r[c],d=e[c];if(t)var b=s?t(d,v,c,e,r,i):t(v,d,c,r,e,i);if(!(b===void 0?v===d||n(v,d,a,t,i):b)){_=!1;break}l||(l=c=="constructor")}if(_&&!l){var m=r.constructor,C=e.constructor;m!=C&&"constructor"in r&&"constructor"in e&&!(typeof m=="function"&&m instanceof m&&typeof C=="function"&&C instanceof C)&&(_=!1)}return i.delete(r),i.delete(e),_}var Ti=Ci,X=Ur,Ei=zr,Oi=Nn,Si=Ti,dr=ee,$r=A,gr=Lr,Ii=Nr,Pi=1,yr="[object Arguments]",br="[object Array]",M="[object Object]",wi=Object.prototype,mr=wi.hasOwnProperty;function Di(r,e,a,t,n,i){var s=$r(r),u=$r(e),f=s?br:dr(r),o=u?br:dr(e);f=f==yr?M:f,o=o==yr?M:o;var p=f==M,h=o==M,c=f==o;if(c&&gr(r)){if(!gr(e))return!1;s=!0,p=!1}if(c&&!p)return i||(i=new X),s||Ii(r)?Ei(r,e,a,t,n,i):Oi(r,e,f,a,t,n,i);if(!(a&Pi)){var g=p&&mr.call(r,"__wrapped__"),$=h&&mr.call(e,"__wrapped__");if(g||$){var _=g?r.value():r,l=$?e.value():e;return i||(i=new X),n(_,l,a,t,i)}}return c?(i||(i=new X),Si(r,e,a,t,n,i)):!1}var xi=Di,Mi=xi,Ar=Dr;function qr(r,e,a,t,n){return r===e?!0:r==null||e==null||!Ar(r)&&!Ar(e)?r!==r&&e!==e:Mi(r,e,a,t,qr,n)}var Xr=qr,Li=Ur,Ni=Xr,Fi=1,Gi=2;function Ri(r,e,a,t){var n=a.length,i=n,s=!t;if(r==null)return!i;for(r=Object(r);n--;){var u=a[n];if(s&&u[2]?u[1]!==r[u[0]]:!(u[0]in r))return!1}for(;++n<i;){u=a[n];var f=u[0],o=r[f],p=u[1];if(s&&u[2]){if(o===void 0&&!(f in r))return!1}else{var h=new Li;if(t)var c=t(o,p,f,r,e,h);if(!(c===void 0?Ni(p,o,Fi|Gi,t,h):c))return!1}}return!0}var Hi=Ri,Bi=Q;function Ki(r){return r===r&&!Bi(r)}var Yr=Ki,Ui=Yr,zi=B;function qi(r){for(var e=zi(r),a=e.length;a--;){var t=e[a],n=r[t];e[a]=[t,n,Ui(n)]}return e}var Xi=qi;function Yi(r,e){return function(a){return a==null?!1:a[r]===e&&(e!==void 0||r in Object(a))}}var Zr=Yi,Zi=Hi,Ji=Xi,Qi=Zr;function Wi(r){var e=Ji(r);return e.length==1&&e[0][2]?Qi(e[0][0],e[0][1]):function(a){return a===r||Zi(a,r,e)}}var Vi=Wi,ki=rr;function ji(r,e,a){var t=r==null?void 0:ki(r,e);return t===void 0?a:t}var rs=ji;function es(r,e){return r!=null&&e in Object(r)}var as=es,ts=Kr,ns=J,is=A,ss=er,us=ae,fs=H;function os(r,e,a){e=ts(e,r);for(var t=-1,n=e.length,i=!1;++t<n;){var s=fs(e[t]);if(!(i=r!=null&&a(r,s)))break;r=r[s]}return i||++t!=n?i:(n=r==null?0:r.length,!!n&&us(n)&&ss(s,n)&&(is(r)||ns(r)))}var _s=os,cs=as,vs=_s;function ls(r,e){return r!=null&&vs(r,e,cs)}var hs=ls,ps=Xr,ds=rs,$s=hs,gs=W,ys=Yr,bs=Zr,ms=H,As=1,Cs=2;function Ts(r,e){return gs(r)&&ys(e)?bs(ms(r),e):function(a){var t=ds(a,r);return t===void 0&&t===e?$s(a,r):ps(e,t,As|Cs)}}var Es=Ts;function Os(r){return r}var K=Os;function Ss(r){return function(e){return e==null?void 0:e[r]}}var Is=Ss,Ps=rr;function ws(r){return function(e){return Ps(e,r)}}var Ds=ws,xs=Is,Ms=Ds,Ls=W,Ns=H;function Fs(r){return Ls(r)?xs(Ns(r)):Ms(r)}var Gs=Fs,Rs=Vi,Hs=Es,Bs=K,Ks=A,Us=Gs;function zs(r){return typeof r=="function"?r:r==null?Bs:typeof r=="object"?Ks(r)?Hs(r[0],r[1]):Rs(r):Us(r)}var ar=zs;function qs(r){return function(e,a,t){for(var n=-1,i=Object(e),s=t(e),u=s.length;u--;){var f=s[r?u:++n];if(a(i[f],f,i)===!1)break}return e}}var Xs=qs,Ys=Xs,Zs=Ys(),Js=Zs,Qs=Js,Ws=B;function Vs(r,e){return r&&Qs(r,e,Ws)}var ks=Vs,js=P;function ru(r,e){return function(a,t){if(a==null)return a;if(!js(a))return r(a,t);for(var n=a.length,i=e?n:-1,s=Object(a);(e?i--:++i<n)&&t(s[i],i,s)!==!1;);return a}}var eu=ru,au=ks,tu=eu,nu=tu(au),iu=nu,su=iu,uu=P;function fu(r,e){var a=-1,t=uu(r)?Array(r.length):[];return su(r,function(n,i,s){t[++a]=e(n,i,s)}),t}var ou=fu;function _u(r,e){var a=r.length;for(r.sort(e);a--;)r[a]=r[a].value;return r}var cu=_u,Cr=w;function vu(r,e){if(r!==e){var a=r!==void 0,t=r===null,n=r===r,i=Cr(r),s=e!==void 0,u=e===null,f=e===e,o=Cr(e);if(!u&&!o&&!i&&r>e||i&&s&&f&&!u&&!o||t&&s&&f||!a&&f||!n)return 1;if(!t&&!i&&!o&&r<e||o&&a&&n&&!t&&!i||u&&a&&n||!s&&n||!f)return-1}return 0}var lu=vu,hu=lu;function pu(r,e,a){for(var t=-1,n=r.criteria,i=e.criteria,s=n.length,u=a.length;++t<s;){var f=hu(n[t],i[t]);if(f){if(t>=u)return f;var o=a[t];return f*(o=="desc"?-1:1)}}return r.index-e.index}var du=pu,Y=Rr,$u=rr,gu=ar,yu=ou,bu=cu,mu=te,Au=du,Cu=K,Tu=A;function Eu(r,e,a){e.length?e=Y(e,function(i){return Tu(i)?function(s){return $u(s,i.length===1?i[0]:i)}:i}):e=[Cu];var t=-1;e=Y(e,mu(gu));var n=yu(r,function(i,s,u){var f=Y(e,function(o){return o(i)});return{criteria:f,index:++t,value:i}});return bu(n,function(i,s){return Au(i,s,a)})}var Ou=Eu;function Su(r,e,a){switch(a.length){case 0:return r.call(e);case 1:return r.call(e,a[0]);case 2:return r.call(e,a[0],a[1]);case 3:return r.call(e,a[0],a[1],a[2])}return r.apply(e,a)}var Iu=Su,Pu=Iu,Tr=Math.max;function wu(r,e,a){return e=Tr(e===void 0?r.length-1:e,0),function(){for(var t=arguments,n=-1,i=Tr(t.length-e,0),s=Array(i);++n<i;)s[n]=t[e+n];n=-1;for(var u=Array(e+1);++n<e;)u[n]=t[n];return u[e]=a(s),Pu(r,this,u)}}var Du=wu;function xu(r){return function(){return r}}var Mu=xu,Lu=xr,Nu=function(){try{var r=Lu(Object,"defineProperty");return r({},"",{}),r}catch(e){}}(),Fu=Nu,Gu=Mu,Er=Fu,Ru=K,Hu=Er?function(r,e){return Er(r,"toString",{configurable:!0,enumerable:!1,value:Gu(e),writable:!0})}:Ru,Bu=Hu,Ku=800,Uu=16,zu=Date.now;function qu(r){var e=0,a=0;return function(){var t=zu(),n=Uu-(t-a);if(a=t,n>0){if(++e>=Ku)return arguments[0]}else e=0;return r.apply(void 0,arguments)}}var Xu=qu,Yu=Bu,Zu=Xu,Ju=Zu(Yu),Qu=Ju,Wu=K,Vu=Du,ku=Qu;function ju(r,e){return ku(Vu(r,e,Wu),r+"")}var rf=ju,ef=V,af=P,tf=er,nf=Q;function sf(r,e,a){if(!nf(a))return!1;var t=typeof e;return(t=="number"?af(a)&&tf(e,a.length):t=="string"&&e in a)?ef(a[e],r):!1}var uf=sf,ff=he,of=Ou,_f=rf,Or=uf,cf=_f(function(r,e){if(r==null)return[];var a=e.length;return a>1&&Or(r,e[0],e[1])?e=[]:a>2&&Or(e[0],e[1],e[2])&&(e=[e[0]]),of(r,ff(e,1),[])}),vf=cf;const lf=wr(vf);var hf=ar,pf=P,df=B;function $f(r){return function(e,a,t){var n=Object(e);if(!pf(e)){var i=hf(a);e=df(e),a=function(u){return i(n[u],u,n)}}var s=r(e,a,t);return s>-1?n[i?e[s]:s]:void 0}}var gf=$f;function yf(r,e,a,t){for(var n=r.length,i=a+(t?1:-1);t?i--:++i<n;)if(e(r[i],i,r))return i;return-1}var bf=yf,mf=/\s/;function Af(r){for(var e=r.length;e--&&mf.test(r.charAt(e)););return e}var Cf=Af,Tf=Cf,Ef=/^\s+/;function Of(r){return r&&r.slice(0,Tf(r)+1).replace(Ef,"")}var Sf=Of,If=Sf,Sr=Q,Pf=w,Ir=NaN,wf=/^[-+]0x[0-9a-f]+$/i,Df=/^0b[01]+$/i,xf=/^0o[0-7]+$/i,Mf=parseInt;function Lf(r){if(typeof r=="number")return r;if(Pf(r))return Ir;if(Sr(r)){var e=typeof r.valueOf=="function"?r.valueOf():r;r=Sr(e)?e+"":e}if(typeof r!="string")return r===0?r:+r;r=If(r);var a=Df.test(r);return a||xf.test(r)?Mf(r.slice(2),a?2:8):wf.test(r)?Ir:+r}var Nf=Lf,Ff=Nf,Pr=1/0,Gf=17976931348623157e292;function Rf(r){if(!r)return r===0?r:0;if(r=Ff(r),r===Pr||r===-Pr){var e=r<0?-1:1;return e*Gf}return r===r?r:0}var Hf=Rf,Bf=Hf;function Kf(r){var e=Bf(r),a=e%1;return e===e?a?e-a:e:0}var Uf=Kf,zf=bf,qf=ar,Xf=Uf,Yf=Math.max;function Zf(r,e,a){var t=r==null?0:r.length;if(!t)return-1;var n=a==null?0:Xf(a);return n<0&&(n=Yf(t+n,0)),zf(r,qf(e),n)}var Jf=Zf,Qf=gf,Wf=Jf,Vf=Qf(Wf),kf=Vf;const jf=wr(kf);function no(r){const e=Jr();let a=tr({});const t=D(-1),n=tr({}),i=D(-1),s=D([]),u=Qr(),f=D(""),o=()=>Vr(a.getID(),u),p=()=>u.push(f.value),h=()=>lf(s.value,({username:_})=>_).map(_=>{var v,d;let l="".concat(_.username);if(!ne((v=_==null?void 0:_.person)==null?void 0:v.names)){const[b]=((d=_.person)==null?void 0:d.names)||[];l+=" (".concat(b.given_name," ").concat(b.family_name,")")}return l}),c=async(_="N/A")=>{const l=await z.get("PATIENT_PROGRAM",{patientID:a.getID()});n.outcome=l.outcome,n.outcomeStartDate=l.startDate,n.sessionDate=x.getSessionDate(),n.apiDate=x.getCachedApiDate(),n.isBdeMode=x.isBDE(),n.birthDate=a.getBirthdate(),n.encounterName=_.toUpperCase(),x.isBDE()&&(s.value=await z.get("PROVIDERS"),n.providers=h())},g=(_,l=null)=>{const v={};if(v[T.SET_PROVIDER]=d=>{var m,C;const[b]=d.split(" ");return i.value=(C=(m=jf(s.value,{username:b}))==null?void 0:m.person_id)!=null?C:-1,T.CONTINUE},v[T.CHANGE_SESSION_DATE]=()=>(u.push("/session/date?patient_dashboard_redirection_id=".concat(a.getID())),T.EXIT),v[T.CHANGE_PATIENT_OUTCOME]=()=>(u.push("/patient/programs/".concat(a.getID())),T.EXIT),v[T.GO_TO_PATIENT_DASHBOARD]=()=>(p(),T.EXIT),_ in v)return v[_](l)},$=async _=>{var v,d,b,m;const l=se(_,ie);for(const C in l){const y=l[C];if((v=y==null?void 0:y.actions)!=null&&v.alert&&g(await((d=y==null?void 0:y.actions)==null?void 0:d.alert(_)))===T.EXIT)return;if((b=y==null?void 0:y.actions)!=null&&b.selection){const U=await((m=y==null?void 0:y.actions)==null?void 0:m.selection(_));g(U.flowState,U.value)}}};return Wr(async()=>{try{t.value=parseInt(e.params.patient_id),f.value="/patient/dashboard/".concat(t.value),a=await z.get("ACTIVE_PATIENT",{patientID:t.value}),await c(e.name),await $(n),typeof r=="function"&&r(i.value,t.value,a,n)}catch(_){console.error("Error in useEncounter hook:",_)}}),{patient:a,patientId:t,provider:i,providers:s,facts:n,patientDashboardUrl:f,goToPatientDashboard:p,goToNextTask:o}}export{no as u};
