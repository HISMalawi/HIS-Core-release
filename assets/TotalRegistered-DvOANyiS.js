import{d as A,v as R,m as $,o as y,aF as E,r as o,H as C,cv as w,an as f,ao as d,cw as l,z as G,am as P,ar as p,a as S,b as F,w as V,e as _}from"./index-qFt4YszW.js";import{v as B}from"./TableView-DCRvAcCp.js";import{A as I}from"./aetc_report_service-KXkaEETd.js";import"./Export-CDLTNdY8.js";import"./index-BckLFmVa.js";const c=o([]),n=o(""),s=o(""),b=o(""),M=o(!1),h=o(""),T=o(""),Q=A({components:{IonPage:$,IonLoading:R,v2Datatable:B},setup(){const t=async()=>{const e=new I;e.startDate=n.value,e.endDate=s.value,e.ageGroup=T.value;try{const a=await e.getClinicReport("TOTAL_REGISTERED");c.value=v(a)}catch(a){console.log(a)}},v=e=>e.map(a=>{const{given_name:r,family_name:u,registration_date:D,gender:L}=a;return{name:"".concat(r," ").concat(u),birthdate:a.birthdate,gender:w(L),registration_date:C.toStandardHisDisplayFormat(D),address:a.address,ta:a.ta}}),m=["Name","Birthdate","Gender","Date Registered","Address","T.A"],g=[[{label:"Name",ref:"",value:e=>e.name},{label:"Birthdate",ref:"",value:e=>e.birthdate},{label:"Gender",ref:"",value:e=>e.gender},{label:"Date Registered",ref:"",value:e=>e.registration_date},{label:"Address",ref:"",value:e=>e.address},{label:"T.A",ref:"",value:e=>e.ta}]],i=()=>E([{id:"start_date",helpText:"Start Date",type:d.TT_FULL_DATE,validation:e=>f.required(e),computedValue:e=>e.value},{id:"end_date",helpText:"End Date",type:d.TT_FULL_DATE,validation:e=>f.required(e),computedValue:e=>e.value},{id:"age_group",helpText:"Select Age Group(s)",type:d.TT_MULTIPLE_SELECT,config:{showKeyboard:!1},computedValue:e=>e.map(a=>a.value),validation(e){return e?null:["Value is required"]},options:()=>[{label:"< 6 months",value:"< 6 months"},{label:"6 months to < 1 yr",value:"6 months to < 1 yr"},{label:"1 to < 5",value:"1 to < 5"},{label:"5 to 14",value:"5 to 14"},{label:"> 14 to < 20",value:"> 14 to < 20"},{label:"20 to 30",value:"20 to 30"},{label:">30 to <40",value:">30 to <40"},{label:"40 to <50",value:"40 to <50"},{label:"ALL",value:"all"}]}],(e,a)=>{n.value=a.start_date,s.value=a.end_date,T.value="[".concat(a.age_group.map(r=>'"'.concat(r,'"')).join(", "),"]"),b.value="Period (".concat(l(n.value)," to ").concat(l(s.value),")"),G.dismiss(),h.value="".concat(l(n.value)," to ").concat(l(s.value)),t()});return y(()=>!c.value.length&&i()),{columns:g,isLoading:M,reportData:c,period:b,csvQuarter:h,csvheaders:m,generate:t,configure:i}}});function q(t,v,m,g,i,e){const a=p("ion-loading"),r=p("v2Datatable"),u=p("ion-page");return F(),S(u,null,{default:V(()=>[_(a,{"is-open":t.isLoading,message:"Please wait..."},null,8,["is-open"]),_(r,{title:"AETC Total Registered Report",subtitle:t.period,columns:t.columns,columnData:t.reportData,rowsPerPage:25,onConfigure:t.configure,csvQuarter:t.csvQuarter,headers:t.csvheaders,onRefresh:()=>t.generate()},null,8,["subtitle","columns","columnData","onConfigure","csvQuarter","headers","onRefresh"])]),_:1})}const z=P(Q,[["render",q]]);export{z as default};
