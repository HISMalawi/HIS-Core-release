import{d as h,I as C,c4 as b,K as d,N as v,a9 as y,O as u,t as w,q as M,_ as P,r as f,o as F,c as H,w as R,b as D}from"./index-CZt4BSQf.js";import{v as $}from"./TableView-C8o_21mI.js";import{D as A}from"./ReportDateSelectionPrompt-CCj93Z_u.js";import{C as N}from"./clinic_report_service-D-NKz87_.js";import{H as S}from"./HypertensionDrilldown-D-V6XQaQ.js";import"./PopupKeyboard-C2hbPSQN.js";import"./SIngleTouchField-CGdD-Bed.js";import"./dynamic-import-helper-Bsjrd6Ro.js";import"./TouchScreenForm-JVgeEWDh.js";import"./ToolbarMediumCard-CyRn44E2.js";import"./Transformers-BPPLlH12.js";import"./ViewPort-DiinNO5i.js";import"./HisKeypad-D1QfKPv7.js";import"./BaseKeyboard-BW_XulZF.js";import"./KbLayouts-VRA-vjeH.js";import"./KbHandler-BuQ4TFU6.js";import"./fuse-YdZE3OCN.js";import"./Export-BOa-_uep.js";import"./HisKeyboard-DJ3XMwgb.js";import"./HisKbConfigurations-GhFQZvlg.js";import"./MultiFieldDateHelper-BeQr4Gt4.js";const B=h({components:{IonPage:C,IonLoading:b,v2Datatable:$},setup(){const r=y("reports.png"),l=d([]),s=d(""),p=d(!1),a=new N,e=(n,t)=>({label:n,ref:t,toValue:o=>o.length,tdClick:o=>c("".concat(o.column.label),o.refData)}),g=[[{label:"#",ref:"index"},{label:"Age group",ref:"age_group"},{label:"Gender",ref:"gender"},e("Due for BP screening","due_screening"),e("Screened for HP","screened"),e("Normal <140/<90","normal_reading"),e("Mild 140-159/90-99","mild_reading"),e("Moderate 160-180/100-110","moderate_reading"),e("Severe >180/>110","severe_reading"),e("Hydrochlorothiazide 25mg","hydrochlorothiazide_25mg"),e("Amlodipine 5mg","amlodipine_5mg"),e("Amlodipine 10 mg","amlodipine_10mg"),e("Captopril 25mg","captopril_25mg"),e("Captopril 6-25mg","captopril_6_25mg"),e("Captopril 12-5mg","captopril_12_5mg"),e("Captopril 50mg","captopril_50mg"),e("Enalapril 5 mg","enalapril_5mg"),e("Enalapril 10mg","enalapril_10mg"),e("Atenolol 50mg","atenolol_50mg"),e("Atenolol 100mg","atenolol_100mg"),e("Nifedipine 10mg","nifedipine_10mg"),e("Nifedipine 20mg","nifedipine_20mg"),e("Total (regimen)","total_regimen")]],c=async(n,t)=>{t.length&&(await u.create({component:S,backdropDismiss:!1,cssClass:"large-modal",componentProps:{title:n,subtitle:s,patients:t,onFinish:()=>u.getTop().then(o=>o&&u.dismiss())}})).present()},m=async()=>{if(!(a.startDate&&a.endDate))return w("Start date and end date required!");p.value=!0,l.value=[];try{const n=await a.getHypertensionReport(!0),t=Object.keys(n).reduce((o,i)=>(o.M.push({age_group:i,gender:"Male",...n[i].M}),o.F.push({age_group:i,gender:"Female",...n[i].F}),o),{F:[],M:[]});l.value=t.F.concat(t.M).map((o,i)=>({index:i+1,...o}))}catch(n){M("Unable to generate report!"),console.error(n)}p.value=!1},_=()=>A({onFinish:(n,t,o)=>{s.value="Period (".concat(o,")"),a.startDate=n,a.endDate=t,m()}});return v(()=>_()),{logo:r,reportData:l,isLoading:p,configure:_,generate:m,columns:g,period:s}}});function I(r,l,s,p,a,e){const g=f("ion-loading"),c=f("v2Datatable"),m=f("ion-page");return F(),H(m,null,{default:R(()=>[D(g,{"is-open":r.isLoading,message:"Please wait..."},null,8,["is-open"]),D(c,{title:"Hypertension Report","icon-url":r.logo,subtitle:r.period,columns:r.columns,columnData:r.reportData,rowsPerPage:30,onConfigure:r.configure,onRefresh:()=>r.generate(),"report-prefix":"Clinic"},null,8,["icon-url","subtitle","columns","columnData","onConfigure","onRefresh"])]),_:1})}const ne=P(B,[["render",I]]);export{ne as default};
