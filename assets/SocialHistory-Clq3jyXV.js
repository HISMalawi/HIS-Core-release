import{d as n,t as a,U as r,F as o,V as s,_ as u,r as d,o as c,c as h}from"./index-CZ5Jg0n0.js";import{H as y}from"./HisStandardForm-B3BJzCdf.js";import{_ as p}from"./EncounterMixin.vue_vue_type_script_lang-ghA-Vd8p.js";import{S as m}from"./social_history_service-Bre-FzW8.js";import"./encounter_guidelines-Dpkw575K.js";import"./GuidelineEngine-D6V1_Znr.js";const v=n({mixins:[p],components:{HisStandardForm:y},data:()=>({socialHistory:{},obs:[]}),watch:{ready:{async handler(e){e&&(this.socialHistory=new m(this.patientID,this.providerID),this.fields=await this.getFields())},immediate:!0}},methods:{async onFinish(){if(!await this.socialHistory.createEncounter())return a("Unable to create encounter");const i=await Promise.all([...this.obs]);if(!await this.socialHistory.saveObservationList(i))return a("Unable to save patient observations");r("Observations and encounter created!"),this.nextTask()},getFields(){return[{id:"smoking_history",helpText:"Have you ever smoked cigarettes?",type:o.TT_SELECT,validation:e=>s.required(e),options:()=>[{label:"Yes",value:"Yes"},{label:"No",value:"No"}],unload:async e=>{this.obs.push(this.socialHistory.buildValueCoded("SMOKE_HIS",e.value))}},{id:"number_of_cigarettes",helpText:"Number of cigarettes smoked per day",type:o.TT_NUMBER,validation:e=>s.rangeOf(e,1,90),condition(e){return e.smoking_history.value==="Yes"},unload:async e=>{this.obs.push(this.socialHistory.buildValueNumber("Number of cigarettes smoked per day",e.value))}},{id:"smoking_duration",helpText:"How long have you been smoking?",type:o.TT_SELECT,validation:e=>s.required(e),condition(e){return e.smoking_history.value==="Yes"},options:()=>[{label:"Less than five years",value:"Less than five years"},{label:"Five years or more",value:"Five years or more"}],unload:async e=>{this.obs.push(this.socialHistory.buildValueText("Smoking duration",e.value))}},{id:"current_smoker",helpText:"Do you still smoke?",type:o.TT_SELECT,validation:e=>s.required(e),condition(e){return e.smoking_history.value==="Yes"},options:()=>[{label:"Yes",value:"Yes"},{label:"No",value:"No"}],unload:async e=>{this.obs.push(this.socialHistory.buildValueCoded("Current smoker",e.value))}},{id:"alcohol_history",helpText:"Do you drink alcohol?",type:o.TT_SELECT,validation:e=>s.required(e),options:()=>[{label:"Yes",value:"Yes"},{label:"No",value:"No"}],unload:async e=>{this.obs.push(this.socialHistory.buildValueCoded("Does the patient drink alcohol?",e.value))}},{id:"number_of_drinks",helpText:"How many alcoholic drinks do you have per day?",type:o.TT_NUMBER,validation:e=>s.required(e),condition(e){return e.alcohol_history.value==="Yes"},unload:async e=>{this.obs.push(this.socialHistory.buildValueNumber("Alcoholic drinks per day",e.value))}},{id:"number_of_days_drank",helpText:"Number of days per week alcohol is used?",type:o.TT_NUMBER,validation:e=>s.rangeOf(e,1,7),condition(e){return e.alcohol_history.value==="Yes"},unload:async e=>{this.obs.push(this.socialHistory.buildValueNumber("Number of days per week alcohol is used",e.value))}},{id:"exercise",helpText:"Do you do any physical exercise?",type:o.TT_SELECT,validation:e=>s.required(e),options:()=>[{label:"Yes",value:"Yes"},{label:"No",value:"No"}],unload:async e=>{this.obs.push(this.socialHistory.buildValueCoded("Physical Exercises",e.value))}},{id:"employment",helpText:"Type of employment?",type:o.TT_SELECT,validation:e=>s.required(e),options:()=>[{label:"Active",value:"Active"},{label:"Sedentary",value:"Sedentary"}],unload:async e=>{this.obs.push(this.socialHistory.buildValueText("Type of employment",e.value))}}]}}});function b(e,i,t,T,_,f){const l=d("his-standard-form");return c(),h(l,{fields:e.fields,onFinishAction:e.onFinish,skipSummary:!1,cancelDestinationPath:e.cancelDestination},null,8,["fields","onFinishAction","cancelDestinationPath"])}const x=u(v,[["render",b]]);export{x as default};
