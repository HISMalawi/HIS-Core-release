System.register(["./EncounterMixin.vue_vue_type_script_lang-legacy-rPdlUSmp.js","./index-legacy-C29Eb2Qm.js","./htn_service-legacy-Cc4RDA95.js","./RiskFactorModal-legacy-exIn4gN4.js","./encounter_guidelines-legacy-BDiBaLGJ.js","./GuidelineEngine-legacy-KsvQuFdF.js","./HisStandardForm-legacy-BpfFI5_j.js","./TouchScreenForm-legacy-BmEuIwWy.js","./dynamic-import-helper-legacy-DYK5bIOV.js","./ToolbarMediumCard-legacy-CF38wqjC.js","./Transformers-legacy-DhNYVLaS.js","./ViewPort-legacy-CDi_rmkw.js"],(function(t,e){"use strict";var s,a,n,i,o,l,r,c,d,h,u,p,g,y,m,B,P,f,w,v,k,b,_,D,T,F,j,x,C,R;return{setters:[t=>{s=t._},t=>{a=t.d,n=t.m,i=t.l,o=t.I,l=t.f,r=t.i,c=t.O,d=t.ab,h=t.aS,u=t.aT,p=t.aN,g=t.cn,y=t._,m=t.r,B=t.o,P=t.c,f=t.w,w=t.b,v=t.x,k=t.a0,b=t.bl,_=t.A,D=t.v,T=t.u,F=t.z,j=t.a3,x=t.a4},t=>{C=t.B},t=>{R=t.R},null,null,null,null,null,null,null,null],execute:function(){var e=document.createElement("style");e.textContent="div[data-v-532665e1]{color:gray}.bp[data-v-532665e1]{color:red;font-style:italic}.name[data-v-532665e1]{color:#00f;font-style:italic}.green[data-v-532665e1]{width:170px}\n",document.head.appendChild(e);const I=a({mixins:[s],components:{IonFooter:n,IonContent:i,IonPage:o,IonButton:l,IonToolbar:r},data:()=>({sysBp:0,dsBP:0,riskFactors:[],patientOnBpDrugs:!1,isPregnant:!1,systolicThreshold:145,diastolicTheshold:94}),methods:{async showRiskFactors(){const t=await c.create({component:R,backdropDismiss:!1,cssClass:"large-modal",componentProps:{factors:this.riskFactors}});t.present();const{data:e}=await t.onDidDismiss();d.isEmpty(e)||this.nextTask()},async getRiskFactors(){const t=h.getConceptsByCategory("risk factors").map((async t=>{const e=await u.getFirstValueCoded(this.patientID,t.name);return{concept:t.name,value:e}}));return Promise.all(t)},recaptureBp(){this.$router.push(`/art/encounters/vitals/${this.patientID}?vital_options=BP`)}},watch:{ready:{async handler(t){if(!t)return;const e=await p.create({message:"Verifying Blood Pressure...",backdropDismiss:!1});await e.present();const s=new C(this.patientID,this.providerID);this.riskFactors=await this.getRiskFactors(),this.systolicThreshold=await g.systolicThreshold()||145,this.diastolicTheshold=await g.diastolicThreshold()||94,this.dsBP=await s.getDiastolicBp()||0,this.sysBp=await s.getSystolicBp()||0,this.patientOnBpDrugs=await s.onBpDrugs()||!1,this.isPregnant=this.patient.isChildBearing()&&await this.patient.isPregnant()||!1,p.dismiss()},immediate:!0}},computed:{patientName(){return this.ready?this.patient.getFullName():"Patient"},hasPressureReading(){return this.sysBp>0&&this.dsBP>0},highBP(){return(this.sysBp>=this.systolicThreshold&&this.dsBP>=this.diastolicTheshold||this.dsBP>=this.diastolicTheshold)&&!this.isPregnant}}}),N=t=>(j("data-v-532665e1"),t=t(),x(),t),E=N((()=>_("h1",{class:"ion-text-center"}," High BP Alert ",-1))),S={key:0,class:"vertically-align ion-text-center"},O={style:{"font-weight":"bold"}},z={class:"name"},M={class:"bp"},V=N((()=>_("br",null,null,-1))),A=N((()=>_("span",null,[T(" Retesting BP is "),_("span",{style:{"font-weight":"bold",color:"#000000","text-decoration":"underline"}},"optional"),T(". "),_("br"),T(" Do you want to test BP? ")],-1))),G={key:1,class:"vertically-align ion-text-center"},H=N((()=>_("br",null,null,-1))),$=N((()=>_("h1",null," Do you want to test BP? ",-1)));t("default",y(I,[["render",function(t,e,s,a,n,i){const o=m("ion-content"),l=m("ion-button"),r=m("ion-toolbar"),c=m("ion-footer"),d=m("ion-page");return B(),P(d,null,{default:f((()=>[w(o,null,{default:f((()=>[E,t.hasPressureReading?(B(),v("div",S,[k(_("h2",O," (Patient already on BP drugs) ",512),[[b,t.patientOnBpDrugs]]),_("h2",null,[_("span",z,D(t.patientName),1),T(" has "),k(_("span",null," a high ",512),[[b,t.highBP]]),T(" blood pressure of "),_("span",M,D(t.sysBp)+" / "+D(t.dsBP),1),V,A])])):F("",!0),t.hasPressureReading?F("",!0):(B(),v("div",G,[T(" No BP Reading found "),H,$]))])),_:1}),w(c,null,{default:f((()=>[w(r,{color:"dark"},{default:f((()=>[w(l,{onClick:e[0]||(e[0]=()=>t.hasPressureReading?t.showRiskFactors():t.nextTask()),size:"large",color:"danger",slot:"start"},{default:f((()=>[T(" No ")])),_:1}),w(l,{onClick:t.recaptureBp,size:"large",color:"success",slot:"end"},{default:f((()=>[T(" Yes ")])),_:1},8,["onClick"])])),_:1})])),_:1})])),_:1})}],["__scopeId","data-v-532665e1"]]))}}}));
