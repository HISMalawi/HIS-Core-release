System.register(["./index-legacy-rttSvejT.js","./TableView-legacy-oMn9Ggvm.js","./cxca_report_service-legacy-CvEFVWfC.js","./DrillPatientIds-legacy-CDg38IyB.js","./PopupKeyboard-legacy-BOgFzgjz.js","./dynamic-import-helper-legacy-DYK5bIOV.js","./Export-legacy-JlE06KUk.js","./TableView-legacy-RACLt4mv.js","./fuse-legacy-CQoBB3MK.js","./HisKeyboard-legacy-f-J1EiOZ.js","./HisKbConfigurations-legacy-vrLd9Pgz.js","./KbLayouts-legacy-BKvPSxzZ.js","./BaseKeyboard-legacy-CJP1DHRk.js","./KbHandler-legacy-De8o5nTq.js","./SIngleTouchField-legacy-CsZFin28.js","./TouchScreenForm-legacy-Bt9NJZEE.js","./ToolbarMediumCard-legacy-Bi2VVsZ_.js","./Transformers-legacy-DhNYVLaS.js","./ViewPort-legacy-BdWinx1S.js","./HisKeypad-legacy-CTeETJ49.js"],(function(e,a){"use strict";var l,r,t,o,n,d,s,c,u,g,f,i,p,y,b,h,v,_,m,L,C,$,T,R,A;return{setters:[e=>{l=e.d,r=e.I,t=e.c4,o=e.N,n=e.K,d=e.t,s=e.q,c=e.a$,u=e.cb,g=e.O,f=e.ab,i=e.V,p=e.H,y=e.S,b=e._,h=e.r,v=e.o,_=e.c,m=e.w,L=e.b},e=>{C=e.v},e=>{$=e.C},e=>{T=e.D},e=>{R=e.M},e=>{A=e.F},null,null,null,null,null,null,null,null,null,null,null,null,null,null],execute:function(){const a=n([]),D=n(""),P=n(""),I=n(""),k=n(!1),S=n(""),V=l({components:{IonPage:r,IonLoading:t,v2Datatable:C},setup(){const e=e=>e.map((e=>{const{age_group:a,...l}=e;return{...l,age_group:a}})),l=e=>{const a=[];for(const l in e){const r={};r[l]=e[l],a.push(r)}return a},r=async(e,a)=>{a.length<=0||(await g.create({component:T,backdropDismiss:!1,cssClass:"large-modal",componentProps:{title:e,subtitle:I,patientIdentifiers:a,onFinish:()=>g.getTop().then((e=>e&&g.dismiss()))}})).present()},t=[[{label:"Facility:",ref:""},{label:"Month/Year:",ref:"",span:{thColspan:3}},{label:"Report Officer:",ref:"",span:{thColspan:4}}],[{label:"Age Disaggregate:",ref:"data.age_group",value:e=>e.age_group},{label:"Cryotherapy",ref:"data.cryotherapy.length",secondaryLabel:"1st screened (cryotherapy)",value:e=>e.cryotherapy.length,tdClick:({column:e,data:a})=>r(`${a.age_group} ${e.secondaryLabel}`,a.cryotherapy)},{label:"Thermocoagulation",ref:"data.thermocoagulation.length",secondaryLabel:"1st screened (thermocoagulation)",value:e=>e.thermocoagulation.length,tdClick:({column:e,data:a})=>r(`${a.age_group} ${e.secondaryLabel}`,a.thermocoagulation)},{label:"LEEP",ref:"data.leep.length",secondaryLabel:"1st screened (LEEP)",value:e=>e.leep.length,tdClick:({column:e,data:a})=>r(`${a.age_group} ${e.secondaryLabel}`,a.leep)},{label:"VIA+Deferred Tx",ref:"data.via_deffered.length",secondaryLabel:"1st screened (VIA Deferred)",value:e=>e.via_deffered.length,tdClick:({column:e,data:a})=>r(`${a.age_group} ${e.secondaryLabel}`,a.via_deffered)},{label:"VIA+ Referred",ref:"data.via_reffered.length",secondaryLabel:"1st screened (VIA Referred)",value:e=>e.via_reffered.length,tdClick:({column:e,data:a})=>r(`${a.age_group} ${e.secondaryLabel}`,a.via_reffered)},{label:"CXCA Suspect Referred",ref:"data.suspected_reffered.length",secondaryLabel:"1st screened (CxCa Suspect Referred)",value:e=>e.suspected_reffered.length,tdClick:({column:e,data:a})=>r(`${a.age_group} ${e.secondaryLabel}`,a.suspected_reffered)}],[{label:"Age Disaggregate:",ref:"data.age_group",value:e=>e.age_group},{label:"Cryotherapy",ref:"data.cryotherapy.length",secondaryLabel:"Rescreened after previous negative (cryotherapy)",value:e=>e.cryotherapy.length,tdClick:({column:e,data:a})=>r(`${a.age_group} ${e.secondaryLabel}`,a.cryotherapy)},{label:"Thermocoagulation",ref:"data.thermocoagulation.length",secondaryLabel:"Rescreened after previous negative (thermocoagulation)",value:e=>e.thermocoagulation.length,tdClick:({column:e,data:a})=>r(`${a.age_group} ${e.secondaryLabel}`,a.thermocoagulation)},{label:"LEEP",ref:"data.leep.length",secondaryLabel:"Rescreened after previous negative (LEEP)",value:e=>e.leep.length,tdClick:({column:e,data:a})=>r(`${a.age_group} ${e.secondaryLabel}`,a.leep)},{label:"VIA+Deferred Tx",ref:"data.via_deffered.length",secondaryLabel:"Rescreened after previous negative (VIA Deferred)",value:e=>e.via_deffered.length,tdClick:({column:e,data:a})=>r(`${a.age_group} ${e.secondaryLabel}`,a.via_deffered)},{label:"VIA+ Referred",ref:"first_time_screened_via_reffered",secondaryLabel:"Rescreened after previous negative (VIA Referred)",value:e=>e.via_reffered.length,tdClick:({column:e,data:a})=>r(`${a.age_group} ${e.secondaryLabel}`,a.via_reffered)},{label:"CXCA Suspect Referred",ref:"data.suspected_reffered.length",secondaryLabel:"Rescreened after previous negative (CxCa Suspect Referred)",value:e=>e.suspected_reffered.length,tdClick:({column:e,data:a})=>r(`${a.age_group} ${e.secondaryLabel}`,a.suspected_reffered)}],[{label:"Age Disaggregate:",ref:"data.age_group",value:e=>e.age_group},{label:"Cryotherapy",ref:"data.cryotherapy.length",secondaryLabel:"Post-treatment follow-up (cryotherapy)",value:e=>e.cryotherapy.length,tdClick:({column:e,data:a})=>r(`${a.age_group} ${e.secondaryLabel}`,a.cryotherapy)},{label:"Thermocoagulation",ref:"data.thermocoagulation.length",secondaryLabel:"Post-treatment follow-up (thermocoagulation)",value:e=>e.thermocoagulation.length,tdClick:({column:e,data:a})=>r(`${a.age_group} ${e.secondaryLabel}`,a.thermocoagulation)},{label:"LEEP",ref:"data.leep.length",secondaryLabel:"Post-treatment follow-up (LEEP)",value:e=>e.leep.length,tdClick:({column:e,data:a})=>r(`${a.age_group} ${e.secondaryLabel}`,a.leep)},{label:"VIA+Deferred Tx",ref:"data.via_deffered.length",secondaryLabel:"Post-treatment follow-up (VIA Deferred)",value:e=>e.via_deffered.length,tdClick:({column:e,data:a})=>r(`${a.age_group} ${e.secondaryLabel}`,a.via_deffered)},{label:"VIA+ Referred",ref:"data.via_reffered.length",secondaryLabel:"Post-treatment follow-up (VIA Referred)",value:e=>e.via_reffered.length,tdClick:({column:e,data:a})=>r(`${a.age_group} ${e.secondaryLabel}`,a.via_reffered)},{label:"CXCA Suspect Referred",ref:"data.suspected_reffered.length",secondaryLabel:"Post-treatment follow-up (CxCa Suspect Referred)",value:e=>e.suspected_reffered.length,tdClick:({column:e,data:a})=>r(`${a.age_group} ${e.secondaryLabel}`,a.suspected_reffered)}],[{label:"1st time Screened",ref:"",exportable:!1,span:{thColspan:7}}],[{label:"Rescreened after previous negative",ref:"",exportable:!1,span:{thColspan:7}}],[{label:"Post-treatment follow-up",ref:"",span:{thColspan:7}}],[{label:"Month Summary",ref:"",span:{thColspan:7}}],[{label:"Total Cryotherapy",ref:"data.total_cyrotherapy.length",secondaryLabel:"Total Cryotherapy",value:e=>e.total_cyrotherapy.length,tdClick:({column:e,data:a})=>r(`${e.secondaryLabel}`,a.total_cyrotherapy)}],[{label:"Total Thermocoagulation",ref:"data.total_thermocoagulation.length",secondaryLabel:"Total Thermocoagulation",value:e=>e.total_thermocoagulation.length,tdClick:({column:e,data:a})=>r(`${e.secondaryLabel}`,a.total_thermocoagulation)}],[{label:"Total LEEP",ref:"data.total_leep.length",secondaryLabel:"Total LEEP",value:e=>e.total_leep.length,tdClick:({column:e,data:a})=>r(`${e.secondaryLabel}`,a.total_leep)}],[{label:"Total # Same Day Tx",ref:"data.total_number_same_day_tx.length",secondaryLabel:"Total # Same Day Tx",value:e=>e.total_number_same_day_tx.length,tdClick:({column:e,data:a})=>r(`${e.secondaryLabel}`,a.total_number_same_day_tx)}],[{label:"Total VIA+ Deferred Tx",ref:"data.total_via_deffered.length",secondaryLabel:"Total VIA+ Deferred Tx",value:e=>e.total_via_deffered.length,tdClick:({column:e,data:a})=>r(`${e.secondaryLabel}`,a.total_via_deffered)}],[{label:"Total VIA+ Referred",ref:"data.total_via_reffered.length",secondaryLabel:"Total VIA+ Referred",value:e=>e.total_via_reffered.length,tdClick:({column:e,data:a})=>r(`${e.secondaryLabel}`,a.total_via_reffered)}],[{label:"Total CXCA Suspect Referred",ref:"data.suspects_reffered.length",secondaryLabel:"Total CXCA Suspect Referred",value:e=>e.suspects_reffered.length,tdClick:({column:e,data:a})=>r(`${e.secondaryLabel}`,a.suspects_reffered)}],[{label:"Total Referred",ref:"data.total_reffered.length",secondaryLabel:"Total Referred",value:e=>e.total_reffered.length,tdClick:({column:e,data:a})=>r(`${e.secondaryLabel}`,a.total_reffered)}]],n=async()=>{if(!D.value||!P.value)return d("Start date and end date required!");k.value=!0,a.value=[];const r=new $;r.startDate=D.value,r.endDate=P.value;try{const t=await r.getClinicReport("MONTHLY CECAP TX");a.value=((a,r)=>{const t=[e(a.first_time_screened),e(a.rescreened_after_prev_visit),e(a.post_treatment_followup)];return t.push(l(r)),t})(t.data,t.totals)}catch(t){s("Unable to generate report!"),console.error(t)}k.value=!1},b=()=>R([{id:"year",helpText:"Select Year",type:A.TT_NUMBER,computedValue:e=>e.value,validation:e=>{const a=f.isPlainObject(e)?e.value:-1;return i.validateSeries([()=>i.required(e),()=>isNaN(parseInt(`${a}`))?["Invalid year"]:null,()=>i.rangeOf(e,2e3,p.getYear(y.getSessionDate()))])}},{id:"month",helpText:"Select Month",type:A.TT_SELECT,validation:e=>i.required(e),computedValue:e=>e.value,options:()=>[{label:"January",value:"01"},{label:"February",value:"02"},{label:"March",value:"03"},{label:"April",value:"04"},{label:"May",value:"05"},{label:"June",value:"06"},{label:"July",value:"07"},{label:"August",value:"08"},{label:"September",value:"09"},{label:"October",value:"10"},{label:"November",value:"11"},{label:"December",value:"12"}]}],(e=>{D.value=`${e.year.value}-${e.month.value}-01`,P.value=c(new Date(D.value).toISOString()).endOf("month").format("YYYY-MM-DD"),I.value=`Period (${u(D.value)} to ${u(P.value)})`,g.dismiss(),S.value=`${u(D.value)} to ${u(P.value)}`,n()}));return o((()=>!a.value.length&&b())),{columns:t,isLoading:k,reportData:a,period:I,csvQuarter:S,generate:n,configure:b,order:["age_group","cryotherapy","thermocoagulation","leep","via_deffered","via_reffered","suspected_reffered"],csvheaders:["Age Disaggregate","Cryotherapy","Thermocoagulation","Leep","VIA + Defferred Tx","VIA + Referred","CxCa Suspect Referred"],spacing:5,subHeaders:[["","","","1st time screened","","",""],["","","","Rescreened after previous negative","","",""],["","","","Post-treatment follow-up","","",""],["","","","Month Summary","","",""]]}}});e("default",b(V,[["render",function(e,a,l,r,t,o){const n=h("ion-loading"),d=h("v2Datatable"),s=h("ion-page");return v(),_(s,null,{default:m((()=>[L(n,{"is-open":e.isLoading,message:"Please wait..."},null,8,["is-open"]),L(d,{title:"CECAP TX Report",subtitle:e.period,columns:e.columns,columnData:e.reportData,rowsPerPage:25,onConfigure:e.configure,csvQuarter:e.csvQuarter,onRefresh:()=>e.generate(),order:e.order,headers:e.csvheaders,"csv-spacing":e.spacing,"csv-sub-header":e.subHeaders},null,8,["subtitle","columns","columnData","onConfigure","csvQuarter","onRefresh","order","headers","csv-spacing","csv-sub-header"])])),_:1})}]]))}}}));
