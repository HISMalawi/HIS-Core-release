import{d as p,I as n,L as e,V as m,cp as i,_ as d,r as a,o as u,c,w as h,b as f}from"./index-DTBWhHAq.js";import{_}from"./ReportMixin.vue_vue_type_script_lang-DMKkoObU.js";import{R as w}from"./TableReportTemplate-B5j2Kf7g.js";import{F as b}from"./dynamic-import-helper-Bsjrd6Ro.js";import"./MultiFieldDateHelper-BWKgkEkB.js";import"./KbLayouts-VRA-vjeH.js";import"./HisKbConfigurations-GhFQZvlg.js";import"./BasicReportTemplate-C7PO5ffp.js";import"./Export-CLFPyxXu.js";import"./SIngleTouchField-0q-gpRlN.js";import"./Pagination-BGJRx45Q.js";import"./HisStandardForm-lonwENLb.js";import"./TouchScreenForm-BeJsJnwt.js";import"./ToolbarMediumCard-wr9sTFDK.js";import"./Transformers-BPPLlH12.js";import"./ViewPort-DbAo6hHM.js";import"./ReportErrors-B2p-LfpE.js";const v=p({mixins:[_],components:{ReportTemplate:w,IonPage:n},data:()=>({title:"",totalClients:[],rows:[],reportReady:!1,isLoading:!1,columns:[[e.thTxt("ARV#"),e.thTxt("Gender"),e.thTxt("Birthdate"),e.thTxt("Specimen"),e.thTxt("Ordered"),e.thTxt("Result"),e.thTxt("Released"),e.thTxt("Curr. Regimen"),e.thTxt("Action",{csvExportable:!1,pdfExportable:!1})]]}),created(){this.fields=[...this.getDateDurationFields(),{id:"result_type",helpText:"Select result type",type:b.TT_SELECT,validation:r=>m.required(r),options:()=>[{label:"Viraemia 1000+",value:"viraemia-1000"},{label:"Suppressed",value:"suppressed"},{label:"Low level viraemia",value:"low-level-viraemia"}]}]},methods:{async onPeriod(r,t){const o=r.result_type;this.rows=[],this.report=new i,this.report.setStartDate(t.start_date),this.report.setEndDate(t.end_date),this.report.setOccupation(t.occupation),this.period=this.report.getDateIntervalPeriod(),this.title="".concat(o.label," Report <small><b>(between the period of (").concat(this.period,")</b></small>"),this.customFileName="Clinic ".concat(i.getLocationName()," ").concat(o.label," ").concat(this.period),this.setRows(await this.report.getViralLoadResults(o.value.toLowerCase()))},async setRows(r){this.sortByArvNumber(r).forEach(t=>{this.rows.push([e.td(t.arv_number),e.td(this.formatGender(t.gender)),e.tdDate(t.birthdate),e.td(t.specimen),e.tdDate(t.order_date),e.td("".concat(t.result_modifier||""," ").concat(t.result)),e.tdDate(t.result_date),e.td(t.current_regimen||""),e.tdBtn("View",()=>this.$router.push("/patient/dashboard/".concat(t.patient_id)))])})}}});function T(r,t,o,R,$,x){const s=a("report-template"),l=a("ion-page");return u(),c(l,null,{default:h(()=>[f(s,{title:r.title,period:r.period,rows:r.rows,fields:r.fields,columns:r.columns,canExportPDf:!1,showtitleOnly:!0,customFileName:r.customFileName,onReportConfiguration:r.onPeriod,"report-prefix":"Clinic"},null,8,["title","period","rows","fields","columns","customFileName","onReportConfiguration"])]),_:1})}const q=d(v,[["render",T]]);export{q as default};
