import{d,K as o,N as v,o as D,c as _,w as g,b as p,cl as u,cb as b,cm as n,t as y,q as C,c4 as h,I as x}from"./index-BFG-WECc.js";import{v as q}from"./TableView-9M7asFjO.js";import{S as w}from"./stock_report_service-BB7dXtTQ.js";import{D as R}from"./ReportDateSelectionPrompt-CXB5PXhN.js";import"./PopupKeyboard-DXNkcTjV.js";import"./SIngleTouchField-OvqCQtJi.js";import"./dynamic-import-helper-Bsjrd6Ro.js";import"./TouchScreenForm-DiI3Xfhg.js";import"./ToolbarMediumCard-C3iotOe-.js";import"./Transformers-BPPLlH12.js";import"./ViewPort-0kHLdkku.js";import"./HisKeypad-DWBoYqiR.js";import"./BaseKeyboard-C1F0dD78.js";import"./KbLayouts-VRA-vjeH.js";import"./KbHandler-BuQ4TFU6.js";import"./overlays-04a9a43f-sOHkVQfY.js";import"./fuse-YdZE3OCN.js";import"./Export-CRv3Yrt4.js";import"./HisKeyboard-CNCznGxV.js";import"./HisKbConfigurations-GhFQZvlg.js";import"./MultiFieldDateHelper-CAg9Dfet.js";const Q=d({__name:"ClinicDiscrepancyReport",setup(S){const a=o([]),i=o(""),r=o(!1),t=new w,m=[[{label:"Drug Count Date",ref:"verification_date",value:e=>b(e.verification_date)},{label:"Drug Name",ref:"short_name"},{label:"Expected Count",ref:"expected_quantity",value:e=>n(e.expected_quantity)},{label:"Verified Count",ref:"current_quantity",value:e=>n(e.current_quantity)},{label:"Difference",ref:"difference",value:e=>n(e.difference)},{label:"Reason",ref:"variance_reason"}]],s=async()=>{if(!(t.startDate&&t.endDate))return y("Start date and end date required!");r.value=!0,a.value=[];try{a.value=await t.getDiscrepancyReport()}catch(e){C("Unable to generate report!")}r.value=!1},l=()=>R({onFinish:(e,c,f)=>{i.value="Period (".concat(f,")"),t.startDate=e,t.endDate=c,s()}});return v(()=>!a.value.length&&l()),(e,c)=>(D(),_(u(x),null,{default:g(()=>[p(u(h),{"is-open":r.value,message:"Please wait..."},null,8,["is-open"]),p(q,{title:"Clinic Discrepancy Report","report-prefix":"Clinic",subtitle:i.value,columns:m,columnData:a.value,rowsPerPage:20,onConfigure:l,onRefresh:s},null,8,["subtitle","columnData"])]),_:1}))}});export{Q as default};
