System.register(["./dynamic-import-helper-legacy-DYK5bIOV.js","./HisStandardForm-legacy-DOc8dQFT.js","./index-legacy-HpoRL6sM.js","./EncounterMixin.vue_vue_type_script_lang-legacy-C_fLj1SO.js","./social_history_service-legacy-DbF4bPDR.js","./TouchScreenForm-legacy-D3QVjNom.js","./ToolbarMediumCard-legacy-BjHrpWWd.js","./Transformers-legacy-DhNYVLaS.js","./ViewPort-legacy-u0ytW13O.js","./encounter_guidelines-legacy-uw7s2hWb.js","./GuidelineEngine-legacy-KsvQuFdF.js"],(function(e,i){"use strict";var s,o,a,l,t,n,r,u,d,c,y,h;return{setters:[e=>{s=e.F},e=>{o=e.H},e=>{a=e.d,l=e.t,t=e.T,n=e.V,r=e._,u=e.r,d=e.o,c=e.c},e=>{y=e._},e=>{h=e.S},null,null,null,null,null,null],execute:function(){const i=a({mixins:[y],components:{HisStandardForm:o},data:()=>({socialHistory:{},obs:[]}),watch:{ready:{async handler(e){e&&(this.socialHistory=new h(this.patientID,this.providerID),this.fields=await this.getFields())},immediate:!0}},methods:{async onFinish(){if(!(await this.socialHistory.createEncounter()))return l("Unable to create encounter");const e=await Promise.all([...this.obs]);if(!(await this.socialHistory.saveObservationList(e)))return l("Unable to save patient observations");t("Observations and encounter created!"),this.nextTask()},getFields(){return[{id:"smoking_history",helpText:"Have you ever smoked cigarettes?",type:s.TT_SELECT,validation:e=>n.required(e),options:()=>[{label:"Yes",value:"Yes"},{label:"No",value:"No"}],unload:async e=>{this.obs.push(this.socialHistory.buildValueCoded("SMOKE_HIS",e.value))}},{id:"number_of_cigarettes",helpText:"Number of cigarettes smoked per day",type:s.TT_NUMBER,validation:e=>n.rangeOf(e,1,90),condition:e=>"Yes"===e.smoking_history.value,unload:async e=>{this.obs.push(this.socialHistory.buildValueNumber("Number of cigarettes smoked per day",e.value))}},{id:"smoking_duration",helpText:"How long have you been smoking?",type:s.TT_SELECT,validation:e=>n.required(e),condition:e=>"Yes"===e.smoking_history.value,options:()=>[{label:"Less than five years",value:"Less than five years"},{label:"Five years or more",value:"Five years or more"}],unload:async e=>{this.obs.push(this.socialHistory.buildValueText("Smoking duration",e.value))}},{id:"current_smoker",helpText:"Do you still smoke?",type:s.TT_SELECT,validation:e=>n.required(e),condition:e=>"Yes"===e.smoking_history.value,options:()=>[{label:"Yes",value:"Yes"},{label:"No",value:"No"}],unload:async e=>{this.obs.push(this.socialHistory.buildValueCoded("Current smoker",e.value))}},{id:"alcohol_history",helpText:"Do you drink alcohol?",type:s.TT_SELECT,validation:e=>n.required(e),options:()=>[{label:"Yes",value:"Yes"},{label:"No",value:"No"}],unload:async e=>{this.obs.push(this.socialHistory.buildValueCoded("Does the patient drink alcohol?",e.value))}},{id:"number_of_drinks",helpText:"How many alcoholic drinks do you have per day?",type:s.TT_NUMBER,validation:e=>n.required(e),condition:e=>"Yes"===e.alcohol_history.value,unload:async e=>{this.obs.push(this.socialHistory.buildValueNumber("Alcoholic drinks per day",e.value))}},{id:"number_of_days_drank",helpText:"Number of days per week alcohol is used?",type:s.TT_NUMBER,validation:e=>n.rangeOf(e,1,7),condition:e=>"Yes"===e.alcohol_history.value,unload:async e=>{this.obs.push(this.socialHistory.buildValueNumber("Number of days per week alcohol is used",e.value))}},{id:"exercise",helpText:"Do you do any physical exercise?",type:s.TT_SELECT,validation:e=>n.required(e),options:()=>[{label:"Yes",value:"Yes"},{label:"No",value:"No"}],unload:async e=>{this.obs.push(this.socialHistory.buildValueCoded("Physical Exercises",e.value))}},{id:"employment",helpText:"Type of employment?",type:s.TT_SELECT,validation:e=>n.required(e),options:()=>[{label:"Active",value:"Active"},{label:"Sedentary",value:"Sedentary"}],unload:async e=>{this.obs.push(this.socialHistory.buildValueText("Type of employment",e.value))}}]}}});e("default",r(i,[["render",function(e,i,s,o,a,l){const t=u("his-standard-form");return d(),c(t,{fields:e.fields,onFinishAction:e.onFinish,skipSummary:!1,cancelDestinationPath:e.cancelDestination},null,8,["fields","onFinishAction","cancelDestinationPath"])}]]))}}}));
