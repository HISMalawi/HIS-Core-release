import{d,a5 as g,r as m,t as v,aH as D,cN as w,O as C,a6 as _,v as h,u as b,w as S,x as R,ab as f}from"./index-BMAYi21T.js";import{v as V}from"./TableView-BzjzjVBH.js";import{C as $}from"./clinic_report_service-BCgmjYCC.js";import{w as k,s as L}from"./v2utils-Cm7SAqIW.js";import"./Export-DiZfIoLN.js";import"./index-kLs9SbG0.js";const P=d({components:{IonPage:g,v2Datatable:V},setup(){const e=D("reports.png"),a=m([]),r=m(""),o=new $,n=(l,p)=>({ref:p,label:l,toValue:t=>t.length,tdClick:t=>L({title:"".concat(t.column.label),subtitle:r.value,patientIdentifiers:t.refData})}),c=[[{label:"Regimen",ref:"regimen"},n("Due for VL","due_for_vl"),n("Sample drawn","drawn"),n("High vl (>=1000 copies))","high_vl"),n("Low vl (<1000 copies))","low_vl")]],s=()=>k(async()=>{if(!(o.startDate&&o.endDate))return C("Start date and end date required!");a.value=[],a.value=await o.getVlSuppressionReport()}),i=()=>w({onFinish:(l,p,t,u)=>{u&&o.setOccupation(u),r.value="".concat(t),o.startDate=l,o.endDate=p,s()}});return v(()=>i()),{logo:e,reportData:a,configure:i,generate:s,columns:c,period:r}}});function B(e,a,r,o,n,c){const s=f("v2Datatable"),i=f("ion-page");return b(),h(i,null,{default:S(()=>[R(s,{title:"Clinic VL Suppression Report","icon-url":e.logo,subtitle:e.period,columns:e.columns,columnData:e.reportData,rowsPerPage:30,onConfigure:e.configure,onRefresh:()=>e.generate(),"report-prefix":"Clinic"},null,8,["icon-url","subtitle","columns","columnData","onConfigure","onRefresh"])]),_:1})}const A=_(P,[["render",B]]);export{A as default};
