System.register(["./Layout-legacy-TRD-sJok.js","./index-legacy-B-IGLekl.js","./PatientDrilldown-legacy-C-hfUwjF.js"],(function(e,t){"use strict";var a,i,n,o,l,r,s,d,c,p,b,m,u,y,g,f,h,v,k,x,_,w,D,M,T,C,S,z;return{setters:[e=>{a=e.L},e=>{i=e.a,n=e.ap,o=e.t,l=e.aN,r=e.aA,s=e.eh,d=e.bo,c=e.aj,p=e.O,b=e.el,m=e.dC,u=e.cj,y=e.em,g=e.d,f=e.a6,h=e.ab,v=e.u,k=e.v,x=e.w,_=e.G,w=e.B,D=e.E,M=e.C,T=e.H,C=e.Z,S=e.aH},e=>{z=e.D}],execute:function(){var t=document.createElement("style");t.textContent="#moh_template[data-v-43c9e0b5]{border:solid 1px #3333;width:100%}td[data-v-43c9e0b5]{font-size:var(--his-sm-font-size);padding:.3em}.main-title[data-v-43c9e0b5]{background:#8eaadb;font-weight:700;border:solid 3px black}.table-value[data-v-43c9e0b5]{padding:1em;text-align:center;color:#337ab7;font-weight:700;font-size:var(--his-md-font-size);border:solid 2px black}.table-section[data-v-43c9e0b5]{font-weight:700;background:#d9e2f3;border:solid 3px black}\n/*$vite$:1*/",document.head.appendChild(t);const A=i({model:[],indicators:{},dateGenerated:"",startDate:"",endDate:"",title:"",period:""}),$=n((()=>A.model.map((e=>{if("function"==typeof e.value){const t=e.value(A.indicators);Array.isArray(t)?(e._value=`${t.length}`,e._drill=t):e._value=t}return e})))),j=n((()=>{const[e,...t]=$.value.map((e=>[e.index||"",e.label,e.index?e._value||0:""]));return{rows:t,columns:[["#",$.value[0].label,"#"]]}})),E=g({components:{Layout:a},props:{params:{type:Object,required:!0}},setup:e=>function(e){e.title!=A.title&&(A.indicators={}),A.title=e.title,A.model=e.indicators;const t=async(t="",a="")=>{(await r.create({message:"Please wait .."})).present();try{const i=new s(e.name);i.startDate=t||A.startDate,i.endDate=a||A.endDate,A.indicators=await i.requestReport({type:"moh"}),A.dateGenerated=d(c.getSessionDate()).format("DD/MMM/YYYY HH:mm:ss")}catch(i){p("Unable to generate report")}r.dismiss()},a=()=>b({title:A.title,onFinish:(e,a,i)=>{A.period=i,A.startDate=e,A.endDate=a,t()}});return o((()=>l.isEmpty(A.indicators)&&a())),{drill:e=>{Array.isArray(e._drill)&&z(e.label,e._drill)},data:A,indicators:$,exportable:j,generate:t,exportPdf:()=>{const e=document.getElementById("report-content");e&&m(`\n                <html>\n                <head>\n                    <link rel="stylesheet" media="print"  href="/assets/css/hts-report-style-print.css"/>\n                    <style> \n                        #moh_template { border: solid 1px #3333; width: 100%; } td { font-size: var(--his-sm-font-size); padding: 0.3em; } .main-title { background: #8EAADB; font-weight: bold; border: solid 3px black; } .table-value { padding: 1em; text-align: center; color: #337ab7; font-weight: bold; font-size: var(--his-md-font-size); border: solid 2px black; } .table-section { font-weight: bold; background: #D9E2F3; border: solid 3px black; }\n                    </style>\n                </head>\n                <body>\n                    ${e.innerHTML}\n                </body>\n                </html>\n            `,50)},exportCsv:()=>{const{rows:e,columns:t}=j.value;u(t,y(e,A),`MOH-${A.title}-${c.getLocationName()}-${A.period}`)},configure:a}}(e.params)}),G={id:"report-content"},H={id:"moh_template"},P={key:0,class:"main-title"},L={key:1,class:"main-title"},F={key:2,class:"main-title"},Y={key:3,class:"table-section"},B={key:4,colspan:2,class:"table-section"},O={key:5},R=["onClick"];e("M",f(E,[["render",function(e,t,a,i,n,o){const l=h("layout");return v(),k(l,{logo:"login-logos/Malawi-Coat_of_arms_of_arms.png",title:e.data.title,toCSV:e.exportCsv,toPDF:e.exportPdf,period:e.data.period,dateGenerated:e.data.dateGenerated,refreshReport:e.generate,configure:e.configure},{default:x((()=>[_("div",G,[_("table",H,[(v(!0),w(D,null,M(e.indicators,((t,a)=>(v(),w("tr",{key:a},[t.isMainTitle?(v(),w("td",P,"#")):T("",!0),t.isMainTitle?(v(),w("td",L,C(t.label),1)):T("",!0),t.isMainTitle?(v(),w("td",F,"#")):T("",!0),t.isSectionTitle?(v(),w("td",Y)):T("",!0),t.isSectionTitle?(v(),w("td",B,C(t.label),1)):T("",!0),t.isMainTitle||t.isSectionTitle?T("",!0):(v(),w("td",O,C(t.index),1)),t.isMainTitle||t.isSectionTitle?T("",!0):(v(),w("td",{key:6,style:S(t.style||{}),class:"table-key"},C(t.label),5)),t.isMainTitle||t.isSectionTitle?T("",!0):(v(),w("td",{key:7,class:"table-value",onClick:a=>e.drill(t)},C(t._value),9,R))])))),128))])])])),_:1},8,["title","toCSV","toPDF","period","dateGenerated","refreshReport","configure"])}],["__scopeId","data-v-43c9e0b5"]]))}}}));
