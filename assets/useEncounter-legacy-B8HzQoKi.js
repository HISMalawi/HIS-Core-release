System.register(["./index-legacy-CNrLGT3P.js","./encounter_guidelines-legacy-BxkBj-oZ.js","./GuidelineEngine-legacy-KsvQuFdF.js"],(function(t,e){"use strict";var n,r,a,i,u,o,c,s,l,f,d,v,g,p,h,E,D,T,m,I,y,_,b,A,N,O,S,w,P,C;return{setters:[t=>{n=t.d5,r=t.d6,a=t.d7,i=t.d8,u=t.d9,o=t.da,c=t.db,s=t.dc,l=t.dd,f=t.de,d=t.df,v=t.dg,g=t.dh,p=t.di,h=t.dj,E=t.dk,D=t.dl,T=t.E,m=t.cs,I=t.K,y=t.J,_=t.N,b=t.T,A=t.p,N=t.aT,O=t.bX,S=t.dm},t=>{w=t.E,P=t.F},t=>{C=t.m}],execute:function(){t("u",(function(t){const e=T();let n=m({});const r=I(-1),a=m({}),i=I(-1),u=I([]),o=y(),c=I(""),s=()=>o.push(c.value),l=(t,e=null)=>{const r={};if(r[P.SET_PROVIDER]=t=>{const[e]=t.split(" ");return i.value=S(u.value,{username:e})?.person_id??-1,P.CONTINUE},r[P.CHANGE_SESSION_DATE]=()=>(o.push(`/session/date?patient_dashboard_redirection_id=${n.getID()}`),P.EXIT),r[P.CHANGE_PATIENT_OUTCOME]=()=>(o.push(`/patient/programs/${n.getID()}`),P.EXIT),r[P.GO_TO_PATIENT_DASHBOARD]=()=>(s(),P.EXIT),t in r)return r[t](e)};return _((async()=>{try{r.value=parseInt(e.params.patient_id),c.value=`/patient/dashboard/${r.value}`,n=await b.get("ACTIVE_PATIENT",{patientID:r.value}),await(async(t="N/A")=>{const e=await b.get("PATIENT_PROGRAM",{patientID:n.getID()});a.outcome=e.outcome,a.outcomeStartDate=e.startDate,a.sessionDate=N.getSessionDate(),a.apiDate=N.getCachedApiDate(),a.isBdeMode=N.isBDE(),a.birthDate=n.getBirthdate(),a.encounterName=t.toUpperCase(),N.isBDE()&&(u.value=await b.get("PROVIDERS"),a.providers=Nt(u.value,(({username:t})=>t)).map((t=>{let e=`${t.username}`;if(!O(t?.person?.names)){const[n]=t.person?.names||[];e+=` (${n.given_name} ${n.family_name})`}return e})))})(e.name),await(async t=>{const e=C(t,w);for(const n in e){const r=e[n];if(r?.actions?.alert&&l(await(r?.actions?.alert(t)))===P.EXIT)return;if(r?.actions?.selection){const e=await(r?.actions?.selection(t));l(e.flowState,e.value)}}})(a),"function"==typeof t&&t(i.value,r.value,n)}catch(o){console.error("Error in useEncounter hook:",o)}})),{patient:n,patientId:r,provider:i,providers:u,facts:a,patientDashboardUrl:c,goToPatientDashboard:s,goToNextTask:()=>A(n.getID(),o)}}));var e,j,x,R,$=r,B=a,G=n?n.isConcatSpreadable:void 0,X=i,k=function(t){return B(t)||$(t)||!!(G&&t&&t[G])},M=function t(e,n,r,a,i){var u=-1,o=e.length;for(r||(r=k),i||(i=[]);++u<o;){var c=e[u];n>0&&r(c)?n>1?t(c,n-1,r,a,i):X(i,c):a||(i[i.length]=c)}return i},U=function(t,n,r){for(var a=-1,i=Object(t),u=r(t),o=u.length;o--;){var c=u[e?o:++a];if(!1===n(i[c],c,i))break}return t},H=u,V=o,F=function(t,e){return function(n,r){if(null==n)return n;if(!V(n))return t(n,r);for(var a=n.length,i=e?a:-1,u=Object(n);(e?i--:++i<a)&&!1!==r(u[i],i,u););return n}}((function(t,e){return t&&U(t,e,H)})),J=o,K=c,q=function(t,e){if(t!==e){var n=void 0!==t,r=null===t,a=t==t,i=K(t),u=void 0!==e,o=null===e,c=e==e,s=K(e);if(!o&&!s&&!i&&t>e||i&&u&&c&&!o&&!s||r&&u&&c||!n&&c||!a)return 1;if(!r&&!i&&!s&&t<e||s&&n&&a&&!r&&!i||o&&n&&a||!u&&a||!c)return-1}return 0},z=s,L=f,Q=d,W=function(t,e){var n=-1,r=J(t)?Array(t.length):[];return F(t,(function(t,a,i){r[++n]=e(t,a,i)})),r},Y=function(t,e){var n=t.length;for(t.sort(e);n--;)t[n]=t[n].value;return t},Z=v,tt=function(t,e,n){for(var r=-1,a=t.criteria,i=e.criteria,u=a.length,o=n.length;++r<u;){var c=q(a[r],i[r]);if(c)return r>=o?c:c*("desc"==n[r]?-1:1)}return t.index-e.index},et=l,nt=a,rt=function(t,e,n){e=e.length?z(e,(function(t){return nt(t)?function(e){return L(e,1===t.length?t[0]:t)}:t})):[et];var r=-1;e=z(e,Z(Q));var a=W(t,(function(t,n,a){return{criteria:z(e,(function(e){return e(t)})),index:++r,value:t}}));return Y(a,(function(t,e){return tt(t,e,n)}))},at=function(t,e,n){switch(n.length){case 0:return t.call(e);case 1:return t.call(e,n[0]);case 2:return t.call(e,n[0],n[1]);case 3:return t.call(e,n[0],n[1],n[2])}return t.apply(e,n)},it=Math.max,ut=function(t,e,n){return e=it(void 0===e?t.length-1:e,0),function(){for(var r=arguments,a=-1,i=it(r.length-e,0),u=Array(i);++a<i;)u[a]=r[e+a];a=-1;for(var o=Array(e+1);++a<e;)o[a]=r[a];return o[e]=n(u),at(t,this,o)}},ot=function(t){return function(){return t}},ct=g,st=function(){try{var t=ct(Object,"defineProperty");return t({},"",{}),t}catch(e){}}(),lt=ot,ft=st,dt=ft?function(t,e){return ft(t,"toString",{configurable:!0,enumerable:!1,value:lt(e),writable:!0})}:l,vt=Date.now,gt=(j=dt,x=0,R=0,function(){var t=vt(),e=16-(t-R);if(R=t,e>0){if(++x>=800)return arguments[0]}else x=0;return j.apply(void 0,arguments)}),pt=l,ht=ut,Et=gt,Dt=p,Tt=o,mt=h,It=E,yt=M,_t=rt,bt=function(t,e,n){if(!It(n))return!1;var r=typeof e;return!!("number"==r?Tt(n)&&mt(e,n.length):"string"==r&&e in n)&&Dt(n[e],t)},At=function(t,e){return Et(ht(t,e,pt),t+"")}((function(t,e){if(null==t)return[];var n=e.length;return n>1&&bt(t,e[0],e[1])?e=[]:n>2&&bt(e[0],e[1],e[2])&&(e=[e[0]]),_t(t,yt(e,1),[])}));const Nt=D(At)}}}));
