import K from"./BaseTextInput-R_3uIRWn.js";import{d as I,a2 as $,_ as C,$ as N,aW as D,aR as T,bW as B,a0 as E,W as H,a1 as O,d4 as P,aN as R,aV as W,a6 as z,ab as a,u as o,B as p,x as t,w as i,v as u,H as c,E as h,C as F,z as L,Z as S}from"./index-CyYd6aWW.js";import{_ as j}from"./FieldMixin.vue_vue_type_script_lang-DVMlEpjU.js";const A=I({components:{IonInput:$,IonRow:C,IonCol:N,IonGrid:D,BaseInput:K,HisKeyboard:T,ViewPort:B,IonList:E,IonItem:H,IonLabel:O},mixins:[j],data:()=>({value:"",prependValue:"",initalKeyboardName:"",keyboard:{},listData:[]}),computed:{inputType(){return this.config&&"inputType"in this.config?this.config.inputType:"text"}},mounted(){this.init()},activated(){this.init()},methods:{clearValue(){this.value=""},async init(){var e,n,s,l;this.keyboard=((e=this.config)==null?void 0:e.customKeyboard)||P,this.initalKeyboardName=typeof((n=this.config)==null?void 0:n.initialKb)=="function"?(s=this.config)==null?void 0:s.initialKb(this.fdata,this.cdata):((l=this.config)==null?void 0:l.initialKb)||"",this.$emit("onFieldActivated",this),this.config&&this.config.prependValue&&(this.prependValue=await this.config.prependValue(this.fdata)),await this.setDefaultValue()},async setDefaultValue(){if(this.defaultValue&&!this.value){const e=await this.defaultValue(this.fdata,this.cdata);e&&(R.isPlainObject(e)?(this.emitValue(e),this.value=e.value.toString()):(this.value=e,this.emitValue({label:e,value:e})))}},async emitValue(e){if(e.value==="")return this.value="",this.$emit("onValue",null);this.onValue&&!await this.onValue(e)||(e.value=this.prependValue?"".concat(this.prependValue).concat(e.value):e.value,this.value=e.label,this.$emit("onValue",e))},async onselect(e){await this.emitValue(e)},async onKbValue(e){await this.emitValue({label:e,value:e})},async keypress(e){var s;const n=W(e,this.value,(s=this.config)==null?void 0:s.casing);await this.emitValue({label:n,value:n})}},watch:{value:{async handler(){this.options&&(this.listData=await this.options(this.fdata))},deep:!0}}});function G(e,n,s,l,Q,Y){const f=a("ion-input"),r=a("ion-col"),m=a("base-input"),_=a("ion-row"),y=a("ion-grid"),b=a("ion-label"),V=a("ion-item"),v=a("ion-list"),g=a("view-port"),k=a("his-keyboard");return o(),p(h,null,[t(g,{showFull:!1},{default:i(()=>[t(y,null,{default:i(()=>[t(_,null,{default:i(()=>[e.prependValue?(o(),u(r,{key:0,"size-md":"4"},{default:i(()=>[t(f,{readonly:e.isReadOnly,value:e.prependValue,class:"input_display",disabled:!0},null,8,["readonly","value"])]),_:1})):c("",!0),t(r,{"size-md":""},{default:i(()=>[t(m,{type:e.inputType,value:e.value,onOnValue:e.onKbValue},null,8,["type","value","onOnValue"])]),_:1})]),_:1})]),_:1}),e.listData.length>0?(o(),u(v,{key:0,class:"view-port-content"},{default:i(()=>[(o(!0),p(h,null,F(e.listData,(d,w)=>(o(),u(V,{class:"his-md-text",button:"",key:w,onClick:Z=>e.onselect(d)},{default:i(()=>[t(b,null,{default:i(()=>[L(S(d.label),1)]),_:2},1024)]),_:2},1032,["onClick"]))),128))]),_:1})):c("",!0)]),_:1}),t(k,{initalKeyboardName:e.initalKeyboardName,kbConfig:e.keyboard,onKeyPress:e.keypress,disabled:!1},null,8,["initalKeyboardName","kbConfig","onKeyPress"])],64)}const U=z(A,[["render",G],["__scopeId","data-v-9ff1c3d4"]]);export{U as default};
