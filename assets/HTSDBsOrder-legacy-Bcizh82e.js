System.register(["./index-legacy-Ck8hVlzC.js","./HisStandardForm-legacy-OroqgFde.js"],(function(e,n){"use strict";var t,o,s,i,a,l,c,r,d,u,p,D,m;return{setters:[e=>{t=e.bk,o=e.d,s=e.I,i=e.K,a=e.dF,l=e.F,c=e._,r=e.r,d=e.o,u=e.c,p=e.w,D=e.b},e=>{m=e.H}],execute:function(){class n extends t{constructor(e,n=-1){super(e,199,n)}}const S=o({components:{IonPage:s,HisStandardForm:m},setup(){const e=i([]),t=i(""),o=new n(-1),{htsClient:s,yesNoOptions:c,saveEncounter:r,patientDashboardUrl:d}=a({onInitVisit:n=>{e.value=[u(n),{id:"dbs_specimen_id",helpText:"DBS Specimen ID",type:l.TT_BARCODE,requireNext:!1,condition:e=>/yes/i.test(`${e.dbs_sample_collection}`),finalComputedValue:e=>({obs:o.buildValueText("DBS Specimen ID",`${e}`)}),config:{hiddenFooterBtns:["Clear"]},isRequired:()=>!0}]}});function u(e){let n="DBS Sample";const s=e.age;return"Inconclusive Re-test"==t.value&&(n="DBS Sample for Incoclusive Re-test"),s<1&&(n="DBS Sample (EID)"),s<1&&(n="DBS Sample (EID)"),{id:"dbs_sample_collection",helpText:n,type:l.TT_YES_NO,isRequired:()=>!0,finalComputedValue:e=>({obs:o.buildValueCoded("Is DBS Sample Collected",e)}),options:()=>[{label:"Is DBS Sample Collected?",value:"",values:c()}]}}return{patientDashboardUrl:d,onFinish:function(e,i){let a;"Yes"===e.dbs_sample_collection&&(a=function(e){let o;return o=s.age<1||"Inconclusive Re-test"==t.value?844:n.getCachedConceptID("HIV viral load"),[{concept_id:o,specimenConcept:n.getCachedConceptID("DBS (Free drop to DBS card)",!0),accessionNumber:e,reason:"Routine"}]}(e.dbs_specimen_id)),r({encounterName:"DBS ORDER",encounterTypeID:o.encounterTypeID,formData:e,computedData:i,labOrders:a})},fields:e}}});e("default",c(S,[["render",function(e,n,t,o,s,i){const a=r("his-standard-form"),l=r("ion-page");return d(),u(l,null,{default:p((()=>[D(a,{formLabel:"DBS Order",fields:e.fields,onFinishAction:e.onFinish,cancelDestinationPath:e.patientDashboardUrl()},null,8,["fields","onFinishAction","cancelDestinationPath"])])),_:1})}]]))}}}));
