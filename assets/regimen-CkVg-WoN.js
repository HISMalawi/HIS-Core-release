import{d as f,r as u,o as g,D as _,a as b,w as v,f as c,b as D,e as R,cs as C,ct as d,x as w,n as V,s as h}from"./index-DWvBcSFv.js";import{v as x}from"./TableView-BOX5mgjT.js";import{a as A}from"./regimen_report_service-ZAvHVdp2.js";import{w as B,b as G}from"./v2utils-PlL-gTHo.js";import"./Export-BnxCcspe.js";import"./index-BDhxANll.js";const y=f({__name:"regimen",setup(O){const m=w("reports.png"),r=u([]),o=u(""),a=new A,p=[[G(),{label:"Gender",ref:"gender",toValue:e=>C(e)},{label:"DOB",ref:"birthdate",toValue:e=>d(e)},{label:"Curr.Reg",ref:"current_regimen",defaultValue:"N/A"},{label:"ARVs",ref:"medication",toValue:e=>e.map(t=>"".concat(t.medication," (").concat(t.quantity,")")).join(", ")},{label:"Curr.reg dispensed",ref:"last_dispensation_date",toValue:e=>d(e)}]],s=()=>B(async()=>{if(!(a.startDate&&a.endDate))return h("Start date and end date required!");r.value=[];const e=await a.getRegimenReport();r.value=Object.values(e).map(t=>({...t,last_dispensation_date:t.medication.reduce((l,n)=>n.start_date,"")}))}),i=()=>_({onFinish:(e,t,l,n)=>{n&&a.setOccupation(n),o.value="".concat(l),a.startDate=e,a.endDate=t,s()}});return g(()=>!r.value.length&&i()),(e,t)=>(D(),b(c(V),null,{default:v(()=>[R(x,{"default-sort-order":"asc","default-sorted-column":"arv_number","icon-url":c(m),title:"Clinic Regimen Report","report-prefix":"Clinic",subtitle:o.value,columns:p,columnData:r.value,rowsPerPage:50,onConfigure:i,onRefresh:s},null,8,["icon-url","subtitle","columnData"])]),_:1}))}});export{y as default};
