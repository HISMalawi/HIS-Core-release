import{d as p,r as m,ab as _,ai as v,Q as f,ac as T,u as h,v as E,w as x,x as b,y as s,aR as R,a5 as S}from"./index-LyP1z09P.js";import{H as D}from"./HisStandardForm-DTr2fl7A.js";import{u as y}from"./useEncounter-aN4Ia2f8.js";import{L as A}from"./lab_service-QkZ8yUHu.js";import{g as a}from"./util-KW2bx-74.js";import"./isEmpty-XyLlvQzF.js";import"./encounter_guidelines-6akTZ644.js";import"./GuidelineEngine-syyQoOzo.js";const O=p({__name:"Result",setup(C){const o=m([]),n={[a("MICROSCOPY")]:{label:"Microscopy",value:"/tb/results/microscopy"},[a("XPERT_MTB_RIF")]:{label:"Xpert MTB/RIF",value:"/tb/results/xpert"},[a("LPA")]:{label:"LPA",value:"/tb/results/lpa"},[a("LAM")]:{label:"LAM",value:"/tb/results/lam"},[a("CULTURE_AND_DST")]:{label:"Culture and DST",value:"/tb/results/culture"}},{patientDashboardUrl:l,patientId:u}=y((t,i)=>{const d=()=>{const r={};return{id:"examination",helpText:"Recent Examination(s):",type:_.TT_SELECT,init:async()=>{try{(await A.getRecentOrders(i)).observations.forEach(e=>{e.concept_id===a("TEST_REQUESTED")&&n[e.value_coded]&&!r[e.value_coded]&&(r[e.value_coded]={...n[e.value_coded],other:v.toStandardHisFormat(e.obs_datetime)})})}catch(e){console.error("".concat(e)),f("No recent results found")}return!0},validation:e=>T.required(e),options:()=>Object.values(r)}};o.value=[d()]});function c(t){R.push("".concat(t.examination.value,"/").concat(u.value,"?date=").concat(t.examination.other))}return(t,i)=>(h(),E(s(S),null,{default:x(()=>[b(D,{cancelDestinationPath:s(l),onFinishAction:c,fields:o.value,skipSummary:!0},null,8,["cancelDestinationPath","fields"])]),_:1}))}});export{O as default};
