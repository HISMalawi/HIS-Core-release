import{d as A,I as C,K as b,dF as V,F as i,ct as D,ah as I,_ as R,r as f,o as F,c as E,w as g,b as v}from"./index-C6EjxQ0a.js";import{H as s}from"./hts_art_initiation_service-xxijTmHa.js";import{g as x}from"./LocationFieldOptions-DprQ5-p8.js";import{H as y}from"./HisStandardForm-CHL0RBXf.js";import"./storage-CYNMGoMg.js";const S=A({components:{IonPage:C,HisStandardForm:y},setup(){const o=b([]),n=new s(-1),{toOption:u,yesNoOptions:d,saveEncounter:c,patientDashboardUrl:p}=V({onInitVisit:()=>{o.value=[l(),m(),_(),T(),h()]}});function r(e,t){c({encounterName:"ART Enrollment",encounterTypeID:n.encounterTypeID,computedData:t})}function l(){return{id:"is_referral",helpText:"Referral for ART (Re-)Initiation",type:i.TT_YES_NO,isRequired:()=>!0,finalComputedValue:e=>({obs:n.buildValueText("ART referral",e)}),options:()=>[{label:"Do you want to refer client?",value:"",values:d()}]}}function m(){return{id:"art_site",helpText:"Intended Site for ART",type:i.TT_SELECT,isRequired:()=>!0,finalComputedValue:({label:e})=>({obs:n.buildValueText("Referral location",e)}),options:(e,t="")=>x(t),condition:e=>e.is_referral==="Yes",defaultValue:()=>s.getLocationName(),config:{footerBtns:[{name:"Here",slot:"end",onClickComponentEvents:{setValue:()=>s.getLocationName()},onClick:()=>null}],showKeyboard:!0,isFilterDataViaApi:!0}}}function _(){return{id:"art_appointment_date",helpText:"Appointment Date for ART Referral",type:i.TT_DATE_PICKER,isRequired:()=>!0,defaultValue:()=>n.date,condition:e=>e.is_referral==="Yes",finalComputedValue:e=>({obs:n.buildValueDate("Appointment date","".concat(e.value))}),config:{minDate:()=>n.date,infoItems:e=>[{label:"Set appointment date",value:D(e)}],hiddenFooterBtns:["Clear"]}}}function T(){let e=[];return{id:"linkage_code",helpText:"LINKAGE CODE",type:i.TT_LINKAGE_CODE,isRequired:()=>!0,validation:t=>{var a;return(a=t==null?void 0:t.other)!=null&&a.isValidLinkageCode?null:(e=I.uniq(e.concat("".concat(t.value))),["Invalid Scanform linkage code"])},condition:t=>t.is_referral==="Yes",finalComputedValue:t=>({obs:[n.buildValueText("HTC Serial number","".concat(t.value)),...e.map(a=>n.buildValueText("Invalid",a))]})}}function h(){return{id:"art_outcome_field",helpText:"Art outcome",type:i.TT_HIDDEN,defaultValue:()=>u("Unknown"),finalComputedValue:e=>({obs:n.buildValueCoded("Antiretroviral status or outcome",e.value)})}}return{patientDashboardUrl:p,onFinish:r,fields:o}}});function k(o,n,u,d,c,p){const r=f("his-standard-form"),l=f("ion-page");return F(),E(l,null,{default:g(()=>[v(r,{formLabel:"ART (Re-) Initiation",fields:o.fields,onFinishAction:o.onFinish,cancelDestinationPath:o.patientDashboardUrl()},null,8,["fields","onFinishAction","cancelDestinationPath"])]),_:1})}const O=R(S,[["render",k]]);export{O as default};
