System.register(["./ReportMixin.vue_vue_type_script_lang-legacy-CGeB03oo.js","./tx_report_service-legacy-LWOPxp6r.js","./TableReportTemplate-legacy-C4LBGtof.js","./index-legacy-CNrLGT3P.js","./moh_cohort_service-legacy-DCfa07BQ.js","./HisStandardForm-legacy-OekRIZB_.js","./ReportErrors-legacy-C_GtpKAy.js"],(function(t,e){"use strict";var o,s,r,i,a,n,l,h,d,c,p,u,f;return{setters:[t=>{o=t._},t=>{s=t.T},t=>{r=t.R},t=>{i=t.d,a=t.L,n=t.cW,l=t._,h=t.r,d=t.o,c=t.c,p=t.w,u=t.b},t=>{f=t.M},null,null],execute:function(){const e=i({mixins:[o],components:{ReportTemplate:r},data:()=>({title:"TX Curr MMD Report",cohort:{},rows:[],totals:new Set,errors:[],showStatus:!1,columns:[[a.thTxt("Age group"),a.thTxt("Gender"),a.thNum("# of clients on <3 months of ARVs"),a.thNum("# of clients on 3 - 5 months of ARVs"),a.thNum("# of clients on >= 6 months of ARVs")]],headerInfoList:[],mohCohort:{},canValidate:!1}),watch:{async canValidate(t){t&&await this.validateReport()}},created(){this.fields=this.getDateDurationFields()},methods:{async onPeriod(t,e){this.canValidate=!1,this.totals.clear(),this.errors=[],this.showStatus=!1,this.rows=[],this.report=new s,this.mohCohort=new f,this.mohCohort.setOccupation(e.occupation),this.mohCohort.setStartDate(e.start_date),this.mohCohort.setEndDate(e.end_date),this.report.setOccupation(e.occupation),this.report.setStartDate(e.start_date),this.report.setEndDate(e.end_date),this.period=this.report.getDateIntervalPeriod(),this.report.initArvRefillPeriod(!0),await this.setRows(),this.canValidate=!0,this.showStatus=!0,this.setHeaderInfoList()},getValues(t,e){const o=[],s=[],r=[];for(const i in t){const e=t[i].prescribed_days;this.totals.add(i),e<90&&o.push(i),e>=90&&e<=150&&s.push(i),e>150&&r.push(i)}return[this.drill(o,`# of clients on < 3 months of ARVs (${e})`),this.drill(s,`# of clients on 3 - 5 months of ARVs (${e})`),this.drill(r,`# of clients on  >= 6 months of ARVs (${e})`)]},async setRows(){let t=0,e=0;const o=[],s=[];for(const r in n){const i=n[r];if("<1 year"===i)t=0,e=0;else if("90 plus years"===i)t=90,e=1e4;else{const[o,s]=i.split("-");t=parseInt(o),e=parseInt(s)}const l=await this.report.getTxCurrMMDReport(t,e);this.report.initArvRefillPeriod(!1),l?(s.push([a.td(i),a.td("Female"),...this.getValues(l.Female,`${i} Female`)]),o.push([a.td(i),a.td("Male"),...this.getValues(l.Male,`${i} Male`)])):(s.push([a.td(i),a.td("Female"),a.td(0),a.td(0),a.td(0)]),o.push([a.td(i),a.td("Male"),a.td(0),a.td(0),a.td(0)])),this.rows=[...s,...o]}},setHeaderInfoList(){this.headerInfoList=[{label:"Total clients",value:this.totals.size,other:{onclick:()=>this.runTableDrill(Array.from(this.totals),"Total Clients")}}]},validateReport(){const t={total_alive_and_on_art:{param:this.totals.size,check:(t,e)=>e>t,error:(t,e)=>`\n                        MoH cohort Alive and on ART clients <b>(${t})</b> is not\n                        matching with total TX MMD clients <b>(${e})</b>.\n                    `}};-1===this.mohCohort.validateIndicators(t,(t=>this.errors=t))&&(this.errors=["Report not validated. Run the MoH cohort report for similar reporting period and then run this report"])}}});t("default",l(e,[["render",function(t,e,o,s,r,i){const a=h("report-template"),n=h("ion-page");return d(),c(n,null,{default:p((()=>[u(a,{title:t.title,period:t.period,rows:t.rows,fields:t.fields,columns:t.columns,reportPrefix:"PEPFAR",config:{showIndex:!0},validationErrors:t.errors,showValidationStatus:t.showStatus,headerInfoList:t.headerInfoList,onReportConfiguration:t.onPeriod},null,8,["title","period","rows","fields","columns","validationErrors","showValidationStatus","headerInfoList","onReportConfiguration"])])),_:1})}]]))}}}));
