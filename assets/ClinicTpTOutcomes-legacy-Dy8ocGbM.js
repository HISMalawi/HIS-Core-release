System.register(["./index-legacy-BoFMGMh4.js","./TableView-legacy-XBFfdCeI.js","./clinic_report_service-legacy-BCf5Z_9p.js","./v2utils-legacy-2hbhS0H2.js","./Export-legacy-CzjitY0y.js","./index-legacy-Cko7jwhT.js"],(function(e,t){"use strict";var l,a,r,n,u,i,s,o,p,c,d,f,_,g,b,y;return{setters:[e=>{l=e.d,a=e.r,r=e.o,n=e.D,u=e.a,i=e.w,s=e.f,o=e.b,p=e.e,c=e.x,d=e.n,f=e.aZ},e=>{_=e.v},e=>{g=e.C},e=>{b=e.a,y=e.w},null,null],execute:function(){e("default",l({__name:"ClinicTpTOutcomes",setup(e){const t=c("reports.png"),l=a([]),T=a(""),v=new g,m=e=>({...e,toValue:e=>e.length,tdClick:e=>{b({title:`${e.data.age_group} ${e.column.label}`,subtitle:T.value,patientIdentifiers:e.refData.map((e=>e.patient_id))})}}),P=[[{label:"Age group",ref:"age_group"},{label:"TPT Type",ref:"tpt_type"},m({label:"Started TPT (New on ART)",ref:"started_tpt_new"}),m({label:"Started TPT (Previous on ART)",ref:"started_tpt_prev"}),m({label:"Completed TPT (New on ART)",ref:"completed_tpt_new"}),m({label:"Completed TPT (Previous on ART)",ref:"completed_tpt_prev"}),m({label:"Not completed TPT",ref:"not_completed_tpt"}),m({label:"Died",ref:"died"}),m({label:"Defaulted",ref:"defaulted"}),m({label:"Stopped ART",ref:"stopped"}),m({label:"TO",ref:"transfer_out"}),m({label:"Confirmed TB ",ref:"confirmed_tb"}),m({label:"Pregnant",ref:"pregnant"}),m({label:"Breastfeeding",ref:"breast_feeding"}),m({label:"Skin rash",ref:"skin_rash"}),m({label:"Peripheral neuropathy",ref:"peripheral_neuropathy"}),m({label:"Yellow eyes",ref:"yellow_eyes"}),m({label:"Nausea",ref:"nausea"}),m({label:"Dizziness",ref:"dizziness"})]],F=()=>y((async()=>{l.value=[];const e=(await v.getTtpOutcomes()).reduce(((e,t)=>({...e,[t.tpt_type]:[...e[t.tpt_type],t]})),{"3HP":[],"6H":[]});l.value=[...e["3HP"],...e["6H"]];const t=l.value.reduce(((e,t)=>(Object.keys(t).forEach((l=>{if(Array.isArray(t[l])){const a=a=>({...e[a],[l]:[...e?.[a]?.[l]??[],...t[l].filter((e=>e.gender===a))]});e={M:a("M"),F:a("F")}}})),e)),{M:{},F:{}}),a=f.uniq(t.F.pregnant),r=f.uniq(t.F.breast_feeding),n=a.concat(r);l.value=[...l.value,{age_group:"All",tpt_type:"Male",...t.M},{age_group:"All",tpt_type:"FP",...Object.keys(t.F).reduce(((e,l)=>({...e,[l]:t.F[l].filter((e=>a.includes(e)))})),{})},{age_group:"All",tpt_type:"FNP",...Object.keys(t.F).reduce(((e,l)=>({...e,[l]:t.F[l].filter((e=>!n.includes(e)))})),{})},{age_group:"All",tpt_type:"FBF",...Object.keys(t.F).reduce(((e,l)=>({...e,[l]:t.F[l].filter((e=>r.includes(e)))})),{})}]})),w=()=>n({onFinish:(e,t,l,a)=>{a&&v.setOccupation(a),T.value=`${l}`,v.startDate=e,v.endDate=t,F()}});return r((()=>!l.value.length&&w())),(e,a)=>(o(),u(s(d),null,{default:i((()=>[p(_,{"icon-url":s(t),subtitle:T.value,title:"TPT Outcome","report-prefix":"Clinic",columns:P,onConfigure:w,columnData:l.value,rowsPerPage:100,onRefresh:F},null,8,["icon-url","subtitle","columnData"])])),_:1}))}}))}}}));
