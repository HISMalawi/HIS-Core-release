System.register(["./ReportMixin.vue_vue_type_script_lang-legacy-D4pyLDml.js","./tx_report_service-legacy-C3q6B5ma.js","./TableReportTemplate-legacy-BGf2T7cz.js","./index-legacy-X--GYU37.js","./moh_cohort_service-legacy-CKqrl3To.js","./MultiFieldDateHelper-legacy-CxOWifLo.js","./dynamic-import-helper-legacy-DYK5bIOV.js","./KbLayouts-legacy-BKvPSxzZ.js","./HisKbConfigurations-legacy-vrLd9Pgz.js","./BasicReportTemplate-legacy-BTnU3dPa.js","./Export-legacy-DuqLSep7.js","./SIngleTouchField-legacy-DTkEGDmJ.js","./Pagination-legacy-C-UlluND.js","./HisStandardForm-legacy-DMJkhfrq.js","./TouchScreenForm-legacy-C_f8Ho2H.js","./ToolbarMediumCard-legacy-CdhT4OJW.js","./Transformers-legacy-DhNYVLaS.js","./ViewPort-legacy-1het9QhE.js","./ReportErrors-legacy-DSAcU8Yd.js"],(function(t,e){"use strict";var s,o,r,a,i,l,n,h,c,d,u,p,m,g;return{setters:[t=>{s=t._},t=>{o=t.T},t=>{r=t.R},t=>{a=t.d,i=t.I,l=t.L,n=t.cz,h=t._,c=t.r,d=t.o,u=t.c,p=t.w,m=t.b},t=>{g=t.M},null,null,null,null,null,null,null,null,null,null,null,null,null,null],execute:function(){const e=a({mixins:[s],components:{ReportTemplate:r,IonPage:i},data:()=>({title:"Moh TX CURR MMD Report",cohort:{},rows:[],headerInfoList:[],totals:new Set,mohCohort:{},errors:[],showStatus:!1,columns:[[l.thTxt("Age group"),l.thTxt("Gender"),l.thNum("# of clients on <3 months of ARVs"),l.thNum("# of clients on 3 - 5 months of ARVs"),l.thNum("# of clients on >= 6 months of ARVs")]],canValidate:!1}),created(){this.fields=this.getDateDurationFields()},watch:{async canValidate(t){t&&await this.validateReport()}},methods:{async onPeriod(t,e){this.canValidate=!1,this.rows=[],this.errors=[],this.showStatus=!1,this.report=new o,this.mohCohort=new g,this.mohCohort.setStartDate(e.start_date),this.mohCohort.setEndDate(e.end_date),this.mohCohort.setOccupation(e.occupation),this.report.setOrg("moh"),this.report.setOccupation(e.occupation),this.report.setStartDate(e.start_date),this.report.setEndDate(e.end_date),this.period=this.report.getDateIntervalPeriod(),await this.setRows(),this.setHeaderInfoList(),this.canValidate=!0,this.showStatus=!0},setHeaderInfoList(){this.headerInfoList=[{label:"Total clients",value:this.totals.size,other:{onclick:()=>this.runTableDrill(Array.from(this.totals),"Total Clients")}}]},getValues(t,e){const s=[],o=[],r=[];for(const a in t){const e=t[a].prescribed_days;this.totals.add(a),e<90&&s.push(a),e>=90&&e<=150&&o.push(a),e>150&&r.push(a)}return[this.drill(s,`${e} < 3 months of Arvs`),this.drill(o,`${e} 3-5 months of Arvs`),this.drill(r,`${e} > 6 months months of Arvs`)]},async setRows(){let t=0,e=0;const s=[],o=[];for(const r in n){const a=n[r];if("<1 year"===a)t=0,e=0;else if("90 plus years"===a)t=90,e=1e4;else{const[s,o]=a.split("-");t=parseInt(s),e=parseInt(o)}const i=await this.report.getTxCurrMMDReport(t,e);this.report.initArvRefillPeriod(!1),i?(o.push([l.td(a),l.td("Female"),...this.getValues(i.Female,`${a} (F)`)]),s.push([l.td(a),l.td("Male"),...this.getValues(i.Male,`${a} (M)`)])):(o.push([l.td(a),l.td("Female"),l.td(0),l.td(0),l.td(0)]),s.push([l.td(a),l.td("Male"),l.td(0),l.td(0),l.td(0)])),this.rows=[...o,...s]}},validateReport(){const t={total_alive_and_on_art:{param:this.totals.size,check:(t,e)=>t!=e,error:(t,e)=>`\n                        MoH cohort Alive and on ART clients <b>(${t})</b> is not\n                        matching with total TX MMD clients <b(${e}).</b>\n                    `}};-1===this.mohCohort.validateIndicators(t,(t=>this.errors=t))&&(this.errors=["Report not validated. Run the MoH cohort report for similar reporting period and then run this report"])}}});t("default",h(e,[["render",function(t,e,s,o,r,a){const i=c("report-template"),l=c("ion-page");return d(),u(l,null,{default:p((()=>[m(i,{title:t.title,period:t.period,rows:t.rows,fields:t.fields,columns:t.columns,reportPrefix:"MoH",config:{showIndex:!0},validationErrors:t.errors,showValidationStatus:t.showStatus,headerInfoList:t.headerInfoList,onReportConfiguration:t.onPeriod},null,8,["title","period","rows","fields","columns","validationErrors","showValidationStatus","headerInfoList","onReportConfiguration"])])),_:1})}]]))}}}));
