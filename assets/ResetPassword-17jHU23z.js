import{H as u}from"./HisStandardForm-CBuu18ya.js";import{d as p,r,ag as v,ad as i,ae as s,W as w,a as f,c as h,ah as m,U as _}from"./index-B8jPaabo.js";const P=p({__name:"ResetPassword",setup(y){const t=new m,a=r(!1),n=r("code"),d=v(),l=[{id:"code",helpText:"Verification Code (Contact HelpDesk if you don't have one)",type:i.TT_BARCODE,validation:s.required,condition:()=>!a.value,onValue:async e=>{a.value=await t.validateResetPasswordToken(e.replace(/-/g,"")),a.value?n.value="new_password":w("Invalid verification code")},config:{hiddenFooterBtns:["Next","Clear"]}},{id:"new_password",proxyID:"password",helpText:"New Password",type:i.TT_PASSWORD,condition:()=>a.value,validation:e=>s.required(e),computedValue:e=>"".concat(e.value).toLowerCase(),config:{hiddenFooterBtns:["Back"]}},{id:"verify_password",proxyID:"password",helpText:"Confirm Password",type:i.TT_PASSWORD,condition:()=>a.value,validation:(e,o)=>s.validateSeries([s.required,()=>e!==o.password.value?["Passwords do not match"]:null]),computedValue:e=>"".concat(e.value).toLowerCase()}];async function c(e,o){await _.updateUser(t.userID,o)&&(await t.resetUserPasswordChangeCheck(),d.push("/login"))}return(e,o)=>(f(),h(u,{cancelDestinationPath:"/login",fields:l,onFinishAction:c,activeField:n.value,"skip-summary":""},null,8,["activeField"]))}});export{P as default};
