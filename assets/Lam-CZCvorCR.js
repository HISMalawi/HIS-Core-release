import{d as T,r as E,bU as v,bZ as S,u as f,an as d,ao as i,e0 as t,a as A,b as L,w as R,e as b,i as r,q as D}from"./index-CJleCCtM.js";import{H as I}from"./HisStandardForm-BPNPJCrM.js";import{u as O}from"./useEncounter-BYi6HXkG.js";import{r as P}from"./commons-CcXQGk9e.js";import"./isEmpty-Dwdx9lIX.js";import"./encounter_guidelines-CfQXyRxl.js";import"./GuidelineEngine-D6V1_Znr.js";const w=T({__name:"Lam",setup(U){const n=E([]),e=new v(-1,S.LAB_RESULTS),l=f(),{goToNextTask:u,patientDashboardUrl:c}=O((s,o)=>{e.patientID=o,e.providerID=s;const p=()=>({id:"sampleResult",helpText:"LAM Result:",type:d.TT_SELECT,validation:a=>i.required(a),computedValue:a=>[{concept_id:t("TB_STATUS"),value_coded:t("".concat(a.value)),obs_datetime:e.date},{concept_id:t("BACTERIOLOGICALLY_DIAGNOSED"),value_coded:t("YES_ANSWER"),obs_datetime:e.date},{concept_id:t("PROCEDURE_TYPE"),value_coded:t("LAM"),obs_datetime:e.date},...a.value==="POSITIVE"?[{concept_id:t("TB_TYPE"),value_coded:t("EXTRA_PULMONARY_TB"),obs_datetime:e.date},{concept_id:t("TUBERCULOSIS_CLASS"),value_coded:t("LAM"),obs_datetime:e.date}]:[]],options:()=>[{value:"POSITIVE",label:"Positive"},{value:"NEGATIVE",label:"Negative"}]}),m=()=>({id:"resultDate",field_type:"date",helpText:"Sample Result Date:",type:d.TT_FULL_DATE,computedValue:a=>({concept_id:t("RESULT_DATE"),value_datetime:a.value,obs_datetime:e.date}),validation:a=>i.validateSeries([()=>i.required(a),()=>i.dateRangeOf(a,"".concat(l.query.date),e.date)])});n.value=[p(),m()]});async function _(s,o){await e.createEncounter(),await e.saveObservationList(await P(o)),u()}return(s,o)=>(A(),L(r(D),null,{default:R(()=>[b(I,{cancelDestinationPath:r(c),onFinishAction:_,fields:n.value,skipSummary:!0},null,8,["cancelDestinationPath","fields"])]),_:1}))}});export{w as default};
