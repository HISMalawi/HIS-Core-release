System.register(["./index-legacy--hxN_V8z.js","./TableView-legacy-Bw3PienI.js","./viral_load_report-legacy-C-riy_Ey.js","./ReportDateSelectionPrompt-legacy-ChCyO68J.js","./PopupKeyboard-legacy-Cmizlmo9.js","./SIngleTouchField-legacy-X9PnjTsk.js","./dynamic-import-helper-legacy-DYK5bIOV.js","./TouchScreenForm-legacy-DxIQwsU4.js","./ToolbarMediumCard-legacy-CzmL2SiF.js","./Transformers-legacy-DhNYVLaS.js","./ViewPort-legacy-TUlObaz7.js","./HisKeypad-legacy-BtDv5qCA.js","./BaseKeyboard-legacy-B0v61IaY.js","./KbLayouts-legacy-BKvPSxzZ.js","./KbHandler-legacy-De8o5nTq.js","./overlays-04a9a43f-legacy-CQAadd9M.js","./fuse-legacy-CQoBB3MK.js","./Export-legacy-BAJiCfrv.js","./HisKeyboard-legacy-C2eWFoVg.js","./HisKbConfigurations-legacy-vrLd9Pgz.js","./MultiFieldDateHelper-legacy-B97J9Bxd.js"],(function(e,l){"use strict";var a,t,n,r,o,i,s,u,c,d,g,y,p,b,f,j,m,v,D,h,_;return{setters:[e=>{a=e.d,t=e.I,n=e.c2,r=e.J,o=e.K,i=e.M,s=e.N,u=e.R,c=e.t,d=e.q,g=e.bA,y=e.c9,p=e._,b=e.r,f=e.o,j=e.c,m=e.w,v=e.b},e=>{D=e.v},e=>{h=e.V},e=>{_=e.D},null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null],execute:function(){const l=a({components:{IonPage:t,IonLoading:n,v2Datatable:D},setup(){const e=r(),l=o([]),a=o(""),t=o(!1),n=new h,p=o(!1),b=i((()=>[[{label:p.value?"Filing#":"ARV#",ref:"identifier"},{label:"First name",ref:"given_name",exportable:!1},{label:"Last name",ref:"family_name",exportable:!1},{label:"Gender",ref:"gender",value:e=>g(e.gender)},{label:"DOB",ref:"birthdate",value:e=>y(e.birthdate)},{label:"Date of VL Order",ref:"order_date",value:e=>y(e.order_date)},{label:"Action",ref:"patient_id",exportable:!1,tdClick:({data:l})=>e.push({path:`/patient/dashboard/${l.patient_id}`}),value:()=>"View client"}]])),f=async()=>{if(!n.startDate||!n.endDate)return c("Start date and end date required!");t.value=!0,l.value=[];try{l.value=await n.getVlCollection()}catch(e){d("Unable to generate report!")}t.value=!1},j=()=>_({onFinish:(e,l,t)=>{a.value=`Period (${t})`,n.startDate=e,n.endDate=l,f()}});return s((()=>{u.get("IS_ART_FILING_NUMBER_ENABLED").then((e=>p.value=e)),!l.value.length&&j()})),{reportData:l,isLoading:t,configure:j,generate:f,columns:b,period:a}}});e("default",p(l,[["render",function(e,l,a,t,n,r){const o=b("ion-loading"),i=b("v2Datatable"),s=b("ion-page");return f(),j(s,null,{default:m((()=>[v(o,{"is-open":e.isLoading,message:"Please wait..."},null,8,["is-open"]),v(i,{title:"VL Collection",subtitle:e.period,columns:e.columns,columnData:e.reportData,rowsPerPage:20,onConfigure:e.configure,onRefresh:()=>e.generate(),"report-prefix":"Clinic"},null,8,["subtitle","columns","columnData","onConfigure","onRefresh"])])),_:1})}]]))}}}));
