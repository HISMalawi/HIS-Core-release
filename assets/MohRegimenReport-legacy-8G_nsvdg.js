System.register(["./ReportMixin.vue_vue_type_script_lang-legacy-s5aFW3cm.js","./TableReportTemplate-legacy-oS9JYFBv.js","./index-legacy-uRreDP0D.js","./MultiFieldDateHelper-legacy-URVOEyak.js","./dynamic-import-helper-legacy-BhGHTWZn.js","./KbLayouts-legacy-NQmKRJpJ.js","./HisKbConfigurations-legacy-AV_G95Cg.js","./BasicReportTemplate-legacy-ZeTx3OfK.js","./Export-legacy-ZKnTuBGa.js","./SIngleTouchField-legacy-mPV_2Ngo.js","./Pagination-legacy-OaAedp7t.js","./HisStandardForm-legacy-U_iL4SQp.js","./TouchScreenForm-legacy-ogo2k9RR.js","./ToolbarMediumCard-legacy-ppaO_MMI.js","./Transformers-legacy-PbfCTy2a.js","./ViewPort-legacy-ItUHAnm-.js","./ReportErrors-legacy-xQdMuo8Y.js"],(function(e,t){"use strict";var s,i,r,a,n,o,l,d,c,u,p,h;return{setters:[e=>{s=e._},e=>{i=e.R},e=>{r=e.bB,a=e.d,n=e.I,o=e.L,l=e._,d=e.r,c=e.o,u=e.c,p=e.w,h=e.b},null,null,null,null,null,null,null,null,null,null,null,null,null,null],execute:function(){class t extends r{regenerate;data;clients;constructor(){super(),this.clients=[],this.data=[],this.regenerate=!1}setRegenerate(e){this.regenerate=e}async generateReport(){this.data=[],this.clients=[];const e=await this.getReport("latest_regimen_dispensed",this.buildRequest({rebuild_outcome:this.regenerate}));if(!e)return[];for(const t in e){for(const s in e[t]){const i=e[t][s];this.data.push({identifier:i.identifier,drugName:i.name,gender:i.gender,dob:i.birthdate,dispensationDate:i.dispensation_date,packSize:i.pack_sizes[0],packSizes:i.pack_sizes.length,quantity:i.quantity})}this.clients.push(parseInt(`${t}`))}return this.data}}const g=a({mixins:[s],components:{ReportTemplate:i,IonPage:n},data:()=>({title:"Regimen Report",rows:[],headerList:[],columns:[[o.thTxt("ARV#"),o.thTxt("Gender"),o.thTxt("DOB"),o.thTxt("Drug Name"),o.thTxt("Date"),o.thTxt("Pack size"),o.thTxt("Total pack"),o.thTxt("Total pills")]]}),created(){this.fields=this.getDateDurationFields()},methods:{async onPeriod(e,s,i=!1){this.rows=[],this.report=new t,this.report.setOccupation(s.occupation),this.report.setRegenerate(i),this.report.setStartDate(s.start_date),this.report.setEndDate(s.end_date),this.period=this.report.getDateIntervalPeriod();const r=await this.report.generateReport();this.setRows(r),this.headerList=[{label:"Total clients",value:this.report.clients.length}]},setRows(e){const t=e=>e?o.tdDate(e):o.td("N/A");this.rows=this.sortByArvNumber(e,"identifier").map((e=>[this.tdARV(e.identifier),o.td(this.formatGender(e.gender)),t(e.dob),o.td(e.drugName),t(e.dispensationDate),o.td(e.packSize),o.td(e.packSizes),o.td(e.quantity)]))}}});e("default",l(g,[["render",function(e,t,s,i,r,a){const n=d("report-template"),o=d("ion-page");return c(),u(o,null,{default:p((()=>[h(n,{reportPrefix:"MoH",title:e.title,period:e.period,rows:e.rows,fields:e.fields,columns:e.columns,hasServerSideCaching:!0,headerInfoList:e.headerList,onReportConfiguration:e.onPeriod},null,8,["title","period","rows","fields","columns","headerInfoList","onReportConfiguration"])])),_:1})}]]))}}}));
