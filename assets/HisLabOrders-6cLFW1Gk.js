import{d as y,bk as k,f as g,H as a,n as O,O as S,ae as D,_ as $,r as d,o as i,c as C,w as u,A as e,x as l,B as m,y as p,b as x,u as _,v as o,a5 as B,a6 as F,a7 as H}from"./index-PKQE-5WY.js";import{L as I}from"./LabOrderModal-BtmU0Ttm.js";import{_ as L}from"./FieldMixin.vue_vue_type_script_lang-CzIW73qd.js";import"./lab_order_service-bRPkRUNN.js";import"./HisKeyboard-DMN0icra.js";import"./fuse-YdZE3OCN.js";const N=y({components:{ViewPort:k,IonButton:g},mixins:[L],data:()=>({HisDate:a,rows:[]}),methods:{async init(){this.$emit("onFieldActivated",this);const t=(await this.options(this.fdata))[0].other.values;this.rows=t.map(n=>(n.id=n.order_id,n.ordered&&(n.ordered=a.toStandardHisDisplayFormat(n.ordered)),n.released&&(n.released=a.toStandardHisDisplayFormat(n.released)),n))},async printOrder(s){var t;typeof((t=this.config)==null?void 0:t.printOrder)=="function"&&await O("Do you want to print order with accession number ".concat(s.accession_number,"?"))&&this.config.printOrder(s.id)},formatOrders(s){return s.map(t=>({id:t.order_id,encounter_id:t.encounter_id,result_given:t.result_given,accession_number:t.accession_number,test_name:t.tests[0].name,specimen:t.specimen.name,ordered:a.toStandardHisDisplayFormat(t.order_date),result:[],release:""}))},async launchOrderSelection(s=null){const t=await S.create({component:I,backdropDismiss:!1,cssClass:"large-modal",componentProps:{testFilters:s}});t.present();const{data:n}=await t.onDidDismiss();D.isEmpty(n)||(this.rows=[...this.formatOrders(n),...this.rows])}},mounted(){this.init()},activated(){this.init()}}),h=s=>(F("data-v-b274fd21"),s=s(),H(),s),V={class:"view-port-content"},A={class:"his-sm-text"},E=h(()=>e("tr",null,[e("th",null,"Accession #"),e("th",null,"Test Name"),e("th",null,"Specimen"),e("th",null,"Ordered"),e("th",null,"Result"),e("th",null,"Released"),e("th",null,"Given")],-1)),P=h(()=>e("br",null,null,-1));function R(s,t,n,T,z,G){const f=d("ion-button"),w=d("view-port");return i(),C(w,null,{default:u(()=>[e("div",V,[e("table",A,[E,(i(!0),l(m,null,p(s.rows,(r,b)=>(i(),l("tr",{key:b},[e("td",null,[x(f,{color:"light",fill:"none",onClick:c=>s.printOrder(r)},{default:u(()=>[_(o(r.accession_number),1)]),_:2},1032,["onClick"])]),e("td",null,o(r.test_name),1),e("td",null,o(r.specimen),1),e("td",null,o(r.ordered),1),e("td",null,[(i(!0),l(m,null,p(r.result,(c,v)=>(i(),l("span",{key:v},[_(o(c)+" ",1),P]))),128))]),e("td",null,o(r.released),1),e("td",null,[e("span",{style:B("color: ".concat(r.result_given==="Yes"?"green;":"black;"))},o(r.result_given),5)])]))),128))])])]),_:1})}const Q=$(N,[["render",R],["__scopeId","data-v-b274fd21"]]);export{Q as default};
