import{d as R,K as a,I as b,c4 as C,N as L,O as n,cb as s,V as g,_ as $,r as c,o as w,c as P,w as y,b as D}from"./index-BCTN_bnC.js";import{v as E}from"./TableView-Briqb80_.js";import{M as F}from"./PopupKeyboard-DWLNjJL8.js";import{F as _}from"./dynamic-import-helper-BkBZiFw5.js";import{A}from"./aetc_report_service-qBh4quIy.js";import{D as V}from"./DrillPatientIds-BMbsDVCC.js";import"./Export-nPQsqN2_.js";import"./SIngleTouchField-DeaPtOu6.js";import"./TouchScreenForm-TKB9q3ZD.js";import"./ToolbarMediumCard-O_J6wu7C.js";import"./Transformers-BPPLlH12.js";import"./ViewPort-BCxYiILf.js";import"./HisKeypad-iWtx_mcq.js";import"./BaseKeyboard-BdU8h7Jm.js";import"./KbLayouts-VRA-vjeH.js";import"./KbHandler-BuQ4TFU6.js";import"./TableView-Dtifi8zd.js";import"./fuse-YdZE3OCN.js";import"./HisKeyboard-COmBOOo8.js";import"./HisKbConfigurations-GhFQZvlg.js";const d=a([]),r=a(""),i=a(""),u=a(""),k=a(!1),h=a(""),Q=R({components:{IonPage:b,IonLoading:C,v2Datatable:E},setup(){const o=async()=>{const e=new A;e.startDate=r.value,e.endDate=i.value;try{const t=await e.getClinicReport("REFERRAL_REPORT");d.value=t}catch(t){console.log(t)}},m=["Diagnosis","Total"],v=[[{label:"Diagnosis",ref:"data.location",value:e=>e.location},{label:"Total",ref:"data.patients.length",secondaryLabel:"Referred Clients",value:e=>e.patients.length,tdClick:({column:e,data:t})=>f("".concat(e.secondaryLabel," ").concat(t.diagnosis," "),t.patients)}]],f=async(e,t)=>{t.length<=0||(await n.create({component:V,backdropDismiss:!1,cssClass:"large-modal",componentProps:{title:e,subtitle:u,patientIdentifiers:t,onFinish:()=>n.getTop().then(p=>p&&n.dismiss())}})).present()},l=()=>F([{id:"start_date",helpText:"Start Date",type:_.TT_FULL_DATE,validation:e=>g.required(e),computedValue:e=>e.value},{id:"end_date",helpText:"End Date",type:_.TT_FULL_DATE,validation:e=>g.required(e),computedValue:e=>e.value}],(e,t)=>{r.value=t.start_date,i.value=t.end_date,u.value="Period (".concat(s(r.value)," to ").concat(s(i.value),")"),n.dismiss(),h.value="".concat(s(r.value)," to ").concat(s(i.value)),o()});return L(()=>!d.value.length&&l()),{columns:v,isLoading:k,reportData:d,period:u,csvQuarter:h,csvheaders:m,generate:o,configure:l}}});function I(o,m,v,f,l,e){const t=c("ion-loading"),p=c("v2Datatable"),T=c("ion-page");return w(),P(T,null,{default:y(()=>[D(t,{"is-open":o.isLoading,message:"Please wait..."},null,8,["is-open"]),D(p,{title:"AETC Referral Report",subtitle:o.period,columns:o.columns,columnData:o.reportData,rowsPerPage:25,onConfigure:o.configure,csvQuarter:o.csvQuarter,headers:o.csvheaders,onRefresh:()=>o.generate()},null,8,["subtitle","columns","columnData","onConfigure","csvQuarter","headers","onRefresh"])]),_:1})}const oe=$(Q,[["render",I]]);export{oe as default};
