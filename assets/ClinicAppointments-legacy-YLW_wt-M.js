System.register(["./index-legacy-2OuOZQ1w.js","./TableView-legacy-qKxmf6r2.js","./appointment_service-legacy-CAQgSgVn.js","./v2utils-legacy-CCuoT59T.js","./Export-legacy-D1zUexdI.js","./index-legacy-D_LoyUSC.js"],(function(e,t){"use strict";var a,l,n,r,i,o,s,u,d,c,p,b,m,g,f,v,_,y,$,h,w;return{setters:[e=>{a=e.d,l=e.r,n=e.dp,r=e.o,i=e.a,o=e.w,s=e.f,u=e.dB,d=e.cw,c=e.an,p=e.ao,b=e.b,m=e.e,g=e.cv,f=e.x,v=e.m},e=>{_=e.v},e=>{y=e.A},e=>{$=e.w,h=e.b,w=e.c},null,null],execute:function(){e("default",a({__name:"ClinicAppointments",setup(e){const t=l([]),a=l(""),x=new n,A=l({}),D=f("reports.png"),V=[[h(),{label:"First name",ref:"given_name",encrypted:!0},{label:"Last name",ref:"family_name",encrypted:!0},{label:"Gender",ref:"gender",toValue:e=>g(e)},{label:"Birthdate",ref:"birthdate",toValue:e=>`${d(e)}`},{label:"Outcome",ref:"outcome"},{ref:"district",label:"Current Address",encrypted:!0,exportedValue:{dataValue:e=>`\n                ${e.data.district},\n                ${e.data.village},\n                ${e.data.land_mark},\n                ${e.data.cell_phone}\n            `},value:e=>`District: <br/> <b>${e.district}</b><br/>\n            Village: <br/> <b>${e.village}</b><br/>\n            Land-mark: <br/> <b>${e.land_mark}</b><br/>\n            Cellphone: <br/> <b>${e.cell_phone}</b>\n        `},w("person_id","/patients/confirm?person_id=")]],j=()=>$((async()=>{t.value=[],t.value=await x.getBookedAppointments(x.startDate)})),C=()=>{u({id:"date",helpText:"Select date",type:p.TT_DATE_PICKER,defaultValue:()=>n.getSessionDate(),validation:e=>c.required(e),onValue:async e=>(A.value[e]||(A.value[e]=(await y.getDailiyAppointments(e))?.length??0),!0),config:{infoItems:e=>[{label:"Appointments",value:A.value[e]}]}},(e=>{x.setStartDate(e),a.value=`Appointment date: ${d(e)}`,j()}))};return r((()=>!t.value.length&&C())),(e,l)=>(b(),i(s(v),null,{default:o((()=>[m(_,{"default-sort-order":"asc","default-sorted-column":"given_name","icon-url":s(D),title:"Booked clients","report-prefix":"Clinic",subtitle:a.value,columns:V,columnData:t.value,rowsPerPage:50,onConfigure:C,onRefresh:j},null,8,["icon-url","subtitle","columnData"])])),_:1}))}}))}}}));
