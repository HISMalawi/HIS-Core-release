System.register(["./index-legacy-D_IOdfSn.js","./v2utils-legacy-PWGPsSAm.js","./tb_report_service-legacy-rhS19ULY.js","./TableView-legacy-BYW8J5Df.js","./TBDrilldown-legacy-vUug3nKS.js","./Export-legacy-DMVkqd5j.js","./index-legacy-EsV9Q7sS.js"],(function(e,t){"use strict";var n,a,l,r,s,o,i,u,c,g,d,p,_,v,w,T,m;return{setters:[e=>{n=e.d,a=e.r,l=e.o,r=e.a,s=e.c,o=e.w,i=e.b,u=e.u,c=e.D,g=e.I,d=e.i,p=e.au,_=e.W},e=>{v=e.w},e=>{w=e.T},e=>{T=e.v},e=>{m=e.T},null,null],execute:function(){e("default",n({__name:"TBStatArtReport",setup(e){const t=d("login-logos/PEPFAR.png"),n=a([]),f=a(""),y=new w,b=(e,t)=>({label:e,ref:t,toValue:e=>e.length,tdClick:async e=>(await p.create({component:m,backdropDismiss:!1,cssClass:"large-modal",componentProps:{title:e.column.label,patientIdentifiers:e.refData,subtitle:`Period: ${f.value}`,onFinish:()=>p.getTop().then((e=>e&&p.dismiss()))}})).present()}),R=[[{label:"#",ref:"index"},{label:"Age group",ref:"age_group"},{label:"Gender",ref:"gender"},b("Known positive","known_positive"),b("Newly Tested Positives","newly_tested_positive"),b("New Negatives","new_negative"),b("Recent negative","recent_negative"),b("Not Done","not_done"),b("New on ART","new_on_art"),b("Already on ART","already_on_art")]],A=()=>v((async()=>{if(!y.startDate||!y.endDate)return _("Start date and end date required!");n.value=[];const e=await w.getJson("programs/2/reports/TB_ART_STAT",y.buildRequestParams({})),t=Object.keys(e).reduce(((t,n)=>(/unknown|all/i.test(n)||(t.M.push({age_group:n,gender:"Male",...e[n].M}),t.F.push({age_group:n,gender:"Female",...e[n].F})),t)),{F:[],M:[]}),a=[...t.F,...t.M];n.value=a.map(((e,t)=>({index:t+1,...e})))})),D=()=>c({onFinish:(e,t,n)=>{f.value=`${n}`,y.startDate=e,y.endDate=t,A()}});return l((()=>D())),(e,a)=>(r(),s(u(g),null,{default:o((()=>[i(T,{title:"TB STAT ART Report","report-prefix":"PEPFAR","icon-url":u(t),subtitle:f.value,columns:R,columnData:n.value,rowsPerPage:50,onConfigure:D,onRefresh:()=>A()},null,8,["icon-url","subtitle","columnData","onRefresh"])])),_:1}))}}))}}}));
