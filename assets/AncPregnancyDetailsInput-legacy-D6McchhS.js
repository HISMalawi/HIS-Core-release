System.register(["./FieldMixin.vue_vue_type_script_lang-legacy-Ctrzw-s_.js","./ViewPort-legacy-CDi_rmkw.js","./index-legacy-C29Eb2Qm.js","./SIngleTouchField-legacy-BRNk_9sq.js","./dynamic-import-helper-legacy-DYK5bIOV.js"],(function(e,l){"use strict";var t,a,i,n,o,d,s,u,c,r,h,p,m,f,y,_,b,v,w,k,g,x,V,C,F,T,D,I,M,E,R;return{setters:[e=>{t=e._},e=>{a=e.V},e=>{i=e.d,n=e.k,o=e.bb,d=e.ct,s=e.cw,u=e.ai,c=e.ak,r=e.aj,h=e.cc,p=e.cd,m=e.t,f=e.O,y=e.ab,_=e._,b=e.r,v=e.o,w=e.c,k=e.w,g=e.b,x=e.x,V=e.F,C=e.y,F=e.z,T=e.u,D=e.v,I=e.A,M=e.a3,E=e.a4},e=>{R=e.T},null],execute:function(){var l=document.createElement("style");l.textContent="ion-radio[data-v-a4497403]{--size: 48px}\n",document.head.appendChild(l);const j=i({name:"HisSelect",mixins:[t],components:{IonTitle:n,IonInput:o,IonRadioGroup:d,IonRadio:s,IonGrid:u,IonCol:c,IonRow:r,ViewPort:a},setup:()=>({arrowUp:h,arrowDown:p}),data:()=>({selected:"",listData:[]}),mounted(){this.init()},activated(){this.init()},methods:{async init(){this.$emit("onFieldActivated",this),this.listData=await this.options(this.fdata),this.listData.length&&(this.selected=this.listData[0].label)},warn(e){m(e)},async launchModal(e,l){(await f.create({component:R,backdropDismiss:!1,cssClass:"full-modal",componentProps:{dismissType:"modal",currentField:e,onFinish:l}})).present()},async editField(e,l){const t=t=>{e.value=t,"function"==typeof e?.field?.computedValue&&(e.computedValue=e?.field?.computedValue(t)),"function"==typeof e?.field?.onValueUpdate&&e.field.onValueUpdate(t,l)};this.launchModal(e.field,(l=>{if(!Array.isArray(l)&&l.label.match(/unknown/i)&&"function"==typeof e.field?.config?.onUnknownEstimateField)return this.launchModal(e.field.config.onUnknownEstimateField(),(e=>t(e)));t(l)}))}},watch:{listData:{handler(e){const l=[],t=e.map((e=>e.other.data)).reduce(((e,l)=>[...e,...l.reduce(((e,l)=>[...e,...l]),[])]),[]).filter((e=>e.required&&""===e.value?(l.push(e.label),!1):!!e.required)).map((e=>({label:e.label,value:e.value,other:{obs:e.computedValue}})));y.isEmpty(l)?this.$emit("onValue",t):this.$emit("onValue",[{label:"_INCOMPLETE_RECORD_ERROR_",value:l.length,other:{incompleteLabels:l}}])},deep:!0}}}),L={key:0},U=(e=>(M("data-v-a4497403"),e=e(),E(),e))((()=>I("p",null,null,-1)));e("default",_(j,[["render",function(e,l,t,a,i,n){const o=b("ion-radio"),d=b("ion-label"),s=b("ion-item"),u=b("ion-radio-group"),c=b("ion-list"),r=b("ion-col"),h=b("ion-title"),p=b("ion-row"),m=b("ion-input"),f=b("ion-grid"),y=b("view-port");return v(),w(y,null,{default:k((()=>[g(f,{class:"view-port-content"},{default:k((()=>[g(p,null,{default:k((()=>[g(r,{size:"4"},{default:k((()=>[g(c,null,{default:k((()=>[g(u,{modelValue:e.selected,"onUpdate:modelValue":l[0]||(l[0]=l=>e.selected=l)},{default:k((()=>[(v(!0),x(V,null,C(e.listData,((e,l)=>(v(),w(s,{detail:"",lines:"none",class:"his-md-text his-card ion-padding",key:l},{default:k((()=>[g(o,{slot:"start",value:e.label},null,8,["value"]),g(d,{innerHTML:e.label},null,8,["innerHTML"])])),_:2},1024)))),128))])),_:1},8,["modelValue"])])),_:1})])),_:1}),g(r,null,{default:k((()=>[(v(!0),x(V,null,C(e.listData,((l,t)=>(v(),x("div",{key:t},[e.selected===l.label?(v(),x("div",L,[(v(!0),x(V,null,C(l.other.data,((a,i)=>(v(),w(f,{style:{"margin-bottom":"10px"},class:"his-card",key:i},{default:k((()=>[l?.other?.rowTitles?(v(),w(p,{key:0,style:{background:"#F8F8F8"}},{default:k((()=>[g(r,{class:"ion-text-center"},{default:k((()=>[g(h,{class:"his-md-text",innerHTML:l?.other?.rowTitles&&l?.other?.rowTitles[i]||""},null,8,["innerHTML"])])),_:2},1024)])),_:2},1024)):F("",!0),U,(v(!0),x(V,null,C(a,((l,a)=>(v(),w(p,{key:a},{default:k((()=>[g(r,null,{default:k((()=>[l.disabled?(v(),w(s,{key:0,onClick:t=>e.warn(`Cannot edit ${l.label}`),class:"his-sm-text"},{default:k((()=>[g(d,null,{default:k((()=>[T(D(l.label),1)])),_:2},1024),g(m,{placeholder:"N/A",slot:"end"})])),_:2},1032,["onClick"])):F("",!0),l.disabled?F("",!0):(v(),w(s,{key:1,class:"his-sm-text",onClick:a=>e.editField(l,e.listData[t].other.data[i])},{default:k((()=>[g(d,{color:l?.value?.label?"":"danger"},{default:k((()=>[I("b",null,D(l.label),1)])),_:2},1032,["color"]),g(m,{class:"his-md-text",slot:"end",readonly:!0,value:l?.value?.label,placeholder:"Click to edit"},null,8,["value"])])),_:2},1032,["onClick"]))])),_:2},1024)])),_:2},1024)))),128))])),_:2},1024)))),128))])):F("",!0)])))),128))])),_:1})])),_:1})])),_:1})])),_:1})}],["__scopeId","data-v-a4497403"]]))}}}));
