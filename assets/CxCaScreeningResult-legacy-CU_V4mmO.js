System.register(["./index-legacy-2OuOZQ1w.js","./HisStandardForm-legacy-Cd-xGvNm.js","./useEncounter-legacy-CmWPg-MA.js","./commons-legacy-tpV43DUS.js","./isEmpty-legacy-C2nv7YqI.js","./encounter_guidelines-legacy-w17rLgkK.js","./GuidelineEngine-legacy-KsvQuFdF.js"],(function(e,t){"use strict";var a,n,i,o,r,l,s,u,d,c,v,p,T,_,b;return{setters:[e=>{a=e.bW,n=e.d,i=e.r,o=e.an,r=e.ao,l=e.a,s=e.f,u=e.q,d=e.b,c=e.p},e=>{v=e.H},e=>{p=e.u},e=>{T=e.y,_=e.m,b=e.r},null,null,null],execute:function(){class t extends a{constructor(e,t){super(e,186,t)}}e("default",n({__name:"CxCaScreeningResult",setup(e){let a;const n=i([]),m=i(""),{patientDashboardUrl:f,goToNextTask:g,goToPatientDashboard:V}=p((async(e,i)=>{a=new t(i,e),m.value=await a.getFirstValueCoded("CxCa screening method"),n.value=[{id:"results_available",helpText:"Screening result available",type:r.TT_SELECT,validation:e=>o.required(e),options:()=>T(),computedValue:e=>({obs:a.buildValueCoded("Screening results available",e.value)})},{id:"screening_result",helpText:"Screening Result",type:r.TT_SELECT,validation:e=>o.required(e),options:()=>{return _(((e=m.value)||(u("No screening methods have been selected"),V()),/via/i.test(e)?["VIA Negative","VIA Positive","Suspect Cancer"]:/smear/i.test(e)?["PAP Smear Normal","PAP Smear Abnormal"]:/HPV DNA/i.test(e)?["HPV positive","HPV negative"]:/Speculum/i.test(e)?["Visible Lesion","No visible Lesion","Suspect Cancer","Other Gynae"]:[]));var e},condition:e=>"Yes"===e.results_available.value,computedValue:e=>({obs:a.buildValueCoded("Screening results",e.value)})},{id:"gynae_options",helpText:"Other Gynae treatment",type:r.TT_SELECT,validation:e=>o.required(e),options:()=>_(["STI","Cervicitis","Polyp","Genital warts","Nabothian cysts"]),condition:e=>"Other Gynae"===e.screening_result.value,computedValue:e=>({obs:a.buildValueCoded("Screening results",e.value)})},{id:"offer_via",helpText:"Offer VIA",type:r.TT_SELECT,validation:e=>o.required(e),options:()=>T(),condition:e=>"HPV positive"===e.screening_result.value,computedValue:e=>({obs:a.buildValueCoded("Patient went for VIA?",e.value)})},{id:"via_screening_results",helpText:"VIA screening results",type:r.TT_SELECT,validation:e=>o.required(e),options:()=>_(["VIA negative","VIA positive","Suspect cancer"]),condition:e=>"Yes"===e.offer_via.value,computedValue:e=>({obs:a.buildValueCoded("VIA Results",e.value)})},{id:"reason_for_not_offering_via",helpText:"Reason for NOT offering VIA",type:r.TT_SELECT,validation:e=>o.required(e),options:()=>_(["Client NOT ready","Treatment not available","Other conditions"]),condition:e=>"No"===e.offer_via.value,computedValue:e=>({obs:a.buildValueCoded("Other reason for not seeking services",e.value)})},{id:"further_details_via",helpText:"Further details",type:r.TT_TEXT,validation:e=>o.required(e),computedValue:e=>({obs:a.buildValueText("Other reason for not seeking services",e.label)}),condition:e=>"Other conditions"===e.reason_for_not_offering_via.value||"Treatment not available"===e.reason_for_not_offering_via.value},{id:"treatment_option",helpText:"Enter treatment option",type:r.TT_SELECT,validation:e=>o.required(e),options:()=>_(["Same day treatment","Postponed treatment","Referral"]),condition:e=>!["VIA Negative","No visible Lesion","PAP Smear Normal","HPV negative"].includes(e.screening_result.value),computedValue:e=>({obs:a.buildValueCoded("Directly observed treatment option",e.value)})},{id:"postponed_reason",helpText:"Select reason for postponing treatment",type:r.TT_SELECT,validation:e=>o.required(e),options:()=>_(["Client not ready","Treatment not available","Other conditions"]),condition:e=>"Postponed treatment"===e.treatment_option.value,computedValue:e=>({obs:a.buildValueCoded("Postponed reason",e.value)})},{id:"referral_rreason",helpText:"Referral reason",type:r.TT_SELECT,validation:e=>o.required(e),options:()=>_(["Further Investigation and Management","Large Lesion (Greater than 75 percent)","Unable to treat client","Suspect Cancer","Treatment not available","Other conditions"]),condition:e=>"Referral"===e.treatment_option.value,computedValue:e=>({obs:a.buildValueCoded("Referral reason",e.value)})},{id:"further_details_referral",helpText:"Further details",type:r.TT_TEXT,validation:e=>o.required(e),computedValue:e=>({obs:a.buildValueText("Referral reason",e.label)}),condition:e=>"Other conditions"===e.referral_rreason.value||"Unable to treat client"===e.referral_rreason.value}]}));async function h(e,n){if(!(await a.createEncounter()))return u("Unable to create encounter");const i=await b(n);if("Referral"===e.treatment_option?.value){const e=t.getLocationName()??"";i.push(await a.buildValueText("Referral location",e))}await a.saveObservationList(i),c("Observations and encounter created!"),g()}return(e,t)=>(d(),l(v,{fields:n.value,onFinishAction:h,skipSummary:!1,cancelDestinationPath:s(f)},null,8,["fields","cancelDestinationPath"]))}}))}}}));
