System.register(["./index-legacy-D2iCn0VZ.js","./HisStandardForm-legacy-DWEtuKgE.js","./EncounterMixin.vue_vue_type_script_lang-legacy-l7IlPNdY.js","./social_history_service-legacy-B0am1BEN.js","./encounter_guidelines-legacy-DtASQQT-.js","./GuidelineEngine-legacy-KsvQuFdF.js"],(function(e,i){"use strict";var s,a,o,t,l,n,r,u,d,c,h,y;return{setters:[e=>{s=e.d,a=e.al,o=e.am,t=e.s,l=e.q,n=e.ak,r=e.a,u=e.ap,d=e.b},e=>{c=e.H},e=>{h=e._},e=>{y=e.S},null,null],execute:function(){const i=s({mixins:[h],components:{HisStandardForm:c},data:()=>({socialHistory:{},obs:[]}),watch:{ready:{async handler(e){e&&(this.socialHistory=new y(this.patientID,this.providerID),this.fields=await this.getFields())},immediate:!0}},methods:{async onFinish(){if(!(await this.socialHistory.createEncounter()))return t("Unable to create encounter");const e=await Promise.all([...this.obs]);if(!(await this.socialHistory.saveObservationList(e)))return t("Unable to save patient observations");l("Observations and encounter created!"),this.nextTask()},getFields(){return[{id:"smoking_history",helpText:"Have you ever smoked cigarettes?",type:o.TT_SELECT,validation:e=>a.required(e),options:()=>[{label:"Yes",value:"Yes"},{label:"No",value:"No"}],unload:async e=>{this.obs.push(this.socialHistory.buildValueCoded("SMOKE_HIS",e.value))}},{id:"number_of_cigarettes",helpText:"Number of cigarettes smoked per day",type:o.TT_NUMBER,validation:e=>a.rangeOf(e,1,90),condition:e=>"Yes"===e.smoking_history.value,unload:async e=>{this.obs.push(this.socialHistory.buildValueNumber("Number of cigarettes smoked per day",e.value))}},{id:"smoking_duration",helpText:"How long have you been smoking?",type:o.TT_SELECT,validation:e=>a.required(e),condition:e=>"Yes"===e.smoking_history.value,options:()=>[{label:"Less than five years",value:"Less than five years"},{label:"Five years or more",value:"Five years or more"}],unload:async e=>{this.obs.push(this.socialHistory.buildValueText("Smoking duration",e.value))}},{id:"current_smoker",helpText:"Do you still smoke?",type:o.TT_SELECT,validation:e=>a.required(e),condition:e=>"Yes"===e.smoking_history.value,options:()=>[{label:"Yes",value:"Yes"},{label:"No",value:"No"}],unload:async e=>{this.obs.push(this.socialHistory.buildValueCoded("Current smoker",e.value))}},{id:"alcohol_history",helpText:"Do you drink alcohol?",type:o.TT_SELECT,validation:e=>a.required(e),options:()=>[{label:"Yes",value:"Yes"},{label:"No",value:"No"}],unload:async e=>{this.obs.push(this.socialHistory.buildValueCoded("Does the patient drink alcohol?",e.value))}},{id:"number_of_drinks",helpText:"How many alcoholic drinks do you have per day?",type:o.TT_NUMBER,validation:e=>a.required(e),condition:e=>"Yes"===e.alcohol_history.value,unload:async e=>{this.obs.push(this.socialHistory.buildValueNumber("Alcoholic drinks per day",e.value))}},{id:"number_of_days_drank",helpText:"Number of days per week alcohol is used?",type:o.TT_NUMBER,validation:e=>a.rangeOf(e,1,7),condition:e=>"Yes"===e.alcohol_history.value,unload:async e=>{this.obs.push(this.socialHistory.buildValueNumber("Number of days per week alcohol is used",e.value))}},{id:"exercise",helpText:"Do you do any physical exercise?",type:o.TT_SELECT,validation:e=>a.required(e),options:()=>[{label:"Yes",value:"Yes"},{label:"No",value:"No"}],unload:async e=>{this.obs.push(this.socialHistory.buildValueCoded("Physical Exercises",e.value))}},{id:"employment",helpText:"Type of employment?",type:o.TT_SELECT,validation:e=>a.required(e),options:()=>[{label:"Active",value:"Active"},{label:"Sedentary",value:"Sedentary"}],unload:async e=>{this.obs.push(this.socialHistory.buildValueText("Type of employment",e.value))}}]}}});e("default",n(i,[["render",function(e,i,s,a,o,t){const l=u("his-standard-form");return d(),r(l,{fields:e.fields,onFinishAction:e.onFinish,skipSummary:!1,cancelDestinationPath:e.cancelDestination},null,8,["fields","onFinishAction","cancelDestinationPath"])}]]))}}}));
