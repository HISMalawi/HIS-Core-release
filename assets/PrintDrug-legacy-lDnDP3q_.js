System.register(["./HisStandardForm-legacy-BXV61qjj.js","./drug_service-legacy-B4F5X0Oj.js","./dynamic-import-helper-legacy-arUa2LZV.js","./index-legacy-Dg5P6bX-.js","./TouchScreenForm-legacy-Bqug27CT.js","./ToolbarMediumCard-legacy-DWokgyDV.js","./Transformers-legacy-DhNYVLaS.js","./ViewPort-legacy-D3j1oaCn.js"],(function(e,i){"use strict";var a,t,s,n,r,l,c,u,o,d,p,y;return{setters:[e=>{a=e.H},e=>{t=e.D},e=>{s=e.F},e=>{n=e.d,r=e.V,l=e.cq,c=e.ab,u=e.ae,o=e._,d=e.r,p=e.o,y=e.c},null,null,null,null],execute:function(){const i=n({components:{HisStandardForm:a},data:()=>({fields:[],packSizes:[]}),async created(){this.fields=[{id:"drug",helpText:"Select drug",type:s.TT_SELECT,validation:e=>r.required(e),options:async(e,i="")=>(await t.getDrugs({name:i})).map((e=>({label:e.name,value:e.drug_id}))),onValue:e=>(this.packSizes=l.getPackSizes(e.value),e),config:{showKeyboard:!0,isFilterDataViaApi:!0}},{id:"drug_pack_size",helpText:"Select Quantity",type:s.TT_SELECT,condition:()=>!c.isEmpty(this.packSizes),options:()=>[...this.packSizes.map((e=>({label:`${e}`,value:e}))),{label:"Other (specify)",value:"Other"}]},{id:"quantity",helpText:"Input quantity",type:s.TT_NUMBER,validation:e=>r.required(e),condition:e=>c.isEmpty(this.packSizes)||e.drug_pack_size.value.match(/other/i),config:{showKeyboard:!0}}]},methods:{async onSubmit(e){const i=new u,a=c.isEmpty(this.packSizes)||e.drug_pack_size.label.includes("Other")?e.quantity.value:e.drug_pack_size.value;try{await i.printDrug(e.drug.value,a),this.$router.push({path:"/"})}catch(t){console.log(t)}}}});e("default",o(i,[["render",function(e,i,a,t,s,n){const r=d("his-standard-form");return p(),y(r,{skipSummary:!0,fields:e.fields,onOnFinish:e.onSubmit},null,8,["fields","onOnFinish"])}]]))}}}));
