System.register(["./index-legacy-Ct6UqEYv.js","./isEmpty-legacy-DiMwTzKD.js","./_Set-legacy-DejbT1kb.js","./_setToArray-legacy-CepIbBNb.js","./encounter_guidelines-legacy-eiNOI-LD.js","./GuidelineEngine-legacy-KsvQuFdF.js"],(function(t,n){"use strict";var e,r,u,i,a,o,c,f,l,s,v,p,h,g,b,y,d,_,m,j,O,w,E,A,D,T,I,S,N,z,P,$,C,x,k,R;return{setters:[t=>{e=t.bD,r=t.E,u=t.cm,i=t.K,a=t.J,o=t.N,c=t.T,f=t.p,l=t.aO},t=>{s=t.i,v=t.a,p=t.b,h=t.c,g=t.d,b=t._,y=t.e,d=t.f,_=t.g,m=t.h,j=t.j},t=>{O=t.c,w=t.d,E=t.b,A=t.e,D=t.i,T=t.a},t=>{I=t.d,S=t.e,N=t.b,z=t.c,P=t.f,$=t.a,C=t._},t=>{x=t.E,k=t.F},t=>{R=t.m}],execute:function(){t("u",(function(t){const n=r();let e=u({});const s=i(-1),v=u({}),p=i(-1),h=i([]),g=a(),b=i(""),y=()=>g.push(b.value),d=(t,n=null)=>{const r={};if(r[k.SET_PROVIDER]=t=>{const[n]=t.split(" ");return p.value=Pr(h.value,{username:n})?.person_id??-1,k.CONTINUE},r[k.CHANGE_SESSION_DATE]=()=>(g.push(`/session/date?patient_dashboard_redirection_id=${e.getID()}`),k.EXIT),r[k.CHANGE_PATIENT_OUTCOME]=()=>(g.push(`/patient/programs/${e.getID()}`),k.EXIT),r[k.GO_TO_PATIENT_DASHBOARD]=()=>(y(),k.EXIT),t in r)return r[t](n)};return o((async()=>{try{s.value=parseInt(n.params.patient_id),b.value=`/patient/dashboard/${s.value}`,e=await c.get("ACTIVE_PATIENT",{patientID:s.value}),await(async(t="N/A")=>{const n=await c.get("PATIENT_PROGRAM",{patientID:e.getID()});v.outcome=n.outcome,v.outcomeStartDate=n.startDate,v.sessionDate=l.getSessionDate(),v.apiDate=l.getCachedApiDate(),v.isBdeMode=l.isBDE(),v.birthDate=e.getBirthdate(),v.encounterName=t.toUpperCase(),l.isBDE()&&(h.value=await c.get("PROVIDERS"),v.providers=fr(h.value,(({username:t})=>t)).map((t=>{let n=`${t.username}`;if(!j(t?.person?.names)){const[e]=t.person?.names||[];n+=` (${e.given_name} ${e.family_name})`}return n})))})(n.name),await(async t=>{const n=R(t,x);for(const e in n){const r=n[e];if(r?.actions?.alert&&d(await(r?.actions?.alert(t)))===k.EXIT)return;if(r?.actions?.selection){const n=await(r?.actions?.selection(t));d(n.flowState,n.value)}}})(v),"function"==typeof t&&t(p.value,s.value,e)}catch(r){console.error("Error in useEncounter hook:",r)}})),{patient:e,patientId:s,provider:p,providers:h,facts:v,patientDashboardUrl:b,goToPatientDashboard:y,goToNextTask:()=>f(e.getID(),g)}}));var n=function(t,n){for(var e=-1,r=n.length,u=t.length;++e<r;)t[u+e]=n[e];return t},B=s,L=v,M=O?O.isConcatSpreadable:void 0,G=n,U=function(t){return L(t)||B(t)||!!(M&&t&&t[M])},V=function t(n,e,r,u,i){var a=-1,o=n.length;for(r||(r=U),i||(i=[]);++a<o;){var c=n[a];e>0&&r(c)?e>1?t(c,e-1,r,u,i):G(i,c):u||(i[i.length]=c)}return i},X=function(t,n){for(var e=-1,r=null==t?0:t.length,u=Array(r);++e<r;)u[e]=n(t[e],e,t);return u},H=w,F=p,J=function(t){return"symbol"==typeof t||F(t)&&"[object Symbol]"==H(t)},K=v,q=J,Q=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,W=/^\w*$/,Y=function(t,n){if(K(t))return!1;var e=typeof t;return!("number"!=e&&"symbol"!=e&&"boolean"!=e&&null!=t&&!q(t))||W.test(t)||!Q.test(t)||null!=n&&t in Object(n)},Z=I;function tt(t,n){if("function"!=typeof t||null!=n&&"function"!=typeof n)throw new TypeError("Expected a function");var e=function(){var r=arguments,u=n?n.apply(this,r):r[0],i=e.cache;if(i.has(u))return i.get(u);var a=t.apply(this,r);return e.cache=i.set(u,a)||i,a};return e.cache=new(tt.Cache||Z),e}tt.Cache=Z;var nt,et,rt,ut=tt,it=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,at=/\\(\\)?/g,ot=(nt=function(t){var n=[];return 46===t.charCodeAt(0)&&n.push(""),t.replace(it,(function(t,e,r,u){n.push(r?u.replace(at,"$1"):e||t)})),n},et=ut(nt,(function(t){return 500===rt.size&&rt.clear(),t})),rt=et.cache,et),ct=X,ft=v,lt=J,st=O?O.prototype:void 0,vt=st?st.toString:void 0,pt=function t(n){if("string"==typeof n)return n;if(ft(n))return ct(n,t)+"";if(lt(n))return vt?vt.call(n):"";var e=n+"";return"0"==e&&1/n==-1/0?"-0":e},ht=pt,gt=v,bt=Y,yt=ot,dt=function(t){return null==t?"":ht(t)},_t=function(t,n){return gt(t)?t:bt(t,n)?[t]:yt(dt(t))},mt=J,jt=function(t){if("string"==typeof t||mt(t))return t;var n=t+"";return"0"==n&&1/t==-1/0?"-0":n},Ot=_t,wt=jt,Et=function(t,n){for(var e=0,r=(n=Ot(n,t)).length;null!=t&&e<r;)t=t[wt(n[e++])];return e&&e==r?t:void 0},At=S,Dt=S,Tt=E,It=I,St=S,Nt=function(){this.__data__=new At,this.size=0},zt=function(t){var n=this.__data__,e=n.delete(t);return this.size=n.size,e},Pt=function(t){return this.__data__.get(t)},$t=function(t){return this.__data__.has(t)},Ct=function(t,n){var e=this.__data__;if(e instanceof Dt){var r=e.__data__;if(!Tt||r.length<199)return r.push([t,n]),this.size=++e.size,this;e=this.__data__=new It(r)}return e.set(t,n),this.size=e.size,this};function xt(t){var n=this.__data__=new St(t);this.size=n.size}xt.prototype.clear=Nt,xt.prototype.delete=zt,xt.prototype.get=Pt,xt.prototype.has=$t,xt.prototype.set=Ct;var kt,Rt=xt,Bt=N,Lt=function(t,n){for(var e=-1,r=null==t?0:t.length;++e<r;)if(n(t[e],e,t))return!0;return!1},Mt=z,Gt=function(t,n,e,r,u,i){var a=1&e,o=t.length,c=n.length;if(o!=c&&!(a&&c>o))return!1;var f=i.get(t),l=i.get(n);if(f&&l)return f==n&&l==t;var s=-1,v=!0,p=2&e?new Bt:void 0;for(i.set(t,n),i.set(n,t);++s<o;){var h=t[s],g=n[s];if(r)var b=a?r(g,h,s,n,t,i):r(h,g,s,t,n,i);if(void 0!==b){if(b)continue;v=!1;break}if(p){if(!Lt(n,(function(t,n){if(!Mt(p,n)&&(h===t||u(h,t,e,r,i)))return p.push(n)}))){v=!1;break}}else if(h!==g&&!u(h,g,e,r,i)){v=!1;break}}return i.delete(t),i.delete(n),v},Ut=A.Uint8Array,Vt=Ut,Xt=P,Ht=Gt,Ft=function(t){var n=-1,e=Array(t.size);return t.forEach((function(t,r){e[++n]=[r,t]})),e},Jt=$,Kt=O?O.prototype:void 0,qt=Kt?Kt.valueOf:void 0,Qt=function(t,n,e,r,u,i,a){switch(e){case"[object DataView]":if(t.byteLength!=n.byteLength||t.byteOffset!=n.byteOffset)return!1;t=t.buffer,n=n.buffer;case"[object ArrayBuffer]":return!(t.byteLength!=n.byteLength||!i(new Vt(t),new Vt(n)));case"[object Boolean]":case"[object Date]":case"[object Number]":return Xt(+t,+n);case"[object Error]":return t.name==n.name&&t.message==n.message;case"[object RegExp]":case"[object String]":return t==n+"";case"[object Map]":var o=Ft;case"[object Set]":var c=1&r;if(o||(o=Jt),t.size!=n.size&&!c)return!1;var f=a.get(t);if(f)return f==n;r|=2,a.set(t,n);var l=Ht(o(t),o(n),r,u,i,a);return a.delete(t),l;case"[object Symbol]":if(qt)return qt.call(t)==qt.call(n)}return!1},Wt=n,Yt=v,Zt=function(t,n,e){var r=n(t);return Yt(t)?r:Wt(r,e(t))},tn=function(t,n){for(var e=-1,r=null==t?0:t.length,u=0,i=[];++e<r;){var a=t[e];n(a,e,t)&&(i[u++]=a)}return i},nn=function(){return[]},en=Object.prototype.propertyIsEnumerable,rn=Object.getOwnPropertySymbols,un=rn?function(t){return null==t?[]:(t=Object(t),tn(rn(t),(function(n){return en.call(t,n)})))}:nn,an=/^(?:0|[1-9]\d*)$/,on=function(t,n){var e=typeof t;return!!(n=null==n?9007199254740991:n)&&("number"==e||"symbol"!=e&&an.test(t))&&t>-1&&t%1==0&&t<n},cn=function(t,n){for(var e=-1,r=Array(t);++e<t;)r[e]=n(e);return r},fn=s,ln=v,sn=h,vn=on,pn=g,hn=Object.prototype.hasOwnProperty,gn=function(t,n){var e=ln(t),r=!e&&fn(t),u=!e&&!r&&sn(t),i=!e&&!r&&!u&&pn(t),a=e||r||u||i,o=a?cn(t.length,String):[],c=o.length;for(var f in t)!n&&!hn.call(t,f)||a&&("length"==f||u&&("offset"==f||"parent"==f)||i&&("buffer"==f||"byteLength"==f||"byteOffset"==f)||vn(f,c))||o.push(f);return o},bn=b,yn=y,dn=function(t){return yn(t)?gn(t):bn(t)},_n=Zt,mn=un,jn=dn,On=function(t){return _n(t,jn,mn)},wn=Object.prototype.hasOwnProperty,En=Rt,An=Gt,Dn=Qt,Tn=function(t,n,e,r,u,i){var a=1&e,o=On(t),c=o.length;if(c!=On(n).length&&!a)return!1;for(var f=c;f--;){var l=o[f];if(!(a?l in n:wn.call(n,l)))return!1}var s=i.get(t),v=i.get(n);if(s&&v)return s==n&&v==t;var p=!0;i.set(t,n),i.set(n,t);for(var h=a;++f<c;){var g=t[l=o[f]],b=n[l];if(r)var y=a?r(b,g,l,n,t,i):r(g,b,l,t,n,i);if(!(void 0===y?g===b||u(g,b,e,r,i):y)){p=!1;break}h||(h="constructor"==l)}if(p&&!h){var d=t.constructor,_=n.constructor;d==_||!("constructor"in t)||!("constructor"in n)||"function"==typeof d&&d instanceof d&&"function"==typeof _&&_ instanceof _||(p=!1)}return i.delete(t),i.delete(n),p},In=d,Sn=v,Nn=h,zn=g,Pn="[object Arguments]",$n="[object Array]",Cn="[object Object]",xn=Object.prototype.hasOwnProperty,kn=function(t,n,e,r,u,i){var a=Sn(t),o=Sn(n),c=a?$n:In(t),f=o?$n:In(n),l=(c=c==Pn?Cn:c)==Cn,s=(f=f==Pn?Cn:f)==Cn,v=c==f;if(v&&Nn(t)){if(!Nn(n))return!1;a=!0,l=!1}if(v&&!l)return i||(i=new En),a||zn(t)?An(t,n,e,r,u,i):Dn(t,n,c,e,r,u,i);if(!(1&e)){var p=l&&xn.call(t,"__wrapped__"),h=s&&xn.call(n,"__wrapped__");if(p||h){var g=p?t.value():t,b=h?n.value():n;return i||(i=new En),u(g,b,e,r,i)}}return!!v&&(i||(i=new En),Tn(t,n,e,r,u,i))},Rn=p,Bn=function t(n,e,r,u,i){return n===e||(null==n||null==e||!Rn(n)&&!Rn(e)?n!=n&&e!=e:kn(n,e,r,u,t,i))},Ln=Rt,Mn=Bn,Gn=D,Un=function(t){return t==t&&!Gn(t)},Vn=Un,Xn=dn,Hn=function(t,n){return function(e){return null!=e&&e[t]===n&&(void 0!==n||t in Object(e))}},Fn=function(t,n,e,r){var u=e.length,i=u,a=!r;if(null==t)return!i;for(t=Object(t);u--;){var o=e[u];if(a&&o[2]?o[1]!==t[o[0]]:!(o[0]in t))return!1}for(;++u<i;){var c=(o=e[u])[0],f=t[c],l=o[1];if(a&&o[2]){if(void 0===f&&!(c in t))return!1}else{var s=new Ln;if(r)var v=r(f,l,c,t,n,s);if(!(void 0===v?Mn(l,f,3,r,s):v))return!1}}return!0},Jn=function(t){for(var n=Xn(t),e=n.length;e--;){var r=n[e],u=t[r];n[e]=[r,u,Vn(u)]}return n},Kn=Hn,qn=Et,Qn=_t,Wn=s,Yn=v,Zn=on,te=_,ne=jt,ee=function(t,n){return null!=t&&n in Object(t)},re=function(t,n,e){for(var r=-1,u=(n=Qn(n,t)).length,i=!1;++r<u;){var a=ne(n[r]);if(!(i=null!=t&&e(t,a)))break;t=t[a]}return i||++r!=u?i:!!(u=null==t?0:t.length)&&te(u)&&Zn(a,u)&&(Yn(t)||Wn(t))},ue=Bn,ie=function(t,n,e){var r=null==t?void 0:qn(t,n);return void 0===r?e:r},ae=function(t,n){return null!=t&&re(t,n,ee)},oe=Y,ce=Un,fe=Hn,le=jt,se=function(t){return t},ve=Et,pe=function(t){return function(n){return null==n?void 0:n[t]}},he=function(t){return function(n){return ve(n,t)}},ge=Y,be=jt,ye=function(t){var n=Jn(t);return 1==n.length&&n[0][2]?Kn(n[0][0],n[0][1]):function(e){return e===t||Fn(e,t,n)}},de=function(t,n){return oe(t)&&ce(n)?fe(le(t),n):function(e){var r=ie(e,t);return void 0===r&&r===n?ae(e,t):ue(n,r,3)}},_e=se,me=v,je=function(t){return ge(t)?pe(be(t)):he(t)},Oe=function(t){return"function"==typeof t?t:null==t?_e:"object"==typeof t?me(t)?de(t[0],t[1]):ye(t):je(t)},we=function(t,n,e){for(var r=-1,u=Object(t),i=e(t),a=i.length;a--;){var o=i[kt?a:++r];if(!1===n(u[o],o,u))break}return t},Ee=dn,Ae=y,De=function(t,n){return function(e,r){if(null==e)return e;if(!Ae(e))return t(e,r);for(var u=e.length,i=n?u:-1,a=Object(e);(n?i--:++i<u)&&!1!==r(a[i],i,a););return e}}((function(t,n){return t&&we(t,n,Ee)})),Te=y,Ie=J,Se=function(t,n){if(t!==n){var e=void 0!==t,r=null===t,u=t==t,i=Ie(t),a=void 0!==n,o=null===n,c=n==n,f=Ie(n);if(!o&&!f&&!i&&t>n||i&&a&&c&&!o&&!f||r&&a&&c||!e&&c||!u)return 1;if(!r&&!i&&!f&&t<n||f&&e&&u&&!r&&!i||o&&e&&u||!a&&u||!c)return-1}return 0},Ne=X,ze=Et,Pe=Oe,$e=function(t,n){var e=-1,r=Te(t)?Array(t.length):[];return De(t,(function(t,u,i){r[++e]=n(t,u,i)})),r},Ce=function(t,n){var e=t.length;for(t.sort(n);e--;)t[e]=t[e].value;return t},xe=m,ke=function(t,n,e){for(var r=-1,u=t.criteria,i=n.criteria,a=u.length,o=e.length;++r<a;){var c=Se(u[r],i[r]);if(c)return r>=o?c:c*("desc"==e[r]?-1:1)}return t.index-n.index},Re=se,Be=v,Le=function(t,n,e){n=n.length?Ne(n,(function(t){return Be(t)?function(n){return ze(n,1===t.length?t[0]:t)}:t})):[Re];var r=-1;n=Ne(n,xe(Pe));var u=$e(t,(function(t,e,u){return{criteria:Ne(n,(function(n){return n(t)})),index:++r,value:t}}));return Ce(u,(function(t,n){return ke(t,n,e)}))},Me=function(t,n,e){switch(e.length){case 0:return t.call(n);case 1:return t.call(n,e[0]);case 2:return t.call(n,e[0],e[1]);case 3:return t.call(n,e[0],e[1],e[2])}return t.apply(n,e)},Ge=Math.max,Ue=function(t,n,e){return n=Ge(void 0===n?t.length-1:n,0),function(){for(var r=arguments,u=-1,i=Ge(r.length-n,0),a=Array(i);++u<i;)a[u]=r[n+u];u=-1;for(var o=Array(n+1);++u<n;)o[u]=r[u];return o[n]=e(a),Me(t,this,o)}},Ve=function(t){return function(){return t}},Xe=T,He=function(){try{var t=Xe(Object,"defineProperty");return t({},"",{}),t}catch(n){}}(),Fe=Ve,Je=He,Ke=Je?function(t,n){return Je(t,"toString",{configurable:!0,enumerable:!1,value:Fe(n),writable:!0})}:se,qe=Date.now,Qe=function(t){var n=0,e=0;return function(){var r=qe(),u=16-(r-e);if(e=r,u>0){if(++n>=800)return arguments[0]}else n=0;return t.apply(void 0,arguments)}},We=Qe(Ke),Ye=se,Ze=Ue,tr=We,nr=P,er=y,rr=on,ur=D,ir=V,ar=Le,or=function(t,n,e){if(!ur(e))return!1;var r=typeof n;return!!("number"==r?er(e)&&rr(n,e.length):"string"==r&&n in e)&&nr(e[n],t)},cr=function(t,n){return tr(Ze(t,n,Ye),t+"")}((function(t,n){if(null==t)return[];var e=n.length;return e>1&&or(t,n[0],n[1])?n=[]:e>2&&or(n[0],n[1],n[2])&&(n=[n[0]]),ar(t,ir(n,1),[])}));const fr=e(cr);var lr,sr=Oe,vr=y,pr=dn,hr=/\s/,gr=function(t){for(var n=t.length;n--&&hr.test(t.charAt(n)););return n},br=/^\s+/,yr=function(t){return t?t.slice(0,gr(t)+1).replace(br,""):t},dr=D,_r=J,mr=/^[-+]0x[0-9a-f]+$/i,jr=/^0b[01]+$/i,Or=/^0o[0-7]+$/i,wr=parseInt,Er=function(t){if("number"==typeof t)return t;if(_r(t))return NaN;if(dr(t)){var n="function"==typeof t.valueOf?t.valueOf():t;t=dr(n)?n+"":n}if("string"!=typeof t)return 0===t?t:+t;t=yr(t);var e=jr.test(t);return e||Or.test(t)?wr(t.slice(2),e?2:8):mr.test(t)?NaN:+t},Ar=1/0,Dr=function(t){return t?(t=Er(t))===Ar||t===-1/0?17976931348623157e292*(t<0?-1:1):t==t?t:0:0===t?t:0},Tr=C,Ir=Oe,Sr=function(t){var n=Dr(t),e=n%1;return n==n?e?n-e:n:0},Nr=Math.max,zr=(lr=function(t,n,e){var r=null==t?0:t.length;if(!r)return-1;var u=null==e?0:Sr(e);return u<0&&(u=Nr(r+u,0)),Tr(t,Ir(n),u)},function(t,n,e){var r=Object(t);if(!vr(t)){var u=sr(n);t=pr(t),n=function(t){return u(r[t],t,r)}}var i=lr(t,n,e);return i>-1?r[u?t[i]:i]:void 0});const Pr=e(zr)}}}));
