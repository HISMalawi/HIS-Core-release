System.register(["./index-legacy-D3AimR5c.js","./TableView-legacy-Dy3lcVgQ.js","./data_verification_service-legacy-BHigODKu.js","./Export-legacy-e4sEJcbx.js","./index-legacy-C8IfrPJu.js"],(function(e,a){"use strict";var t,r,n,l,s,o,i,u,c,d,g,f,p,m,v,w,D,b;return{setters:[e=>{t=e.d,r=e.r,n=e.o,l=e.a,s=e.b,o=e.w,i=e.e,u=e.i,c=e.z,d=e.B,g=e.l,f=e.v,p=e.D,m=e.x,v=e.y,w=e.q},e=>{D=e.v},e=>{b=e.D},null,null],execute:function(){e("default",t({__name:"PasswordChanges",setup(e){const a=r([]),t=r(""),h=r(!1),y=new b,x=[[{label:"#",ref:"index"},{label:"User",ref:"provider"},{label:"Count",ref:"count"},{label:"View",ref:"drilldown",toValue:()=>"View",tdClick:async e=>{e.refData.length&&(await c.create({component:D,backdropDismiss:!1,cssClass:"large-modal",componentProps:{title:e.data.provider,columns:[[{label:"#",ref:"index"},{label:"Date changed",ref:"date",toValue:e=>d(e).format("DD/MMM/YYYY HH:mm:ss")}]],rowsPerPage:100,columnData:e.refData.reduce(((e,a,t)=>[...e,{...a,index:t+1}]),[]),onFinish:()=>c.getTop().then((e=>e&&c.dismiss()))}})).present()}}]],P=async()=>{if(!y.startDate||!y.endDate)return g("Start date and end date required!");h.value=!0;try{const e=await y.getPasswordChanges();a.value=Object.keys(e).reduce(((a,t,r)=>[...a,{index:r+1,provider:t,count:e[t].length,drilldown:e[t]}]),[])}catch(e){console.error(e),f("Unable to generate report!")}h.value=!1},C=()=>p({onFinish:(e,a,r)=>{t.value=r,y.startDate=e,y.endDate=a,P()}});return n((()=>C())),(e,r)=>(l(),s(u(w),null,{default:o((()=>[i(u(m),{"is-open":h.value,message:"Please wait.."},null,8,["is-open"]),i(D,{"icon-url":u(v)("reports.png"),title:"Password changes","report-prefix":"Clinic",subtitle:t.value,columns:x,columnData:a.value,rowsPerPage:100,onConfigure:C,onRefresh:P},null,8,["icon-url","subtitle","columnData"])])),_:1}))}}))}}}));
