import{d as h,I as _,K as u,J as b,ae as g,ah as v,P as f,ct as D,b9 as P,_ as w,r as m,o as I,c as y,w as E,b as $}from"./index-C6EjxQ0a.js";import{v as k}from"./TableView-DKbvhgCs.js";const d=20,r={},B=h({props:{title:{type:String,default:"Drilldown"},patientIdentifiers:{type:Object},onFinish:{type:Function}},components:{IonPage:_,v2Datatable:k},setup(t){const o=u("-"),n=u([]),c=b(),p=[[{label:"National ID",ref:"national_id"},{label:"First name",ref:"given_name"},{label:"Last name",ref:"family_name"},{label:"Birthdate",ref:"birthdate"},{label:"Action",ref:"patient_id",exportable:!1,tdClick:({data:a})=>c.push({path:"/patient/dashboard/".concat(a.patient_id)}),value:()=>"View client"}]];return g(()=>t.patientIdentifiers,async a=>{if(n.value=[],o.value="Total: 0",!(a&&a.length))return;const l=v.chunk(a,d);for(const s of l){for(const i of s){try{let e=null;r[i]?e=r[i]:(e=new f(await f.findByID(i)),r[i]=e),n.value.push({patient_id:e.getID(),national_id:e.getNationalID(),given_name:e.getGivenName(),family_name:e.getFamilyName(),birthdate:D(e.getBirthdate())})}catch(e){console.error(e),n.value.push({})}o.value="Total: ".concat(n.value.length," of ").concat((a||[]).length)}await P(500)}},{immediate:!0}),{columns:p,subtitle:o,reportData:n,ITEMS_PER_PAGE:d}}});function F(t,o,n,c,p,a){const l=m("v2Datatable"),s=m("ion-page");return I(),y(s,null,{default:E(()=>[$(l,{title:t.title,subtitle:t.subtitle,columnData:t.reportData,columns:t.columns,"on-finish":t.onFinish,rowsPerPage:t.ITEMS_PER_PAGE},null,8,["title","subtitle","columnData","columns","on-finish","rowsPerPage"])]),_:1})}const T=w(B,[["render",F]]);export{T as D};
