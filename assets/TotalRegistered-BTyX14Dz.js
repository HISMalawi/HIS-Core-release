import{d as L,r as o,I as A,cE as R,o as $,ce as y,H as C,aE as w,cd as l,at as G,ad as u,ae as f,aa as P,c as S,w as V,af as c,a as F,b as _}from"./index-DOO_dFo7.js";import{v as I}from"./TableView-BSAIiPZA.js";import{A as B}from"./aetc_report_service-Z2T6w1be.js";import"./Export-Cg2VfxNM.js";import"./index-BgISI6Sz.js";const p=o([]),s=o(""),n=o(""),b=o(""),M=o(!1),h=o(""),T=o(""),Q=L({components:{IonPage:A,IonLoading:R,v2Datatable:I},setup(){const t=async()=>{const e=new B;e.startDate=s.value,e.endDate=n.value,e.ageGroup=T.value;try{const a=await e.getClinicReport("TOTAL_REGISTERED");p.value=v(a)}catch(a){console.log(a)}},v=e=>e.map(a=>{const{given_name:r,family_name:i,registration_date:D,gender:E}=a;return{name:"".concat(r," ").concat(i),birthdate:a.birthdate,gender:y(E),registration_date:C.toStandardHisDisplayFormat(D),address:a.address,ta:a.ta}}),m=["Name","Birthdate","Gender","Date Registered","Address","T.A"],g=[[{label:"Name",ref:"",value:e=>e.name},{label:"Birthdate",ref:"",value:e=>e.birthdate},{label:"Gender",ref:"",value:e=>e.gender},{label:"Date Registered",ref:"",value:e=>e.registration_date},{label:"Address",ref:"",value:e=>e.address},{label:"T.A",ref:"",value:e=>e.ta}]],d=()=>w([{id:"start_date",helpText:"Start Date",type:u.TT_FULL_DATE,validation:e=>f.required(e),computedValue:e=>e.value},{id:"end_date",helpText:"End Date",type:u.TT_FULL_DATE,validation:e=>f.required(e),computedValue:e=>e.value},{id:"age_group",helpText:"Select Age Group(s)",type:u.TT_MULTIPLE_SELECT,config:{showKeyboard:!1},computedValue:e=>e.map(a=>a.value),validation(e){return e?null:["Value is required"]},options:()=>[{label:"< 6 months",value:"< 6 months"},{label:"6 months to < 1 yr",value:"6 months to < 1 yr"},{label:"1 to < 5",value:"1 to < 5"},{label:"5 to 14",value:"5 to 14"},{label:"> 14 to < 20",value:"> 14 to < 20"},{label:"20 to 30",value:"20 to 30"},{label:">30 to <40",value:">30 to <40"},{label:"40 to <50",value:"40 to <50"},{label:"ALL",value:"all"}]}],(e,a)=>{s.value=a.start_date,n.value=a.end_date,T.value="[".concat(a.age_group.map(r=>'"'.concat(r,'"')).join(", "),"]"),b.value="Period (".concat(l(s.value)," to ").concat(l(n.value),")"),G.dismiss(),h.value="".concat(l(s.value)," to ").concat(l(n.value)),t()});return $(()=>!p.value.length&&d()),{columns:g,isLoading:M,reportData:p,period:b,csvQuarter:h,csvheaders:m,generate:t,configure:d}}});function q(t,v,m,g,d,e){const a=c("ion-loading"),r=c("v2Datatable"),i=c("ion-page");return F(),S(i,null,{default:V(()=>[_(a,{"is-open":t.isLoading,message:"Please wait..."},null,8,["is-open"]),_(r,{title:"AETC Total Registered Report",subtitle:t.period,columns:t.columns,columnData:t.reportData,rowsPerPage:25,onConfigure:t.configure,csvQuarter:t.csvQuarter,headers:t.csvheaders,onRefresh:()=>t.generate()},null,8,["subtitle","columns","columnData","onConfigure","csvQuarter","headers","onRefresh"])]),_:1})}const K=P(Q,[["render",q]]);export{K as default};
