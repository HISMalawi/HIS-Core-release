System.register(["./HisStandardForm-legacy-DWEtuKgE.js","./drug_service-legacy-C3c-VehC.js","./index-legacy-D2iCn0VZ.js"],(function(e,a){"use strict";var i,t,s,n,r,d,u,c,l,o,p,h;return{setters:[e=>{i=e.H},e=>{t=e.D},e=>{s=e.d,n=e.aY,r=e.a3,d=e.al,u=e.am,c=e.dp,l=e.ak,o=e.a,p=e.ap,h=e.b}],execute:function(){const a=s({components:{HisStandardForm:i},data:()=>({fields:[],packSizes:[]}),async created(){this.fields=[{id:"drug",helpText:"Select drug",type:u.TT_SELECT,validation:e=>d.required(e),options:async(e,a="")=>(await t.getDrugs({name:a})).map((e=>({label:e.name,value:e.drug_id}))),onValue:e=>(this.packSizes=c.getPackSizes(e.value),e),config:{showKeyboard:!0,isFilterDataViaApi:!0}},{id:"drug_pack_size",helpText:"Select Quantity",type:u.TT_SELECT,condition:()=>!n.isEmpty(this.packSizes),options:()=>[...this.packSizes.map((e=>({label:`${e}`,value:e}))),{label:"Other (specify)",value:"Other"}]},{id:"quantity",helpText:"Input quantity",type:u.TT_NUMBER,validation:e=>d.required(e),condition:e=>n.isEmpty(this.packSizes)||e.drug_pack_size.value.match(/other/i),config:{showKeyboard:!0}}]},methods:{async onSubmit(e){const a=n.isEmpty(this.packSizes)||e.drug_pack_size.label.includes("Other")?e.quantity.value:e.drug_pack_size.value;try{await r(e.drug.value,a),this.$router.push({path:"/"})}catch(i){console.log(i)}}}});e("default",l(a,[["render",function(e,a,i,t,s,n){const r=p("his-standard-form");return h(),o(r,{skipSummary:!0,fields:e.fields,onOnFinish:e.onSubmit},null,8,["fields","onOnFinish"])}]]))}}}));
