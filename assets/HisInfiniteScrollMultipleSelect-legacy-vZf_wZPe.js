System.register(["./HisKbConfigurations-legacy-AV_G95Cg.js","./ViewPort-legacy-EDL_vLSV.js","./KbHandler-legacy-YpKYWvgQ.js","./BaseTextInput-legacy-CKGvAAh9.js","./FieldMixin.vue_vue_type_script_lang-legacy-wvr-H458.js","./HisKeyboard-legacy-0PvW_X-4.js","./index-legacy-T5lWkeko.js","./Arrays-legacy-JV9mVyWQ.js","./KbLayouts-legacy-NQmKRJpJ.js","./BaseKeyboard-legacy-Z4rzJtFp.js"],(function(e,t){"use strict";var i,s,l,a,n,o,c,d,h,r,u,y,f,b,g,k,m,p,I,C,v,w,x,K,D,_,S,V,j,L,H;return{setters:[e=>{i=e.Q},e=>{s=e.V},e=>{l=e.k},e=>{a=e.default},e=>{n=e._},e=>{o=e.H},e=>{c=e.d,d=e.e,h=e.B,r=e.an,u=e.l,y=e.g,f=e.h,b=e.C,g=e.cB,k=e.cC,m=e._,p=e.r,I=e.o,C=e.x,v=e.b,w=e.w,x=e.c,K=e.z,D=e.F,_=e.y,S=e.u,V=e.v,j=e.A,L=e.ar},e=>{H=e.u},null,null],execute:function(){const t=c({name:"HisInfiniteScrollMultipleSelect",mixins:[n],components:{IonCheckbox:d,IonText:h,IonChip:r,ViewPort:s,HisTextInput:a,IonContent:u,IonList:y,IonItem:f,IonLabel:b,HisKeyboard:o,IonInfiniteScroll:g,IonInfiniteScrollContent:k},data:()=>({showKeyboard:!1,keyboard:i,listData:[],checkedItems:[],disableScroll:!1,filter:"",selected:"",page:1,limit:10}),watch:{clear(){this.checkedItems=[],this.filter="",this.selected=""},checkedItems:{handler(e){this.listData.forEach((t=>{e.find((e=>e.value===t.value))?t.isChecked=!0:t.isChecked=!1})),this.$emit("onValue",e)},deep:!0,immediate:!0},filter:{async handler(){this.page=1,this.disableScroll=!1;const e=await this.getListData();[...this.checkedItems].forEach((t=>{const i=e.findIndex((e=>e.value===t.value));-1===i?e.push(t):e[i].isChecked=!0})),this.listData=e}}},mounted(){this.init()},activated(){this.init()},methods:{async init(){this.$emit("onFieldActivated",this),this.listData=await this.getListData()},async getListData(){return await this.options(this.fdata,this.filter,this.page,this.limit)},async keypress(e){this.filter||(this.selected=""),this.filter=l(e,this.selected),this.selected=this.filter},async onKBValue(e){this.listData&&this.selected!==e&&(this.filter=e,this.selected=this.filter)},async pushData(e){this.page++;const t=await this.getListData();t.length>0?this.listData=H([...this.listData,...t.filter((e=>!this.listData.find((t=>t.value===e.value))))],"label"):this.disableScroll=!0,e.target.complete()},onSelect(e){this.$nextTick((async()=>{e.isChecked?-1===this.checkedItems.findIndex((t=>t.value===e.value))&&this.checkedItems.push(e):this.unCheck(e)}))},unCheck(e){this.checkedItems=this.checkedItems.filter((t=>t.value!==e.value))}},created(){this.showKeyboard=this.config?.showKeyboard??!1,this.keyboard=this.config?.keyboard??i,this.page=this.config?.page??1,this.limit=this.config?.limit??10}});e("default",m(t,[["render",function(e,t,i,s,l,a){const n=p("his-text-input"),o=p("ion-chip"),c=p("ion-text"),d=p("ion-label"),h=p("ion-checkbox"),r=p("ion-item"),u=p("ion-list"),y=p("ion-infinite-scroll-content"),f=p("ion-infinite-scroll"),b=p("ion-content"),g=p("view-port"),k=p("his-keyboard");return I(),C(D,null,[v(g,{showFull:!e.showKeyboard},{default:w((()=>[e.showKeyboard?(I(),x(n,{key:0,value:e.selected,onOnValue:e.onKBValue},null,8,["value","onOnValue"])):K("",!0),(I(!0),C(D,null,_(e.checkedItems,((t,i)=>(I(),x(o,{color:"danger",key:i,onClick:i=>e.unCheck(t)},{default:w((()=>[S(V(t.label),1)])),_:2},1032,["onClick"])))),128)),v(b,{style:{width:"100%"},class:"ion-padding-bottom"},{default:w((()=>[j("div",{class:L(["ion-content-scroll-host",{"ion-margin-bottom ion-padding-bottom":e.disableScroll}])},[v(u,{class:L(["view-port-content",{"ion-margin-bottom":e.disableScroll}])},{default:w((()=>[(I(!0),C(D,null,_(e.listData,((t,i)=>(I(),x(r,{key:i,color:t.isChecked?"lightblue":"",lines:t.isChecked?"none":""},{default:w((()=>[v(d,null,{default:w((()=>[v(c,{class:"his-md-text"},{default:w((()=>[S(V(t.label),1)])),_:2},1024),t.description&&t.isChecked?(I(),x(c,{key:0,color:t.description?.color},{default:w((()=>[j("p",null,[j("i",null,V(t.description.text),1)])])),_:2},1032,["color"])):K("",!0)])),_:2},1024),v(h,{slot:"start",modelValue:t.isChecked,"onUpdate:modelValue":e=>t.isChecked=e,onIonChange:i=>e.onSelect(t,i),disabled:t.disabled},null,8,["modelValue","onUpdate:modelValue","onIonChange","disabled"])])),_:2},1032,["color","lines"])))),128))])),_:1},8,["class"]),v(f,{onIonInfinite:t[0]||(t[0]=t=>e.pushData(t)),threshold:"100px",disabled:e.disableScroll},{default:w((()=>[v(y,{"loading-spinner":"crescent","loading-text":"Loading more data..."})])),_:1},8,["disabled"])],2)])),_:1})])),_:1},8,["showFull"]),e.showKeyboard?(I(),x(k,{key:0,kbConfig:e.keyboard,onKeyPress:e.keypress},null,8,["kbConfig","onKeyPress"])):K("",!0)],64)}]]))}}}));
