System.register(["./index-legacy-3d5L0hak.js","./HisStandardForm-legacy-B2kK9XHK.js","./useEncounter-legacy-ta-7-HEg.js","./isEmpty-legacy-Hu1qJrDd.js","./encounter_guidelines-legacy-Clt2pLEh.js","./GuidelineEngine-legacy-KsvQuFdF.js"],(function(e,a){"use strict";var t,n,l,o,i,r,s,u,c,d,f,m,g;return{setters:[e=>{t=e.bS,n=e.d,l=e.r,o=e.bn,i=e.ad,r=e.ae,s=e.a,u=e.c,c=e.u,d=e.W,f=e.R},e=>{m=e.H},e=>{g=e.u},null,null,null],execute:function(){class a extends t{constructor(e,a){super(e,184,a)}}e("default",n({__name:"CxCaOutcome",setup(e){let t,n;const p=l([]),v=l([]),y=o.getProgramID(),b=o.getLocationName(),_=o.getSessionDate(),{patientDashboardUrl:w,goToNextTask:C}=g((async(e,l)=>{n=l,t=new a(l,e),o.getProgramWorkflows(y).then((e=>{v.value=e})),p.value=[{id:"select_referral_outcome",helpText:"Referral outcome",type:i.TT_SELECT,validation:e=>r.required(e),options:()=>[{label:"Continue follow-up",value:"Continue follow-up"},{label:"No Dysplasia/Cancer",value:"No Dysplasia/Cancer"},{label:"Palliative Care",value:"Palliative Care"},{label:"Patient died",value:"Patient died"}]}]}));async function D(e){if(!(await t.createEncounter()))return d("Unable to create encounter");const a=e.select_referral_outcome.value,l=v.value.flatMap((e=>e.states)).find((e=>e.concept.concept_names.some((e=>e.name===a))));if(!l)return d(`Unable to find workflow state for outcome: ${a}`);if(!(await o.createState(n,y,{state:l.program_workflow_state_id,location_id:b,date:_})))return d("Unable to update state");const i=await t.buildValueCoded("Outcome",a);await t.saveObservationList([i]),f("Observations and encounter created!"),C()}return(e,a)=>(s(),u(m,{fields:p.value,onFinishAction:D,skipSummary:!0,cancelDestinationPath:c(w)},null,8,["fields","cancelDestinationPath"]))}}))}}}));
