System.register(["./Layout-legacy-Up7dx155.js","./index-legacy-Ck8hVlzC.js","./PatientDrilldown-legacy-DhXAcB3p.js"],(function(e,t){"use strict";var a,i,n,o,l,r,s,d,c,p,b,m,u,y,g,f,h,v,k,x,_,w,D,M,T,S,z,C;return{setters:[e=>{a=e.L},e=>{i=e.cs,n=e.M,o=e.N,l=e.ah,r=e.a0,s=e.dE,d=e.aW,c=e.S,p=e.t,b=e.dJ,m=e.cX,u=e.bN,y=e.dK,g=e.d,f=e._,h=e.r,v=e.o,k=e.c,x=e.w,_=e.A,w=e.x,D=e.B,M=e.y,T=e.z,S=e.v,z=e.a7},e=>{C=e.D}],execute:function(){var t=document.createElement("style");t.textContent="#moh_template[data-v-43c9e0b5]{border:solid 1px #3333;width:100%}td[data-v-43c9e0b5]{font-size:var(--his-sm-font-size);padding:.3em}.main-title[data-v-43c9e0b5]{background:#8eaadb;font-weight:700;border:solid 3px black}.table-value[data-v-43c9e0b5]{padding:1em;text-align:center;color:#337ab7;font-weight:700;font-size:var(--his-md-font-size);border:solid 2px black}.table-section[data-v-43c9e0b5]{font-weight:700;background:#d9e2f3;border:solid 3px black}\n",document.head.appendChild(t);const A=i({model:[],indicators:{},dateGenerated:"",startDate:"",endDate:"",title:"",period:""}),E=n((()=>A.model.map((e=>{if("function"==typeof e.value){const t=e.value(A.indicators);Array.isArray(t)?(e._value=`${t.length}`,e._drill=t):e._value=t}return e})))),P=n((()=>{const[e,...t]=E.value.map((e=>[e.index||"",e.label,e.index?e._value||0:""]));return{rows:t,columns:[["#",E.value[0].label,"#"]]}})),G=g({components:{Layout:a},props:{params:{type:Object,required:!0}},setup:e=>function(e){e.title!=A.title&&(A.indicators={}),A.title=e.title,A.model=e.indicators;const t=async(t="",a="")=>{(await r.create({message:"Please wait .."})).present();try{const i=new s(e.name);i.startDate=t||A.startDate,i.endDate=a||A.endDate,A.indicators=await i.requestReport({type:"moh"}),A.dateGenerated=d(c.getSessionDate()).format("DD/MMM/YYYY HH:mm:ss")}catch(i){p("Unable to generate report")}r.dismiss()},a=()=>b({title:A.title,onFinish:(e,a,i)=>{A.period=i,A.startDate=e,A.endDate=a,t()}});return o((()=>l.isEmpty(A.indicators)&&a())),{drill:e=>{Array.isArray(e._drill)&&C(e.label,e._drill)},data:A,indicators:E,exportable:P,generate:t,exportPdf:()=>{const e=document.getElementById("report-content");e&&m(`\n                <html>\n                <head>\n                    <link rel="stylesheet" media="print"  href="/assets/css/hts-report-style-print.css"/>\n                    <style> \n                        #moh_template { border: solid 1px #3333; width: 100%; } td { font-size: var(--his-sm-font-size); padding: 0.3em; } .main-title { background: #8EAADB; font-weight: bold; border: solid 3px black; } .table-value { padding: 1em; text-align: center; color: #337ab7; font-weight: bold; font-size: var(--his-md-font-size); border: solid 2px black; } .table-section { font-weight: bold; background: #D9E2F3; border: solid 3px black; }\n                    </style>\n                </head>\n                <body>\n                    ${e.innerHTML}\n                </body>\n                </html>\n            `,50)},exportCsv:()=>{const{rows:e,columns:t}=P.value;u(t,y(e,A),`MOH-${A.title}-${c.getLocationName()}-${A.period}`)},configure:a}}(e.params)}),L={id:"report-content"},$={id:"moh_template"},j={key:0,class:"main-title"},F={key:1,class:"main-title"},H={key:2,class:"main-title"},Y={key:3,class:"table-section"},B={key:4,colspan:2,class:"table-section"},N={key:5},R=["onClick"];e("M",f(G,[["render",function(e,t,a,i,n,o){const l=h("layout");return v(),k(l,{logo:"login-logos/Malawi-Coat_of_arms_of_arms.png",title:e.data.title,toCSV:e.exportCsv,toPDF:e.exportPdf,period:e.data.period,dateGenerated:e.data.dateGenerated,refreshReport:e.generate,configure:e.configure},{default:x((()=>[_("div",L,[_("table",$,[(v(!0),w(D,null,M(e.indicators,((t,a)=>(v(),w("tr",{key:a},[t.isMainTitle?(v(),w("td",j,"#")):T("",!0),t.isMainTitle?(v(),w("td",F,S(t.label),1)):T("",!0),t.isMainTitle?(v(),w("td",H,"#")):T("",!0),t.isSectionTitle?(v(),w("td",Y)):T("",!0),t.isSectionTitle?(v(),w("td",B,S(t.label),1)):T("",!0),t.isMainTitle||t.isSectionTitle?T("",!0):(v(),w("td",N,S(t.index),1)),t.isMainTitle||t.isSectionTitle?T("",!0):(v(),w("td",{key:6,style:z(t.style||{}),class:"table-key"},S(t.label),5)),t.isMainTitle||t.isSectionTitle?T("",!0):(v(),w("td",{key:7,class:"table-value",onClick:a=>e.drill(t)},S(t._value),9,R))])))),128))])])])),_:1},8,["title","toCSV","toPDF","period","dateGenerated","refreshReport","configure"])}],["__scopeId","data-v-43c9e0b5"]]))}}}));
