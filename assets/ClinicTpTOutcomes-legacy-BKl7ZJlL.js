System.register(["./index-legacy-CA6M7ipO.js","./TableView-legacy-2WevvWny.js","./clinic_report_service-legacy-u_6HNHbx.js","./v2utils-legacy-Bs3stsn1.js","./Export-legacy-SGgsNE3Q.js","./index-legacy-DZOKxSjk.js"],(function(e,t){"use strict";var l,a,r,n,u,i,s,o,p,c,d,f,_,g,b,y;return{setters:[e=>{l=e.d,a=e.r,r=e.o,n=e.a,u=e.c,i=e.w,s=e.b,o=e.u,p=e.D,c=e.I,d=e.i,f=e.aN},e=>{_=e.v},e=>{g=e.C},e=>{b=e.a,y=e.w},null,null],execute:function(){e("default",l({__name:"ClinicTpTOutcomes",setup(e){const t=d("reports.png"),l=a([]),T=a(""),m=new g,v=e=>({...e,toValue:e=>e.length,tdClick:e=>{b({title:`${e.data.age_group} ${e.column.label}`,subtitle:T.value,patientIdentifiers:e.refData.map((e=>e.patient_id))})}}),P=[[{label:"Age group",ref:"age_group"},{label:"TPT Type",ref:"tpt_type"},v({label:"Started TPT (New on ART)",ref:"started_tpt_new"}),v({label:"Started TPT (Previous on ART)",ref:"started_tpt_prev"}),v({label:"Completed TPT (New on ART)",ref:"completed_tpt_new"}),v({label:"Completed TPT (Previous on ART)",ref:"completed_tpt_prev"}),v({label:"Not completed TPT",ref:"not_completed_tpt"}),v({label:"Died",ref:"died"}),v({label:"Defaulted",ref:"defaulted"}),v({label:"Stopped ART",ref:"stopped"}),v({label:"TO",ref:"transfer_out"}),v({label:"Confirmed TB ",ref:"confirmed_tb"}),v({label:"Pregnant",ref:"pregnant"}),v({label:"Breastfeeding",ref:"breast_feeding"}),v({label:"Skin rash",ref:"skin_rash"}),v({label:"Peripheral neuropathy",ref:"peripheral_neuropathy"}),v({label:"Yellow eyes",ref:"yellow_eyes"}),v({label:"Nausea",ref:"nausea"}),v({label:"Dizziness",ref:"dizziness"})]],F=()=>y((async()=>{l.value=[];const e=(await m.getTtpOutcomes()).reduce(((e,t)=>({...e,[t.tpt_type]:[...e[t.tpt_type],t]})),{"3HP":[],"6H":[]});l.value=[...e["3HP"],...e["6H"]];const t=l.value.reduce(((e,t)=>(Object.keys(t).forEach((l=>{if(Array.isArray(t[l])){const a=a=>({...e[a],[l]:[...e?.[a]?.[l]??[],...t[l].filter((e=>e.gender===a))]});e={M:a("M"),F:a("F")}}})),e)),{M:{},F:{}}),a=f.uniq(t.F.pregnant),r=f.uniq(t.F.breast_feeding),n=a.concat(r);l.value=[...l.value,{age_group:"All",tpt_type:"Male",...t.M},{age_group:"All",tpt_type:"FP",...Object.keys(t.F).reduce(((e,l)=>({...e,[l]:t.F[l].filter((e=>a.includes(e)))})),{})},{age_group:"All",tpt_type:"FNP",...Object.keys(t.F).reduce(((e,l)=>({...e,[l]:t.F[l].filter((e=>!n.includes(e)))})),{})},{age_group:"All",tpt_type:"FBF",...Object.keys(t.F).reduce(((e,l)=>({...e,[l]:t.F[l].filter((e=>r.includes(e)))})),{})}]})),h=()=>p({onFinish:(e,t,l,a)=>{a&&m.setOccupation(a),T.value=`${l}`,m.startDate=e,m.endDate=t,F()}});return r((()=>!l.value.length&&h())),(e,a)=>(n(),u(o(c),null,{default:i((()=>[s(_,{"icon-url":o(t),subtitle:T.value,title:"TPT Outcome","report-prefix":"Clinic",columns:P,onConfigure:h,columnData:l.value,rowsPerPage:100,onRefresh:F},null,8,["icon-url","subtitle","columnData"])])),_:1}))}}))}}}));
