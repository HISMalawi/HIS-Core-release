System.register(["./index-legacy-CA6M7ipO.js"],(function(t,r){"use strict";var e;return{setters:[t=>{e=t.cy}],execute:function(){t("S",class extends e{stock;constructor(){super(),this.stock=[]}async loadStock(){this.stock=await this.getReport("pharmacy/items",{paginate:!1})}getStockReport(){return e.getJson("pharmacy/stock_report",{paginate:!1})}getStockCardReport(){return this.getReport(`programs/${this.programID}/reports/stock_card`)}loadTrail(){return this.getReport("pharmacy/audit_trail/grouped")}getTrailDetails(t,r,e){return this.getReport("pharmacy/audit_trail",{transaction_date:t,drug_id:r,transaction_reason:e})}getScCurrReport(){return this.getReport("programs/1/reports/sc_curr")}getDiscrepancyReport(){return this.getReport(`programs/${this.programID}/reports/discrepancy_report`)}groupStock(){const t={};for(const r in this.stock){const e=this.stock[r],a=e.drug_id;t[a]||(t[a]={current_quantity:0,dispensed_quantity:0,pack_size:e.pack_size,drug_name:null===e.drug_name?e.drug_legacy_name:e.drug_name}),0!==e.current_quantity&&(t[a].current_quantity+=parseFloat(e.current_quantity),e.dispensed_quantity&&(t[a].dispensed_quantity+=parseFloat(e.dispensed_quantity)))}return Object.values(t).map((t=>{let r="0";return r=null==t.pack_size?t.current_quantity+"(tabs)":Math.trunc(t.current_quantity/t.pack_size),{drugName:t.drug_name,quantintyDispensed:t.dispensed_quantity,currentQuantity:r,quantityIsTabs:null===t.pack_size}}))}})}}}));
