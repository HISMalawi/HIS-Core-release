import{_ as l}from"./EncounterMixin.vue_vue_type_script_lang-Bfd5amPg.js";import{F as d}from"./dynamic-import-helper-BkBZiFw5.js";import{b5 as p,aS as u,d as m,I as h,V as f,ab as a,_,r as i,o as g,c as C,w as b,b as y}from"./index-BCTN_bnC.js";import"./encounter_guidelines-DZpIPlYY.js";import"./GuidelineEngine-D6V1_Znr.js";import"./HisStandardForm-CaDwl-hA.js";import"./TouchScreenForm-TKB9q3ZD.js";import"./ToolbarMediumCard-O_J6wu7C.js";import"./Transformers-BPPLlH12.js";import"./ViewPort-BCxYiILf.js";class o extends p{constructor(n,s){super(n,83,s)}static surgicalHistoryOptions(){return u.getConceptsByCategory("anc_surgical_history").sort((n,s)=>n.name>s.name?1:-1)}}const v=m({components:{IonPage:h},mixins:[l],data:()=>({formFields:[],service:{}}),watch:{ready:{handler(e){e&&(this.formFields=this.getFields())},immediate:!0}},methods:{async onFinish(e,n){const s=await this.resolveObs(n),t=new o(this.patientID,this.providerID);await t.createEncounter(),await t.saveObservationList(s),this.nextTask()},surgeryOptions(e){return[...o.surgicalHistoryOptions(),{name:"None"}].map(n=>e({label:n.name,value:"Yes",isChecked:!1}))},getFields(){return[{id:"history",helpText:"Previous Surgical Procedure(s) Done",type:d.TT_MULTIPLE_SELECT,validation:e=>f.required(e),onValueUpdate:(e,n)=>{if(n.label==="None"&&n.isChecked)return e.map(s=>(s.label!="None"&&(s.isChecked=!1),s));if(n.label!="None"&&n.isChecked){const s=a.findIndex(e,{label:"None"});e[s].isChecked=!1}return e},computedValue:e=>a.find(e,{label:"None"})?o.buildValueText("Procedure done","None"):e.map(n=>o.buildValueCoded(n.label,"".concat(n.value))),options:()=>this.surgeryOptions(e=>e),config:{footerBtns:[{name:"None",slot:"end",onClickComponentEvents:{refreshOptions:()=>this.surgeryOptions(e=>(e.isChecked=e.label==="None",e))},onClick:()=>"None"}]}}]}}});function k(e,n,s,t,F,N){const r=i("his-standard-form"),c=i("ion-page");return g(),C(c,null,{default:b(()=>[y(r,{fields:e.formFields,skipSummary:!0,onFinishAction:e.onFinish,cancelDestinationPath:e.cancelDestination},null,8,["fields","onFinishAction","cancelDestinationPath"])]),_:1})}const $=_(v,[["render",k]]);export{$ as default};
