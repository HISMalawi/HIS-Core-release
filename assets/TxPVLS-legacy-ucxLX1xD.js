System.register(["./ReportMixin.vue_vue_type_script_lang-legacy--yJoaiAf.js","./TableReportTemplate-legacy-BLZlHJOF.js","./index-legacy-Dab_9-0G.js","./viral_load_report-legacy-C1SXePHu.js","./ArtDrilldown-legacy-BGvL9CtQ.js","./MultiFieldDateHelper-legacy-CrZfaPmm.js","./dynamic-import-helper-legacy-DYK5bIOV.js","./KbLayouts-legacy-BKvPSxzZ.js","./HisKbConfigurations-legacy-vrLd9Pgz.js","./BasicReportTemplate-legacy-DES9wN70.js","./Export-legacy-7JpF_x1y.js","./SIngleTouchField-legacy-BU52wpZr.js","./Pagination-legacy-B-7QKc1e.js","./HisStandardForm-legacy-a-GAw9o3.js","./TouchScreenForm-legacy-BrA5VXvB.js","./ToolbarMediumCard-legacy-tyMOM4tZ.js","./Transformers-legacy-DhNYVLaS.js","./ViewPort-legacy-kf7cSfpw.js","./ReportErrors-legacy-DZ77uX63.js","./TableView-legacy-CZ9vjgom.js","./PopupKeyboard-legacy-C5PTaqV_.js","./HisKeypad-legacy-D8ALIHJF.js","./BaseKeyboard-legacy-DL8gpzKP.js","./KbHandler-legacy-De8o5nTq.js","./fuse-legacy-CQoBB3MK.js","./HisKeyboard-legacy-BXmQHvU9.js"],(function(t,e){"use strict";var l,o,i,r,s,a,n,d,h,u,g,c,w,_,p,D;return{setters:[t=>{l=t._},t=>{o=t.R},t=>{i=t.d,r=t.I,s=t.L,a=t.O,n=t.ab,d=t.cz,h=t._,u=t.r,g=t.o,c=t.c,w=t.w,_=t.b},t=>{p=t.V},t=>{D=t.A},null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null],execute:function(){const e=i({mixins:[l],components:{ReportTemplate:o,IonPage:r},data:()=>({cohort:{},rows:[],totals:{F:{},M:{}},columns:[[s.thTxt("Age group"),s.thTxt("Gender"),s.thTxt("TX_CURR"),s.thTxt("Due for VL"),s.thTxt("Routine (Sample Drawn)"),s.thTxt("Targeted (Sample Drawn)"),s.thTxt("Routine (High VL (>=1000 copies))"),s.thTxt("Targeted High VL (>=1000 copies)"),s.thTxt("Routine (Low VL (<1000 copies))"),s.thTxt("Targeted (Low VL (<1000 copies))")]]}),created(){this.fields=this.getDateDurationFields()},methods:{async onPeriod(t,e){this.rows=[],this.totals={F:{},M:{}},this.report=new p,this.report.setOccupation(e.occupation),this.report.setStartDate(e.start_date),this.report.setEndDate(e.end_date),this.period=this.report.getDateIntervalPeriod(),this.cohort=await this.report.getVLCoverage(),await this.setRows("F"),await this.setRows("M"),this.setAllMalesTotalsRow(),await this.setFemaleTotalsRow()},setTotals(t,e,l){this.totals[e][t]||(this.totals[e][t]=[]),this.totals[e][t]=this.totals[e][t].concat(l)},drillDown(t,e){return t.length>=1?s.tdLink(t.length,(async()=>(await a.create({component:D,backdropDismiss:!1,cssClass:"large-modal",componentProps:{subtitle:this.period,patientIdentifiers:t,title:e,onFinish:()=>a.getTop().then((t=>t&&a.dismiss()))}})).present())):s.td(0)},async setFemaleTotalsRow(){const t=this.totals.F,e=n.uniq(Object.values(t).flat(1)),l=await this.report.getMaternalStatus(e),o=l.FBf.concat(l.FP),i=(t,e)=>e.filter((e=>l[t].includes(e))),r=t=>t.filter((t=>!o.includes(t)));this.rows.push([s.td("All"),s.td("FP"),this.drillDown(i("FP",t.tx_curr),"TX_CURR FP"),this.drillDown(i("FP",t.due_for_vl),"Due for VL FP"),this.drillDown(i("FP",t.drawn_routine),"Routine (Sample Drawn) FP"),this.drillDown(i("FP",t.drawn_targeted),"Targetted (Sample Drawn) FP"),this.drillDown(i("FP",t.high_vl_routine),"Routine (High VL (>=1000 copies)) FP"),this.drillDown(i("FP",t.high_vl_targeted),"Targeted High VL (>=1000 copies) FP"),this.drillDown(i("FP",t.low_vl_routine),"Routine (Low VL (<1000 copies)) FP"),this.drillDown(i("FP",t.low_vl_targeted),"Targeted (Low VL (<1000 copies)) FP")]),this.rows.push([s.td("All"),s.td("FNP"),this.drillDown(r(t.tx_curr),"TX_CURR FNP"),this.drillDown(r(t.due_for_vl),"Due for VL FNP"),this.drillDown(r(t.drawn_routine),"Routine (Sample Drawn) FNP"),this.drillDown(r(t.drawn_targeted),"Targetted (Sample Drawn) FNP"),this.drillDown(r(t.high_vl_routine),"Routine (High VL (>=1000 copies)) FNP"),this.drillDown(r(t.high_vl_targeted),"Targeted High VL (>=1000 copies) FNP"),this.drillDown(r(t.low_vl_routine),"Routine (Low VL (<1000 copies)) FNP"),this.drillDown(r(t.low_vl_targeted),"Targeted (Low VL (<1000 copies)) FNP")]),this.rows.push([s.td("All"),s.td("FBF"),this.drillDown(i("FP",t.tx_curr),"TX_CURR FBf"),this.drillDown(i("FBf",t.due_for_vl),"Due for VL FBf"),this.drillDown(i("FBf",t.drawn_routine),"Routine (Sample Drawn) FBf"),this.drillDown(i("FBf",t.drawn_targeted),"Targetted (Sample Drawn) FBf"),this.drillDown(i("FBf",t.high_vl_routine),"Routine (High VL (>=1000 copies)) FBf"),this.drillDown(i("FBf",t.high_vl_targeted),"Targeted High VL (>=1000 copies) FBf"),this.drillDown(i("FBf",t.low_vl_routine),"Routine (Low VL (<1000 copies)) FBf"),this.drillDown(i("FBf",t.low_vl_targeted),"Targeted (Low VL (<1000 copies)) FBf")])},setAllMalesTotalsRow(){const t=this.totals.M;return this.rows.push([s.td("All"),s.td("Male"),this.drillDown(t.tx_curr,"TX_CURR Male"),this.drillDown(t.due_for_vl,"Due for VL Male"),this.drillDown(t.drawn_routine,"Routine (Sample Drawn) Male"),this.drillDown(t.drawn_targeted,"Targetted (Sample Drawn) Male"),this.drillDown(t.high_vl_routine,"Routine (High VL (>=1000 copies)) Male"),this.drillDown(t.high_vl_targeted,"Targeted High VL (>=1000 copies) Male"),this.drillDown(t.low_vl_routine,"Routine (Low VL (<1000 copies)) Male"),this.drillDown(t.low_vl_targeted,"Targeted (Low VL (<1000 copies)) Male")])},async setRows(t){const e=this.formatGender(t);for(const l of d){const o=(e,l,o)=>(this.setTotals(e,t,l),this.drillDown(l,o));this.rows.push([s.td(l),s.td(e),o("tx_curr",n.get(this.cohort,`${l}.${t}.tx_curr`,[]),`${l} TX_CURR (${e})`),o("due_for_vl",n.get(this.cohort,`${l}.${t}.due_for_vl`,[]),`${l} Due for VL (${e})`),o("drawn_routine",n.get(this.cohort,`${l}.${t}.drawn.routine`,[]),`${l} Routine (Sample Drawn) (${e}s)`),o("drawn_targeted",n.get(this.cohort,`${l}.${t}.drawn.targeted`,[]),`${l} Targeted (Sample Drawn) (${e}s)`),o("high_vl_routine",n.get(this.cohort,`${l}.${t}.high_vl.routine`,[]),`${l} Routine (High VL (>=1000 copies)) (${e}s)`),o("high_vl_targeted",n.get(this.cohort,`${l}.${t}.high_vl.targeted`,[]),`${l} Targeted High VL (>=1000 copies) (${e}s)`),o("low_vl_routine",n.get(this.cohort,`${l}.${t}.low_vl.routine`,[]),`${l} Routine (Low VL (<1000 copies)) (${e}s)`),o("low_vl_targeted",n.get(this.cohort,`${l}.${t}.low_vl.targeted`,[]),`${l} Targeted (Low VL (<1000 copies)) (${e}s)`)])}}}});t("default",h(e,[["render",function(t,e,l,o,i,r){const s=u("report-template"),a=u("ion-page");return g(),c(a,null,{default:w((()=>[_(s,{title:"PEPFAR TX_PVLS Report",period:t.period,rows:t.rows,fields:t.fields,columns:t.columns,config:{showIndex:!0},reportPrefix:"PEPFAR",onReportConfiguration:t.onPeriod},null,8,["period","rows","fields","columns","onReportConfiguration"])])),_:1})}]]))}}}));
