System.register(["./index-legacy-CA6M7ipO.js","./TableView-legacy-HvCLjlYb.js","./aetc_report_service-legacy-BOR-qUl3.js","./DrillPatientIds-legacy-CmmE-3VB.js","./Export-legacy-SGgsNE3Q.js","./index-legacy-DZOKxSjk.js","./TableView-legacy-2WevvWny.js"],(function(e,a){"use strict";var t,r,l,n,u,o,s,i,g,p,v,c,d,_,D,h,$,S,b,T;return{setters:[e=>{t=e.d,r=e.r,l=e.I,n=e.cJ,u=e.o,o=e.aE,s=e.bC,i=e.ci,g=e.au,p=e.ad,v=e.ae,c=e.aa,d=e.c,_=e.w,D=e.af,h=e.a,$=e.b},e=>{S=e.v},e=>{b=e.A},e=>{T=e.D},null,null,null],execute:function(){const a=r([]),y=r(""),m=r(""),w=r(""),f=r(!1),M=r(""),k=r(""),E=r(""),Y=r(""),L=t({components:{IonPage:l,IonLoading:n,v2Datatable:S},setup(){const e=async()=>{const e=new b;e.startDate=y.value,e.endDate=m.value,e.startAge=k.value,e.endAge=E.value,e.reportType=Y.value;try{const t=await e.getClinicReport("OPD GENERAL");a.value=t}catch(t){console.log(t)}},t=e=>e.map((e=>({label:e,value:e}))),r=[[{label:"No",ref:"",value:(e,a)=>++a},{label:"Data Element",ref:"",value:e=>e.diagnosis},{label:"Value",ref:"",value:e=>e.patients.length,tdClick:({column:e,data:a})=>(async(e,a)=>{a.length<=0||(await g.create({component:T,backdropDismiss:!1,cssClass:"large-modal",componentProps:{title:e,subtitle:w,patientIdentifiers:a,onFinish:()=>g.getTop().then((e=>e&&g.dismiss()))}})).present()})(`${e.secondaryLabel} ${a.diagnosis} `,a.patients)}]],l=()=>o([{id:"start_age",helpText:"Start Age",type:p.TT_NUMBER,computedValue:e=>e.value,validation:e=>v.required(e)},{id:"end_age",helpText:"End Age",type:p.TT_NUMBER,computedValue:e=>e.value,validation:e=>v.required(e)},{id:"report_type",helpText:"Report type",type:p.TT_SELECT,computedValue:e=>e.value,options:()=>[{label:"General Outpatient",value:"General Outpatient"},{label:"Pediatrics",value:"Pediatrics"},{label:"General Diagnoses",value:"General Diagnoses"},{label:"Pediatrics Diagnosis",value:"Pediatrics Diagnosis"}]},{id:"report_range",helpText:"Select Range",type:p.TT_SELECT,computedValue:e=>e.value,options:()=>[{label:"Week",value:"Week"},{label:"Month",value:"Month"},{label:"Quarter",value:"Quarter"},{label:"Year",value:"Year"},{label:"Select Range",value:"Select-Range"}]},{id:"report_range_year",helpText:"Select Year",type:p.TT_SELECT,condition:e=>"Year"===e.report_range.value||"Month"===e.report_range.value||"Week"===e.report_range.value,computedValue:e=>e.label,options:()=>{const e=(()=>{let e=[];const a=(new Date).getFullYear();for(let t=2008;t<=a;t++)e.push(t+"");return e.reverse()})();return[...t(e)]}},{id:"report_range_quaters",helpText:"Select Quater",type:p.TT_SELECT,condition:e=>"Quarter"===e.report_range.value,computedValue:e=>e.value,options:()=>{const e=(()=>{let e=[];const a=(new Date).getFullYear(),t=(new Date).getMonth()+1,r=t<=3?1:t<=6?2:t<=9?3:4;for(let l=2008;l<=a;l++)for(let t=1;t<=4;t++)(l<a||l===a&&t<=r)&&e.push(`Q${t} ${l}`);return e.reverse()})();return[...t(e)]}},{id:"start_date",helpText:"Start Date",type:p.TT_FULL_DATE,validation:e=>v.required(e),computedValue:e=>e.value,condition:e=>"Select-Range"===e.report_range.value},{id:"report_range_month",helpText:"Select Month",type:p.TT_SELECT,validation:e=>v.required(e),computedValue:e=>e.value,condition:e=>"Month"===e.report_range.value,options:()=>[{label:"January",value:"01"},{label:"February",value:"02"},{label:"March",value:"03"},{label:"April",value:"04"},{label:"May",value:"05"},{label:"June",value:"06"},{label:"July",value:"07"},{label:"August",value:"08"},{label:"September",value:"09"},{label:"October",value:"10"},{label:"November",value:"11"},{label:"December",value:"12"}]},{id:"report_range_week",helpText:"Select Week",type:p.TT_SELECT,condition:e=>{const a=(new Date).getFullYear()+"";return"Week"===e.report_range.value&&e.report_range_year.value===a},options:()=>[{label:"This Week",value:"This Week"},{label:"Last Week",value:"Last Week"},{label:"This Month",value:"This Month"},{label:"Last Month",value:"Last Month"},{label:"All Dates",value:"All Dates"}]}],((a,t)=>{if("Month"===a.report_range?.value&&(y.value=`${t.report_range_year}-${t.report_range_month}-01`,m.value=s(new Date(y.value).toISOString()).endOf("month").format("YYYY-MM-DD")),"Select-Range"===a.report_range?.value&&(y.value=`${a.year.value}-${a.month.value}-01`,m.value=s(new Date(y.value).toISOString()).endOf("month").format("YYYY-MM-DD")),"Year"===a.report_range?.value&&(y.value=`${t.report_range_year}-01-01`,m.value=`${t.report_range_year}-12-31`),"Week"===a.report_range?.value&&"This Week"===a.report_range_week?.value){const e=new Date,a=e.getFullYear(),t=String(e.getMonth()+1).padStart(2,"0"),r=new Date(e);r.setDate(e.getDate()-e.getDay());const l=new Date(e);l.setDate(e.getDate()+(6-e.getDay()));const n=`${a}-${t}-${String(r.getDate()).padStart(2,"0")}`,u=`${a}-${t}-${String(l.getDate()).padStart(2,"0")}`;y.value=n,m.value=u}if("Week"===a.report_range?.value&&"Last Week"===a.report_range_week?.value){const e=new Date;e.setDate(e.getDate()-7);const a=e.getFullYear(),t=String(e.getMonth()+1).padStart(2,"0"),r=new Date(e);r.setDate(e.getDate()-e.getDay());const l=new Date(e);l.setDate(e.getDate()+(6-e.getDay()));const n=`${a}-${t}-${String(r.getDate()).padStart(2,"0")}`,u=`${a}-${t}-${String(l.getDate()).padStart(2,"0")}`;y.value=n,m.value=u}if("Week"===a.report_range?.value&&"This Month"===a.report_range_week?.value){const e=new Date,a=e.getFullYear(),t=String(e.getMonth()+1).padStart(2,"0"),r=`${a}-${t}-01`,l=new Date(a,e.getMonth()+1,0),n=`${a}-${t}-${String(l.getDate()).padStart(2,"0")}`;y.value=r,m.value=n}if("Week"===a.report_range?.value&&"Last Month"===a.report_range_week?.value){const e=new Date,a=e.getFullYear(),t=e.getMonth()+1,r=1===t?12:t-1,l=12===r?a-1:a,n=new Date(a,t-1,0),u=`${l}-${String(r).padStart(2,"0")}-01`,o=`${l}-${String(r).padStart(2,"0")}-${String(n.getDate()).padStart(2,"0")}`;y.value=u,m.value=o}if("Week"===a.report_range?.value&&"All Dates"===a.report_range_week?.value){const e=new Date,a=e.getFullYear(),t=`${a}-01-01`,r=`${a}-${String(e.getMonth()+1).padStart(2,"0")}-${String(e.getDate()).padStart(2,"0")}`;y.value=t,m.value=r}if("Quarter"===a.report_range?.value){const e=t.report_range_quaters.split(" "),a=parseInt(e[0].slice(1),10),r=parseInt(e[1],10),l={1:`${r}-01-01`,2:`${r}-04-01`,3:`${r}-07-01`,4:`${r}-10-01`},n={1:`${r}-03-31`,2:`${r}-06-30`,3:`${r}-09-30`,4:`${r}-12-31`};y.value=l[a],m.value=n[a]}"Week"===a.report_range?.value&&a.report_range_year?.value<(new Date).getFullYear()&&(y.value=`${a.report_range_year.value}-01-01`,m.value=`${a.report_range_year.value}-12-31`),k.value=t.start_age,E.value=t.end_age,Y.value=t.report_type,w.value=`Period (${i(y.value)} to ${i(m.value)})`,g.dismiss(),M.value=`${i(y.value)} to ${i(m.value)}`,e()}));return u((()=>!a.value.length&&l())),{columns:r,isLoading:f,reportData:a,period:w,csvQuarter:M,csvheaders:["Data Element","Value"],generate:e,configure:l}}});e("default",c(L,[["render",function(e,a,t,r,l,n){const u=D("ion-loading"),o=D("v2Datatable"),s=D("ion-page");return h(),d(s,null,{default:_((()=>[$(u,{"is-open":e.isLoading,message:"Please wait..."},null,8,["is-open"]),$(o,{title:"OPD General Report",subtitle:e.period,columns:e.columns,columnData:e.reportData,rowsPerPage:25,onConfigure:e.configure,csvQuarter:e.csvQuarter,headers:e.csvheaders,onRefresh:()=>e.generate()},null,8,["subtitle","columns","columnData","onConfigure","csvQuarter","headers","onRefresh"])])),_:1})}]]))}}}));
