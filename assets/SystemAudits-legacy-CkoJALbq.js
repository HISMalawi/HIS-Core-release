System.register(["./index-legacy-DSKrJPb4.js","./TableView-legacy-pveuSPT-.js","./v2utils-legacy-BhSnSaHx.js","./Export-legacy-Defb4cZ5.js","./index-legacy-Dsgb7BqY.js"],(function(e,t){"use strict";var a,l,u,r,n,s,i,o,c,d,b,m,f,g,p,v;return{setters:[e=>{a=e.d,l=e.r,u=e.o,r=e.a,n=e.c,s=e.w,i=e.b,o=e.u,c=e.H,d=e.D,b=e.f,m=e.i,f=e.U},e=>{g=e.v},e=>{p=e.s,v=e.w},null,null],execute:function(){e("default",a({__name:"SystemAudits",setup(e){const t=l([]),a=l(""),y=l(""),h=l(""),w=m("reports.png"),j=[[{label:"Encounter",ref:"auditable_type"},{label:"Action Type",ref:"action"},{label:"User",ref:"user",toValue:e=>e?`${e.username} (${e.name})`:""},{label:"Timestamp",ref:"created_at",toValue:c.toStandardHisDisplayFormat},{label:"Changes",ref:"changes",toValue:e=>e?.length??0,tdClick:async e=>{const t=e.data.changes.map((e=>{const[t,a]=Object.entries(e)[0]||[];return t?/password/i.test(t)?{attribute:t,previous:"*******",current:"*******"}:{attribute:t,...a}:null})).filter((e=>null!==e));await p({title:`Changes made by ${e.data.user.name} on ${e.data.auditable_type}`,columns:[[{label:"Attribute",ref:"attribute"},{label:"Previous Value",ref:"previous"},{label:"Current Value",ref:"current"}]],columnData:t})}}]],V=()=>v((async()=>{t.value=await f.getAuditReports(y.value,h.value)})),_=()=>d({onFinish:(e,t,l)=>{a.value=`${l}`,y.value=e,h.value=t,V()}});return u((()=>!t.value.length&&_())),(e,l)=>(r(),n(o(b),null,{default:s((()=>[i(g,{"default-sort-order":"asc","default-sorted-column":"encounter",title:"System Audits","icon-url":o(w),subtitle:a.value,columns:j,columnData:t.value,rowsPerPage:20,onConfigure:_,onRefresh:V},null,8,["icon-url","subtitle","columnData"])])),_:1}))}}))}}}));
