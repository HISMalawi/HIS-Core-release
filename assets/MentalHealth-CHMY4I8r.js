import{O as h,M as p}from"./opd_report_service-BmCqMKke.js";import{R as c}from"./BaseTableReport-pCexZJJD.js";import{d as f,a5 as d,ao as e,cO as y,a6 as C,ab as m,u as v,v as _,w,x}from"./index-V3uTS3yc.js";import{_ as D}from"./ReportMixin.vue_vue_type_script_lang-D7RYEyvZ.js";import"./Export-B8Bbah0c.js";import"./index-B5Adarov.js";import"./HisStandardForm-tDUNqryU.js";import"./BasicReportTemplate-9mV3OXdC.js";import"./Pagination-BYCSA2WH.js";const T=f({components:{ReportTemplate:c,IonPage:d},mixins:[D],data:()=>({title:"Mental health report",rows:[],reportService:{},columns:[[e.thTxt("",{sortable:!1,exportable:!1}),e.thTxt("New cases",{colspan:4,sortable:!1,exportable:!1}),e.thTxt("Subsequent cases",{colspan:4,sortable:!1,exportable:!1})],[e.thTxt("Diagnosis"),e.thTxt("Male (0-15 years)",{value:"Males (0-15 years New Cases)"}),e.thTxt("Male (>=16 years)",{value:"Males (>=16 years New Cases)"}),e.thTxt("Female (0-15 years)",{value:"Females (0-15 years New Cases)"}),e.thTxt("Female (>=16 years)",{value:"Females (>=16 years New Cases)"}),e.thTxt("Male (0-15 years)",{value:"Males (0-15 years Subsequent Cases)"}),e.thTxt("Male (>=16 years)",{value:"Males (>=16 years Subsequent Cases)"}),e.thTxt("Female (0-15 years)",{value:"Females (0-15 years Subsequent Cases)"}),e.thTxt("Female (>=16 years)",{value:"Females (>=16 years Subsequent Cases)"})]]}),created(){this.fields=this.getDateDurationFields()},methods:{async init(t,s){this.reportService=new h,this.reportService.setStartDate(s.start_date),this.reportService.setEndDate(s.end_date),this.period=this.reportService.getDateIntervalPeriod();const l=await this.reportService.getMentalHealth();this.rows=this.buildRows(l)},buildRows(t){return p.map(s=>[e.td(s,{style:{textAlign:"left"}}),this.toDrillColumn(t,s,"M","0-15 years",!0),this.toDrillColumn(t,s,"M",">=16 years",!0),this.toDrillColumn(t,s,"F","0-15 years",!0),this.toDrillColumn(t,s,"F",">=16 years",!0),this.toDrillColumn(t,s,"M","0-15 years"),this.toDrillColumn(t,s,"M",">=16 years"),this.toDrillColumn(t,s,"F","0-15 years"),this.toDrillColumn(t,s,"F",">=16 years")])},getAgeGroup(t){return t<16?"0-15 years":">=16 years"},toDrillColumn(t,s,l,i,u=!1){const o=t.filter(r=>r.name===s&&r.gender===l&&this.getAgeGroup(r.age)===i&&(u?/new patient/i.test(r.type_of_visit):!0));if(o.length){const r=[[e.thTxt("Name"),e.thTxt("Birthdate (Age)"),e.thTxt("Address")]],n=o.map(a=>[e.td("".concat(a.given_name," ").concat(a.family_name)),e.td("".concat(y(a.birthdate)," (").concat(a.age,")")),e.td("".concat(a.village,", ").concat(a.ta,", ").concat(a.district))]);return e.tdLink(o.length,()=>this.drilldownData("".concat(i," ").concat(this.formatGender(l)," patients with ").concat(s),r,n,void 0))}return e.td(0)}}});function M(t,s,l,i,u,o){const r=m("report-template"),n=m("ion-page");return v(),_(n,null,{default:w(()=>[x(r,{title:t.title,rows:t.rows,fields:t.fields,columns:t.columns,period:t.period,reportPrefix:"Clinic",onReportConfiguration:t.init},null,8,["title","rows","fields","columns","period","onReportConfiguration"])]),_:1})}const H=C(T,[["render",M]]);export{H as default};
