System.register(["./index-legacy-B-IGLekl.js","./hts_art_initiation_service-legacy-CSnBHFYW.js","./HisStandardForm-legacy-zrsmj5en.js"],(function(e,t){"use strict";var n,a,i,o,l,r,u,s,d,c,f,p,m,T,b,_;return{setters:[e=>{n=e.d,a=e.a5,i=e.r,o=e.ei,l=e.a9,r=e.bY,u=e.d8,s=e.aN,d=e.a6,c=e.v,f=e.w,p=e.ab,m=e.u,T=e.x},e=>{b=e.H},e=>{_=e.H}],execute:function(){const t=n({components:{IonPage:a,HisStandardForm:_},setup(){const e=i([]),t=new b(-1),{toOption:n,yesNoOptions:a,saveEncounter:d,patientDashboardUrl:c}=o({onInitVisit:()=>{e.value=[{id:"is_referral",helpText:"Referral for ART (Re-)Initiation",type:l.TT_YES_NO,isRequired:()=>!0,finalComputedValue:e=>({obs:t.buildValueText("ART referral",e)}),options:()=>[{label:"Do you want to refer client?",value:"",values:a()}]},{id:"art_site",helpText:"Intended Site for ART",type:l.TT_SELECT,isRequired:()=>!0,finalComputedValue:({label:e})=>({obs:t.buildValueText("Referral location",e)}),options:(e,t="")=>r(t),condition:e=>"Yes"===e.is_referral,defaultValue:()=>b.getLocationName(),config:{footerBtns:[{name:"Here",slot:"end",onClickComponentEvents:{setValue:()=>b.getLocationName()},onClick:()=>null}],showKeyboard:!0,isFilterDataViaApi:!0}},{id:"art_appointment_date",helpText:"Appointment Date for ART Referral",type:l.TT_DATE_PICKER,isRequired:()=>!0,defaultValue:()=>t.date,condition:e=>"Yes"===e.is_referral,finalComputedValue:e=>({obs:t.buildValueDate("Appointment date",`${e.value}`)}),config:{minDate:()=>t.date,infoItems:e=>[{label:"Set appointment date",value:u(e)}],hiddenFooterBtns:["Clear"]}},f(),{id:"art_outcome_field",helpText:"Art outcome",type:l.TT_HIDDEN,defaultValue:()=>n("Unknown"),finalComputedValue:e=>({obs:t.buildValueCoded("Antiretroviral status or outcome",e.value)})}]}});function f(){let e=[];return{id:"linkage_code",helpText:"LINKAGE CODE",type:l.TT_LINKAGE_CODE,isRequired:()=>!0,validation:t=>t?.other?.isValidLinkageCode?null:(e=s.uniq(e.concat(`${t.value}`)),["Invalid Scanform linkage code"]),condition:e=>"Yes"===e.is_referral,finalComputedValue:n=>({obs:[t.buildValueText("HTC Serial number",`${n.value}`),...e.map((e=>t.buildValueText("Invalid",e)))]})}}return{patientDashboardUrl:c,onFinish:function(e,n){d({encounterName:"ART Enrollment",encounterTypeID:t.encounterTypeID,computedData:n})},fields:e}}});e("default",d(t,[["render",function(e,t,n,a,i,o){const l=p("his-standard-form"),r=p("ion-page");return m(),c(r,null,{default:f((()=>[T(l,{formLabel:"ART (Re-) Initiation",fields:e.fields,onFinishAction:e.onFinish,cancelDestinationPath:e.patientDashboardUrl()},null,8,["fields","onFinishAction","cancelDestinationPath"])])),_:1})}]]))}}}));
