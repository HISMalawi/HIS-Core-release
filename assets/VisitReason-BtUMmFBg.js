import{R as d}from"./BaseTableReport-ctgX6onn.js";import{d as m,a5 as u,ao as s,a6 as f,ab as p,u as h,v as _,w as R,x as S}from"./index-CyYd6aWW.js";import{_ as w}from"./ReportMixin.vue_vue_type_script_lang-bNARcyGN.js";import{C as v}from"./cxca_report_service-TSm2GksK.js";import"./HisStandardForm-CuX9K_Ib.js";const g=m({components:{ReportTemplate:d,IonPage:u},mixins:[w],data:()=>({title:"Visit reasons",rows:[],reportService:{},columns:[[s.thTxt(""),s.thTxt("Reason"),s.thTxt("Number")]]}),created(){this.fields=this.getDateDurationFields()},methods:{async init(t,r){this.reportService=new v,this.reportService.setStartDate(r.start_date),this.reportService.setEndDate(r.end_date);const e=await this.reportService.getClinicReport("VISIT REASONS");this.rows=this.buildRows(e)},buildRows(t){const r=[],e={},a=["Initial Screening","Postponed treatment","One year subsequent check-up after treatment","Subsequent screening","Problem visit after treatment","Referral"];let c=1;for(const o of a){e[o]==null&&(e[o]=[]);for(const n of t){const i=n.reason,l=n.patient_id;i==o&&e[i].push(l)}}for(const o in e)r.push([s.td(c++),s.td(o),s.td(e[o].length)]);return r}}});function C(t,r,e,a,c,o){const n=p("report-template"),i=p("ion-page");return h(),_(i,null,{default:R(()=>[S(n,{title:t.title,rows:t.rows,fields:t.fields,columns:t.columns,period:t.period,onReportConfiguration:t.init},null,8,["title","rows","fields","columns","period","onReportConfiguration"])]),_:1})}const x=f(g,[["render",C]]);export{x as default};
