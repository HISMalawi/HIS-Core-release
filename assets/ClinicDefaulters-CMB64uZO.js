import{d as C,r as s,o as V,a as k,c as w,w as L,b as x,u as v,cr as y,cq as i,D as A,f as B,i as I,t as T,d9 as G}from"./index-4ZhJu3VE.js";import{v as P}from"./TableView-al7pPq3G.js";import{D as R}from"./defaulters_report_service-CDD5D_Fz.js";import{b as S,w as q}from"./v2utils-D-WXYwWm.js";import"./Export--AC_4hfU.js";import"./index-CoZ4oawq.js";const z=C({__name:"ClinicDefaulters",setup(E){const $=I("reports.png"),t=s([]),u=s(""),o=s([]),a=new R;a.setIsPepfar(!1);const h=[[S(),{label:"First name",ref:"given_name",encrypted:!0},{label:"Last name",ref:"family_name",encrypted:!0},{label:"Gender",ref:"gender",toValue:e=>y(e)},{label:"Birthdate",ref:"birthdate",toValue:e=>"".concat(i(e))},{label:"Appointment date",ref:"appointment_date",toValue:e=>"".concat(i(e))},{label:"Date defaulted",ref:"defaulter_date",toValue:e=>"".concat(i(e))},{label:"Address",ref:"district",encrypted:!0,exportedValue:{dataValue:e=>{var r,n,l,f,m,p,b,g,D,_;return"\n                Cell: ".concat((n=(r=e.data)==null?void 0:r.cell_number)!=null?n:"-",",\n                Village: ").concat((f=(l=e.data)==null?void 0:l.village)!=null?f:"-",", \n                District: ").concat((p=(m=e.data)==null?void 0:m.district)!=null?p:"-",", \n                TA: ").concat((g=(b=e.data)==null?void 0:b.ta)!=null?g:"-",", \n                Landmark: ").concat((_=(D=e.data)==null?void 0:D.land_mark)!=null?_:"-"," \n            ")}},value:e=>(e.cell_number?"CELL: ".concat(e.cell_number," <br/>"):"")+(e.village?"VILLAGE: ".concat(e.village," <br/>"):"")+(e.district?"DISTRICT: ".concat(e.district," <br/>"):"")+(e.ta?"TA: ".concat(e.ta," <br/>"):"")+(e.landmark?"Landmark: ".concat(e.landmark):"")}]],d=()=>q(async()=>{if(!(a.startDate&&a.endDate))return T("Start date and end date required!");o.value=[],t.value=[],t.value=await a.getDefaulters(),o.value=[{text:"Total defaulters: <b>".concat(t.value.length,"</b>"),icon:G,color:"primary"}]}),c=()=>A({onFinish:(e,r,n,l)=>{l&&a.setOccupation(l),u.value="".concat(n),a.startDate=e,a.endDate=r,d()}});return V(()=>!t.value.length&&c()),(e,r)=>(k(),w(v(B),null,{default:L(()=>[x(P,{"default-sort-order":"asc","default-sorted-column":"arv_number","icon-url":v($),title:"Clinic Defaulters Report","report-prefix":"Clinic",subtitle:u.value,columns:h,columnData:t.value,rowsPerPage:50,onConfigure:c,onRefresh:d,headerBadge:o.value},null,8,["icon-url","subtitle","columnData","headerBadge"])]),_:1}))}});export{z as default};
