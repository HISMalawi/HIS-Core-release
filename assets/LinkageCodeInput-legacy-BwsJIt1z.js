System.register(["./index-legacy-fdrleUji.js","./HisKeyboard-legacy-C_C_WURj.js","./FieldMixin.vue_vue_type_script_lang-legacy-CbEnk_wF.js"],(function(e,o){"use strict";var t,i,l,n,a,c,r,d,u,s,h,g,p,k,m,y,N,b,f,v,D,w,_,$,x,C;return{setters:[e=>{t=e.d,i=e.bj,l=e.ap,n=e.aq,a=e.ao,c=e.bk,r=e.dA,d=e.M,u=e.aa,s=e.K,h=e.cm,g=e.ab,p=e.am,k=e.br,m=e._,y=e.r,N=e.o,b=e.x,f=e.b,v=e.w,D=e.ax,w=e.c,_=e.z,$=e.B},e=>{x=e.H},e=>{C=e._}],execute:function(){var o=document.createElement("style");o.textContent="#view-port[data-v-8f7eef67]{height:53vh}.highlighted-input[data-v-8f7eef67]{color:#3880ff;border-bottom:3px solid #3880ff}\n",document.head.appendChild(o);const V={B:0,F:1,G:2,H:3,J:4,P:5,V:6,W:7,X:8,Z:9},I=[[0,3,1,7,5,9,8,6,4,2],[7,0,9,2,1,5,4,8,6,3],[4,2,0,6,8,7,1,3,5,9],[1,7,5,0,9,8,3,4,2,6],[6,1,2,3,0,4,5,9,7,8],[3,6,7,4,2,0,9,5,8,1],[5,8,6,9,7,2,0,1,3,4],[8,9,4,5,3,6,2,0,1,7],[9,4,3,8,6,1,7,2,0,5],[2,5,8,1,4,3,6,7,9,0]];function K(e,o){const t=o-`${e}`.length;return t<=0?`${e}`:`${Array.from({length:t}).map((()=>0)).join("")}${e}`}function M(e){const[o,t,i,l]=e.split("-");if(!(o&&t&&i&&l))return!1;const n=K(parseInt(t),3),a=K(parseInt(i),2),c=V[l.toUpperCase()];return function(e){e.match(/^\d+$/)||(e=e.replace(/\D/g,""));let o=0;for(let t=0;t<e.length;t++){const i=e.charAt(t);o=I[o][i]}return`${o}`}(`${o}-${n}-${a}`)===`${c}`}const L=t({components:{IonInput:i,IonRow:l,IonCol:n,IonGrid:a,HisKeyboard:x,ViewPort:c},mixins:[C],watch:{clear(){this.checkDigit.bookNo="",this.checkDigit.pageNo="",this.checkDigit.rowNo="",this.checkDigit.checkDigit="",this.activeMask="bookNo",this.showKeyboard=!0}},setup(e,{emit:o}){r((()=>o("onFieldActivated",this)));const t={bookNo:5,checkDigit:1,pageNo:3,rowNo:2},i=d((()=>"HIS_KEYBOARD_ONLY"===u().activePlatformProfile.value.keyboard)),l=s("bookNo"),n=s(!0),a=d((()=>{const e=[k,[["Delete"],["Clear"]]];return{bookNo:e,pageNo:e,rowNo:e,checkDigit:[[["B","F","G"],["H","J","P"],["V","W","X"],["","Z",""]],[["Delete"],["Clear"]]]}[l.value]})),c=h({bookNo:"",pageNo:"",rowNo:"",checkDigit:""});return g(c,(e=>{const t=`${e.bookNo}-${e.pageNo}-${e.rowNo}-${e.checkDigit}`;o("onValue",{label:t,value:`${e.bookNo}${e.pageNo}${e.rowNo}${e.checkDigit}`,other:{isValidLinkageCode:M(t)}})}),{deep:!0}),{activeMask:l,checkDigit:c,showKeyboard:n,inputIsReadOnly:i,inputLengthLimit:t,activeKeyboard:a,onClickMask:function(e){l.value=e,n.value=!0},onKeyPress:function(e){if(l.value){const o=t[l.value]||0,i=p(e,1===o?"":`${c[l.value]}`);(o<=1||`${i}`.length<=o)&&(c[l.value]=i)}}}}});e("default",m(L,[["render",function(e,o,t,i,l,n){const a=y("ion-input"),c=y("ion-col"),r=y("ion-row"),d=y("ion-grid"),u=y("view-port"),s=y("his-keyboard");return N(),b($,null,[f(u,{showFull:!1},{default:v((()=>[f(d,null,{default:v((()=>[f(r,null,{default:v((()=>[f(c,null,{default:v((()=>[f(a,{mode:"md",readonly:e.inputIsReadOnly,inputmode:"numeric",type:"number",onClick:o[0]||(o[0]=o=>e.onClickMask("bookNo")),modelValue:e.checkDigit.bookNo,"onUpdate:modelValue":o[1]||(o[1]=o=>e.checkDigit.bookNo=o),style:{textAlign:"center"},placeholder:"Book No.",class:D([{"highlighted-input":"bookNo"===e.activeMask},"input_display"])},null,8,["readonly","modelValue","class"])])),_:1}),f(c,null,{default:v((()=>[f(a,{mode:"md",readonly:e.inputIsReadOnly,type:"number",inputmode:"numeric",maxlength:e.inputLengthLimit.pageNo,onClick:o[2]||(o[2]=o=>e.onClickMask("pageNo")),modelValue:e.checkDigit.pageNo,"onUpdate:modelValue":o[3]||(o[3]=o=>e.checkDigit.pageNo=o),style:{textAlign:"center"},placeholder:"Page No.",class:D([{"highlighted-input":"pageNo"===e.activeMask},"input_display"])},null,8,["readonly","maxlength","modelValue","class"])])),_:1}),f(c,null,{default:v((()=>[f(a,{mode:"md",readonly:e.inputIsReadOnly,inputmode:"numeric",type:"number",maxlength:e.inputLengthLimit.rowNo,onClick:o[4]||(o[4]=o=>e.onClickMask("rowNo")),modelValue:e.checkDigit.rowNo,"onUpdate:modelValue":o[5]||(o[5]=o=>e.checkDigit.rowNo=o),class:D([{"highlighted-input":"rowNo"===e.activeMask},"input_display"]),style:{textAlign:"center"},placeholder:"Row No."},null,8,["readonly","maxlength","modelValue","class"])])),_:1}),f(c,null,{default:v((()=>[f(a,{mode:"md",readonly:e.inputIsReadOnly,maxlength:e.inputLengthLimit.checkDigit,onClick:o[6]||(o[6]=o=>e.onClickMask("checkDigit")),class:D([{"highlighted-input":"checkDigit"===e.activeMask},"input_display"]),modelValue:e.checkDigit.checkDigit,"onUpdate:modelValue":o[7]||(o[7]=o=>e.checkDigit.checkDigit=o),style:{textAlign:"center"},placeholder:"Check digit"},null,8,["readonly","maxlength","class","modelValue"])])),_:1})])),_:1})])),_:1})])),_:1}),e.showKeyboard?(N(),w(s,{key:0,onKeyPress:e.onKeyPress,kbConfig:e.activeKeyboard},null,8,["onKeyPress","kbConfig"])):_("",!0)],64)}],["__scopeId","data-v-8f7eef67"]]))}}}));
