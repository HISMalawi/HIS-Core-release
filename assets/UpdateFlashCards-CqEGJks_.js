import{d as u,v as m,n as b,z as x,au as y,U as v,aD as w,am as o,ak as _,ap as p,a as f,b as c,w as k,e as T,a6 as N}from"./index-3BeNlo1y.js";import{H as $}from"./HisStandardForm-D73p5TNy.js";const B=u({name:"UpdateFlashCards",components:{IonPage:b,IonLoading:m,HisStandardForm:$},data(){return{fields:[],isLoading:!0,currentVersion:"",updateNotes:[],notesPerPage:3}},methods:{generateWelcomeBanner(){return{id:"welcome_banner",helpText:"",type:o.TT_TEXT_BANNER,config:{hiddenFooterBtns:["Clear"]},options:async()=>[{label:"Welcome to Version ".concat(this.currentVersion),value:'<div style="text-align: center; padding: 40px 30px; background: linear-gradient(135deg, #1e3c72 0%, #2a5298 100%); border-radius: 20px; color: white; box-shadow: 0 10px 40px rgba(30,60,114,0.3);">\n                <div style="font-size: 4em; margin-bottom: 20px;">ğŸ‰</div>\n                <h2 style="margin: 0; font-size: 2.5em; font-weight: 800; margin-bottom: 15px; letter-spacing: -0.5px;">What\'s New!</h2>\n                <div style="height: 4px; width: 60px; background: linear-gradient(90deg, #00d4ff, #0099ff); margin: 20px auto; border-radius: 2px;"></div>\n                <p style="font-size: 1.4em; margin: 20px 0 5px 0; font-weight: 600; letter-spacing: 0.5px;">\n                  HIS-Core <span style="background: linear-gradient(135deg, #00d4ff, #0099ff); -webkit-background-clip: text; -webkit-text-fill-color: transparent; font-weight: 800;">'.concat(this.currentVersion,'</span>\n                </p>\n                <p style="color: rgba(255,255,255,0.85); font-size: 1.1em; margin: 20px 0 0 0; font-weight: 400; letter-spacing: 0.3px;">\n                  Explore the latest improvements and features\n                </p>\n              </div>')}]}},generateUpdateBanners(){if(this.updateNotes.length===0)return[{id:"no_updates_banner",helpText:"No Update Details",type:o.TT_TEXT_BANNER,config:{hiddenFooterBtns:["Clear"]},options:async()=>[{label:"No update details available",value:'<div style="text-align: center; padding: 40px; background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%); border-radius: 16px; color: white;">\n                    <div style="font-size: 2.5em; margin-bottom: 15px;">ğŸ“</div>\n                    <p style="font-size: 1.1em; font-weight: 500;">No update details available for this version.</p>\n                  </div>'}]}];const e={0:"âš¡",1:"ğŸš€",2:"ğŸ’¡",3:"ğŸ› ï¸",4:"ğŸ¯",5:"âœ¨",6:"ğŸ”¥",7:"ğŸ“ˆ",8:"ğŸ¨",9:"ğŸŒŸ"},n=[{bg:"linear-gradient(135deg, #0052cc 0%, #0066ff 100%)",text:"#ffffff",border:"#0052cc"},{bg:"linear-gradient(135deg, #d4145a 0%, #fbb03b 100%)",text:"#ffffff",border:"#d4145a"},{bg:"linear-gradient(135deg, #009688 0%, #26a69a 100%)",text:"#ffffff",border:"#009688"},{bg:"linear-gradient(135deg, #6c63ff 0%, #8b5cf6 100%)",text:"#ffffff",border:"#6c63ff"},{bg:"linear-gradient(135deg, #ff6b35 0%, #f7931e 100%)",text:"#ffffff",border:"#ff6b35"}],r=[];for(let t=0;t<this.updateNotes.length;t+=this.notesPerPage)r.push(this.updateNotes.slice(t,t+this.notesPerPage));return r.map((t,a)=>({id:"update_page_".concat(a),helpText:"Updates ".concat(a*this.notesPerPage+1,"-").concat(Math.min((a+1)*this.notesPerPage,this.updateNotes.length)," of ").concat(this.updateNotes.length),type:o.TT_TEXT_BANNER,config:{hiddenFooterBtns:["Clear"]},options:async()=>{const g=t.map((s,d)=>{const i=a*this.notesPerPage+d,h=e[i%10]||"âœ“",l=n[i%5];return'<div style="padding: 24px; background: '.concat(l.bg,"; border-radius: 16px; margin-bottom: 16px; box-shadow: 0 8px 32px rgba(0,0,0,0.12); border-left: 6px solid ").concat(l.border,'; transition: all 0.3s ease; position: relative; overflow: hidden;">\n              <div style="position: absolute; top: 0; right: 0; width: 100px; height: 100px; background: rgba(255,255,255,0.08); border-radius: 50%; transform: translate(30%, -30%);"></div>\n              <div style="display: flex; align-items: flex-start; gap: 18px; position: relative; z-index: 1;">\n                <div style="font-size: 2.2em; flex-shrink: 0; line-height: 1; filter: drop-shadow(0 2px 4px rgba(0,0,0,0.1));">\n                  ').concat(h,'\n                </div>\n                <div style="flex: 1;">\n                  <span style="color: ').concat(l.text,'; font-size: 1.15em; line-height: 1.7; font-weight: 600; word-break: break-word; display: block; letter-spacing: 0.3px;">\n                    ').concat(s,"\n                  </span>\n                </div>\n              </div>\n            </div>")}).join("");return[{label:"Page ".concat(a+1),value:'<div style="padding: 16px;">\n                '.concat(g,"\n              </div>")}]}}))},generateAgreementBanner(){return{id:"user_agreement",helpText:"Acknowledgment",type:o.TT_TEXT_BANNER,config:{hiddenFooterBtns:["Clear"]},options:async()=>[{label:"User Agreement",value:'<div style="text-align: center; padding: 40px 30px; background: linear-gradient(135deg, #2d3436 0%, #636e72 100%); border-radius: 16px; color: white; box-shadow: 0 10px 40px rgba(0,0,0,0.2);">\n                <div style="font-size: 2.5em; margin-bottom: 20px;">âœ“</div>\n                <h3 style="margin: 0 0 15px 0; font-size: 1.5em; font-weight: 700;">Acknowledgment Required</h3>\n                <div style="height: 3px; width: 50px; background: linear-gradient(90deg, #00d4ff, #0099ff); margin: 15px auto; border-radius: 2px;"></div>\n                <p style="color: rgba(255,255,255,0.9); font-size: 1.05em; margin: 20px 0; line-height: 1.6; font-weight: 400;">\n                  By clicking the <strong>Finish</strong> button, you acknowledge that you have read and reviewed all the updates presented.\n                </p>\n                <div style="background: rgba(255,255,255,0.1); border-left: 4px solid #00d4ff; padding: 15px; border-radius: 8px; margin-top: 20px; font-size: 0.95em;">\n                  <p style="margin: 0; color: rgba(255,255,255,0.85);">Please ensure you understand all changes before proceeding.</p>\n                </div>\n              </div>'}]}},async loadUpdateNotes(){try{this.currentVersion=w.version;const e=await fetch("/updates/".concat(this.currentVersion,".md"));if(e.ok){const n=await e.text();this.updateNotes=this.parseMarkdown(n)}this.fields=[this.generateWelcomeBanner(),...this.generateUpdateBanners(),this.generateAgreementBanner()],this.isLoading=!1}catch(e){console.error("Error loading update notes:",e),this.fields=[{id:"error_banner",helpText:"Error",type:o.TT_TEXT_BANNER,config:{hiddenFooterBtns:["Clear"]},options:async()=>[{label:"Error",value:'<div style="text-align: center; padding: 30px; color: #d32f2f;">\n                    <p>Failed to load update notes. Please try again.</p>\n                  </div>'}]}],this.isLoading=!1}},parseMarkdown(e){return e.split("\n").map(n=>{var r;return(r=n.match(/^-\s+(.+)$/))==null?void 0:r[1]}).filter(Boolean)},async onFormFinish(){if(await y("Are you sure you acknowledge the update notes?")){try{await v.postJson("user_properties",{property:"his_core_update_acknowledged",property_value:"".concat(this.currentVersion,"|").concat(new Date().toISOString())})}catch(e){console.error("Error tracking update acknowledgment:",e)}location.href="/select_hc_location";return}},async closeModal(){await x.dismiss()}},async mounted(){await this.loadUpdateNotes()}});function F(e,n,r,t,a,g){const s=p("ion-loading"),d=p("his-standard-form"),i=p("ion-page");return c(),f(i,null,{default:k(()=>[T(s,{"is-open":e.isLoading,message:"Loading update notes..."},null,8,["is-open"]),e.isLoading?N("",!0):(c(),f(d,{key:0,fields:e.fields,skipSummary:!0,onFinishAction:e.onFormFinish},null,8,["fields","onFinishAction"]))]),_:1})}const A=_(B,[["render",F],["__scopeId","data-v-bcebedbf"]]);export{A as default};
