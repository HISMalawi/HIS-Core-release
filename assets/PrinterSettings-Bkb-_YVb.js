import{d as h,an as g,M as y,r as s,a9 as _,t as D,O as b,u as S,v as w,y as T}from"./index-ATRrruTT.js";import{H as k}from"./HisStandardForm-7DlnDJZP.js";import{i as x}from"./isEmpty-DB6b62pN.js";const E=h({__name:"PrinterSettings",setup(B){const d=g(),a=new y,r=s({}),i=s([]),o=s(0),l=s(!1),m=[{id:"printer_settings",helpText:"Printer Settings",type:_.TT_TABLE_VIEWER,options:()=>[{label:"Available Devices",value:"",other:{rowColors:P(),columns:["Available Devices"],rows:i.value.map(e=>[e.name||e.address,{type:"button",name:"Print Test Label",action:()=>a.printTestLbl(e)},n(e)?"Default Printer":{type:"button",name:"Set as Default",visible:!n(e),action:()=>v(e)}])}}],config:{hiddenFooterBtns:["Clear"],footerBtns:[{name:"Refresh",size:"large",slot:"end",color:"warning",visible:!0,onClick:c}]}}];D(async()=>{r.value=await a.getDefaultPrinter()||{},i.value.push(r.value),c()});async function c(){if(l.value)return b("Please wait...");l.value=!0;const e=await a.getAllPrinters();i.value=p(e),l.value=!1,o.value=Math.random()}function f(e,t){return(e.name||e.address).localeCompare(t.name||t.address)}function v(e){a.setDefaultPrinter(e),r.value=e,o.value=Math.random()}function n(e){return f(e,r.value)===0}function p(e){return e.sort((t,u)=>n(t)&&!n(u)?-1:!n(t)&&n(u)?1:f(t,u))}function P(){return x(r.value)?[]:[{indexes:[0],class:"adherence-txt-good adherence-col-bg bold"}]}return(e,t)=>(S(),w(k,{formID:"printer_settings",fields:m,onFinish:T(d).back,skipSummary:!0,key:o.value},null,8,["onFinish"]))}});export{E as default};
