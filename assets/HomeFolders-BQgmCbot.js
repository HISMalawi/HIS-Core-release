import{T as F}from"./TaskCard-D9zFRKAy.js";import{d as O,r as _,aN as U,o as V,ay as T,a as r,O as b,b as d,w as i,R as m,Q as g,c as x,u as c,d4 as H,M as z,a7 as P,d5 as R,a8 as j,a9 as G,i as Q,b3 as $,aP as q,b0 as w}from"./index-4ZhJu3VE.js";const W=O({__name:"HomeFolders",props:{items:Object,resetList:Number},emits:["onSublist"],setup(I,{emit:A}){const M=A,p=I,u=_(),v=_({}),f=_([]);function h(a,t=[],o="",e={}){return a.reduce((s,n)=>{var k,B,C,E;if(n.files&&!q.isEmpty(n.files)){const D={...(k=e[n.name])!=null?k:{}},N=[...t,n.name];s[n.name]||(s[n.name]={_breadcrumb:[],...n}),s[n.name]=h(n.files,N,(B=n.defaultFilesIcon)!=null?B:n.icon,D),s[n.name]._breadcrumb=N,s[n.name]._visible=n.condition?n.condition():!0,s[n.name]._icon=(C=n.icon)!=null?C:o}else s[n.name]=n,s[n.name].icon=(E=n.icon)!=null?E:o,s[n.name]._visible=n.condition?n.condition():!0;return s},{...e})}async function l(a){u.value=a,T.set("ACTIVE_HOME_SUB_TAB_NAME",u.value);const t=y(a,0,v.value);await S(t),M("onSublist")}async function S(a){var t;f.value=[];for(const o in a){const e=a[o];await e._visible&&f.value.push({name:o,icon:(t=e._icon)!=null?t:e.icon,action:()=>{typeof e.action=="function"?e.action():e._breadcrumb?l(e._breadcrumb):e.pathUrl?w.push(e.pathUrl):e.pathName&&w.push({name:e.pathName})}})}}function L(a){var o;const t=((o=u.value)!=null?o:[]).filter((e,s)=>s<=a);l(t)}function y(a,t=0,o={}){if(a[0]==="")return o;const e=a[t],s=t+1;let n=o[e];return s<a.length&&(n=y(a,s,n)),n}return U(()=>p.resetList,()=>l([""])),V(async()=>{var a,t;v.value=h((a=p.items)!=null?a:[]),l((t=await T.get("ACTIVE_HOME_SUB_TAB_NAME"))!=null?t:[""])}),(a,t)=>(r(),b(m,null,[d(c(R),null,{default:i(()=>[(r(!0),b(m,null,g(u.value,(o,e)=>(r(),x(c(H),{onClick:s=>L(e),key:e,class:"his-md-text"},{default:i(()=>[z(P(o),1)]),_:2},1032,["onClick"]))),128))]),_:1}),d(c($),null,{default:i(()=>[d(c(j),null,{default:i(()=>[(r(!0),b(m,null,g(f.value,(o,e)=>(r(),x(c(G),{key:e,"size-lg":"4","size-sm":"12"},{default:i(()=>[d(F,{onClick:o.action,title:o.name,icon:c(Q)(o.icon)},null,8,["onClick","title","icon"])]),_:2},1024))),128))]),_:1})]),_:1})],64))}});export{W as default};
