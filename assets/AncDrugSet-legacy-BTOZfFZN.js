System.register(["./index-legacy-CA6M7ipO.js","./HisStandardForm-legacy-a9YJRGaH.js","./drug_service-legacy-3ReNvnsd.js","./anc_treatment_service-legacy-BPBETgJO.js","./anc_drug_set-legacy-D7TW15fH.js","./drug_order_service-legacy-3VUXkHbj.js"],(function(e,t){"use strict";var a,i,n,r,s,d,l,u,o,c,g,m,p,v,y;return{setters:[e=>{a=e.d,i=e.I,n=e.R,r=e.W,s=e.ad,d=e.ae,l=e.aa,u=e.af,o=e.a,c=e.c,g=e.w},e=>{m=e.H},e=>{p=e.D},e=>{v=e.D},e=>{y=e.A},null],execute:function(){const t=a({components:{HisStandardForm:m,IonPage:i},data:()=>({hisFormKey:0,fields:[],allDrugs:[],fieldComponent:"",service:{}}),created(){this.fields=this.getFields()},methods:{async onFinish(e,t){try{if(await y.saveDrugSet(t))return n("Drugset saved successfully"),this.$router.back();r("Unable to save drugset")}catch(a){r(`${a}`)}},getFields:()=>[{id:"name",helpText:"Enter drug set name",type:s.TT_TEXT,computedValue:e=>e.value,validation:e=>d.validateSeries([()=>d.required(e),()=>`${e.value}`.match(/^([a-zA-Z_ ]{2,17})'?-?([a-zA-Z_ ]{1,17})$/)?null:["Enter a valid drug set name."]])},{id:"description",helpText:"Drug set description",type:s.TT_TEXT,computedValue:e=>e.value,validation:e=>d.validateSeries([()=>d.required(e),()=>`${e.value}`.match(/^([a-zA-Z_ ]{2,100})'?-?([a-zA-Z_ ]{1,100})$/)?null:["Enter a valid drug set description"]])},{id:"drug_selection",helpText:"Select drugs to add",type:s.TT_ASYNC_MULTI_SELECT,options:async(e,t="")=>(await p.getDrugs({page_size:20,name:t})).map((e=>({label:e.name,value:e.id,other:{drug:e.name,quantity:0,frequency:""}}))),validation:e=>d.required(e)},{id:"drugs",helpText:"Set drugs",type:s.TT_ANC_DRUGSET_INPUT,computedValue:e=>e.map((e=>e.other)),validation:e=>d.validateSeries([()=>d.required(e),()=>e.map((e=>e.other.quantity&&e.other.frequency)).every(Boolean)?null:["Data is not complete"]]),options:e=>e.drug_selection,config:{drugFrequencies:Object.keys(v).map((e=>({label:e,value:e})))}}]}});e("default",l(t,[["render",function(e,t,a,i,n,r){const s=u("his-standard-form"),d=u("ion-page");return o(),c(d,null,{default:g((()=>[(o(),c(s,{key:e.hisFormKey,activeField:e.fieldComponent,skipSummary:!0,fields:e.fields,onOnIndex:t[0]||(t[0]=t=>e.fieldComponent=""),onOnFinish:e.onFinish},null,8,["activeField","fields","onOnFinish"]))])),_:1})}]]))}}}));
