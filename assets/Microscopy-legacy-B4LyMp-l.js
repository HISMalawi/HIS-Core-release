System.register(["./index-legacy-CA6M7ipO.js","./HisStandardForm-legacy-a9YJRGaH.js","./useEncounter-legacy-CgHUO1ZL.js","./commons-legacy-BqS3TQTP.js","./isEmpty-legacy-cRrH0Hs5.js","./encounter_guidelines-legacy-Bcz_Mw7r.js","./GuidelineEngine-legacy-KsvQuFdF.js"],(function(e,a){"use strict";var t,l,i,d,o,u,n,_,s,p,c,r,T,E,S,v,O;return{setters:[e=>{t=e.d,l=e.r,i=e.bQ,d=e.bV,o=e.ar,u=e.ad,n=e.d$,_=e.ae,s=e.a,p=e.c,c=e.w,r=e.b,T=e.u,E=e.I},e=>{S=e.H},e=>{v=e.u},e=>{O=e.r},null,null,null],execute:function(){e("default",t({__name:"Microscopy",setup(e){const a=l([]),t=new i(-1,d.LAB_RESULTS),m=o(),{goToNextTask:A,patientDashboardUrl:C}=v(((e,l)=>{t.patientID=l,t.providerID=e;const i=e=>({id:`sample${e}PhysicalAppearance`,helpText:`Sample ${e} Physical Appearance:`,type:u.TT_SELECT,computedValue:a=>({concept_id:n(`SAMPLE_${e.toUpperCase()}_MICROSCOPY_PHYSICAL_APPEARANCE`),value_coded:n(`${a.value}`),obs_datetime:t.date}),validation:e=>_.required(e),options:()=>[{value:"MUCO_PURULENT",label:"Muco-purulent"},{value:"BLOOD_STAINED",label:"Blood-stained"},{value:"SALIVA",label:"Saliva"},{value:"OTHER",label:"Other"}]}),d=e=>({id:`sample${e}Procedure`,helpText:`Sample ${e} Procedure:`,type:u.TT_SELECT,computedValue:a=>({concept_id:n(`SAMPLE_${e.toUpperCase()}_MICROSCOPY_PROCEDURE`),value_coded:n(`${a.value}`),obs_datetime:t.date}),validation:e=>_.required(e),options:()=>[{value:"ZIEHL_NEELSEN",label:"Ziehl-Neelsen"},{value:"FLUORESCENCE",label:"Fluorescence"}]}),o=e=>({id:`sample${e}Result`,helpText:`Sample ${e} Result:`,type:u.TT_SELECT,computedValue:a=>({concept_id:n(`SAMPLE_${e.toUpperCase()}_MICROSCOPY_RESULT`),value_coded:n(`${a.value}`),obs_datetime:t.date}),validation:e=>_.required(e),options:()=>[{value:"AFB_POSITIVE",label:"AFB Positive"},{value:"AFB_NEGATIVE",label:"AFB Negative"}]}),s=e=>({id:`sample${e}Grading`,helpText:`Sample ${e} Grading:`,type:u.TT_SELECT,validation:e=>_.required(e),condition:a=>"AFB_POSITIVE"===a[`sample${e}Result`].value,computedValue:a=>({concept_id:n(`SAMPLE_${e.toUpperCase()}_MICROSCOPY_GRADING`),value_text:a.value,obs_datetime:t.date}),options:()=>[{value:"1+",label:"1+"},{value:"2+",label:"2+"},{value:"3+",label:"3+"},{value:"OTHER",label:"Other"}]}),p=e=>({id:`sample${e}OtherGrading`,helpText:`Sample ${e} Other Grading:`,type:u.TT_TEXT,computedValue:a=>({concept_id:n(`SAMPLE_${e.toUpperCase()}_MICROSCOPY_GRADING`),value_text:a.value,obs_datetime:t.date}),validation:e=>_.required(e),condition:a=>"OTHER"===a[`sample${e}Grading`].value}),c=e=>({id:`sample${e}BaciliSeen`,type:u.TT_NUMBER,helpText:`Sample ${e} no. Of Bacilli Seen:`,computedValue:a=>({concept_id:n(`SAMPLE_${e.toUpperCase()}_NUMBER_OF_BACILI_SEEN`),value_numeric:a.value,obs_datetime:t.date}),validation:e=>_.required(e),condition:a=>"OTHER"===a[`sample${e}Grading`].value}),r=e=>({id:`sample${e}ResultDate`,helpText:`Sample ${e} Result Date:`,type:u.TT_FULL_DATE,computedValue:a=>({concept_id:n(`SAMPLE_${e.toUpperCase()}_MICROSCOPY_RESULT_DATE`),value_datetime:a.value,obs_datetime:t.date}),validation:e=>_.validateSeries([()=>_.required(e),()=>_.dateRangeOf(e,`${m.query.date}`,t.date)])});a.value=[i("One"),d("One"),o("One"),s("One"),p("One"),c("One"),r("One"),i("Two"),d("Two"),o("Two"),s("Two"),p("Two"),c("Two"),r("Two")]}));function R(e){const a=[];return"AFB_POSITIVE"===e.sampleOneResult.value||"AFB_POSITIVE"===e.sampleTwoResult.value?(a.push({concept_id:n("TB_TYPE"),value_coded:n("PULMONARY_TB"),obs_datetime:t.date}),a.push({concept_id:n("TB_STATUS"),value_coded:n("POSITIVE"),obs_datetime:t.date}),a.push({concept_id:n("TUBERCULOSIS_CLASS"),value_coded:n("All Other"),obs_datetime:t.date})):a.push({concept_id:n("TB_STATUS"),value_coded:n("NEGATIVE"),obs_datetime:t.date}),a.push({concept_id:n("BACTERIOLOGICALLY_DIAGNOSED"),value_coded:n("YES_ANSWER"),obs_datetime:t.date}),a.push({concept_id:n("PROCEDURE_TYPE"),value_coded:n("MICROSCOPY"),obs_datetime:t.date}),a}async function P(e,a){await t.createEncounter(),await t.saveObservationList([...R(e),...await O(a)]),A()}return(e,t)=>(s(),p(T(E),null,{default:c((()=>[r(S,{cancelDestinationPath:T(C),onFinishAction:P,fields:a.value,skipSummary:!0},null,8,["cancelDestinationPath","fields"])])),_:1}))}}))}}}));
