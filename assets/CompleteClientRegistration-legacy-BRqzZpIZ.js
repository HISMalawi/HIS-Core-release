System.register(["./index-legacy-Ck8hVlzC.js","./HisStandardForm-legacy-OroqgFde.js","./PersonFieldHelper-legacy-CUctGHgl.js","./LocationFieldOptions-legacy-UgaUiM8M.js","./storage-legacy-CIkBlJKf.js"],(function(e,n){"use strict";var i,t,r,a,l,o,s,u,d,c,g,m,f,h,v;return{setters:[e=>{i=e.d,t=e.I,r=e.K,a=e.dF,l=e.t,o=e.ai,s=e.aV,u=e._,d=e.r,c=e.o,g=e.c,m=e.w,f=e.b},e=>{h=e.H},e=>{v=e.P},null,null],execute:function(){const n=i({components:{IonPage:t,HisStandardForm:h},setup(){const e=r([]),{htsClient:n}=a(),{visitData:i,visitID:t,nextTask:u,patientDashboardUrl:d}=a({onInitVisit:async()=>{if("unknown unknown"!=`${n.givenName} ${n.familyName}`.toLowerCase())return l("Client already registered");e.value=[v.getGivenNameField(),v.getFamilyNameField(),...o(v.getDobConfig()),v.getHomeRegionField(),v.getHomeDistrictField(),v.getHomeTaField(),v.getHomeVillageField(),{...v.getCurrentRegionField(),summaryMapValue:(e,n,i)=>{if(/use home/i.test(`${e.value}`)){const e=i.person;return[{label:"Current region",value:e?.current_region},{label:"Current District/Country",value:e?.current_district},{label:"Current Traditional Authority",value:e?.current_traditional_authority},{label:"Current village",value:e?.current_village}]}return{label:"Current Region",value:e.label}}},{...v.getCurrentDistrictField(),condition:e=>!e.current_region.label.match(/foreign|use home/i)},{...v.getCurrentTAfield(),condition:e=>!e.current_region.label.match(/foreign|use home/i)},{...v.getCurrentVillageField(),condition:e=>!e.current_region.label.match(/foreign|use home/i)},...v.getLandmarkFields(),v.getCellNumberField()]}});return{patientDashboardUrl:d,onFinish:async function(e,r){s().saveOffline({id:t.value,label:"HTS Full Client Registration",personParams:{npid:n.npid,person:{...i.value?.personParams?.person||{},...v.resolvePerson(r)}}}),u(),s().synchronizeRecord(t.value).then((e=>s().saveOffline(e)))},fields:e}}});e("default",u(n,[["render",function(e,n,i,t,r,a){const l=d("his-standard-form"),o=d("ion-page");return c(),g(o,null,{default:m((()=>[f(l,{formLabel:"Additional client information",cancelDestinationPath:e.patientDashboardUrl(),"on-finish-action":e.onFinish,fields:e.fields},null,8,["cancelDestinationPath","on-finish-action","fields"])])),_:1})}]]))}}}));
