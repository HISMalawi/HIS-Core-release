import{d as k,g as b,h as y,C,e as x,_ as v,r as i,o as l,c as r,w as a,b as o,x as w,F,y as O,A as V,v as $}from"./index-DxdybAew.js";import{_ as I}from"./FieldMixin.vue_vue_type_script_lang-9o8ICYs3.js";import{V as g}from"./ViewPort-Bxq2iSVB.js";import{k as E}from"./KbHandler-BuQ4TFU6.js";import{Q as B}from"./HisKbConfigurations-GhFQZvlg.js";import L from"./BaseTextInput-_Z8LlhrL.js";import{H as S}from"./HisKeyboard-CZgk3v_8.js";import{F as D}from"./fuse-YdZE3OCN.js";import"./KbLayouts-VRA-vjeH.js";import"./BaseKeyboard-yRYQiwHX.js";const H=k({components:{ViewPort:g,IonList:b,IonItem:y,IonLabel:C,HisKeyboard:S,HisTextInput:L,IonCheckbox:x},mixins:[I],data:()=>({filter:"",keyboard:B,listOptions:[]}),mounted(){this.init()},activated(){this.init()},watch:{clear(){this.filter="",this.listOptions.forEach(e=>e.isChecked=!1),this.updateValue()}},computed:{displayList(){return this.filter?new D(this.listOptions,{threshold:.4,keys:["label"],useExtendedSearch:!0}).search(this.filter).map(t=>t.item):this.listOptions}},methods:{init(){this.$emit("onFieldActivated",this),this.options(this.fdata).then(e=>this.indexData(e))},updateValue(){this.$nextTick(()=>{this.$emit("onValue",this.listOptions.filter(e=>e.isChecked))})},indexData(e){const t=this.listOptions.map(n=>n.label);e.forEach(n=>{t.includes(n.label)||this.listOptions.push(n)})},onFilter(e){this.filter=e,this.options(this.fdata,this.filter).then(this.indexData)},onSelect(e){this.listOptions.forEach(t=>{t.label===e.label&&(t.isChecked=!t.isChecked)}),this.updateValue()},keypress(e){this.onFilter(E(e,this.filter))}}}),A={class:"his-md-text"};function K(e,t,n,P,T,N){const c=i("his-text-input"),h=i("ion-checkbox"),d=i("ion-label"),m=i("ion-item"),p=i("ion-list"),u=i("his-keyboard"),f=i("view-port");return l(),r(f,{showFull:!1},{default:a(()=>[o(c,{value:e.filter,onOnValue:t[0]||(t[0]=s=>e.onFilter(s))},null,8,["value"]),o(p,{class:"view-port-content"},{default:a(()=>[(l(!0),w(F,null,O(e.displayList,(s,_)=>(l(),r(m,{key:_,onClick:Q=>e.onSelect(s),color:s.isChecked?"lightblue":"",lines:s.isChecked?"none":void 0},{default:a(()=>[o(h,{slot:"start",checked:s.isChecked,disabled:s==null?void 0:s.disabled},null,8,["checked","disabled"]),o(d,null,{default:a(()=>[V("span",A,$(s.label),1)]),_:2},1024)]),_:2},1032,["onClick","color","lines"]))),128))]),_:1}),o(u,{kbConfig:e.keyboard,onKeyPress:e.keypress},null,8,["kbConfig","onKeyPress"])]),_:1})}const X=v(H,[["render",K]]);export{X as default};
