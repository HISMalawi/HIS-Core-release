System.register(["./index-legacy-CQFqr1pm.js","./TableView-legacy-1eHpbrKf.js","./v2utils-legacy-ExzosHcr.js","./Export-legacy-Uq7nKE2g.js","./index-legacy-7TU2vDtU.js"],(function(e,t){"use strict";var n,i,a,l,o,r,s,u,d,c,m,_,h,p,g,f,x;return{setters:[e=>{n=e.d,i=e.da,a=e.r,l=e.t,o=e.u,r=e.v,s=e.w,u=e.x,d=e.y,c=e.cN,m=e.a5,_=e.aH,h=e.O,p=e.dn},e=>{g=e.v},e=>{f=e.w,x=e.s},null,null],execute:function(){e("default",n({__name:"ClinicRetentionReport",setup(e){const t=_("reports.png"),n=new i,v=a([]),C=a(""),b=(e,t)=>({label:e,ref:t,toValue:e=>e.length,tdClick:e=>x({title:`${e.column.label}`,subtitle:C.value,patientIdentifiers:e.refData.map((e=>e.patient_id))})}),y=[[{label:"Age group",ref:"age_group"},{label:"Gender",ref:"gender"},b("Initiated one month","initiated_one_month"),b("Completed one month","completed_one_month"),b("Initiated Three months","initiated_three_months"),b("Completed Three months","completed_three_months"),b("Initiated Six months","initiated_six_months"),b("Completed Six months","completed_six_months")]],D=()=>f((async()=>{if(!n.startDate||!n.endDate)return h("Start date and end date required!");v.value=[];const e=await n.getClientRentention()??{},t=[...p,"Unknown"].reduce(((t,n)=>{const i=t=>{const i=(i,a)=>(e?.[i]?.[a]||[]).filter((e=>e.age_group===n&&e.gender===t));return{initiated_one_month:i("1","all"),completed_one_month:i("1","retained"),initiated_three_months:i("3","all"),completed_three_months:i("3","retained"),initiated_six_months:i("6","all"),completed_six_months:i("6","retained")}};return t.M.push({age_group:n,gender:"Male",...i("M")}),t.F.push({age_group:n,gender:"Female",...i("F")}),t}),{M:[],F:[]});v.value=[...t.F,...t.M]})),w=()=>c({onFinish:(e,t,i,a)=>{a&&n.setOccupation(a),n.startDate=e,n.endDate=t,C.value=`${i}`,D()}});return l((()=>!v.value.length&&w())),(e,n)=>(o(),r(d(m),null,{default:s((()=>[u(g,{"icon-url":d(t),title:"Clinic Retention report","report-prefix":"Clinic",subtitle:C.value,columns:y,columnData:v.value,rowsPerPage:100,onConfigure:w,onRefresh:D},null,8,["icon-url","subtitle","columnData"])])),_:1}))}}))}}}));
