System.register(["./index-legacy-CDoD6Xcl.js","./ReportMixin.vue_vue_type_script_lang-legacy-Ce4jqOih.js","./TableReportTemplate-legacy-CwsTrny1.js","./BasicReportTemplate-legacy-DfG7Mbtd.js","./Export-legacy-j9Ea3GRK.js","./Pagination-legacy-B1uULP7A.js","./HisStandardForm-legacy-BjlwlhLj.js","./ReportErrors-legacy-Bh3aYMG5.js"],(function(t,e){"use strict";var a,n,i,o,s,r,l,d,h,m,u,c,T,p,_,x,f,w,g;return{setters:[t=>{a=t.d,n=t.I,i=t.F,o=t.V,s=t.ag,r=t.ae,l=t.d3,d=t.L,h=t.d4,m=t.S,u=t.H,c=t._,T=t.r,p=t.o,_=t.c,x=t.w,f=t.b},t=>{w=t._},t=>{g=t.R},null,null,null,null,null],execute:function(){const e=a({mixins:[w],components:{ReportTemplate:g,IonPage:n},data:()=>({title:"Data cleaning report",rows:[],columns:[],defaultIndicator:{}}),created(){this.fields=[{id:"indicator",helpText:"Select indicator",type:i.TT_SELECT,requireNext:!1,condition:()=>!this.defaultIndicator,defaultOutput:()=>this.defaultIndicator,validation:t=>o.required(t),options:()=>this.getIndicatorOptions()},...s({id:"start_date",helpText:"Start",required:!0,minDate:()=>"2000-01-01",maxDate:()=>m.getSessionDate(),estimation:{allowUnknown:!1},computeValue:t=>t}),...s({id:"end_date",helpText:"End",required:!0,minDate:(t,e)=>e.start_date,maxDate:()=>m.getSessionDate(),estimation:{allowUnknown:!1},computeValue:t=>t})],this.defaultIndicator=r.find(this.getIndicatorOptions(),{value:this.$route.query.cleaning_tool})||null},methods:{async onPeriod(t,e){const a=t=>u.toStandardHisDisplayFormat(t);this.rows=[],this.title=t.indicator.label;const n=t.indicator;this.columns=n.other.columns,this.report=new l,this.report.setStartDate(e.start_date),this.report.setEndDate(e.end_date),this.period=`${a(e.start_date)} - ${a(e.end_date)}`;const i=await this.report.getDataToolReport(n.value);i&&(this.rows=await Promise.all(i.map((t=>n.other.formatRow(t)))))},showPatientBtn(t){return d.tdBtn("View",(()=>this.$router.push("/patient/dashboard/"+t)))},getIndicatorOptions(){return[{label:"Males with ANC Encounters",value:h.MALES_WITH_ANC_ENCOUNTERS,other:{columns:[[d.thTxt("National ID"),d.thTxt("First name"),d.thTxt("Last name"),d.thTxt("Total Encounters"),d.thTxt("Action")]],formatRow:t=>[d.td(t.identifier),d.td(t.given_name),d.td(t.family_name),d.td(t.total_encounters),this.showPatientBtn(t.patient_id)]}},{label:"Encounters after death",value:h.ENCOUNTERS_AFTER_DEATH,other:{columns:[[d.thTxt("National ID"),d.thTxt("First name"),d.thTxt("Last name"),d.thTxt("Date of death"),d.thTxt("Recent encounter date"),d.thTxt("Count"),d.thTxt("Action")]],formatRow:t=>[d.td(t.identifier),d.td(t.given_name),d.td(t.family_name),d.tdDate(t.patient_died_date),d.tdDate(t.minimum_encounter_datetime),d.td(t.total_encounters),this.showPatientBtn(t.patient_id)]}},{label:"Incomplete visits",value:h.INCOMPLETE_VISITS,other:{columns:[[d.thTxt("National ID"),d.thTxt("Name"),d.thTxt("Visit date"),d.thTxt("Incomplete count"),d.thTxt("Action")]],formatRow:t=>[d.td(t.n_id),d.td(t.name),d.td(t.visit_date),d.td(t.visit_no),this.showPatientBtn(t.patient_id)]}},{label:"Duplicate encounters",value:h.DUPLICATE_ENCOUNTERS,other:{columns:[[d.thTxt("National ID"),d.thTxt("Given name"),d.thTxt("Family name"),d.thTxt("Name"),d.thTxt("Total"),d.thTxt("Action")]],formatRow:t=>[d.td(t.identifier),d.td(t.given_name),d.td(t.family_name),d.td(t.name),d.td(t.total),this.showPatientBtn(t.patient_id)]}},{label:"Missing HIV Status",value:h.MISSING_HIV_STATUS,other:{columns:[[d.thTxt("National ID"),d.thTxt("Given name"),d.thTxt("Family name"),d.thTxt("Action")]],formatRow:t=>[d.td(t.identifier),d.td(t.given_name),d.td(t.family_name),this.showPatientBtn(t.patient_id)]}},{label:"Missing Last Menstrual Period (LMP)",value:h.MISSING_LMP,other:{columns:[[d.thTxt("National ID"),d.thTxt("Given name"),d.thTxt("Family name"),d.thTxt("Action")]],formatRow:t=>[d.td(t.identifier),d.td(t.given_name),d.td(t.family_name),this.showPatientBtn(t.patient_id)]}}]}}});t("default",c(e,[["render",function(t,e,a,n,i,o){const s=T("report-template"),r=T("ion-page");return p(),_(r,null,{default:x((()=>[f(s,{title:t.title,period:t.period,rows:t.rows,fields:t.fields,columns:t.columns,showFilters:!0,onReportConfiguration:t.onPeriod},null,8,["title","period","rows","fields","columns","onReportConfiguration"])])),_:1})}]]))}}}));
